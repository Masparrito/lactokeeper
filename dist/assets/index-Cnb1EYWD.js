var FH=Object.defineProperty;var VH=(t,e,n)=>e in t?FH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Wr=(t,e,n)=>VH(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Bd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vL={exports:{}},Mx={},yL={exports:{}},Mt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tv=Symbol.for("react.element"),BH=Symbol.for("react.portal"),UH=Symbol.for("react.fragment"),WH=Symbol.for("react.strict_mode"),HH=Symbol.for("react.profiler"),KH=Symbol.for("react.provider"),qH=Symbol.for("react.context"),GH=Symbol.for("react.forward_ref"),YH=Symbol.for("react.suspense"),QH=Symbol.for("react.memo"),XH=Symbol.for("react.lazy"),QP=Symbol.iterator;function ZH(t){return t===null||typeof t!="object"?null:(t=QP&&t[QP]||t["@@iterator"],typeof t=="function"?t:null)}var bL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xL=Object.assign,wL={};function Ph(t,e,n){this.props=t,this.context=e,this.refs=wL,this.updater=n||bL}Ph.prototype.isReactComponent={};Ph.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ph.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _L(){}_L.prototype=Ph.prototype;function bj(t,e,n){this.props=t,this.context=e,this.refs=wL,this.updater=n||bL}var xj=bj.prototype=new _L;xj.constructor=bj;xL(xj,Ph.prototype);xj.isPureReactComponent=!0;var XP=Array.isArray,SL=Object.prototype.hasOwnProperty,wj={current:null},AL={key:!0,ref:!0,__self:!0,__source:!0};function EL(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)SL.call(e,r)&&!AL.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:tv,type:t,key:s,ref:a,props:i,_owner:wj.current}}function JH(t,e){return{$$typeof:tv,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function _j(t){return typeof t=="object"&&t!==null&&t.$$typeof===tv}function eK(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ZP=/\/+/g;function V1(t,e){return typeof t=="object"&&t!==null&&t.key!=null?eK(""+t.key):e.toString(36)}function Ky(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case tv:case BH:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+V1(a,0):r,XP(i)?(n="",t!=null&&(n=t.replace(ZP,"$&/")+"/"),Ky(i,e,n,"",function(u){return u})):i!=null&&(_j(i)&&(i=JH(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(ZP,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",XP(t))for(var o=0;o<t.length;o++){s=t[o];var c=r+V1(s,o);a+=Ky(s,e,n,c,i)}else if(c=ZH(t),typeof c=="function")for(t=c.call(t),o=0;!(s=t.next()).done;)s=s.value,c=r+V1(s,o++),a+=Ky(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Kv(t,e,n){if(t==null)return t;var r=[],i=0;return Ky(t,r,"","",function(s){return e.call(n,s,i++)}),r}function tK(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ci={current:null},qy={transition:null},nK={ReactCurrentDispatcher:Ci,ReactCurrentBatchConfig:qy,ReactCurrentOwner:wj};function jL(){throw Error("act(...) is not supported in production builds of React.")}Mt.Children={map:Kv,forEach:function(t,e,n){Kv(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Kv(t,function(){e++}),e},toArray:function(t){return Kv(t,function(e){return e})||[]},only:function(t){if(!_j(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Mt.Component=Ph;Mt.Fragment=UH;Mt.Profiler=HH;Mt.PureComponent=bj;Mt.StrictMode=WH;Mt.Suspense=YH;Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nK;Mt.act=jL;Mt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=xL({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=wj.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)SL.call(e,c)&&!AL.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:tv,type:t.type,key:i,ref:s,props:r,_owner:a}};Mt.createContext=function(t){return t={$$typeof:qH,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:KH,_context:t},t.Consumer=t};Mt.createElement=EL;Mt.createFactory=function(t){var e=EL.bind(null,t);return e.type=t,e};Mt.createRef=function(){return{current:null}};Mt.forwardRef=function(t){return{$$typeof:GH,render:t}};Mt.isValidElement=_j;Mt.lazy=function(t){return{$$typeof:XH,_payload:{_status:-1,_result:t},_init:tK}};Mt.memo=function(t,e){return{$$typeof:QH,type:t,compare:e===void 0?null:e}};Mt.startTransition=function(t){var e=qy.transition;qy.transition={};try{t()}finally{qy.transition=e}};Mt.unstable_act=jL;Mt.useCallback=function(t,e){return Ci.current.useCallback(t,e)};Mt.useContext=function(t){return Ci.current.useContext(t)};Mt.useDebugValue=function(){};Mt.useDeferredValue=function(t){return Ci.current.useDeferredValue(t)};Mt.useEffect=function(t,e){return Ci.current.useEffect(t,e)};Mt.useId=function(){return Ci.current.useId()};Mt.useImperativeHandle=function(t,e,n){return Ci.current.useImperativeHandle(t,e,n)};Mt.useInsertionEffect=function(t,e){return Ci.current.useInsertionEffect(t,e)};Mt.useLayoutEffect=function(t,e){return Ci.current.useLayoutEffect(t,e)};Mt.useMemo=function(t,e){return Ci.current.useMemo(t,e)};Mt.useReducer=function(t,e,n){return Ci.current.useReducer(t,e,n)};Mt.useRef=function(t){return Ci.current.useRef(t)};Mt.useState=function(t){return Ci.current.useState(t)};Mt.useSyncExternalStore=function(t,e,n){return Ci.current.useSyncExternalStore(t,e,n)};Mt.useTransition=function(){return Ci.current.useTransition()};Mt.version="18.3.1";yL.exports=Mt;var N=yL.exports;const q=tn(N);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rK=N,iK=Symbol.for("react.element"),sK=Symbol.for("react.fragment"),aK=Object.prototype.hasOwnProperty,oK=rK.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lK={key:!0,ref:!0,__self:!0,__source:!0};function CL(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)aK.call(e,r)&&!lK.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:iK,type:t,key:s,ref:a,props:i,_owner:oK.current}}Mx.Fragment=sK;Mx.jsx=CL;Mx.jsxs=CL;vL.exports=Mx;var l=vL.exports,WS={},TL={exports:{}},ms={},NL={exports:{}},PL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,Y){var Q=$.length;$.push(Y);e:for(;0<Q;){var ce=Q-1>>>1,ie=$[ce];if(0<i(ie,Y))$[ce]=Y,$[Q]=ie,Q=ce;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var Y=$[0],Q=$.pop();if(Q!==Y){$[0]=Q;e:for(var ce=0,ie=$.length,oe=ie>>>1;ce<oe;){var ve=2*(ce+1)-1,je=$[ve],Se=ve+1,Me=$[Se];if(0>i(je,Q))Se<ie&&0>i(Me,je)?($[ce]=Me,$[Se]=Q,ce=Se):($[ce]=je,$[ve]=Q,ce=ve);else if(Se<ie&&0>i(Me,Q))$[ce]=Me,$[Se]=Q,ce=Se;else break e}}return Y}function i($,Y){var Q=$.sortIndex-Y.sortIndex;return Q!==0?Q:$.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var c=[],u=[],d=1,f=null,h=3,p=!1,g=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _($){for(var Y=n(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=$)r(u),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=n(u)}}function A($){if(m=!1,_($),!g)if(n(c)!==null)g=!0,W(E);else{var Y=n(u);Y!==null&&U(A,Y.startTime-$)}}function E($,Y){g=!1,m&&(m=!1,x(T),T=-1),p=!0;var Q=h;try{for(_(Y),f=n(c);f!==null&&(!(f.expirationTime>Y)||$&&!M());){var ce=f.callback;if(typeof ce=="function"){f.callback=null,h=f.priorityLevel;var ie=ce(f.expirationTime<=Y);Y=t.unstable_now(),typeof ie=="function"?f.callback=ie:f===n(c)&&r(c),_(Y)}else r(c);f=n(c)}if(f!==null)var oe=!0;else{var ve=n(u);ve!==null&&U(A,ve.startTime-Y),oe=!1}return oe}finally{f=null,h=Q,p=!1}}var C=!1,j=null,T=-1,P=5,I=-1;function M(){return!(t.unstable_now()-I<P)}function F(){if(j!==null){var $=t.unstable_now();I=$;var Y=!0;try{Y=j(!0,$)}finally{Y?R():(C=!1,j=null)}}else C=!1}var R;if(typeof w=="function")R=function(){w(F)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,X=H.port2;H.port1.onmessage=F,R=function(){X.postMessage(null)}}else R=function(){y(F,0)};function W($){j=$,C||(C=!0,R())}function U($,Y){T=y(function(){$(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,W(E))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function($){switch(h){case 1:case 2:case 3:var Y=3;break;default:Y=h}var Q=h;h=Y;try{return $()}finally{h=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,Y){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Q=h;h=$;try{return Y()}finally{h=Q}},t.unstable_scheduleCallback=function($,Y,Q){var ce=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ce+Q:ce):Q=ce,$){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=Q+ie,$={id:d++,callback:Y,priorityLevel:$,startTime:Q,expirationTime:ie,sortIndex:-1},Q>ce?($.sortIndex=Q,e(u,$),n(c)===null&&$===n(u)&&(m?(x(T),T=-1):m=!0,U(A,Q-ce))):($.sortIndex=ie,e(c,$),g||p||(g=!0,W(E))),$},t.unstable_shouldYield=M,t.unstable_wrapCallback=function($){var Y=h;return function(){var Q=h;h=Y;try{return $.apply(this,arguments)}finally{h=Q}}}})(PL);NL.exports=PL;var cK=NL.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uK=N,ds=cK;function Oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kL=new Set,Om={};function Gu(t,e){Pf(t,e),Pf(t+"Capture",e)}function Pf(t,e){for(Om[t]=e,t=0;t<e.length;t++)kL.add(e[t])}var Po=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),HS=Object.prototype.hasOwnProperty,dK=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,JP={},ek={};function fK(t){return HS.call(ek,t)?!0:HS.call(JP,t)?!1:dK.test(t)?ek[t]=!0:(JP[t]=!0,!1)}function hK(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function pK(t,e,n,r){if(e===null||typeof e>"u"||hK(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ti(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var ei={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ei[t]=new Ti(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ei[e]=new Ti(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ei[t]=new Ti(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ei[t]=new Ti(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ei[t]=new Ti(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ei[t]=new Ti(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ei[t]=new Ti(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ei[t]=new Ti(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ei[t]=new Ti(t,5,!1,t.toLowerCase(),null,!1,!1)});var Sj=/[\-:]([a-z])/g;function Aj(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Sj,Aj);ei[e]=new Ti(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Sj,Aj);ei[e]=new Ti(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Sj,Aj);ei[e]=new Ti(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ei[t]=new Ti(t,1,!1,t.toLowerCase(),null,!1,!1)});ei.xlinkHref=new Ti("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ei[t]=new Ti(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ej(t,e,n,r){var i=ei.hasOwnProperty(e)?ei[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(pK(e,n,i,r)&&(n=null),r||i===null?fK(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Uo=uK.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qv=Symbol.for("react.element"),Ud=Symbol.for("react.portal"),Wd=Symbol.for("react.fragment"),jj=Symbol.for("react.strict_mode"),KS=Symbol.for("react.profiler"),DL=Symbol.for("react.provider"),IL=Symbol.for("react.context"),Cj=Symbol.for("react.forward_ref"),qS=Symbol.for("react.suspense"),GS=Symbol.for("react.suspense_list"),Tj=Symbol.for("react.memo"),vl=Symbol.for("react.lazy"),OL=Symbol.for("react.offscreen"),tk=Symbol.iterator;function _p(t){return t===null||typeof t!="object"?null:(t=tk&&t[tk]||t["@@iterator"],typeof t=="function"?t:null)}var $n=Object.assign,B1;function Bp(t){if(B1===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);B1=e&&e[1]||""}return`
`+B1+t}var U1=!1;function W1(t,e){if(!t||U1)return"";U1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var c=`
`+i[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=o);break}}}finally{U1=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Bp(t):""}function mK(t){switch(t.tag){case 5:return Bp(t.type);case 16:return Bp("Lazy");case 13:return Bp("Suspense");case 19:return Bp("SuspenseList");case 0:case 2:case 15:return t=W1(t.type,!1),t;case 11:return t=W1(t.type.render,!1),t;case 1:return t=W1(t.type,!0),t;default:return""}}function YS(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Wd:return"Fragment";case Ud:return"Portal";case KS:return"Profiler";case jj:return"StrictMode";case qS:return"Suspense";case GS:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case IL:return(t.displayName||"Context")+".Consumer";case DL:return(t._context.displayName||"Context")+".Provider";case Cj:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Tj:return e=t.displayName||null,e!==null?e:YS(t.type)||"Memo";case vl:e=t._payload,t=t._init;try{return YS(t(e))}catch{}}return null}function gK(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return YS(e);case 8:return e===jj?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Hl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ML(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vK(t){var e=ML(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Gv(t){t._valueTracker||(t._valueTracker=vK(t))}function RL(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ML(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function _0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function QS(t,e){var n=e.checked;return $n({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function nk(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Hl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function LL(t,e){e=e.checked,e!=null&&Ej(t,"checked",e,!1)}function XS(t,e){LL(t,e);var n=Hl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ZS(t,e.type,n):e.hasOwnProperty("defaultValue")&&ZS(t,e.type,Hl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function rk(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ZS(t,e,n){(e!=="number"||_0(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Up=Array.isArray;function pf(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Hl(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function JS(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Oe(91));return $n({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ik(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Oe(92));if(Up(n)){if(1<n.length)throw Error(Oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Hl(n)}}function zL(t,e){var n=Hl(e.value),r=Hl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function sk(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $L(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function eA(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$L(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Yv,FL=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Yv=Yv||document.createElement("div"),Yv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Yv.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Mm(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var nm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yK=["Webkit","ms","Moz","O"];Object.keys(nm).forEach(function(t){yK.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),nm[e]=nm[t]})});function VL(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||nm.hasOwnProperty(t)&&nm[t]?(""+e).trim():e+"px"}function BL(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=VL(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var bK=$n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tA(t,e){if(e){if(bK[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Oe(62))}}function nA(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rA=null;function Nj(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var iA=null,mf=null,gf=null;function ak(t){if(t=iv(t)){if(typeof iA!="function")throw Error(Oe(280));var e=t.stateNode;e&&(e=Fx(e),iA(t.stateNode,t.type,e))}}function UL(t){mf?gf?gf.push(t):gf=[t]:mf=t}function WL(){if(mf){var t=mf,e=gf;if(gf=mf=null,ak(t),e)for(t=0;t<e.length;t++)ak(e[t])}}function HL(t,e){return t(e)}function KL(){}var H1=!1;function qL(t,e,n){if(H1)return t(e,n);H1=!0;try{return HL(t,e,n)}finally{H1=!1,(mf!==null||gf!==null)&&(KL(),WL())}}function Rm(t,e){var n=t.stateNode;if(n===null)return null;var r=Fx(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Oe(231,e,typeof n));return n}var sA=!1;if(Po)try{var Sp={};Object.defineProperty(Sp,"passive",{get:function(){sA=!0}}),window.addEventListener("test",Sp,Sp),window.removeEventListener("test",Sp,Sp)}catch{sA=!1}function xK(t,e,n,r,i,s,a,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var rm=!1,S0=null,A0=!1,aA=null,wK={onError:function(t){rm=!0,S0=t}};function _K(t,e,n,r,i,s,a,o,c){rm=!1,S0=null,xK.apply(wK,arguments)}function SK(t,e,n,r,i,s,a,o,c){if(_K.apply(this,arguments),rm){if(rm){var u=S0;rm=!1,S0=null}else throw Error(Oe(198));A0||(A0=!0,aA=u)}}function Yu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function GL(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ok(t){if(Yu(t)!==t)throw Error(Oe(188))}function AK(t){var e=t.alternate;if(!e){if(e=Yu(t),e===null)throw Error(Oe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return ok(i),t;if(s===r)return ok(i),e;s=s.sibling}throw Error(Oe(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(Oe(189))}}if(n.alternate!==r)throw Error(Oe(190))}if(n.tag!==3)throw Error(Oe(188));return n.stateNode.current===n?t:e}function YL(t){return t=AK(t),t!==null?QL(t):null}function QL(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=QL(t);if(e!==null)return e;t=t.sibling}return null}var XL=ds.unstable_scheduleCallback,lk=ds.unstable_cancelCallback,EK=ds.unstable_shouldYield,jK=ds.unstable_requestPaint,nr=ds.unstable_now,CK=ds.unstable_getCurrentPriorityLevel,Pj=ds.unstable_ImmediatePriority,ZL=ds.unstable_UserBlockingPriority,E0=ds.unstable_NormalPriority,TK=ds.unstable_LowPriority,JL=ds.unstable_IdlePriority,Rx=null,$a=null;function NK(t){if($a&&typeof $a.onCommitFiberRoot=="function")try{$a.onCommitFiberRoot(Rx,t,void 0,(t.current.flags&128)===128)}catch{}}var ra=Math.clz32?Math.clz32:DK,PK=Math.log,kK=Math.LN2;function DK(t){return t>>>=0,t===0?32:31-(PK(t)/kK|0)|0}var Qv=64,Xv=4194304;function Wp(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function j0(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=Wp(o):(s&=a,s!==0&&(r=Wp(s)))}else a=n&~i,a!==0?r=Wp(a):s!==0&&(r=Wp(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ra(e),i=1<<n,r|=t[n],e&=~i;return r}function IK(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OK(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-ra(s),o=1<<a,c=i[a];c===-1?(!(o&n)||o&r)&&(i[a]=IK(o,e)):c<=e&&(t.expiredLanes|=o),s&=~o}}function oA(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ez(){var t=Qv;return Qv<<=1,!(Qv&4194240)&&(Qv=64),t}function K1(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function nv(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ra(e),t[e]=n}function MK(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ra(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function kj(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ra(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var an=0;function tz(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var nz,Dj,rz,iz,sz,lA=!1,Zv=[],Dl=null,Il=null,Ol=null,Lm=new Map,zm=new Map,xl=[],RK="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ck(t,e){switch(t){case"focusin":case"focusout":Dl=null;break;case"dragenter":case"dragleave":Il=null;break;case"mouseover":case"mouseout":Ol=null;break;case"pointerover":case"pointerout":Lm.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zm.delete(e.pointerId)}}function Ap(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=iv(e),e!==null&&Dj(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function LK(t,e,n,r,i){switch(e){case"focusin":return Dl=Ap(Dl,t,e,n,r,i),!0;case"dragenter":return Il=Ap(Il,t,e,n,r,i),!0;case"mouseover":return Ol=Ap(Ol,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Lm.set(s,Ap(Lm.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,zm.set(s,Ap(zm.get(s)||null,t,e,n,r,i)),!0}return!1}function az(t){var e=eu(t.target);if(e!==null){var n=Yu(e);if(n!==null){if(e=n.tag,e===13){if(e=GL(n),e!==null){t.blockedOn=e,sz(t.priority,function(){rz(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gy(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=cA(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);rA=r,n.target.dispatchEvent(r),rA=null}else return e=iv(n),e!==null&&Dj(e),t.blockedOn=n,!1;e.shift()}return!0}function uk(t,e,n){Gy(t)&&n.delete(e)}function zK(){lA=!1,Dl!==null&&Gy(Dl)&&(Dl=null),Il!==null&&Gy(Il)&&(Il=null),Ol!==null&&Gy(Ol)&&(Ol=null),Lm.forEach(uk),zm.forEach(uk)}function Ep(t,e){t.blockedOn===e&&(t.blockedOn=null,lA||(lA=!0,ds.unstable_scheduleCallback(ds.unstable_NormalPriority,zK)))}function $m(t){function e(i){return Ep(i,t)}if(0<Zv.length){Ep(Zv[0],t);for(var n=1;n<Zv.length;n++){var r=Zv[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Dl!==null&&Ep(Dl,t),Il!==null&&Ep(Il,t),Ol!==null&&Ep(Ol,t),Lm.forEach(e),zm.forEach(e),n=0;n<xl.length;n++)r=xl[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<xl.length&&(n=xl[0],n.blockedOn===null);)az(n),n.blockedOn===null&&xl.shift()}var vf=Uo.ReactCurrentBatchConfig,C0=!0;function $K(t,e,n,r){var i=an,s=vf.transition;vf.transition=null;try{an=1,Ij(t,e,n,r)}finally{an=i,vf.transition=s}}function FK(t,e,n,r){var i=an,s=vf.transition;vf.transition=null;try{an=4,Ij(t,e,n,r)}finally{an=i,vf.transition=s}}function Ij(t,e,n,r){if(C0){var i=cA(t,e,n,r);if(i===null)n_(t,e,r,T0,n),ck(t,r);else if(LK(i,t,e,n,r))r.stopPropagation();else if(ck(t,r),e&4&&-1<RK.indexOf(t)){for(;i!==null;){var s=iv(i);if(s!==null&&nz(s),s=cA(t,e,n,r),s===null&&n_(t,e,r,T0,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else n_(t,e,r,null,n)}}var T0=null;function cA(t,e,n,r){if(T0=null,t=Nj(r),t=eu(t),t!==null)if(e=Yu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=GL(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return T0=t,null}function oz(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(CK()){case Pj:return 1;case ZL:return 4;case E0:case TK:return 16;case JL:return 536870912;default:return 16}default:return 16}}var Sl=null,Oj=null,Yy=null;function lz(){if(Yy)return Yy;var t,e=Oj,n=e.length,r,i="value"in Sl?Sl.value:Sl.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return Yy=i.slice(t,1<r?1-r:void 0)}function Qy(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Jv(){return!0}function dk(){return!1}function gs(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Jv:dk,this.isPropagationStopped=dk,this}return $n(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Jv)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Jv)},persist:function(){},isPersistent:Jv}),e}var kh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mj=gs(kh),rv=$n({},kh,{view:0,detail:0}),VK=gs(rv),q1,G1,jp,Lx=$n({},rv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rj,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==jp&&(jp&&t.type==="mousemove"?(q1=t.screenX-jp.screenX,G1=t.screenY-jp.screenY):G1=q1=0,jp=t),q1)},movementY:function(t){return"movementY"in t?t.movementY:G1}}),fk=gs(Lx),BK=$n({},Lx,{dataTransfer:0}),UK=gs(BK),WK=$n({},rv,{relatedTarget:0}),Y1=gs(WK),HK=$n({},kh,{animationName:0,elapsedTime:0,pseudoElement:0}),KK=gs(HK),qK=$n({},kh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),GK=gs(qK),YK=$n({},kh,{data:0}),hk=gs(YK),QK={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XK={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ZK={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function JK(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ZK[t])?!!e[t]:!1}function Rj(){return JK}var eq=$n({},rv,{key:function(t){if(t.key){var e=QK[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Qy(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?XK[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rj,charCode:function(t){return t.type==="keypress"?Qy(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Qy(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),tq=gs(eq),nq=$n({},Lx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pk=gs(nq),rq=$n({},rv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rj}),iq=gs(rq),sq=$n({},kh,{propertyName:0,elapsedTime:0,pseudoElement:0}),aq=gs(sq),oq=$n({},Lx,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),lq=gs(oq),cq=[9,13,27,32],Lj=Po&&"CompositionEvent"in window,im=null;Po&&"documentMode"in document&&(im=document.documentMode);var uq=Po&&"TextEvent"in window&&!im,cz=Po&&(!Lj||im&&8<im&&11>=im),mk=" ",gk=!1;function uz(t,e){switch(t){case"keyup":return cq.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dz(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hd=!1;function dq(t,e){switch(t){case"compositionend":return dz(e);case"keypress":return e.which!==32?null:(gk=!0,mk);case"textInput":return t=e.data,t===mk&&gk?null:t;default:return null}}function fq(t,e){if(Hd)return t==="compositionend"||!Lj&&uz(t,e)?(t=lz(),Yy=Oj=Sl=null,Hd=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return cz&&e.locale!=="ko"?null:e.data;default:return null}}var hq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!hq[t.type]:e==="textarea"}function fz(t,e,n,r){UL(r),e=N0(e,"onChange"),0<e.length&&(n=new Mj("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var sm=null,Fm=null;function pq(t){Sz(t,0)}function zx(t){var e=Gd(t);if(RL(e))return t}function mq(t,e){if(t==="change")return e}var hz=!1;if(Po){var Q1;if(Po){var X1="oninput"in document;if(!X1){var yk=document.createElement("div");yk.setAttribute("oninput","return;"),X1=typeof yk.oninput=="function"}Q1=X1}else Q1=!1;hz=Q1&&(!document.documentMode||9<document.documentMode)}function bk(){sm&&(sm.detachEvent("onpropertychange",pz),Fm=sm=null)}function pz(t){if(t.propertyName==="value"&&zx(Fm)){var e=[];fz(e,Fm,t,Nj(t)),qL(pq,e)}}function gq(t,e,n){t==="focusin"?(bk(),sm=e,Fm=n,sm.attachEvent("onpropertychange",pz)):t==="focusout"&&bk()}function vq(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zx(Fm)}function yq(t,e){if(t==="click")return zx(e)}function bq(t,e){if(t==="input"||t==="change")return zx(e)}function xq(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var la=typeof Object.is=="function"?Object.is:xq;function Vm(t,e){if(la(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!HS.call(e,i)||!la(t[i],e[i]))return!1}return!0}function xk(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wk(t,e){var n=xk(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=xk(n)}}function mz(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?mz(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function gz(){for(var t=window,e=_0();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_0(t.document)}return e}function zj(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function wq(t){var e=gz(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&mz(n.ownerDocument.documentElement,n)){if(r!==null&&zj(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=wk(n,s);var a=wk(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _q=Po&&"documentMode"in document&&11>=document.documentMode,Kd=null,uA=null,am=null,dA=!1;function _k(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;dA||Kd==null||Kd!==_0(r)||(r=Kd,"selectionStart"in r&&zj(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),am&&Vm(am,r)||(am=r,r=N0(uA,"onSelect"),0<r.length&&(e=new Mj("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Kd)))}function ey(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var qd={animationend:ey("Animation","AnimationEnd"),animationiteration:ey("Animation","AnimationIteration"),animationstart:ey("Animation","AnimationStart"),transitionend:ey("Transition","TransitionEnd")},Z1={},vz={};Po&&(vz=document.createElement("div").style,"AnimationEvent"in window||(delete qd.animationend.animation,delete qd.animationiteration.animation,delete qd.animationstart.animation),"TransitionEvent"in window||delete qd.transitionend.transition);function $x(t){if(Z1[t])return Z1[t];if(!qd[t])return t;var e=qd[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in vz)return Z1[t]=e[n];return t}var yz=$x("animationend"),bz=$x("animationiteration"),xz=$x("animationstart"),wz=$x("transitionend"),_z=new Map,Sk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tc(t,e){_z.set(t,e),Gu(e,[t])}for(var J1=0;J1<Sk.length;J1++){var e_=Sk[J1],Sq=e_.toLowerCase(),Aq=e_[0].toUpperCase()+e_.slice(1);tc(Sq,"on"+Aq)}tc(yz,"onAnimationEnd");tc(bz,"onAnimationIteration");tc(xz,"onAnimationStart");tc("dblclick","onDoubleClick");tc("focusin","onFocus");tc("focusout","onBlur");tc(wz,"onTransitionEnd");Pf("onMouseEnter",["mouseout","mouseover"]);Pf("onMouseLeave",["mouseout","mouseover"]);Pf("onPointerEnter",["pointerout","pointerover"]);Pf("onPointerLeave",["pointerout","pointerover"]);Gu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Gu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Gu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Gu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Gu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Gu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Eq=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hp));function Ak(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,SK(r,e,void 0,t),t.currentTarget=null}function Sz(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==s&&i.isPropagationStopped())break e;Ak(i,o,u),s=c}else for(a=0;a<r.length;a++){if(o=r[a],c=o.instance,u=o.currentTarget,o=o.listener,c!==s&&i.isPropagationStopped())break e;Ak(i,o,u),s=c}}}if(A0)throw t=aA,A0=!1,aA=null,t}function An(t,e){var n=e[gA];n===void 0&&(n=e[gA]=new Set);var r=t+"__bubble";n.has(r)||(Az(e,t,2,!1),n.add(r))}function t_(t,e,n){var r=0;e&&(r|=4),Az(n,t,r,e)}var ty="_reactListening"+Math.random().toString(36).slice(2);function Bm(t){if(!t[ty]){t[ty]=!0,kL.forEach(function(n){n!=="selectionchange"&&(Eq.has(n)||t_(n,!1,t),t_(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ty]||(e[ty]=!0,t_("selectionchange",!1,e))}}function Az(t,e,n,r){switch(oz(e)){case 1:var i=$K;break;case 4:i=FK;break;default:i=Ij}n=i.bind(null,e,n,t),i=void 0,!sA||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function n_(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;o!==null;){if(a=eu(o),a===null)return;if(c=a.tag,c===5||c===6){r=s=a;continue e}o=o.parentNode}}r=r.return}qL(function(){var u=s,d=Nj(n),f=[];e:{var h=_z.get(t);if(h!==void 0){var p=Mj,g=t;switch(t){case"keypress":if(Qy(n)===0)break e;case"keydown":case"keyup":p=tq;break;case"focusin":g="focus",p=Y1;break;case"focusout":g="blur",p=Y1;break;case"beforeblur":case"afterblur":p=Y1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=fk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=UK;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=iq;break;case yz:case bz:case xz:p=KK;break;case wz:p=aq;break;case"scroll":p=VK;break;case"wheel":p=lq;break;case"copy":case"cut":case"paste":p=GK;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=pk}var m=(e&4)!==0,y=!m&&t==="scroll",x=m?h!==null?h+"Capture":null:h;m=[];for(var w=u,_;w!==null;){_=w;var A=_.stateNode;if(_.tag===5&&A!==null&&(_=A,x!==null&&(A=Rm(w,x),A!=null&&m.push(Um(w,A,_)))),y)break;w=w.return}0<m.length&&(h=new p(h,g,null,n,d),f.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&n!==rA&&(g=n.relatedTarget||n.fromElement)&&(eu(g)||g[ko]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=u,g=g?eu(g):null,g!==null&&(y=Yu(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(m=fk,A="onMouseLeave",x="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(m=pk,A="onPointerLeave",x="onPointerEnter",w="pointer"),y=p==null?h:Gd(p),_=g==null?h:Gd(g),h=new m(A,w+"leave",p,n,d),h.target=y,h.relatedTarget=_,A=null,eu(d)===u&&(m=new m(x,w+"enter",g,n,d),m.target=_,m.relatedTarget=y,A=m),y=A,p&&g)t:{for(m=p,x=g,w=0,_=m;_;_=Pd(_))w++;for(_=0,A=x;A;A=Pd(A))_++;for(;0<w-_;)m=Pd(m),w--;for(;0<_-w;)x=Pd(x),_--;for(;w--;){if(m===x||x!==null&&m===x.alternate)break t;m=Pd(m),x=Pd(x)}m=null}else m=null;p!==null&&Ek(f,h,p,m,!1),g!==null&&y!==null&&Ek(f,y,g,m,!0)}}e:{if(h=u?Gd(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var E=mq;else if(vk(h))if(hz)E=bq;else{E=vq;var C=gq}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(E=yq);if(E&&(E=E(t,u))){fz(f,E,n,d);break e}C&&C(t,h,u),t==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&ZS(h,"number",h.value)}switch(C=u?Gd(u):window,t){case"focusin":(vk(C)||C.contentEditable==="true")&&(Kd=C,uA=u,am=null);break;case"focusout":am=uA=Kd=null;break;case"mousedown":dA=!0;break;case"contextmenu":case"mouseup":case"dragend":dA=!1,_k(f,n,d);break;case"selectionchange":if(_q)break;case"keydown":case"keyup":_k(f,n,d)}var j;if(Lj)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Hd?uz(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(cz&&n.locale!=="ko"&&(Hd||T!=="onCompositionStart"?T==="onCompositionEnd"&&Hd&&(j=lz()):(Sl=d,Oj="value"in Sl?Sl.value:Sl.textContent,Hd=!0)),C=N0(u,T),0<C.length&&(T=new hk(T,t,null,n,d),f.push({event:T,listeners:C}),j?T.data=j:(j=dz(n),j!==null&&(T.data=j)))),(j=uq?dq(t,n):fq(t,n))&&(u=N0(u,"onBeforeInput"),0<u.length&&(d=new hk("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=j))}Sz(f,e)})}function Um(t,e,n){return{instance:t,listener:e,currentTarget:n}}function N0(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Rm(t,n),s!=null&&r.unshift(Um(t,s,i)),s=Rm(t,e),s!=null&&r.push(Um(t,s,i))),t=t.return}return r}function Pd(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ek(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var o=n,c=o.alternate,u=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&u!==null&&(o=u,i?(c=Rm(n,s),c!=null&&a.unshift(Um(n,c,o))):i||(c=Rm(n,s),c!=null&&a.push(Um(n,c,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var jq=/\r\n?/g,Cq=/\u0000|\uFFFD/g;function jk(t){return(typeof t=="string"?t:""+t).replace(jq,`
`).replace(Cq,"")}function ny(t,e,n){if(e=jk(e),jk(t)!==e&&n)throw Error(Oe(425))}function P0(){}var fA=null,hA=null;function pA(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var mA=typeof setTimeout=="function"?setTimeout:void 0,Tq=typeof clearTimeout=="function"?clearTimeout:void 0,Ck=typeof Promise=="function"?Promise:void 0,Nq=typeof queueMicrotask=="function"?queueMicrotask:typeof Ck<"u"?function(t){return Ck.resolve(null).then(t).catch(Pq)}:mA;function Pq(t){setTimeout(function(){throw t})}function r_(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),$m(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);$m(e)}function Ml(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Tk(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Dh=Math.random().toString(36).slice(2),Ia="__reactFiber$"+Dh,Wm="__reactProps$"+Dh,ko="__reactContainer$"+Dh,gA="__reactEvents$"+Dh,kq="__reactListeners$"+Dh,Dq="__reactHandles$"+Dh;function eu(t){var e=t[Ia];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ko]||n[Ia]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Tk(t);t!==null;){if(n=t[Ia])return n;t=Tk(t)}return e}t=n,n=t.parentNode}return null}function iv(t){return t=t[Ia]||t[ko],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Gd(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Oe(33))}function Fx(t){return t[Wm]||null}var vA=[],Yd=-1;function nc(t){return{current:t}}function Tn(t){0>Yd||(t.current=vA[Yd],vA[Yd]=null,Yd--)}function bn(t,e){Yd++,vA[Yd]=t.current,t.current=e}var Kl={},gi=nc(Kl),Fi=nc(!1),Au=Kl;function kf(t,e){var n=t.type.contextTypes;if(!n)return Kl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Vi(t){return t=t.childContextTypes,t!=null}function k0(){Tn(Fi),Tn(gi)}function Nk(t,e,n){if(gi.current!==Kl)throw Error(Oe(168));bn(gi,e),bn(Fi,n)}function Ez(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Oe(108,gK(t)||"Unknown",i));return $n({},n,r)}function D0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Kl,Au=gi.current,bn(gi,t),bn(Fi,Fi.current),!0}function Pk(t,e,n){var r=t.stateNode;if(!r)throw Error(Oe(169));n?(t=Ez(t,e,Au),r.__reactInternalMemoizedMergedChildContext=t,Tn(Fi),Tn(gi),bn(gi,t)):Tn(Fi),bn(Fi,n)}var vo=null,Vx=!1,i_=!1;function jz(t){vo===null?vo=[t]:vo.push(t)}function Iq(t){Vx=!0,jz(t)}function rc(){if(!i_&&vo!==null){i_=!0;var t=0,e=an;try{var n=vo;for(an=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}vo=null,Vx=!1}catch(i){throw vo!==null&&(vo=vo.slice(t+1)),XL(Pj,rc),i}finally{an=e,i_=!1}}return null}var Qd=[],Xd=0,I0=null,O0=0,Cs=[],Ts=0,Eu=null,yo=1,bo="";function Fc(t,e){Qd[Xd++]=O0,Qd[Xd++]=I0,I0=t,O0=e}function Cz(t,e,n){Cs[Ts++]=yo,Cs[Ts++]=bo,Cs[Ts++]=Eu,Eu=t;var r=yo;t=bo;var i=32-ra(r)-1;r&=~(1<<i),n+=1;var s=32-ra(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,yo=1<<32-ra(e)+i|n<<i|r,bo=s+t}else yo=1<<s|n<<i|r,bo=t}function $j(t){t.return!==null&&(Fc(t,1),Cz(t,1,0))}function Fj(t){for(;t===I0;)I0=Qd[--Xd],Qd[Xd]=null,O0=Qd[--Xd],Qd[Xd]=null;for(;t===Eu;)Eu=Cs[--Ts],Cs[Ts]=null,bo=Cs[--Ts],Cs[Ts]=null,yo=Cs[--Ts],Cs[Ts]=null}var rs=null,ts=null,Pn=!1,ta=null;function Tz(t,e){var n=Ps(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function kk(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,rs=t,ts=Ml(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,rs=t,ts=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Eu!==null?{id:yo,overflow:bo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ps(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,rs=t,ts=null,!0):!1;default:return!1}}function yA(t){return(t.mode&1)!==0&&(t.flags&128)===0}function bA(t){if(Pn){var e=ts;if(e){var n=e;if(!kk(t,e)){if(yA(t))throw Error(Oe(418));e=Ml(n.nextSibling);var r=rs;e&&kk(t,e)?Tz(r,n):(t.flags=t.flags&-4097|2,Pn=!1,rs=t)}}else{if(yA(t))throw Error(Oe(418));t.flags=t.flags&-4097|2,Pn=!1,rs=t}}}function Dk(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;rs=t}function ry(t){if(t!==rs)return!1;if(!Pn)return Dk(t),Pn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!pA(t.type,t.memoizedProps)),e&&(e=ts)){if(yA(t))throw Nz(),Error(Oe(418));for(;e;)Tz(t,e),e=Ml(e.nextSibling)}if(Dk(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ts=Ml(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ts=null}}else ts=rs?Ml(t.stateNode.nextSibling):null;return!0}function Nz(){for(var t=ts;t;)t=Ml(t.nextSibling)}function Df(){ts=rs=null,Pn=!1}function Vj(t){ta===null?ta=[t]:ta.push(t)}var Oq=Uo.ReactCurrentBatchConfig;function Cp(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Oe(309));var r=n.stateNode}if(!r)throw Error(Oe(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(Oe(284));if(!n._owner)throw Error(Oe(290,t))}return t}function iy(t,e){throw t=Object.prototype.toString.call(e),Error(Oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ik(t){var e=t._init;return e(t._payload)}function Pz(t){function e(x,w){if(t){var _=x.deletions;_===null?(x.deletions=[w],x.flags|=16):_.push(w)}}function n(x,w){if(!t)return null;for(;w!==null;)e(x,w),w=w.sibling;return null}function r(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function i(x,w){return x=$l(x,w),x.index=0,x.sibling=null,x}function s(x,w,_){return x.index=_,t?(_=x.alternate,_!==null?(_=_.index,_<w?(x.flags|=2,w):_):(x.flags|=2,w)):(x.flags|=1048576,w)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function o(x,w,_,A){return w===null||w.tag!==6?(w=d_(_,x.mode,A),w.return=x,w):(w=i(w,_),w.return=x,w)}function c(x,w,_,A){var E=_.type;return E===Wd?d(x,w,_.props.children,A,_.key):w!==null&&(w.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===vl&&Ik(E)===w.type)?(A=i(w,_.props),A.ref=Cp(x,w,_),A.return=x,A):(A=r0(_.type,_.key,_.props,null,x.mode,A),A.ref=Cp(x,w,_),A.return=x,A)}function u(x,w,_,A){return w===null||w.tag!==4||w.stateNode.containerInfo!==_.containerInfo||w.stateNode.implementation!==_.implementation?(w=f_(_,x.mode,A),w.return=x,w):(w=i(w,_.children||[]),w.return=x,w)}function d(x,w,_,A,E){return w===null||w.tag!==7?(w=hu(_,x.mode,A,E),w.return=x,w):(w=i(w,_),w.return=x,w)}function f(x,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return w=d_(""+w,x.mode,_),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case qv:return _=r0(w.type,w.key,w.props,null,x.mode,_),_.ref=Cp(x,null,w),_.return=x,_;case Ud:return w=f_(w,x.mode,_),w.return=x,w;case vl:var A=w._init;return f(x,A(w._payload),_)}if(Up(w)||_p(w))return w=hu(w,x.mode,_,null),w.return=x,w;iy(x,w)}return null}function h(x,w,_,A){var E=w!==null?w.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return E!==null?null:o(x,w,""+_,A);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case qv:return _.key===E?c(x,w,_,A):null;case Ud:return _.key===E?u(x,w,_,A):null;case vl:return E=_._init,h(x,w,E(_._payload),A)}if(Up(_)||_p(_))return E!==null?null:d(x,w,_,A,null);iy(x,_)}return null}function p(x,w,_,A,E){if(typeof A=="string"&&A!==""||typeof A=="number")return x=x.get(_)||null,o(w,x,""+A,E);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case qv:return x=x.get(A.key===null?_:A.key)||null,c(w,x,A,E);case Ud:return x=x.get(A.key===null?_:A.key)||null,u(w,x,A,E);case vl:var C=A._init;return p(x,w,_,C(A._payload),E)}if(Up(A)||_p(A))return x=x.get(_)||null,d(w,x,A,E,null);iy(w,A)}return null}function g(x,w,_,A){for(var E=null,C=null,j=w,T=w=0,P=null;j!==null&&T<_.length;T++){j.index>T?(P=j,j=null):P=j.sibling;var I=h(x,j,_[T],A);if(I===null){j===null&&(j=P);break}t&&j&&I.alternate===null&&e(x,j),w=s(I,w,T),C===null?E=I:C.sibling=I,C=I,j=P}if(T===_.length)return n(x,j),Pn&&Fc(x,T),E;if(j===null){for(;T<_.length;T++)j=f(x,_[T],A),j!==null&&(w=s(j,w,T),C===null?E=j:C.sibling=j,C=j);return Pn&&Fc(x,T),E}for(j=r(x,j);T<_.length;T++)P=p(j,x,T,_[T],A),P!==null&&(t&&P.alternate!==null&&j.delete(P.key===null?T:P.key),w=s(P,w,T),C===null?E=P:C.sibling=P,C=P);return t&&j.forEach(function(M){return e(x,M)}),Pn&&Fc(x,T),E}function m(x,w,_,A){var E=_p(_);if(typeof E!="function")throw Error(Oe(150));if(_=E.call(_),_==null)throw Error(Oe(151));for(var C=E=null,j=w,T=w=0,P=null,I=_.next();j!==null&&!I.done;T++,I=_.next()){j.index>T?(P=j,j=null):P=j.sibling;var M=h(x,j,I.value,A);if(M===null){j===null&&(j=P);break}t&&j&&M.alternate===null&&e(x,j),w=s(M,w,T),C===null?E=M:C.sibling=M,C=M,j=P}if(I.done)return n(x,j),Pn&&Fc(x,T),E;if(j===null){for(;!I.done;T++,I=_.next())I=f(x,I.value,A),I!==null&&(w=s(I,w,T),C===null?E=I:C.sibling=I,C=I);return Pn&&Fc(x,T),E}for(j=r(x,j);!I.done;T++,I=_.next())I=p(j,x,T,I.value,A),I!==null&&(t&&I.alternate!==null&&j.delete(I.key===null?T:I.key),w=s(I,w,T),C===null?E=I:C.sibling=I,C=I);return t&&j.forEach(function(F){return e(x,F)}),Pn&&Fc(x,T),E}function y(x,w,_,A){if(typeof _=="object"&&_!==null&&_.type===Wd&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case qv:e:{for(var E=_.key,C=w;C!==null;){if(C.key===E){if(E=_.type,E===Wd){if(C.tag===7){n(x,C.sibling),w=i(C,_.props.children),w.return=x,x=w;break e}}else if(C.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===vl&&Ik(E)===C.type){n(x,C.sibling),w=i(C,_.props),w.ref=Cp(x,C,_),w.return=x,x=w;break e}n(x,C);break}else e(x,C);C=C.sibling}_.type===Wd?(w=hu(_.props.children,x.mode,A,_.key),w.return=x,x=w):(A=r0(_.type,_.key,_.props,null,x.mode,A),A.ref=Cp(x,w,_),A.return=x,x=A)}return a(x);case Ud:e:{for(C=_.key;w!==null;){if(w.key===C)if(w.tag===4&&w.stateNode.containerInfo===_.containerInfo&&w.stateNode.implementation===_.implementation){n(x,w.sibling),w=i(w,_.children||[]),w.return=x,x=w;break e}else{n(x,w);break}else e(x,w);w=w.sibling}w=f_(_,x.mode,A),w.return=x,x=w}return a(x);case vl:return C=_._init,y(x,w,C(_._payload),A)}if(Up(_))return g(x,w,_,A);if(_p(_))return m(x,w,_,A);iy(x,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,w!==null&&w.tag===6?(n(x,w.sibling),w=i(w,_),w.return=x,x=w):(n(x,w),w=d_(_,x.mode,A),w.return=x,x=w),a(x)):n(x,w)}return y}var If=Pz(!0),kz=Pz(!1),M0=nc(null),R0=null,Zd=null,Bj=null;function Uj(){Bj=Zd=R0=null}function Wj(t){var e=M0.current;Tn(M0),t._currentValue=e}function xA(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function yf(t,e){R0=t,Bj=Zd=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ri=!0),t.firstContext=null)}function Is(t){var e=t._currentValue;if(Bj!==t)if(t={context:t,memoizedValue:e,next:null},Zd===null){if(R0===null)throw Error(Oe(308));Zd=t,R0.dependencies={lanes:0,firstContext:t}}else Zd=Zd.next=t;return e}var tu=null;function Hj(t){tu===null?tu=[t]:tu.push(t)}function Dz(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Hj(e)):(n.next=i.next,i.next=n),e.interleaved=n,Do(t,r)}function Do(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var yl=!1;function Kj(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Iz(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Eo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Rl(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ht&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Do(t,n)}return i=r.interleaved,i===null?(e.next=e,Hj(r)):(e.next=i.next,i.next=e),r.interleaved=e,Do(t,n)}function Xy(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,kj(t,n)}}function Ok(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function L0(t,e,n,r){var i=t.updateQueue;yl=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,u=c.next;c.next=null,a===null?s=u:a.next=u,a=c;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=i.baseState;a=0,d=u=c=null,o=s;do{var h=o.lane,p=o.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var g=t,m=o;switch(h=e,p=n,m.tag){case 1:if(g=m.payload,typeof g=="function"){f=g.call(p,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,h=typeof g=="function"?g.call(p,f,h):g,h==null)break e;f=$n({},f,h);break e;case 2:yl=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,a|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;h=o,o=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(d===null&&(c=f),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Cu|=a,t.lanes=a,t.memoizedState=f}}function Mk(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Oe(191,i));i.call(r)}}}var sv={},Fa=nc(sv),Hm=nc(sv),Km=nc(sv);function nu(t){if(t===sv)throw Error(Oe(174));return t}function qj(t,e){switch(bn(Km,e),bn(Hm,t),bn(Fa,sv),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:eA(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=eA(e,t)}Tn(Fa),bn(Fa,e)}function Of(){Tn(Fa),Tn(Hm),Tn(Km)}function Oz(t){nu(Km.current);var e=nu(Fa.current),n=eA(e,t.type);e!==n&&(bn(Hm,t),bn(Fa,n))}function Gj(t){Hm.current===t&&(Tn(Fa),Tn(Hm))}var Rn=nc(0);function z0(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var s_=[];function Yj(){for(var t=0;t<s_.length;t++)s_[t]._workInProgressVersionPrimary=null;s_.length=0}var Zy=Uo.ReactCurrentDispatcher,a_=Uo.ReactCurrentBatchConfig,ju=0,zn=null,wr=null,Dr=null,$0=!1,om=!1,qm=0,Mq=0;function ai(){throw Error(Oe(321))}function Qj(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!la(t[n],e[n]))return!1;return!0}function Xj(t,e,n,r,i,s){if(ju=s,zn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zy.current=t===null||t.memoizedState===null?$q:Fq,t=n(r,i),om){s=0;do{if(om=!1,qm=0,25<=s)throw Error(Oe(301));s+=1,Dr=wr=null,e.updateQueue=null,Zy.current=Vq,t=n(r,i)}while(om)}if(Zy.current=F0,e=wr!==null&&wr.next!==null,ju=0,Dr=wr=zn=null,$0=!1,e)throw Error(Oe(300));return t}function Zj(){var t=qm!==0;return qm=0,t}function ka(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dr===null?zn.memoizedState=Dr=t:Dr=Dr.next=t,Dr}function Os(){if(wr===null){var t=zn.alternate;t=t!==null?t.memoizedState:null}else t=wr.next;var e=Dr===null?zn.memoizedState:Dr.next;if(e!==null)Dr=e,wr=t;else{if(t===null)throw Error(Oe(310));wr=t,t={memoizedState:wr.memoizedState,baseState:wr.baseState,baseQueue:wr.baseQueue,queue:wr.queue,next:null},Dr===null?zn.memoizedState=Dr=t:Dr=Dr.next=t}return Dr}function Gm(t,e){return typeof e=="function"?e(t):e}function o_(t){var e=Os(),n=e.queue;if(n===null)throw Error(Oe(311));n.lastRenderedReducer=t;var r=wr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,c=null,u=s;do{var d=u.lane;if((ju&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=f,a=r):c=c.next=f,zn.lanes|=d,Cu|=d}u=u.next}while(u!==null&&u!==s);c===null?a=r:c.next=o,la(r,e.memoizedState)||(Ri=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,zn.lanes|=s,Cu|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function l_(t){var e=Os(),n=e.queue;if(n===null)throw Error(Oe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);la(s,e.memoizedState)||(Ri=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Mz(){}function Rz(t,e){var n=zn,r=Os(),i=e(),s=!la(r.memoizedState,i);if(s&&(r.memoizedState=i,Ri=!0),r=r.queue,Jj($z.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Dr!==null&&Dr.memoizedState.tag&1){if(n.flags|=2048,Ym(9,zz.bind(null,n,r,i,e),void 0,null),Mr===null)throw Error(Oe(349));ju&30||Lz(n,e,i)}return i}function Lz(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=zn.updateQueue,e===null?(e={lastEffect:null,stores:null},zn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function zz(t,e,n,r){e.value=n,e.getSnapshot=r,Fz(e)&&Vz(t)}function $z(t,e,n){return n(function(){Fz(e)&&Vz(t)})}function Fz(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!la(t,n)}catch{return!0}}function Vz(t){var e=Do(t,1);e!==null&&ia(e,t,1,-1)}function Rk(t){var e=ka();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gm,lastRenderedState:t},e.queue=t,t=t.dispatch=zq.bind(null,zn,t),[e.memoizedState,t]}function Ym(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=zn.updateQueue,e===null?(e={lastEffect:null,stores:null},zn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Bz(){return Os().memoizedState}function Jy(t,e,n,r){var i=ka();zn.flags|=t,i.memoizedState=Ym(1|e,n,void 0,r===void 0?null:r)}function Bx(t,e,n,r){var i=Os();r=r===void 0?null:r;var s=void 0;if(wr!==null){var a=wr.memoizedState;if(s=a.destroy,r!==null&&Qj(r,a.deps)){i.memoizedState=Ym(e,n,s,r);return}}zn.flags|=t,i.memoizedState=Ym(1|e,n,s,r)}function Lk(t,e){return Jy(8390656,8,t,e)}function Jj(t,e){return Bx(2048,8,t,e)}function Uz(t,e){return Bx(4,2,t,e)}function Wz(t,e){return Bx(4,4,t,e)}function Hz(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Kz(t,e,n){return n=n!=null?n.concat([t]):null,Bx(4,4,Hz.bind(null,e,t),n)}function eC(){}function qz(t,e){var n=Os();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Qj(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Gz(t,e){var n=Os();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Qj(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Yz(t,e,n){return ju&21?(la(n,e)||(n=ez(),zn.lanes|=n,Cu|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ri=!0),t.memoizedState=n)}function Rq(t,e){var n=an;an=n!==0&&4>n?n:4,t(!0);var r=a_.transition;a_.transition={};try{t(!1),e()}finally{an=n,a_.transition=r}}function Qz(){return Os().memoizedState}function Lq(t,e,n){var r=zl(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xz(t))Zz(e,n);else if(n=Dz(t,e,n,r),n!==null){var i=ji();ia(n,t,r,i),Jz(n,e,r)}}function zq(t,e,n){var r=zl(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xz(t))Zz(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,la(o,a)){var c=e.interleaved;c===null?(i.next=i,Hj(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=Dz(t,e,i,r),n!==null&&(i=ji(),ia(n,t,r,i),Jz(n,e,r))}}function Xz(t){var e=t.alternate;return t===zn||e!==null&&e===zn}function Zz(t,e){om=$0=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Jz(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,kj(t,n)}}var F0={readContext:Is,useCallback:ai,useContext:ai,useEffect:ai,useImperativeHandle:ai,useInsertionEffect:ai,useLayoutEffect:ai,useMemo:ai,useReducer:ai,useRef:ai,useState:ai,useDebugValue:ai,useDeferredValue:ai,useTransition:ai,useMutableSource:ai,useSyncExternalStore:ai,useId:ai,unstable_isNewReconciler:!1},$q={readContext:Is,useCallback:function(t,e){return ka().memoizedState=[t,e===void 0?null:e],t},useContext:Is,useEffect:Lk,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Jy(4194308,4,Hz.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Jy(4194308,4,t,e)},useInsertionEffect:function(t,e){return Jy(4,2,t,e)},useMemo:function(t,e){var n=ka();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ka();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Lq.bind(null,zn,t),[r.memoizedState,t]},useRef:function(t){var e=ka();return t={current:t},e.memoizedState=t},useState:Rk,useDebugValue:eC,useDeferredValue:function(t){return ka().memoizedState=t},useTransition:function(){var t=Rk(!1),e=t[0];return t=Rq.bind(null,t[1]),ka().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=zn,i=ka();if(Pn){if(n===void 0)throw Error(Oe(407));n=n()}else{if(n=e(),Mr===null)throw Error(Oe(349));ju&30||Lz(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Lk($z.bind(null,r,s,t),[t]),r.flags|=2048,Ym(9,zz.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ka(),e=Mr.identifierPrefix;if(Pn){var n=bo,r=yo;n=(r&~(1<<32-ra(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=qm++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Mq++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Fq={readContext:Is,useCallback:qz,useContext:Is,useEffect:Jj,useImperativeHandle:Kz,useInsertionEffect:Uz,useLayoutEffect:Wz,useMemo:Gz,useReducer:o_,useRef:Bz,useState:function(){return o_(Gm)},useDebugValue:eC,useDeferredValue:function(t){var e=Os();return Yz(e,wr.memoizedState,t)},useTransition:function(){var t=o_(Gm)[0],e=Os().memoizedState;return[t,e]},useMutableSource:Mz,useSyncExternalStore:Rz,useId:Qz,unstable_isNewReconciler:!1},Vq={readContext:Is,useCallback:qz,useContext:Is,useEffect:Jj,useImperativeHandle:Kz,useInsertionEffect:Uz,useLayoutEffect:Wz,useMemo:Gz,useReducer:l_,useRef:Bz,useState:function(){return l_(Gm)},useDebugValue:eC,useDeferredValue:function(t){var e=Os();return wr===null?e.memoizedState=t:Yz(e,wr.memoizedState,t)},useTransition:function(){var t=l_(Gm)[0],e=Os().memoizedState;return[t,e]},useMutableSource:Mz,useSyncExternalStore:Rz,useId:Qz,unstable_isNewReconciler:!1};function Xs(t,e){if(t&&t.defaultProps){e=$n({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function wA(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:$n({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ux={isMounted:function(t){return(t=t._reactInternals)?Yu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ji(),i=zl(t),s=Eo(r,i);s.payload=e,n!=null&&(s.callback=n),e=Rl(t,s,i),e!==null&&(ia(e,t,i,r),Xy(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ji(),i=zl(t),s=Eo(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Rl(t,s,i),e!==null&&(ia(e,t,i,r),Xy(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ji(),r=zl(t),i=Eo(n,r);i.tag=2,e!=null&&(i.callback=e),e=Rl(t,i,r),e!==null&&(ia(e,t,r,n),Xy(e,t,r))}};function zk(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Vm(n,r)||!Vm(i,s):!0}function e$(t,e,n){var r=!1,i=Kl,s=e.contextType;return typeof s=="object"&&s!==null?s=Is(s):(i=Vi(e)?Au:gi.current,r=e.contextTypes,s=(r=r!=null)?kf(t,i):Kl),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ux,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function $k(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ux.enqueueReplaceState(e,e.state,null)}function _A(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Kj(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Is(s):(s=Vi(e)?Au:gi.current,i.context=kf(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(wA(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ux.enqueueReplaceState(i,i.state,null),L0(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Mf(t,e){try{var n="",r=e;do n+=mK(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function c_(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function SA(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Bq=typeof WeakMap=="function"?WeakMap:Map;function t$(t,e,n){n=Eo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){B0||(B0=!0,IA=r),SA(t,e)},n}function n$(t,e,n){n=Eo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){SA(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){SA(t,e),typeof r!="function"&&(Ll===null?Ll=new Set([this]):Ll.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Fk(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Bq;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=nG.bind(null,t,e,n),e.then(t,t))}function Vk(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Bk(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Eo(-1,1),e.tag=2,Rl(n,e,1))),n.lanes|=1),t)}var Uq=Uo.ReactCurrentOwner,Ri=!1;function wi(t,e,n,r){e.child=t===null?kz(e,null,n,r):If(e,t.child,n,r)}function Uk(t,e,n,r,i){n=n.render;var s=e.ref;return yf(e,i),r=Xj(t,e,n,r,s,i),n=Zj(),t!==null&&!Ri?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Io(t,e,i)):(Pn&&n&&$j(e),e.flags|=1,wi(t,e,r,i),e.child)}function Wk(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!lC(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,r$(t,e,s,r,i)):(t=r0(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Vm,n(a,r)&&t.ref===e.ref)return Io(t,e,i)}return e.flags|=1,t=$l(s,r),t.ref=e.ref,t.return=e,e.child=t}function r$(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Vm(s,r)&&t.ref===e.ref)if(Ri=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ri=!0);else return e.lanes=t.lanes,Io(t,e,i)}return AA(t,e,n,r,i)}function i$(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},bn(ef,Zi),Zi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,bn(ef,Zi),Zi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,bn(ef,Zi),Zi|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,bn(ef,Zi),Zi|=r;return wi(t,e,i,n),e.child}function s$(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function AA(t,e,n,r,i){var s=Vi(n)?Au:gi.current;return s=kf(e,s),yf(e,i),n=Xj(t,e,n,r,s,i),r=Zj(),t!==null&&!Ri?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Io(t,e,i)):(Pn&&r&&$j(e),e.flags|=1,wi(t,e,n,i),e.child)}function Hk(t,e,n,r,i){if(Vi(n)){var s=!0;D0(e)}else s=!1;if(yf(e,i),e.stateNode===null)e0(t,e),e$(e,n,r),_A(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Is(u):(u=Vi(n)?Au:gi.current,u=kf(e,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||c!==u)&&$k(e,a,r,u),yl=!1;var h=e.memoizedState;a.state=h,L0(e,r,a,i),c=e.memoizedState,o!==r||h!==c||Fi.current||yl?(typeof d=="function"&&(wA(e,n,d,r),c=e.memoizedState),(o=yl||zk(e,n,o,r,h,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=u,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Iz(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:Xs(e.type,o),a.props=u,f=e.pendingProps,h=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Is(c):(c=Vi(n)?Au:gi.current,c=kf(e,c));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==f||h!==c)&&$k(e,a,r,c),yl=!1,h=e.memoizedState,a.state=h,L0(e,r,a,i);var g=e.memoizedState;o!==f||h!==g||Fi.current||yl?(typeof p=="function"&&(wA(e,n,p,r),g=e.memoizedState),(u=yl||zk(e,n,u,r,h,g,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,g,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,g,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),a.props=r,a.state=g,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return EA(t,e,n,r,s,i)}function EA(t,e,n,r,i,s){s$(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&Pk(e,n,!1),Io(t,e,s);r=e.stateNode,Uq.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=If(e,t.child,null,s),e.child=If(e,null,o,s)):wi(t,e,o,s),e.memoizedState=r.state,i&&Pk(e,n,!0),e.child}function a$(t){var e=t.stateNode;e.pendingContext?Nk(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Nk(t,e.context,!1),qj(t,e.containerInfo)}function Kk(t,e,n,r,i){return Df(),Vj(i),e.flags|=256,wi(t,e,n,r),e.child}var jA={dehydrated:null,treeContext:null,retryLane:0};function CA(t){return{baseLanes:t,cachePool:null,transitions:null}}function o$(t,e,n){var r=e.pendingProps,i=Rn.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),bn(Rn,i&1),t===null)return bA(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Kx(a,r,0,null),t=hu(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=CA(n),e.memoizedState=jA,t):tC(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Wq(t,e,a,r,o,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,o=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=$l(i,c),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=$l(o,s):(s=hu(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?CA(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=jA,r}return s=t.child,t=s.sibling,r=$l(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function tC(t,e){return e=Kx({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function sy(t,e,n,r){return r!==null&&Vj(r),If(e,t.child,null,n),t=tC(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Wq(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=c_(Error(Oe(422))),sy(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Kx({mode:"visible",children:r.children},i,0,null),s=hu(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&If(e,t.child,null,a),e.child.memoizedState=CA(a),e.memoizedState=jA,s);if(!(e.mode&1))return sy(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(Oe(419)),r=c_(s,r,void 0),sy(t,e,a,r)}if(o=(a&t.childLanes)!==0,Ri||o){if(r=Mr,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Do(t,i),ia(r,t,i,-1))}return oC(),r=c_(Error(Oe(421))),sy(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=rG.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ts=Ml(i.nextSibling),rs=e,Pn=!0,ta=null,t!==null&&(Cs[Ts++]=yo,Cs[Ts++]=bo,Cs[Ts++]=Eu,yo=t.id,bo=t.overflow,Eu=e),e=tC(e,r.children),e.flags|=4096,e)}function qk(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),xA(t.return,e,n)}function u_(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function l$(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(wi(t,e,r.children,n),r=Rn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qk(t,n,e);else if(t.tag===19)qk(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(bn(Rn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&z0(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),u_(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&z0(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}u_(e,!0,n,null,s);break;case"together":u_(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function e0(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Io(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Cu|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Oe(153));if(e.child!==null){for(t=e.child,n=$l(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=$l(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Hq(t,e,n){switch(e.tag){case 3:a$(e),Df();break;case 5:Oz(e);break;case 1:Vi(e.type)&&D0(e);break;case 4:qj(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;bn(M0,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(bn(Rn,Rn.current&1),e.flags|=128,null):n&e.child.childLanes?o$(t,e,n):(bn(Rn,Rn.current&1),t=Io(t,e,n),t!==null?t.sibling:null);bn(Rn,Rn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return l$(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),bn(Rn,Rn.current),r)break;return null;case 22:case 23:return e.lanes=0,i$(t,e,n)}return Io(t,e,n)}var c$,TA,u$,d$;c$=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};TA=function(){};u$=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,nu(Fa.current);var s=null;switch(n){case"input":i=QS(t,i),r=QS(t,r),s=[];break;case"select":i=$n({},i,{value:void 0}),r=$n({},r,{value:void 0}),s=[];break;case"textarea":i=JS(t,i),r=JS(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=P0)}tA(n,r);var a;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Om.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Om.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&An("scroll",t),s||o===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};d$=function(t,e,n,r){n!==r&&(e.flags|=4)};function Tp(t,e){if(!Pn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function oi(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Kq(t,e,n){var r=e.pendingProps;switch(Fj(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oi(e),null;case 1:return Vi(e.type)&&k0(),oi(e),null;case 3:return r=e.stateNode,Of(),Tn(Fi),Tn(gi),Yj(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ry(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ta!==null&&(RA(ta),ta=null))),TA(t,e),oi(e),null;case 5:Gj(e);var i=nu(Km.current);if(n=e.type,t!==null&&e.stateNode!=null)u$(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Oe(166));return oi(e),null}if(t=nu(Fa.current),ry(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Ia]=e,r[Wm]=s,t=(e.mode&1)!==0,n){case"dialog":An("cancel",r),An("close",r);break;case"iframe":case"object":case"embed":An("load",r);break;case"video":case"audio":for(i=0;i<Hp.length;i++)An(Hp[i],r);break;case"source":An("error",r);break;case"img":case"image":case"link":An("error",r),An("load",r);break;case"details":An("toggle",r);break;case"input":nk(r,s),An("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},An("invalid",r);break;case"textarea":ik(r,s),An("invalid",r)}tA(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&ny(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&ny(r.textContent,o,t),i=["children",""+o]):Om.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&An("scroll",r)}switch(n){case"input":Gv(r),rk(r,s,!0);break;case"textarea":Gv(r),sk(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=P0)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$L(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Ia]=e,t[Wm]=r,c$(t,e,!1,!1),e.stateNode=t;e:{switch(a=nA(n,r),n){case"dialog":An("cancel",t),An("close",t),i=r;break;case"iframe":case"object":case"embed":An("load",t),i=r;break;case"video":case"audio":for(i=0;i<Hp.length;i++)An(Hp[i],t);i=r;break;case"source":An("error",t),i=r;break;case"img":case"image":case"link":An("error",t),An("load",t),i=r;break;case"details":An("toggle",t),i=r;break;case"input":nk(t,r),i=QS(t,r),An("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=$n({},r,{value:void 0}),An("invalid",t);break;case"textarea":ik(t,r),i=JS(t,r),An("invalid",t);break;default:i=r}tA(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var c=o[s];s==="style"?BL(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&FL(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Mm(t,c):typeof c=="number"&&Mm(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Om.hasOwnProperty(s)?c!=null&&s==="onScroll"&&An("scroll",t):c!=null&&Ej(t,s,c,a))}switch(n){case"input":Gv(t),rk(t,r,!1);break;case"textarea":Gv(t),sk(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Hl(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?pf(t,!!r.multiple,s,!1):r.defaultValue!=null&&pf(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=P0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return oi(e),null;case 6:if(t&&e.stateNode!=null)d$(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Oe(166));if(n=nu(Km.current),nu(Fa.current),ry(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ia]=e,(s=r.nodeValue!==n)&&(t=rs,t!==null))switch(t.tag){case 3:ny(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ny(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ia]=e,e.stateNode=r}return oi(e),null;case 13:if(Tn(Rn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pn&&ts!==null&&e.mode&1&&!(e.flags&128))Nz(),Df(),e.flags|=98560,s=!1;else if(s=ry(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Oe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Oe(317));s[Ia]=e}else Df(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;oi(e),s=!1}else ta!==null&&(RA(ta),ta=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Rn.current&1?Sr===0&&(Sr=3):oC())),e.updateQueue!==null&&(e.flags|=4),oi(e),null);case 4:return Of(),TA(t,e),t===null&&Bm(e.stateNode.containerInfo),oi(e),null;case 10:return Wj(e.type._context),oi(e),null;case 17:return Vi(e.type)&&k0(),oi(e),null;case 19:if(Tn(Rn),s=e.memoizedState,s===null)return oi(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)Tp(s,!1);else{if(Sr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=z0(t),a!==null){for(e.flags|=128,Tp(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return bn(Rn,Rn.current&1|2),e.child}t=t.sibling}s.tail!==null&&nr()>Rf&&(e.flags|=128,r=!0,Tp(s,!1),e.lanes=4194304)}else{if(!r)if(t=z0(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Tp(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Pn)return oi(e),null}else 2*nr()-s.renderingStartTime>Rf&&n!==1073741824&&(e.flags|=128,r=!0,Tp(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=nr(),e.sibling=null,n=Rn.current,bn(Rn,r?n&1|2:n&1),e):(oi(e),null);case 22:case 23:return aC(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Zi&1073741824&&(oi(e),e.subtreeFlags&6&&(e.flags|=8192)):oi(e),null;case 24:return null;case 25:return null}throw Error(Oe(156,e.tag))}function qq(t,e){switch(Fj(e),e.tag){case 1:return Vi(e.type)&&k0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Of(),Tn(Fi),Tn(gi),Yj(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Gj(e),null;case 13:if(Tn(Rn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Oe(340));Df()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Tn(Rn),null;case 4:return Of(),null;case 10:return Wj(e.type._context),null;case 22:case 23:return aC(),null;case 24:return null;default:return null}}var ay=!1,fi=!1,Gq=typeof WeakSet=="function"?WeakSet:Set,et=null;function Jd(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Hn(t,e,r)}else n.current=null}function NA(t,e,n){try{n()}catch(r){Hn(t,e,r)}}var Gk=!1;function Yq(t,e){if(fA=C0,t=gz(),zj(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,c=-1,u=0,d=0,f=t,h=null;t:for(;;){for(var p;f!==n||i!==0&&f.nodeType!==3||(o=a+i),f!==s||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===t)break t;if(h===n&&++u===i&&(o=a),h===s&&++d===r&&(c=a),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(hA={focusedElem:t,selectionRange:n},C0=!1,et=e;et!==null;)if(e=et,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,et=t;else for(;et!==null;){e=et;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,y=g.memoizedState,x=e.stateNode,w=x.getSnapshotBeforeUpdate(e.elementType===e.type?m:Xs(e.type,m),y);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Oe(163))}}catch(A){Hn(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,et=t;break}et=e.return}return g=Gk,Gk=!1,g}function lm(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&NA(e,n,s)}i=i.next}while(i!==r)}}function Wx(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function PA(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function f$(t){var e=t.alternate;e!==null&&(t.alternate=null,f$(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ia],delete e[Wm],delete e[gA],delete e[kq],delete e[Dq])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function h$(t){return t.tag===5||t.tag===3||t.tag===4}function Yk(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||h$(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kA(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=P0));else if(r!==4&&(t=t.child,t!==null))for(kA(t,e,n),t=t.sibling;t!==null;)kA(t,e,n),t=t.sibling}function DA(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(DA(t,e,n),t=t.sibling;t!==null;)DA(t,e,n),t=t.sibling}var qr=null,Zs=!1;function ul(t,e,n){for(n=n.child;n!==null;)p$(t,e,n),n=n.sibling}function p$(t,e,n){if($a&&typeof $a.onCommitFiberUnmount=="function")try{$a.onCommitFiberUnmount(Rx,n)}catch{}switch(n.tag){case 5:fi||Jd(n,e);case 6:var r=qr,i=Zs;qr=null,ul(t,e,n),qr=r,Zs=i,qr!==null&&(Zs?(t=qr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qr.removeChild(n.stateNode));break;case 18:qr!==null&&(Zs?(t=qr,n=n.stateNode,t.nodeType===8?r_(t.parentNode,n):t.nodeType===1&&r_(t,n),$m(t)):r_(qr,n.stateNode));break;case 4:r=qr,i=Zs,qr=n.stateNode.containerInfo,Zs=!0,ul(t,e,n),qr=r,Zs=i;break;case 0:case 11:case 14:case 15:if(!fi&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&NA(n,e,a),i=i.next}while(i!==r)}ul(t,e,n);break;case 1:if(!fi&&(Jd(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Hn(n,e,o)}ul(t,e,n);break;case 21:ul(t,e,n);break;case 22:n.mode&1?(fi=(r=fi)||n.memoizedState!==null,ul(t,e,n),fi=r):ul(t,e,n);break;default:ul(t,e,n)}}function Qk(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Gq),e.forEach(function(r){var i=iG.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Gs(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:qr=o.stateNode,Zs=!1;break e;case 3:qr=o.stateNode.containerInfo,Zs=!0;break e;case 4:qr=o.stateNode.containerInfo,Zs=!0;break e}o=o.return}if(qr===null)throw Error(Oe(160));p$(s,a,i),qr=null,Zs=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){Hn(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)m$(e,t),e=e.sibling}function m$(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Gs(e,t),Pa(t),r&4){try{lm(3,t,t.return),Wx(3,t)}catch(m){Hn(t,t.return,m)}try{lm(5,t,t.return)}catch(m){Hn(t,t.return,m)}}break;case 1:Gs(e,t),Pa(t),r&512&&n!==null&&Jd(n,n.return);break;case 5:if(Gs(e,t),Pa(t),r&512&&n!==null&&Jd(n,n.return),t.flags&32){var i=t.stateNode;try{Mm(i,"")}catch(m){Hn(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&LL(i,s),nA(o,a);var u=nA(o,s);for(a=0;a<c.length;a+=2){var d=c[a],f=c[a+1];d==="style"?BL(i,f):d==="dangerouslySetInnerHTML"?FL(i,f):d==="children"?Mm(i,f):Ej(i,d,f,u)}switch(o){case"input":XS(i,s);break;case"textarea":zL(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?pf(i,!!s.multiple,p,!1):h!==!!s.multiple&&(s.defaultValue!=null?pf(i,!!s.multiple,s.defaultValue,!0):pf(i,!!s.multiple,s.multiple?[]:"",!1))}i[Wm]=s}catch(m){Hn(t,t.return,m)}}break;case 6:if(Gs(e,t),Pa(t),r&4){if(t.stateNode===null)throw Error(Oe(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){Hn(t,t.return,m)}}break;case 3:if(Gs(e,t),Pa(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{$m(e.containerInfo)}catch(m){Hn(t,t.return,m)}break;case 4:Gs(e,t),Pa(t);break;case 13:Gs(e,t),Pa(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(iC=nr())),r&4&&Qk(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(fi=(u=fi)||d,Gs(e,t),fi=u):Gs(e,t),Pa(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(et=t,d=t.child;d!==null;){for(f=et=d;et!==null;){switch(h=et,p=h.child,h.tag){case 0:case 11:case 14:case 15:lm(4,h,h.return);break;case 1:Jd(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){Hn(r,n,m)}}break;case 5:Jd(h,h.return);break;case 22:if(h.memoizedState!==null){Zk(f);continue}}p!==null?(p.return=h,et=p):Zk(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=VL("display",a))}catch(m){Hn(t,t.return,m)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(m){Hn(t,t.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Gs(e,t),Pa(t),r&4&&Qk(t);break;case 21:break;default:Gs(e,t),Pa(t)}}function Pa(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(h$(n)){var r=n;break e}n=n.return}throw Error(Oe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Mm(i,""),r.flags&=-33);var s=Yk(t);DA(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=Yk(t);kA(t,o,a);break;default:throw Error(Oe(161))}}catch(c){Hn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Qq(t,e,n){et=t,g$(t)}function g$(t,e,n){for(var r=(t.mode&1)!==0;et!==null;){var i=et,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||ay;if(!a){var o=i.alternate,c=o!==null&&o.memoizedState!==null||fi;o=ay;var u=fi;if(ay=a,(fi=c)&&!u)for(et=i;et!==null;)a=et,c=a.child,a.tag===22&&a.memoizedState!==null?Jk(i):c!==null?(c.return=a,et=c):Jk(i);for(;s!==null;)et=s,g$(s),s=s.sibling;et=i,ay=o,fi=u}Xk(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,et=s):Xk(t)}}function Xk(t){for(;et!==null;){var e=et;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:fi||Wx(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!fi)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Xs(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Mk(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Mk(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&$m(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Oe(163))}fi||e.flags&512&&PA(e)}catch(h){Hn(e,e.return,h)}}if(e===t){et=null;break}if(n=e.sibling,n!==null){n.return=e.return,et=n;break}et=e.return}}function Zk(t){for(;et!==null;){var e=et;if(e===t){et=null;break}var n=e.sibling;if(n!==null){n.return=e.return,et=n;break}et=e.return}}function Jk(t){for(;et!==null;){var e=et;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Wx(4,e)}catch(c){Hn(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Hn(e,i,c)}}var s=e.return;try{PA(e)}catch(c){Hn(e,s,c)}break;case 5:var a=e.return;try{PA(e)}catch(c){Hn(e,a,c)}}}catch(c){Hn(e,e.return,c)}if(e===t){et=null;break}var o=e.sibling;if(o!==null){o.return=e.return,et=o;break}et=e.return}}var Xq=Math.ceil,V0=Uo.ReactCurrentDispatcher,nC=Uo.ReactCurrentOwner,Ds=Uo.ReactCurrentBatchConfig,Ht=0,Mr=null,fr=null,Zr=0,Zi=0,ef=nc(0),Sr=0,Qm=null,Cu=0,Hx=0,rC=0,cm=null,Oi=null,iC=0,Rf=1/0,mo=null,B0=!1,IA=null,Ll=null,oy=!1,Al=null,U0=0,um=0,OA=null,t0=-1,n0=0;function ji(){return Ht&6?nr():t0!==-1?t0:t0=nr()}function zl(t){return t.mode&1?Ht&2&&Zr!==0?Zr&-Zr:Oq.transition!==null?(n0===0&&(n0=ez()),n0):(t=an,t!==0||(t=window.event,t=t===void 0?16:oz(t.type)),t):1}function ia(t,e,n,r){if(50<um)throw um=0,OA=null,Error(Oe(185));nv(t,n,r),(!(Ht&2)||t!==Mr)&&(t===Mr&&(!(Ht&2)&&(Hx|=n),Sr===4&&wl(t,Zr)),Bi(t,r),n===1&&Ht===0&&!(e.mode&1)&&(Rf=nr()+500,Vx&&rc()))}function Bi(t,e){var n=t.callbackNode;OK(t,e);var r=j0(t,t===Mr?Zr:0);if(r===0)n!==null&&lk(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&lk(n),e===1)t.tag===0?Iq(eD.bind(null,t)):jz(eD.bind(null,t)),Nq(function(){!(Ht&6)&&rc()}),n=null;else{switch(tz(r)){case 1:n=Pj;break;case 4:n=ZL;break;case 16:n=E0;break;case 536870912:n=JL;break;default:n=E0}n=A$(n,v$.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function v$(t,e){if(t0=-1,n0=0,Ht&6)throw Error(Oe(327));var n=t.callbackNode;if(bf()&&t.callbackNode!==n)return null;var r=j0(t,t===Mr?Zr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=W0(t,r);else{e=r;var i=Ht;Ht|=2;var s=b$();(Mr!==t||Zr!==e)&&(mo=null,Rf=nr()+500,fu(t,e));do try{eG();break}catch(o){y$(t,o)}while(!0);Uj(),V0.current=s,Ht=i,fr!==null?e=0:(Mr=null,Zr=0,e=Sr)}if(e!==0){if(e===2&&(i=oA(t),i!==0&&(r=i,e=MA(t,i))),e===1)throw n=Qm,fu(t,0),wl(t,r),Bi(t,nr()),n;if(e===6)wl(t,r);else{if(i=t.current.alternate,!(r&30)&&!Zq(i)&&(e=W0(t,r),e===2&&(s=oA(t),s!==0&&(r=s,e=MA(t,s))),e===1))throw n=Qm,fu(t,0),wl(t,r),Bi(t,nr()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Oe(345));case 2:Vc(t,Oi,mo);break;case 3:if(wl(t,r),(r&130023424)===r&&(e=iC+500-nr(),10<e)){if(j0(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ji(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=mA(Vc.bind(null,t,Oi,mo),e);break}Vc(t,Oi,mo);break;case 4:if(wl(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-ra(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=nr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Xq(r/1960))-r,10<r){t.timeoutHandle=mA(Vc.bind(null,t,Oi,mo),r);break}Vc(t,Oi,mo);break;case 5:Vc(t,Oi,mo);break;default:throw Error(Oe(329))}}}return Bi(t,nr()),t.callbackNode===n?v$.bind(null,t):null}function MA(t,e){var n=cm;return t.current.memoizedState.isDehydrated&&(fu(t,e).flags|=256),t=W0(t,e),t!==2&&(e=Oi,Oi=n,e!==null&&RA(e)),t}function RA(t){Oi===null?Oi=t:Oi.push.apply(Oi,t)}function Zq(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!la(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function wl(t,e){for(e&=~rC,e&=~Hx,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ra(e),r=1<<n;t[n]=-1,e&=~r}}function eD(t){if(Ht&6)throw Error(Oe(327));bf();var e=j0(t,0);if(!(e&1))return Bi(t,nr()),null;var n=W0(t,e);if(t.tag!==0&&n===2){var r=oA(t);r!==0&&(e=r,n=MA(t,r))}if(n===1)throw n=Qm,fu(t,0),wl(t,e),Bi(t,nr()),n;if(n===6)throw Error(Oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Vc(t,Oi,mo),Bi(t,nr()),null}function sC(t,e){var n=Ht;Ht|=1;try{return t(e)}finally{Ht=n,Ht===0&&(Rf=nr()+500,Vx&&rc())}}function Tu(t){Al!==null&&Al.tag===0&&!(Ht&6)&&bf();var e=Ht;Ht|=1;var n=Ds.transition,r=an;try{if(Ds.transition=null,an=1,t)return t()}finally{an=r,Ds.transition=n,Ht=e,!(Ht&6)&&rc()}}function aC(){Zi=ef.current,Tn(ef)}function fu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Tq(n)),fr!==null)for(n=fr.return;n!==null;){var r=n;switch(Fj(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&k0();break;case 3:Of(),Tn(Fi),Tn(gi),Yj();break;case 5:Gj(r);break;case 4:Of();break;case 13:Tn(Rn);break;case 19:Tn(Rn);break;case 10:Wj(r.type._context);break;case 22:case 23:aC()}n=n.return}if(Mr=t,fr=t=$l(t.current,null),Zr=Zi=e,Sr=0,Qm=null,rC=Hx=Cu=0,Oi=cm=null,tu!==null){for(e=0;e<tu.length;e++)if(n=tu[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}tu=null}return t}function y$(t,e){do{var n=fr;try{if(Uj(),Zy.current=F0,$0){for(var r=zn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}$0=!1}if(ju=0,Dr=wr=zn=null,om=!1,qm=0,nC.current=null,n===null||n.return===null){Sr=1,Qm=e,fr=null;break}e:{var s=t,a=n.return,o=n,c=e;if(e=Zr,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Vk(a);if(p!==null){p.flags&=-257,Bk(p,a,o,s,e),p.mode&1&&Fk(s,u,e),e=p,c=u;var g=e.updateQueue;if(g===null){var m=new Set;m.add(c),e.updateQueue=m}else g.add(c);break e}else{if(!(e&1)){Fk(s,u,e),oC();break e}c=Error(Oe(426))}}else if(Pn&&o.mode&1){var y=Vk(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Bk(y,a,o,s,e),Vj(Mf(c,o));break e}}s=c=Mf(c,o),Sr!==4&&(Sr=2),cm===null?cm=[s]:cm.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=t$(s,c,e);Ok(s,x);break e;case 1:o=c;var w=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Ll===null||!Ll.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var A=n$(s,o,e);Ok(s,A);break e}}s=s.return}while(s!==null)}w$(n)}catch(E){e=E,fr===n&&n!==null&&(fr=n=n.return);continue}break}while(!0)}function b$(){var t=V0.current;return V0.current=F0,t===null?F0:t}function oC(){(Sr===0||Sr===3||Sr===2)&&(Sr=4),Mr===null||!(Cu&268435455)&&!(Hx&268435455)||wl(Mr,Zr)}function W0(t,e){var n=Ht;Ht|=2;var r=b$();(Mr!==t||Zr!==e)&&(mo=null,fu(t,e));do try{Jq();break}catch(i){y$(t,i)}while(!0);if(Uj(),Ht=n,V0.current=r,fr!==null)throw Error(Oe(261));return Mr=null,Zr=0,Sr}function Jq(){for(;fr!==null;)x$(fr)}function eG(){for(;fr!==null&&!EK();)x$(fr)}function x$(t){var e=S$(t.alternate,t,Zi);t.memoizedProps=t.pendingProps,e===null?w$(t):fr=e,nC.current=null}function w$(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=qq(n,e),n!==null){n.flags&=32767,fr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Sr=6,fr=null;return}}else if(n=Kq(n,e,Zi),n!==null){fr=n;return}if(e=e.sibling,e!==null){fr=e;return}fr=e=t}while(e!==null);Sr===0&&(Sr=5)}function Vc(t,e,n){var r=an,i=Ds.transition;try{Ds.transition=null,an=1,tG(t,e,n,r)}finally{Ds.transition=i,an=r}return null}function tG(t,e,n,r){do bf();while(Al!==null);if(Ht&6)throw Error(Oe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Oe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(MK(t,s),t===Mr&&(fr=Mr=null,Zr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||oy||(oy=!0,A$(E0,function(){return bf(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ds.transition,Ds.transition=null;var a=an;an=1;var o=Ht;Ht|=4,nC.current=null,Yq(t,n),m$(n,t),wq(hA),C0=!!fA,hA=fA=null,t.current=n,Qq(n),jK(),Ht=o,an=a,Ds.transition=s}else t.current=n;if(oy&&(oy=!1,Al=t,U0=i),s=t.pendingLanes,s===0&&(Ll=null),NK(n.stateNode),Bi(t,nr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(B0)throw B0=!1,t=IA,IA=null,t;return U0&1&&t.tag!==0&&bf(),s=t.pendingLanes,s&1?t===OA?um++:(um=0,OA=t):um=0,rc(),null}function bf(){if(Al!==null){var t=tz(U0),e=Ds.transition,n=an;try{if(Ds.transition=null,an=16>t?16:t,Al===null)var r=!1;else{if(t=Al,Al=null,U0=0,Ht&6)throw Error(Oe(331));var i=Ht;for(Ht|=4,et=t.current;et!==null;){var s=et,a=s.child;if(et.flags&16){var o=s.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(et=u;et!==null;){var d=et;switch(d.tag){case 0:case 11:case 15:lm(8,d,s)}var f=d.child;if(f!==null)f.return=d,et=f;else for(;et!==null;){d=et;var h=d.sibling,p=d.return;if(f$(d),d===u){et=null;break}if(h!==null){h.return=p,et=h;break}et=p}}}var g=s.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(m!==null)}}et=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,et=a;else e:for(;et!==null;){if(s=et,s.flags&2048)switch(s.tag){case 0:case 11:case 15:lm(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,et=x;break e}et=s.return}}var w=t.current;for(et=w;et!==null;){a=et;var _=a.child;if(a.subtreeFlags&2064&&_!==null)_.return=a,et=_;else e:for(a=w;et!==null;){if(o=et,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Wx(9,o)}}catch(E){Hn(o,o.return,E)}if(o===a){et=null;break e}var A=o.sibling;if(A!==null){A.return=o.return,et=A;break e}et=o.return}}if(Ht=i,rc(),$a&&typeof $a.onPostCommitFiberRoot=="function")try{$a.onPostCommitFiberRoot(Rx,t)}catch{}r=!0}return r}finally{an=n,Ds.transition=e}}return!1}function tD(t,e,n){e=Mf(n,e),e=t$(t,e,1),t=Rl(t,e,1),e=ji(),t!==null&&(nv(t,1,e),Bi(t,e))}function Hn(t,e,n){if(t.tag===3)tD(t,t,n);else for(;e!==null;){if(e.tag===3){tD(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ll===null||!Ll.has(r))){t=Mf(n,t),t=n$(e,t,1),e=Rl(e,t,1),t=ji(),e!==null&&(nv(e,1,t),Bi(e,t));break}}e=e.return}}function nG(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ji(),t.pingedLanes|=t.suspendedLanes&n,Mr===t&&(Zr&n)===n&&(Sr===4||Sr===3&&(Zr&130023424)===Zr&&500>nr()-iC?fu(t,0):rC|=n),Bi(t,e)}function _$(t,e){e===0&&(t.mode&1?(e=Xv,Xv<<=1,!(Xv&130023424)&&(Xv=4194304)):e=1);var n=ji();t=Do(t,e),t!==null&&(nv(t,e,n),Bi(t,n))}function rG(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),_$(t,n)}function iG(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Oe(314))}r!==null&&r.delete(e),_$(t,n)}var S$;S$=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Fi.current)Ri=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ri=!1,Hq(t,e,n);Ri=!!(t.flags&131072)}else Ri=!1,Pn&&e.flags&1048576&&Cz(e,O0,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;e0(t,e),t=e.pendingProps;var i=kf(e,gi.current);yf(e,n),i=Xj(null,e,r,t,i,n);var s=Zj();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Vi(r)?(s=!0,D0(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Kj(e),i.updater=Ux,e.stateNode=i,i._reactInternals=e,_A(e,r,t,n),e=EA(null,e,r,!0,s,n)):(e.tag=0,Pn&&s&&$j(e),wi(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(e0(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=aG(r),t=Xs(r,t),i){case 0:e=AA(null,e,r,t,n);break e;case 1:e=Hk(null,e,r,t,n);break e;case 11:e=Uk(null,e,r,t,n);break e;case 14:e=Wk(null,e,r,Xs(r.type,t),n);break e}throw Error(Oe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xs(r,i),AA(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xs(r,i),Hk(t,e,r,i,n);case 3:e:{if(a$(e),t===null)throw Error(Oe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Iz(t,e),L0(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Mf(Error(Oe(423)),e),e=Kk(t,e,r,n,i);break e}else if(r!==i){i=Mf(Error(Oe(424)),e),e=Kk(t,e,r,n,i);break e}else for(ts=Ml(e.stateNode.containerInfo.firstChild),rs=e,Pn=!0,ta=null,n=kz(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Df(),r===i){e=Io(t,e,n);break e}wi(t,e,r,n)}e=e.child}return e;case 5:return Oz(e),t===null&&bA(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,pA(r,i)?a=null:s!==null&&pA(r,s)&&(e.flags|=32),s$(t,e),wi(t,e,a,n),e.child;case 6:return t===null&&bA(e),null;case 13:return o$(t,e,n);case 4:return qj(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=If(e,null,r,n):wi(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xs(r,i),Uk(t,e,r,i,n);case 7:return wi(t,e,e.pendingProps,n),e.child;case 8:return wi(t,e,e.pendingProps.children,n),e.child;case 12:return wi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,bn(M0,r._currentValue),r._currentValue=a,s!==null)if(la(s.value,a)){if(s.children===i.children&&!Fi.current){e=Io(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Eo(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),xA(s.return,n,e),o.lanes|=n;break}c=c.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Oe(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),xA(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}wi(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,yf(e,n),i=Is(i),r=r(i),e.flags|=1,wi(t,e,r,n),e.child;case 14:return r=e.type,i=Xs(r,e.pendingProps),i=Xs(r.type,i),Wk(t,e,r,i,n);case 15:return r$(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Xs(r,i),e0(t,e),e.tag=1,Vi(r)?(t=!0,D0(e)):t=!1,yf(e,n),e$(e,r,i),_A(e,r,i,n),EA(null,e,r,!0,t,n);case 19:return l$(t,e,n);case 22:return i$(t,e,n)}throw Error(Oe(156,e.tag))};function A$(t,e){return XL(t,e)}function sG(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ps(t,e,n,r){return new sG(t,e,n,r)}function lC(t){return t=t.prototype,!(!t||!t.isReactComponent)}function aG(t){if(typeof t=="function")return lC(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Cj)return 11;if(t===Tj)return 14}return 2}function $l(t,e){var n=t.alternate;return n===null?(n=Ps(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function r0(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")lC(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Wd:return hu(n.children,i,s,e);case jj:a=8,i|=8;break;case KS:return t=Ps(12,n,e,i|2),t.elementType=KS,t.lanes=s,t;case qS:return t=Ps(13,n,e,i),t.elementType=qS,t.lanes=s,t;case GS:return t=Ps(19,n,e,i),t.elementType=GS,t.lanes=s,t;case OL:return Kx(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case DL:a=10;break e;case IL:a=9;break e;case Cj:a=11;break e;case Tj:a=14;break e;case vl:a=16,r=null;break e}throw Error(Oe(130,t==null?t:typeof t,""))}return e=Ps(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function hu(t,e,n,r){return t=Ps(7,t,r,e),t.lanes=n,t}function Kx(t,e,n,r){return t=Ps(22,t,r,e),t.elementType=OL,t.lanes=n,t.stateNode={isHidden:!1},t}function d_(t,e,n){return t=Ps(6,t,null,e),t.lanes=n,t}function f_(t,e,n){return e=Ps(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function oG(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=K1(0),this.expirationTimes=K1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=K1(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function cC(t,e,n,r,i,s,a,o,c){return t=new oG(t,e,n,o,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ps(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kj(s),t}function lG(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ud,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function E$(t){if(!t)return Kl;t=t._reactInternals;e:{if(Yu(t)!==t||t.tag!==1)throw Error(Oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Vi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Oe(171))}if(t.tag===1){var n=t.type;if(Vi(n))return Ez(t,n,e)}return e}function j$(t,e,n,r,i,s,a,o,c){return t=cC(n,r,!0,t,i,s,a,o,c),t.context=E$(null),n=t.current,r=ji(),i=zl(n),s=Eo(r,i),s.callback=e??null,Rl(n,s,i),t.current.lanes=i,nv(t,i,r),Bi(t,r),t}function qx(t,e,n,r){var i=e.current,s=ji(),a=zl(i);return n=E$(n),e.context===null?e.context=n:e.pendingContext=n,e=Eo(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Rl(i,e,a),t!==null&&(ia(t,i,a,s),Xy(t,i,a)),a}function H0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function nD(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function uC(t,e){nD(t,e),(t=t.alternate)&&nD(t,e)}function cG(){return null}var C$=typeof reportError=="function"?reportError:function(t){console.error(t)};function dC(t){this._internalRoot=t}Gx.prototype.render=dC.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Oe(409));qx(t,e,null,null)};Gx.prototype.unmount=dC.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Tu(function(){qx(null,t,null,null)}),e[ko]=null}};function Gx(t){this._internalRoot=t}Gx.prototype.unstable_scheduleHydration=function(t){if(t){var e=iz();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xl.length&&e!==0&&e<xl[n].priority;n++);xl.splice(n,0,t),n===0&&az(t)}};function fC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function rD(){}function uG(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=H0(a);s.call(u)}}var a=j$(e,r,t,0,null,!1,!1,"",rD);return t._reactRootContainer=a,t[ko]=a.current,Bm(t.nodeType===8?t.parentNode:t),Tu(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=H0(c);o.call(u)}}var c=cC(t,0,!1,null,null,!1,!1,"",rD);return t._reactRootContainer=c,t[ko]=c.current,Bm(t.nodeType===8?t.parentNode:t),Tu(function(){qx(e,c,n,r)}),c}function Qx(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var c=H0(a);o.call(c)}}qx(e,a,t,i)}else a=uG(n,e,t,i,r);return H0(a)}nz=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Wp(e.pendingLanes);n!==0&&(kj(e,n|1),Bi(e,nr()),!(Ht&6)&&(Rf=nr()+500,rc()))}break;case 13:Tu(function(){var r=Do(t,1);if(r!==null){var i=ji();ia(r,t,1,i)}}),uC(t,1)}};Dj=function(t){if(t.tag===13){var e=Do(t,134217728);if(e!==null){var n=ji();ia(e,t,134217728,n)}uC(t,134217728)}};rz=function(t){if(t.tag===13){var e=zl(t),n=Do(t,e);if(n!==null){var r=ji();ia(n,t,e,r)}uC(t,e)}};iz=function(){return an};sz=function(t,e){var n=an;try{return an=t,e()}finally{an=n}};iA=function(t,e,n){switch(e){case"input":if(XS(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Fx(r);if(!i)throw Error(Oe(90));RL(r),XS(r,i)}}}break;case"textarea":zL(t,n);break;case"select":e=n.value,e!=null&&pf(t,!!n.multiple,e,!1)}};HL=sC;KL=Tu;var dG={usingClientEntryPoint:!1,Events:[iv,Gd,Fx,UL,WL,sC]},Np={findFiberByHostInstance:eu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fG={bundleType:Np.bundleType,version:Np.version,rendererPackageName:Np.rendererPackageName,rendererConfig:Np.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Uo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=YL(t),t===null?null:t.stateNode},findFiberByHostInstance:Np.findFiberByHostInstance||cG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ly=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ly.isDisabled&&ly.supportsFiber)try{Rx=ly.inject(fG),$a=ly}catch{}}ms.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dG;ms.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fC(e))throw Error(Oe(200));return lG(t,e,null,n)};ms.createRoot=function(t,e){if(!fC(t))throw Error(Oe(299));var n=!1,r="",i=C$;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=cC(t,1,!1,null,null,n,!1,r,i),t[ko]=e.current,Bm(t.nodeType===8?t.parentNode:t),new dC(e)};ms.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Oe(188)):(t=Object.keys(t).join(","),Error(Oe(268,t)));return t=YL(e),t=t===null?null:t.stateNode,t};ms.flushSync=function(t){return Tu(t)};ms.hydrate=function(t,e,n){if(!Yx(e))throw Error(Oe(200));return Qx(null,t,e,!0,n)};ms.hydrateRoot=function(t,e,n){if(!fC(t))throw Error(Oe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=C$;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=j$(e,null,t,1,n??null,i,!1,s,a),t[ko]=e.current,Bm(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Gx(e)};ms.render=function(t,e,n){if(!Yx(e))throw Error(Oe(200));return Qx(null,t,e,!1,n)};ms.unmountComponentAtNode=function(t){if(!Yx(t))throw Error(Oe(40));return t._reactRootContainer?(Tu(function(){Qx(null,null,t,!1,function(){t._reactRootContainer=null,t[ko]=null})}),!0):!1};ms.unstable_batchedUpdates=sC;ms.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Yx(n))throw Error(Oe(200));if(t==null||t._reactInternals===void 0)throw Error(Oe(38));return Qx(t,e,n,!1,r)};ms.version="18.3.1-next-f1338f8080-20240426";function T$(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(T$)}catch(t){console.error(t)}}T$(),TL.exports=ms;var Xm=TL.exports,iD=Xm;WS.createRoot=iD.createRoot,WS.hydrateRoot=iD.hydrateRoot;var sD={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N$=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},hG=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],o=t[n++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},P$={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,o=a?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,d=s>>2,f=(s&3)<<4|o>>4;let h=(o&15)<<2|u>>6,p=u&63;c||(p=64,a||(h=64)),r.push(n[d],n[f],n[h],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(N$(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):hG(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||o==null||u==null||f==null)throw new pG;const h=s<<2|o>>4;if(r.push(h),u!==64){const p=o<<4&240|u>>2;if(r.push(p),f!==64){const g=u<<6&192|f;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class pG extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mG=function(t){const e=N$(t);return P$.encodeByteArray(e,!0)},k$=function(t){return mG(t).replace(/\./g,"")},D$=function(t){try{return P$.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gG(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vG=()=>gG().__FIREBASE_DEFAULTS__,yG=()=>{if(typeof process>"u"||typeof sD>"u")return;const t=sD.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},bG=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&D$(t[1]);return e&&JSON.parse(e)},hC=()=>{try{return vG()||yG()||bG()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},xG=()=>{var t;return(t=hC())===null||t===void 0?void 0:t.config},wG=t=>{var e;return(e=hC())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _G{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SG(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Hi())}function AG(){var t;const e=(t=hC())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EG(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jG(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function CG(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function TG(){const t=Hi();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function NG(){return!AG()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function PG(){try{return typeof indexedDB=="object"}catch{return!1}}function kG(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DG="FirebaseError";class Wo extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=DG,Object.setPrototypeOf(this,Wo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,av.prototype.create)}}class av{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?IG(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new Wo(i,o,r)}}function IG(t,e){return t.replace(OG,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const OG=/\{\$([^}]+)}/g;function Zm(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(aD(s)&&aD(a)){if(!Zm(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function aD(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I$(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Kp(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function qp(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function MG(t,e){const n=new RG(t,e);return n.subscribe.bind(n)}class RG{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");LG(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=h_),i.error===void 0&&(i.error=h_),i.complete===void 0&&(i.complete=h_);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function LG(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function h_(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(t){return t&&t._delegate?t._delegate:t}class Nu{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zG{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new _G;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(FG(e))try{this.getOrInitializeService({instanceIdentifier:Bc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Bc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bc){return this.instances.has(e)}getOptions(e=Bc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$G(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Bc){return this.component?this.component.multipleInstances?e:Bc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $G(t){return t===Bc?void 0:t}function FG(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VG{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zG(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(zt||(zt={}));const BG={debug:zt.DEBUG,verbose:zt.VERBOSE,info:zt.INFO,warn:zt.WARN,error:zt.ERROR,silent:zt.SILENT},UG=zt.INFO,WG={[zt.DEBUG]:"log",[zt.VERBOSE]:"log",[zt.INFO]:"info",[zt.WARN]:"warn",[zt.ERROR]:"error"},HG=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=WG[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pC{constructor(e){this.name=e,this._logLevel=UG,this._logHandler=HG,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in zt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?BG[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,zt.DEBUG,...e),this._logHandler(this,zt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,zt.VERBOSE,...e),this._logHandler(this,zt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,zt.INFO,...e),this._logHandler(this,zt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,zt.WARN,...e),this._logHandler(this,zt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,zt.ERROR,...e),this._logHandler(this,zt.ERROR,...e)}}const KG=(t,e)=>e.some(n=>t instanceof n);let oD,lD;function qG(){return oD||(oD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GG(){return lD||(lD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const O$=new WeakMap,LA=new WeakMap,M$=new WeakMap,p_=new WeakMap,mC=new WeakMap;function YG(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Fl(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&O$.set(n,t)}).catch(()=>{}),mC.set(e,t),e}function QG(t){if(LA.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});LA.set(t,e)}let zA={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return LA.get(t);if(e==="objectStoreNames")return t.objectStoreNames||M$.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fl(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function XG(t){zA=t(zA)}function ZG(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(m_(this),e,...n);return M$.set(r,e.sort?e.sort():[e]),Fl(r)}:GG().includes(t)?function(...e){return t.apply(m_(this),e),Fl(O$.get(this))}:function(...e){return Fl(t.apply(m_(this),e))}}function JG(t){return typeof t=="function"?ZG(t):(t instanceof IDBTransaction&&QG(t),KG(t,qG())?new Proxy(t,zA):t)}function Fl(t){if(t instanceof IDBRequest)return YG(t);if(p_.has(t))return p_.get(t);const e=JG(t);return e!==t&&(p_.set(t,e),mC.set(e,t)),e}const m_=t=>mC.get(t);function eY(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),o=Fl(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Fl(a.result),c.oldVersion,c.newVersion,Fl(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),o.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const tY=["get","getKey","getAll","getAllKeys","count"],nY=["put","add","delete","clear"],g_=new Map;function cD(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(g_.get(e))return g_.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=nY.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||tY.includes(n)))return;const s=async function(a,...o){const c=this.transaction(a,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),i&&c.done]))[0]};return g_.set(e,s),s}XG(t=>({...t,get:(e,n,r)=>cD(e,n)||t.get(e,n,r),has:(e,n)=>!!cD(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rY{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(iY(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function iY(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $A="@firebase/app",uD="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo=new pC("@firebase/app"),sY="@firebase/app-compat",aY="@firebase/analytics-compat",oY="@firebase/analytics",lY="@firebase/app-check-compat",cY="@firebase/app-check",uY="@firebase/auth",dY="@firebase/auth-compat",fY="@firebase/database",hY="@firebase/data-connect",pY="@firebase/database-compat",mY="@firebase/functions",gY="@firebase/functions-compat",vY="@firebase/installations",yY="@firebase/installations-compat",bY="@firebase/messaging",xY="@firebase/messaging-compat",wY="@firebase/performance",_Y="@firebase/performance-compat",SY="@firebase/remote-config",AY="@firebase/remote-config-compat",EY="@firebase/storage",jY="@firebase/storage-compat",CY="@firebase/firestore",TY="@firebase/vertexai-preview",NY="@firebase/firestore-compat",PY="firebase",kY="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DY="[DEFAULT]",IY={[$A]:"fire-core",[sY]:"fire-core-compat",[oY]:"fire-analytics",[aY]:"fire-analytics-compat",[cY]:"fire-app-check",[lY]:"fire-app-check-compat",[uY]:"fire-auth",[dY]:"fire-auth-compat",[fY]:"fire-rtdb",[hY]:"fire-data-connect",[pY]:"fire-rtdb-compat",[mY]:"fire-fn",[gY]:"fire-fn-compat",[vY]:"fire-iid",[yY]:"fire-iid-compat",[bY]:"fire-fcm",[xY]:"fire-fcm-compat",[wY]:"fire-perf",[_Y]:"fire-perf-compat",[SY]:"fire-rc",[AY]:"fire-rc-compat",[EY]:"fire-gcs",[jY]:"fire-gcs-compat",[CY]:"fire-fst",[NY]:"fire-fst-compat",[TY]:"fire-vertex","fire-js":"fire-js",[PY]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=new Map,OY=new Map,VA=new Map;function dD(t,e){try{t.container.addComponent(e)}catch(n){Oo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Lf(t){const e=t.name;if(VA.has(e))return Oo.debug(`There were multiple attempts to register component ${e}.`),!1;VA.set(e,t);for(const n of FA.values())dD(n,t);for(const n of OY.values())dD(n,t);return!0}function R$(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function El(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MY={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pu=new av("app","Firebase",MY);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RY{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Nu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pu.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx=kY;function LY(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:DY,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw pu.create("bad-app-name",{appName:String(i)});if(n||(n=xG()),!n)throw pu.create("no-options");const s=FA.get(i);if(s){if(Zm(n,s.options)&&Zm(r,s.config))return s;throw pu.create("duplicate-app",{appName:i})}const a=new VG(i);for(const c of VA.values())a.addComponent(c);const o=new RY(n,r,a);return FA.set(i,o),o}function Vl(t,e,n){var r;let i=(r=IY[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Oo.warn(o.join(" "));return}Lf(new Nu(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zY="firebase-heartbeat-database",$Y=1,Jm="firebase-heartbeat-store";let v_=null;function L$(){return v_||(v_=eY(zY,$Y,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Jm)}catch(n){console.warn(n)}}}}).catch(t=>{throw pu.create("idb-open",{originalErrorMessage:t.message})})),v_}async function FY(t){try{const n=(await L$()).transaction(Jm),r=await n.objectStore(Jm).get(z$(t));return await n.done,r}catch(e){if(e instanceof Wo)Oo.warn(e.message);else{const n=pu.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Oo.warn(n.message)}}}async function fD(t,e){try{const r=(await L$()).transaction(Jm,"readwrite");await r.objectStore(Jm).put(e,z$(t)),await r.done}catch(n){if(n instanceof Wo)Oo.warn(n.message);else{const r=pu.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Oo.warn(r.message)}}}function z$(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VY=1024,BY=30*24*60*60*1e3;class UY{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HY(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=hD();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=BY}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Oo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=hD(),{heartbeatsToSend:r,unsentEntries:i}=WY(this._heartbeatsCache.heartbeats),s=k$(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Oo.warn(n),""}}}function hD(){return new Date().toISOString().substring(0,10)}function WY(t,e=VY){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),pD(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),pD(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class HY{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return PG()?kG().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await FY(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return fD(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return fD(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function pD(t){return k$(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KY(t){Lf(new Nu("platform-logger",e=>new rY(e),"PRIVATE")),Lf(new Nu("heartbeat",e=>new UY(e),"PRIVATE")),Vl($A,uD,t),Vl($A,uD,"esm2017"),Vl("fire-js","")}KY("");function $$(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function F$(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qY=F$,V$=new av("auth","Firebase",F$());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0=new pC("@firebase/auth");function GY(t,...e){K0.logLevel<=zt.WARN&&K0.warn(`Auth (${Xx}): ${t}`,...e)}function i0(t,...e){K0.logLevel<=zt.ERROR&&K0.error(`Auth (${Xx}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(t,...e){throw vC(t,...e)}function gC(t,...e){return vC(t,...e)}function B$(t,e,n){const r=Object.assign(Object.assign({},qY()),{[e]:n});return new av("auth","Firebase",r).create(e,{appName:t.name})}function mu(t){return B$(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vC(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return V$.create(t,...e)}function Wt(t,e,...n){if(!t)throw vC(e,...n)}function xo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw i0(e),new Error(e)}function q0(t,e){t||xo(e)}function YY(){return mD()==="http:"||mD()==="https:"}function mD(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QY(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YY()||jG()||"connection"in navigator)?navigator.onLine:!0}function XY(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,n){this.shortDelay=e,this.longDelay=n,q0(n>e,"Short delay should be less than long delay!"),this.isMobile=SG()||CG()}get(){return QY()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZY(t,e){q0(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U${static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JY={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eQ=new ov(3e4,6e4);function Qu(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Xu(t,e,n,r,i={}){return W$(t,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const o=I$(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},s);return EG()||(u.referrerPolicy="no-referrer"),U$.fetch()(H$(t,t.config.apiHost,n,o),u)})}async function W$(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},JY),e);try{const i=new nQ(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw cy(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw cy(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw cy(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw cy(t,"user-disabled",a);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw B$(t,d,u);zf(t,d)}}catch(i){if(i instanceof Wo)throw i;zf(t,"network-request-failed",{message:String(i)})}}async function Zx(t,e,n,r,i={}){const s=await Xu(t,e,n,r,i);return"mfaPendingCredential"in s&&zf(t,"multi-factor-auth-required",{_serverResponse:s}),s}function H$(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?ZY(t.config,i):`${t.config.apiScheme}://${i}`}function tQ(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nQ{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(gC(this.auth,"network-request-failed")),eQ.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function cy(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=gC(t,e,r);return i.customData._tokenResponse=n,i}function gD(t){return t!==void 0&&t.enterprise!==void 0}class rQ{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return tQ(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function iQ(t,e){return Xu(t,"GET","/v2/recaptchaConfig",Qu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sQ(t,e){return Xu(t,"POST","/v1/accounts:delete",e)}async function K$(t,e){return Xu(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function aQ(t,e=!1){const n=ti(t),r=await n.getIdToken(e),i=q$(r);Wt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:dm(y_(i.auth_time)),issuedAtTime:dm(y_(i.iat)),expirationTime:dm(y_(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function y_(t){return Number(t)*1e3}function q$(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return i0("JWT malformed, contained fewer than 3 sections"),null;try{const i=D$(n);return i?JSON.parse(i):(i0("Failed to decode base64 JWT payload"),null)}catch(i){return i0("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function vD(t){const e=q$(t);return Wt(e,"internal-error"),Wt(typeof e.exp<"u","internal-error"),Wt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BA(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Wo&&oQ(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function oQ({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lQ{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=dm(this.lastLoginAt),this.creationTime=dm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G0(t){var e;const n=t.auth,r=await t.getIdToken(),i=await BA(t,K$(n,{idToken:r}));Wt(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?G$(s.providerUserInfo):[],o=uQ(t.providerData,a),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=c?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new UA(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function cQ(t){const e=ti(t);await G0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uQ(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function G$(t){return t.map(e=>{var{providerId:n}=e,r=$$(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dQ(t,e){const n=await W$(t,{},async()=>{const r=I$({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=H$(t,i,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",U$.fetch()(a,{method:"POST",headers:o,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function fQ(t,e){return Xu(t,"POST","/v2/accounts:revokeToken",Qu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Wt(e.idToken,"internal-error"),Wt(typeof e.idToken<"u","internal-error"),Wt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):vD(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Wt(e.length!==0,"internal-error");const n=vD(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Wt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await dQ(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,a=new xf;return r&&(Wt(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Wt(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Wt(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xf,this.toJSON())}_performRefresh(){return xo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(t,e){Wt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class wo{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=$$(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lQ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new UA(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await BA(this,this.stsTokenManager.getToken(this.auth,e));return Wt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return aQ(this,e)}reload(){return cQ(this)}_assign(e){this!==e&&(Wt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new wo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Wt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await G0(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(El(this.auth.app))return Promise.reject(mu(this.auth));const e=await this.getIdToken();return await BA(this,sQ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,a,o,c,u,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,g=(a=n.photoURL)!==null&&a!==void 0?a:void 0,m=(o=n.tenantId)!==null&&o!==void 0?o:void 0,y=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,x=(u=n.createdAt)!==null&&u!==void 0?u:void 0,w=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:_,emailVerified:A,isAnonymous:E,providerData:C,stsTokenManager:j}=n;Wt(_&&j,e,"internal-error");const T=xf.fromJSON(this.name,j);Wt(typeof _=="string",e,"internal-error"),dl(f,e.name),dl(h,e.name),Wt(typeof A=="boolean",e,"internal-error"),Wt(typeof E=="boolean",e,"internal-error"),dl(p,e.name),dl(g,e.name),dl(m,e.name),dl(y,e.name),dl(x,e.name),dl(w,e.name);const P=new wo({uid:_,auth:e,email:h,emailVerified:A,displayName:f,isAnonymous:E,photoURL:g,phoneNumber:p,tenantId:m,stsTokenManager:T,createdAt:x,lastLoginAt:w});return C&&Array.isArray(C)&&(P.providerData=C.map(I=>Object.assign({},I))),y&&(P._redirectEventId=y),P}static async _fromIdTokenResponse(e,n,r=!1){const i=new xf;i.updateFromServerResponse(n);const s=new wo({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await G0(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Wt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?G$(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new xf;o.updateFromIdToken(r);const c=new wo({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new UA(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=new Map;function ru(t){q0(t instanceof Function,"Expected a class definition");let e=yD.get(t);return e?(q0(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,yD.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y${constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Y$.type="NONE";const bD=Y$;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(t,e,n){return`firebase:${t}:${e}:${n}`}class wf{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=b_(this.userKey,i.apiKey,s),this.fullPersistenceKey=b_("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?wo._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new wf(ru(bD),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||ru(bD);const a=b_(r,e.config.apiKey,e.name);let o=null;for(const u of n)try{const d=await u._get(a);if(d){const f=wo._fromJSON(e,d);u!==s&&(o=f),s=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new wf(s,e,r):(s=c[0],o&&await s._set(a,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new wf(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Q$(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hQ(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Z$(e))return"Blackberry";if(J$(e))return"Webos";if(pQ(e))return"Safari";if((e.includes("chrome/")||mQ(e))&&!e.includes("edge/"))return"Chrome";if(X$(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function hQ(t=Hi()){return/firefox\//i.test(t)}function pQ(t=Hi()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mQ(t=Hi()){return/crios\//i.test(t)}function Q$(t=Hi()){return/iemobile/i.test(t)}function X$(t=Hi()){return/android/i.test(t)}function Z$(t=Hi()){return/blackberry/i.test(t)}function J$(t=Hi()){return/webos/i.test(t)}function gQ(t=Hi()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function vQ(){return TG()&&document.documentMode===10}function yQ(t=Hi()){return gQ(t)||X$(t)||J$(t)||Z$(t)||/windows phone/i.test(t)||Q$(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e6(t,e=[]){let n;switch(t){case"Browser":n=xD(Hi());break;case"Worker":n=`${xD(Hi())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xx}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bQ{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((a,o)=>{try{const c=e(s);a(c)}catch(c){o(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xQ(t,e={}){return Xu(t,"GET","/v2/passwordPolicy",Qu(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wQ=6;class _Q{constructor(e){var n,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:wQ,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,a,o;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(o=c.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SQ{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wD(this),this.idTokenSubscription=new wD(this),this.beforeStateQueue=new bQ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=V$,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ru(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await wf.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await K$(this,{idToken:e}),r=await wo._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(El(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Wt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await G0(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XY()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(El(this.app))return Promise.reject(mu(this));const n=e?ti(e):null;return n&&Wt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Wt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return El(this.app)?Promise.reject(mu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return El(this.app)?Promise.reject(mu(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ru(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xQ(this),n=new _Q(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new av("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await fQ(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ru(e)||this._popupRedirectResolver;Wt(n,this,"argument-error"),this.redirectPersistenceManager=await wf.create(this,[ru(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Wt(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Wt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=e6(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&GY(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function lv(t){return ti(t)}class wD{constructor(e){this.auth=e,this.observer=null,this.addObserver=MG(n=>this.observer=n)}get next(){return Wt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yC={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function AQ(t){yC=t}function EQ(t){return yC.loadJS(t)}function jQ(){return yC.recaptchaEnterpriseScript}const CQ="recaptcha-enterprise",TQ="NO_RECAPTCHA";class NQ{constructor(e){this.type=CQ,this.auth=lv(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{iQ(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new rQ(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,a(u.siteKey)}}).catch(c=>{o(c)})})}function i(s,a,o){const c=window.grecaptcha;gD(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{a(u)}).catch(()=>{a(TQ)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{r(this.auth).then(o=>{if(!n&&gD(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=jQ();c.length!==0&&(c+=o),EQ(c).then(()=>{i(o,s,a)}).catch(u=>{a(u)})}}).catch(o=>{a(o)})})}}async function _D(t,e,n,r=!1){const i=new NQ(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function WA(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await _D(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await _D(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PQ(t,e){const n=R$(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Zm(s,e??{}))return i;zf(i,"already-initialized")}return n.initialize({options:e})}function kQ(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ru);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DQ{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return xo("not implemented")}_getIdTokenResponse(e){return xo("not implemented")}_linkToIdToken(e,n){return xo("not implemented")}_getReauthenticationResolver(e){return xo("not implemented")}}async function IQ(t,e){return Xu(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OQ(t,e){return Zx(t,"POST","/v1/accounts:signInWithPassword",Qu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MQ(t,e){return Zx(t,"POST","/v1/accounts:signInWithEmailLink",Qu(t,e))}async function RQ(t,e){return Zx(t,"POST","/v1/accounts:signInWithEmailLink",Qu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg extends DQ{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new eg(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new eg(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return WA(e,n,"signInWithPassword",OQ);case"emailLink":return MQ(e,{email:this._email,oobCode:this._password});default:zf(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return WA(e,r,"signUpPassword",IQ);case"emailLink":return RQ(e,{idToken:n,email:this._email,oobCode:this._password});default:zf(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LQ(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zQ(t){const e=Kp(qp(t)).link,n=e?Kp(qp(e)).deep_link_id:null,r=Kp(qp(t)).deep_link_id;return(r?Kp(qp(r)).link:null)||r||n||e||t}class bC{constructor(e){var n,r,i,s,a,o;const c=Kp(qp(e)),u=(n=c.apiKey)!==null&&n!==void 0?n:null,d=(r=c.oobCode)!==null&&r!==void 0?r:null,f=LQ((i=c.mode)!==null&&i!==void 0?i:null);Wt(u&&d&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=d,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=c.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=c.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const n=zQ(e);try{return new bC(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(){this.providerId=Ih.PROVIDER_ID}static credential(e,n){return eg._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=bC.parseLink(n);return Wt(r,"argument-error"),eg._fromEmailAndCode(e,r.code,r.tenantId)}}Ih.PROVIDER_ID="password";Ih.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ih.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $Q(t,e){return Zx(t,"POST","/v1/accounts:signUp",Qu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await wo._fromIdTokenResponse(e,r,i),a=SD(r);return new tg({user:s,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=SD(r);return new tg({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function SD(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0 extends Wo{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Y0.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Y0(e,n,r,i)}}function FQ(t,e,n,r){return n._getIdTokenResponse(t).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Y0._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VQ(t,e,n=!1){if(El(t.app))return Promise.reject(mu(t));const r="signIn",i=await FQ(t,r,e),s=await tg._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function BQ(t,e){return VQ(lv(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t6(t){const e=lv(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function UQ(t,e,n){if(El(t.app))return Promise.reject(mu(t));const r=lv(t),a=await WA(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$Q).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&t6(t),c}),o=await tg._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(o.user),o}function WQ(t,e,n){return El(t.app)?Promise.reject(mu(t)):BQ(ti(t),Ih.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&t6(t),r})}function HQ(t,e,n,r){return ti(t).onAuthStateChanged(e,n,r)}const AD="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(AD,"1"),this.storage.removeItem(AD),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KQ=1e3,qQ=10;class r6 extends n6{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yQ(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);vQ()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,qQ):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},KQ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}r6.type="LOCAL";const GQ=r6;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YQ extends n6{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}YQ.type="SESSION";new ov(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new ov(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new ov(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new ov(5e3,15e3);var ED="@firebase/auth",jD="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QQ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Wt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XQ(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZQ(t){Lf(new Nu("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Wt(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:e6(t)},u=new SQ(r,i,s,c);return kQ(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Lf(new Nu("auth-internal",e=>{const n=lv(e.getProvider("auth").getImmediate());return(r=>new QQ(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vl(ED,jD,XQ(t)),Vl(ED,jD,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JQ=5*60;wG("authIdTokenMaxAge");function eX(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}AQ({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=gC("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",eX().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZQ("Browser");var tX="firebase",nX="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vl(tX,nX,"app");var CD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gu,i6;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,T){function P(){}P.prototype=T.prototype,j.D=T.prototype,j.prototype=new P,j.prototype.constructor=j,j.C=function(I,M,F){for(var R=Array(arguments.length-2),H=2;H<arguments.length;H++)R[H-2]=arguments[H];return T.prototype[M].apply(I,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(j,T,P){P||(P=0);var I=Array(16);if(typeof T=="string")for(var M=0;16>M;++M)I[M]=T.charCodeAt(P++)|T.charCodeAt(P++)<<8|T.charCodeAt(P++)<<16|T.charCodeAt(P++)<<24;else for(M=0;16>M;++M)I[M]=T[P++]|T[P++]<<8|T[P++]<<16|T[P++]<<24;T=j.g[0],P=j.g[1],M=j.g[2];var F=j.g[3],R=T+(F^P&(M^F))+I[0]+3614090360&4294967295;T=P+(R<<7&4294967295|R>>>25),R=F+(M^T&(P^M))+I[1]+3905402710&4294967295,F=T+(R<<12&4294967295|R>>>20),R=M+(P^F&(T^P))+I[2]+606105819&4294967295,M=F+(R<<17&4294967295|R>>>15),R=P+(T^M&(F^T))+I[3]+3250441966&4294967295,P=M+(R<<22&4294967295|R>>>10),R=T+(F^P&(M^F))+I[4]+4118548399&4294967295,T=P+(R<<7&4294967295|R>>>25),R=F+(M^T&(P^M))+I[5]+1200080426&4294967295,F=T+(R<<12&4294967295|R>>>20),R=M+(P^F&(T^P))+I[6]+2821735955&4294967295,M=F+(R<<17&4294967295|R>>>15),R=P+(T^M&(F^T))+I[7]+4249261313&4294967295,P=M+(R<<22&4294967295|R>>>10),R=T+(F^P&(M^F))+I[8]+1770035416&4294967295,T=P+(R<<7&4294967295|R>>>25),R=F+(M^T&(P^M))+I[9]+2336552879&4294967295,F=T+(R<<12&4294967295|R>>>20),R=M+(P^F&(T^P))+I[10]+4294925233&4294967295,M=F+(R<<17&4294967295|R>>>15),R=P+(T^M&(F^T))+I[11]+2304563134&4294967295,P=M+(R<<22&4294967295|R>>>10),R=T+(F^P&(M^F))+I[12]+1804603682&4294967295,T=P+(R<<7&4294967295|R>>>25),R=F+(M^T&(P^M))+I[13]+4254626195&4294967295,F=T+(R<<12&4294967295|R>>>20),R=M+(P^F&(T^P))+I[14]+2792965006&4294967295,M=F+(R<<17&4294967295|R>>>15),R=P+(T^M&(F^T))+I[15]+1236535329&4294967295,P=M+(R<<22&4294967295|R>>>10),R=T+(M^F&(P^M))+I[1]+4129170786&4294967295,T=P+(R<<5&4294967295|R>>>27),R=F+(P^M&(T^P))+I[6]+3225465664&4294967295,F=T+(R<<9&4294967295|R>>>23),R=M+(T^P&(F^T))+I[11]+643717713&4294967295,M=F+(R<<14&4294967295|R>>>18),R=P+(F^T&(M^F))+I[0]+3921069994&4294967295,P=M+(R<<20&4294967295|R>>>12),R=T+(M^F&(P^M))+I[5]+3593408605&4294967295,T=P+(R<<5&4294967295|R>>>27),R=F+(P^M&(T^P))+I[10]+38016083&4294967295,F=T+(R<<9&4294967295|R>>>23),R=M+(T^P&(F^T))+I[15]+3634488961&4294967295,M=F+(R<<14&4294967295|R>>>18),R=P+(F^T&(M^F))+I[4]+3889429448&4294967295,P=M+(R<<20&4294967295|R>>>12),R=T+(M^F&(P^M))+I[9]+568446438&4294967295,T=P+(R<<5&4294967295|R>>>27),R=F+(P^M&(T^P))+I[14]+3275163606&4294967295,F=T+(R<<9&4294967295|R>>>23),R=M+(T^P&(F^T))+I[3]+4107603335&4294967295,M=F+(R<<14&4294967295|R>>>18),R=P+(F^T&(M^F))+I[8]+1163531501&4294967295,P=M+(R<<20&4294967295|R>>>12),R=T+(M^F&(P^M))+I[13]+2850285829&4294967295,T=P+(R<<5&4294967295|R>>>27),R=F+(P^M&(T^P))+I[2]+4243563512&4294967295,F=T+(R<<9&4294967295|R>>>23),R=M+(T^P&(F^T))+I[7]+1735328473&4294967295,M=F+(R<<14&4294967295|R>>>18),R=P+(F^T&(M^F))+I[12]+2368359562&4294967295,P=M+(R<<20&4294967295|R>>>12),R=T+(P^M^F)+I[5]+4294588738&4294967295,T=P+(R<<4&4294967295|R>>>28),R=F+(T^P^M)+I[8]+2272392833&4294967295,F=T+(R<<11&4294967295|R>>>21),R=M+(F^T^P)+I[11]+1839030562&4294967295,M=F+(R<<16&4294967295|R>>>16),R=P+(M^F^T)+I[14]+4259657740&4294967295,P=M+(R<<23&4294967295|R>>>9),R=T+(P^M^F)+I[1]+2763975236&4294967295,T=P+(R<<4&4294967295|R>>>28),R=F+(T^P^M)+I[4]+1272893353&4294967295,F=T+(R<<11&4294967295|R>>>21),R=M+(F^T^P)+I[7]+4139469664&4294967295,M=F+(R<<16&4294967295|R>>>16),R=P+(M^F^T)+I[10]+3200236656&4294967295,P=M+(R<<23&4294967295|R>>>9),R=T+(P^M^F)+I[13]+681279174&4294967295,T=P+(R<<4&4294967295|R>>>28),R=F+(T^P^M)+I[0]+3936430074&4294967295,F=T+(R<<11&4294967295|R>>>21),R=M+(F^T^P)+I[3]+3572445317&4294967295,M=F+(R<<16&4294967295|R>>>16),R=P+(M^F^T)+I[6]+76029189&4294967295,P=M+(R<<23&4294967295|R>>>9),R=T+(P^M^F)+I[9]+3654602809&4294967295,T=P+(R<<4&4294967295|R>>>28),R=F+(T^P^M)+I[12]+3873151461&4294967295,F=T+(R<<11&4294967295|R>>>21),R=M+(F^T^P)+I[15]+530742520&4294967295,M=F+(R<<16&4294967295|R>>>16),R=P+(M^F^T)+I[2]+3299628645&4294967295,P=M+(R<<23&4294967295|R>>>9),R=T+(M^(P|~F))+I[0]+4096336452&4294967295,T=P+(R<<6&4294967295|R>>>26),R=F+(P^(T|~M))+I[7]+1126891415&4294967295,F=T+(R<<10&4294967295|R>>>22),R=M+(T^(F|~P))+I[14]+2878612391&4294967295,M=F+(R<<15&4294967295|R>>>17),R=P+(F^(M|~T))+I[5]+4237533241&4294967295,P=M+(R<<21&4294967295|R>>>11),R=T+(M^(P|~F))+I[12]+1700485571&4294967295,T=P+(R<<6&4294967295|R>>>26),R=F+(P^(T|~M))+I[3]+2399980690&4294967295,F=T+(R<<10&4294967295|R>>>22),R=M+(T^(F|~P))+I[10]+4293915773&4294967295,M=F+(R<<15&4294967295|R>>>17),R=P+(F^(M|~T))+I[1]+2240044497&4294967295,P=M+(R<<21&4294967295|R>>>11),R=T+(M^(P|~F))+I[8]+1873313359&4294967295,T=P+(R<<6&4294967295|R>>>26),R=F+(P^(T|~M))+I[15]+4264355552&4294967295,F=T+(R<<10&4294967295|R>>>22),R=M+(T^(F|~P))+I[6]+2734768916&4294967295,M=F+(R<<15&4294967295|R>>>17),R=P+(F^(M|~T))+I[13]+1309151649&4294967295,P=M+(R<<21&4294967295|R>>>11),R=T+(M^(P|~F))+I[4]+4149444226&4294967295,T=P+(R<<6&4294967295|R>>>26),R=F+(P^(T|~M))+I[11]+3174756917&4294967295,F=T+(R<<10&4294967295|R>>>22),R=M+(T^(F|~P))+I[2]+718787259&4294967295,M=F+(R<<15&4294967295|R>>>17),R=P+(F^(M|~T))+I[9]+3951481745&4294967295,j.g[0]=j.g[0]+T&4294967295,j.g[1]=j.g[1]+(M+(R<<21&4294967295|R>>>11))&4294967295,j.g[2]=j.g[2]+M&4294967295,j.g[3]=j.g[3]+F&4294967295}r.prototype.u=function(j,T){T===void 0&&(T=j.length);for(var P=T-this.blockSize,I=this.B,M=this.h,F=0;F<T;){if(M==0)for(;F<=P;)i(this,j,F),F+=this.blockSize;if(typeof j=="string"){for(;F<T;)if(I[M++]=j.charCodeAt(F++),M==this.blockSize){i(this,I),M=0;break}}else for(;F<T;)if(I[M++]=j[F++],M==this.blockSize){i(this,I),M=0;break}}this.h=M,this.o+=T},r.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var T=1;T<j.length-8;++T)j[T]=0;var P=8*this.o;for(T=j.length-8;T<j.length;++T)j[T]=P&255,P/=256;for(this.u(j),j=Array(16),T=P=0;4>T;++T)for(var I=0;32>I;I+=8)j[P++]=this.g[T]>>>I&255;return j};function s(j,T){var P=o;return Object.prototype.hasOwnProperty.call(P,j)?P[j]:P[j]=T(j)}function a(j,T){this.h=T;for(var P=[],I=!0,M=j.length-1;0<=M;M--){var F=j[M]|0;I&&F==T||(P[M]=F,I=!1)}this.g=P}var o={};function c(j){return-128<=j&&128>j?s(j,function(T){return new a([T|0],0>T?-1:0)}):new a([j|0],0>j?-1:0)}function u(j){if(isNaN(j)||!isFinite(j))return f;if(0>j)return y(u(-j));for(var T=[],P=1,I=0;j>=P;I++)T[I]=j/P|0,P*=4294967296;return new a(T,0)}function d(j,T){if(j.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(j.charAt(0)=="-")return y(d(j.substring(1),T));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=u(Math.pow(T,8)),I=f,M=0;M<j.length;M+=8){var F=Math.min(8,j.length-M),R=parseInt(j.substring(M,M+F),T);8>F?(F=u(Math.pow(T,F)),I=I.j(F).add(u(R))):(I=I.j(P),I=I.add(u(R)))}return I}var f=c(0),h=c(1),p=c(16777216);t=a.prototype,t.m=function(){if(m(this))return-y(this).m();for(var j=0,T=1,P=0;P<this.g.length;P++){var I=this.i(P);j+=(0<=I?I:4294967296+I)*T,T*=4294967296}return j},t.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(g(this))return"0";if(m(this))return"-"+y(this).toString(j);for(var T=u(Math.pow(j,6)),P=this,I="";;){var M=A(P,T).g;P=x(P,M.j(T));var F=((0<P.g.length?P.g[0]:P.h)>>>0).toString(j);if(P=M,g(P))return F+I;for(;6>F.length;)F="0"+F;I=F+I}},t.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function g(j){if(j.h!=0)return!1;for(var T=0;T<j.g.length;T++)if(j.g[T]!=0)return!1;return!0}function m(j){return j.h==-1}t.l=function(j){return j=x(this,j),m(j)?-1:g(j)?0:1};function y(j){for(var T=j.g.length,P=[],I=0;I<T;I++)P[I]=~j.g[I];return new a(P,~j.h).add(h)}t.abs=function(){return m(this)?y(this):this},t.add=function(j){for(var T=Math.max(this.g.length,j.g.length),P=[],I=0,M=0;M<=T;M++){var F=I+(this.i(M)&65535)+(j.i(M)&65535),R=(F>>>16)+(this.i(M)>>>16)+(j.i(M)>>>16);I=R>>>16,F&=65535,R&=65535,P[M]=R<<16|F}return new a(P,P[P.length-1]&-2147483648?-1:0)};function x(j,T){return j.add(y(T))}t.j=function(j){if(g(this)||g(j))return f;if(m(this))return m(j)?y(this).j(y(j)):y(y(this).j(j));if(m(j))return y(this.j(y(j)));if(0>this.l(p)&&0>j.l(p))return u(this.m()*j.m());for(var T=this.g.length+j.g.length,P=[],I=0;I<2*T;I++)P[I]=0;for(I=0;I<this.g.length;I++)for(var M=0;M<j.g.length;M++){var F=this.i(I)>>>16,R=this.i(I)&65535,H=j.i(M)>>>16,X=j.i(M)&65535;P[2*I+2*M]+=R*X,w(P,2*I+2*M),P[2*I+2*M+1]+=F*X,w(P,2*I+2*M+1),P[2*I+2*M+1]+=R*H,w(P,2*I+2*M+1),P[2*I+2*M+2]+=F*H,w(P,2*I+2*M+2)}for(I=0;I<T;I++)P[I]=P[2*I+1]<<16|P[2*I];for(I=T;I<2*T;I++)P[I]=0;return new a(P,0)};function w(j,T){for(;(j[T]&65535)!=j[T];)j[T+1]+=j[T]>>>16,j[T]&=65535,T++}function _(j,T){this.g=j,this.h=T}function A(j,T){if(g(T))throw Error("division by zero");if(g(j))return new _(f,f);if(m(j))return T=A(y(j),T),new _(y(T.g),y(T.h));if(m(T))return T=A(j,y(T)),new _(y(T.g),T.h);if(30<j.g.length){if(m(j)||m(T))throw Error("slowDivide_ only works with positive integers.");for(var P=h,I=T;0>=I.l(j);)P=E(P),I=E(I);var M=C(P,1),F=C(I,1);for(I=C(I,2),P=C(P,2);!g(I);){var R=F.add(I);0>=R.l(j)&&(M=M.add(P),F=R),I=C(I,1),P=C(P,1)}return T=x(j,M.j(T)),new _(M,T)}for(M=f;0<=j.l(T);){for(P=Math.max(1,Math.floor(j.m()/T.m())),I=Math.ceil(Math.log(P)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),F=u(P),R=F.j(T);m(R)||0<R.l(j);)P-=I,F=u(P),R=F.j(T);g(F)&&(F=h),M=M.add(F),j=x(j,R)}return new _(M,j)}t.A=function(j){return A(this,j).h},t.and=function(j){for(var T=Math.max(this.g.length,j.g.length),P=[],I=0;I<T;I++)P[I]=this.i(I)&j.i(I);return new a(P,this.h&j.h)},t.or=function(j){for(var T=Math.max(this.g.length,j.g.length),P=[],I=0;I<T;I++)P[I]=this.i(I)|j.i(I);return new a(P,this.h|j.h)},t.xor=function(j){for(var T=Math.max(this.g.length,j.g.length),P=[],I=0;I<T;I++)P[I]=this.i(I)^j.i(I);return new a(P,this.h^j.h)};function E(j){for(var T=j.g.length+1,P=[],I=0;I<T;I++)P[I]=j.i(I)<<1|j.i(I-1)>>>31;return new a(P,j.h)}function C(j,T){var P=T>>5;T%=32;for(var I=j.g.length-P,M=[],F=0;F<I;F++)M[F]=0<T?j.i(F+P)>>>T|j.i(F+P+1)<<32-T:j.i(F+P);return new a(M,j.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,i6=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=d,gu=a}).apply(typeof CD<"u"?CD:typeof self<"u"?self:typeof window<"u"?window:{});var uy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var s6,Gp,a6,s0,HA,o6,l6,c6;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(v,D,L){return v==Array.prototype||v==Object.prototype||(v[D]=L.value),v};function n(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof uy=="object"&&uy];for(var D=0;D<v.length;++D){var L=v[D];if(L&&L.Math==Math)return L}throw Error("Cannot find global object")}var r=n(this);function i(v,D){if(D)e:{var L=r;v=v.split(".");for(var B=0;B<v.length-1;B++){var he=v[B];if(!(he in L))break e;L=L[he]}v=v[v.length-1],B=L[v],D=D(B),D!=B&&D!=null&&e(L,v,{configurable:!0,writable:!0,value:D})}}function s(v,D){v instanceof String&&(v+="");var L=0,B=!1,he={next:function(){if(!B&&L<v.length){var we=L++;return{value:D(we,v[we]),done:!1}}return B=!0,{done:!0,value:void 0}}};return he[Symbol.iterator]=function(){return he},he}i("Array.prototype.values",function(v){return v||function(){return s(this,function(D,L){return L})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function c(v){var D=typeof v;return D=D!="object"?D:v?Array.isArray(v)?"array":D:"null",D=="array"||D=="object"&&typeof v.length=="number"}function u(v){var D=typeof v;return D=="object"&&v!=null||D=="function"}function d(v,D,L){return v.call.apply(v.bind,arguments)}function f(v,D,L){if(!v)throw Error();if(2<arguments.length){var B=Array.prototype.slice.call(arguments,2);return function(){var he=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(he,B),v.apply(D,he)}}return function(){return v.apply(D,arguments)}}function h(v,D,L){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,h.apply(null,arguments)}function p(v,D){var L=Array.prototype.slice.call(arguments,1);return function(){var B=L.slice();return B.push.apply(B,arguments),v.apply(this,B)}}function g(v,D){function L(){}L.prototype=D.prototype,v.aa=D.prototype,v.prototype=new L,v.prototype.constructor=v,v.Qb=function(B,he,we){for(var $e=Array(arguments.length-2),rn=2;rn<arguments.length;rn++)$e[rn-2]=arguments[rn];return D.prototype[he].apply(B,$e)}}function m(v){const D=v.length;if(0<D){const L=Array(D);for(let B=0;B<D;B++)L[B]=v[B];return L}return[]}function y(v,D){for(let L=1;L<arguments.length;L++){const B=arguments[L];if(c(B)){const he=v.length||0,we=B.length||0;v.length=he+we;for(let $e=0;$e<we;$e++)v[he+$e]=B[$e]}else v.push(B)}}class x{constructor(D,L){this.i=D,this.j=L,this.h=0,this.g=null}get(){let D;return 0<this.h?(this.h--,D=this.g,this.g=D.next,D.next=null):D=this.i(),D}}function w(v){return/^[\s\xa0]*$/.test(v)}function _(){var v=o.navigator;return v&&(v=v.userAgent)?v:""}function A(v){return A[" "](v),v}A[" "]=function(){};var E=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function C(v,D,L){for(const B in v)D.call(L,v[B],B,v)}function j(v,D){for(const L in v)D.call(void 0,v[L],L,v)}function T(v){const D={};for(const L in v)D[L]=v[L];return D}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(v,D){let L,B;for(let he=1;he<arguments.length;he++){B=arguments[he];for(L in B)v[L]=B[L];for(let we=0;we<P.length;we++)L=P[we],Object.prototype.hasOwnProperty.call(B,L)&&(v[L]=B[L])}}function M(v){var D=1;v=v.split(":");const L=[];for(;0<D&&v.length;)L.push(v.shift()),D--;return v.length&&L.push(v.join(":")),L}function F(v){o.setTimeout(()=>{throw v},0)}function R(){var v=Y;let D=null;return v.g&&(D=v.g,v.g=v.g.next,v.g||(v.h=null),D.next=null),D}class H{constructor(){this.h=this.g=null}add(D,L){const B=X.get();B.set(D,L),this.h?this.h.next=B:this.g=B,this.h=B}}var X=new x(()=>new W,v=>v.reset());class W{constructor(){this.next=this.g=this.h=null}set(D,L){this.h=D,this.g=L,this.next=null}reset(){this.next=this.g=this.h=null}}let U,$=!1,Y=new H,Q=()=>{const v=o.Promise.resolve(void 0);U=()=>{v.then(ce)}};var ce=()=>{for(var v;v=R();){try{v.h.call(v.g)}catch(L){F(L)}var D=X;D.j(v),100>D.h&&(D.h++,v.next=D.g,D.g=v)}$=!1};function ie(){this.s=this.s,this.C=this.C}ie.prototype.s=!1,ie.prototype.ma=function(){this.s||(this.s=!0,this.N())},ie.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(v,D){this.type=v,this.g=this.target=D,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var ve=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var v=!1,D=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const L=()=>{};o.addEventListener("test",L,D),o.removeEventListener("test",L,D)}catch{}return v}();function je(v,D){if(oe.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v){var L=this.type=v.type,B=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;if(this.target=v.target||v.srcElement,this.g=D,D=v.relatedTarget){if(E){e:{try{A(D.nodeName);var he=!0;break e}catch{}he=!1}he||(D=null)}}else L=="mouseover"?D=v.fromElement:L=="mouseout"&&(D=v.toElement);this.relatedTarget=D,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=typeof v.pointerType=="string"?v.pointerType:Se[v.pointerType]||"",this.state=v.state,this.i=v,v.defaultPrevented&&je.aa.h.call(this)}}g(je,oe);var Se={2:"touch",3:"pen",4:"mouse"};je.prototype.h=function(){je.aa.h.call(this);var v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var Me="closure_listenable_"+(1e6*Math.random()|0),Qe=0;function me(v,D,L,B,he){this.listener=v,this.proxy=null,this.src=D,this.type=L,this.capture=!!B,this.ha=he,this.key=++Qe,this.da=this.fa=!1}function Ye(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function Xe(v){this.src=v,this.g={},this.h=0}Xe.prototype.add=function(v,D,L,B,he){var we=v.toString();v=this.g[we],v||(v=this.g[we]=[],this.h++);var $e=Te(v,D,B,he);return-1<$e?(D=v[$e],L||(D.fa=!1)):(D=new me(D,this.src,we,!!B,he),D.fa=L,v.push(D)),D};function te(v,D){var L=D.type;if(L in v.g){var B=v.g[L],he=Array.prototype.indexOf.call(B,D,void 0),we;(we=0<=he)&&Array.prototype.splice.call(B,he,1),we&&(Ye(D),v.g[L].length==0&&(delete v.g[L],v.h--))}}function Te(v,D,L,B){for(var he=0;he<v.length;++he){var we=v[he];if(!we.da&&we.listener==D&&we.capture==!!L&&we.ha==B)return he}return-1}var ot="closure_lm_"+(1e6*Math.random()|0),Ct={};function nt(v,D,L,B,he){if(Array.isArray(D)){for(var we=0;we<D.length;we++)nt(v,D[we],L,B,he);return null}return L=Pe(L),v&&v[Me]?v.K(D,L,u(B)?!!B.capture:!1,he):st(v,D,L,!1,B,he)}function st(v,D,L,B,he,we){if(!D)throw Error("Invalid event type");var $e=u(he)?!!he.capture:!!he,rn=He(v);if(rn||(v[ot]=rn=new Xe(v)),L=rn.add(D,L,B,$e,we),L.proxy)return L;if(B=Xt(),L.proxy=B,B.src=v,B.listener=L,v.addEventListener)ve||(he=$e),he===void 0&&(he=!1),v.addEventListener(D.toString(),B,he);else if(v.attachEvent)v.attachEvent(Ft(D.toString()),B);else if(v.addListener&&v.removeListener)v.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return L}function Xt(){function v(L){return D.call(v.src,v.listener,L)}const D=or;return v}function Yn(v,D,L,B,he){if(Array.isArray(D))for(var we=0;we<D.length;we++)Yn(v,D[we],L,B,he);else B=u(B)?!!B.capture:!!B,L=Pe(L),v&&v[Me]?(v=v.i,D=String(D).toString(),D in v.g&&(we=v.g[D],L=Te(we,L,B,he),-1<L&&(Ye(we[L]),Array.prototype.splice.call(we,L,1),we.length==0&&(delete v.g[D],v.h--)))):v&&(v=He(v))&&(D=v.g[D.toString()],v=-1,D&&(v=Te(D,L,B,he)),(L=-1<v?D[v]:null)&&Mn(L))}function Mn(v){if(typeof v!="number"&&v&&!v.da){var D=v.src;if(D&&D[Me])te(D.i,v);else{var L=v.type,B=v.proxy;D.removeEventListener?D.removeEventListener(L,B,v.capture):D.detachEvent?D.detachEvent(Ft(L),B):D.addListener&&D.removeListener&&D.removeListener(B),(L=He(D))?(te(L,v),L.h==0&&(L.src=null,D[ot]=null)):Ye(v)}}}function Ft(v){return v in Ct?Ct[v]:Ct[v]="on"+v}function or(v,D){if(v.da)v=!0;else{D=new je(D,this);var L=v.listener,B=v.ha||v.src;v.fa&&Mn(v),v=L.call(B,D)}return v}function He(v){return v=v[ot],v instanceof Xe?v:null}var Zt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pe(v){return typeof v=="function"?v:(v[Zt]||(v[Zt]=function(D){return v.handleEvent(D)}),v[Zt])}function qe(){ie.call(this),this.i=new Xe(this),this.M=this,this.F=null}g(qe,ie),qe.prototype[Me]=!0,qe.prototype.removeEventListener=function(v,D,L,B){Yn(this,v,D,L,B)};function yt(v,D){var L,B=v.F;if(B)for(L=[];B;B=B.F)L.push(B);if(v=v.M,B=D.type||D,typeof D=="string")D=new oe(D,v);else if(D instanceof oe)D.target=D.target||v;else{var he=D;D=new oe(B,v),I(D,he)}if(he=!0,L)for(var we=L.length-1;0<=we;we--){var $e=D.g=L[we];he=Be($e,B,!0,D)&&he}if($e=D.g=v,he=Be($e,B,!0,D)&&he,he=Be($e,B,!1,D)&&he,L)for(we=0;we<L.length;we++)$e=D.g=L[we],he=Be($e,B,!1,D)&&he}qe.prototype.N=function(){if(qe.aa.N.call(this),this.i){var v=this.i,D;for(D in v.g){for(var L=v.g[D],B=0;B<L.length;B++)Ye(L[B]);delete v.g[D],v.h--}}this.F=null},qe.prototype.K=function(v,D,L,B){return this.i.add(String(v),D,!1,L,B)},qe.prototype.L=function(v,D,L,B){return this.i.add(String(v),D,!0,L,B)};function Be(v,D,L,B){if(D=v.i.g[String(D)],!D)return!0;D=D.concat();for(var he=!0,we=0;we<D.length;++we){var $e=D[we];if($e&&!$e.da&&$e.capture==L){var rn=$e.listener,cr=$e.ha||$e.src;$e.fa&&te(v.i,$e),he=rn.call(cr,B)!==!1&&he}}return he&&!B.defaultPrevented}function bt(v,D,L){if(typeof v=="function")L&&(v=h(v,L));else if(v&&typeof v.handleEvent=="function")v=h(v.handleEvent,v);else throw Error("Invalid listener argument");return 2147483647<Number(D)?-1:o.setTimeout(v,D||0)}function ft(v){v.g=bt(()=>{v.g=null,v.i&&(v.i=!1,ft(v))},v.l);const D=v.h;v.h=null,v.m.apply(null,D)}class Qn extends ie{constructor(D,L){super(),this.m=D,this.l=L,this.h=null,this.i=!1,this.g=null}j(D){this.h=arguments,this.g?this.i=!0:ft(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sn(v){ie.call(this),this.h=v,this.g={}}g(Sn,ie);var ys=[];function Fs(v){C(v.g,function(D,L){this.g.hasOwnProperty(L)&&Mn(D)},v),v.g={}}Sn.prototype.N=function(){Sn.aa.N.call(this),Fs(this)},Sn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $r=o.JSON.stringify,Je=o.JSON.parse,vi=class{stringify(v){return o.JSON.stringify(v,void 0)}parse(v){return o.JSON.parse(v,void 0)}};function yi(){}yi.prototype.h=null;function Vs(v){return v.h||(v.h=v.i())}function Ue(){}var qi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function re(){oe.call(this,"d")}g(re,oe);function pe(){oe.call(this,"c")}g(pe,oe);var ye={},Re=null;function Ve(){return Re=Re||new qe}ye.La="serverreachability";function qt(v){oe.call(this,ye.La,v)}g(qt,oe);function dt(v){const D=Ve();yt(D,new qt(D))}ye.STAT_EVENT="statevent";function gn(v,D){oe.call(this,ye.STAT_EVENT,v),this.stat=D}g(gn,oe);function ct(v){const D=Ve();yt(D,new gn(D,v))}ye.Ma="timingevent";function Xn(v,D){oe.call(this,ye.Ma,v),this.size=D}g(Xn,oe);function kt(v,D){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){v()},D)}function nn(){this.g=!0}nn.prototype.xa=function(){this.g=!1};function Cr(v,D,L,B,he,we){v.info(function(){if(v.g)if(we)for(var $e="",rn=we.split("&"),cr=0;cr<rn.length;cr++){var Lt=rn[cr].split("=");if(1<Lt.length){var Nr=Lt[0];Lt=Lt[1];var vr=Nr.split("_");$e=2<=vr.length&&vr[1]=="type"?$e+(Nr+"="+Lt+"&"):$e+(Nr+"=redacted&")}}else $e=null;else $e=we;return"XMLHTTP REQ ("+B+") [attempt "+he+"]: "+D+`
`+L+`
`+$e})}function Ni(v,D,L,B,he,we,$e){v.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+he+"]: "+D+`
`+L+`
`+we+" "+$e})}function Fr(v,D,L,B){v.info(function(){return"XMLHTTP TEXT ("+D+"): "+sp(v,L)+(B?" "+B:"")})}function Qo(v,D){v.info(function(){return"TIMEOUT: "+D})}nn.prototype.info=function(){};function sp(v,D){if(!v.g)return D;if(!D)return null;try{var L=JSON.parse(D);if(L){for(v=0;v<L.length;v++)if(Array.isArray(L[v])){var B=L[v];if(!(2>B.length)){var he=B[1];if(Array.isArray(he)&&!(1>he.length)){var we=he[0];if(we!="noop"&&we!="stop"&&we!="close")for(var $e=1;$e<he.length;$e++)he[$e]=""}}}}return $r(L)}catch{return D}}var Gi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},to={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bs;function no(){}g(no,yi),no.prototype.g=function(){return new XMLHttpRequest},no.prototype.i=function(){return{}},bs=new no;function _a(v,D,L,B){this.j=v,this.i=D,this.l=L,this.R=B||1,this.U=new Sn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bs}function Bs(){this.i=null,this.g="",this.h=!1}var ap={},Us={};function md(v,D,L){v.L=1,v.v=Ea(Yi(D)),v.m=L,v.P=!0,gd(v,null)}function gd(v,D){v.F=Date.now(),Pi(v),v.A=Yi(v.v);var L=v.A,B=v.R;Array.isArray(B)||(B=[String(B)]),Zn(L.i,"t",B),v.C=0,L=v.j.J,v.h=new Bs,v.g=Ta(v.j,L?D:null,!v.m),0<v.O&&(v.M=new Qn(h(v.Y,v,v.g),v.O)),D=v.U,L=v.g,B=v.ca;var he="readystatechange";Array.isArray(he)||(he&&(ys[0]=he.toString()),he=ys);for(var we=0;we<he.length;we++){var $e=nt(L,he[we],B||D.handleEvent,!1,D.h||D);if(!$e)break;D.g[$e.key]=$e}D=v.H?T(v.H):{},v.m?(v.u||(v.u="POST"),D["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.A,v.u,v.m,D)):(v.u="GET",v.g.ea(v.A,v.u,null,D)),dt(),Cr(v.i,v.u,v.A,v.l,v.R,v.m)}_a.prototype.ca=function(v){v=v.target;const D=this.M;D&&qs(v)==3?D.j():this.Y(v)},_a.prototype.Y=function(v){try{if(v==this.g)e:{const vr=qs(this.g);var D=this.g.Ba();const Na=this.g.Z();if(!(3>vr)&&(vr!=3||this.g&&(this.h.h||this.g.oa()||wd(this.g)))){this.J||vr!=4||D==7||(D==8||0>=Na?dt(3):dt(2)),Sa(this);var L=this.g.Z();this.X=L;t:if(Nn(this)){var B=wd(this.g);v="";var he=B.length,we=qs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ws(this),Aa(this);var $e="";break t}this.h.i=new o.TextDecoder}for(D=0;D<he;D++)this.h.h=!0,v+=this.h.i.decode(B[D],{stream:!(we&&D==he-1)});B.length=0,this.h.g+=v,this.C=0,$e=this.h.g}else $e=this.g.oa();if(this.o=L==200,Ni(this.i,this.u,this.A,this.l,this.R,vr,L),this.o){if(this.T&&!this.K){t:{if(this.g){var rn,cr=this.g;if((rn=cr.g?cr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(rn)){var Lt=rn;break t}}Lt=null}if(L=Lt)Fr(this.i,this.l,L,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vc(this,L);else{this.o=!1,this.s=3,ct(12),Ws(this),Aa(this);break e}}if(this.P){L=!0;let ki;for(;!this.J&&this.C<$e.length;)if(ki=ro(this,$e),ki==Us){vr==4&&(this.s=4,ct(14),L=!1),Fr(this.i,this.l,null,"[Incomplete Response]");break}else if(ki==ap){this.s=4,ct(15),Fr(this.i,this.l,$e,"[Invalid Chunk]"),L=!1;break}else Fr(this.i,this.l,ki,null),vc(this,ki);if(Nn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vr!=4||$e.length!=0||this.h.h||(this.s=1,ct(16),L=!1),this.o=this.o&&L,!L)Fr(this.i,this.l,$e,"[Invalid Chunked Response]"),Ws(this),Aa(this);else if(0<$e.length&&!this.W){this.W=!0;var Nr=this.j;Nr.g==this&&Nr.ba&&!Nr.M&&(Nr.j.info("Great, no buffering proxy detected. Bytes received: "+$e.length),co(Nr),Nr.M=!0,ct(11))}}else Fr(this.i,this.l,$e,null),vc(this,$e);vr==4&&Ws(this),this.o&&!this.J&&(vr==4?Pc(this.j,this):(this.o=!1,Pi(this)))}else vp(this.g),L==400&&0<$e.indexOf("Unknown SID")?(this.s=3,ct(12)):(this.s=0,ct(13)),Ws(this),Aa(this)}}}catch{}finally{}};function Nn(v){return v.g?v.u=="GET"&&v.L!=2&&v.j.Ca:!1}function ro(v,D){var L=v.C,B=D.indexOf(`
`,L);return B==-1?Us:(L=Number(D.substring(L,B)),isNaN(L)?ap:(B+=1,B+L>D.length?Us:(D=D.slice(B,B+L),v.C=B+L,D)))}_a.prototype.cancel=function(){this.J=!0,Ws(this)};function Pi(v){v.S=Date.now()+v.I,op(v,v.I)}function op(v,D){if(v.B!=null)throw Error("WatchDog timer not null");v.B=kt(h(v.ba,v),D)}function Sa(v){v.B&&(o.clearTimeout(v.B),v.B=null)}_a.prototype.ba=function(){this.B=null;const v=Date.now();0<=v-this.S?(Qo(this.i,this.A),this.L!=2&&(dt(),ct(17)),Ws(this),this.s=2,Aa(this)):op(this,this.S-v)};function Aa(v){v.j.G==0||v.J||Pc(v.j,v)}function Ws(v){Sa(v);var D=v.M;D&&typeof D.ma=="function"&&D.ma(),v.M=null,Fs(v.U),v.g&&(D=v.g,v.g=null,D.abort(),D.ma())}function vc(v,D){try{var L=v.j;if(L.G!=0&&(L.g==v||Pt(L.h,v))){if(!v.K&&Pt(L.h,v)&&L.G==3){try{var B=L.Da.g.parse(D)}catch{B=null}if(Array.isArray(B)&&B.length==3){var he=B;if(he[0]==0){e:if(!L.u){if(L.g)if(L.g.F+3e3<v.F)Nc(L),oo(L);else break e;lr(L),ct(18)}}else L.za=he[1],0<L.za-L.T&&37500>he[2]&&L.F&&L.v==0&&!L.C&&(L.C=kt(h(L.Za,L),6e3));if(1>=cp(L.h)&&L.ca){try{L.ca()}catch{}L.ca=void 0}}else Ca(L,11)}else if((v.K||L.g==v)&&Nc(L),!w(D))for(he=L.Da.g.parse(D),D=0;D<he.length;D++){let Lt=he[D];if(L.T=Lt[0],Lt=Lt[1],L.G==2)if(Lt[0]=="c"){L.K=Lt[1],L.ia=Lt[2];const Nr=Lt[3];Nr!=null&&(L.la=Nr,L.j.info("VER="+L.la));const vr=Lt[4];vr!=null&&(L.Aa=vr,L.j.info("SVER="+L.Aa));const Na=Lt[5];Na!=null&&typeof Na=="number"&&0<Na&&(B=1.5*Na,L.L=B,L.j.info("backChannelRequestTimeoutMs_="+B)),B=L;const ki=v.g;if(ki){const Dc=ki.g?ki.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Dc){var we=B.h;we.g||Dc.indexOf("spdy")==-1&&Dc.indexOf("quic")==-1&&Dc.indexOf("h2")==-1||(we.j=we.l,we.g=new Set,we.h&&(vd(we,we.h),we.h=null))}if(B.D){const wp=ki.g?ki.g.getResponseHeader("X-HTTP-Session-Id"):null;wp&&(B.ya=wp,cn(B.I,B.D,wp))}}L.G=3,L.l&&L.l.ua(),L.ba&&(L.R=Date.now()-v.F,L.j.info("Handshake RTT: "+L.R+"ms")),B=L;var $e=v;if(B.qa=jd(B,B.J?B.ia:null,B.W),$e.K){up(B.h,$e);var rn=$e,cr=B.L;cr&&(rn.I=cr),rn.B&&(Sa(rn),Pi(rn)),B.g=$e}else Ed(B);0<L.i.length&&_d(L)}else Lt[0]!="stop"&&Lt[0]!="close"||Ca(L,7);else L.G==3&&(Lt[0]=="stop"||Lt[0]=="close"?Lt[0]=="stop"?Ca(L,7):il(L):Lt[0]!="noop"&&L.l&&L.l.ta(Lt),L.v=0)}}dt(4)}catch{}}var io=class{constructor(v,D){this.g=v,this.map=D}};function lp(v){this.l=v||10,o.PerformanceNavigationTiming?(v=o.performance.getEntriesByType("navigation"),v=0<v.length&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yc(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function cp(v){return v.h?1:v.g?v.g.size:0}function Pt(v,D){return v.h?v.h==D:v.g?v.g.has(D):!1}function vd(v,D){v.g?v.g.add(D):v.h=D}function up(v,D){v.h&&v.h==D?v.h=null:v.g&&v.g.has(D)&&v.g.delete(D)}lp.prototype.cancel=function(){if(this.i=bc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function bc(v){if(v.h!=null)return v.i.concat(v.h.D);if(v.g!=null&&v.g.size!==0){let D=v.i;for(const L of v.g.values())D=D.concat(L.D);return D}return m(v.i)}function Vv(v){if(v.V&&typeof v.V=="function")return v.V();if(typeof Map<"u"&&v instanceof Map||typeof Set<"u"&&v instanceof Set)return Array.from(v.values());if(typeof v=="string")return v.split("");if(c(v)){for(var D=[],L=v.length,B=0;B<L;B++)D.push(v[B]);return D}D=[],L=0;for(B in v)D[L++]=v[B];return D}function hn(v){if(v.na&&typeof v.na=="function")return v.na();if(!v.V||typeof v.V!="function"){if(typeof Map<"u"&&v instanceof Map)return Array.from(v.keys());if(!(typeof Set<"u"&&v instanceof Set)){if(c(v)||typeof v=="string"){var D=[];v=v.length;for(var L=0;L<v;L++)D.push(L);return D}D=[],L=0;for(const B in v)D[L++]=B;return D}}}function Xo(v,D){if(v.forEach&&typeof v.forEach=="function")v.forEach(D,void 0);else if(c(v)||typeof v=="string")Array.prototype.forEach.call(v,D,void 0);else for(var L=hn(v),B=Vv(v),he=B.length,we=0;we<he;we++)D.call(void 0,B[we],L&&L[we],v)}var Zo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jo(v,D){if(v){v=v.split("&");for(var L=0;L<v.length;L++){var B=v[L].indexOf("="),he=null;if(0<=B){var we=v[L].substring(0,B);he=v[L].substring(B+1)}else we=v[L];D(we,he?decodeURIComponent(he.replace(/\+/g," ")):"")}}}function Hs(v){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,v instanceof Hs){this.h=v.h,so(this,v.j),this.o=v.o,this.g=v.g,xc(this,v.s),this.l=v.l;var D=v.i,L=new ja;L.i=D.i,D.g&&(L.g=new Map(D.g),L.h=D.h),wc(this,L),this.m=v.m}else v&&(D=String(v).match(Zo))?(this.h=!1,so(this,D[1]||"",!0),this.o=el(D[2]||""),this.g=el(D[3]||"",!0),xc(this,D[4]),this.l=el(D[5]||"",!0),wc(this,D[6]||"",!0),this.m=el(D[7]||"")):(this.h=!1,this.i=new ja(null,this.h))}Hs.prototype.toString=function(){var v=[],D=this.j;D&&v.push(_c(D,dp,!0),":");var L=this.g;return(L||D=="file")&&(v.push("//"),(D=this.o)&&v.push(_c(D,dp,!0),"@"),v.push(encodeURIComponent(String(L)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),L=this.s,L!=null&&v.push(":",String(L))),(L=this.l)&&(this.g&&L.charAt(0)!="/"&&v.push("/"),v.push(_c(L,L.charAt(0)=="/"?O1:I1,!0))),(L=this.i.toString())&&v.push("?",L),(L=this.m)&&v.push("#",_c(L,tl)),v.join("")};function Yi(v){return new Hs(v)}function so(v,D,L){v.j=L?el(D,!0):D,v.j&&(v.j=v.j.replace(/:$/,""))}function xc(v,D){if(D){if(D=Number(D),isNaN(D)||0>D)throw Error("Bad port number "+D);v.s=D}else v.s=null}function wc(v,D,L){D instanceof ja?(v.i=D,Sc(v.i,v.h)):(L||(D=_c(D,bi)),v.i=new ja(D,v.h))}function cn(v,D,L){v.i.set(D,L)}function Ea(v){return cn(v,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),v}function el(v,D){return v?D?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function _c(v,D,L){return typeof v=="string"?(v=encodeURI(v).replace(D,Vt),L&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function Vt(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var dp=/[#\/\?@]/g,I1=/[#\?:]/g,O1=/[#\?]/g,bi=/[#\?@]/g,tl=/#/g;function ja(v,D){this.h=this.g=null,this.i=v||null,this.j=!!D}function Vr(v){v.g||(v.g=new Map,v.h=0,v.i&&Jo(v.i,function(D,L){v.add(decodeURIComponent(D.replace(/\+/g," ")),L)}))}t=ja.prototype,t.add=function(v,D){Vr(this),this.i=null,v=Br(this,v);var L=this.g.get(v);return L||this.g.set(v,L=[]),L.push(D),this.h+=1,this};function fp(v,D){Vr(v),D=Br(v,D),v.g.has(D)&&(v.i=null,v.h-=v.g.get(D).length,v.g.delete(D))}function hp(v,D){return Vr(v),D=Br(v,D),v.g.has(D)}t.forEach=function(v,D){Vr(this),this.g.forEach(function(L,B){L.forEach(function(he){v.call(D,he,B,this)},this)},this)},t.na=function(){Vr(this);const v=Array.from(this.g.values()),D=Array.from(this.g.keys()),L=[];for(let B=0;B<D.length;B++){const he=v[B];for(let we=0;we<he.length;we++)L.push(D[B])}return L},t.V=function(v){Vr(this);let D=[];if(typeof v=="string")hp(this,v)&&(D=D.concat(this.g.get(Br(this,v))));else{v=Array.from(this.g.values());for(let L=0;L<v.length;L++)D=D.concat(v[L])}return D},t.set=function(v,D){return Vr(this),this.i=null,v=Br(this,v),hp(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[D]),this.h+=1,this},t.get=function(v,D){return v?(v=this.V(v),0<v.length?String(v[0]):D):D};function Zn(v,D,L){fp(v,D),0<L.length&&(v.i=null,v.g.set(Br(v,D),m(L)),v.h+=L.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],D=Array.from(this.g.keys());for(var L=0;L<D.length;L++){var B=D[L];const we=encodeURIComponent(String(B)),$e=this.V(B);for(B=0;B<$e.length;B++){var he=we;$e[B]!==""&&(he+="="+encodeURIComponent(String($e[B]))),v.push(he)}}return this.i=v.join("&")};function Br(v,D){return D=String(D),v.j&&(D=D.toLowerCase()),D}function Sc(v,D){D&&!v.j&&(Vr(v),v.i=null,v.g.forEach(function(L,B){var he=B.toLowerCase();B!=he&&(fp(this,B),Zn(this,he,L))},v)),v.j=D}function Ac(v,D){const L=new nn;if(o.Image){const B=new Image;B.onload=p(Ur,L,"TestLoadImage: loaded",!0,D,B),B.onerror=p(Ur,L,"TestLoadImage: error",!1,D,B),B.onabort=p(Ur,L,"TestLoadImage: abort",!1,D,B),B.ontimeout=p(Ur,L,"TestLoadImage: timeout",!1,D,B),o.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=v}else D(!1)}function pp(v,D){const L=new nn,B=new AbortController,he=setTimeout(()=>{B.abort(),Ur(L,"TestPingServer: timeout",!1,D)},1e4);fetch(v,{signal:B.signal}).then(we=>{clearTimeout(he),we.ok?Ur(L,"TestPingServer: ok",!0,D):Ur(L,"TestPingServer: server error",!1,D)}).catch(()=>{clearTimeout(he),Ur(L,"TestPingServer: error",!1,D)})}function Ur(v,D,L,B,he){try{he&&(he.onload=null,he.onerror=null,he.onabort=null,he.ontimeout=null),B(L)}catch{}}function M1(){this.g=new vi}function xs(v,D,L){const B=L||"";try{Xo(v,function(he,we){let $e=he;u(he)&&($e=$r(he)),D.push(B+we+"="+encodeURIComponent($e))})}catch(he){throw D.push(B+"type="+encodeURIComponent("_badmap")),he}}function nl(v){this.l=v.Ub||null,this.j=v.eb||!1}g(nl,yi),nl.prototype.g=function(){return new Ec(this.l,this.j)},nl.prototype.i=function(v){return function(){return v}}({});function Ec(v,D){qe.call(this),this.D=v,this.o=D,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(Ec,qe),t=Ec.prototype,t.open=function(v,D){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=v,this.A=D,this.readyState=1,ao(this)},t.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const D={headers:this.u,method:this.B,credentials:this.m,cache:void 0};v&&(D.body=v),(this.D||o).fetch(new Request(this.A,D)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ks(this)),this.readyState=0},t.Sa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,ao(this)),this.g&&(this.readyState=3,ao(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yd(this)}else v.text().then(this.Ra.bind(this),this.ga.bind(this))};function yd(v){v.j.read().then(v.Pa.bind(v)).catch(v.ga.bind(v))}t.Pa=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var D=v.value?v.value:new Uint8Array(0);(D=this.v.decode(D,{stream:!v.done}))&&(this.response=this.responseText+=D)}v.done?Ks(this):ao(this),this.readyState==3&&yd(this)}},t.Ra=function(v){this.g&&(this.response=this.responseText=v,Ks(this))},t.Qa=function(v){this.g&&(this.response=v,Ks(this))},t.ga=function(){this.g&&Ks(this)};function Ks(v){v.readyState=4,v.l=null,v.j=null,v.v=null,ao(v)}t.setRequestHeader=function(v,D){this.u.append(v,D)},t.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],D=this.h.entries();for(var L=D.next();!L.done;)L=L.value,v.push(L[0]+": "+L[1]),L=D.next();return v.join(`\r
`)};function ao(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(Ec.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function mp(v){let D="";return C(v,function(L,B){D+=B,D+=":",D+=L,D+=`\r
`}),D}function gp(v,D,L){e:{for(B in L){var B=!1;break e}B=!0}B||(L=mp(L),typeof v=="string"?L!=null&&encodeURIComponent(String(L)):cn(v,D,L))}function un(v){qe.call(this),this.headers=new Map,this.o=v||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(un,qe);var R1=/^https?$/i,L1=["POST","PUT"];t=un.prototype,t.Ha=function(v){this.J=v},t.ea=function(v,D,L,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);D=D?D.toUpperCase():"GET",this.D=v,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bs.g(),this.v=this.o?Vs(this.o):Vs(bs),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(D,String(v),!0),this.B=!1}catch(we){jc(this,we);return}if(v=L||"",L=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var he in B)L.set(he,B[he]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const we of B.keys())L.set(we,B.get(we));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(L.keys()).find(we=>we.toLowerCase()=="content-type"),he=o.FormData&&v instanceof o.FormData,!(0<=Array.prototype.indexOf.call(L1,D,void 0))||B||he||L.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[we,$e]of L)this.g.setRequestHeader(we,$e);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Bv(this),this.u=!0,this.g.send(v),this.u=!1}catch(we){jc(this,we)}};function jc(v,D){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=D,v.m=5,Cc(v),xd(v)}function Cc(v){v.A||(v.A=!0,yt(v,"complete"),yt(v,"error"))}t.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=v||7,yt(this,"complete"),yt(this,"abort"),xd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xd(this,!0)),un.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?bd(this):this.bb())},t.bb=function(){bd(this)};function bd(v){if(v.h&&typeof a<"u"&&(!v.v[1]||qs(v)!=4||v.Z()!=2)){if(v.u&&qs(v)==4)bt(v.Ea,0,v);else if(yt(v,"readystatechange"),qs(v)==4){v.h=!1;try{const $e=v.Z();e:switch($e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var D=!0;break e;default:D=!1}var L;if(!(L=D)){var B;if(B=$e===0){var he=String(v.D).match(Zo)[1]||null;!he&&o.self&&o.self.location&&(he=o.self.location.protocol.slice(0,-1)),B=!R1.test(he?he.toLowerCase():"")}L=B}if(L)yt(v,"complete"),yt(v,"success");else{v.m=6;try{var we=2<qs(v)?v.g.statusText:""}catch{we=""}v.l=we+" ["+v.Z()+"]",Cc(v)}}finally{xd(v)}}}}function xd(v,D){if(v.g){Bv(v);const L=v.g,B=v.v[0]?()=>{}:null;v.g=null,v.v=null,D||yt(v,"ready");try{L.onreadystatechange=B}catch{}}}function Bv(v){v.I&&(o.clearTimeout(v.I),v.I=null)}t.isActive=function(){return!!this.g};function qs(v){return v.g?v.g.readyState:0}t.Z=function(){try{return 2<qs(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(v){if(this.g){var D=this.g.responseText;return v&&D.indexOf(v)==0&&(D=D.substring(v.length)),Je(D)}};function wd(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.H){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function vp(v){const D={};v=(v.g&&2<=qs(v)&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<v.length;B++){if(w(v[B]))continue;var L=M(v[B]);const he=L[0];if(L=L[1],typeof L!="string")continue;L=L.trim();const we=D[he]||[];D[he]=we,we.push(L)}j(D,function(B){return B.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function rl(v,D,L){return L&&L.internalChannelParams&&L.internalChannelParams[v]||D}function Tc(v){this.Aa=0,this.i=[],this.j=new nn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rl("failFast",!1,v),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rl("baseRetryDelayMs",5e3,v),this.cb=rl("retryDelaySeedMs",1e4,v),this.Wa=rl("forwardChannelMaxRetries",2,v),this.wa=rl("forwardChannelRequestTimeoutMs",2e4,v),this.pa=v&&v.xmlHttpFactory||void 0,this.Xa=v&&v.Tb||void 0,this.Ca=v&&v.useFetchStreams||!1,this.L=void 0,this.J=v&&v.supportsCrossDomainXhr||!1,this.K="",this.h=new lp(v&&v.concurrentRequestLimit),this.Da=new M1,this.P=v&&v.fastHandshake||!1,this.O=v&&v.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=v&&v.Rb||!1,v&&v.xa&&this.j.xa(),v&&v.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&v&&v.detectBufferingProxy||!1,this.ja=void 0,v&&v.longPollingTimeout&&0<v.longPollingTimeout&&(this.ja=v.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Tc.prototype,t.la=8,t.G=1,t.connect=function(v,D,L,B){ct(0),this.W=v,this.H=D||{},L&&B!==void 0&&(this.H.OSID=L,this.H.OAID=B),this.F=this.X,this.I=jd(this,null,this.W),_d(this)};function il(v){if(yp(v),v.G==3){var D=v.U++,L=Yi(v.I);if(cn(L,"SID",v.K),cn(L,"RID",D),cn(L,"TYPE","terminate"),lo(v,L),D=new _a(v,v.j,D),D.L=2,D.v=Ea(Yi(L)),L=!1,o.navigator&&o.navigator.sendBeacon)try{L=o.navigator.sendBeacon(D.v.toString(),"")}catch{}!L&&o.Image&&(new Image().src=D.v,L=!0),L||(D.g=Ta(D.j,null),D.g.ea(D.v)),D.F=Date.now(),Pi(D)}kc(v)}function oo(v){v.g&&(co(v),v.g.cancel(),v.g=null)}function yp(v){oo(v),v.u&&(o.clearTimeout(v.u),v.u=null),Nc(v),v.h.cancel(),v.s&&(typeof v.s=="number"&&o.clearTimeout(v.s),v.s=null)}function _d(v){if(!yc(v.h)&&!v.s){v.s=!0;var D=v.Ga;U||Q(),$||(U(),$=!0),Y.add(D,v),v.B=0}}function sl(v,D){return cp(v.h)>=v.h.j-(v.s?1:0)?!1:v.s?(v.i=D.D.concat(v.i),!0):v.G==1||v.G==2||v.B>=(v.Va?0:v.Wa)?!1:(v.s=kt(h(v.Ga,v,D),bp(v,v.B)),v.B++,!0)}t.Ga=function(v){if(this.s)if(this.s=null,this.G==1){if(!v){this.U=Math.floor(1e5*Math.random()),v=this.U++;const he=new _a(this,this.j,v);let we=this.o;if(this.S&&(we?(we=T(we),I(we,this.S)):we=this.S),this.m!==null||this.O||(he.H=we,we=null),this.P)e:{for(var D=0,L=0;L<this.i.length;L++){t:{var B=this.i[L];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(D+=B,4096<D){D=L;break e}if(D===4096||L===this.i.length-1){D=L+1;break e}}D=1e3}else D=1e3;D=Ad(this,he,D),L=Yi(this.I),cn(L,"RID",v),cn(L,"CVER",22),this.D&&cn(L,"X-HTTP-Session-Id",this.D),lo(this,L),we&&(this.O?D="headers="+encodeURIComponent(String(mp(we)))+"&"+D:this.m&&gp(L,this.m,we)),vd(this.h,he),this.Ua&&cn(L,"TYPE","init"),this.P?(cn(L,"$req",D),cn(L,"SID","null"),he.T=!0,md(he,L,null)):md(he,L,D),this.G=2}}else this.G==3&&(v?Sd(this,v):this.i.length==0||yc(this.h)||Sd(this))};function Sd(v,D){var L;D?L=D.l:L=v.U++;const B=Yi(v.I);cn(B,"SID",v.K),cn(B,"RID",L),cn(B,"AID",v.T),lo(v,B),v.m&&v.o&&gp(B,v.m,v.o),L=new _a(v,v.j,L,v.B+1),v.m===null&&(L.H=v.o),D&&(v.i=D.D.concat(v.i)),D=Ad(v,L,1e3),L.I=Math.round(.5*v.wa)+Math.round(.5*v.wa*Math.random()),vd(v.h,L),md(L,B,D)}function lo(v,D){v.H&&C(v.H,function(L,B){cn(D,B,L)}),v.l&&Xo({},function(L,B){cn(D,B,L)})}function Ad(v,D,L){L=Math.min(v.i.length,L);var B=v.l?h(v.l.Na,v.l,v):null;e:{var he=v.i;let we=-1;for(;;){const $e=["count="+L];we==-1?0<L?(we=he[0].g,$e.push("ofs="+we)):we=0:$e.push("ofs="+we);let rn=!0;for(let cr=0;cr<L;cr++){let Lt=he[cr].g;const Nr=he[cr].map;if(Lt-=we,0>Lt)we=Math.max(0,he[cr].g-100),rn=!1;else try{xs(Nr,$e,"req"+Lt+"_")}catch{B&&B(Nr)}}if(rn){B=$e.join("&");break e}}}return v=v.i.splice(0,L),D.D=v,B}function Ed(v){if(!v.g&&!v.u){v.Y=1;var D=v.Fa;U||Q(),$||(U(),$=!0),Y.add(D,v),v.v=0}}function lr(v){return v.g||v.u||3<=v.v?!1:(v.Y++,v.u=kt(h(v.Fa,v),bp(v,v.v)),v.v++,!0)}t.Fa=function(){if(this.u=null,al(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var v=2*this.R;this.j.info("BP detection timer enabled: "+v),this.A=kt(h(this.ab,this),v)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ct(10),oo(this),al(this))};function co(v){v.A!=null&&(o.clearTimeout(v.A),v.A=null)}function al(v){v.g=new _a(v,v.j,"rpc",v.Y),v.m===null&&(v.g.H=v.o),v.g.O=0;var D=Yi(v.qa);cn(D,"RID","rpc"),cn(D,"SID",v.K),cn(D,"AID",v.T),cn(D,"CI",v.F?"0":"1"),!v.F&&v.ja&&cn(D,"TO",v.ja),cn(D,"TYPE","xmlhttp"),lo(v,D),v.m&&v.o&&gp(D,v.m,v.o),v.L&&(v.g.I=v.L);var L=v.g;v=v.ia,L.L=1,L.v=Ea(Yi(D)),L.m=null,L.P=!0,gd(L,v)}t.Za=function(){this.C!=null&&(this.C=null,oo(this),lr(this),ct(19))};function Nc(v){v.C!=null&&(o.clearTimeout(v.C),v.C=null)}function Pc(v,D){var L=null;if(v.g==D){Nc(v),co(v),v.g=null;var B=2}else if(Pt(v.h,D))L=D.D,up(v.h,D),B=1;else return;if(v.G!=0){if(D.o)if(B==1){L=D.m?D.m.length:0,D=Date.now()-D.F;var he=v.B;B=Ve(),yt(B,new Xn(B,L)),_d(v)}else Ed(v);else if(he=D.s,he==3||he==0&&0<D.X||!(B==1&&sl(v,D)||B==2&&lr(v)))switch(L&&0<L.length&&(D=v.h,D.i=D.i.concat(L)),he){case 1:Ca(v,5);break;case 4:Ca(v,10);break;case 3:Ca(v,6);break;default:Ca(v,2)}}}function bp(v,D){let L=v.Ta+Math.floor(Math.random()*v.cb);return v.isActive()||(L*=2),L*D}function Ca(v,D){if(v.j.info("Error code "+D),D==2){var L=h(v.fb,v),B=v.Xa;const he=!B;B=new Hs(B||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||so(B,"https"),Ea(B),he?Ac(B.toString(),L):pp(B.toString(),L)}else ct(2);v.G=0,v.l&&v.l.sa(D),kc(v),yp(v)}t.fb=function(v){v?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function kc(v){if(v.G=0,v.ka=[],v.l){const D=bc(v.h);(D.length!=0||v.i.length!=0)&&(y(v.ka,D),y(v.ka,v.i),v.h.i.length=0,m(v.i),v.i.length=0),v.l.ra()}}function jd(v,D,L){var B=L instanceof Hs?Yi(L):new Hs(L);if(B.g!="")D&&(B.g=D+"."+B.g),xc(B,B.s);else{var he=o.location;B=he.protocol,D=D?D+"."+he.hostname:he.hostname,he=+he.port;var we=new Hs(null);B&&so(we,B),D&&(we.g=D),he&&xc(we,he),L&&(we.l=L),B=we}return L=v.D,D=v.ya,L&&D&&cn(B,L,D),cn(B,"VER",v.la),lo(v,B),B}function Ta(v,D,L){if(D&&!v.J)throw Error("Can't create secondary domain capable XhrIo object.");return D=v.Ca&&!v.pa?new un(new nl({eb:L})):new un(v.pa),D.Ha(v.J),D}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cd(){}t=Cd.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ol(){}ol.prototype.g=function(v,D){return new Tr(v,D)};function Tr(v,D){qe.call(this),this.g=new Tc(D),this.l=v,this.h=D&&D.messageUrlParams||null,v=D&&D.messageHeaders||null,D&&D.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=D&&D.initMessageHeaders||null,D&&D.messageContentType&&(v?v["X-WebChannel-Content-Type"]=D.messageContentType:v={"X-WebChannel-Content-Type":D.messageContentType}),D&&D.va&&(v?v["X-WebChannel-Client-Profile"]=D.va:v={"X-WebChannel-Client-Profile":D.va}),this.g.S=v,(v=D&&D.Sb)&&!w(v)&&(this.g.m=v),this.v=D&&D.supportsCrossDomainXhr||!1,this.u=D&&D.sendRawJson||!1,(D=D&&D.httpSessionIdParam)&&!w(D)&&(this.g.D=D,v=this.h,v!==null&&D in v&&(v=this.h,D in v&&delete v[D])),this.j=new ll(this)}g(Tr,qe),Tr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Tr.prototype.close=function(){il(this.g)},Tr.prototype.o=function(v){var D=this.g;if(typeof v=="string"){var L={};L.__data__=v,v=L}else this.u&&(L={},L.__data__=$r(v),v=L);D.i.push(new io(D.Ya++,v)),D.G==3&&_d(D)},Tr.prototype.N=function(){this.g.l=null,delete this.j,il(this.g),delete this.g,Tr.aa.N.call(this)};function Td(v){re.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var D=v.__sm__;if(D){e:{for(const L in D){v=L;break e}v=void 0}(this.i=v)&&(v=this.i,D=D!==null&&v in D?D[v]:void 0),this.data=D}else this.data=v}g(Td,re);function xp(){pe.call(this),this.status=1}g(xp,pe);function ll(v){this.g=v}g(ll,Cd),ll.prototype.ua=function(){yt(this.g,"a")},ll.prototype.ta=function(v){yt(this.g,new Td(v))},ll.prototype.sa=function(v){yt(this.g,new xp)},ll.prototype.ra=function(){yt(this.g,"b")},ol.prototype.createWebChannel=ol.prototype.g,Tr.prototype.send=Tr.prototype.o,Tr.prototype.open=Tr.prototype.m,Tr.prototype.close=Tr.prototype.close,c6=function(){return new ol},l6=function(){return Ve()},o6=ye,HA={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Gi.NO_ERROR=0,Gi.TIMEOUT=8,Gi.HTTP_ERROR=6,s0=Gi,to.COMPLETE="complete",a6=to,Ue.EventType=qi,qi.OPEN="a",qi.CLOSE="b",qi.ERROR="c",qi.MESSAGE="d",qe.prototype.listen=qe.prototype.K,Gp=Ue,un.prototype.listenOnce=un.prototype.L,un.prototype.getLastError=un.prototype.Ka,un.prototype.getLastErrorCode=un.prototype.Ba,un.prototype.getStatus=un.prototype.Z,un.prototype.getResponseJson=un.prototype.Oa,un.prototype.getResponseText=un.prototype.oa,un.prototype.send=un.prototype.ea,un.prototype.setWithCredentials=un.prototype.Ha,s6=un}).apply(typeof uy<"u"?uy:typeof self<"u"?self:typeof window<"u"?window:{});const TD="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ii.UNAUTHENTICATED=new Ii(null),Ii.GOOGLE_CREDENTIALS=new Ii("google-credentials-uid"),Ii.FIRST_PARTY=new Ii("first-party-uid"),Ii.MOCK_USER=new Ii("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oh="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu=new pC("@firebase/firestore");function Pp(){return Pu.logLevel}function it(t,...e){if(Pu.logLevel<=zt.DEBUG){const n=e.map(xC);Pu.debug(`Firestore (${Oh}): ${t}`,...n)}}function Mo(t,...e){if(Pu.logLevel<=zt.ERROR){const n=e.map(xC);Pu.error(`Firestore (${Oh}): ${t}`,...n)}}function ng(t,...e){if(Pu.logLevel<=zt.WARN){const n=e.map(xC);Pu.warn(`Firestore (${Oh}): ${t}`,...n)}}function xC(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t="Unexpected state"){const e=`FIRESTORE (${Oh}) INTERNAL ASSERTION FAILED: `+t;throw Mo(e),new Error(e)}function on(t,e){t||wt()}function jt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ze extends Wo{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rX{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iX{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ii.UNAUTHENTICATED))}shutdown(){}}class sX{constructor(e){this.t=e,this.currentUser=Ii.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){on(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new vu;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new vu,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},o=c=>{it("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>o(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(it("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new vu)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(it("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(on(typeof r.accessToken=="string"),new rX(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return on(e===null||typeof e=="string"),new Ii(e)}}class aX{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ii.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class oX{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new aX(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ii.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lX{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cX{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){on(this.o===void 0);const r=s=>{s.error!=null&&it("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,it("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{it("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):it("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(on(typeof n.token=="string"),this.R=n.token,new lX(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uX(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=uX(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Yt(t,e){return t<e?-1:t>e?1:0}function $f(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ze(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ze(Ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Ze(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ze(Ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pr.fromMillis(Date.now())}static fromDate(e){return pr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new pr(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Yt(this.nanoseconds,e.nanoseconds):Yt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Et(e)}static min(){return new Et(new pr(0,0))}static max(){return new Et(new pr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,n,r){n===void 0?n=0:n>e.length&&wt(),r===void 0?r=e.length-n:r>e.length-n&&wt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return rg.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof rg?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Cn extends rg{construct(e,n,r){return new Cn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ze(Ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Cn(n)}static emptyPath(){return new Cn([])}}const dX=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qr extends rg{construct(e,n,r){return new Qr(e,n,r)}static isValidIdentifier(e){return dX.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Qr(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Ze(Ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Ze(Ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Ze(Ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(r+=o,i++):(s(),i++)}if(s(),a)throw new Ze(Ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qr(n)}static emptyPath(){return new Qr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.path=e}static fromPath(e){return new ut(Cn.fromString(e))}static fromName(e){return new ut(Cn.fromString(e).popFirst(5))}static empty(){return new ut(Cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Cn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Cn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ut(new Cn(e.slice()))}}function fX(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Et.fromTimestamp(r===1e9?new pr(n+1,0):new pr(n,r));return new ql(i,ut.empty(),e)}function hX(t){return new ql(t.readTime,t.key,-1)}class ql{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ql(Et.min(),ut.empty(),-1)}static max(){return new ql(Et.max(),ut.empty(),-1)}}function pX(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ut.comparator(t.documentKey,e.documentKey),n!==0?n:Yt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mX="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gX{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cv(t){if(t.code!==Ce.FAILED_PRECONDITION||t.message!==mX)throw t;it("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&wt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ne((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Ne?n:Ne.resolve(n)}catch(n){return Ne.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Ne.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Ne.reject(n)}static resolve(e){return new Ne((n,r)=>{n(e)})}static reject(e){return new Ne((n,r)=>{r(e)})}static waitFor(e){return new Ne((n,r)=>{let i=0,s=0,a=!1;e.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&n()},c=>r(c))}),a=!0,s===i&&n()})}static or(e){let n=Ne.resolve(!1);for(const r of e)n=n.next(i=>i?Ne.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new Ne((r,i)=>{const s=e.length,a=new Array(s);let o=0;for(let c=0;c<s;c++){const u=c;n(e[u]).next(d=>{a[u]=d,++o,o===s&&r(a)},d=>i(d))}})}static doWhile(e,n){return new Ne((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function vX(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function uv(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}wC.oe=-1;function Jx(t){return t==null}function Q0(t){return t===0&&1/t==-1/0}function yX(t){return typeof t=="number"&&Number.isInteger(t)&&!Q0(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Zu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function d6(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e,n){this.comparator=e,this.root=n||Yr.EMPTY}insert(e,n){return new Fn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Yr.BLACK,null,null))}remove(e){return new Fn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dy(this.root,e,this.comparator,!1)}getReverseIterator(){return new dy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dy(this.root,e,this.comparator,!0)}}class dy{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Yr.RED,this.left=i??Yr.EMPTY,this.right=s??Yr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Yr(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Yr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Yr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw wt();const e=this.left.check();if(e!==this.right.check())throw wt();return e+(this.isRed()?0:1)}}Yr.EMPTY=null,Yr.RED=!0,Yr.BLACK=!1;Yr.EMPTY=new class{constructor(){this.size=0}get key(){throw wt()}get value(){throw wt()}get color(){throw wt()}get left(){throw wt()}get right(){throw wt()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Yr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e){this.comparator=e,this.data=new Fn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new PD(this.data.getIterator())}getIteratorFrom(e){return new PD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Jr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Jr(this.comparator);return n.data=e,n}}class PD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this.fields=e,e.sort(Qr.comparator)}static empty(){return new ns([])}unionWith(e){let n=new Jr(Qr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ns(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $f(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new f6("Invalid base64 string: "+s):s}}(e);return new ni(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new ni(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Yt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ni.EMPTY_BYTE_STRING=new ni("");const bX=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gl(t){if(on(!!t),typeof t=="string"){let e=0;const n=bX.exec(t);if(on(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tr(t.seconds),nanos:tr(t.nanos)}}function tr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ku(t){return typeof t=="string"?ni.fromBase64String(t):ni.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function SC(t){const e=t.mapValue.fields.__previous_value__;return _C(e)?SC(e):e}function ig(t){const e=Gl(t.mapValue.fields.__local_write_time__.timestampValue);return new pr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xX{constructor(e,n,r,i,s,a,o,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u}}class sg{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new sg("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof sg&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy={mapValue:{}};function Du(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_C(t)?4:_X(t)?9007199254740991:wX(t)?10:11:wt()}function Ga(t,e){if(t===e)return!0;const n=Du(t);if(n!==Du(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ig(t).isEqual(ig(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Gl(i.timestampValue),o=Gl(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ku(i.bytesValue).isEqual(ku(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return tr(i.geoPointValue.latitude)===tr(s.geoPointValue.latitude)&&tr(i.geoPointValue.longitude)===tr(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return tr(i.integerValue)===tr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=tr(i.doubleValue),o=tr(s.doubleValue);return a===o?Q0(a)===Q0(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return $f(t.arrayValue.values||[],e.arrayValue.values||[],Ga);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(ND(a)!==ND(o))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(o[c]===void 0||!Ga(a[c],o[c])))return!1;return!0}(t,e);default:return wt()}}function ag(t,e){return(t.values||[]).find(n=>Ga(n,e))!==void 0}function Ff(t,e){if(t===e)return 0;const n=Du(t),r=Du(e);if(n!==r)return Yt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Yt(t.booleanValue,e.booleanValue);case 2:return function(s,a){const o=tr(s.integerValue||s.doubleValue),c=tr(a.integerValue||a.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1}(t,e);case 3:return kD(t.timestampValue,e.timestampValue);case 4:return kD(ig(t),ig(e));case 5:return Yt(t.stringValue,e.stringValue);case 6:return function(s,a){const o=ku(s),c=ku(a);return o.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),c=a.split("/");for(let u=0;u<o.length&&u<c.length;u++){const d=Yt(o[u],c[u]);if(d!==0)return d}return Yt(o.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const o=Yt(tr(s.latitude),tr(a.latitude));return o!==0?o:Yt(tr(s.longitude),tr(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return DD(t.arrayValue,e.arrayValue);case 10:return function(s,a){var o,c,u,d;const f=s.fields||{},h=a.fields||{},p=(o=f.value)===null||o===void 0?void 0:o.arrayValue,g=(c=h.value)===null||c===void 0?void 0:c.arrayValue,m=Yt(((u=p==null?void 0:p.values)===null||u===void 0?void 0:u.length)||0,((d=g==null?void 0:g.values)===null||d===void 0?void 0:d.length)||0);return m!==0?m:DD(p,g)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===fy.mapValue&&a===fy.mapValue)return 0;if(s===fy.mapValue)return 1;if(a===fy.mapValue)return-1;const o=s.fields||{},c=Object.keys(o),u=a.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const h=Yt(c[f],d[f]);if(h!==0)return h;const p=Ff(o[c[f]],u[d[f]]);if(p!==0)return p}return Yt(c.length,d.length)}(t.mapValue,e.mapValue);default:throw wt()}}function kD(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Yt(t,e);const n=Gl(t),r=Gl(e),i=Yt(n.seconds,r.seconds);return i!==0?i:Yt(n.nanos,r.nanos)}function DD(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ff(n[i],r[i]);if(s)return s}return Yt(n.length,r.length)}function Vf(t){return KA(t)}function KA(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Gl(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ku(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ut.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=KA(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${KA(n.fields[a])}`;return i+"}"}(t.mapValue):wt()}function ID(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function qA(t){return!!t&&"integerValue"in t}function AC(t){return!!t&&"arrayValue"in t}function OD(t){return!!t&&"nullValue"in t}function MD(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function a0(t){return!!t&&"mapValue"in t}function wX(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function fm(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Zu(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=fm(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fm(t.arrayValue.values[n]);return e}return Object.assign({},t)}function _X(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e){this.value=e}static empty(){return new Mi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!a0(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fm(n)}setAll(e){let n=Qr.emptyPath(),r={},i=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=o.popLast()}a?r[o.lastSegment()]=fm(a):i.push(o.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());a0(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ga(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];a0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Zu(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Mi(fm(this.value))}}function h6(t){const e=[];return Zu(t.fields,(n,r)=>{const i=new Qr([n]);if(a0(r)){const s=h6(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new ns(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,n,r,i,s,a,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new hi(e,0,Et.min(),Et.min(),Et.min(),Mi.empty(),0)}static newFoundDocument(e,n,r,i){return new hi(e,1,n,Et.min(),r,i,0)}static newNoDocument(e,n){return new hi(e,2,n,Et.min(),Et.min(),Mi.empty(),0)}static newUnknownDocument(e,n){return new hi(e,3,n,Et.min(),Et.min(),Mi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof hi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e,n){this.position=e,this.inclusive=n}}function RD(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=ut.comparator(ut.fromName(a.referenceValue),n.key):r=Ff(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function LD(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ga(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e,n="asc"){this.field=e,this.dir=n}}function SX(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let p6=class{};class hr extends p6{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new EX(e,n,r):n==="array-contains"?new TX(e,r):n==="in"?new NX(e,r):n==="not-in"?new PX(e,r):n==="array-contains-any"?new kX(e,r):new hr(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new jX(e,r):new CX(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ff(n,this.value)):n!==null&&Du(this.value)===Du(n)&&this.matchesComparison(Ff(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return wt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ca extends p6{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ca(e,n)}matches(e){return m6(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function m6(t){return t.op==="and"}function g6(t){return AX(t)&&m6(t)}function AX(t){for(const e of t.filters)if(e instanceof ca)return!1;return!0}function GA(t){if(t instanceof hr)return t.field.canonicalString()+t.op.toString()+Vf(t.value);if(g6(t))return t.filters.map(e=>GA(e)).join(",");{const e=t.filters.map(n=>GA(n)).join(",");return`${t.op}(${e})`}}function v6(t,e){return t instanceof hr?function(r,i){return i instanceof hr&&r.op===i.op&&r.field.isEqual(i.field)&&Ga(r.value,i.value)}(t,e):t instanceof ca?function(r,i){return i instanceof ca&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,o)=>s&&v6(a,i.filters[o]),!0):!1}(t,e):void wt()}function y6(t){return t instanceof hr?function(n){return`${n.field.canonicalString()} ${n.op} ${Vf(n.value)}`}(t):t instanceof ca?function(n){return n.op.toString()+" {"+n.getFilters().map(y6).join(" ,")+"}"}(t):"Filter"}class EX extends hr{constructor(e,n,r){super(e,n,r),this.key=ut.fromName(r.referenceValue)}matches(e){const n=ut.comparator(e.key,this.key);return this.matchesComparison(n)}}class jX extends hr{constructor(e,n){super(e,"in",n),this.keys=b6("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class CX extends hr{constructor(e,n){super(e,"not-in",n),this.keys=b6("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function b6(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ut.fromName(r.referenceValue))}class TX extends hr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return AC(n)&&ag(n.arrayValue,this.value)}}class NX extends hr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ag(this.value.arrayValue,n)}}class PX extends hr{constructor(e,n){super(e,"not-in",n)}matches(e){if(ag(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ag(this.value.arrayValue,n)}}class kX extends hr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!AC(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ag(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DX{constructor(e,n=null,r=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.ue=null}}function zD(t,e=null,n=[],r=[],i=null,s=null,a=null){return new DX(t,e,n,r,i,s,a)}function EC(t){const e=jt(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>GA(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Jx(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Vf(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Vf(r)).join(",")),e.ue=n}return e.ue}function jC(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!SX(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!v6(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!LD(t.startAt,e.startAt)&&LD(t.endAt,e.endAt)}function YA(t){return ut.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e,n=null,r=[],i=[],s=null,a="F",o=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function IX(t,e,n,r,i,s,a,o){return new dv(t,e,n,r,i,s,a,o)}function CC(t){return new dv(t)}function $D(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function x6(t){return t.collectionGroup!==null}function hm(t){const e=jt(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Jr(Qr.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Z0(s,r))}),n.has(Qr.keyField().canonicalString())||e.ce.push(new Z0(Qr.keyField(),r))}return e.ce}function Va(t){const e=jt(t);return e.le||(e.le=OX(e,hm(t))),e.le}function OX(t,e){if(t.limitType==="F")return zD(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Z0(i.field,s)});const n=t.endAt?new X0(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new X0(t.startAt.position,t.startAt.inclusive):null;return zD(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function QA(t,e){const n=t.filters.concat([e]);return new dv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function XA(t,e,n){return new dv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ew(t,e){return jC(Va(t),Va(e))&&t.limitType===e.limitType}function w6(t){return`${EC(Va(t))}|lt:${t.limitType}`}function zd(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>y6(i)).join(", ")}]`),Jx(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Vf(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Vf(i)).join(",")),`Target(${r})`}(Va(t))}; limitType=${t.limitType})`}function tw(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ut.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of hm(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,o,c){const u=RD(a,o,c);return a.inclusive?u<=0:u<0}(r.startAt,hm(r),i)||r.endAt&&!function(a,o,c){const u=RD(a,o,c);return a.inclusive?u>=0:u>0}(r.endAt,hm(r),i))}(t,e)}function MX(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function _6(t){return(e,n)=>{let r=!1;for(const i of hm(t)){const s=RX(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function RX(t,e,n){const r=t.field.isKeyField()?ut.comparator(e.key,n.key):function(s,a,o){const c=a.data.field(s),u=o.data.field(s);return c!==null&&u!==null?Ff(c,u):wt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return wt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Zu(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return d6(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LX=new Fn(ut.comparator);function Ro(){return LX}const S6=new Fn(ut.comparator);function Yp(...t){let e=S6;for(const n of t)e=e.insert(n.key,n);return e}function A6(t){let e=S6;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function iu(){return pm()}function E6(){return pm()}function pm(){return new Mh(t=>t.toString(),(t,e)=>t.isEqual(e))}const zX=new Fn(ut.comparator),$X=new Jr(ut.comparator);function Rt(...t){let e=$X;for(const n of t)e=e.add(n);return e}const FX=new Jr(Yt);function VX(){return FX}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Q0(e)?"-0":e}}function j6(t){return{integerValue:""+t}}function BX(t,e){return yX(e)?j6(e):TC(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(){this._=void 0}}function UX(t,e,n){return t instanceof og?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&_C(s)&&(s=SC(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(n,e):t instanceof lg?T6(t,e):t instanceof cg?N6(t,e):function(i,s){const a=C6(i,s),o=FD(a)+FD(i.Pe);return qA(a)&&qA(i.Pe)?j6(o):TC(i.serializer,o)}(t,e)}function WX(t,e,n){return t instanceof lg?T6(t,e):t instanceof cg?N6(t,e):n}function C6(t,e){return t instanceof J0?function(r){return qA(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class og extends nw{}class lg extends nw{constructor(e){super(),this.elements=e}}function T6(t,e){const n=P6(e);for(const r of t.elements)n.some(i=>Ga(i,r))||n.push(r);return{arrayValue:{values:n}}}class cg extends nw{constructor(e){super(),this.elements=e}}function N6(t,e){let n=P6(e);for(const r of t.elements)n=n.filter(i=>!Ga(i,r));return{arrayValue:{values:n}}}class J0 extends nw{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function FD(t){return tr(t.integerValue||t.doubleValue)}function P6(t){return AC(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HX{constructor(e,n){this.field=e,this.transform=n}}function KX(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof lg&&i instanceof lg||r instanceof cg&&i instanceof cg?$f(r.elements,i.elements,Ga):r instanceof J0&&i instanceof J0?Ga(r.Pe,i.Pe):r instanceof og&&i instanceof og}(t.transform,e.transform)}class qX{constructor(e,n){this.version=e,this.transformResults=n}}class is{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new is}static exists(e){return new is(void 0,e)}static updateTime(e){return new is(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function o0(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class rw{}function k6(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new iw(t.key,is.none()):new fv(t.key,t.data,is.none());{const n=t.data,r=Mi.empty();let i=new Jr(Qr.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new ic(t.key,r,new ns(i.toArray()),is.none())}}function GX(t,e,n){t instanceof fv?function(i,s,a){const o=i.value.clone(),c=BD(i.fieldTransforms,s,a.transformResults);o.setAll(c),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,n):t instanceof ic?function(i,s,a){if(!o0(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=BD(i.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(D6(i)),c.setAll(o),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function mm(t,e,n,r){return t instanceof fv?function(s,a,o,c){if(!o0(s.precondition,a))return o;const u=s.value.clone(),d=UD(s.fieldTransforms,c,a);return u.setAll(d),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ic?function(s,a,o,c){if(!o0(s.precondition,a))return o;const u=UD(s.fieldTransforms,c,a),d=a.data;return d.setAll(D6(s)),d.setAll(u),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,a,o){return o0(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,n)}function YX(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=C6(r.transform,i||null);s!=null&&(n===null&&(n=Mi.empty()),n.set(r.field,s))}return n||null}function VD(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&$f(r,i,(s,a)=>KX(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class fv extends rw{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ic extends rw{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function D6(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function BD(t,e,n){const r=new Map;on(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,o=e.data.field(s.field);r.set(s.field,WX(a,o,n[i]))}return r}function UD(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,UX(s,a,e))}return r}class iw extends rw{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QX extends rw{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XX{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&GX(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=mm(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=mm(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=E6();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=n.has(i.key)?null:o;const c=k6(a,o);c!==null&&r.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(Et.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Rt())}isEqual(e){return this.batchId===e.batchId&&$f(this.mutations,e.mutations,(n,r)=>VD(n,r))&&$f(this.baseMutations,e.baseMutations,(n,r)=>VD(n,r))}}class NC{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){on(e.mutations.length===r.length);let i=function(){return zX}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new NC(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZX{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JX{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ur,Ut;function eZ(t){switch(t){default:return wt();case Ce.CANCELLED:case Ce.UNKNOWN:case Ce.DEADLINE_EXCEEDED:case Ce.RESOURCE_EXHAUSTED:case Ce.INTERNAL:case Ce.UNAVAILABLE:case Ce.UNAUTHENTICATED:return!1;case Ce.INVALID_ARGUMENT:case Ce.NOT_FOUND:case Ce.ALREADY_EXISTS:case Ce.PERMISSION_DENIED:case Ce.FAILED_PRECONDITION:case Ce.ABORTED:case Ce.OUT_OF_RANGE:case Ce.UNIMPLEMENTED:case Ce.DATA_LOSS:return!0}}function I6(t){if(t===void 0)return Mo("GRPC error has no .code"),Ce.UNKNOWN;switch(t){case ur.OK:return Ce.OK;case ur.CANCELLED:return Ce.CANCELLED;case ur.UNKNOWN:return Ce.UNKNOWN;case ur.DEADLINE_EXCEEDED:return Ce.DEADLINE_EXCEEDED;case ur.RESOURCE_EXHAUSTED:return Ce.RESOURCE_EXHAUSTED;case ur.INTERNAL:return Ce.INTERNAL;case ur.UNAVAILABLE:return Ce.UNAVAILABLE;case ur.UNAUTHENTICATED:return Ce.UNAUTHENTICATED;case ur.INVALID_ARGUMENT:return Ce.INVALID_ARGUMENT;case ur.NOT_FOUND:return Ce.NOT_FOUND;case ur.ALREADY_EXISTS:return Ce.ALREADY_EXISTS;case ur.PERMISSION_DENIED:return Ce.PERMISSION_DENIED;case ur.FAILED_PRECONDITION:return Ce.FAILED_PRECONDITION;case ur.ABORTED:return Ce.ABORTED;case ur.OUT_OF_RANGE:return Ce.OUT_OF_RANGE;case ur.UNIMPLEMENTED:return Ce.UNIMPLEMENTED;case ur.DATA_LOSS:return Ce.DATA_LOSS;default:return wt()}}(Ut=ur||(ur={}))[Ut.OK=0]="OK",Ut[Ut.CANCELLED=1]="CANCELLED",Ut[Ut.UNKNOWN=2]="UNKNOWN",Ut[Ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ut[Ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ut[Ut.NOT_FOUND=5]="NOT_FOUND",Ut[Ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ut[Ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ut[Ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ut[Ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ut[Ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ut[Ut.ABORTED=10]="ABORTED",Ut[Ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ut[Ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ut[Ut.INTERNAL=13]="INTERNAL",Ut[Ut.UNAVAILABLE=14]="UNAVAILABLE",Ut[Ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tZ(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nZ=new gu([4294967295,4294967295],0);function WD(t){const e=tZ().encode(t),n=new i6;return n.update(e),new Uint8Array(n.digest())}function HD(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new gu([n,r],0),new gu([i,s],0)]}class PC{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Qp(`Invalid padding: ${n}`);if(r<0)throw new Qp(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Qp(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Qp(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=gu.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(gu.fromNumber(r)));return i.compare(nZ)===1&&(i=new gu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=WD(e),[r,i]=HD(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new PC(s,i,n);return r.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const n=WD(e),[r,i]=HD(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Qp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,hv.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new sw(Et.min(),i,new Fn(Yt),Ro(),Rt())}}class hv{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new hv(r,n,Rt(),Rt(),Rt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class O6{constructor(e,n){this.targetId=e,this.me=n}}class M6{constructor(e,n,r=ni.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class KD{constructor(){this.fe=0,this.ge=GD(),this.pe=ni.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Rt(),n=Rt(),r=Rt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:wt()}}),new hv(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=GD()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,on(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class rZ{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ro(),this.qe=qD(),this.Qe=new Fn(Yt)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:wt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(YA(s))if(r===0){const a=new ut(s.path);this.Ue(n,a,hi.newNoDocument(a,Et.min()))}else on(r===1);else{const a=this.Ye(n);if(a!==r){const o=this.Ze(e),c=o?this.Xe(o,e,a):1;if(c!==0){this.je(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,o;try{a=ku(r).toUint8Array()}catch(c){if(c instanceof f6)return ng("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new PC(a,i,s)}catch(c){return ng(c instanceof Qp?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.Ie===0?null:o}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,a)=>{const o=this.Je(a);if(o){if(s.current&&YA(o.target)){const c=new ut(o.target.path);this.ke.get(c)!==null||this.it(a,c)||this.Ue(a,c,hi.newNoDocument(c,e))}s.be&&(n.set(a,s.ve()),s.Ce())}});let r=Rt();this.qe.forEach((s,a)=>{let o=!0;a.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new sw(e,n,this.Qe,this.ke,r);return this.ke=Ro(),this.qe=qD(),this.Qe=new Fn(Yt),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new KD,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Jr(Yt),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||it("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new KD),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function qD(){return new Fn(ut.comparator)}function GD(){return new Fn(ut.comparator)}const iZ={asc:"ASCENDING",desc:"DESCENDING"},sZ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aZ={and:"AND",or:"OR"};class oZ{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ZA(t,e){return t.useProto3Json||Jx(e)?e:{value:e}}function eb(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function R6(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function lZ(t,e){return eb(t,e.toTimestamp())}function Ba(t){return on(!!t),Et.fromTimestamp(function(n){const r=Gl(n);return new pr(r.seconds,r.nanos)}(t))}function kC(t,e){return JA(t,e).canonicalString()}function JA(t,e){const n=function(i){return new Cn(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function L6(t){const e=Cn.fromString(t);return on(B6(e)),e}function eE(t,e){return kC(t.databaseId,e.path)}function x_(t,e){const n=L6(e);if(n.get(1)!==t.databaseId.projectId)throw new Ze(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ze(Ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ut($6(n))}function z6(t,e){return kC(t.databaseId,e)}function cZ(t){const e=L6(t);return e.length===4?Cn.emptyPath():$6(e)}function tE(t){return new Cn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $6(t){return on(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function YD(t,e,n){return{name:eE(t,e),fields:n.value.mapValue.fields}}function uZ(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:wt()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(on(d===void 0||typeof d=="string"),ni.fromBase64String(d||"")):(on(d===void 0||d instanceof Buffer||d instanceof Uint8Array),ni.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(u){const d=u.code===void 0?Ce.UNKNOWN:I6(u.code);return new Ze(d,u.message||"")}(a);n=new M6(r,i,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=x_(t,r.document.name),s=Ba(r.document.updateTime),a=r.document.createTime?Ba(r.document.createTime):Et.min(),o=new Mi({mapValue:{fields:r.document.fields}}),c=hi.newFoundDocument(i,s,a,o),u=r.targetIds||[],d=r.removedTargetIds||[];n=new l0(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=x_(t,r.document),s=r.readTime?Ba(r.readTime):Et.min(),a=hi.newNoDocument(i,s),o=r.removedTargetIds||[];n=new l0([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=x_(t,r.document),s=r.removedTargetIds||[];n=new l0([],s,i,null)}else{if(!("filter"in e))return wt();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new JX(i,s),o=r.targetId;n=new O6(o,a)}}return n}function dZ(t,e){let n;if(e instanceof fv)n={update:YD(t,e.key,e.value)};else if(e instanceof iw)n={delete:eE(t,e.key)};else if(e instanceof ic)n={update:YD(t,e.key,e.data),updateMask:xZ(e.fieldMask)};else{if(!(e instanceof QX))return wt();n={verify:eE(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const o=a.transform;if(o instanceof og)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof lg)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof cg)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof J0)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw wt()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:lZ(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:wt()}(t,e.precondition)),n}function fZ(t,e){return t&&t.length>0?(on(e!==void 0),t.map(n=>function(i,s){let a=i.updateTime?Ba(i.updateTime):Ba(s);return a.isEqual(Et.min())&&(a=Ba(s)),new qX(a,i.transformResults||[])}(n,e))):[]}function hZ(t,e){return{documents:[z6(t,e.path)]}}function pZ(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=z6(t,i);const s=function(u){if(u.length!==0)return V6(ca.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(u){if(u.length!==0)return u.map(d=>function(h){return{field:$d(h.field),direction:vZ(h.dir)}}(d))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=ZA(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function mZ(t){let e=cZ(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){on(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(f){const h=F6(f);return h instanceof ca&&g6(h)?h.getFilters():[h]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(h=>function(g){return new Z0(Fd(g.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(n.orderBy));let o=null;n.limit&&(o=function(f){let h;return h=typeof f=="object"?f.value:f,Jx(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(f){const h=!!f.before,p=f.values||[];return new X0(p,h)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const h=!f.before,p=f.values||[];return new X0(p,h)}(n.endAt)),IX(e,i,a,s,o,"F",c,u)}function gZ(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return wt()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function F6(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Fd(n.unaryFilter.field);return hr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Fd(n.unaryFilter.field);return hr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Fd(n.unaryFilter.field);return hr.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Fd(n.unaryFilter.field);return hr.create(a,"!=",{nullValue:"NULL_VALUE"});default:return wt()}}(t):t.fieldFilter!==void 0?function(n){return hr.create(Fd(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return wt()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ca.create(n.compositeFilter.filters.map(r=>F6(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return wt()}}(n.compositeFilter.op))}(t):wt()}function vZ(t){return iZ[t]}function yZ(t){return sZ[t]}function bZ(t){return aZ[t]}function $d(t){return{fieldPath:t.canonicalString()}}function Fd(t){return Qr.fromServerFormat(t.fieldPath)}function V6(t){return t instanceof hr?function(n){if(n.op==="=="){if(MD(n.value))return{unaryFilter:{field:$d(n.field),op:"IS_NAN"}};if(OD(n.value))return{unaryFilter:{field:$d(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(MD(n.value))return{unaryFilter:{field:$d(n.field),op:"IS_NOT_NAN"}};if(OD(n.value))return{unaryFilter:{field:$d(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$d(n.field),op:yZ(n.op),value:n.value}}}(t):t instanceof ca?function(n){const r=n.getFilters().map(i=>V6(i));return r.length===1?r[0]:{compositeFilter:{op:bZ(n.op),filters:r}}}(t):wt()}function xZ(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function B6(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n,r,i,s=Et.min(),a=Et.min(),o=ni.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new jl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new jl(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new jl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new jl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wZ{constructor(e){this.ct=e}}function _Z(t){const e=mZ({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?XA(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SZ{constructor(){this.un=new AZ}addToCollectionParentIndex(e,n){return this.un.add(n),Ne.resolve()}getCollectionParents(e,n){return Ne.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Ne.resolve()}deleteFieldIndex(e,n){return Ne.resolve()}deleteAllFieldIndexes(e){return Ne.resolve()}createTargetIndexes(e,n){return Ne.resolve()}getDocumentsMatchingTarget(e,n){return Ne.resolve(null)}getIndexType(e,n){return Ne.resolve(0)}getFieldIndexes(e,n){return Ne.resolve([])}getNextCollectionGroupToUpdate(e){return Ne.resolve(null)}getMinOffset(e,n){return Ne.resolve(ql.min())}getMinOffsetFromCollectionGroup(e,n){return Ne.resolve(ql.min())}updateCollectionGroup(e,n,r){return Ne.resolve()}updateIndexEntries(e,n){return Ne.resolve()}}class AZ{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Jr(Cn.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Jr(Cn.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Bf(0)}static kn(){return new Bf(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EZ{constructor(){this.changes=new Mh(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,hi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ne.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jZ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CZ{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&mm(r.mutation,i,ns.empty(),pr.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Rt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Rt()){const i=iu();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=Yp();return s.forEach((o,c)=>{a=a.insert(o,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=iu();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Rt()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,r,i){let s=Ro();const a=pm(),o=function(){return pm()}();return n.forEach((c,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof ic)?s=s.insert(u.key,u):d!==void 0?(a.set(u.key,d.mutation.getFieldMask()),mm(d.mutation,u,d.mutation.getFieldMask(),pr.now())):a.set(u.key,ns.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>a.set(u,d)),n.forEach((u,d)=>{var f;return o.set(u,new jZ(d,(f=a.get(u))!==null&&f!==void 0?f:null))}),o))}recalculateAndSaveOverlays(e,n){const r=pm();let i=new Fn((a,o)=>a-o),s=Rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let d=r.get(c)||ns.empty();d=o.applyToLocalView(u,d),r.set(c,d);const f=(i.get(o.batchId)||Rt()).add(c);i=i.insert(o.batchId,f)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,d=c.value,f=E6();d.forEach(h=>{if(!s.has(h)){const p=k6(n.get(h),r.get(h));p!==null&&f.set(h,p),s=s.add(h)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,f))}return Ne.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return ut.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):x6(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Ne.resolve(iu());let o=-1,c=s;return a.next(u=>Ne.forEach(u,(d,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),s.get(d)?Ne.resolve():this.remoteDocumentCache.getEntry(e,d).next(h=>{c=c.insert(d,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,Rt())).next(d=>({batchId:o,changes:A6(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ut(n)).next(r=>{let i=Yp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=Yp();return this.indexManager.getCollectionParents(e,s).next(o=>Ne.forEach(o,c=>{const u=function(f,h){return new dv(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,h)=>{a=a.insert(f,h)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((c,u)=>{const d=u.getKey();a.get(d)===null&&(a=a.insert(d,hi.newInvalidDocument(d)))});let o=Yp();return a.forEach((c,u)=>{const d=s.get(c);d!==void 0&&mm(d.mutation,u,ns.empty(),pr.now()),tw(n,u)&&(o=o.insert(c,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TZ{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Ne.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ba(i.createTime)}}(n)),Ne.resolve()}getNamedQuery(e,n){return Ne.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:_Z(i.bundledQuery),readTime:Ba(i.readTime)}}(n)),Ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NZ{constructor(){this.overlays=new Fn(ut.comparator),this.Ir=new Map}getOverlay(e,n){return Ne.resolve(this.overlays.get(n))}getOverlays(e,n){const r=iu();return Ne.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),Ne.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),Ne.resolve()}getOverlaysForCollection(e,n,r){const i=iu(),s=n.length+1,a=new ut(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Ne.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Fn((u,d)=>u-d);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=iu(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=iu(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>o.set(u,d)),!(o.size()>=i)););return Ne.resolve(o)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new ZX(n,r));let s=this.Ir.get(n);s===void 0&&(s=Rt(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PZ{constructor(){this.sessionToken=ni.EMPTY_BYTE_STRING}getSessionToken(e){return Ne.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(){this.Tr=new Jr(Pr.Er),this.dr=new Jr(Pr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Pr(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Pr(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ut(new Cn([])),r=new Pr(n,e),i=new Pr(n,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ut(new Cn([])),r=new Pr(n,e),i=new Pr(n,e+1);let s=Rt();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new Pr(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Pr{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ut.comparator(e.key,n.key)||Yt(e.wr,n.wr)}static Ar(e,n){return Yt(e.wr,n.wr)||ut.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kZ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Jr(Pr.Er)}checkEmpty(e){return Ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new XX(s,n,r,i);this.mutationQueue.push(a);for(const o of i)this.br=this.br.add(new Pr(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ne.resolve(a)}lookupMutationBatch(e,n){return Ne.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return Ne.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Pr(n,0),i=new Pr(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{const o=this.Dr(a.wr);s.push(o)}),Ne.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Jr(Yt);return n.forEach(i=>{const s=new Pr(i,0),a=new Pr(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],o=>{r=r.add(o.wr)})}),Ne.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ut.isDocumentKey(s)||(s=s.child(""));const a=new Pr(new ut(s),0);let o=new Jr(Yt);return this.br.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(o=o.add(c.wr)),!0)},a),Ne.resolve(this.Cr(o))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){on(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Ne.forEach(n.mutations,i=>{const s=new Pr(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Pr(n,0),i=this.br.firstAfterOrEqual(r);return Ne.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ne.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DZ{constructor(e){this.Mr=e,this.docs=function(){return new Fn(ut.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Ne.resolve(r?r.document.mutableCopy():hi.newInvalidDocument(n))}getEntries(e,n){let r=Ro();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():hi.newInvalidDocument(i))}),Ne.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Ro();const a=n.path,o=new ut(a.child("")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||pX(hX(d),r)<=0||(i.has(d.key)||tw(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Ne.resolve(s)}getAllFromCollectionGroup(e,n,r,i){wt()}Or(e,n){return Ne.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new IZ(this)}getSize(e){return Ne.resolve(this.size)}}class IZ extends EZ{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),Ne.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OZ{constructor(e){this.persistence=e,this.Nr=new Mh(n=>EC(n),jC),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.Lr=0,this.Br=new DC,this.targetCount=0,this.kr=Bf.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),Ne.resolve()}getLastRemoteSnapshotVersion(e){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ne.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Ne.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Bf(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Ne.resolve()}updateTargetData(e,n){return this.Kn(n),Ne.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),Ne.waitFor(s).next(()=>i)}getTargetCount(e){return Ne.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Ne.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Ne.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),Ne.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Ne.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Ne.resolve(r)}containsKey(e,n){return Ne.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MZ{constructor(e,n){this.qr={},this.overlays={},this.Qr=new wC(0),this.Kr=!1,this.Kr=!0,this.$r=new PZ,this.referenceDelegate=e(this),this.Ur=new OZ(this),this.indexManager=new SZ,this.remoteDocumentCache=function(i){return new DZ(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new wZ(n),this.Gr=new TZ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new NZ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new kZ(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){it("MemoryPersistence","Starting transaction:",e);const i=new RZ(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return Ne.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class RZ extends gX{constructor(e){super(),this.currentSequenceNumber=e}}class IC{constructor(e){this.persistence=e,this.Jr=new DC,this.Yr=null}static Zr(e){return new IC(e)}get Xr(){if(this.Yr)return this.Yr;throw wt()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Ne.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Ne.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Ne.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.Xr,r=>{const i=ut.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Et.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Ne.or([()=>Ne.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Rt(),i=Rt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new OC(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LZ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zZ{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return NG()?8:vX(Hi())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new LZ;return this.Xi(e,n,a).next(o=>{if(s.result=o,this.zi)return this.es(e,n,a,o.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Pp()<=zt.DEBUG&&it("QueryEngine","SDK will not create cache indexes for query:",zd(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ne.resolve()):(Pp()<=zt.DEBUG&&it("QueryEngine","Query:",zd(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Pp()<=zt.DEBUG&&it("QueryEngine","The SDK decides to create cache indexes for query:",zd(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Va(n))):Ne.resolve())}Yi(e,n){if($D(n))return Ne.resolve(null);let r=Va(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=XA(n,null,"F"),r=Va(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=Rt(...s);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ts(n,o);return this.ns(n,u,a,c.readTime)?this.Yi(e,XA(n,null,"F")):this.rs(e,u,n,c)}))})))}Zi(e,n,r,i){return $D(n)||i.isEqual(Et.min())?Ne.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const a=this.ts(n,s);return this.ns(n,a,r,i)?Ne.resolve(null):(Pp()<=zt.DEBUG&&it("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zd(n)),this.rs(e,a,n,fX(i,-1)).next(o=>o))})}ts(e,n){let r=new Jr(_6(e));return n.forEach((i,s)=>{tw(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Pp()<=zt.DEBUG&&it("QueryEngine","Using full collection scan to execute query:",zd(n)),this.Ji.getDocumentsMatchingQuery(e,n,ql.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Z{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Fn(Yt),this._s=new Mh(s=>EC(s),jC),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CZ(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function FZ(t,e,n,r){return new $Z(t,e,n,r)}async function U6(t,e){const n=jt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],o=[];let c=Rt();for(const u of i){a.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({hs:u,removedBatchIds:a,addedBatchIds:o}))})})}function VZ(t,e){const n=jt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(o,c,u,d){const f=u.batch,h=f.keys();let p=Ne.resolve();return h.forEach(g=>{p=p.next(()=>d.getEntry(c,g)).next(m=>{const y=u.docVersions.get(g);on(y!==null),m.version.compareTo(y)<0&&(f.applyToRemoteDocument(m,u),m.isValidDocument()&&(m.setReadTime(u.commitVersion),d.addEntry(m)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(c,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let c=Rt();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(c=c.add(o.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function W6(t){const e=jt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function BZ(t,e){const n=jt(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const o=[];e.targetChanges.forEach((d,f)=>{const h=i.get(f);if(!h)return;o.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,f)));let p=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?p=p.withResumeToken(ni.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,r)),i=i.insert(f,p),function(m,y,x){return m.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(h,p,d)&&o.push(n.Ur.updateTargetData(s,p))});let c=Ro(),u=Rt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push(UZ(s,a,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!r.isEqual(Et.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(f=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(d)}return Ne.waitFor(o).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(n.os=i,s))}function UZ(t,e,n){let r=Rt(),i=Rt();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=Ro();return n.forEach((o,c)=>{const u=s.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),c.isNoDocument()&&c.version.isEqual(Et.min())?(e.removeEntry(o,c.readTime),a=a.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),a=a.insert(o,c)):it("LocalStore","Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)}),{Ps:a,Is:i}})}function WZ(t,e){const n=jt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function HZ(t,e){const n=jt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,Ne.resolve(i)):n.Ur.allocateTargetId(r).next(a=>(i=new jl(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function nE(t,e,n){const r=jt(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!uv(a))throw a;it("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function QD(t,e,n){const r=jt(t);let i=Et.min(),s=Rt();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,u,d){const f=jt(c),h=f._s.get(d);return h!==void 0?Ne.resolve(f.os.get(h)):f.Ur.getTargetData(u,d)}(r,a,Va(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,o.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?i:Et.min(),n?s:Rt())).next(o=>(KZ(r,MX(e),o),{documents:o,Ts:s})))}function KZ(t,e,n){let r=t.us.get(e)||Et.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class XD{constructor(){this.activeTargetIds=VX()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qZ{constructor(){this.so=new XD,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new XD,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GZ{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){it("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){it("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hy=null;function w_(){return hy===null?hy=function(){return 268435456+Math.round(2147483648*Math.random())}():hy++,"0x"+hy.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YZ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QZ{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li="WebChannelConnection";class XZ extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,a){const o=w_(),c=this.xo(n,r.toUriEncodedString());it("RestConnection",`Sending RPC '${n}' ${o}:`,c,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,a),this.No(n,c,u,i).then(d=>(it("RestConnection",`Received RPC '${n}' ${o}: `,d),d),d=>{throw ng("RestConnection",`RPC '${n}' ${o} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(n,r,i,s,a,o){return this.Mo(n,r,i,s,a)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Oh}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>n[a]=s),i&&i.headers.forEach((s,a)=>n[a]=s)}xo(n,r){const i=YZ[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=w_();return new Promise((a,o)=>{const c=new s6;c.setWithCredentials(!0),c.listenOnce(a6.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case s0.NO_ERROR:const d=c.getResponseJson();it(li,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),a(d);break;case s0.TIMEOUT:it(li,`RPC '${e}' ${s} timed out`),o(new Ze(Ce.DEADLINE_EXCEEDED,"Request time out"));break;case s0.HTTP_ERROR:const f=c.getStatus();if(it(li,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);const p=h==null?void 0:h.error;if(p&&p.status&&p.message){const g=function(y){const x=y.toLowerCase().replace(/_/g,"-");return Object.values(Ce).indexOf(x)>=0?x:Ce.UNKNOWN}(p.status);o(new Ze(g,p.message))}else o(new Ze(Ce.UNKNOWN,"Server responded with status "+c.getStatus()))}else o(new Ze(Ce.UNAVAILABLE,"Connection failed."));break;default:wt()}}finally{it(li,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);it(li,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=w_(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=c6(),o=l6(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=s.join("");it(li,`Creating RPC '${e}' stream ${i}: ${d}`,c);const f=a.createWebChannel(d,c);let h=!1,p=!1;const g=new QZ({Io:y=>{p?it(li,`Not sending because RPC '${e}' stream ${i} is closed:`,y):(h||(it(li,`Opening RPC '${e}' stream ${i} transport.`),f.open(),h=!0),it(li,`RPC '${e}' stream ${i} sending:`,y),f.send(y))},To:()=>f.close()}),m=(y,x,w)=>{y.listen(x,_=>{try{w(_)}catch(A){setTimeout(()=>{throw A},0)}})};return m(f,Gp.EventType.OPEN,()=>{p||(it(li,`RPC '${e}' stream ${i} transport opened.`),g.yo())}),m(f,Gp.EventType.CLOSE,()=>{p||(p=!0,it(li,`RPC '${e}' stream ${i} transport closed`),g.So())}),m(f,Gp.EventType.ERROR,y=>{p||(p=!0,ng(li,`RPC '${e}' stream ${i} transport errored:`,y),g.So(new Ze(Ce.UNAVAILABLE,"The operation could not be completed")))}),m(f,Gp.EventType.MESSAGE,y=>{var x;if(!p){const w=y.data[0];on(!!w);const _=w,A=_.error||((x=_[0])===null||x===void 0?void 0:x.error);if(A){it(li,`RPC '${e}' stream ${i} received error:`,A);const E=A.status;let C=function(P){const I=ur[P];if(I!==void 0)return I6(I)}(E),j=A.message;C===void 0&&(C=Ce.INTERNAL,j="Unknown error status: "+E+" with message "+A.message),p=!0,g.So(new Ze(C,j)),f.close()}else it(li,`RPC '${e}' stream ${i} received:`,w),g.bo(w)}}),m(o,o6.STAT_EVENT,y=>{y.stat===HA.PROXY?it(li,`RPC '${e}' stream ${i} detected buffering proxy`):y.stat===HA.NOPROXY&&it(li,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.wo()},0),g}}function __(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(t){return new oZ(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&it("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e,n,r,i,s,a,o,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new H6(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Ce.RESOURCE_EXHAUSTED?(Mo(n.toString()),Mo("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Ze(Ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return it("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(it("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ZZ extends K6{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=uZ(this.serializer,e),r=function(s){if(!("targetChange"in s))return Et.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Et.min():a.readTime?Ba(a.readTime):Et.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=tE(this.serializer),n.addTarget=function(s,a){let o;const c=a.target;if(o=YA(c)?{documents:hZ(s,c)}:{query:pZ(s,c)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=R6(s,a.resumeToken);const u=ZA(s,a.expectedCount);u!==null&&(o.expectedCount=u)}else if(a.snapshotVersion.compareTo(Et.min())>0){o.readTime=eb(s,a.snapshotVersion.toTimestamp());const u=ZA(s,a.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const r=gZ(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=tE(this.serializer),n.removeTarget=e,this.a_(n)}}class JZ extends K6{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return on(!!e.streamToken),this.lastStreamToken=e.streamToken,on(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){on(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=fZ(e.writeResults,e.commitTime),r=Ba(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=tE(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>dZ(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eJ extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Ze(Ce.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,JA(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ze(Ce.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,JA(n,r),i,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ze(Ce.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class tJ{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Mo(n),this.D_=!1):it("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nJ{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(async()=>{Ju(this)&&(it("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=jt(c);u.L_.add(4),await pv(u),u.q_.set("Unknown"),u.L_.delete(4),await ow(u)}(this))})}),this.q_=new tJ(r,i)}}async function ow(t){if(Ju(t))for(const e of t.B_)await e(!0)}async function pv(t){for(const e of t.B_)await e(!1)}function q6(t,e){const n=jt(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),zC(n)?LC(n):Rh(n).r_()&&RC(n,e))}function MC(t,e){const n=jt(t),r=Rh(n);n.N_.delete(e),r.r_()&&G6(n,e),n.N_.size===0&&(r.r_()?r.o_():Ju(n)&&n.q_.set("Unknown"))}function RC(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Et.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Rh(t).A_(e)}function G6(t,e){t.Q_.xe(e),Rh(t).R_(e)}function LC(t){t.Q_=new rZ({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Rh(t).start(),t.q_.v_()}function zC(t){return Ju(t)&&!Rh(t).n_()&&t.N_.size>0}function Ju(t){return jt(t).L_.size===0}function Y6(t){t.Q_=void 0}async function rJ(t){t.q_.set("Online")}async function iJ(t){t.N_.forEach((e,n)=>{RC(t,e)})}async function sJ(t,e){Y6(t),zC(t)?(t.q_.M_(e),LC(t)):t.q_.set("Unknown")}async function aJ(t,e,n){if(t.q_.set("Online"),e instanceof M6&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const o of s.targetIds)i.N_.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.N_.delete(o),i.Q_.removeTarget(o))}(t,e)}catch(r){it("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await tb(t,r)}else if(e instanceof l0?t.Q_.Ke(e):e instanceof O6?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Et.min()))try{const r=await W6(t.localStore);n.compareTo(r)>=0&&await function(s,a){const o=s.Q_.rt(a);return o.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(c.resumeToken,a))}}),o.targetMismatches.forEach((c,u)=>{const d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(ni.EMPTY_BYTE_STRING,d.snapshotVersion)),G6(s,c);const f=new jl(d.target,c,u,d.sequenceNumber);RC(s,f)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){it("RemoteStore","Failed to raise snapshot:",r),await tb(t,r)}}async function tb(t,e,n){if(!uv(e))throw e;t.L_.add(1),await pv(t),t.q_.set("Offline"),n||(n=()=>W6(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{it("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await ow(t)})}function Q6(t,e){return e().catch(n=>tb(t,n,e))}async function lw(t){const e=jt(t),n=Yl(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;oJ(e);)try{const i=await WZ(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,lJ(e,i)}catch(i){await tb(e,i)}X6(e)&&Z6(e)}function oJ(t){return Ju(t)&&t.O_.length<10}function lJ(t,e){t.O_.push(e);const n=Yl(t);n.r_()&&n.V_&&n.m_(e.mutations)}function X6(t){return Ju(t)&&!Yl(t).n_()&&t.O_.length>0}function Z6(t){Yl(t).start()}async function cJ(t){Yl(t).p_()}async function uJ(t){const e=Yl(t);for(const n of t.O_)e.m_(n.mutations)}async function dJ(t,e,n){const r=t.O_.shift(),i=NC.from(r,e,n);await Q6(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await lw(t)}async function fJ(t,e){e&&Yl(t).V_&&await async function(r,i){if(function(a){return eZ(a)&&a!==Ce.ABORTED}(i.code)){const s=r.O_.shift();Yl(r).s_(),await Q6(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await lw(r)}}(t,e),X6(t)&&Z6(t)}async function JD(t,e){const n=jt(t);n.asyncQueue.verifyOperationInProgress(),it("RemoteStore","RemoteStore received new credentials");const r=Ju(n);n.L_.add(3),await pv(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await ow(n)}async function hJ(t,e){const n=jt(t);e?(n.L_.delete(2),await ow(n)):e||(n.L_.add(2),await pv(n),n.q_.set("Unknown"))}function Rh(t){return t.K_||(t.K_=function(n,r,i){const s=jt(n);return s.w_(),new ZZ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:rJ.bind(null,t),Ro:iJ.bind(null,t),mo:sJ.bind(null,t),d_:aJ.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),zC(t)?LC(t):t.q_.set("Unknown")):(await t.K_.stop(),Y6(t))})),t.K_}function Yl(t){return t.U_||(t.U_=function(n,r,i){const s=jt(n);return s.w_(),new JZ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:cJ.bind(null,t),mo:fJ.bind(null,t),f_:uJ.bind(null,t),g_:dJ.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await lw(t)):(await t.U_.stop(),t.O_.length>0&&(it("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new vu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,o=new $C(e,n,a,i,s);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ze(Ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function FC(t,e){if(Mo("AsyncQueue",`${e}: ${t}`),uv(t))return new Ze(Ce.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ut.comparator(n.key,r.key):(n,r)=>ut.comparator(n.key,r.key),this.keyedMap=Yp(),this.sortedSet=new Fn(this.comparator)}static emptySet(e){return new _f(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof _f)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new _f;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(){this.W_=new Fn(ut.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):wt():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Uf{constructor(e,n,r,i,s,a,o,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new Uf(e,n,_f.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ew(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pJ{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class mJ{constructor(){this.queries=tI(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=jt(n),s=i.queries;i.queries=tI(),s.forEach((a,o)=>{for(const c of o.j_)c.onError(r)})})(this,new Ze(Ce.ABORTED,"Firestore shutting down"))}}function tI(){return new Mh(t=>w6(t),ew)}async function gJ(t,e){const n=jt(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new pJ,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const o=FC(a,`Initialization of query '${zd(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&VC(n)}async function vJ(t,e){const n=jt(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function yJ(t,e){const n=jt(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const o of a.j_)o.X_(i)&&(r=!0);a.z_=i}}r&&VC(n)}function bJ(t,e,n){const r=jt(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function VC(t){t.Y_.forEach(e=>{e.next()})}var rE,nI;(nI=rE||(rE={})).ea="default",nI.Cache="cache";class xJ{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Uf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Uf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==rE.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e){this.key=e}}class eF{constructor(e){this.key=e}}class wJ{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Rt(),this.mutatedKeys=Rt(),this.Aa=_6(e),this.Ra=new _f(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new eI,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,o=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{const h=i.get(d),p=tw(this.query,f)?f:null,g=!!h&&this.mutatedKeys.has(h.key),m=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let y=!1;h&&p?h.data.isEqual(p.data)?g!==m&&(r.track({type:3,doc:p}),y=!0):this.ga(h,p)||(r.track({type:2,doc:p}),y=!0,(c&&this.Aa(p,c)>0||u&&this.Aa(p,u)<0)&&(o=!0)):!h&&p?(r.track({type:0,doc:p}),y=!0):h&&!p&&(r.track({type:1,doc:h}),y=!0,(c||u)&&(o=!0)),y&&(p?(a=a.add(p),s=m?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:a,fa:r,ns:o,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((d,f)=>function(p,g){const m=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wt()}};return m(p)-m(g)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;const o=n&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,u=c!==this.Ea;return this.Ea=c,a.length!==0||u?{snapshot:new Uf(this.query,e.Ra,s,a,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new eI,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Rt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new eF(r))}),this.da.forEach(r=>{e.has(r)||n.push(new J6(r))}),n}ba(e){this.Ta=e.Ts,this.da=Rt();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Uf.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class _J{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class SJ{constructor(e){this.key=e,this.va=!1}}class AJ{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Mh(o=>w6(o),ew),this.Ma=new Map,this.xa=new Set,this.Oa=new Fn(ut.comparator),this.Na=new Map,this.La=new DC,this.Ba={},this.ka=new Map,this.qa=Bf.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function EJ(t,e,n=!0){const r=aF(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await tF(r,e,n,!0),i}async function jJ(t,e){const n=aF(t);await tF(n,e,!0,!1)}async function tF(t,e,n,r){const i=await HZ(t.localStore,Va(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await CJ(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&q6(t.remoteStore,i),o}async function CJ(t,e,n,r,i){t.Ka=(f,h,p)=>async function(m,y,x,w){let _=y.view.ma(x);_.ns&&(_=await QD(m.localStore,y.query,!1).then(({documents:j})=>y.view.ma(j,_)));const A=w&&w.targetChanges.get(y.targetId),E=w&&w.targetMismatches.get(y.targetId)!=null,C=y.view.applyChanges(_,m.isPrimaryClient,A,E);return iI(m,y.targetId,C.wa),C.snapshot}(t,f,h,p);const s=await QD(t.localStore,e,!0),a=new wJ(e,s.Ts),o=a.ma(s.documents),c=hv.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=a.applyChanges(o,t.isPrimaryClient,c);iI(t,n,u.wa);const d=new _J(e,n,a);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function TJ(t,e,n){const r=jt(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!ew(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await nE(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&MC(r.remoteStore,i.targetId),iE(r,i.targetId)}).catch(cv)):(iE(r,i.targetId),await nE(r.localStore,i.targetId,!0))}async function NJ(t,e){const n=jt(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),MC(n.remoteStore,r.targetId))}async function PJ(t,e,n){const r=LJ(t);try{const i=await function(a,o){const c=jt(a),u=pr.now(),d=o.reduce((p,g)=>p.add(g.key),Rt());let f,h;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=Ro(),m=Rt();return c.cs.getEntries(p,d).next(y=>{g=y,g.forEach((x,w)=>{w.isValidDocument()||(m=m.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,g)).next(y=>{f=y;const x=[];for(const w of o){const _=YX(w,f.get(w.key).overlayedDocument);_!=null&&x.push(new ic(w.key,_,h6(_.value.mapValue),is.exists(!0)))}return c.mutationQueue.addMutationBatch(p,u,x,o)}).next(y=>{h=y;const x=y.applyToLocalDocumentSet(f,m);return c.documentOverlayCache.saveOverlays(p,y.batchId,x)})}).then(()=>({batchId:h.batchId,changes:A6(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,o,c){let u=a.Ba[a.currentUser.toKey()];u||(u=new Fn(Yt)),u=u.insert(o,c),a.Ba[a.currentUser.toKey()]=u}(r,i.batchId,n),await mv(r,i.changes),await lw(r.remoteStore)}catch(i){const s=FC(i,"Failed to persist write");n.reject(s)}}async function nF(t,e){const n=jt(t);try{const r=await BZ(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Na.get(s);a&&(on(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?on(a.va):i.removedDocuments.size>0&&(on(a.va),a.va=!1))}),await mv(n,r,e)}catch(r){await cv(r)}}function rI(t,e,n){const r=jt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,a)=>{const o=a.view.Z_(e);o.snapshot&&i.push(o.snapshot)}),function(a,o){const c=jt(a);c.onlineState=o;let u=!1;c.queries.forEach((d,f)=>{for(const h of f.j_)h.Z_(o)&&(u=!0)}),u&&VC(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function kJ(t,e,n){const r=jt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let a=new Fn(ut.comparator);a=a.insert(s,hi.newNoDocument(s,Et.min()));const o=Rt().add(s),c=new sw(Et.min(),new Map,new Fn(Yt),a,o);await nF(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),BC(r)}else await nE(r.localStore,e,!1).then(()=>iE(r,e,n)).catch(cv)}async function DJ(t,e){const n=jt(t),r=e.batch.batchId;try{const i=await VZ(n.localStore,e);iF(n,r,null),rF(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await mv(n,i)}catch(i){await cv(i)}}async function IJ(t,e,n){const r=jt(t);try{const i=await function(a,o){const c=jt(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,o).next(f=>(on(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,o)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);iF(r,e,n),rF(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await mv(r,i)}catch(i){await cv(i)}}function rF(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function iF(t,e,n){const r=jt(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function iE(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||sF(t,r)})}function sF(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(MC(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),BC(t))}function iI(t,e,n){for(const r of n)r instanceof J6?(t.La.addReference(r.key,e),OJ(t,r)):r instanceof eF?(it("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||sF(t,r.key)):wt()}function OJ(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(it("SyncEngine","New document in limbo: "+n),t.xa.add(r),BC(t))}function BC(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ut(Cn.fromString(e)),r=t.qa.next();t.Na.set(r,new SJ(n)),t.Oa=t.Oa.insert(n,r),q6(t.remoteStore,new jl(Va(CC(n.path)),r,"TargetPurposeLimboResolution",wC.oe))}}async function mv(t,e,n){const r=jt(t),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((o,c)=>{a.push(r.Ka(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);const f=OC.Wi(c.targetId,u);s.push(f)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(c,u){const d=jt(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ne.forEach(u,h=>Ne.forEach(h.$i,p=>d.persistence.referenceDelegate.addReference(f,h.targetId,p)).next(()=>Ne.forEach(h.Ui,p=>d.persistence.referenceDelegate.removeReference(f,h.targetId,p)))))}catch(f){if(!uv(f))throw f;it("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const h=f.targetId;if(!f.fromCache){const p=d.os.get(h),g=p.snapshotVersion,m=p.withLastLimboFreeSnapshotVersion(g);d.os=d.os.insert(h,m)}}}(r.localStore,s))}async function MJ(t,e){const n=jt(t);if(!n.currentUser.isEqual(e)){it("SyncEngine","User change. New user:",e.toKey());const r=await U6(n.localStore,e);n.currentUser=e,function(s,a){s.ka.forEach(o=>{o.forEach(c=>{c.reject(new Ze(Ce.CANCELLED,a))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await mv(n,r.hs)}}function RJ(t,e){const n=jt(t),r=n.Na.get(e);if(r&&r.va)return Rt().add(r.key);{let i=Rt();const s=n.Ma.get(e);if(!s)return i;for(const a of s){const o=n.Fa.get(a);i=i.unionWith(o.view.Va)}return i}}function aF(t){const e=jt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=nF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RJ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kJ.bind(null,e),e.Ca.d_=yJ.bind(null,e.eventManager),e.Ca.$a=bJ.bind(null,e.eventManager),e}function LJ(t){const e=jt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DJ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=IJ.bind(null,e),e}class nb{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=aw(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return FZ(this.persistence,new zZ,e.initialUser,this.serializer)}Ga(e){return new MZ(IC.Zr,this.serializer)}Wa(e){return new qZ}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nb.provider={build:()=>new nb};class sE{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>rI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=MJ.bind(null,this.syncEngine),await hJ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new mJ}()}createDatastore(e){const n=aw(e.databaseInfo.databaseId),r=function(s){return new XZ(s)}(e.databaseInfo);return function(s,a,o,c){return new eJ(s,a,o,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,o){return new nJ(r,i,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,n=>rI(this.syncEngine,n,0),function(){return ZD.D()?new ZD:new GZ}())}createSyncEngine(e,n){return function(i,s,a,o,c,u,d){const f=new AJ(i,s,a,o,c,u);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=jt(i);it("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await pv(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}sE.provider={build:()=>new sE};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zJ{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Mo("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $J{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ii.UNAUTHENTICATED,this.clientId=u6.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{it("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(it("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=FC(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function S_(t,e){t.asyncQueue.verifyOperationInProgress(),it("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await U6(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function sI(t,e){t.asyncQueue.verifyOperationInProgress();const n=await FJ(t);it("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>JD(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>JD(e.remoteStore,i)),t._onlineComponents=e}async function FJ(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){it("FirestoreClient","Using user provided OfflineComponentProvider");try{await S_(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Ce.FAILED_PRECONDITION||i.code===Ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ng("Error using user provided cache. Falling back to memory cache: "+n),await S_(t,new nb)}}else it("FirestoreClient","Using default OfflineComponentProvider"),await S_(t,new nb);return t._offlineComponents}async function oF(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(it("FirestoreClient","Using user provided OnlineComponentProvider"),await sI(t,t._uninitializedComponentsProvider._online)):(it("FirestoreClient","Using default OnlineComponentProvider"),await sI(t,new sE))),t._onlineComponents}function VJ(t){return oF(t).then(e=>e.syncEngine)}async function aI(t){const e=await oF(t),n=e.eventManager;return n.onListen=EJ.bind(null,e.syncEngine),n.onUnlisten=TJ.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=jJ.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=NJ.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lF(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cF(t,e,n){if(!n)throw new Ze(Ce.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function BJ(t,e,n,r){if(e===!0&&r===!0)throw new Ze(Ce.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function lI(t){if(!ut.isDocumentKey(t))throw new Ze(Ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function cI(t){if(ut.isDocumentKey(t))throw new Ze(Ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function cw(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":wt()}function yu(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ze(Ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cw(t);throw new Ze(Ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ze(Ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ze(Ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BJ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lF((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ze(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ze(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ze(Ce.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class UC{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uI({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ze(Ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ze(Ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uI(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new iX;switch(r.type){case"firstParty":return new oX(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ze(Ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=oI.get(n);r&&(it("ComponentProvider","Removing Datastore"),oI.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Lh(this.firestore,e,this._query)}}class Ui{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ui(this.firestore,e,this._key)}}class Bl extends Lh{constructor(e,n,r){super(e,n,CC(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ui(this.firestore,null,new ut(e))}withConverter(e){return new Bl(this.firestore,e,this._path)}}function WC(t,e,...n){if(t=ti(t),cF("collection","path",e),t instanceof UC){const r=Cn.fromString(e,...n);return cI(r),new Bl(t,null,r)}{if(!(t instanceof Ui||t instanceof Bl))throw new Ze(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Cn.fromString(e,...n));return cI(r),new Bl(t.firestore,null,r)}}function xr(t,e,...n){if(t=ti(t),arguments.length===1&&(e=u6.newId()),cF("doc","path",e),t instanceof UC){const r=Cn.fromString(e,...n);return lI(r),new Ui(t,null,new ut(r))}{if(!(t instanceof Ui||t instanceof Bl))throw new Ze(Ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Cn.fromString(e,...n));return lI(r),new Ui(t.firestore,t instanceof Bl?t.converter:null,new ut(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new H6(this,"async_queue_retry"),this.Vu=()=>{const r=__();r&&it("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=__();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=__();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new vu;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!uv(e))throw e;it("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(r);throw Mo("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=$C.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&wt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function fI(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Wf extends UC{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new dI,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dI(e),this._firestoreClient=void 0,await e}}}function UJ(t,e,n){n||(n="(default)");const r=R$(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(Zm(s,e))return i;throw new Ze(Ce.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Ze(Ce.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ze(Ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function HC(t){if(t._terminated)throw new Ze(Ce.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||WJ(t),t._firestoreClient}function WJ(t){var e,n,r;const i=t._freezeSettings(),s=function(o,c,u,d){return new xX(o,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,lF(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new $J(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(o){const c=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hf(ni.fromBase64String(e))}catch(n){throw new Ze(Ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Hf(ni.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ze(Ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ze(Ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ze(Ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Yt(this._lat,e._lat)||Yt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HJ=/^__.*__$/;class KJ{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ic(e,this.data,this.fieldMask,n,this.fieldTransforms):new fv(e,this.data,n,this.fieldTransforms)}}class uF{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ic(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function dF(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wt()}}class GC{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new GC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return rb(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(dF(this.Cu)&&HJ.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class qJ{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||aw(e)}Qu(e,n,r,i=!1){return new GC({Cu:e,methodName:n,qu:r,path:Qr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function YC(t){const e=t._freezeSettings(),n=aw(t._databaseId);return new qJ(t._databaseId,!!e.ignoreUndefinedProperties,n)}function fF(t,e,n,r,i,s={}){const a=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);XC("Data must be an object, but it was:",a,r);const o=hF(r,a);let c,u;if(s.merge)c=new ns(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const h=aE(e,f,n);if(!a.contains(h))throw new Ze(Ce.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);mF(d,h)||d.push(h)}c=new ns(d),u=a.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=a.fieldTransforms;return new KJ(new Mi(o),c,u)}class fw extends dw{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fw}}class QC extends dw{_toFieldTransform(e){return new HX(e.path,new og)}isEqual(e){return e instanceof QC}}function GJ(t,e,n,r){const i=t.Qu(1,e,n);XC("Data must be an object, but it was:",i,r);const s=[],a=Mi.empty();Zu(r,(c,u)=>{const d=ZC(e,c,n);u=ti(u);const f=i.Nu(d);if(u instanceof fw)s.push(d);else{const h=gv(u,f);h!=null&&(s.push(d),a.set(d,h))}});const o=new ns(s);return new uF(a,o,i.fieldTransforms)}function YJ(t,e,n,r,i,s){const a=t.Qu(1,e,n),o=[aE(e,r,n)],c=[i];if(s.length%2!=0)throw new Ze(Ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)o.push(aE(e,s[h])),c.push(s[h+1]);const u=[],d=Mi.empty();for(let h=o.length-1;h>=0;--h)if(!mF(u,o[h])){const p=o[h];let g=c[h];g=ti(g);const m=a.Nu(p);if(g instanceof fw)u.push(p);else{const y=gv(g,m);y!=null&&(u.push(p),d.set(p,y))}}const f=new ns(u);return new uF(d,f,a.fieldTransforms)}function QJ(t,e,n,r=!1){return gv(n,t.Qu(r?4:3,e))}function gv(t,e){if(pF(t=ti(t)))return XC("Unsupported field value:",e,t),hF(t,e);if(t instanceof dw)return function(r,i){if(!dF(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const o of r){let c=gv(o,i.Lu(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ti(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return BX(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=pr.fromDate(r);return{timestampValue:eb(i.serializer,s)}}if(r instanceof pr){const s=new pr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:eb(i.serializer,s)}}if(r instanceof KC)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Hf)return{bytesValue:R6(i.serializer,r._byteString)};if(r instanceof Ui){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:kC(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof qC)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw o.Bu("VectorValues must only contain numeric values.");return TC(o.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${cw(r)}`)}(t,e)}function hF(t,e){const n={};return d6(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zu(t,(r,i)=>{const s=gv(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function pF(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof pr||t instanceof KC||t instanceof Hf||t instanceof Ui||t instanceof dw||t instanceof qC)}function XC(t,e,n){if(!pF(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=cw(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function aE(t,e,n){if((e=ti(e))instanceof uw)return e._internalPath;if(typeof e=="string")return ZC(t,e);throw rb("Field path arguments must be of type string or ",t,!1,void 0,n)}const XJ=new RegExp("[~\\*/\\[\\]]");function ZC(t,e,n){if(e.search(XJ)>=0)throw rb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new uw(...e.split("."))._internalPath}catch{throw rb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function rb(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${r}`),a&&(c+=` in document ${i}`),c+=")"),new Ze(Ce.INVALID_ARGUMENT,o+t+c)}function mF(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ui(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ZJ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(JC("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ZJ extends gF{data(){return super.data()}}function JC(t,e){return typeof e=="string"?ZC(t,e):e instanceof uw?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JJ(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ze(Ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class eT{}class eee extends eT{}function tee(t,e,...n){let r=[];e instanceof eT&&r.push(e),r=r.concat(n),function(s){const a=s.filter(c=>c instanceof tT).length,o=s.filter(c=>c instanceof hw).length;if(a>1||a>0&&o>0)throw new Ze(Ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class hw extends eee{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new hw(e,n,r)}_apply(e){const n=this._parse(e);return vF(e._query,n),new Lh(e.firestore,e.converter,QA(e._query,n))}_parse(e){const n=YC(e.firestore);return function(s,a,o,c,u,d,f){let h;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Ze(Ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){pI(f,d);const p=[];for(const g of f)p.push(hI(c,s,g));h={arrayValue:{values:p}}}else h=hI(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||pI(f,d),h=QJ(o,a,f,d==="in"||d==="not-in");return hr.create(u,d,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function nee(t,e,n){const r=e,i=JC("where",t);return hw._create(i,r,n)}class tT extends eT{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new tT(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ca.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let a=i;const o=s.getFlattenedFilters();for(const c of o)vF(a,c),a=QA(a,c)}(e._query,n),new Lh(e.firestore,e.converter,QA(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function hI(t,e,n){if(typeof(n=ti(n))=="string"){if(n==="")throw new Ze(Ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!x6(e)&&n.indexOf("/")!==-1)throw new Ze(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Cn.fromString(n));if(!ut.isDocumentKey(r))throw new Ze(Ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ID(t,new ut(r))}if(n instanceof Ui)return ID(t,n._key);throw new Ze(Ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cw(n)}.`)}function pI(t,e){if(!Array.isArray(t)||t.length===0)throw new Ze(Ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vF(t,e){const n=function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Ze(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ze(Ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ree{convertValue(e,n="none"){switch(Du(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ku(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw wt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Zu(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>tr(a.doubleValue));return new qC(s)}convertGeoPoint(e){return new KC(tr(e.latitude),tr(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=SC(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ig(e));default:return null}}convertTimestamp(e){const n=Gl(e);return new pr(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Cn.fromString(e);on(B6(r));const i=new sg(r.get(1),r.get(3)),s=new ut(r.popFirst(5));return i.isEqual(n)||Mo(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yF(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bF extends gF{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new c0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(JC("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class c0 extends bF{data(e={}){return super.data(e)}}class iee{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Xp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new c0(this._firestore,this._userDataWriter,r.key,r,new Xp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ze(Ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(o=>{const c=new c0(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Xp(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const c=new c0(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Xp(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return o.type!==0&&(u=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),d=a.indexOf(o.doc.key)),{type:see(o.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function see(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wt()}}class xF extends ree{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hf(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ui(this.firestore,null,n)}}function aee(t,e,n){t=yu(t,Ui);const r=yu(t.firestore,Wf),i=yF(t.converter,e,n);return nT(r,[fF(YC(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,is.none())])}function Mc(t){return nT(yu(t.firestore,Wf),[new iw(t._key,is.none())])}function oee(t,...e){var n,r,i;t=ti(t);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||fI(e[a])||(s=e[a],a++);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(fI(e[a])){const f=e[a];e[a]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[a+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[a+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,u,d;if(t instanceof Ui)u=yu(t.firestore,Wf),d=CC(t._key.path),c={next:f=>{e[a]&&e[a](lee(u,t,f))},error:e[a+1],complete:e[a+2]};else{const f=yu(t,Lh);u=yu(f.firestore,Wf),d=f._query;const h=new xF(u);c={next:p=>{e[a]&&e[a](new iee(u,h,f,p))},error:e[a+1],complete:e[a+2]},JJ(t._query)}return function(h,p,g,m){const y=new zJ(m),x=new xJ(p,y,g);return h.asyncQueue.enqueueAndForget(async()=>gJ(await aI(h),x)),()=>{y.Za(),h.asyncQueue.enqueueAndForget(async()=>vJ(await aI(h),x))}}(HC(u),d,o,c)}function nT(t,e){return function(r,i){const s=new vu;return r.asyncQueue.enqueueAndForget(async()=>PJ(await VJ(r),i,s)),s.promise}(HC(t),e)}function lee(t,e,n){const r=n.docs.get(e._key),i=new xF(t);return new bF(t,i,e._key,r,new Xp(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cee{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=YC(e)}set(e,n,r){this._verifyNotCommitted();const i=A_(e,this._firestore),s=yF(i.converter,n,r),a=fF(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,is.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=A_(e,this._firestore);let a;return a=typeof(n=ti(n))=="string"||n instanceof uw?YJ(this._dataReader,"WriteBatch.update",s._key,n,r,i):GJ(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(a.toMutation(s._key,is.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=A_(e,this._firestore);return this._mutations=this._mutations.concat(new iw(n._key,is.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ze(Ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function A_(t,e){if((t=ti(t)).firestore!==e)throw new Ze(Ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function mI(){return new QC("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(t){return HC(t=yu(t,Wf)),new cee(t,e=>nT(t,e))}(function(e,n=!0){(function(i){Oh=i})(Xx),Lf(new Nu("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),o=new Wf(new sX(r.getProvider("auth-internal")),new cX(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Ze(Ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sg(u.options.projectId,d)}(a,i),a);return s=Object.assign({useFetchStreams:n},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Vl(TD,"4.7.3",e),Vl(TD,"4.7.3","esm2017")})();const uee={apiKey:"AIzaSyCq3MZURc1tNUbpK7BDzKZKQoh8C3twzmA",authDomain:"lactokeeper.firebaseapp.com",projectId:"lactokeeper",storageBucket:"https://www.google.com/search?q=lactokeeper.appspot.com",messagingSenderId:"437430613715",appId:"1:437430613715:web:b4e56c7a0698c719ae8626"},wF=LY(uee),Kf=PQ(wF,{persistence:GQ}),pn=UJ(wF,{}),_F=N.createContext({currentUser:null,isLoading:!0}),SF=()=>N.useContext(_F),dee=({children:t})=>{const[e,n]=N.useState(null),[r,i]=N.useState(!0);N.useEffect(()=>HQ(Kf,o=>{n(o),setTimeout(()=>i(!1),200)}),[]);const s={currentUser:e,isLoading:r};return l.jsx(_F.Provider,{value:s,children:t})};var AF={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Bd,function(){var n=function(b,S){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,O){k.__proto__=O}||function(k,O){for(var z in O)Object.prototype.hasOwnProperty.call(O,z)&&(k[z]=O[z])})(b,S)},r=function(){return(r=Object.assign||function(b){for(var S,k=1,O=arguments.length;k<O;k++)for(var z in S=arguments[k])Object.prototype.hasOwnProperty.call(S,z)&&(b[z]=S[z]);return b}).apply(this,arguments)};function i(b,S,k){for(var O,z=0,V=S.length;z<V;z++)!O&&z in S||((O=O||Array.prototype.slice.call(S,0,z))[z]=S[z]);return b.concat(O||Array.prototype.slice.call(S))}var s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Bd,a=Object.keys,o=Array.isArray;function c(b,S){return typeof S!="object"||a(S).forEach(function(k){b[k]=S[k]}),b}typeof Promise>"u"||s.Promise||(s.Promise=Promise);var u=Object.getPrototypeOf,d={}.hasOwnProperty;function f(b,S){return d.call(b,S)}function h(b,S){typeof S=="function"&&(S=S(u(b))),(typeof Reflect>"u"?a:Reflect.ownKeys)(S).forEach(function(k){g(b,k,S[k])})}var p=Object.defineProperty;function g(b,S,k,O){p(b,S,c(k&&f(k,"get")&&typeof k.get=="function"?{get:k.get,set:k.set,configurable:!0}:{value:k,configurable:!0,writable:!0},O))}function m(b){return{from:function(S){return b.prototype=Object.create(S.prototype),g(b.prototype,"constructor",b),{extend:h.bind(null,b.prototype)}}}}var y=Object.getOwnPropertyDescriptor,x=[].slice;function w(b,S,k){return x.call(b,S,k)}function _(b,S){return S(b)}function A(b){if(!b)throw new Error("Assertion Failed")}function E(b){s.setImmediate?setImmediate(b):setTimeout(b,0)}function C(b,S){if(typeof S=="string"&&f(b,S))return b[S];if(!S)return b;if(typeof S!="string"){for(var k=[],O=0,z=S.length;O<z;++O){var V=C(b,S[O]);k.push(V)}return k}var K=S.indexOf(".");if(K!==-1){var G=b[S.substr(0,K)];return G==null?void 0:C(G,S.substr(K+1))}}function j(b,S,k){if(b&&S!==void 0&&!("isFrozen"in Object&&Object.isFrozen(b)))if(typeof S!="string"&&"length"in S){A(typeof k!="string"&&"length"in k);for(var O=0,z=S.length;O<z;++O)j(b,S[O],k[O])}else{var V,K,G=S.indexOf(".");G!==-1?(V=S.substr(0,G),(K=S.substr(G+1))===""?k===void 0?o(b)&&!isNaN(parseInt(V))?b.splice(V,1):delete b[V]:b[V]=k:j(G=!(G=b[V])||!f(b,V)?b[V]={}:G,K,k)):k===void 0?o(b)&&!isNaN(parseInt(S))?b.splice(S,1):delete b[S]:b[S]=k}}function T(b){var S,k={};for(S in b)f(b,S)&&(k[S]=b[S]);return k}var P=[].concat;function I(b){return P.apply([],b)}var qe="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(I([8,16,32,64].map(function(b){return["Int","Uint","Float"].map(function(S){return S+b+"Array"})}))).filter(function(b){return s[b]}),M=new Set(qe.map(function(b){return s[b]})),F=null;function R(b){return F=new WeakMap,b=function S(k){if(!k||typeof k!="object")return k;var O=F.get(k);if(O)return O;if(o(k)){O=[],F.set(k,O);for(var z=0,V=k.length;z<V;++z)O.push(S(k[z]))}else if(M.has(k.constructor))O=k;else{var K,G=u(k);for(K in O=G===Object.prototype?{}:Object.create(G),F.set(k,O),k)f(k,K)&&(O[K]=S(k[K]))}return O}(b),F=null,b}var H={}.toString;function X(b){return H.call(b).slice(8,-1)}var W=typeof Symbol<"u"?Symbol.iterator:"@@iterator",U=typeof W=="symbol"?function(b){var S;return b!=null&&(S=b[W])&&S.apply(b)}:function(){return null};function $(b,S){return S=b.indexOf(S),0<=S&&b.splice(S,1),0<=S}var Y={};function Q(b){var S,k,O,z;if(arguments.length===1){if(o(b))return b.slice();if(this===Y&&typeof b=="string")return[b];if(z=U(b)){for(k=[];!(O=z.next()).done;)k.push(O.value);return k}if(b==null)return[b];if(typeof(S=b.length)!="number")return[b];for(k=new Array(S);S--;)k[S]=b[S];return k}for(S=arguments.length,k=new Array(S);S--;)k[S]=arguments[S];return k}var ce=typeof Symbol<"u"?function(b){return b[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Pe=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ws=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Pe),ie={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function oe(b,S){this.name=b,this.message=S}function ve(b,S){return b+". Errors: "+Object.keys(S).map(function(k){return S[k].toString()}).filter(function(k,O,z){return z.indexOf(k)===O}).join(`
`)}function je(b,S,k,O){this.failures=S,this.failedKeys=O,this.successCount=k,this.message=ve(b,S)}function Se(b,S){this.name="BulkError",this.failures=Object.keys(S).map(function(k){return S[k]}),this.failuresByPos=S,this.message=ve(b,this.failures)}m(oe).from(Error).extend({toString:function(){return this.name+": "+this.message}}),m(je).from(oe),m(Se).from(oe);var Me=ws.reduce(function(b,S){return b[S]=S+"Error",b},{}),Qe=oe,me=ws.reduce(function(b,S){var k=S+"Error";function O(z,V){this.name=k,z?typeof z=="string"?(this.message="".concat(z).concat(V?`
 `+V:""),this.inner=V||null):typeof z=="object"&&(this.message="".concat(z.name," ").concat(z.message),this.inner=z):(this.message=ie[S]||k,this.inner=null)}return m(O).from(Qe),b[S]=O,b},{});me.Syntax=SyntaxError,me.Type=TypeError,me.Range=RangeError;var Ye=Pe.reduce(function(b,S){return b[S+"Error"]=me[S],b},{}),Xe=ws.reduce(function(b,S){return["Syntax","Type","Range"].indexOf(S)===-1&&(b[S+"Error"]=me[S]),b},{});function te(){}function Te(b){return b}function ot(b,S){return b==null||b===Te?S:function(k){return S(b(k))}}function Ct(b,S){return function(){b.apply(this,arguments),S.apply(this,arguments)}}function nt(b,S){return b===te?S:function(){var k=b.apply(this,arguments);k!==void 0&&(arguments[0]=k);var O=this.onsuccess,z=this.onerror;this.onsuccess=null,this.onerror=null;var V=S.apply(this,arguments);return O&&(this.onsuccess=this.onsuccess?Ct(O,this.onsuccess):O),z&&(this.onerror=this.onerror?Ct(z,this.onerror):z),V!==void 0?V:k}}function st(b,S){return b===te?S:function(){b.apply(this,arguments);var k=this.onsuccess,O=this.onerror;this.onsuccess=this.onerror=null,S.apply(this,arguments),k&&(this.onsuccess=this.onsuccess?Ct(k,this.onsuccess):k),O&&(this.onerror=this.onerror?Ct(O,this.onerror):O)}}function Xt(b,S){return b===te?S:function(k){var O=b.apply(this,arguments);c(k,O);var z=this.onsuccess,V=this.onerror;return this.onsuccess=null,this.onerror=null,k=S.apply(this,arguments),z&&(this.onsuccess=this.onsuccess?Ct(z,this.onsuccess):z),V&&(this.onerror=this.onerror?Ct(V,this.onerror):V),O===void 0?k===void 0?void 0:k:c(O,k)}}function Yn(b,S){return b===te?S:function(){return S.apply(this,arguments)!==!1&&b.apply(this,arguments)}}function Mn(b,S){return b===te?S:function(){var k=b.apply(this,arguments);if(k&&typeof k.then=="function"){for(var O=this,z=arguments.length,V=new Array(z);z--;)V[z]=arguments[z];return k.then(function(){return S.apply(O,V)})}return S.apply(this,arguments)}}Xe.ModifyError=je,Xe.DexieError=oe,Xe.BulkError=Se;var Ft=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function or(b){Ft=b}var He={},Zt=100,qe=typeof Promise>"u"?[]:function(){var b=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[b,u(b),b];var S=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[S,u(S),b]}(),Pe=qe[0],ws=qe[1],qe=qe[2],ws=ws&&ws.then,yt=Pe&&Pe.constructor,Be=!!qe,bt=function(b,S){vi.push([b,S]),Qn&&(queueMicrotask(qt),Qn=!1)},ft=!0,Qn=!0,Sn=[],ys=[],Fs=Te,$r={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:te,pgp:!1,env:{},finalize:te},Je=$r,vi=[],yi=0,Vs=[];function Ue(b){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var S=this._PSD=Je;if(typeof b!="function"){if(b!==He)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&pe(this,this._value))}this._state=null,this._value=null,++S.ref,function k(O,z){try{z(function(V){if(O._state===null){if(V===O)throw new TypeError("A promise cannot be resolved with itself.");var K=O._lib&&dt();V&&typeof V.then=="function"?k(O,function(G,J){V instanceof Ue?V._then(G,J):V.then(G,J)}):(O._state=!0,O._value=V,ye(O)),K&&gn()}},pe.bind(null,O))}catch(V){pe(O,V)}}(this,b)}var qi={get:function(){var b=Je,S=Qo;function k(O,z){var V=this,K=!b.global&&(b!==Je||S!==Qo),G=K&&!bs(),J=new Ue(function(ne,ae){Re(V,new re(md(O,b,K,G),md(z,b,K,G),ne,ae,b))});return this._consoleTask&&(J._consoleTask=this._consoleTask),J}return k.prototype=He,k},set:function(b){g(this,"then",b&&b.prototype===He?qi:{get:function(){return b},set:qi.set})}};function re(b,S,k,O,z){this.onFulfilled=typeof b=="function"?b:null,this.onRejected=typeof S=="function"?S:null,this.resolve=k,this.reject=O,this.psd=z}function pe(b,S){var k,O;ys.push(S),b._state===null&&(k=b._lib&&dt(),S=Fs(S),b._state=!1,b._value=S,O=b,Sn.some(function(z){return z._value===O._value})||Sn.push(O),ye(b),k&&gn())}function ye(b){var S=b._listeners;b._listeners=[];for(var k=0,O=S.length;k<O;++k)Re(b,S[k]);var z=b._PSD;--z.ref||z.finalize(),yi===0&&(++yi,bt(function(){--yi==0&&ct()},[]))}function Re(b,S){if(b._state!==null){var k=b._state?S.onFulfilled:S.onRejected;if(k===null)return(b._state?S.resolve:S.reject)(b._value);++S.psd.ref,++yi,bt(Ve,[k,b,S])}else b._listeners.push(S)}function Ve(b,S,k){try{var O,z=S._value;!S._state&&ys.length&&(ys=[]),O=Ft&&S._consoleTask?S._consoleTask.run(function(){return b(z)}):b(z),S._state||ys.indexOf(z)!==-1||function(V){for(var K=Sn.length;K;)if(Sn[--K]._value===V._value)return Sn.splice(K,1)}(S),k.resolve(O)}catch(V){k.reject(V)}finally{--yi==0&&ct(),--k.psd.ref||k.psd.finalize()}}function qt(){Us($r,function(){dt()&&gn()})}function dt(){var b=ft;return Qn=ft=!1,b}function gn(){var b,S,k;do for(;0<vi.length;)for(b=vi,vi=[],k=b.length,S=0;S<k;++S){var O=b[S];O[0].apply(null,O[1])}while(0<vi.length);Qn=ft=!0}function ct(){var b=Sn;Sn=[],b.forEach(function(O){O._PSD.onunhandled.call(null,O._value,O)});for(var S=Vs.slice(0),k=S.length;k;)S[--k]()}function Xn(b){return new Ue(He,!1,b)}function kt(b,S){var k=Je;return function(){var O=dt(),z=Je;try{return Bs(k,!0),b.apply(this,arguments)}catch(V){S&&S(V)}finally{Bs(z,!1),O&&gn()}}}h(Ue.prototype,{then:qi,_then:function(b,S){Re(this,new re(null,null,b,S,Je))},catch:function(b){if(arguments.length===1)return this.then(null,b);var S=b,k=arguments[1];return typeof S=="function"?this.then(null,function(O){return(O instanceof S?k:Xn)(O)}):this.then(null,function(O){return(O&&O.name===S?k:Xn)(O)})},finally:function(b){return this.then(function(S){return Ue.resolve(b()).then(function(){return S})},function(S){return Ue.resolve(b()).then(function(){return Xn(S)})})},timeout:function(b,S){var k=this;return b<1/0?new Ue(function(O,z){var V=setTimeout(function(){return z(new me.Timeout(S))},b);k.then(O,z).finally(clearTimeout.bind(null,V))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&g(Ue.prototype,Symbol.toStringTag,"Dexie.Promise"),$r.env=ap(),h(Ue,{all:function(){var b=Q.apply(null,arguments).map(no);return new Ue(function(S,k){b.length===0&&S([]);var O=b.length;b.forEach(function(z,V){return Ue.resolve(z).then(function(K){b[V]=K,--O||S(b)},k)})})},resolve:function(b){return b instanceof Ue?b:b&&typeof b.then=="function"?new Ue(function(S,k){b.then(S,k)}):new Ue(He,!0,b)},reject:Xn,race:function(){var b=Q.apply(null,arguments).map(no);return new Ue(function(S,k){b.map(function(O){return Ue.resolve(O).then(S,k)})})},PSD:{get:function(){return Je},set:function(b){return Je=b}},totalEchoes:{get:function(){return Qo}},newPSD:Gi,usePSD:Us,scheduler:{get:function(){return bt},set:function(b){bt=b}},rejectionMapper:{get:function(){return Fs},set:function(b){Fs=b}},follow:function(b,S){return new Ue(function(k,O){return Gi(function(z,V){var K=Je;K.unhandleds=[],K.onunhandled=V,K.finalize=Ct(function(){var G,J=this;G=function(){J.unhandleds.length===0?z():V(J.unhandleds[0])},Vs.push(function ne(){G(),Vs.splice(Vs.indexOf(ne),1)}),++yi,bt(function(){--yi==0&&ct()},[])},K.finalize),b()},S,k,O)})}}),yt&&(yt.allSettled&&g(Ue,"allSettled",function(){var b=Q.apply(null,arguments).map(no);return new Ue(function(S){b.length===0&&S([]);var k=b.length,O=new Array(k);b.forEach(function(z,V){return Ue.resolve(z).then(function(K){return O[V]={status:"fulfilled",value:K}},function(K){return O[V]={status:"rejected",reason:K}}).then(function(){return--k||S(O)})})})}),yt.any&&typeof AggregateError<"u"&&g(Ue,"any",function(){var b=Q.apply(null,arguments).map(no);return new Ue(function(S,k){b.length===0&&k(new AggregateError([]));var O=b.length,z=new Array(O);b.forEach(function(V,K){return Ue.resolve(V).then(function(G){return S(G)},function(G){z[K]=G,--O||k(new AggregateError(z))})})})}),yt.withResolvers&&(Ue.withResolvers=yt.withResolvers));var nn={awaits:0,echoes:0,id:0},Cr=0,Ni=[],Fr=0,Qo=0,sp=0;function Gi(b,S,k,O){var z=Je,V=Object.create(z);return V.parent=z,V.ref=0,V.global=!1,V.id=++sp,$r.env,V.env=Be?{Promise:Ue,PromiseProp:{value:Ue,configurable:!0,writable:!0},all:Ue.all,race:Ue.race,allSettled:Ue.allSettled,any:Ue.any,resolve:Ue.resolve,reject:Ue.reject}:{},S&&c(V,S),++z.ref,V.finalize=function(){--this.parent.ref||this.parent.finalize()},O=Us(V,b,k,O),V.ref===0&&V.finalize(),O}function to(){return nn.id||(nn.id=++Cr),++nn.awaits,nn.echoes+=Zt,nn.id}function bs(){return!!nn.awaits&&(--nn.awaits==0&&(nn.id=0),nn.echoes=nn.awaits*Zt,!0)}function no(b){return nn.echoes&&b&&b.constructor===yt?(to(),b.then(function(S){return bs(),S},function(S){return bs(),Nn(S)})):b}function _a(){var b=Ni[Ni.length-1];Ni.pop(),Bs(b,!1)}function Bs(b,S){var k,O=Je;(S?!nn.echoes||Fr++&&b===Je:!Fr||--Fr&&b===Je)||queueMicrotask(S?(function(z){++Qo,nn.echoes&&--nn.echoes!=0||(nn.echoes=nn.awaits=nn.id=0),Ni.push(Je),Bs(z,!0)}).bind(null,b):_a),b!==Je&&(Je=b,O===$r&&($r.env=ap()),Be&&(k=$r.env.Promise,S=b.env,(O.global||b.global)&&(Object.defineProperty(s,"Promise",S.PromiseProp),k.all=S.all,k.race=S.race,k.resolve=S.resolve,k.reject=S.reject,S.allSettled&&(k.allSettled=S.allSettled),S.any&&(k.any=S.any))))}function ap(){var b=s.Promise;return Be?{Promise:b,PromiseProp:Object.getOwnPropertyDescriptor(s,"Promise"),all:b.all,race:b.race,allSettled:b.allSettled,any:b.any,resolve:b.resolve,reject:b.reject}:{}}function Us(b,S,k,O,z){var V=Je;try{return Bs(b,!0),S(k,O,z)}finally{Bs(V,!1)}}function md(b,S,k,O){return typeof b!="function"?b:function(){var z=Je;k&&to(),Bs(S,!0);try{return b.apply(this,arguments)}finally{Bs(z,!1),O&&queueMicrotask(bs)}}}function gd(b){Promise===yt&&nn.echoes===0?Fr===0?b():enqueueNativeMicroTask(b):setTimeout(b,0)}(""+ws).indexOf("[native code]")===-1&&(to=bs=te);var Nn=Ue.reject,ro="￿",Pi="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",op="String expected.",Sa=[],Aa="__dbnames",Ws="readonly",vc="readwrite";function io(b,S){return b?S?function(){return b.apply(this,arguments)&&S.apply(this,arguments)}:b:S}var lp={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function yc(b){return typeof b!="string"||/\./.test(b)?function(S){return S}:function(S){return S[b]===void 0&&b in S&&delete(S=R(S))[b],S}}function cp(){throw me.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Pt(b,S){try{var k=vd(b),O=vd(S);if(k!==O)return k==="Array"?1:O==="Array"?-1:k==="binary"?1:O==="binary"?-1:k==="string"?1:O==="string"?-1:k==="Date"?1:O!=="Date"?NaN:-1;switch(k){case"number":case"Date":case"string":return S<b?1:b<S?-1:0;case"binary":return function(z,V){for(var K=z.length,G=V.length,J=K<G?K:G,ne=0;ne<J;++ne)if(z[ne]!==V[ne])return z[ne]<V[ne]?-1:1;return K===G?0:K<G?-1:1}(up(b),up(S));case"Array":return function(z,V){for(var K=z.length,G=V.length,J=K<G?K:G,ne=0;ne<J;++ne){var ae=Pt(z[ne],V[ne]);if(ae!==0)return ae}return K===G?0:K<G?-1:1}(b,S)}}catch{}return NaN}function vd(b){var S=typeof b;return S!="object"?S:ArrayBuffer.isView(b)?"binary":(b=X(b),b==="ArrayBuffer"?"binary":b)}function up(b){return b instanceof Uint8Array?b:ArrayBuffer.isView(b)?new Uint8Array(b.buffer,b.byteOffset,b.byteLength):new Uint8Array(b)}function bc(b,S,k){var O=b.schema.yProps;return O?(S&&0<k.numFailures&&(S=S.filter(function(z,V){return!k.failures[V]})),Promise.all(O.map(function(z){return z=z.updatesTable,S?b.db.table(z).where("k").anyOf(S).delete():b.db.table(z).clear()})).then(function(){return k})):k}var Vv=(hn.prototype._trans=function(b,S,k){var O=this._tx||Je.trans,z=this.name,V=Ft&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(b==="readonly"?"read":"write"," ").concat(this.name));function K(ne,ae,Z){if(!Z.schema[z])throw new me.NotFound("Table "+z+" not part of transaction");return S(Z.idbtrans,Z)}var G=dt();try{var J=O&&O.db._novip===this.db._novip?O===Je.trans?O._promise(b,K,k):Gi(function(){return O._promise(b,K,k)},{trans:O,transless:Je.transless||Je}):function ne(ae,Z,de,ee){if(ae.idbdb&&(ae._state.openComplete||Je.letThrough||ae._vip)){var se=ae._createTransaction(Z,de,ae._dbSchema);try{se.create(),ae._state.PR1398_maxLoop=3}catch(ue){return ue.name===Me.InvalidState&&ae.isOpen()&&0<--ae._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ae.close({disableAutoOpen:!1}),ae.open().then(function(){return ne(ae,Z,de,ee)})):Nn(ue)}return se._promise(Z,function(ue,le){return Gi(function(){return Je.trans=se,ee(ue,le,se)})}).then(function(ue){if(Z==="readwrite")try{se.idbtrans.commit()}catch{}return Z==="readonly"?ue:se._completion.then(function(){return ue})})}if(ae._state.openComplete)return Nn(new me.DatabaseClosed(ae._state.dbOpenError));if(!ae._state.isBeingOpened){if(!ae._state.autoOpen)return Nn(new me.DatabaseClosed);ae.open().catch(te)}return ae._state.dbReadyPromise.then(function(){return ne(ae,Z,de,ee)})}(this.db,b,[this.name],K);return V&&(J._consoleTask=V,J=J.catch(function(ne){return console.trace(ne),Nn(ne)})),J}finally{G&&gn()}},hn.prototype.get=function(b,S){var k=this;return b&&b.constructor===Object?this.where(b).first(S):b==null?Nn(new me.Type("Invalid argument to Table.get()")):this._trans("readonly",function(O){return k.core.get({trans:O,key:b}).then(function(z){return k.hook.reading.fire(z)})}).then(S)},hn.prototype.where=function(b){if(typeof b=="string")return new this.db.WhereClause(this,b);if(o(b))return new this.db.WhereClause(this,"[".concat(b.join("+"),"]"));var S=a(b);if(S.length===1)return this.where(S[0]).equals(b[S[0]]);var k=this.schema.indexes.concat(this.schema.primKey).filter(function(G){if(G.compound&&S.every(function(ne){return 0<=G.keyPath.indexOf(ne)})){for(var J=0;J<S.length;++J)if(S.indexOf(G.keyPath[J])===-1)return!1;return!0}return!1}).sort(function(G,J){return G.keyPath.length-J.keyPath.length})[0];if(k&&this.db._maxKey!==ro){var V=k.keyPath.slice(0,S.length);return this.where(V).equals(V.map(function(J){return b[J]}))}!k&&Ft&&console.warn("The query ".concat(JSON.stringify(b)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(S.join("+"),"]"));var O=this.schema.idxByName;function z(G,J){return Pt(G,J)===0}var K=S.reduce(function(Z,J){var ne=Z[0],ae=Z[1],Z=O[J],de=b[J];return[ne||Z,ne||!Z?io(ae,Z&&Z.multi?function(ee){return ee=C(ee,J),o(ee)&&ee.some(function(se){return z(de,se)})}:function(ee){return z(de,C(ee,J))}):ae]},[null,null]),V=K[0],K=K[1];return V?this.where(V.name).equals(b[V.keyPath]).filter(K):k?this.filter(K):this.where(S).equals("")},hn.prototype.filter=function(b){return this.toCollection().and(b)},hn.prototype.count=function(b){return this.toCollection().count(b)},hn.prototype.offset=function(b){return this.toCollection().offset(b)},hn.prototype.limit=function(b){return this.toCollection().limit(b)},hn.prototype.each=function(b){return this.toCollection().each(b)},hn.prototype.toArray=function(b){return this.toCollection().toArray(b)},hn.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},hn.prototype.orderBy=function(b){return new this.db.Collection(new this.db.WhereClause(this,o(b)?"[".concat(b.join("+"),"]"):b))},hn.prototype.reverse=function(){return this.toCollection().reverse()},hn.prototype.mapToClass=function(b){var S,k=this.db,O=this.name;function z(){return S!==null&&S.apply(this,arguments)||this}(this.schema.mappedClass=b).prototype instanceof cp&&(function(J,ne){if(typeof ne!="function"&&ne!==null)throw new TypeError("Class extends value "+String(ne)+" is not a constructor or null");function ae(){this.constructor=J}n(J,ne),J.prototype=ne===null?Object.create(ne):(ae.prototype=ne.prototype,new ae)}(z,S=b),Object.defineProperty(z.prototype,"db",{get:function(){return k},enumerable:!1,configurable:!0}),z.prototype.table=function(){return O},b=z);for(var V=new Set,K=b.prototype;K;K=u(K))Object.getOwnPropertyNames(K).forEach(function(J){return V.add(J)});function G(J){if(!J)return J;var ne,ae=Object.create(b.prototype);for(ne in J)if(!V.has(ne))try{ae[ne]=J[ne]}catch{}return ae}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=G,this.hook("reading",G),b},hn.prototype.defineClass=function(){return this.mapToClass(function(b){c(this,b)})},hn.prototype.add=function(b,S){var k=this,O=this.schema.primKey,z=O.auto,V=O.keyPath,K=b;return V&&z&&(K=yc(V)(b)),this._trans("readwrite",function(G){return k.core.mutate({trans:G,type:"add",keys:S!=null?[S]:null,values:[K]})}).then(function(G){return G.numFailures?Ue.reject(G.failures[0]):G.lastResult}).then(function(G){if(V)try{j(b,V,G)}catch{}return G})},hn.prototype.update=function(b,S){return typeof b!="object"||o(b)?this.where(":id").equals(b).modify(S):(b=C(b,this.schema.primKey.keyPath),b===void 0?Nn(new me.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(b).modify(S))},hn.prototype.put=function(b,S){var k=this,O=this.schema.primKey,z=O.auto,V=O.keyPath,K=b;return V&&z&&(K=yc(V)(b)),this._trans("readwrite",function(G){return k.core.mutate({trans:G,type:"put",values:[K],keys:S!=null?[S]:null})}).then(function(G){return G.numFailures?Ue.reject(G.failures[0]):G.lastResult}).then(function(G){if(V)try{j(b,V,G)}catch{}return G})},hn.prototype.delete=function(b){var S=this;return this._trans("readwrite",function(k){return S.core.mutate({trans:k,type:"delete",keys:[b]}).then(function(O){return bc(S,[b],O)}).then(function(O){return O.numFailures?Ue.reject(O.failures[0]):void 0})})},hn.prototype.clear=function(){var b=this;return this._trans("readwrite",function(S){return b.core.mutate({trans:S,type:"deleteRange",range:lp}).then(function(k){return bc(b,null,k)})}).then(function(S){return S.numFailures?Ue.reject(S.failures[0]):void 0})},hn.prototype.bulkGet=function(b){var S=this;return this._trans("readonly",function(k){return S.core.getMany({keys:b,trans:k}).then(function(O){return O.map(function(z){return S.hook.reading.fire(z)})})})},hn.prototype.bulkAdd=function(b,S,k){var O=this,z=Array.isArray(S)?S:void 0,V=(k=k||(z?void 0:S))?k.allKeys:void 0;return this._trans("readwrite",function(K){var ne=O.schema.primKey,G=ne.auto,ne=ne.keyPath;if(ne&&z)throw new me.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(z&&z.length!==b.length)throw new me.InvalidArgument("Arguments objects and keys must have the same length");var J=b.length,ne=ne&&G?b.map(yc(ne)):b;return O.core.mutate({trans:K,type:"add",keys:z,values:ne,wantResults:V}).then(function(se){var Z=se.numFailures,de=se.results,ee=se.lastResult,se=se.failures;if(Z===0)return V?de:ee;throw new Se("".concat(O.name,".bulkAdd(): ").concat(Z," of ").concat(J," operations failed"),se)})})},hn.prototype.bulkPut=function(b,S,k){var O=this,z=Array.isArray(S)?S:void 0,V=(k=k||(z?void 0:S))?k.allKeys:void 0;return this._trans("readwrite",function(K){var ne=O.schema.primKey,G=ne.auto,ne=ne.keyPath;if(ne&&z)throw new me.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(z&&z.length!==b.length)throw new me.InvalidArgument("Arguments objects and keys must have the same length");var J=b.length,ne=ne&&G?b.map(yc(ne)):b;return O.core.mutate({trans:K,type:"put",keys:z,values:ne,wantResults:V}).then(function(se){var Z=se.numFailures,de=se.results,ee=se.lastResult,se=se.failures;if(Z===0)return V?de:ee;throw new Se("".concat(O.name,".bulkPut(): ").concat(Z," of ").concat(J," operations failed"),se)})})},hn.prototype.bulkUpdate=function(b){var S=this,k=this.core,O=b.map(function(K){return K.key}),z=b.map(function(K){return K.changes}),V=[];return this._trans("readwrite",function(K){return k.getMany({trans:K,keys:O,cache:"clone"}).then(function(G){var J=[],ne=[];b.forEach(function(Z,de){var ee=Z.key,se=Z.changes,ue=G[de];if(ue){for(var le=0,fe=Object.keys(se);le<fe.length;le++){var be=fe[le],_e=se[be];if(be===S.schema.primKey.keyPath){if(Pt(_e,ee)!==0)throw new me.Constraint("Cannot update primary key in bulkUpdate()")}else j(ue,be,_e)}V.push(de),J.push(ee),ne.push(ue)}});var ae=J.length;return k.mutate({trans:K,type:"put",keys:J,values:ne,updates:{keys:O,changeSpecs:z}}).then(function(Z){var de=Z.numFailures,ee=Z.failures;if(de===0)return ae;for(var se=0,ue=Object.keys(ee);se<ue.length;se++){var le,fe=ue[se],be=V[Number(fe)];be!=null&&(le=ee[fe],delete ee[fe],ee[be]=le)}throw new Se("".concat(S.name,".bulkUpdate(): ").concat(de," of ").concat(ae," operations failed"),ee)})})})},hn.prototype.bulkDelete=function(b){var S=this,k=b.length;return this._trans("readwrite",function(O){return S.core.mutate({trans:O,type:"delete",keys:b}).then(function(z){return bc(S,b,z)})}).then(function(K){var z=K.numFailures,V=K.lastResult,K=K.failures;if(z===0)return V;throw new Se("".concat(S.name,".bulkDelete(): ").concat(z," of ").concat(k," operations failed"),K)})},hn);function hn(){}function Xo(b){function S(K,G){if(G){for(var J=arguments.length,ne=new Array(J-1);--J;)ne[J-1]=arguments[J];return k[K].subscribe.apply(null,ne),b}if(typeof K=="string")return k[K]}var k={};S.addEventType=V;for(var O=1,z=arguments.length;O<z;++O)V(arguments[O]);return S;function V(K,G,J){if(typeof K!="object"){var ne;G=G||Yn;var ae={subscribers:[],fire:J=J||te,subscribe:function(Z){ae.subscribers.indexOf(Z)===-1&&(ae.subscribers.push(Z),ae.fire=G(ae.fire,Z))},unsubscribe:function(Z){ae.subscribers=ae.subscribers.filter(function(de){return de!==Z}),ae.fire=ae.subscribers.reduce(G,J)}};return k[K]=S[K]=ae}a(ne=K).forEach(function(Z){var de=ne[Z];if(o(de))V(Z,ne[Z][0],ne[Z][1]);else{if(de!=="asap")throw new me.InvalidArgument("Invalid event config");var ee=V(Z,Te,function(){for(var se=arguments.length,ue=new Array(se);se--;)ue[se]=arguments[se];ee.subscribers.forEach(function(le){E(function(){le.apply(null,ue)})})})}})}}function Zo(b,S){return m(S).from({prototype:b}),S}function Jo(b,S){return!(b.filter||b.algorithm||b.or)&&(S?b.justLimit:!b.replayFilter)}function Hs(b,S){b.filter=io(b.filter,S)}function Yi(b,S,k){var O=b.replayFilter;b.replayFilter=O?function(){return io(O(),S())}:S,b.justLimit=k&&!O}function so(b,S){if(b.isPrimKey)return S.primaryKey;var k=S.getIndexByKeyPath(b.index);if(!k)throw new me.Schema("KeyPath "+b.index+" on object store "+S.name+" is not indexed");return k}function xc(b,S,k){var O=so(b,S.schema);return S.openCursor({trans:k,values:!b.keysOnly,reverse:b.dir==="prev",unique:!!b.unique,query:{index:O,range:b.range}})}function wc(b,S,k,O){var z=b.replayFilter?io(b.filter,b.replayFilter()):b.filter;if(b.or){var V={},K=function(G,J,ne){var ae,Z;z&&!z(J,ne,function(de){return J.stop(de)},function(de){return J.fail(de)})||((Z=""+(ae=J.primaryKey))=="[object ArrayBuffer]"&&(Z=""+new Uint8Array(ae)),f(V,Z)||(V[Z]=!0,S(G,J,ne)))};return Promise.all([b.or._iterate(K,k),cn(xc(b,O,k),b.algorithm,K,!b.keysOnly&&b.valueMapper)])}return cn(xc(b,O,k),io(b.algorithm,z),S,!b.keysOnly&&b.valueMapper)}function cn(b,S,k,O){var z=kt(O?function(V,K,G){return k(O(V),K,G)}:k);return b.then(function(V){if(V)return V.start(function(){var K=function(){return V.continue()};S&&!S(V,function(G){return K=G},function(G){V.stop(G),K=te},function(G){V.fail(G),K=te})||z(V.value,V,function(G){return K=G}),K()})})}var Ea=(el.prototype.execute=function(b){var S=this["@@propmod"];if(S.add!==void 0){var k=S.add;if(o(k))return i(i([],o(b)?b:[],!0),k).sort();if(typeof k=="number")return(Number(b)||0)+k;if(typeof k=="bigint")try{return BigInt(b)+k}catch{return BigInt(0)+k}throw new TypeError("Invalid term ".concat(k))}if(S.remove!==void 0){var O=S.remove;if(o(O))return o(b)?b.filter(function(z){return!O.includes(z)}).sort():[];if(typeof O=="number")return Number(b)-O;if(typeof O=="bigint")try{return BigInt(b)-O}catch{return BigInt(0)-O}throw new TypeError("Invalid subtrahend ".concat(O))}return k=(k=S.replacePrefix)===null||k===void 0?void 0:k[0],k&&typeof b=="string"&&b.startsWith(k)?S.replacePrefix[1]+b.substring(k.length):b},el);function el(b){this["@@propmod"]=b}var _c=(Vt.prototype._read=function(b,S){var k=this._ctx;return k.error?k.table._trans(null,Nn.bind(null,k.error)):k.table._trans("readonly",b).then(S)},Vt.prototype._write=function(b){var S=this._ctx;return S.error?S.table._trans(null,Nn.bind(null,S.error)):S.table._trans("readwrite",b,"locked")},Vt.prototype._addAlgorithm=function(b){var S=this._ctx;S.algorithm=io(S.algorithm,b)},Vt.prototype._iterate=function(b,S){return wc(this._ctx,b,S,this._ctx.table.core)},Vt.prototype.clone=function(b){var S=Object.create(this.constructor.prototype),k=Object.create(this._ctx);return b&&c(k,b),S._ctx=k,S},Vt.prototype.raw=function(){return this._ctx.valueMapper=null,this},Vt.prototype.each=function(b){var S=this._ctx;return this._read(function(k){return wc(S,b,k,S.table.core)})},Vt.prototype.count=function(b){var S=this;return this._read(function(k){var O=S._ctx,z=O.table.core;if(Jo(O,!0))return z.count({trans:k,query:{index:so(O,z.schema),range:O.range}}).then(function(K){return Math.min(K,O.limit)});var V=0;return wc(O,function(){return++V,!1},k,z).then(function(){return V})}).then(b)},Vt.prototype.sortBy=function(b,S){var k=b.split(".").reverse(),O=k[0],z=k.length-1;function V(J,ne){return ne?V(J[k[ne]],ne-1):J[O]}var K=this._ctx.dir==="next"?1:-1;function G(J,ne){return Pt(V(J,z),V(ne,z))*K}return this.toArray(function(J){return J.sort(G)}).then(S)},Vt.prototype.toArray=function(b){var S=this;return this._read(function(k){var O=S._ctx;if(O.dir==="next"&&Jo(O,!0)&&0<O.limit){var z=O.valueMapper,V=so(O,O.table.core.schema);return O.table.core.query({trans:k,limit:O.limit,values:!0,query:{index:V,range:O.range}}).then(function(G){return G=G.result,z?G.map(z):G})}var K=[];return wc(O,function(G){return K.push(G)},k,O.table.core).then(function(){return K})},b)},Vt.prototype.offset=function(b){var S=this._ctx;return b<=0||(S.offset+=b,Jo(S)?Yi(S,function(){var k=b;return function(O,z){return k===0||(k===1?--k:z(function(){O.advance(k),k=0}),!1)}}):Yi(S,function(){var k=b;return function(){return--k<0}})),this},Vt.prototype.limit=function(b){return this._ctx.limit=Math.min(this._ctx.limit,b),Yi(this._ctx,function(){var S=b;return function(k,O,z){return--S<=0&&O(z),0<=S}},!0),this},Vt.prototype.until=function(b,S){return Hs(this._ctx,function(k,O,z){return!b(k.value)||(O(z),S)}),this},Vt.prototype.first=function(b){return this.limit(1).toArray(function(S){return S[0]}).then(b)},Vt.prototype.last=function(b){return this.reverse().first(b)},Vt.prototype.filter=function(b){var S;return Hs(this._ctx,function(k){return b(k.value)}),(S=this._ctx).isMatch=io(S.isMatch,b),this},Vt.prototype.and=function(b){return this.filter(b)},Vt.prototype.or=function(b){return new this.db.WhereClause(this._ctx.table,b,this)},Vt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Vt.prototype.desc=function(){return this.reverse()},Vt.prototype.eachKey=function(b){var S=this._ctx;return S.keysOnly=!S.isMatch,this.each(function(k,O){b(O.key,O)})},Vt.prototype.eachUniqueKey=function(b){return this._ctx.unique="unique",this.eachKey(b)},Vt.prototype.eachPrimaryKey=function(b){var S=this._ctx;return S.keysOnly=!S.isMatch,this.each(function(k,O){b(O.primaryKey,O)})},Vt.prototype.keys=function(b){var S=this._ctx;S.keysOnly=!S.isMatch;var k=[];return this.each(function(O,z){k.push(z.key)}).then(function(){return k}).then(b)},Vt.prototype.primaryKeys=function(b){var S=this._ctx;if(S.dir==="next"&&Jo(S,!0)&&0<S.limit)return this._read(function(O){var z=so(S,S.table.core.schema);return S.table.core.query({trans:O,values:!1,limit:S.limit,query:{index:z,range:S.range}})}).then(function(O){return O.result}).then(b);S.keysOnly=!S.isMatch;var k=[];return this.each(function(O,z){k.push(z.primaryKey)}).then(function(){return k}).then(b)},Vt.prototype.uniqueKeys=function(b){return this._ctx.unique="unique",this.keys(b)},Vt.prototype.firstKey=function(b){return this.limit(1).keys(function(S){return S[0]}).then(b)},Vt.prototype.lastKey=function(b){return this.reverse().firstKey(b)},Vt.prototype.distinct=function(){var b=this._ctx,b=b.index&&b.table.schema.idxByName[b.index];if(!b||!b.multi)return this;var S={};return Hs(this._ctx,function(z){var O=z.primaryKey.toString(),z=f(S,O);return S[O]=!0,!z}),this},Vt.prototype.modify=function(b){var S=this,k=this._ctx;return this._write(function(O){var z,V,K;K=typeof b=="function"?b:(z=a(b),V=z.length,function(fe){for(var be=!1,_e=0;_e<V;++_e){var Ae=z[_e],ke=b[Ae],Fe=C(fe,Ae);ke instanceof Ea?(j(fe,Ae,ke.execute(Fe)),be=!0):Fe!==ke&&(j(fe,Ae,ke),be=!0)}return be});var G=k.table.core,Z=G.schema.primaryKey,J=Z.outbound,ne=Z.extractKey,ae=200,Z=S.db._options.modifyChunkSize;Z&&(ae=typeof Z=="object"?Z[G.name]||Z["*"]||200:Z);function de(fe,Ae){var _e=Ae.failures,Ae=Ae.numFailures;se+=fe-Ae;for(var ke=0,Fe=a(_e);ke<Fe.length;ke++){var Le=Fe[ke];ee.push(_e[Le])}}var ee=[],se=0,ue=[],le=b===dp;return S.clone().primaryKeys().then(function(fe){function be(Ae){var ke=Math.min(ae,fe.length-Ae),Fe=fe.slice(Ae,Ae+ke);return(le?Promise.resolve([]):G.getMany({trans:O,keys:Fe,cache:"immutable"})).then(function(Le){var ze=[],Ke=[],We=J?[]:null,Ge=le?Fe:[];if(!le)for(var Nt=0;Nt<ke;++Nt){var Bt=Le[Nt],At={value:R(Bt),primKey:fe[Ae+Nt]};K.call(At,At.value,At)!==!1&&(At.value==null?Ge.push(fe[Ae+Nt]):J||Pt(ne(Bt),ne(At.value))===0?(Ke.push(At.value),J&&We.push(fe[Ae+Nt])):(Ge.push(fe[Ae+Nt]),ze.push(At.value)))}return Promise.resolve(0<ze.length&&G.mutate({trans:O,type:"add",values:ze}).then(function(Bn){for(var St in Bn.failures)Ge.splice(parseInt(St),1);de(ze.length,Bn)})).then(function(){return(0<Ke.length||_e&&typeof b=="object")&&G.mutate({trans:O,type:"put",keys:We,values:Ke,criteria:_e,changeSpec:typeof b!="function"&&b,isAdditionalChunk:0<Ae}).then(function(Bn){return de(Ke.length,Bn)})}).then(function(){return(0<Ge.length||_e&&le)&&G.mutate({trans:O,type:"delete",keys:Ge,criteria:_e,isAdditionalChunk:0<Ae}).then(function(Bn){return bc(k.table,Ge,Bn)}).then(function(Bn){return de(Ge.length,Bn)})}).then(function(){return fe.length>Ae+ke&&be(Ae+ae)})})}var _e=Jo(k)&&k.limit===1/0&&(typeof b!="function"||le)&&{index:k.index,range:k.range};return be(0).then(function(){if(0<ee.length)throw new je("Error modifying one or more objects",ee,se,ue);return fe.length})})})},Vt.prototype.delete=function(){var b=this._ctx,S=b.range;return!Jo(b)||b.table.schema.yProps||!b.isPrimKey&&S.type!==3?this.modify(dp):this._write(function(k){var O=b.table.core.schema.primaryKey,z=S;return b.table.core.count({trans:k,query:{index:O,range:z}}).then(function(V){return b.table.core.mutate({trans:k,type:"deleteRange",range:z}).then(function(J){var G=J.failures,J=J.numFailures;if(J)throw new je("Could not delete some values",Object.keys(G).map(function(ne){return G[ne]}),V-J);return V-J})})})},Vt);function Vt(){}var dp=function(b,S){return S.value=null};function I1(b,S){return b<S?-1:b===S?0:1}function O1(b,S){return S<b?-1:b===S?0:1}function bi(b,S,k){return b=b instanceof hp?new b.Collection(b):b,b._ctx.error=new(k||TypeError)(S),b}function tl(b){return new b.Collection(b,function(){return fp("")}).limit(0)}function ja(b,S,k,O){var z,V,K,G,J,ne,ae,Z=k.length;if(!k.every(function(se){return typeof se=="string"}))return bi(b,op);function de(se){z=se==="next"?function(le){return le.toUpperCase()}:function(le){return le.toLowerCase()},V=se==="next"?function(le){return le.toLowerCase()}:function(le){return le.toUpperCase()},K=se==="next"?I1:O1;var ue=k.map(function(le){return{lower:V(le),upper:z(le)}}).sort(function(le,fe){return K(le.lower,fe.lower)});G=ue.map(function(le){return le.upper}),J=ue.map(function(le){return le.lower}),ae=(ne=se)==="next"?"":O}de("next"),b=new b.Collection(b,function(){return Vr(G[0],J[Z-1]+O)}),b._ondirectionchange=function(se){de(se)};var ee=0;return b._addAlgorithm(function(se,ue,le){var fe=se.key;if(typeof fe!="string")return!1;var be=V(fe);if(S(be,J,ee))return!0;for(var _e=null,Ae=ee;Ae<Z;++Ae){var ke=function(Fe,Le,ze,Ke,We,Ge){for(var Nt=Math.min(Fe.length,Ke.length),Bt=-1,At=0;At<Nt;++At){var Bn=Le[At];if(Bn!==Ke[At])return We(Fe[At],ze[At])<0?Fe.substr(0,At)+ze[At]+ze.substr(At+1):We(Fe[At],Ke[At])<0?Fe.substr(0,At)+Ke[At]+ze.substr(At+1):0<=Bt?Fe.substr(0,Bt)+Le[Bt]+ze.substr(Bt+1):null;We(Fe[At],Bn)<0&&(Bt=At)}return Nt<Ke.length&&Ge==="next"?Fe+ze.substr(Fe.length):Nt<Fe.length&&Ge==="prev"?Fe.substr(0,ze.length):Bt<0?null:Fe.substr(0,Bt)+Ke[Bt]+ze.substr(Bt+1)}(fe,be,G[Ae],J[Ae],K,ne);ke===null&&_e===null?ee=Ae+1:(_e===null||0<K(_e,ke))&&(_e=ke)}return ue(_e!==null?function(){se.continue(_e+ae)}:le),!1}),b}function Vr(b,S,k,O){return{type:2,lower:b,upper:S,lowerOpen:k,upperOpen:O}}function fp(b){return{type:1,lower:b,upper:b}}var hp=(Object.defineProperty(Zn.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Zn.prototype.between=function(b,S,k,O){k=k!==!1,O=O===!0;try{return 0<this._cmp(b,S)||this._cmp(b,S)===0&&(k||O)&&(!k||!O)?tl(this):new this.Collection(this,function(){return Vr(b,S,!k,!O)})}catch{return bi(this,Pi)}},Zn.prototype.equals=function(b){return b==null?bi(this,Pi):new this.Collection(this,function(){return fp(b)})},Zn.prototype.above=function(b){return b==null?bi(this,Pi):new this.Collection(this,function(){return Vr(b,void 0,!0)})},Zn.prototype.aboveOrEqual=function(b){return b==null?bi(this,Pi):new this.Collection(this,function(){return Vr(b,void 0,!1)})},Zn.prototype.below=function(b){return b==null?bi(this,Pi):new this.Collection(this,function(){return Vr(void 0,b,!1,!0)})},Zn.prototype.belowOrEqual=function(b){return b==null?bi(this,Pi):new this.Collection(this,function(){return Vr(void 0,b)})},Zn.prototype.startsWith=function(b){return typeof b!="string"?bi(this,op):this.between(b,b+ro,!0,!0)},Zn.prototype.startsWithIgnoreCase=function(b){return b===""?this.startsWith(b):ja(this,function(S,k){return S.indexOf(k[0])===0},[b],ro)},Zn.prototype.equalsIgnoreCase=function(b){return ja(this,function(S,k){return S===k[0]},[b],"")},Zn.prototype.anyOfIgnoreCase=function(){var b=Q.apply(Y,arguments);return b.length===0?tl(this):ja(this,function(S,k){return k.indexOf(S)!==-1},b,"")},Zn.prototype.startsWithAnyOfIgnoreCase=function(){var b=Q.apply(Y,arguments);return b.length===0?tl(this):ja(this,function(S,k){return k.some(function(O){return S.indexOf(O)===0})},b,ro)},Zn.prototype.anyOf=function(){var b=this,S=Q.apply(Y,arguments),k=this._cmp;try{S.sort(k)}catch{return bi(this,Pi)}if(S.length===0)return tl(this);var O=new this.Collection(this,function(){return Vr(S[0],S[S.length-1])});O._ondirectionchange=function(V){k=V==="next"?b._ascending:b._descending,S.sort(k)};var z=0;return O._addAlgorithm(function(V,K,G){for(var J=V.key;0<k(J,S[z]);)if(++z===S.length)return K(G),!1;return k(J,S[z])===0||(K(function(){V.continue(S[z])}),!1)}),O},Zn.prototype.notEqual=function(b){return this.inAnyRange([[-1/0,b],[b,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Zn.prototype.noneOf=function(){var b=Q.apply(Y,arguments);if(b.length===0)return new this.Collection(this);try{b.sort(this._ascending)}catch{return bi(this,Pi)}var S=b.reduce(function(k,O){return k?k.concat([[k[k.length-1][1],O]]):[[-1/0,O]]},null);return S.push([b[b.length-1],this.db._maxKey]),this.inAnyRange(S,{includeLowers:!1,includeUppers:!1})},Zn.prototype.inAnyRange=function(fe,S){var k=this,O=this._cmp,z=this._ascending,V=this._descending,K=this._min,G=this._max;if(fe.length===0)return tl(this);if(!fe.every(function(be){return be[0]!==void 0&&be[1]!==void 0&&z(be[0],be[1])<=0}))return bi(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",me.InvalidArgument);var J=!S||S.includeLowers!==!1,ne=S&&S.includeUppers===!0,ae,Z=z;function de(be,_e){return Z(be[0],_e[0])}try{(ae=fe.reduce(function(be,_e){for(var Ae=0,ke=be.length;Ae<ke;++Ae){var Fe=be[Ae];if(O(_e[0],Fe[1])<0&&0<O(_e[1],Fe[0])){Fe[0]=K(Fe[0],_e[0]),Fe[1]=G(Fe[1],_e[1]);break}}return Ae===ke&&be.push(_e),be},[])).sort(de)}catch{return bi(this,Pi)}var ee=0,se=ne?function(be){return 0<z(be,ae[ee][1])}:function(be){return 0<=z(be,ae[ee][1])},ue=J?function(be){return 0<V(be,ae[ee][0])}:function(be){return 0<=V(be,ae[ee][0])},le=se,fe=new this.Collection(this,function(){return Vr(ae[0][0],ae[ae.length-1][1],!J,!ne)});return fe._ondirectionchange=function(be){Z=be==="next"?(le=se,z):(le=ue,V),ae.sort(de)},fe._addAlgorithm(function(be,_e,Ae){for(var ke,Fe=be.key;le(Fe);)if(++ee===ae.length)return _e(Ae),!1;return!se(ke=Fe)&&!ue(ke)||(k._cmp(Fe,ae[ee][1])===0||k._cmp(Fe,ae[ee][0])===0||_e(function(){Z===z?be.continue(ae[ee][0]):be.continue(ae[ee][1])}),!1)}),fe},Zn.prototype.startsWithAnyOf=function(){var b=Q.apply(Y,arguments);return b.every(function(S){return typeof S=="string"})?b.length===0?tl(this):this.inAnyRange(b.map(function(S){return[S,S+ro]})):bi(this,"startsWithAnyOf() only works with strings")},Zn);function Zn(){}function Br(b){return kt(function(S){return Sc(S),b(S.target.error),!1})}function Sc(b){b.stopPropagation&&b.stopPropagation(),b.preventDefault&&b.preventDefault()}var Ac="storagemutated",pp="x-storagemutated-1",Ur=Xo(null,Ac),M1=(xs.prototype._lock=function(){return A(!Je.global),++this._reculock,this._reculock!==1||Je.global||(Je.lockOwnerFor=this),this},xs.prototype._unlock=function(){if(A(!Je.global),--this._reculock==0)for(Je.global||(Je.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var b=this._blockedFuncs.shift();try{Us(b[1],b[0])}catch{}}return this},xs.prototype._locked=function(){return this._reculock&&Je.lockOwnerFor!==this},xs.prototype.create=function(b){var S=this;if(!this.mode)return this;var k=this.db.idbdb,O=this.db._state.dbOpenError;if(A(!this.idbtrans),!b&&!k)switch(O&&O.name){case"DatabaseClosedError":throw new me.DatabaseClosed(O);case"MissingAPIError":throw new me.MissingAPI(O.message,O);default:throw new me.OpenFailed(O)}if(!this.active)throw new me.TransactionInactive;return A(this._completion._state===null),(b=this.idbtrans=b||(this.db.core||k).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=kt(function(z){Sc(z),S._reject(b.error)}),b.onabort=kt(function(z){Sc(z),S.active&&S._reject(new me.Abort(b.error)),S.active=!1,S.on("abort").fire(z)}),b.oncomplete=kt(function(){S.active=!1,S._resolve(),"mutatedParts"in b&&Ur.storagemutated.fire(b.mutatedParts)}),this},xs.prototype._promise=function(b,S,k){var O=this;if(b==="readwrite"&&this.mode!=="readwrite")return Nn(new me.ReadOnly("Transaction is readonly"));if(!this.active)return Nn(new me.TransactionInactive);if(this._locked())return new Ue(function(V,K){O._blockedFuncs.push([function(){O._promise(b,S,k).then(V,K)},Je])});if(k)return Gi(function(){var V=new Ue(function(K,G){O._lock();var J=S(K,G,O);J&&J.then&&J.then(K,G)});return V.finally(function(){return O._unlock()}),V._lib=!0,V});var z=new Ue(function(V,K){var G=S(V,K,O);G&&G.then&&G.then(V,K)});return z._lib=!0,z},xs.prototype._root=function(){return this.parent?this.parent._root():this},xs.prototype.waitFor=function(b){var S,k=this._root(),O=Ue.resolve(b);k._waitingFor?k._waitingFor=k._waitingFor.then(function(){return O}):(k._waitingFor=O,k._waitingQueue=[],S=k.idbtrans.objectStore(k.storeNames[0]),function V(){for(++k._spinCount;k._waitingQueue.length;)k._waitingQueue.shift()();k._waitingFor&&(S.get(-1/0).onsuccess=V)}());var z=k._waitingFor;return new Ue(function(V,K){O.then(function(G){return k._waitingQueue.push(kt(V.bind(null,G)))},function(G){return k._waitingQueue.push(kt(K.bind(null,G)))}).finally(function(){k._waitingFor===z&&(k._waitingFor=null)})})},xs.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new me.Abort))},xs.prototype.table=function(b){var S=this._memoizedTables||(this._memoizedTables={});if(f(S,b))return S[b];var k=this.schema[b];if(!k)throw new me.NotFound("Table "+b+" not part of transaction");return k=new this.db.Table(b,k,this),k.core=this.db.core.table(b),S[b]=k},xs);function xs(){}function nl(b,S,k,O,z,V,K,G){return{name:b,keyPath:S,unique:k,multi:O,auto:z,compound:V,src:(k&&!K?"&":"")+(O?"*":"")+(z?"++":"")+Ec(S),type:G}}function Ec(b){return typeof b=="string"?b:b?"["+[].join.call(b,"+")+"]":""}function yd(b,S,k){return{name:b,primKey:S,indexes:k,mappedClass:null,idxByName:(O=function(z){return[z.name,z]},k.reduce(function(z,V,K){return K=O(V,K),K&&(z[K[0]]=K[1]),z},{}))};var O}var Ks=function(b){try{return b.only([[]]),Ks=function(){return[[]]},[[]]}catch{return Ks=function(){return ro},ro}};function ao(b){return b==null?function(){}:typeof b=="string"?(S=b).split(".").length===1?function(k){return k[S]}:function(k){return C(k,S)}:function(k){return C(k,b)};var S}function mp(b){return[].slice.call(b)}var gp=0;function un(b){return b==null?":id":typeof b=="string"?b:"[".concat(b.join("+"),"]")}function R1(b,S,J){function O(le){if(le.type===3)return null;if(le.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var ee=le.lower,se=le.upper,ue=le.lowerOpen,le=le.upperOpen;return ee===void 0?se===void 0?null:S.upperBound(se,!!le):se===void 0?S.lowerBound(ee,!!ue):S.bound(ee,se,!!ue,!!le)}function z(de){var ee,se=de.name;return{name:se,schema:de,mutate:function(ue){var le=ue.trans,fe=ue.type,be=ue.keys,_e=ue.values,Ae=ue.range;return new Promise(function(ke,Fe){ke=kt(ke);var Le=le.objectStore(se),ze=Le.keyPath==null,Ke=fe==="put"||fe==="add";if(!Ke&&fe!=="delete"&&fe!=="deleteRange")throw new Error("Invalid operation type: "+fe);var We,Ge=(be||_e||{length:1}).length;if(be&&_e&&be.length!==_e.length)throw new Error("Given keys array must have same length as given values array.");if(Ge===0)return ke({numFailures:0,failures:{},results:[],lastResult:void 0});function Nt(xi){++Bn,Sc(xi)}var Bt=[],At=[],Bn=0;if(fe==="deleteRange"){if(Ae.type===4)return ke({numFailures:Bn,failures:At,results:[],lastResult:void 0});Ae.type===3?Bt.push(We=Le.clear()):Bt.push(We=Le.delete(O(Ae)))}else{var ze=Ke?ze?[_e,be]:[_e,null]:[be,null],St=ze[0],ii=ze[1];if(Ke)for(var si=0;si<Ge;++si)Bt.push(We=ii&&ii[si]!==void 0?Le[fe](St[si],ii[si]):Le[fe](St[si])),We.onerror=Nt;else for(si=0;si<Ge;++si)Bt.push(We=Le[fe](St[si])),We.onerror=Nt}function Hv(xi){xi=xi.target.result,Bt.forEach(function(Oc,F1){return Oc.error!=null&&(At[F1]=Oc.error)}),ke({numFailures:Bn,failures:At,results:fe==="delete"?be:Bt.map(function(Oc){return Oc.result}),lastResult:xi})}We.onerror=function(xi){Nt(xi),Hv(xi)},We.onsuccess=Hv})},getMany:function(ue){var le=ue.trans,fe=ue.keys;return new Promise(function(be,_e){be=kt(be);for(var Ae,ke=le.objectStore(se),Fe=fe.length,Le=new Array(Fe),ze=0,Ke=0,We=function(Bt){Bt=Bt.target,Le[Bt._pos]=Bt.result,++Ke===ze&&be(Le)},Ge=Br(_e),Nt=0;Nt<Fe;++Nt)fe[Nt]!=null&&((Ae=ke.get(fe[Nt]))._pos=Nt,Ae.onsuccess=We,Ae.onerror=Ge,++ze);ze===0&&be(Le)})},get:function(ue){var le=ue.trans,fe=ue.key;return new Promise(function(be,_e){be=kt(be);var Ae=le.objectStore(se).get(fe);Ae.onsuccess=function(ke){return be(ke.target.result)},Ae.onerror=Br(_e)})},query:(ee=ne,function(ue){return new Promise(function(le,fe){le=kt(le);var be,_e,Ae,ze=ue.trans,ke=ue.values,Fe=ue.limit,We=ue.query,Le=Fe===1/0?void 0:Fe,Ke=We.index,We=We.range,ze=ze.objectStore(se),Ke=Ke.isPrimaryKey?ze:ze.index(Ke.name),We=O(We);if(Fe===0)return le({result:[]});ee?((Le=ke?Ke.getAll(We,Le):Ke.getAllKeys(We,Le)).onsuccess=function(Ge){return le({result:Ge.target.result})},Le.onerror=Br(fe)):(be=0,_e=!ke&&"openKeyCursor"in Ke?Ke.openKeyCursor(We):Ke.openCursor(We),Ae=[],_e.onsuccess=function(Ge){var Nt=_e.result;return Nt?(Ae.push(ke?Nt.value:Nt.primaryKey),++be===Fe?le({result:Ae}):void Nt.continue()):le({result:Ae})},_e.onerror=Br(fe))})}),openCursor:function(ue){var le=ue.trans,fe=ue.values,be=ue.query,_e=ue.reverse,Ae=ue.unique;return new Promise(function(ke,Fe){ke=kt(ke);var Ke=be.index,Le=be.range,ze=le.objectStore(se),ze=Ke.isPrimaryKey?ze:ze.index(Ke.name),Ke=_e?Ae?"prevunique":"prev":Ae?"nextunique":"next",We=!fe&&"openKeyCursor"in ze?ze.openKeyCursor(O(Le),Ke):ze.openCursor(O(Le),Ke);We.onerror=Br(Fe),We.onsuccess=kt(function(Ge){var Nt,Bt,At,Bn,St=We.result;St?(St.___id=++gp,St.done=!1,Nt=St.continue.bind(St),Bt=(Bt=St.continuePrimaryKey)&&Bt.bind(St),At=St.advance.bind(St),Bn=function(){throw new Error("Cursor not stopped")},St.trans=le,St.stop=St.continue=St.continuePrimaryKey=St.advance=function(){throw new Error("Cursor not started")},St.fail=kt(Fe),St.next=function(){var ii=this,si=1;return this.start(function(){return si--?ii.continue():ii.stop()}).then(function(){return ii})},St.start=function(ii){function si(){if(We.result)try{ii()}catch(xi){St.fail(xi)}else St.done=!0,St.start=function(){throw new Error("Cursor behind last entry")},St.stop()}var Hv=new Promise(function(xi,Oc){xi=kt(xi),We.onerror=Br(Oc),St.fail=Oc,St.stop=function(F1){St.stop=St.continue=St.continuePrimaryKey=St.advance=Bn,xi(F1)}});return We.onsuccess=kt(function(xi){We.onsuccess=si,si()}),St.continue=Nt,St.continuePrimaryKey=Bt,St.advance=At,si(),Hv},ke(St)):ke(null)},Fe)})},count:function(ue){var le=ue.query,fe=ue.trans,be=le.index,_e=le.range;return new Promise(function(Ae,ke){var Fe=fe.objectStore(se),Le=be.isPrimaryKey?Fe:Fe.index(be.name),Fe=O(_e),Le=Fe?Le.count(Fe):Le.count();Le.onsuccess=kt(function(ze){return Ae(ze.target.result)}),Le.onerror=Br(ke)})}}}var V,K,G,ae=(K=J,G=mp((V=b).objectStoreNames),{schema:{name:V.name,tables:G.map(function(de){return K.objectStore(de)}).map(function(de){var ee=de.keyPath,le=de.autoIncrement,se=o(ee),ue={},le={name:de.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:ee==null,compound:se,keyPath:ee,autoIncrement:le,unique:!0,extractKey:ao(ee)},indexes:mp(de.indexNames).map(function(fe){return de.index(fe)}).map(function(Ae){var be=Ae.name,_e=Ae.unique,ke=Ae.multiEntry,Ae=Ae.keyPath,ke={name:be,compound:o(Ae),keyPath:Ae,unique:_e,multiEntry:ke,extractKey:ao(Ae)};return ue[un(Ae)]=ke}),getIndexByKeyPath:function(fe){return ue[un(fe)]}};return ue[":id"]=le.primaryKey,ee!=null&&(ue[un(ee)]=le.primaryKey),le})},hasGetAll:0<G.length&&"getAll"in K.objectStore(G[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),J=ae.schema,ne=ae.hasGetAll,ae=J.tables.map(z),Z={};return ae.forEach(function(de){return Z[de.name]=de}),{stack:"dbcore",transaction:b.transaction.bind(b),table:function(de){if(!Z[de])throw new Error("Table '".concat(de,"' not found"));return Z[de]},MIN_KEY:-1/0,MAX_KEY:Ks(S),schema:J}}function L1(b,S,k,O){var z=k.IDBKeyRange;return k.indexedDB,{dbcore:(O=R1(S,z,O),b.dbcore.reduce(function(V,K){return K=K.create,r(r({},V),K(V))},O))}}function jc(b,O){var k=O.db,O=L1(b._middlewares,k,b._deps,O);b.core=O.dbcore,b.tables.forEach(function(z){var V=z.name;b.core.schema.tables.some(function(K){return K.name===V})&&(z.core=b.core.table(V),b[V]instanceof b.Table&&(b[V].core=z.core))})}function Cc(b,S,k,O){k.forEach(function(z){var V=O[z];S.forEach(function(K){var G=function J(ne,ae){return y(ne,ae)||(ne=u(ne))&&J(ne,ae)}(K,z);(!G||"value"in G&&G.value===void 0)&&(K===b.Transaction.prototype||K instanceof b.Transaction?g(K,z,{get:function(){return this.table(z)},set:function(J){p(this,z,{value:J,writable:!0,configurable:!0,enumerable:!0})}}):K[z]=new b.Table(z,V))})})}function bd(b,S){S.forEach(function(k){for(var O in k)k[O]instanceof b.Table&&delete k[O]})}function xd(b,S){return b._cfg.version-S._cfg.version}function Bv(b,S,k,O){var z=b._dbSchema;k.objectStoreNames.contains("$meta")&&!z.$meta&&(z.$meta=yd("$meta",yp("")[0],[]),b._storeNames.push("$meta"));var V=b._createTransaction("readwrite",b._storeNames,z);V.create(k),V._completion.catch(O);var K=V._reject.bind(V),G=Je.transless||Je;Gi(function(){return Je.trans=V,Je.transless=G,S!==0?(jc(b,k),ne=S,((J=V).storeNames.includes("$meta")?J.table("$meta").get("version").then(function(ae){return ae??ne}):Ue.resolve(ne)).then(function(ae){return de=ae,ee=V,se=k,ue=[],ae=(Z=b)._versions,le=Z._dbSchema=il(0,Z.idbdb,se),(ae=ae.filter(function(fe){return fe._cfg.version>=de})).length!==0?(ae.forEach(function(fe){ue.push(function(){var be=le,_e=fe._cfg.dbschema;oo(Z,be,se),oo(Z,_e,se),le=Z._dbSchema=_e;var Ae=wd(be,_e);Ae.add.forEach(function(Ke){vp(se,Ke[0],Ke[1].primKey,Ke[1].indexes)}),Ae.change.forEach(function(Ke){if(Ke.recreate)throw new me.Upgrade("Not yet support for changing primary key");var We=se.objectStore(Ke.name);Ke.add.forEach(function(Ge){return Tc(We,Ge)}),Ke.change.forEach(function(Ge){We.deleteIndex(Ge.name),Tc(We,Ge)}),Ke.del.forEach(function(Ge){return We.deleteIndex(Ge)})});var ke=fe._cfg.contentUpgrade;if(ke&&fe._cfg.version>de){jc(Z,se),ee._memoizedTables={};var Fe=T(_e);Ae.del.forEach(function(Ke){Fe[Ke]=be[Ke]}),bd(Z,[Z.Transaction.prototype]),Cc(Z,[Z.Transaction.prototype],a(Fe),Fe),ee.schema=Fe;var Le,ze=ce(ke);return ze&&to(),Ae=Ue.follow(function(){var Ke;(Le=ke(ee))&&ze&&(Ke=bs.bind(null,null),Le.then(Ke,Ke))}),Le&&typeof Le.then=="function"?Ue.resolve(Le):Ae.then(function(){return Le})}}),ue.push(function(be){var _e,Ae,ke=fe._cfg.dbschema;_e=ke,Ae=be,[].slice.call(Ae.db.objectStoreNames).forEach(function(Fe){return _e[Fe]==null&&Ae.db.deleteObjectStore(Fe)}),bd(Z,[Z.Transaction.prototype]),Cc(Z,[Z.Transaction.prototype],Z._storeNames,Z._dbSchema),ee.schema=Z._dbSchema}),ue.push(function(be){Z.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(Z.idbdb.version/10)===fe._cfg.version?(Z.idbdb.deleteObjectStore("$meta"),delete Z._dbSchema.$meta,Z._storeNames=Z._storeNames.filter(function(_e){return _e!=="$meta"})):be.objectStore("$meta").put(fe._cfg.version,"version"))})}),function fe(){return ue.length?Ue.resolve(ue.shift()(ee.idbtrans)).then(fe):Ue.resolve()}().then(function(){rl(le,se)})):Ue.resolve();var Z,de,ee,se,ue,le}).catch(K)):(a(z).forEach(function(ae){vp(k,ae,z[ae].primKey,z[ae].indexes)}),jc(b,k),void Ue.follow(function(){return b.on.populate.fire(V)}).catch(K));var J,ne})}function qs(b,S){rl(b._dbSchema,S),S.db.version%10!=0||S.objectStoreNames.contains("$meta")||S.db.createObjectStore("$meta").add(Math.ceil(S.db.version/10-1),"version");var k=il(0,b.idbdb,S);oo(b,b._dbSchema,S);for(var O=0,z=wd(k,b._dbSchema).change;O<z.length;O++){var V=function(K){if(K.change.length||K.recreate)return console.warn("Unable to patch indexes of table ".concat(K.name," because it has changes on the type of index or primary key.")),{value:void 0};var G=S.objectStore(K.name);K.add.forEach(function(J){Ft&&console.debug("Dexie upgrade patch: Creating missing index ".concat(K.name,".").concat(J.src)),Tc(G,J)})}(z[O]);if(typeof V=="object")return V.value}}function wd(b,S){var k,O={del:[],add:[],change:[]};for(k in b)S[k]||O.del.push(k);for(k in S){var z=b[k],V=S[k];if(z){var K={name:k,def:V,recreate:!1,del:[],add:[],change:[]};if(""+(z.primKey.keyPath||"")!=""+(V.primKey.keyPath||"")||z.primKey.auto!==V.primKey.auto)K.recreate=!0,O.change.push(K);else{var G=z.idxByName,J=V.idxByName,ne=void 0;for(ne in G)J[ne]||K.del.push(ne);for(ne in J){var ae=G[ne],Z=J[ne];ae?ae.src!==Z.src&&K.change.push(Z):K.add.push(Z)}(0<K.del.length||0<K.add.length||0<K.change.length)&&O.change.push(K)}}else O.add.push([k,V])}return O}function vp(b,S,k,O){var z=b.db.createObjectStore(S,k.keyPath?{keyPath:k.keyPath,autoIncrement:k.auto}:{autoIncrement:k.auto});return O.forEach(function(V){return Tc(z,V)}),z}function rl(b,S){a(b).forEach(function(k){S.db.objectStoreNames.contains(k)||(Ft&&console.debug("Dexie: Creating missing table",k),vp(S,k,b[k].primKey,b[k].indexes))})}function Tc(b,S){b.createIndex(S.name,S.keyPath,{unique:S.unique,multiEntry:S.multi})}function il(b,S,k){var O={};return w(S.objectStoreNames,0).forEach(function(z){for(var V=k.objectStore(z),K=nl(Ec(ne=V.keyPath),ne||"",!0,!1,!!V.autoIncrement,ne&&typeof ne!="string",!0),G=[],J=0;J<V.indexNames.length;++J){var ae=V.index(V.indexNames[J]),ne=ae.keyPath,ae=nl(ae.name,ne,!!ae.unique,!!ae.multiEntry,!1,ne&&typeof ne!="string",!1);G.push(ae)}O[z]=yd(z,K,G)}),O}function oo(b,S,k){for(var O=k.db.objectStoreNames,z=0;z<O.length;++z){var V=O[z],K=k.objectStore(V);b._hasGetAll="getAll"in K;for(var G=0;G<K.indexNames.length;++G){var J=K.indexNames[G],ne=K.index(J).keyPath,ae=typeof ne=="string"?ne:"["+w(ne).join("+")+"]";!S[V]||(ne=S[V].idxByName[ae])&&(ne.name=J,delete S[V].idxByName[ae],S[V].idxByName[J]=ne)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&s.WorkerGlobalScope&&s instanceof s.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(b._hasGetAll=!1)}function yp(b){return b.split(",").map(function(S,k){var V=S.split(":"),O=(z=V[1])===null||z===void 0?void 0:z.trim(),z=(S=V[0].trim()).replace(/([&*]|\+\+)/g,""),V=/^\[/.test(z)?z.match(/^\[(.*)\]$/)[1].split("+"):z;return nl(z,V||null,/\&/.test(S),/\*/.test(S),/\+\+/.test(S),o(V),k===0,O)})}var _d=(sl.prototype._createTableSchema=yd,sl.prototype._parseIndexSyntax=yp,sl.prototype._parseStoresSpec=function(b,S){var k=this;a(b).forEach(function(O){if(b[O]!==null){var z=k._parseIndexSyntax(b[O]),V=z.shift();if(!V)throw new me.Schema("Invalid schema for table "+O+": "+b[O]);if(V.unique=!0,V.multi)throw new me.Schema("Primary key cannot be multiEntry*");z.forEach(function(K){if(K.auto)throw new me.Schema("Only primary key can be marked as autoIncrement (++)");if(!K.keyPath)throw new me.Schema("Index must have a name and cannot be an empty string")}),z=k._createTableSchema(O,V,z),S[O]=z}})},sl.prototype.stores=function(k){var S=this.db;this._cfg.storesSource=this._cfg.storesSource?c(this._cfg.storesSource,k):k;var k=S._versions,O={},z={};return k.forEach(function(V){c(O,V._cfg.storesSource),z=V._cfg.dbschema={},V._parseStoresSpec(O,z)}),S._dbSchema=z,bd(S,[S._allTables,S,S.Transaction.prototype]),Cc(S,[S._allTables,S,S.Transaction.prototype,this._cfg.tables],a(z),z),S._storeNames=a(z),this},sl.prototype.upgrade=function(b){return this._cfg.contentUpgrade=Mn(this._cfg.contentUpgrade||te,b),this},sl);function sl(){}function Sd(b,S){var k=b._dbNamesDB;return k||(k=b._dbNamesDB=new uo(Aa,{addons:[],indexedDB:b,IDBKeyRange:S})).version(1).stores({dbnames:"name"}),k.table("dbnames")}function lo(b){return b&&typeof b.databases=="function"}function Ad(b){return Gi(function(){return Je.letThrough=!0,b()})}function Ed(b){return!("from"in b)}var lr=function(b,S){if(!this){var k=new lr;return b&&"d"in b&&c(k,b),k}c(this,arguments.length?{d:1,from:b,to:1<arguments.length?S:b}:{d:0})};function co(b,S,k){var O=Pt(S,k);if(!isNaN(O)){if(0<O)throw RangeError();if(Ed(b))return c(b,{from:S,to:k,d:1});var z=b.l,O=b.r;if(Pt(k,b.from)<0)return z?co(z,S,k):b.l={from:S,to:k,d:1,l:null,r:null},bp(b);if(0<Pt(S,b.to))return O?co(O,S,k):b.r={from:S,to:k,d:1,l:null,r:null},bp(b);Pt(S,b.from)<0&&(b.from=S,b.l=null,b.d=O?O.d+1:1),0<Pt(k,b.to)&&(b.to=k,b.r=null,b.d=b.l?b.l.d+1:1),k=!b.r,z&&!b.l&&al(b,z),O&&k&&al(b,O)}}function al(b,S){Ed(S)||function k(O,J){var V=J.from,K=J.to,G=J.l,J=J.r;co(O,V,K),G&&k(O,G),J&&k(O,J)}(b,S)}function Nc(b,S){var k=Pc(S),O=k.next();if(O.done)return!1;for(var z=O.value,V=Pc(b),K=V.next(z.from),G=K.value;!O.done&&!K.done;){if(Pt(G.from,z.to)<=0&&0<=Pt(G.to,z.from))return!0;Pt(z.from,G.from)<0?z=(O=k.next(G.from)).value:G=(K=V.next(z.from)).value}return!1}function Pc(b){var S=Ed(b)?null:{s:0,n:b};return{next:function(k){for(var O=0<arguments.length;S;)switch(S.s){case 0:if(S.s=1,O)for(;S.n.l&&Pt(k,S.n.from)<0;)S={up:S,n:S.n.l,s:1};else for(;S.n.l;)S={up:S,n:S.n.l,s:1};case 1:if(S.s=2,!O||Pt(k,S.n.to)<=0)return{value:S.n,done:!1};case 2:if(S.n.r){S.s=3,S={up:S,n:S.n.r,s:0};continue}case 3:S=S.up}return{done:!0}}}}function bp(b){var S,k,O=(((S=b.r)===null||S===void 0?void 0:S.d)||0)-(((k=b.l)===null||k===void 0?void 0:k.d)||0),z=1<O?"r":O<-1?"l":"";z&&(S=z=="r"?"l":"r",k=r({},b),O=b[z],b.from=O.from,b.to=O.to,b[z]=O[z],k[z]=O[S],(b[S]=k).d=Ca(k)),b.d=Ca(b)}function Ca(k){var S=k.r,k=k.l;return(S?k?Math.max(S.d,k.d):S.d:k?k.d:0)+1}function kc(b,S){return a(S).forEach(function(k){b[k]?al(b[k],S[k]):b[k]=function O(z){var V,K,G={};for(V in z)f(z,V)&&(K=z[V],G[V]=!K||typeof K!="object"||M.has(K.constructor)?K:O(K));return G}(S[k])}),b}function jd(b,S){return b.all||S.all||Object.keys(b).some(function(k){return S[k]&&Nc(S[k],b[k])})}h(lr.prototype,((ws={add:function(b){return al(this,b),this},addKey:function(b){return co(this,b,b),this},addKeys:function(b){var S=this;return b.forEach(function(k){return co(S,k,k)}),this},hasKey:function(b){var S=Pc(this).next(b).value;return S&&Pt(S.from,b)<=0&&0<=Pt(S.to,b)}})[W]=function(){return Pc(this)},ws));var Ta={},Cd={},ol=!1;function Tr(b){kc(Cd,b),ol||(ol=!0,setTimeout(function(){ol=!1,Td(Cd,!(Cd={}))},0))}function Td(b,S){S===void 0&&(S=!1);var k=new Set;if(b.all)for(var O=0,z=Object.values(Ta);O<z.length;O++)xp(K=z[O],b,k,S);else for(var V in b){var K,G=/^idb\:\/\/(.*)\/(.*)\//.exec(V);G&&(V=G[1],G=G[2],(K=Ta["idb://".concat(V,"/").concat(G)])&&xp(K,b,k,S))}k.forEach(function(J){return J()})}function xp(b,S,k,O){for(var z=[],V=0,K=Object.entries(b.queries.query);V<K.length;V++){for(var G=K[V],J=G[0],ne=[],ae=0,Z=G[1];ae<Z.length;ae++){var de=Z[ae];jd(S,de.obsSet)?de.subscribers.forEach(function(le){return k.add(le)}):O&&ne.push(de)}O&&z.push([J,ne])}if(O)for(var ee=0,se=z;ee<se.length;ee++){var ue=se[ee],J=ue[0],ne=ue[1];b.queries.query[J]=ne}}function ll(b){var S=b._state,k=b._deps.indexedDB;if(S.isBeingOpened||b.idbdb)return S.dbReadyPromise.then(function(){return S.dbOpenError?Nn(S.dbOpenError):b});S.isBeingOpened=!0,S.dbOpenError=null,S.openComplete=!1;var O=S.openCanceller,z=Math.round(10*b.verno),V=!1;function K(){if(S.openCanceller!==O)throw new me.DatabaseClosed("db.open() was cancelled")}function G(){return new Ue(function(de,ee){if(K(),!k)throw new me.MissingAPI;var se=b.name,ue=S.autoSchema||!z?k.open(se):k.open(se,z);if(!ue)throw new me.MissingAPI;ue.onerror=Br(ee),ue.onblocked=kt(b._fireOnBlocked),ue.onupgradeneeded=kt(function(le){var fe;ae=ue.transaction,S.autoSchema&&!b._options.allowEmptyDB?(ue.onerror=Sc,ae.abort(),ue.result.close(),(fe=k.deleteDatabase(se)).onsuccess=fe.onerror=kt(function(){ee(new me.NoSuchDatabase("Database ".concat(se," doesnt exist")))})):(ae.onerror=Br(ee),le=le.oldVersion>Math.pow(2,62)?0:le.oldVersion,Z=le<1,b.idbdb=ue.result,V&&qs(b,ae),Bv(b,le/10,ae,ee))},ee),ue.onsuccess=kt(function(){ae=null;var le,fe,be,_e,Ae,ke=b.idbdb=ue.result,Fe=w(ke.objectStoreNames);if(0<Fe.length)try{var Le=ke.transaction((_e=Fe).length===1?_e[0]:_e,"readonly");if(S.autoSchema)fe=ke,be=Le,(le=b).verno=fe.version/10,be=le._dbSchema=il(0,fe,be),le._storeNames=w(fe.objectStoreNames,0),Cc(le,[le._allTables],a(be),be);else if(oo(b,b._dbSchema,Le),((Ae=wd(il(0,(Ae=b).idbdb,Le),Ae._dbSchema)).add.length||Ae.change.some(function(ze){return ze.add.length||ze.change.length}))&&!V)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ke.close(),z=ke.version+1,V=!0,de(G());jc(b,Le)}catch{}Sa.push(b),ke.onversionchange=kt(function(ze){S.vcFired=!0,b.on("versionchange").fire(ze)}),ke.onclose=kt(function(ze){b.on("close").fire(ze)}),Z&&(Ae=b._deps,Le=se,ke=Ae.indexedDB,Ae=Ae.IDBKeyRange,lo(ke)||Le===Aa||Sd(ke,Ae).put({name:Le}).catch(te)),de()},ee)}).catch(function(de){switch(de==null?void 0:de.name){case"UnknownError":if(0<S.PR1398_maxLoop)return S.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),G();break;case"VersionError":if(0<z)return z=0,G()}return Ue.reject(de)})}var J,ne=S.dbReadyResolve,ae=null,Z=!1;return Ue.race([O,(typeof navigator>"u"?Ue.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(de){function ee(){return indexedDB.databases().finally(de)}J=setInterval(ee,100),ee()}).finally(function(){return clearInterval(J)}):Promise.resolve()).then(G)]).then(function(){return K(),S.onReadyBeingFired=[],Ue.resolve(Ad(function(){return b.on.ready.fire(b.vip)})).then(function de(){if(0<S.onReadyBeingFired.length){var ee=S.onReadyBeingFired.reduce(Mn,te);return S.onReadyBeingFired=[],Ue.resolve(Ad(function(){return ee(b.vip)})).then(de)}})}).finally(function(){S.openCanceller===O&&(S.onReadyBeingFired=null,S.isBeingOpened=!1)}).catch(function(de){S.dbOpenError=de;try{ae&&ae.abort()}catch{}return O===S.openCanceller&&b._close(),Nn(de)}).finally(function(){S.openComplete=!0,ne()}).then(function(){var de;return Z&&(de={},b.tables.forEach(function(ee){ee.schema.indexes.forEach(function(se){se.name&&(de["idb://".concat(b.name,"/").concat(ee.name,"/").concat(se.name)]=new lr(-1/0,[[[]]]))}),de["idb://".concat(b.name,"/").concat(ee.name,"/")]=de["idb://".concat(b.name,"/").concat(ee.name,"/:dels")]=new lr(-1/0,[[[]]])}),Ur(Ac).fire(de),Td(de,!0)),b})}function v(b){function S(V){return b.next(V)}var k=z(S),O=z(function(V){return b.throw(V)});function z(V){return function(J){var G=V(J),J=G.value;return G.done?J:J&&typeof J.then=="function"?J.then(k,O):o(J)?Promise.all(J).then(k,O):k(J)}}return z(S)()}function D(b,S,k){for(var O=o(b)?b.slice():[b],z=0;z<k;++z)O.push(S);return O}var L={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(b){return r(r({},b),{table:function(S){var k=b.table(S),O=k.schema,z={},V=[];function K(Z,de,ee){var se=un(Z),ue=z[se]=z[se]||[],le=Z==null?0:typeof Z=="string"?1:Z.length,fe=0<de,fe=r(r({},ee),{name:fe?"".concat(se,"(virtual-from:").concat(ee.name,")"):ee.name,lowLevelIndex:ee,isVirtual:fe,keyTail:de,keyLength:le,extractKey:ao(Z),unique:!fe&&ee.unique});return ue.push(fe),fe.isPrimaryKey||V.push(fe),1<le&&K(le===2?Z[0]:Z.slice(0,le-1),de+1,ee),ue.sort(function(be,_e){return be.keyTail-_e.keyTail}),fe}S=K(O.primaryKey.keyPath,0,O.primaryKey),z[":id"]=[S];for(var G=0,J=O.indexes;G<J.length;G++){var ne=J[G];K(ne.keyPath,0,ne)}function ae(Z){var de,ee=Z.query.index;return ee.isVirtual?r(r({},Z),{query:{index:ee.lowLevelIndex,range:(de=Z.query.range,ee=ee.keyTail,{type:de.type===1?2:de.type,lower:D(de.lower,de.lowerOpen?b.MAX_KEY:b.MIN_KEY,ee),lowerOpen:!0,upper:D(de.upper,de.upperOpen?b.MIN_KEY:b.MAX_KEY,ee),upperOpen:!0})}}):Z}return r(r({},k),{schema:r(r({},O),{primaryKey:S,indexes:V,getIndexByKeyPath:function(Z){return(Z=z[un(Z)])&&Z[0]}}),count:function(Z){return k.count(ae(Z))},query:function(Z){return k.query(ae(Z))},openCursor:function(Z){var de=Z.query.index,ee=de.keyTail,se=de.isVirtual,ue=de.keyLength;return se?k.openCursor(ae(Z)).then(function(fe){return fe&&le(fe)}):k.openCursor(Z);function le(fe){return Object.create(fe,{continue:{value:function(be){be!=null?fe.continue(D(be,Z.reverse?b.MAX_KEY:b.MIN_KEY,ee)):Z.unique?fe.continue(fe.key.slice(0,ue).concat(Z.reverse?b.MIN_KEY:b.MAX_KEY,ee)):fe.continue()}},continuePrimaryKey:{value:function(be,_e){fe.continuePrimaryKey(D(be,b.MAX_KEY,ee),_e)}},primaryKey:{get:function(){return fe.primaryKey}},key:{get:function(){var be=fe.key;return ue===1?be[0]:be.slice(0,ue)}},value:{get:function(){return fe.value}}})}}})}})}};function B(b,S,k,O){return k=k||{},O=O||"",a(b).forEach(function(z){var V,K,G;f(S,z)?(V=b[z],K=S[z],typeof V=="object"&&typeof K=="object"&&V&&K?(G=X(V))!==X(K)?k[O+z]=S[z]:G==="Object"?B(V,K,k,O+z+"."):V!==K&&(k[O+z]=S[z]):V!==K&&(k[O+z]=S[z])):k[O+z]=void 0}),a(S).forEach(function(z){f(b,z)||(k[O+z]=S[z])}),k}function he(b,S){return S.type==="delete"?S.keys:S.keys||S.values.map(b.extractKey)}var we={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(b){return r(r({},b),{table:function(S){var k=b.table(S),O=k.schema.primaryKey;return r(r({},k),{mutate:function(z){var V=Je.trans,K=V.table(S).hook,G=K.deleting,J=K.creating,ne=K.updating;switch(z.type){case"add":if(J.fire===te)break;return V._promise("readwrite",function(){return ae(z)},!0);case"put":if(J.fire===te&&ne.fire===te)break;return V._promise("readwrite",function(){return ae(z)},!0);case"delete":if(G.fire===te)break;return V._promise("readwrite",function(){return ae(z)},!0);case"deleteRange":if(G.fire===te)break;return V._promise("readwrite",function(){return function Z(de,ee,se){return k.query({trans:de,values:!1,query:{index:O,range:ee},limit:se}).then(function(ue){var le=ue.result;return ae({type:"delete",keys:le,trans:de}).then(function(fe){return 0<fe.numFailures?Promise.reject(fe.failures[0]):le.length<se?{failures:[],numFailures:0,lastResult:void 0}:Z(de,r(r({},ee),{lower:le[le.length-1],lowerOpen:!0}),se)})})}(z.trans,z.range,1e4)},!0)}return k.mutate(z);function ae(Z){var de,ee,se,ue=Je.trans,le=Z.keys||he(O,Z);if(!le)throw new Error("Keys missing");return(Z=Z.type==="add"||Z.type==="put"?r(r({},Z),{keys:le}):r({},Z)).type!=="delete"&&(Z.values=i([],Z.values)),Z.keys&&(Z.keys=i([],Z.keys)),de=k,se=le,((ee=Z).type==="add"?Promise.resolve([]):de.getMany({trans:ee.trans,keys:se,cache:"immutable"})).then(function(fe){var be=le.map(function(_e,Ae){var ke,Fe,Le,ze=fe[Ae],Ke={onerror:null,onsuccess:null};return Z.type==="delete"?G.fire.call(Ke,_e,ze,ue):Z.type==="add"||ze===void 0?(ke=J.fire.call(Ke,_e,Z.values[Ae],ue),_e==null&&ke!=null&&(Z.keys[Ae]=_e=ke,O.outbound||j(Z.values[Ae],O.keyPath,_e))):(ke=B(ze,Z.values[Ae]),(Fe=ne.fire.call(Ke,ke,_e,ze,ue))&&(Le=Z.values[Ae],Object.keys(Fe).forEach(function(We){f(Le,We)?Le[We]=Fe[We]:j(Le,We,Fe[We])}))),Ke});return k.mutate(Z).then(function(_e){for(var Ae=_e.failures,ke=_e.results,Fe=_e.numFailures,_e=_e.lastResult,Le=0;Le<le.length;++Le){var ze=(ke||le)[Le],Ke=be[Le];ze==null?Ke.onerror&&Ke.onerror(Ae[Le]):Ke.onsuccess&&Ke.onsuccess(Z.type==="put"&&fe[Le]?Z.values[Le]:ze)}return{failures:Ae,results:ke,numFailures:Fe,lastResult:_e}}).catch(function(_e){return be.forEach(function(Ae){return Ae.onerror&&Ae.onerror(_e)}),Promise.reject(_e)})})}}})}})}};function $e(b,S,k){try{if(!S||S.keys.length<b.length)return null;for(var O=[],z=0,V=0;z<S.keys.length&&V<b.length;++z)Pt(S.keys[z],b[V])===0&&(O.push(k?R(S.values[z]):S.values[z]),++V);return O.length===b.length?O:null}catch{return null}}var rn={stack:"dbcore",level:-1,create:function(b){return{table:function(S){var k=b.table(S);return r(r({},k),{getMany:function(O){if(!O.cache)return k.getMany(O);var z=$e(O.keys,O.trans._cache,O.cache==="clone");return z?Ue.resolve(z):k.getMany(O).then(function(V){return O.trans._cache={keys:O.keys,values:O.cache==="clone"?R(V):V},V})},mutate:function(O){return O.type!=="add"&&(O.trans._cache=null),k.mutate(O)}})}}}};function cr(b,S){return b.trans.mode==="readonly"&&!!b.subscr&&!b.trans.explicit&&b.trans.db._options.cache!=="disabled"&&!S.schema.primaryKey.outbound}function Lt(b,S){switch(b){case"query":return S.values&&!S.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Nr={stack:"dbcore",level:0,name:"Observability",create:function(b){var S=b.schema.name,k=new lr(b.MIN_KEY,b.MAX_KEY);return r(r({},b),{transaction:function(O,z,V){if(Je.subscr&&z!=="readonly")throw new me.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Je.querier));return b.transaction(O,z,V)},table:function(O){var z=b.table(O),V=z.schema,K=V.primaryKey,Z=V.indexes,G=K.extractKey,J=K.outbound,ne=K.autoIncrement&&Z.filter(function(ee){return ee.compound&&ee.keyPath.includes(K.keyPath)}),ae=r(r({},z),{mutate:function(ee){function se(We){return We="idb://".concat(S,"/").concat(O,"/").concat(We),_e[We]||(_e[We]=new lr)}var ue,le,fe,be=ee.trans,_e=ee.mutatedParts||(ee.mutatedParts={}),Ae=se(""),ke=se(":dels"),Fe=ee.type,Ke=ee.type==="deleteRange"?[ee.range]:ee.type==="delete"?[ee.keys]:ee.values.length<50?[he(K,ee).filter(function(We){return We}),ee.values]:[],Le=Ke[0],ze=Ke[1],Ke=ee.trans._cache;return o(Le)?(Ae.addKeys(Le),(Ke=Fe==="delete"||Le.length===ze.length?$e(Le,Ke):null)||ke.addKeys(Le),(Ke||ze)&&(ue=se,le=Ke,fe=ze,V.indexes.forEach(function(We){var Ge=ue(We.name||"");function Nt(At){return At!=null?We.extractKey(At):null}function Bt(At){return We.multiEntry&&o(At)?At.forEach(function(Bn){return Ge.addKey(Bn)}):Ge.addKey(At)}(le||fe).forEach(function(At,ii){var St=le&&Nt(le[ii]),ii=fe&&Nt(fe[ii]);Pt(St,ii)!==0&&(St!=null&&Bt(St),ii!=null&&Bt(ii))})}))):Le?(ze={from:(ze=Le.lower)!==null&&ze!==void 0?ze:b.MIN_KEY,to:(ze=Le.upper)!==null&&ze!==void 0?ze:b.MAX_KEY},ke.add(ze),Ae.add(ze)):(Ae.add(k),ke.add(k),V.indexes.forEach(function(We){return se(We.name).add(k)})),z.mutate(ee).then(function(We){return!Le||ee.type!=="add"&&ee.type!=="put"||(Ae.addKeys(We.results),ne&&ne.forEach(function(Ge){for(var Nt=ee.values.map(function(St){return Ge.extractKey(St)}),Bt=Ge.keyPath.findIndex(function(St){return St===K.keyPath}),At=0,Bn=We.results.length;At<Bn;++At)Nt[At][Bt]=We.results[At];se(Ge.name).addKeys(Nt)})),be.mutatedParts=kc(be.mutatedParts||{},_e),We})}}),Z=function(se){var ue=se.query,se=ue.index,ue=ue.range;return[se,new lr((se=ue.lower)!==null&&se!==void 0?se:b.MIN_KEY,(ue=ue.upper)!==null&&ue!==void 0?ue:b.MAX_KEY)]},de={get:function(ee){return[K,new lr(ee.key)]},getMany:function(ee){return[K,new lr().addKeys(ee.keys)]},count:Z,query:Z,openCursor:Z};return a(de).forEach(function(ee){ae[ee]=function(se){var ue=Je.subscr,le=!!ue,fe=cr(Je,z)&&Lt(ee,se)?se.obsSet={}:ue;if(le){var be=function(ze){return ze="idb://".concat(S,"/").concat(O,"/").concat(ze),fe[ze]||(fe[ze]=new lr)},_e=be(""),Ae=be(":dels"),ue=de[ee](se),le=ue[0],ue=ue[1];if((ee==="query"&&le.isPrimaryKey&&!se.values?Ae:be(le.name||"")).add(ue),!le.isPrimaryKey){if(ee!=="count"){var ke=ee==="query"&&J&&se.values&&z.query(r(r({},se),{values:!1}));return z[ee].apply(this,arguments).then(function(ze){if(ee==="query"){if(J&&se.values)return ke.then(function(Nt){return Nt=Nt.result,_e.addKeys(Nt),ze});var Ke=se.values?ze.result.map(G):ze.result;(se.values?_e:Ae).addKeys(Ke)}else if(ee==="openCursor"){var We=ze,Ge=se.values;return We&&Object.create(We,{key:{get:function(){return Ae.addKey(We.primaryKey),We.key}},primaryKey:{get:function(){var Nt=We.primaryKey;return Ae.addKey(Nt),Nt}},value:{get:function(){return Ge&&_e.addKey(We.primaryKey),We.value}}})}return ze})}Ae.add(k)}}return z[ee].apply(this,arguments)}}),ae}})}};function vr(b,S,k){if(k.numFailures===0)return S;if(S.type==="deleteRange")return null;var O=S.keys?S.keys.length:"values"in S&&S.values?S.values.length:1;return k.numFailures===O?null:(S=r({},S),o(S.keys)&&(S.keys=S.keys.filter(function(z,V){return!(V in k.failures)})),"values"in S&&o(S.values)&&(S.values=S.values.filter(function(z,V){return!(V in k.failures)})),S)}function Na(b,S){return k=b,((O=S).lower===void 0||(O.lowerOpen?0<Pt(k,O.lower):0<=Pt(k,O.lower)))&&(b=b,(S=S).upper===void 0||(S.upperOpen?Pt(b,S.upper)<0:Pt(b,S.upper)<=0));var k,O}function ki(b,S,de,O,z,V){if(!de||de.length===0)return b;var K=S.query.index,G=K.multiEntry,J=S.query.range,ne=O.schema.primaryKey.extractKey,ae=K.extractKey,Z=(K.lowLevelIndex||K).extractKey,de=de.reduce(function(ee,se){var ue=ee,le=[];if(se.type==="add"||se.type==="put")for(var fe=new lr,be=se.values.length-1;0<=be;--be){var _e,Ae=se.values[be],ke=ne(Ae);fe.hasKey(ke)||(_e=ae(Ae),(G&&o(_e)?_e.some(function(We){return Na(We,J)}):Na(_e,J))&&(fe.addKey(ke),le.push(Ae)))}switch(se.type){case"add":var Fe=new lr().addKeys(S.values?ee.map(function(Ge){return ne(Ge)}):ee),ue=ee.concat(S.values?le.filter(function(Ge){return Ge=ne(Ge),!Fe.hasKey(Ge)&&(Fe.addKey(Ge),!0)}):le.map(function(Ge){return ne(Ge)}).filter(function(Ge){return!Fe.hasKey(Ge)&&(Fe.addKey(Ge),!0)}));break;case"put":var Le=new lr().addKeys(se.values.map(function(Ge){return ne(Ge)}));ue=ee.filter(function(Ge){return!Le.hasKey(S.values?ne(Ge):Ge)}).concat(S.values?le:le.map(function(Ge){return ne(Ge)}));break;case"delete":var ze=new lr().addKeys(se.keys);ue=ee.filter(function(Ge){return!ze.hasKey(S.values?ne(Ge):Ge)});break;case"deleteRange":var Ke=se.range;ue=ee.filter(function(Ge){return!Na(ne(Ge),Ke)})}return ue},b);return de===b?b:(de.sort(function(ee,se){return Pt(Z(ee),Z(se))||Pt(ne(ee),ne(se))}),S.limit&&S.limit<1/0&&(de.length>S.limit?de.length=S.limit:b.length===S.limit&&de.length<S.limit&&(z.dirty=!0)),V?Object.freeze(de):de)}function Dc(b,S){return Pt(b.lower,S.lower)===0&&Pt(b.upper,S.upper)===0&&!!b.lowerOpen==!!S.lowerOpen&&!!b.upperOpen==!!S.upperOpen}function wp(b,S){return function(k,O,z,V){if(k===void 0)return O!==void 0?-1:0;if(O===void 0)return 1;if((O=Pt(k,O))===0){if(z&&V)return 0;if(z)return 1;if(V)return-1}return O}(b.lower,S.lower,b.lowerOpen,S.lowerOpen)<=0&&0<=function(k,O,z,V){if(k===void 0)return O!==void 0?1:0;if(O===void 0)return-1;if((O=Pt(k,O))===0){if(z&&V)return 0;if(z)return-1;if(V)return 1}return O}(b.upper,S.upper,b.upperOpen,S.upperOpen)}function LH(b,S,k,O){b.subscribers.add(k),O.addEventListener("abort",function(){var z,V;b.subscribers.delete(k),b.subscribers.size===0&&(z=b,V=S,setTimeout(function(){z.subscribers.size===0&&$(V,z)},3e3))})}var zH={stack:"dbcore",level:0,name:"Cache",create:function(b){var S=b.schema.name;return r(r({},b),{transaction:function(k,O,z){var V,K,G=b.transaction(k,O,z);return O==="readwrite"&&(K=(V=new AbortController).signal,z=function(J){return function(){if(V.abort(),O==="readwrite"){for(var ne=new Set,ae=0,Z=k;ae<Z.length;ae++){var de=Z[ae],ee=Ta["idb://".concat(S,"/").concat(de)];if(ee){var se=b.table(de),ue=ee.optimisticOps.filter(function(Ge){return Ge.trans===G});if(G._explicit&&J&&G.mutatedParts)for(var le=0,fe=Object.values(ee.queries.query);le<fe.length;le++)for(var be=0,_e=(Fe=fe[le]).slice();be<_e.length;be++)jd((Le=_e[be]).obsSet,G.mutatedParts)&&($(Fe,Le),Le.subscribers.forEach(function(Ge){return ne.add(Ge)}));else if(0<ue.length){ee.optimisticOps=ee.optimisticOps.filter(function(Ge){return Ge.trans!==G});for(var Ae=0,ke=Object.values(ee.queries.query);Ae<ke.length;Ae++)for(var Fe,Le,ze,Ke=0,We=(Fe=ke[Ae]).slice();Ke<We.length;Ke++)(Le=We[Ke]).res!=null&&G.mutatedParts&&(J&&!Le.dirty?(ze=Object.isFrozen(Le.res),ze=ki(Le.res,Le.req,ue,se,Le,ze),Le.dirty?($(Fe,Le),Le.subscribers.forEach(function(Ge){return ne.add(Ge)})):ze!==Le.res&&(Le.res=ze,Le.promise=Ue.resolve({result:ze}))):(Le.dirty&&$(Fe,Le),Le.subscribers.forEach(function(Ge){return ne.add(Ge)})))}}}ne.forEach(function(Ge){return Ge()})}}},G.addEventListener("abort",z(!1),{signal:K}),G.addEventListener("error",z(!1),{signal:K}),G.addEventListener("complete",z(!0),{signal:K})),G},table:function(k){var O=b.table(k),z=O.schema.primaryKey;return r(r({},O),{mutate:function(V){var K=Je.trans;if(z.outbound||K.db._options.cache==="disabled"||K.explicit||K.idbtrans.mode!=="readwrite")return O.mutate(V);var G=Ta["idb://".concat(S,"/").concat(k)];return G?(K=O.mutate(V),V.type!=="add"&&V.type!=="put"||!(50<=V.values.length||he(z,V).some(function(J){return J==null}))?(G.optimisticOps.push(V),V.mutatedParts&&Tr(V.mutatedParts),K.then(function(J){0<J.numFailures&&($(G.optimisticOps,V),(J=vr(0,V,J))&&G.optimisticOps.push(J),V.mutatedParts&&Tr(V.mutatedParts))}),K.catch(function(){$(G.optimisticOps,V),V.mutatedParts&&Tr(V.mutatedParts)})):K.then(function(J){var ne=vr(0,r(r({},V),{values:V.values.map(function(ae,Z){var de;return J.failures[Z]?ae:(ae=(de=z.keyPath)!==null&&de!==void 0&&de.includes(".")?R(ae):r({},ae),j(ae,z.keyPath,J.results[Z]),ae)})}),J);G.optimisticOps.push(ne),queueMicrotask(function(){return V.mutatedParts&&Tr(V.mutatedParts)})}),K):O.mutate(V)},query:function(V){if(!cr(Je,O)||!Lt("query",V))return O.query(V);var K=((ne=Je.trans)===null||ne===void 0?void 0:ne.db._options.cache)==="immutable",Z=Je,G=Z.requery,J=Z.signal,ne=function(se,ue,le,fe){var be=Ta["idb://".concat(se,"/").concat(ue)];if(!be)return[];if(!(ue=be.queries[le]))return[null,!1,be,null];var _e=ue[(fe.query?fe.query.index.name:null)||""];if(!_e)return[null,!1,be,null];switch(le){case"query":var Ae=_e.find(function(ke){return ke.req.limit===fe.limit&&ke.req.values===fe.values&&Dc(ke.req.query.range,fe.query.range)});return Ae?[Ae,!0,be,_e]:[_e.find(function(ke){return("limit"in ke.req?ke.req.limit:1/0)>=fe.limit&&(!fe.values||ke.req.values)&&wp(ke.req.query.range,fe.query.range)}),!1,be,_e];case"count":return Ae=_e.find(function(ke){return Dc(ke.req.query.range,fe.query.range)}),[Ae,!!Ae,be,_e]}}(S,k,"query",V),ae=ne[0],Z=ne[1],de=ne[2],ee=ne[3];return ae&&Z?ae.obsSet=V.obsSet:(Z=O.query(V).then(function(se){var ue=se.result;if(ae&&(ae.res=ue),K){for(var le=0,fe=ue.length;le<fe;++le)Object.freeze(ue[le]);Object.freeze(ue)}else se.result=R(ue);return se}).catch(function(se){return ee&&ae&&$(ee,ae),Promise.reject(se)}),ae={obsSet:V.obsSet,promise:Z,subscribers:new Set,type:"query",req:V,dirty:!1},ee?ee.push(ae):(ee=[ae],(de=de||(Ta["idb://".concat(S,"/").concat(k)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[V.query.index.name||""]=ee)),LH(ae,ee,G,J),ae.promise.then(function(se){return{result:ki(se.result,V,de==null?void 0:de.optimisticOps,O,ae,K)}})}})}})}};function Uv(b,S){return new Proxy(b,{get:function(k,O,z){return O==="db"?S:Reflect.get(k,O,z)}})}var uo=(Jn.prototype.version=function(b){if(isNaN(b)||b<.1)throw new me.Type("Given version is not a positive number");if(b=Math.round(10*b)/10,this.idbdb||this._state.isBeingOpened)throw new me.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,b);var S=this._versions,k=S.filter(function(O){return O._cfg.version===b})[0];return k||(k=new this.Version(b),S.push(k),S.sort(xd),k.stores({}),this._state.autoSchema=!1,k)},Jn.prototype._whenReady=function(b){var S=this;return this.idbdb&&(this._state.openComplete||Je.letThrough||this._vip)?b():new Ue(function(k,O){if(S._state.openComplete)return O(new me.DatabaseClosed(S._state.dbOpenError));if(!S._state.isBeingOpened){if(!S._state.autoOpen)return void O(new me.DatabaseClosed);S.open().catch(te)}S._state.dbReadyPromise.then(k,O)}).then(b)},Jn.prototype.use=function(b){var S=b.stack,k=b.create,O=b.level,z=b.name;return z&&this.unuse({stack:S,name:z}),b=this._middlewares[S]||(this._middlewares[S]=[]),b.push({stack:S,create:k,level:O??10,name:z}),b.sort(function(V,K){return V.level-K.level}),this},Jn.prototype.unuse=function(b){var S=b.stack,k=b.name,O=b.create;return S&&this._middlewares[S]&&(this._middlewares[S]=this._middlewares[S].filter(function(z){return O?z.create!==O:!!k&&z.name!==k})),this},Jn.prototype.open=function(){var b=this;return Us($r,function(){return ll(b)})},Jn.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var b=this._state,S=Sa.indexOf(this);if(0<=S&&Sa.splice(S,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}b.isBeingOpened||(b.dbReadyPromise=new Ue(function(k){b.dbReadyResolve=k}),b.openCanceller=new Ue(function(k,O){b.cancelOpen=O}))},Jn.prototype.close=function(k){var S=(k===void 0?{disableAutoOpen:!0}:k).disableAutoOpen,k=this._state;S?(k.isBeingOpened&&k.cancelOpen(new me.DatabaseClosed),this._close(),k.autoOpen=!1,k.dbOpenError=new me.DatabaseClosed):(this._close(),k.autoOpen=this._options.autoOpen||k.isBeingOpened,k.openComplete=!1,k.dbOpenError=null)},Jn.prototype.delete=function(b){var S=this;b===void 0&&(b={disableAutoOpen:!0});var k=0<arguments.length&&typeof arguments[0]!="object",O=this._state;return new Ue(function(z,V){function K(){S.close(b);var G=S._deps.indexedDB.deleteDatabase(S.name);G.onsuccess=kt(function(){var J,ne,ae;J=S._deps,ne=S.name,ae=J.indexedDB,J=J.IDBKeyRange,lo(ae)||ne===Aa||Sd(ae,J).delete(ne).catch(te),z()}),G.onerror=Br(V),G.onblocked=S._fireOnBlocked}if(k)throw new me.InvalidArgument("Invalid closeOptions argument to db.delete()");O.isBeingOpened?O.dbReadyPromise.then(K):K()})},Jn.prototype.backendDB=function(){return this.idbdb},Jn.prototype.isOpen=function(){return this.idbdb!==null},Jn.prototype.hasBeenClosed=function(){var b=this._state.dbOpenError;return b&&b.name==="DatabaseClosed"},Jn.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Jn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Jn.prototype,"tables",{get:function(){var b=this;return a(this._allTables).map(function(S){return b._allTables[S]})},enumerable:!1,configurable:!0}),Jn.prototype.transaction=function(){var b=(function(S,k,O){var z=arguments.length;if(z<2)throw new me.InvalidArgument("Too few arguments");for(var V=new Array(z-1);--z;)V[z-1]=arguments[z];return O=V.pop(),[S,I(V),O]}).apply(this,arguments);return this._transaction.apply(this,b)},Jn.prototype._transaction=function(b,S,k){var O=this,z=Je.trans;z&&z.db===this&&b.indexOf("!")===-1||(z=null);var V,K,G=b.indexOf("?")!==-1;b=b.replace("!","").replace("?","");try{if(K=S.map(function(ne){if(ne=ne instanceof O.Table?ne.name:ne,typeof ne!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return ne}),b=="r"||b===Ws)V=Ws;else{if(b!="rw"&&b!=vc)throw new me.InvalidArgument("Invalid transaction mode: "+b);V=vc}if(z){if(z.mode===Ws&&V===vc){if(!G)throw new me.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");z=null}z&&K.forEach(function(ne){if(z&&z.storeNames.indexOf(ne)===-1){if(!G)throw new me.SubTransaction("Table "+ne+" not included in parent transaction.");z=null}}),G&&z&&!z.active&&(z=null)}}catch(ne){return z?z._promise(null,function(ae,Z){Z(ne)}):Nn(ne)}var J=(function ne(ae,Z,de,ee,se){return Ue.resolve().then(function(){var ue=Je.transless||Je,le=ae._createTransaction(Z,de,ae._dbSchema,ee);if(le.explicit=!0,ue={trans:le,transless:ue},ee)le.idbtrans=ee.idbtrans;else try{le.create(),le.idbtrans._explicit=!0,ae._state.PR1398_maxLoop=3}catch(_e){return _e.name===Me.InvalidState&&ae.isOpen()&&0<--ae._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ae.close({disableAutoOpen:!1}),ae.open().then(function(){return ne(ae,Z,de,null,se)})):Nn(_e)}var fe,be=ce(se);return be&&to(),ue=Ue.follow(function(){var _e;(fe=se.call(le,le))&&(be?(_e=bs.bind(null,null),fe.then(_e,_e)):typeof fe.next=="function"&&typeof fe.throw=="function"&&(fe=v(fe)))},ue),(fe&&typeof fe.then=="function"?Ue.resolve(fe).then(function(_e){return le.active?_e:Nn(new me.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ue.then(function(){return fe})).then(function(_e){return ee&&le._resolve(),le._completion.then(function(){return _e})}).catch(function(_e){return le._reject(_e),Nn(_e)})})}).bind(null,this,V,K,z,k);return z?z._promise(V,J,"lock"):Je.trans?Us(Je.transless,function(){return O._whenReady(J)}):this._whenReady(J)},Jn.prototype.table=function(b){if(!f(this._allTables,b))throw new me.InvalidTable("Table ".concat(b," does not exist"));return this._allTables[b]},Jn);function Jn(b,S){var k=this;this._middlewares={},this.verno=0;var O=Jn.dependencies;this._options=S=r({addons:Jn.addons,autoOpen:!0,indexedDB:O.indexedDB,IDBKeyRange:O.IDBKeyRange,cache:"cloned"},S),this._deps={indexedDB:S.indexedDB,IDBKeyRange:S.IDBKeyRange},O=S.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var z,V,K,G,J,ne={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:te,dbReadyPromise:null,cancelOpen:te,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:S.autoOpen};ne.dbReadyPromise=new Ue(function(Z){ne.dbReadyResolve=Z}),ne.openCanceller=new Ue(function(Z,de){ne.cancelOpen=de}),this._state=ne,this.name=b,this.on=Xo(this,"populate","blocked","versionchange","close",{ready:[Mn,te]}),this.once=function(Z,de){var ee=function(){for(var se=[],ue=0;ue<arguments.length;ue++)se[ue]=arguments[ue];k.on(Z).unsubscribe(ee),de.apply(k,se)};return k.on(Z,ee)},this.on.ready.subscribe=_(this.on.ready.subscribe,function(Z){return function(de,ee){Jn.vip(function(){var se,ue=k._state;ue.openComplete?(ue.dbOpenError||Ue.resolve().then(de),ee&&Z(de)):ue.onReadyBeingFired?(ue.onReadyBeingFired.push(de),ee&&Z(de)):(Z(de),se=k,ee||Z(function le(){se.on.ready.unsubscribe(de),se.on.ready.unsubscribe(le)}))})}}),this.Collection=(z=this,Zo(_c.prototype,function(fe,le){this.db=z;var ee=lp,se=null;if(le)try{ee=le()}catch(be){se=be}var ue=fe._ctx,le=ue.table,fe=le.hook.reading.fire;this._ctx={table:le,index:ue.index,isPrimKey:!ue.index||le.schema.primKey.keyPath&&ue.index===le.schema.primKey.name,range:ee,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:se,or:ue.or,valueMapper:fe!==Te?fe:null}})),this.Table=(V=this,Zo(Vv.prototype,function(Z,de,ee){this.db=V,this._tx=ee,this.name=Z,this.schema=de,this.hook=V._allTables[Z]?V._allTables[Z].hook:Xo(null,{creating:[nt,te],reading:[ot,Te],updating:[Xt,te],deleting:[st,te]})})),this.Transaction=(K=this,Zo(M1.prototype,function(Z,de,ee,se,ue){var le=this;Z!=="readonly"&&de.forEach(function(fe){fe=(fe=ee[fe])===null||fe===void 0?void 0:fe.yProps,fe&&(de=de.concat(fe.map(function(be){return be.updatesTable})))}),this.db=K,this.mode=Z,this.storeNames=de,this.schema=ee,this.chromeTransactionDurability=se,this.idbtrans=null,this.on=Xo(this,"complete","error","abort"),this.parent=ue||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ue(function(fe,be){le._resolve=fe,le._reject=be}),this._completion.then(function(){le.active=!1,le.on.complete.fire()},function(fe){var be=le.active;return le.active=!1,le.on.error.fire(fe),le.parent?le.parent._reject(fe):be&&le.idbtrans&&le.idbtrans.abort(),Nn(fe)})})),this.Version=(G=this,Zo(_d.prototype,function(Z){this.db=G,this._cfg={version:Z,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(J=this,Zo(hp.prototype,function(Z,de,ee){if(this.db=J,this._ctx={table:Z,index:de===":id"?null:de,or:ee},this._cmp=this._ascending=Pt,this._descending=function(se,ue){return Pt(ue,se)},this._max=function(se,ue){return 0<Pt(se,ue)?se:ue},this._min=function(se,ue){return Pt(se,ue)<0?se:ue},this._IDBKeyRange=J._deps.IDBKeyRange,!this._IDBKeyRange)throw new me.MissingAPI})),this.on("versionchange",function(Z){0<Z.newVersion?console.warn("Another connection wants to upgrade database '".concat(k.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(k.name,"'. Closing db now to resume the delete request.")),k.close({disableAutoOpen:!1})}),this.on("blocked",function(Z){!Z.newVersion||Z.newVersion<Z.oldVersion?console.warn("Dexie.delete('".concat(k.name,"') was blocked")):console.warn("Upgrade '".concat(k.name,"' blocked by other connection holding version ").concat(Z.oldVersion/10))}),this._maxKey=Ks(S.IDBKeyRange),this._createTransaction=function(Z,de,ee,se){return new k.Transaction(Z,de,ee,k._options.chromeTransactionDurability,se)},this._fireOnBlocked=function(Z){k.on("blocked").fire(Z),Sa.filter(function(de){return de.name===k.name&&de!==k&&!de._state.vcFired}).map(function(de){return de.on("versionchange").fire(Z)})},this.use(rn),this.use(zH),this.use(Nr),this.use(L),this.use(we);var ae=new Proxy(this,{get:function(Z,de,ee){if(de==="_vip")return!0;if(de==="table")return function(ue){return Uv(k.table(ue),ae)};var se=Reflect.get(Z,de,ee);return se instanceof Vv?Uv(se,ae):de==="tables"?se.map(function(ue){return Uv(ue,ae)}):de==="_createTransaction"?function(){return Uv(se.apply(this,arguments),ae)}:se}});this.vip=ae,O.forEach(function(Z){return Z(k)})}var Wv,ws=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",$H=(z1.prototype.subscribe=function(b,S,k){return this._subscribe(b&&typeof b!="function"?b:{next:b,error:S,complete:k})},z1.prototype[ws]=function(){return this},z1);function z1(b){this._subscribe=b}try{Wv={indexedDB:s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.msIndexedDB,IDBKeyRange:s.IDBKeyRange||s.webkitIDBKeyRange}}catch{Wv={indexedDB:null,IDBKeyRange:null}}function GP(b){var S,k=!1,O=new $H(function(z){var V=ce(b),K,G=!1,J={},ne={},ae={get closed(){return G},unsubscribe:function(){G||(G=!0,K&&K.abort(),Z&&Ur.storagemutated.unsubscribe(ee))}};z.start&&z.start(ae);var Z=!1,de=function(){return gd(se)},ee=function(ue){kc(J,ue),jd(ne,J)&&de()},se=function(){var ue,le,fe;!G&&Wv.indexedDB&&(J={},ue={},K&&K.abort(),K=new AbortController,fe=function(be){var _e=dt();try{V&&to();var Ae=Gi(b,be);return Ae=V?Ae.finally(bs):Ae}finally{_e&&gn()}}(le={subscr:ue,signal:K.signal,requery:de,querier:b,trans:null}),Promise.resolve(fe).then(function(be){k=!0,S=be,G||le.signal.aborted||(J={},function(_e){for(var Ae in _e)if(f(_e,Ae))return;return 1}(ne=ue)||Z||(Ur(Ac,ee),Z=!0),gd(function(){return!G&&z.next&&z.next(be)}))},function(be){k=!1,["DatabaseClosedError","AbortError"].includes(be==null?void 0:be.name)||G||gd(function(){G||z.error&&z.error(be)})}))};return setTimeout(de,0),ae});return O.hasValue=function(){return k},O.getValue=function(){return S},O}var Ic=uo;function $1(b){var S=cl;try{cl=!0,Ur.storagemutated.fire(b),Td(b,!0)}finally{cl=S}}h(Ic,r(r({},Xe),{delete:function(b){return new Ic(b,{addons:[]}).delete()},exists:function(b){return new Ic(b,{addons:[]}).open().then(function(S){return S.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(b){try{return S=Ic.dependencies,k=S.indexedDB,S=S.IDBKeyRange,(lo(k)?Promise.resolve(k.databases()).then(function(O){return O.map(function(z){return z.name}).filter(function(z){return z!==Aa})}):Sd(k,S).toCollection().primaryKeys()).then(b)}catch{return Nn(new me.MissingAPI)}var S,k},defineClass:function(){return function(b){c(this,b)}},ignoreTransaction:function(b){return Je.trans?Us(Je.transless,b):b()},vip:Ad,async:function(b){return function(){try{var S=v(b.apply(this,arguments));return S&&typeof S.then=="function"?S:Ue.resolve(S)}catch(k){return Nn(k)}}},spawn:function(b,S,k){try{var O=v(b.apply(k,S||[]));return O&&typeof O.then=="function"?O:Ue.resolve(O)}catch(z){return Nn(z)}},currentTransaction:{get:function(){return Je.trans||null}},waitFor:function(b,S){return S=Ue.resolve(typeof b=="function"?Ic.ignoreTransaction(b):b).timeout(S||6e4),Je.trans?Je.trans.waitFor(S):S},Promise:Ue,debug:{get:function(){return Ft},set:function(b){or(b)}},derive:m,extend:c,props:h,override:_,Events:Xo,on:Ur,liveQuery:GP,extendObservabilitySet:kc,getByKeyPath:C,setByKeyPath:j,delByKeyPath:function(b,S){typeof S=="string"?j(b,S,void 0):"length"in S&&[].map.call(S,function(k){j(b,k,void 0)})},shallowClone:T,deepClone:R,getObjectDiff:B,cmp:Pt,asap:E,minKey:-1/0,addons:[],connections:Sa,errnames:Me,dependencies:Wv,cache:Ta,semVer:"4.2.0",version:"4.2.0".split(".").map(function(b){return parseInt(b)}).reduce(function(b,S,k){return b+S/Math.pow(10,2*k)})})),Ic.maxKey=Ks(Ic.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ur(Ac,function(b){cl||(b=new CustomEvent(pp,{detail:b}),cl=!0,dispatchEvent(b),cl=!1)}),addEventListener(pp,function(b){b=b.detail,cl||$1(b)}));var Nd,cl=!1,YP=function(){};return typeof BroadcastChannel<"u"&&((YP=function(){(Nd=new BroadcastChannel(pp)).onmessage=function(b){return b.data&&$1(b.data)}})(),typeof Nd.unref=="function"&&Nd.unref(),Ur(Ac,function(b){cl||Nd.postMessage(b)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(b){if(!uo.disableBfCache&&b.persisted){Ft&&console.debug("Dexie: handling persisted pagehide"),Nd!=null&&Nd.close();for(var S=0,k=Sa;S<k.length;S++)k[S].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(b){!uo.disableBfCache&&b.persisted&&(Ft&&console.debug("Dexie: handling persisted pageshow"),YP(),$1({all:new lr(-1/0,[[]])}))})),Ue.rejectionMapper=function(b,S){return!b||b instanceof oe||b instanceof TypeError||b instanceof SyntaxError||!b.name||!Ye[b.name]?b:(S=new Ye[b.name](S||b.message,b),"stack"in b&&g(S,"stack",{get:function(){return this.inner.stack}}),S)},or(Ft),r(uo,Object.freeze({__proto__:null,Dexie:uo,liveQuery:GP,Entity:cp,cmp:Pt,PropModification:Ea,replacePrefix:function(b,S){return new Ea({replacePrefix:[b,S]})},add:function(b){return new Ea({add:b})},remove:function(b){return new Ea({remove:b})},default:uo,RangeSet:lr,mergeRanges:al,rangesOverlap:Nc}),{default:uo}),uo})})(AF);var fee=AF.exports;const oE=tn(fee),gI=Symbol.for("Dexie"),qf=globalThis[gI]||(globalThis[gI]=oE);if(oE.semVer!==qf.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${oE.semVer} and ${qf.semVer}`);const{liveQuery:AFe,mergeRanges:EFe,rangesOverlap:jFe,RangeSet:CFe,cmp:TFe,Entity:NFe,PropModification:PFe,replacePrefix:kFe,add:DFe,remove:IFe,DexieYProvider:OFe}=qf,EF="GanaderoOS_DB",jF=20;class hee extends qf{constructor(){super(EF);Wr(this,"animals");Wr(this,"fathers");Wr(this,"parturitions");Wr(this,"weighings");Wr(this,"lots");Wr(this,"origins");Wr(this,"breedingSeasons");Wr(this,"sireLots");Wr(this,"serviceRecords");Wr(this,"events");Wr(this,"feedingPlans");Wr(this,"bodyWeighings");Wr(this,"products");Wr(this,"healthPlans");Wr(this,"planActivities");Wr(this,"healthEvents");this.version(jF).stores({animals:"&id, userId, status, location, motherId, fatherId, sireLotId, _synced",fathers:"&id, userId, _synced",parturitions:"&id, userId, goatId, status, _synced",weighings:"&id, userId, goatId, date, _synced",lots:"&id, userId, &name, parentLotId, _synced",origins:"&id, userId, &name, _synced",breedingSeasons:"&id, userId, &name, status, _synced",sireLots:"&id, userId, seasonId, sireId, _synced",serviceRecords:"&id, userId, sireLotId, femaleId, _synced",events:"&id, userId, animalId, date, type, lotName, _synced",feedingPlans:"&id, userId, lotName, _synced",bodyWeighings:"&id, userId, animalId, date, _synced",products:"&id, userId, &name, category, _synced",healthPlans:"&id, userId, &name, targetGroup, _synced",planActivities:"&id, userId, healthPlanId, category, _synced",healthEvents:"&id, userId, animalId, date, activityId, _synced"})}}let gm=null;const pee=async()=>{if(gm)return gm;const t=new hee;try{return await t.open(),console.log("Base de datos local abierta con éxito (v"+jF+")."),gm=t,t}catch(e){return console.error("Error al abrir la base de datos local.",e),e.name==="VersionError"?console.log("Dexie intentará actualizar la estructura de la base de datos."):confirm("Error al iniciar la base de datos local. ¿Deseas forzar el reinicio? (Tus datos en la nube están seguros). La aplicación se recargará.")?(await qf.delete(EF),window.location.reload()):alert("La aplicación no puede continuar sin una base de datos funcional."),new Promise(()=>{})}},Dt=()=>{if(!gm)throw new Error("La base de datos no ha sido inicializada. Llama a initDB() primero.");return gm},Hr=[];for(let t=0;t<256;++t)Hr.push((t+256).toString(16).slice(1));function mee(t,e=0){return(Hr[t[e+0]]+Hr[t[e+1]]+Hr[t[e+2]]+Hr[t[e+3]]+"-"+Hr[t[e+4]]+Hr[t[e+5]]+"-"+Hr[t[e+6]]+Hr[t[e+7]]+"-"+Hr[t[e+8]]+Hr[t[e+9]]+"-"+Hr[t[e+10]]+Hr[t[e+11]]+Hr[t[e+12]]+Hr[t[e+13]]+Hr[t[e+14]]+Hr[t[e+15]]).toLowerCase()}let E_;const gee=new Uint8Array(16);function vee(){if(!E_){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");E_=crypto.getRandomValues.bind(crypto)}return E_(gee)}const yee=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),vI={randomUUID:yee};function bee(t,e,n){var i;t=t||{};const r=t.random??((i=t.rng)==null?void 0:i.call(t))??vee();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,mee(r)}function ci(t,e,n){return vI.randomUUID&&!t?vI.randomUUID():bee(t)}const CF=N.createContext({}),rt=()=>N.useContext(CF),Un=async(t,e,n)=>{try{const r=Object.entries(n).reduce((c,[u,d])=>(d!==void 0&&u!=="_synced"&&(c[u]=d),c),{}),i=Dt()[t],s=await i.get(e),a=!s||!s.createdAt||n.createdAt===mI(),o={...r};a&&!r.createdAt?o.createdAt=mI():(r.createdAt===null||r.createdAt===void 0)&&delete o.createdAt,await aee(xr(pn,t,e),o,{merge:!0}),await i.update(e,{_synced:!0})}catch(r){console.error(`Firestore sync for ${t} (${e}) failed:`,r);const i=Dt()[t];try{await i.update(e,{_synced:!1})}catch(s){console.error(`Failed to update sync status locally for ${t} (${e}):`,s)}}},xee=({children:t})=>{const{currentUser:e}=SF(),[n,r]=N.useState([]),[i,s]=N.useState([]),[a,o]=N.useState([]),[c,u]=N.useState([]),[d,f]=N.useState([]),[h,p]=N.useState([]),[g,m]=N.useState([]),[y,x]=N.useState([]),[w,_]=N.useState([]),[A,E]=N.useState([]),[C,j]=N.useState([]),[T,P]=N.useState([]),[I,M]=N.useState([]),[F,R]=N.useState([]),[H,X]=N.useState([]),[W,U]=N.useState([]),[$,Y]=N.useState(!0),[Q,ce]=N.useState(navigator.onLine?"idle":"offline"),ie=N.useRef(null),oe=N.useRef([]),ve=N.useRef(!1),je=async()=>{if(ve.current||oe.current.length===0||!navigator.onLine){oe.current.length===0&&!ve.current&&ce("idle");return}ve.current=!0,ce("syncing");const re=oe.current.shift();if(re)try{await re()}catch(pe){console.error("Sync Queue: Error processing item:",pe)}ve.current=!1,oe.current.length>0?setTimeout(je,100):(ce("idle"),ie.current&&clearTimeout(ie.current),ie.current=setTimeout(()=>{oe.current.length===0&&!ve.current&&ce("idle")},2e3))},Se=re=>{oe.current.push(re),ve.current||je()},Me=N.useCallback(async()=>{try{const re=Dt(),[pe,ye,Re,Ve,qt,dt,gn,ct,Xn,kt,nn,Cr,Ni,Fr,Qo,sp]=await Promise.all([re.animals.toArray(),re.fathers.toArray(),re.weighings.toArray(),re.parturitions.toArray(),re.lots.toArray(),re.origins.toArray(),re.breedingSeasons.toArray(),re.sireLots.toArray(),re.serviceRecords.toArray(),re.events.toArray(),re.feedingPlans.toArray(),re.bodyWeighings.toArray(),re.products.toArray(),re.healthPlans.toArray(),re.planActivities.toArray(),re.healthEvents.toArray()]);r(pe),s(ye),o(Re),u(Ve),f(qt),p(dt),m(gn),x(ct),_(Xn),E(kt),j(nn),P(Cr),M(Ni),R(Fr),X(Qo),U(sp)}catch(re){console.error("Error al cargar datos locales:",re)}finally{$&&Y(!1)}},[$]);N.useEffect(()=>{let re=[];const pe=()=>{ce("idle"),je()},ye=()=>ce("offline");return window.addEventListener("online",pe),window.addEventListener("offline",ye),(async()=>{if(!e){Y(!1),r([]),s([]),o([]),u([]),f([]),p([]),m([]),x([]),_([]),E([]),j([]),P([]),M([]),R([]),X([]),U([]);return}Y(!0);try{const Ve=await pee();await Me();const qt=gn=>tee(WC(pn,gn),nee("userId","==",e.uid)),dt=(gn,ct)=>{const Xn=oee(qt(gn),async kt=>{if(kt.metadata.hasPendingWrites)return;const nn=kt.docChanges().map(Cr=>{const Ni={id:Cr.doc.id,...Cr.doc.data()};return Object.keys(Ni).forEach(Fr=>{Ni[Fr]instanceof pr&&(Ni[Fr]=Ni[Fr].toMillis())}),{type:Cr.type,data:Ni}});if(nn.length>0){navigator.onLine&&Q!=="syncing"&&(ce("syncing"),ie.current&&clearTimeout(ie.current),ie.current=setTimeout(()=>{oe.current.length===0&&!ve.current&&ce("idle")},2e3));try{await Ve.transaction("rw",ct,async()=>{for(const Cr of nn)Cr.data._synced=!0,Cr.type==="added"||Cr.type==="modified"?await ct.put(Cr.data):Cr.type==="removed"&&await ct.delete(Cr.data.id)}),await Me()}catch(Cr){console.error(`Dexie transaction error during sync for ${gn}:`,Cr)}}},kt=>{kt.code==="permission-denied"?console.warn(`Permission denied for ${gn}.`):console.error(`Firestore snapshot error for ${gn}:`,kt)});re.push(Xn)};dt("animals",Ve.animals),dt("fathers",Ve.fathers),dt("parturitions",Ve.parturitions),dt("weighings",Ve.weighings),dt("lots",Ve.lots),dt("origins",Ve.origins),dt("breedingSeasons",Ve.breedingSeasons),dt("sireLots",Ve.sireLots),dt("serviceRecords",Ve.serviceRecords),dt("events",Ve.events),dt("feedingPlans",Ve.feedingPlans),dt("bodyWeighings",Ve.bodyWeighings),dt("products",Ve.products),dt("healthPlans",Ve.healthPlans),dt("planActivities",Ve.planActivities),dt("healthEvents",Ve.healthEvents)}catch(Ve){console.error("Fallo crítico en la inicialización:",Ve),Y(!1)}})(),()=>{re.forEach(Ve=>Ve()),window.removeEventListener("online",pe),window.removeEventListener("offline",ye),ie.current&&clearTimeout(ie.current)}},[e,Me]);const Qe=re=>{e&&(async()=>{try{const pe=Dt(),ye={id:ci(),...re,userId:e.uid,_synced:!1};await pe.events.put(ye),Se(()=>Un("events",ye.id,ye)),setTimeout(Me,50)}catch(pe){console.error("Error en registro de evento local:",pe)}})()},me=async re=>{if(!e)throw new Error("Usuario no autenticado");const pe=Dt(),ye=(re.id?re.id:`REF-${Date.now()}`).toUpperCase(),Re={...re,id:ye,userId:e.uid,createdAt:Date.now(),_synced:!1};await pe.animals.put(Re),Re.birthDate&&Re.birthDate!=="N/A"?Qe({animalId:Re.id,date:Re.birthDate,type:"Nacimiento",details:`Nacido con ${Re.birthWeight||"N/A"} Kg. Madre: ${Re.motherId||"N/A"}. Padre: ${Re.fatherId||"N/A"}.`,lotName:Re.location}):Qe({animalId:Re.id,date:new Date(Re.createdAt).toISOString().split("T")[0],type:"Registro",details:`Animal ${Re.isReference?"de Referencia ":""}registrado en el sistema. Datos de nacimiento no especificados.`,lotName:Re.location}),Me(),Se(()=>Un("animals",Re.id,Re))},Ye=async(re,pe)=>{if(!e)throw new Error("Usuario no autenticado");const ye=Dt(),Re=re.toUpperCase(),Ve=new Date().toISOString().split("T")[0],qt=await ye.animals.get(Re);if(!qt)throw new Error("Animal no encontrado para actualizar");pe.birthDate&&pe.birthDate!=="N/A"&&!pe.lifecycleStage?pe.lifecycleStage=wee(pe.birthDate,qt.sex):(pe.birthDate==="N/A"||pe.birthDate==="")&&!pe.lifecycleStage&&(delete pe.lifecycleStage,pe.birthDate="N/A");const dt={...pe,_synced:!1};await ye.animals.update(Re,dt),pe.location!==void 0&&pe.location!==qt.location&&Qe({animalId:Re,date:Ve,type:"Movimiento",details:`Movido de '${qt.location||"Sin Asignar"}' a '${pe.location||"Sin Asignar"}'`,lotName:pe.location||""}),pe.reproductiveStatus!==void 0&&pe.reproductiveStatus!==qt.reproductiveStatus&&Qe({animalId:Re,date:Ve,type:"Cambio de Estado",details:`Estado reproductivo: ${pe.reproductiveStatus}`}),pe.status!==void 0&&pe.status!==qt.status&&Qe({animalId:Re,date:pe.endDate||Ve,type:"Cambio de Estado",details:`Animal dado de baja: ${pe.status} ${pe.cullReason?`(${pe.cullReason})`:""}`}),pe.weaningDate&&!qt.weaningDate&&Qe({animalId:Re,date:pe.weaningDate,type:"Cambio de Estado",details:`Destetado con ${pe.weaningWeight||"N/A"} Kg`}),Me();const gn=await ye.animals.get(Re);gn&&Se(()=>Un("animals",Re,gn))},Xe=async re=>{if(!e)throw new Error("Usuario no autenticado");const pe=Dt(),ye=re.toUpperCase();await pe.animals.delete(ye),Me(),Se(()=>Mc(xr(pn,"animals",ye)).catch(Re=>console.error("Firestore delete sync failed:",Re)))},te=async re=>{if(!e)throw new Error("Usuario no autenticado");const pe=Dt(),ye=await pe.parturitions.get(re);if(!ye)throw new Error("Parto no encontrado");const Re={status:"en-secado",dryingStartDate:new Date().toISOString().split("T")[0],_synced:!1};await pe.parturitions.update(re,Re),Qe({animalId:ye.goatId,date:Re.dryingStartDate,type:"Cambio de Estado",details:`Inició proceso de secado (Lactancia de ${ye.parturitionDate})`}),Me();const Ve=await pe.parturitions.get(re);Ve&&Se(()=>Un("parturitions",re,Ve))},Te=async re=>{if(!e)throw new Error("Usuario no autenticado");const pe=Dt(),ye=await pe.parturitions.get(re);if(!ye)throw new Error("Parto no encontrado");const Re={status:"seca",_synced:!1};await pe.parturitions.update(re,Re),Qe({animalId:ye.goatId,date:new Date().toISOString().split("T")[0],type:"Cambio de Estado",details:`Declarada Seca (Lactancia de ${ye.parturitionDate})`}),Me();const Ve=await pe.parturitions.get(re);Ve&&Se(()=>Un("parturitions",re,Ve))},ot=async re=>{if(!e)throw new Error("Usuario no autenticado");const pe=Dt();if(await pe.lots.where("name").equalsIgnoreCase(re.name).first())throw new Error(`El lote '${re.name}' ya existe.`);const Re={id:ci(),name:re.name,parentLotId:re.parentLotId,userId:e.uid,_synced:!1};await pe.lots.put(Re),Me(),Se(()=>Un("lots",Re.id,Re))},Ct=async re=>{if(!e)throw new Error("Usuario no autenticado");const pe=Dt(),ye=await pe.lots.get(re);if(ye){if(await pe.animals.where({location:ye.name}).count()>0)throw new Error("No se puede eliminar un lote con animales asignados.");if(await pe.lots.where({parentLotId:re}).count()>0)throw new Error("No se puede eliminar un lote que contiene sub-lotes.")}await pe.lots.delete(re),Me(),Se(()=>Mc(xr(pn,"lots",re)).catch(Re=>console.error("Firestore delete sync failed:",Re)))},nt=async re=>{if(!e)throw new Error("Usuario no autenticado");const pe=Dt();if(await pe.origins.where("name").equalsIgnoreCase(re).first())throw new Error(`El origen '${re}' ya existe.`);const Re={id:ci(),name:re,userId:e.uid,_synced:!1};await pe.origins.put(Re),Me(),Se(()=>Un("origins",Re.id,Re))},st=async re=>{if(!e)throw new Error("Usuario no autenticado");await Dt().origins.delete(re),Me(),Se(()=>Mc(xr(pn,"origins",re)).catch(ye=>console.error("Firestore delete sync failed:",ye)))},Xt=async re=>{if(!e)throw new Error("Usuario no autenticado");const pe=Dt(),ye={id:ci(),...re,userId:e.uid,_synced:!1};await pe.weighings.put(ye),Qe({animalId:re.goatId,date:re.date,type:"Pesaje Lechero",details:`Registro de ${re.kg} Kg`}),Me(),Se(()=>Un("weighings",ye.id,ye))},Yn=async re=>{if(!e)throw new Error("Usuario no autenticado");const pe=Dt(),ye={id:ci(),...re,userId:e.uid,_synced:!1};await pe.bodyWeighings.put(ye),Qe({animalId:re.animalId,date:re.date,type:"Pesaje Corporal",details:`Registro de ${re.kg} Kg`}),Me(),Se(()=>Un("bodyWeighings",ye.id,ye))},Mn=async re=>{if(!e)throw new Error("Usuario no autenticado");const pe=Dt(),ye=await pe.weighings.where({date:re}).toArray();if(ye.length===0)return;const Re=ye.map(ct=>ct.id),Ve=ye.map(ct=>ct.goatId),dt=(await pe.events.where("date").equals(re).and(ct=>ct.type==="Pesaje Lechero"&&Ve.includes(ct.animalId)).toArray()).map(ct=>ct.id);await pe.transaction("rw",pe.weighings,pe.events,async()=>{await pe.weighings.bulkDelete(Re),await pe.events.bulkDelete(dt)}),await Me(),Se(async()=>{const ct=Xc(pn);Re.forEach(Xn=>ct.delete(xr(pn,"weighings",Xn))),dt.forEach(Xn=>ct.delete(xr(pn,"events",Xn))),await ct.commit()})},Ft=async re=>{if(!e)throw new Error("Usuario no autenticado");const pe=Dt(),ye=re.id.toUpperCase();if(await pe.fathers.where("id").equalsIgnoreCase(ye).first())throw new Error(`El ID de padre '${ye}' ya está en uso.`);const Ve={...re,id:ye,userId:e.uid,_synced:!1};await pe.fathers.put(Ve),Me(),Se(()=>Un("fathers",Ve.id,Ve))},or=async re=>{if(!e)throw new Error("Usuario no autenticado");const pe=Dt(),ye=re.motherId.toUpperCase(),Re=re.parturitionOutcome==="Aborto"&&!re.inducedLactation?"finalizada":"activa",Ve=ci(),qt={id:Ve,goatId:ye,parturitionDate:re.parturitionDate,sireId:re.sireId,offspringCount:re.offspringCount,parturitionType:re.parturitionType,parturitionOutcome:re.parturitionOutcome,status:Re,userId:e.uid,_synced:!1,dryingStartDate:re.inducedLactation&&re.parturitionOutcome==="Aborto"?re.parturitionDate:void 0,liveOffspring:re.liveOffspring?re.liveOffspring.map(ct=>{var Xn;return{id:(Xn=ct.id)==null?void 0:Xn.toUpperCase(),sex:ct.sex,birthWeight:ct.birthWeight}}):void 0},dt=(re.liveOffspring||[]).map(ct=>({id:ct.id.toUpperCase(),sex:ct.sex,status:"Activo",birthDate:re.parturitionDate,motherId:ye,fatherId:re.sireId,birthWeight:parseFloat(ct.birthWeight)||void 0,userId:e.uid,createdAt:Date.now(),lifecycleStage:ct.sex==="Hembra"?"Cabrita":"Cabrito",location:"",reproductiveStatus:"No Aplica",isReference:!1,_synced:!1}));await pe.transaction("rw",pe.parturitions,pe.animals,pe.events,async()=>{await pe.parturitions.put(qt),Qe({animalId:ye,date:re.parturitionDate,type:re.parturitionOutcome==="Aborto"?"Aborto":"Parto",details:re.parturitionOutcome==="Aborto"?`Aborto registrado con Semental: ${re.sireId}. ${re.inducedLactation?"Se induce lactancia.":""}`:`Parto ${re.parturitionType} (${re.offspringCount} crías) con Semental: ${re.sireId}. Vivas: ${dt.length}.`}),dt.length>0&&(await pe.animals.bulkPut(dt),dt.forEach(ct=>{Qe({animalId:ct.id,date:ct.birthDate,type:"Nacimiento",details:`Nacido con ${ct.birthWeight||"N/A"} Kg. Madre: ${ct.motherId}. Padre: ${ct.fatherId}.`})}))}),await Me(),Se(async()=>{const ct=Xc(pn);ct.set(xr(pn,"parturitions",Ve),qt),dt.forEach(Xn=>ct.set(xr(pn,"animals",Xn.id),Xn)),await ct.commit()})},He=async re=>{if(!e)throw new Error("Usuario no autenticado");const pe=Dt(),ye={id:ci(),...re,userId:e.uid,_synced:!1};await pe.serviceRecords.put(ye);const Re=await pe.sireLots.get(ye.sireLotId),Ve=Re?await pe.fathers.get(Re.sireId)||await pe.animals.get(Re.sireId):null;Qe({animalId:ye.femaleId,date:ye.serviceDate,type:"Servicio",details:`Servicio registrado con Semental: ${(Ve==null?void 0:Ve.name)||(Ve==null?void 0:Ve.id)||(Re==null?void 0:Re.sireId)||"Desconocido"}`}),Me(),Se(()=>Un("serviceRecords",ye.id,ye))},Zt=async re=>{if(!e)throw new Error("Usuario no autenticado");const pe=Dt(),ye=await pe.animals.where({location:re.lotName}).toArray();if(ye.length===0)return;const Re=ye.map(qt=>({id:ci(),animalId:qt.id,date:re.date,type:re.type,details:re.details,lotName:re.lotName,userId:e.uid,notes:`Evento aplicado a todo el lote: ${re.lotName}`,_synced:!1}));await pe.events.bulkPut(Re),Me(),Se(async()=>{const qt=Xc(pn);Re.forEach(dt=>qt.set(xr(pn,"events",dt.id),dt)),await qt.commit()})},Pe=async re=>{if(!e)throw new Error("Usuario no autenticado");const pe=Dt(),ye={id:ci(),...re,userId:e.uid,_synced:!1};await pe.feedingPlans.put(ye),Me(),Se(()=>Un("feedingPlans",ye.id,ye))},qe=async re=>{if(!e)throw new Error("Usuario no autenticado");const pe=Dt(),ye={id:ci(),...re,userId:e.uid,_synced:!1};return await pe.breedingSeasons.put(ye),Me(),Se(()=>Un("breedingSeasons",ye.id,ye)),ye.id},yt=async(re,pe)=>{if(!e)throw new Error("Usuario no autenticado");const ye=Dt(),Re={...pe,_synced:!1};await ye.breedingSeasons.update(re,Re),Me();const Ve=await ye.breedingSeasons.get(re);Ve&&Se(()=>Un("breedingSeasons",re,Ve))},Be=async re=>{if(!e)throw new Error("Usuario no autenticado");await Dt().breedingSeasons.delete(re),Me(),Se(()=>Mc(xr(pn,"breedingSeasons",re)).catch(ye=>console.error("Firestore delete sync failed:",ye)))},bt=async re=>{if(!e)throw new Error("Usuario no autenticado");const pe=Dt(),ye={id:ci(),...re,userId:e.uid,_synced:!1};return await pe.sireLots.put(ye),Me(),Se(()=>Un("sireLots",ye.id,ye)),ye.id},ft=async(re,pe)=>{if(!e)throw new Error("Usuario no autenticado");const ye=Dt(),Re={...pe,_synced:!1};await ye.sireLots.update(re,Re),Me();const Ve=await ye.sireLots.get(re);Ve&&Se(()=>Un("sireLots",re,Ve))},Qn=async re=>{if(!e)throw new Error("Usuario no autenticado");await Dt().sireLots.delete(re),Me(),Se(()=>Mc(xr(pn,"sireLots",re)).catch(ye=>console.error("Firestore delete sync failed:",ye)))},Sn=async re=>{if(!e)throw new Error("Usuario no autenticado");const pe=Dt(),ye={id:ci(),...re,userId:e.uid,_synced:!1};await pe.products.put(ye),Me(),Se(()=>Un("products",ye.id,ye))},ys=async(re,pe)=>{if(!e)throw new Error("Usuario no autenticado");const ye=Dt(),Re={...pe,_synced:!1};await ye.products.update(re,Re),Me();const Ve=await ye.products.get(re);Ve&&Se(()=>Un("products",re,Ve))},Fs=async re=>{if(!e)throw new Error("Usuario no autenticado");await Dt().products.delete(re),Me(),Se(()=>Mc(xr(pn,"products",re)).catch(ye=>console.error("Firestore delete sync failed:",ye)))},$r=async(re,pe)=>{if(!e)throw new Error("Usuario no autenticado");const ye=Dt(),Re={id:ci(),...re,userId:e.uid,_synced:!1},Ve=pe.map(dt=>({id:ci(),...dt,healthPlanId:Re.id,userId:e.uid,_synced:!1}));await ye.transaction("rw",ye.healthPlans,ye.planActivities,async()=>{await ye.healthPlans.put(Re),await ye.planActivities.bulkPut(Ve)}),Me(),Se(async()=>{const dt=Xc(pn);dt.set(xr(pn,"healthPlans",Re.id),Re),Ve.forEach(gn=>dt.set(xr(pn,"planActivities",gn.id),gn)),await dt.commit()})},Je=async(re,pe)=>{if(!e)throw new Error("Usuario no autenticado");const ye=Dt(),Re={...pe,_synced:!1};await ye.healthPlans.update(re,Re),Me();const Ve=await ye.healthPlans.get(re);Ve&&Se(()=>Un("healthPlans",re,Ve))},vi=async re=>{if(!e)throw new Error("Usuario no autenticado");const pe=Dt(),Re=(await pe.planActivities.where({healthPlanId:re}).toArray()).map(qt=>qt.id);await pe.transaction("rw",pe.healthPlans,pe.planActivities,async()=>{await pe.planActivities.bulkDelete(Re),await pe.healthPlans.delete(re)}),Me(),Se(async()=>{const qt=Xc(pn);Re.forEach(dt=>qt.delete(xr(pn,"planActivities",dt))),qt.delete(xr(pn,"healthPlans",re)),await qt.commit()})},yi=async re=>{if(!e)throw new Error("Usuario no autenticado");const pe=Dt(),ye={id:ci(),...re,userId:e.uid,_synced:!1};await pe.planActivities.put(ye),Me(),Se(()=>Un("planActivities",ye.id,ye))},Vs=async(re,pe)=>{if(!e)throw new Error("Usuario no autenticado");const ye=Dt(),Re={...pe,_synced:!1};await ye.planActivities.update(re,Re),Me();const Ve=await ye.planActivities.get(re);Ve&&Se(()=>Un("planActivities",re,Ve))},Ue=async re=>{if(!e)throw new Error("Usuario no autenticado");await Dt().planActivities.delete(re),Me(),Se(()=>Mc(xr(pn,"planActivities",re)).catch(ye=>console.error("Firestore delete sync failed:",ye)))},qi=async re=>{var Re;if(!e)throw new Error("Usuario no autenticado");const pe=Dt(),ye={id:ci(),...re,userId:e.uid,_synced:!1};await pe.healthEvents.put(ye),Qe({animalId:ye.animalId,date:ye.date,type:"Tratamiento",details:`${ye.type}${ye.productUsed?` con ${((Re=I.find(Ve=>Ve.id===ye.productUsed))==null?void 0:Re.name)||"producto"}`:""}`,notes:ye.notes,lotName:ye.lotName}),Me(),Se(()=>Un("healthEvents",ye.id,ye))};return l.jsx(CF.Provider,{value:{animals:n,fathers:i,weighings:a,parturitions:c,lots:d,origins:h,breedingSeasons:g,sireLots:y,serviceRecords:w,events:A,feedingPlans:C,bodyWeighings:T,products:I,healthPlans:F,planActivities:H,healthEvents:W,isLoading:$,syncStatus:Q,addAnimal:me,updateAnimal:Ye,deleteAnimalPermanently:Xe,startDryingProcess:te,setLactationAsDry:Te,addLot:ot,deleteLot:Ct,addOrigin:nt,deleteOrigin:st,addBreedingSeason:qe,updateBreedingSeason:yt,deleteBreedingSeason:Be,addSireLot:bt,updateSireLot:ft,deleteSireLot:Qn,addServiceRecord:He,addFeedingPlan:Pe,addBatchEvent:Zt,addWeighing:Xt,addBodyWeighing:Yn,deleteWeighingSession:Mn,addParturition:or,fetchData:Me,addFather:Ft,addProduct:Sn,updateProduct:ys,deleteProduct:Fs,addHealthPlanWithActivities:$r,updateHealthPlan:Je,deleteHealthPlan:vi,addPlanActivity:yi,updatePlanActivity:Vs,deletePlanActivity:Ue,addHealthEvent:qi},children:t})},wee=(t,e)=>{if(!t||t==="N/A"||!e)return"Indefinido";const n=new Date,r=new Date(t+"T00:00:00Z");if(isNaN(r.getTime()))return"Indefinido";const i=Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()),s=Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()),a=Math.floor((i-s)/(1e3*60*60*24));return e==="Hembra"?a<=60?"Cabrita":a<=365?"Cabritona":"Cabra Adulta":a<=60?"Cabrito":a<=365?"Macho de Levante":"Macho Cabrío"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ee=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),TF=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var See={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aee=N.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...o},c)=>N.createElement("svg",{ref:c,...See,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:TF("lucide",i),...o},[...a.map(([u,d])=>N.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=(t,e)=>{const n=N.forwardRef(({className:r,...i},s)=>N.createElement(Aee,{ref:s,iconNode:e,className:TF(`lucide-${_ee(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=De("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gf=De("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=De("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yf=De("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eee=De("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=De("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jee=De("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=De("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cee=De("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tee=De("BarChart4",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M13 17V9",key:"1fwyjl"}],["path",{d:"M18 17V5",key:"sfb6ij"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=De("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nee=De("CalendarCheck2",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 14V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"bce9hv"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m16 20 2 2 4-4",key:"13tcca"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pee=De("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kee=De("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=De("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=De("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dee=De("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=De("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iee=De("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=De("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=De("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oee=De("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mee=De("CircleOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.35 2.69A10 10 0 0 1 21.3 15.65",key:"1pfsoa"}],["path",{d:"M19.08 19.08A10 10 0 1 1 4.92 4.92",key:"1ablyi"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=De("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ree=De("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=De("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=De("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=De("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lee=De("CloudCog",[["circle",{cx:"12",cy:"17",r:"3",key:"1spfwm"}],["path",{d:"M4.2 15.1A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.2",key:"zaobp"}],["path",{d:"m15.7 18.4-.9-.3",key:"4qxpbn"}],["path",{d:"m9.2 15.9-.9-.3",key:"17q7o2"}],["path",{d:"m10.6 20.7.3-.9",key:"1pf4s2"}],["path",{d:"m13.1 14.2.3-.9",key:"1mnuqm"}],["path",{d:"m13.6 20.7-.4-1",key:"1jpd1m"}],["path",{d:"m10.8 14.3-.4-1",key:"17ugyy"}],["path",{d:"m8.3 18.6 1-.4",key:"s42vdx"}],["path",{d:"m14.7 15.8 1-.4",key:"2wizun"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zee=De("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ee=De("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=De("Delete",[["path",{d:"M20 5H9l-7 7 7 7h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2Z",key:"1oy587"}],["line",{x1:"18",x2:"12",y1:"9",y2:"15",key:"1olkx5"}],["line",{x1:"12",x2:"18",y1:"9",y2:"15",key:"1n50pc"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fee=De("Dna",[["path",{d:"M2 15c6.667-6 13.333 0 20-6",key:"1pyr53"}],["path",{d:"M9 22c1.798-1.998 2.518-3.995 2.807-5.993",key:"q3hbxp"}],["path",{d:"M15 2c-1.798 1.998-2.518 3.995-2.807 5.993",key:"80uv8i"}],["path",{d:"m17 6-2.5-2.5",key:"5cdfhj"}],["path",{d:"m14 8-1-1",key:"15nbz5"}],["path",{d:"m7 18 2.5 2.5",key:"16tu1a"}],["path",{d:"m3.5 14.5.5.5",key:"hapbhd"}],["path",{d:"m20 9 .5.5",key:"1n7z02"}],["path",{d:"m6.5 12.5 1 1",key:"cs35ky"}],["path",{d:"m16.5 10.5 1 1",key:"696xn5"}],["path",{d:"m10 16 1.5 1.5",key:"11lckj"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=De("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=De("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=De("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=De("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vee=De("Feather",[["path",{d:"M12.67 19a2 2 0 0 0 1.416-.588l6.154-6.172a6 6 0 0 0-8.49-8.49L5.586 9.914A2 2 0 0 0 5 11.328V18a1 1 0 0 0 1 1z",key:"18jl4k"}],["path",{d:"M16 8 2 22",key:"vp34q"}],["path",{d:"M17.5 15H9",key:"1oz8nu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bee=De("FileArchive",[["path",{d:"M16 22h2a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v18",key:"1oywqq"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uee=De("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=De("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=De("FilterX",[["path",{d:"M13.013 3H2l8 9.46V19l4 2v-8.54l.9-1.055",key:"1fi1da"}],["path",{d:"m22 3-5 5",key:"12jva0"}],["path",{d:"m17 3 5 5",key:"k36vhe"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wee=De("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hee=De("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=De("GitCompareArrows",[["circle",{cx:"5",cy:"6",r:"3",key:"1qnov2"}],["path",{d:"M12 6h5a2 2 0 0 1 2 2v7",key:"1yj91y"}],["path",{d:"m15 9-3-3 3-3",key:"1lwv8l"}],["circle",{cx:"19",cy:"18",r:"3",key:"1qljk2"}],["path",{d:"M12 18H7a2 2 0 0 1-2-2V9",key:"16sdep"}],["path",{d:"m9 15 3 3-3 3",key:"1m3kbl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=De("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kee=De("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=De("HeartCrack",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"m12 13-1-1 2-2-3-3 2-2",key:"xjdxli"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qee=De("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"12sd6o"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=De("HeartPulse",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=De("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=De("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sb=De("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=De("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=De("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=De("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=De("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=De("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RF=De("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gee=De("Milk",[["path",{d:"M8 2h8",key:"1ssgc1"}],["path",{d:"M9 2v2.789a4 4 0 0 1-.672 2.219l-.656.984A4 4 0 0 0 7 10.212V20a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-9.789a4 4 0 0 0-.672-2.219l-.656-.984A4 4 0 0 1 15 4.788V2",key:"qtp12x"}],["path",{d:"M7 15a6.472 6.472 0 0 1 5 0 6.47 6.47 0 0 0 5 0",key:"ygeh44"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=De("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=De("MoveRight",[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=De("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yee=De("PackageOpen",[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qee=De("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=De("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xee=De("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zee=De("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jee=De("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ete=De("Replace",[["path",{d:"M14 4c0-1.1.9-2 2-2",key:"1mvvbw"}],["path",{d:"M20 2c1.1 0 2 .9 2 2",key:"1mj6oe"}],["path",{d:"M22 8c0 1.1-.9 2-2 2",key:"v1wql3"}],["path",{d:"M16 10c-1.1 0-2-.9-2-2",key:"821ux0"}],["path",{d:"m3 7 3 3 3-3",key:"x25e72"}],["path",{d:"M6 10V5c0-1.7 1.3-3 3-3h1",key:"13af7h"}],["rect",{width:"8",height:"8",x:"2",y:"14",rx:"2",key:"17ihk4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=De("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=De("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zF=De("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=De("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tte=De("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $F=De("Sigma",[["path",{d:"M18 7V4H6l6 8-6 8h12v-3",key:"zis8ev"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=De("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nte=De("SquareActivity",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M17 12h-2l-2 5-2-10-2 5H7",key:"15hlnc"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=De("SquareCheckBig",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=De("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=De("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rte=De("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $h=De("Syringe",[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ite=De("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=De("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ste=De("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=De("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ate=De("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=De("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=De("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=De("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ote=De("Waypoints",[["circle",{cx:"12",cy:"4.5",r:"2.5",key:"r5ysbb"}],["path",{d:"m10.2 6.3-3.9 3.9",key:"1nzqf6"}],["circle",{cx:"4.5",cy:"12",r:"2.5",key:"jydg6v"}],["path",{d:"M7 12h10",key:"b7w52i"}],["circle",{cx:"19.5",cy:"12",r:"2.5",key:"1piiel"}],["path",{d:"m13.8 17.7 3.9-3.9",key:"1wyg1y"}],["circle",{cx:"12",cy:"19.5",r:"2.5",key:"13o1pw"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ed=De("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=De("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=De("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);var VF={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},bI=q.createContext&&q.createContext(VF),lte=["attr","size","title"];function cte(t,e){if(t==null)return{};var n=ute(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ute(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ab(){return ab=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ab.apply(this,arguments)}function xI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ob(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xI(Object(n),!0).forEach(function(r){dte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dte(t,e,n){return e=fte(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fte(t){var e=hte(t,"string");return typeof e=="symbol"?e:e+""}function hte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BF(t){return t&&t.map((e,n)=>q.createElement(e.tag,ob({key:n},e.attr),BF(e.child)))}function vs(t){return e=>q.createElement(pte,ab({attr:ob({},t.attr)},e),BF(t.child))}function pte(t){var e=n=>{var{attr:r,size:i,title:s}=t,a=cte(t,lte),o=i||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),q.createElement("svg",ab({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:c,style:ob(ob({color:t.color||n.color},n.style),t.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),s&&q.createElement("title",null,s),t.children)};return bI!==void 0?q.createElement(bI.Consumer,null,n=>e(n)):e(VF)}function UF(t){return vs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 23.38L89.844 89.845l-64.9 162.254 14.85 5.943c20.312-50.766 40.62-101.535 60.93-152.304l1.432-3.58L256 40.616l153.844 61.54 1.43 3.58 60.93 152.305 14.853-5.942-64.9-162.254C366.77 67.69 311.386 45.534 256 23.38zm0 36.624l-139.996 55.998L72.8 224h.2v263h78V329h-39v-18h297v176h30V224h.2c-14.402-36-28.802-72-43.204-107.998L256 60.004zM151 135h210v114H151V135zm23.563 18L199 201.873V153h-24.438zM313 153v48.873L337.438 153H313zm-144 29.127V231h24.438L169 182.127zm174 0L318.562 231H343v-48.873zm-98.73 18.69c-1.207-.02-2.31.02-3.288.128-2.823.31-10.76 3.708-16.86 7.3-2.796 1.645-5.23 3.22-7.122 4.484V231h78v-16.97c-4.193-1.675-10.334-4.02-17.578-6.368-11.206-3.63-24.71-6.71-33.152-6.846zM160 263h192v18H160v-18zm15.16 66L208 389.205 240.84 329h-65.68zm144 0L352 389.205 384.84 329h-65.68zM169 355.295v105.41L197.748 408 169 355.295zm78 0L218.252 408 247 460.705v-105.41zm66 0v105.41L341.748 408 313 355.295zm78 0L362.252 408 391 460.705v-105.41zm-183 71.5L175.16 487h65.68L208 426.795zm144 0L319.16 487h65.68L352 426.795z"},child:[]}]})(t)}function mte(t){return vs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M23 23v466h466v-18H41v-82.184l85.854-57.234 70.023 70.022 65.133-260.536L387.28 203.7 455.07 95.73l19.317 11.858 6.102-71.1-60.644 37.616 19.884 12.207-59.01 93.99-130.732-65.366-62.865 251.462-57.98-57.978L41 367.184V23H23z"},child:[]}]})(t)}function gte(t){return vs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M44.62 106a26 26 0 0 0-25.69 29.3c16 124 16 117.4 0 241.4A26 26 0 0 0 54.72 404l138.68-57.7c-1.2 9.5-2.4 18.9-3.9 30.4-2.5 19.8 17.3 35 35.8 27.3l252-124c9.7-4 16-13.5 16-24s-6.3-20-16-24l-252-124c-3.2-1.3-6.6-2-10.1-2-15.6.1-27.7 13.8-25.7 29.3 1.5 11.5 2.7 20.9 3.9 30.4L54.72 108a26 26 0 0 0-10.1-2z"},child:[]}]})(t)}function xv(t){return vs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M273 459l7.79-20 6.21 20 5.79-23.33-4.25-48c-7.76 7.94-17.54 17.85-29.74 30.27zm38.5-380.86a115.06 115.06 0 0 0-21.13-19.6c-17.315-11.88-35.418-18.913-55.08-22.14-18.751-3.067-37.99-2.743-56.33.12A203.86 203.86 0 0 0 133 49.42a184.2 184.2 0 0 0-29.62 15.36c-12.304 8.597-10.431 6.828.95 1.82a179.6 179.6 0 0 1 30.9-10c50.427-4.832 98.41-7.579 134.17 27.17a80 80 0 0 1 12.28 16c4.714 8.06 7.805 16.877 9.66 25.59l45.69 2.84c-5.032-17.752-15.256-37.574-25.53-50.06zm50.05 26.63c-8.531-13.217-18.495-25.428-29.66-34.88a78.24 78.24 0 0 0-15.79-10.38c2.67 2.68 5.22 5.45 7.61 8.32a138.13 138.13 0 0 1 9.13 12.11l.1.14.09.14c9.772 15.14 17.164 33.862 20.78 49.15l22.19 1.3a253.49 253.49 0 0 0-14.43-25.91zm29.89 43l70 179.4-11.82 28.37-65.77-37.94-8 13.86 67.56 39-4.327 5.754L394.12 372l-65.33-31.47a42.41 42.41 0 0 0-9.29-1.43c-5.71 0-9.52 2.06-12.71 6.62-2.53 3.61-78.5 80.52-147.64 150.28H16V243.73l92.85 3.85 96.61-33.26 10.13-11a214.71 214.71 0 0 1 38 24.27 18.57 18.57 0 0 0 11.61 3.93c13.792-1.574 22.025-9.12 32.83-17.83-3.267-21.244-6.724-43.71-9.56-62.1-6.463-2.155-12.926-4.308-19.39-6.46l4.39-4.78zm-37.25 65.02c-4.024-14.705-20.114-19.427-30.58-18.14-3.073.432-6.167 1.427-8.77 2.68.868 3.09 2.17 7.87 3.79 10.35 6.527 9.211 17.348 13.898 27.64 12.51 3.967-.672 8.94-3.676 7.92-7.4zm61.63 105.47l19 20 11.6-11-19-20zM475 172.99s-40.54-27.8-57-1.2l11.25 28.83zM294 382.05l13.4 22.28-.4-35.64c-3.29 3.45-7.53 7.82-12.95 13.36zm-30.6-167c5.858 1.872 17.61-6.048 17.33-8.01l-6.67-43.33-28-9.31c-17.65-2.861-58.224-4.989-67.27 9.28 39.596 39.732 39.526 16.87 84.61 51.37zm127.08 172.89c-15.313-7.704-30.838-14.996-46.28-22.44 5.153 29.387 10.895 58.672 15.75 88.11l25.26 37.33-2.6-34L400 469.61v-28.67l10.19-41.95 6.67-11.05z"},child:[]}]})(t)}function vte(t){return vs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M302.958 20.019l-93.916 46.564v35.404c31.305-15.522 62.61-31.047 93.916-46.568zm6.53 52.252l-95.4 47.3 63.036 78.137 95.397-47.303zm-111.915 55.492l-33.732 16.724h47.224zm-22.119 34.722l71.615 26.633-21.484-26.633zm-41.021 3.948v276.752l131.22 48.796v-276.75zm243.134 1.56c-31.306 15.521-62.61 31.044-93.916 46.567v275.863l93.916-46.567zM176.501 272.466s-15.3 15.085-9.889 24.203c4.167 7.02 21.889 5.418 21.889 5.418l15.549 3.848s17.72 10.374 21.887 5.416c5.41-6.44-9.887-29.098-9.887-29.098s35.91 33.492 29.662 47.318c-3.143 6.955-24.719-2.117-24.719-2.117s5.495 7.21 4.944 10.549c-1.001 6.062-13.774 9.916-13.774 9.916s1.111 21.24-6 25.168c-5.147 2.843-14.628.497-19.775-4.895-7.111-7.448-6-28.136-6-28.136s-12.775-10.177-13.776-16.735c-.55-3.611 4.944-8.103 4.944-8.103s-21.575-1.607-24.717-10.117c-6.247-16.919 29.662-32.635 29.662-32.635z"},child:[]}]})(t)}function yte(t){return vs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M90.52 390.06h38.497v16.583H65.443V390.06l31.933-28.182c2.852-2.578 4.96-5.098 6.328-7.56 1.368-2.46 2.05-5.018 2.05-7.675 0-4.1-1.386-7.402-4.16-9.902-2.733-2.5-6.386-3.75-10.956-3.75-3.516 0-7.363.763-11.543 2.286-4.18 1.485-8.652 3.71-13.418 6.68v-19.22c5.078-1.678 10.098-2.948 15.06-3.807 4.96-.9 9.823-1.35 14.588-1.35 10.47 0 18.594 2.306 24.375 6.915 5.82 4.61 8.73 11.035 8.73 19.277 0 4.766-1.23 9.22-3.69 13.36-2.46 4.1-7.637 9.61-15.528 16.523l-18.69 16.406m349.377 32.915c5.897 1.524 10.37 4.18 13.417 7.97 3.086 3.75 4.63 8.534 4.63 14.355 0 8.672-3.322 15.273-9.962 19.804-6.64 4.493-16.328 6.74-29.063 6.74-4.492 0-9.004-.372-13.535-1.115-4.492-.704-8.945-1.778-13.36-3.223v-17.403c4.22 2.11 8.4 3.71 12.54 4.805 4.18 1.054 8.28 1.58 12.304 1.58 5.978 0 10.548-1.034 13.712-3.104 3.203-2.07 4.805-5.04 4.805-8.907 0-3.985-1.64-6.993-4.922-9.024-3.242-2.07-8.047-3.105-14.414-3.106h-9.022v-14.53h9.492c5.664 0 9.883-.88 12.656-2.638 2.773-1.796 4.16-4.51 4.16-8.144 0-3.36-1.347-5.957-4.043-7.793-2.695-1.836-6.504-2.754-11.426-2.754-3.632 0-7.304.41-11.015 1.232-3.71.82-7.403 2.03-11.074 3.632V384.83c4.453-1.25 8.867-2.186 13.242-2.812 4.375-.624 8.672-.937 12.89-.937 11.368 0 19.864 1.876 25.49 5.626 5.663 3.71 8.495 9.316 8.495 16.816 0 5.118-1.348 9.317-4.043 12.598-2.696 3.242-6.68 5.527-11.953 6.856M236.062 230.74h19.922v-56.544l-20.45 4.22v-15.352l20.333-4.22h21.445v71.895h19.922v15.585h-61.172V230.74M496 496V352H352V128H176v160H16v208"},child:[]}]})(t)}function bte(t){return vs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M24.844 25.563c1.333 77.685 25.778 141.568 63.283 187.955 4.367-4.937 8.77-9.796 13.13-14.553a9.5 9.5 0 0 1 7.348-3.178 9.5 9.5 0 0 1 6.66 16.016c-22.957 25.048-46.51 52.82-58.777 76.95-6.132 12.067-9.31 23.07-9.037 31.874.17 5.474 1.374 10.174 4.26 14.562l16.552-22.684a9.5 9.5 0 0 1 7.898-4.008 9.5 9.5 0 0 1 7.45 15.207l-16.635 22.797c2.973.316 6.316-.284 10.474-1.75 8.174-2.882 18.38-9.868 28.734-19.672 20.704-19.608 42.15-50.057 56.953-77.644a9.5 9.5 0 0 1 9.9-4.885c6.228 1.017 22.147 2.215 35.78.573 6.816-.82 13.107-2.395 17.232-4.432 4.124-2.035 5.597-3.84 6.12-5.934a9.5 9.5 0 1 1 18.434 4.603c-2.193 8.78-8.967 14.825-16.145 18.37-7.18 3.542-15.245 5.277-23.372 6.256-12.798 1.542-25.47 1.082-34.522.143-2.816 5.038-5.806 10.122-8.937 15.192 29.03 14.058 60.48 21.354 92.34 21.115 22.055-.164 43.82-4.29 64.64-11.937-6.014-8.637-11.297-17.378-15.596-25.96A9.5 9.5 0 1 1 326 252.03c13.688 27.32 40.692 59.164 67.537 79.982 13.423 10.41 26.846 18.047 37.842 21.363 5.988 1.806 10.902 2.378 14.983 1.854l-10.996-13.093a9.5 9.5 0 0 1 7.06-15.715 9.5 9.5 0 0 1 7.49 3.494l12.054 14.352c3.226-4.725 4.71-9.948 5.042-16.102.513-9.534-2.39-21.344-8.18-34.158-11.578-25.63-34.297-54.796-57.053-79.625a9.5 9.5 0 0 1 7.322-16.01 9.5 9.5 0 0 1 6.685 3.172c3.1 3.384 6.205 6.848 9.29 10.37 37.514-47.34 61.834-111.574 62.892-186.352H24.843zm138.664 270.68c-4.952 14.607-8.863 29.266-11.043 42.61-2.476 15.154-2.608 28.608-.29 37.745 2.32 9.137 5.71 13.32 12.514 15.22 10.31 2.88 17.56 1.32 24.884-3.572 7.325-4.893 14.436-13.87 20.696-25.87 6.813-13.064 12.555-29.486 17.517-47.09-22.16-3.106-43.775-9.54-64.28-19.044zm173.04 6.083c-9.938 3.936-20.108 7.144-30.456 9.57.512.913 1.02 1.844 1.54 2.733 7.736 13.262 16.197 23.722 23.802 29.292 7.604 5.57 12.882 6.638 19.34 3.77 7.937-3.52 12.458-8.014 15.236-14.087-10.454-9.556-20.457-20.185-29.46-31.28z"},child:[]}]})(t)}const xte=()=>{const[t,e]=N.useState(!0),[n,r]=N.useState(""),[i,s]=N.useState(""),[a,o]=N.useState(null),[c,u]=N.useState(!1),d=async()=>{if(window.confirm("¿Estás seguro de que quieres forzar la eliminación de la base de datos local? Esto no afectará tus datos en la nube."))try{await qf.delete("GanaderoOS_DB"),alert("Base de datos local eliminada con éxito. La página se recargará."),window.location.reload()}catch(p){alert("Error al eliminar la base de datos."),console.error(p)}},f=p=>{if(p.code==="auth/network-request-failed")return"No hay conexión a internet. Se requiere conexión para iniciar sesión.";switch(p.code){case"auth/invalid-email":return"El formato del correo electrónico no es válido.";case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":return"Correo electrónico o contraseña incorrectos.";case"auth/email-already-in-use":return"Este correo electrónico ya está registrado.";case"auth/weak-password":return"La contraseña debe tener al menos 6 caracteres.";default:return console.error("Firebase Auth Error:",p),"Ocurrió un error inesperado. Por favor, intenta de nuevo."}},h=async p=>{p.preventDefault(),o(null),u(!0);try{t?await WQ(Kf,n,i):await UQ(Kf,n,i)}catch(g){o(f(g))}finally{u(!1)}};return l.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 font-sans",children:l.jsxs("div",{className:"w-full max-w-sm",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-2",children:[l.jsx(xv,{className:"w-12 h-12 text-brand-orange"}),l.jsx("h1",{className:"text-4xl font-bold text-white",children:"GanaderoOS"})]}),l.jsx("p",{className:"text-zinc-400",children:"El sistema operativo para tu finca."})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-6 border border-brand-border",children:[l.jsxs("div",{className:"flex bg-zinc-900/80 rounded-xl p-1 w-full mb-6",children:[l.jsx("button",{onClick:()=>e(!0),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t?"bg-zinc-700 text-white":"text-zinc-400 hover:bg-zinc-800/50"}`,children:"Iniciar Sesión"}),l.jsx("button",{onClick:()=>e(!1),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t?"text-zinc-400 hover:bg-zinc-800/50":"bg-zinc-700 text-white"}`,children:"Registrarse"})]}),l.jsxs("form",{onSubmit:h,className:"space-y-4",children:[l.jsx("input",{type:"email",value:n,onChange:p=>r(p.target.value),placeholder:"Correo electrónico",required:!0,className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl border border-transparent focus:border-brand-orange focus:ring-0 focus:outline-none placeholder-zinc-400"}),l.jsx("input",{type:"password",value:i,onChange:p=>s(p.target.value),placeholder:"Contraseña",required:!0,className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl border border-transparent focus:border-brand-orange focus:ring-0 focus:outline-none placeholder-zinc-400"}),a&&l.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[l.jsx($t,{size:18}),l.jsx("span",{children:a})]}),l.jsx("button",{type:"submit",disabled:c,className:"w-full bg-brand-orange text-white font-bold py-3 rounded-xl transition-colors hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Procesando...":t?"Iniciar Sesión":"Crear Cuenta"})]})]}),l.jsxs("div",{className:"mt-6 text-center",children:[l.jsxs("button",{onClick:d,className:"flex items-center justify-center gap-2 mx-auto bg-brand-red/20 text-brand-red font-semibold py-2 px-4 rounded-lg border border-brand-red/50 hover:bg-brand-red/30 transition-colors",children:[l.jsx(ya,{size:16}),"Forzar Reinicio de DB Local"]}),l.jsx("p",{className:"text-xs text-zinc-600 mt-2",children:"Si la app no carga, usa este botón."})]})]})})};function wte(t){return vs({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M192 160c44.2 0 80-35.8 80-80S236.2 0 192 0s-80 35.8-80 80 35.8 80 80 80zm-53.4 248.8l25.6-32-61.5-51.2L56.8 383c-11.4 14.2-11.7 34.4-.8 49l48 64c7.9 10.5 19.9 16 32 16 8.3 0 16.8-2.6 24-8 17.7-13.2 21.2-38.3 8-56l-29.4-39.2zm142.7-83.2l-61.5 51.2 25.6 32L216 448c-13.2 17.7-9.7 42.8 8 56 7.2 5.4 15.6 8 24 8 12.2 0 24.2-5.5 32-16l48-64c10.9-14.6 10.6-34.8-.8-49l-45.9-57.4zM376.7 145c-12.7-18.1-37.6-22.4-55.7-9.8l-40.6 28.5c-52.7 37-124.2 37-176.8 0L63 135.3C44.9 122.6 20 127 7.3 145-5.4 163.1-1 188 17 200.7l40.6 28.5c17 11.9 35.4 20.9 54.4 27.9V288h160v-30.8c19-7 37.4-16 54.4-27.9l40.6-28.5c18.1-12.8 22.4-37.7 9.7-55.8z"},child:[]}]})(t)}function _te(t){return vs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M447.1 112c-34.2.5-62.3 28.4-63 62.6-.5 24.3 12.5 45.6 32 56.8V344c0 57.3-50.2 104-112 104-60 0-109.2-44.1-111.9-99.2C265 333.8 320 269.2 320 192V36.6c0-11.4-8.1-21.3-19.3-23.5L237.8.5c-13-2.6-25.6 5.8-28.2 18.8L206.4 35c-2.6 13 5.8 25.6 18.8 28.2l30.7 6.1v121.4c0 52.9-42.2 96.7-95.1 97.2-53.4.5-96.9-42.7-96.9-96V69.4l30.7-6.1c13-2.6 21.4-15.2 18.8-28.2l-3.1-15.7C107.7 6.4 95.1-2 82.1.6L19.3 13C8.1 15.3 0 25.1 0 36.6V192c0 77.3 55.1 142 128.1 156.8C130.7 439.2 208.6 512 304 512c97 0 176-75.4 176-168V231.4c19.1-11.1 32-31.7 32-55.4 0-35.7-29.2-64.5-64.9-64zm.9 80c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16z"},child:[]}]})(t)}function Ste(t){return vs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M201.5 174.8l55.7 55.8c3.1 3.1 3.1 8.2 0 11.3l-11.3 11.3c-3.1 3.1-8.2 3.1-11.3 0l-55.7-55.8-45.3 45.3 55.8 55.8c3.1 3.1 3.1 8.2 0 11.3l-11.3 11.3c-3.1 3.1-8.2 3.1-11.3 0L111 265.2l-26.4 26.4c-17.3 17.3-25.6 41.1-23 65.4l7.1 63.6L2.3 487c-3.1 3.1-3.1 8.2 0 11.3l11.3 11.3c3.1 3.1 8.2 3.1 11.3 0l66.3-66.3 63.6 7.1c23.9 2.6 47.9-5.4 65.4-23l181.9-181.9-135.7-135.7-64.9 65zm308.2-93.3L430.5 2.3c-3.1-3.1-8.2-3.1-11.3 0l-11.3 11.3c-3.1 3.1-3.1 8.2 0 11.3l28.3 28.3-45.3 45.3-56.6-56.6-17-17c-3.1-3.1-8.2-3.1-11.3 0l-33.9 33.9c-3.1 3.1-3.1 8.2 0 11.3l17 17L424.8 223l17 17c3.1 3.1 8.2 3.1 11.3 0l33.9-34c3.1-3.1 3.1-8.2 0-11.3l-73.5-73.5 45.3-45.3 28.3 28.3c3.1 3.1 8.2 3.1 11.3 0l11.3-11.3c3.1-3.2 3.1-8.2 0-11.4z"},child:[]}]})(t)}function Ate(t){return vs({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M528 336c-48.6 0-88 39.4-88 88s39.4 88 88 88 88-39.4 88-88-39.4-88-88-88zm0 112c-13.23 0-24-10.77-24-24s10.77-24 24-24 24 10.77 24 24-10.77 24-24 24zm80-288h-64v-40.2c0-14.12 4.7-27.76 13.15-38.84 4.42-5.8 3.55-14.06-1.32-19.49L534.2 37.3c-6.66-7.45-18.32-6.92-24.7.78C490.58 60.9 480 89.81 480 119.8V160H377.67L321.58 29.14A47.914 47.914 0 0 0 277.45 0H144c-26.47 0-48 21.53-48 48v146.52c-8.63-6.73-20.96-6.46-28.89 1.47L36 227.1c-8.59 8.59-8.59 22.52 0 31.11l5.06 5.06c-4.99 9.26-8.96 18.82-11.91 28.72H22c-12.15 0-22 9.85-22 22v44c0 12.15 9.85 22 22 22h7.14c2.96 9.91 6.92 19.46 11.91 28.73l-5.06 5.06c-8.59 8.59-8.59 22.52 0 31.11L67.1 476c8.59 8.59 22.52 8.59 31.11 0l5.06-5.06c9.26 4.99 18.82 8.96 28.72 11.91V490c0 12.15 9.85 22 22 22h44c12.15 0 22-9.85 22-22v-7.14c9.9-2.95 19.46-6.92 28.72-11.91l5.06 5.06c8.59 8.59 22.52 8.59 31.11 0l31.11-31.11c8.59-8.59 8.59-22.52 0-31.11l-5.06-5.06c4.99-9.26 8.96-18.82 11.91-28.72H330c12.15 0 22-9.85 22-22v-6h80.54c21.91-28.99 56.32-48 95.46-48 18.64 0 36.07 4.61 51.8 12.2l50.82-50.82c6-6 9.37-14.14 9.37-22.63V192c.01-17.67-14.32-32-31.99-32zM176 416c-44.18 0-80-35.82-80-80s35.82-80 80-80 80 35.82 80 80-35.82 80-80 80zm22-256h-38V64h106.89l41.15 96H198z"},child:[]}]})(t)}function Ete(t){return vs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M510.28 445.86l-73.03-292.13c-3.8-15.19-16.44-25.72-30.87-25.72h-60.25c3.57-10.05 5.88-20.72 5.88-32 0-53.02-42.98-96-96-96s-96 42.98-96 96c0 11.28 2.3 21.95 5.88 32h-60.25c-14.43 0-27.08 10.54-30.87 25.72L1.72 445.86C-6.61 479.17 16.38 512 48.03 512h415.95c31.64 0 54.63-32.83 46.3-66.14zM256 128c-17.64 0-32-14.36-32-32s14.36-32 32-32 32 14.36 32 32-14.36 32-32 32z"},child:[]}]})(t)}const at=({isOpen:t,onClose:e,title:n,children:r,size:i="default"})=>{if(!t)return null;const s=i==="fullscreen"?"items-end":"items-center",a={default:"max-w-md m-4 rounded-2xl",large:"max-w-xl m-4 rounded-2xl",fullscreen:"w-full h-[95vh] rounded-t-2xl flex flex-col"};return l.jsx("div",{className:`fixed inset-0 bg-black/60 backdrop-blur-md flex justify-center z-50 animate-fade-in ${s}`,onClick:e,children:l.jsxs("div",{className:`bg-ios-modal-bg border border-zinc-700/80 shadow-2xl text-white transform transition-all animate-slide-up ${a[i]}`,onClick:o=>o.stopPropagation(),children:[l.jsxs("header",{className:"flex-shrink-0 flex justify-between items-center p-4 border-b border-zinc-800/80",children:[l.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:n}),l.jsx("button",{onClick:e,className:"p-1 rounded-full text-zinc-500 hover:text-white hover:bg-zinc-700/50 transition-colors",children:l.jsx(Za,{size:20})})]}),l.jsx("div",{className:i==="fullscreen"?"flex-1 overflow-y-auto p-4":"overflow-y-auto max-h-[85vh] p-6",children:r})]})})},WF=({isOpen:t,onClose:e,editingLotId:n})=>{const{lots:r,addLot:i}=rt(),[s,a]=N.useState(""),[o,c]=N.useState(""),[u,d]=N.useState(""),f=async()=>{if(s.trim()===""){d("El nombre del lote no puede estar vacío.");return}try{await i({name:s,parentLotId:o||void 0}),h()}catch(g){d(g.message||"No se pudo guardar el lote."),console.error(g)}},h=()=>{a(""),c(""),d(""),e()},p=r.filter(g=>!g.parentLotId&&g.id!==n);return l.jsx(at,{isOpen:t,onClose:h,title:"Crear Nuevo Lote",children:l.jsxs("form",{onSubmit:g=>{g.preventDefault(),f()},className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-zinc-400",children:"Introduce el nombre de la nueva ubicación o lote en tu finca."}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"lotName",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Nombre del Lote"}),l.jsx("input",{id:"lotName",type:"text",value:s,onChange:g=>a(g.target.value),placeholder:"Ej: Galpón 1",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"parentLot",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Sub-lote de (Opcional)"}),l.jsxs("select",{id:"parentLot",value:o,onChange:g=>c(g.target.value),className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0",children:[l.jsx("option",{value:"",children:"Ninguno (Es un Lote Principal)"}),p.map(g=>l.jsx("option",{value:g.id,children:g.name},g.id))]})]}),u&&l.jsx("p",{className:"text-sm text-brand-red text-center",children:u}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[l.jsx("button",{type:"button",onClick:h,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:"Guardar Lote"})]})]})})},fT=N.createContext({});function Ho(t){const e=N.useRef(null);return e.current===null&&(e.current=t()),e.current}const bw=N.createContext(null),xw=N.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class jte extends N.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Cte({children:t,isPresent:e}){const n=N.useId(),r=N.useRef(null),i=N.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=N.useContext(xw);return N.useInsertionEffect(()=>{const{width:a,height:o,top:c,left:u}=i.current;if(e||!r.current||!a||!o)return;r.current.dataset.motionPopId=n;const d=document.createElement("style");return s&&(d.nonce=s),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${c}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[e]),l.jsx(jte,{isPresent:e,childRef:r,sizeRef:i,children:N.cloneElement(t,{ref:r})})}const Tte=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:a})=>{const o=Ho(Nte),c=N.useId(),u=N.useCallback(f=>{o.set(f,!0);for(const h of o.values())if(!h)return;r&&r()},[o,r]),d=N.useMemo(()=>({id:c,initial:e,isPresent:n,custom:i,onExitComplete:u,register:f=>(o.set(f,!1),()=>o.delete(f))}),s?[Math.random(),u]:[n,u]);return N.useMemo(()=>{o.forEach((f,h)=>o.set(h,!1))},[n]),N.useEffect(()=>{!n&&!o.size&&r&&r()},[n]),a==="popLayout"&&(t=l.jsx(Cte,{isPresent:n,children:t})),l.jsx(bw.Provider,{value:d,children:t})};function Nte(){return new Map}function HF(t=!0){const e=N.useContext(bw);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=N.useId();N.useEffect(()=>{t&&i(s)},[t]);const a=N.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,a]:[!0]}const py=t=>t.key||"";function wI(t){const e=[];return N.Children.forEach(t,n=>{N.isValidElement(n)&&e.push(n)}),e}const hT=typeof window<"u",ww=hT?N.useLayoutEffect:N.useEffect,u0=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:a=!1})=>{const[o,c]=HF(a),u=N.useMemo(()=>wI(t),[t]),d=a&&!o?[]:u.map(py),f=N.useRef(!0),h=N.useRef(u),p=Ho(()=>new Map),[g,m]=N.useState(u),[y,x]=N.useState(u);ww(()=>{f.current=!1,h.current=u;for(let A=0;A<y.length;A++){const E=py(y[A]);d.includes(E)?p.delete(E):p.get(E)!==!0&&p.set(E,!1)}},[y,d.length,d.join("-")]);const w=[];if(u!==g){let A=[...u];for(let E=0;E<y.length;E++){const C=y[E],j=py(C);d.includes(j)||(A.splice(E,0,C),w.push(C))}s==="wait"&&w.length&&(A=w),x(wI(A)),m(u);return}const{forceRender:_}=N.useContext(fT);return l.jsx(l.Fragment,{children:y.map(A=>{const E=py(A),C=a&&!o?!1:u===y||d.includes(E),j=()=>{if(p.has(E))p.set(E,!0);else return;let T=!0;p.forEach(P=>{P||(T=!1)}),T&&(_==null||_(),x(h.current),a&&(c==null||c()),r&&r())};return l.jsx(Tte,{isPresent:C,initial:!f.current||n?void 0:!1,custom:C?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:C?void 0:j,children:A},E)})})},as=t=>t;let KF=as;function pT(t){let e;return()=>(e===void 0&&(e=t()),e)}const Qf=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},jo=t=>t*1e3,Co=t=>t/1e3,Pte={useManualTiming:!1};function kte(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(u){s.has(u)&&(c.schedule(u),t()),u(a)}const c={schedule:(u,d=!1,f=!1)=>{const p=f&&r?e:n;return d&&s.add(u),p.has(u)||p.add(u),u},cancel:u=>{n.delete(u),s.delete(u)},process:u=>{if(a=u,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(o),e.clear(),r=!1,i&&(i=!1,c.process(u))}};return c}const my=["read","resolveKeyframes","update","preRender","render","postRender"],Dte=40;function qF(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=my.reduce((x,w)=>(x[w]=kte(s),x),{}),{read:o,resolveKeyframes:c,update:u,preRender:d,render:f,postRender:h}=a,p=()=>{const x=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(x-i.timestamp,Dte),1),i.timestamp=x,i.isProcessing=!0,o.process(i),c.process(i),u.process(i),d.process(i),f.process(i),h.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(p))},g=()=>{n=!0,r=!0,i.isProcessing||t(p)};return{schedule:my.reduce((x,w)=>{const _=a[w];return x[w]=(A,E=!1,C=!1)=>(n||g(),_.schedule(A,E,C)),x},{}),cancel:x=>{for(let w=0;w<my.length;w++)a[my[w]].cancel(x)},state:i,steps:a}}const{schedule:wn,cancel:Lo,state:Gr,steps:C_}=qF(typeof requestAnimationFrame<"u"?requestAnimationFrame:as,!0),GF=N.createContext({strict:!1}),_I={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Xf={};for(const t in _I)Xf[t]={isEnabled:e=>_I[t].some(n=>!!e[n])};function Ite(t){for(const e in t)Xf[e]={...Xf[e],...t[e]}}const Ote=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function lb(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Ote.has(t)}let YF=t=>!lb(t);function Mte(t){t&&(YF=e=>e.startsWith("on")?!lb(e):t(e))}try{Mte(require("@emotion/is-prop-valid").default)}catch{}function Rte(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(YF(i)||n===!0&&lb(i)||!e&&!lb(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function Lte(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const _w=N.createContext({});function dg(t){return typeof t=="string"||Array.isArray(t)}function Sw(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const mT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],gT=["initial",...mT];function Aw(t){return Sw(t.animate)||gT.some(e=>dg(t[e]))}function QF(t){return!!(Aw(t)||t.variants)}function zte(t,e){if(Aw(t)){const{initial:n,animate:r}=t;return{initial:n===!1||dg(n)?n:void 0,animate:dg(r)?r:void 0}}return t.inherit!==!1?e:{}}function $te(t){const{initial:e,animate:n}=zte(t,N.useContext(_w));return N.useMemo(()=>({initial:e,animate:n}),[SI(e),SI(n)])}function SI(t){return Array.isArray(t)?t.join(" "):t}const Fte=Symbol.for("motionComponentSymbol");function tf(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Vte(t,e,n){return N.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):tf(n)&&(n.current=r))},[e])}const vT=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Bte="framerAppearId",XF="data-"+vT(Bte),{schedule:yT}=qF(queueMicrotask,!1),ZF=N.createContext({});function Ute(t,e,n,r,i){var s,a;const{visualElement:o}=N.useContext(_w),c=N.useContext(GF),u=N.useContext(bw),d=N.useContext(xw).reducedMotion,f=N.useRef(null);r=r||c.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:o,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const h=f.current,p=N.useContext(ZF);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&Wte(f.current,n,i,p);const g=N.useRef(!1);N.useInsertionEffect(()=>{h&&g.current&&h.update(n,u)});const m=n[XF],y=N.useRef(!!m&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,m))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,m)));return ww(()=>{h&&(g.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),yT.render(h.render),y.current&&h.animationState&&h.animationState.animateChanges())}),N.useEffect(()=>{h&&(!y.current&&h.animationState&&h.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)===null||x===void 0||x.call(window,m)}),y.current=!1))}),h}function Wte(t,e,n,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:c,layoutRoot:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:JF(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&tf(o),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:c,layoutRoot:u})}function JF(t){if(t)return t.options.allowProjection!==!1?t.projection:JF(t.parent)}function Hte({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,a;t&&Ite(t);function o(u,d){let f;const h={...N.useContext(xw),...u,layoutId:Kte(u)},{isStatic:p}=h,g=$te(u),m=r(u,p);if(!p&&hT){qte();const y=Gte(h);f=y.MeasureLayout,g.visualElement=Ute(i,m,h,e,y.ProjectionNode)}return l.jsxs(_w.Provider,{value:g,children:[f&&g.visualElement?l.jsx(f,{visualElement:g.visualElement,...h}):null,n(i,u,Vte(m,g.visualElement,d),m,p,g.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${(a=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&a!==void 0?a:""})`}`;const c=N.forwardRef(o);return c[Fte]=i,c}function Kte({layoutId:t}){const e=N.useContext(fT).id;return e&&t!==void 0?e+"-"+t:t}function qte(t,e){N.useContext(GF).strict}function Gte(t){const{drag:e,layout:n}=Xf;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Yte=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function bT(t){return typeof t!="string"||t.includes("-")?!1:!!(Yte.indexOf(t)>-1||/[A-Z]/u.test(t))}function AI(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function xT(t,e,n,r){if(typeof e=="function"){const[i,s]=AI(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=AI(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const cE=t=>Array.isArray(t),Qte=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Xte=t=>cE(t)?t[t.length-1]||0:t,Xr=t=>!!(t&&t.getVelocity);function d0(t){const e=Xr(t)?t.get():t;return Qte(e)?e.toValue():e}function Zte({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const a={latestValues:Jte(r,i,s,t),renderState:e()};return n&&(a.onMount=o=>n({props:r,current:o,...a}),a.onUpdate=o=>n(o)),a}const e8=t=>(e,n)=>{const r=N.useContext(_w),i=N.useContext(bw),s=()=>Zte(t,e,r,i);return n?s():Ho(s)};function Jte(t,e,n,r){const i={},s=r(t,{});for(const h in s)i[h]=d0(s[h]);let{initial:a,animate:o}=t;const c=Aw(t),u=QF(t);e&&u&&!c&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let d=n?n.initial===!1:!1;d=d||a===!1;const f=d?o:a;if(f&&typeof f!="boolean"&&!Sw(f)){const h=Array.isArray(f)?f:[f];for(let p=0;p<h.length;p++){const g=xT(t,h[p]);if(g){const{transitionEnd:m,transition:y,...x}=g;for(const w in x){let _=x[w];if(Array.isArray(_)){const A=d?_.length-1:0;_=_[A]}_!==null&&(i[w]=_)}for(const w in m)i[w]=m[w]}}}return i}const Fh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],td=new Set(Fh),t8=t=>e=>typeof e=="string"&&e.startsWith(t),n8=t8("--"),ene=t8("var(--"),wT=t=>ene(t)?tne.test(t.split("/*")[0].trim()):!1,tne=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,r8=(t,e)=>e&&typeof t=="number"?e.transform(t):t,zo=(t,e,n)=>n>e?e:n<t?t:n,Vh={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},fg={...Vh,transform:t=>zo(0,1,t)},gy={...Vh,default:1},wv=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ml=wv("deg"),Ua=wv("%"),gt=wv("px"),nne=wv("vh"),rne=wv("vw"),EI={...Ua,parse:t=>Ua.parse(t)/100,transform:t=>Ua.transform(t*100)},ine={borderWidth:gt,borderTopWidth:gt,borderRightWidth:gt,borderBottomWidth:gt,borderLeftWidth:gt,borderRadius:gt,radius:gt,borderTopLeftRadius:gt,borderTopRightRadius:gt,borderBottomRightRadius:gt,borderBottomLeftRadius:gt,width:gt,maxWidth:gt,height:gt,maxHeight:gt,top:gt,right:gt,bottom:gt,left:gt,padding:gt,paddingTop:gt,paddingRight:gt,paddingBottom:gt,paddingLeft:gt,margin:gt,marginTop:gt,marginRight:gt,marginBottom:gt,marginLeft:gt,backgroundPositionX:gt,backgroundPositionY:gt},sne={rotate:ml,rotateX:ml,rotateY:ml,rotateZ:ml,scale:gy,scaleX:gy,scaleY:gy,scaleZ:gy,skew:ml,skewX:ml,skewY:ml,distance:gt,translateX:gt,translateY:gt,translateZ:gt,x:gt,y:gt,z:gt,perspective:gt,transformPerspective:gt,opacity:fg,originX:EI,originY:EI,originZ:gt},jI={...Vh,transform:Math.round},_T={...ine,...sne,zIndex:jI,size:gt,fillOpacity:fg,strokeOpacity:fg,numOctaves:jI},ane={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},one=Fh.length;function lne(t,e,n){let r="",i=!0;for(let s=0;s<one;s++){const a=Fh[s],o=t[a];if(o===void 0)continue;let c=!0;if(typeof o=="number"?c=o===(a.startsWith("scale")?1:0):c=parseFloat(o)===0,!c||n){const u=r8(o,_T[a]);if(!c){i=!1;const d=ane[a]||a;r+=`${d}(${u}) `}n&&(e[a]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function ST(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let a=!1,o=!1;for(const c in e){const u=e[c];if(td.has(c)){a=!0;continue}else if(n8(c)){i[c]=u;continue}else{const d=r8(u,_T[c]);c.startsWith("origin")?(o=!0,s[c]=d):r[c]=d}}if(e.transform||(a||n?r.transform=lne(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:c="50%",originY:u="50%",originZ:d=0}=s;r.transformOrigin=`${c} ${u} ${d}`}}const cne={offset:"stroke-dashoffset",array:"stroke-dasharray"},une={offset:"strokeDashoffset",array:"strokeDasharray"};function dne(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?cne:une;t[s.offset]=gt.transform(-r);const a=gt.transform(e),o=gt.transform(n);t[s.array]=`${a} ${o}`}function CI(t,e,n){return typeof t=="string"?t:gt.transform(e+n*t)}function fne(t,e,n){const r=CI(e,t.x,t.width),i=CI(n,t.y,t.height);return`${r} ${i}`}function AT(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:c=0,...u},d,f){if(ST(t,u,f),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:p,dimensions:g}=t;h.transform&&(g&&(p.transform=h.transform),delete h.transform),g&&(i!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=fne(g,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),a!==void 0&&dne(h,a,o,c,!1)}const ET=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),i8=()=>({...ET(),attrs:{}}),jT=t=>typeof t=="string"&&t.toLowerCase()==="svg";function s8(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const a8=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function o8(t,e,n,r){s8(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(a8.has(i)?i:vT(i),e.attrs[i])}const cb={};function hne(t){Object.assign(cb,t)}function l8(t,{layout:e,layoutId:n}){return td.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!cb[t]||t==="opacity")}function CT(t,e,n){var r;const{style:i}=t,s={};for(const a in i)(Xr(i[a])||e.style&&Xr(e.style[a])||l8(a,t)||((r=n==null?void 0:n.getValue(a))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[a]=i[a]);return s}function c8(t,e,n){const r=CT(t,e,n);for(const i in t)if(Xr(t[i])||Xr(e[i])){const s=Fh.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function pne(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const TI=["x","y","width","height","cx","cy","r"],mne={useVisualState:e8({scrapeMotionValuesFromProps:c8,createRenderState:i8,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const o in i)if(td.has(o)){s=!0;break}}if(!s)return;let a=!e;if(e)for(let o=0;o<TI.length;o++){const c=TI[o];t[c]!==e[c]&&(a=!0)}a&&wn.read(()=>{pne(n,r),wn.render(()=>{AT(r,i,jT(n.tagName),t.transformTemplate),o8(n,r)})})}})},gne={useVisualState:e8({scrapeMotionValuesFromProps:CT,createRenderState:ET})};function u8(t,e,n){for(const r in e)!Xr(e[r])&&!l8(r,n)&&(t[r]=e[r])}function vne({transformTemplate:t},e){return N.useMemo(()=>{const n=ET();return ST(n,e,t),Object.assign({},n.vars,n.style)},[e])}function yne(t,e){const n=t.style||{},r={};return u8(r,n,t),Object.assign(r,vne(t,e)),r}function bne(t,e){const n={},r=yne(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function xne(t,e,n,r){const i=N.useMemo(()=>{const s=i8();return AT(s,e,jT(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};u8(s,t.style,t),i.style={...s,...i.style}}return i}function wne(t=!1){return(n,r,i,{latestValues:s},a)=>{const c=(bT(n)?xne:bne)(r,s,a,n),u=Rte(r,typeof n=="string",t),d=n!==N.Fragment?{...u,...c,ref:i}:{},{children:f}=r,h=N.useMemo(()=>Xr(f)?f.get():f,[f]);return N.createElement(n,{...d,children:h})}}function _ne(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...bT(r)?mne:gne,preloadedFeatures:t,useRender:wne(i),createVisualElement:e,Component:r};return Hte(a)}}function d8(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Ew(t,e,n){const r=t.getProps();return xT(r,e,n!==void 0?n:r.custom,t)}const Sne=pT(()=>window.ScrollTimeline!==void 0);class Ane{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(Sne()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Ene extends Ane{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function TT(t,e){return t?t[e]||t.default||t:void 0}const uE=2e4;function f8(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<uE;)e+=n,r=t.next(e);return e>=uE?1/0:e}function NT(t){return typeof t=="function"}function NI(t,e){t.timeline=e,t.onfinish=null}const PT=t=>Array.isArray(t)&&typeof t[0]=="number",jne={linearEasing:void 0};function Cne(t,e){const n=pT(t);return()=>{var r;return(r=jne[e])!==null&&r!==void 0?r:n()}}const ub=Cne(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),h8=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(Qf(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function p8(t){return!!(typeof t=="function"&&ub()||!t||typeof t=="string"&&(t in dE||ub())||PT(t)||Array.isArray(t)&&t.every(p8))}const Zp=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,dE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Zp([0,.65,.55,1]),circOut:Zp([.55,0,1,.45]),backIn:Zp([.31,.01,.66,-.59]),backOut:Zp([.33,1.53,.69,.99])};function m8(t,e){if(t)return typeof t=="function"&&ub()?h8(t,e):PT(t)?Zp(t):Array.isArray(t)?t.map(n=>m8(n,e)||dE.easeOut):dE[t]}const Qs={x:!1,y:!1};function g8(){return Qs.x||Qs.y}function Tne(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function v8(t,e){const n=Tne(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function PI(t){return e=>{e.pointerType==="touch"||g8()||t(e)}}function Nne(t,e,n={}){const[r,i,s]=v8(t,n),a=PI(o=>{const{target:c}=o,u=e(o);if(typeof u!="function"||!c)return;const d=PI(f=>{u(f),c.removeEventListener("pointerleave",d)});c.addEventListener("pointerleave",d,i)});return r.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}const y8=(t,e)=>e?t===e?!0:y8(t,e.parentElement):!1,kT=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Pne=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function kne(t){return Pne.has(t.tagName)||t.tabIndex!==-1}const Jp=new WeakSet;function kI(t){return e=>{e.key==="Enter"&&t(e)}}function T_(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Dne=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=kI(()=>{if(Jp.has(n))return;T_(n,"down");const i=kI(()=>{T_(n,"up")}),s=()=>T_(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function DI(t){return kT(t)&&!g8()}function Ine(t,e,n={}){const[r,i,s]=v8(t,n),a=o=>{const c=o.currentTarget;if(!DI(o)||Jp.has(c))return;Jp.add(c);const u=e(o),d=(p,g)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),!(!DI(p)||!Jp.has(c))&&(Jp.delete(c),typeof u=="function"&&u(p,{success:g}))},f=p=>{d(p,n.useGlobalTarget||y8(c,p.target))},h=p=>{d(p,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",h,i)};return r.forEach(o=>{!kne(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),o.addEventListener("focus",u=>Dne(u,i),i)}),s}function One(t){return t==="x"||t==="y"?Qs[t]?null:(Qs[t]=!0,()=>{Qs[t]=!1}):Qs.x||Qs.y?null:(Qs.x=Qs.y=!0,()=>{Qs.x=Qs.y=!1})}const b8=new Set(["width","height","top","left","right","bottom",...Fh]);let f0;function Mne(){f0=void 0}const Wa={now:()=>(f0===void 0&&Wa.set(Gr.isProcessing||Pte.useManualTiming?Gr.timestamp:performance.now()),f0),set:t=>{f0=t,queueMicrotask(Mne)}};function DT(t,e){t.indexOf(e)===-1&&t.push(e)}function IT(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function Rne([...t],e,n){const r=e<0?t.length+e:e;if(r>=0&&r<t.length){const i=n<0?t.length+n:n,[s]=t.splice(e,1);t.splice(i,0,s)}return t}class OT{constructor(){this.subscriptions=[]}add(e){return DT(this.subscriptions,e),()=>IT(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function x8(t,e){return e?t*(1e3/e):0}const II=30,Lne=t=>!isNaN(parseFloat(t)),vm={current:void 0};class zne{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Wa.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Wa.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Lne(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new OT);const r=this.events[e].add(n);return e==="change"?()=>{r(),wn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return vm.current&&vm.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Wa.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>II)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,II);return x8(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Zf(t,e){return new zne(t,e)}function $ne(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Zf(n))}function MT(t,e){const n=Ew(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const a in s){const o=Xte(s[a]);$ne(t,a,o)}}function Fne(t){return!!(Xr(t)&&t.add)}function fE(t,e){const n=t.getValue("willChange");if(Fne(n))return n.add(e)}function w8(t){return t.props[XF]}const _8=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Vne=1e-7,Bne=12;function Une(t,e,n,r,i){let s,a,o=0;do a=e+(n-e)/2,s=_8(a,r,i)-t,s>0?n=a:e=a;while(Math.abs(s)>Vne&&++o<Bne);return a}function _v(t,e,n,r){if(t===e&&n===r)return as;const i=s=>Une(s,0,1,t,n);return s=>s===0||s===1?s:_8(i(s),e,r)}const S8=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,A8=t=>e=>1-t(1-e),E8=_v(.33,1.53,.69,.99),RT=A8(E8),j8=S8(RT),C8=t=>(t*=2)<1?.5*RT(t):.5*(2-Math.pow(2,-10*(t-1))),LT=t=>1-Math.sin(Math.acos(t)),T8=A8(LT),N8=S8(LT),P8=t=>/^0[^.\s]+$/u.test(t);function Wne(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||P8(t):!0}const ym=t=>Math.round(t*1e5)/1e5,zT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Hne(t){return t==null}const Kne=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,$T=(t,e)=>n=>!!(typeof n=="string"&&Kne.test(n)&&n.startsWith(t)||e&&!Hne(n)&&Object.prototype.hasOwnProperty.call(n,e)),k8=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,a,o]=r.match(zT);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},qne=t=>zo(0,255,t),N_={...Vh,transform:t=>Math.round(qne(t))},su={test:$T("rgb","red"),parse:k8("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+N_.transform(t)+", "+N_.transform(e)+", "+N_.transform(n)+", "+ym(fg.transform(r))+")"};function Gne(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const hE={test:$T("#"),parse:Gne,transform:su.transform},nf={test:$T("hsl","hue"),parse:k8("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ua.transform(ym(e))+", "+Ua.transform(ym(n))+", "+ym(fg.transform(r))+")"},ui={test:t=>su.test(t)||hE.test(t)||nf.test(t),parse:t=>su.test(t)?su.parse(t):nf.test(t)?nf.parse(t):hE.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?su.transform(t):nf.transform(t)},Yne=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Qne(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(zT))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(Yne))===null||n===void 0?void 0:n.length)||0)>0}const D8="number",I8="color",Xne="var",Zne="var(",OI="${}",Jne=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function hg(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=e.replace(Jne,c=>(ui.test(c)?(r.color.push(s),i.push(I8),n.push(ui.parse(c))):c.startsWith(Zne)?(r.var.push(s),i.push(Xne),n.push(c)):(r.number.push(s),i.push(D8),n.push(parseFloat(c))),++s,OI)).split(OI);return{values:n,split:o,indexes:r,types:i}}function O8(t){return hg(t).values}function M8(t){const{split:e,types:n}=hg(t),r=e.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=e[a],i[a]!==void 0){const o=n[a];o===D8?s+=ym(i[a]):o===I8?s+=ui.transform(i[a]):s+=i[a]}return s}}const ere=t=>typeof t=="number"?0:t;function tre(t){const e=O8(t);return M8(t)(e.map(ere))}const Zl={test:Qne,parse:O8,createTransformer:M8,getAnimatableNone:tre},nre=new Set(["brightness","contrast","saturate","opacity"]);function rre(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(zT)||[];if(!r)return t;const i=n.replace(r,"");let s=nre.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const ire=/\b([a-z-]*)\(.*?\)/gu,pE={...Zl,getAnimatableNone:t=>{const e=t.match(ire);return e?e.map(rre).join(" "):t}},sre={..._T,color:ui,backgroundColor:ui,outlineColor:ui,fill:ui,stroke:ui,borderColor:ui,borderTopColor:ui,borderRightColor:ui,borderBottomColor:ui,borderLeftColor:ui,filter:pE,WebkitFilter:pE},FT=t=>sre[t];function R8(t,e){let n=FT(t);return n!==pE&&(n=Zl),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const are=new Set(["auto","none","0"]);function ore(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!are.has(s)&&hg(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=R8(n,i)}const MI=t=>t===Vh||t===gt,RI=(t,e)=>parseFloat(t.split(", ")[e]),LI=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return RI(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?RI(s[1],t):0}},lre=new Set(["x","y","z"]),cre=Fh.filter(t=>!lre.has(t));function ure(t){const e=[];return cre.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Jf={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:LI(4,13),y:LI(5,14)};Jf.translateX=Jf.x;Jf.translateY=Jf.y;const bu=new Set;let mE=!1,gE=!1;function L8(){if(gE){const t=Array.from(bu).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=ure(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,a])=>{var o;(o=r.getValue(s))===null||o===void 0||o.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}gE=!1,mE=!1,bu.forEach(t=>t.complete()),bu.clear()}function z8(){bu.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(gE=!0)})}function dre(){z8(),L8()}class VT{constructor(e,n,r,i,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(bu.add(this),mE||(mE=!0,wn.read(z8),wn.resolveKeyframes(L8))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const a=i==null?void 0:i.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const c=r.readValue(n,o);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=o),i&&a===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),bu.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,bu.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const $8=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),fre=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function hre(t){const e=fre.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function F8(t,e,n=1){const[r,i]=hre(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return $8(a)?parseFloat(a):a}return wT(i)?F8(i,e,n+1):i}const V8=t=>e=>e.test(t),pre={test:t=>t==="auto",parse:t=>t},B8=[Vh,gt,Ua,ml,rne,nne,pre],zI=t=>B8.find(V8(t));class U8 extends VT{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),wT(u))){const d=F8(u,n.current);d!==void 0&&(e[c]=d),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!b8.has(r)||e.length!==2)return;const[i,s]=e,a=zI(i),o=zI(s);if(a!==o)if(MI(a)&&MI(o))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)Wne(e[i])&&r.push(i);r.length&&ore(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Jf[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const a=i.length-1,o=i[a];i[a]=Jf[r](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,u])=>{n.getValue(c).set(u)}),this.resolveNoneKeyframes()}}const $I=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Zl.test(t)||t==="0")&&!t.startsWith("url("));function mre(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function gre(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],a=$I(i,e),o=$I(s,e);return!a||!o?!1:mre(t)||(n==="spring"||NT(n))&&r}const vre=t=>t!==null;function jw(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(vre),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const yre=40;class W8{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Wa.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>yre?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&dre(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Wa.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:a,onComplete:o,onUpdate:c,isGenerator:u}=this.options;if(!u&&!gre(e,r,i,s))if(a)this.options.duration=0;else{c&&c(jw(e,this.options,n)),o&&o(),this.resolveFinishedPromise();return}const d=this.initPlayback(e,n);d!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...d},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const kn=(t,e,n)=>t+(e-t)*n;function P_(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function bre({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,a=0;if(!e)i=s=a=n;else{const o=n<.5?n*(1+e):n+e-n*e,c=2*n-o;i=P_(c,o,t+1/3),s=P_(c,o,t),a=P_(c,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function db(t,e){return n=>n>0?e:t}const k_=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},xre=[hE,su,nf],wre=t=>xre.find(e=>e.test(t));function FI(t){const e=wre(t);if(!e)return!1;let n=e.parse(t);return e===nf&&(n=bre(n)),n}const VI=(t,e)=>{const n=FI(t),r=FI(e);if(!n||!r)return db(t,e);const i={...n};return s=>(i.red=k_(n.red,r.red,s),i.green=k_(n.green,r.green,s),i.blue=k_(n.blue,r.blue,s),i.alpha=kn(n.alpha,r.alpha,s),su.transform(i))},_re=(t,e)=>n=>e(t(n)),Sv=(...t)=>t.reduce(_re),vE=new Set(["none","hidden"]);function Sre(t,e){return vE.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Are(t,e){return n=>kn(t,e,n)}function BT(t){return typeof t=="number"?Are:typeof t=="string"?wT(t)?db:ui.test(t)?VI:Cre:Array.isArray(t)?H8:typeof t=="object"?ui.test(t)?VI:Ere:db}function H8(t,e){const n=[...t],r=n.length,i=t.map((s,a)=>BT(s)(s,e[a]));return s=>{for(let a=0;a<r;a++)n[a]=i[a](s);return n}}function Ere(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=BT(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function jre(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],o=t.indexes[a][i[a]],c=(n=t.values[o])!==null&&n!==void 0?n:0;r[s]=c,i[a]++}return r}const Cre=(t,e)=>{const n=Zl.createTransformer(e),r=hg(t),i=hg(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?vE.has(t)&&!i.values.length||vE.has(e)&&!r.values.length?Sre(t,e):Sv(H8(jre(r,i),i.values),n):db(t,e)};function K8(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?kn(t,e,n):BT(t)(t,e)}const Tre=5;function q8(t,e,n){const r=Math.max(e-Tre,0);return x8(n-t(r),e-r)}const Wn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},D_=.001;function Nre({duration:t=Wn.duration,bounce:e=Wn.bounce,velocity:n=Wn.velocity,mass:r=Wn.mass}){let i,s,a=1-e;a=zo(Wn.minDamping,Wn.maxDamping,a),t=zo(Wn.minDuration,Wn.maxDuration,Co(t)),a<1?(i=u=>{const d=u*a,f=d*t,h=d-n,p=yE(u,a),g=Math.exp(-f);return D_-h/p*g},s=u=>{const f=u*a*t,h=f*n+n,p=Math.pow(a,2)*Math.pow(u,2)*t,g=Math.exp(-f),m=yE(Math.pow(u,2),a);return(-i(u)+D_>0?-1:1)*((h-p)*g)/m}):(i=u=>{const d=Math.exp(-u*t),f=(u-n)*t+1;return-D_+d*f},s=u=>{const d=Math.exp(-u*t),f=(n-u)*(t*t);return d*f});const o=5/t,c=kre(i,s,o);if(t=jo(t),isNaN(c))return{stiffness:Wn.stiffness,damping:Wn.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:a*2*Math.sqrt(r*u),duration:t}}}const Pre=12;function kre(t,e,n){let r=n;for(let i=1;i<Pre;i++)r=r-t(r)/e(r);return r}function yE(t,e){return t*Math.sqrt(1-e*e)}const Dre=["duration","bounce"],Ire=["stiffness","damping","mass"];function BI(t,e){return e.some(n=>t[n]!==void 0)}function Ore(t){let e={velocity:Wn.velocity,stiffness:Wn.stiffness,damping:Wn.damping,mass:Wn.mass,isResolvedFromDuration:!1,...t};if(!BI(t,Ire)&&BI(t,Dre))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*zo(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Wn.mass,stiffness:i,damping:s}}else{const n=Nre(t);e={...e,...n,mass:Wn.mass},e.isResolvedFromDuration=!0}return e}function G8(t=Wn.visualDuration,e=Wn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:s},{stiffness:c,damping:u,mass:d,duration:f,velocity:h,isResolvedFromDuration:p}=Ore({...n,velocity:-Co(n.velocity||0)}),g=h||0,m=u/(2*Math.sqrt(c*d)),y=a-s,x=Co(Math.sqrt(c/d)),w=Math.abs(y)<5;r||(r=w?Wn.restSpeed.granular:Wn.restSpeed.default),i||(i=w?Wn.restDelta.granular:Wn.restDelta.default);let _;if(m<1){const E=yE(x,m);_=C=>{const j=Math.exp(-m*x*C);return a-j*((g+m*x*y)/E*Math.sin(E*C)+y*Math.cos(E*C))}}else if(m===1)_=E=>a-Math.exp(-x*E)*(y+(g+x*y)*E);else{const E=x*Math.sqrt(m*m-1);_=C=>{const j=Math.exp(-m*x*C),T=Math.min(E*C,300);return a-j*((g+m*x*y)*Math.sinh(T)+E*y*Math.cosh(T))/E}}const A={calculatedDuration:p&&f||null,next:E=>{const C=_(E);if(p)o.done=E>=f;else{let j=0;m<1&&(j=E===0?jo(g):q8(_,E,C));const T=Math.abs(j)<=r,P=Math.abs(a-C)<=i;o.done=T&&P}return o.value=o.done?a:C,o},toString:()=>{const E=Math.min(f8(A),uE),C=h8(j=>A.next(E*j).value,E,30);return E+"ms "+C}};return A}function UI({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:c,restDelta:u=.5,restSpeed:d}){const f=t[0],h={done:!1,value:f},p=T=>o!==void 0&&T<o||c!==void 0&&T>c,g=T=>o===void 0?c:c===void 0||Math.abs(o-T)<Math.abs(c-T)?o:c;let m=n*e;const y=f+m,x=a===void 0?y:a(y);x!==y&&(m=x-f);const w=T=>-m*Math.exp(-T/r),_=T=>x+w(T),A=T=>{const P=w(T),I=_(T);h.done=Math.abs(P)<=u,h.value=h.done?x:I};let E,C;const j=T=>{p(h.value)&&(E=T,C=G8({keyframes:[h.value,g(h.value)],velocity:q8(_,T,h.value),damping:i,stiffness:s,restDelta:u,restSpeed:d}))};return j(0),{calculatedDuration:null,next:T=>{let P=!1;return!C&&E===void 0&&(P=!0,A(T),j(T)),E!==void 0&&T>=E?C.next(T-E):(!P&&A(T),h)}}}const Mre=_v(.42,0,1,1),Rre=_v(0,0,.58,1),Y8=_v(.42,0,.58,1),Lre=t=>Array.isArray(t)&&typeof t[0]!="number",zre={linear:as,easeIn:Mre,easeInOut:Y8,easeOut:Rre,circIn:LT,circInOut:N8,circOut:T8,backIn:RT,backInOut:j8,backOut:E8,anticipate:C8},WI=t=>{if(PT(t)){KF(t.length===4);const[e,n,r,i]=t;return _v(e,n,r,i)}else if(typeof t=="string")return zre[t];return t};function $re(t,e,n){const r=[],i=n||K8,s=t.length-1;for(let a=0;a<s;a++){let o=i(t[a],t[a+1]);if(e){const c=Array.isArray(e)?e[a]||as:e;o=Sv(c,o)}r.push(o)}return r}function Q8(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(KF(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=$re(e,r,i),c=o.length,u=d=>{if(a&&d<t[0])return e[0];let f=0;if(c>1)for(;f<t.length-2&&!(d<t[f+1]);f++);const h=Qf(t[f],t[f+1],d);return o[f](h)};return n?d=>u(zo(t[0],t[s-1],d)):u}function Fre(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Qf(0,e,r);t.push(kn(n,1,i))}}function Vre(t){const e=[0];return Fre(e,t.length-1),e}function Bre(t,e){return t.map(n=>n*e)}function Ure(t,e){return t.map(()=>e||Y8).splice(0,t.length-1)}function fb({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=Lre(r)?r.map(WI):WI(r),s={done:!1,value:e[0]},a=Bre(n&&n.length===e.length?n:Vre(e),t),o=Q8(a,e,{ease:Array.isArray(i)?i:Ure(e,i)});return{calculatedDuration:t,next:c=>(s.value=o(c),s.done=c>=t,s)}}const Wre=t=>{const e=({timestamp:n})=>t(n);return{start:()=>wn.update(e,!0),stop:()=>Lo(e),now:()=>Gr.isProcessing?Gr.timestamp:Wa.now()}},Hre={decay:UI,inertia:UI,tween:fb,keyframes:fb,spring:G8},Kre=t=>t/100;class UT extends W8{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,a=(i==null?void 0:i.KeyframeResolver)||VT,o=(c,u)=>this.onKeyframesResolved(c,u);this.resolver=new a(s,o,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=this.options,o=NT(n)?n:Hre[n]||fb;let c,u;o!==fb&&typeof e[0]!="number"&&(c=Sv(Kre,K8(e[0],e[1])),e=[0,100]);const d=o({...this.options,keyframes:e});s==="mirror"&&(u=o({...this.options,keyframes:[...e].reverse(),velocity:-a})),d.calculatedDuration===null&&(d.calculatedDuration=f8(d));const{calculatedDuration:f}=d,h=f+i,p=h*(r+1)-i;return{generator:d,mirroredGenerator:u,mapPercentToKeyframes:c,calculatedDuration:f,resolvedDuration:h,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:T}=this.options;return{done:!0,value:T[T.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:c,calculatedDuration:u,totalDuration:d,resolvedDuration:f}=r;if(this.startTime===null)return s.next(0);const{delay:h,repeat:p,repeatType:g,repeatDelay:m,onUpdate:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-d/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const x=this.currentTime-h*(this.speed>=0?1:-1),w=this.speed>=0?x<0:x>d;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let _=this.currentTime,A=s;if(p){const T=Math.min(this.currentTime,d)/f;let P=Math.floor(T),I=T%1;!I&&T>=1&&(I=1),I===1&&P--,P=Math.min(P,p+1),!!(P%2)&&(g==="reverse"?(I=1-I,m&&(I-=m/f)):g==="mirror"&&(A=a)),_=zo(0,1,I)*f}const E=w?{done:!1,value:c[0]}:A.next(_);o&&(E.value=o(E.value));let{done:C}=E;!w&&u!==null&&(C=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return j&&i!==void 0&&(E.value=jw(c,this.options,i)),y&&y(E.value),j&&this.finish(),E}get duration(){const{resolved:e}=this;return e?Co(e.calculatedDuration):0}get time(){return Co(this.currentTime)}set time(e){e=jo(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Co(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Wre,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const qre=new Set(["opacity","clipPath","filter","transform"]);function Gre(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeInOut",times:c}={}){const u={[e]:n};c&&(u.offset=c);const d=m8(o,i);return Array.isArray(d)&&(u.easing=d),t.animate(u,{delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}const Yre=pT(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),hb=10,Qre=2e4;function Xre(t){return NT(t.type)||t.type==="spring"||!p8(t.ease)}function Zre(t,e){const n=new UT({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<Qre;)r=n.sample(s),i.push(r.value),s+=hb;return{times:void 0,keyframes:i,duration:s-hb,ease:"linear"}}const X8={anticipate:C8,backInOut:j8,circInOut:N8};function Jre(t){return t in X8}class HI extends W8{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new U8(s,(a,o)=>this.onKeyframesResolved(a,o),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:a,motionValue:o,name:c,startTime:u}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof s=="string"&&ub()&&Jre(s)&&(s=X8[s]),Xre(this.options)){const{onComplete:f,onUpdate:h,motionValue:p,element:g,...m}=this.options,y=Zre(e,m);e=y.keyframes,e.length===1&&(e[1]=e[0]),r=y.duration,i=y.times,s=y.ease,a="keyframes"}const d=Gre(o.owner.current,c,e,{...this.options,duration:r,times:i,ease:s});return d.startTime=u??this.calcStartTime(),this.pendingTimeline?(NI(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:f}=this.options;o.set(jw(e,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:r,times:i,type:a,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Co(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Co(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=jo(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return as;const{animation:r}=n;NI(r,e)}return as}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:a,times:o}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:d,onComplete:f,element:h,...p}=this.options,g=new UT({...p,keyframes:r,duration:i,type:s,ease:a,times:o,isGenerator:!0}),m=jo(this.time);u.setWithVelocity(g.sample(m-hb).value,g.sample(m).value,hb)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:a,type:o}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=n.owner.getProps();return Yre()&&r&&qre.has(r)&&!c&&!u&&!i&&s!=="mirror"&&a!==0&&o!=="inertia"}}const eie={type:"spring",stiffness:500,damping:25,restSpeed:10},tie=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),nie={type:"keyframes",duration:.8},rie={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},iie=(t,{keyframes:e})=>e.length>2?nie:td.has(t)?t.startsWith("scale")?tie(e[1]):eie:rie;function sie({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const WT=(t,e,n,r={},i,s)=>a=>{const o=TT(r,t)||{},c=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-jo(c);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:h=>{e.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:s?void 0:i};sie(o)||(d={...d,...iie(t,d)}),d.duration&&(d.duration=jo(d.duration)),d.repeatDelay&&(d.repeatDelay=jo(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(f=!0)),f&&!s&&e.get()!==void 0){const h=jw(d.keyframes,o);if(h!==void 0)return wn.update(()=>{d.onUpdate(h),d.onComplete()}),new Ene([])}return!s&&HI.supports(d)?new HI(d):new UT(d)};function aie({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Z8(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:a=t.getDefaultTransition(),transitionEnd:o,...c}=e;r&&(a=r);const u=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const f in c){const h=t.getValue(f,(s=t.latestValues[f])!==null&&s!==void 0?s:null),p=c[f];if(p===void 0||d&&aie(d,f))continue;const g={delay:n,...TT(a||{},f)};let m=!1;if(window.MotionHandoffAnimation){const x=w8(t);if(x){const w=window.MotionHandoffAnimation(x,f,wn);w!==null&&(g.startTime=w,m=!0)}}fE(t,f),h.start(WT(f,h,p,t.shouldReduceMotion&&b8.has(f)?{type:!1}:g,t,m));const y=h.animation;y&&u.push(y)}return o&&Promise.all(u).then(()=>{wn.update(()=>{o&&MT(t,o)})}),u}function bE(t,e,n={}){var r;const i=Ew(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const a=i?()=>Promise.all(Z8(t,i,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:h}=s;return oie(t,e,d+u,f,h,n)}:()=>Promise.resolve(),{when:c}=s;if(c){const[u,d]=c==="beforeChildren"?[a,o]:[o,a];return u().then(()=>d())}else return Promise.all([a(),o(n.delay)])}function oie(t,e,n=0,r=0,i=1,s){const a=[],o=(t.variantChildren.size-1)*r,c=i===1?(u=0)=>u*r:(u=0)=>o-u*r;return Array.from(t.variantChildren).sort(lie).forEach((u,d)=>{u.notify("AnimationStart",e),a.push(bE(u,e,{...s,delay:n+c(d)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(a)}function lie(t,e){return t.sortNodePosition(e)}function J8(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>bE(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=bE(t,e,n);else{const i=typeof e=="function"?Ew(t,e,n.custom):e;r=Promise.all(Z8(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const cie=gT.length;function eV(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?eV(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<cie;n++){const r=gT[n],i=t.props[r];(dg(i)||i===!1)&&(e[r]=i)}return e}const uie=[...mT].reverse(),die=mT.length;function fie(t){return e=>Promise.all(e.map(({animation:n,options:r})=>J8(t,n,r)))}function hie(t){let e=fie(t),n=KI(),r=!0;const i=c=>(u,d)=>{var f;const h=Ew(t,d,c==="exit"?(f=t.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(h){const{transition:p,transitionEnd:g,...m}=h;u={...u,...m,...g}}return u};function s(c){e=c(t)}function a(c){const{props:u}=t,d=eV(t.parent)||{},f=[],h=new Set;let p={},g=1/0;for(let y=0;y<die;y++){const x=uie[y],w=n[x],_=u[x]!==void 0?u[x]:d[x],A=dg(_),E=x===c?w.isActive:null;E===!1&&(g=y);let C=_===d[x]&&_!==u[x]&&A;if(C&&r&&t.manuallyAnimateOnMount&&(C=!1),w.protectedKeys={...p},!w.isActive&&E===null||!_&&!w.prevProp||Sw(_)||typeof _=="boolean")continue;const j=pie(w.prevProp,_);let T=j||x===c&&w.isActive&&!C&&A||y>g&&A,P=!1;const I=Array.isArray(_)?_:[_];let M=I.reduce(i(x),{});E===!1&&(M={});const{prevResolvedValues:F={}}=w,R={...F,...M},H=U=>{T=!0,h.has(U)&&(P=!0,h.delete(U)),w.needsAnimating[U]=!0;const $=t.getValue(U);$&&($.liveStyle=!1)};for(const U in R){const $=M[U],Y=F[U];if(p.hasOwnProperty(U))continue;let Q=!1;cE($)&&cE(Y)?Q=!d8($,Y):Q=$!==Y,Q?$!=null?H(U):h.add(U):$!==void 0&&h.has(U)?H(U):w.protectedKeys[U]=!0}w.prevProp=_,w.prevResolvedValues=M,w.isActive&&(p={...p,...M}),r&&t.blockInitialAnimation&&(T=!1),T&&(!(C&&j)||P)&&f.push(...I.map(U=>({animation:U,options:{type:x}})))}if(h.size){const y={};h.forEach(x=>{const w=t.getBaseTarget(x),_=t.getValue(x);_&&(_.liveStyle=!0),y[x]=w??null}),f.push({animation:y})}let m=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(m=!1),r=!1,m?e(f):Promise.resolve()}function o(c,u){var d;if(n[c].isActive===u)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(h=>{var p;return(p=h.animationState)===null||p===void 0?void 0:p.setActive(c,u)}),n[c].isActive=u;const f=a(c);for(const h in n)n[h].protectedKeys={};return f}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>n,reset:()=>{n=KI(),r=!0}}}function pie(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!d8(e,t):!1}function Rc(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function KI(){return{animate:Rc(!0),whileInView:Rc(),whileHover:Rc(),whileTap:Rc(),whileDrag:Rc(),whileFocus:Rc(),exit:Rc()}}class oc{constructor(e){this.isMounted=!1,this.node=e}update(){}}class mie extends oc{constructor(e){super(e),e.animationState||(e.animationState=hie(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Sw(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let gie=0;class vie extends oc{constructor(){super(...arguments),this.id=gie++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const yie={animation:{Feature:mie},exit:{Feature:vie}};function pg(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Av(t){return{point:{x:t.pageX,y:t.pageY}}}const bie=t=>e=>kT(e)&&t(e,Av(e));function bm(t,e,n,r){return pg(t,e,bie(n),r)}const qI=(t,e)=>Math.abs(t-e);function xie(t,e){const n=qI(t.x,e.x),r=qI(t.y,e.y);return Math.sqrt(n**2+r**2)}class tV{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=O_(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,p=xie(f.offset,{x:0,y:0})>=3;if(!h&&!p)return;const{point:g}=f,{timestamp:m}=Gr;this.history.push({...g,timestamp:m});const{onStart:y,onMove:x}=this.handlers;h||(y&&y(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,f)},this.handlePointerMove=(f,h)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=I_(h,this.transformPagePoint),wn.update(this.updatePoint,!0)},this.handlePointerUp=(f,h)=>{this.end();const{onEnd:p,onSessionEnd:g,resumeAnimation:m}=this.handlers;if(this.dragSnapToOrigin&&m&&m(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=O_(f.type==="pointercancel"?this.lastMoveEventInfo:I_(h,this.transformPagePoint),this.history);this.startEvent&&p&&p(f,y),g&&g(f,y)},!kT(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const a=Av(e),o=I_(a,this.transformPagePoint),{point:c}=o,{timestamp:u}=Gr;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=n;d&&d(e,O_(o,this.history)),this.removeListeners=Sv(bm(this.contextWindow,"pointermove",this.handlePointerMove),bm(this.contextWindow,"pointerup",this.handlePointerUp),bm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Lo(this.updatePoint)}}function I_(t,e){return e?{point:e(t.point)}:t}function GI(t,e){return{x:t.x-e.x,y:t.y-e.y}}function O_({point:t},e){return{point:t,delta:GI(t,nV(e)),offset:GI(t,wie(e)),velocity:_ie(e,.1)}}function wie(t){return t[0]}function nV(t){return t[t.length-1]}function _ie(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=nV(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>jo(e)));)n--;if(!r)return{x:0,y:0};const s=Co(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const rV=1e-4,Sie=1-rV,Aie=1+rV,iV=.01,Eie=0-iV,jie=0+iV;function hs(t){return t.max-t.min}function Cie(t,e,n){return Math.abs(t-e)<=n}function YI(t,e,n,r=.5){t.origin=r,t.originPoint=kn(e.min,e.max,t.origin),t.scale=hs(n)/hs(e),t.translate=kn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Sie&&t.scale<=Aie||isNaN(t.scale))&&(t.scale=1),(t.translate>=Eie&&t.translate<=jie||isNaN(t.translate))&&(t.translate=0)}function xm(t,e,n,r){YI(t.x,e.x,n.x,r?r.originX:void 0),YI(t.y,e.y,n.y,r?r.originY:void 0)}function QI(t,e,n){t.min=n.min+e.min,t.max=t.min+hs(e)}function Tie(t,e,n){QI(t.x,e.x,n.x),QI(t.y,e.y,n.y)}function XI(t,e,n){t.min=e.min-n.min,t.max=t.min+hs(e)}function wm(t,e,n){XI(t.x,e.x,n.x),XI(t.y,e.y,n.y)}function Nie(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?kn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?kn(n,t,r.max):Math.min(t,n)),t}function ZI(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Pie(t,{top:e,left:n,bottom:r,right:i}){return{x:ZI(t.x,n,i),y:ZI(t.y,e,r)}}function JI(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function kie(t,e){return{x:JI(t.x,e.x),y:JI(t.y,e.y)}}function Die(t,e){let n=.5;const r=hs(t),i=hs(e);return i>r?n=Qf(e.min,e.max-r,t.min):r>i&&(n=Qf(t.min,t.max-i,e.min)),zo(0,1,n)}function Iie(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const xE=.35;function Oie(t=xE){return t===!1?t=0:t===!0&&(t=xE),{x:eO(t,"left","right"),y:eO(t,"top","bottom")}}function eO(t,e,n){return{min:tO(t,e),max:tO(t,n)}}function tO(t,e){return typeof t=="number"?t:t[e]||0}const nO=()=>({translate:0,scale:1,origin:0,originPoint:0}),rf=()=>({x:nO(),y:nO()}),rO=()=>({min:0,max:0}),er=()=>({x:rO(),y:rO()});function js(t){return[t("x"),t("y")]}function sV({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Mie({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Rie(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function M_(t){return t===void 0||t===1}function wE({scale:t,scaleX:e,scaleY:n}){return!M_(t)||!M_(e)||!M_(n)}function Uc(t){return wE(t)||aV(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function aV(t){return iO(t.x)||iO(t.y)}function iO(t){return t&&t!=="0%"}function pb(t,e,n){const r=t-n,i=e*r;return n+i}function sO(t,e,n,r,i){return i!==void 0&&(t=pb(t,i,r)),pb(t,n,r)+e}function _E(t,e=0,n=1,r,i){t.min=sO(t.min,e,n,r,i),t.max=sO(t.max,e,n,r,i)}function oV(t,{x:e,y:n}){_E(t.x,e.translate,e.scale,e.originPoint),_E(t.y,n.translate,n.scale,n.originPoint)}const aO=.999999999999,oO=1.0000000000001;function Lie(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,a;for(let o=0;o<i;o++){s=n[o],a=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&af(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,oV(t,a)),r&&Uc(s.latestValues)&&af(t,s.latestValues))}e.x<oO&&e.x>aO&&(e.x=1),e.y<oO&&e.y>aO&&(e.y=1)}function sf(t,e){t.min=t.min+e,t.max=t.max+e}function lO(t,e,n,r,i=.5){const s=kn(t.min,t.max,i);_E(t,e,n,s,r)}function af(t,e){lO(t.x,e.x,e.scaleX,e.scale,e.originX),lO(t.y,e.y,e.scaleY,e.scale,e.originY)}function lV(t,e){return sV(Rie(t.getBoundingClientRect(),e))}function zie(t,e,n){const r=lV(t,n),{scroll:i}=e;return i&&(sf(r.x,i.offset.x),sf(r.y,i.offset.y)),r}const cV=({current:t})=>t?t.ownerDocument.defaultView:null,$ie=new WeakMap;class Fie{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=er(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Av(d).point)},s=(d,f)=>{const{drag:h,dragPropagation:p,onDragStart:g}=this.getProps();if(h&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=One(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),js(y=>{let x=this.getAxisMotionValue(y).get()||0;if(Ua.test(x)){const{projection:w}=this.visualElement;if(w&&w.layout){const _=w.layout.layoutBox[y];_&&(x=hs(_)*(parseFloat(x)/100))}}this.originPoint[y]=x}),g&&wn.postRender(()=>g(d,f)),fE(this.visualElement,"transform");const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},a=(d,f)=>{const{dragPropagation:h,dragDirectionLock:p,onDirectionLock:g,onDrag:m}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:y}=f;if(p&&this.currentDirection===null){this.currentDirection=Vie(y),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",f.point,y),this.updateAxis("y",f.point,y),this.visualElement.render(),m&&m(d,f)},o=(d,f)=>this.stop(d,f),c=()=>js(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new tV(e,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:cV(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&wn.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!vy(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=Nie(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&tf(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=Pie(i.layoutBox,n):this.constraints=!1,this.elastic=Oie(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&js(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Iie(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!tf(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=zie(r,i.root,this.visualElement.getTransformPagePoint());let a=kie(i.layout.layoutBox,s);if(n){const o=n(Mie(a));this.hasMutatedConstraints=!!o,o&&(a=sV(o))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},u=js(d=>{if(!vy(d,n,this.currentDirection))return;let f=c&&c[d]||{};a&&(f={min:0,max:0});const h=i?200:1e6,p=i?40:1e7,g={type:"inertia",velocity:r?e[d]:0,bounceStiffness:h,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(d,g)});return Promise.all(u).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return fE(this.visualElement,e),r.start(WT(e,r,0,n,this.visualElement,!1))}stopAnimation(){js(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){js(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){js(n=>{const{drag:r}=this.getProps();if(!vy(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[n];s.set(e[n]-kn(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!tf(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};js(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const c=o.get();i[a]=Die({min:c,max:c},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),js(a=>{if(!vy(a,e,null))return;const o=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];o.set(kn(c,u,i[a]))})}addListeners(){if(!this.visualElement.current)return;$ie.set(this.visualElement,this);const e=this.visualElement.current,n=bm(e,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();tf(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),wn.read(r);const a=pg(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(js(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=c[d].translate,f.set(f.get()+c[d].translate))}),this.visualElement.render())});return()=>{a(),n(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=xE,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function vy(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Vie(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Bie extends oc{constructor(e){super(e),this.removeGroupControls=as,this.removeListeners=as,this.controls=new Fie(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||as}unmount(){this.removeGroupControls(),this.removeListeners()}}const cO=t=>(e,n)=>{t&&wn.postRender(()=>t(e,n))};class Uie extends oc{constructor(){super(...arguments),this.removePointerDownListener=as}onPointerDown(e){this.session=new tV(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:cV(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:cO(e),onStart:cO(n),onMove:r,onEnd:(s,a)=>{delete this.session,i&&wn.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=bm(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const h0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function uO(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const kp={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(gt.test(t))t=parseFloat(t);else return t;const n=uO(t,e.target.x),r=uO(t,e.target.y);return`${n}% ${r}%`}},Wie={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Zl.parse(t);if(i.length>5)return r;const s=Zl.createTransformer(t),a=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,c=n.y.scale*e.y;i[0+a]/=o,i[1+a]/=c;const u=kn(o,c,.5);return typeof i[2+a]=="number"&&(i[2+a]/=u),typeof i[3+a]=="number"&&(i[3+a]/=u),s(i)}};class Hie extends N.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;hne(Kie),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),h0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,a=r.projection;return a&&(a.isPresent=s,i||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||wn.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),yT.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function uV(t){const[e,n]=HF(),r=N.useContext(fT);return l.jsx(Hie,{...t,layoutGroup:r,switchLayoutGroup:N.useContext(ZF),isPresent:e,safeToRemove:n})}const Kie={borderRadius:{...kp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:kp,borderTopRightRadius:kp,borderBottomLeftRadius:kp,borderBottomRightRadius:kp,boxShadow:Wie};function qie(t,e,n){const r=Xr(t)?t:Zf(t);return r.start(WT("",r,e,n)),r.animation}function Gie(t){return t instanceof SVGElement&&t.tagName!=="svg"}const Yie=(t,e)=>t.depth-e.depth;class Qie{constructor(){this.children=[],this.isDirty=!1}add(e){DT(this.children,e),this.isDirty=!0}remove(e){IT(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Yie),this.isDirty=!1,this.children.forEach(e)}}function Xie(t,e){const n=Wa.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Lo(r),t(s-e))};return wn.read(r,!0),()=>Lo(r)}const dV=["TopLeft","TopRight","BottomLeft","BottomRight"],Zie=dV.length,dO=t=>typeof t=="string"?parseFloat(t):t,fO=t=>typeof t=="number"||gt.test(t);function Jie(t,e,n,r,i,s){i?(t.opacity=kn(0,n.opacity!==void 0?n.opacity:1,ese(r)),t.opacityExit=kn(e.opacity!==void 0?e.opacity:1,0,tse(r))):s&&(t.opacity=kn(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let a=0;a<Zie;a++){const o=`border${dV[a]}Radius`;let c=hO(e,o),u=hO(n,o);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||fO(c)===fO(u)?(t[o]=Math.max(kn(dO(c),dO(u),r),0),(Ua.test(u)||Ua.test(c))&&(t[o]+="%")):t[o]=u}(e.rotate||n.rotate)&&(t.rotate=kn(e.rotate||0,n.rotate||0,r))}function hO(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const ese=fV(0,.5,T8),tse=fV(.5,.95,as);function fV(t,e,n){return r=>r<t?0:r>e?1:n(Qf(t,e,r))}function pO(t,e){t.min=e.min,t.max=e.max}function _s(t,e){pO(t.x,e.x),pO(t.y,e.y)}function mO(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function gO(t,e,n,r,i){return t-=e,t=pb(t,1/n,r),i!==void 0&&(t=pb(t,1/i,r)),t}function nse(t,e=0,n=1,r=.5,i,s=t,a=t){if(Ua.test(e)&&(e=parseFloat(e),e=kn(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=kn(s.min,s.max,r);t===s&&(o-=e),t.min=gO(t.min,e,n,o,i),t.max=gO(t.max,e,n,o,i)}function vO(t,e,[n,r,i],s,a){nse(t,e[n],e[r],e[i],e.scale,s,a)}const rse=["x","scaleX","originX"],ise=["y","scaleY","originY"];function yO(t,e,n,r){vO(t.x,e,rse,n?n.x:void 0,r?r.x:void 0),vO(t.y,e,ise,n?n.y:void 0,r?r.y:void 0)}function bO(t){return t.translate===0&&t.scale===1}function hV(t){return bO(t.x)&&bO(t.y)}function xO(t,e){return t.min===e.min&&t.max===e.max}function sse(t,e){return xO(t.x,e.x)&&xO(t.y,e.y)}function wO(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function pV(t,e){return wO(t.x,e.x)&&wO(t.y,e.y)}function _O(t){return hs(t.x)/hs(t.y)}function SO(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class ase{constructor(){this.members=[]}add(e){DT(this.members,e),e.scheduleRender()}remove(e){if(IT(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ose(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:f,rotateY:h,skewX:p,skewY:g}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),f&&(r+=`rotateX(${f}deg) `),h&&(r+=`rotateY(${h}deg) `),p&&(r+=`skewX(${p}deg) `),g&&(r+=`skewY(${g}deg) `)}const o=t.x.scale*e.x,c=t.y.scale*e.y;return(o!==1||c!==1)&&(r+=`scale(${o}, ${c})`),r||"none"}const Wc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},em=typeof window<"u"&&window.MotionDebug!==void 0,R_=["","X","Y","Z"],lse={visibility:"hidden"},AO=1e3;let cse=0;function L_(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function mV(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=w8(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",wn,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&mV(r)}function gV({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},o=e==null?void 0:e()){this.id=cse++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,em&&(Wc.totalNodes=Wc.resolvedTargetDeltas=Wc.recalculatedProjection=0),this.nodes.forEach(fse),this.nodes.forEach(vse),this.nodes.forEach(yse),this.nodes.forEach(hse),em&&window.MotionDebug.record(Wc)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Qie)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new OT),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const c=this.eventHandlers.get(a);c&&c.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Gie(a),this.instance=a;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||c)&&(this.isLayoutDirty=!0),t){let f;const h=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=Xie(h,250),h0.hasAnimatedSinceResize&&(h0.hasAnimatedSinceResize=!1,this.nodes.forEach(jO))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeTargetChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||d.getDefaultTransition()||Sse,{onLayoutAnimationStart:y,onLayoutAnimationComplete:x}=d.getProps(),w=!this.targetLayout||!pV(this.targetLayout,g)||p,_=!h&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||_||h&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,_);const A={...TT(m,"layout"),onPlay:y,onComplete:x};(d.shouldReduceMotion||this.options.layoutRoot)&&(A.delay=0,A.type=!1),this.startAnimation(A)}else h||jO(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Lo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(bse),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&mV(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(EO);return}this.isUpdating||this.nodes.forEach(mse),this.isUpdating=!1,this.nodes.forEach(gse),this.nodes.forEach(use),this.nodes.forEach(dse),this.clearAllSnapshots();const o=Wa.now();Gr.delta=zo(0,1e3/60,o-Gr.timestamp),Gr.timestamp=o,Gr.isProcessing=!0,C_.update.process(Gr),C_.preRender.process(Gr),C_.render.process(Gr),Gr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,yT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(pse),this.sharedNodes.forEach(xse)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,wn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){wn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=er(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!hV(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;a&&(o||Uc(this.latestValues)||d)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return a&&(c=this.removeTransform(c)),Ase(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return er();const c=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(Ese))){const{scroll:d}=this.root;d&&(sf(c.x,d.offset.x),sf(c.y,d.offset.y))}return c}removeElementScroll(a){var o;const c=er();if(_s(c,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return c;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:f,options:h}=d;d!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&_s(c,a),sf(c.x,f.offset.x),sf(c.y,f.offset.y))}return c}applyTransform(a,o=!1){const c=er();_s(c,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&af(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Uc(d.latestValues)&&af(c,d.latestValues)}return Uc(this.latestValues)&&af(c,this.latestValues),c}removeTransform(a){const o=er();_s(o,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Uc(u.latestValues))continue;wE(u.latestValues)&&u.updateSnapshot();const d=er(),f=u.measurePageBox();_s(d,f),yO(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Uc(this.latestValues)&&yO(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Gr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=Gr.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=er(),this.relativeTargetOrigin=er(),wm(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),_s(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=er(),this.targetWithTransforms=er()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Tie(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):_s(this.target,this.layout.layoutBox),oV(this.target,this.targetDelta)):_s(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=er(),this.relativeTargetOrigin=er(),wm(this.relativeTargetOrigin,this.target,p.target),_s(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}em&&Wc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||wE(this.parent.latestValues)||aV(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),c=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Gr.timestamp&&(u=!1),u)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;_s(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;Lie(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=er());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(mO(this.prevProjectionDelta.x,this.projectionDelta.x),mO(this.prevProjectionDelta.y,this.projectionDelta.y)),xm(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==p||!SO(this.projectionDelta.x,this.prevProjectionDelta.x)||!SO(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),em&&Wc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=rf(),this.projectionDelta=rf(),this.projectionDeltaWithTransform=rf()}setAnimationOrigin(a,o=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},f=rf();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=er(),p=c?c.source:void 0,g=this.layout?this.layout.source:void 0,m=p!==g,y=this.getStack(),x=!y||y.members.length<=1,w=!!(m&&!x&&this.options.crossfade===!0&&!this.path.some(_se));this.animationProgress=0;let _;this.mixTargetDelta=A=>{const E=A/1e3;CO(f.x,a.x,E),CO(f.y,a.y,E),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(wm(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),wse(this.relativeTarget,this.relativeTargetOrigin,h,E),_&&sse(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=er()),_s(_,this.relativeTarget)),m&&(this.animationValues=d,Jie(d,u,this.latestValues,E,w,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Lo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=wn.update(()=>{h0.hasAnimatedSinceResize=!0,this.currentAnimation=qie(0,AO,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(AO),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:c,layout:u,latestValues:d}=a;if(!(!o||!c||!u)){if(this!==a&&this.layout&&u&&vV(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||er();const f=hs(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+f;const h=hs(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+h}_s(o,c),af(o,d),xm(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new ase),this.sharedNodes.get(a).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const u={};c.z&&L_("z",a,u,this.animationValues);for(let d=0;d<R_.length;d++)L_(`rotate${R_[d]}`,a,u,this.animationValues),L_(`skew${R_[d]}`,a,u,this.animationValues);a.render();for(const d in u)a.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);a.scheduleRender()}getProjectionStyles(a){var o,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return lse;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=d0(a==null?void 0:a.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=d0(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Uc(this.latestValues)&&(m.transform=d?d({},""):"none",this.hasProjected=!1),m}const h=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=ose(this.projectionDeltaWithTransform,this.treeScale,h),d&&(u.transform=d(h,u.transform));const{x:p,y:g}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,f.animationValues?u.opacity=f===this?(c=(o=h.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:u.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const m in cb){if(h[m]===void 0)continue;const{correct:y,applyTo:x}=cb[m],w=u.transform==="none"?h[m]:y(h[m],f);if(x){const _=x.length;for(let A=0;A<_;A++)u[x[A]]=w}else u[m]=w}return this.options.layoutId&&(u.pointerEvents=f===this?d0(a==null?void 0:a.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(EO),this.root.sharedNodes.clear()}}}function use(t){t.updateLayout()}function dse(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,a=n.source!==t.layout.source;s==="size"?js(f=>{const h=a?n.measuredBox[f]:n.layoutBox[f],p=hs(h);h.min=r[f].min,h.max=h.min+p}):vV(s,n.layoutBox,r)&&js(f=>{const h=a?n.measuredBox[f]:n.layoutBox[f],p=hs(r[f]);h.max=h.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+p)});const o=rf();xm(o,r,n.layoutBox);const c=rf();a?xm(c,t.applyTransform(i,!0),n.measuredBox):xm(c,r,n.layoutBox);const u=!hV(o);let d=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:p}=f;if(h&&p){const g=er();wm(g,n.layoutBox,h.layoutBox);const m=er();wm(m,r,p.layoutBox),pV(g,m)||(d=!0),f.options.layoutRoot&&(t.relativeTarget=m,t.relativeTargetOrigin=g,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function fse(t){em&&Wc.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function hse(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function pse(t){t.clearSnapshot()}function EO(t){t.clearMeasurements()}function mse(t){t.isLayoutDirty=!1}function gse(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function jO(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function vse(t){t.resolveTargetDelta()}function yse(t){t.calcProjection()}function bse(t){t.resetSkewAndRotation()}function xse(t){t.removeLeadSnapshot()}function CO(t,e,n){t.translate=kn(e.translate,0,n),t.scale=kn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function TO(t,e,n,r){t.min=kn(e.min,n.min,r),t.max=kn(e.max,n.max,r)}function wse(t,e,n,r){TO(t.x,e.x,n.x,r),TO(t.y,e.y,n.y,r)}function _se(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Sse={duration:.45,ease:[.4,0,.1,1]},NO=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),PO=NO("applewebkit/")&&!NO("chrome/")?Math.round:as;function kO(t){t.min=PO(t.min),t.max=PO(t.max)}function Ase(t){kO(t.x),kO(t.y)}function vV(t,e,n){return t==="position"||t==="preserve-aspect"&&!Cie(_O(e),_O(n),.2)}function Ese(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const jse=gV({attachResizeListener:(t,e)=>pg(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),z_={current:void 0},yV=gV({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!z_.current){const t=new jse({});t.mount(window),t.setOptions({layoutScroll:!0}),z_.current=t}return z_.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Cse={pan:{Feature:Uie},drag:{Feature:Bie,ProjectionNode:yV,MeasureLayout:uV}};function DO(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&wn.postRender(()=>s(e,Av(e)))}class Tse extends oc{mount(){const{current:e}=this.node;e&&(this.unmount=Nne(e,n=>(DO(this.node,n,"Start"),r=>DO(this.node,r,"End"))))}unmount(){}}class Nse extends oc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Sv(pg(this.node.current,"focus",()=>this.onFocus()),pg(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function IO(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&wn.postRender(()=>s(e,Av(e)))}class Pse extends oc{mount(){const{current:e}=this.node;e&&(this.unmount=Ine(e,n=>(IO(this.node,n,"Start"),(r,{success:i})=>IO(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const SE=new WeakMap,$_=new WeakMap,kse=t=>{const e=SE.get(t.target);e&&e(t)},Dse=t=>{t.forEach(kse)};function Ise({root:t,...e}){const n=t||document;$_.has(n)||$_.set(n,{});const r=$_.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Dse,{root:t,...e})),r[i]}function Ose(t,e,n){const r=Ise(e);return SE.set(t,n),r.observe(t),()=>{SE.delete(t),r.unobserve(t)}}const Mse={some:0,all:1};class Rse extends oc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Mse[i]},o=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),h=u?d:f;h&&h(c)};return Ose(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Lse(e,n))&&this.startObserver()}unmount(){}}function Lse({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const zse={inView:{Feature:Rse},tap:{Feature:Pse},focus:{Feature:Nse},hover:{Feature:Tse}},$se={layout:{ProjectionNode:yV,MeasureLayout:uV}},AE={current:null},bV={current:!1};function Fse(){if(bV.current=!0,!!hT)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>AE.current=t.matches;t.addListener(e),e()}else AE.current=!1}const Vse=[...B8,ui,Zl],Bse=t=>Vse.find(V8(t)),OO=new WeakMap;function Use(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Xr(i))t.addValue(r,i);else if(Xr(s))t.addValue(r,Zf(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=t.getStaticValue(r);t.addValue(r,Zf(a!==void 0?a:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const MO=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Wse{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=VT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Wa.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,wn.render(this.render,!1,!0))};const{latestValues:c,renderState:u,onUpdate:d}=a;this.onUpdate=d,this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=Aw(n),this.isVariantNode=QF(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in h){const g=h[p];c[p]!==void 0&&Xr(g)&&g.set(c[p],!1)}}mount(e){this.current=e,OO.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),bV.current||Fse(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:AE.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){OO.delete(this.current),this.projection&&this.projection.unmount(),Lo(this.notifyUpdate),Lo(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=td.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&wn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Xf){const n=Xf[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):er()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<MO.length;r++){const i=MO[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=Use(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Zf(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&($8(i)||P8(i))?i=parseFloat(i):!Bse(i)&&Zl.test(n)&&(i=R8(e,n)),this.setBaseTarget(e,Xr(i)?i.get():i)),Xr(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const a=xT(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(i=a[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Xr(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new OT),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class xV extends Wse{constructor(){super(...arguments),this.KeyframeResolver=U8}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Xr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Hse(t){return window.getComputedStyle(t)}class Kse extends xV{constructor(){super(...arguments),this.type="html",this.renderInstance=s8}readValueFromInstance(e,n){if(td.has(n)){const r=FT(n);return r&&r.default||0}else{const r=Hse(e),i=(n8(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return lV(e,n)}build(e,n,r){ST(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return CT(e,n,r)}}class qse extends xV{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=er}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(td.has(n)){const r=FT(n);return r&&r.default||0}return n=a8.has(n)?n:vT(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return c8(e,n,r)}build(e,n,r){AT(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){o8(e,n,r,i)}mount(e){this.isSVGTag=jT(e.tagName),super.mount(e)}}const Gse=(t,e)=>bT(t)?new qse(e):new Kse(e,{allowProjection:t!==N.Fragment}),Yse=_ne({...yie,...zse,...Cse,...$se},Gse),Ln=Lte(Yse);function wV(t){const e=Ho(()=>Zf(t)),{isStatic:n}=N.useContext(xw);if(n){const[,r]=N.useState(t);N.useEffect(()=>e.on("change",r),[])}return e}function _V(t,e){const n=wV(e()),r=()=>n.set(e());return r(),ww(()=>{const i=()=>wn.preRender(r,!1,!0),s=t.map(a=>a.on("change",i));return()=>{s.forEach(a=>a()),Lo(r)}}),n}const Qse=t=>t&&typeof t=="object"&&t.mix,Xse=t=>Qse(t)?t.mix:void 0;function Zse(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],i=t[1+n],s=t[2+n],a=t[3+n],o=Q8(i,s,{mixer:Xse(s[0]),...a});return e?o(r):o}function Jse(t){vm.current=[],t();const e=_V(vm.current,t);return vm.current=void 0,e}function eae(t,e,n,r){if(typeof t=="function")return Jse(t);const i=typeof e=="function"?e:Zse(e,n,r);return Array.isArray(t)?RO(t,i):RO([t],([s])=>i(s))}function RO(t,e){const n=Ho(()=>[]);return _V(t,()=>{n.length=0;const r=t.length;for(let i=0;i<r;i++)n[i]=t[i].get();return e(n)})}function tae(t){t.values.forEach(e=>e.stop())}function EE(t,e){[...e].reverse().forEach(r=>{const i=t.getVariant(r);i&&MT(t,i),t.variantChildren&&t.variantChildren.forEach(s=>{EE(s,e)})})}function nae(t,e){if(Array.isArray(e))return EE(t,e);if(typeof e=="string")return EE(t,[e]);MT(t,e)}function rae(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,r){const i=[];return t.forEach(s=>{i.push(J8(s,n,{transitionOverride:r}))}),Promise.all(i)},set(n){return t.forEach(r=>{nae(r,n)})},stop(){t.forEach(n=>{tae(n)})},mount(){return()=>{e.stop()}}};return e}function iae(){const t=Ho(rae);return ww(t.mount,[]),t}const lc=iae;class sae{constructor(){this.componentControls=new Set}subscribe(e){return this.componentControls.add(e),()=>this.componentControls.delete(e)}start(e,n){this.componentControls.forEach(r=>{r.start(e.nativeEvent||e,n)})}}const aae=()=>new sae;function HT(){return Ho(aae)}const SV=N.createContext(null);function oae(t,e,n,r){if(!r)return t;const i=t.findIndex(d=>d.value===e);if(i===-1)return t;const s=r>0?1:-1,a=t[i+s];if(!a)return t;const o=t[i],c=a.layout,u=kn(c.min,c.max,.5);return s===1&&o.layout.max+n>u||s===-1&&o.layout.min+n<u?Rne(t,i,i+s):t}function lae({children:t,as:e="ul",axis:n="y",onReorder:r,values:i,...s},a){const o=Ho(()=>Ln[e]),c=[],u=N.useRef(!1),d={axis:n,registerItem:(f,h)=>{const p=c.findIndex(g=>f===g.value);p!==-1?c[p].layout=h[n]:c.push({value:f,layout:h[n]}),c.sort(uae)},updateOrder:(f,h,p)=>{if(u.current)return;const g=oae(c,f,h,p);c!==g&&(u.current=!0,r(g.map(cae).filter(m=>i.indexOf(m)!==-1)))}};return N.useEffect(()=>{u.current=!1}),l.jsx(o,{...s,ref:a,ignoreStrict:!0,children:l.jsx(SV.Provider,{value:d,children:t})})}const KT=N.forwardRef(lae);function cae(t){return t.value}function uae(t,e){return t.layout.min-e.layout.min}function LO(t,e=0){return Xr(t)?t:wV(e)}function dae({children:t,style:e={},value:n,as:r="li",onDrag:i,layout:s=!0,...a},o){const c=Ho(()=>Ln[r]),u=N.useContext(SV),d={x:LO(e.x),y:LO(e.y)},f=eae([d.x,d.y],([m,y])=>m||y?1:"unset"),{axis:h,registerItem:p,updateOrder:g}=u;return l.jsx(c,{drag:h,...a,dragSnapToOrigin:!0,style:{...e,x:d.x,y:d.y,zIndex:f},layout:s,onDrag:(m,y)=>{const{velocity:x}=y;x[h]&&g(n,d[h].get(),x[h]),i&&i(m,y)},onLayoutMeasure:m=>p(n,m),ref:o,ignoreStrict:!0,children:t})}const qT=N.forwardRef(dae),Mu=({isOpen:t,onClose:e,title:n,actions:r})=>t?l.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex justify-center items-end sm:items-center z-50 animate-fade-in",onClick:e,children:l.jsxs("div",{className:"w-full max-w-sm bg-ios-modal-bg rounded-t-2xl sm:rounded-2xl shadow-2xl text-white animate-slide-up",onClick:i=>i.stopPropagation(),children:[l.jsx("div",{className:"p-2",children:l.jsx("header",{className:"text-center p-2 rounded-lg bg-zinc-800/50",children:l.jsx("h2",{className:"text-sm font-semibold text-brand-light-gray",children:n})})}),l.jsx("div",{className:"p-2",children:l.jsx("div",{className:"bg-zinc-800/50 rounded-lg",children:r.map((i,s)=>l.jsxs("button",{onClick:()=>{i.onClick(),e()},className:`w-full flex items-center p-3 text-left transition-colors hover:bg-white/10 ${i.color||"text-brand-blue"} ${s>0?"border-t border-zinc-700/80":""}`,children:[l.jsx(i.icon,{size:22,className:"mr-4"}),l.jsx("span",{className:"text-lg font-medium text-white",children:i.label})]},s))})}),l.jsxs("div",{className:"p-2 mt-1",children:[l.jsx("button",{onClick:e,className:"w-full bg-zinc-700 p-3 text-lg font-bold text-white rounded-xl hover:bg-zinc-600 transition-colors",children:"Cancelar"}),"S           "]})]})}):null,fae=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i})=>t?l.jsxs(at,{isOpen:t,onClose:e,title:r,children:[" ",l.jsxs("div",{className:"space-y-6",children:[" ",l.jsx("p",{className:"text-zinc-300",children:i})," ",l.jsxs("div",{className:"flex justify-end gap-4",children:[l.jsx("button",{onClick:e,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-6 rounded-lg",children:"Cancelar"}),l.jsx("button",{onClick:()=>{n(),e()},className:"bg-brand-red hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg",children:"Confirmar"})]})," "]})," "]}):null,hae=({lotName:t,count:e,subLotsCount:n,dragControls:r,isSubLot:i})=>l.jsxs("div",{className:"w-full p-4 flex items-center",children:[!i&&l.jsx("div",{className:"pl-2 pr-4 cursor-grab touch-none self-stretch flex items-center",onPointerDown:s=>r.start(s),children:l.jsx(oT,{className:"text-zinc-500"})}),i&&l.jsx("div",{className:"w-4 flex-shrink-0"}),l.jsxs("div",{className:"flex-grow",children:[l.jsxs("p",{className:"font-bold text-lg text-white flex items-center gap-2",children:[t,n>0&&l.jsx("span",{title:`${n} sub-lotes`,className:"bg-zinc-700/80 p-1 rounded-full",children:l.jsx(DF,{size:12,className:"text-zinc-400"})})]}),l.jsxs("p",{className:"text-sm text-zinc-400",children:[l.jsx("span",{className:"font-semibold text-brand-orange",children:e})," ",e===1?"animal":"animales",n>0?" (directos)":""]})]})]}),zO=({lot:t,onEdit:e,onDelete:n,onClick:r,dragControls:i,isSubLot:s=!1})=>{var h,p;const a=lc(),o=N.useRef(!1),c=t.count>0||(((h=t.subLots)==null?void 0:h.length)||0)>0,u=t.name!=="Sin Asignar",f={drag:"x",dragConstraints:{left:-((c?80:0)+(u?80:0)),right:0},dragElastic:.1,onPanStart:()=>{o.current=!0},onPanEnd:()=>{setTimeout(()=>{o.current=!1},50)},onTap:()=>{o.current||r()},animate:a,transition:{type:"spring",stiffness:400,damping:40}};return l.jsxs("div",{className:`relative w-full overflow-hidden ${s?"rounded-lg":"rounded-2xl"} bg-brand-glass border border-brand-border`,children:[l.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:[c&&l.jsxs("button",{onClick:e,onPointerDown:g=>g.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-orange text-white",children:[l.jsx(ac,{size:22}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Editar"})]}),u&&l.jsxs("button",{onClick:n,onPointerDown:g=>g.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-red text-white",children:[l.jsx(ya,{size:22}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Borrar"})]})]}),l.jsx(Ln.div,{...f,dragListener:!s&&i?!1:void 0,className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg",children:l.jsx(hae,{lotName:t.name,count:t.count,subLotsCount:((p=t.subLots)==null?void 0:p.length)||0,dragControls:i,isSubLot:s})})]})},pae=({lot:t,navigateTo:e,onEdit:n,onDelete:r})=>{const i=HT();return l.jsxs(qT,{value:t,dragListener:!1,dragControls:i,className:"space-y-1",children:[l.jsx(zO,{lot:t,dragControls:i,onClick:()=>e({name:"lot-detail",lotName:t.name}),onEdit:()=>n(t),onDelete:()=>r(t),isSubLot:!1}),t.subLots&&t.subLots.length>0&&l.jsx("div",{className:"pl-6 space-y-1",children:t.subLots.map(s=>l.jsx(zO,{lot:s,onClick:()=>e({name:"lot-detail",lotName:s.name}),onEdit:()=>n(s),onDelete:()=>r(s),isSubLot:!0},s.id))})]},t.id)};function mae({navigateTo:t}){const{animals:e,lots:n,deleteLot:r}=rt(),[i,s]=N.useState(!1),[a,o]=N.useState(null),[c,u]=N.useState(null),d=N.useMemo(()=>{const m=new Map;n.forEach(A=>m.set(A.name,0)),(e||[]).forEach(A=>{const E=A.location||"Sin Asignar";m.set(E,(m.get(E)||0)+1)});const y=n.map(A=>({id:A.id,name:A.name,count:m.get(A.name)||0,parentLotId:A.parentLotId})),x=new Map;y.forEach(A=>{A.parentLotId&&(x.has(A.parentLotId)||x.set(A.parentLotId,[]),x.get(A.parentLotId).push(A))});const w=y.filter(A=>!A.parentLotId).map(A=>({...A,subLots:x.get(A.id)||[]})),_=m.get("Sin Asignar")||0;return(_>0||w.length===0&&_>0)&&w.push({id:"unassigned",name:"Sin Asignar",count:_,parentLotId:void 0,subLots:[]}),w.sort((A,E)=>A.name.localeCompare(E.name))},[e,n]),[f,h]=N.useState(d);N.useEffect(()=>{h(d)},[d]);const p=[{label:"Mover Animales",icon:cT,onClick:()=>t({name:"lot-detail",lotName:(a==null?void 0:a.name)||""})}],g=()=>{c&&(r(c.id),u(null))};return f.length===0?l.jsxs("div",{className:"text-center py-10 bg-brand-glass rounded-2xl flex flex-col items-center gap-2",children:[l.jsx(UF,{size:32,className:"text-zinc-600"}),l.jsx("p",{className:"text-zinc-500 font-semibold",children:"No hay lotes físicos creados."}),l.jsx("p",{className:"text-xs text-zinc-600",children:"Usa el botón '+' para empezar a organizar tu rebaño."})]}):l.jsxs(l.Fragment,{children:[l.jsx(KT,{as:"div",axis:"y",values:f,onReorder:h,className:"space-y-3",children:f.map(m=>l.jsx(pae,{lot:m,navigateTo:t,onEdit:y=>{o(y),s(!0)},onDelete:y=>u(y)},m.id))}),l.jsx(Mu,{isOpen:i,onClose:()=>s(!1),title:`Acciones para "${a==null?void 0:a.name}"`,actions:p}),l.jsx(fae,{isOpen:!!c,onClose:()=>u(null),onConfirm:g,title:"Eliminar Lote",message:`¿Estás seguro de que quieres eliminar el lote "${c==null?void 0:c.name}"? Esta acción no se puede deshacer.`})]})}const gae=({onSave:t,onCancel:e,existingSeason:n})=>{const[r,i]=N.useState(""),[s,a]=N.useState(""),[o,c]=N.useState("45"),[u,d]=N.useState(!1),[f,h]=N.useState(null),[p,g]=N.useState(!1);N.useEffect(()=>{if(n){i(n.name),a(n.startDate);const y=new Date(n.startDate),x=new Date(n.endDate),w=Math.abs(x.getTime()-y.getTime()),_=Math.ceil(w/(1e3*60*60*24));c(String(_)),d(n.requiresLightTreatment)}else a(new Date().toISOString().split("T")[0])},[n]);const m=async y=>{if(y.preventDefault(),h(null),!r.trim()||!s||!o){h("Todos los campos son obligatorios.");return}g(!0);const x=new Date(s),w=new Date(x);w.setDate(x.getDate()+parseInt(o,10));const _={name:r,startDate:s,endDate:w.toISOString().split("T")[0],requiresLightTreatment:u};try{await t(_)}catch(A){h("No se pudo guardar la temporada de monta."),console.error(A),g(!1)}};return l.jsxs("form",{onSubmit:m,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Nombre de la Temporada"}),l.jsx("input",{id:"name",type:"text",value:r,onChange:y=>i(y.target.value),placeholder:"Ej: Monta de Otoño 2025",className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Inicio"}),l.jsx("input",{id:"startDate",type:"date",value:s,onChange:y=>a(y.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"duration",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Duración (días)"}),l.jsx("input",{id:"duration",type:"number",value:o,onChange:y=>c(y.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]})]}),l.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-zinc-700 flex items-center justify-between",children:[l.jsx("label",{htmlFor:"lightTreatment",className:"text-sm font-medium text-zinc-300",children:"¿Requiere Tratamiento de Luz?"}),l.jsx("input",{id:"lightTreatment",type:"checkbox",checked:u,onChange:y=>d(y.target.checked),className:"form-checkbox h-5 w-5 bg-zinc-700 border-zinc-600 rounded text-brand-orange focus:ring-brand-orange focus:ring-offset-0"})]}),f&&l.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[l.jsx($t,{size:18}),l.jsx("span",{children:f})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:p,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:p?"Guardando...":"Guardar Temporada"})]})]})},vae=({season:t,dragControls:e})=>l.jsxs("div",{className:"w-full p-4 flex items-center",children:[l.jsx("div",{className:"pl-2 pr-4 cursor-grab touch-none self-stretch flex items-center",onPointerDown:n=>e.start(n),children:l.jsx(oT,{className:"text-zinc-500"})}),l.jsxs("div",{className:"flex-grow",children:[l.jsxs("p",{className:"font-bold text-lg text-white flex items-center gap-2",children:[t.name,t.requiresLightTreatment&&l.jsx("span",{title:"Requiere Tratamiento de Luz",children:l.jsx(rte,{size:16,className:"text-yellow-400"})})]}),l.jsxs("p",{className:"text-sm text-zinc-400",children:[new Date(t.startDate+"T00:00:00").toLocaleDateString()," - ",new Date(t.endDate+"T00:00:00").toLocaleDateString()]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${t.status==="Activo"?"bg-green-500/80 text-white":"bg-zinc-600 text-zinc-300"}`,children:t.status}),l.jsx(Gn,{className:"text-zinc-600"})]})]}),yae=({season:t,onEdit:e,onClick:n,dragControls:r})=>{const i=lc(),s=N.useRef(!1);return l.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-brand-glass border border-brand-border",children:[l.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:l.jsxs("button",{onClick:e,onPointerDown:a=>a.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[l.jsx(ac,{size:22}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Editar"})]})}),l.jsx(Ln.div,{drag:"x",dragConstraints:{left:-80,right:0},dragElastic:.1,onPanStart:()=>{s.current=!0},onPanEnd:()=>{setTimeout(()=>{s.current=!1},50)},onTap:()=>{s.current||n()},animate:i,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg",children:l.jsx(vae,{season:t,dragControls:r})})]})},bae=({season:t,navigateTo:e,onEdit:n})=>{const r=HT();return l.jsx(qT,{value:t,dragListener:!1,dragControls:r,children:l.jsx(yae,{season:t,dragControls:r,onClick:()=>e({name:"breeding-season-detail",seasonId:t.id}),onEdit:()=>n(t)})},t.id)};function xae({navigateTo:t}){const{breedingSeasons:e,addBreedingSeason:n,updateBreedingSeason:r}=rt(),[i,s]=N.useState(!1),[a,o]=N.useState(void 0),c=N.useMemo(()=>[...e].sort((p,g)=>p.status==="Activo"&&g.status!=="Activo"?-1:p.status!=="Activo"&&g.status==="Activo"?1:new Date(g.startDate).getTime()-new Date(p.startDate).getTime()),[e]),[u,d]=N.useState(c);N.useEffect(()=>{d(c)},[c]);const f=p=>{o(p),s(!0)},h=async p=>{a?await r(a.id,{...p}):await n({...p,status:"Activo"}),s(!1),o(void 0)};return u.length===0?l.jsxs("div",{className:"text-center py-10 bg-brand-glass rounded-2xl flex flex-col items-center gap-2",children:[l.jsx(yw,{size:32,className:"text-zinc-600"}),l.jsx("p",{className:"text-zinc-500 font-semibold",children:"No hay temporadas de monta creadas."}),l.jsx("p",{className:"text-xs text-zinc-600",children:"Usa el botón de abajo para empezar a planificar."})]}):l.jsxs(l.Fragment,{children:[l.jsx(KT,{as:"div",axis:"y",values:u,onReorder:d,className:"space-y-3",children:u.map(p=>l.jsx(bae,{season:p,navigateTo:t,onEdit:f},p.id))}),l.jsx("div",{className:"px-4 mt-4",children:l.jsxs("button",{onClick:()=>f(),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[l.jsx(ir,{size:20})," Crear Nueva Temporada"]})}),l.jsx(at,{isOpen:i,onClose:()=>{s(!1),o(void 0)},title:a?"Editar Temporada de Monta":"Crear Temporada de Monta",children:l.jsx(gae,{onSave:h,onCancel:()=>{s(!1),o(void 0)},existingSeason:a})})]})}function AV(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=AV(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Tt(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=AV(t))&&(r&&(r+=" "),r+=e);return r}var wae=Array.isArray,Ki=wae,_ae=typeof Bd=="object"&&Bd&&Bd.Object===Object&&Bd,EV=_ae,Sae=EV,Aae=typeof self=="object"&&self&&self.Object===Object&&self,Eae=Sae||Aae||Function("return this")(),Ja=Eae,jae=Ja,Cae=jae.Symbol,Ev=Cae,$O=Ev,jV=Object.prototype,Tae=jV.hasOwnProperty,Nae=jV.toString,Dp=$O?$O.toStringTag:void 0;function Pae(t){var e=Tae.call(t,Dp),n=t[Dp];try{t[Dp]=void 0;var r=!0}catch{}var i=Nae.call(t);return r&&(e?t[Dp]=n:delete t[Dp]),i}var kae=Pae,Dae=Object.prototype,Iae=Dae.toString;function Oae(t){return Iae.call(t)}var Mae=Oae,FO=Ev,Rae=kae,Lae=Mae,zae="[object Null]",$ae="[object Undefined]",VO=FO?FO.toStringTag:void 0;function Fae(t){return t==null?t===void 0?$ae:zae:VO&&VO in Object(t)?Rae(t):Lae(t)}var Ko=Fae;function Vae(t){return t!=null&&typeof t=="object"}var qo=Vae,Bae=Ko,Uae=qo,Wae="[object Symbol]";function Hae(t){return typeof t=="symbol"||Uae(t)&&Bae(t)==Wae}var Bh=Hae,Kae=Ki,qae=Bh,Gae=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Yae=/^\w*$/;function Qae(t,e){if(Kae(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||qae(t)?!0:Yae.test(t)||!Gae.test(t)||e!=null&&t in Object(e)}var GT=Qae;function Xae(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var cc=Xae;const Uh=tn(cc);var Zae=Ko,Jae=cc,eoe="[object AsyncFunction]",toe="[object Function]",noe="[object GeneratorFunction]",roe="[object Proxy]";function ioe(t){if(!Jae(t))return!1;var e=Zae(t);return e==toe||e==noe||e==eoe||e==roe}var YT=ioe;const vt=tn(YT);var soe=Ja,aoe=soe["__core-js_shared__"],ooe=aoe,F_=ooe,BO=function(){var t=/[^.]+$/.exec(F_&&F_.keys&&F_.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function loe(t){return!!BO&&BO in t}var coe=loe,uoe=Function.prototype,doe=uoe.toString;function foe(t){if(t!=null){try{return doe.call(t)}catch{}try{return t+""}catch{}}return""}var CV=foe,hoe=YT,poe=coe,moe=cc,goe=CV,voe=/[\\^$.*+?()[\]{}|]/g,yoe=/^\[object .+?Constructor\]$/,boe=Function.prototype,xoe=Object.prototype,woe=boe.toString,_oe=xoe.hasOwnProperty,Soe=RegExp("^"+woe.call(_oe).replace(voe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Aoe(t){if(!moe(t)||poe(t))return!1;var e=hoe(t)?Soe:yoe;return e.test(goe(t))}var Eoe=Aoe;function joe(t,e){return t==null?void 0:t[e]}var Coe=joe,Toe=Eoe,Noe=Coe;function Poe(t,e){var n=Noe(t,e);return Toe(n)?n:void 0}var nd=Poe,koe=nd,Doe=koe(Object,"create"),Cw=Doe,UO=Cw;function Ioe(){this.__data__=UO?UO(null):{},this.size=0}var Ooe=Ioe;function Moe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Roe=Moe,Loe=Cw,zoe="__lodash_hash_undefined__",$oe=Object.prototype,Foe=$oe.hasOwnProperty;function Voe(t){var e=this.__data__;if(Loe){var n=e[t];return n===zoe?void 0:n}return Foe.call(e,t)?e[t]:void 0}var Boe=Voe,Uoe=Cw,Woe=Object.prototype,Hoe=Woe.hasOwnProperty;function Koe(t){var e=this.__data__;return Uoe?e[t]!==void 0:Hoe.call(e,t)}var qoe=Koe,Goe=Cw,Yoe="__lodash_hash_undefined__";function Qoe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Goe&&e===void 0?Yoe:e,this}var Xoe=Qoe,Zoe=Ooe,Joe=Roe,ele=Boe,tle=qoe,nle=Xoe;function Wh(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Wh.prototype.clear=Zoe;Wh.prototype.delete=Joe;Wh.prototype.get=ele;Wh.prototype.has=tle;Wh.prototype.set=nle;var rle=Wh;function ile(){this.__data__=[],this.size=0}var sle=ile;function ale(t,e){return t===e||t!==t&&e!==e}var QT=ale,ole=QT;function lle(t,e){for(var n=t.length;n--;)if(ole(t[n][0],e))return n;return-1}var Tw=lle,cle=Tw,ule=Array.prototype,dle=ule.splice;function fle(t){var e=this.__data__,n=cle(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():dle.call(e,n,1),--this.size,!0}var hle=fle,ple=Tw;function mle(t){var e=this.__data__,n=ple(e,t);return n<0?void 0:e[n][1]}var gle=mle,vle=Tw;function yle(t){return vle(this.__data__,t)>-1}var ble=yle,xle=Tw;function wle(t,e){var n=this.__data__,r=xle(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var _le=wle,Sle=sle,Ale=hle,Ele=gle,jle=ble,Cle=_le;function Hh(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Hh.prototype.clear=Sle;Hh.prototype.delete=Ale;Hh.prototype.get=Ele;Hh.prototype.has=jle;Hh.prototype.set=Cle;var Nw=Hh,Tle=nd,Nle=Ja,Ple=Tle(Nle,"Map"),XT=Ple,WO=rle,kle=Nw,Dle=XT;function Ile(){this.size=0,this.__data__={hash:new WO,map:new(Dle||kle),string:new WO}}var Ole=Ile;function Mle(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var Rle=Mle,Lle=Rle;function zle(t,e){var n=t.__data__;return Lle(e)?n[typeof e=="string"?"string":"hash"]:n.map}var Pw=zle,$le=Pw;function Fle(t){var e=$le(this,t).delete(t);return this.size-=e?1:0,e}var Vle=Fle,Ble=Pw;function Ule(t){return Ble(this,t).get(t)}var Wle=Ule,Hle=Pw;function Kle(t){return Hle(this,t).has(t)}var qle=Kle,Gle=Pw;function Yle(t,e){var n=Gle(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var Qle=Yle,Xle=Ole,Zle=Vle,Jle=Wle,ece=qle,tce=Qle;function Kh(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Kh.prototype.clear=Xle;Kh.prototype.delete=Zle;Kh.prototype.get=Jle;Kh.prototype.has=ece;Kh.prototype.set=tce;var ZT=Kh,TV=ZT,nce="Expected a function";function JT(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(nce);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=t.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(JT.Cache||TV),n}JT.Cache=TV;var NV=JT;const rce=tn(NV);var ice=NV,sce=500;function ace(t){var e=ice(t,function(r){return n.size===sce&&n.clear(),r}),n=e.cache;return e}var oce=ace,lce=oce,cce=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,uce=/\\(\\)?/g,dce=lce(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(cce,function(n,r,i,s){e.push(i?s.replace(uce,"$1"):r||n)}),e}),fce=dce;function hce(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var eN=hce,HO=Ev,pce=eN,mce=Ki,gce=Bh,KO=HO?HO.prototype:void 0,qO=KO?KO.toString:void 0;function PV(t){if(typeof t=="string")return t;if(mce(t))return pce(t,PV)+"";if(gce(t))return qO?qO.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var vce=PV,yce=vce;function bce(t){return t==null?"":yce(t)}var kV=bce,xce=Ki,wce=GT,_ce=fce,Sce=kV;function Ace(t,e){return xce(t)?t:wce(t,e)?[t]:_ce(Sce(t))}var DV=Ace,Ece=Bh;function jce(t){if(typeof t=="string"||Ece(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var kw=jce,Cce=DV,Tce=kw;function Nce(t,e){e=Cce(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[Tce(e[n++])];return n&&n==r?t:void 0}var tN=Nce,Pce=tN;function kce(t,e,n){var r=t==null?void 0:Pce(t,e);return r===void 0?n:r}var IV=kce;const os=tn(IV);function Dce(t){return t==null}var Ice=Dce;const _t=tn(Ice);var Oce=Ko,Mce=Ki,Rce=qo,Lce="[object String]";function zce(t){return typeof t=="string"||!Mce(t)&&Rce(t)&&Oce(t)==Lce}var $ce=zce;const Ru=tn($ce);var OV={exports:{}},ln={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nN=Symbol.for("react.element"),rN=Symbol.for("react.portal"),Dw=Symbol.for("react.fragment"),Iw=Symbol.for("react.strict_mode"),Ow=Symbol.for("react.profiler"),Mw=Symbol.for("react.provider"),Rw=Symbol.for("react.context"),Fce=Symbol.for("react.server_context"),Lw=Symbol.for("react.forward_ref"),zw=Symbol.for("react.suspense"),$w=Symbol.for("react.suspense_list"),Fw=Symbol.for("react.memo"),Vw=Symbol.for("react.lazy"),Vce=Symbol.for("react.offscreen"),MV;MV=Symbol.for("react.module.reference");function zs(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case nN:switch(t=t.type,t){case Dw:case Ow:case Iw:case zw:case $w:return t;default:switch(t=t&&t.$$typeof,t){case Fce:case Rw:case Lw:case Vw:case Fw:case Mw:return t;default:return e}}case rN:return e}}}ln.ContextConsumer=Rw;ln.ContextProvider=Mw;ln.Element=nN;ln.ForwardRef=Lw;ln.Fragment=Dw;ln.Lazy=Vw;ln.Memo=Fw;ln.Portal=rN;ln.Profiler=Ow;ln.StrictMode=Iw;ln.Suspense=zw;ln.SuspenseList=$w;ln.isAsyncMode=function(){return!1};ln.isConcurrentMode=function(){return!1};ln.isContextConsumer=function(t){return zs(t)===Rw};ln.isContextProvider=function(t){return zs(t)===Mw};ln.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===nN};ln.isForwardRef=function(t){return zs(t)===Lw};ln.isFragment=function(t){return zs(t)===Dw};ln.isLazy=function(t){return zs(t)===Vw};ln.isMemo=function(t){return zs(t)===Fw};ln.isPortal=function(t){return zs(t)===rN};ln.isProfiler=function(t){return zs(t)===Ow};ln.isStrictMode=function(t){return zs(t)===Iw};ln.isSuspense=function(t){return zs(t)===zw};ln.isSuspenseList=function(t){return zs(t)===$w};ln.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Dw||t===Ow||t===Iw||t===zw||t===$w||t===Vce||typeof t=="object"&&t!==null&&(t.$$typeof===Vw||t.$$typeof===Fw||t.$$typeof===Mw||t.$$typeof===Rw||t.$$typeof===Lw||t.$$typeof===MV||t.getModuleId!==void 0)};ln.typeOf=zs;OV.exports=ln;var Bce=OV.exports,Uce=Ko,Wce=qo,Hce="[object Number]";function Kce(t){return typeof t=="number"||Wce(t)&&Uce(t)==Hce}var RV=Kce;const qce=tn(RV);var Gce=RV;function Yce(t){return Gce(t)&&t!=+t}var Qce=Yce;const qh=tn(Qce);var Si=function(e){return e===0?0:e>0?1:-1},au=function(e){return Ru(e)&&e.indexOf("%")===e.length-1},Ie=function(e){return qce(e)&&!qh(e)},Xce=function(e){return _t(e)},Ar=function(e){return Ie(e)||Ru(e)},Zce=0,rd=function(e){var n=++Zce;return"".concat(e||"").concat(n)},Ai=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ie(e)&&!Ru(e))return r;var s;if(au(e)){var a=e.indexOf("%");s=n*parseFloat(e.slice(0,a))/100}else s=+e;return qh(s)&&(s=r),i&&s>n&&(s=n),s},_l=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},Jce=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},_r=function(e,n){return Ie(e)&&Ie(n)?function(r){return e+r*(n-e)}:function(){return n}};function mb(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):os(r,e))===n})}var eue=function(e,n){return Ie(e)&&Ie(n)?e-n:Ru(e)&&Ru(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function Sf(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function jE(t){"@babel/helpers - typeof";return jE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jE(t)}var tue=["viewBox","children"],nue=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],GO=["points","pathLength"],V_={svg:tue,polygon:GO,polyline:GO},iN=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],gb=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(N.isValidElement(e)&&(r=e.props),!Uh(r))return null;var i={};return Object.keys(r).forEach(function(s){iN.includes(s)&&(i[s]=n||function(a){return r[s](r,a)})}),i},rue=function(e,n,r){return function(i){return e(n,r,i),null}},Lu=function(e,n,r){if(!Uh(e)||jE(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(s){var a=e[s];iN.includes(s)&&typeof a=="function"&&(i||(i={}),i[s]=rue(a,n,r))}),i},iue=["children"],sue=["children"];function YO(t,e){if(t==null)return{};var n=aue(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function aue(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function CE(t){"@babel/helpers - typeof";return CE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},CE(t)}var QO={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},To=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},XO=null,B_=null,sN=function t(e){if(e===XO&&Array.isArray(B_))return B_;var n=[];return N.Children.forEach(e,function(r){_t(r)||(Bce.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),B_=n,XO=e,n};function ls(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return To(i)}):r=[To(e)],sN(t).forEach(function(i){var s=os(i,"type.displayName")||os(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}function Ji(t,e){var n=ls(t,e);return n&&n[0]}var ZO=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!Ie(r)||r<=0||!Ie(i)||i<=0)},oue=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],lue=function(e){return e&&e.type&&Ru(e.type)&&oue.indexOf(e.type)>=0},LV=function(e){return e&&CE(e)==="object"&&"clipDot"in e},cue=function(e,n,r,i){var s,a=(s=V_==null?void 0:V_[i])!==null&&s!==void 0?s:[];return n.startsWith("data-")||!vt(e)&&(i&&a.includes(n)||nue.includes(n))||r&&iN.includes(n)},lt=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(N.isValidElement(e)&&(i=e.props),!Uh(i))return null;var s={};return Object.keys(i).forEach(function(a){var o;cue((o=i)===null||o===void 0?void 0:o[a],a,n,r)&&(s[a]=i[a])}),s},TE=function t(e,n){if(e===n)return!0;var r=N.Children.count(e);if(r!==N.Children.count(n))return!1;if(r===0)return!0;if(r===1)return JO(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var s=e[i],a=n[i];if(Array.isArray(s)||Array.isArray(a)){if(!t(s,a))return!1}else if(!JO(s,a))return!1}return!0},JO=function(e,n){if(_t(e)&&_t(n))return!0;if(!_t(e)&&!_t(n)){var r=e.props||{},i=r.children,s=YO(r,iue),a=n.props||{},o=a.children,c=YO(a,sue);return i&&o?Sf(s,c)&&TE(i,o):!i&&!o?Sf(s,c):!1}return!1},eM=function(e,n){var r=[],i={};return sN(e).forEach(function(s,a){if(lue(s))r.push(s);else if(s){var o=To(s.type),c=n[o]||{},u=c.handler,d=c.once;if(u&&(!d||!i[o])){var f=u(s,o,a);r.push(f),i[o]=!0}}}),r},uue=function(e){var n=e&&e.type;return n&&QO[n]?QO[n]:null},due=function(e,n){return sN(n).indexOf(e)},fue=["children","width","height","viewBox","className","style","title","desc"];function NE(){return NE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NE.apply(this,arguments)}function hue(t,e){if(t==null)return{};var n=pue(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function pue(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function PE(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,s=t.className,a=t.style,o=t.title,c=t.desc,u=hue(t,fue),d=i||{width:n,height:r,x:0,y:0},f=Tt("recharts-surface",s);return q.createElement("svg",NE({},lt(u,!0,"svg"),{className:f,width:n,height:r,style:a,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),q.createElement("title",null,o),q.createElement("desc",null,c),e)}var mue=["children","className"];function kE(){return kE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kE.apply(this,arguments)}function gue(t,e){if(t==null)return{};var n=vue(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function vue(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Ot=q.forwardRef(function(t,e){var n=t.children,r=t.className,i=gue(t,mue),s=Tt("recharts-layer",r);return q.createElement("g",kE({className:s},lt(i,!0),{ref:e}),n)}),sa=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]};function yue(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=t[r+e];return s}var bue=yue,xue=bue;function wue(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:xue(t,e,n)}var _ue=wue,Sue="\\ud800-\\udfff",Aue="\\u0300-\\u036f",Eue="\\ufe20-\\ufe2f",jue="\\u20d0-\\u20ff",Cue=Aue+Eue+jue,Tue="\\ufe0e\\ufe0f",Nue="\\u200d",Pue=RegExp("["+Nue+Sue+Cue+Tue+"]");function kue(t){return Pue.test(t)}var zV=kue;function Due(t){return t.split("")}var Iue=Due,$V="\\ud800-\\udfff",Oue="\\u0300-\\u036f",Mue="\\ufe20-\\ufe2f",Rue="\\u20d0-\\u20ff",Lue=Oue+Mue+Rue,zue="\\ufe0e\\ufe0f",$ue="["+$V+"]",DE="["+Lue+"]",IE="\\ud83c[\\udffb-\\udfff]",Fue="(?:"+DE+"|"+IE+")",FV="[^"+$V+"]",VV="(?:\\ud83c[\\udde6-\\uddff]){2}",BV="[\\ud800-\\udbff][\\udc00-\\udfff]",Vue="\\u200d",UV=Fue+"?",WV="["+zue+"]?",Bue="(?:"+Vue+"(?:"+[FV,VV,BV].join("|")+")"+WV+UV+")*",Uue=WV+UV+Bue,Wue="(?:"+[FV+DE+"?",DE,VV,BV,$ue].join("|")+")",Hue=RegExp(IE+"(?="+IE+")|"+Wue+Uue,"g");function Kue(t){return t.match(Hue)||[]}var que=Kue,Gue=Iue,Yue=zV,Que=que;function Xue(t){return Yue(t)?Que(t):Gue(t)}var Zue=Xue,Jue=_ue,ede=zV,tde=Zue,nde=kV;function rde(t){return function(e){e=nde(e);var n=ede(e)?tde(e):void 0,r=n?n[0]:e.charAt(0),i=n?Jue(n,1).join(""):e.slice(1);return r[t]()+i}}var ide=rde,sde=ide,ade=sde("toUpperCase"),ode=ade;const Bw=tn(ode);function yn(t){return function(){return t}}const HV=Math.cos,vb=Math.sin,xa=Math.sqrt,yb=Math.PI,Uw=2*yb,OE=Math.PI,ME=2*OE,Hc=1e-6,lde=ME-Hc;function KV(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function cde(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return KV;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class ude{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?KV:cde(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,c=r-e,u=i-n,d=a-e,f=o-n,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>Hc)if(!(Math.abs(f*c-u*d)>Hc)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let p=r-a,g=i-o,m=c*c+u*u,y=p*p+g*g,x=Math.sqrt(m),w=Math.sqrt(h),_=s*Math.tan((OE-Math.acos((m+h-y)/(2*x*w)))/2),A=_/w,E=_/x;Math.abs(A-1)>Hc&&this._append`L${e+A*d},${n+A*f}`,this._append`A${s},${s},0,0,${+(f*p>d*g)},${this._x1=e+E*c},${this._y1=n+E*u}`}}arc(e,n,r,i,s,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),c=r*Math.sin(i),u=e+o,d=n+c,f=1^a,h=a?i-s:s-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Hc||Math.abs(this._y1-d)>Hc)&&this._append`L${u},${d}`,r&&(h<0&&(h=h%ME+ME),h>lde?this._append`A${r},${r},0,1,${f},${e-o},${n-c}A${r},${r},0,1,${f},${this._x1=u},${this._y1=d}`:h>Hc&&this._append`A${r},${r},0,${+(h>=OE)},${f},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function aN(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new ude(e)}function oN(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function qV(t){this._context=t}qV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Ww(t){return new qV(t)}function GV(t){return t[0]}function YV(t){return t[1]}function QV(t,e){var n=yn(!0),r=null,i=Ww,s=null,a=aN(o);t=typeof t=="function"?t:t===void 0?GV:yn(t),e=typeof e=="function"?e:e===void 0?YV:yn(e);function o(c){var u,d=(c=oN(c)).length,f,h=!1,p;for(r==null&&(s=i(p=a())),u=0;u<=d;++u)!(u<d&&n(f=c[u],u,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(f,u,c),+e(f,u,c));if(p)return s=null,p+""||null}return o.x=function(c){return arguments.length?(t=typeof c=="function"?c:yn(+c),o):t},o.y=function(c){return arguments.length?(e=typeof c=="function"?c:yn(+c),o):e},o.defined=function(c){return arguments.length?(n=typeof c=="function"?c:yn(!!c),o):n},o.curve=function(c){return arguments.length?(i=c,r!=null&&(s=i(r)),o):i},o.context=function(c){return arguments.length?(c==null?r=s=null:s=i(r=c),o):r},o}function yy(t,e,n){var r=null,i=yn(!0),s=null,a=Ww,o=null,c=aN(u);t=typeof t=="function"?t:t===void 0?GV:yn(+t),e=typeof e=="function"?e:yn(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?YV:yn(+n);function u(f){var h,p,g,m=(f=oN(f)).length,y,x=!1,w,_=new Array(m),A=new Array(m);for(s==null&&(o=a(w=c())),h=0;h<=m;++h){if(!(h<m&&i(y=f[h],h,f))===x)if(x=!x)p=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),g=h-1;g>=p;--g)o.point(_[g],A[g]);o.lineEnd(),o.areaEnd()}x&&(_[h]=+t(y,h,f),A[h]=+e(y,h,f),o.point(r?+r(y,h,f):_[h],n?+n(y,h,f):A[h]))}if(w)return o=null,w+""||null}function d(){return QV().defined(i).curve(a).context(s)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:yn(+f),r=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:yn(+f),u):t},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:yn(+f),u):r},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:yn(+f),n=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:yn(+f),u):e},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:yn(+f),u):n},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(n)},u.lineX1=function(){return d().x(r).y(e)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:yn(!!f),u):i},u.curve=function(f){return arguments.length?(a=f,s!=null&&(o=a(s)),u):a},u.context=function(f){return arguments.length?(f==null?s=o=null:o=a(s=f),u):s},u}class XV{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function dde(t){return new XV(t,!0)}function fde(t){return new XV(t,!1)}const lN={draw(t,e){const n=xa(e/yb);t.moveTo(n,0),t.arc(0,0,n,0,Uw)}},hde={draw(t,e){const n=xa(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},ZV=xa(1/3),pde=ZV*2,mde={draw(t,e){const n=xa(e/pde),r=n*ZV;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},gde={draw(t,e){const n=xa(e),r=-n/2;t.rect(r,r,n,n)}},vde=.8908130915292852,JV=vb(yb/10)/vb(7*yb/10),yde=vb(Uw/10)*JV,bde=-HV(Uw/10)*JV,xde={draw(t,e){const n=xa(e*vde),r=yde*n,i=bde*n;t.moveTo(0,-n),t.lineTo(r,i);for(let s=1;s<5;++s){const a=Uw*s/5,o=HV(a),c=vb(a);t.lineTo(c*n,-o*n),t.lineTo(o*r-c*i,c*r+o*i)}t.closePath()}},U_=xa(3),wde={draw(t,e){const n=-xa(e/(U_*3));t.moveTo(0,n*2),t.lineTo(-U_*n,-n),t.lineTo(U_*n,-n),t.closePath()}},Ss=-.5,As=xa(3)/2,RE=1/xa(12),_de=(RE/2+1)*3,Sde={draw(t,e){const n=xa(e/_de),r=n/2,i=n*RE,s=r,a=n*RE+n,o=-s,c=a;t.moveTo(r,i),t.lineTo(s,a),t.lineTo(o,c),t.lineTo(Ss*r-As*i,As*r+Ss*i),t.lineTo(Ss*s-As*a,As*s+Ss*a),t.lineTo(Ss*o-As*c,As*o+Ss*c),t.lineTo(Ss*r+As*i,Ss*i-As*r),t.lineTo(Ss*s+As*a,Ss*a-As*s),t.lineTo(Ss*o+As*c,Ss*c-As*o),t.closePath()}};function Ade(t,e){let n=null,r=aN(i);t=typeof t=="function"?t:yn(t||lN),e=typeof e=="function"?e:yn(e===void 0?64:+e);function i(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:yn(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:yn(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function bb(){}function xb(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function eB(t){this._context=t}eB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:xb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:xb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Ede(t){return new eB(t)}function tB(t){this._context=t}tB.prototype={areaStart:bb,areaEnd:bb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:xb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function jde(t){return new tB(t)}function nB(t){this._context=t}nB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:xb(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Cde(t){return new nB(t)}function rB(t){this._context=t}rB.prototype={areaStart:bb,areaEnd:bb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Tde(t){return new rB(t)}function tM(t){return t<0?-1:1}function nM(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),o=(s*i+a*r)/(r+i);return(tM(s)+tM(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function rM(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function W_(t,e,n){var r=t._x0,i=t._y0,s=t._x1,a=t._y1,o=(s-r)/3;t._context.bezierCurveTo(r+o,i+o*e,s-o,a-o*n,s,a)}function wb(t){this._context=t}wb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:W_(this,this._t0,rM(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,W_(this,rM(this,n=nM(this,t,e)),n);break;default:W_(this,this._t0,n=nM(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function iB(t){this._context=new sB(t)}(iB.prototype=Object.create(wb.prototype)).point=function(t,e){wb.prototype.point.call(this,e,t)};function sB(t){this._context=t}sB.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function Nde(t){return new wb(t)}function Pde(t){return new iB(t)}function aB(t){this._context=t}aB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=iM(t),i=iM(e),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function iM(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function kde(t){return new aB(t)}function Hw(t,e){this._context=t,this._t=e}Hw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Dde(t){return new Hw(t,.5)}function Ide(t){return new Hw(t,0)}function Ode(t){return new Hw(t,1)}function eh(t,e){if((a=t.length)>1)for(var n=1,r,i,s=t[e[0]],a,o=s.length;n<a;++n)for(i=s,s=t[e[n]],r=0;r<o;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function LE(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Mde(t,e){return t[e]}function Rde(t){const e=[];return e.key=t,e}function Lde(){var t=yn([]),e=LE,n=eh,r=Mde;function i(s){var a=Array.from(t.apply(this,arguments),Rde),o,c=a.length,u=-1,d;for(const f of s)for(o=0,++u;o<c;++o)(a[o][u]=[0,+r(f,a[o].key,u,s)]).data=f;for(o=0,d=oN(e(a));o<c;++o)a[d[o]].index=o;return n(a,d),a}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:yn(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:yn(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?LE:typeof s=="function"?s:yn(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??eh,i):n},i}function zde(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,a;i<s;++i){for(a=n=0;n<r;++n)a+=t[n][i][1]||0;if(a)for(n=0;n<r;++n)t[n][i][1]/=a}eh(t,e)}}function $de(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var a=0,o=0;a<i;++a)o+=t[a][n][1]||0;r[n][1]+=r[n][0]=-o/2}eh(t,e)}}function Fde(t,e){if(!(!((a=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,a;r<s;++r){for(var o=0,c=0,u=0;o<a;++o){for(var d=t[e[o]],f=d[r][1]||0,h=d[r-1][1]||0,p=(f-h)/2,g=0;g<o;++g){var m=t[e[g]],y=m[r][1]||0,x=m[r-1][1]||0;p+=y-x}c+=f,u+=p*f}i[r-1][1]+=i[r-1][0]=n,c&&(n-=u/c)}i[r-1][1]+=i[r-1][0]=n,eh(t,e)}}function mg(t){"@babel/helpers - typeof";return mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mg(t)}var Vde=["type","size","sizeType"];function zE(){return zE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zE.apply(this,arguments)}function sM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function aM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sM(Object(n),!0).forEach(function(r){Bde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bde(t,e,n){return e=Ude(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ude(t){var e=Wde(t,"string");return mg(e)=="symbol"?e:e+""}function Wde(t,e){if(mg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(mg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hde(t,e){if(t==null)return{};var n=Kde(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Kde(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var oB={symbolCircle:lN,symbolCross:hde,symbolDiamond:mde,symbolSquare:gde,symbolStar:xde,symbolTriangle:wde,symbolWye:Sde},qde=Math.PI/180,Gde=function(e){var n="symbol".concat(Bw(e));return oB[n]||lN},Yde=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*qde;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Qde=function(e,n){oB["symbol".concat(Bw(e))]=n},cN=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,s=i===void 0?64:i,a=e.sizeType,o=a===void 0?"area":a,c=Hde(e,Vde),u=aM(aM({},c),{},{type:r,size:s,sizeType:o}),d=function(){var y=Gde(r),x=Ade().type(y).size(Yde(s,o,r));return x()},f=u.className,h=u.cx,p=u.cy,g=lt(u,!0);return h===+h&&p===+p&&s===+s?q.createElement("path",zE({},g,{className:Tt("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(p,")"),d:d()})):null};cN.registerSymbol=Qde;function th(t){"@babel/helpers - typeof";return th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},th(t)}function $E(){return $E=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$E.apply(this,arguments)}function oM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xde(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oM(Object(n),!0).forEach(function(r){gg(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jde(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cB(r.key),r)}}function efe(t,e,n){return e&&Jde(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function tfe(t,e,n){return e=_b(e),nfe(t,lB()?Reflect.construct(e,n||[],_b(t).constructor):e.apply(t,n))}function nfe(t,e){if(e&&(th(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rfe(t)}function rfe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lB=function(){return!!t})()}function _b(t){return _b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_b(t)}function ife(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FE(t,e)}function FE(t,e){return FE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},FE(t,e)}function gg(t,e,n){return e=cB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cB(t){var e=sfe(t,"string");return th(e)=="symbol"?e:e+""}function sfe(t,e){if(th(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(th(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Es=32,uN=function(t){function e(){return Zde(this,e),tfe(this,e,arguments)}return ife(e,t),efe(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,s=Es/2,a=Es/6,o=Es/3,c=r.inactive?i:r.color;if(r.type==="plainline")return q.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:s,x2:Es,y2:s,className:"recharts-legend-icon"});if(r.type==="line")return q.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*o,",").concat(s,`
            H`).concat(Es,"M").concat(2*o,",").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(o,",").concat(s),className:"recharts-legend-icon"});if(r.type==="rect")return q.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Es/8,"h").concat(Es,"v").concat(Es*3/4,"h").concat(-Es,"z"),className:"recharts-legend-icon"});if(q.isValidElement(r.legendIcon)){var u=Xde({},r);return delete u.legendIcon,q.cloneElement(r.legendIcon,u)}return q.createElement(cN,{fill:c,cx:s,cy:s,size:Es,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,s=i.payload,a=i.iconSize,o=i.layout,c=i.formatter,u=i.inactiveColor,d={x:0,y:0,width:Es,height:Es},f={display:o==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(p,g){var m=p.formatter||c,y=Tt(gg(gg({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",p.inactive));if(p.type==="none")return null;var x=vt(p.value)?null:p.value;sa(!vt(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var w=p.inactive?u:p.color;return q.createElement("li",$E({className:y,style:f,key:"legend-item-".concat(g)},Lu(r.props,p,g)),q.createElement(PE,{width:a,height:a,viewBox:d,style:h},r.renderIcon(p)),q.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},m?m(x,p,g):x))})}},{key:"render",value:function(){var r=this.props,i=r.payload,s=r.layout,a=r.align;if(!i||!i.length)return null;var o={padding:0,margin:0,textAlign:s==="horizontal"?a:"left"};return q.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(N.PureComponent);gg(uN,"displayName","Legend");gg(uN,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var afe=Nw;function ofe(){this.__data__=new afe,this.size=0}var lfe=ofe;function cfe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var ufe=cfe;function dfe(t){return this.__data__.get(t)}var ffe=dfe;function hfe(t){return this.__data__.has(t)}var pfe=hfe,mfe=Nw,gfe=XT,vfe=ZT,yfe=200;function bfe(t,e){var n=this.__data__;if(n instanceof mfe){var r=n.__data__;if(!gfe||r.length<yfe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new vfe(r)}return n.set(t,e),this.size=n.size,this}var xfe=bfe,wfe=Nw,_fe=lfe,Sfe=ufe,Afe=ffe,Efe=pfe,jfe=xfe;function Gh(t){var e=this.__data__=new wfe(t);this.size=e.size}Gh.prototype.clear=_fe;Gh.prototype.delete=Sfe;Gh.prototype.get=Afe;Gh.prototype.has=Efe;Gh.prototype.set=jfe;var uB=Gh,Cfe="__lodash_hash_undefined__";function Tfe(t){return this.__data__.set(t,Cfe),this}var Nfe=Tfe;function Pfe(t){return this.__data__.has(t)}var kfe=Pfe,Dfe=ZT,Ife=Nfe,Ofe=kfe;function Sb(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Dfe;++e<n;)this.add(t[e])}Sb.prototype.add=Sb.prototype.push=Ife;Sb.prototype.has=Ofe;var dB=Sb;function Mfe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var fB=Mfe;function Rfe(t,e){return t.has(e)}var hB=Rfe,Lfe=dB,zfe=fB,$fe=hB,Ffe=1,Vfe=2;function Bfe(t,e,n,r,i,s){var a=n&Ffe,o=t.length,c=e.length;if(o!=c&&!(a&&c>o))return!1;var u=s.get(t),d=s.get(e);if(u&&d)return u==e&&d==t;var f=-1,h=!0,p=n&Vfe?new Lfe:void 0;for(s.set(t,e),s.set(e,t);++f<o;){var g=t[f],m=e[f];if(r)var y=a?r(m,g,f,e,t,s):r(g,m,f,t,e,s);if(y!==void 0){if(y)continue;h=!1;break}if(p){if(!zfe(e,function(x,w){if(!$fe(p,w)&&(g===x||i(g,x,n,r,s)))return p.push(w)})){h=!1;break}}else if(!(g===m||i(g,m,n,r,s))){h=!1;break}}return s.delete(t),s.delete(e),h}var pB=Bfe,Ufe=Ja,Wfe=Ufe.Uint8Array,Hfe=Wfe;function Kfe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var qfe=Kfe;function Gfe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var dN=Gfe,lM=Ev,cM=Hfe,Yfe=QT,Qfe=pB,Xfe=qfe,Zfe=dN,Jfe=1,ehe=2,the="[object Boolean]",nhe="[object Date]",rhe="[object Error]",ihe="[object Map]",she="[object Number]",ahe="[object RegExp]",ohe="[object Set]",lhe="[object String]",che="[object Symbol]",uhe="[object ArrayBuffer]",dhe="[object DataView]",uM=lM?lM.prototype:void 0,H_=uM?uM.valueOf:void 0;function fhe(t,e,n,r,i,s,a){switch(n){case dhe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case uhe:return!(t.byteLength!=e.byteLength||!s(new cM(t),new cM(e)));case the:case nhe:case she:return Yfe(+t,+e);case rhe:return t.name==e.name&&t.message==e.message;case ahe:case lhe:return t==e+"";case ihe:var o=Xfe;case ohe:var c=r&Jfe;if(o||(o=Zfe),t.size!=e.size&&!c)return!1;var u=a.get(t);if(u)return u==e;r|=ehe,a.set(t,e);var d=Qfe(o(t),o(e),r,i,s,a);return a.delete(t),d;case che:if(H_)return H_.call(t)==H_.call(e)}return!1}var hhe=fhe;function phe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var mB=phe,mhe=mB,ghe=Ki;function vhe(t,e,n){var r=e(t);return ghe(t)?r:mhe(r,n(t))}var yhe=vhe;function bhe(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var a=t[n];e(a,n,t)&&(s[i++]=a)}return s}var xhe=bhe;function whe(){return[]}var _he=whe,She=xhe,Ahe=_he,Ehe=Object.prototype,jhe=Ehe.propertyIsEnumerable,dM=Object.getOwnPropertySymbols,Che=dM?function(t){return t==null?[]:(t=Object(t),She(dM(t),function(e){return jhe.call(t,e)}))}:Ahe,The=Che;function Nhe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var Phe=Nhe,khe=Ko,Dhe=qo,Ihe="[object Arguments]";function Ohe(t){return Dhe(t)&&khe(t)==Ihe}var Mhe=Ohe,fM=Mhe,Rhe=qo,gB=Object.prototype,Lhe=gB.hasOwnProperty,zhe=gB.propertyIsEnumerable,$he=fM(function(){return arguments}())?fM:function(t){return Rhe(t)&&Lhe.call(t,"callee")&&!zhe.call(t,"callee")},fN=$he,Ab={exports:{}};function Fhe(){return!1}var Vhe=Fhe;Ab.exports;(function(t,e){var n=Ja,r=Vhe,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===i,o=a?n.Buffer:void 0,c=o?o.isBuffer:void 0,u=c||r;t.exports=u})(Ab,Ab.exports);var vB=Ab.exports,Bhe=9007199254740991,Uhe=/^(?:0|[1-9]\d*)$/;function Whe(t,e){var n=typeof t;return e=e??Bhe,!!e&&(n=="number"||n!="symbol"&&Uhe.test(t))&&t>-1&&t%1==0&&t<e}var hN=Whe,Hhe=9007199254740991;function Khe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Hhe}var pN=Khe,qhe=Ko,Ghe=pN,Yhe=qo,Qhe="[object Arguments]",Xhe="[object Array]",Zhe="[object Boolean]",Jhe="[object Date]",epe="[object Error]",tpe="[object Function]",npe="[object Map]",rpe="[object Number]",ipe="[object Object]",spe="[object RegExp]",ape="[object Set]",ope="[object String]",lpe="[object WeakMap]",cpe="[object ArrayBuffer]",upe="[object DataView]",dpe="[object Float32Array]",fpe="[object Float64Array]",hpe="[object Int8Array]",ppe="[object Int16Array]",mpe="[object Int32Array]",gpe="[object Uint8Array]",vpe="[object Uint8ClampedArray]",ype="[object Uint16Array]",bpe="[object Uint32Array]",En={};En[dpe]=En[fpe]=En[hpe]=En[ppe]=En[mpe]=En[gpe]=En[vpe]=En[ype]=En[bpe]=!0;En[Qhe]=En[Xhe]=En[cpe]=En[Zhe]=En[upe]=En[Jhe]=En[epe]=En[tpe]=En[npe]=En[rpe]=En[ipe]=En[spe]=En[ape]=En[ope]=En[lpe]=!1;function xpe(t){return Yhe(t)&&Ghe(t.length)&&!!En[qhe(t)]}var wpe=xpe;function _pe(t){return function(e){return t(e)}}var yB=_pe,Eb={exports:{}};Eb.exports;(function(t,e){var n=EV,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,a=s&&n.process,o=function(){try{var c=i&&i.require&&i.require("util").types;return c||a&&a.binding&&a.binding("util")}catch{}}();t.exports=o})(Eb,Eb.exports);var Spe=Eb.exports,Ape=wpe,Epe=yB,hM=Spe,pM=hM&&hM.isTypedArray,jpe=pM?Epe(pM):Ape,bB=jpe,Cpe=Phe,Tpe=fN,Npe=Ki,Ppe=vB,kpe=hN,Dpe=bB,Ipe=Object.prototype,Ope=Ipe.hasOwnProperty;function Mpe(t,e){var n=Npe(t),r=!n&&Tpe(t),i=!n&&!r&&Ppe(t),s=!n&&!r&&!i&&Dpe(t),a=n||r||i||s,o=a?Cpe(t.length,String):[],c=o.length;for(var u in t)(e||Ope.call(t,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||kpe(u,c)))&&o.push(u);return o}var Rpe=Mpe,Lpe=Object.prototype;function zpe(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Lpe;return t===n}var $pe=zpe;function Fpe(t,e){return function(n){return t(e(n))}}var xB=Fpe,Vpe=xB,Bpe=Vpe(Object.keys,Object),Upe=Bpe,Wpe=$pe,Hpe=Upe,Kpe=Object.prototype,qpe=Kpe.hasOwnProperty;function Gpe(t){if(!Wpe(t))return Hpe(t);var e=[];for(var n in Object(t))qpe.call(t,n)&&n!="constructor"&&e.push(n);return e}var Ype=Gpe,Qpe=YT,Xpe=pN;function Zpe(t){return t!=null&&Xpe(t.length)&&!Qpe(t)}var jv=Zpe,Jpe=Rpe,eme=Ype,tme=jv;function nme(t){return tme(t)?Jpe(t):eme(t)}var Kw=nme,rme=yhe,ime=The,sme=Kw;function ame(t){return rme(t,sme,ime)}var ome=ame,mM=ome,lme=1,cme=Object.prototype,ume=cme.hasOwnProperty;function dme(t,e,n,r,i,s){var a=n&lme,o=mM(t),c=o.length,u=mM(e),d=u.length;if(c!=d&&!a)return!1;for(var f=c;f--;){var h=o[f];if(!(a?h in e:ume.call(e,h)))return!1}var p=s.get(t),g=s.get(e);if(p&&g)return p==e&&g==t;var m=!0;s.set(t,e),s.set(e,t);for(var y=a;++f<c;){h=o[f];var x=t[h],w=e[h];if(r)var _=a?r(w,x,h,e,t,s):r(x,w,h,t,e,s);if(!(_===void 0?x===w||i(x,w,n,r,s):_)){m=!1;break}y||(y=h=="constructor")}if(m&&!y){var A=t.constructor,E=e.constructor;A!=E&&"constructor"in t&&"constructor"in e&&!(typeof A=="function"&&A instanceof A&&typeof E=="function"&&E instanceof E)&&(m=!1)}return s.delete(t),s.delete(e),m}var fme=dme,hme=nd,pme=Ja,mme=hme(pme,"DataView"),gme=mme,vme=nd,yme=Ja,bme=vme(yme,"Promise"),xme=bme,wme=nd,_me=Ja,Sme=wme(_me,"Set"),wB=Sme,Ame=nd,Eme=Ja,jme=Ame(Eme,"WeakMap"),Cme=jme,VE=gme,BE=XT,UE=xme,WE=wB,HE=Cme,_B=Ko,Yh=CV,gM="[object Map]",Tme="[object Object]",vM="[object Promise]",yM="[object Set]",bM="[object WeakMap]",xM="[object DataView]",Nme=Yh(VE),Pme=Yh(BE),kme=Yh(UE),Dme=Yh(WE),Ime=Yh(HE),Kc=_B;(VE&&Kc(new VE(new ArrayBuffer(1)))!=xM||BE&&Kc(new BE)!=gM||UE&&Kc(UE.resolve())!=vM||WE&&Kc(new WE)!=yM||HE&&Kc(new HE)!=bM)&&(Kc=function(t){var e=_B(t),n=e==Tme?t.constructor:void 0,r=n?Yh(n):"";if(r)switch(r){case Nme:return xM;case Pme:return gM;case kme:return vM;case Dme:return yM;case Ime:return bM}return e});var Ome=Kc,K_=uB,Mme=pB,Rme=hhe,Lme=fme,wM=Ome,_M=Ki,SM=vB,zme=bB,$me=1,AM="[object Arguments]",EM="[object Array]",by="[object Object]",Fme=Object.prototype,jM=Fme.hasOwnProperty;function Vme(t,e,n,r,i,s){var a=_M(t),o=_M(e),c=a?EM:wM(t),u=o?EM:wM(e);c=c==AM?by:c,u=u==AM?by:u;var d=c==by,f=u==by,h=c==u;if(h&&SM(t)){if(!SM(e))return!1;a=!0,d=!1}if(h&&!d)return s||(s=new K_),a||zme(t)?Mme(t,e,n,r,i,s):Rme(t,e,c,n,r,i,s);if(!(n&$me)){var p=d&&jM.call(t,"__wrapped__"),g=f&&jM.call(e,"__wrapped__");if(p||g){var m=p?t.value():t,y=g?e.value():e;return s||(s=new K_),i(m,y,n,r,s)}}return h?(s||(s=new K_),Lme(t,e,n,r,i,s)):!1}var Bme=Vme,Ume=Bme,CM=qo;function SB(t,e,n,r,i){return t===e?!0:t==null||e==null||!CM(t)&&!CM(e)?t!==t&&e!==e:Ume(t,e,n,r,SB,i)}var mN=SB,Wme=uB,Hme=mN,Kme=1,qme=2;function Gme(t,e,n,r){var i=n.length,s=i,a=!r;if(t==null)return!s;for(t=Object(t);i--;){var o=n[i];if(a&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<s;){o=n[i];var c=o[0],u=t[c],d=o[1];if(a&&o[2]){if(u===void 0&&!(c in t))return!1}else{var f=new Wme;if(r)var h=r(u,d,c,t,e,f);if(!(h===void 0?Hme(d,u,Kme|qme,r,f):h))return!1}}return!0}var Yme=Gme,Qme=cc;function Xme(t){return t===t&&!Qme(t)}var AB=Xme,Zme=AB,Jme=Kw;function ege(t){for(var e=Jme(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Zme(i)]}return e}var tge=ege;function nge(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var EB=nge,rge=Yme,ige=tge,sge=EB;function age(t){var e=ige(t);return e.length==1&&e[0][2]?sge(e[0][0],e[0][1]):function(n){return n===t||rge(n,t,e)}}var oge=age;function lge(t,e){return t!=null&&e in Object(t)}var cge=lge,uge=DV,dge=fN,fge=Ki,hge=hN,pge=pN,mge=kw;function gge(t,e,n){e=uge(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var a=mge(e[r]);if(!(s=t!=null&&n(t,a)))break;t=t[a]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&pge(i)&&hge(a,i)&&(fge(t)||dge(t)))}var vge=gge,yge=cge,bge=vge;function xge(t,e){return t!=null&&bge(t,e,yge)}var wge=xge,_ge=mN,Sge=IV,Age=wge,Ege=GT,jge=AB,Cge=EB,Tge=kw,Nge=1,Pge=2;function kge(t,e){return Ege(t)&&jge(e)?Cge(Tge(t),e):function(n){var r=Sge(n,t);return r===void 0&&r===e?Age(n,t):_ge(e,r,Nge|Pge)}}var Dge=kge;function Ige(t){return t}var Qh=Ige;function Oge(t){return function(e){return e==null?void 0:e[t]}}var Mge=Oge,Rge=tN;function Lge(t){return function(e){return Rge(e,t)}}var zge=Lge,$ge=Mge,Fge=zge,Vge=GT,Bge=kw;function Uge(t){return Vge(t)?$ge(Bge(t)):Fge(t)}var Wge=Uge,Hge=oge,Kge=Dge,qge=Qh,Gge=Ki,Yge=Wge;function Qge(t){return typeof t=="function"?t:t==null?qge:typeof t=="object"?Gge(t)?Kge(t[0],t[1]):Hge(t):Yge(t)}var eo=Qge;function Xge(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}var jB=Xge;function Zge(t){return t!==t}var Jge=Zge;function eve(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var tve=eve,nve=jB,rve=Jge,ive=tve;function sve(t,e,n){return e===e?ive(t,e,n):nve(t,rve,n)}var ave=sve,ove=ave;function lve(t,e){var n=t==null?0:t.length;return!!n&&ove(t,e,0)>-1}var cve=lve;function uve(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var dve=uve;function fve(){}var hve=fve,q_=wB,pve=hve,mve=dN,gve=1/0,vve=q_&&1/mve(new q_([,-0]))[1]==gve?function(t){return new q_(t)}:pve,yve=vve,bve=dB,xve=cve,wve=dve,_ve=hB,Sve=yve,Ave=dN,Eve=200;function jve(t,e,n){var r=-1,i=xve,s=t.length,a=!0,o=[],c=o;if(n)a=!1,i=wve;else if(s>=Eve){var u=e?null:Sve(t);if(u)return Ave(u);a=!1,i=_ve,c=new bve}else c=e?[]:o;e:for(;++r<s;){var d=t[r],f=e?e(d):d;if(d=n||d!==0?d:0,a&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;e&&c.push(f),o.push(d)}else i(c,f,n)||(c!==o&&c.push(f),o.push(d))}return o}var Cve=jve,Tve=eo,Nve=Cve;function Pve(t,e){return t&&t.length?Nve(t,Tve(e)):[]}var kve=Pve;const TM=tn(kve);function CB(t,e,n){return e===!0?TM(t,n):vt(e)?TM(t,e):t}function nh(t){"@babel/helpers - typeof";return nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nh(t)}var Dve=["ref"];function NM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NM(Object(n),!0).forEach(function(r){qw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ive(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,NB(r.key),r)}}function Ove(t,e,n){return e&&PM(t.prototype,e),n&&PM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mve(t,e,n){return e=jb(e),Rve(t,TB()?Reflect.construct(e,n||[],jb(t).constructor):e.apply(t,n))}function Rve(t,e){if(e&&(nh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lve(t)}function Lve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TB=function(){return!!t})()}function jb(t){return jb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jb(t)}function zve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KE(t,e)}function KE(t,e){return KE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},KE(t,e)}function qw(t,e,n){return e=NB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NB(t){var e=$ve(t,"string");return nh(e)=="symbol"?e:e+""}function $ve(t,e){if(nh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(nh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Fve(t,e){if(t==null)return{};var n=Vve(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Vve(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Bve(t){return t.value}function Uve(t,e){if(q.isValidElement(t))return q.cloneElement(t,e);if(typeof t=="function")return q.createElement(t,e);e.ref;var n=Fve(e,Dve);return q.createElement(uN,n)}var kM=1,aa=function(t){function e(){var n;Ive(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=Mve(this,e,[].concat(i)),qw(n,"lastBoundingBox",{width:-1,height:-1}),n}return zve(e,t),Ove(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>kM||Math.abs(i.height-this.lastBoundingBox.height)>kM)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?fo({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,s=i.layout,a=i.align,o=i.verticalAlign,c=i.margin,u=i.chartWidth,d=i.chartHeight,f,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(a==="center"&&s==="vertical"){var p=this.getBBoxSnapshot();f={left:((u||0)-p.width)/2}}else f=a==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(o==="middle"){var g=this.getBBoxSnapshot();h={top:((d||0)-g.height)/2}}else h=o==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return fo(fo({},f),h)}},{key:"render",value:function(){var r=this,i=this.props,s=i.content,a=i.width,o=i.height,c=i.wrapperStyle,u=i.payloadUniqBy,d=i.payload,f=fo(fo({position:"absolute",width:a||"auto",height:o||"auto"},this.getDefaultPosition(c)),c);return q.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(p){r.wrapperNode=p}},Uve(s,fo(fo({},this.props),{},{payload:CB(d,u,Bve)})))}}],[{key:"getWithHeight",value:function(r,i){var s=fo(fo({},this.defaultProps),r.props),a=s.layout;return a==="vertical"&&Ie(r.props.height)?{height:r.props.height}:a==="horizontal"?{width:r.props.width||i}:null}}])}(N.PureComponent);qw(aa,"displayName","Legend");qw(aa,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var DM=Ev,Wve=fN,Hve=Ki,IM=DM?DM.isConcatSpreadable:void 0;function Kve(t){return Hve(t)||Wve(t)||!!(IM&&t&&t[IM])}var qve=Kve,Gve=mB,Yve=qve;function PB(t,e,n,r,i){var s=-1,a=t.length;for(n||(n=Yve),i||(i=[]);++s<a;){var o=t[s];e>0&&n(o)?e>1?PB(o,e-1,n,r,i):Gve(i,o):r||(i[i.length]=o)}return i}var kB=PB;function Qve(t){return function(e,n,r){for(var i=-1,s=Object(e),a=r(e),o=a.length;o--;){var c=a[t?o:++i];if(n(s[c],c,s)===!1)break}return e}}var Xve=Qve,Zve=Xve,Jve=Zve(),eye=Jve,tye=eye,nye=Kw;function rye(t,e){return t&&tye(t,e,nye)}var DB=rye,iye=jv;function sye(t,e){return function(n,r){if(n==null)return n;if(!iye(n))return t(n,r);for(var i=n.length,s=e?i:-1,a=Object(n);(e?s--:++s<i)&&r(a[s],s,a)!==!1;);return n}}var aye=sye,oye=DB,lye=aye,cye=lye(oye),gN=cye,uye=gN,dye=jv;function fye(t,e){var n=-1,r=dye(t)?Array(t.length):[];return uye(t,function(i,s,a){r[++n]=e(i,s,a)}),r}var IB=fye;function hye(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var pye=hye,OM=Bh;function mye(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,s=OM(t),a=e!==void 0,o=e===null,c=e===e,u=OM(e);if(!o&&!u&&!s&&t>e||s&&a&&c&&!o&&!u||r&&a&&c||!n&&c||!i)return 1;if(!r&&!s&&!u&&t<e||u&&n&&i&&!r&&!s||o&&n&&i||!a&&i||!c)return-1}return 0}var gye=mye,vye=gye;function yye(t,e,n){for(var r=-1,i=t.criteria,s=e.criteria,a=i.length,o=n.length;++r<a;){var c=vye(i[r],s[r]);if(c){if(r>=o)return c;var u=n[r];return c*(u=="desc"?-1:1)}}return t.index-e.index}var bye=yye,G_=eN,xye=tN,wye=eo,_ye=IB,Sye=pye,Aye=yB,Eye=bye,jye=Qh,Cye=Ki;function Tye(t,e,n){e.length?e=G_(e,function(s){return Cye(s)?function(a){return xye(a,s.length===1?s[0]:s)}:s}):e=[jye];var r=-1;e=G_(e,Aye(wye));var i=_ye(t,function(s,a,o){var c=G_(e,function(u){return u(s)});return{criteria:c,index:++r,value:s}});return Sye(i,function(s,a){return Eye(s,a,n)})}var Nye=Tye;function Pye(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var kye=Pye,Dye=kye,MM=Math.max;function Iye(t,e,n){return e=MM(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=MM(r.length-e,0),a=Array(s);++i<s;)a[i]=r[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=r[i];return o[e]=n(a),Dye(t,this,o)}}var Oye=Iye;function Mye(t){return function(){return t}}var Rye=Mye,Lye=nd,zye=function(){try{var t=Lye(Object,"defineProperty");return t({},"",{}),t}catch{}}(),OB=zye,$ye=Rye,RM=OB,Fye=Qh,Vye=RM?function(t,e){return RM(t,"toString",{configurable:!0,enumerable:!1,value:$ye(e),writable:!0})}:Fye,Bye=Vye,Uye=800,Wye=16,Hye=Date.now;function Kye(t){var e=0,n=0;return function(){var r=Hye(),i=Wye-(r-n);if(n=r,i>0){if(++e>=Uye)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var qye=Kye,Gye=Bye,Yye=qye,Qye=Yye(Gye),Xye=Qye,Zye=Qh,Jye=Oye,e0e=Xye;function t0e(t,e){return e0e(Jye(t,e,Zye),t+"")}var n0e=t0e,r0e=QT,i0e=jv,s0e=hN,a0e=cc;function o0e(t,e,n){if(!a0e(n))return!1;var r=typeof e;return(r=="number"?i0e(n)&&s0e(e,n.length):r=="string"&&e in n)?r0e(n[e],t):!1}var Gw=o0e,l0e=kB,c0e=Nye,u0e=n0e,LM=Gw,d0e=u0e(function(t,e){if(t==null)return[];var n=e.length;return n>1&&LM(t,e[0],e[1])?e=[]:n>2&&LM(e[0],e[1],e[2])&&(e=[e[0]]),c0e(t,l0e(e,1),[])}),f0e=d0e;const vN=tn(f0e);function vg(t){"@babel/helpers - typeof";return vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vg(t)}function qE(){return qE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qE.apply(this,arguments)}function h0e(t,e){return v0e(t)||g0e(t,e)||m0e(t,e)||p0e()}function p0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m0e(t,e){if(t){if(typeof t=="string")return zM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zM(t,e)}}function zM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function g0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function v0e(t){if(Array.isArray(t))return t}function $M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Y_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$M(Object(n),!0).forEach(function(r){y0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$M(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function y0e(t,e,n){return e=b0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b0e(t){var e=x0e(t,"string");return vg(e)=="symbol"?e:e+""}function x0e(t,e){if(vg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function w0e(t){return Array.isArray(t)&&Ar(t[0])&&Ar(t[1])?t.join(" ~ "):t}var _0e=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,s=i===void 0?{}:i,a=e.itemStyle,o=a===void 0?{}:a,c=e.labelStyle,u=c===void 0?{}:c,d=e.payload,f=e.formatter,h=e.itemSorter,p=e.wrapperClassName,g=e.labelClassName,m=e.label,y=e.labelFormatter,x=e.accessibilityLayer,w=x===void 0?!1:x,_=function(){if(d&&d.length){var F={padding:0,margin:0},R=(h?vN(d,h):d).map(function(H,X){if(H.type==="none")return null;var W=Y_({display:"block",paddingTop:4,paddingBottom:4,color:H.color||"#000"},o),U=H.formatter||f||w0e,$=H.value,Y=H.name,Q=$,ce=Y;if(U&&Q!=null&&ce!=null){var ie=U($,Y,H,X,d);if(Array.isArray(ie)){var oe=h0e(ie,2);Q=oe[0],ce=oe[1]}else Q=ie}return q.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(X),style:W},Ar(ce)?q.createElement("span",{className:"recharts-tooltip-item-name"},ce):null,Ar(ce)?q.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,q.createElement("span",{className:"recharts-tooltip-item-value"},Q),q.createElement("span",{className:"recharts-tooltip-item-unit"},H.unit||""))});return q.createElement("ul",{className:"recharts-tooltip-item-list",style:F},R)}return null},A=Y_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),E=Y_({margin:0},u),C=!_t(m),j=C?m:"",T=Tt("recharts-default-tooltip",p),P=Tt("recharts-tooltip-label",g);C&&y&&d!==void 0&&d!==null&&(j=y(m,d));var I=w?{role:"status","aria-live":"assertive"}:{};return q.createElement("div",qE({className:T,style:A},I),q.createElement("p",{className:P,style:E},q.isValidElement(j)?j:"".concat(j)),_())};function yg(t){"@babel/helpers - typeof";return yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yg(t)}function xy(t,e,n){return e=S0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S0e(t){var e=A0e(t,"string");return yg(e)=="symbol"?e:e+""}function A0e(t,e){if(yg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ip="recharts-tooltip-wrapper",E0e={visibility:"hidden"};function j0e(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return Tt(Ip,xy(xy(xy(xy({},"".concat(Ip,"-right"),Ie(n)&&e&&Ie(e.x)&&n>=e.x),"".concat(Ip,"-left"),Ie(n)&&e&&Ie(e.x)&&n<e.x),"".concat(Ip,"-bottom"),Ie(r)&&e&&Ie(e.y)&&r>=e.y),"".concat(Ip,"-top"),Ie(r)&&e&&Ie(e.y)&&r<e.y))}function FM(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,s=t.position,a=t.reverseDirection,o=t.tooltipDimension,c=t.viewBox,u=t.viewBoxDimension;if(s&&Ie(s[r]))return s[r];var d=n[r]-o-i,f=n[r]+i;if(e[r])return a[r]?d:f;if(a[r]){var h=d,p=c[r];return h<p?Math.max(f,c[r]):Math.max(d,c[r])}var g=f+o,m=c[r]+u;return g>m?Math.max(d,c[r]):Math.max(f,c[r])}function C0e(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function T0e(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,s=t.reverseDirection,a=t.tooltipBox,o=t.useTranslate3d,c=t.viewBox,u,d,f;return a.height>0&&a.width>0&&n?(d=FM({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.width,viewBox:c,viewBoxDimension:c.width}),f=FM({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.height,viewBox:c,viewBoxDimension:c.height}),u=C0e({translateX:d,translateY:f,useTranslate3d:o})):u=E0e,{cssProperties:u,cssClasses:j0e({translateX:d,translateY:f,coordinate:n})}}function rh(t){"@babel/helpers - typeof";return rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rh(t)}function VM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function BM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VM(Object(n),!0).forEach(function(r){YE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function N0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P0e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,RB(r.key),r)}}function k0e(t,e,n){return e&&P0e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function D0e(t,e,n){return e=Cb(e),I0e(t,MB()?Reflect.construct(e,n||[],Cb(t).constructor):e.apply(t,n))}function I0e(t,e){if(e&&(rh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O0e(t)}function O0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function MB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MB=function(){return!!t})()}function Cb(t){return Cb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Cb(t)}function M0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GE(t,e)}function GE(t,e){return GE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},GE(t,e)}function YE(t,e,n){return e=RB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RB(t){var e=R0e(t,"string");return rh(e)=="symbol"?e:e+""}function R0e(t,e){if(rh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(rh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var UM=1,L0e=function(t){function e(){var n;N0e(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=D0e(this,e,[].concat(i)),YE(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),YE(n,"handleKeyDown",function(a){if(a.key==="Escape"){var o,c,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&o!==void 0?o:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return M0e(e,t),k0e(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>UM||Math.abs(r.height-this.state.lastBoundingBox.height)>UM)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,s=i.active,a=i.allowEscapeViewBox,o=i.animationDuration,c=i.animationEasing,u=i.children,d=i.coordinate,f=i.hasPayload,h=i.isAnimationActive,p=i.offset,g=i.position,m=i.reverseDirection,y=i.useTranslate3d,x=i.viewBox,w=i.wrapperStyle,_=T0e({allowEscapeViewBox:a,coordinate:d,offsetTopLeft:p,position:g,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:x}),A=_.cssClasses,E=_.cssProperties,C=BM(BM({transition:h&&s?"transform ".concat(o,"ms ").concat(c):void 0},E),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&f?"visible":"hidden",position:"absolute",top:0,left:0},w);return q.createElement("div",{tabIndex:-1,className:A,style:C,ref:function(T){r.wrapperNode=T}},u)}}])}(N.PureComponent),z0e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},uc={isSsr:z0e()};function ih(t){"@babel/helpers - typeof";return ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ih(t)}function WM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function HM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WM(Object(n),!0).forEach(function(r){yN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function F0e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zB(r.key),r)}}function V0e(t,e,n){return e&&F0e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function B0e(t,e,n){return e=Tb(e),U0e(t,LB()?Reflect.construct(e,n||[],Tb(t).constructor):e.apply(t,n))}function U0e(t,e){if(e&&(ih(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return W0e(t)}function W0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function LB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LB=function(){return!!t})()}function Tb(t){return Tb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Tb(t)}function H0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QE(t,e)}function QE(t,e){return QE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},QE(t,e)}function yN(t,e,n){return e=zB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zB(t){var e=K0e(t,"string");return ih(e)=="symbol"?e:e+""}function K0e(t,e){if(ih(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ih(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function q0e(t){return t.dataKey}function G0e(t,e){return q.isValidElement(t)?q.cloneElement(t,e):typeof t=="function"?q.createElement(t,e):q.createElement(_0e,e)}var fn=function(t){function e(){return $0e(this,e),B0e(this,e,arguments)}return H0e(e,t),V0e(e,[{key:"render",value:function(){var r=this,i=this.props,s=i.active,a=i.allowEscapeViewBox,o=i.animationDuration,c=i.animationEasing,u=i.content,d=i.coordinate,f=i.filterNull,h=i.isAnimationActive,p=i.offset,g=i.payload,m=i.payloadUniqBy,y=i.position,x=i.reverseDirection,w=i.useTranslate3d,_=i.viewBox,A=i.wrapperStyle,E=g??[];f&&E.length&&(E=CB(g.filter(function(j){return j.value!=null&&(j.hide!==!0||r.props.includeHidden)}),m,q0e));var C=E.length>0;return q.createElement(L0e,{allowEscapeViewBox:a,animationDuration:o,animationEasing:c,isAnimationActive:h,active:s,coordinate:d,hasPayload:C,offset:p,position:y,reverseDirection:x,useTranslate3d:w,viewBox:_,wrapperStyle:A},G0e(u,HM(HM({},this.props),{},{payload:E})))}}])}(N.PureComponent);yN(fn,"displayName","Tooltip");yN(fn,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!uc.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Y0e=Ja,Q0e=function(){return Y0e.Date.now()},X0e=Q0e,Z0e=/\s/;function J0e(t){for(var e=t.length;e--&&Z0e.test(t.charAt(e)););return e}var ebe=J0e,tbe=ebe,nbe=/^\s+/;function rbe(t){return t&&t.slice(0,tbe(t)+1).replace(nbe,"")}var ibe=rbe,sbe=ibe,KM=cc,abe=Bh,qM=NaN,obe=/^[-+]0x[0-9a-f]+$/i,lbe=/^0b[01]+$/i,cbe=/^0o[0-7]+$/i,ube=parseInt;function dbe(t){if(typeof t=="number")return t;if(abe(t))return qM;if(KM(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=KM(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=sbe(t);var n=lbe.test(t);return n||cbe.test(t)?ube(t.slice(2),n?2:8):obe.test(t)?qM:+t}var $B=dbe,fbe=cc,Q_=X0e,GM=$B,hbe="Expected a function",pbe=Math.max,mbe=Math.min;function gbe(t,e,n){var r,i,s,a,o,c,u=0,d=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(hbe);e=GM(e)||0,fbe(n)&&(d=!!n.leading,f="maxWait"in n,s=f?pbe(GM(n.maxWait)||0,e):s,h="trailing"in n?!!n.trailing:h);function p(C){var j=r,T=i;return r=i=void 0,u=C,a=t.apply(T,j),a}function g(C){return u=C,o=setTimeout(x,e),d?p(C):a}function m(C){var j=C-c,T=C-u,P=e-j;return f?mbe(P,s-T):P}function y(C){var j=C-c,T=C-u;return c===void 0||j>=e||j<0||f&&T>=s}function x(){var C=Q_();if(y(C))return w(C);o=setTimeout(x,m(C))}function w(C){return o=void 0,h&&r?p(C):(r=i=void 0,a)}function _(){o!==void 0&&clearTimeout(o),u=0,r=c=i=o=void 0}function A(){return o===void 0?a:w(Q_())}function E(){var C=Q_(),j=y(C);if(r=arguments,i=this,c=C,j){if(o===void 0)return g(c);if(f)return clearTimeout(o),o=setTimeout(x,e),p(c)}return o===void 0&&(o=setTimeout(x,e)),a}return E.cancel=_,E.flush=A,E}var vbe=gbe,ybe=vbe,bbe=cc,xbe="Expected a function";function wbe(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(xbe);return bbe(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ybe(t,e,{leading:r,maxWait:e,trailing:i})}var _be=wbe;const FB=tn(_be);function bg(t){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bg(t)}function YM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YM(Object(n),!0).forEach(function(r){Sbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sbe(t,e,n){return e=Abe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Abe(t){var e=Ebe(t,"string");return bg(e)=="symbol"?e:e+""}function Ebe(t,e){if(bg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jbe(t,e){return Pbe(t)||Nbe(t,e)||Tbe(t,e)||Cbe()}function Cbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tbe(t,e){if(t){if(typeof t=="string")return QM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QM(t,e)}}function QM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Nbe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function Pbe(t){if(Array.isArray(t))return t}var Er=N.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,s=t.width,a=s===void 0?"100%":s,o=t.height,c=o===void 0?"100%":o,u=t.minWidth,d=u===void 0?0:u,f=t.minHeight,h=t.maxHeight,p=t.children,g=t.debounce,m=g===void 0?0:g,y=t.id,x=t.className,w=t.onResize,_=t.style,A=_===void 0?{}:_,E=N.useRef(null),C=N.useRef();C.current=w,N.useImperativeHandle(e,function(){return Object.defineProperty(E.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),E.current},configurable:!0})});var j=N.useState({containerWidth:i.width,containerHeight:i.height}),T=jbe(j,2),P=T[0],I=T[1],M=N.useCallback(function(R,H){I(function(X){var W=Math.round(R),U=Math.round(H);return X.containerWidth===W&&X.containerHeight===U?X:{containerWidth:W,containerHeight:U}})},[]);N.useEffect(function(){var R=function(Y){var Q,ce=Y[0].contentRect,ie=ce.width,oe=ce.height;M(ie,oe),(Q=C.current)===null||Q===void 0||Q.call(C,ie,oe)};m>0&&(R=FB(R,m,{trailing:!0,leading:!1}));var H=new ResizeObserver(R),X=E.current.getBoundingClientRect(),W=X.width,U=X.height;return M(W,U),H.observe(E.current),function(){H.disconnect()}},[M,m]);var F=N.useMemo(function(){var R=P.containerWidth,H=P.containerHeight;if(R<0||H<0)return null;sa(au(a)||au(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,c),sa(!n||n>0,"The aspect(%s) must be greater than zero.",n);var X=au(a)?R:a,W=au(c)?H:c;n&&n>0&&(X?W=X/n:W&&(X=W*n),h&&W>h&&(W=h)),sa(X>0||W>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,X,W,a,c,d,f,n);var U=!Array.isArray(p)&&To(p.type).endsWith("Chart");return q.Children.map(p,function($){return q.isValidElement($)?N.cloneElement($,wy({width:X,height:W},U?{style:wy({height:"100%",width:"100%",maxHeight:W,maxWidth:X},$.props.style)}:{})):$})},[n,p,c,h,f,d,P,a]);return q.createElement("div",{id:y?"".concat(y):void 0,className:Tt("recharts-responsive-container",x),style:wy(wy({},A),{},{width:a,height:c,minWidth:d,minHeight:f,maxHeight:h}),ref:E},F)}),Ms=function(e){return null};Ms.displayName="Cell";function xg(t){"@babel/helpers - typeof";return xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xg(t)}function XM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function XE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XM(Object(n),!0).forEach(function(r){kbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kbe(t,e,n){return e=Dbe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dbe(t){var e=Ibe(t,"string");return xg(e)=="symbol"?e:e+""}function Ibe(t,e){if(xg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(xg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kd={widthCache:{},cacheCount:0},Obe=2e3,Mbe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},ZM="recharts_measurement_span";function Rbe(t){var e=XE({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var _m=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||uc.isSsr)return{width:0,height:0};var r=Rbe(n),i=JSON.stringify({text:e,copyStyle:r});if(kd.widthCache[i])return kd.widthCache[i];try{var s=document.getElementById(ZM);s||(s=document.createElement("span"),s.setAttribute("id",ZM),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var a=XE(XE({},Mbe),r);Object.assign(s.style,a),s.textContent="".concat(e);var o=s.getBoundingClientRect(),c={width:o.width,height:o.height};return kd.widthCache[i]=c,++kd.cacheCount>Obe&&(kd.cacheCount=0,kd.widthCache={}),c}catch{return{width:0,height:0}}},Lbe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function wg(t){"@babel/helpers - typeof";return wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wg(t)}function Nb(t,e){return Vbe(t)||Fbe(t,e)||$be(t,e)||zbe()}function zbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $be(t,e){if(t){if(typeof t=="string")return JM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JM(t,e)}}function JM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Fbe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function Vbe(t){if(Array.isArray(t))return t}function Bbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Wbe(r.key),r)}}function Ube(t,e,n){return e&&eR(t.prototype,e),n&&eR(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Wbe(t){var e=Hbe(t,"string");return wg(e)=="symbol"?e:e+""}function Hbe(t,e){if(wg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var tR=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,nR=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Kbe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,qbe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,VB={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Gbe=Object.keys(VB),of="NaN";function Ybe(t,e){return t*VB[e]}var _y=function(){function t(e,n){Bbe(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!Kbe.test(n)&&(this.num=NaN,this.unit=""),Gbe.includes(n)&&(this.num=Ybe(e,n),this.unit="px")}return Ube(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=qbe.exec(n))!==null&&r!==void 0?r:[],s=Nb(i,3),a=s[1],o=s[2];return new t(parseFloat(a),o??"")}}])}();function BB(t){if(t.includes(of))return of;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=tR.exec(e))!==null&&n!==void 0?n:[],i=Nb(r,4),s=i[1],a=i[2],o=i[3],c=_y.parse(s??""),u=_y.parse(o??""),d=a==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return of;e=e.replace(tR,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,h=(f=nR.exec(e))!==null&&f!==void 0?f:[],p=Nb(h,4),g=p[1],m=p[2],y=p[3],x=_y.parse(g??""),w=_y.parse(y??""),_=m==="+"?x.add(w):x.subtract(w);if(_.isNaN())return of;e=e.replace(nR,_.toString())}return e}var rR=/\(([^()]*)\)/;function Qbe(t){for(var e=t;e.includes("(");){var n=rR.exec(e),r=Nb(n,2),i=r[1];e=e.replace(rR,BB(i))}return e}function Xbe(t){var e=t.replace(/\s+/g,"");return e=Qbe(e),e=BB(e),e}function Zbe(t){try{return Xbe(t)}catch{return of}}function X_(t){var e=Zbe(t.slice(5,-1));return e===of?"":e}var Jbe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],exe=["dx","dy","angle","className","breakAll"];function ZE(){return ZE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZE.apply(this,arguments)}function iR(t,e){if(t==null)return{};var n=txe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function txe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function sR(t,e){return sxe(t)||ixe(t,e)||rxe(t,e)||nxe()}function nxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rxe(t,e){if(t){if(typeof t=="string")return aR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aR(t,e)}}function aR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ixe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function sxe(t){if(Array.isArray(t))return t}var UB=/[ \f\n\r\t\v\u2028\u2029]+/,WB=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var s=[];_t(n)||(r?s=n.toString().split(""):s=n.toString().split(UB));var a=s.map(function(c){return{word:c,width:_m(c,i).width}}),o=r?0:_m(" ",i).width;return{wordsWithComputedWidth:a,spaceWidth:o}}catch{return null}},axe=function(e,n,r,i,s){var a=e.maxLines,o=e.children,c=e.style,u=e.breakAll,d=Ie(a),f=o,h=function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return X.reduce(function(W,U){var $=U.word,Y=U.width,Q=W[W.length-1];if(Q&&(i==null||s||Q.width+Y+r<Number(i)))Q.words.push($),Q.width+=Y+r;else{var ce={words:[$],width:Y};W.push(ce)}return W},[])},p=h(n),g=function(X){return X.reduce(function(W,U){return W.width>U.width?W:U})};if(!d)return p;for(var m="…",y=function(X){var W=f.slice(0,X),U=WB({breakAll:u,style:c,children:W+m}).wordsWithComputedWidth,$=h(U),Y=$.length>a||g($).width>Number(i);return[Y,$]},x=0,w=f.length-1,_=0,A;x<=w&&_<=f.length-1;){var E=Math.floor((x+w)/2),C=E-1,j=y(C),T=sR(j,2),P=T[0],I=T[1],M=y(E),F=sR(M,1),R=F[0];if(!P&&!R&&(x=E+1),P&&R&&(w=E-1),!P&&R){A=I;break}_++}return A||p},oR=function(e){var n=_t(e)?[]:e.toString().split(UB);return[{words:n}]},oxe=function(e){var n=e.width,r=e.scaleToFit,i=e.children,s=e.style,a=e.breakAll,o=e.maxLines;if((n||r)&&!uc.isSsr){var c,u,d=WB({breakAll:a,children:i,style:s});if(d){var f=d.wordsWithComputedWidth,h=d.spaceWidth;c=f,u=h}else return oR(i);return axe({breakAll:a,children:i,maxLines:o,style:s},c,u,n,r)}return oR(i)},lR="#808080",zu=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,s=i===void 0?0:i,a=e.lineHeight,o=a===void 0?"1em":a,c=e.capHeight,u=c===void 0?"0.71em":c,d=e.scaleToFit,f=d===void 0?!1:d,h=e.textAnchor,p=h===void 0?"start":h,g=e.verticalAnchor,m=g===void 0?"end":g,y=e.fill,x=y===void 0?lR:y,w=iR(e,Jbe),_=N.useMemo(function(){return oxe({breakAll:w.breakAll,children:w.children,maxLines:w.maxLines,scaleToFit:f,style:w.style,width:w.width})},[w.breakAll,w.children,w.maxLines,f,w.style,w.width]),A=w.dx,E=w.dy,C=w.angle,j=w.className,T=w.breakAll,P=iR(w,exe);if(!Ar(r)||!Ar(s))return null;var I=r+(Ie(A)?A:0),M=s+(Ie(E)?E:0),F;switch(m){case"start":F=X_("calc(".concat(u,")"));break;case"middle":F=X_("calc(".concat((_.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:F=X_("calc(".concat(_.length-1," * -").concat(o,")"));break}var R=[];if(f){var H=_[0].width,X=w.width;R.push("scale(".concat((Ie(X)?X/H:1)/H,")"))}return C&&R.push("rotate(".concat(C,", ").concat(I,", ").concat(M,")")),R.length&&(P.transform=R.join(" ")),q.createElement("text",ZE({},lt(P,!0),{x:I,y:M,className:Tt("recharts-text",j),textAnchor:p,fill:x.includes("url")?lR:x}),_.map(function(W,U){var $=W.words.join(T?"":" ");return q.createElement("tspan",{x:I,dy:U===0?F:o,key:"".concat($,"-").concat(U)},$)}))};function Ul(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function lxe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function bN(t){let e,n,r;t.length!==2?(e=Ul,n=(o,c)=>Ul(t(o),c),r=(o,c)=>t(o)-c):(e=t===Ul||t===lxe?t:cxe,n=t,r=t);function i(o,c,u=0,d=o.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;n(o[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(o,c,u=0,d=o.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;n(o[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function a(o,c,u=0,d=o.length){const f=i(o,c,u,d-1);return f>u&&r(o[f-1],c)>-r(o[f],c)?f-1:f}return{left:i,center:a,right:s}}function cxe(){return 0}function HB(t){return t===null?NaN:+t}function*uxe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const dxe=bN(Ul),Cv=dxe.right;bN(HB).center;class cR extends Map{constructor(e,n=pxe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(uR(this,e))}has(e){return super.has(uR(this,e))}set(e,n){return super.set(fxe(this,e),n)}delete(e){return super.delete(hxe(this,e))}}function uR({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function fxe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function hxe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function pxe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function mxe(t=Ul){if(t===Ul)return KB;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function KB(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const gxe=Math.sqrt(50),vxe=Math.sqrt(10),yxe=Math.sqrt(2);function Pb(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=gxe?10:s>=vxe?5:s>=yxe?2:1;let o,c,u;return i<0?(u=Math.pow(10,-i)/a,o=Math.round(t*u),c=Math.round(e*u),o/u<t&&++o,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*a,o=Math.round(t/u),c=Math.round(e/u),o*u<t&&++o,c*u>e&&--c),c<o&&.5<=n&&n<2?Pb(t,e,n*2):[o,c,u]}function JE(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,a]=r?Pb(e,t,n):Pb(t,e,n);if(!(s>=i))return[];const o=s-i+1,c=new Array(o);if(r)if(a<0)for(let u=0;u<o;++u)c[u]=(s-u)/-a;else for(let u=0;u<o;++u)c[u]=(s-u)*a;else if(a<0)for(let u=0;u<o;++u)c[u]=(i+u)/-a;else for(let u=0;u<o;++u)c[u]=(i+u)*a;return c}function e2(t,e,n){return e=+e,t=+t,n=+n,Pb(t,e,n)[2]}function t2(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?e2(e,t,n):e2(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function dR(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function fR(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function qB(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?KB:mxe(i);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),p=Math.max(n,Math.floor(e-u*f/c+h)),g=Math.min(r,Math.floor(e+(c-u)*f/c+h));qB(t,e,p,g,i)}const s=t[e];let a=n,o=r;for(Op(t,n,e),i(t[r],s)>0&&Op(t,n,r);a<o;){for(Op(t,a,o),++a,--o;i(t[a],s)<0;)++a;for(;i(t[o],s)>0;)--o}i(t[n],s)===0?Op(t,n,o):(++o,Op(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function Op(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function bxe(t,e,n){if(t=Float64Array.from(uxe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return fR(t);if(e>=1)return dR(t);var r,i=(r-1)*e,s=Math.floor(i),a=dR(qB(t,s).subarray(0,s+1)),o=fR(t.subarray(s+1));return a+(o-a)*(i-s)}}function xxe(t,e,n=HB){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),a=+n(t[s],s,t),o=+n(t[s+1],s+1,t);return a+(o-a)*(i-s)}}function wxe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function $s(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Go(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const n2=Symbol("implicit");function xN(){var t=new cR,e=[],n=[],r=n2;function i(s){let a=t.get(s);if(a===void 0){if(r!==n2)return r;t.set(s,a=e.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new cR;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return xN(e,n).unknown(r)},$s.apply(i,arguments),i}function _g(){var t=xN().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,a,o=!1,c=0,u=0,d=.5;delete t.unknown;function f(){var h=e().length,p=i<r,g=p?i:r,m=p?r:i;s=(m-g)/Math.max(1,h-c+u*2),o&&(s=Math.floor(s)),g+=(m-g-s*(h-c))*d,a=s*(1-c),o&&(g=Math.round(g),a=Math.round(a));var y=wxe(h).map(function(x){return g+s*x});return n(p?y.reverse():y)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,o=!0,f()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(h){return arguments.length?(o=!!h,f()):o},t.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},t.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},t.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},t.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},t.copy=function(){return _g(e(),[r,i]).round(o).paddingInner(c).paddingOuter(u).align(d)},$s.apply(f(),arguments)}function GB(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return GB(e())},t}function Sm(){return GB(_g.apply(null,arguments).paddingInner(1))}function wN(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function YB(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Tv(){}var Sg=.7,kb=1/Sg,Af="\\s*([+-]?\\d+)\\s*",Ag="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ha="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_xe=/^#([0-9a-f]{3,8})$/,Sxe=new RegExp(`^rgb\\(${Af},${Af},${Af}\\)$`),Axe=new RegExp(`^rgb\\(${Ha},${Ha},${Ha}\\)$`),Exe=new RegExp(`^rgba\\(${Af},${Af},${Af},${Ag}\\)$`),jxe=new RegExp(`^rgba\\(${Ha},${Ha},${Ha},${Ag}\\)$`),Cxe=new RegExp(`^hsl\\(${Ag},${Ha},${Ha}\\)$`),Txe=new RegExp(`^hsla\\(${Ag},${Ha},${Ha},${Ag}\\)$`),hR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};wN(Tv,Eg,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:pR,formatHex:pR,formatHex8:Nxe,formatHsl:Pxe,formatRgb:mR,toString:mR});function pR(){return this.rgb().formatHex()}function Nxe(){return this.rgb().formatHex8()}function Pxe(){return QB(this).formatHsl()}function mR(){return this.rgb().formatRgb()}function Eg(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=_xe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?gR(e):n===3?new Li(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Sy(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Sy(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Sxe.exec(t))?new Li(e[1],e[2],e[3],1):(e=Axe.exec(t))?new Li(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Exe.exec(t))?Sy(e[1],e[2],e[3],e[4]):(e=jxe.exec(t))?Sy(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Cxe.exec(t))?bR(e[1],e[2]/100,e[3]/100,1):(e=Txe.exec(t))?bR(e[1],e[2]/100,e[3]/100,e[4]):hR.hasOwnProperty(t)?gR(hR[t]):t==="transparent"?new Li(NaN,NaN,NaN,0):null}function gR(t){return new Li(t>>16&255,t>>8&255,t&255,1)}function Sy(t,e,n,r){return r<=0&&(t=e=n=NaN),new Li(t,e,n,r)}function kxe(t){return t instanceof Tv||(t=Eg(t)),t?(t=t.rgb(),new Li(t.r,t.g,t.b,t.opacity)):new Li}function r2(t,e,n,r){return arguments.length===1?kxe(t):new Li(t,e,n,r??1)}function Li(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}wN(Li,r2,YB(Tv,{brighter(t){return t=t==null?kb:Math.pow(kb,t),new Li(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Sg:Math.pow(Sg,t),new Li(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Li(xu(this.r),xu(this.g),xu(this.b),Db(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vR,formatHex:vR,formatHex8:Dxe,formatRgb:yR,toString:yR}));function vR(){return`#${ou(this.r)}${ou(this.g)}${ou(this.b)}`}function Dxe(){return`#${ou(this.r)}${ou(this.g)}${ou(this.b)}${ou((isNaN(this.opacity)?1:this.opacity)*255)}`}function yR(){const t=Db(this.opacity);return`${t===1?"rgb(":"rgba("}${xu(this.r)}, ${xu(this.g)}, ${xu(this.b)}${t===1?")":`, ${t})`}`}function Db(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function xu(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ou(t){return t=xu(t),(t<16?"0":"")+t.toString(16)}function bR(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new na(t,e,n,r)}function QB(t){if(t instanceof na)return new na(t.h,t.s,t.l,t.opacity);if(t instanceof Tv||(t=Eg(t)),!t)return new na;if(t instanceof na)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,o=s-i,c=(s+i)/2;return o?(e===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-e)/o+2:a=(e-n)/o+4,o/=c<.5?s+i:2-s-i,a*=60):o=c>0&&c<1?0:a,new na(a,o,c,t.opacity)}function Ixe(t,e,n,r){return arguments.length===1?QB(t):new na(t,e,n,r??1)}function na(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}wN(na,Ixe,YB(Tv,{brighter(t){return t=t==null?kb:Math.pow(kb,t),new na(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Sg:Math.pow(Sg,t),new na(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Li(Z_(t>=240?t-240:t+120,i,r),Z_(t,i,r),Z_(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new na(xR(this.h),Ay(this.s),Ay(this.l),Db(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Db(this.opacity);return`${t===1?"hsl(":"hsla("}${xR(this.h)}, ${Ay(this.s)*100}%, ${Ay(this.l)*100}%${t===1?")":`, ${t})`}`}}));function xR(t){return t=(t||0)%360,t<0?t+360:t}function Ay(t){return Math.max(0,Math.min(1,t||0))}function Z_(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const _N=t=>()=>t;function Oxe(t,e){return function(n){return t+n*e}}function Mxe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Rxe(t){return(t=+t)==1?XB:function(e,n){return n-e?Mxe(e,n,t):_N(isNaN(e)?n:e)}}function XB(t,e){var n=e-t;return n?Oxe(t,n):_N(isNaN(t)?e:t)}const wR=function t(e){var n=Rxe(e);function r(i,s){var a=n((i=r2(i)).r,(s=r2(s)).r),o=n(i.g,s.g),c=n(i.b,s.b),u=XB(i.opacity,s.opacity);return function(d){return i.r=a(d),i.g=o(d),i.b=c(d),i.opacity=u(d),i+""}}return r.gamma=t,r}(1);function Lxe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function zxe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function $xe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=Xh(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function Fxe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Ib(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Vxe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Xh(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var i2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,J_=new RegExp(i2.source,"g");function Bxe(t){return function(){return t}}function Uxe(t){return function(e){return t(e)+""}}function Wxe(t,e){var n=i2.lastIndex=J_.lastIndex=0,r,i,s,a=-1,o=[],c=[];for(t=t+"",e=e+"";(r=i2.exec(t))&&(i=J_.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,c.push({i:a,x:Ib(r,i)})),n=J_.lastIndex;return n<e.length&&(s=e.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?c[0]?Uxe(c[0].x):Bxe(e):(e=c.length,function(u){for(var d=0,f;d<e;++d)o[(f=c[d]).i]=f.x(u);return o.join("")})}function Xh(t,e){var n=typeof e,r;return e==null||n==="boolean"?_N(e):(n==="number"?Ib:n==="string"?(r=Eg(e))?(e=r,wR):Wxe:e instanceof Eg?wR:e instanceof Date?Fxe:zxe(e)?Lxe:Array.isArray(e)?$xe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Vxe:Ib)(t,e)}function SN(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Hxe(t,e){e===void 0&&(e=t,t=Xh);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(a){var o=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return s[o](a-o)}}function Kxe(t){return function(){return t}}function Ob(t){return+t}var _R=[0,1];function Ei(t){return t}function s2(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Kxe(isNaN(e)?NaN:.5)}function qxe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Gxe(t,e,n){var r=t[0],i=t[1],s=e[0],a=e[1];return i<r?(r=s2(i,r),s=n(a,s)):(r=s2(r,i),s=n(s,a)),function(o){return s(r(o))}}function Yxe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=s2(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(o){var c=Cv(t,o,1,r)-1;return s[c](i[c](o))}}function Nv(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Yw(){var t=_R,e=_R,n=Xh,r,i,s,a=Ei,o,c,u;function d(){var h=Math.min(t.length,e.length);return a!==Ei&&(a=qxe(t[0],t[h-1])),o=h>2?Yxe:Gxe,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(c||(c=o(t.map(r),e,n)))(r(a(h)))}return f.invert=function(h){return a(i((u||(u=o(e,t.map(r),Ib)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,Ob),d()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),d()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=SN,d()},f.clamp=function(h){return arguments.length?(a=h?!0:Ei,d()):a!==Ei},f.interpolate=function(h){return arguments.length?(n=h,d()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,p){return r=h,i=p,d()}}function AN(){return Yw()(Ei,Ei)}function Qxe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Mb(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function sh(t){return t=Mb(Math.abs(t)),t?t[1]:NaN}function Xxe(t,e){return function(n,r){for(var i=n.length,s=[],a=0,o=t[0],c=0;i>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),s.push(n.substring(i-=o,i+o)),!((c+=o+1)>r));)o=t[a=(a+1)%t.length];return s.reverse().join(e)}}function Zxe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Jxe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function jg(t){if(!(e=Jxe.exec(t)))throw new Error("invalid format: "+t);var e;return new EN({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}jg.prototype=EN.prototype;function EN(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}EN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ewe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var ZB;function twe(t,e){var n=Mb(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(ZB=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Mb(t,Math.max(0,e+s-1))[0]}function SR(t,e){var n=Mb(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const AR={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Qxe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>SR(t*100,e),r:SR,s:twe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ER(t){return t}var jR=Array.prototype.map,CR=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function nwe(t){var e=t.grouping===void 0||t.thousands===void 0?ER:Xxe(jR.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?ER:Zxe(jR.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(f){f=jg(f);var h=f.fill,p=f.align,g=f.sign,m=f.symbol,y=f.zero,x=f.width,w=f.comma,_=f.precision,A=f.trim,E=f.type;E==="n"?(w=!0,E="g"):AR[E]||(_===void 0&&(_=12),A=!0,E="g"),(y||h==="0"&&p==="=")&&(y=!0,h="0",p="=");var C=m==="$"?n:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",j=m==="$"?r:/[%p]/.test(E)?a:"",T=AR[E],P=/[defgprs%]/.test(E);_=_===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function I(M){var F=C,R=j,H,X,W;if(E==="c")R=T(M)+R,M="";else{M=+M;var U=M<0||1/M<0;if(M=isNaN(M)?c:T(Math.abs(M),_),A&&(M=ewe(M)),U&&+M==0&&g!=="+"&&(U=!1),F=(U?g==="("?g:o:g==="-"||g==="("?"":g)+F,R=(E==="s"?CR[8+ZB/3]:"")+R+(U&&g==="("?")":""),P){for(H=-1,X=M.length;++H<X;)if(W=M.charCodeAt(H),48>W||W>57){R=(W===46?i+M.slice(H+1):M.slice(H))+R,M=M.slice(0,H);break}}}w&&!y&&(M=e(M,1/0));var $=F.length+M.length+R.length,Y=$<x?new Array(x-$+1).join(h):"";switch(w&&y&&(M=e(Y+M,Y.length?x-R.length:1/0),Y=""),p){case"<":M=F+M+R+Y;break;case"=":M=F+Y+M+R;break;case"^":M=Y.slice(0,$=Y.length>>1)+F+M+R+Y.slice($);break;default:M=Y+F+M+R;break}return s(M)}return I.toString=function(){return f+""},I}function d(f,h){var p=u((f=jg(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(sh(h)/3)))*3,m=Math.pow(10,-g),y=CR[8+g/3];return function(x){return p(m*x)+y}}return{format:u,formatPrefix:d}}var Ey,jN,JB;rwe({thousands:",",grouping:[3],currency:["$",""]});function rwe(t){return Ey=nwe(t),jN=Ey.format,JB=Ey.formatPrefix,Ey}function iwe(t){return Math.max(0,-sh(Math.abs(t)))}function swe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(sh(e)/3)))*3-sh(Math.abs(t)))}function awe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,sh(e)-sh(t))+1}function e9(t,e,n,r){var i=t2(t,e,n),s;switch(r=jg(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=swe(i,a))&&(r.precision=s),JB(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=awe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=iwe(i))&&(r.precision=s-(r.type==="%")*2);break}}return jN(r)}function dc(t){var e=t.domain;return t.ticks=function(n){var r=e();return JE(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return e9(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,a=r[i],o=r[s],c,u,d=10;for(o<a&&(u=a,a=o,o=u,u=i,i=s,s=u);d-- >0;){if(u=e2(a,o,n),u===c)return r[i]=a,r[s]=o,e(r);if(u>0)a=Math.floor(a/u)*u,o=Math.ceil(o/u)*u;else if(u<0)a=Math.ceil(a*u)/u,o=Math.floor(o*u)/u;else break;c=u}return t},t}function Rb(){var t=AN();return t.copy=function(){return Nv(t,Rb())},$s.apply(t,arguments),dc(t)}function t9(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Ob),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return t9(t).unknown(e)},t=arguments.length?Array.from(t,Ob):[0,1],dc(n)}function n9(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],a;return s<i&&(a=n,n=r,r=a,a=i,i=s,s=a),t[n]=e.floor(i),t[r]=e.ceil(s),t}function TR(t){return Math.log(t)}function NR(t){return Math.exp(t)}function owe(t){return-Math.log(-t)}function lwe(t){return-Math.exp(-t)}function cwe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function uwe(t){return t===10?cwe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function dwe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function PR(t){return(e,n)=>-t(-e,n)}function CN(t){const e=t(TR,NR),n=e.domain;let r=10,i,s;function a(){return i=dwe(r),s=uwe(r),n()[0]<0?(i=PR(i),s=PR(s),t(owe,lwe)):t(TR,NR),e}return e.base=function(o){return arguments.length?(r=+o,a()):r},e.domain=function(o){return arguments.length?(n(o),a()):n()},e.ticks=o=>{const c=n();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=i(u),p=i(d),g,m;const y=o==null?10:+o;let x=[];if(!(r%1)&&p-h<y){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(g=1;g<r;++g)if(m=h<0?g/s(-h):g*s(h),!(m<u)){if(m>d)break;x.push(m)}}else for(;h<=p;++h)for(g=r-1;g>=1;--g)if(m=h>0?g/s(-h):g*s(h),!(m<u)){if(m>d)break;x.push(m)}x.length*2<y&&(x=JE(u,d,y))}else x=JE(h,p,Math.min(p-h,y)).map(s);return f?x.reverse():x},e.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=jg(c)).precision==null&&(c.trim=!0),c=jN(c)),o===1/0)return c;const u=Math.max(1,r*o/e.ticks().length);return d=>{let f=d/s(Math.round(i(d)));return f*r<r-.5&&(f*=r),f<=u?c(d):""}},e.nice=()=>n(n9(n(),{floor:o=>s(Math.floor(i(o))),ceil:o=>s(Math.ceil(i(o)))})),e}function r9(){const t=CN(Yw()).domain([1,10]);return t.copy=()=>Nv(t,r9()).base(t.base()),$s.apply(t,arguments),t}function kR(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function DR(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function TN(t){var e=1,n=t(kR(e),DR(e));return n.constant=function(r){return arguments.length?t(kR(e=+r),DR(e)):e},dc(n)}function i9(){var t=TN(Yw());return t.copy=function(){return Nv(t,i9()).constant(t.constant())},$s.apply(t,arguments)}function IR(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function fwe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function hwe(t){return t<0?-t*t:t*t}function NN(t){var e=t(Ei,Ei),n=1;function r(){return n===1?t(Ei,Ei):n===.5?t(fwe,hwe):t(IR(n),IR(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},dc(e)}function PN(){var t=NN(Yw());return t.copy=function(){return Nv(t,PN()).exponent(t.exponent())},$s.apply(t,arguments),t}function pwe(){return PN.apply(null,arguments).exponent(.5)}function OR(t){return Math.sign(t)*t*t}function mwe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function s9(){var t=AN(),e=[0,1],n=!1,r;function i(s){var a=mwe(t(s));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(s){return t.invert(OR(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,Ob)).map(OR)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return s9(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},$s.apply(i,arguments),dc(i)}function a9(){var t=[],e=[],n=[],r;function i(){var a=0,o=Math.max(1,e.length);for(n=new Array(o-1);++a<o;)n[a-1]=xxe(t,a/o);return s}function s(a){return a==null||isNaN(a=+a)?r:e[Cv(n,a)]}return s.invertExtent=function(a){var o=e.indexOf(a);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let o of a)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(Ul),i()},s.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return a9().domain(t).range(e).unknown(r)},$s.apply(s,arguments)}function o9(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function a(c){return c!=null&&c<=c?i[Cv(r,c,0,n)]:s}function o(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return a}return a.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,o()):[t,e]},a.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,o()):i.slice()},a.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},a.unknown=function(c){return arguments.length&&(s=c),a},a.thresholds=function(){return r.slice()},a.copy=function(){return o9().domain([t,e]).range(i).unknown(s)},$s.apply(dc(a),arguments)}function l9(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[Cv(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var a=e.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return l9().domain(t).range(e).unknown(n)},$s.apply(i,arguments)}const eS=new Date,tS=new Date;function jr(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,o)=>{const c=[];if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return c;let u;do c.push(u=new Date(+s)),e(s,o),t(s);while(u<s&&s<a);return c},i.filter=s=>jr(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!s(a););else for(;--o>=0;)for(;e(a,1),!s(a););}),n&&(i.count=(s,a)=>(eS.setTime(+s),tS.setTime(+a),t(eS),t(tS),Math.floor(n(eS,tS))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?a=>r(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const Lb=jr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Lb.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?jr(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Lb);Lb.range;const _o=1e3,ks=_o*60,So=ks*60,$o=So*24,kN=$o*7,MR=$o*30,nS=$o*365,lu=jr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*_o)},(t,e)=>(e-t)/_o,t=>t.getUTCSeconds());lu.range;const DN=jr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*_o)},(t,e)=>{t.setTime(+t+e*ks)},(t,e)=>(e-t)/ks,t=>t.getMinutes());DN.range;const IN=jr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ks)},(t,e)=>(e-t)/ks,t=>t.getUTCMinutes());IN.range;const ON=jr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*_o-t.getMinutes()*ks)},(t,e)=>{t.setTime(+t+e*So)},(t,e)=>(e-t)/So,t=>t.getHours());ON.range;const MN=jr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*So)},(t,e)=>(e-t)/So,t=>t.getUTCHours());MN.range;const Pv=jr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ks)/$o,t=>t.getDate()-1);Pv.range;const Qw=jr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/$o,t=>t.getUTCDate()-1);Qw.range;const c9=jr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/$o,t=>Math.floor(t/$o));c9.range;function id(t){return jr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ks)/kN)}const Xw=id(0),zb=id(1),gwe=id(2),vwe=id(3),ah=id(4),ywe=id(5),bwe=id(6);Xw.range;zb.range;gwe.range;vwe.range;ah.range;ywe.range;bwe.range;function sd(t){return jr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/kN)}const Zw=sd(0),$b=sd(1),xwe=sd(2),wwe=sd(3),oh=sd(4),_we=sd(5),Swe=sd(6);Zw.range;$b.range;xwe.range;wwe.range;oh.range;_we.range;Swe.range;const RN=jr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());RN.range;const LN=jr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());LN.range;const Fo=jr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Fo.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:jr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Fo.range;const Vo=jr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Vo.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:jr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Vo.range;function u9(t,e,n,r,i,s){const a=[[lu,1,_o],[lu,5,5*_o],[lu,15,15*_o],[lu,30,30*_o],[s,1,ks],[s,5,5*ks],[s,15,15*ks],[s,30,30*ks],[i,1,So],[i,3,3*So],[i,6,6*So],[i,12,12*So],[r,1,$o],[r,2,2*$o],[n,1,kN],[e,1,MR],[e,3,3*MR],[t,1,nS]];function o(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const p=f&&typeof f.range=="function"?f:c(u,d,f),g=p?p.range(u,+d+1):[];return h?g.reverse():g}function c(u,d,f){const h=Math.abs(d-u)/f,p=bN(([,,y])=>y).right(a,h);if(p===a.length)return t.every(t2(u/nS,d/nS,f));if(p===0)return Lb.every(Math.max(t2(u,d,f),1));const[g,m]=a[h/a[p-1][2]<a[p][2]/h?p-1:p];return g.every(m)}return[o,c]}const[Awe,Ewe]=u9(Vo,LN,Zw,c9,MN,IN),[jwe,Cwe]=u9(Fo,RN,Xw,Pv,ON,DN);function rS(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function iS(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Mp(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Twe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,a=t.shortDays,o=t.months,c=t.shortMonths,u=Rp(i),d=Lp(i),f=Rp(s),h=Lp(s),p=Rp(a),g=Lp(a),m=Rp(o),y=Lp(o),x=Rp(c),w=Lp(c),_={a:U,A:$,b:Y,B:Q,c:null,d:VR,e:VR,f:Xwe,g:o1e,G:c1e,H:Gwe,I:Ywe,j:Qwe,L:d9,m:Zwe,M:Jwe,p:ce,q:ie,Q:WR,s:HR,S:e1e,u:t1e,U:n1e,V:r1e,w:i1e,W:s1e,x:null,X:null,y:a1e,Y:l1e,Z:u1e,"%":UR},A={a:oe,A:ve,b:je,B:Se,c:null,d:BR,e:BR,f:p1e,g:A1e,G:j1e,H:d1e,I:f1e,j:h1e,L:h9,m:m1e,M:g1e,p:Me,q:Qe,Q:WR,s:HR,S:v1e,u:y1e,U:b1e,V:x1e,w:w1e,W:_1e,x:null,X:null,y:S1e,Y:E1e,Z:C1e,"%":UR},E={a:I,A:M,b:F,B:R,c:H,d:$R,e:$R,f:Wwe,g:zR,G:LR,H:FR,I:FR,j:Fwe,L:Uwe,m:$we,M:Vwe,p:P,q:zwe,Q:Kwe,s:qwe,S:Bwe,u:Iwe,U:Owe,V:Mwe,w:Dwe,W:Rwe,x:X,X:W,y:zR,Y:LR,Z:Lwe,"%":Hwe};_.x=C(n,_),_.X=C(r,_),_.c=C(e,_),A.x=C(n,A),A.X=C(r,A),A.c=C(e,A);function C(me,Ye){return function(Xe){var te=[],Te=-1,ot=0,Ct=me.length,nt,st,Xt;for(Xe instanceof Date||(Xe=new Date(+Xe));++Te<Ct;)me.charCodeAt(Te)===37&&(te.push(me.slice(ot,Te)),(st=RR[nt=me.charAt(++Te)])!=null?nt=me.charAt(++Te):st=nt==="e"?" ":"0",(Xt=Ye[nt])&&(nt=Xt(Xe,st)),te.push(nt),ot=Te+1);return te.push(me.slice(ot,Te)),te.join("")}}function j(me,Ye){return function(Xe){var te=Mp(1900,void 0,1),Te=T(te,me,Xe+="",0),ot,Ct;if(Te!=Xe.length)return null;if("Q"in te)return new Date(te.Q);if("s"in te)return new Date(te.s*1e3+("L"in te?te.L:0));if(Ye&&!("Z"in te)&&(te.Z=0),"p"in te&&(te.H=te.H%12+te.p*12),te.m===void 0&&(te.m="q"in te?te.q:0),"V"in te){if(te.V<1||te.V>53)return null;"w"in te||(te.w=1),"Z"in te?(ot=iS(Mp(te.y,0,1)),Ct=ot.getUTCDay(),ot=Ct>4||Ct===0?$b.ceil(ot):$b(ot),ot=Qw.offset(ot,(te.V-1)*7),te.y=ot.getUTCFullYear(),te.m=ot.getUTCMonth(),te.d=ot.getUTCDate()+(te.w+6)%7):(ot=rS(Mp(te.y,0,1)),Ct=ot.getDay(),ot=Ct>4||Ct===0?zb.ceil(ot):zb(ot),ot=Pv.offset(ot,(te.V-1)*7),te.y=ot.getFullYear(),te.m=ot.getMonth(),te.d=ot.getDate()+(te.w+6)%7)}else("W"in te||"U"in te)&&("w"in te||(te.w="u"in te?te.u%7:"W"in te?1:0),Ct="Z"in te?iS(Mp(te.y,0,1)).getUTCDay():rS(Mp(te.y,0,1)).getDay(),te.m=0,te.d="W"in te?(te.w+6)%7+te.W*7-(Ct+5)%7:te.w+te.U*7-(Ct+6)%7);return"Z"in te?(te.H+=te.Z/100|0,te.M+=te.Z%100,iS(te)):rS(te)}}function T(me,Ye,Xe,te){for(var Te=0,ot=Ye.length,Ct=Xe.length,nt,st;Te<ot;){if(te>=Ct)return-1;if(nt=Ye.charCodeAt(Te++),nt===37){if(nt=Ye.charAt(Te++),st=E[nt in RR?Ye.charAt(Te++):nt],!st||(te=st(me,Xe,te))<0)return-1}else if(nt!=Xe.charCodeAt(te++))return-1}return te}function P(me,Ye,Xe){var te=u.exec(Ye.slice(Xe));return te?(me.p=d.get(te[0].toLowerCase()),Xe+te[0].length):-1}function I(me,Ye,Xe){var te=p.exec(Ye.slice(Xe));return te?(me.w=g.get(te[0].toLowerCase()),Xe+te[0].length):-1}function M(me,Ye,Xe){var te=f.exec(Ye.slice(Xe));return te?(me.w=h.get(te[0].toLowerCase()),Xe+te[0].length):-1}function F(me,Ye,Xe){var te=x.exec(Ye.slice(Xe));return te?(me.m=w.get(te[0].toLowerCase()),Xe+te[0].length):-1}function R(me,Ye,Xe){var te=m.exec(Ye.slice(Xe));return te?(me.m=y.get(te[0].toLowerCase()),Xe+te[0].length):-1}function H(me,Ye,Xe){return T(me,e,Ye,Xe)}function X(me,Ye,Xe){return T(me,n,Ye,Xe)}function W(me,Ye,Xe){return T(me,r,Ye,Xe)}function U(me){return a[me.getDay()]}function $(me){return s[me.getDay()]}function Y(me){return c[me.getMonth()]}function Q(me){return o[me.getMonth()]}function ce(me){return i[+(me.getHours()>=12)]}function ie(me){return 1+~~(me.getMonth()/3)}function oe(me){return a[me.getUTCDay()]}function ve(me){return s[me.getUTCDay()]}function je(me){return c[me.getUTCMonth()]}function Se(me){return o[me.getUTCMonth()]}function Me(me){return i[+(me.getUTCHours()>=12)]}function Qe(me){return 1+~~(me.getUTCMonth()/3)}return{format:function(me){var Ye=C(me+="",_);return Ye.toString=function(){return me},Ye},parse:function(me){var Ye=j(me+="",!1);return Ye.toString=function(){return me},Ye},utcFormat:function(me){var Ye=C(me+="",A);return Ye.toString=function(){return me},Ye},utcParse:function(me){var Ye=j(me+="",!0);return Ye.toString=function(){return me},Ye}}}var RR={"-":"",_:" ",0:"0"},zr=/^\s*\d+/,Nwe=/^%/,Pwe=/[\\^$*+?|[\]().{}]/g;function Qt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function kwe(t){return t.replace(Pwe,"\\$&")}function Rp(t){return new RegExp("^(?:"+t.map(kwe).join("|")+")","i")}function Lp(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Dwe(t,e,n){var r=zr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Iwe(t,e,n){var r=zr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Owe(t,e,n){var r=zr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Mwe(t,e,n){var r=zr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Rwe(t,e,n){var r=zr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function LR(t,e,n){var r=zr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function zR(t,e,n){var r=zr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Lwe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function zwe(t,e,n){var r=zr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function $we(t,e,n){var r=zr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function $R(t,e,n){var r=zr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Fwe(t,e,n){var r=zr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function FR(t,e,n){var r=zr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Vwe(t,e,n){var r=zr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Bwe(t,e,n){var r=zr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Uwe(t,e,n){var r=zr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Wwe(t,e,n){var r=zr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Hwe(t,e,n){var r=Nwe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Kwe(t,e,n){var r=zr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function qwe(t,e,n){var r=zr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function VR(t,e){return Qt(t.getDate(),e,2)}function Gwe(t,e){return Qt(t.getHours(),e,2)}function Ywe(t,e){return Qt(t.getHours()%12||12,e,2)}function Qwe(t,e){return Qt(1+Pv.count(Fo(t),t),e,3)}function d9(t,e){return Qt(t.getMilliseconds(),e,3)}function Xwe(t,e){return d9(t,e)+"000"}function Zwe(t,e){return Qt(t.getMonth()+1,e,2)}function Jwe(t,e){return Qt(t.getMinutes(),e,2)}function e1e(t,e){return Qt(t.getSeconds(),e,2)}function t1e(t){var e=t.getDay();return e===0?7:e}function n1e(t,e){return Qt(Xw.count(Fo(t)-1,t),e,2)}function f9(t){var e=t.getDay();return e>=4||e===0?ah(t):ah.ceil(t)}function r1e(t,e){return t=f9(t),Qt(ah.count(Fo(t),t)+(Fo(t).getDay()===4),e,2)}function i1e(t){return t.getDay()}function s1e(t,e){return Qt(zb.count(Fo(t)-1,t),e,2)}function a1e(t,e){return Qt(t.getFullYear()%100,e,2)}function o1e(t,e){return t=f9(t),Qt(t.getFullYear()%100,e,2)}function l1e(t,e){return Qt(t.getFullYear()%1e4,e,4)}function c1e(t,e){var n=t.getDay();return t=n>=4||n===0?ah(t):ah.ceil(t),Qt(t.getFullYear()%1e4,e,4)}function u1e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Qt(e/60|0,"0",2)+Qt(e%60,"0",2)}function BR(t,e){return Qt(t.getUTCDate(),e,2)}function d1e(t,e){return Qt(t.getUTCHours(),e,2)}function f1e(t,e){return Qt(t.getUTCHours()%12||12,e,2)}function h1e(t,e){return Qt(1+Qw.count(Vo(t),t),e,3)}function h9(t,e){return Qt(t.getUTCMilliseconds(),e,3)}function p1e(t,e){return h9(t,e)+"000"}function m1e(t,e){return Qt(t.getUTCMonth()+1,e,2)}function g1e(t,e){return Qt(t.getUTCMinutes(),e,2)}function v1e(t,e){return Qt(t.getUTCSeconds(),e,2)}function y1e(t){var e=t.getUTCDay();return e===0?7:e}function b1e(t,e){return Qt(Zw.count(Vo(t)-1,t),e,2)}function p9(t){var e=t.getUTCDay();return e>=4||e===0?oh(t):oh.ceil(t)}function x1e(t,e){return t=p9(t),Qt(oh.count(Vo(t),t)+(Vo(t).getUTCDay()===4),e,2)}function w1e(t){return t.getUTCDay()}function _1e(t,e){return Qt($b.count(Vo(t)-1,t),e,2)}function S1e(t,e){return Qt(t.getUTCFullYear()%100,e,2)}function A1e(t,e){return t=p9(t),Qt(t.getUTCFullYear()%100,e,2)}function E1e(t,e){return Qt(t.getUTCFullYear()%1e4,e,4)}function j1e(t,e){var n=t.getUTCDay();return t=n>=4||n===0?oh(t):oh.ceil(t),Qt(t.getUTCFullYear()%1e4,e,4)}function C1e(){return"+0000"}function UR(){return"%"}function WR(t){return+t}function HR(t){return Math.floor(+t/1e3)}var Dd,m9,g9;T1e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function T1e(t){return Dd=Twe(t),m9=Dd.format,Dd.parse,g9=Dd.utcFormat,Dd.utcParse,Dd}function N1e(t){return new Date(t)}function P1e(t){return t instanceof Date?+t:+new Date(+t)}function zN(t,e,n,r,i,s,a,o,c,u){var d=AN(),f=d.invert,h=d.domain,p=u(".%L"),g=u(":%S"),m=u("%I:%M"),y=u("%I %p"),x=u("%a %d"),w=u("%b %d"),_=u("%B"),A=u("%Y");function E(C){return(c(C)<C?p:o(C)<C?g:a(C)<C?m:s(C)<C?y:r(C)<C?i(C)<C?x:w:n(C)<C?_:A)(C)}return d.invert=function(C){return new Date(f(C))},d.domain=function(C){return arguments.length?h(Array.from(C,P1e)):h().map(N1e)},d.ticks=function(C){var j=h();return t(j[0],j[j.length-1],C??10)},d.tickFormat=function(C,j){return j==null?E:u(j)},d.nice=function(C){var j=h();return(!C||typeof C.range!="function")&&(C=e(j[0],j[j.length-1],C??10)),C?h(n9(j,C)):d},d.copy=function(){return Nv(d,zN(t,e,n,r,i,s,a,o,c,u))},d}function k1e(){return $s.apply(zN(jwe,Cwe,Fo,RN,Xw,Pv,ON,DN,lu,m9).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function D1e(){return $s.apply(zN(Awe,Ewe,Vo,LN,Zw,Qw,MN,IN,lu,g9).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Jw(){var t=0,e=1,n,r,i,s,a=Ei,o=!1,c;function u(f){return f==null||isNaN(f=+f)?c:a(i===0?.5:(f=(s(f)-n)*i,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(a=f,u):a};function d(f){return function(h){var p,g;return arguments.length?([p,g]=h,a=f(p,g),u):[a(0),a(1)]}}return u.range=d(Xh),u.rangeRound=d(SN),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),u}}function fc(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function v9(){var t=dc(Jw()(Ei));return t.copy=function(){return fc(t,v9())},Go.apply(t,arguments)}function y9(){var t=CN(Jw()).domain([1,10]);return t.copy=function(){return fc(t,y9()).base(t.base())},Go.apply(t,arguments)}function b9(){var t=TN(Jw());return t.copy=function(){return fc(t,b9()).constant(t.constant())},Go.apply(t,arguments)}function $N(){var t=NN(Jw());return t.copy=function(){return fc(t,$N()).exponent(t.exponent())},Go.apply(t,arguments)}function I1e(){return $N.apply(null,arguments).exponent(.5)}function x9(){var t=[],e=Ei;function n(r){if(r!=null&&!isNaN(r=+r))return e((Cv(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Ul),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>bxe(t,s/r))},n.copy=function(){return x9(e).domain(t)},Go.apply(n,arguments)}function e1(){var t=0,e=.5,n=1,r=1,i,s,a,o,c,u=Ei,d,f=!1,h;function p(m){return isNaN(m=+m)?h:(m=.5+((m=+d(m))-s)*(r*m<r*s?o:c),u(f?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([t,e,n]=m,i=d(t=+t),s=d(e=+e),a=d(n=+n),o=i===s?0:.5/(s-i),c=s===a?0:.5/(a-s),r=s<i?-1:1,p):[t,e,n]},p.clamp=function(m){return arguments.length?(f=!!m,p):f},p.interpolator=function(m){return arguments.length?(u=m,p):u};function g(m){return function(y){var x,w,_;return arguments.length?([x,w,_]=y,u=Hxe(m,[x,w,_]),p):[u(0),u(.5),u(1)]}}return p.range=g(Xh),p.rangeRound=g(SN),p.unknown=function(m){return arguments.length?(h=m,p):h},function(m){return d=m,i=m(t),s=m(e),a=m(n),o=i===s?0:.5/(s-i),c=s===a?0:.5/(a-s),r=s<i?-1:1,p}}function w9(){var t=dc(e1()(Ei));return t.copy=function(){return fc(t,w9())},Go.apply(t,arguments)}function _9(){var t=CN(e1()).domain([.1,1,10]);return t.copy=function(){return fc(t,_9()).base(t.base())},Go.apply(t,arguments)}function S9(){var t=TN(e1());return t.copy=function(){return fc(t,S9()).constant(t.constant())},Go.apply(t,arguments)}function FN(){var t=NN(e1());return t.copy=function(){return fc(t,FN()).exponent(t.exponent())},Go.apply(t,arguments)}function O1e(){return FN.apply(null,arguments).exponent(.5)}const KR=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:_g,scaleDiverging:w9,scaleDivergingLog:_9,scaleDivergingPow:FN,scaleDivergingSqrt:O1e,scaleDivergingSymlog:S9,scaleIdentity:t9,scaleImplicit:n2,scaleLinear:Rb,scaleLog:r9,scaleOrdinal:xN,scalePoint:Sm,scalePow:PN,scaleQuantile:a9,scaleQuantize:o9,scaleRadial:s9,scaleSequential:v9,scaleSequentialLog:y9,scaleSequentialPow:$N,scaleSequentialQuantile:x9,scaleSequentialSqrt:I1e,scaleSequentialSymlog:b9,scaleSqrt:pwe,scaleSymlog:i9,scaleThreshold:l9,scaleTime:k1e,scaleUtc:D1e,tickFormat:e9},Symbol.toStringTag,{value:"Module"}));var M1e=Bh;function R1e(t,e,n){for(var r=-1,i=t.length;++r<i;){var s=t[r],a=e(s);if(a!=null&&(o===void 0?a===a&&!M1e(a):n(a,o)))var o=a,c=s}return c}var t1=R1e;function L1e(t,e){return t>e}var A9=L1e,z1e=t1,$1e=A9,F1e=Qh;function V1e(t){return t&&t.length?z1e(t,F1e,$1e):void 0}var B1e=V1e;const Cl=tn(B1e);function U1e(t,e){return t<e}var E9=U1e,W1e=t1,H1e=E9,K1e=Qh;function q1e(t){return t&&t.length?W1e(t,K1e,H1e):void 0}var G1e=q1e;const n1=tn(G1e);var Y1e=eN,Q1e=eo,X1e=IB,Z1e=Ki;function J1e(t,e){var n=Z1e(t)?Y1e:X1e;return n(t,Q1e(e))}var e_e=J1e,t_e=kB,n_e=e_e;function r_e(t,e){return t_e(n_e(t,e),1)}var i_e=r_e;const s_e=tn(i_e);var a_e=mN;function o_e(t,e){return a_e(t,e)}var l_e=o_e;const $u=tn(l_e);var Zh=1e9,c_e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},BN,Dn=!0,Rs="[DecimalError] ",wu=Rs+"Invalid argument: ",VN=Rs+"Exponent out of range: ",Jh=Math.floor,qc=Math.pow,u_e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,es,kr=1e7,jn=7,j9=9007199254740991,Fb=Jh(j9/jn),tt={};tt.absoluteValue=tt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};tt.comparedTo=tt.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};tt.decimalPlaces=tt.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*jn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};tt.dividedBy=tt.div=function(t){return No(this,new this.constructor(t))};tt.dividedToIntegerBy=tt.idiv=function(t){var e=this,n=e.constructor;return mn(No(e,new n(t),0,1),n.precision)};tt.equals=tt.eq=function(t){return!this.cmp(t)};tt.exponent=function(){return mr(this)};tt.greaterThan=tt.gt=function(t){return this.cmp(t)>0};tt.greaterThanOrEqualTo=tt.gte=function(t){return this.cmp(t)>=0};tt.isInteger=tt.isint=function(){return this.e>this.d.length-2};tt.isNegative=tt.isneg=function(){return this.s<0};tt.isPositive=tt.ispos=function(){return this.s>0};tt.isZero=function(){return this.s===0};tt.lessThan=tt.lt=function(t){return this.cmp(t)<0};tt.lessThanOrEqualTo=tt.lte=function(t){return this.cmp(t)<1};tt.logarithm=tt.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(es))throw Error(Rs+"NaN");if(n.s<1)throw Error(Rs+(n.s?"NaN":"-Infinity"));return n.eq(es)?new r(0):(Dn=!1,e=No(Cg(n,s),Cg(t,s),s),Dn=!0,mn(e,i))};tt.minus=tt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?N9(e,t):C9(e,(t.s=-t.s,t))};tt.modulo=tt.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Rs+"NaN");return n.s?(Dn=!1,e=No(n,t,0,1).times(t),Dn=!0,n.minus(e)):mn(new r(n),i)};tt.naturalExponential=tt.exp=function(){return T9(this)};tt.naturalLogarithm=tt.ln=function(){return Cg(this)};tt.negated=tt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};tt.plus=tt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?C9(e,t):N9(e,(t.s=-t.s,t))};tt.precision=tt.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(wu+t);if(e=mr(i)+1,r=i.d.length-1,n=r*jn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};tt.squareRoot=tt.sqrt=function(){var t,e,n,r,i,s,a,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Rs+"NaN")}for(t=mr(o),Dn=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=Ra(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Jh((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=a=n+3;;)if(s=r,r=s.plus(No(o,s,a+2)).times(.5),Ra(s.d).slice(0,a)===(e=Ra(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(mn(s,n+1,0),s.times(s).eq(o)){r=s;break}}else if(e!="9999")break;a+=4}return Dn=!0,mn(r,n)};tt.times=tt.mul=function(t){var e,n,r,i,s,a,o,c,u,d=this,f=d.constructor,h=d.d,p=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,n=d.e+t.e,c=h.length,u=p.length,c<u&&(s=h,h=p,p=s,a=c,c=u,u=a),s=[],a=c+u,r=a;r--;)s.push(0);for(r=u;--r>=0;){for(e=0,i=c+r;i>r;)o=s[i]+p[r]*h[i-r-1]+e,s[i--]=o%kr|0,e=o/kr|0;s[i]=(s[i]+e)%kr|0}for(;!s[--a];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,Dn?mn(t,f.precision):t};tt.toDecimalPlaces=tt.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Ya(t,0,Zh),e===void 0?e=r.rounding:Ya(e,0,8),mn(n,t+mr(n)+1,e))};tt.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Fu(r,!0):(Ya(t,0,Zh),e===void 0?e=i.rounding:Ya(e,0,8),r=mn(new i(r),t+1,e),n=Fu(r,!0,t+1)),n};tt.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?Fu(i):(Ya(t,0,Zh),e===void 0?e=s.rounding:Ya(e,0,8),r=mn(new s(i),t+mr(i)+1,e),n=Fu(r.abs(),!1,t+mr(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};tt.toInteger=tt.toint=function(){var t=this,e=t.constructor;return mn(new e(t),mr(t)+1,e.rounding)};tt.toNumber=function(){return+this};tt.toPower=tt.pow=function(t){var e,n,r,i,s,a,o=this,c=o.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(es);if(o=new c(o),!o.s){if(t.s<1)throw Error(Rs+"Infinity");return o}if(o.eq(es))return o;if(r=c.precision,t.eq(es))return mn(o,r);if(e=t.e,n=t.d.length-1,a=e>=n,s=o.s,a){if((n=d<0?-d:d)<=j9){for(i=new c(es),e=Math.ceil(r/jn+4),Dn=!1;n%2&&(i=i.times(o),GR(i.d,e)),n=Jh(n/2),n!==0;)o=o.times(o),GR(o.d,e);return Dn=!0,t.s<0?new c(es).div(i):mn(i,r)}}else if(s<0)throw Error(Rs+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,Dn=!1,i=t.times(Cg(o,r+u)),Dn=!0,i=T9(i),i.s=s,i};tt.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=mr(i),r=Fu(i,n<=s.toExpNeg||n>=s.toExpPos)):(Ya(t,1,Zh),e===void 0?e=s.rounding:Ya(e,0,8),i=mn(new s(i),t,e),n=mr(i),r=Fu(i,t<=n||n<=s.toExpNeg,t)),r};tt.toSignificantDigits=tt.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Ya(t,1,Zh),e===void 0?e=r.rounding:Ya(e,0,8)),mn(new r(n),t,e)};tt.toString=tt.valueOf=tt.val=tt.toJSON=tt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=mr(t),n=t.constructor;return Fu(t,e<=n.toExpNeg||e>=n.toExpPos)};function C9(t,e){var n,r,i,s,a,o,c,u,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),Dn?mn(e,f):e;if(c=t.d,u=e.d,a=t.e,i=e.e,c=c.slice(),s=a-i,s){for(s<0?(r=c,s=-s,o=u.length):(r=u,i=a,o=c.length),a=Math.ceil(f/jn),o=a>o?a+1:o+1,s>o&&(s=o,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(o=c.length,s=u.length,o-s<0&&(s=o,r=u,u=c,c=r),n=0;s;)n=(c[--s]=c[s]+u[s]+n)/kr|0,c[s]%=kr;for(n&&(c.unshift(n),++i),o=c.length;c[--o]==0;)c.pop();return e.d=c,e.e=i,Dn?mn(e,f):e}function Ya(t,e,n){if(t!==~~t||t<e||t>n)throw Error(wu+t)}function Ra(t){var e,n,r,i=t.length-1,s="",a=t[0];if(i>0){for(s+=a,e=1;e<i;e++)r=t[e]+"",n=jn-r.length,n&&(s+=bl(n)),s+=r;a=t[e],r=a+"",n=jn-r.length,n&&(s+=bl(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var No=function(){function t(r,i){var s,a=0,o=r.length;for(r=r.slice();o--;)s=r[o]*i+a,r[o]=s%kr|0,a=s/kr|0;return a&&r.unshift(a),r}function e(r,i,s,a){var o,c;if(s!=a)c=s>a?1:-1;else for(o=c=0;o<s;o++)if(r[o]!=i[o]){c=r[o]>i[o]?1:-1;break}return c}function n(r,i,s){for(var a=0;s--;)r[s]-=a,a=r[s]<i[s]?1:0,r[s]=a*kr+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,a){var o,c,u,d,f,h,p,g,m,y,x,w,_,A,E,C,j,T,P=r.constructor,I=r.s==i.s?1:-1,M=r.d,F=i.d;if(!r.s)return new P(r);if(!i.s)throw Error(Rs+"Division by zero");for(c=r.e-i.e,j=F.length,E=M.length,p=new P(I),g=p.d=[],u=0;F[u]==(M[u]||0);)++u;if(F[u]>(M[u]||0)&&--c,s==null?w=s=P.precision:a?w=s+(mr(r)-mr(i))+1:w=s,w<0)return new P(0);if(w=w/jn+2|0,u=0,j==1)for(d=0,F=F[0],w++;(u<E||d)&&w--;u++)_=d*kr+(M[u]||0),g[u]=_/F|0,d=_%F|0;else{for(d=kr/(F[0]+1)|0,d>1&&(F=t(F,d),M=t(M,d),j=F.length,E=M.length),A=j,m=M.slice(0,j),y=m.length;y<j;)m[y++]=0;T=F.slice(),T.unshift(0),C=F[0],F[1]>=kr/2&&++C;do d=0,o=e(F,m,j,y),o<0?(x=m[0],j!=y&&(x=x*kr+(m[1]||0)),d=x/C|0,d>1?(d>=kr&&(d=kr-1),f=t(F,d),h=f.length,y=m.length,o=e(f,m,h,y),o==1&&(d--,n(f,j<h?T:F,h))):(d==0&&(o=d=1),f=F.slice()),h=f.length,h<y&&f.unshift(0),n(m,f,y),o==-1&&(y=m.length,o=e(F,m,j,y),o<1&&(d++,n(m,j<y?T:F,y))),y=m.length):o===0&&(d++,m=[0]),g[u++]=d,o&&m[0]?m[y++]=M[A]||0:(m=[M[A]],y=1);while((A++<E||m[0]!==void 0)&&w--)}return g[0]||g.shift(),p.e=c,mn(p,a?s+mr(p)+1:s)}}();function T9(t,e){var n,r,i,s,a,o,c=0,u=0,d=t.constructor,f=d.precision;if(mr(t)>16)throw Error(VN+mr(t));if(!t.s)return new d(es);for(Dn=!1,o=f,a=new d(.03125);t.abs().gte(.1);)t=t.times(a),u+=5;for(r=Math.log(qc(2,u))/Math.LN10*2+5|0,o+=r,n=i=s=new d(es),d.precision=o;;){if(i=mn(i.times(t),o),n=n.times(++c),a=s.plus(No(i,n,o)),Ra(a.d).slice(0,o)===Ra(s.d).slice(0,o)){for(;u--;)s=mn(s.times(s),o);return d.precision=f,e==null?(Dn=!0,mn(s,f)):s}s=a}}function mr(t){for(var e=t.e*jn,n=t.d[0];n>=10;n/=10)e++;return e}function sS(t,e,n){if(e>t.LN10.sd())throw Dn=!0,n&&(t.precision=n),Error(Rs+"LN10 precision limit exceeded");return mn(new t(t.LN10),e)}function bl(t){for(var e="";t--;)e+="0";return e}function Cg(t,e){var n,r,i,s,a,o,c,u,d,f=1,h=10,p=t,g=p.d,m=p.constructor,y=m.precision;if(p.s<1)throw Error(Rs+(p.s?"NaN":"-Infinity"));if(p.eq(es))return new m(0);if(e==null?(Dn=!1,u=y):u=e,p.eq(10))return e==null&&(Dn=!0),sS(m,u);if(u+=h,m.precision=u,n=Ra(g),r=n.charAt(0),s=mr(p),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(t),n=Ra(p.d),r=n.charAt(0),f++;s=mr(p),r>1?(p=new m("0."+n),s++):p=new m(r+"."+n.slice(1))}else return c=sS(m,u+2,y).times(s+""),p=Cg(new m(r+"."+n.slice(1)),u-h).plus(c),m.precision=y,e==null?(Dn=!0,mn(p,y)):p;for(o=a=p=No(p.minus(es),p.plus(es),u),d=mn(p.times(p),u),i=3;;){if(a=mn(a.times(d),u),c=o.plus(No(a,new m(i),u)),Ra(c.d).slice(0,u)===Ra(o.d).slice(0,u))return o=o.times(2),s!==0&&(o=o.plus(sS(m,u+2,y).times(s+""))),o=No(o,new m(f),u),m.precision=y,e==null?(Dn=!0,mn(o,y)):o;o=c,i+=2}}function qR(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Jh(n/jn),t.d=[],r=(n+1)%jn,n<0&&(r+=jn),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=jn;r<i;)t.d.push(+e.slice(r,r+=jn));e=e.slice(r),r=jn-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Dn&&(t.e>Fb||t.e<-Fb))throw Error(VN+n)}else t.s=0,t.e=0,t.d=[0];return t}function mn(t,e,n){var r,i,s,a,o,c,u,d,f=t.d;for(a=1,s=f[0];s>=10;s/=10)a++;if(r=e-a,r<0)r+=jn,i=e,u=f[d=0];else{if(d=Math.ceil((r+1)/jn),s=f.length,d>=s)return t;for(u=s=f[d],a=1;s>=10;s/=10)a++;r%=jn,i=r-jn+a}if(n!==void 0&&(s=qc(10,a-i-1),o=u/s%10|0,c=e<0||f[d+1]!==void 0||u%s,c=n<4?(o||c)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||c||n==6&&(r>0?i>0?u/qc(10,a-i):0:f[d-1])%10&1||n==(t.s<0?8:7))),e<1||!f[0])return c?(s=mr(t),f.length=1,e=e-s-1,f[0]=qc(10,(jn-e%jn)%jn),t.e=Jh(-e/jn)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(r==0?(f.length=d,s=1,d--):(f.length=d+1,s=qc(10,jn-r),f[d]=i>0?(u/qc(10,a-i)%qc(10,i)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==kr&&(f[0]=1,++t.e);break}else{if(f[d]+=s,f[d]!=kr)break;f[d--]=0,s=1}for(r=f.length;f[--r]===0;)f.pop();if(Dn&&(t.e>Fb||t.e<-Fb))throw Error(VN+mr(t));return t}function N9(t,e){var n,r,i,s,a,o,c,u,d,f,h=t.constructor,p=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),Dn?mn(e,p):e;if(c=t.d,f=e.d,r=e.e,u=t.e,c=c.slice(),a=u-r,a){for(d=a<0,d?(n=c,a=-a,o=f.length):(n=f,r=u,o=c.length),i=Math.max(Math.ceil(p/jn),o)+2,a>i&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for(i=c.length,o=f.length,d=i<o,d&&(o=i),i=0;i<o;i++)if(c[i]!=f[i]){d=c[i]<f[i];break}a=0}for(d&&(n=c,c=f,f=n,e.s=-e.s),o=c.length,i=f.length-o;i>0;--i)c[o++]=0;for(i=f.length;i>a;){if(c[--i]<f[i]){for(s=i;s&&c[--s]===0;)c[s]=kr-1;--c[s],c[i]+=kr}c[i]-=f[i]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,Dn?mn(e,p):e):new h(0)}function Fu(t,e,n){var r,i=mr(t),s=Ra(t.d),a=s.length;return e?(n&&(r=n-a)>0?s=s.charAt(0)+"."+s.slice(1)+bl(r):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+bl(-i-1)+s,n&&(r=n-a)>0&&(s+=bl(r))):i>=a?(s+=bl(i+1-a),n&&(r=n-i-1)>0&&(s=s+"."+bl(r))):((r=i+1)<a&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(s+="."),s+=bl(r))),t.s<0?"-"+s:s}function GR(t,e){if(t.length>e)return t.length=e,!0}function P9(t){var e,n,r;function i(s){var a=this;if(!(a instanceof i))return new i(s);if(a.constructor=i,s instanceof i){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(wu+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return qR(a,s.toString())}else if(typeof s!="string")throw Error(wu+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,u_e.test(s))qR(a,s);else throw Error(wu+s)}if(i.prototype=tt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=P9,i.config=i.set=d_e,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function d_e(t){if(!t||typeof t!="object")throw Error(Rs+"Object expected");var e,n,r,i=["precision",1,Zh,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Jh(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(wu+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(wu+n+": "+r);return this}var BN=P9(c_e);es=new BN(1);const dn=BN;function f_e(t){return g_e(t)||m_e(t)||p_e(t)||h_e()}function h_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p_e(t,e){if(t){if(typeof t=="string")return a2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a2(t,e)}}function m_e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function g_e(t){if(Array.isArray(t))return a2(t)}function a2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var v_e=function(e){return e},k9={},D9=function(e){return e===k9},YR=function(e){return function n(){return arguments.length===0||arguments.length===1&&D9(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},y_e=function t(e,n){return e===1?n:YR(function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var a=i.filter(function(o){return o!==k9}).length;return a>=e?n.apply(void 0,i):t(e-a,YR(function(){for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];var d=i.map(function(f){return D9(f)?c.shift():f});return n.apply(void 0,f_e(d).concat(c))}))})},r1=function(e){return y_e(e.length,e)},o2=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},b_e=r1(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),x_e=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return v_e;var i=n.reverse(),s=i[0],a=i.slice(1);return function(){return a.reduce(function(o,c){return c(o)},s.apply(void 0,arguments))}},l2=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},I9=function(e){var n=null,r=null;return function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n&&s.every(function(o,c){return o===n[c]})||(n=s,r=e.apply(void 0,s)),r}};function w_e(t){var e;return t===0?e=1:e=Math.floor(new dn(t).abs().log(10).toNumber())+1,e}function __e(t,e,n){for(var r=new dn(t),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}var S_e=r1(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),A_e=r1(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),E_e=r1(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const i1={rangeStep:__e,getDigitCount:w_e,interpolateNumber:S_e,uninterpolateNumber:A_e,uninterpolateTruncation:E_e};function c2(t){return T_e(t)||C_e(t)||O9(t)||j_e()}function j_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C_e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function T_e(t){if(Array.isArray(t))return u2(t)}function Tg(t,e){return k_e(t)||P_e(t,e)||O9(t,e)||N_e()}function N_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O9(t,e){if(t){if(typeof t=="string")return u2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u2(t,e)}}function u2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function P_e(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,s=void 0;try{for(var a=t[Symbol.iterator](),o;!(r=(o=a.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(c){i=!0,s=c}finally{try{!r&&a.return!=null&&a.return()}finally{if(i)throw s}}return n}}function k_e(t){if(Array.isArray(t))return t}function M9(t){var e=Tg(t,2),n=e[0],r=e[1],i=n,s=r;return n>r&&(i=r,s=n),[i,s]}function R9(t,e,n){if(t.lte(0))return new dn(0);var r=i1.getDigitCount(t.toNumber()),i=new dn(10).pow(r),s=t.div(i),a=r!==1?.05:.1,o=new dn(Math.ceil(s.div(a).toNumber())).add(n).mul(a),c=o.mul(i);return e?c:new dn(Math.ceil(c))}function D_e(t,e,n){var r=1,i=new dn(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(r=new dn(10).pow(i1.getDigitCount(t)-1),i=new dn(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new dn(Math.floor(t)))}else t===0?i=new dn(Math.floor((e-1)/2)):n||(i=new dn(Math.floor(t)));var a=Math.floor((e-1)/2),o=x_e(b_e(function(c){return i.add(new dn(c-a).mul(r)).toNumber()}),o2);return o(0,e)}function L9(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new dn(0),tickMin:new dn(0),tickMax:new dn(0)};var s=R9(new dn(e).sub(t).div(n-1),r,i),a;t<=0&&e>=0?a=new dn(0):(a=new dn(t).add(e).div(2),a=a.sub(new dn(a).mod(s)));var o=Math.ceil(a.sub(t).div(s).toNumber()),c=Math.ceil(new dn(e).sub(a).div(s).toNumber()),u=o+c+1;return u>n?L9(t,e,n,r,i+1):(u<n&&(c=e>0?c+(n-u):c,o=e>0?o:o+(n-u)),{step:s,tickMin:a.sub(new dn(o).mul(s)),tickMax:a.add(new dn(c).mul(s))})}function I_e(t){var e=Tg(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),o=M9([n,r]),c=Tg(o,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(c2(o2(0,i-1).map(function(){return 1/0}))):[].concat(c2(o2(0,i-1).map(function(){return-1/0})),[d]);return n>r?l2(f):f}if(u===d)return D_e(u,i,s);var h=L9(u,d,a,s),p=h.step,g=h.tickMin,m=h.tickMax,y=i1.rangeStep(g,m.add(new dn(.1).mul(p)),p);return n>r?l2(y):y}function O_e(t,e){var n=Tg(t,2),r=n[0],i=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=M9([r,i]),o=Tg(a,2),c=o[0],u=o[1];if(c===-1/0||u===1/0)return[r,i];if(c===u)return[c];var d=Math.max(e,2),f=R9(new dn(u).sub(c).div(d-1),s,0),h=[].concat(c2(i1.rangeStep(new dn(c),new dn(u).sub(new dn(.99).mul(f)),f)),[u]);return r>i?l2(h):h}var M_e=I9(I_e),R_e=I9(O_e),L_e="Invariant failed";function Vu(t,e){throw new Error(L_e)}var z_e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function lh(t){"@babel/helpers - typeof";return lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lh(t)}function Vb(){return Vb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vb.apply(this,arguments)}function $_e(t,e){return U_e(t)||B_e(t,e)||V_e(t,e)||F_e()}function F_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V_e(t,e){if(t){if(typeof t=="string")return QR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QR(t,e)}}function QR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function B_e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function U_e(t){if(Array.isArray(t))return t}function W_e(t,e){if(t==null)return{};var n=H_e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function H_e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function K_e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function q_e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,F9(r.key),r)}}function G_e(t,e,n){return e&&q_e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Y_e(t,e,n){return e=Bb(e),Q_e(t,z9()?Reflect.construct(e,n||[],Bb(t).constructor):e.apply(t,n))}function Q_e(t,e){if(e&&(lh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return X_e(t)}function X_e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function z9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(z9=function(){return!!t})()}function Bb(t){return Bb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Bb(t)}function Z_e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d2(t,e)}function d2(t,e){return d2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},d2(t,e)}function $9(t,e,n){return e=F9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function F9(t){var e=J_e(t,"string");return lh(e)=="symbol"?e:e+""}function J_e(t,e){if(lh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(lh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var kv=function(t){function e(){return K_e(this,e),Y_e(this,e,arguments)}return Z_e(e,t),G_e(e,[{key:"render",value:function(){var r=this.props,i=r.offset,s=r.layout,a=r.width,o=r.dataKey,c=r.data,u=r.dataPointFormatter,d=r.xAxis,f=r.yAxis,h=W_e(r,z_e),p=lt(h,!1);this.props.direction==="x"&&d.type!=="number"&&Vu();var g=c.map(function(m){var y=u(m,o),x=y.x,w=y.y,_=y.value,A=y.errorVal;if(!A)return null;var E=[],C,j;if(Array.isArray(A)){var T=$_e(A,2);C=T[0],j=T[1]}else C=j=A;if(s==="vertical"){var P=d.scale,I=w+i,M=I+a,F=I-a,R=P(_-C),H=P(_+j);E.push({x1:H,y1:M,x2:H,y2:F}),E.push({x1:R,y1:I,x2:H,y2:I}),E.push({x1:R,y1:M,x2:R,y2:F})}else if(s==="horizontal"){var X=f.scale,W=x+i,U=W-a,$=W+a,Y=X(_-C),Q=X(_+j);E.push({x1:U,y1:Q,x2:$,y2:Q}),E.push({x1:W,y1:Y,x2:W,y2:Q}),E.push({x1:U,y1:Y,x2:$,y2:Y})}return q.createElement(Ot,Vb({className:"recharts-errorBar",key:"bar-".concat(E.map(function(ce){return"".concat(ce.x1,"-").concat(ce.x2,"-").concat(ce.y1,"-").concat(ce.y2)}))},p),E.map(function(ce){return q.createElement("line",Vb({},ce,{key:"line-".concat(ce.x1,"-").concat(ce.x2,"-").concat(ce.y1,"-").concat(ce.y2)}))}))});return q.createElement(Ot,{className:"recharts-errorBars"},g)}}])}(q.Component);$9(kv,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});$9(kv,"displayName","ErrorBar");function Ng(t){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ng(t)}function XR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Lc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XR(Object(n),!0).forEach(function(r){eSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eSe(t,e,n){return e=tSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tSe(t){var e=nSe(t,"string");return Ng(e)=="symbol"?e:e+""}function nSe(t,e){if(Ng(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ng(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var V9=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,s=e.legendContent,a=Ji(n,aa);if(!a)return null;var o=aa.defaultProps,c=o!==void 0?Lc(Lc({},o),a.props):{},u;return a.props&&a.props.payload?u=a.props&&a.props.payload:s==="children"?u=(r||[]).reduce(function(d,f){var h=f.item,p=f.props,g=p.sectors||p.data||[];return d.concat(g.map(function(m){return{type:a.props.iconType||h.props.legendType,value:m.name,color:m.fill,payload:m}}))},[]):u=(r||[]).map(function(d){var f=d.item,h=f.type.defaultProps,p=h!==void 0?Lc(Lc({},h),f.props):{},g=p.dataKey,m=p.name,y=p.legendType,x=p.hide;return{inactive:x,dataKey:g,type:c.iconType||y||"square",color:UN(f),value:m||g,payload:p}}),Lc(Lc(Lc({},c),aa.getWithHeight(a,i)),{},{payload:u,item:a})};function Pg(t){"@babel/helpers - typeof";return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pg(t)}function ZR(t){return aSe(t)||sSe(t)||iSe(t)||rSe()}function rSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iSe(t,e){if(t){if(typeof t=="string")return f2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f2(t,e)}}function sSe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function aSe(t){if(Array.isArray(t))return f2(t)}function f2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function JR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JR(Object(n),!0).forEach(function(r){Ef(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ef(t,e,n){return e=oSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oSe(t){var e=lSe(t,"string");return Pg(e)=="symbol"?e:e+""}function lSe(t,e){if(Pg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Pg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rr(t,e,n){return _t(t)||_t(e)?n:Ar(e)?os(t,e,n):vt(e)?e(t):n}function Am(t,e,n,r){var i=s_e(t,function(o){return rr(o,e)});if(n==="number"){var s=i.filter(function(o){return Ie(o)||parseFloat(o)});return s.length?[n1(s),Cl(s)]:[1/0,-1/0]}var a=r?i.filter(function(o){return!_t(o)}):i;return a.map(function(o){return Ar(o)||o instanceof Date?o:""})}var cSe=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,a=-1,o=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(o<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,u=0;u<o;u++){var d=u>0?i[u-1].coordinate:i[o-1].coordinate,f=i[u].coordinate,h=u>=o-1?i[0].coordinate:i[u+1].coordinate,p=void 0;if(Si(f-d)!==Si(h-f)){var g=[];if(Si(h-f)===Si(c[1]-c[0])){p=h;var m=f+c[1]-c[0];g[0]=Math.min(m,(m+d)/2),g[1]=Math.max(m,(m+d)/2)}else{p=d;var y=h+c[1]-c[0];g[0]=Math.min(f,(y+f)/2),g[1]=Math.max(f,(y+f)/2)}var x=[Math.min(f,(p+f)/2),Math.max(f,(p+f)/2)];if(e>x[0]&&e<=x[1]||e>=g[0]&&e<=g[1]){a=i[u].index;break}}else{var w=Math.min(d,h),_=Math.max(d,h);if(e>(w+f)/2&&e<=(_+f)/2){a=i[u].index;break}}}else for(var A=0;A<o;A++)if(A===0&&e<=(r[A].coordinate+r[A+1].coordinate)/2||A>0&&A<o-1&&e>(r[A].coordinate+r[A-1].coordinate)/2&&e<=(r[A].coordinate+r[A+1].coordinate)/2||A===o-1&&e>(r[A].coordinate+r[A-1].coordinate)/2){a=r[A].index;break}return a},UN=function(e){var n,r=e,i=r.type.displayName,s=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Kn(Kn({},e.type.defaultProps),e.props):e.props,a=s.stroke,o=s.fill,c;switch(i){case"Line":c=a;break;case"Area":case"Radar":c=a&&a!=="none"?a:o;break;default:c=o;break}return c},uSe=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var a={},o=Object.keys(s),c=0,u=o.length;c<u;c++)for(var d=s[o[c]].stackGroups,f=Object.keys(d),h=0,p=f.length;h<p;h++){var g=d[f[h]],m=g.items,y=g.cateAxisId,x=m.filter(function(j){return To(j.type).indexOf("Bar")>=0});if(x&&x.length){var w=x[0].type.defaultProps,_=w!==void 0?Kn(Kn({},w),x[0].props):x[0].props,A=_.barSize,E=_[y];a[E]||(a[E]=[]);var C=_t(A)?n:A;a[E].push({item:x[0],stackList:x.slice(1),barSize:_t(C)?void 0:Ai(C,r,0)})}}return a},dSe=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,s=e.sizeList,a=s===void 0?[]:s,o=e.maxBarSize,c=a.length;if(c<1)return null;var u=Ai(n,i,0,!0),d,f=[];if(a[0].barSize===+a[0].barSize){var h=!1,p=i/c,g=a.reduce(function(A,E){return A+E.barSize||0},0);g+=(c-1)*u,g>=i&&(g-=(c-1)*u,u=0),g>=i&&p>0&&(h=!0,p*=.9,g=c*p);var m=(i-g)/2>>0,y={offset:m-u,size:0};d=a.reduce(function(A,E){var C={item:E.item,position:{offset:y.offset+y.size+u,size:h?p:E.barSize}},j=[].concat(ZR(A),[C]);return y=j[j.length-1].position,E.stackList&&E.stackList.length&&E.stackList.forEach(function(T){j.push({item:T,position:y})}),j},f)}else{var x=Ai(r,i,0,!0);i-2*x-(c-1)*u<=0&&(u=0);var w=(i-2*x-(c-1)*u)/c;w>1&&(w>>=0);var _=o===+o?Math.min(w,o):w;d=a.reduce(function(A,E,C){var j=[].concat(ZR(A),[{item:E.item,position:{offset:x+(w+u)*C+(w-_)/2,size:_}}]);return E.stackList&&E.stackList.length&&E.stackList.forEach(function(T){j.push({item:T,position:j[j.length-1].position})}),j},f)}return d},fSe=function(e,n,r,i){var s=r.children,a=r.width,o=r.margin,c=a-(o.left||0)-(o.right||0),u=V9({children:s,legendWidth:c});if(u){var d=i||{},f=d.width,h=d.height,p=u.align,g=u.verticalAlign,m=u.layout;if((m==="vertical"||m==="horizontal"&&g==="middle")&&p!=="center"&&Ie(e[p]))return Kn(Kn({},e),{},Ef({},p,e[p]+(f||0)));if((m==="horizontal"||m==="vertical"&&p==="center")&&g!=="middle"&&Ie(e[g]))return Kn(Kn({},e),{},Ef({},g,e[g]+(h||0)))}return e},hSe=function(e,n,r){return _t(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},B9=function(e,n,r,i,s){var a=n.props.children,o=ls(a,kv).filter(function(u){return hSe(i,s,u.props.direction)});if(o&&o.length){var c=o.map(function(u){return u.props.dataKey});return e.reduce(function(u,d){var f=rr(d,r);if(_t(f))return u;var h=Array.isArray(f)?[n1(f),Cl(f)]:[f,f],p=c.reduce(function(g,m){var y=rr(d,m,0),x=h[0]-Math.abs(Array.isArray(y)?y[0]:y),w=h[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(x,g[0]),Math.max(w,g[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},pSe=function(e,n,r,i,s){var a=n.map(function(o){return B9(e,o,r,s,i)}).filter(function(o){return!_t(o)});return a&&a.length?a.reduce(function(o,c){return[Math.min(o[0],c[0]),Math.max(o[1],c[1])]},[1/0,-1/0]):null},U9=function(e,n,r,i,s){var a=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&B9(e,c,u,i)||Am(e,u,r,s)});if(r==="number")return a.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var o={};return a.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)o[u[d]]||(o[u[d]]=!0,c.push(u[d]));return c},[])},W9=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},H9=function(e,n,r,i){if(i)return e.map(function(c){return c.coordinate});var s,a,o=e.map(function(c){return c.coordinate===n&&(s=!0),c.coordinate===r&&(a=!0),c.coordinate});return s||o.push(n),a||o.push(r),o},Ao=function(e,n,r){if(!e)return null;var i=e.scale,s=e.duplicateDomain,a=e.type,o=e.range,c=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||r)&&a==="category"&&i.bandwidth?i.bandwidth()/c:0;if(u=e.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?Si(o[0]-o[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(f){var h=s?s.indexOf(f):f;return{coordinate:i(h)+u,value:f,offset:u}});return d.filter(function(f){return!qh(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,h){return{coordinate:i(f)+u,value:f,index:h,offset:u}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(f){return{coordinate:i(f)+u,value:f,offset:u}}):i.domain().map(function(f,h){return{coordinate:i(f)+u,value:s?s[f]:f,index:h,offset:u}})},aS=new WeakMap,jy=function(e,n){if(typeof n!="function")return e;aS.has(e)||aS.set(e,new WeakMap);var r=aS.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},K9=function(e,n,r){var i=e.scale,s=e.type,a=e.layout,o=e.axisType;if(i==="auto")return a==="radial"&&o==="radiusAxis"?{scale:_g(),realScaleType:"band"}:a==="radial"&&o==="angleAxis"?{scale:Rb(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Sm(),realScaleType:"point"}:s==="category"?{scale:_g(),realScaleType:"band"}:{scale:Rb(),realScaleType:"linear"};if(Ru(i)){var c="scale".concat(Bw(i));return{scale:(KR[c]||Sm)(),realScaleType:KR[c]?c:"point"}}return vt(i)?{scale:i}:{scale:Sm(),realScaleType:"point"}},e4=1e-4,q9=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),s=Math.min(i[0],i[1])-e4,a=Math.max(i[0],i[1])+e4,o=e(n[0]),c=e(n[r-1]);(o<s||o>a||c<s||c>a)&&e.domain([n[0],n[r-1]])}},mSe=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},gSe=function(e,n){if(!n||n.length!==2||!Ie(n[0])||!Ie(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),s=[e[0],e[1]];return(!Ie(e[0])||e[0]<r)&&(s[0]=r),(!Ie(e[1])||e[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<r&&(s[1]=r),s},vSe=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var s=0,a=0,o=0;o<n;++o){var c=qh(e[o][r][1])?e[o][r][0]:e[o][r][1];c>=0?(e[o][r][0]=s,e[o][r][1]=s+c,s=e[o][r][1]):(e[o][r][0]=a,e[o][r][1]=a+c,a=e[o][r][1])}},ySe=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var s=0,a=0;a<n;++a){var o=qh(e[a][r][1])?e[a][r][0]:e[a][r][1];o>=0?(e[a][r][0]=s,e[a][r][1]=s+o,s=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},bSe={sign:vSe,expand:zde,none:eh,silhouette:$de,wiggle:Fde,positive:ySe},xSe=function(e,n,r){var i=n.map(function(o){return o.props.dataKey}),s=bSe[r],a=Lde().keys(i).value(function(o,c){return+rr(o,c,0)}).order(LE).offset(s);return a(e)},wSe=function(e,n,r,i,s,a){if(!e)return null;var o=a?n.reverse():n,c={},u=o.reduce(function(f,h){var p,g=(p=h.type)!==null&&p!==void 0&&p.defaultProps?Kn(Kn({},h.type.defaultProps),h.props):h.props,m=g.stackId,y=g.hide;if(y)return f;var x=g[r],w=f[x]||{hasStack:!1,stackGroups:{}};if(Ar(m)){var _=w.stackGroups[m]||{numericAxisId:r,cateAxisId:i,items:[]};_.items.push(h),w.hasStack=!0,w.stackGroups[m]=_}else w.stackGroups[rd("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[h]};return Kn(Kn({},f),{},Ef({},x,w))},c),d={};return Object.keys(u).reduce(function(f,h){var p=u[h];if(p.hasStack){var g={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(m,y){var x=p.stackGroups[y];return Kn(Kn({},m),{},Ef({},y,{numericAxisId:r,cateAxisId:i,items:x.items,stackedData:xSe(e,x.items,s)}))},g)}return Kn(Kn({},f),{},Ef({},h,p))},d)},G9=function(e,n){var r=n.realScaleType,i=n.type,s=n.tickCount,a=n.originalDomain,o=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&i==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var u=e.domain();if(!u.length)return null;var d=M_e(u,s,o);return e.domain([n1(d),Cl(d)]),{niceTicks:d}}if(s&&i==="number"){var f=e.domain(),h=R_e(f,s,o);return{niceTicks:h}}return null};function Ub(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,s=t.index,a=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!_t(i[e.dataKey])){var o=mb(n,"value",i[e.dataKey]);if(o)return o.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var c=rr(i,_t(a)?e.dataKey:a);return _t(c)?null:e.scale(c)}var t4=function(e){var n=e.axis,r=e.ticks,i=e.offset,s=e.bandSize,a=e.entry,o=e.index;if(n.type==="category")return r[o]?r[o].coordinate+i:null;var c=rr(a,n.dataKey,n.domain[o]);return _t(c)?null:n.scale(c)-s/2+i},_Se=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return i<=0&&s>=0?0:s<0?s:i}return r[0]},SSe=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Kn(Kn({},e.type.defaultProps),e.props):e.props,s=i.stackId;if(Ar(s)){var a=n[s];if(a){var o=a.items.indexOf(e);return o>=0?a.stackedData[o]:null}}return null},ASe=function(e){return e.reduce(function(n,r){return[n1(r.concat([n[0]]).filter(Ie)),Cl(r.concat([n[1]]).filter(Ie))]},[1/0,-1/0])},Y9=function(e,n,r){return Object.keys(e).reduce(function(i,s){var a=e[s],o=a.stackedData,c=o.reduce(function(u,d){var f=ASe(d.slice(n,r+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},n4=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,r4=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,h2=function(e,n,r){if(vt(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(Ie(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(n4.test(e[0])){var s=+n4.exec(e[0])[1];i[0]=n[0]-s}else vt(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(Ie(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(r4.test(e[1])){var a=+r4.exec(e[1])[1];i[1]=n[1]+a}else vt(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},Wb=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var s=vN(n,function(f){return f.coordinate}),a=1/0,o=1,c=s.length;o<c;o++){var u=s[o],d=s[o-1];a=Math.min((u.coordinate||0)-(d.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0},i4=function(e,n,r){return!e||!e.length||$u(e,os(r,"type.defaultProps.domain"))?n:e},Q9=function(e,n){var r=e.type.defaultProps?Kn(Kn({},e.type.defaultProps),e.props):e.props,i=r.dataKey,s=r.name,a=r.unit,o=r.formatter,c=r.tooltipType,u=r.chartType,d=r.hide;return Kn(Kn({},lt(e,!1)),{},{dataKey:i,unit:a,formatter:o,name:s||i,color:UN(e),value:rr(n,i),type:c,payload:n,chartType:u,hide:d})};function kg(t){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kg(t)}function s4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function go(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s4(Object(n),!0).forEach(function(r){X9(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function X9(t,e,n){return e=ESe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ESe(t){var e=jSe(t,"string");return kg(e)=="symbol"?e:e+""}function jSe(t,e){if(kg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(kg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function CSe(t,e){return kSe(t)||PSe(t,e)||NSe(t,e)||TSe()}function TSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NSe(t,e){if(t){if(typeof t=="string")return a4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a4(t,e)}}function a4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function PSe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function kSe(t){if(Array.isArray(t))return t}var Hb=Math.PI/180,DSe=function(e){return e*180/Math.PI},xn=function(e,n,r,i){return{x:e+Math.cos(-Hb*i)*r,y:n+Math.sin(-Hb*i)*r}},Z9=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},ISe=function(e,n,r,i,s){var a=e.width,o=e.height,c=e.startAngle,u=e.endAngle,d=Ai(e.cx,a,a/2),f=Ai(e.cy,o,o/2),h=Z9(a,o,r),p=Ai(e.innerRadius,h,0),g=Ai(e.outerRadius,h,h*.8),m=Object.keys(n);return m.reduce(function(y,x){var w=n[x],_=w.domain,A=w.reversed,E;if(_t(w.range))i==="angleAxis"?E=[c,u]:i==="radiusAxis"&&(E=[p,g]),A&&(E=[E[1],E[0]]);else{E=w.range;var C=E,j=CSe(C,2);c=j[0],u=j[1]}var T=K9(w,s),P=T.realScaleType,I=T.scale;I.domain(_).range(E),q9(I);var M=G9(I,go(go({},w),{},{realScaleType:P})),F=go(go(go({},w),M),{},{range:E,radius:g,realScaleType:P,scale:I,cx:d,cy:f,innerRadius:p,outerRadius:g,startAngle:c,endAngle:u});return go(go({},y),{},X9({},x,F))},{})},OSe=function(e,n){var r=e.x,i=e.y,s=n.x,a=n.y;return Math.sqrt(Math.pow(r-s,2)+Math.pow(i-a,2))},MSe=function(e,n){var r=e.x,i=e.y,s=n.cx,a=n.cy,o=OSe({x:r,y:i},{x:s,y:a});if(o<=0)return{radius:o};var c=(r-s)/o,u=Math.acos(c);return i>a&&(u=2*Math.PI-u),{radius:o,angle:DSe(u),angleInRadian:u}},RSe=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),s=Math.floor(r/360),a=Math.min(i,s);return{startAngle:n-a*360,endAngle:r-a*360}},LSe=function(e,n){var r=n.startAngle,i=n.endAngle,s=Math.floor(r/360),a=Math.floor(i/360),o=Math.min(s,a);return e+o*360},o4=function(e,n){var r=e.x,i=e.y,s=MSe({x:r,y:i},n),a=s.radius,o=s.angle,c=n.innerRadius,u=n.outerRadius;if(a<c||a>u)return!1;if(a===0)return!0;var d=RSe(n),f=d.startAngle,h=d.endAngle,p=o,g;if(f<=h){for(;p>h;)p-=360;for(;p<f;)p+=360;g=p>=f&&p<=h}else{for(;p>f;)p-=360;for(;p<h;)p+=360;g=p>=h&&p<=f}return g?go(go({},n),{},{radius:a,angle:LSe(p,n)}):null},J9=function(e){return!N.isValidElement(e)&&!vt(e)&&typeof e!="boolean"?e.className:""};function Dg(t){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dg(t)}var zSe=["offset"];function $Se(t){return USe(t)||BSe(t)||VSe(t)||FSe()}function FSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VSe(t,e){if(t){if(typeof t=="string")return p2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p2(t,e)}}function BSe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function USe(t){if(Array.isArray(t))return p2(t)}function p2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function WSe(t,e){if(t==null)return{};var n=HSe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function HSe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function l4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function br(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?l4(Object(n),!0).forEach(function(r){KSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KSe(t,e,n){return e=qSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qSe(t){var e=GSe(t,"string");return Dg(e)=="symbol"?e:e+""}function GSe(t,e){if(Dg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Dg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ig(){return Ig=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ig.apply(this,arguments)}var YSe=function(e){var n=e.value,r=e.formatter,i=_t(e.children)?n:e.children;return vt(r)?r(i):i},QSe=function(e,n){var r=Si(n-e),i=Math.min(Math.abs(n-e),360);return r*i},XSe=function(e,n,r){var i=e.position,s=e.viewBox,a=e.offset,o=e.className,c=s,u=c.cx,d=c.cy,f=c.innerRadius,h=c.outerRadius,p=c.startAngle,g=c.endAngle,m=c.clockWise,y=(f+h)/2,x=QSe(p,g),w=x>=0?1:-1,_,A;i==="insideStart"?(_=p+w*a,A=m):i==="insideEnd"?(_=g-w*a,A=!m):i==="end"&&(_=g+w*a,A=m),A=x<=0?A:!A;var E=xn(u,d,y,_),C=xn(u,d,y,_+(A?1:-1)*359),j="M".concat(E.x,",").concat(E.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(A?0:1,`,
    `).concat(C.x,",").concat(C.y),T=_t(e.id)?rd("recharts-radial-line-"):e.id;return q.createElement("text",Ig({},r,{dominantBaseline:"central",className:Tt("recharts-radial-bar-label",o)}),q.createElement("defs",null,q.createElement("path",{id:T,d:j})),q.createElement("textPath",{xlinkHref:"#".concat(T)},n))},ZSe=function(e){var n=e.viewBox,r=e.offset,i=e.position,s=n,a=s.cx,o=s.cy,c=s.innerRadius,u=s.outerRadius,d=s.startAngle,f=s.endAngle,h=(d+f)/2;if(i==="outside"){var p=xn(a,o,u+r,h),g=p.x,m=p.y;return{x:g,y:m,textAnchor:g>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:o,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:o,textAnchor:"middle",verticalAnchor:"end"};var y=(c+u)/2,x=xn(a,o,y,h),w=x.x,_=x.y;return{x:w,y:_,textAnchor:"middle",verticalAnchor:"middle"}},JSe=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,s=e.position,a=n,o=a.x,c=a.y,u=a.width,d=a.height,f=d>=0?1:-1,h=f*i,p=f>0?"end":"start",g=f>0?"start":"end",m=u>=0?1:-1,y=m*i,x=m>0?"end":"start",w=m>0?"start":"end";if(s==="top"){var _={x:o+u/2,y:c-f*i,textAnchor:"middle",verticalAnchor:p};return br(br({},_),r?{height:Math.max(c-r.y,0),width:u}:{})}if(s==="bottom"){var A={x:o+u/2,y:c+d+h,textAnchor:"middle",verticalAnchor:g};return br(br({},A),r?{height:Math.max(r.y+r.height-(c+d),0),width:u}:{})}if(s==="left"){var E={x:o-y,y:c+d/2,textAnchor:x,verticalAnchor:"middle"};return br(br({},E),r?{width:Math.max(E.x-r.x,0),height:d}:{})}if(s==="right"){var C={x:o+u+y,y:c+d/2,textAnchor:w,verticalAnchor:"middle"};return br(br({},C),r?{width:Math.max(r.x+r.width-C.x,0),height:d}:{})}var j=r?{width:u,height:d}:{};return s==="insideLeft"?br({x:o+y,y:c+d/2,textAnchor:w,verticalAnchor:"middle"},j):s==="insideRight"?br({x:o+u-y,y:c+d/2,textAnchor:x,verticalAnchor:"middle"},j):s==="insideTop"?br({x:o+u/2,y:c+h,textAnchor:"middle",verticalAnchor:g},j):s==="insideBottom"?br({x:o+u/2,y:c+d-h,textAnchor:"middle",verticalAnchor:p},j):s==="insideTopLeft"?br({x:o+y,y:c+h,textAnchor:w,verticalAnchor:g},j):s==="insideTopRight"?br({x:o+u-y,y:c+h,textAnchor:x,verticalAnchor:g},j):s==="insideBottomLeft"?br({x:o+y,y:c+d-h,textAnchor:w,verticalAnchor:p},j):s==="insideBottomRight"?br({x:o+u-y,y:c+d-h,textAnchor:x,verticalAnchor:p},j):Uh(s)&&(Ie(s.x)||au(s.x))&&(Ie(s.y)||au(s.y))?br({x:o+Ai(s.x,u),y:c+Ai(s.y,d),textAnchor:"end",verticalAnchor:"end"},j):br({x:o+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},j)},eAe=function(e){return"cx"in e&&Ie(e.cx)};function Ir(t){var e=t.offset,n=e===void 0?5:e,r=WSe(t,zSe),i=br({offset:n},r),s=i.viewBox,a=i.position,o=i.value,c=i.children,u=i.content,d=i.className,f=d===void 0?"":d,h=i.textBreakAll;if(!s||_t(o)&&_t(c)&&!N.isValidElement(u)&&!vt(u))return null;if(N.isValidElement(u))return N.cloneElement(u,i);var p;if(vt(u)){if(p=N.createElement(u,i),N.isValidElement(p))return p}else p=YSe(i);var g=eAe(s),m=lt(i,!0);if(g&&(a==="insideStart"||a==="insideEnd"||a==="end"))return XSe(i,p,m);var y=g?ZSe(i):JSe(i);return q.createElement(zu,Ig({className:Tt("recharts-label",f)},m,y,{breakAll:h}),p)}Ir.displayName="Label";var e7=function(e){var n=e.cx,r=e.cy,i=e.angle,s=e.startAngle,a=e.endAngle,o=e.r,c=e.radius,u=e.innerRadius,d=e.outerRadius,f=e.x,h=e.y,p=e.top,g=e.left,m=e.width,y=e.height,x=e.clockWise,w=e.labelViewBox;if(w)return w;if(Ie(m)&&Ie(y)){if(Ie(f)&&Ie(h))return{x:f,y:h,width:m,height:y};if(Ie(p)&&Ie(g))return{x:p,y:g,width:m,height:y}}return Ie(f)&&Ie(h)?{x:f,y:h,width:0,height:0}:Ie(n)&&Ie(r)?{cx:n,cy:r,startAngle:s||i||0,endAngle:a||i||0,innerRadius:u||0,outerRadius:d||c||o||0,clockWise:x}:e.viewBox?e.viewBox:{}},tAe=function(e,n){return e?e===!0?q.createElement(Ir,{key:"label-implicit",viewBox:n}):Ar(e)?q.createElement(Ir,{key:"label-implicit",viewBox:n,value:e}):N.isValidElement(e)?e.type===Ir?N.cloneElement(e,{key:"label-implicit",viewBox:n}):q.createElement(Ir,{key:"label-implicit",content:e,viewBox:n}):vt(e)?q.createElement(Ir,{key:"label-implicit",content:e,viewBox:n}):Uh(e)?q.createElement(Ir,Ig({viewBox:n},e,{key:"label-implicit"})):null:null},nAe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,s=e7(e),a=ls(i,Ir).map(function(c,u){return N.cloneElement(c,{viewBox:n||s,key:"label-".concat(u)})});if(!r)return a;var o=tAe(e.label,n||s);return[o].concat($Se(a))};Ir.parseViewBox=e7;Ir.renderCallByParent=nAe;function rAe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var iAe=rAe;const sAe=tn(iAe);function Og(t){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Og(t)}var aAe=["valueAccessor"],oAe=["data","dataKey","clockWise","id","textBreakAll"];function lAe(t){return fAe(t)||dAe(t)||uAe(t)||cAe()}function cAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uAe(t,e){if(t){if(typeof t=="string")return m2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m2(t,e)}}function dAe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function fAe(t){if(Array.isArray(t))return m2(t)}function m2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Kb(){return Kb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kb.apply(this,arguments)}function c4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function u4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c4(Object(n),!0).forEach(function(r){hAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hAe(t,e,n){return e=pAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pAe(t){var e=mAe(t,"string");return Og(e)=="symbol"?e:e+""}function mAe(t,e){if(Og(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Og(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function d4(t,e){if(t==null)return{};var n=gAe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function gAe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var vAe=function(e){return Array.isArray(e.value)?sAe(e.value):e.value};function cs(t){var e=t.valueAccessor,n=e===void 0?vAe:e,r=d4(t,aAe),i=r.data,s=r.dataKey,a=r.clockWise,o=r.id,c=r.textBreakAll,u=d4(r,oAe);return!i||!i.length?null:q.createElement(Ot,{className:"recharts-label-list"},i.map(function(d,f){var h=_t(s)?n(d,f):rr(d&&d.payload,s),p=_t(o)?{}:{id:"".concat(o,"-").concat(f)};return q.createElement(Ir,Kb({},lt(d,!0),u,p,{parentViewBox:d.parentViewBox,value:h,textBreakAll:c,viewBox:Ir.parseViewBox(_t(a)?d:u4(u4({},d),{},{clockWise:a})),key:"label-".concat(f),index:f}))}))}cs.displayName="LabelList";function yAe(t,e){return t?t===!0?q.createElement(cs,{key:"labelList-implicit",data:e}):q.isValidElement(t)||vt(t)?q.createElement(cs,{key:"labelList-implicit",data:e,content:t}):Uh(t)?q.createElement(cs,Kb({data:e},t,{key:"labelList-implicit"})):null:null}function bAe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=ls(r,cs).map(function(a,o){return N.cloneElement(a,{data:e,key:"labelList-".concat(o)})});if(!n)return i;var s=yAe(t.label,e);return[s].concat(lAe(i))}cs.renderCallByParent=bAe;function Mg(t){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mg(t)}function g2(){return g2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},g2.apply(this,arguments)}function f4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function h4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f4(Object(n),!0).forEach(function(r){xAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xAe(t,e,n){return e=wAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wAe(t){var e=_Ae(t,"string");return Mg(e)=="symbol"?e:e+""}function _Ae(t,e){if(Mg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Mg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var SAe=function(e,n){var r=Si(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},Cy=function(e){var n=e.cx,r=e.cy,i=e.radius,s=e.angle,a=e.sign,o=e.isExternal,c=e.cornerRadius,u=e.cornerIsExternal,d=c*(o?1:-1)+i,f=Math.asin(c/d)/Hb,h=u?s:s+a*f,p=xn(n,r,d,h),g=xn(n,r,i,h),m=u?s-a*f:s,y=xn(n,r,d*Math.cos(f*Hb),m);return{center:p,circleTangency:g,lineTangency:y,theta:f}},t7=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,a=e.startAngle,o=e.endAngle,c=SAe(a,o),u=a+c,d=xn(n,r,s,a),f=xn(n,r,s,u),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(a>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var p=xn(n,r,i,a),g=xn(n,r,i,u);h+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(a<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(n,",").concat(r," Z");return h},AAe=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,a=e.cornerRadius,o=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,d=e.endAngle,f=Si(d-u),h=Cy({cx:n,cy:r,radius:s,angle:u,sign:f,cornerRadius:a,cornerIsExternal:c}),p=h.circleTangency,g=h.lineTangency,m=h.theta,y=Cy({cx:n,cy:r,radius:s,angle:d,sign:-f,cornerRadius:a,cornerIsExternal:c}),x=y.circleTangency,w=y.lineTangency,_=y.theta,A=c?Math.abs(u-d):Math.abs(u-d)-m-_;if(A<0)return o?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):t7({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:u,endAngle:d});var E="M ".concat(g.x,",").concat(g.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(A>180),",").concat(+(f<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
  `);if(i>0){var C=Cy({cx:n,cy:r,radius:i,angle:u,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:c}),j=C.circleTangency,T=C.lineTangency,P=C.theta,I=Cy({cx:n,cy:r,radius:i,angle:d,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:c}),M=I.circleTangency,F=I.lineTangency,R=I.theta,H=c?Math.abs(u-d):Math.abs(u-d)-P-R;if(H<0&&a===0)return"".concat(E,"L").concat(n,",").concat(r,"Z");E+="L".concat(F.x,",").concat(F.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(M.x,",").concat(M.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(H>180),",").concat(+(f>0),",").concat(j.x,",").concat(j.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(T.x,",").concat(T.y,"Z")}else E+="L".concat(n,",").concat(r,"Z");return E},EAe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},n7=function(e){var n=h4(h4({},EAe),e),r=n.cx,i=n.cy,s=n.innerRadius,a=n.outerRadius,o=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,f=n.endAngle,h=n.className;if(a<s||d===f)return null;var p=Tt("recharts-sector",h),g=a-s,m=Ai(o,g,0,!0),y;return m>0&&Math.abs(d-f)<360?y=AAe({cx:r,cy:i,innerRadius:s,outerRadius:a,cornerRadius:Math.min(m,g/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):y=t7({cx:r,cy:i,innerRadius:s,outerRadius:a,startAngle:d,endAngle:f}),q.createElement("path",g2({},lt(n,!0),{className:p,d:y,role:"img"}))};function Rg(t){"@babel/helpers - typeof";return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rg(t)}function v2(){return v2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},v2.apply(this,arguments)}function p4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function m4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p4(Object(n),!0).forEach(function(r){jAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jAe(t,e,n){return e=CAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CAe(t){var e=TAe(t,"string");return Rg(e)=="symbol"?e:e+""}function TAe(t,e){if(Rg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var g4={curveBasisClosed:jde,curveBasisOpen:Cde,curveBasis:Ede,curveBumpX:dde,curveBumpY:fde,curveLinearClosed:Tde,curveLinear:Ww,curveMonotoneX:Nde,curveMonotoneY:Pde,curveNatural:kde,curveStep:Dde,curveStepAfter:Ode,curveStepBefore:Ide},Ty=function(e){return e.x===+e.x&&e.y===+e.y},zp=function(e){return e.x},$p=function(e){return e.y},NAe=function(e,n){if(vt(e))return e;var r="curve".concat(Bw(e));return(r==="curveMonotone"||r==="curveBump")&&n?g4["".concat(r).concat(n==="vertical"?"Y":"X")]:g4[r]||Ww},PAe=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,s=i===void 0?[]:i,a=e.baseLine,o=e.layout,c=e.connectNulls,u=c===void 0?!1:c,d=NAe(r,o),f=u?s.filter(function(m){return Ty(m)}):s,h;if(Array.isArray(a)){var p=u?a.filter(function(m){return Ty(m)}):a,g=f.map(function(m,y){return m4(m4({},m),{},{base:p[y]})});return o==="vertical"?h=yy().y($p).x1(zp).x0(function(m){return m.base.x}):h=yy().x(zp).y1($p).y0(function(m){return m.base.y}),h.defined(Ty).curve(d),h(g)}return o==="vertical"&&Ie(a)?h=yy().y($p).x1(zp).x0(a):Ie(a)?h=yy().x(zp).y1($p).y0(a):h=QV().x(zp).y($p),h.defined(Ty).curve(d),h(f)},_u=function(e){var n=e.className,r=e.points,i=e.path,s=e.pathRef;if((!r||!r.length)&&!i)return null;var a=r&&r.length?PAe(e):i;return N.createElement("path",v2({},lt(e,!1),gb(e),{className:Tt("recharts-curve",n),d:a,ref:s}))},r7={exports:{}},kAe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",DAe=kAe,IAe=DAe;function i7(){}function s7(){}s7.resetWarningCache=i7;var OAe=function(){function t(r,i,s,a,o,c){if(c!==IAe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:s7,resetWarningCache:i7};return n.PropTypes=n,n};r7.exports=OAe();var MAe=r7.exports;const en=tn(MAe);var RAe=Object.getOwnPropertyNames,LAe=Object.getOwnPropertySymbols,zAe=Object.prototype.hasOwnProperty;function v4(t,e){return function(r,i,s){return t(r,i,s)&&e(r,i,s)}}function Ny(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var s=i.cache,a=s.get(n),o=s.get(r);if(a&&o)return a===r&&o===n;s.set(n,r),s.set(r,n);var c=t(n,r,i);return s.delete(n),s.delete(r),c}}function $Ae(t){return t!=null?t[Symbol.toStringTag]:void 0}function y4(t){return RAe(t).concat(LAe(t))}var FAe=Object.hasOwn||function(t,e){return zAe.call(t,e)};function ad(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var VAe="__v",BAe="__o",UAe="_owner",b4=Object.getOwnPropertyDescriptor,x4=Object.keys;function WAe(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function HAe(t,e){return ad(t.getTime(),e.getTime())}function KAe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function qAe(t,e){return t===e}function w4(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),s=t.entries(),a,o,c=0;(a=s.next())&&!a.done;){for(var u=e.entries(),d=!1,f=0;(o=u.next())&&!o.done;){if(i[f]){f++;continue}var h=a.value,p=o.value;if(n.equals(h[0],p[0],c,f,t,e,n)&&n.equals(h[1],p[1],h[0],p[0],t,e,n)){d=i[f]=!0;break}f++}if(!d)return!1;c++}return!0}var GAe=ad;function YAe(t,e,n){var r=x4(t),i=r.length;if(x4(e).length!==i)return!1;for(;i-- >0;)if(!a7(t,e,n,r[i]))return!1;return!0}function Fp(t,e,n){var r=y4(t),i=r.length;if(y4(e).length!==i)return!1;for(var s,a,o;i-- >0;)if(s=r[i],!a7(t,e,n,s)||(a=b4(t,s),o=b4(e,s),(a||o)&&(!a||!o||a.configurable!==o.configurable||a.enumerable!==o.enumerable||a.writable!==o.writable)))return!1;return!0}function QAe(t,e){return ad(t.valueOf(),e.valueOf())}function XAe(t,e){return t.source===e.source&&t.flags===e.flags}function _4(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),s=t.values(),a,o;(a=s.next())&&!a.done;){for(var c=e.values(),u=!1,d=0;(o=c.next())&&!o.done;){if(!i[d]&&n.equals(a.value,o.value,a.value,o.value,t,e,n)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function ZAe(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function JAe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function a7(t,e,n,r){return(r===UAe||r===BAe||r===VAe)&&(t.$$typeof||e.$$typeof)?!0:FAe(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var eEe="[object Arguments]",tEe="[object Boolean]",nEe="[object Date]",rEe="[object Error]",iEe="[object Map]",sEe="[object Number]",aEe="[object Object]",oEe="[object RegExp]",lEe="[object Set]",cEe="[object String]",uEe="[object URL]",dEe=Array.isArray,S4=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,A4=Object.assign,fEe=Object.prototype.toString.call.bind(Object.prototype.toString);function hEe(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,s=t.areMapsEqual,a=t.areNumbersEqual,o=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,d=t.areSetsEqual,f=t.areTypedArraysEqual,h=t.areUrlsEqual,p=t.unknownTagComparators;return function(m,y,x){if(m===y)return!0;if(m==null||y==null)return!1;var w=typeof m;if(w!==typeof y)return!1;if(w!=="object")return w==="number"?a(m,y,x):w==="function"?i(m,y,x):!1;var _=m.constructor;if(_!==y.constructor)return!1;if(_===Object)return o(m,y,x);if(dEe(m))return e(m,y,x);if(S4!=null&&S4(m))return f(m,y,x);if(_===Date)return n(m,y,x);if(_===RegExp)return u(m,y,x);if(_===Map)return s(m,y,x);if(_===Set)return d(m,y,x);var A=fEe(m);if(A===nEe)return n(m,y,x);if(A===oEe)return u(m,y,x);if(A===iEe)return s(m,y,x);if(A===lEe)return d(m,y,x);if(A===aEe)return typeof m.then!="function"&&typeof y.then!="function"&&o(m,y,x);if(A===uEe)return h(m,y,x);if(A===rEe)return r(m,y,x);if(A===eEe)return o(m,y,x);if(A===tEe||A===sEe||A===cEe)return c(m,y,x);if(p){var E=p[A];if(!E){var C=$Ae(m);C&&(E=p[C])}if(E)return E(m,y,x)}return!1}}function pEe(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?Fp:WAe,areDatesEqual:HAe,areErrorsEqual:KAe,areFunctionsEqual:qAe,areMapsEqual:r?v4(w4,Fp):w4,areNumbersEqual:GAe,areObjectsEqual:r?Fp:YAe,arePrimitiveWrappersEqual:QAe,areRegExpsEqual:XAe,areSetsEqual:r?v4(_4,Fp):_4,areTypedArraysEqual:r?Fp:ZAe,areUrlsEqual:JAe,unknownTagComparators:void 0};if(n&&(i=A4({},i,n(i))),e){var s=Ny(i.areArraysEqual),a=Ny(i.areMapsEqual),o=Ny(i.areObjectsEqual),c=Ny(i.areSetsEqual);i=A4({},i,{areArraysEqual:s,areMapsEqual:a,areObjectsEqual:o,areSetsEqual:c})}return i}function mEe(t){return function(e,n,r,i,s,a,o){return t(e,n,o)}}function gEe(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,s=t.strict;if(r)return function(c,u){var d=r(),f=d.cache,h=f===void 0?e?new WeakMap:void 0:f,p=d.meta;return n(c,u,{cache:h,equals:i,meta:p,strict:s})};if(e)return function(c,u){return n(c,u,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var a={cache:void 0,equals:i,meta:void 0,strict:s};return function(c,u){return n(c,u,a)}}var vEe=hc();hc({strict:!0});hc({circular:!0});hc({circular:!0,strict:!0});hc({createInternalComparator:function(){return ad}});hc({strict:!0,createInternalComparator:function(){return ad}});hc({circular:!0,createInternalComparator:function(){return ad}});hc({circular:!0,createInternalComparator:function(){return ad},strict:!0});function hc(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,s=t.strict,a=s===void 0?!1:s,o=pEe(t),c=hEe(o),u=r?r(c):mEe(c);return gEe({circular:n,comparator:c,createState:i,equals:u,strict:a})}function yEe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function E4(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(s){n<0&&(n=s),s-n>e?(t(s),n=-1):yEe(i)};requestAnimationFrame(r)}function y2(t){"@babel/helpers - typeof";return y2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y2(t)}function bEe(t){return SEe(t)||_Ee(t)||wEe(t)||xEe()}function xEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wEe(t,e){if(t){if(typeof t=="string")return j4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j4(t,e)}}function j4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _Ee(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function SEe(t){if(Array.isArray(t))return t}function AEe(){var t={},e=function(){return null},n=!1,r=function i(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var a=s,o=bEe(a),c=o[0],u=o.slice(1);if(typeof c=="number"){E4(i.bind(null,u),c);return}i(c),E4(i.bind(null,u));return}y2(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,r(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function Lg(t){"@babel/helpers - typeof";return Lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lg(t)}function C4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function T4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?C4(Object(n),!0).forEach(function(r){o7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function o7(t,e,n){return e=EEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EEe(t){var e=jEe(t,"string");return Lg(e)==="symbol"?e:String(e)}function jEe(t,e){if(Lg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CEe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(s){return i.includes(s)})})},TEe=function(e){return e},NEe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Em=function(e,n){return Object.keys(n).reduce(function(r,i){return T4(T4({},r),{},o7({},i,e(i,n[i])))},{})},N4=function(e,n,r){return e.map(function(i){return"".concat(NEe(i)," ").concat(n,"ms ").concat(r)}).join(",")};function PEe(t,e){return IEe(t)||DEe(t,e)||l7(t,e)||kEe()}function kEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DEe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function IEe(t){if(Array.isArray(t))return t}function OEe(t){return LEe(t)||REe(t)||l7(t)||MEe()}function MEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l7(t,e){if(t){if(typeof t=="string")return b2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b2(t,e)}}function REe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function LEe(t){if(Array.isArray(t))return b2(t)}function b2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var qb=1e-4,c7=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},u7=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},P4=function(e,n){return function(r){var i=c7(e,n);return u7(i,r)}},zEe=function(e,n){return function(r){var i=c7(e,n),s=[].concat(OEe(i.map(function(a,o){return a*o}).slice(1)),[0]);return u7(s,r)}},k4=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],s=n[1],a=n[2],o=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,s=0,a=1,o=1;break;case"ease":i=.25,s=.1,a=.25,o=1;break;case"ease-in":i=.42,s=0,a=1,o=1;break;case"ease-out":i=.42,s=0,a=.58,o=1;break;case"ease-in-out":i=0,s=0,a=.58,o=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),d=PEe(u,4);i=d[0],s=d[1],a=d[2],o=d[3]}}}var f=P4(i,a),h=P4(s,o),p=zEe(i,a),g=function(x){return x>1?1:x<0?0:x},m=function(x){for(var w=x>1?1:x,_=w,A=0;A<8;++A){var E=f(_)-w,C=p(_);if(Math.abs(E-w)<qb||C<qb)return h(_);_=g(_-E/C)}return h(_)};return m.isStepper=!1,m},$Ee=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,s=i===void 0?8:i,a=e.dt,o=a===void 0?17:a,c=function(d,f,h){var p=-(d-f)*r,g=h*s,m=h+(p-g)*o/1e3,y=h*o/1e3+d;return Math.abs(y-f)<qb&&Math.abs(m)<qb?[f,0]:[y,m]};return c.isStepper=!0,c.dt=o,c},FEe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return k4(i);case"spring":return $Ee();default:if(i.split("(")[0]==="cubic-bezier")return k4(i)}return typeof i=="function"?i:null};function zg(t){"@babel/helpers - typeof";return zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zg(t)}function D4(t){return UEe(t)||BEe(t)||d7(t)||VEe()}function VEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function UEe(t){if(Array.isArray(t))return w2(t)}function I4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I4(Object(n),!0).forEach(function(r){x2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function x2(t,e,n){return e=WEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WEe(t){var e=HEe(t,"string");return zg(e)==="symbol"?e:String(e)}function HEe(t,e){if(zg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KEe(t,e){return YEe(t)||GEe(t,e)||d7(t,e)||qEe()}function qEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d7(t,e){if(t){if(typeof t=="string")return w2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w2(t,e)}}function w2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function GEe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function YEe(t){if(Array.isArray(t))return t}var Gb=function(e,n,r){return e+(n-e)*r},_2=function(e){var n=e.from,r=e.to;return n!==r},QEe=function t(e,n,r){var i=Em(function(s,a){if(_2(a)){var o=e(a.from,a.to,a.velocity),c=KEe(o,2),u=c[0],d=c[1];return Kr(Kr({},a),{},{from:u,velocity:d})}return a},n);return r<1?Em(function(s,a){return _2(a)?Kr(Kr({},a),{},{velocity:Gb(a.velocity,i[s].velocity,r),from:Gb(a.from,i[s].from,r)}):a},n):t(e,i,r-1)};const XEe=function(t,e,n,r,i){var s=CEe(t,e),a=s.reduce(function(y,x){return Kr(Kr({},y),{},x2({},x,[t[x],e[x]]))},{}),o=s.reduce(function(y,x){return Kr(Kr({},y),{},x2({},x,{from:t[x],velocity:0,to:e[x]}))},{}),c=-1,u,d,f=function(){return null},h=function(){return Em(function(x,w){return w.from},o)},p=function(){return!Object.values(o).filter(_2).length},g=function(x){u||(u=x);var w=x-u,_=w/n.dt;o=QEe(n,o,_),i(Kr(Kr(Kr({},t),e),h())),u=x,p()||(c=requestAnimationFrame(f))},m=function(x){d||(d=x);var w=(x-d)/r,_=Em(function(E,C){return Gb.apply(void 0,D4(C).concat([n(w)]))},a);if(i(Kr(Kr(Kr({},t),e),_)),w<1)c=requestAnimationFrame(f);else{var A=Em(function(E,C){return Gb.apply(void 0,D4(C).concat([n(1)]))},a);i(Kr(Kr(Kr({},t),e),A))}};return f=n.isStepper?g:m,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function ch(t){"@babel/helpers - typeof";return ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ch(t)}var ZEe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function JEe(t,e){if(t==null)return{};var n=e2e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function e2e(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function oS(t){return i2e(t)||r2e(t)||n2e(t)||t2e()}function t2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n2e(t,e){if(t){if(typeof t=="string")return S2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S2(t,e)}}function r2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function i2e(t){if(Array.isArray(t))return S2(t)}function S2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function O4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ys(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O4(Object(n),!0).forEach(function(r){tm(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tm(t,e,n){return e=f7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a2e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f7(r.key),r)}}function o2e(t,e,n){return e&&a2e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function f7(t){var e=l2e(t,"string");return ch(e)==="symbol"?e:String(e)}function l2e(t,e){if(ch(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ch(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function c2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A2(t,e)}function A2(t,e){return A2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},A2(t,e)}function u2e(t){var e=d2e();return function(){var r=Yb(t),i;if(e){var s=Yb(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return E2(this,i)}}function E2(t,e){if(e&&(ch(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j2(t)}function j2(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d2e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Yb(t){return Yb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Yb(t)}var da=function(t){c2e(n,t);var e=u2e(n);function n(r,i){var s;s2e(this,n),s=e.call(this,r,i);var a=s.props,o=a.isActive,c=a.attributeName,u=a.from,d=a.to,f=a.steps,h=a.children,p=a.duration;if(s.handleStyleChange=s.handleStyleChange.bind(j2(s)),s.changeStyle=s.changeStyle.bind(j2(s)),!o||p<=0)return s.state={style:{}},typeof h=="function"&&(s.state={style:d}),E2(s);if(f&&f.length)s.state={style:f[0].style};else if(u){if(typeof h=="function")return s.state={style:u},E2(s);s.state={style:c?tm({},c,u):u}}else s.state={style:{}};return s}return o2e(n,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,a=i.canBegin;this.mounted=!0,!(!s||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,a=s.isActive,o=s.canBegin,c=s.attributeName,u=s.shouldReAnimate,d=s.to,f=s.from,h=this.state.style;if(o){if(!a){var p={style:c?tm({},c,d):d};this.state&&h&&(c&&h[c]!==d||!c&&h!==d)&&this.setState(p);return}if(!(vEe(i.to,d)&&i.canBegin&&i.isActive)){var g=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=g||u?f:i.to;if(this.state&&h){var y={style:c?tm({},c,m):m};(c&&h[c]!==m||!c&&h!==m)&&this.setState(y)}this.runAnimation(Ys(Ys({},this.props),{},{from:m,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,a=i.from,o=i.to,c=i.duration,u=i.easing,d=i.begin,f=i.onAnimationEnd,h=i.onAnimationStart,p=XEe(a,o,FEe(u),c,this.changeStyle),g=function(){s.stopJSAnimation=p()};this.manager.start([h,d,g,c,f])}},{key:"runStepAnimation",value:function(i){var s=this,a=i.steps,o=i.begin,c=i.onAnimationStart,u=a[0],d=u.style,f=u.duration,h=f===void 0?0:f,p=function(m,y,x){if(x===0)return m;var w=y.duration,_=y.easing,A=_===void 0?"ease":_,E=y.style,C=y.properties,j=y.onAnimationEnd,T=x>0?a[x-1]:y,P=C||Object.keys(E);if(typeof A=="function"||A==="spring")return[].concat(oS(m),[s.runJSAnimation.bind(s,{from:T.style,to:E,duration:w,easing:A}),w]);var I=N4(P,w,A),M=Ys(Ys(Ys({},T.style),E),{},{transition:I});return[].concat(oS(m),[M,w,j]).filter(TEe)};return this.manager.start([c].concat(oS(a.reduce(p,[d,Math.max(h,o)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=AEe());var s=i.begin,a=i.duration,o=i.attributeName,c=i.to,u=i.easing,d=i.onAnimationStart,f=i.onAnimationEnd,h=i.steps,p=i.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var m=o?tm({},o,c):c,y=N4(Object.keys(m),a,u);g.start([d,s,Ys(Ys({},m),{},{transition:y}),a,f])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var a=i.duration;i.attributeName,i.easing;var o=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=JEe(i,ZEe),u=N.Children.count(s),d=this.state.style;if(typeof s=="function")return s(d);if(!o||u===0||a<=0)return s;var f=function(p){var g=p.props,m=g.style,y=m===void 0?{}:m,x=g.className,w=N.cloneElement(p,Ys(Ys({},c),{},{style:Ys(Ys({},y),d),className:x}));return w};return u===1?f(N.Children.only(s)):q.createElement("div",null,N.Children.map(s,function(h){return f(h)}))}}]),n}(N.PureComponent);da.displayName="Animate";da.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};da.propTypes={from:en.oneOfType([en.object,en.string]),to:en.oneOfType([en.object,en.string]),attributeName:en.string,duration:en.number,begin:en.number,easing:en.oneOfType([en.string,en.func]),steps:en.arrayOf(en.shape({duration:en.number.isRequired,style:en.object.isRequired,easing:en.oneOfType([en.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),en.func]),properties:en.arrayOf("string"),onAnimationEnd:en.func})),children:en.oneOfType([en.node,en.func]),isActive:en.bool,canBegin:en.bool,onAnimationEnd:en.func,shouldReAnimate:en.bool,onAnimationStart:en.func,onAnimationReStart:en.func};function $g(t){"@babel/helpers - typeof";return $g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$g(t)}function Qb(){return Qb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qb.apply(this,arguments)}function f2e(t,e){return g2e(t)||m2e(t,e)||p2e(t,e)||h2e()}function h2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p2e(t,e){if(t){if(typeof t=="string")return M4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M4(t,e)}}function M4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function m2e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function g2e(t){if(Array.isArray(t))return t}function R4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function L4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R4(Object(n),!0).forEach(function(r){v2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function v2e(t,e,n){return e=y2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y2e(t){var e=b2e(t,"string");return $g(e)=="symbol"?e:e+""}function b2e(t,e){if($g(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($g(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var z4=function(e,n,r,i,s){var a=Math.min(Math.abs(r)/2,Math.abs(i)/2),o=i>=0?1:-1,c=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,d;if(a>0&&s instanceof Array){for(var f=[0,0,0,0],h=0,p=4;h<p;h++)f[h]=s[h]>a?a:s[h];d="M".concat(e,",").concat(n+o*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(e+c*f[0],",").concat(n)),d+="L ".concat(e+r-c*f[1],",").concat(n),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+o*f[1])),d+="L ".concat(e+r,",").concat(n+i-o*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(e+r-c*f[2],",").concat(n+i)),d+="L ".concat(e+c*f[3],",").concat(n+i),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+i-o*f[3])),d+="Z"}else if(a>0&&s===+s&&s>0){var g=Math.min(a,s);d="M ".concat(e,",").concat(n+o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e+c*g,",").concat(n,`
            L `).concat(e+r-c*g,",").concat(n,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e+r,",").concat(n+o*g,`
            L `).concat(e+r,",").concat(n+i-o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e+r-c*g,",").concat(n+i,`
            L `).concat(e+c*g,",").concat(n+i,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(e,",").concat(n+i-o*g," Z")}else d="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return d},x2e=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,s=n.x,a=n.y,o=n.width,c=n.height;if(Math.abs(o)>0&&Math.abs(c)>0){var u=Math.min(s,s+o),d=Math.max(s,s+o),f=Math.min(a,a+c),h=Math.max(a,a+c);return r>=u&&r<=d&&i>=f&&i<=h}return!1},w2e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},WN=function(e){var n=L4(L4({},w2e),e),r=N.useRef(),i=N.useState(-1),s=f2e(i,2),a=s[0],o=s[1];N.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var A=r.current.getTotalLength();A&&o(A)}catch{}},[]);var c=n.x,u=n.y,d=n.width,f=n.height,h=n.radius,p=n.className,g=n.animationEasing,m=n.animationDuration,y=n.animationBegin,x=n.isAnimationActive,w=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var _=Tt("recharts-rectangle",p);return w?q.createElement(da,{canBegin:a>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:m,animationEasing:g,isActive:w},function(A){var E=A.width,C=A.height,j=A.x,T=A.y;return q.createElement(da,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:m,isActive:x,easing:g},q.createElement("path",Qb({},lt(n,!0),{className:_,d:z4(j,T,E,C,h),ref:r})))}):q.createElement("path",Qb({},lt(n,!0),{className:_,d:z4(c,u,d,f,h)}))},_2e=["points","className","baseLinePoints","connectNulls"];function lf(){return lf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lf.apply(this,arguments)}function S2e(t,e){if(t==null)return{};var n=A2e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function A2e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function $4(t){return T2e(t)||C2e(t)||j2e(t)||E2e()}function E2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j2e(t,e){if(t){if(typeof t=="string")return C2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C2(t,e)}}function C2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function T2e(t){if(Array.isArray(t))return C2(t)}function C2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var F4=function(e){return e&&e.x===+e.x&&e.y===+e.y},N2e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){F4(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),F4(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},jm=function(e,n){var r=N2e(e);n&&(r=[r.reduce(function(s,a){return[].concat($4(s),$4(a))},[])]);var i=r.map(function(s){return s.reduce(function(a,o,c){return"".concat(a).concat(c===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},P2e=function(e,n,r){var i=jm(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(jm(n.reverse(),r).slice(1))},k2e=function(e){var n=e.points,r=e.className,i=e.baseLinePoints,s=e.connectNulls,a=S2e(e,_2e);if(!n||!n.length)return null;var o=Tt("recharts-polygon",r);if(i&&i.length){var c=a.stroke&&a.stroke!=="none",u=P2e(n,i,s);return q.createElement("g",{className:o},q.createElement("path",lf({},lt(a,!0),{fill:u.slice(-1)==="Z"?a.fill:"none",stroke:"none",d:u})),c?q.createElement("path",lf({},lt(a,!0),{fill:"none",d:jm(n,s)})):null,c?q.createElement("path",lf({},lt(a,!0),{fill:"none",d:jm(i,s)})):null)}var d=jm(n,s);return q.createElement("path",lf({},lt(a,!0),{fill:d.slice(-1)==="Z"?a.fill:"none",className:o,d}))};function T2(){return T2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},T2.apply(this,arguments)}var Dv=function(e){var n=e.cx,r=e.cy,i=e.r,s=e.className,a=Tt("recharts-dot",s);return n===+n&&r===+r&&i===+i?N.createElement("circle",T2({},lt(e,!1),gb(e),{className:a,cx:n,cy:r,r:i})):null};function Fg(t){"@babel/helpers - typeof";return Fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fg(t)}var D2e=["x","y","top","left","width","height","className"];function N2(){return N2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},N2.apply(this,arguments)}function V4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function I2e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V4(Object(n),!0).forEach(function(r){O2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function O2e(t,e,n){return e=M2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M2e(t){var e=R2e(t,"string");return Fg(e)=="symbol"?e:e+""}function R2e(t,e){if(Fg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Fg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function L2e(t,e){if(t==null)return{};var n=z2e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function z2e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var $2e=function(e,n,r,i,s,a){return"M".concat(e,",").concat(s,"v").concat(i,"M").concat(a,",").concat(n,"h").concat(r)},F2e=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,s=i===void 0?0:i,a=e.top,o=a===void 0?0:a,c=e.left,u=c===void 0?0:c,d=e.width,f=d===void 0?0:d,h=e.height,p=h===void 0?0:h,g=e.className,m=L2e(e,D2e),y=I2e({x:r,y:s,top:o,left:u,width:f,height:p},m);return!Ie(r)||!Ie(s)||!Ie(f)||!Ie(p)||!Ie(o)||!Ie(u)?null:q.createElement("path",N2({},lt(y,!0),{className:Tt("recharts-cross",g),d:$2e(r,s,f,p,o,u)}))},V2e=t1,B2e=A9,U2e=eo;function W2e(t,e){return t&&t.length?V2e(t,U2e(e),B2e):void 0}var H2e=W2e;const K2e=tn(H2e);var q2e=t1,G2e=eo,Y2e=E9;function Q2e(t,e){return t&&t.length?q2e(t,G2e(e),Y2e):void 0}var X2e=Q2e;const Z2e=tn(X2e);var J2e=["cx","cy","angle","ticks","axisLine"],eje=["ticks","tick","angle","tickFormatter","stroke"];function uh(t){"@babel/helpers - typeof";return uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uh(t)}function Cm(){return Cm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cm.apply(this,arguments)}function B4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B4(Object(n),!0).forEach(function(r){s1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function U4(t,e){if(t==null)return{};var n=tje(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function tje(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function nje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,p7(r.key),r)}}function rje(t,e,n){return e&&W4(t.prototype,e),n&&W4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ije(t,e,n){return e=Xb(e),sje(t,h7()?Reflect.construct(e,n||[],Xb(t).constructor):e.apply(t,n))}function sje(t,e){if(e&&(uh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aje(t)}function aje(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h7=function(){return!!t})()}function Xb(t){return Xb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xb(t)}function oje(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P2(t,e)}function P2(t,e){return P2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},P2(t,e)}function s1(t,e,n){return e=p7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p7(t){var e=lje(t,"string");return uh(e)=="symbol"?e:e+""}function lje(t,e){if(uh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(uh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var a1=function(t){function e(){return nje(this,e),ije(this,e,arguments)}return oje(e,t),rje(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,s=this.props,a=s.angle,o=s.cx,c=s.cy;return xn(o,c,i,a)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,s=r.cy,a=r.angle,o=r.ticks,c=K2e(o,function(d){return d.coordinate||0}),u=Z2e(o,function(d){return d.coordinate||0});return{cx:i,cy:s,startAngle:a,endAngle:a,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,s=r.cy,a=r.angle,o=r.ticks,c=r.axisLine,u=U4(r,J2e),d=o.reduce(function(g,m){return[Math.min(g[0],m.coordinate),Math.max(g[1],m.coordinate)]},[1/0,-1/0]),f=xn(i,s,d[0],a),h=xn(i,s,d[1],a),p=zc(zc(zc({},lt(u,!1)),{},{fill:"none"},lt(c,!1)),{},{x1:f.x,y1:f.y,x2:h.x,y2:h.y});return q.createElement("line",Cm({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var r=this,i=this.props,s=i.ticks,a=i.tick,o=i.angle,c=i.tickFormatter,u=i.stroke,d=U4(i,eje),f=this.getTickTextAnchor(),h=lt(d,!1),p=lt(a,!1),g=s.map(function(m,y){var x=r.getTickValueCoord(m),w=zc(zc(zc(zc({textAnchor:f,transform:"rotate(".concat(90-o,", ").concat(x.x,", ").concat(x.y,")")},h),{},{stroke:"none",fill:u},p),{},{index:y},x),{},{payload:m});return q.createElement(Ot,Cm({className:Tt("recharts-polar-radius-axis-tick",J9(a)),key:"tick-".concat(m.coordinate)},Lu(r.props,m,y)),e.renderTickItem(a,w,c?c(m.value,y):m.value))});return q.createElement(Ot,{className:"recharts-polar-radius-axis-ticks"},g)}},{key:"render",value:function(){var r=this.props,i=r.ticks,s=r.axisLine,a=r.tick;return!i||!i.length?null:q.createElement(Ot,{className:Tt("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),a&&this.renderTicks(),Ir.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,s){var a;return q.isValidElement(r)?a=q.cloneElement(r,i):vt(r)?a=r(i):a=q.createElement(zu,Cm({},i,{className:"recharts-polar-radius-axis-tick-value"}),s),a}}])}(N.PureComponent);s1(a1,"displayName","PolarRadiusAxis");s1(a1,"axisType","radiusAxis");s1(a1,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function dh(t){"@babel/helpers - typeof";return dh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dh(t)}function Zc(){return Zc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zc.apply(this,arguments)}function H4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $c(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H4(Object(n),!0).forEach(function(r){o1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function K4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,g7(r.key),r)}}function uje(t,e,n){return e&&K4(t.prototype,e),n&&K4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function dje(t,e,n){return e=Zb(e),fje(t,m7()?Reflect.construct(e,n||[],Zb(t).constructor):e.apply(t,n))}function fje(t,e){if(e&&(dh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hje(t)}function hje(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(m7=function(){return!!t})()}function Zb(t){return Zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zb(t)}function pje(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k2(t,e)}function k2(t,e){return k2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},k2(t,e)}function o1(t,e,n){return e=g7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g7(t){var e=mje(t,"string");return dh(e)=="symbol"?e:e+""}function mje(t,e){if(dh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(dh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var gje=Math.PI/180,q4=1e-5,l1=function(t){function e(){return cje(this,e),dje(this,e,arguments)}return pje(e,t),uje(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,s=i.cx,a=i.cy,o=i.radius,c=i.orientation,u=i.tickSize,d=u||8,f=xn(s,a,o,r.coordinate),h=xn(s,a,o+(c==="inner"?-1:1)*d,r.coordinate);return{x1:f.x,y1:f.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,s=Math.cos(-r.coordinate*gje),a;return s>q4?a=i==="outer"?"start":"end":s<-q4?a=i==="outer"?"end":"start":a="middle",a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,s=r.cy,a=r.radius,o=r.axisLine,c=r.axisLineType,u=$c($c({},lt(this.props,!1)),{},{fill:"none"},lt(o,!1));if(c==="circle")return q.createElement(Dv,Zc({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:s,r:a}));var d=this.props.ticks,f=d.map(function(h){return xn(i,s,a,h.coordinate)});return q.createElement(k2e,Zc({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,s=i.ticks,a=i.tick,o=i.tickLine,c=i.tickFormatter,u=i.stroke,d=lt(this.props,!1),f=lt(a,!1),h=$c($c({},d),{},{fill:"none"},lt(o,!1)),p=s.map(function(g,m){var y=r.getTickLineCoord(g),x=r.getTickTextAnchor(g),w=$c($c($c({textAnchor:x},d),{},{stroke:"none",fill:u},f),{},{index:m,payload:g,x:y.x2,y:y.y2});return q.createElement(Ot,Zc({className:Tt("recharts-polar-angle-axis-tick",J9(a)),key:"tick-".concat(g.coordinate)},Lu(r.props,g,m)),o&&q.createElement("line",Zc({className:"recharts-polar-angle-axis-tick-line"},h,y)),a&&e.renderTickItem(a,w,c?c(g.value,m):g.value))});return q.createElement(Ot,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var r=this.props,i=r.ticks,s=r.radius,a=r.axisLine;return s<=0||!i||!i.length?null:q.createElement(Ot,{className:Tt("recharts-polar-angle-axis",this.props.className)},a&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,s){var a;return q.isValidElement(r)?a=q.cloneElement(r,i):vt(r)?a=r(i):a=q.createElement(zu,Zc({},i,{className:"recharts-polar-angle-axis-tick-value"}),s),a}}])}(N.PureComponent);o1(l1,"displayName","PolarAngleAxis");o1(l1,"axisType","angleAxis");o1(l1,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var vje=xB,yje=vje(Object.getPrototypeOf,Object),bje=yje,xje=Ko,wje=bje,_je=qo,Sje="[object Object]",Aje=Function.prototype,Eje=Object.prototype,v7=Aje.toString,jje=Eje.hasOwnProperty,Cje=v7.call(Object);function Tje(t){if(!_je(t)||xje(t)!=Sje)return!1;var e=wje(t);if(e===null)return!0;var n=jje.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&v7.call(n)==Cje}var Nje=Tje;const Pje=tn(Nje);var kje=Ko,Dje=qo,Ije="[object Boolean]";function Oje(t){return t===!0||t===!1||Dje(t)&&kje(t)==Ije}var Mje=Oje;const Rje=tn(Mje);function Vg(t){"@babel/helpers - typeof";return Vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vg(t)}function Jb(){return Jb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jb.apply(this,arguments)}function Lje(t,e){return Vje(t)||Fje(t,e)||$je(t,e)||zje()}function zje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $je(t,e){if(t){if(typeof t=="string")return G4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G4(t,e)}}function G4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Fje(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function Vje(t){if(Array.isArray(t))return t}function Y4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Q4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y4(Object(n),!0).forEach(function(r){Bje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bje(t,e,n){return e=Uje(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uje(t){var e=Wje(t,"string");return Vg(e)=="symbol"?e:e+""}function Wje(t,e){if(Vg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var X4=function(e,n,r,i,s){var a=r-i,o;return o="M ".concat(e,",").concat(n),o+="L ".concat(e+r,",").concat(n),o+="L ".concat(e+r-a/2,",").concat(n+s),o+="L ".concat(e+r-a/2-i,",").concat(n+s),o+="L ".concat(e,",").concat(n," Z"),o},Hje={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Kje=function(e){var n=Q4(Q4({},Hje),e),r=N.useRef(),i=N.useState(-1),s=Lje(i,2),a=s[0],o=s[1];N.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var _=r.current.getTotalLength();_&&o(_)}catch{}},[]);var c=n.x,u=n.y,d=n.upperWidth,f=n.lowerWidth,h=n.height,p=n.className,g=n.animationEasing,m=n.animationDuration,y=n.animationBegin,x=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||h!==+h||d===0&&f===0||h===0)return null;var w=Tt("recharts-trapezoid",p);return x?q.createElement(da,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:h,x:c,y:u},duration:m,animationEasing:g,isActive:x},function(_){var A=_.upperWidth,E=_.lowerWidth,C=_.height,j=_.x,T=_.y;return q.createElement(da,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:m,easing:g},q.createElement("path",Jb({},lt(n,!0),{className:w,d:X4(j,T,A,E,C),ref:r})))}):q.createElement("g",null,q.createElement("path",Jb({},lt(n,!0),{className:w,d:X4(c,u,d,f,h)})))},qje=["option","shapeType","propTransformer","activeClassName","isActive"];function Bg(t){"@babel/helpers - typeof";return Bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bg(t)}function Gje(t,e){if(t==null)return{};var n=Yje(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Yje(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Z4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ex(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z4(Object(n),!0).forEach(function(r){Qje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qje(t,e,n){return e=Xje(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xje(t){var e=Zje(t,"string");return Bg(e)=="symbol"?e:e+""}function Zje(t,e){if(Bg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jje(t,e){return ex(ex({},e),t)}function eCe(t,e){return t==="symbols"}function J4(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return q.createElement(WN,n);case"trapezoid":return q.createElement(Kje,n);case"sector":return q.createElement(n7,n);case"symbols":if(eCe(e))return q.createElement(cN,n);break;default:return null}}function tCe(t){return N.isValidElement(t)?t.props:t}function y7(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?Jje:r,s=t.activeClassName,a=s===void 0?"recharts-active-shape":s,o=t.isActive,c=Gje(t,qje),u;if(N.isValidElement(e))u=N.cloneElement(e,ex(ex({},c),tCe(e)));else if(vt(e))u=e(c);else if(Pje(e)&&!Rje(e)){var d=i(e,c);u=q.createElement(J4,{shapeType:n,elementProps:d})}else{var f=c;u=q.createElement(J4,{shapeType:n,elementProps:f})}return o?q.createElement(Ot,{className:a},u):u}function c1(t,e){return e!=null&&"trapezoids"in t.props}function u1(t,e){return e!=null&&"sectors"in t.props}function Ug(t,e){return e!=null&&"points"in t.props}function nCe(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,s=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&s}function rCe(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function iCe(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function sCe(t,e){var n;return c1(t,e)?n=nCe:u1(t,e)?n=rCe:Ug(t,e)&&(n=iCe),n}function aCe(t,e){var n;return c1(t,e)?n="trapezoids":u1(t,e)?n="sectors":Ug(t,e)&&(n="points"),n}function oCe(t,e){if(c1(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(u1(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Ug(t,e)?e.payload:{}}function lCe(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=aCe(n,e),s=oCe(n,e),a=r.filter(function(c,u){var d=$u(s,c),f=n.props[i].filter(function(g){var m=sCe(n,e);return m(g,e)}),h=n.props[i].indexOf(f[f.length-1]),p=u===h;return d&&p}),o=r.indexOf(a[a.length-1]);return o}var p0;function fh(t){"@babel/helpers - typeof";return fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fh(t)}function cf(){return cf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cf.apply(this,arguments)}function e5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e5(Object(n),!0).forEach(function(r){Ns(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function t5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,x7(r.key),r)}}function uCe(t,e,n){return e&&t5(t.prototype,e),n&&t5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function dCe(t,e,n){return e=tx(e),fCe(t,b7()?Reflect.construct(e,n||[],tx(t).constructor):e.apply(t,n))}function fCe(t,e){if(e&&(fh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hCe(t)}function hCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(b7=function(){return!!t})()}function tx(t){return tx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},tx(t)}function pCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&D2(t,e)}function D2(t,e){return D2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},D2(t,e)}function Ns(t,e,n){return e=x7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x7(t){var e=mCe(t,"string");return fh(e)=="symbol"?e:e+""}function mCe(t,e){if(fh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(fh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var fa=function(t){function e(n){var r;return cCe(this,e),r=dCe(this,e,[n]),Ns(r,"pieRef",null),Ns(r,"sectorRefs",[]),Ns(r,"id",rd("recharts-pie-")),Ns(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),vt(i)&&i()}),Ns(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),vt(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return pCe(e,t),uCe(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.label,o=s.labelLine,c=s.dataKey,u=s.valueKey,d=lt(this.props,!1),f=lt(a,!1),h=lt(o,!1),p=a&&a.offsetRadius||20,g=r.map(function(m,y){var x=(m.startAngle+m.endAngle)/2,w=xn(m.cx,m.cy,m.outerRadius+p,x),_=vn(vn(vn(vn({},d),m),{},{stroke:"none"},f),{},{index:y,textAnchor:e.getTextAnchor(w.x,m.cx)},w),A=vn(vn(vn(vn({},d),m),{},{fill:"none",stroke:m.fill},h),{},{index:y,points:[xn(m.cx,m.cy,m.outerRadius,x),w]}),E=c;return _t(c)&&_t(u)?E="value":_t(c)&&(E=u),q.createElement(Ot,{key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(y)},o&&e.renderLabelLineItem(o,A,"line"),e.renderLabelItem(a,_,rr(m,E)))});return q.createElement(Ot,{className:"recharts-pie-labels"},g)}},{key:"renderSectorsStatically",value:function(r){var i=this,s=this.props,a=s.activeShape,o=s.blendStroke,c=s.inactiveShape;return r.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&r.length!==1)return null;var f=i.isActiveIndex(d),h=c&&i.hasActiveIndex()?c:null,p=f?a:h,g=vn(vn({},u),{},{stroke:o?u.fill:u.stroke,tabIndex:-1});return q.createElement(Ot,cf({ref:function(y){y&&!i.sectorRefs.includes(y)&&i.sectorRefs.push(y)},tabIndex:-1,className:"recharts-pie-sector"},Lu(i.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),q.createElement(y7,cf({option:p,isActive:f,shapeType:"sector"},g)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,s=i.sectors,a=i.isAnimationActive,o=i.animationBegin,c=i.animationDuration,u=i.animationEasing,d=i.animationId,f=this.state,h=f.prevSectors,p=f.prevIsAnimationActive;return q.createElement(da,{begin:o,duration:c,isActive:a,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(g){var m=g.t,y=[],x=s&&s[0],w=x.startAngle;return s.forEach(function(_,A){var E=h&&h[A],C=A>0?os(_,"paddingAngle",0):0;if(E){var j=_r(E.endAngle-E.startAngle,_.endAngle-_.startAngle),T=vn(vn({},_),{},{startAngle:w+C,endAngle:w+j(m)+C});y.push(T),w=T.endAngle}else{var P=_.endAngle,I=_.startAngle,M=_r(0,P-I),F=M(m),R=vn(vn({},_),{},{startAngle:w+C,endAngle:w+F+C});y.push(R),w=R.endAngle}}),q.createElement(Ot,null,r.renderSectorsStatically(y))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var a=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[a].focus(),i.setState({sectorToFocus:a});break}case"ArrowRight":{var o=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,s=r.isAnimationActive,a=this.state.prevSectors;return s&&i&&i.length&&(!a||!$u(a,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,s=i.hide,a=i.sectors,o=i.className,c=i.label,u=i.cx,d=i.cy,f=i.innerRadius,h=i.outerRadius,p=i.isAnimationActive,g=this.state.isAnimationFinished;if(s||!a||!a.length||!Ie(u)||!Ie(d)||!Ie(f)||!Ie(h))return null;var m=Tt("recharts-pie",o);return q.createElement(Ot,{tabIndex:this.props.rootTabIndex,className:m,ref:function(x){r.pieRef=x}},this.renderSectors(),c&&this.renderLabels(a),Ir.renderCallByParent(this.props,null,!1),(!p||g)&&cs.renderCallByParent(this.props,a,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,s){if(q.isValidElement(r))return q.cloneElement(r,i);if(vt(r))return r(i);var a=Tt("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return q.createElement(_u,cf({},i,{key:s,type:"linear",className:a}))}},{key:"renderLabelItem",value:function(r,i,s){if(q.isValidElement(r))return q.cloneElement(r,i);var a=s;if(vt(r)&&(a=r(i),q.isValidElement(a)))return a;var o=Tt("recharts-pie-label-text",typeof r!="boolean"&&!vt(r)?r.className:"");return q.createElement(zu,cf({},i,{alignmentBaseline:"middle",className:o}),a)}}])}(N.PureComponent);p0=fa;Ns(fa,"displayName","Pie");Ns(fa,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!uc.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Ns(fa,"parseDeltaAngle",function(t,e){var n=Si(e-t),r=Math.min(Math.abs(e-t),360);return n*r});Ns(fa,"getRealPieData",function(t){var e=t.data,n=t.children,r=lt(t,!1),i=ls(n,Ms);return e&&e.length?e.map(function(s,a){return vn(vn(vn({payload:s},r),s),i&&i[a]&&i[a].props)}):i&&i.length?i.map(function(s){return vn(vn({},r),s.props)}):[]});Ns(fa,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,i=e.width,s=e.height,a=Z9(i,s),o=r+Ai(t.cx,i,i/2),c=n+Ai(t.cy,s,s/2),u=Ai(t.innerRadius,a,0),d=Ai(t.outerRadius,a,a*.8),f=t.maxRadius||Math.sqrt(i*i+s*s)/2;return{cx:o,cy:c,innerRadius:u,outerRadius:d,maxRadius:f}});Ns(fa,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?vn(vn({},e.type.defaultProps),e.props):e.props,i=p0.getRealPieData(r);if(!i||!i.length)return null;var s=r.cornerRadius,a=r.startAngle,o=r.endAngle,c=r.paddingAngle,u=r.dataKey,d=r.nameKey,f=r.valueKey,h=r.tooltipType,p=Math.abs(r.minAngle),g=p0.parseCoordinateOfPie(r,n),m=p0.parseDeltaAngle(a,o),y=Math.abs(m),x=u;_t(u)&&_t(f)?(sa(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x="value"):_t(u)&&(sa(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x=f);var w=i.filter(function(T){return rr(T,x,0)!==0}).length,_=(y>=360?w:w-1)*c,A=y-w*p-_,E=i.reduce(function(T,P){var I=rr(P,x,0);return T+(Ie(I)?I:0)},0),C;if(E>0){var j;C=i.map(function(T,P){var I=rr(T,x,0),M=rr(T,d,P),F=(Ie(I)?I:0)/E,R;P?R=j.endAngle+Si(m)*c*(I!==0?1:0):R=a;var H=R+Si(m)*((I!==0?p:0)+F*A),X=(R+H)/2,W=(g.innerRadius+g.outerRadius)/2,U=[{name:M,value:I,payload:T,dataKey:x,type:h}],$=xn(g.cx,g.cy,W,X);return j=vn(vn(vn({percent:F,cornerRadius:s,name:M,tooltipPayload:U,midAngle:X,middleRadius:W,tooltipPosition:$},T),g),{},{value:rr(T,x),startAngle:R,endAngle:H,payload:T,paddingAngle:Si(m)*c}),j})}return vn(vn({},g),{},{sectors:C,data:i})});var gCe=Math.ceil,vCe=Math.max;function yCe(t,e,n,r){for(var i=-1,s=vCe(gCe((e-t)/(n||1)),0),a=Array(s);s--;)a[r?s:++i]=t,t+=n;return a}var bCe=yCe,xCe=$B,n5=1/0,wCe=17976931348623157e292;function _Ce(t){if(!t)return t===0?t:0;if(t=xCe(t),t===n5||t===-n5){var e=t<0?-1:1;return e*wCe}return t===t?t:0}var w7=_Ce,SCe=bCe,ACe=Gw,lS=w7;function ECe(t){return function(e,n,r){return r&&typeof r!="number"&&ACe(e,n,r)&&(n=r=void 0),e=lS(e),n===void 0?(n=e,e=0):n=lS(n),r=r===void 0?e<n?1:-1:lS(r),SCe(e,n,r,t)}}var jCe=ECe,CCe=jCe,TCe=CCe(),NCe=TCe;const nx=tn(NCe);function Wg(t){"@babel/helpers - typeof";return Wg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wg(t)}function r5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function i5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r5(Object(n),!0).forEach(function(r){_7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _7(t,e,n){return e=PCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PCe(t){var e=kCe(t,"string");return Wg(e)=="symbol"?e:e+""}function kCe(t,e){if(Wg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Wg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var DCe=["Webkit","Moz","O","ms"],ICe=function(e,n){var r=e.replace(/(\w)/,function(s){return s.toUpperCase()}),i=DCe.reduce(function(s,a){return i5(i5({},s),{},_7({},a+r,n))},{});return i[e]=n,i};function hh(t){"@babel/helpers - typeof";return hh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hh(t)}function rx(){return rx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rx.apply(this,arguments)}function s5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s5(Object(n),!0).forEach(function(r){Xi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function OCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A7(r.key),r)}}function MCe(t,e,n){return e&&a5(t.prototype,e),n&&a5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function RCe(t,e,n){return e=ix(e),LCe(t,S7()?Reflect.construct(e,n||[],ix(t).constructor):e.apply(t,n))}function LCe(t,e){if(e&&(hh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zCe(t)}function zCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(S7=function(){return!!t})()}function ix(t){return ix=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ix(t)}function $Ce(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&I2(t,e)}function I2(t,e){return I2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},I2(t,e)}function Xi(t,e,n){return e=A7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A7(t){var e=FCe(t,"string");return hh(e)=="symbol"?e:e+""}function FCe(t,e){if(hh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var VCe=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,s=e.x,a=e.width,o=e.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=Sm().domain(nx(0,c)).range([s,s+a-o]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:d}},o5=function(e){return e.changedTouches&&!!e.changedTouches.length},ph=function(t){function e(n){var r;return OCe(this,e),r=RCe(this,e,[n]),Xi(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),Xi(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),Xi(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,s=i.endIndex,a=i.onDragEnd,o=i.startIndex;a==null||a({endIndex:s,startIndex:o})}),r.detachDragEndListener()}),Xi(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Xi(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Xi(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Xi(r,"handleSlideDragStart",function(i){var s=o5(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return $Ce(e,t),MCe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,s=r.endX,a=this.state.scaleValues,o=this.props,c=o.gap,u=o.data,d=u.length-1,f=Math.min(i,s),h=Math.max(i,s),p=e.getIndexInRange(a,f),g=e.getIndexInRange(a,h);return{startIndex:p-p%c,endIndex:g===d?d:g-g%c}}},{key:"getTextOfTick",value:function(r){var i=this.props,s=i.data,a=i.tickFormatter,o=i.dataKey,c=rr(s[r],o,r);return vt(a)?a(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,s=i.slideMoveStartX,a=i.startX,o=i.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,h=c.startIndex,p=c.endIndex,g=c.onChange,m=r.pageX-s;m>0?m=Math.min(m,u+d-f-o,u+d-f-a):m<0&&(m=Math.max(m,u-a,u-o));var y=this.getIndex({startX:a+m,endX:o+m});(y.startIndex!==h||y.endIndex!==p)&&g&&g(y),this.setState({startX:a+m,endX:o+m,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var s=o5(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,s=i.brushMoveStartX,a=i.movingTravellerId,o=i.endX,c=i.startX,u=this.state[a],d=this.props,f=d.x,h=d.width,p=d.travellerWidth,g=d.onChange,m=d.gap,y=d.data,x={startX:this.state.startX,endX:this.state.endX},w=r.pageX-s;w>0?w=Math.min(w,f+h-p-u):w<0&&(w=Math.max(w,f-u)),x[a]=u+w;var _=this.getIndex(x),A=_.startIndex,E=_.endIndex,C=function(){var T=y.length-1;return a==="startX"&&(o>c?A%m===0:E%m===0)||o<c&&E===T||a==="endX"&&(o>c?E%m===0:A%m===0)||o>c&&E===T};this.setState(Xi(Xi({},a,u+w),"brushMoveStartX",r.pageX),function(){g&&C()&&g(_)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var s=this,a=this.state,o=a.scaleValues,c=a.startX,u=a.endX,d=this.state[i],f=o.indexOf(d);if(f!==-1){var h=f+r;if(!(h===-1||h>=o.length)){var p=o[h];i==="startX"&&p>=u||i==="endX"&&p<=c||this.setState(Xi({},i,p),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,s=r.y,a=r.width,o=r.height,c=r.fill,u=r.stroke;return q.createElement("rect",{stroke:u,fill:c,x:i,y:s,width:a,height:o})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,s=r.y,a=r.width,o=r.height,c=r.data,u=r.children,d=r.padding,f=N.Children.only(u);return f?q.cloneElement(f,{x:i,y:s,width:a,height:o,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,i){var s,a,o=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,h=c.traveller,p=c.ariaLabel,g=c.data,m=c.startIndex,y=c.endIndex,x=Math.max(r,this.props.x),w=cS(cS({},lt(this.props,!1)),{},{x,y:u,width:d,height:f}),_=p||"Min value: ".concat((s=g[m])===null||s===void 0?void 0:s.name,", Max value: ").concat((a=g[y])===null||a===void 0?void 0:a.name);return q.createElement(Ot,{tabIndex:0,role:"slider","aria-label":_,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(E){["ArrowLeft","ArrowRight"].includes(E.key)&&(E.preventDefault(),E.stopPropagation(),o.handleTravellerMoveKeyboard(E.key==="ArrowRight"?1:-1,i))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(h,w))}},{key:"renderSlide",value:function(r,i){var s=this.props,a=s.y,o=s.height,c=s.stroke,u=s.travellerWidth,d=Math.min(r,i)+u,f=Math.max(Math.abs(i-r)-u,0);return q.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:a,width:f,height:o})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,s=r.endIndex,a=r.y,o=r.height,c=r.travellerWidth,u=r.stroke,d=this.state,f=d.startX,h=d.endX,p=5,g={pointerEvents:"none",fill:u};return q.createElement(Ot,{className:"recharts-brush-texts"},q.createElement(zu,rx({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-p,y:a+o/2},g),this.getTextOfTick(i)),q.createElement(zu,rx({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+c+p,y:a+o/2},g),this.getTextOfTick(s)))}},{key:"render",value:function(){var r=this.props,i=r.data,s=r.className,a=r.children,o=r.x,c=r.y,u=r.width,d=r.height,f=r.alwaysShowText,h=this.state,p=h.startX,g=h.endX,m=h.isTextActive,y=h.isSlideMoving,x=h.isTravellerMoving,w=h.isTravellerFocused;if(!i||!i.length||!Ie(o)||!Ie(c)||!Ie(u)||!Ie(d)||u<=0||d<=0)return null;var _=Tt("recharts-brush",s),A=q.Children.count(a)===1,E=ICe("userSelect","none");return q.createElement(Ot,{className:_,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:E},this.renderBackground(),A&&this.renderPanorama(),this.renderSlide(p,g),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(g,"endX"),(m||y||x||w||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,s=r.y,a=r.width,o=r.height,c=r.stroke,u=Math.floor(s+o/2)-1;return q.createElement(q.Fragment,null,q.createElement("rect",{x:i,y:s,width:a,height:o,fill:c,stroke:"none"}),q.createElement("line",{x1:i+1,y1:u,x2:i+a-1,y2:u,fill:"none",stroke:"#fff"}),q.createElement("line",{x1:i+1,y1:u+2,x2:i+a-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var s;return q.isValidElement(r)?s=q.cloneElement(r,i):vt(r)?s=r(i):s=e.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(r,i){var s=r.data,a=r.width,o=r.x,c=r.travellerWidth,u=r.updateId,d=r.startIndex,f=r.endIndex;if(s!==i.prevData||u!==i.prevUpdateId)return cS({prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:o,prevWidth:a},s&&s.length?VCe({data:s,width:a,x:o,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(a!==i.prevWidth||o!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([o,o+a-c]);var h=i.scale.domain().map(function(p){return i.scale(p)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:o,prevWidth:a,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,i){for(var s=r.length,a=0,o=s-1;o-a>1;){var c=Math.floor((a+o)/2);r[c]>i?o=c:a=c}return i>=r[o]?o:a}}])}(N.PureComponent);Xi(ph,"displayName","Brush");Xi(ph,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var BCe=gN;function UCe(t,e){var n;return BCe(t,function(r,i,s){return n=e(r,i,s),!n}),!!n}var WCe=UCe,HCe=fB,KCe=eo,qCe=WCe,GCe=Ki,YCe=Gw;function QCe(t,e,n){var r=GCe(t)?HCe:qCe;return n&&YCe(t,e,n)&&(e=void 0),r(t,KCe(e))}var XCe=QCe;const ZCe=tn(XCe);var Ka=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},l5=OB;function JCe(t,e,n){e=="__proto__"&&l5?l5(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var eTe=JCe,tTe=eTe,nTe=DB,rTe=eo;function iTe(t,e){var n={};return e=rTe(e),nTe(t,function(r,i,s){tTe(n,i,e(r,i,s))}),n}var sTe=iTe;const aTe=tn(sTe);function oTe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var lTe=oTe,cTe=gN;function uTe(t,e){var n=!0;return cTe(t,function(r,i,s){return n=!!e(r,i,s),n}),n}var dTe=uTe,fTe=lTe,hTe=dTe,pTe=eo,mTe=Ki,gTe=Gw;function vTe(t,e,n){var r=mTe(t)?fTe:hTe;return n&&gTe(t,e,n)&&(e=void 0),r(t,pTe(e))}var yTe=vTe;const E7=tn(yTe);var bTe=["x","y"];function Hg(t){"@babel/helpers - typeof";return Hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hg(t)}function O2(){return O2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},O2.apply(this,arguments)}function c5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?c5(Object(n),!0).forEach(function(r){xTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xTe(t,e,n){return e=wTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wTe(t){var e=_Te(t,"string");return Hg(e)=="symbol"?e:e+""}function _Te(t,e){if(Hg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Hg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function STe(t,e){if(t==null)return{};var n=ATe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ATe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ETe(t,e){var n=t.x,r=t.y,i=STe(t,bTe),s="".concat(n),a=parseInt(s,10),o="".concat(r),c=parseInt(o,10),u="".concat(e.height||i.height),d=parseInt(u,10),f="".concat(e.width||i.width),h=parseInt(f,10);return Vp(Vp(Vp(Vp(Vp({},e),i),a?{x:a}:{}),c?{y:c}:{}),{},{height:d,width:h,name:e.name,radius:e.radius})}function u5(t){return q.createElement(y7,O2({shapeType:"rectangle",propTransformer:ETe,activeClassName:"recharts-active-bar"},t))}var jTe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var s=Ie(r)||Xce(r);return s?e(r,i):(s||Vu(),n)}},CTe=["value","background"],j7;function mh(t){"@babel/helpers - typeof";return mh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mh(t)}function TTe(t,e){if(t==null)return{};var n=NTe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function NTe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function sx(){return sx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sx.apply(this,arguments)}function d5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?d5(Object(n),!0).forEach(function(r){Tl(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,T7(r.key),r)}}function kTe(t,e,n){return e&&f5(t.prototype,e),n&&f5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function DTe(t,e,n){return e=ax(e),ITe(t,C7()?Reflect.construct(e,n||[],ax(t).constructor):e.apply(t,n))}function ITe(t,e){if(e&&(mh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OTe(t)}function OTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C7=function(){return!!t})()}function ax(t){return ax=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ax(t)}function MTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M2(t,e)}function M2(t,e){return M2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},M2(t,e)}function Tl(t,e,n){return e=T7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T7(t){var e=RTe(t,"string");return mh(e)=="symbol"?e:e+""}function RTe(t,e){if(mh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(mh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Lr=function(t){function e(){var n;PTe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=DTe(this,e,[].concat(i)),Tl(n,"state",{isAnimationFinished:!1}),Tl(n,"id",rd("recharts-bar-")),Tl(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),a&&a()}),Tl(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),a&&a()}),n}return MTe(e,t),kTe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,s=this.props,a=s.shape,o=s.dataKey,c=s.activeIndex,u=s.activeBar,d=lt(this.props,!1);return r&&r.map(function(f,h){var p=h===c,g=p?u:a,m=dr(dr(dr({},d),f),{},{isActive:p,option:g,index:h,dataKey:o,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return q.createElement(Ot,sx({className:"recharts-bar-rectangle"},Lu(i.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(h)}),q.createElement(u5,m))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,s=i.data,a=i.layout,o=i.isAnimationActive,c=i.animationBegin,u=i.animationDuration,d=i.animationEasing,f=i.animationId,h=this.state.prevData;return q.createElement(da,{begin:c,duration:u,isActive:o,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var g=p.t,m=s.map(function(y,x){var w=h&&h[x];if(w){var _=_r(w.x,y.x),A=_r(w.y,y.y),E=_r(w.width,y.width),C=_r(w.height,y.height);return dr(dr({},y),{},{x:_(g),y:A(g),width:E(g),height:C(g)})}if(a==="horizontal"){var j=_r(0,y.height),T=j(g);return dr(dr({},y),{},{y:y.y+y.height-T,height:T})}var P=_r(0,y.width),I=P(g);return dr(dr({},y),{},{width:I})});return q.createElement(Ot,null,r.renderRectanglesStatically(m))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,s=r.isAnimationActive,a=this.state.prevData;return s&&i&&i.length&&(!a||!$u(a,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,s=i.data,a=i.dataKey,o=i.activeIndex,c=lt(this.props.background,!1);return s.map(function(u,d){u.value;var f=u.background,h=TTe(u,CTe);if(!f)return null;var p=dr(dr(dr(dr(dr({},h),{},{fill:"#eee"},f),c),Lu(r.props,u,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:a,index:d,className:"recharts-bar-background-rectangle"});return q.createElement(u5,sx({key:"background-bar-".concat(d),option:r.props.background,isActive:d===o},p))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.data,o=s.xAxis,c=s.yAxis,u=s.layout,d=s.children,f=ls(d,kv);if(!f)return null;var h=u==="vertical"?a[0].height/2:a[0].width/2,p=function(y,x){var w=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:w,errorVal:rr(y,x)}},g={clipPath:r?"url(#clipPath-".concat(i,")"):null};return q.createElement(Ot,g,f.map(function(m){return q.cloneElement(m,{key:"error-bar-".concat(i,"-").concat(m.props.dataKey),data:a,xAxis:o,yAxis:c,layout:u,offset:h,dataPointFormatter:p})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,s=r.data,a=r.className,o=r.xAxis,c=r.yAxis,u=r.left,d=r.top,f=r.width,h=r.height,p=r.isAnimationActive,g=r.background,m=r.id;if(i||!s||!s.length)return null;var y=this.state.isAnimationFinished,x=Tt("recharts-bar",a),w=o&&o.allowDataOverflow,_=c&&c.allowDataOverflow,A=w||_,E=_t(m)?this.id:m;return q.createElement(Ot,{className:x},w||_?q.createElement("defs",null,q.createElement("clipPath",{id:"clipPath-".concat(E)},q.createElement("rect",{x:w?u:u-f/2,y:_?d:d-h/2,width:w?f:f*2,height:_?h:h*2}))):null,q.createElement(Ot,{className:"recharts-bar-rectangles",clipPath:A?"url(#clipPath-".concat(E,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(A,E),(!p||y)&&cs.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(N.PureComponent);j7=Lr;Tl(Lr,"displayName","Bar");Tl(Lr,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!uc.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Tl(Lr,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,s=t.xAxis,a=t.yAxis,o=t.xAxisTicks,c=t.yAxisTicks,u=t.stackedData,d=t.dataStartIndex,f=t.displayedData,h=t.offset,p=mSe(r,n);if(!p)return null;var g=e.layout,m=n.type.defaultProps,y=m!==void 0?dr(dr({},m),n.props):n.props,x=y.dataKey,w=y.children,_=y.minPointSize,A=g==="horizontal"?a:s,E=u?A.scale.domain():null,C=_Se({numericAxis:A}),j=ls(w,Ms),T=f.map(function(P,I){var M,F,R,H,X,W;u?M=gSe(u[d+I],E):(M=rr(P,x),Array.isArray(M)||(M=[C,M]));var U=jTe(_,j7.defaultProps.minPointSize)(M[1],I);if(g==="horizontal"){var $,Y=[a.scale(M[0]),a.scale(M[1])],Q=Y[0],ce=Y[1];F=t4({axis:s,ticks:o,bandSize:i,offset:p.offset,entry:P,index:I}),R=($=ce??Q)!==null&&$!==void 0?$:void 0,H=p.size;var ie=Q-ce;if(X=Number.isNaN(ie)?0:ie,W={x:F,y:a.y,width:H,height:a.height},Math.abs(U)>0&&Math.abs(X)<Math.abs(U)){var oe=Si(X||U)*(Math.abs(U)-Math.abs(X));R-=oe,X+=oe}}else{var ve=[s.scale(M[0]),s.scale(M[1])],je=ve[0],Se=ve[1];if(F=je,R=t4({axis:a,ticks:c,bandSize:i,offset:p.offset,entry:P,index:I}),H=Se-je,X=p.size,W={x:s.x,y:R,width:s.width,height:X},Math.abs(U)>0&&Math.abs(H)<Math.abs(U)){var Me=Si(H||U)*(Math.abs(U)-Math.abs(H));H+=Me}}return dr(dr(dr({},P),{},{x:F,y:R,width:H,height:X,value:u?M:M[1],payload:P,background:W},j&&j[I]&&j[I].props),{},{tooltipPayload:[Q9(n,P)],tooltipPosition:{x:F+H/2,y:R+X/2}})});return dr({data:T,layout:g},h)});function Kg(t){"@babel/helpers - typeof";return Kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kg(t)}function LTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,N7(r.key),r)}}function zTe(t,e,n){return e&&h5(t.prototype,e),n&&h5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function p5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Js(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?p5(Object(n),!0).forEach(function(r){d1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function d1(t,e,n){return e=N7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function N7(t){var e=$Te(t,"string");return Kg(e)=="symbol"?e:e+""}function $Te(t,e){if(Kg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Kg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var HN=function(e,n,r,i,s){var a=e.width,o=e.height,c=e.layout,u=e.children,d=Object.keys(n),f={left:r.left,leftMirror:r.left,right:a-r.right,rightMirror:a-r.right,top:r.top,topMirror:r.top,bottom:o-r.bottom,bottomMirror:o-r.bottom},h=!!Ji(u,Lr);return d.reduce(function(p,g){var m=n[g],y=m.orientation,x=m.domain,w=m.padding,_=w===void 0?{}:w,A=m.mirror,E=m.reversed,C="".concat(y).concat(A?"Mirror":""),j,T,P,I,M;if(m.type==="number"&&(m.padding==="gap"||m.padding==="no-gap")){var F=x[1]-x[0],R=1/0,H=m.categoricalDomain.sort(eue);if(H.forEach(function(ve,je){je>0&&(R=Math.min((ve||0)-(H[je-1]||0),R))}),Number.isFinite(R)){var X=R/F,W=m.layout==="vertical"?r.height:r.width;if(m.padding==="gap"&&(j=X*W/2),m.padding==="no-gap"){var U=Ai(e.barCategoryGap,X*W),$=X*W/2;j=$-U-($-U)/W*U}}}i==="xAxis"?T=[r.left+(_.left||0)+(j||0),r.left+r.width-(_.right||0)-(j||0)]:i==="yAxis"?T=c==="horizontal"?[r.top+r.height-(_.bottom||0),r.top+(_.top||0)]:[r.top+(_.top||0)+(j||0),r.top+r.height-(_.bottom||0)-(j||0)]:T=m.range,E&&(T=[T[1],T[0]]);var Y=K9(m,s,h),Q=Y.scale,ce=Y.realScaleType;Q.domain(x).range(T),q9(Q);var ie=G9(Q,Js(Js({},m),{},{realScaleType:ce}));i==="xAxis"?(M=y==="top"&&!A||y==="bottom"&&A,P=r.left,I=f[C]-M*m.height):i==="yAxis"&&(M=y==="left"&&!A||y==="right"&&A,P=f[C]-M*m.width,I=r.top);var oe=Js(Js(Js({},m),ie),{},{realScaleType:ce,x:P,y:I,scale:Q,width:i==="xAxis"?r.width:m.width,height:i==="yAxis"?r.height:m.height});return oe.bandSize=Wb(oe,ie),!m.hide&&i==="xAxis"?f[C]+=(M?-1:1)*oe.height:m.hide||(f[C]+=(M?-1:1)*oe.width),Js(Js({},p),{},d1({},g,oe))},{})},P7=function(e,n){var r=e.x,i=e.y,s=n.x,a=n.y;return{x:Math.min(r,s),y:Math.min(i,a),width:Math.abs(s-r),height:Math.abs(a-i)}},FTe=function(e){var n=e.x1,r=e.y1,i=e.x2,s=e.y2;return P7({x:n,y:r},{x:i,y:s})},k7=function(){function t(e){LTe(this,t),this.scale=e}return zTe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,s=r.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+a}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(n)+o}default:return this.scale(n)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],s=r[r.length-1];return i<=s?n>=i&&n<=s:n>=s&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();d1(k7,"EPS",1e-4);var KN=function(e){var n=Object.keys(e).reduce(function(r,i){return Js(Js({},r),{},d1({},i,k7.create(e[i])))},{});return Js(Js({},n),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.bandAware,o=s.position;return aTe(i,function(c,u){return n[u].apply(c,{bandAware:a,position:o})})},isInRange:function(i){return E7(i,function(s,a){return n[a].isInRange(s)})}})};function VTe(t){return(t%180+180)%180}var BTe=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=VTe(i),a=s*Math.PI/180,o=Math.atan(r/n),c=a>o&&a<Math.PI-o?r/Math.sin(a):n/Math.cos(a);return Math.abs(c)},UTe=eo,WTe=jv,HTe=Kw;function KTe(t){return function(e,n,r){var i=Object(e);if(!WTe(e)){var s=UTe(n);e=HTe(e),n=function(o){return s(i[o],o,i)}}var a=t(e,n,r);return a>-1?i[s?e[a]:a]:void 0}}var qTe=KTe,GTe=w7;function YTe(t){var e=GTe(t),n=e%1;return e===e?n?e-n:e:0}var QTe=YTe,XTe=jB,ZTe=eo,JTe=QTe,eNe=Math.max;function tNe(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:JTe(n);return i<0&&(i=eNe(r+i,0)),XTe(t,ZTe(e),i)}var nNe=tNe,rNe=qTe,iNe=nNe,sNe=rNe(iNe),aNe=sNe;const oNe=tn(aNe);var lNe=rce(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),qN=N.createContext(void 0),GN=N.createContext(void 0),D7=N.createContext(void 0),I7=N.createContext({}),O7=N.createContext(void 0),M7=N.createContext(0),R7=N.createContext(0),m5=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,s=n.offset,a=e.clipPathId,o=e.children,c=e.width,u=e.height,d=lNe(s);return q.createElement(qN.Provider,{value:r},q.createElement(GN.Provider,{value:i},q.createElement(I7.Provider,{value:s},q.createElement(D7.Provider,{value:d},q.createElement(O7.Provider,{value:a},q.createElement(M7.Provider,{value:u},q.createElement(R7.Provider,{value:c},o)))))))},cNe=function(){return N.useContext(O7)},L7=function(e){var n=N.useContext(qN);n==null&&Vu();var r=n[e];return r==null&&Vu(),r},uNe=function(){var e=N.useContext(qN);return _l(e)},dNe=function(){var e=N.useContext(GN),n=oNe(e,function(r){return E7(r.domain,Number.isFinite)});return n||_l(e)},z7=function(e){var n=N.useContext(GN);n==null&&Vu();var r=n[e];return r==null&&Vu(),r},fNe=function(){var e=N.useContext(D7);return e},hNe=function(){return N.useContext(I7)},YN=function(){return N.useContext(R7)},QN=function(){return N.useContext(M7)};function gh(t){"@babel/helpers - typeof";return gh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gh(t)}function pNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mNe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,F7(r.key),r)}}function gNe(t,e,n){return e&&mNe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function vNe(t,e,n){return e=ox(e),yNe(t,$7()?Reflect.construct(e,n||[],ox(t).constructor):e.apply(t,n))}function yNe(t,e){if(e&&(gh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bNe(t)}function bNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($7=function(){return!!t})()}function ox(t){return ox=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ox(t)}function xNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&R2(t,e)}function R2(t,e){return R2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},R2(t,e)}function g5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function v5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g5(Object(n),!0).forEach(function(r){XN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function XN(t,e,n){return e=F7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function F7(t){var e=wNe(t,"string");return gh(e)=="symbol"?e:e+""}function wNe(t,e){if(gh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function _Ne(t,e){return jNe(t)||ENe(t,e)||ANe(t,e)||SNe()}function SNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ANe(t,e){if(t){if(typeof t=="string")return y5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y5(t,e)}}function y5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ENe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function jNe(t){if(Array.isArray(t))return t}function L2(){return L2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},L2.apply(this,arguments)}var CNe=function(e,n){var r;return q.isValidElement(e)?r=q.cloneElement(e,n):vt(e)?r=e(n):r=q.createElement("line",L2({},n,{className:"recharts-reference-line-line"})),r},TNe=function(e,n,r,i,s,a,o,c,u){var d=s.x,f=s.y,h=s.width,p=s.height;if(r){var g=u.y,m=e.y.apply(g,{position:a});if(Ka(u,"discard")&&!e.y.isInRange(m))return null;var y=[{x:d+h,y:m},{x:d,y:m}];return c==="left"?y.reverse():y}if(n){var x=u.x,w=e.x.apply(x,{position:a});if(Ka(u,"discard")&&!e.x.isInRange(w))return null;var _=[{x:w,y:f+p},{x:w,y:f}];return o==="top"?_.reverse():_}if(i){var A=u.segment,E=A.map(function(C){return e.apply(C,{position:a})});return Ka(u,"discard")&&ZCe(E,function(C){return!e.isInRange(C)})?null:E}return null};function NNe(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,s=t.yAxisId,a=t.shape,o=t.className,c=t.alwaysShow,u=cNe(),d=L7(i),f=z7(s),h=fNe();if(!u||!h)return null;sa(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=KN({x:d.scale,y:f.scale}),g=Ar(e),m=Ar(n),y=r&&r.length===2,x=TNe(p,g,m,y,h,t.position,d.orientation,f.orientation,t);if(!x)return null;var w=_Ne(x,2),_=w[0],A=_.x,E=_.y,C=w[1],j=C.x,T=C.y,P=Ka(t,"hidden")?"url(#".concat(u,")"):void 0,I=v5(v5({clipPath:P},lt(t,!0)),{},{x1:A,y1:E,x2:j,y2:T});return q.createElement(Ot,{className:Tt("recharts-reference-line",o)},CNe(a,I),Ir.renderCallByParent(t,FTe({x1:A,y1:E,x2:j,y2:T})))}var f1=function(t){function e(){return pNe(this,e),vNe(this,e,arguments)}return xNe(e,t),gNe(e,[{key:"render",value:function(){return q.createElement(NNe,this.props)}}])}(q.Component);XN(f1,"displayName","ReferenceLine");XN(f1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function z2(){return z2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},z2.apply(this,arguments)}function vh(t){"@babel/helpers - typeof";return vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vh(t)}function b5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function x5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b5(Object(n),!0).forEach(function(r){h1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kNe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,B7(r.key),r)}}function DNe(t,e,n){return e&&kNe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function INe(t,e,n){return e=lx(e),ONe(t,V7()?Reflect.construct(e,n||[],lx(t).constructor):e.apply(t,n))}function ONe(t,e){if(e&&(vh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MNe(t)}function MNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function V7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(V7=function(){return!!t})()}function lx(t){return lx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},lx(t)}function RNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$2(t,e)}function $2(t,e){return $2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},$2(t,e)}function h1(t,e,n){return e=B7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B7(t){var e=LNe(t,"string");return vh(e)=="symbol"?e:e+""}function LNe(t,e){if(vh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var zNe=function(e){var n=e.x,r=e.y,i=e.xAxis,s=e.yAxis,a=KN({x:i.scale,y:s.scale}),o=a.apply({x:n,y:r},{bandAware:!0});return Ka(e,"discard")&&!a.isInRange(o)?null:o},p1=function(t){function e(){return PNe(this,e),INe(this,e,arguments)}return RNe(e,t),DNe(e,[{key:"render",value:function(){var r=this.props,i=r.x,s=r.y,a=r.r,o=r.alwaysShow,c=r.clipPathId,u=Ar(i),d=Ar(s);if(sa(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=zNe(this.props);if(!f)return null;var h=f.x,p=f.y,g=this.props,m=g.shape,y=g.className,x=Ka(this.props,"hidden")?"url(#".concat(c,")"):void 0,w=x5(x5({clipPath:x},lt(this.props,!0)),{},{cx:h,cy:p});return q.createElement(Ot,{className:Tt("recharts-reference-dot",y)},e.renderDot(m,w),Ir.renderCallByParent(this.props,{x:h-a,y:p-a,width:2*a,height:2*a}))}}])}(q.Component);h1(p1,"displayName","ReferenceDot");h1(p1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});h1(p1,"renderDot",function(t,e){var n;return q.isValidElement(t)?n=q.cloneElement(t,e):vt(t)?n=t(e):n=q.createElement(Dv,z2({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function F2(){return F2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},F2.apply(this,arguments)}function yh(t){"@babel/helpers - typeof";return yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yh(t)}function w5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w5(Object(n),!0).forEach(function(r){m1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $Ne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function FNe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,W7(r.key),r)}}function VNe(t,e,n){return e&&FNe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function BNe(t,e,n){return e=cx(e),UNe(t,U7()?Reflect.construct(e,n||[],cx(t).constructor):e.apply(t,n))}function UNe(t,e){if(e&&(yh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WNe(t)}function WNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function U7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(U7=function(){return!!t})()}function cx(t){return cx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},cx(t)}function HNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&V2(t,e)}function V2(t,e){return V2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},V2(t,e)}function m1(t,e,n){return e=W7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function W7(t){var e=KNe(t,"string");return yh(e)=="symbol"?e:e+""}function KNe(t,e){if(yh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var qNe=function(e,n,r,i,s){var a=s.x1,o=s.x2,c=s.y1,u=s.y2,d=s.xAxis,f=s.yAxis;if(!d||!f)return null;var h=KN({x:d.scale,y:f.scale}),p={x:e?h.x.apply(a,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(c,{position:"start"}):h.y.rangeMin},g={x:n?h.x.apply(o,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(u,{position:"end"}):h.y.rangeMax};return Ka(s,"discard")&&(!h.isInRange(p)||!h.isInRange(g))?null:P7(p,g)},g1=function(t){function e(){return $Ne(this,e),BNe(this,e,arguments)}return HNe(e,t),VNe(e,[{key:"render",value:function(){var r=this.props,i=r.x1,s=r.x2,a=r.y1,o=r.y2,c=r.className,u=r.alwaysShow,d=r.clipPathId;sa(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=Ar(i),h=Ar(s),p=Ar(a),g=Ar(o),m=this.props.shape;if(!f&&!h&&!p&&!g&&!m)return null;var y=qNe(f,h,p,g,this.props);if(!y&&!m)return null;var x=Ka(this.props,"hidden")?"url(#".concat(d,")"):void 0;return q.createElement(Ot,{className:Tt("recharts-reference-area",c)},e.renderRect(m,_5(_5({clipPath:x},lt(this.props,!0)),y)),Ir.renderCallByParent(this.props,y))}}])}(q.Component);m1(g1,"displayName","ReferenceArea");m1(g1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});m1(g1,"renderRect",function(t,e){var n;return q.isValidElement(t)?n=q.cloneElement(t,e):vt(t)?n=t(e):n=q.createElement(WN,F2({},e,{className:"recharts-reference-area-rect"})),n});function H7(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function GNe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return BTe(r,n)}function YNe(t,e,n){var r=n==="width",i=t.x,s=t.y,a=t.width,o=t.height;return e===1?{start:r?i:s,end:r?i+a:s+o}:{start:r?i+a:s+o,end:r?i:s}}function ux(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-i)<=0}function QNe(t,e){return H7(t,e+1)}function XNe(t,e,n,r,i){for(var s=(r||[]).slice(),a=e.start,o=e.end,c=0,u=1,d=a,f=function(){var g=r==null?void 0:r[c];if(g===void 0)return{v:H7(r,u)};var m=c,y,x=function(){return y===void 0&&(y=n(g,m)),y},w=g.coordinate,_=c===0||ux(t,w,x,d,o);_||(c=0,d=a,u+=1),_&&(d=w+t*(x()/2+i),c+=u)},h;u<=s.length;)if(h=f(),h)return h.v;return[]}function qg(t){"@babel/helpers - typeof";return qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qg(t)}function S5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function di(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S5(Object(n),!0).forEach(function(r){ZNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZNe(t,e,n){return e=JNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JNe(t){var e=ePe(t,"string");return qg(e)=="symbol"?e:e+""}function ePe(t,e){if(qg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(qg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tPe(t,e,n,r,i){for(var s=(r||[]).slice(),a=s.length,o=e.start,c=e.end,u=function(h){var p=s[h],g,m=function(){return g===void 0&&(g=n(p,h)),g};if(h===a-1){var y=t*(p.coordinate+t*m()/2-c);s[h]=p=di(di({},p),{},{tickCoord:y>0?p.coordinate-y*t:p.coordinate})}else s[h]=p=di(di({},p),{},{tickCoord:p.coordinate});var x=ux(t,p.tickCoord,m,o,c);x&&(c=p.tickCoord-t*(m()/2+i),s[h]=di(di({},p),{},{isShow:!0}))},d=a-1;d>=0;d--)u(d);return s}function nPe(t,e,n,r,i,s){var a=(r||[]).slice(),o=a.length,c=e.start,u=e.end;if(s){var d=r[o-1],f=n(d,o-1),h=t*(d.coordinate+t*f/2-u);a[o-1]=d=di(di({},d),{},{tickCoord:h>0?d.coordinate-h*t:d.coordinate});var p=ux(t,d.tickCoord,function(){return f},c,u);p&&(u=d.tickCoord-t*(f/2+i),a[o-1]=di(di({},d),{},{isShow:!0}))}for(var g=s?o-1:o,m=function(w){var _=a[w],A,E=function(){return A===void 0&&(A=n(_,w)),A};if(w===0){var C=t*(_.coordinate-t*E()/2-c);a[w]=_=di(di({},_),{},{tickCoord:C<0?_.coordinate-C*t:_.coordinate})}else a[w]=_=di(di({},_),{},{tickCoord:_.coordinate});var j=ux(t,_.tickCoord,E,c,u);j&&(c=_.tickCoord+t*(E()/2+i),a[w]=di(di({},_),{},{isShow:!0}))},y=0;y<g;y++)m(y);return a}function ZN(t,e,n){var r=t.tick,i=t.ticks,s=t.viewBox,a=t.minTickGap,o=t.orientation,c=t.interval,u=t.tickFormatter,d=t.unit,f=t.angle;if(!i||!i.length||!r)return[];if(Ie(c)||uc.isSsr)return QNe(i,typeof c=="number"&&Ie(c)?c:0);var h=[],p=o==="top"||o==="bottom"?"width":"height",g=d&&p==="width"?_m(d,{fontSize:e,letterSpacing:n}):{width:0,height:0},m=function(_,A){var E=vt(u)?u(_.value,A):_.value;return p==="width"?GNe(_m(E,{fontSize:e,letterSpacing:n}),g,f):_m(E,{fontSize:e,letterSpacing:n})[p]},y=i.length>=2?Si(i[1].coordinate-i[0].coordinate):1,x=YNe(s,y,p);return c==="equidistantPreserveStart"?XNe(y,x,m,i,a):(c==="preserveStart"||c==="preserveStartEnd"?h=nPe(y,x,m,i,a,c==="preserveStartEnd"):h=tPe(y,x,m,i,a),h.filter(function(w){return w.isShow}))}var rPe=["viewBox"],iPe=["viewBox"],sPe=["ticks"];function bh(t){"@babel/helpers - typeof";return bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bh(t)}function uf(){return uf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uf.apply(this,arguments)}function A5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A5(Object(n),!0).forEach(function(r){JN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uS(t,e){if(t==null)return{};var n=aPe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function aPe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function oPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,q7(r.key),r)}}function lPe(t,e,n){return e&&E5(t.prototype,e),n&&E5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function cPe(t,e,n){return e=dx(e),uPe(t,K7()?Reflect.construct(e,n||[],dx(t).constructor):e.apply(t,n))}function uPe(t,e){if(e&&(bh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dPe(t)}function dPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function K7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(K7=function(){return!!t})()}function dx(t){return dx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},dx(t)}function fPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&B2(t,e)}function B2(t,e){return B2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},B2(t,e)}function JN(t,e,n){return e=q7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q7(t){var e=hPe(t,"string");return bh(e)=="symbol"?e:e+""}function hPe(t,e){if(bh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ep=function(t){function e(n){var r;return oPe(this,e),r=cPe(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return fPe(e,t),lPe(e,[{key:"shouldComponentUpdate",value:function(r,i){var s=r.viewBox,a=uS(r,rPe),o=this.props,c=o.viewBox,u=uS(o,iPe);return!Sf(s,c)||!Sf(a,u)||!Sf(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,s=i.x,a=i.y,o=i.width,c=i.height,u=i.orientation,d=i.tickSize,f=i.mirror,h=i.tickMargin,p,g,m,y,x,w,_=f?-1:1,A=r.tickSize||d,E=Ie(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":p=g=r.coordinate,y=a+ +!f*c,m=y-_*A,w=m-_*h,x=E;break;case"left":m=y=r.coordinate,g=s+ +!f*o,p=g-_*A,x=p-_*h,w=E;break;case"right":m=y=r.coordinate,g=s+ +f*o,p=g+_*A,x=p+_*h,w=E;break;default:p=g=r.coordinate,y=a+ +f*c,m=y+_*A,w=m+_*h,x=E;break}return{line:{x1:p,y1:m,x2:g,y2:y},tick:{x,y:w}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,a;switch(i){case"left":a=s?"start":"end";break;case"right":a=s?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,a="end";switch(i){case"left":case"right":a="middle";break;case"top":a=s?"start":"end";break;default:a=s?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,s=r.y,a=r.width,o=r.height,c=r.orientation,u=r.mirror,d=r.axisLine,f=yr(yr(yr({},lt(this.props,!1)),lt(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!u||c==="bottom"&&u);f=yr(yr({},f),{},{x1:i,y1:s+h*o,x2:i+a,y2:s+h*o})}else{var p=+(c==="left"&&!u||c==="right"&&u);f=yr(yr({},f),{},{x1:i+p*a,y1:s,x2:i+p*a,y2:s+o})}return q.createElement("line",uf({},f,{className:Tt("recharts-cartesian-axis-line",os(d,"className"))}))}},{key:"renderTicks",value:function(r,i,s){var a=this,o=this.props,c=o.tickLine,u=o.stroke,d=o.tick,f=o.tickFormatter,h=o.unit,p=ZN(yr(yr({},this.props),{},{ticks:r}),i,s),g=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),y=lt(this.props,!1),x=lt(d,!1),w=yr(yr({},y),{},{fill:"none"},lt(c,!1)),_=p.map(function(A,E){var C=a.getTickLineCoord(A),j=C.line,T=C.tick,P=yr(yr(yr(yr({textAnchor:g,verticalAnchor:m},y),{},{stroke:"none",fill:u},x),T),{},{index:E,payload:A,visibleTicksCount:p.length,tickFormatter:f});return q.createElement(Ot,uf({className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},Lu(a.props,A,E)),c&&q.createElement("line",uf({},w,j,{className:Tt("recharts-cartesian-axis-tick-line",os(c,"className"))})),d&&e.renderTickItem(d,P,"".concat(vt(f)?f(A.value,E):A.value).concat(h||"")))});return q.createElement("g",{className:"recharts-cartesian-axis-ticks"},_)}},{key:"render",value:function(){var r=this,i=this.props,s=i.axisLine,a=i.width,o=i.height,c=i.ticksGenerator,u=i.className,d=i.hide;if(d)return null;var f=this.props,h=f.ticks,p=uS(f,sPe),g=h;return vt(c)&&(g=h&&h.length>0?c(this.props):c(p)),a<=0||o<=0||!g||!g.length?null:q.createElement(Ot,{className:Tt("recharts-cartesian-axis",u),ref:function(y){r.layerReference=y}},s&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),Ir.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,s){var a,o=Tt(i.className,"recharts-cartesian-axis-tick-value");return q.isValidElement(r)?a=q.cloneElement(r,yr(yr({},i),{},{className:o})):vt(r)?a=r(yr(yr({},i),{},{className:o})):a=q.createElement(zu,uf({},i,{className:"recharts-cartesian-axis-tick-value"}),s),a}}])}(N.Component);JN(ep,"displayName","CartesianAxis");JN(ep,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var pPe=["x1","y1","x2","y2","key"],mPe=["offset"];function Bu(t){"@babel/helpers - typeof";return Bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bu(t)}function j5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j5(Object(n),!0).forEach(function(r){gPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gPe(t,e,n){return e=vPe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vPe(t){var e=yPe(t,"string");return Bu(e)=="symbol"?e:e+""}function yPe(t,e){if(Bu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cu(){return cu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cu.apply(this,arguments)}function C5(t,e){if(t==null)return{};var n=bPe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function bPe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var xPe=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,s=e.y,a=e.width,o=e.height,c=e.ry;return q.createElement("rect",{x:i,y:s,ry:c,width:a,height:o,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function G7(t,e){var n;if(q.isValidElement(t))n=q.cloneElement(t,e);else if(vt(t))n=t(e);else{var r=e.x1,i=e.y1,s=e.x2,a=e.y2,o=e.key,c=C5(e,pPe),u=lt(c,!1);u.offset;var d=C5(u,mPe);n=q.createElement("line",cu({},d,{x1:r,y1:i,x2:s,y2:a,fill:"none",key:o}))}return n}function wPe(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,s=t.horizontalPoints;if(!i||!s||!s.length)return null;var a=s.map(function(o,c){var u=pi(pi({},t),{},{x1:e,y1:o,x2:e+n,y2:o,key:"line-".concat(c),index:c});return G7(i,u)});return q.createElement("g",{className:"recharts-cartesian-grid-horizontal"},a)}function _Pe(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,s=t.verticalPoints;if(!i||!s||!s.length)return null;var a=s.map(function(o,c){var u=pi(pi({},t),{},{x1:o,y1:e,x2:o,y2:e+n,key:"line-".concat(c),index:c});return G7(i,u)});return q.createElement("g",{className:"recharts-cartesian-grid-vertical"},a)}function SPe(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,s=t.width,a=t.height,o=t.horizontalPoints,c=t.horizontal,u=c===void 0?!0:c;if(!u||!e||!e.length)return null;var d=o.map(function(h){return Math.round(h+i-i)}).sort(function(h,p){return h-p});i!==d[0]&&d.unshift(0);var f=d.map(function(h,p){var g=!d[p+1],m=g?i+a-h:d[p+1]-h;if(m<=0)return null;var y=p%e.length;return q.createElement("rect",{key:"react-".concat(p),y:h,x:r,height:m,width:s,stroke:"none",fill:e[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return q.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function APe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,s=t.x,a=t.y,o=t.width,c=t.height,u=t.verticalPoints;if(!n||!r||!r.length)return null;var d=u.map(function(h){return Math.round(h+s-s)}).sort(function(h,p){return h-p});s!==d[0]&&d.unshift(0);var f=d.map(function(h,p){var g=!d[p+1],m=g?s+o-h:d[p+1]-h;if(m<=0)return null;var y=p%r.length;return q.createElement("rect",{key:"react-".concat(p),x:h,y:a,width:m,height:c,stroke:"none",fill:r[y],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return q.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var EPe=function(e,n){var r=e.xAxis,i=e.width,s=e.height,a=e.offset;return H9(ZN(pi(pi(pi({},ep.defaultProps),r),{},{ticks:Ao(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),a.left,a.left+a.width,n)},jPe=function(e,n){var r=e.yAxis,i=e.width,s=e.height,a=e.offset;return H9(ZN(pi(pi(pi({},ep.defaultProps),r),{},{ticks:Ao(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),a.top,a.top+a.height,n)},Id={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function tp(t){var e,n,r,i,s,a,o=YN(),c=QN(),u=hNe(),d=pi(pi({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Id.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Id.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:Id.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Id.horizontalFill,vertical:(s=t.vertical)!==null&&s!==void 0?s:Id.vertical,verticalFill:(a=t.verticalFill)!==null&&a!==void 0?a:Id.verticalFill,x:Ie(t.x)?t.x:u.left,y:Ie(t.y)?t.y:u.top,width:Ie(t.width)?t.width:u.width,height:Ie(t.height)?t.height:u.height}),f=d.x,h=d.y,p=d.width,g=d.height,m=d.syncWithTicks,y=d.horizontalValues,x=d.verticalValues,w=uNe(),_=dNe();if(!Ie(p)||p<=0||!Ie(g)||g<=0||!Ie(f)||f!==+f||!Ie(h)||h!==+h)return null;var A=d.verticalCoordinatesGenerator||EPe,E=d.horizontalCoordinatesGenerator||jPe,C=d.horizontalPoints,j=d.verticalPoints;if((!C||!C.length)&&vt(E)){var T=y&&y.length,P=E({yAxis:_?pi(pi({},_),{},{ticks:T?y:_.ticks}):void 0,width:o,height:c,offset:u},T?!0:m);sa(Array.isArray(P),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Bu(P),"]")),Array.isArray(P)&&(C=P)}if((!j||!j.length)&&vt(A)){var I=x&&x.length,M=A({xAxis:w?pi(pi({},w),{},{ticks:I?x:w.ticks}):void 0,width:o,height:c,offset:u},I?!0:m);sa(Array.isArray(M),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Bu(M),"]")),Array.isArray(M)&&(j=M)}return q.createElement("g",{className:"recharts-cartesian-grid"},q.createElement(xPe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),q.createElement(wPe,cu({},d,{offset:u,horizontalPoints:C,xAxis:w,yAxis:_})),q.createElement(_Pe,cu({},d,{offset:u,verticalPoints:j,xAxis:w,yAxis:_})),q.createElement(SPe,cu({},d,{horizontalPoints:C})),q.createElement(APe,cu({},d,{verticalPoints:j})))}tp.displayName="CartesianGrid";var CPe=["type","layout","connectNulls","ref"],TPe=["key"];function xh(t){"@babel/helpers - typeof";return xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xh(t)}function T5(t,e){if(t==null)return{};var n=NPe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function NPe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Tm(){return Tm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tm.apply(this,arguments)}function N5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N5(Object(n),!0).forEach(function(r){ea(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Od(t){return IPe(t)||DPe(t)||kPe(t)||PPe()}function PPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kPe(t,e){if(t){if(typeof t=="string")return U2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U2(t,e)}}function DPe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function IPe(t){if(Array.isArray(t))return U2(t)}function U2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function OPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Q7(r.key),r)}}function MPe(t,e,n){return e&&P5(t.prototype,e),n&&P5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function RPe(t,e,n){return e=fx(e),LPe(t,Y7()?Reflect.construct(e,n||[],fx(t).constructor):e.apply(t,n))}function LPe(t,e){if(e&&(xh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zPe(t)}function zPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Y7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Y7=function(){return!!t})()}function fx(t){return fx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fx(t)}function $Pe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&W2(t,e)}function W2(t,e){return W2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},W2(t,e)}function ea(t,e,n){return e=Q7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Q7(t){var e=FPe(t,"string");return xh(e)=="symbol"?e:e+""}function FPe(t,e){if(xh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(xh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Uu=function(t){function e(){var n;OPe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=RPe(this,e,[].concat(i)),ea(n,"state",{isAnimationFinished:!0,totalLength:0}),ea(n,"generateSimpleStrokeDasharray",function(a,o){return"".concat(o,"px ").concat(a-o,"px")}),ea(n,"getStrokeDasharray",function(a,o,c){var u=c.reduce(function(x,w){return x+w});if(!u)return n.generateSimpleStrokeDasharray(o,a);for(var d=Math.floor(a/u),f=a%u,h=o-a,p=[],g=0,m=0;g<c.length;m+=c[g],++g)if(m+c[g]>f){p=[].concat(Od(c.slice(0,g)),[f-m]);break}var y=p.length%2===0?[0,h]:[h];return[].concat(Od(e.repeat(c,d)),Od(p),y).map(function(x){return"".concat(x,"px")}).join(", ")}),ea(n,"id",rd("recharts-line-")),ea(n,"pathRef",function(a){n.mainCurve=a}),ea(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),ea(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return $Pe(e,t),MPe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.points,o=s.xAxis,c=s.yAxis,u=s.layout,d=s.children,f=ls(d,kv);if(!f)return null;var h=function(m,y){return{x:m.x,y:m.y,value:m.value,errorVal:rr(m.payload,y)}},p={clipPath:r?"url(#clipPath-".concat(i,")"):null};return q.createElement(Ot,p,f.map(function(g){return q.cloneElement(g,{key:"bar-".concat(g.props.dataKey),data:a,xAxis:o,yAxis:c,layout:u,dataPointFormatter:h})}))}},{key:"renderDots",value:function(r,i,s){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var o=this.props,c=o.dot,u=o.points,d=o.dataKey,f=lt(this.props,!1),h=lt(c,!0),p=u.map(function(m,y){var x=Qi(Qi(Qi({key:"dot-".concat(y),r:3},f),h),{},{index:y,cx:m.x,cy:m.y,value:m.value,dataKey:d,payload:m.payload,points:u});return e.renderDotItem(c,x)}),g={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return q.createElement(Ot,Tm({className:"recharts-line-dots",key:"dots"},g),p)}},{key:"renderCurveStatically",value:function(r,i,s,a){var o=this.props,c=o.type,u=o.layout,d=o.connectNulls;o.ref;var f=T5(o,CPe),h=Qi(Qi(Qi({},lt(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(s,")"):null,points:r},a),{},{type:c,layout:u,connectNulls:d});return q.createElement(_u,Tm({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var s=this,a=this.props,o=a.points,c=a.strokeDasharray,u=a.isAnimationActive,d=a.animationBegin,f=a.animationDuration,h=a.animationEasing,p=a.animationId,g=a.animateNewValues,m=a.width,y=a.height,x=this.state,w=x.prevPoints,_=x.totalLength;return q.createElement(da,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(A){var E=A.t;if(w){var C=w.length/o.length,j=o.map(function(F,R){var H=Math.floor(R*C);if(w[H]){var X=w[H],W=_r(X.x,F.x),U=_r(X.y,F.y);return Qi(Qi({},F),{},{x:W(E),y:U(E)})}if(g){var $=_r(m*2,F.x),Y=_r(y/2,F.y);return Qi(Qi({},F),{},{x:$(E),y:Y(E)})}return Qi(Qi({},F),{},{x:F.x,y:F.y})});return s.renderCurveStatically(j,r,i)}var T=_r(0,_),P=T(E),I;if(c){var M="".concat(c).split(/[,\s]+/gim).map(function(F){return parseFloat(F)});I=s.getStrokeDasharray(P,_,M)}else I=s.generateSimpleStrokeDasharray(_,P);return s.renderCurveStatically(o,r,i,{strokeDasharray:I})})}},{key:"renderCurve",value:function(r,i){var s=this.props,a=s.points,o=s.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return o&&a&&a.length&&(!u&&d>0||!$u(u,a))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(a,r,i)}},{key:"render",value:function(){var r,i=this.props,s=i.hide,a=i.dot,o=i.points,c=i.className,u=i.xAxis,d=i.yAxis,f=i.top,h=i.left,p=i.width,g=i.height,m=i.isAnimationActive,y=i.id;if(s||!o||!o.length)return null;var x=this.state.isAnimationFinished,w=o.length===1,_=Tt("recharts-line",c),A=u&&u.allowDataOverflow,E=d&&d.allowDataOverflow,C=A||E,j=_t(y)?this.id:y,T=(r=lt(a,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},P=T.r,I=P===void 0?3:P,M=T.strokeWidth,F=M===void 0?2:M,R=LV(a)?a:{},H=R.clipDot,X=H===void 0?!0:H,W=I*2+F;return q.createElement(Ot,{className:_},A||E?q.createElement("defs",null,q.createElement("clipPath",{id:"clipPath-".concat(j)},q.createElement("rect",{x:A?h:h-p/2,y:E?f:f-g/2,width:A?p:p*2,height:E?g:g*2})),!X&&q.createElement("clipPath",{id:"clipPath-dots-".concat(j)},q.createElement("rect",{x:h-W/2,y:f-W/2,width:p+W,height:g+W}))):null,!w&&this.renderCurve(C,j),this.renderErrorBar(C,j),(w||a)&&this.renderDots(C,X,j),(!m||x)&&cs.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var s=r.length%2!==0?[].concat(Od(r),[0]):r,a=[],o=0;o<i;++o)a=[].concat(Od(a),Od(s));return a}},{key:"renderDotItem",value:function(r,i){var s;if(q.isValidElement(r))s=q.cloneElement(r,i);else if(vt(r))s=r(i);else{var a=i.key,o=T5(i,TPe),c=Tt("recharts-line-dot",typeof r!="boolean"?r.className:"");s=q.createElement(Dv,Tm({key:a},o,{className:c}))}return s}}])}(N.PureComponent);ea(Uu,"displayName","Line");ea(Uu,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!uc.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});ea(Uu,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,s=t.yAxisTicks,a=t.dataKey,o=t.bandSize,c=t.displayedData,u=t.offset,d=e.layout,f=c.map(function(h,p){var g=rr(h,a);return d==="horizontal"?{x:Ub({axis:n,ticks:i,bandSize:o,entry:h,index:p}),y:_t(g)?null:r.scale(g),value:g,payload:h}:{x:_t(g)?null:n.scale(g),y:Ub({axis:r,ticks:s,bandSize:o,entry:h,index:p}),value:g,payload:h}});return Qi({points:f,layout:d},u)});var VPe=["layout","type","stroke","connectNulls","isRange","ref"],BPe=["key"],X7;function wh(t){"@babel/helpers - typeof";return wh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wh(t)}function Z7(t,e){if(t==null)return{};var n=UPe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function UPe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function uu(){return uu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uu.apply(this,arguments)}function k5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k5(Object(n),!0).forEach(function(r){La(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function D5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,eU(r.key),r)}}function HPe(t,e,n){return e&&D5(t.prototype,e),n&&D5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function KPe(t,e,n){return e=hx(e),qPe(t,J7()?Reflect.construct(e,n||[],hx(t).constructor):e.apply(t,n))}function qPe(t,e){if(e&&(wh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GPe(t)}function GPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function J7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(J7=function(){return!!t})()}function hx(t){return hx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hx(t)}function YPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&H2(t,e)}function H2(t,e){return H2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},H2(t,e)}function La(t,e,n){return e=eU(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eU(t){var e=QPe(t,"string");return wh(e)=="symbol"?e:e+""}function QPe(t,e){if(wh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ha=function(t){function e(){var n;WPe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=KPe(this,e,[].concat(i)),La(n,"state",{isAnimationFinished:!0}),La(n,"id",rd("recharts-area-")),La(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),vt(a)&&a()}),La(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),vt(a)&&a()}),n}return YPe(e,t),HPe(e,[{key:"renderDots",value:function(r,i,s){var a=this.props.isAnimationActive,o=this.state.isAnimationFinished;if(a&&!o)return null;var c=this.props,u=c.dot,d=c.points,f=c.dataKey,h=lt(this.props,!1),p=lt(u,!0),g=d.map(function(y,x){var w=gl(gl(gl({key:"dot-".concat(x),r:3},h),p),{},{index:x,cx:y.x,cy:y.y,dataKey:f,value:y.value,payload:y.payload,points:d});return e.renderDotItem(u,w)}),m={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return q.createElement(Ot,uu({className:"recharts-area-dots"},m),g)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,s=i.baseLine,a=i.points,o=i.strokeWidth,c=a[0].x,u=a[a.length-1].x,d=r*Math.abs(c-u),f=Cl(a.map(function(h){return h.y||0}));return Ie(s)&&typeof s=="number"?f=Math.max(s,f):s&&Array.isArray(s)&&s.length&&(f=Math.max(Cl(s.map(function(h){return h.y||0})),f)),Ie(f)?q.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(f+(o?parseInt("".concat(o),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,s=i.baseLine,a=i.points,o=i.strokeWidth,c=a[0].y,u=a[a.length-1].y,d=r*Math.abs(c-u),f=Cl(a.map(function(h){return h.x||0}));return Ie(s)&&typeof s=="number"?f=Math.max(s,f):s&&Array.isArray(s)&&s.length&&(f=Math.max(Cl(s.map(function(h){return h.x||0})),f)),Ie(f)?q.createElement("rect",{x:0,y:c<u?c:c-d,width:f+(o?parseInt("".concat(o),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,s,a){var o=this.props,c=o.layout,u=o.type,d=o.stroke,f=o.connectNulls,h=o.isRange;o.ref;var p=Z7(o,VPe);return q.createElement(Ot,{clipPath:s?"url(#clipPath-".concat(a,")"):null},q.createElement(_u,uu({},lt(p,!0),{points:r,connectNulls:f,type:u,baseLine:i,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&q.createElement(_u,uu({},lt(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:r})),d!=="none"&&h&&q.createElement(_u,uu({},lt(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var s=this,a=this.props,o=a.points,c=a.baseLine,u=a.isAnimationActive,d=a.animationBegin,f=a.animationDuration,h=a.animationEasing,p=a.animationId,g=this.state,m=g.prevPoints,y=g.prevBaseLine;return q.createElement(da,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var w=x.t;if(m){var _=m.length/o.length,A=o.map(function(T,P){var I=Math.floor(P*_);if(m[I]){var M=m[I],F=_r(M.x,T.x),R=_r(M.y,T.y);return gl(gl({},T),{},{x:F(w),y:R(w)})}return T}),E;if(Ie(c)&&typeof c=="number"){var C=_r(y,c);E=C(w)}else if(_t(c)||qh(c)){var j=_r(y,0);E=j(w)}else E=c.map(function(T,P){var I=Math.floor(P*_);if(y[I]){var M=y[I],F=_r(M.x,T.x),R=_r(M.y,T.y);return gl(gl({},T),{},{x:F(w),y:R(w)})}return T});return s.renderAreaStatically(A,E,r,i)}return q.createElement(Ot,null,q.createElement("defs",null,q.createElement("clipPath",{id:"animationClipPath-".concat(i)},s.renderClipRect(w))),q.createElement(Ot,{clipPath:"url(#animationClipPath-".concat(i,")")},s.renderAreaStatically(o,c,r,i)))})}},{key:"renderArea",value:function(r,i){var s=this.props,a=s.points,o=s.baseLine,c=s.isAnimationActive,u=this.state,d=u.prevPoints,f=u.prevBaseLine,h=u.totalLength;return c&&a&&a.length&&(!d&&h>0||!$u(d,a)||!$u(f,o))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(a,o,r,i)}},{key:"render",value:function(){var r,i=this.props,s=i.hide,a=i.dot,o=i.points,c=i.className,u=i.top,d=i.left,f=i.xAxis,h=i.yAxis,p=i.width,g=i.height,m=i.isAnimationActive,y=i.id;if(s||!o||!o.length)return null;var x=this.state.isAnimationFinished,w=o.length===1,_=Tt("recharts-area",c),A=f&&f.allowDataOverflow,E=h&&h.allowDataOverflow,C=A||E,j=_t(y)?this.id:y,T=(r=lt(a,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},P=T.r,I=P===void 0?3:P,M=T.strokeWidth,F=M===void 0?2:M,R=LV(a)?a:{},H=R.clipDot,X=H===void 0?!0:H,W=I*2+F;return q.createElement(Ot,{className:_},A||E?q.createElement("defs",null,q.createElement("clipPath",{id:"clipPath-".concat(j)},q.createElement("rect",{x:A?d:d-p/2,y:E?u:u-g/2,width:A?p:p*2,height:E?g:g*2})),!X&&q.createElement("clipPath",{id:"clipPath-dots-".concat(j)},q.createElement("rect",{x:d-W/2,y:u-W/2,width:p+W,height:g+W}))):null,w?null:this.renderArea(C,j),(a||w)&&this.renderDots(C,X,j),(!m||x)&&cs.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(N.PureComponent);X7=ha;La(ha,"displayName","Area");La(ha,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!uc.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});La(ha,"getBaseValue",function(t,e,n,r){var i=t.layout,s=t.baseValue,a=e.props.baseValue,o=a??s;if(Ie(o)&&typeof o=="number")return o;var c=i==="horizontal"?r:n,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),f=Math.min(u[0],u[1]);return o==="dataMin"?f:o==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return o==="dataMin"?u[0]:o==="dataMax"?u[1]:u[0]});La(ha,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,i=t.yAxis,s=t.xAxisTicks,a=t.yAxisTicks,o=t.bandSize,c=t.dataKey,u=t.stackedData,d=t.dataStartIndex,f=t.displayedData,h=t.offset,p=e.layout,g=u&&u.length,m=X7.getBaseValue(e,n,r,i),y=p==="horizontal",x=!1,w=f.map(function(A,E){var C;g?C=u[d+E]:(C=rr(A,c),Array.isArray(C)?x=!0:C=[m,C]);var j=C[1]==null||g&&rr(A,c)==null;return y?{x:Ub({axis:r,ticks:s,bandSize:o,entry:A,index:E}),y:j?null:i.scale(C[1]),value:C,payload:A}:{x:j?null:r.scale(C[1]),y:Ub({axis:i,ticks:a,bandSize:o,entry:A,index:E}),value:C,payload:A}}),_;return g||x?_=w.map(function(A){var E=Array.isArray(A.value)?A.value[0]:null;return y?{x:A.x,y:E!=null&&A.y!=null?i.scale(E):null}:{x:E!=null?r.scale(E):null,y:A.y}}):_=y?i.scale(m):r.scale(m),gl({points:w,baseLine:_,layout:p,isRange:x},h)});La(ha,"renderDotItem",function(t,e){var n;if(q.isValidElement(t))n=q.cloneElement(t,e);else if(vt(t))n=t(e);else{var r=Tt("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,s=Z7(e,BPe);n=q.createElement(Dv,uu({},s,{key:i,className:r}))}return n});function _h(t){"@babel/helpers - typeof";return _h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_h(t)}function XPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZPe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rU(r.key),r)}}function JPe(t,e,n){return e&&ZPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function eke(t,e,n){return e=px(e),tke(t,tU()?Reflect.construct(e,n||[],px(t).constructor):e.apply(t,n))}function tke(t,e){if(e&&(_h(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nke(t)}function nke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tU(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tU=function(){return!!t})()}function px(t){return px=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},px(t)}function rke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&K2(t,e)}function K2(t,e){return K2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},K2(t,e)}function nU(t,e,n){return e=rU(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rU(t){var e=ike(t,"string");return _h(e)=="symbol"?e:e+""}function ike(t,e){if(_h(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_h(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function q2(){return q2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},q2.apply(this,arguments)}function ske(t){var e=t.xAxisId,n=YN(),r=QN(),i=L7(e);return i==null?null:N.createElement(ep,q2({},i,{className:Tt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(a){return Ao(a,!0)}}))}var sr=function(t){function e(){return XPe(this,e),eke(this,e,arguments)}return rke(e,t),JPe(e,[{key:"render",value:function(){return N.createElement(ske,this.props)}}])}(N.Component);nU(sr,"displayName","XAxis");nU(sr,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Sh(t){"@babel/helpers - typeof";return Sh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sh(t)}function ake(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,aU(r.key),r)}}function lke(t,e,n){return e&&oke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function cke(t,e,n){return e=mx(e),uke(t,iU()?Reflect.construct(e,n||[],mx(t).constructor):e.apply(t,n))}function uke(t,e){if(e&&(Sh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dke(t)}function dke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iU(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iU=function(){return!!t})()}function mx(t){return mx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},mx(t)}function fke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&G2(t,e)}function G2(t,e){return G2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},G2(t,e)}function sU(t,e,n){return e=aU(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aU(t){var e=hke(t,"string");return Sh(e)=="symbol"?e:e+""}function hke(t,e){if(Sh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Y2(){return Y2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Y2.apply(this,arguments)}var pke=function(e){var n=e.yAxisId,r=YN(),i=QN(),s=z7(n);return s==null?null:N.createElement(ep,Y2({},s,{className:Tt("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(o){return Ao(o,!0)}}))},gr=function(t){function e(){return ake(this,e),cke(this,e,arguments)}return fke(e,t),lke(e,[{key:"render",value:function(){return N.createElement(pke,this.props)}}])}(N.Component);sU(gr,"displayName","YAxis");sU(gr,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function I5(t){return yke(t)||vke(t)||gke(t)||mke()}function mke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gke(t,e){if(t){if(typeof t=="string")return Q2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q2(t,e)}}function vke(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function yke(t){if(Array.isArray(t))return Q2(t)}function Q2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var X2=function(e,n,r,i,s){var a=ls(e,f1),o=ls(e,p1),c=[].concat(I5(a),I5(o)),u=ls(e,g1),d="".concat(i,"Id"),f=i[0],h=n;if(c.length&&(h=c.reduce(function(m,y){if(y.props[d]===r&&Ka(y.props,"extendDomain")&&Ie(y.props[f])){var x=y.props[f];return[Math.min(m[0],x),Math.max(m[1],x)]}return m},h)),u.length){var p="".concat(f,"1"),g="".concat(f,"2");h=u.reduce(function(m,y){if(y.props[d]===r&&Ka(y.props,"extendDomain")&&Ie(y.props[p])&&Ie(y.props[g])){var x=y.props[p],w=y.props[g];return[Math.min(m[0],x,w),Math.max(m[1],x,w)]}return m},h)}return s&&s.length&&(h=s.reduce(function(m,y){return Ie(y)?[Math.min(m[0],y),Math.max(m[1],y)]:m},h)),h},oU={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new i(d,f||c,h),g=n?n+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],p]:c._events[g].push(p):(c._events[g]=p,c._eventsCount++),c}function a(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)e.call(d,f)&&u.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=n?n+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,g=new Array(p);h<p;h++)g[h]=f[h].fn;return g},o.prototype.listenerCount=function(u){var d=n?n+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,h,p,g){var m=n?n+u:u;if(!this._events[m])return!1;var y=this._events[m],x=arguments.length,w,_;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),x){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,d),!0;case 3:return y.fn.call(y.context,d,f),!0;case 4:return y.fn.call(y.context,d,f,h),!0;case 5:return y.fn.call(y.context,d,f,h,p),!0;case 6:return y.fn.call(y.context,d,f,h,p,g),!0}for(_=1,w=new Array(x-1);_<x;_++)w[_-1]=arguments[_];y.fn.apply(y.context,w)}else{var A=y.length,E;for(_=0;_<A;_++)switch(y[_].once&&this.removeListener(u,y[_].fn,void 0,!0),x){case 1:y[_].fn.call(y[_].context);break;case 2:y[_].fn.call(y[_].context,d);break;case 3:y[_].fn.call(y[_].context,d,f);break;case 4:y[_].fn.call(y[_].context,d,f,h);break;default:if(!w)for(E=1,w=new Array(x-1);E<x;E++)w[E-1]=arguments[E];y[_].fn.apply(y[_].context,w)}}return!0},o.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,h){var p=n?n+u:u;if(!this._events[p])return this;if(!d)return a(this,p),this;var g=this._events[p];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&a(this,p);else{for(var m=0,y=[],x=g.length;m<x;m++)(g[m].fn!==d||h&&!g[m].once||f&&g[m].context!==f)&&y.push(g[m]);y.length?this._events[p]=y.length===1?y[0]:y:a(this,p)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&a(this,d)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(oU);var bke=oU.exports;const xke=tn(bke);var dS=new xke,fS="recharts.syncMouseEvents";function Gg(t){"@babel/helpers - typeof";return Gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gg(t)}function wke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _ke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lU(r.key),r)}}function Ske(t,e,n){return e&&_ke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function hS(t,e,n){return e=lU(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lU(t){var e=Ake(t,"string");return Gg(e)=="symbol"?e:e+""}function Ake(t,e){if(Gg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Gg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Eke=function(){function t(){wke(this,t),hS(this,"activeIndex",0),hS(this,"coordinateList",[]),hS(this,"layout","horizontal")}return Ske(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,s=i===void 0?null:i,a=n.container,o=a===void 0?null:a,c=n.layout,u=c===void 0?null:c,d=n.offset,f=d===void 0?null:d,h=n.mouseHandlerCallback,p=h===void 0?null:h;this.coordinateList=(r=s??this.coordinateList)!==null&&r!==void 0?r:[],this.container=o??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,a=i.y,o=i.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,f=s+c+u,h=a+this.offset.top+o/2+d;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function jke(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&Ie(r)&&Ie(i))return!0}return!1}function Cke(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function cU(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,s=t.endAngle,a=xn(e,n,r,i),o=xn(e,n,r,s);return{points:[a,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:s}}function Tke(t,e,n){var r,i,s,a;if(t==="horizontal")r=e.x,s=r,i=n.top,a=n.top+n.height;else if(t==="vertical")i=e.y,a=i,r=n.left,s=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var o=e.cx,c=e.cy,u=e.innerRadius,d=e.outerRadius,f=e.angle,h=xn(o,c,u,f),p=xn(o,c,d,f);r=h.x,i=h.y,s=p.x,a=p.y}else return cU(e);return[{x:r,y:i},{x:s,y:a}]}function Yg(t){"@babel/helpers - typeof";return Yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yg(t)}function O5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Py(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O5(Object(n),!0).forEach(function(r){Nke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nke(t,e,n){return e=Pke(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pke(t){var e=kke(t,"string");return Yg(e)=="symbol"?e:e+""}function kke(t,e){if(Yg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Yg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dke(t){var e,n,r=t.element,i=t.tooltipEventType,s=t.isActive,a=t.activeCoordinate,o=t.activePayload,c=t.offset,u=t.activeTooltipIndex,d=t.tooltipAxisBandSize,f=t.layout,h=t.chartName,p=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!p||!s||!a||h!=="ScatterChart"&&i!=="axis")return null;var g,m=_u;if(h==="ScatterChart")g=a,m=F2e;else if(h==="BarChart")g=Cke(f,a,c,d),m=WN;else if(f==="radial"){var y=cU(a),x=y.cx,w=y.cy,_=y.radius,A=y.startAngle,E=y.endAngle;g={cx:x,cy:w,startAngle:A,endAngle:E,innerRadius:_,outerRadius:_},m=n7}else g={points:Tke(f,a,c)},m=_u;var C=Py(Py(Py(Py({stroke:"#ccc",pointerEvents:"none"},c),g),lt(p,!1)),{},{payload:o,payloadIndex:u,className:Tt("recharts-tooltip-cursor",p.className)});return N.isValidElement(p)?N.cloneElement(p,C):N.createElement(m,C)}var Ike=["item"],Oke=["children","className","width","height","style","compact","title","desc"];function Ah(t){"@babel/helpers - typeof";return Ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ah(t)}function df(){return df=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},df.apply(this,arguments)}function M5(t,e){return Lke(t)||Rke(t,e)||dU(t,e)||Mke()}function Mke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rke(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function Lke(t){if(Array.isArray(t))return t}function R5(t,e){if(t==null)return{};var n=zke(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function zke(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function $ke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fU(r.key),r)}}function Vke(t,e,n){return e&&Fke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bke(t,e,n){return e=gx(e),Uke(t,uU()?Reflect.construct(e,n||[],gx(t).constructor):e.apply(t,n))}function Uke(t,e){if(e&&(Ah(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wke(t)}function Wke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uU(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uU=function(){return!!t})()}function gx(t){return gx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gx(t)}function Hke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Z2(t,e)}function Z2(t,e){return Z2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Z2(t,e)}function Eh(t){return Gke(t)||qke(t)||dU(t)||Kke()}function Kke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dU(t,e){if(t){if(typeof t=="string")return J2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J2(t,e)}}function qke(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Gke(t){if(Array.isArray(t))return J2(t)}function J2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function L5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ee(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L5(Object(n),!0).forEach(function(r){mt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mt(t,e,n){return e=fU(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fU(t){var e=Yke(t,"string");return Ah(e)=="symbol"?e:e+""}function Yke(t,e){if(Ah(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ah(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qke={xAxis:["bottom","top"],yAxis:["left","right"]},Xke={width:"100%",height:"100%"},hU={x:0,y:0};function ky(t){return t}var Zke=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},Jke=function(e,n,r,i){var s=n.find(function(d){return d&&d.index===r});if(s){if(e==="horizontal")return{x:s.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:s.coordinate};if(e==="centric"){var a=s.coordinate,o=i.radius;return Ee(Ee(Ee({},i),xn(i.cx,i.cy,o,a)),{},{angle:a,radius:o})}var c=s.coordinate,u=i.angle;return Ee(Ee(Ee({},i),xn(i.cx,i.cy,c,u)),{},{angle:u,radius:c})}return hU},v1=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,s=n.dataEndIndex,a=(r??[]).reduce(function(o,c){var u=c.props.data;return u&&u.length?[].concat(Eh(o),Eh(u)):o},[]);return a.length>0?a:e&&e.length&&Ie(i)&&Ie(s)?e.slice(i,s+1):[]};function pU(t){return t==="number"?[0,"auto"]:void 0}var ej=function(e,n,r,i){var s=e.graphicalItems,a=e.tooltipAxis,o=v1(n,e);return r<0||!s||!s.length||r>=o.length?null:s.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:n;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var h;if(a.dataKey&&!a.allowDuplicatedCategory){var p=f===void 0?o:f;h=mb(p,a.dataKey,i)}else h=f&&f[r]||o[r];return h?[].concat(Eh(c),[Q9(u,h)]):c},[])},z5=function(e,n,r,i){var s=i||{x:e.chartX,y:e.chartY},a=Zke(s,r),o=e.orderedTooltipTicks,c=e.tooltipAxis,u=e.tooltipTicks,d=cSe(a,o,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,h=ej(e,n,d,f),p=Jke(r,o,d,s);return{activeTooltipIndex:d,activeLabel:f,activePayload:h,activeCoordinate:p}}return null},eDe=function(e,n){var r=n.axes,i=n.graphicalItems,s=n.axisType,a=n.axisIdKey,o=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,f=e.children,h=e.stackOffset,p=W9(d,s);return r.reduce(function(g,m){var y,x=m.type.defaultProps!==void 0?Ee(Ee({},m.type.defaultProps),m.props):m.props,w=x.type,_=x.dataKey,A=x.allowDataOverflow,E=x.allowDuplicatedCategory,C=x.scale,j=x.ticks,T=x.includeHidden,P=x[a];if(g[P])return g;var I=v1(e.data,{graphicalItems:i.filter(function(ie){var oe,ve=a in ie.props?ie.props[a]:(oe=ie.type.defaultProps)===null||oe===void 0?void 0:oe[a];return ve===P}),dataStartIndex:c,dataEndIndex:u}),M=I.length,F,R,H;jke(x.domain,A,w)&&(F=h2(x.domain,null,A),p&&(w==="number"||C!=="auto")&&(H=Am(I,_,"category")));var X=pU(w);if(!F||F.length===0){var W,U=(W=x.domain)!==null&&W!==void 0?W:X;if(_){if(F=Am(I,_,w),w==="category"&&p){var $=Jce(F);E&&$?(R=F,F=nx(0,M)):E||(F=i4(U,F,m).reduce(function(ie,oe){return ie.indexOf(oe)>=0?ie:[].concat(Eh(ie),[oe])},[]))}else if(w==="category")E?F=F.filter(function(ie){return ie!==""&&!_t(ie)}):F=i4(U,F,m).reduce(function(ie,oe){return ie.indexOf(oe)>=0||oe===""||_t(oe)?ie:[].concat(Eh(ie),[oe])},[]);else if(w==="number"){var Y=pSe(I,i.filter(function(ie){var oe,ve,je=a in ie.props?ie.props[a]:(oe=ie.type.defaultProps)===null||oe===void 0?void 0:oe[a],Se="hide"in ie.props?ie.props.hide:(ve=ie.type.defaultProps)===null||ve===void 0?void 0:ve.hide;return je===P&&(T||!Se)}),_,s,d);Y&&(F=Y)}p&&(w==="number"||C!=="auto")&&(H=Am(I,_,"category"))}else p?F=nx(0,M):o&&o[P]&&o[P].hasStack&&w==="number"?F=h==="expand"?[0,1]:Y9(o[P].stackGroups,c,u):F=U9(I,i.filter(function(ie){var oe=a in ie.props?ie.props[a]:ie.type.defaultProps[a],ve="hide"in ie.props?ie.props.hide:ie.type.defaultProps.hide;return oe===P&&(T||!ve)}),w,d,!0);if(w==="number")F=X2(f,F,P,s,j),U&&(F=h2(U,F,A));else if(w==="category"&&U){var Q=U,ce=F.every(function(ie){return Q.indexOf(ie)>=0});ce&&(F=Q)}}return Ee(Ee({},g),{},mt({},P,Ee(Ee({},x),{},{axisType:s,domain:F,categoricalDomain:H,duplicateDomain:R,originalDomain:(y=x.domain)!==null&&y!==void 0?y:X,isCategorical:p,layout:d})))},{})},tDe=function(e,n){var r=n.graphicalItems,i=n.Axis,s=n.axisType,a=n.axisIdKey,o=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,f=e.children,h=v1(e.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),p=h.length,g=W9(d,s),m=-1;return r.reduce(function(y,x){var w=x.type.defaultProps!==void 0?Ee(Ee({},x.type.defaultProps),x.props):x.props,_=w[a],A=pU("number");if(!y[_]){m++;var E;return g?E=nx(0,p):o&&o[_]&&o[_].hasStack?(E=Y9(o[_].stackGroups,c,u),E=X2(f,E,_,s)):(E=h2(A,U9(h,r.filter(function(C){var j,T,P=a in C.props?C.props[a]:(j=C.type.defaultProps)===null||j===void 0?void 0:j[a],I="hide"in C.props?C.props.hide:(T=C.type.defaultProps)===null||T===void 0?void 0:T.hide;return P===_&&!I}),"number",d),i.defaultProps.allowDataOverflow),E=X2(f,E,_,s)),Ee(Ee({},y),{},mt({},_,Ee(Ee({axisType:s},i.defaultProps),{},{hide:!0,orientation:os(Qke,"".concat(s,".").concat(m%2),null),domain:E,originalDomain:A,isCategorical:g,layout:d})))}return y},{})},nDe=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,s=n.AxisComp,a=n.graphicalItems,o=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.children,f="".concat(i,"Id"),h=ls(d,s),p={};return h&&h.length?p=eDe(e,{axes:h,graphicalItems:a,axisType:i,axisIdKey:f,stackGroups:o,dataStartIndex:c,dataEndIndex:u}):a&&a.length&&(p=tDe(e,{Axis:s,graphicalItems:a,axisType:i,axisIdKey:f,stackGroups:o,dataStartIndex:c,dataEndIndex:u})),p},rDe=function(e){var n=_l(e),r=Ao(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:vN(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Wb(n,r)}},$5=function(e){var n=e.children,r=e.defaultShowTooltip,i=Ji(n,ph),s=0,a=0;return e.data&&e.data.length!==0&&(a=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(a=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!r}},iDe=function(e){return!e||!e.length?!1:e.some(function(n){var r=To(n&&n.type);return r&&r.indexOf("Bar")>=0})},F5=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},sDe=function(e,n){var r=e.props,i=e.graphicalItems,s=e.xAxisMap,a=s===void 0?{}:s,o=e.yAxisMap,c=o===void 0?{}:o,u=r.width,d=r.height,f=r.children,h=r.margin||{},p=Ji(f,ph),g=Ji(f,aa),m=Object.keys(c).reduce(function(E,C){var j=c[C],T=j.orientation;return!j.mirror&&!j.hide?Ee(Ee({},E),{},mt({},T,E[T]+j.width)):E},{left:h.left||0,right:h.right||0}),y=Object.keys(a).reduce(function(E,C){var j=a[C],T=j.orientation;return!j.mirror&&!j.hide?Ee(Ee({},E),{},mt({},T,os(E,"".concat(T))+j.height)):E},{top:h.top||0,bottom:h.bottom||0}),x=Ee(Ee({},y),m),w=x.bottom;p&&(x.bottom+=p.props.height||ph.defaultProps.height),g&&n&&(x=fSe(x,i,r,n));var _=u-x.left-x.right,A=d-x.top-x.bottom;return Ee(Ee({brushBottom:w},x),{},{width:Math.max(_,0),height:Math.max(A,0)})},aDe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},y1=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,s=i===void 0?"axis":i,a=e.validateTooltipEventTypes,o=a===void 0?["axis"]:a,c=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,f=e.defaultProps,h=function(x,w){var _=w.graphicalItems,A=w.stackGroups,E=w.offset,C=w.updateId,j=w.dataStartIndex,T=w.dataEndIndex,P=x.barSize,I=x.layout,M=x.barGap,F=x.barCategoryGap,R=x.maxBarSize,H=F5(I),X=H.numericAxisName,W=H.cateAxisName,U=iDe(_),$=[];return _.forEach(function(Y,Q){var ce=v1(x.data,{graphicalItems:[Y],dataStartIndex:j,dataEndIndex:T}),ie=Y.type.defaultProps!==void 0?Ee(Ee({},Y.type.defaultProps),Y.props):Y.props,oe=ie.dataKey,ve=ie.maxBarSize,je=ie["".concat(X,"Id")],Se=ie["".concat(W,"Id")],Me={},Qe=c.reduce(function(Ft,or){var He=w["".concat(or.axisType,"Map")],Zt=ie["".concat(or.axisType,"Id")];He&&He[Zt]||or.axisType==="zAxis"||Vu();var Pe=He[Zt];return Ee(Ee({},Ft),{},mt(mt({},or.axisType,Pe),"".concat(or.axisType,"Ticks"),Ao(Pe)))},Me),me=Qe[W],Ye=Qe["".concat(W,"Ticks")],Xe=A&&A[je]&&A[je].hasStack&&SSe(Y,A[je].stackGroups),te=To(Y.type).indexOf("Bar")>=0,Te=Wb(me,Ye),ot=[],Ct=U&&uSe({barSize:P,stackGroups:A,totalSize:aDe(Qe,W)});if(te){var nt,st,Xt=_t(ve)?R:ve,Yn=(nt=(st=Wb(me,Ye,!0))!==null&&st!==void 0?st:Xt)!==null&&nt!==void 0?nt:0;ot=dSe({barGap:M,barCategoryGap:F,bandSize:Yn!==Te?Yn:Te,sizeList:Ct[Se],maxBarSize:Xt}),Yn!==Te&&(ot=ot.map(function(Ft){return Ee(Ee({},Ft),{},{position:Ee(Ee({},Ft.position),{},{offset:Ft.position.offset-Yn/2})})}))}var Mn=Y&&Y.type&&Y.type.getComposedData;Mn&&$.push({props:Ee(Ee({},Mn(Ee(Ee({},Qe),{},{displayedData:ce,props:x,dataKey:oe,item:Y,bandSize:Te,barPosition:ot,offset:E,stackedData:Xe,layout:I,dataStartIndex:j,dataEndIndex:T}))),{},mt(mt(mt({key:Y.key||"item-".concat(Q)},X,Qe[X]),W,Qe[W]),"animationId",C)),childIndex:due(Y,x.children),item:Y})}),$},p=function(x,w){var _=x.props,A=x.dataStartIndex,E=x.dataEndIndex,C=x.updateId;if(!ZO({props:_}))return null;var j=_.children,T=_.layout,P=_.stackOffset,I=_.data,M=_.reverseStackOrder,F=F5(T),R=F.numericAxisName,H=F.cateAxisName,X=ls(j,r),W=wSe(I,X,"".concat(R,"Id"),"".concat(H,"Id"),P,M),U=c.reduce(function(ie,oe){var ve="".concat(oe.axisType,"Map");return Ee(Ee({},ie),{},mt({},ve,nDe(_,Ee(Ee({},oe),{},{graphicalItems:X,stackGroups:oe.axisType===R&&W,dataStartIndex:A,dataEndIndex:E}))))},{}),$=sDe(Ee(Ee({},U),{},{props:_,graphicalItems:X}),w==null?void 0:w.legendBBox);Object.keys(U).forEach(function(ie){U[ie]=d(_,U[ie],$,ie.replace("Map",""),n)});var Y=U["".concat(H,"Map")],Q=rDe(Y),ce=h(_,Ee(Ee({},U),{},{dataStartIndex:A,dataEndIndex:E,updateId:C,graphicalItems:X,stackGroups:W,offset:$}));return Ee(Ee({formattedGraphicalItems:ce,graphicalItems:X,offset:$,stackGroups:W},Q),U)},g=function(y){function x(w){var _,A,E;return $ke(this,x),E=Bke(this,x,[w]),mt(E,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),mt(E,"accessibilityManager",new Eke),mt(E,"handleLegendBBoxUpdate",function(C){if(C){var j=E.state,T=j.dataStartIndex,P=j.dataEndIndex,I=j.updateId;E.setState(Ee({legendBBox:C},p({props:E.props,dataStartIndex:T,dataEndIndex:P,updateId:I},Ee(Ee({},E.state),{},{legendBBox:C}))))}}),mt(E,"handleReceiveSyncEvent",function(C,j,T){if(E.props.syncId===C){if(T===E.eventEmitterSymbol&&typeof E.props.syncMethod!="function")return;E.applySyncEvent(j)}}),mt(E,"handleBrushChange",function(C){var j=C.startIndex,T=C.endIndex;if(j!==E.state.dataStartIndex||T!==E.state.dataEndIndex){var P=E.state.updateId;E.setState(function(){return Ee({dataStartIndex:j,dataEndIndex:T},p({props:E.props,dataStartIndex:j,dataEndIndex:T,updateId:P},E.state))}),E.triggerSyncEvent({dataStartIndex:j,dataEndIndex:T})}}),mt(E,"handleMouseEnter",function(C){var j=E.getMouseInfo(C);if(j){var T=Ee(Ee({},j),{},{isTooltipActive:!0});E.setState(T),E.triggerSyncEvent(T);var P=E.props.onMouseEnter;vt(P)&&P(T,C)}}),mt(E,"triggeredAfterMouseMove",function(C){var j=E.getMouseInfo(C),T=j?Ee(Ee({},j),{},{isTooltipActive:!0}):{isTooltipActive:!1};E.setState(T),E.triggerSyncEvent(T);var P=E.props.onMouseMove;vt(P)&&P(T,C)}),mt(E,"handleItemMouseEnter",function(C){E.setState(function(){return{isTooltipActive:!0,activeItem:C,activePayload:C.tooltipPayload,activeCoordinate:C.tooltipPosition||{x:C.cx,y:C.cy}}})}),mt(E,"handleItemMouseLeave",function(){E.setState(function(){return{isTooltipActive:!1}})}),mt(E,"handleMouseMove",function(C){C.persist(),E.throttleTriggeredAfterMouseMove(C)}),mt(E,"handleMouseLeave",function(C){E.throttleTriggeredAfterMouseMove.cancel();var j={isTooltipActive:!1};E.setState(j),E.triggerSyncEvent(j);var T=E.props.onMouseLeave;vt(T)&&T(j,C)}),mt(E,"handleOuterEvent",function(C){var j=uue(C),T=os(E.props,"".concat(j));if(j&&vt(T)){var P,I;/.*touch.*/i.test(j)?I=E.getMouseInfo(C.changedTouches[0]):I=E.getMouseInfo(C),T((P=I)!==null&&P!==void 0?P:{},C)}}),mt(E,"handleClick",function(C){var j=E.getMouseInfo(C);if(j){var T=Ee(Ee({},j),{},{isTooltipActive:!0});E.setState(T),E.triggerSyncEvent(T);var P=E.props.onClick;vt(P)&&P(T,C)}}),mt(E,"handleMouseDown",function(C){var j=E.props.onMouseDown;if(vt(j)){var T=E.getMouseInfo(C);j(T,C)}}),mt(E,"handleMouseUp",function(C){var j=E.props.onMouseUp;if(vt(j)){var T=E.getMouseInfo(C);j(T,C)}}),mt(E,"handleTouchMove",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&E.throttleTriggeredAfterMouseMove(C.changedTouches[0])}),mt(E,"handleTouchStart",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&E.handleMouseDown(C.changedTouches[0])}),mt(E,"handleTouchEnd",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&E.handleMouseUp(C.changedTouches[0])}),mt(E,"handleDoubleClick",function(C){var j=E.props.onDoubleClick;if(vt(j)){var T=E.getMouseInfo(C);j(T,C)}}),mt(E,"handleContextMenu",function(C){var j=E.props.onContextMenu;if(vt(j)){var T=E.getMouseInfo(C);j(T,C)}}),mt(E,"triggerSyncEvent",function(C){E.props.syncId!==void 0&&dS.emit(fS,E.props.syncId,C,E.eventEmitterSymbol)}),mt(E,"applySyncEvent",function(C){var j=E.props,T=j.layout,P=j.syncMethod,I=E.state.updateId,M=C.dataStartIndex,F=C.dataEndIndex;if(C.dataStartIndex!==void 0||C.dataEndIndex!==void 0)E.setState(Ee({dataStartIndex:M,dataEndIndex:F},p({props:E.props,dataStartIndex:M,dataEndIndex:F,updateId:I},E.state)));else if(C.activeTooltipIndex!==void 0){var R=C.chartX,H=C.chartY,X=C.activeTooltipIndex,W=E.state,U=W.offset,$=W.tooltipTicks;if(!U)return;if(typeof P=="function")X=P($,C);else if(P==="value"){X=-1;for(var Y=0;Y<$.length;Y++)if($[Y].value===C.activeLabel){X=Y;break}}var Q=Ee(Ee({},U),{},{x:U.left,y:U.top}),ce=Math.min(R,Q.x+Q.width),ie=Math.min(H,Q.y+Q.height),oe=$[X]&&$[X].value,ve=ej(E.state,E.props.data,X),je=$[X]?{x:T==="horizontal"?$[X].coordinate:ce,y:T==="horizontal"?ie:$[X].coordinate}:hU;E.setState(Ee(Ee({},C),{},{activeLabel:oe,activeCoordinate:je,activePayload:ve,activeTooltipIndex:X}))}else E.setState(C)}),mt(E,"renderCursor",function(C){var j,T=E.state,P=T.isTooltipActive,I=T.activeCoordinate,M=T.activePayload,F=T.offset,R=T.activeTooltipIndex,H=T.tooltipAxisBandSize,X=E.getTooltipEventType(),W=(j=C.props.active)!==null&&j!==void 0?j:P,U=E.props.layout,$=C.key||"_recharts-cursor";return q.createElement(Dke,{key:$,activeCoordinate:I,activePayload:M,activeTooltipIndex:R,chartName:n,element:C,isActive:W,layout:U,offset:F,tooltipAxisBandSize:H,tooltipEventType:X})}),mt(E,"renderPolarAxis",function(C,j,T){var P=os(C,"type.axisType"),I=os(E.state,"".concat(P,"Map")),M=C.type.defaultProps,F=M!==void 0?Ee(Ee({},M),C.props):C.props,R=I&&I[F["".concat(P,"Id")]];return N.cloneElement(C,Ee(Ee({},R),{},{className:Tt(P,R.className),key:C.key||"".concat(j,"-").concat(T),ticks:Ao(R,!0)}))}),mt(E,"renderPolarGrid",function(C){var j=C.props,T=j.radialLines,P=j.polarAngles,I=j.polarRadius,M=E.state,F=M.radiusAxisMap,R=M.angleAxisMap,H=_l(F),X=_l(R),W=X.cx,U=X.cy,$=X.innerRadius,Y=X.outerRadius;return N.cloneElement(C,{polarAngles:Array.isArray(P)?P:Ao(X,!0).map(function(Q){return Q.coordinate}),polarRadius:Array.isArray(I)?I:Ao(H,!0).map(function(Q){return Q.coordinate}),cx:W,cy:U,innerRadius:$,outerRadius:Y,key:C.key||"polar-grid",radialLines:T})}),mt(E,"renderLegend",function(){var C=E.state.formattedGraphicalItems,j=E.props,T=j.children,P=j.width,I=j.height,M=E.props.margin||{},F=P-(M.left||0)-(M.right||0),R=V9({children:T,formattedGraphicalItems:C,legendWidth:F,legendContent:u});if(!R)return null;var H=R.item,X=R5(R,Ike);return N.cloneElement(H,Ee(Ee({},X),{},{chartWidth:P,chartHeight:I,margin:M,onBBoxUpdate:E.handleLegendBBoxUpdate}))}),mt(E,"renderTooltip",function(){var C,j=E.props,T=j.children,P=j.accessibilityLayer,I=Ji(T,fn);if(!I)return null;var M=E.state,F=M.isTooltipActive,R=M.activeCoordinate,H=M.activePayload,X=M.activeLabel,W=M.offset,U=(C=I.props.active)!==null&&C!==void 0?C:F;return N.cloneElement(I,{viewBox:Ee(Ee({},W),{},{x:W.left,y:W.top}),active:U,label:X,payload:U?H:[],coordinate:R,accessibilityLayer:P})}),mt(E,"renderBrush",function(C){var j=E.props,T=j.margin,P=j.data,I=E.state,M=I.offset,F=I.dataStartIndex,R=I.dataEndIndex,H=I.updateId;return N.cloneElement(C,{key:C.key||"_recharts-brush",onChange:jy(E.handleBrushChange,C.props.onChange),data:P,x:Ie(C.props.x)?C.props.x:M.left,y:Ie(C.props.y)?C.props.y:M.top+M.height+M.brushBottom-(T.bottom||0),width:Ie(C.props.width)?C.props.width:M.width,startIndex:F,endIndex:R,updateId:"brush-".concat(H)})}),mt(E,"renderReferenceElement",function(C,j,T){if(!C)return null;var P=E,I=P.clipPathId,M=E.state,F=M.xAxisMap,R=M.yAxisMap,H=M.offset,X=C.type.defaultProps||{},W=C.props,U=W.xAxisId,$=U===void 0?X.xAxisId:U,Y=W.yAxisId,Q=Y===void 0?X.yAxisId:Y;return N.cloneElement(C,{key:C.key||"".concat(j,"-").concat(T),xAxis:F[$],yAxis:R[Q],viewBox:{x:H.left,y:H.top,width:H.width,height:H.height},clipPathId:I})}),mt(E,"renderActivePoints",function(C){var j=C.item,T=C.activePoint,P=C.basePoint,I=C.childIndex,M=C.isRange,F=[],R=j.props.key,H=j.item.type.defaultProps!==void 0?Ee(Ee({},j.item.type.defaultProps),j.item.props):j.item.props,X=H.activeDot,W=H.dataKey,U=Ee(Ee({index:I,dataKey:W,cx:T.x,cy:T.y,r:4,fill:UN(j.item),strokeWidth:2,stroke:"#fff",payload:T.payload,value:T.value},lt(X,!1)),gb(X));return F.push(x.renderActiveDot(X,U,"".concat(R,"-activePoint-").concat(I))),P?F.push(x.renderActiveDot(X,Ee(Ee({},U),{},{cx:P.x,cy:P.y}),"".concat(R,"-basePoint-").concat(I))):M&&F.push(null),F}),mt(E,"renderGraphicChild",function(C,j,T){var P=E.filterFormatItem(C,j,T);if(!P)return null;var I=E.getTooltipEventType(),M=E.state,F=M.isTooltipActive,R=M.tooltipAxis,H=M.activeTooltipIndex,X=M.activeLabel,W=E.props.children,U=Ji(W,fn),$=P.props,Y=$.points,Q=$.isRange,ce=$.baseLine,ie=P.item.type.defaultProps!==void 0?Ee(Ee({},P.item.type.defaultProps),P.item.props):P.item.props,oe=ie.activeDot,ve=ie.hide,je=ie.activeBar,Se=ie.activeShape,Me=!!(!ve&&F&&U&&(oe||je||Se)),Qe={};I!=="axis"&&U&&U.props.trigger==="click"?Qe={onClick:jy(E.handleItemMouseEnter,C.props.onClick)}:I!=="axis"&&(Qe={onMouseLeave:jy(E.handleItemMouseLeave,C.props.onMouseLeave),onMouseEnter:jy(E.handleItemMouseEnter,C.props.onMouseEnter)});var me=N.cloneElement(C,Ee(Ee({},P.props),Qe));function Ye(or){return typeof R.dataKey=="function"?R.dataKey(or.payload):null}if(Me)if(H>=0){var Xe,te;if(R.dataKey&&!R.allowDuplicatedCategory){var Te=typeof R.dataKey=="function"?Ye:"payload.".concat(R.dataKey.toString());Xe=mb(Y,Te,X),te=Q&&ce&&mb(ce,Te,X)}else Xe=Y==null?void 0:Y[H],te=Q&&ce&&ce[H];if(Se||je){var ot=C.props.activeIndex!==void 0?C.props.activeIndex:H;return[N.cloneElement(C,Ee(Ee(Ee({},P.props),Qe),{},{activeIndex:ot})),null,null]}if(!_t(Xe))return[me].concat(Eh(E.renderActivePoints({item:P,activePoint:Xe,basePoint:te,childIndex:H,isRange:Q})))}else{var Ct,nt=(Ct=E.getItemByXY(E.state.activeCoordinate))!==null&&Ct!==void 0?Ct:{graphicalItem:me},st=nt.graphicalItem,Xt=st.item,Yn=Xt===void 0?C:Xt,Mn=st.childIndex,Ft=Ee(Ee(Ee({},P.props),Qe),{},{activeIndex:Mn});return[N.cloneElement(Yn,Ft),null,null]}return Q?[me,null,null]:[me,null]}),mt(E,"renderCustomized",function(C,j,T){return N.cloneElement(C,Ee(Ee({key:"recharts-customized-".concat(T)},E.props),E.state))}),mt(E,"renderMap",{CartesianGrid:{handler:ky,once:!0},ReferenceArea:{handler:E.renderReferenceElement},ReferenceLine:{handler:ky},ReferenceDot:{handler:E.renderReferenceElement},XAxis:{handler:ky},YAxis:{handler:ky},Brush:{handler:E.renderBrush,once:!0},Bar:{handler:E.renderGraphicChild},Line:{handler:E.renderGraphicChild},Area:{handler:E.renderGraphicChild},Radar:{handler:E.renderGraphicChild},RadialBar:{handler:E.renderGraphicChild},Scatter:{handler:E.renderGraphicChild},Pie:{handler:E.renderGraphicChild},Funnel:{handler:E.renderGraphicChild},Tooltip:{handler:E.renderCursor,once:!0},PolarGrid:{handler:E.renderPolarGrid,once:!0},PolarAngleAxis:{handler:E.renderPolarAxis},PolarRadiusAxis:{handler:E.renderPolarAxis},Customized:{handler:E.renderCustomized}}),E.clipPathId="".concat((_=w.id)!==null&&_!==void 0?_:rd("recharts"),"-clip"),E.throttleTriggeredAfterMouseMove=FB(E.triggeredAfterMouseMove,(A=w.throttleDelay)!==null&&A!==void 0?A:1e3/60),E.state={},E}return Hke(x,y),Vke(x,[{key:"componentDidMount",value:function(){var _,A;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var _=this.props,A=_.children,E=_.data,C=_.height,j=_.layout,T=Ji(A,fn);if(T){var P=T.props.defaultIndex;if(!(typeof P!="number"||P<0||P>this.state.tooltipTicks.length-1)){var I=this.state.tooltipTicks[P]&&this.state.tooltipTicks[P].value,M=ej(this.state,E,P,I),F=this.state.tooltipTicks[P].coordinate,R=(this.state.offset.top+C)/2,H=j==="horizontal",X=H?{x:F,y:R}:{y:F,x:R},W=this.state.formattedGraphicalItems.find(function($){var Y=$.item;return Y.type.name==="Scatter"});W&&(X=Ee(Ee({},X),W.props.points[P].tooltipPosition),M=W.props.points[P].tooltipPayload);var U={activeTooltipIndex:P,isTooltipActive:!0,activeLabel:I,activePayload:M,activeCoordinate:X};this.setState(U),this.renderCursor(T),this.accessibilityManager.setIndex(P)}}}},{key:"getSnapshotBeforeUpdate",value:function(_,A){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==A.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==_.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==_.margin){var E,C;this.accessibilityManager.setDetails({offset:{left:(E=this.props.margin.left)!==null&&E!==void 0?E:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0}})}return null}},{key:"componentDidUpdate",value:function(_){TE([Ji(_.children,fn)],[Ji(this.props.children,fn)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var _=Ji(this.props.children,fn);if(_&&typeof _.props.shared=="boolean"){var A=_.props.shared?"axis":"item";return o.indexOf(A)>=0?A:s}return s}},{key:"getMouseInfo",value:function(_){if(!this.container)return null;var A=this.container,E=A.getBoundingClientRect(),C=Lbe(E),j={chartX:Math.round(_.pageX-C.left),chartY:Math.round(_.pageY-C.top)},T=E.width/A.offsetWidth||1,P=this.inRange(j.chartX,j.chartY,T);if(!P)return null;var I=this.state,M=I.xAxisMap,F=I.yAxisMap,R=this.getTooltipEventType(),H=z5(this.state,this.props.data,this.props.layout,P);if(R!=="axis"&&M&&F){var X=_l(M).scale,W=_l(F).scale,U=X&&X.invert?X.invert(j.chartX):null,$=W&&W.invert?W.invert(j.chartY):null;return Ee(Ee({},j),{},{xValue:U,yValue:$},H)}return H?Ee(Ee({},j),H):null}},{key:"inRange",value:function(_,A){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,C=this.props.layout,j=_/E,T=A/E;if(C==="horizontal"||C==="vertical"){var P=this.state.offset,I=j>=P.left&&j<=P.left+P.width&&T>=P.top&&T<=P.top+P.height;return I?{x:j,y:T}:null}var M=this.state,F=M.angleAxisMap,R=M.radiusAxisMap;if(F&&R){var H=_l(F);return o4({x:j,y:T},H)}return null}},{key:"parseEventsOfWrapper",value:function(){var _=this.props.children,A=this.getTooltipEventType(),E=Ji(_,fn),C={};E&&A==="axis"&&(E.props.trigger==="click"?C={onClick:this.handleClick}:C={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var j=gb(this.props,this.handleOuterEvent);return Ee(Ee({},j),C)}},{key:"addListener",value:function(){dS.on(fS,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){dS.removeListener(fS,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(_,A,E){for(var C=this.state.formattedGraphicalItems,j=0,T=C.length;j<T;j++){var P=C[j];if(P.item===_||P.props.key===_.key||A===To(P.item.type)&&E===P.childIndex)return P}return null}},{key:"renderClipPath",value:function(){var _=this.clipPathId,A=this.state.offset,E=A.left,C=A.top,j=A.height,T=A.width;return q.createElement("defs",null,q.createElement("clipPath",{id:_},q.createElement("rect",{x:E,y:C,height:j,width:T})))}},{key:"getXScales",value:function(){var _=this.state.xAxisMap;return _?Object.entries(_).reduce(function(A,E){var C=M5(E,2),j=C[0],T=C[1];return Ee(Ee({},A),{},mt({},j,T.scale))},{}):null}},{key:"getYScales",value:function(){var _=this.state.yAxisMap;return _?Object.entries(_).reduce(function(A,E){var C=M5(E,2),j=C[0],T=C[1];return Ee(Ee({},A),{},mt({},j,T.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(_){var A;return(A=this.state.xAxisMap)===null||A===void 0||(A=A[_])===null||A===void 0?void 0:A.scale}},{key:"getYScaleByAxisId",value:function(_){var A;return(A=this.state.yAxisMap)===null||A===void 0||(A=A[_])===null||A===void 0?void 0:A.scale}},{key:"getItemByXY",value:function(_){var A=this.state,E=A.formattedGraphicalItems,C=A.activeItem;if(E&&E.length)for(var j=0,T=E.length;j<T;j++){var P=E[j],I=P.props,M=P.item,F=M.type.defaultProps!==void 0?Ee(Ee({},M.type.defaultProps),M.props):M.props,R=To(M.type);if(R==="Bar"){var H=(I.data||[]).find(function($){return x2e(_,$)});if(H)return{graphicalItem:P,payload:H}}else if(R==="RadialBar"){var X=(I.data||[]).find(function($){return o4(_,$)});if(X)return{graphicalItem:P,payload:X}}else if(c1(P,C)||u1(P,C)||Ug(P,C)){var W=lCe({graphicalItem:P,activeTooltipItem:C,itemData:F.data}),U=F.activeIndex===void 0?W:F.activeIndex;return{graphicalItem:Ee(Ee({},P),{},{childIndex:U}),payload:Ug(P,C)?F.data[W]:P.props.data[W]}}}return null}},{key:"render",value:function(){var _=this;if(!ZO(this))return null;var A=this.props,E=A.children,C=A.className,j=A.width,T=A.height,P=A.style,I=A.compact,M=A.title,F=A.desc,R=R5(A,Oke),H=lt(R,!1);if(I)return q.createElement(m5,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},q.createElement(PE,df({},H,{width:j,height:T,title:M,desc:F}),this.renderClipPath(),eM(E,this.renderMap)));if(this.props.accessibilityLayer){var X,W;H.tabIndex=(X=this.props.tabIndex)!==null&&X!==void 0?X:0,H.role=(W=this.props.role)!==null&&W!==void 0?W:"application",H.onKeyDown=function($){_.accessibilityManager.keyboardEvent($)},H.onFocus=function(){_.accessibilityManager.focus()}}var U=this.parseEventsOfWrapper();return q.createElement(m5,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},q.createElement("div",df({className:Tt("recharts-wrapper",C),style:Ee({position:"relative",cursor:"default",width:j,height:T},P)},U,{ref:function(Y){_.container=Y}}),q.createElement(PE,df({},H,{width:j,height:T,title:M,desc:F,style:Xke}),this.renderClipPath(),eM(E,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(N.Component);mt(g,"displayName",n),mt(g,"defaultProps",Ee({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),mt(g,"getDerivedStateFromProps",function(y,x){var w=y.dataKey,_=y.data,A=y.children,E=y.width,C=y.height,j=y.layout,T=y.stackOffset,P=y.margin,I=x.dataStartIndex,M=x.dataEndIndex;if(x.updateId===void 0){var F=$5(y);return Ee(Ee(Ee({},F),{},{updateId:0},p(Ee(Ee({props:y},F),{},{updateId:0}),x)),{},{prevDataKey:w,prevData:_,prevWidth:E,prevHeight:C,prevLayout:j,prevStackOffset:T,prevMargin:P,prevChildren:A})}if(w!==x.prevDataKey||_!==x.prevData||E!==x.prevWidth||C!==x.prevHeight||j!==x.prevLayout||T!==x.prevStackOffset||!Sf(P,x.prevMargin)){var R=$5(y),H={chartX:x.chartX,chartY:x.chartY,isTooltipActive:x.isTooltipActive},X=Ee(Ee({},z5(x,_,j)),{},{updateId:x.updateId+1}),W=Ee(Ee(Ee({},R),H),X);return Ee(Ee(Ee({},W),p(Ee({props:y},W),x)),{},{prevDataKey:w,prevData:_,prevWidth:E,prevHeight:C,prevLayout:j,prevStackOffset:T,prevMargin:P,prevChildren:A})}if(!TE(A,x.prevChildren)){var U,$,Y,Q,ce=Ji(A,ph),ie=ce&&(U=($=ce.props)===null||$===void 0?void 0:$.startIndex)!==null&&U!==void 0?U:I,oe=ce&&(Y=(Q=ce.props)===null||Q===void 0?void 0:Q.endIndex)!==null&&Y!==void 0?Y:M,ve=ie!==I||oe!==M,je=!_t(_),Se=je&&!ve?x.updateId:x.updateId+1;return Ee(Ee({updateId:Se},p(Ee(Ee({props:y},x),{},{updateId:Se,dataStartIndex:ie,dataEndIndex:oe}),x)),{},{prevChildren:A,dataStartIndex:ie,dataEndIndex:oe})}return null}),mt(g,"renderActiveDot",function(y,x,w){var _;return N.isValidElement(y)?_=N.cloneElement(y,x):vt(y)?_=y(x):_=q.createElement(Dv,x),q.createElement(Ot,{className:"recharts-active-dot",key:w},_)});var m=N.forwardRef(function(x,w){return q.createElement(g,df({},x,{ref:w}))});return m.displayName=g.displayName,m},oDe=y1({chartName:"LineChart",GraphicalChild:Uu,axisComponents:[{axisType:"xAxis",AxisComp:sr},{axisType:"yAxis",AxisComp:gr}],formatAxisMap:HN}),Ls=y1({chartName:"BarChart",GraphicalChild:Lr,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:sr},{axisType:"yAxis",AxisComp:gr}],formatAxisMap:HN}),tj=y1({chartName:"PieChart",GraphicalChild:fa,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:l1},{axisType:"radiusAxis",AxisComp:a1}],formatAxisMap:ISe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),eP=y1({chartName:"AreaChart",GraphicalChild:ha,axisComponents:[{axisType:"xAxis",AxisComp:sr},{axisType:"yAxis",AxisComp:gr}],formatAxisMap:HN});const It={PREGNANT:{key:"PREGNANT",Icon:ua,color:"text-pink-400",label:"Preñada"},IN_SERVICE_CONFIRMED:{key:"IN_SERVICE_CONFIRMED",Icon:qee,color:"text-pink-500",label:"Servicio Visto"},IN_SERVICE:{key:"IN_SERVICE",Icon:gw,color:"text-red-400",label:"En Monta"},EMPTY:{key:"EMPTY",Icon:Mee,color:"text-zinc-500",label:"Vacía"},SIRE_IN_SERVICE:{key:"SIRE_IN_SERVICE",Icon:ote,color:"text-blue-400",label:"Reproductor Activo"},MILKING:{key:"MILKING",Icon:bte,color:"text-blue-300",label:"En Ordeño"},DRYING_OFF:{key:"DRYING_OFF",Icon:ed,color:"text-yellow-400",label:"Secando"},DRY:{key:"DRY",Icon:va,color:"text-zinc-400",label:"Seca"}},qa=t=>{if(!t||t==="N/A")return-1;const e=new Date(t+"T00:00:00Z"),n=new Date,r=new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()));if(isNaN(e.getTime()))return-1;const i=r.getTime()-e.getTime(),s=Math.floor(i/(1e3*60*60*24));return Math.max(0,s)},wa=t=>{const e=qa(t);if(e<0)return"N/A";if(e<=60)return`${e} día${e!==1?"s":""}`;const n=30.4375,r=Math.floor(e/n);if(r<12){const a=Math.round(e%n);return`${r} mes${r!==1?"es":""}${a>0?` y ${a} día${a!==1?"s":""}`:""}`}const i=Math.floor(r/12),s=Math.round(r%12);return`${i} año${i!==1?"s":""}${s>0?` y ${s} mes${s!==1?"es":""}`:""}`},od=(t,e)=>{const n=qa(t.birthDate);return n<0?"Indefinido":t.sex==="Hembra"?t.weaningDate||n>60?e.some(i=>i.goatId===t.id)?"Cabra":"Cabritona":"Cabrita":n>=365?"Macho Cabrío":t.weaningDate||n>60?"Macho de Levante":"Cabrito"},pc=(t,e)=>{const n=new Date(t+"T00:00:00Z"),r=new Date(e+"T00:00:00Z");if(isNaN(n.getTime())||isNaN(r.getTime()))return 0;const i=r.getTime()-n.getTime(),s=Math.floor(i/(1e3*60*60*24));return Math.max(0,s)},lDe=(t,e)=>{const r=1+(e-50)/(e+50),i=t*Math.max(.5,r);return parseFloat(i.toFixed(2))},tP=(t,e)=>{if(e.length===0)return{overall:null,recent:null};const n=[...e].sort((a,o)=>new Date(a.date).getTime()-new Date(o.date).getTime()),r=n[n.length-1];let i=null;if(t&&t>0){const a=qa(r.date)-qa(new Date().toISOString().split("T")[0])+qa(new Date(r.date).toISOString().split("T")[0]);a>0&&(i=(r.kg-t)/a)}let s=null;if(n.length>=2){const a=r,o=n[n.length-2],c=(new Date(a.date).getTime()-new Date(o.date).getTime())/(1e3*60*60*24);c>0&&(s=(a.kg-o.kg)/c)}return{overall:i,recent:s}},mU=(t,e,n)=>{const r=t.map(d=>({age:(new Date(d.date).getTime()-new Date(e).getTime())/864e5,kg:d.kg})).sort((d,f)=>d.age-f.age);if(r.length<1)return null;const i=r.filter(d=>d.age<=n).pop(),s=r.find(d=>d.age>=n);if(i&&i.age===n)return i.kg;if(s&&s.age===n)return s.kg;if(!i||!s)return null;if(i.age===s.age)return i.kg;const a=s.age-i.age;if(a===0)return i.kg;const o=s.kg-i.kg,c=n-i.age,u=i.kg+c/a*o;return parseFloat(u.toFixed(2))},cDe=(t,e,n)=>{if(e===0)return 100;const r=t/e*100,i=1+(180-Math.min(n,180))/180*.1;return Math.round(r*i)},uDe=t=>{if(!t.weaningWeight||!t.weaningDate||!t.birthWeight||!t.birthDate)return null;const e=(new Date(t.weaningDate).getTime()-new Date(t.birthDate).getTime())/(1e3*60*60*24);if(e<=0)return null;const n=(t.weaningWeight-t.birthWeight)/e,r=t.birthWeight+n*60;return parseFloat(r.toFixed(2))},dDe=(t,e)=>{const n=e.filter(r=>r.animalId===t.id);return mU(n,t.birthDate,210)},gU=(t,e,n,r,i)=>{const s=[];if(!t)return[];if(t.sex==="Hembra"){const o=e.filter(c=>c.goatId===t.id&&c.status!=="finalizada").sort((c,u)=>new Date(u.parturitionDate).getTime()-new Date(c.parturitionDate).getTime())[0];o&&(o.status==="activa"?s.push(It.MILKING):o.status==="en-secado"?s.push(It.DRYING_OFF):o.status==="seca"&&s.push(It.DRY))}if(t.reproductiveStatus==="Preñada"?s.push(It.PREGNANT):t.reproductiveStatus==="En Servicio"?n.some(c=>c.femaleId===t.id&&c.sireLotId===t.sireLotId)?s.push(It.IN_SERVICE_CONFIRMED):s.push(It.IN_SERVICE):(t.reproductiveStatus==="Vacía"||t.reproductiveStatus==="Post-Parto")&&s.push(It.EMPTY),t.sex==="Macho"){const o=i.filter(d=>d.status==="Activo"),c=new Set(o.map(d=>d.id));r.some(d=>d.sireId===t.id&&c.has(d.seasonId))&&s.push(It.SIRE_IN_SERVICE)}return Array.from(new Set(s.map(o=>o.key))).map(o=>It[o])},nj={A:"Alpina",S:"Saanen",N:"Anglo Nubian",AGC:"Canaria",C:"Canaria",T:"Toggenburger",CR:"Criolla"},rj=t=>{const e=new Map;if(!t)return e;const n=/(\d+(\.\d+)?)%?([A-Z]+)/g;let r;for(;(r=n.exec(t.toUpperCase()))!==null;){const i=parseFloat(r[1]),s=r[3],a=Object.keys(nj).includes(s);!isNaN(i)&&a&&e.set(s,(e.get(s)||0)+i)}return e},fDe=t=>t.size===0?"":Array.from(t.entries()).filter(([,n])=>n>0).sort((n,r)=>r[1]-n[1]).map(([n,r])=>`${parseFloat(r.toFixed(2))}%${n}`).join(" "),hDe=(t,e)=>{const n=rj(t),r=rj(e),i=new Map;return new Set([...n.keys(),...r.keys()]).forEach(a=>{const o=n.get(a)||0,c=r.get(a)||0;i.set(a,o/2+c/2)}),fDe(i)},vU=t=>{const e=rj(t);if(e.size===0)return"";const n=Array.from(e.entries()).sort((o,c)=>c[1]-o[1]);if(n.length===0)return"";const[r,i]=n[0],s=96.9,a=nj[r];for(const[o,c]of n)if(c>=s)return`${nj[o]} Pura`;return i>0?`Mestiza ${a}`:"Mestiza"},pDe=()=>{const{animals:t,parturitions:e,bodyWeighings:n,sireLots:r,breedingSeasons:i,weighings:s}=rt();return N.useMemo(()=>{const o=t.filter($=>!$.isReference),c={cabras:[],cabritonas:[],cabritas:[],cabritos:[],machosLevante:[],reproductores:[]};o.forEach($=>{switch(od($,e)){case"Cabra":c.cabras.push($);break;case"Cabritona":c.cabritonas.push($);break;case"Cabrita":c.cabritas.push($);break;case"Cabrito":c.cabritos.push($);break;case"Macho de Levante":c.machosLevante.push($);break;case"Macho Cabrío":c.reproductores.push($);break}});const u=c.cabras.length+c.cabritonas.length+c.cabritas.length,d=e.filter($=>$.status==="activa"&&c.cabras.some(Y=>Y.id===$.goatId)).length,f=c.cabras.length-d,h=c.cabras.filter($=>$.reproductiveStatus==="Preñada").length,p=c.cabras.filter($=>$.reproductiveStatus==="Vacía"||$.reproductiveStatus==="Post-Parto"||$.reproductiveStatus==="Destetada").length,g=c.cabras.filter($=>$.reproductiveStatus==="En Servicio").length,m=[{name:"Preñadas",value:h,color:"#34C759"},{name:"Vacías",value:p,color:"#FF9500"},{name:"En Monta",value:g,color:"#007AFF"}].filter($=>$.value>0),y=new Date().getFullYear(),x=[];for(let $=0;$<2;$++){const Y=new Date(y,$*6,1),Q=new Date(y,($+1)*6,0),ce=s.filter(je=>{const Se=new Date(je.date+"T00:00:00");return Se>=Y&&Se<=Q}),ie=new Set(ce.map(je=>je.goatId)),oe=c.cabras.filter(je=>!!e.find(Me=>Me.goatId===je.id&&new Date(Me.parturitionDate)<=Q)).length,ve=oe>0?ie.size/oe*100:0;x.push({name:`Semestre ${$+1}`,"En Ordeño (%)":parseFloat(ve.toFixed(1))})}const w=c.cabritonas.filter($=>$.reproductiveStatus==="En Servicio").length,_=c.cabritonas.filter($=>{const Y=n.filter(Q=>Q.animalId===$.id).sort((Q,ce)=>new Date(ce.date).getTime()-new Date(Q.date).getTime())[0];return Y?Y.kg>=28.5&&Y.kg<30||Y.kg>=30&&$.reproductiveStatus!=="En Servicio"&&$.reproductiveStatus!=="Preñada":!1}).length,A=c.cabritonas.length-w-h,E=c.cabritas.length,C=c.cabritos.length,j=E+C,T=[{name:"Hembras",value:E,color:"#FF2D55"},{name:"Machos",value:C,color:"#007AFF"}].filter($=>$.value>0),P=[...c.cabritas,...c.cabritos].map($=>{const Y=qa($.birthDate),Q=n.filter(Me=>Me.animalId===$.id).sort((Me,Qe)=>new Date(Qe.date).getTime()-new Date(Me.date).getTime())[0],ce=(Q==null?void 0:Q.kg)||0,ie=Y>=52,oe=ce>=9.5,ve=Y>=45&&Y<52,je=Y>=40&&Y<45||ce>=8.5&&ce<9.5;let Se="Amamantando";return ie&&oe?Se="Listo para Destete":ve?Se="En Fase Destete":je&&(Se="Próximo a Destete"),{id:$.id,status:Se}}),I=P.filter($=>$.status==="En Fase Destete").length,M=P.filter($=>$.status==="Próximo a Destete").length,F=P.filter($=>$.status==="Listo para Destete").length,R=P.filter($=>$.status==="Amamantando").length,H=[{name:"Listo",value:F,color:"#34C759"},{name:"En Fase",value:I,color:"#FFD60A"},{name:"Próximo",value:M,color:"#FF9F0A"},{name:"Amamantando",value:R,color:"#007AFF"}].filter($=>$.value>0),X=new Set(i.filter($=>$.status==="Activo").map($=>$.id)),W=r.filter($=>X.has($.seasonId)),U=c.reproductores.filter($=>W.some(Y=>Y.sireId===$.id)).map($=>{const Y=W.find(ce=>ce.sireId===$.id),Q=t.filter(ce=>ce.sireLotId===Y.id).length;return{...$,lotId:Y.id,assignedFemales:Q}});return{totalPoblacion:o.length,totalVientres:u,cabras:{total:c.cabras.length,enProduccion:d,secas:f,preñadas:h,vacias:p,enMonta:g,reproductiveStatusData:m,milkingPercentageData:x},cabritonas:{total:c.cabritonas.length,enMonta:w,disponibles:A,proximasAServicio:_},crias:{total:j,hembras:E,machos:C,criasEnMaternidadData:T,enFaseDestete:I,proximasADestete:M,listasParaDestete:F,desteteStatusData:H},reproductores:{total:c.reproductores.length,activos:U}}},[t,e,n,r,i,s])},pt=t=>{if(!t)return"N/A";const e=t.id,n=t.name,r=e?e.toUpperCase():"ID_DESCONOCIDO",i=n?String(n).toUpperCase().trim():"";return i.length>0?`${r} (${i})`:r},Dy=({title:t,value:e,icon:n,onClick:r})=>l.jsxs("button",{onClick:r,className:"bg-dashboard-surface backdrop-blur-xl rounded-2xl p-4 border border-brand-border/50 text-left hover:border-brand-orange/60 hover:bg-dashboard-surface-hover transition-all duration-200 w-full",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-sm font-medium text-brand-light-gray uppercase tracking-wider",children:t}),l.jsx(n,{className:"w-6 h-6 text-brand-orange"})]}),l.jsx("p",{className:"text-4xl font-semibold text-white mt-4",children:e})]}),fl=({title:t,children:e})=>l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-brand-light-gray mb-3 px-1",children:t}),l.jsx("div",{className:"bg-brand-glass backdrop-blur-lg rounded-xl p-4 border border-brand-border/50",children:e})]}),hl=({label:t,value:e,unit:n,subLabel:r,icon:i})=>l.jsxs("div",{className:"flex justify-between items-center py-2.5",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[i&&l.jsx(i,{className:"w-5 h-5 text-zinc-400"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-base text-white",children:t}),r&&l.jsx("p",{className:"text-xs text-brand-medium-gray mt-0.5",children:r})]})]}),l.jsxs("div",{className:"flex items-baseline gap-1.5",children:[l.jsx("p",{className:"text-xl font-semibold text-white",children:e}),l.jsx("p",{className:"text-sm text-brand-medium-gray",children:n})]})]}),pS=({active:t,payload:e,label:n})=>t&&e&&e.length?l.jsxs("div",{className:"p-2 bg-zinc-800/80 backdrop-blur-md rounded-lg border border-zinc-700 text-white text-sm",children:[l.jsx("p",{className:"font-semibold mb-1",children:n||e[0].name}),e.map((r,i)=>l.jsxs("p",{style:{color:r.color},children:[r.name,": ",l.jsxs("span",{className:"font-bold",children:[r.value,r.unit]})]},`item-${i}`))]}):null;function V5({navigateTo:t}){const[e,n]=N.useState("physical"),[r,i]=N.useState(!1),[s,a]=N.useState(!1),[o,c]=N.useState(!1),[u,d]=N.useState(!1),[f,h]=N.useState(!1),p=pDe();return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-lg mx-auto space-y-6 pb-24 pt-4",children:[l.jsxs("div",{className:"text-center mb-6 px-4",children:[l.jsxs("p",{className:"text-base text-zinc-300 font-light",children:["Población Total del Rebaño: ",l.jsx("span",{className:"font-bold text-white",children:p.totalPoblacion})]}),l.jsxs("p",{className:"text-sm text-zinc-400",children:["Total de Vientres: ",l.jsx("span",{className:"font-bold text-zinc-200",children:p.totalVientres})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 px-4",children:[l.jsx(Dy,{title:"Cabras",value:p.cabras.total,icon:mw,onClick:()=>a(!0)}),l.jsx(Dy,{title:"Cabritonas",value:p.cabritonas.total,icon:ba,onClick:()=>c(!0)}),l.jsx(Dy,{title:"Crías",value:p.crias.total,icon:ua,onClick:()=>d(!0)}),l.jsx(Dy,{title:"Reproductores",value:p.reproductores.total,icon:Fee,onClick:()=>h(!0)})]}),l.jsx("div",{className:"pt-4 px-4",children:l.jsxs("div",{className:"relative bg-brand-glass rounded-xl p-1 border border-brand-border flex items-center",children:[l.jsxs("button",{onClick:()=>n("physical"),className:`w-1/2 py-2 rounded-lg transition-colors flex items-center justify-center gap-2 ${e==="physical"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:[l.jsx(Ou,{size:16})," ",l.jsx("span",{className:"text-sm font-semibold",children:"Lotes Físicos"}),l.jsx("span",{onClick:g=>{g.stopPropagation(),i(!0)},className:"ml-2 p-1 rounded-full hover:bg-brand-orange/50",children:l.jsx(ir,{size:18})})]}),l.jsxs("button",{onClick:()=>n("breeding"),className:`w-1/2 py-2 text-sm font-semibold rounded-lg transition-colors flex items-center justify-center gap-2 ${e==="breeding"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:[l.jsx(yw,{size:16})," Lotes de Monta"]})]})}),l.jsxs("div",{className:"pt-0",children:[" ",e==="physical"&&l.jsx(mae,{navigateTo:t}),e==="breeding"&&l.jsx(xae,{navigateTo:t})]})]}),l.jsx(at,{isOpen:s,onClose:()=>a(!1),title:"Análisis de Hembras Adultas",children:l.jsxs("div",{className:"space-y-5",children:[l.jsxs(fl,{title:"Estado Productivo y Reproductivo",children:[l.jsx(hl,{icon:Hee,label:"En Producción",unit:"cabras",value:p.cabras.enProduccion,subLabel:`${(p.cabras.total>0?p.cabras.enProduccion/p.cabras.total*100:0).toFixed(0)}% del total`}),l.jsx("div",{className:"border-b border-brand-border/50 mx-2"}),l.jsx(hl,{icon:va,label:"Secas",unit:"cabras",value:p.cabras.secas,subLabel:`${(p.cabras.total>0?p.cabras.secas/p.cabras.total*100:0).toFixed(0)}% del total`}),l.jsx("div",{className:"border-b border-brand-border/50 mx-2"}),l.jsx(hl,{icon:yI,label:"En Monta Activa",unit:"cabras",value:p.cabras.enMonta})]}),l.jsx(fl,{title:"Estado Reproductivo (Vientres)",children:l.jsx("div",{className:"w-full h-48",children:l.jsx(Er,{width:"100%",height:"100%",children:l.jsxs(tj,{children:[l.jsx(fa,{data:p.cabras.reproductiveStatusData,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:45,outerRadius:65,paddingAngle:3,cornerRadius:5,children:p.cabras.reproductiveStatusData.map(g=>l.jsx(Ms,{fill:g.color,stroke:"none"},`cell-${g.name}`))}),l.jsx(fn,{content:l.jsx(pS,{})}),l.jsx(aa,{iconSize:10,wrapperStyle:{fontSize:"12px",paddingTop:"10px"}})]})})})}),l.jsx(fl,{title:"Rendimiento Anual en Ordeño",children:l.jsx("div",{className:"w-full h-48",children:l.jsx(Er,{width:"100%",height:"100%",children:l.jsxs(Ls,{data:p.cabras.milkingPercentageData,margin:{top:15,right:10,left:-20,bottom:0},children:[l.jsx(sr,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},axisLine:!1,tickLine:!1}),l.jsx(gr,{tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},unit:"%",axisLine:!1,tickLine:!1}),l.jsx(fn,{content:l.jsx(pS,{unit:"%"}),cursor:{fill:"rgba(255, 255, 255, 0.08)"}}),l.jsx(Lr,{dataKey:"En Ordeño (%)",fill:"#FF9500",radius:[8,8,0,0],animationDuration:500})]})})})})]})}),l.jsx(at,{isOpen:o,onClose:()=>c(!1),title:"Análisis de Cabritonas",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs(fl,{title:"Disponibilidad para Monta",children:[l.jsx(hl,{icon:yI,label:"En Monta",unit:"cabritonas",value:p.cabritonas.enMonta,subLabel:`${(p.cabritonas.total>0?p.cabritonas.enMonta/p.cabritonas.total*100:0).toFixed(0)}% del total`}),l.jsx("div",{className:"border-b border-brand-border/50 mx-2"}),l.jsx(hl,{icon:Ou,label:"Disponibles",unit:"cabritonas",value:p.cabritonas.disponibles})]}),l.jsx(fl,{title:"Próximas a Servicio",children:l.jsx(hl,{icon:Ete,label:"Con Peso Óptimo",unit:"cabritonas",value:p.cabritonas.proximasAServicio,subLabel:"(≥ 28.5 Kg y sin lote asignado)"})})]})}),l.jsx(at,{isOpen:u,onClose:()=>d(!1),title:"Análisis de Crías en Maternidad",children:l.jsxs("div",{className:"space-y-5",children:[l.jsx(fl,{title:"Distribución por Sexo",children:l.jsx("div",{className:"w-full h-48",children:l.jsx(Er,{width:"100%",height:"100%",children:l.jsxs(tj,{children:[l.jsx(fa,{data:p.crias.criasEnMaternidadData,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:45,outerRadius:65,paddingAngle:3,cornerRadius:5,children:p.crias.criasEnMaternidadData.map(g=>l.jsx(Ms,{fill:g.color,stroke:"none"},`cell-${g.name}`))}),l.jsx(fn,{content:l.jsx(pS,{})}),l.jsx(aa,{iconSize:10,wrapperStyle:{fontSize:"12px",paddingTop:"10px"}})]})})})}),l.jsxs(fl,{title:"Estado de Destete",children:[l.jsx(hl,{icon:ua,label:"Listas para Destete",unit:"crías",value:p.crias.listasParaDestete,subLabel:"≥ 52 días y ≥ 9.5 Kg"}),l.jsx("div",{className:"border-b border-brand-border/50 mx-2"}),l.jsx(hl,{icon:Oee,label:"En Fase de Destete",unit:"crías",value:p.crias.enFaseDestete,subLabel:"45-52 días"})]})]})}),l.jsx(at,{isOpen:f,onClose:()=>h(!1),title:"Estado de Reproductores",children:l.jsx("div",{className:"space-y-4",children:l.jsx(fl,{title:"Activos en Temporada de Monta",children:p.reproductores.activos.length>0?p.reproductores.activos.map((g,m)=>l.jsxs("div",{children:[l.jsxs("button",{onClick:()=>{h(!1),t({name:"sire-lot-detail",lotId:g.lotId})},className:"w-full text-left p-2 rounded-lg flex justify-between items-center hover:bg-brand-glass transition-colors group",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-white",children:pt(g)}),l.jsx("p",{className:"text-xs text-brand-medium-gray",children:"Ver lote de monta asignado"})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("span",{className:"text-base font-semibold text-brand-orange",children:[g.assignedFemales," hembras"]}),l.jsx(Gn,{className:"text-zinc-500 group-hover:text-white transition-colors"})]})]}),m<p.reproductores.activos.length-1&&l.jsx("div",{className:"border-b border-brand-border/50 mx-2"})]},g.id)):l.jsx("p",{className:"text-sm text-brand-medium-gray text-center py-4",children:"No hay reproductores activos en una temporada de monta actualmente."})})})}),l.jsx(WF,{isOpen:r,onClose:()=>i(!1)})]})}const mDe=()=>({isRelated:N.useCallback((e,n,r)=>{if(!e||!n)return!1;const i=r.find(s=>s.id===e);if(!i)return!1;if(i.fatherId===n)return!0;if(i.motherId){const s=r.find(a=>a.id===i.motherId);if(s&&s.fatherId===n)return!0}return!1},[])}),gDe=(t,e,n,r,i)=>{const s=[];if(!t)return[];if(t.sex==="Hembra"){const a=e.filter(o=>o.goatId===t.id&&o.status!=="finalizada").sort((o,c)=>new Date(c.parturitionDate).getTime()-new Date(o.parturitionDate).getTime())[0];a&&(a.status==="activa"?s.push("MILKING"):a.status==="en-secado"?s.push("DRYING_OFF"):a.status==="seca"&&s.push("DRY"))}if(t.reproductiveStatus==="Preñada"?s.push("PREGNANT"):t.reproductiveStatus==="En Servicio"?n.some(o=>o.femaleId===t.id&&o.sireLotId===t.sireLotId)?s.push("IN_SERVICE_CONFIRMED"):s.push("IN_SERVICE"):(t.reproductiveStatus==="Vacía"||t.reproductiveStatus==="Post-Parto")&&s.push("EMPTY"),t.sex==="Macho"){const a=i.filter(u=>u.status==="Activo"),o=new Set(a.map(u=>u.id));r.some(u=>u.sireId===t.id&&o.has(u.seasonId))&&s.push("SIRE_IN_SERVICE")}return Array.from(new Set(s))},vDe=["Cabrita","Cabritona","Cabra","Cabrito","Macho de Levante","Macho Cabrío"],B5=({title:t,filters:e,activeFilter:n,onFilterChange:r})=>l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-zinc-400 mb-2",children:t}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("button",{type:"button",onClick:()=>r("ALL"),className:`px-2 py-1 text-xs font-semibold rounded-full transition-colors ${n==="ALL"?"bg-zinc-600 text-white":"bg-zinc-800/80 text-zinc-300"}`,children:"Todos"}),e.map(i=>{const s=i.Icon||null;return l.jsxs("button",{type:"button",onClick:()=>r(i.key),className:`flex items-center gap-1.5 px-2 py-1 text-xs font-semibold rounded-full transition-colors ${n===i.key?"bg-brand-blue text-white":"bg-zinc-800/80 text-zinc-300"}`,children:[l.jsx(s,{size:14}),i.label]},i.key)})]})]}),b1=({isOpen:t,onClose:e,onSelect:n,animals:r,parturitions:i,serviceRecords:s,breedingSeasons:a,sireLots:o,title:c,sireIdForInbreedingCheck:u,sessionType:d})=>{const[f,h]=N.useState(""),[p,g]=N.useState(new Set),{isRelated:m}=mDe(),[y,x]=N.useState(!0),[w,_]=N.useState("Todos"),[A,E]=N.useState(!1),[C,j]=N.useState("ALL"),[T,P]=N.useState("ALL"),[I,M]=N.useState("all");N.useEffect(()=>{t&&d&&(W(),d==="leche"?j("MILKING"):d==="corporal"&&M("Hembra"))},[t,d]);const F=N.useMemo(()=>r.map(U=>({...U,statuses:gDe(U,i,s,o,a),formattedAge:wa(U.birthDate),zootecnicCategory:od(U,i)})),[r,i,s,o,a]),R=N.useMemo(()=>{let U=F;return I!=="all"&&(U=U.filter($=>$.sex===I)),A?U.sort(($,Y)=>(Y.createdAt||0)-($.createdAt||0)).slice(0,25):(w!=="Todos"&&(U=U.filter($=>$.zootecnicCategory===w)),C!=="ALL"&&(U=U.filter($=>$.statuses.includes(C))),T!=="ALL"&&(U=U.filter($=>$.statuses.includes(T))),f&&(U=U.filter($=>$.id.toLowerCase().includes(f.toLowerCase()))),U)},[F,w,A,C,T,I,f]),H=()=>{R.every(U=>p.has(U.id))?g(new Set):g(new Set(R.map(U=>U.id)))},X=()=>{n(Array.from(p)),e()},W=()=>{_("Todos"),E(!1),j("ALL"),P("ALL"),h(""),M("all")};return N.useEffect(()=>{t&&d&&g(new Set(R.map(U=>U.id)))},[R,t,d]),l.jsx(at,{isOpen:t,onClose:e,title:c,size:"fullscreen",children:l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsxs("div",{className:"flex-shrink-0 space-y-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx(Iu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500"}),l.jsx("input",{type:"search",placeholder:"Buscar por ID...",value:f,onChange:U=>h(U.target.value),className:"w-full bg-zinc-800 border border-zinc-700 rounded-xl pl-10 pr-4 py-2.5 text-white focus:ring-2 focus:ring-brand-orange"})]}),l.jsxs("button",{onClick:()=>x(!y),className:"w-full flex justify-between items-center text-zinc-400 hover:text-white",children:[l.jsx("span",{className:"text-sm font-semibold",children:"Filtros Avanzados"}),l.jsx(ib,{className:`transition-transform ${y?"rotate-180":""}`})]}),y&&l.jsxs("div",{className:"space-y-4 p-4 bg-black/20 rounded-2xl animate-fade-in",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-zinc-400 mb-2",children:"Filtrar por Sexo"}),l.jsxs("div",{className:"flex bg-zinc-800 rounded-xl p-1 w-full",children:[l.jsx("button",{onClick:()=>M("all"),className:`w-1/3 rounded-lg py-2 text-sm font-semibold transition-colors ${I==="all"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"Todos"}),l.jsx("button",{onClick:()=>M("Hembra"),className:`w-1/3 rounded-lg py-2 text-sm font-semibold transition-colors ${I==="Hembra"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"Hembras"}),l.jsx("button",{onClick:()=>M("Macho"),className:`w-1/3 rounded-lg py-2 text-sm font-semibold transition-colors ${I==="Macho"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"Machos"})]})]}),l.jsx(B5,{title:"Filtros Productivos",filters:["MILKING","DRYING_OFF","DRY"].map(U=>It[U]),activeFilter:C,onFilterChange:j}),l.jsx(B5,{title:"Filtros Reproductivos",filters:["PREGNANT","IN_SERVICE_CONFIRMED","IN_SERVICE","EMPTY","SIRE_IN_SERVICE"].map(U=>It[U]),activeFilter:T,onFilterChange:P}),l.jsxs("div",{className:"flex gap-2 pt-2 border-t border-brand-border",children:[l.jsxs("select",{value:w,onChange:U=>_(U.target.value),className:"w-full bg-zinc-800 p-2 rounded-xl text-white border border-zinc-700 text-sm",children:[l.jsx("option",{value:"Todos",children:"Categoría Zootécnica..."}),vDe.map(U=>l.jsx("option",{value:U,children:U},U))]}),l.jsxs("button",{onClick:()=>E(!A),className:`flex-shrink-0 flex items-center gap-2 p-2 rounded-xl border text-sm transition-colors ${A?"bg-brand-orange border-brand-orange text-white":"border-zinc-700 bg-zinc-800 text-zinc-300"}`,children:[l.jsx(vw,{size:16})," Última Carga"]}),l.jsx("button",{onClick:W,className:"flex-shrink-0 p-2 rounded-xl border border-zinc-700 bg-zinc-800 text-zinc-300",children:l.jsx(aT,{size:16})})]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 py-4 min-h-[10rem]",children:R.length>0?R.map(U=>{const $=u?m(U.id,u,r):!1;return l.jsxs("div",{onClick:()=>g(Y=>{const Q=new Set(Y);return Q.has(U.id)?Q.delete(U.id):Q.add(U.id),Q}),className:`w-full text-left p-3 flex items-center gap-4 rounded-lg cursor-pointer transition-colors ${$?"bg-yellow-900/50 border border-yellow-500/60 hover:bg-yellow-800/50":"bg-zinc-800/50 hover:bg-zinc-700"}`,children:[p.has(U.id)?l.jsx(uT,{className:"text-brand-orange flex-shrink-0"}):l.jsx(dT,{className:"text-zinc-500 flex-shrink-0"}),l.jsxs("div",{className:"flex-grow",children:[l.jsxs("p",{className:"font-bold text-white flex items-center gap-2",children:[U.id," ",$&&l.jsx($t,{className:"text-yellow-400",size:16})]}),l.jsxs("p",{className:"text-xs text-zinc-400",children:[U.sex," | ",U.formattedAge," | Lote: ",U.location||"Sin Asignar"]})]})]},U.id)}):l.jsx("div",{className:"flex-grow flex items-center justify-center",children:l.jsx("p",{className:"text-zinc-500 text-center",children:"No se encontraron animales."})})}),l.jsxs("div",{className:"flex-shrink-0 grid grid-cols-3 items-center pt-4 border-t border-brand-border gap-2",children:[l.jsx("button",{type:"button",onClick:H,disabled:R.length===0,className:"bg-zinc-700 hover:bg-zinc-600 text-white font-bold py-3 px-2 rounded-lg disabled:opacity-50 text-sm",children:R.every(U=>p.has(U.id))&&R.length>0?"Deseleccionar":"Sel. Todos"}),l.jsx("button",{onClick:e,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-3 px-2 rounded-lg text-sm",children:"Cancelar"}),l.jsxs("button",{onClick:X,className:"bg-brand-green hover:bg-green-600 text-white font-bold py-3 px-2 rounded-lg disabled:opacity-50 text-sm",children:["Seleccionar (",p.size,")"]})]})]})})},yDe=({isOpen:t,onClose:e,animalsToTransfer:n,fromLot:r})=>{const{lots:i,updateAnimal:s}=rt(),[a,o]=N.useState(""),c=N.useMemo(()=>i.filter(d=>d.name!==r),[i,r]),u=async()=>{if(!a||n.length===0)return;const d=n.map(f=>s(f,{location:a}));try{await Promise.all(d),e()}catch(f){console.error("Error al transferir animales:",f)}};return l.jsx(at,{isOpen:t,onClose:e,title:`Transferir ${n.length} animales`,children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:["Transferir desde: ",l.jsx("span",{className:"font-semibold text-white",children:r})]}),l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1 mt-4",children:"Hacia el lote:"}),l.jsxs("select",{value:a,onChange:d=>o(d.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",children:[l.jsx("option",{value:"",children:"Seleccionar lote de destino..."}),c.map(d=>l.jsx("option",{value:d.name,children:d.name},d.id))]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[l.jsx("button",{onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{onClick:u,disabled:!a,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:"Confirmar Transferencia"})]})]})})};function Md(t,e,n){let r=n.initialDeps??[],i;function s(){var a,o,c,u;let d;n.key&&((a=n.debug)!=null&&a.call(n))&&(d=Date.now());const f=t();if(!(f.length!==r.length||f.some((g,m)=>r[m]!==g)))return i;r=f;let p;if(n.key&&((o=n.debug)!=null&&o.call(n))&&(p=Date.now()),i=e(...f),n.key&&((c=n.debug)!=null&&c.call(n))){const g=Math.round((Date.now()-d)*100)/100,m=Math.round((Date.now()-p)*100)/100,y=m/16,x=(w,_)=>{for(w=String(w);w.length<_;)w=" "+w;return w};console.info(`%c⏱ ${x(m,5)} /${x(g,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*y,120))}deg 100% 31%);`,n==null?void 0:n.key)}return(u=n==null?void 0:n.onChange)==null||u.call(n,i),i}return s.updateDeps=a=>{r=a},s}function U5(t,e){if(t===void 0)throw new Error("Unexpected undefined");return t}const bDe=(t,e)=>Math.abs(t-e)<1.01,xDe=(t,e,n)=>{let r;return function(...i){t.clearTimeout(r),r=t.setTimeout(()=>e.apply(this,i),n)}},W5=t=>{const{offsetWidth:e,offsetHeight:n}=t;return{width:e,height:n}},wDe=t=>t,_De=t=>{const e=Math.max(t.startIndex-t.overscan,0),n=Math.min(t.endIndex+t.overscan,t.count-1),r=[];for(let i=e;i<=n;i++)r.push(i);return r},SDe=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;const i=a=>{const{width:o,height:c}=a;e({width:Math.round(o),height:Math.round(c)})};if(i(W5(n)),!r.ResizeObserver)return()=>{};const s=new r.ResizeObserver(a=>{const o=()=>{const c=a[0];if(c!=null&&c.borderBoxSize){const u=c.borderBoxSize[0];if(u){i({width:u.inlineSize,height:u.blockSize});return}}i(W5(n))};t.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()});return s.observe(n,{box:"border-box"}),()=>{s.unobserve(n)}},H5={passive:!0},K5=typeof window>"u"?!0:"onscrollend"in window,ADe=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;let i=0;const s=t.options.useScrollendEvent&&K5?()=>{}:xDe(r,()=>{e(i,!1)},t.options.isScrollingResetDelay),a=d=>()=>{const{horizontal:f,isRtl:h}=t.options;i=f?n.scrollLeft*(h&&-1||1):n.scrollTop,s(),e(i,d)},o=a(!0),c=a(!1);c(),n.addEventListener("scroll",o,H5);const u=t.options.useScrollendEvent&&K5;return u&&n.addEventListener("scrollend",c,H5),()=>{n.removeEventListener("scroll",o),u&&n.removeEventListener("scrollend",c)}},EDe=(t,e,n)=>{if(e!=null&&e.borderBoxSize){const r=e.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return t[n.options.horizontal?"offsetWidth":"offsetHeight"]},jDe=(t,{adjustments:e=0,behavior:n},r)=>{var i,s;const a=t+e;(s=(i=r.scrollElement)==null?void 0:i.scrollTo)==null||s.call(i,{[r.options.horizontal?"left":"top"]:a,behavior:n})};class CDe{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(i=>{i.forEach(s=>{const a=()=>{this._measureElement(s.target,s)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()})}));return{disconnect:()=>{var i;(i=r())==null||i.disconnect(),n=null},observe:i=>{var s;return(s=r())==null?void 0:s.observe(i,{box:"border-box"})},unobserve:i=>{var s;return(s=r())==null?void 0:s.unobserve(i)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,i])=>{typeof i>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:wDe,rangeExtractor:_De,onChange:()=>{},measureElement:EDe,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,i;(i=(r=this.options).onChange)==null||i.call(r,this,n)},this.maybeNotify=Md(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,s)=>{this.scrollAdjustments=0,this.scrollDirection=s?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=s,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const i=new Map,s=new Map;for(let a=r-1;a>=0;a--){const o=n[a];if(i.has(o.lane))continue;const c=s.get(o.lane);if(c==null||o.end>c.end?s.set(o.lane,o):o.end<c.end&&i.set(o.lane,!0),i.size===this.options.lanes)break}return s.size===this.options.lanes?Array.from(s.values()).sort((a,o)=>a.end===o.end?a.index-o.index:a.end-o.end)[0]:void 0},this.getMeasurementOptions=Md(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,r,i,s,a)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:i,getItemKey:s,enabled:a}),{key:!1}),this.getMeasurements=Md(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:i,getItemKey:s,enabled:a},o)=>{if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(d=>{this.itemSizeCache.set(d.key,d.size)}));const c=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const u=this.measurementsCache.slice(0,c);for(let d=c;d<n;d++){const f=s(d),h=this.options.lanes===1?u[d-1]:this.getFurthestMeasurement(u,d),p=h?h.end+this.options.gap:r+i,g=o.get(f),m=typeof g=="number"?g:this.options.estimateSize(d),y=p+m,x=h?h.lane:d%this.options.lanes;u[d]={index:d,start:p,size:m,end:y,key:f,lane:x}}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Md(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,i,s)=>this.range=n.length>0&&r>0?TDe({measurements:n,outerSize:r,scrollOffset:i,lanes:s}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Md(()=>{let n=null,r=null;const i=this.calculateRange();return i&&(n=i.startIndex,r=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,i,s,a)=>s===null||a===null?[]:n({startIndex:s,endIndex:a,overscan:r,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,i=n.getAttribute(r);return i?parseInt(i,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const i=this.indexFromElement(n),s=this.measurementsCache[i];if(!s)return;const a=s.key,o=this.elementsCache.get(a);o!==n&&(o&&this.observer.unobserve(o),this.observer.observe(n),this.elementsCache.set(a,n)),n.isConnected&&this.resizeItem(i,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const i=this.measurementsCache[n];if(!i)return;const s=this.itemSizeCache.get(i.key)??i.size,a=r-s;a!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,a,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,i)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(i))});return}this._measureElement(n,void 0)},this.getVirtualItems=Md(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const i=[];for(let s=0,a=n.length;s<a;s++){const o=n[s],c=r[o];i.push(c)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return U5(r[yU(0,r.length-1,i=>U5(r[i]).start,n)])},this.getOffsetForAlignment=(n,r,i=0)=>{const s=this.getSize(),a=this.getScrollOffset();r==="auto"&&(r=n>=a+s?"end":"start"),r==="center"?n+=(i-s)/2:r==="end"&&(n-=s);const o=this.getTotalSize()+this.options.scrollMargin-s;return Math.max(Math.min(o,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const i=this.measurementsCache[n];if(!i)return;const s=this.getSize(),a=this.getScrollOffset();if(r==="auto")if(i.end>=a+s-this.options.scrollPaddingEnd)r="end";else if(i.start<=a+this.options.scrollPaddingStart)r="start";else return[a,r];const o=r==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,r,i.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:i})},this.scrollToIndex=(n,{align:r="auto",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let s=0;const a=10,o=u=>{if(!this.targetWindow)return;const d=this.getOffsetForIndex(n,u);if(!d){console.warn("Failed to get offset for index:",n);return}const[f,h]=d;this._scrollToOffset(f,{adjustments:void 0,behavior:i}),this.targetWindow.requestAnimationFrame(()=>{const p=this.getScrollOffset(),g=this.getOffsetForIndex(n,h);if(!g){console.warn("Failed to get offset for index:",n);return}bDe(g[0],p)||c(h)})},c=u=>{this.targetWindow&&(s++,s<a?this.targetWindow.requestAnimationFrame(()=>o(u)):console.warn(`Failed to scroll to index ${n} after ${a} attempts.`))};o(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let i;if(r.length===0)i=this.options.paddingStart;else if(this.options.lanes===1)i=((n=r[r.length-1])==null?void 0:n.end)??0;else{const s=Array(this.options.lanes).fill(null);let a=r.length-1;for(;a>=0&&s.some(o=>o===null);){const o=r[a];s[o.lane]===null&&(s[o.lane]=o.end),a--}i=Math.max(...s.filter(o=>o!==null))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:i})=>{this.options.scrollToFn(n,{behavior:i,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(e)}}const yU=(t,e,n,r)=>{for(;t<=e;){const i=(t+e)/2|0,s=n(i);if(s<r)t=i+1;else if(s>r)e=i-1;else return i}return t>0?t-1:0};function TDe({measurements:t,outerSize:e,scrollOffset:n,lanes:r}){const i=t.length-1,s=c=>t[c].start;if(t.length<=r)return{startIndex:0,endIndex:i};let a=yU(0,i,s,n),o=a;if(r===1)for(;o<i&&t[o].end<n+e;)o++;else if(r>1){const c=Array(r).fill(0);for(;o<i&&c.some(d=>d<n+e);){const d=t[o];c[d.lane]=d.end,o++}const u=Array(r).fill(n+e);for(;a>=0&&u.some(d=>d>=n);){const d=t[a];u[d.lane]=d.start,a--}a=Math.max(0,a-a%r),o=Math.min(i,o+(r-1-o%r))}return{startIndex:a,endIndex:o}}const q5=typeof document<"u"?N.useLayoutEffect:N.useEffect;function NDe(t){const e=N.useReducer(()=>({}),{})[1],n={...t,onChange:(i,s)=>{var a;s?Xm.flushSync(e):e(),(a=t.onChange)==null||a.call(t,i,s)}},[r]=N.useState(()=>new CDe(n));return r.setOptions(n),q5(()=>r._didMount(),[]),q5(()=>r._willUpdate()),r}function bU(t){return NDe({observeElementRect:SDe,observeElementOffset:ADe,scrollToFn:jDe,...t})}const nP=({statuses:t})=>{if(!t||t.length===0)return null;const e=[...t].sort((n,r)=>{const i=["MILKING","DRYING_OFF","DRY","PREGNANT","IN_SERVICE_CONFIRMED","IN_SERVICE","EMPTY","SIRE_IN_SERVICE"];return i.indexOf(n.key)-i.indexOf(r.key)});return l.jsx("div",{className:"flex items-center space-x-1.5",children:e.map(({key:n,Icon:r,color:i,label:s})=>l.jsx("span",{title:s,children:l.jsx(r,{className:i,size:16,strokeWidth:2.5})},n))})},xU=({animal:t,onSelect:e,onOpenActions:n})=>{const r=lc(),i=N.useRef(!1),s=(a,o)=>{const c=o.offset.x,u=o.velocity.x;(c<-80/2||u<-500)&&n(t),r.start({x:0}),setTimeout(()=>{i.current=!1},50)};return l.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-brand-glass border border-brand-border",children:[l.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:l.jsxs("div",{className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[l.jsx(ir,{size:22}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Acciones"})]})}),l.jsx(Ln.div,{drag:"x",dragConstraints:{left:-80,right:0},dragElastic:.1,onDragStart:()=>{i.current=!0},onDragEnd:s,onTap:()=>{i.current||e(t.id)},animate:r,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg p-4",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-base text-white",children:pt(t)}),l.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:[t.sex," | ",t.formattedAge," | Lote: ",t.location||"Sin Asignar"]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(nP,{statuses:t.statusObjects})," ",l.jsx(Gn,{className:"text-zinc-600"})," "]})]})})]})},rP=({isOpen:t,onClose:e,onSave:n})=>{const[r,i]=N.useState(""),[s,a]=N.useState(""),[o,c]=N.useState(""),{fathers:u}=rt(),d=()=>{c("");const f=r.trim().toUpperCase(),h=s.trim();if(!f||!h){c("Ambos campos son obligatorios.");return}if(u.some(p=>p.id===f)){c("Este ID ya está en uso. Por favor, elige otro.");return}n({id:f,name:h}),i(""),a("")};return l.jsx(at,{isOpen:t,onClose:e,title:"Añadir Nuevo Padre",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-zinc-400",children:"Introduce un ID único y el nombre del nuevo semental."}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("input",{type:"text",value:r,onChange:f=>i(f.target.value),placeholder:"ID del Padre (ej. P002)",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0"}),l.jsx("input",{type:"text",value:s,onChange:f=>a(f.target.value),placeholder:"Nombre del Padre (ej. Sansón)",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0"})]}),o&&l.jsx("p",{className:"text-sm text-brand-red",children:o}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[l.jsx("button",{onClick:e,className:"px-5 py-2 bg-zinc-600 rounded-lg hover:bg-zinc-500 font-semibold",children:"Cancelar"}),l.jsx("button",{onClick:d,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:"Guardar Padre"})]})]})})};function Kt(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function ps(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function _i(t,e){const n=Kt(t);return isNaN(e)?ps(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function pa(t,e){const n=Kt(t);if(isNaN(e))return ps(t,NaN);if(!e)return n;const r=n.getDate(),i=ps(t,n.getTime());i.setMonth(n.getMonth()+e+1,0);const s=i.getDate();return r>=s?i:(n.setFullYear(i.getFullYear(),i.getMonth(),r),n)}const iP=6048e5,PDe=864e5;let kDe={};function Iv(){return kDe}function Qa(t,e){var o,c,u,d;const n=Iv(),r=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=Kt(t),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function Wu(t){return Qa(t,{weekStartsOn:1})}function wU(t){const e=Kt(t),n=e.getFullYear(),r=ps(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=Wu(r),s=ps(t,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const a=Wu(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function jh(t){const e=Kt(t);return e.setHours(0,0,0,0),e}function vx(t){const e=Kt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function za(t,e){const n=jh(t),r=jh(e),i=+n-vx(n),s=+r-vx(r);return Math.round((i-s)/PDe)}function DDe(t){const e=wU(t),n=ps(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),Wu(n)}function ij(t,e){const n=e*7;return _i(t,n)}function IDe(t,e){return pa(t,e*12)}function ODe(t){let e;return t.forEach(function(n){const r=Kt(n);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function MDe(t){let e;return t.forEach(n=>{const r=Kt(n);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function zi(t,e){const n=jh(t),r=jh(e);return+n==+r}function sP(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function RDe(t){if(!sP(t)&&typeof t!="number")return!1;const e=Kt(t);return!isNaN(Number(e))}function Qg(t,e){const n=Kt(t),r=Kt(e),i=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return i*12+s}function LDe(t,e,n){const r=Qa(t,n),i=Qa(e,n),s=+r-vx(r),a=+i-vx(i);return Math.round((s-a)/iP)}function aP(t){const e=Kt(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function Wi(t){const e=Kt(t);return e.setDate(1),e.setHours(0,0,0,0),e}function _U(t){const e=Kt(t),n=ps(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function oP(t,e){var o,c,u,d;const n=Iv(),r=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=Kt(t),s=i.getDay(),a=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+a),i.setHours(23,59,59,999),i}function SU(t){return oP(t,{weekStartsOn:1})}const zDe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},$De=(t,e,n)=>{let r;const i=zDe[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function jf(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const FDe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},VDe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},BDe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},UDe={date:jf({formats:FDe,defaultWidth:"full"}),time:jf({formats:VDe,defaultWidth:"full"}),dateTime:jf({formats:BDe,defaultWidth:"full"})},WDe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},HDe=(t,e,n,r)=>WDe[t];function Oa(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):a;i=t.formattingValues[o]||t.formattingValues[a]}else{const a=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[o]||t.values[a]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const KDe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},qDe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},GDe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},YDe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},QDe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},XDe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ZDe=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},JDe={ordinalNumber:ZDe,era:Oa({values:KDe,defaultWidth:"wide"}),quarter:Oa({values:qDe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Oa({values:GDe,defaultWidth:"wide"}),day:Oa({values:YDe,defaultWidth:"wide"}),dayPeriod:Oa({values:QDe,defaultWidth:"wide",formattingValues:XDe,defaultFormattingWidth:"wide"})};function Ma(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const a=s[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(o)?tIe(o,f=>f.test(a)):eIe(o,f=>f.test(a));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(a.length);return{value:u,rest:d}}}function eIe(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function tIe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function AU(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let a=t.valueCallback?t.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;const o=e.slice(i.length);return{value:a,rest:o}}}const nIe=/^(\d+)(th|st|nd|rd)?/i,rIe=/\d+/i,iIe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},sIe={any:[/^b/i,/^(a|c)/i]},aIe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},oIe={any:[/1/i,/2/i,/3/i,/4/i]},lIe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},cIe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},uIe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},dIe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},fIe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},hIe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},pIe={ordinalNumber:AU({matchPattern:nIe,parsePattern:rIe,valueCallback:t=>parseInt(t,10)}),era:Ma({matchPatterns:iIe,defaultMatchWidth:"wide",parsePatterns:sIe,defaultParseWidth:"any"}),quarter:Ma({matchPatterns:aIe,defaultMatchWidth:"wide",parsePatterns:oIe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ma({matchPatterns:lIe,defaultMatchWidth:"wide",parsePatterns:cIe,defaultParseWidth:"any"}),day:Ma({matchPatterns:uIe,defaultMatchWidth:"wide",parsePatterns:dIe,defaultParseWidth:"any"}),dayPeriod:Ma({matchPatterns:fIe,defaultMatchWidth:"any",parsePatterns:hIe,defaultParseWidth:"any"})},EU={code:"en-US",formatDistance:$De,formatLong:UDe,formatRelative:HDe,localize:JDe,match:pIe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function mIe(t){const e=Kt(t);return za(e,_U(e))+1}function jU(t){const e=Kt(t),n=+Wu(e)-+DDe(e);return Math.round(n/iP)+1}function CU(t,e){var d,f,h,p;const n=Kt(t),r=n.getFullYear(),i=Iv(),s=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(h=i.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,a=ps(t,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const o=Qa(a,e),c=ps(t,0);c.setFullYear(r,0,s),c.setHours(0,0,0,0);const u=Qa(c,e);return n.getTime()>=o.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function gIe(t,e){var o,c,u,d;const n=Iv(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=CU(t,e),s=ps(t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),Qa(s,e)}function TU(t,e){const n=Kt(t),r=+Qa(n,e)-+gIe(n,e);return Math.round(r/iP)+1}function sn(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const pl={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return sn(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):sn(n+1,2)},d(t,e){return sn(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return sn(t.getHours()%12||12,e.length)},H(t,e){return sn(t.getHours(),e.length)},m(t,e){return sn(t.getMinutes(),e.length)},s(t,e){return sn(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return sn(i,e.length)}},Rd={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},G5={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return pl.y(t,e)},Y:function(t,e,n,r){const i=CU(t,r),s=i>0?i:1-i;if(e==="YY"){const a=s%100;return sn(a,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):sn(s,e.length)},R:function(t,e){const n=wU(t);return sn(n,e.length)},u:function(t,e){const n=t.getFullYear();return sn(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return sn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return sn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return pl.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return sn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=TU(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):sn(i,e.length)},I:function(t,e,n){const r=jU(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):sn(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):pl.d(t,e)},D:function(t,e,n){const r=mIe(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):sn(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return sn(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return sn(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return sn(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Rd.noon:r===0?i=Rd.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Rd.evening:r>=12?i=Rd.afternoon:r>=4?i=Rd.morning:i=Rd.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return pl.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):pl.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):sn(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):sn(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):pl.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):pl.s(t,e)},S:function(t,e){return pl.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return Q5(r);case"XXXX":case"XX":return Gc(r);case"XXXXX":case"XXX":default:return Gc(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return Q5(r);case"xxxx":case"xx":return Gc(r);case"xxxxx":case"xxx":default:return Gc(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Y5(r,":");case"OOOO":default:return"GMT"+Gc(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Y5(r,":");case"zzzz":default:return"GMT"+Gc(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return sn(r,e.length)},T:function(t,e,n){const r=t.getTime();return sn(r,e.length)}};function Y5(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+sn(s,2)}function Q5(t,e){return t%60===0?(t>0?"-":"+")+sn(Math.abs(t)/60,2):Gc(t,e)}function Gc(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=sn(Math.trunc(r/60),2),s=sn(r%60,2);return n+i+e+s}const X5=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},NU=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},vIe=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return X5(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",X5(r,e)).replace("{{time}}",NU(i,e))},yIe={p:NU,P:vIe},bIe=/^D+$/,xIe=/^Y+$/,wIe=["D","DD","YY","YYYY"];function _Ie(t){return bIe.test(t)}function SIe(t){return xIe.test(t)}function AIe(t,e,n){const r=EIe(t,e,n);if(console.warn(r),wIe.includes(t))throw new RangeError(r)}function EIe(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const jIe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,CIe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,TIe=/^'([^]*?)'?$/,NIe=/''/g,PIe=/[a-zA-Z]/;function ld(t,e,n){var d,f,h,p,g,m,y,x;const r=Iv(),i=(n==null?void 0:n.locale)??r.locale??EU,s=(n==null?void 0:n.firstWeekContainsDate)??((f=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(h=r.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,a=(n==null?void 0:n.weekStartsOn)??((m=(g=n==null?void 0:n.locale)==null?void 0:g.options)==null?void 0:m.weekStartsOn)??r.weekStartsOn??((x=(y=r.locale)==null?void 0:y.options)==null?void 0:x.weekStartsOn)??0,o=Kt(t);if(!RDe(o))throw new RangeError("Invalid time value");let c=e.match(CIe).map(w=>{const _=w[0];if(_==="p"||_==="P"){const A=yIe[_];return A(w,i.formatLong)}return w}).join("").match(jIe).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const _=w[0];if(_==="'")return{isToken:!1,value:kIe(w)};if(G5[_])return{isToken:!0,value:w};if(_.match(PIe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:w}});i.localize.preprocessor&&(c=i.localize.preprocessor(o,c));const u={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return c.map(w=>{if(!w.isToken)return w.value;const _=w.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&SIe(_)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&_Ie(_))&&AIe(_,e,String(t));const A=G5[_[0]];return A(o,_,i.localize,u)}).join("")}function kIe(t){const e=t.match(TIe);return e?e[1].replace(NIe,"'"):t}function DIe(t){const e=Kt(t),n=e.getFullYear(),r=e.getMonth(),i=ps(t,0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function IIe(t){return Math.trunc(+Kt(t)/1e3)}function OIe(t){const e=Kt(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(0,0,0,0),e}function MIe(t,e){return LDe(OIe(t),Wi(t),e)+1}function sj(t,e){const n=Kt(t),r=Kt(e);return n.getTime()>r.getTime()}function PU(t,e){const n=Kt(t),r=Kt(e);return+n<+r}function lP(t,e){const n=Kt(t),r=Kt(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function RIe(t,e){const n=Kt(t),r=Kt(e);return n.getFullYear()===r.getFullYear()}function mS(t,e){return _i(t,-e)}function gS(t,e){const n=Kt(t),r=n.getFullYear(),i=n.getDate(),s=ps(t,0);s.setFullYear(r,e,15),s.setHours(0,0,0,0);const a=DIe(s);return n.setMonth(e,Math.min(i,a)),n}function Z5(t,e){const n=Kt(t);return isNaN(+n)?ps(t,NaN):(n.setFullYear(e),n)}const LIe={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},zIe=(t,e,n)=>{let r;const i=LIe[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"en "+r:"hace "+r:r},$Ie={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},FIe={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},VIe={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},BIe={date:jf({formats:$Ie,defaultWidth:"full"}),time:jf({formats:FIe,defaultWidth:"full"}),dateTime:jf({formats:VIe,defaultWidth:"full"})},UIe={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},WIe={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},HIe=(t,e,n,r)=>e.getHours()!==1?WIe[t]:UIe[t],KIe={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},qIe={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},GIe={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},YIe={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},QIe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},XIe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},ZIe=(t,e)=>Number(t)+"º",JIe={ordinalNumber:ZIe,era:Oa({values:KIe,defaultWidth:"wide"}),quarter:Oa({values:qIe,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:Oa({values:GIe,defaultWidth:"wide"}),day:Oa({values:YIe,defaultWidth:"wide"}),dayPeriod:Oa({values:QIe,defaultWidth:"wide",formattingValues:XIe,defaultFormattingWidth:"wide"})},eOe=/^(\d+)(º)?/i,tOe=/\d+/i,nOe={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},rOe={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},iOe={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},sOe={any:[/1/i,/2/i,/3/i,/4/i]},aOe={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},oOe={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},lOe={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},cOe={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},uOe={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},dOe={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},fOe={ordinalNumber:AU({matchPattern:eOe,parsePattern:tOe,valueCallback:function(t){return parseInt(t,10)}}),era:Ma({matchPatterns:nOe,defaultMatchWidth:"wide",parsePatterns:rOe,defaultParseWidth:"any"}),quarter:Ma({matchPatterns:iOe,defaultMatchWidth:"wide",parsePatterns:sOe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ma({matchPatterns:aOe,defaultMatchWidth:"wide",parsePatterns:oOe,defaultParseWidth:"any"}),day:Ma({matchPatterns:lOe,defaultMatchWidth:"wide",parsePatterns:cOe,defaultParseWidth:"any"}),dayPeriod:Ma({matchPatterns:uOe,defaultMatchWidth:"any",parsePatterns:dOe,defaultParseWidth:"any"})},x1={code:"es",formatDistance:zIe,formatLong:BIe,formatRelative:HIe,localize:JIe,match:fOe,options:{weekStartsOn:1,firstWeekContainsDate:1}};var xt=function(){return xt=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},xt.apply(this,arguments)};function hOe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function kU(t,e,n){for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function Ov(t){return t.mode==="multiple"}function Mv(t){return t.mode==="range"}function w1(t){return t.mode==="single"}var pOe={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function mOe(t,e){return ld(t,"LLLL y",e)}function gOe(t,e){return ld(t,"d",e)}function vOe(t,e){return ld(t,"LLLL",e)}function yOe(t){return"".concat(t)}function bOe(t,e){return ld(t,"cccccc",e)}function xOe(t,e){return ld(t,"yyyy",e)}var wOe=Object.freeze({__proto__:null,formatCaption:mOe,formatDay:gOe,formatMonthCaption:vOe,formatWeekNumber:yOe,formatWeekdayName:bOe,formatYearCaption:xOe}),_Oe=function(t,e,n){return ld(t,"do MMMM (EEEE)",n)},SOe=function(){return"Month: "},AOe=function(){return"Go to next month"},EOe=function(){return"Go to previous month"},jOe=function(t,e){return ld(t,"cccc",e)},COe=function(t){return"Week n. ".concat(t)},TOe=function(){return"Year: "},NOe=Object.freeze({__proto__:null,labelDay:_Oe,labelMonthDropdown:SOe,labelNext:AOe,labelPrevious:EOe,labelWeekNumber:COe,labelWeekday:jOe,labelYearDropdown:TOe});function POe(){var t="buttons",e=pOe,n=EU,r={},i={},s=1,a={},o=new Date;return{captionLayout:t,classNames:e,formatters:wOe,labels:NOe,locale:n,modifiersClassNames:r,modifiers:i,numberOfMonths:s,styles:a,today:o,mode:"default"}}function kOe(t){var e=t.fromYear,n=t.toYear,r=t.fromMonth,i=t.toMonth,s=t.fromDate,a=t.toDate;return r?s=Wi(r):e&&(s=new Date(e,0,1)),i?a=aP(i):n&&(a=new Date(n,11,31)),{fromDate:s?jh(s):void 0,toDate:a?jh(a):void 0}}var DU=N.createContext(void 0);function DOe(t){var e,n=t.initialProps,r=POe(),i=kOe(n),s=i.fromDate,a=i.toDate,o=(e=n.captionLayout)!==null&&e!==void 0?e:r.captionLayout;o!=="buttons"&&(!s||!a)&&(o="buttons");var c;(w1(n)||Ov(n)||Mv(n))&&(c=n.onSelect);var u=xt(xt(xt({},r),n),{captionLayout:o,classNames:xt(xt({},r.classNames),n.classNames),components:xt({},n.components),formatters:xt(xt({},r.formatters),n.formatters),fromDate:s,labels:xt(xt({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:xt(xt({},r.modifiers),n.modifiers),modifiersClassNames:xt(xt({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:xt(xt({},r.styles),n.styles),toDate:a});return l.jsx(DU.Provider,{value:u,children:t.children})}function _n(){var t=N.useContext(DU);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function IU(t){var e=_n(),n=e.locale,r=e.classNames,i=e.styles,s=e.formatters.formatCaption;return l.jsx("div",{className:r.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:s(t.displayMonth,{locale:n})})}function IOe(t){return l.jsx("svg",xt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:l.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function OU(t){var e,n,r=t.onChange,i=t.value,s=t.children,a=t.caption,o=t.className,c=t.style,u=_n(),d=(n=(e=u.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&n!==void 0?n:IOe;return l.jsxs("div",{className:o,style:c,children:[l.jsx("span",{className:u.classNames.vhidden,children:t["aria-label"]}),l.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:i,onChange:r,children:s}),l.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[a,l.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function OOe(t){var e,n=_n(),r=n.fromDate,i=n.toDate,s=n.styles,a=n.locale,o=n.formatters.formatMonthCaption,c=n.classNames,u=n.components,d=n.labels.labelMonthDropdown;if(!r)return l.jsx(l.Fragment,{});if(!i)return l.jsx(l.Fragment,{});var f=[];if(RIe(r,i))for(var h=Wi(r),p=r.getMonth();p<=i.getMonth();p++)f.push(gS(h,p));else for(var h=Wi(new Date),p=0;p<=11;p++)f.push(gS(h,p));var g=function(y){var x=Number(y.target.value),w=gS(Wi(t.displayMonth),x);t.onChange(w)},m=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:OU;return l.jsx(m,{name:"months","aria-label":d(),className:c.dropdown_month,style:s.dropdown_month,onChange:g,value:t.displayMonth.getMonth(),caption:o(t.displayMonth,{locale:a}),children:f.map(function(y){return l.jsx("option",{value:y.getMonth(),children:o(y,{locale:a})},y.getMonth())})})}function MOe(t){var e,n=t.displayMonth,r=_n(),i=r.fromDate,s=r.toDate,a=r.locale,o=r.styles,c=r.classNames,u=r.components,d=r.formatters.formatYearCaption,f=r.labels.labelYearDropdown,h=[];if(!i)return l.jsx(l.Fragment,{});if(!s)return l.jsx(l.Fragment,{});for(var p=i.getFullYear(),g=s.getFullYear(),m=p;m<=g;m++)h.push(Z5(_U(new Date),m));var y=function(w){var _=Z5(Wi(n),Number(w.target.value));t.onChange(_)},x=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:OU;return l.jsx(x,{name:"years","aria-label":f(),className:c.dropdown_year,style:o.dropdown_year,onChange:y,value:n.getFullYear(),caption:d(n,{locale:a}),children:h.map(function(w){return l.jsx("option",{value:w.getFullYear(),children:d(w,{locale:a})},w.getFullYear())})})}function ROe(t,e){var n=N.useState(t),r=n[0],i=n[1],s=e===void 0?r:e;return[s,i]}function LOe(t){var e=t.month,n=t.defaultMonth,r=t.today,i=e||n||r||new Date,s=t.toDate,a=t.fromDate,o=t.numberOfMonths,c=o===void 0?1:o;if(s&&Qg(s,i)<0){var u=-1*(c-1);i=pa(s,u)}return a&&Qg(i,a)<0&&(i=a),Wi(i)}function zOe(){var t=_n(),e=LOe(t),n=ROe(e,t.month),r=n[0],i=n[1],s=function(a){var o;if(!t.disableNavigation){var c=Wi(a);i(c),(o=t.onMonthChange)===null||o===void 0||o.call(t,c)}};return[r,s]}function $Oe(t,e){for(var n=e.reverseMonths,r=e.numberOfMonths,i=Wi(t),s=Wi(pa(i,r)),a=Qg(s,i),o=[],c=0;c<a;c++){var u=pa(i,c);o.push(u)}return n&&(o=o.reverse()),o}function FOe(t,e){if(!e.disableNavigation){var n=e.toDate,r=e.pagedNavigation,i=e.numberOfMonths,s=i===void 0?1:i,a=r?s:1,o=Wi(t);if(!n)return pa(o,a);var c=Qg(n,t);if(!(c<s))return pa(o,a)}}function VOe(t,e){if(!e.disableNavigation){var n=e.fromDate,r=e.pagedNavigation,i=e.numberOfMonths,s=i===void 0?1:i,a=r?s:1,o=Wi(t);if(!n)return pa(o,-a);var c=Qg(o,n);if(!(c<=0))return pa(o,-a)}}var MU=N.createContext(void 0);function BOe(t){var e=_n(),n=zOe(),r=n[0],i=n[1],s=$Oe(r,e),a=FOe(r,e),o=VOe(r,e),c=function(f){return s.some(function(h){return lP(f,h)})},u=function(f,h){c(f)||(h&&PU(f,h)?i(pa(f,1+e.numberOfMonths*-1)):i(f))},d={currentMonth:r,displayMonths:s,goToMonth:i,goToDate:u,previousMonth:o,nextMonth:a,isDateDisplayed:c};return l.jsx(MU.Provider,{value:d,children:t.children})}function Rv(){var t=N.useContext(MU);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function J5(t){var e,n=_n(),r=n.classNames,i=n.styles,s=n.components,a=Rv().goToMonth,o=function(d){a(pa(d,t.displayIndex?-t.displayIndex:0))},c=(e=s==null?void 0:s.CaptionLabel)!==null&&e!==void 0?e:IU,u=l.jsx(c,{id:t.id,displayMonth:t.displayMonth});return l.jsxs("div",{className:r.caption_dropdowns,style:i.caption_dropdowns,children:[l.jsx("div",{className:r.vhidden,children:u}),l.jsx(OOe,{onChange:o,displayMonth:t.displayMonth}),l.jsx(MOe,{onChange:o,displayMonth:t.displayMonth})]})}function UOe(t){return l.jsx("svg",xt({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:l.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function WOe(t){return l.jsx("svg",xt({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:l.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var yx=N.forwardRef(function(t,e){var n=_n(),r=n.classNames,i=n.styles,s=[r.button_reset,r.button];t.className&&s.push(t.className);var a=s.join(" "),o=xt(xt({},i.button_reset),i.button);return t.style&&Object.assign(o,t.style),l.jsx("button",xt({},t,{ref:e,type:"button",className:a,style:o}))});function HOe(t){var e,n,r=_n(),i=r.dir,s=r.locale,a=r.classNames,o=r.styles,c=r.labels,u=c.labelPrevious,d=c.labelNext,f=r.components;if(!t.nextMonth&&!t.previousMonth)return l.jsx(l.Fragment,{});var h=u(t.previousMonth,{locale:s}),p=[a.nav_button,a.nav_button_previous].join(" "),g=d(t.nextMonth,{locale:s}),m=[a.nav_button,a.nav_button_next].join(" "),y=(e=f==null?void 0:f.IconRight)!==null&&e!==void 0?e:WOe,x=(n=f==null?void 0:f.IconLeft)!==null&&n!==void 0?n:UOe;return l.jsxs("div",{className:a.nav,style:o.nav,children:[!t.hidePrevious&&l.jsx(yx,{name:"previous-month","aria-label":h,className:p,style:o.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:i==="rtl"?l.jsx(y,{className:a.nav_icon,style:o.nav_icon}):l.jsx(x,{className:a.nav_icon,style:o.nav_icon})}),!t.hideNext&&l.jsx(yx,{name:"next-month","aria-label":g,className:m,style:o.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:i==="rtl"?l.jsx(x,{className:a.nav_icon,style:o.nav_icon}):l.jsx(y,{className:a.nav_icon,style:o.nav_icon})})]})}function e3(t){var e=_n().numberOfMonths,n=Rv(),r=n.previousMonth,i=n.nextMonth,s=n.goToMonth,a=n.displayMonths,o=a.findIndex(function(g){return lP(t.displayMonth,g)}),c=o===0,u=o===a.length-1,d=e>1&&(c||!u),f=e>1&&(u||!c),h=function(){r&&s(r)},p=function(){i&&s(i)};return l.jsx(HOe,{displayMonth:t.displayMonth,hideNext:d,hidePrevious:f,nextMonth:i,previousMonth:r,onPreviousClick:h,onNextClick:p})}function KOe(t){var e,n=_n(),r=n.classNames,i=n.disableNavigation,s=n.styles,a=n.captionLayout,o=n.components,c=(e=o==null?void 0:o.CaptionLabel)!==null&&e!==void 0?e:IU,u;return i?u=l.jsx(c,{id:t.id,displayMonth:t.displayMonth}):a==="dropdown"?u=l.jsx(J5,{displayMonth:t.displayMonth,id:t.id}):a==="dropdown-buttons"?u=l.jsxs(l.Fragment,{children:[l.jsx(J5,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),l.jsx(e3,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):u=l.jsxs(l.Fragment,{children:[l.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),l.jsx(e3,{displayMonth:t.displayMonth,id:t.id})]}),l.jsx("div",{className:r.caption,style:s.caption,children:u})}function qOe(t){var e=_n(),n=e.footer,r=e.styles,i=e.classNames.tfoot;return n?l.jsx("tfoot",{className:i,style:r.tfoot,children:l.jsx("tr",{children:l.jsx("td",{colSpan:8,children:n})})}):l.jsx(l.Fragment,{})}function GOe(t,e,n){for(var r=n?Wu(new Date):Qa(new Date,{locale:t,weekStartsOn:e}),i=[],s=0;s<7;s++){var a=_i(r,s);i.push(a)}return i}function YOe(){var t=_n(),e=t.classNames,n=t.styles,r=t.showWeekNumber,i=t.locale,s=t.weekStartsOn,a=t.ISOWeek,o=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,u=GOe(i,s,a);return l.jsxs("tr",{style:n.head_row,className:e.head_row,children:[r&&l.jsx("td",{style:n.head_cell,className:e.head_cell}),u.map(function(d,f){return l.jsx("th",{scope:"col",className:e.head_cell,style:n.head_cell,"aria-label":c(d,{locale:i}),children:o(d,{locale:i})},f)})]})}function QOe(){var t,e=_n(),n=e.classNames,r=e.styles,i=e.components,s=(t=i==null?void 0:i.HeadRow)!==null&&t!==void 0?t:YOe;return l.jsx("thead",{style:r.head,className:n.head,children:l.jsx(s,{})})}function XOe(t){var e=_n(),n=e.locale,r=e.formatters.formatDay;return l.jsx(l.Fragment,{children:r(t.date,{locale:n})})}var cP=N.createContext(void 0);function ZOe(t){if(!Ov(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return l.jsx(cP.Provider,{value:e,children:t.children})}return l.jsx(JOe,{initialProps:t.initialProps,children:t.children})}function JOe(t){var e=t.initialProps,n=t.children,r=e.selected,i=e.min,s=e.max,a=function(u,d,f){var h,p;(h=e.onDayClick)===null||h===void 0||h.call(e,u,d,f);var g=!!(d.selected&&i&&(r==null?void 0:r.length)===i);if(!g){var m=!!(!d.selected&&s&&(r==null?void 0:r.length)===s);if(!m){var y=r?kU([],r):[];if(d.selected){var x=y.findIndex(function(w){return zi(u,w)});y.splice(x,1)}else y.push(u);(p=e.onSelect)===null||p===void 0||p.call(e,y,u,d,f)}}},o={disabled:[]};r&&o.disabled.push(function(u){var d=s&&r.length>s-1,f=r.some(function(h){return zi(h,u)});return!!(d&&!f)});var c={selected:r,onDayClick:a,modifiers:o};return l.jsx(cP.Provider,{value:c,children:n})}function uP(){var t=N.useContext(cP);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function eMe(t,e){var n=e||{},r=n.from,i=n.to;return r&&i?zi(i,t)&&zi(r,t)?void 0:zi(i,t)?{from:i,to:void 0}:zi(r,t)?void 0:sj(r,t)?{from:t,to:i}:{from:r,to:t}:i?sj(t,i)?{from:i,to:t}:{from:t,to:i}:r?PU(t,r)?{from:t,to:r}:{from:r,to:t}:{from:t,to:void 0}}var dP=N.createContext(void 0);function tMe(t){if(!Mv(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return l.jsx(dP.Provider,{value:e,children:t.children})}return l.jsx(nMe,{initialProps:t.initialProps,children:t.children})}function nMe(t){var e=t.initialProps,n=t.children,r=e.selected,i=r||{},s=i.from,a=i.to,o=e.min,c=e.max,u=function(p,g,m){var y,x;(y=e.onDayClick)===null||y===void 0||y.call(e,p,g,m);var w=eMe(p,r);(x=e.onSelect)===null||x===void 0||x.call(e,w,p,g,m)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(s?(d.range_start=[s],a?(d.range_end=[a],zi(s,a)||(d.range_middle=[{after:s,before:a}])):d.range_end=[s]):a&&(d.range_start=[a],d.range_end=[a]),o&&(s&&!a&&d.disabled.push({after:mS(s,o-1),before:_i(s,o-1)}),s&&a&&d.disabled.push({after:s,before:_i(s,o-1)}),!s&&a&&d.disabled.push({after:mS(a,o-1),before:_i(a,o-1)})),c){if(s&&!a&&(d.disabled.push({before:_i(s,-c+1)}),d.disabled.push({after:_i(s,c-1)})),s&&a){var f=za(a,s)+1,h=c-f;d.disabled.push({before:mS(s,h)}),d.disabled.push({after:_i(a,h)})}!s&&a&&(d.disabled.push({before:_i(a,-c+1)}),d.disabled.push({after:_i(a,c-1)}))}return l.jsx(dP.Provider,{value:{selected:r,onDayClick:u,modifiers:d},children:n})}function fP(){var t=N.useContext(dP);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function m0(t){return Array.isArray(t)?kU([],t):t!==void 0?[t]:[]}function rMe(t){var e={};return Object.entries(t).forEach(function(n){var r=n[0],i=n[1];e[r]=m0(i)}),e}var ma;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(ma||(ma={}));var iMe=ma.Selected,ho=ma.Disabled,sMe=ma.Hidden,aMe=ma.Today,vS=ma.RangeEnd,yS=ma.RangeMiddle,bS=ma.RangeStart,oMe=ma.Outside;function lMe(t,e,n){var r,i=(r={},r[iMe]=m0(t.selected),r[ho]=m0(t.disabled),r[sMe]=m0(t.hidden),r[aMe]=[t.today],r[vS]=[],r[yS]=[],r[bS]=[],r[oMe]=[],r);return t.fromDate&&i[ho].push({before:t.fromDate}),t.toDate&&i[ho].push({after:t.toDate}),Ov(t)?i[ho]=i[ho].concat(e.modifiers[ho]):Mv(t)&&(i[ho]=i[ho].concat(n.modifiers[ho]),i[bS]=n.modifiers[bS],i[yS]=n.modifiers[yS],i[vS]=n.modifiers[vS]),i}var RU=N.createContext(void 0);function cMe(t){var e=_n(),n=uP(),r=fP(),i=lMe(e,n,r),s=rMe(e.modifiers),a=xt(xt({},i),s);return l.jsx(RU.Provider,{value:a,children:t.children})}function LU(){var t=N.useContext(RU);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function uMe(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function dMe(t){return!!(t&&typeof t=="object"&&"from"in t)}function fMe(t){return!!(t&&typeof t=="object"&&"after"in t)}function hMe(t){return!!(t&&typeof t=="object"&&"before"in t)}function pMe(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function mMe(t,e){var n,r=e.from,i=e.to;if(r&&i){var s=za(i,r)<0;s&&(n=[i,r],r=n[0],i=n[1]);var a=za(t,r)>=0&&za(i,t)>=0;return a}return i?zi(i,t):r?zi(r,t):!1}function gMe(t){return sP(t)}function vMe(t){return Array.isArray(t)&&t.every(sP)}function yMe(t,e){return e.some(function(n){if(typeof n=="boolean")return n;if(gMe(n))return zi(t,n);if(vMe(n))return n.includes(t);if(dMe(n))return mMe(t,n);if(pMe(n))return n.dayOfWeek.includes(t.getDay());if(uMe(n)){var r=za(n.before,t),i=za(n.after,t),s=r>0,a=i<0,o=sj(n.before,n.after);return o?a&&s:s||a}return fMe(n)?za(t,n.after)>0:hMe(n)?za(n.before,t)>0:typeof n=="function"?n(t):!1})}function hP(t,e,n){var r=Object.keys(e).reduce(function(s,a){var o=e[a];return yMe(t,o)&&s.push(a),s},[]),i={};return r.forEach(function(s){return i[s]=!0}),n&&!lP(t,n)&&(i.outside=!0),i}function bMe(t,e){for(var n=Wi(t[0]),r=aP(t[t.length-1]),i,s,a=n;a<=r;){var o=hP(a,e),c=!o.disabled&&!o.hidden;if(!c){a=_i(a,1);continue}if(o.selected)return a;o.today&&!s&&(s=a),i||(i=a),a=_i(a,1)}return s||i}var xMe=365;function zU(t,e){var n=e.moveBy,r=e.direction,i=e.context,s=e.modifiers,a=e.retry,o=a===void 0?{count:0,lastFocused:t}:a,c=i.weekStartsOn,u=i.fromDate,d=i.toDate,f=i.locale,h={day:_i,week:ij,month:pa,year:IDe,startOfWeek:function(y){return i.ISOWeek?Wu(y):Qa(y,{locale:f,weekStartsOn:c})},endOfWeek:function(y){return i.ISOWeek?SU(y):oP(y,{locale:f,weekStartsOn:c})}},p=h[n](t,r==="after"?1:-1);r==="before"&&u?p=ODe([u,p]):r==="after"&&d&&(p=MDe([d,p]));var g=!0;if(s){var m=hP(p,s);g=!m.disabled&&!m.hidden}return g?p:o.count>xMe?o.lastFocused:zU(p,{moveBy:n,direction:r,context:i,modifiers:s,retry:xt(xt({},o),{count:o.count+1})})}var $U=N.createContext(void 0);function wMe(t){var e=Rv(),n=LU(),r=N.useState(),i=r[0],s=r[1],a=N.useState(),o=a[0],c=a[1],u=bMe(e.displayMonths,n),d=i??(o&&e.isDateDisplayed(o))?o:u,f=function(){c(i),s(void 0)},h=function(y){s(y)},p=_n(),g=function(y,x){if(i){var w=zU(i,{moveBy:y,direction:x,context:p,modifiers:n});zi(i,w)||(e.goToDate(w,i),h(w))}},m={focusedDay:i,focusTarget:d,blur:f,focus:h,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return l.jsx($U.Provider,{value:m,children:t.children})}function pP(){var t=N.useContext($U);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function _Me(t,e){var n=LU(),r=hP(t,n,e);return r}var mP=N.createContext(void 0);function SMe(t){if(!w1(t.initialProps)){var e={selected:void 0};return l.jsx(mP.Provider,{value:e,children:t.children})}return l.jsx(AMe,{initialProps:t.initialProps,children:t.children})}function AMe(t){var e=t.initialProps,n=t.children,r=function(s,a,o){var c,u,d;if((c=e.onDayClick)===null||c===void 0||c.call(e,s,a,o),a.selected&&!e.required){(u=e.onSelect)===null||u===void 0||u.call(e,void 0,s,a,o);return}(d=e.onSelect)===null||d===void 0||d.call(e,s,s,a,o)},i={selected:e.selected,onDayClick:r};return l.jsx(mP.Provider,{value:i,children:n})}function FU(){var t=N.useContext(mP);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function EMe(t,e){var n=_n(),r=FU(),i=uP(),s=fP(),a=pP(),o=a.focusDayAfter,c=a.focusDayBefore,u=a.focusWeekAfter,d=a.focusWeekBefore,f=a.blur,h=a.focus,p=a.focusMonthBefore,g=a.focusMonthAfter,m=a.focusYearBefore,y=a.focusYearAfter,x=a.focusStartOfWeek,w=a.focusEndOfWeek,_=function(U){var $,Y,Q,ce;w1(n)?($=r.onDayClick)===null||$===void 0||$.call(r,t,e,U):Ov(n)?(Y=i.onDayClick)===null||Y===void 0||Y.call(i,t,e,U):Mv(n)?(Q=s.onDayClick)===null||Q===void 0||Q.call(s,t,e,U):(ce=n.onDayClick)===null||ce===void 0||ce.call(n,t,e,U)},A=function(U){var $;h(t),($=n.onDayFocus)===null||$===void 0||$.call(n,t,e,U)},E=function(U){var $;f(),($=n.onDayBlur)===null||$===void 0||$.call(n,t,e,U)},C=function(U){var $;($=n.onDayMouseEnter)===null||$===void 0||$.call(n,t,e,U)},j=function(U){var $;($=n.onDayMouseLeave)===null||$===void 0||$.call(n,t,e,U)},T=function(U){var $;($=n.onDayPointerEnter)===null||$===void 0||$.call(n,t,e,U)},P=function(U){var $;($=n.onDayPointerLeave)===null||$===void 0||$.call(n,t,e,U)},I=function(U){var $;($=n.onDayTouchCancel)===null||$===void 0||$.call(n,t,e,U)},M=function(U){var $;($=n.onDayTouchEnd)===null||$===void 0||$.call(n,t,e,U)},F=function(U){var $;($=n.onDayTouchMove)===null||$===void 0||$.call(n,t,e,U)},R=function(U){var $;($=n.onDayTouchStart)===null||$===void 0||$.call(n,t,e,U)},H=function(U){var $;($=n.onDayKeyUp)===null||$===void 0||$.call(n,t,e,U)},X=function(U){var $;switch(U.key){case"ArrowLeft":U.preventDefault(),U.stopPropagation(),n.dir==="rtl"?o():c();break;case"ArrowRight":U.preventDefault(),U.stopPropagation(),n.dir==="rtl"?c():o();break;case"ArrowDown":U.preventDefault(),U.stopPropagation(),u();break;case"ArrowUp":U.preventDefault(),U.stopPropagation(),d();break;case"PageUp":U.preventDefault(),U.stopPropagation(),U.shiftKey?m():p();break;case"PageDown":U.preventDefault(),U.stopPropagation(),U.shiftKey?y():g();break;case"Home":U.preventDefault(),U.stopPropagation(),x();break;case"End":U.preventDefault(),U.stopPropagation(),w();break}($=n.onDayKeyDown)===null||$===void 0||$.call(n,t,e,U)},W={onClick:_,onFocus:A,onBlur:E,onKeyDown:X,onKeyUp:H,onMouseEnter:C,onMouseLeave:j,onPointerEnter:T,onPointerLeave:P,onTouchCancel:I,onTouchEnd:M,onTouchMove:F,onTouchStart:R};return W}function jMe(){var t=_n(),e=FU(),n=uP(),r=fP(),i=w1(t)?e.selected:Ov(t)?n.selected:Mv(t)?r.selected:void 0;return i}function CMe(t){return Object.values(ma).includes(t)}function TMe(t,e){var n=[t.classNames.day];return Object.keys(e).forEach(function(r){var i=t.modifiersClassNames[r];if(i)n.push(i);else if(CMe(r)){var s=t.classNames["day_".concat(r)];s&&n.push(s)}}),n}function NMe(t,e){var n=xt({},t.styles.day);return Object.keys(e).forEach(function(r){var i;n=xt(xt({},n),(i=t.modifiersStyles)===null||i===void 0?void 0:i[r])}),n}function PMe(t,e,n){var r,i,s,a=_n(),o=pP(),c=_Me(t,e),u=EMe(t,c),d=jMe(),f=!!(a.onDayClick||a.mode!=="default");N.useEffect(function(){var C;c.outside||o.focusedDay&&f&&zi(o.focusedDay,t)&&((C=n.current)===null||C===void 0||C.focus())},[o.focusedDay,t,n,f,c.outside]);var h=TMe(a,c).join(" "),p=NMe(a,c),g=!!(c.outside&&!a.showOutsideDays||c.hidden),m=(s=(i=a.components)===null||i===void 0?void 0:i.DayContent)!==null&&s!==void 0?s:XOe,y=l.jsx(m,{date:t,displayMonth:e,activeModifiers:c}),x={style:p,className:h,children:y,role:"gridcell"},w=o.focusTarget&&zi(o.focusTarget,t)&&!c.outside,_=o.focusedDay&&zi(o.focusedDay,t),A=xt(xt(xt({},x),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=_||w?0:-1,r)),u),E={isButton:f,isHidden:g,activeModifiers:c,selectedDays:d,buttonProps:A,divProps:x};return E}function kMe(t){var e=N.useRef(null),n=PMe(t.date,t.displayMonth,e);return n.isHidden?l.jsx("div",{role:"gridcell"}):n.isButton?l.jsx(yx,xt({name:"day",ref:e},n.buttonProps)):l.jsx("div",xt({},n.divProps))}function DMe(t){var e=t.number,n=t.dates,r=_n(),i=r.onWeekNumberClick,s=r.styles,a=r.classNames,o=r.locale,c=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,d=u(Number(e),{locale:o});if(!i)return l.jsx("span",{className:a.weeknumber,style:s.weeknumber,children:d});var f=c(Number(e),{locale:o}),h=function(p){i(e,n,p)};return l.jsx(yx,{name:"week-number","aria-label":f,className:a.weeknumber,style:s.weeknumber,onClick:h,children:d})}function IMe(t){var e,n,r=_n(),i=r.styles,s=r.classNames,a=r.showWeekNumber,o=r.components,c=(e=o==null?void 0:o.Day)!==null&&e!==void 0?e:kMe,u=(n=o==null?void 0:o.WeekNumber)!==null&&n!==void 0?n:DMe,d;return a&&(d=l.jsx("td",{className:s.cell,style:i.cell,children:l.jsx(u,{number:t.weekNumber,dates:t.dates})})),l.jsxs("tr",{className:s.row,style:i.row,children:[d,t.dates.map(function(f){return l.jsx("td",{className:s.cell,style:i.cell,role:"presentation",children:l.jsx(c,{displayMonth:t.displayMonth,date:f})},IIe(f))})]})}function t3(t,e,n){for(var r=n!=null&&n.ISOWeek?SU(e):oP(e,n),i=n!=null&&n.ISOWeek?Wu(t):Qa(t,n),s=za(r,i),a=[],o=0;o<=s;o++)a.push(_i(i,o));var c=a.reduce(function(u,d){var f=n!=null&&n.ISOWeek?jU(d):TU(d,n),h=u.find(function(p){return p.weekNumber===f});return h?(h.dates.push(d),u):(u.push({weekNumber:f,dates:[d]}),u)},[]);return c}function OMe(t,e){var n=t3(Wi(t),aP(t),e);if(e!=null&&e.useFixedWeeks){var r=MIe(t,e);if(r<6){var i=n[n.length-1],s=i.dates[i.dates.length-1],a=ij(s,6-r),o=t3(ij(s,1),a,e);n.push.apply(n,o)}}return n}function MMe(t){var e,n,r,i=_n(),s=i.locale,a=i.classNames,o=i.styles,c=i.hideHead,u=i.fixedWeeks,d=i.components,f=i.weekStartsOn,h=i.firstWeekContainsDate,p=i.ISOWeek,g=OMe(t.displayMonth,{useFixedWeeks:!!u,ISOWeek:p,locale:s,weekStartsOn:f,firstWeekContainsDate:h}),m=(e=d==null?void 0:d.Head)!==null&&e!==void 0?e:QOe,y=(n=d==null?void 0:d.Row)!==null&&n!==void 0?n:IMe,x=(r=d==null?void 0:d.Footer)!==null&&r!==void 0?r:qOe;return l.jsxs("table",{id:t.id,className:a.table,style:o.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&l.jsx(m,{}),l.jsx("tbody",{className:a.tbody,style:o.tbody,children:g.map(function(w){return l.jsx(y,{displayMonth:t.displayMonth,dates:w.dates,weekNumber:w.weekNumber},w.weekNumber)})}),l.jsx(x,{displayMonth:t.displayMonth})]})}function RMe(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var LMe=RMe()?N.useLayoutEffect:N.useEffect,xS=!1,zMe=0;function n3(){return"react-day-picker-".concat(++zMe)}function $Me(t){var e,n=t??(xS?n3():null),r=N.useState(n),i=r[0],s=r[1];return LMe(function(){i===null&&s(n3())},[]),N.useEffect(function(){xS===!1&&(xS=!0)},[]),(e=t??i)!==null&&e!==void 0?e:void 0}function FMe(t){var e,n,r=_n(),i=r.dir,s=r.classNames,a=r.styles,o=r.components,c=Rv().displayMonths,u=$Me(r.id?"".concat(r.id,"-").concat(t.displayIndex):void 0),d=r.id?"".concat(r.id,"-grid-").concat(t.displayIndex):void 0,f=[s.month],h=a.month,p=t.displayIndex===0,g=t.displayIndex===c.length-1,m=!p&&!g;i==="rtl"&&(e=[p,g],g=e[0],p=e[1]),p&&(f.push(s.caption_start),h=xt(xt({},h),a.caption_start)),g&&(f.push(s.caption_end),h=xt(xt({},h),a.caption_end)),m&&(f.push(s.caption_between),h=xt(xt({},h),a.caption_between));var y=(n=o==null?void 0:o.Caption)!==null&&n!==void 0?n:KOe;return l.jsxs("div",{className:f.join(" "),style:h,children:[l.jsx(y,{id:u,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),l.jsx(MMe,{id:d,"aria-labelledby":u,displayMonth:t.displayMonth})]},t.displayIndex)}function VMe(t){var e=_n(),n=e.classNames,r=e.styles;return l.jsx("div",{className:n.months,style:r.months,children:t.children})}function BMe(t){var e,n,r=t.initialProps,i=_n(),s=pP(),a=Rv(),o=N.useState(!1),c=o[0],u=o[1];N.useEffect(function(){i.initialFocus&&s.focusTarget&&(c||(s.focus(s.focusTarget),u(!0)))},[i.initialFocus,c,s.focus,s.focusTarget,s]);var d=[i.classNames.root,i.className];i.numberOfMonths>1&&d.push(i.classNames.multiple_months),i.showWeekNumber&&d.push(i.classNames.with_weeknumber);var f=xt(xt({},i.styles.root),i.style),h=Object.keys(r).filter(function(g){return g.startsWith("data-")}).reduce(function(g,m){var y;return xt(xt({},g),(y={},y[m]=r[m],y))},{}),p=(n=(e=r.components)===null||e===void 0?void 0:e.Months)!==null&&n!==void 0?n:VMe;return l.jsx("div",xt({className:d.join(" "),style:f,dir:i.dir,id:i.id,nonce:r.nonce,title:r.title,lang:r.lang},h,{children:l.jsx(p,{children:a.displayMonths.map(function(g,m){return l.jsx(FMe,{displayIndex:m,displayMonth:g},m)})})}))}function UMe(t){var e=t.children,n=hOe(t,["children"]);return l.jsx(DOe,{initialProps:n,children:l.jsx(BOe,{children:l.jsx(SMe,{initialProps:n,children:l.jsx(ZOe,{initialProps:n,children:l.jsx(tMe,{initialProps:n,children:l.jsx(cMe,{children:l.jsx(wMe,{children:e})})})})})})})}function np(t){return l.jsx(UMe,xt({},t,{children:l.jsx(BMe,{initialProps:t})}))}const r3=[{count:1,name:"Simple"},{count:2,name:"Doble"},{count:3,name:"Triple"},{count:4,name:"Cuádruple"},{count:5,name:"Quíntuple"}],i3=140,s3=7,WMe=`
  .rdp {
    --rdp-cell-size: 40px; --rdp-accent-color: #FF9500; --rdp-background-color: transparent; /* Changed bg to transparent */
    --rdp-accent-color-dark: #FF9500; --rdp-background-color-dark: transparent; /* Changed bg to transparent */
    --rdp-outline: 2px solid var(--rdp-accent-color); --rdp-border-radius: 12px; color: #FFF; margin: 1em auto; /* Centering */
  }
  .rdp-caption_label { color: #FFF; font-weight: bold;} /* Month/Year Title */
  .rdp-nav_button { color: #FF9500; } /* Arrows */
  .rdp-head_cell { color: #8e8e93; font-size: 0.8em; } /* Weekday initials */
  .rdp-day { color: #FFF;} /* Day numbers */
  .rdp-day_selected { background-color: var(--rdp-accent-color); color: #000; font-weight: bold; } /* Selected day */
  .rdp-day_today { font-weight: bold; color: #FF9500; } /* Today */
  .rdp-day_disabled { color: #505054; } /* Disabled days */
  .rdp-day_outside { color: #505054; } /* Days outside month */
  .rdp-caption_dropdowns { display: flex; gap: 10px; } /* Dropdowns */
   .rdp-dropdown { background-color: #333; border: 1px solid #555; color: #FFF; padding: 4px 8px; border-radius: 6px; }
`,cd=({isOpen:t,onClose:e,motherId:n})=>{const{animals:r,fathers:i,addFather:s,addParturition:a,parturitions:o}=rt(),[c,u]=N.useState(1),[d,f]=N.useState(new Date().toISOString().split("T")[0]),[h,p]=N.useState(""),[g,m]=N.useState(1),[y,x]=N.useState([]),[w,_]=N.useState(!1),[A,E]=N.useState(!1),[C,j]=N.useState(!1),[T,P]=N.useState(""),I=N.useMemo(()=>r.find($=>$.id===n),[r,n]);N.useEffect(()=>{t&&(u(1),f(new Date().toISOString().split("T")[0]),p(""),m(1),x([]),j(!1),P(""))},[t]);const M=()=>u($=>$<4?$+1:$),F=()=>u($=>$>1?$-1:$),R=$=>{m($),x(Array.from({length:$},(Y,Q)=>({id:`kid_${Q}_${Date.now()}`,sex:"Hembra",status:"Viva",correlative:"",birthWeight:""}))),M()},H=($,Y,Q)=>{const ce=[...y];let ie=Q;Y==="birthWeight"&&parseFloat(Q)>s3&&(ie=s3.toString()),ce[$]={...ce[$],[Y]:ie},x(ce)},X=async()=>{var ce;j(!0),P("");const $=o.filter(ie=>ie.goatId.toUpperCase()===n.toUpperCase()),Y=new Date(d).getTime();if($.some(ie=>{const oe=new Date(ie.parturitionDate).getTime();return Math.abs(Y-oe)/(1e3*60*60*24)<i3})){P(`Ya existe un parto registrado para ${n} en una fecha demasiado cercana (menos de ${i3} días).`),j(!1);return}try{const ie=i.find(Se=>Se.id===h);if(!ie)throw new Error("Padre (semental) no encontrado en la base de datos.");const oe=y.filter(Se=>Se.status==="Viva"),ve=y.some(Se=>Se.status==="Mortinato"),je=oe.map(Se=>({sex:Se.sex,birthWeight:Se.birthWeight,id:`${Se.sex==="Macho"?"X":ie.name.charAt(0).toUpperCase()}${Se.correlative}`}));await a({motherId:n.toUpperCase(),parturitionDate:d,sireId:h,parturitionType:((ce=r3.find(Se=>Se.count===g))==null?void 0:ce.name)||"Simple",offspringCount:y.length,liveOffspring:je,parturitionOutcome:ve?"Con Mortinatos":"Normal"}),M(),setTimeout(e,2e3)}catch(ie){P(ie.message||"Error al registrar el parto. Revisa los datos e IDs de las crías."),console.error(ie),j(!1)}},W=N.useMemo(()=>i.find($=>$.id===h),[h,i]),U=async $=>{try{await s($),p($.id),_(!1)}catch(Y){P(Y.message||"No se pudo guardar el nuevo padre."),console.error("Error saving new father:",Y)}};return t?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex flex-col justify-end z-50 animate-fade-in",onClick:e,children:l.jsxs("div",{className:"bg-ios-modal-bg w-full h-[95vh] rounded-t-2xl flex flex-col animate-slide-up",onClick:$=>$.stopPropagation(),children:[l.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between p-4 border-b border-brand-border",children:[c>1&&c<4&&l.jsx("button",{onClick:F,className:"p-2 text-zinc-400 hover:text-white",children:l.jsx(ar,{size:24})}),l.jsxs("h1",{className:"text-xl font-bold tracking-tight text-white mx-auto",children:["Registrar Parto para ",pt(I)]}),c<4?l.jsx("button",{onClick:e,className:"p-2 text-zinc-400 hover:text-white",children:l.jsx(Za,{size:24})}):l.jsx("div",{className:"w-10"})]}),l.jsxs("main",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:[c===1&&l.jsxs("div",{className:"space-y-6 max-w-md mx-auto",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Fecha del Parto"}),l.jsxs("button",{type:"button",onClick:()=>E(!0),className:"w-full bg-zinc-800 p-4 rounded-xl text-lg text-left flex justify-between items-center text-white",children:[l.jsx("span",{children:d?new Date(d+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"}):"Seleccionar Fecha"}),l.jsx(fs,{className:"text-zinc-400",size:20})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Padre (Semental)"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{value:h,onChange:$=>p($.target.value),className:"w-full bg-zinc-800 p-4 rounded-xl text-lg appearance-none text-white",children:[l.jsx("option",{value:"",className:"text-zinc-500",children:"Seleccionar Padre..."}),i.map($=>l.jsx("option",{value:$.id,className:"text-white",children:pt($)},$.id))]}),l.jsx("button",{type:"button",onClick:()=>_(!0),className:"flex-shrink-0 p-4 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",children:l.jsx(ir,{size:24})})]})]}),l.jsx("button",{onClick:M,disabled:!d||!h,className:"w-full bg-brand-orange text-white font-bold py-4 rounded-xl text-lg disabled:opacity-50",children:"Siguiente"})]}),c===2&&l.jsxs("div",{className:"space-y-6 text-center max-w-md mx-auto",children:[l.jsx("h2",{className:"text-2xl font-semibold text-white",children:"¿Cuántas crías nacieron?"}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:r3.map($=>l.jsx("button",{onClick:()=>R($.count),className:"bg-zinc-800 hover:bg-zinc-700 text-white font-bold py-8 rounded-2xl text-2xl transition-colors",children:$.name},$.count))})]}),c===3&&l.jsxs("div",{className:"space-y-4 max-w-xl mx-auto",children:[y.map(($,Y)=>{const Q=$.status==="Mortinato";return l.jsxs("div",{className:`bg-black/20 rounded-2xl p-4 border transition-colors ${Q?"border-red-500/30":"border-zinc-700"} space-y-3`,children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("p",{className:"font-semibold text-brand-orange",children:["Cría ",Y+1]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("div",{className:"w-32",children:l.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[l.jsx("button",{type:"button",onClick:()=>H(Y,"status","Viva"),className:`w-1/2 text-xs rounded-md py-1 transition-all ${Q?"text-zinc-400":"bg-green-600 text-white"}`,children:"Viva"}),l.jsx("button",{type:"button",onClick:()=>H(Y,"status","Mortinato"),className:`w-1/2 text-xs rounded-md py-1 transition-all ${Q?"bg-red-600 text-white":"text-zinc-400"}`,children:"Mortinato"})]})}),l.jsx("div",{className:"w-32",children:l.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[l.jsx("button",{type:"button",onClick:()=>H(Y,"sex","Hembra"),className:`w-1/2 text-xs rounded-md py-1 transition-all ${$.sex==="Hembra"?"bg-pink-500 text-white":"text-zinc-400"}`,children:"Hembra"}),l.jsx("button",{type:"button",onClick:()=>H(Y,"sex","Macho"),className:`w-1/2 text-xs rounded-md py-1 transition-all ${$.sex==="Macho"?"bg-blue-500 text-white":"text-zinc-400"}`,children:"Macho"})]})})]})]}),l.jsxs("div",{className:`grid grid-cols-2 gap-3 items-center transition-opacity ${Q?"opacity-40 pointer-events-none":"opacity-100"}`,children:[l.jsxs("div",{className:"flex items-center bg-zinc-800 p-3 rounded-xl gap-2",children:[l.jsx("span",{className:"font-mono text-zinc-400 text-lg",children:$.sex==="Macho"?"X":(W==null?void 0:W.name.charAt(0).toUpperCase())||"?"}),l.jsx("input",{autoFocus:Y===0,value:$.correlative,onChange:ce=>H(Y,"correlative",ce.target.value.toUpperCase()),placeholder:"ID",className:"w-full bg-transparent text-lg text-white focus:outline-none",disabled:Q,required:!Q})]}),l.jsx("input",{value:$.birthWeight,onChange:ce=>H(Y,"birthWeight",ce.target.value),placeholder:"Peso (Kg)",type:"number",step:"0.1",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white",disabled:Q,required:!Q})]})]},$.id)}),l.jsx("button",{onClick:X,disabled:C||y.some($=>$.status==="Viva"&&(!$.correlative||!$.birthWeight)),className:"w-full bg-brand-green text-white font-bold py-4 rounded-xl text-lg disabled:opacity-50",children:C?"Guardando...":`Guardar Parto y ${g} Cría(s)`}),T&&l.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[l.jsx($t,{size:18}),l.jsx("span",{children:T})]})]}),c===4&&l.jsxs("div",{className:"text-center flex flex-col justify-center items-center h-full",children:[l.jsx(ri,{size:80,className:"text-brand-green mb-4 animate-pulse"}),l.jsx("h2",{className:"text-3xl font-bold text-white",children:"¡Éxito!"}),l.jsx("p",{className:"text-lg text-zinc-400",children:"El parto y las crías se han registrado correctamente."})]})]})]})}),l.jsxs(at,{isOpen:A,onClose:()=>E(!1),title:"Seleccionar Fecha del Parto",children:[l.jsx("style",{children:WMe}),l.jsx("div",{className:"flex justify-center",children:l.jsx(np,{mode:"single",selected:new Date(d+"T00:00:00"),onSelect:$=>{$&&f($.toISOString().split("T")[0]),E(!1)},locale:x1,disabled:{after:new Date},captionLayout:"dropdown-buttons",fromYear:new Date().getFullYear()-2,toYear:new Date().getFullYear()})})]}),l.jsx(rP,{isOpen:w,onClose:()=>_(!1),onSave:U})]}):null},VU=({isOpen:t,animal:e,onClose:n,onLogToSession:r,onStartNewSession:i,onStartDrying:s,onSetDry:a})=>{const{parturitions:o,weighings:c}=rt(),[u,d]=N.useState(!1),f=N.useMemo(()=>o.filter(p=>p.goatId===e.id&&(p.status==="activa"||p.status==="en-secado")).sort((p,g)=>new Date(g.parturitionDate).getTime()-new Date(p.parturitionDate).getTime())[0],[o,e.id]),h=N.useMemo(()=>{const p=c.map(m=>m.date);return[...new Set(p)].sort((m,y)=>new Date(y).getTime()-new Date(m).getTime()).slice(0,3)},[c]);return!f&&!u?l.jsx(at,{isOpen:t,onClose:n,title:`Acción Requerida: ${pt(e)}`,children:l.jsxs("div",{className:"text-center space-y-4 text-white",children:[l.jsx($t,{className:"mx-auto h-12 w-12 text-amber-400"}),l.jsx("h3",{className:"text-lg font-medium",children:"Animal sin Parto Activo"}),l.jsx("p",{className:"text-sm text-zinc-400",children:"Para registrar un pesaje o gestionar el secado, el animal debe tener un parto activo."}),l.jsxs("button",{onClick:()=>d(!0),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:bg-orange-600 font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[l.jsx(ua,{size:18})," Declarar Parto Ahora"]})]})}):u?l.jsx(cd,{isOpen:!0,onClose:()=>{d(!1)},motherId:e.id}):l.jsx(at,{isOpen:t,onClose:n,title:`Pesaje Lechero: ${pt(e)}`,children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-zinc-400 mb-2",children:[l.jsx(vw,{size:16}),"Añadir a Sesión Reciente"]}),h.length>0?l.jsx("div",{className:"space-y-2",children:h.map(p=>l.jsxs("button",{onClick:()=>r(p),className:"w-full text-left bg-zinc-800/80 p-3 rounded-xl hover:bg-zinc-700 transition-colors flex justify-between items-center group",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(fs,{size:18,className:"text-zinc-500"}),l.jsx("span",{className:"text-base font-semibold text-white",children:new Date(p+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"})})]}),l.jsx(Gn,{size:20,className:"text-zinc-600 group-hover:text-white transition-colors"})," "]},p))}):l.jsx("p",{className:"text-center text-sm text-zinc-500 py-4",children:"No hay sesiones recientes."})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-zinc-400 mb-2",children:[l.jsx(ss,{size:16}),"Iniciar Nueva Sesión de Pesaje"]}),l.jsxs("button",{onClick:i,className:"w-full text-left bg-brand-orange/20 border border-brand-orange/80 p-4 rounded-xl hover:bg-brand-orange/30 transition-colors flex justify-between items-center group",children:[l.jsx("span",{className:"text-lg font-bold text-white",children:"Construir Carga Masiva..."}),l.jsx(Gn,{size:20,className:"text-brand-orange group-hover:text-orange-300 transition-colors"})," "]}),l.jsx("p",{className:"text-xs text-zinc-500 text-center px-4 mt-2",children:"Esto te permitirá seleccionar un grupo de animales y registrar sus pesajes."})]}),f&&l.jsxs("div",{className:"pt-4 border-t border-brand-border",children:[l.jsx("h3",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Acciones de Lactancia"}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[l.jsxs("button",{type:"button",onClick:()=>s(f.id),disabled:f.status!=="activa",className:"w-full flex items-center justify-center gap-2 bg-blue-600/20 text-blue-300 font-semibold py-3 px-3 rounded-lg hover:bg-blue-600/40 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(ed,{size:16})," ",f.status==="en-secado"?"Ya en Secado":"Iniciar Secado"]}),l.jsxs("button",{type:"button",onClick:()=>a(f.id),disabled:f.status==="seca"||f.status==="finalizada",className:"w-full flex items-center justify-center gap-2 bg-gray-600/20 text-gray-300 font-semibold py-3 px-3 rounded-lg hover:bg-gray-600/40 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(va,{size:16})," ",f.status==="seca"?"Ya Seca":"Declarar Seca"]})]}),f.status==="en-secado"&&l.jsx("p",{className:"text-center text-xs text-zinc-400 mt-2",children:"El animal está en su período de secado."})]})]})})},BU=({isOpen:t,animal:e,onClose:n,onLogToSession:r,onStartNewSession:i,onSetReadyForMating:s})=>{const{bodyWeighings:a,parturitions:o}=rt(),c=N.useMemo(()=>{const f=a.map(p=>p.date);return[...new Set(f)].sort((p,g)=>new Date(g).getTime()-new Date(p).getTime()).slice(0,3)},[a]),d=od(e,o)==="Cabritona"&&e.reproductiveStatus==="Vacía";return l.jsx(at,{isOpen:t,onClose:n,title:`Pesaje Corporal: ${pt(e)}`,children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-zinc-400 mb-2",children:[l.jsx(vw,{size:16}),"Añadir a Sesión Reciente"]}),c.length>0?l.jsx("div",{className:"space-y-2",children:c.map(f=>l.jsxs("button",{onClick:()=>r(f),className:"w-full text-left bg-zinc-800/80 p-3 rounded-xl hover:bg-zinc-700 transition-colors flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(fs,{size:18,className:"text-zinc-500"}),l.jsx("span",{className:"text-base font-semibold text-white",children:new Date(f+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"})})]}),l.jsx(Gn,{size:20,className:"text-zinc-600"})]},f))}):l.jsx("p",{className:"text-center text-sm text-zinc-500 py-4",children:"No hay sesiones recientes."})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-zinc-400 mb-2",children:[l.jsx(ss,{size:16}),"Iniciar Nueva Sesión de Pesaje"]}),l.jsxs("button",{onClick:i,className:"w-full text-left bg-brand-green/20 border border-brand-green/80 p-4 rounded-xl hover:bg-brand-green/30 transition-colors flex justify-between items-center",children:[l.jsx("span",{className:"text-lg font-bold text-white",children:"Construir Carga Masiva..."}),l.jsx(Gn,{size:20,className:"text-brand-green"})]}),l.jsx("p",{className:"text-xs text-zinc-500 text-center px-4 mt-2",children:"Esto te permitirá seleccionar un grupo de animales y registrar sus pesos."})]}),d&&l.jsxs("div",{className:"pt-4 border-t border-brand-border",children:[l.jsx("h3",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Acciones de Desarrollo"}),l.jsx("div",{className:"flex",children:l.jsxs("button",{onClick:s,className:"w-full flex items-center justify-center gap-2 bg-pink-600/20 text-pink-300 font-semibold py-3 px-3 rounded-lg hover:bg-pink-600/40 transition-colors",children:[l.jsx(FF,{size:16})," Declarar en Peso de Monta"]})}),l.jsx("p",{className:"text-xs text-zinc-500 text-center px-4 mt-2",children:'Si el animal tiene el peso y la edad adecuados, esto lo marcará como "En Servicio".'})]})]})})},gP=({animal:t,onConfirm:e,onCancel:n})=>{const[r,i]=N.useState("Venta"),[s,a]=N.useState(new Date().toISOString().split("T")[0]),[o,c]=N.useState(""),[u,d]=N.useState(""),[f,h]=N.useState("Cría"),[p,g]=N.useState(""),[m,y]=N.useState(),[x,w]=N.useState(""),_=["Baja producción","Bajo índice de crecimiento","Inflamación articular","Linfadenitis caseosa","Sospecha de otras enfermedades"],A=()=>{const E={reason:r,date:s,salePrice:r==="Venta"&&parseFloat(o)||void 0,saleBuyer:r==="Venta"&&u||void 0,salePurpose:r==="Venta"?f:void 0,deathReason:r==="Muerte"&&p||void 0,cullReason:r==="Descarte"&&m||void 0,cullReasonDetails:r==="Descarte"&&m==="Sospecha de otras enfermedades"?x:void 0};e(E)};return l.jsx(at,{isOpen:!0,onClose:n,title:`Dar de Baja a ${pt(t)}`,children:l.jsxs("div",{className:"space-y-4 text-white",children:[" ",l.jsxs("div",{className:"flex bg-zinc-800 rounded-xl p-1 w-full",children:[l.jsx("button",{onClick:()=>i("Venta"),className:`w-1/3 rounded-lg py-2 text-sm font-semibold transition-colors ${r==="Venta"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"Venta"}),l.jsx("button",{onClick:()=>i("Muerte"),className:`w-1/3 rounded-lg py-2 text-sm font-semibold transition-colors ${r==="Muerte"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"Muerte"}),l.jsx("button",{onClick:()=>i("Descarte"),className:`w-1/3 rounded-lg py-2 text-sm font-semibold transition-colors ${r==="Descarte"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"Descarte"})]}),l.jsxs("div",{className:"animate-fade-in",children:[" ",l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha del Evento"}),l.jsx("input",{type:"date",value:s,onChange:E=>a(E.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white",max:new Date().toISOString().split("T")[0],required:!0})]}),r==="Venta"&&l.jsxs("div",{className:"space-y-4 animate-fade-in",children:[l.jsx("input",{type:"number",step:"0.01",value:o,onChange:E=>c(E.target.value),placeholder:"Precio de Venta (Opcional)",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white"}),l.jsx("input",{type:"text",value:u,onChange:E=>d(E.target.value),placeholder:"Comprador (Opcional)",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white"}),l.jsxs("select",{value:f,onChange:E=>h(E.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white appearance-none",children:[" ",l.jsx("option",{value:"Cría",children:"Para Cría"}),l.jsx("option",{value:"Carne",children:"Para Carne"})]})]}),r==="Muerte"&&l.jsx("div",{className:"animate-fade-in",children:l.jsx("textarea",{value:p,onChange:E=>g(E.target.value),placeholder:"Causa / Descripción de la muerte...",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white",rows:3})}),r==="Descarte"&&l.jsxs("div",{className:"space-y-4 animate-fade-in",children:[l.jsxs("select",{value:m||"",onChange:E=>y(E.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white appearance-none",children:[" ",l.jsx("option",{value:"",children:"Seleccione una causa..."}),_.map(E=>l.jsx("option",{value:E,children:E},E))]}),m==="Sospecha de otras enfermedades"&&l.jsx("input",{type:"text",value:x,onChange:E=>w(E.target.value),placeholder:"Especificar sospecha o síntomas...",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white"})]}),l.jsx("p",{className:"text-xs text-zinc-500 text-center pt-2",children:'El animal será movido a "Referencia". Esta acción no se puede deshacer fácilmente.'}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-brand-border",children:[l.jsx("button",{onClick:n,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg text-white",children:"Cancelar"}),l.jsx("button",{onClick:A,className:"px-5 py-2 bg-brand-red hover:bg-red-700 text-white font-bold rounded-lg",children:"Confirmar Baja"})]})]})})},vP=({animal:t,onSaveSuccess:e,onCancel:n})=>{const{fathers:r,addFather:i,addParturition:s}=rt(),[a,o]=N.useState(new Date().toISOString().split("T")[0]),[c,u]=N.useState(""),[d,f]=N.useState(!0),[h,p]=N.useState(!1),[g,m]=N.useState(null),[y,x]=N.useState(!1),w=async A=>{if(A.preventDefault(),!c){m({type:"error",text:"Debe seleccionar el padre (semental)."});return}p(!0),m(null);try{await s({motherId:t.id,parturitionDate:a,sireId:c,parturitionType:"Simple",offspringCount:0,liveOffspring:[],parturitionOutcome:"Aborto",inducedLactation:d}),m({type:"success",text:"Aborto registrado con éxito."}),setTimeout(e,1500)}catch(E){m({type:"error",text:E.message||"No se pudo registrar el aborto."}),p(!1)}},_=async A=>{try{await i(A),u(A.id),x(!1)}catch(E){console.error("Error saving new father:",E),m({type:"error",text:E.message||"No se pudo guardar el nuevo padre."})}};return l.jsxs(l.Fragment,{children:[l.jsx(at,{isOpen:!y,onClose:n,title:`Registrar Aborto: ${pt(t)}`,children:l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha del Aborto"}),l.jsx("input",{type:"date",value:a,onChange:A=>o(A.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white",required:!0,max:new Date().toISOString().split("T")[0]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Padre (Semental Involucrado)"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{value:c,onChange:A=>u(A.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white appearance-none",required:!0,children:[l.jsx("option",{value:"",children:"Seleccionar Padre..."}),r.map(A=>l.jsx("option",{value:A.id,children:pt(A)},A.id))]}),l.jsx("button",{type:"button",onClick:()=>x(!0),className:"flex-shrink-0 p-3 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",title:"Añadir Nuevo Padre de Referencia",children:l.jsx(ir,{size:24})})]})]}),l.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-zinc-700 flex items-center justify-between",children:[l.jsx("label",{htmlFor:"inducedLactation",className:"text-sm font-medium text-zinc-300",children:"¿Se iniciará lactancia post-aborto?"}),l.jsx("input",{id:"inducedLactation",type:"checkbox",checked:d,onChange:A=>f(A.target.checked),className:"form-checkbox h-5 w-5 bg-zinc-700 border-zinc-600 rounded text-brand-orange focus:ring-brand-orange focus:ring-offset-0"})]}),l.jsx("p",{className:"text-xs text-zinc-500 text-center px-4",children:'Marcar esta opción iniciará una lactancia "atípica" para poder registrar los pesajes.'}),g&&l.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${g.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[g.type==="success"?l.jsx(ri,{size:18}):l.jsx($t,{size:18}),l.jsx("span",{children:g.text})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-brand-border",children:[l.jsx("button",{type:"button",onClick:n,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg text-white",children:"Cancelar"}),l.jsxs("button",{type:"submit",disabled:h,className:"px-5 py-2 bg-brand-red hover:bg-red-700 text-white font-bold rounded-lg disabled:opacity-50",children:[h?"Guardando...":"Confirmar Aborto"," "]})]})]})}),l.jsx(rP,{isOpen:y,onClose:()=>x(!1),onSave:_})]})},bx=({animalId:t,weightType:e,onSaveSuccess:n,onCancel:r,sessionDate:i})=>{const{addBodyWeighing:s,addWeighing:a}=rt(),[o,c]=N.useState(i||new Date().toISOString().split("T")[0]),[u,d]=N.useState(""),[f,h]=N.useState(!1),[p,g]=N.useState(null);N.useEffect(()=>{i&&c(i)},[i]);const m=async y=>{y.preventDefault(),g(null),h(!0);const x=parseFloat(u);if(isNaN(x)||x<=0){g({type:"error",text:"Por favor, introduce un peso válido."}),h(!1);return}if(e==="corporal"&&x>150){g({type:"error",text:"El peso corporal parece irracionalmente alto."}),h(!1);return}if(e==="leche"&&x>8.5){g({type:"error",text:"La producción de leche parece irracionalmente alta."}),h(!1);return}try{e==="corporal"?await s({animalId:t,date:o,kg:x}):await a({goatId:t,date:o,kg:x}),g({type:"success",text:`Pesaje de ${t} guardado con éxito.`}),setTimeout(()=>{n()},1500)}catch(w){g({type:"error",text:w.message||"No se pudo guardar el pesaje."}),h(!1)}};return l.jsxs("form",{onSubmit:m,className:"space-y-4",children:[l.jsxs("p",{className:"text-sm text-zinc-400",children:["Registrando pesaje ",e==="corporal"?"corporal":"lechero"," para el animal ",l.jsx("span",{className:"font-bold text-white",children:t}),"."]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"weighingDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha del Pesaje"}),l.jsx("input",{id:"weighingDate",type:"date",value:o,onChange:y=>c(y.target.value),disabled:!!i,className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl text-lg disabled:opacity-70 disabled:bg-zinc-700",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"weighingKg",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Peso (Kg)"}),l.jsx("input",{id:"weighingKg",type:"number",step:"0.1",value:u,onChange:y=>d(y.target.value),placeholder:"Ej: 3.5",autoFocus:!0,className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl text-lg",required:!0})]}),p&&l.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${p.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[p.type==="success"?l.jsx(ri,{size:18}):l.jsx($t,{size:18}),l.jsx("span",{children:p.text})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:r,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:f,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:f?"Guardando...":"Guardar Pesaje"})]})]})},UU=({weightType:t,animalsToWeigh:e,onSaveSuccess:n,onCancel:r})=>{const{addWeighing:i,addBodyWeighing:s,parturitions:a,startDryingProcess:o,setLactationAsDry:c}=rt(),[u,d]=N.useState(new Date().toISOString().split("T")[0]),[f,h]=N.useState({}),[p,g]=N.useState(!1),[m,y]=N.useState(null),[x,w]=N.useState(null),_=(P,I)=>{h(M=>({...M,[P]:I}))},A=N.useMemo(()=>Object.values(f).filter(P=>P.trim()!==""&&!isNaN(parseFloat(P))).length,[f]),E=N.useMemo(()=>{const P=new Map;if(t==="leche"){const I=new Set(e.map(M=>M.id));a.filter(M=>I.has(M.goatId)&&(M.status==="activa"||M.status==="en-secado")).forEach(M=>{const F=P.get(M.goatId);(!F||new Date(M.parturitionDate)>new Date(F.parturitionDate))&&P.set(M.goatId,M)})}return P},[a,e,t]),C=async P=>{const I=E.get(P);if(!(!I||I.status!=="activa")){y(P),w(null);try{await o(I.id),E.set(P,{...I,status:"en-secado"})}catch(M){w({type:"error",text:`Error al secar ${P}: ${M.message}`})}finally{y(null)}}},j=async P=>{const I=E.get(P);if(!(!I||I.status==="seca"||I.status==="finalizada")){y(P),w(null);try{await c(I.id),E.set(P,{...I,status:"seca"})}catch(M){w({type:"error",text:`Error al secar ${P}: ${M.message}`})}finally{y(null)}}},T=async P=>{P.preventDefault(),w(null),g(!0);const I=Object.entries(f).map(([M,F])=>({animalId:M,kg:parseFloat(F)})).filter(M=>!isNaN(M.kg)&&M.kg>0);if(I.length===0){w({type:"error",text:"No se han introducido pesos válidos."}),g(!1);return}try{const M=I.map(F=>t==="leche"?i({goatId:F.animalId,kg:F.kg,date:u}):s({animalId:F.animalId,kg:F.kg,date:u}));await Promise.all(M),w({type:"success",text:`${I.length} pesajes guardados con éxito.`}),setTimeout(()=>{n()},1500)}catch(M){w({type:"error",text:"Ocurrió un error al guardar los datos."}),g(!1),console.error("Error en escritura por lote de pesajes:",M)}};return l.jsxs("form",{onSubmit:T,className:"flex flex-col h-full",children:[l.jsxs("div",{className:"flex-shrink-0 space-y-4 p-4 border-b border-brand-border",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:t==="leche"?"Sesión de Ordeño":"Sesión de Pesaje Corporal"}),l.jsx("input",{type:"date",value:u,onChange:P=>d(P.target.value),className:"bg-zinc-800 text-white p-2 rounded-lg text-sm"})]}),l.jsxs("p",{className:"text-sm text-zinc-400",children:["Registrando ",A," / ",e.length," animales."]})]}),l.jsx("div",{className:"flex-grow overflow-y-auto p-4 space-y-2",children:e.map(P=>{if(t==="corporal")return l.jsxs("div",{className:"grid grid-cols-2 items-center gap-4 p-2 bg-black/20 rounded-lg",children:[l.jsx("label",{htmlFor:`weight-${P.id}`,className:"font-semibold text-white truncate",children:P.id}),l.jsx("input",{id:`weight-${P.id}`,type:"number",step:"0.1",value:f[P.id]||"",onChange:F=>_(P.id,F.target.value),placeholder:"Kg",className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-center"})]},P.id);const I=E.get(P.id),M=m===P.id;return l.jsxs("div",{className:"grid grid-cols-3 items-center gap-2 p-2 bg-black/20 rounded-lg",children:[l.jsx("label",{htmlFor:`weight-${P.id}`,className:"font-semibold text-white truncate col-span-1",children:P.id}),l.jsx("input",{id:`weight-${P.id}`,type:"number",step:"0.1",value:f[P.id]||"",onChange:F=>_(P.id,F.target.value),placeholder:"Kg",disabled:!I||I.status==="seca"||p,className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-center col-span-1 disabled:opacity-50"}),l.jsx("div",{className:"col-span-1 flex items-center justify-end gap-1",children:M?l.jsx(ug,{className:"animate-spin text-zinc-400",size:20}):l.jsxs(l.Fragment,{children:[l.jsx("button",{type:"button",onClick:()=>C(P.id),disabled:!I||I.status!=="activa"||p,title:"Iniciar Secado",className:"p-2 bg-blue-600/20 text-blue-300 rounded-lg hover:bg-blue-600/40 disabled:opacity-30 disabled:cursor-not-allowed",children:l.jsx(ed,{size:16})}),l.jsx("button",{type:"button",onClick:()=>j(P.id),disabled:!I||I.status==="seca"||I.status==="finalizada"||p,title:"Declarar Seca",className:"p-2 bg-gray-600/20 text-gray-300 rounded-lg hover:bg-gray-600/40 disabled:opacity-30 disabled:cursor-not-allowed",children:l.jsx(va,{size:16})})]})})]},P.id)})}),l.jsxs("div",{className:"flex-shrink-0 p-4 border-t border-brand-border bg-ios-modal-bg",children:[x&&l.jsxs("div",{className:`mb-3 flex items-center space-x-2 p-3 rounded-lg text-sm ${x.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[x.type==="success"?l.jsx(ri,{size:18}):l.jsx($t,{size:18}),l.jsx("span",{children:x.text})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:r,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsxs("button",{type:"submit",disabled:p||A===0||m!==null,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50 flex items-center gap-2",children:[p?l.jsx(ug,{size:18,className:"animate-spin"}):l.jsx(zh,{size:18}),"IT'S               Guardar ",A>0?`(${A})`:""]})]})]})]})},WU=({weightType:t,onBack:e,onAnimalsSelected:n})=>{const{animals:r,parturitions:i,serviceRecords:s,breedingSeasons:a,sireLots:o}=rt(),[c,u]=N.useState(!0),d=`Nueva Sesión de Peso ${t==="corporal"?"Corporal":"Lechero"}`,f=p=>{const g=r.filter(m=>p.includes(m.id));n(p,g),u(!1)},h=()=>{u(!1),e()};return l.jsx(b1,{isOpen:c,onClose:h,onSelect:f,animals:r,parturitions:i,serviceRecords:s,breedingSeasons:a,sireLots:o,title:d,sessionType:t})},HMe=`
  .rdp {
    --rdp-cell-size: 40px; /* Size of day cells */
    --rdp-accent-color: #FF9500; /* Orange accent */
    --rdp-background-color: transparent; /* Transparent background */
    --rdp-accent-color-dark: #FF9500;
    --rdp-background-color-dark: transparent;
    --rdp-outline: 2px solid var(--rdp-accent-color); /* Outline for focused day */
    --rdp-border-radius: 12px; /* Rounded corners */
    color: #FFF; /* Default text color */
    margin: 1em auto; /* Centering */
  }
  .rdp-caption_label { color: #FFF; font-weight: bold; } /* Month/Year label */
  .rdp-nav_button { color: #FF9500; } /* Navigation arrows */
  .rdp-head_cell { color: #8e8e93; font-size: 0.8em; } /* Weekday names */
  .rdp-day { color: #FFF; } /* Day numbers */
  .rdp-day_today { font-weight: bold; color: #FF9500; } /* Today's date */
  .rdp-day_selected { background-color: var(--rdp-accent-color); color: #000; font-weight: bold; } /* Selected day */
  .rdp-day_disabled { color: #505054; } /* Disabled days */
  .rdp-day_outside { color: #505054; } /* Days outside current month */
  .rdp-caption_dropdowns { display: flex; gap: 10px; } /* Style dropdowns if used */
  .rdp-dropdown {
      background-color: #333; /* Dark background for dropdown */
      border: 1px solid #555;
      color: #FFF;
      padding: 4px 8px;
      border-radius: 6px;
  }
`,yP=({isOpen:t,onClose:e,onSave:n,animal:r})=>{if(!t)return null;const i=s=>{s&&n(s)};return l.jsxs(at,{isOpen:t,onClose:e,title:`Registrar Servicio para ${pt(r)}`,children:[l.jsx("style",{children:HMe}),l.jsx("div",{className:"flex justify-center pb-4",children:l.jsx(np,{mode:"single",onSelect:i,defaultMonth:new Date,locale:x1,disabled:{after:new Date},captionLayout:"dropdown-buttons",fromYear:new Date().getFullYear()-1,toYear:new Date().getFullYear()})})]})},KMe=({animal:t,isSelected:e,onSelect:n})=>l.jsx("div",{onClick:()=>n(t.id),className:`w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border flex justify-between items-center transition-all cursor-pointer min-h-[96px] ${e?"border-brand-orange ring-2 ring-brand-orange/50":"border-brand-border"}`,children:l.jsxs("div",{className:"flex items-center gap-4",children:[e?l.jsx(uT,{className:"text-brand-orange flex-shrink-0",size:24}):l.jsx(dT,{className:"text-zinc-500 flex-shrink-0",size:24}),l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:pt(t)}),l.jsxs("p",{className:"text-sm text-zinc-400",children:[t.sex," | ",t.formattedAge]})]})]})});function qMe({lotName:t,onBack:e,navigateTo:n}){const{animals:r,parturitions:i,serviceRecords:s,breedingSeasons:a,sireLots:o,updateAnimal:c,addServiceRecord:u,startDryingProcess:d,setLactationAsDry:f}=rt(),[h,p]=N.useState(!1),[g,m]=N.useState(!1),[y,x]=N.useState(new Set),[w,_]=N.useState(!1),[A,E]=N.useState(null),[C,j]=N.useState(!1),[T,P]=N.useState(null),[I,M]=N.useState(null),[F,R]=N.useState([]),[H,X]=N.useState("corporal"),W=N.useMemo(()=>r.filter(te=>(te.location||"Sin Asignar")===t&&!te.isReference).sort((te,Te)=>te.id.localeCompare(Te.id)).map(te=>({...te,formattedAge:wa(te.birthDate),statusObjects:gU(te,i,s,o,a)})),[r,t,i,s,o,a]),U=N.useRef(null),$=bU({count:W.length,getScrollElement:()=>U.current,estimateSize:()=>104,overscan:5}),Y=te=>{x(Te=>{const ot=new Set(Te);return ot.has(te)?ot.delete(te):ot.add(te),ot})},Q=async()=>{const te=Array.from(y).map(Te=>c(Te,{location:""}));try{await Promise.all(te),m(!1),x(new Set)}catch(Te){console.error("Error al quitar animales:",Te)}},ce=async te=>{if(!t)return;const Te=te.map(ot=>c(ot,{location:t}));await Promise.all(Te),p(!1)},ie=te=>{if(!te)return[];const Te=[];return te.sex==="Hembra"&&(Te.push({label:"Declarar Parto",icon:ua,onClick:()=>{j(!1),P("parturition")}}),Te.push({label:"Declarar Aborto",icon:bv,onClick:()=>{j(!1),P("abortion")},color:"text-yellow-400"}),Te.push({label:"Acciones de Leche",icon:Xl,onClick:()=>{j(!1),P("milkWeighingAction")}}),te.sireLotId&&Te.push({label:"Registrar Servicio",icon:gw,onClick:()=>{j(!1),P("service")},color:"text-pink-400"})),Te.push({label:"Acciones de Peso",icon:sc,onClick:()=>{j(!1),P("bodyWeighingAction")}}),Te.push({label:"Dar de Baja",icon:va,onClick:()=>{j(!1),P("decommission")},color:"text-brand-red"}),Te},oe=te=>{E(te),j(!0)},ve=()=>{P(null),E(null),M(null),R([])},je=async te=>{if(!A)return;const Te={status:te.reason,isReference:!0,endDate:te.date};te.reason==="Venta"&&Object.assign(Te,{salePrice:te.salePrice,saleBuyer:te.saleBuyer,salePurpose:te.salePurpose}),te.reason==="Muerte"&&(Te.deathReason=te.deathReason),te.reason==="Descarte"&&Object.assign(Te,{cullReason:te.cullReason,cullReasonDetails:te.cullReasonDetails}),await c(A.id,Te),ve()},Se=(te,Te)=>{M(te),P(Te==="leche"?"logSimpleMilk":"logSimpleBody")},Me=te=>{X(te),P(te==="leche"?"newMilkSession":"newBodySession")},Qe=async()=>{A&&(await c(A.id,{reproductiveStatus:"En Servicio"}),ve())},me=(te,Te)=>{R(Te),P("bulkWeighing")},Ye=()=>{ve()},Xe=async te=>{if(!A||!A.sireLotId){console.error("Missing animal or sireLotId."),ve();return}await u({sireLotId:A.sireLotId,femaleId:A.id,serviceDate:te.toISOString().split("T")[0]}),ve()};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{ref:U,className:"w-full max-w-2xl mx-auto space-y-4 pb-4 animate-fade-in",style:{height:`calc(100vh - 64px - 65px - ${g&&y.size>0?"80px":"0px"})`,overflowY:"auto"},children:[l.jsxs("header",{className:"flex items-center justify-between pt-8 pb-4 px-4 sticky top-0 bg-brand-dark/80 backdrop-blur-lg z-10 border-b border-brand-border",children:[l.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(ar,{size:24})}),l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:t}),l.jsxs("p",{className:"text-lg text-zinc-400",children:[W.length," ",W.length===1?"animal":"animales"]})]}),g?l.jsx("button",{onClick:()=>{m(!1),x(new Set)},className:"text-brand-orange font-semibold px-2 py-1",children:"Listo"}):l.jsx("button",{onClick:()=>m(!0),className:"p-2 -mr-2 text-zinc-400 hover:text-white",children:l.jsx(ac,{size:20})})]}),!g&&l.jsx("div",{className:"px-4 pt-4",children:l.jsxs("button",{onClick:()=>p(!0),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-4 px-4 rounded-xl transition-colors text-lg",children:[l.jsx(ir,{size:20})," Añadir Animales"]})}),l.jsx("div",{className:"pt-4",style:{height:"auto",position:"relative"},children:W.length>0?l.jsx("div",{style:{height:`${$.getTotalSize()}px`,width:"100%",position:"relative"},children:$.getVirtualItems().map(te=>{const Te=W[te.index];return l.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${te.size}px`,transform:`translateY(${te.start}px)`,padding:"0 1rem 0.5rem 1rem"},children:g?l.jsx(KMe,{animal:Te,isSelected:y.has(Te.id),onSelect:Y}):l.jsx(xU,{animal:Te,onSelect:ot=>n({name:"rebano-profile",animalId:ot}),onOpenActions:oe})},te.key)})}):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl mx-4",children:l.jsx("p",{className:"text-zinc-500",children:"Este lote está vacío."})})})]})," ",g&&y.size>0&&l.jsx("div",{className:"fixed bottom-16 left-0 right-0 bg-ios-modal-bg p-4 border-t border-brand-border animate-slide-up z-20",children:l.jsxs("div",{className:"max-w-2xl mx-auto flex gap-4",children:[l.jsxs("button",{onClick:Q,className:"flex-1 flex items-center justify-center gap-2 bg-brand-red text-white font-bold py-3 rounded-xl",children:[l.jsx(ya,{size:18})," Quitar del Lote"]}),l.jsxs("button",{onClick:()=>_(!0),className:"flex-1 flex items-center justify-center gap-2 bg-brand-blue text-white font-bold py-3 rounded-xl",children:[l.jsx(LF,{size:18})," Transferir"]})]})}),l.jsx(b1,{isOpen:h,onClose:()=>p(!1),onSelect:ce,animals:r,parturitions:i,serviceRecords:s,breedingSeasons:a,sireLots:o,title:`Añadir animales a: ${t}`}),l.jsx(yDe,{isOpen:w,onClose:()=>{_(!1),m(!1),x(new Set)},animalsToTransfer:Array.from(y),fromLot:t}),l.jsx(Mu,{isOpen:C,onClose:()=>j(!1),title:`Acciones para ${pt(A)}`,actions:ie(A)}),A&&l.jsxs(l.Fragment,{children:[T==="parturition"&&l.jsx(cd,{isOpen:!0,onClose:ve,motherId:A.id}),T==="abortion"&&l.jsx(vP,{animal:A,onCancel:ve,onSaveSuccess:ve}),T==="decommission"&&l.jsx(gP,{animal:A,onCancel:ve,onConfirm:je}),T==="service"&&l.jsx(yP,{isOpen:!0,onClose:ve,onSave:Xe,animal:A}),T==="milkWeighingAction"&&l.jsx(VU,{isOpen:!0,animal:A,onClose:ve,onLogToSession:te=>Se(te,"leche"),onStartNewSession:()=>Me("leche"),onStartDrying:d,onSetDry:f}),T==="bodyWeighingAction"&&l.jsx(BU,{isOpen:!0,animal:A,onClose:ve,onLogToSession:te=>Se(te,"corporal"),onStartNewSession:()=>Me("corporal"),onSetReadyForMating:Qe}),T==="logSimpleMilk"&&I&&l.jsx(at,{isOpen:!0,onClose:ve,title:`Añadir Pesaje Leche: ${pt(A)}`,children:l.jsx(bx,{animalId:A.id,weightType:"leche",onSaveSuccess:ve,onCancel:ve,sessionDate:I})}),T==="logSimpleBody"&&I&&l.jsx(at,{isOpen:!0,onClose:ve,title:`Añadir Peso Corporal: ${pt(A)}`,children:l.jsx(bx,{animalId:A.id,weightType:"corporal",onSaveSuccess:ve,onCancel:ve,sessionDate:I})}),(T==="newMilkSession"||T==="newBodySession")&&l.jsx(WU,{weightType:H,onBack:ve,onAnimalsSelected:me}),T==="bulkWeighing"&&l.jsx(at,{isOpen:!0,onClose:ve,title:`Carga Masiva - ${H==="leche"?"Leche":"Corporal"}`,size:"fullscreen",children:l.jsx(UU,{weightType:H,animalsToWeigh:F,onSaveSuccess:Ye,onCancel:ve})})]})]})}const GMe=({activeFilter:t,setActiveFilter:e})=>l.jsxs("div",{className:"flex bg-zinc-800 rounded-xl p-1 w-full",children:[l.jsx("button",{onClick:()=>e("Activo"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t==="Activo"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"Activos"}),l.jsx("button",{onClick:()=>e("Referencia"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t==="Referencia"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"De Referencia"})]}),YMe=({activeFilter:t,setFilter:e})=>{const n=[{key:"all",label:"Todos"},{key:"Venta",label:"Vendidos"},{key:"Muerte",label:"Muertos"},{key:"Descarte",label:"Descartados"}];return l.jsxs("div",{className:"p-3 bg-black/20 rounded-lg",children:[l.jsx("label",{className:"block text-xs font-medium text-zinc-400 mb-2",children:"Filtrar por estado:"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(r=>l.jsx("button",{onClick:()=>e(r.key),className:`px-3 py-1 text-xs font-semibold rounded-full transition-colors ${t===r.key?"bg-brand-blue text-white":"bg-zinc-700 text-zinc-300"}`,children:r.label},r.key))})]})},a3=({isOpen:t,onClose:e,onSelect:n,animals:r,title:i,filterSex:s})=>{const[a,o]=N.useState(""),[c,u]=N.useState("Activo"),[d,f]=N.useState("all"),h=m=>{u(m),f("all")},p=N.useMemo(()=>r.filter(m=>{if(s&&m.sex&&m.sex!==s)return!1;const y=m.isReference||typeof m.status>"u";return c==="Referencia"?y?d!=="all"?m.status===d:!0:!1:!y}).filter(m=>{if(!a)return!0;const y=a.toLowerCase();return m.id.toLowerCase().includes(y)||m.name&&m.name.toLowerCase().includes(y)}),[r,a,c,d,s]),g=m=>{n(m),o("")};return l.jsx(at,{isOpen:t,onClose:e,title:i,children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx(Iu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500"}),l.jsx("input",{type:"search",placeholder:"Buscar ID o Nombre...",value:a,onChange:m=>o(m.target.value),className:"w-full bg-zinc-800 border border-zinc-700 rounded-xl pl-10 pr-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-orange"})]}),l.jsx(GMe,{activeFilter:c,setActiveFilter:h}),c==="Referencia"&&l.jsx("div",{className:"animate-fade-in",children:l.jsx(YMe,{activeFilter:d,setFilter:f})}),l.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2 pr-2",children:p.length>0?p.map(m=>l.jsxs("button",{onClick:()=>g(m.id),className:"w-full text-left p-3 bg-zinc-800/50 hover:bg-zinc-700 rounded-lg transition-colors",children:[l.jsx("p",{className:"font-bold text-white",children:pt(m)}),l.jsxs("p",{className:"text-xs text-zinc-400",children:[m.sex?`${m.sex} | `:"",m.birthDate&&m.birthDate!=="N/A"?`${wa(m.birthDate)} | `:"","Lote: ",m.location||"Sin Asignar"]})]},m.id)):l.jsx("p",{className:"text-center text-zinc-500 py-8",children:"No se encontraron animales con estos filtros."})})]})})},HU=(t,e)=>{if(!t||!e)return"Indefinido";const n=new Date,r=new Date(t+"T00:00:00");if(isNaN(r.getTime()))return"Indefinido";const i=(n.getTime()-r.getTime())/(1e3*60*60*24);return e==="Hembra"?i<=60?"Cabrita":i<=365?"Cabritona":"Cabra Adulta":i<=60?"Cabrito":i<=365?"Macho de Levante":"Macho Cabrío"},ff=q.forwardRef(({className:t,...e},n)=>l.jsx("input",{ref:n,...e,className:`w-full bg-brand-glass border border-brand-border rounded-xl p-3 text-white placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-brand-orange disabled:opacity-50 disabled:bg-brand-dark/50 ${t}`})),wS=q.forwardRef(({children:t,...e},n)=>l.jsxs("div",{className:"relative w-full",children:[l.jsx("select",{ref:n,...e,className:"w-full bg-brand-glass border border-brand-border rounded-xl p-3 text-white appearance-none focus:outline-none focus:ring-2 focus:ring-brand-orange",children:t}),l.jsx(ib,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500 pointer-events-none"})]})),Cf=({title:t,children:e})=>l.jsxs("div",{className:"bg-brand-glass rounded-2xl border border-brand-border p-4 space-y-4",children:[l.jsx("h2",{className:"text-zinc-400 font-semibold text-sm uppercase tracking-wide",children:t}),e]}),aj=({labelOn:t,labelOff:e,value:n,onChange:r})=>l.jsxs("div",{onClick:()=>r(!n),className:"w-full bg-brand-dark rounded-xl p-1 flex cursor-pointer",children:[l.jsx("span",{className:`w-1/2 text-center font-semibold p-2 rounded-lg transition-all ${n?"bg-zinc-700 text-white":"text-zinc-400"}`,children:t}),l.jsx("span",{className:`w-1/2 text-center font-semibold p-2 rounded-lg transition-all ${n?"text-zinc-400":"bg-zinc-700 text-white"}`,children:e})]}),QMe=({onSaveSuccess:t,onCancel:e})=>{const{addAnimal:n,animals:r,lots:i,fathers:s}=rt(),[a,o]=N.useState("Activo"),[c,u]=N.useState("Hembra"),[d,f]=N.useState(""),[h,p]=N.useState(""),[g,m]=N.useState(""),[y,x]=N.useState("MN"),[w,_]=N.useState(""),[A,E]=N.useState(null),[C,j]=N.useState(null),[T,P]=N.useState(""),[I,M]=N.useState(""),[F,R]=N.useState(!1),[H,X]=N.useState(""),[W,U]=N.useState(null),[$,Y]=N.useState(null),[Q,ce]=N.useState("Indefinido"),[ie,oe]=N.useState(!1),[ve,je]=N.useState(!1),[Se,Me]=N.useState(!1),[Qe,me]=N.useState(!1),[Ye,Xe]=N.useState(!1),[te,Te]=N.useState(null),ot=N.useMemo(()=>g?HU(g,c):"Indefinido",[g,c]),Ct=g?ot:Q;N.useEffect(()=>{M(vU(T))},[T]),N.useEffect(()=>{const He=r.find(Pe=>Pe.id===C),Zt=r.find(Pe=>Pe.id===A);if(He!=null&&He.racialComposition&&(Zt!=null&&Zt.racialComposition)){const Pe=hDe(He.racialComposition,Zt.racialComposition);P(Pe),R(!0)}else(!He||!Zt)&&R(!1)},[C,A,r]),N.useEffect(()=>{if(U(null),d&&a==="Activo"){const He=r.some(Zt=>Zt.id.toLowerCase()===d.toLowerCase());Y(He?`El ID "${d.toUpperCase()}" ya existe en el rebaño principal.`:null)}else Y(null)},[d,r,a]);const nt=N.useMemo(()=>i,[i]),st=N.useMemo(()=>r.filter(He=>He.sex==="Hembra"),[r]),Xt=N.useMemo(()=>st.map(He=>({...He,name:pt(He)})),[st]),Yn=N.useMemo(()=>r.filter(He=>He.sex==="Macho"&&!He.isReference),[r]),Mn=N.useMemo(()=>{const He=Yn.map(Pe=>({...Pe,name:pt(Pe)})),Zt=s.map(Pe=>({id:Pe.id,name:pt(Pe),sex:"Macho",status:"Activo",isReference:!0,birthDate:"N/A",lifecycleStage:"Macho Cabrío",location:"Referencia",reproductiveStatus:"No Aplica"}));return[...He,...Zt]},[Yn,s]),Ft=async He=>{if(He.preventDefault(),U(null),Y(null),a==="Activo"&&!d){U({type:"error",text:"El ID del animal es obligatorio para animales Activos."});return}if(d&&a==="Activo"&&r.some(qe=>qe.id.toLowerCase()===d.toLowerCase())){Y(`El ID "${d.toUpperCase()}" ya existe en el rebaño principal.`),U({type:"error",text:`El ID "${d.toUpperCase()}" ya existe.`});return}const Zt={id:d.toUpperCase()||`REF-${Date.now()}`,name:h||void 0,birthDate:g||"N/A",sex:c,isReference:a==="Referencia",status:"Activo",lifecycleStage:Ct,conceptionMethod:y||void 0,birthWeight:w?parseFloat(w):void 0,fatherId:A||void 0,motherId:C||void 0,racialComposition:T||void 0,breed:I||void 0,location:H||"",reproductiveStatus:c==="Hembra"?"Vacía":"No Aplica",createdAt:new Date().getTime(),lastWeighing:null};try{await n(Zt),U({type:"success",text:`Animal ${pt(Zt)} agregado con éxito.`}),setTimeout(t,1e3)}catch(Pe){U({type:"error",text:Pe.message||"No se pudo guardar el animal."}),console.error("Error al guardar animal:",Pe)}},or=He=>{te==="father"?E(He.id):te==="mother"&&j(He.id),Te(null)};return l.jsxs(l.Fragment,{children:[l.jsxs("form",{onSubmit:Ft,className:"w-full space-y-6",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:["ID Animal ",a==="Activo"?"(Obligatorio)":"(Opcional para Referencia)"]}),l.jsx("input",{type:"text",value:d,onClick:()=>me(!0),readOnly:!0,placeholder:a==="Activo"?"T047":"Opcional...",className:`w-full bg-brand-glass border rounded-xl p-4 text-white text-center text-3xl font-mono tracking-widest placeholder-zinc-700 focus:outline-none focus:ring-2 cursor-pointer ${$?"border-brand-red ring-brand-red":"border-brand-border focus:ring-brand-orange"}`,required:a==="Activo"}),$&&l.jsxs("p",{className:"mt-2 text-sm text-brand-red flex items-center justify-center gap-1",children:[l.jsx($t,{size:14})," ",$]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Nombre (Opcional)"}),l.jsx(ff,{type:"text",value:h,onChange:He=>p(He.target.value.toUpperCase()),placeholder:"Ej: PRINCESA"})]}),l.jsxs(Cf,{title:"Categoría",children:[l.jsx(aj,{labelOn:"Hembra",labelOff:"Macho",value:c==="Hembra",onChange:He=>u(He?"Hembra":"Macho")}),l.jsx(aj,{labelOn:"Activo",labelOff:"Referencia",value:a==="Activo",onChange:He=>{o(He?"Activo":"Referencia"),He||Y(null)}})]}),l.jsxs(Cf,{title:"Genética y Nacimiento",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Fecha de Nacimiento (Opcional)"}),l.jsxs("button",{type:"button",onClick:()=>oe(!0),className:"w-full bg-brand-glass border border-brand-border rounded-xl p-3 text-white flex justify-between items-center",children:[l.jsx("span",{className:g?"text-white":"text-zinc-500",children:g?new Date(g+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"}):"Seleccionar fecha..."}),l.jsx(fs,{className:"text-zinc-400",size:20})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Estado (Categoría Zootécnica)"}),g?l.jsx(ff,{type:"text",value:ot,readOnly:!0,disabled:!0}):l.jsxs(wS,{value:Q,onChange:He=>ce(He.target.value),children:[l.jsx("option",{value:"Indefinido",children:"Seleccionar Categoría..."}),l.jsx("option",{value:"Cabrita",children:"Cabrita"}),l.jsx("option",{value:"Cabritona",children:"Cabritona"}),l.jsx("option",{value:"Cabra Adulta",children:"Cabra Adulta"}),l.jsx("option",{value:"Cabrito",children:"Cabrito"}),l.jsx("option",{value:"Macho de Levante",children:"Macho de Levante"}),l.jsx("option",{value:"Macho Cabrío",children:"Macho Cabrío (Reproductor)"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs(wS,{value:y,onChange:He=>x(He.target.value),children:[l.jsx("option",{value:"MN",children:"Monta Natural (MN)"}),l.jsx("option",{value:"IA",children:"Inseminación Artificial (IA)"}),l.jsx("option",{value:"TE",children:"Transferencia de Embriones (TE)"}),l.jsx("option",{value:"",children:"Otro/Desconocido"})]}),l.jsx(ff,{type:"number",step:"0.1",value:w,onChange:He=>_(He.target.value),placeholder:"Peso al Nacer (Kg)"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Padre (Semental)"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{type:"button",onClick:()=>Me(!0),className:"w-full text-left bg-brand-glass border border-brand-border rounded-xl p-3 text-white placeholder-zinc-500 flex justify-between items-center",children:[l.jsx("span",{className:A?"text-white":"text-zinc-500",children:A?pt(Mn.find(He=>He.id===A))||A:"Seleccionar padre..."}),l.jsx(Iu,{size:18,className:"text-zinc-400"})]}),l.jsx("button",{type:"button",onClick:()=>Te("father"),className:"p-3 bg-brand-glass border border-brand-border rounded-xl text-brand-orange hover:bg-brand-orange/20 flex-shrink-0",children:l.jsx(ir,{size:20})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Madre"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{type:"button",onClick:()=>je(!0),className:"w-full text-left bg-brand-glass border border-brand-border rounded-xl p-3 text-white placeholder-zinc-500 flex justify-between items-center",children:[l.jsx("span",{className:C?"text-white":"text-zinc-500",children:C?pt(Xt.find(He=>He.id===C))||C:"Seleccionar madre..."}),l.jsx(Iu,{size:18,className:"text-zinc-400"})]}),l.jsx("button",{type:"button",onClick:()=>Te("mother"),className:"p-3 bg-brand-glass border border-brand-border rounded-xl text-brand-orange hover:bg-brand-orange/20 flex-shrink-0",children:l.jsx(ir,{size:20})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Composición Racial (Ej: 50%A 50%S)"}),l.jsx("input",{type:"text",value:T,onClick:()=>{F||Xe(!0)},readOnly:!0,placeholder:"100%A ó 75%A 25%AGC",disabled:F,className:`w-full bg-brand-glass border border-brand-border rounded-xl p-3 text-white placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-brand-orange ${F?"opacity-50 bg-brand-dark/50":"cursor-pointer"}`})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Raza (Auto-calculada)"}),l.jsx(ff,{type:"text",value:I,readOnly:!0,disabled:!0,placeholder:"Ej: Mestiza Alpina"})]})]}),l.jsxs(Cf,{title:"Manejo",children:[l.jsxs(wS,{value:H,onChange:He=>X(He.target.value),children:[l.jsx("option",{value:"",children:"Ubicación / Lote (Opcional)..."}),nt.map(He=>l.jsx("option",{value:He.name,children:He.name},He.id))]}),l.jsx("p",{className:"text-xs text-zinc-500 text-center px-4",children:'Si no se asigna un lote, se podrá encontrar en el filtro "Última Carga".'})]}),l.jsxs("div",{className:"space-y-3 pt-4",children:[W&&!$&&l.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${W.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[" ",W.type==="success"?l.jsx(ri,{size:18}):l.jsx($t,{size:18})," ",l.jsx("span",{children:W.text})," "]}),l.jsx("button",{type:"submit",disabled:!!$,className:`w-full text-white font-bold py-4 rounded-xl text-lg ${$?"bg-zinc-600 cursor-not-allowed":"bg-brand-green hover:bg-green-600"}`,children:"Guardar Animal"}),l.jsx("button",{type:"button",onClick:e,className:"w-full bg-zinc-700 hover:bg-zinc-600 text-white font-semibold py-3 rounded-xl text-lg",children:"Cancelar"})]})]}),ie&&l.jsx(KU,{onClose:()=>oe(!1),onSelectDate:He=>{He&&m(He.toISOString().split("T")[0]),oe(!1)},currentValue:g?new Date(g+"T00:00:00"):new Date}),l.jsx(a3,{isOpen:ve,onClose:()=>je(!1),onSelect:He=>{j(He),je(!1)},animals:Xt,title:"Seleccionar Madre",filterSex:"Hembra"}),l.jsx(a3,{isOpen:Se,onClose:()=>Me(!1),onSelect:He=>{E(He),Me(!1)},animals:Mn,title:"Seleccionar Padre",filterSex:"Macho"}),Qe&&l.jsx(qU,{onClose:()=>me(!1),onInput:He=>f(He.toUpperCase()),currentValue:d}),Ye&&l.jsx(GU,{onClose:()=>Xe(!1),onInput:P,currentValue:T}),te&&l.jsx(XMe,{type:te,onClose:()=>Te(null),onSave:or})]})},KU=({onClose:t,onSelectDate:e,currentValue:n})=>l.jsx("div",{className:"fixed inset-0 z-[100] bg-black/50 backdrop-blur-sm animate-fade-in",onClick:t,children:l.jsxs("div",{className:"fixed bottom-0 left-0 right-0 w-full bg-ios-modal-bg rounded-t-2xl p-4 shadow-lg animate-slide-up",onClick:r=>r.stopPropagation(),style:{paddingBottom:"env(safe-area-inset-bottom, 1rem)"},children:[l.jsx("div",{onClick:t,className:"w-16 h-1.5 bg-zinc-700 rounded-full mx-auto mb-4 cursor-pointer"}),l.jsx("div",{className:"flex justify-center [&_.rdp]:bg-transparent [&_.rdp]:text-white [&_.rdp-caption_select]:bg-brand-glass [&_.rdp-caption_select]:border-brand-border [&_.rdp-caption_select]:text-white [&_.rdp-caption_select]:rounded-lg [&_.rdp-day_selected]:bg-brand-orange [&_.rdp-day_selected]:text-white [&_.rdp-day_today]:text-brand-orange [&_.rdp-nav_button]:text-zinc-400 [&_.rdp-head_cell]:text-zinc-500 [&_.rdp-day]:text-zinc-200 [&_.rdp-day_outside]:text-zinc-600",children:l.jsx(np,{mode:"single",selected:n,onSelect:e,captionLayout:"dropdown-buttons",fromYear:new Date().getFullYear()-20,toYear:new Date().getFullYear(),defaultMonth:n,locale:x1})})]})}),qU=({onClose:t,onInput:e,currentValue:n})=>{const r="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),i=["1","2","3","4","5","6","7","8","9","-","0","DEL"],s=o=>{if(o==="DEL"){a();return}o&&n.length<15&&e(n+o)},a=()=>{e(n.slice(0,-1))};return l.jsx("div",{className:"fixed inset-0 z-[100] bg-black/50",onClick:t,children:l.jsxs("div",{className:"fixed bottom-0 left-0 right-0 w-full bg-[#333333] p-2 space-y-2",onClick:o=>o.stopPropagation(),style:{paddingBottom:"env(safe-area-inset-bottom, 0.5rem)"},children:[l.jsxs("div",{className:"flex flex-nowrap space-x-1.5 overflow-x-auto py-2 alphabet-scroller",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[l.jsx("style",{children:".alphabet-scroller::-webkit-scrollbar { display: none; }"}),r.map(o=>l.jsx("button",{onClick:()=>s(o),className:"flex-shrink-0 w-10 h-10 bg-[#555555] text-white rounded-md text-lg font-medium active:bg-zinc-500",children:o},o))]}),l.jsx("div",{className:"grid grid-cols-3 gap-1.5",children:i.map(o=>l.jsx("button",{onClick:()=>s(o),className:"h-12 bg-[#555555] text-white rounded-md text-xl font-medium active:bg-zinc-500 flex items-center justify-center",children:o==="DEL"?l.jsx(PF,{size:20}):o},o))}),l.jsx("button",{onClick:t,className:"h-12 w-full bg-blue-600 text-white rounded-md text-lg font-semibold active:bg-blue-700",children:"Done"})]})})},GU=({onClose:t,onInput:e,currentValue:n})=>{const r="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),i=["1","2","3","4","5","6","7","8","9","%","0","DEL"],s=4,a=c=>{var m,y,x;if(c==="DEL"){o();return}if(n.length>=30)return;const u=n.split(" ").filter(w=>w!=="");let d=/[%A-Z]$/.test(n),f=n===""||n.endsWith(" ");if(u.length>=s&&f&&/\d/.test(c))return;let h=n;if(d&&/\d/.test(c))if(u.length<s)h+=" ";else return;if(c==="%"&&!/\d$/.test(h.slice(-1))&&!/[A-Z]$/.test(h.slice(-1))||c==="%"&&/%$/.test(h)||/[A-Z]/.test(c)&&!f&&!/\d$/.test(h.slice(-1))&&!/%$/.test(h.slice(-1))||/\d/.test(c)&&/[A-Z]$/.test(h))return;const p=((y=(m=h.split(" ").pop())==null?void 0:m.match(/\d+$/))==null?void 0:y[0])||"";if(!(c==="0"&&(f||/[%A-Z ]$/.test(h.slice(-1)))&&p.length===0)){if(c==="0"&&p==="0")return;/\d/.test(c)&&p==="0"&&(h=h.slice(0,-1))}const g=(x=(p+c).match(/\d+/))==null?void 0:x[0];g&&parseInt(g,10)>100||e(h+c)},o=()=>{e(n.slice(0,-1))};return l.jsx("div",{className:"fixed inset-0 z-[100] bg-black/50",onClick:t,children:l.jsxs("div",{className:"fixed bottom-0 left-0 right-0 w-full bg-[#333333] p-2 space-y-2",onClick:c=>c.stopPropagation(),style:{paddingBottom:"env(safe-area-inset-bottom, 0.5rem)"},children:[l.jsxs("div",{className:"flex flex-nowrap space-x-1.5 overflow-x-auto py-2 alphabet-scroller",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[l.jsx("style",{children:".alphabet-scroller::-webkit-scrollbar { display: none; }"}),r.map(c=>l.jsx("button",{onClick:()=>a(c),className:"flex-shrink-0 w-10 h-10 bg-[#555555] text-white rounded-md text-lg font-medium active:bg-zinc-500",children:c},c))]}),l.jsx("div",{className:"grid grid-cols-3 gap-1.5",children:i.map(c=>l.jsx("button",{onClick:()=>a(c),className:`h-12 bg-[#555555] text-white rounded-md text-xl font-medium active:bg-zinc-500 flex items-center justify-center ${c==="%"?"text-brand-orange":""}`,children:c==="DEL"?l.jsx(PF,{size:20}):c},c))}),l.jsx("button",{onClick:t,className:"h-12 w-full bg-blue-600 text-white rounded-md text-lg font-semibold active:bg-blue-700",children:"Done"})]})})},XMe=({type:t,onClose:e,onSave:n})=>{const{addAnimal:r,animals:i,fathers:s}=rt(),[a,o]=N.useState("Referencia"),[c,u]=N.useState(""),[d,f]=N.useState(""),[h,p]=N.useState(""),[g,m]=N.useState(""),[y,x]=N.useState(""),[w,_]=N.useState(null),[A,E]=N.useState(!1),[C,j]=N.useState(!1),[T,P]=N.useState(!1);N.useEffect(()=>{x(vU(g))},[g]);const I=async()=>{if(_(null),a==="Activo"&&!c){_("El ID es obligatorio si el estado es Activo.");return}const M=c.toUpperCase()||`REF-${Date.now()}`,F=new Set([...i.map(X=>X.id.toLowerCase()),...s.map(X=>X.id.toLowerCase())]);if(c&&F.has(M.toLowerCase())){_("Este ID ya existe en la base de datos (rebaño o referencias).");return}const R=t==="mother"?"Hembra":"Macho",H={id:M,name:d.toUpperCase()||void 0,birthDate:h||"N/A",sex:R,isReference:a==="Referencia",status:"Activo",lifecycleStage:h?HU(h,R):R==="Hembra"?"Cabra Adulta":"Macho Cabrío",racialComposition:g||void 0,breed:y||void 0,location:"Referencia",reproductiveStatus:R==="Hembra"?"Vacía":"No Aplica",createdAt:new Date().getTime(),lastWeighing:null};try{await r(H),n(H)}catch(X){_(X.message||"Error al guardar el animal."),console.error("Error saving quick parent:",X)}};return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 z-[60] bg-black/50 backdrop-blur-sm animate-fade-in flex items-center justify-center p-4",onClick:e,children:l.jsxs("div",{className:"w-full max-w-md bg-ios-modal-bg rounded-2xl shadow-lg animate-slide-up flex flex-col max-h-[85vh]",onClick:M=>M.stopPropagation(),children:[l.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between p-4 border-b border-brand-border",children:[l.jsx("div",{className:"w-10"}),l.jsxs("h2",{className:"text-lg font-semibold text-white",children:["Agregar ",t==="mother"?"Madre":"Padre"," Rápido"]}),l.jsx("button",{onClick:e,className:"p-2 -mr-2 text-zinc-400 hover:text-white rounded-full hover:bg-zinc-700/50",children:l.jsx(Za,{size:20})})]}),l.jsxs("div",{className:"p-4 space-y-4 overflow-y-auto",children:[l.jsx(Cf,{title:"Categoría",children:l.jsx(aj,{labelOn:"Activo",labelOff:"Referencia",value:a==="Activo",onChange:M=>o(M?"Activo":"Referencia")})}),l.jsxs(Cf,{title:"Identificación",children:[l.jsx("input",{type:"text",value:c,onClick:()=>E(!0),readOnly:!0,placeholder:a==="Activo"?"ID (Obligatorio)":"ID (Opcional)",className:"w-full bg-brand-glass border border-brand-border rounded-xl p-3 text-white placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-brand-orange cursor-pointer"}),l.jsx(ff,{value:d,onChange:M=>f(M.target.value.toUpperCase()),placeholder:"Nombre (Opcional)"}),l.jsxs("button",{type:"button",onClick:()=>j(!0),className:"w-full bg-brand-glass border border-brand-border rounded-xl p-3 text-left flex justify-between items-center",children:[l.jsx("span",{className:h?"text-white":"text-zinc-500",children:h?new Date(h+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"}):"Fecha de Nacimiento (Opcional)"}),l.jsx(fs,{className:"text-zinc-400",size:20})]})]}),l.jsxs(Cf,{title:"Raza",children:[l.jsx("input",{type:"text",value:g,onClick:()=>P(!0),readOnly:!0,placeholder:"Composición Racial (Opcional)",className:"w-full bg-brand-glass border border-brand-border rounded-xl p-3 text-white placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-brand-orange cursor-pointer"}),l.jsx(ff,{value:y,disabled:!0,readOnly:!0,placeholder:"Raza (Auto-calculada)"})]}),w&&l.jsx("p",{className:"text-sm text-brand-red text-center",children:w})]}),l.jsx("footer",{className:"p-4 border-t border-brand-border flex-shrink-0",children:l.jsxs("button",{onClick:I,className:"w-full bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 rounded-xl text-lg transition-colors",children:["Guardar ",t==="mother"?"Madre":"Padre"]})})]})}),A&&l.jsx(qU,{onClose:()=>E(!1),onInput:M=>u(M.toUpperCase()),currentValue:c}),C&&l.jsx(KU,{onClose:()=>j(!1),onSelectDate:M=>{M&&p(M.toISOString().split("T")[0]),j(!1)},currentValue:h?new Date(h+"T00:00:00"):new Date}),T&&l.jsx(GU,{onClose:()=>P(!1),onInput:m,currentValue:g})]})};function ZMe({onBack:t}){return l.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-md flex flex-col justify-end animate-fade-in",onClick:t,children:l.jsxs("div",{className:"bg-ios-modal-bg w-full max-w-4xl mx-auto h-[95vh] rounded-t-2xl flex flex-col animate-slide-up",onClick:e=>e.stopPropagation(),children:[l.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between p-4 border-b border-brand-border",children:[l.jsx("div",{className:"w-10"})," ",l.jsx("h1",{className:"text-xl font-bold tracking-tight text-white",children:"Ingresar Nuevo Animal"}),l.jsx("button",{onClick:t,className:"p-2 text-zinc-400 hover:text-white rounded-full hover:bg-zinc-700/50 transition-colors","aria-label":"Cerrar",children:l.jsx(Za,{size:24})})]}),l.jsx("main",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:l.jsx("div",{className:"max-w-2xl mx-auto",children:l.jsx(QMe,{onSaveSuccess:t,onCancel:t})})})]})})}const YU=(t,e)=>{const[n,r]=N.useState(""),i=N.useMemo(()=>n?t.filter(s=>e.some(a=>{const o=s[a];return typeof o=="string"||typeof o=="number"?o.toString().toLowerCase().includes(n.toLowerCase()):!1})):t,[t,n,e]);return{searchTerm:n,setSearchTerm:r,filteredItems:i}},JMe=({title:t,subtitle:e,searchTerm:n,setSearchTerm:r})=>{const[i,s]=N.useState(!1),a=N.useRef(null);N.useEffect(()=>{var c;i&&((c=a.current)==null||c.focus())},[i]);const o=()=>{r(""),s(!1)};return l.jsxs("header",{className:"text-center pt-4 pb-4 relative overflow-hidden",children:[l.jsxs("div",{className:`transition-transform duration-300 ${i?"-translate-y-20":"translate-y-0"}`,children:[l.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:t}),l.jsx("p",{className:"text-md text-zinc-400",children:e})]}),l.jsx("div",{className:`absolute inset-0 transition-transform duration-300 flex items-center pt-2 ${i?"translate-y-0":"translate-y-20"}`,children:l.jsx("input",{ref:a,type:"text",value:n,onChange:c=>r(c.target.value),placeholder:"Buscar por ID...",className:"w-full bg-zinc-800 text-white text-lg placeholder-zinc-500 p-3 rounded-xl border-2 border-transparent focus:border-amber-500 focus:ring-0 focus:outline-none"})}),l.jsx("div",{className:"absolute top-4 right-0 pt-1",children:l.jsx("button",{onClick:i?o:()=>s(!0),className:"p-2 text-zinc-400 hover:text-white transition-colors",children:i?l.jsx(Za,{size:22}):l.jsx(Iu,{size:22})})})]})},eRe=(t,e,n,r,i)=>{const s=[];if(!t)return[];if(t.status!=="Activo"){let o=t.status.toUpperCase();t.isReference&&["VENTA","MUERTE","DESCARTE"].includes(o),It[o]&&s.push(It[o])}if(s.length>0&&s.some(o=>["VENTA","MUERTE","DESCARTE","REFERENCE"].includes(o.key)))return Array.from(new Set(s.map(c=>c.key))).map(c=>It[c]).filter(Boolean);if(t.sex==="Hembra"){const o=e.filter(c=>c.goatId===t.id&&c.status!=="finalizada").sort((c,u)=>new Date(u.parturitionDate).getTime()-new Date(c.parturitionDate).getTime())[0];o&&(o.status==="activa"?s.push(It.MILKING):o.status==="en-secado"?s.push(It.DRYING_OFF):o.status==="seca"&&s.push(It.DRY))}if(t.reproductiveStatus==="Preñada"?s.push(It.PREGNANT):t.reproductiveStatus==="En Servicio"?n.some(c=>c.femaleId===t.id&&c.sireLotId===t.sireLotId)?s.push(It.IN_SERVICE_CONFIRMED):s.push(It.IN_SERVICE):(t.reproductiveStatus==="Vacía"||t.reproductiveStatus==="Post-Parto")&&s.push(It.EMPTY),t.sex==="Macho"){const o=i.filter(d=>d.status==="Activo"),c=new Set(o.map(d=>d.id));r.some(d=>d.sireId===t.id&&c.has(d.seasonId))&&s.push(It.SIRE_IN_SERVICE)}return Array.from(new Set(s.map(o=>o.key))).map(o=>It[o]).filter(Boolean)},tRe=({animal:t,onSelect:e,onOpenActions:n})=>{const r=lc(),i=N.useRef(!1),s=(a,o)=>{const c=o.offset.x,u=o.velocity.x;(c<-80/2||u<-500)&&n(t),r.start({x:0}),setTimeout(()=>{i.current=!1},100)};return l.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-brand-glass border border-brand-border min-h-[96px]",children:[l.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:l.jsxs("div",{className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[l.jsx(ir,{size:22}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Acciones"})]})}),l.jsx(Ln.div,{drag:"x",dragConstraints:{left:-80,right:0},dragElastic:.1,onDragStart:()=>{i.current=!0},onDragEnd:s,onTap:()=>{i.current||e(t.id)},animate:r,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg p-4 flex items-center min-h-[96px]",children:l.jsxs("div",{className:"flex justify-between items-center w-full",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-base text-white",children:pt(t)}),l.jsxs("div",{className:"text-sm text-zinc-400 mt-1 min-h-[1.25rem]",children:[l.jsxs("span",{children:[t.sex," | ",t.formattedAge," | Lote: ",t.location||"Sin Asignar"]}),t.sireName&&l.jsxs("span",{className:"block sm:inline sm:ml-2",children:["(Reproductor: ",t.sireName,")"]})]})]}),l.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[l.jsx(nP,{statuses:t.statusObjects}),l.jsx(Gn,{className:"text-zinc-600"})]})]})})]})},nRe=["Cabrita","Cabritona","Cabra","Cabrito","Macho de Levante","Macho Cabrío"],_S=({title:t,filters:e,activeFilter:n,onFilterChange:r})=>l.jsxs("div",{children:[t&&l.jsx("label",{className:"block text-sm font-semibold text-zinc-400 mb-2",children:t}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("button",{onClick:()=>r("ALL"),className:`px-3 py-1 text-xs font-semibold rounded-full transition-colors ${n==="all"||n==="ALL"?"bg-zinc-600 text-white":"bg-zinc-800/80 text-zinc-300"}`,children:"Todos"}),e.map(i=>{const s=i.Icon||null;return l.jsxs("button",{onClick:()=>r(i.key),className:`flex items-center gap-1.5 px-3 py-1 text-xs font-semibold rounded-full transition-colors ${n===i.key?"bg-brand-green text-white":"bg-zinc-800/80 text-zinc-300"}`,children:[s&&l.jsx(s,{size:14}),i.label]},i.key)})]})]});function rRe({navigateTo:t,locationFilter:e}){const{animals:n,parturitions:r,serviceRecords:i,breedingSeasons:s,sireLots:a,isLoading:o,updateAnimal:c,startDryingProcess:u,setLactationAsDry:d,addServiceRecord:f,fathers:h}=rt(),[p,g]=N.useState(null),[m,y]=N.useState(!1),[x,w]=N.useState(null),[_,A]=N.useState(null),[E,C]=N.useState([]),[j,T]=N.useState("corporal"),[P,I]=N.useState("Activos"),[M,F]=N.useState("all"),[R,H]=N.useState("Todos"),[X,W]=N.useState(!1),[U,$]=N.useState("ALL"),[Y,Q]=N.useState("ALL"),[ce,ie]=N.useState(!1),[oe,ve]=N.useState(!1),je=N.useMemo(()=>{const Pe=new Map(a.map(yt=>[yt.id,yt])),qe=new Map(h.map(yt=>[yt.id,yt]));return n.map(yt=>{let Be;if(yt.sireLotId){const bt=Pe.get(yt.sireLotId);if(bt){const ft=qe.get(bt.sireId);Be=ft==null?void 0:ft.name}}return{...yt,statusObjects:eRe(yt,r,i,a,s),formattedAge:wa(yt.birthDate),zootecnicCategory:od(yt,r),sireName:Be}})},[n,r,i,a,s,h]),Se=N.useMemo(()=>{let Pe=P==="Activos"?je.filter(qe=>!qe.isReference):je.filter(qe=>qe.isReference);return e&&(Pe=Pe.filter(qe=>(qe.location||"Sin Asignar")===e)),X?Pe.sort((qe,yt)=>(yt.endDate?new Date(yt.endDate).getTime():yt.createdAt||0)-(qe.endDate?new Date(qe.endDate).getTime():qe.createdAt||0)).slice(0,25):(P==="Activos"?(U!=="ALL"&&(Pe=Pe.filter(qe=>qe.statusObjects.some(yt=>yt.key===U))),Y!=="ALL"&&(Pe=Pe.filter(qe=>qe.statusObjects.some(yt=>yt.key===Y)))):M!=="all"&&(Pe=Pe.filter(qe=>qe.status===M)),R!=="Todos"&&(Pe=Pe.filter(qe=>qe.zootecnicCategory===R)),Pe)},[je,P,X,e,R,U,Y,M]),{searchTerm:Me,setSearchTerm:Qe,filteredItems:me}=YU(Se,["id","name"]),Ye=()=>{H("Todos"),W(!1),$("ALL"),Q("ALL"),F("all"),Qe(""),ie(!1),ve(!1)},Xe=Pe=>{if(!Pe)return[];const qe=[];return Pe.sex==="Hembra"&&(qe.push({label:"Declarar Parto",icon:ua,onClick:()=>{y(!1),w("parturition")}}),qe.push({label:"Declarar Aborto",icon:bv,onClick:()=>{y(!1),w("abortion")},color:"text-yellow-400"}),qe.push({label:"Acciones de Leche",icon:Xl,onClick:()=>{y(!1),w("milkWeighingAction")}}),Pe.sireLotId&&qe.push({label:"Registrar Servicio",icon:gw,onClick:()=>{y(!1),w("service")},color:"text-pink-400"})),qe.push({label:"Acciones de Peso",icon:sc,onClick:()=>{y(!1),w("bodyWeighingAction")}}),qe.push({label:"Mover a Lote",icon:cT,onClick:()=>t({name:"rebano-profile",animalId:Pe.id,openAction:"move"})}),qe.push({label:"Dar de Baja",icon:va,onClick:()=>{y(!1),w("decommission")},color:"text-brand-red"}),qe},te=Pe=>{g(Pe),y(!0)},Te=()=>{w(null),g(null),A(null),C([])},ot=async Pe=>{if(!p)return;const qe={status:Pe.reason,isReference:!0,endDate:Pe.date};Pe.reason==="Venta"&&Object.assign(qe,{salePrice:Pe.salePrice,saleBuyer:Pe.saleBuyer,salePurpose:Pe.salePurpose}),Pe.reason==="Muerte"&&(qe.deathReason=Pe.deathReason),Pe.reason==="Descarte"&&Object.assign(qe,{cullReason:Pe.cullReason,cullReasonDetails:Pe.cullReasonDetails}),await c(p.id,qe),Te()},Ct=(Pe,qe)=>{A(Pe),w(qe==="leche"?"logSimpleMilk":"logSimpleBody")},nt=Pe=>{T(Pe),w(Pe==="leche"?"newMilkSession":"newBodySession")},st=async()=>{p&&(await c(p.id,{reproductiveStatus:"En Servicio"}),Te())},Xt=(Pe,qe)=>{C(qe),w("bulkWeighing")},Yn=()=>{Te()},Mn=Pe=>{u(Pe),Te()},Ft=Pe=>{d(Pe),Te()},or=async Pe=>{if(!p||!p.sireLotId){console.error("Missing animal or sireLotId."),Te();return}await f({sireLotId:p.sireLotId,femaleId:p.id,serviceDate:Pe.toISOString().split("T")[0]}),Te()},He=N.useRef(null),Zt=bU({count:me.length,getScrollElement:()=>He.current,estimateSize:()=>104,overscan:5});return o?l.jsx("div",{className:"text-center p-10",children:l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando rebaño..."})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{ref:He,className:"w-full max-w-2xl mx-auto space-y-4 pb-12",style:{height:"calc(100vh - 64px - 65px)",overflowY:"auto"},children:[l.jsx(JMe,{title:e||"Mi Rebaño",subtitle:`${me.length} animales en la vista`,searchTerm:Me,setSearchTerm:Qe}),l.jsxs("div",{className:"space-y-4 px-4",children:[l.jsxs("div",{className:"flex bg-zinc-800 rounded-xl p-1 w-full",children:[l.jsxs("button",{onClick:()=>{I("Activos"),Ye(),H("Todos")},className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors flex items-center justify-center gap-2 ${P==="Activos"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:[l.jsx(Ou,{size:16})," Activos"]}),l.jsxs("button",{onClick:()=>{I("Referencia"),Ye()},className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors flex items-center justify-center gap-2 ${P==="Referencia"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:[l.jsx(Bee,{size:16})," Referencia"]})]}),P==="Activos"?l.jsxs("div",{className:"space-y-4 animate-fade-in",children:[l.jsxs("button",{onClick:()=>t({name:"add-animal"}),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[l.jsx(ir,{size:18})," Ingresar Nuevo Animal"]}),l.jsxs("div",{className:"space-y-4 bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:()=>ie(!ce),className:"w-full flex justify-between items-center text-sm font-semibold text-zinc-400 hover:text-white transition-colors",children:[l.jsx("span",{children:"Filtros Productivos"}),l.jsx(ib,{className:`transition-transform ${ce?"rotate-180":""}`,size:18})]}),ce&&l.jsx("div",{className:"animate-fade-in",children:l.jsx(_S,{title:"",filters:["MILKING","DRYING_OFF","DRY"].map(Pe=>It[Pe]).filter(Boolean),activeFilter:U,onFilterChange:$})})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:()=>ve(!oe),className:"w-full flex justify-between items-center text-sm font-semibold text-zinc-400 hover:text-white transition-colors",children:[l.jsx("span",{children:"Filtros Reproductivos"}),l.jsx(ib,{className:`transition-transform ${oe?"rotate-180":""}`,size:18})]}),oe&&l.jsx("div",{className:"animate-fade-in",children:l.jsx(_S,{title:"",filters:["PREGNANT","IN_SERVICE_CONFIRMED","IN_SERVICE","EMPTY","SIRE_IN_SERVICE"].map(Pe=>It[Pe]).filter(Boolean),activeFilter:Y,onFilterChange:Q})})]})]})]}):l.jsx("div",{className:"space-y-4 bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border animate-fade-in",children:l.jsx(_S,{title:"Filtrar por Causa de Baja",filters:[{key:"Venta",label:"Venta"},{key:"Muerte",label:"Muerte"},{key:"Descarte",label:"Descarte"}],activeFilter:M,onFilterChange:F})}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("button",{onClick:()=>W(!X),title:X?"Mostrar todos":"Mostrar última carga",className:`flex items-center gap-2 py-1 px-3 text-sm font-semibold rounded-lg transition-colors ${X?"text-brand-orange":"text-zinc-400 hover:text-brand-orange"}`,children:[l.jsx(vw,{size:16})," ",X?"Viendo Última Carga":"Última Carga"]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("button",{onClick:()=>t({name:"manage-lots"}),className:"flex items-center gap-2 text-zinc-400 hover:text-brand-orange text-sm font-semibold py-1 px-3",children:[l.jsx(tte,{size:14})," Gestionar Lotes"]}),l.jsxs("button",{onClick:Ye,className:"flex items-center gap-2 text-zinc-400 hover:text-brand-orange text-sm font-semibold py-1 px-3",children:[l.jsx(aT,{size:14})," Limpiar"]})]})]}),l.jsxs("select",{value:R,onChange:Pe=>H(Pe.target.value),className:"w-full bg-brand-glass p-3 rounded-xl text-white border border-brand-border focus:border-brand-orange focus:ring-0 appearance-none",children:[l.jsx("option",{value:"Todos",children:"Todas las Categorías Zootécnicas"}),nRe.map(Pe=>l.jsx("option",{value:Pe,children:Pe},Pe))]})]}),l.jsxs("div",{className:"pt-4",style:{height:"auto",position:"relative"},children:[" ",me.length>0?l.jsx("div",{style:{height:`${Zt.getTotalSize()}px`,width:"100%",position:"relative"},children:Zt.getVirtualItems().map(Pe=>{const qe=me[Pe.index];return l.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${Pe.size}px`,transform:`translateY(${Pe.start}px)`,padding:"0 1rem 0.5rem 1rem"},children:[" ",l.jsx(tRe,{animal:qe,onSelect:()=>t({name:"rebano-profile",animalId:qe.id}),onOpenActions:te})]},Pe.key)})}):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl mx-4",children:l.jsx("p",{className:"text-zinc-400",children:Me?`No se encontraron resultados para "${Me}"`:"No hay animales que coincidan con los filtros."})})]})]})," ",l.jsx(Mu,{isOpen:m,onClose:()=>y(!1),title:`Acciones para ${pt(p)}`,actions:Xe(p)}),p&&l.jsxs(l.Fragment,{children:[x==="parturition"&&l.jsx(cd,{isOpen:!0,onClose:Te,motherId:p.id}),x==="abortion"&&l.jsx(vP,{animal:p,onCancel:Te,onSaveSuccess:Te}),x==="decommission"&&l.jsx(gP,{animal:p,onCancel:Te,onConfirm:ot}),x==="service"&&l.jsx(yP,{isOpen:!0,onClose:Te,onSave:or,animal:p}),x==="milkWeighingAction"&&l.jsx(VU,{isOpen:!0,animal:p,onClose:Te,onLogToSession:Pe=>Ct(Pe,"leche"),onStartNewSession:()=>nt("leche"),onStartDrying:Mn,onSetDry:Ft}),x==="bodyWeighingAction"&&l.jsx(BU,{isOpen:!0,animal:p,onClose:Te,onLogToSession:Pe=>Ct(Pe,"corporal"),onStartNewSession:()=>nt("corporal"),onSetReadyForMating:st}),x==="logSimpleMilk"&&_&&l.jsx(at,{isOpen:!0,onClose:Te,title:`Añadir Pesaje Leche: ${pt(p)}`,children:l.jsx(bx,{animalId:p.id,weightType:"leche",onSaveSuccess:Te,onCancel:Te,sessionDate:_})}),x==="logSimpleBody"&&_&&l.jsx(at,{isOpen:!0,onClose:Te,title:`Añadir Peso Corporal: ${pt(p)}`,children:l.jsx(bx,{animalId:p.id,weightType:"corporal",onSaveSuccess:Te,onCancel:Te,sessionDate:_})}),(x==="newMilkSession"||x==="newBodySession")&&l.jsx(WU,{weightType:j,onBack:Te,onAnimalsSelected:Xt}),x==="bulkWeighing"&&l.jsx(at,{isOpen:!0,onClose:Te,title:`Carga Masiva - ${j==="leche"?"Leche":"Corporal"}`,size:"fullscreen",children:l.jsx(UU,{weightType:j,animalsToWeigh:E,onSaveSuccess:Yn,onCancel:Te})})]})]})}const iRe=({isOpen:t,onClose:e})=>{const{addOrigin:n}=rt(),[r,i]=N.useState(""),[s,a]=N.useState(""),o=async()=>{if(r.trim()===""){a("El nombre del origen no puede estar vacío.");return}try{await n(r),i(""),a(""),e()}catch(u){a("No se pudo guardar el origen."),console.error(u)}},c=()=>{i(""),a(""),e()};return l.jsx(at,{isOpen:t,onClose:c,title:"Crear Nuevo Origen",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-zinc-400",children:"Introduce el nombre de la ganadería o finca de origen."}),l.jsx("div",{children:l.jsx("input",{type:"text",value:r,onChange:u=>i(u.target.value),placeholder:"Ej: Agropecuaria La Bendición",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0"})}),s&&l.jsx("p",{className:"text-sm text-brand-red",children:s}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[l.jsx("button",{onClick:c,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{onClick:o,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:"Guardar Origen"})]})]})})},sRe=t=>{const{events:e}=rt();return N.useMemo(()=>t?e.filter(s=>s.animalId===t).sort((s,a)=>new Date(a.date).getTime()-new Date(s.date).getTime()):[],[e,t])},aRe=({animalId:t,birthDate:e,onSave:n,onCancel:r})=>{const[i,s]=N.useState(new Date().toISOString().split("T")[0]),[a,o]=N.useState(""),[c,u]=N.useState(null),[d,f]=N.useState(!1),h=async p=>{p.preventDefault(),u(null),f(!0);const g=parseFloat(a);if(!i||!a||isNaN(g)||g<=0){u("Por favor, introduce una fecha y un peso válidos."),f(!1);return}if(new Date(i)<new Date(e)){u("La fecha de destete no puede ser anterior a la fecha de nacimiento."),f(!1);return}try{await n({weaningDate:i,weaningWeight:g})}catch(m){u("No se pudo guardar el registro de destete."),console.error(m)}finally{f(!1)}};return l.jsxs("form",{onSubmit:h,className:"space-y-4",children:[l.jsxs("p",{className:"text-sm text-zinc-400",children:["Registra la fecha y el peso al momento de separar a ",l.jsx("span",{className:"font-bold text-white",children:t})," de su madre."]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"weaningDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Destete"}),l.jsx("input",{id:"weaningDate",type:"date",value:i,onChange:p=>s(p.target.value),className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl text-lg",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"weaningWeight",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Peso al Destete (Kg)"}),l.jsx("input",{id:"weaningWeight",type:"number",step:"0.1",value:a,onChange:p=>o(p.target.value),placeholder:"Ej: 15.5",className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl text-lg",required:!0})]}),c&&l.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[l.jsx($t,{size:18}),l.jsx("span",{children:c})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:r,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:d,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:d?"Guardando...":"Guardar Destete"})]})]})},oRe=t=>{const{animals:e}=rt(),n=N.useMemo(()=>{const i=new Map;return e.forEach(s=>i.set(s.id,s)),i},[e]);return N.useMemo(()=>{const i=(a,o)=>{if(!a||o>3)return;const c=n.get(a);if(!c)return;const u=i(c.fatherId,o+1),d=i(c.motherId,o+1);return{animal:c,sire:u,dam:d}};return i(t,0)||null},[t,n])},Di=({animal:t,onClick:e})=>{const n="bg-zinc-800/80 p-1.5 rounded-lg border border-zinc-700/80 w-44 text-center shadow-md transition-colors text-xs";if(!t)return l.jsx("div",{className:`${n} bg-zinc-900/50 border-dashed`,children:l.jsx("p",{className:"font-semibold text-zinc-500",children:"Desconocido"})});const r=t.sex==="Hembra"?"text-pink-400":"text-blue-400";return l.jsxs("button",{onClick:()=>e(t.id),className:`${n} hover:border-brand-orange`,children:[l.jsx("p",{className:`font-bold truncate ${r}`,children:pt(t)}),l.jsx("p",{className:"text-zinc-400",children:t.sex})," "]})},lRe=({rootNode:t,onAncestorClick:e})=>{var o,c,u,d,f,h,p,g,m,y,x,w,_,A,E,C,j,T,P,I,M,F,R,H,X,W,U,$,Y,Q,ce,ie,oe,ve;if(!t)return l.jsx("div",{className:"text-center p-8 text-zinc-500",children:"No hay datos de genealogía suficientes para mostrar el pedigrí."});const n="border-zinc-600",r=l.jsx("div",{className:`w-3 border-t-2 ${n}`}),i=l.jsx("div",{className:`h-20 border-r-2 ${n}`}),s=l.jsx("div",{className:`h-10 border-r-2 ${n}`}),a=l.jsx("div",{className:`h-6 border-r-2 ${n}`});return l.jsxs("div",{className:"flex items-center justify-center p-4 overflow-x-auto min-w-max",children:[" ",l.jsx("div",{className:"flex flex-col items-center justify-center",children:l.jsxs("div",{className:"bg-zinc-800/80 p-1.5 rounded-lg border border-zinc-700/80 w-44 text-center shadow-md text-xs",children:[l.jsx("p",{className:`font-bold truncate ${t.animal.sex==="Hembra"?"text-pink-400":"text-blue-400"}`,children:pt(t.animal)}),l.jsx("p",{className:"text-zinc-400",children:t.animal.sex})]})}),l.jsxs("div",{className:"flex flex-col items-center",children:[r,"       ",i," ",r,"       "]}),l.jsxs("div",{className:"flex flex-col items-center justify-around space-y-4",children:[" ",l.jsx(Di,{animal:(o=t.sire)==null?void 0:o.animal,onClick:e}),l.jsx(Di,{animal:(c=t.dam)==null?void 0:c.animal,onClick:e})]}),l.jsxs("div",{className:"flex flex-col items-center justify-around space-y-4",children:[" ",l.jsxs("div",{className:"flex items-center",children:[" ",r," ",s," ",r," "]}),l.jsxs("div",{className:"flex items-center",children:[" ",r," ",s," ",r," "]})]}),l.jsxs("div",{className:"flex flex-col items-center justify-between gap-[20px]",children:[" ",l.jsx(Di,{animal:(d=(u=t.sire)==null?void 0:u.sire)==null?void 0:d.animal,onClick:e}),l.jsx(Di,{animal:(h=(f=t.sire)==null?void 0:f.dam)==null?void 0:h.animal,onClick:e}),l.jsx("div",{className:"h-[6px]"})," ",l.jsx(Di,{animal:(g=(p=t.dam)==null?void 0:p.sire)==null?void 0:g.animal,onClick:e}),l.jsx(Di,{animal:(y=(m=t.dam)==null?void 0:m.dam)==null?void 0:y.animal,onClick:e})]}),l.jsxs("div",{className:"flex flex-col items-center justify-between gap-[20px]",children:[" ",l.jsxs("div",{className:"flex items-center",children:[" ",r," ",a," ",r," "]}),l.jsxs("div",{className:"flex items-center",children:[" ",r," ",a," ",r," "]}),l.jsx("div",{className:"h-[6px]"})," ",l.jsxs("div",{className:"flex items-center",children:[" ",r," ",a," ",r," "]}),l.jsxs("div",{className:"flex items-center",children:[" ",r," ",a," ",r," "]})]}),l.jsxs("div",{className:"flex flex-col items-center justify-between gap-[6px]",children:[" ",l.jsx(Di,{animal:(_=(w=(x=t.sire)==null?void 0:x.sire)==null?void 0:w.sire)==null?void 0:_.animal,onClick:e}),l.jsx(Di,{animal:(C=(E=(A=t.sire)==null?void 0:A.sire)==null?void 0:E.dam)==null?void 0:C.animal,onClick:e}),l.jsx("div",{className:"h-[2px]"}),l.jsx(Di,{animal:(P=(T=(j=t.sire)==null?void 0:j.dam)==null?void 0:T.sire)==null?void 0:P.animal,onClick:e}),l.jsx(Di,{animal:(F=(M=(I=t.sire)==null?void 0:I.dam)==null?void 0:M.dam)==null?void 0:F.animal,onClick:e}),l.jsx("div",{className:"h-[8px]"})," ",l.jsx(Di,{animal:(X=(H=(R=t.dam)==null?void 0:R.sire)==null?void 0:H.sire)==null?void 0:X.animal,onClick:e}),l.jsx(Di,{animal:($=(U=(W=t.dam)==null?void 0:W.sire)==null?void 0:U.dam)==null?void 0:$.animal,onClick:e}),l.jsx("div",{className:"h-[2px]"}),l.jsx(Di,{animal:(ce=(Q=(Y=t.dam)==null?void 0:Y.dam)==null?void 0:Q.sire)==null?void 0:ce.animal,onClick:e}),l.jsx(Di,{animal:(ve=(oe=(ie=t.dam)==null?void 0:ie.dam)==null?void 0:oe.dam)==null?void 0:ve.animal,onClick:e})]})]})},cRe=({isOpen:t,onClose:e,animalId:n,navigateTo:r})=>{const i=oRe(n),{animals:s}=rt(),a=s.find(u=>u.id===n),o=()=>{const u=document.querySelector(".pedigree-modal-header"),d=document.querySelector(".pedigree-modal-footer");u&&(u.style.display="none"),d&&(d.style.display="none"),window.print(),u&&(u.style.display=""),d&&(d.style.display="")},c=()=>{const u=document.querySelector(".pedigree-modal-header"),d=document.querySelector(".pedigree-modal-footer");u&&(u.style.display=""),d&&(d.style.display=""),e()};return l.jsxs(at,{isOpen:t,onClose:c,title:`Genealogía de ${pt(a)}`,size:"large",children:[l.jsxs("div",{className:"pedigree-modal-header mb-4",children:[" "," "]}),l.jsxs("div",{className:"pedigree-chart-container",children:[" ",l.jsx(lRe,{rootNode:i,onAncestorClick:u=>{e(),setTimeout(()=>r({name:"rebano-profile",animalId:u}),100)}})]}),l.jsxs("footer",{className:"pedigree-modal-footer mt-6 pt-4 border-t border-brand-border flex justify-end gap-3",children:[l.jsxs("button",{onClick:o,className:"flex items-center gap-2 bg-zinc-600 hover:bg-zinc-500 text-white font-semibold py-2 px-4 rounded-lg transition-colors",children:[l.jsx(Xee,{size:18})," Imprimir"]}),l.jsx("button",{onClick:c,className:"bg-brand-blue hover:bg-blue-600 text-white font-bold py-2 px-6 rounded-lg",children:"Cerrar"})]}),l.jsx("style",{children:`
                    @media print {
                        body * {
                            visibility: hidden;
                        }
                        .pedigree-chart-container, .pedigree-chart-container * {
                            visibility: visible;
                        }
                        .pedigree-chart-container {
                            position: absolute;
                            left: 0;
                            top: 0;
                            width: 100%; /* Ajusta según necesidad */
                        }
                        /* Oculta los botones dentro del gráfico si los hubiera */
                        .pedigree-chart-container button {
                            display: none;
                        }
                         /* Ajusta el tamaño de fuente si es necesario */
                        .pedigree-chart-container p {
                           font-size: 10px; /* Ejemplo */
                        }
                    }
                `})]})},po=({label:t,value:e,isEditing:n,children:r})=>l.jsxs("div",{children:[l.jsx("dt",{className:"text-sm font-medium text-zinc-400",children:t}),n&&r?r:l.jsx("dd",{className:"mt-1 text-lg font-semibold text-white truncate",children:e||"N/A"})]}),uRe=({onOpenModal:t})=>l.jsx("div",{className:"text-center p-4 min-h-[150px] flex flex-col justify-center items-center",children:l.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 bg-brand-blue hover:bg-blue-700 text-white font-bold py-3 px-5 rounded-lg transition-colors",children:[l.jsx(kF,{size:20})," Ver Genealogía Completa"]})}),dRe={Nacimiento:{icon:Vee,color:"bg-green-500/20 text-brand-green"},Registro:{icon:pw,color:"bg-blue-500/20 text-brand-blue"},Parto:{icon:ua,color:"bg-pink-500/20 text-pink-400"},Aborto:{icon:bv,color:"bg-yellow-500/20 text-yellow-400"},Movimiento:{icon:cT,color:"bg-blue-500/20 text-brand-blue"},"Cambio de Estado":{icon:ite,color:"bg-purple-500/20 text-purple-400"},"Pesaje Lechero":{icon:Gee,color:"bg-gray-500/20 text-gray-300"},"Pesaje Corporal":{icon:sc,color:"bg-green-500/20 text-brand-green"},Servicio:{icon:mw,color:"bg-pink-500/20 text-pink-400"},Tratamiento:{icon:$h,color:"bg-red-500/20 text-brand-red"},Diagnóstico:{icon:ri,color:"bg-teal-500/20 text-teal-300"}},fRe=({animal:t})=>{const e=sRe(t==null?void 0:t.id);return t?e.length===0?l.jsx("div",{className:"text-center p-8 text-zinc-500",children:"Este animal no tiene eventos registrados."}):l.jsx("div",{className:"space-y-3",children:e.map(n=>{const r=dRe[n.type]||{icon:pw,color:"bg-gray-500/20 text-gray-300"},i=r.icon;let s="Fecha desconocida",a="";if(n.type==="Registro"&&t.createdAt)s=new Date(t.createdAt).toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"}),a="Registrado el: ";else if(n.date&&n.date!=="N/A")try{s=new Date(n.date+"T00:00:00Z").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"})}catch(o){console.error("Error formatting event date:",n.date,o),s=n.date}return l.jsxs("div",{className:"flex items-start gap-4 p-3 bg-black/20 rounded-lg",children:[l.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${r.color}`,children:l.jsx(i,{size:20})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-white",children:n.type}),l.jsx("p",{className:"text-sm text-zinc-300",children:n.details}),l.jsxs("p",{className:"text-xs text-zinc-500 mt-1",children:[a,s,n.lotName&&` | Lote: ${n.lotName}`]})]})]},n.id)})}):l.jsx("div",{className:"text-center p-8 text-zinc-500",children:"Cargando datos del animal..."})},hRe=({offspring:t,navigateTo:e})=>t.length===0?l.jsx("div",{className:"text-center p-8 text-zinc-500",children:"Este animal no tiene descendencia registrada."}):l.jsx("div",{className:"space-y-2",children:t.map(n=>l.jsxs("button",{onClick:()=>e({name:"rebano-profile",animalId:n.id}),className:"w-full text-left p-3 bg-black/20 hover:bg-zinc-800/60 rounded-lg transition-colors flex justify-between items-center group",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:pt(n)}),l.jsxs("p",{className:"text-sm text-zinc-400",children:[n.sex," | ",wa(n.birthDate)," | Lote: ",n.location||"Sin Asignar"]})]}),l.jsx(Gn,{className:"text-zinc-600 group-hover:text-white transition-colors"})]},n.id))}),pRe=({animal:t,isEditing:e,editedData:n,setEditedData:r,origins:i,onAddOriginClick:s,onLocationClick:a})=>{const o=(u,d)=>{r(f=>({...f,[u]:d}))},c=wa(t.birthDate);return l.jsxs("dl",{className:"grid grid-cols-2 gap-x-4 gap-y-6",children:[l.jsx(po,{label:"ID",value:t.id}),l.jsx(po,{label:"Sexo",value:t.sex}),l.jsx(po,{label:"Fecha Nacimiento",value:t.birthDate!=="N/A"?new Date(t.birthDate+"T00:00:00Z").toLocaleDateString("es-VE",{timeZone:"UTC"}):"N/A",isEditing:e,children:l.jsx("input",{type:"date",value:n.birthDate==="N/A"?"":n.birthDate||"",onChange:u=>o("birthDate",u.target.value||"N/A"),className:"w-full bg-zinc-700 p-2 rounded-md mt-1 text-white"})}),l.jsx(po,{label:"Edad",value:c}),l.jsx(po,{label:"Ubicación / Lote",children:!e&&l.jsx("dd",{className:"mt-1 text-lg",children:l.jsx("button",{onClick:a,className:"font-semibold text-brand-orange hover:underline text-left",children:t.location||"Sin Asignar"})})}),l.jsx(po,{label:"Categoría",value:t.lifecycleStage}),l.jsx(po,{label:"Origen",value:t.origin,isEditing:e,children:l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsxs("select",{value:n.origin||"",onChange:u=>o("origin",u.target.value),className:"w-full bg-zinc-700 p-2 rounded-md text-white",children:[l.jsx("option",{value:"",children:"Seleccionar Origen..."}),l.jsx("option",{value:"Finca Masparrito",children:"Finca Masparrito"}),i.map(u=>l.jsx("option",{value:u.name,children:u.name},u.id))]}),l.jsx("button",{type:"button",onClick:s,className:"p-2 bg-brand-orange hover:bg-orange-600 text-white rounded-md",children:l.jsx(ss,{size:20})})]})}),t.weaningDate&&l.jsx(po,{label:"Fecha de Destete",value:new Date(t.weaningDate+"T00:00:00Z").toLocaleDateString("es-VE",{timeZone:"UTC"})}),t.weaningWeight&&l.jsx(po,{label:"Peso al Destete",value:`${t.weaningWeight} Kg`})]})},mRe=({isOpen:t,onClose:e,onConfirm:n,reason:r})=>{const[i,s]=N.useState(new Date().toISOString().split("T")[0]),[a,o]=N.useState(""),[c,u]=N.useState(""),[d,f]=N.useState("Cría"),[h,p]=N.useState(""),[g,m]=N.useState(),[y,x]=N.useState("");if(!t||!r)return null;const w=["Baja producción","Bajo índice de crecimiento","Inflamación articular","Linfadenitis caseosa","Sospecha de otras enfermedades"],_=()=>{n({date:i,price:parseFloat(a)||void 0,buyer:c||void 0,purpose:d,reason:h||void 0,cullReason:g||void 0,cullDetails:g==="Sospecha de otras enfermedades"?y:void 0})};return l.jsx(at,{isOpen:t,onClose:e,title:`Dar de baja por ${r}`,children:l.jsxs("div",{className:"space-y-4 text-white",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha"}),l.jsx("input",{type:"date",value:i,onChange:A=>s(A.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white",max:new Date().toISOString().split("T")[0]})]}),r==="Venta"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Precio (Opcional)"}),l.jsx("input",{type:"number",step:"0.01",value:a,onChange:A=>o(A.target.value),placeholder:"0.00",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Comprador (Opcional)"}),l.jsx("input",{type:"text",value:c,onChange:A=>u(A.target.value),placeholder:"Nombre del comprador",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fin"}),l.jsxs("select",{value:d,onChange:A=>f(A.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white appearance-none",children:[l.jsx("option",{value:"Cría",children:"Cría"}),l.jsx("option",{value:"Carne",children:"Carne"})]})]})]}),r==="Muerte"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Causa / Descripción"}),l.jsx("textarea",{value:h,onChange:A=>p(A.target.value),placeholder:"Ej: Infección...",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white",rows:3})]}),r==="Descarte"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Causa"}),l.jsxs("select",{value:g||"",onChange:A=>m(A.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white appearance-none",children:[l.jsx("option",{value:"",children:"Seleccione..."}),w.map(A=>l.jsx("option",{value:A,children:A},A))]})]}),g==="Sospecha de otras enfermedades"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Especificar"}),l.jsx("input",{type:"text",value:y,onChange:A=>x(A.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white"})]})]}),l.jsx("p",{className:"text-sm text-zinc-400",children:'El animal pasará a "Referencia".'}),l.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[l.jsx("button",{onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg text-white",children:"Cancelar"}),l.jsx("button",{onClick:_,className:"px-5 py-2 bg-brand-red hover:bg-red-700 text-white font-bold rounded-lg",children:"Confirmar Baja"})]})]})})},gRe=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i})=>t?l.jsx(at,{isOpen:t,onClose:e,title:r,children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("p",{className:"text-zinc-300",children:i}),l.jsxs("div",{className:"flex justify-end gap-4",children:[l.jsx("button",{onClick:e,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-6 rounded-lg",children:"Cancelar"}),l.jsx("button",{onClick:()=>{n(),e()},className:"bg-brand-red hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg",children:"Confirmar"})]})]})}):null;function vRe({animalId:t,onBack:e,navigateTo:n}){const{animals:r,lots:i,origins:s,parturitions:a,updateAnimal:o,deleteAnimalPermanently:c}=rt(),[u,d]=N.useState("main"),[f,h]=N.useState(!1),[p,g]=N.useState({}),[m,y]=N.useState("idle"),[x,w]=N.useState(!1),[_,A]=N.useState(!1),[E,C]=N.useState(!1),[j,T]=N.useState(!1),[P,I]=N.useState(""),[M,F]=N.useState(!1),[R,H]=N.useState(null),[X,W]=N.useState(!1),[U,$]=N.useState(!1),[Y,Q]=N.useState(!1),[ce,ie]=N.useState(!1),oe=N.useMemo(()=>r.find(st=>st.id===t),[r,t]),ve=N.useMemo(()=>oe?oe.sex==="Hembra"?r.filter(st=>st.motherId===oe.id).sort((st,Xt)=>new Date(Xt.birthDate).getTime()-new Date(st.birthDate).getTime()):oe.sex==="Macho"?r.filter(st=>st.fatherId===oe.id).sort((st,Xt)=>new Date(Xt.birthDate).getTime()-new Date(st.birthDate).getTime()):[]:[],[r,oe]),je=N.useMemo(()=>oe?od(oe,a):"",[oe,a]),Se=(oe==null?void 0:oe.breedingFailures)||0,Me=Se>=2?"border-brand-red ring-2 ring-brand-red/80":"border-brand-border";N.useEffect(()=>{oe&&(f&&g({birthDate:oe.birthDate,origin:oe.origin}),I(oe.location||""))},[oe,f]);const Qe=async()=>{if(oe){y("saving");try{await o(oe.id,p),y("success"),setTimeout(()=>{h(!1),y("idle")},1500)}catch(st){console.error("Error al actualizar:",st),y("idle")}}},me=()=>{h(!1),g({})},Ye=async()=>{if(oe)try{await o(oe.id,{location:P}),T(!1)}catch(st){console.error("Error al actualizar ubicación:",st)}},Xe=async st=>{if(!oe||!R)return;const Xt={status:R,isReference:!0,endDate:st.date};R==="Venta"&&Object.assign(Xt,{salePrice:st.price,saleBuyer:st.buyer,salePurpose:st.purpose}),R==="Muerte"&&(Xt.deathReason=st.reason),R==="Descarte"&&Object.assign(Xt,{cullReason:st.cullReason,cullReasonDetails:st.cullDetails}),await o(oe.id,Xt),H(null)},te=async()=>{oe&&await o(oe.id,{isReference:!1,status:"Activo",endDate:void 0})},Te=async()=>{oe&&(await c(oe.id),e())},ot=async st=>{oe&&(await o(oe.id,{weaningDate:st.weaningDate,weaningWeight:st.weaningWeight}),Q(!1))},Ct=[{label:"Por Venta",icon:Ql,onClick:()=>H("Venta")},{label:"Por Muerte",icon:bv,onClick:()=>H("Muerte"),color:"text-brand-red"},{label:"Por Descarte",icon:jee,onClick:()=>H("Descarte"),color:"text-brand-red"}],nt=[{label:"Reintegrar a Activos",icon:Zee,onClick:te},{label:"Eliminar Permanentemente",icon:ya,onClick:()=>$(!0),color:"text-brand-red"}];return oe?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in pb-12",children:[l.jsxs("header",{className:`bg-brand-glass backdrop-blur-xl rounded-b-2xl p-4 border-b border-x sticky top-0 z-10 transition-all ${Me}`,children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(ar,{size:24})}),l.jsxs("h1",{className:"text-2xl font-bold tracking-tight text-white flex items-center gap-2",children:[pt(oe)," ",Se===1&&l.jsx("span",{title:"1 fallo reproductivo reportado",children:l.jsx($t,{className:"text-yellow-400",size:20})})," ",Se>=2&&l.jsx("span",{title:`${Se} fallos reproductivos reportados`,children:l.jsx($t,{className:"text-brand-red",size:20})})]}),l.jsx("div",{className:"w-8"})]}),l.jsx("p",{className:"text-center text-brand-orange font-semibold text-sm -mt-1 mb-3 uppercase tracking-wider",children:oe.isReference?"REFERENCIA":oe.status!=="Activo"?oe.status:oe.location||"Sin Asignar"}),l.jsxs("div",{className:"flex justify-around bg-black/20 rounded-xl p-1",children:[oe.sex==="Hembra"&&l.jsxs(l.Fragment,{children:[" ",l.jsxs("button",{onClick:()=>n({name:"lactation-profile",animalId:oe.id}),className:"flex flex-col items-center p-2 text-blue-300 hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[l.jsx(Xl,{size:22}),l.jsx("span",{className:"text-xs mt-1",children:"Leche"})]})," ",l.jsxs("button",{onClick:()=>C(!0),disabled:oe.isReference||oe.status!=="Activo",className:"flex flex-col items-center p-2 text-pink-400 hover:bg-zinc-700/50 w-full rounded-lg transition-colors disabled:opacity-40 disabled:cursor-not-allowed",children:[l.jsx(ua,{size:22}),l.jsx("span",{className:"text-xs mt-1",children:"Parto"})]})," "]}),(je==="Cabrita"||je==="Cabrito")&&!oe.weaningDate&&!oe.isReference&&oe.status==="Activo"&&l.jsxs("button",{onClick:()=>Q(!0),className:"flex flex-col items-center p-2 text-yellow-300 hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[l.jsx(Eee,{size:22}),l.jsx("span",{className:"text-xs mt-1",children:"Destetar"})]}),l.jsxs("button",{onClick:()=>n({name:"growth-profile",animalId:oe.id}),className:"flex flex-col items-center p-2 text-brand-green hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[l.jsx(sc,{size:22}),l.jsx("span",{className:"text-xs mt-1",children:"Peso"})]}),l.jsxs("button",{onClick:()=>alert("Función en desarrollo"),disabled:oe.isReference||oe.status!=="Activo",className:"flex flex-col items-center p-2 text-teal-300 hover:bg-zinc-700/50 w-full rounded-lg transition-colors disabled:opacity-40 disabled:cursor-not-allowed",children:[l.jsx($h,{size:22}),l.jsx("span",{className:"text-xs mt-1",children:"Sanidad"})]}),l.jsxs("button",{onClick:()=>oe.isReference?W(!0):T(!0),className:"flex flex-col items-center p-2 text-brand-blue hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[l.jsx(ete,{size:22}),l.jsx("span",{className:"text-xs mt-1",children:"Mover"})]}),oe.status==="Activo"&&!oe.isReference&&l.jsxs("button",{onClick:()=>F(!0),className:"flex flex-col items-center p-2 text-amber-400 hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[l.jsx(va,{size:22}),l.jsx("span",{className:"text-xs mt-1",children:"Dar de baja"})]}),l.jsxs("button",{onClick:()=>h(!f),disabled:oe.isReference,className:`flex flex-col items-center p-2 w-full rounded-lg transition-colors ${f?"text-green-400":"text-brand-orange"} hover:bg-zinc-700/50 disabled:opacity-40 disabled:cursor-not-allowed`,children:[l.jsx(ac,{size:22}),l.jsx("span",{className:"text-xs mt-1",children:"Editar"})]})]})]}),l.jsxs("main",{className:"p-4 space-y-4",children:[l.jsxs("div",{className:"flex bg-brand-glass rounded-xl p-1 border border-brand-border",children:[l.jsx("button",{onClick:()=>d("main"),className:`w-1/4 py-2 text-sm font-semibold rounded-lg transition-colors ${u==="main"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Ficha"}),l.jsx("button",{onClick:()=>d("genetics"),className:`w-1/4 py-2 text-sm font-semibold rounded-lg transition-colors ${u==="genetics"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Genealogía"}),l.jsx("button",{onClick:()=>d("progeny"),className:`w-1/4 py-2 text-sm font-semibold rounded-lg transition-colors ${u==="progeny"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Progenie"}),l.jsx("button",{onClick:()=>d("events"),className:`w-1/4 py-2 text-sm font-semibold rounded-lg transition-colors ${u==="events"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Eventos"})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border min-h-[200px]",children:[u==="main"&&l.jsxs("div",{className:"space-y-6",children:[" ",l.jsx(pRe,{animal:oe,isEditing:f,editedData:p,setEditedData:g,origins:s,onAddOriginClick:()=>A(!0),onLocationClick:()=>T(!0)})," ",f&&l.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-zinc-700",children:[" ",l.jsxs("button",{onClick:me,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-6 rounded-lg flex items-center gap-2",children:[l.jsx(Za,{size:18})," Cancelar"]})," ",l.jsxs("button",{onClick:Qe,disabled:m!=="idle",className:"bg-brand-green hover:bg-green-600 text-white font-bold py-2 px-6 rounded-lg flex items-center gap-2 disabled:opacity-50 min-w-[130px] justify-center",children:[" ",m==="saving"&&l.jsx("span",{className:"animate-spin h-5 w-5 border-2 border-current border-t-transparent rounded-full"})," ",m==="success"&&l.jsx(ri,{size:18})," ",m==="idle"&&l.jsx(zh,{size:18})," ",l.jsx("span",{className:"ml-2",children:m==="success"?"Guardado":"Guardar"})," "]})," "]})," "]}),u==="genetics"&&l.jsx(uRe,{onOpenModal:()=>ie(!0)}),u==="progeny"&&l.jsx(hRe,{offspring:ve,navigateTo:n}),u==="events"&&l.jsx(fRe,{animal:oe})]})]})]}),l.jsx(at,{isOpen:j,onClose:()=>T(!1),title:`Cambiar Lote para ${pt(oe)}`,children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Seleccionar nuevo lote"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{value:P,onChange:st=>I(st.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-white appearance-none",children:[l.jsx("option",{value:"",children:"Sin Asignar"}),i.map(st=>l.jsx("option",{value:st.name,children:st.name},st.id))]}),l.jsx("button",{type:"button",onClick:()=>{T(!1),w(!0)},className:"p-3 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",children:l.jsx(ss,{size:24})})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[l.jsx("button",{onClick:()=>T(!1),className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg text-white",children:"Cancelar"}),l.jsx("button",{onClick:Ye,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:"Guardar Cambio"})]})]})}),l.jsx(Mu,{isOpen:M,onClose:()=>F(!1),title:"Causa de la Baja",actions:Ct}),l.jsx(mRe,{isOpen:!!R,onClose:()=>H(null),onConfirm:Xe,reason:R}),l.jsx(Mu,{isOpen:X,onClose:()=>W(!1),title:"Acciones de Referencia",actions:nt}),l.jsx(gRe,{isOpen:U,onClose:()=>$(!1),onConfirm:Te,title:`¿Eliminar ${pt(oe)} Permanentemente?`,message:"Esta acción borrará el registro del animal de la base de datos para siempre y no se puede deshacer."}),l.jsx(WF,{isOpen:x,onClose:()=>w(!1)}),l.jsx(iRe,{isOpen:_,onClose:()=>A(!1)}),l.jsx(cd,{isOpen:E,onClose:()=>C(!1),motherId:oe.id}),l.jsxs(at,{isOpen:Y,onClose:()=>Q(!1),title:`Registrar Destete de ${pt(oe)}`,children:[" ",l.jsx(aRe,{animalId:oe.id,birthDate:oe.birthDate,onSave:ot,onCancel:()=>Q(!1)})," "]}),l.jsx(cRe,{isOpen:ce,onClose:()=>ie(!1),animalId:oe.id,navigateTo:n})]}):l.jsxs("div",{className:"text-center p-10",children:[l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Animal no encontrado."}),l.jsx("button",{onClick:e,className:"mt-4 text-brand-orange",children:"Volver"})]})}const yRe=({animal:t,parturition:e,onSelectAnimal:n})=>l.jsxs("div",{onClick:()=>n(t.id),className:"w-full cursor-pointer text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-amber-400 transition-colors",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),l.jsxs("p",{className:"text-sm text-zinc-400",children:[e.status==="en-secado"&&`Secado desde: ${new Date(e.dryingStartDate).toLocaleDateString()}`,e.status==="seca"&&"Lactancia finalizada"]})]}),l.jsx(Gn,{className:"text-zinc-600"})]});function bRe({onSelectAnimal:t,defaultView:e="drying"}){const{animals:n,parturitions:r,isLoading:i}=rt(),[s,a]=N.useState(e);N.useEffect(()=>{a(e)},[e]);const o=N.useMemo(()=>{const u=h=>n.find(p=>p.id===h),d=r.filter(h=>h.status==="en-secado").map(h=>({animal:u(h.goatId),parturition:h})).filter(h=>h.animal),f=r.filter(h=>h.status==="seca").map(h=>({animal:u(h.goatId),parturition:h})).filter(h=>h.animal);return{drying:d,dry:f}},[n,r]),c=o[s]||[];return i?l.jsx("div",{className:"text-center p-10",children:l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando datos..."})}):l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[l.jsxs("header",{className:"text-center pt-8 pb-4",children:[l.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white",children:"Gestión de Rebaño"}),l.jsx("p",{className:"text-xl text-zinc-400",children:"Animales por Estado de Lactancia"})]}),l.jsx("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-2 border border-brand-border flex justify-between items-center",children:l.jsxs("div",{className:"flex bg-zinc-900/80 rounded-xl p-1 w-full",children:[l.jsxs("button",{onClick:()=>a("drying"),className:`w-1/2 px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors ${s==="drying"?"bg-blue-500 text-white":"text-zinc-300 hover:bg-zinc-700/50"}`,children:["En Secado (",o.drying.length,")"]}),l.jsxs("button",{onClick:()=>a("dry"),className:`w-1/2 px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors ${s==="dry"?"bg-gray-600 text-white":"text-zinc-300 hover:bg-zinc-700/50"}`,children:["Secas (",o.dry.length,")"]})]})}),l.jsx("div",{className:"space-y-2",children:c.length>0?c.map(({animal:u,parturition:d})=>l.jsx(yRe,{animal:u,parturition:d,onSelectAnimal:t},d.id)):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-400",children:"No hay animales en este estado."})})})]})}function xRe({onBack:t}){const{lots:e,animals:n,parturitions:r,serviceRecords:i,breedingSeasons:s,sireLots:a,addLot:o,deleteLot:c,updateAnimal:u}=rt(),[d,f]=N.useState(""),[h,p]=N.useState(!1),[g,m]=N.useState(null),[y,x]=N.useState(""),w=N.useMemo(()=>{const j=new Map;return n.forEach(T=>{const P=T.location||"Sin Asignar";j.set(P,(j.get(P)||0)+1)}),e.map(T=>({...T,animalCount:j.get(T.name)||0})).sort((T,P)=>T.name.localeCompare(P.name))},[e,n]),_=async()=>{if(d.trim()!==""){x("");try{await o({name:d,parentLotId:void 0}),f("")}catch(j){x(j.message||"No se pudo crear el lote.")}}},A=async(j,T)=>{var P;if(T>0){x(`No se puede eliminar "${(P=e.find(I=>I.id===j))==null?void 0:P.name}". Reasigne los ${T} animales primero.`);return}if(x(""),window.confirm("¿Estás seguro de que quieres eliminar este lote? Esta acción no se puede deshacer."))try{await c(j)}catch(I){x(I.message||"No se pudo eliminar el lote.")}},E=j=>{m(j),p(!0)},C=async j=>{if(!g)return;const T=j.map(P=>u(P,{location:g}));await Promise.all(T),p(!1),m(null)};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[l.jsxs("header",{className:"flex items-center pt-8 pb-4 px-4",children:[l.jsx("button",{onClick:t,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(ar,{size:24})}),l.jsxs("div",{className:"text-center flex-grow",children:[l.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Gestionar Lotes Físicos"}),l.jsx("p",{className:"text-md text-zinc-400",children:"Crea ubicaciones y asigna animales"})]}),l.jsx("div",{className:"w-8"})]}),l.jsx("div",{className:"px-4",children:l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Añadir Nuevo Lote"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"text",value:d,onChange:j=>f(j.target.value),placeholder:"Nombre del lote...",className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"}),l.jsx("button",{onClick:_,className:"p-3 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",children:l.jsx(ir,{size:24})})]}),y&&l.jsx("p",{className:"text-sm text-brand-red text-center",children:y})]})}),l.jsxs("div",{className:"space-y-2 pt-4 px-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-zinc-300 px-2",children:"Lotes Existentes"}),w.length>0?w.map(j=>l.jsxs("div",{className:"w-full text-left bg-brand-glass rounded-2xl p-4 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-white",children:j.name}),l.jsxs("p",{className:"text-sm text-zinc-400",children:[j.animalCount," ",j.animalCount===1?"animal":"animales"]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>E(j.name),className:"flex items-center gap-2 bg-zinc-700/80 text-white font-semibold py-2 px-3 rounded-lg hover:bg-zinc-600/80 transition-colors",children:[l.jsx(Ou,{size:16})," Asignar"]}),l.jsx("button",{onClick:()=>A(j.id,j.animalCount),className:"p-2 text-zinc-500 hover:text-brand-red transition-colors",children:l.jsx(ya,{size:18})})]})]},j.id)):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-500",children:"Aún no has creado ningún lote."})})]})]}),l.jsx(b1,{isOpen:h,onClose:()=>p(!1),onSelect:C,animals:n,parturitions:r,serviceRecords:i,breedingSeasons:s,sireLots:a,title:`Asignar animales a: ${g}`})]})}const wRe=({onSave:t,onCancel:e,editingLot:n})=>{const{fathers:r,addFather:i}=rt(),[s,a]=N.useState(""),[o,c]=N.useState(!1),[u,d]=N.useState(null),[f,h]=N.useState(!1);N.useEffect(()=>{n&&n.sireId?a(n.sireId):a("")},[n]);const p=async y=>{await i(y),a(y.id),c(!1)},g=async y=>{if(y.preventDefault(),d(null),!s){d("Debes seleccionar un semental.");return}h(!0);try{await t(s)}catch(x){d("No se pudo guardar el lote."),console.error(x),h(!1)}},m=n?f?"Actualizando...":"Guardar Cambios":f?"Creando...":"Crear Lote";return l.jsxs(l.Fragment,{children:[l.jsxs("form",{onSubmit:g,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"sire",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Seleccionar Semental"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{id:"sire",value:s,onChange:y=>a(y.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0,disabled:!!n,children:[l.jsx("option",{value:"",children:"Elegir reproductor..."}),r.map(y=>l.jsxs("option",{value:y.id,children:[y.name," (",y.id,")"]},y.id))]}),l.jsx("button",{type:"button",onClick:()=>c(!0),className:"flex-shrink-0 p-3 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",children:l.jsx(ir,{size:24})})]})]}),u&&l.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[l.jsx($t,{size:18}),l.jsx("span",{children:u})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg text-white",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:f||!s,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:m})]})]}),l.jsx(rP,{isOpen:o,onClose:()=>c(!1),onSave:p})]})},_1=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i})=>t?l.jsx(at,{isOpen:t,onClose:e,title:r,children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("p",{className:"text-zinc-300",children:i}),l.jsxs("div",{className:"flex justify-end gap-4",children:[l.jsx("button",{onClick:e,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-6 rounded-lg transition-colors",children:"Cancelar"}),l.jsx("button",{onClick:()=>{n(),e()},className:"bg-brand-red hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg transition-colors",children:"Confirmar"})]})]})}):null,_Re=({isOpen:t,onClose:e,femalesToTransfer:n,originSeasonId:r,onConfirmTransfer:i})=>{const{animals:s,breedingSeasons:a,sireLots:o}=rt(),[c,u]=N.useState(new Set),[d,f]=N.useState(""),[h,p]=N.useState(!1),[g,m]=N.useState("");N.useEffect(()=>{t&&(u(new Set(n)),f(""),m(""))},[t,n]);const y=N.useMemo(()=>a.find(E=>E.id===r),[a,r]),x=N.useMemo(()=>a.filter(E=>E.id!==r&&E.status==="Activo"),[a,r]),w=N.useMemo(()=>{const E=new Map(s.map(C=>[C.id,C]));return n.map(C=>E.get(C)).filter(C=>!!C).sort((C,j)=>C.id.localeCompare(j.id))},[n,s]),_=E=>{u(C=>{const j=new Set(C);return j.has(E)?j.delete(E):j.add(E),j})},A=async()=>{if(!d){m("Debes seleccionar una temporada de destino.");return}if(!o.some(C=>C.seasonId===d)){m("La temporada de destino no tiene lotes de reproductor. Crea uno primero.");return}if(c.size===0){m("Debes seleccionar al menos una hembra para transferir.");return}p(!0),m("");try{await i(d,Array.from(c)),p(!1),e()}catch(C){m(C.message||"Error al transferir los animales."),console.error("Error transferring animals:",C),p(!1)}};return t?l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex justify-center items-center z-50 animate-fade-in p-4",onClick:e,children:l.jsxs("div",{className:"bg-ios-modal-bg w-full max-w-lg rounded-2xl flex flex-col animate-slide-up max-h-[90vh]",onClick:E=>E.stopPropagation(),children:[l.jsxs("header",{className:"flex-shrink-0 p-4 border-b border-brand-border",children:[l.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Transferir Animales"}),l.jsxs("p",{className:"text-sm text-zinc-400",children:["Desde la Temporada: ",(y==null?void 0:y.name)||"Cargando..."]})]}),l.jsxs("main",{className:"p-6 space-y-4 overflow-y-auto",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:["Animales a transferir (",c.size,"/",w.length,")"]}),l.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2 p-2 bg-black/20 rounded-lg border border-zinc-700",children:w.length>0?w.map(E=>l.jsxs("div",{onClick:()=>_(E.id),className:"flex items-center gap-3 p-2 rounded-md hover:bg-zinc-700 cursor-pointer transition-colors",children:[c.has(E.id)?l.jsx(uT,{className:"text-brand-orange flex-shrink-0"}):l.jsx(dT,{className:"text-zinc-500 flex-shrink-0"}),l.jsx("span",{className:"font-semibold text-white",children:pt(E)})]},E.id)):l.jsx("p",{className:"text-sm text-zinc-500 text-center py-2",children:"No hay animales para transferir."})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"destination",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Transferir a la Temporada:"}),l.jsxs("select",{id:"destination",value:d,onChange:E=>f(E.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-white appearance-none",children:[l.jsx("option",{value:"",children:"Seleccionar temporada de destino..."}),x.map(E=>l.jsxs("option",{value:E.id,children:[E.name," (Activa)"]},E.id))]})]}),g&&l.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[l.jsx($t,{size:18}),l.jsx("span",{children:g})]})]}),l.jsxs("footer",{className:"flex-shrink-0 flex justify-end gap-4 p-4 border-t border-brand-border",children:[l.jsx("button",{onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg text-white",children:"Cancelar"}),l.jsx("button",{onClick:A,disabled:h||c.size===0||!d,className:"px-5 py-2 bg-brand-blue hover:bg-blue-700 text-white font-bold rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Transfiriendo...":`Transferir ${c.size} Animal(es)`})]})]})}):null},SRe=({sireName:t,animalCount:e,dragControls:n})=>l.jsxs("div",{className:"w-full p-4 flex items-center",children:[l.jsx("div",{className:"pl-2 pr-4 cursor-grab touch-none self-stretch flex items-center",onPointerDown:r=>n.start(r),children:l.jsx(oT,{className:"text-zinc-500"})}),l.jsxs("div",{className:"flex-grow",children:[l.jsxs("p",{className:"font-bold text-lg text-white flex items-center gap-2",children:[l.jsx(xv,{})," Lote: ",t]}),l.jsxs("p",{className:"text-sm text-zinc-400 mt-1 flex items-center gap-2",children:[l.jsx(Ou,{size:14})," ",e," ",e===1?"hembra asignada":"hembras asignadas"]})]}),l.jsx(Gn,{className:"text-zinc-600"})]}),ARe=({lot:t,onEdit:e,onDelete:n,onClick:r,dragControls:i})=>{const s=lc(),a=N.useRef(!1),o=(c,u)=>{const d=u.offset.x,f=u.velocity.x;Math.abs(d)<2&&Math.abs(f)<100||(d<-160/2||f<-500?s.start({x:-160}):s.start({x:0})),setTimeout(()=>{a.current=!1},100)};return l.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-brand-glass border border-brand-border",children:[l.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:[l.jsxs("button",{onClick:e,onPointerDown:c=>c.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[l.jsx(ac,{size:22}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Editar"})]}),l.jsxs("button",{onClick:n,onPointerDown:c=>c.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-red text-white",children:[l.jsx(ya,{size:22}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Eliminar"})]})]}),l.jsx(Ln.div,{drag:"x",dragConstraints:{left:-160,right:0},dragElastic:.1,onDragStart:()=>{a.current=!0},onDragEnd:o,onTap:()=>{a.current||r()},animate:s,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg",children:l.jsx(SRe,{sireName:t.sireName,animalCount:t.animalCount,dragControls:i})})]})},ERe=({lot:t,navigateTo:e,onEdit:n,onDelete:r})=>{const i=HT();return l.jsx(qT,{value:t,dragListener:!1,dragControls:i,children:l.jsx(ARe,{lot:t,dragControls:i,onClick:()=>e({name:"sire-lot-detail",lotId:t.id}),onEdit:()=>n(t),onDelete:()=>r(t)})},t.id)};function jRe({seasonId:t,onBack:e,navigateTo:n}){const{breedingSeasons:r,sireLots:i,fathers:s,animals:a,serviceRecords:o,addSireLot:c,updateSireLot:u,deleteSireLot:d,updateAnimal:f}=rt(),[h,p]=N.useState(!1),[g,m]=N.useState(void 0),[y,x]=N.useState(null),[w,_]=N.useState(null),[A,E]=N.useState(!1),[C,j]=N.useState(null),T=N.useMemo(()=>r.find($=>$.id===t),[r,t]),P=N.useMemo(()=>i.filter($=>$.seasonId===t).map($=>{const Y=s.find(ie=>ie.id===$.sireId),Q=Y?pt(Y):"Desconocido",ce=a.filter(ie=>ie.sireLotId===$.id).length;return{...$,sireName:Q,animalCount:ce,sireId:$.sireId}}),[i,t,s,a]),[I,M]=N.useState(P);N.useEffect(()=>{M(P)},[P]);const F=N.useMemo(()=>{if(!T||T.status!=="Cerrado")return[];const $=new Set(P.map(ce=>ce.id)),Y=a.filter(ce=>ce.sireLotId&&$.has(ce.sireLotId)),Q=new Set(o.filter(ce=>ce.sireLotId&&$.has(ce.sireLotId)).map(ce=>ce.femaleId));return Y.filter(ce=>!Q.has(ce.id))},[T,P,a,o]),R=$=>{m($),p(!0)},H=async $=>{g?await u(g.id,{sireId:$}):await c({seasonId:t,sireId:$}),p(!1),m(void 0)},X=$=>{$.animalCount>0?_(`No se puede eliminar. Reasigna las ${$.animalCount} hembra(s) a otro lote primero.`):x($)},W=()=>{y&&(d(y.id),x(null))},U=async($,Y)=>{j(null);const Q=i.find(ie=>ie.seasonId===$);if(!Q){j("La temporada de destino no tiene lotes de reproductor. Por favor, crea uno primero."),E(!1);return}const ce=Y.map(ie=>f(ie,{sireLotId:Q.id,reproductiveStatus:"En Servicio"}));await Promise.all(ce),E(!1)};return T?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 pb-12 animate-fade-in",children:[l.jsxs("header",{className:"flex items-center pt-8 pb-4 px-4",children:[l.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(ar,{size:24})}),l.jsxs("div",{className:"text-center flex-grow",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:T.name}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Detalle de la Temporada"})]}),l.jsx("div",{className:"w-8"})]}),l.jsxs("div",{className:"space-y-4 px-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-zinc-300",children:"Lotes de Reproductor"}),l.jsxs("button",{onClick:()=>R(),className:"flex items-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-2 px-3 rounded-lg transition-colors text-sm",children:[l.jsx(ir,{size:16})," Añadir Lote"]})]}),I.length>0?l.jsx(KT,{as:"div",axis:"y",values:I,onReorder:M,className:"space-y-3",children:I.map($=>l.jsx(ERe,{lot:$,navigateTo:n,onEdit:R,onDelete:X},$.id))}):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-500",children:"Esta temporada aún no tiene lotes de reproductor."})})]}),T.status==="Cerrado"&&l.jsxs("div",{className:"space-y-4 px-4 pt-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-zinc-300",children:"Resultados: Hembras sin Servicio"}),F.length>0&&l.jsxs("button",{onClick:()=>E(!0),className:"flex items-center gap-2 bg-brand-blue hover:bg-blue-600 text-white font-bold py-2 px-3 rounded-lg text-sm",children:[l.jsx(LF,{size:16})," Transferir"]})]}),l.jsx("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-2",children:F.length>0?F.map($=>l.jsxs("div",{className:"flex items-center justify-between p-2 bg-black/20 rounded-md",children:[l.jsx("span",{className:"font-semibold text-white",children:pt($)}),l.jsxs("span",{className:"text-xs text-zinc-400",children:["Lote Físico: ",$.location||"N/A"]})]},$.id)):l.jsxs("div",{className:"text-center py-6 flex flex-col items-center gap-2",children:[l.jsx(Yee,{size:32,className:"text-zinc-600"}),l.jsx("p",{className:"text-zinc-400 font-semibold",children:"Todas las hembras tuvieron servicio en esta temporada."})]})})]})]}),l.jsx(at,{isOpen:h,onClose:()=>{p(!1),m(void 0)},title:g?`Editar Lote de ${g.sireName}`:"Añadir Lote de Reproductor",children:l.jsx(wRe,{onSave:H,onCancel:()=>{p(!1),m(void 0)},editingLot:g,seasonId:T.id})}),l.jsx(_1,{isOpen:!!y,onClose:()=>x(null),onConfirm:W,title:`Eliminar Lote de ${y==null?void 0:y.sireName}`,message:"¿Estás seguro de que quieres eliminar este lote? Esta acción es irreversible."}),l.jsx(at,{isOpen:!!w,onClose:()=>_(null),title:"Acción no permitida",children:l.jsxs("div",{className:"space-y-4 text-center",children:[" ",l.jsx($t,{size:40,className:"mx-auto text-amber-400"})," ",l.jsx("p",{className:"text-zinc-300",children:w})," ",l.jsx("button",{onClick:()=>_(null),className:"mt-4 bg-brand-orange text-white font-semibold py-2 px-6 rounded-lg",children:"Entendido"})," "]})}),l.jsx(at,{isOpen:!!C,onClose:()=>j(null),title:"Error de Transferencia",children:l.jsxs("div",{className:"space-y-4 text-center",children:[" ",l.jsx($t,{size:40,className:"mx-auto text-amber-400"})," ",l.jsx("p",{className:"text-zinc-300",children:C})," ",l.jsx("button",{onClick:()=>j(null),className:"mt-4 bg-brand-orange text-white font-semibold py-2 px-6 rounded-lg",children:"Entendido"})," "]})}),l.jsx(_Re,{isOpen:A,onClose:()=>E(!1),femalesToTransfer:F.map($=>$.id),originSeasonId:T.id,onConfirmTransfer:U})]}):l.jsxs("div",{className:"text-center p-10",children:[l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Temporada no encontrada."}),l.jsx("button",{onClick:e,className:"mt-4 text-brand-orange",children:"Volver"})]})}const CRe=({animal:t,onSaveSuccess:e,onCancel:n})=>{const{addBodyWeighing:r}=rt(),[i,s]=N.useState(new Date().toISOString().split("T")[0]),[a,o]=N.useState(""),[c,u]=N.useState(!1),[d,f]=N.useState(null),h=async p=>{p.preventDefault(),f(null),u(!0);const g=parseFloat(a);if(isNaN(g)||g<=0){f({type:"error",text:"Por favor, introduce un peso válido."}),u(!1);return}if(g>50){f({type:"error",text:"El peso corporal excede los 50 Kg. Por favor, verifique el dato."}),u(!1);return}try{await r({animalId:t.id,date:i,kg:g}),f({type:"success",text:`Pesaje de ${pt(t)} guardado con éxito.`}),setTimeout(e,1500)}catch(m){f({type:"error",text:m.message||"No se pudo guardar el pesaje."}),u(!1)}};return l.jsx(at,{isOpen:!0,onClose:n,title:`Pesaje Corporal: ${pt(t)}`,children:l.jsxs("form",{onSubmit:h,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"weighingDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha"}),l.jsx("input",{id:"weighingDate",type:"date",value:i,onChange:p=>s(p.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-white",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"weighingKg",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Peso (Kg)"}),l.jsx("input",{id:"weighingKg",type:"number",step:"0.1",value:a,onChange:p=>o(p.target.value),placeholder:"Ej: 32.5",autoFocus:!0,className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-white",required:!0})]})]}),d&&l.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${d.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[d.type==="success"?l.jsx(ri,{size:18}):l.jsx($t,{size:18}),l.jsx("span",{children:d.text})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-brand-border",children:[l.jsx("button",{type:"button",onClick:n,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg text-white",children:"Cancelar"}),l.jsxs("button",{type:"submit",disabled:c,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50 flex items-center gap-2",children:[l.jsx(zh,{size:18})," Guardar"]})]})]})})},TRe=(t,e,n,r,i)=>{const s=[];if(!t)return[];if(t.status!=="Activo"){let o=t.status.toUpperCase();t.isReference&&["VENTA","MUERTE","DESCARTE"].includes(o),It[o]&&s.push(It[o])}if(s.length>0&&s.some(o=>["VENTA","MUERTE","DESCARTE","REFERENCE"].includes(o.key)))return Array.from(new Set(s.map(c=>c.key))).map(c=>It[c]).filter(Boolean);if(t.sex==="Hembra"){const o=e.filter(c=>c.goatId===t.id&&c.status!=="finalizada").sort((c,u)=>new Date(u.parturitionDate).getTime()-new Date(c.parturitionDate).getTime())[0];o&&(o.status==="activa"?s.push(It.MILKING):o.status==="en-secado"?s.push(It.DRYING_OFF):o.status==="seca"&&s.push(It.DRY))}if(t.reproductiveStatus==="Preñada"?s.push(It.PREGNANT):t.reproductiveStatus==="En Servicio"?n.some(c=>c.femaleId===t.id&&c.sireLotId===t.sireLotId)?s.push(It.IN_SERVICE_CONFIRMED):s.push(It.IN_SERVICE):(t.reproductiveStatus==="Vacía"||t.reproductiveStatus==="Post-Parto")&&s.push(It.EMPTY),t.sex==="Macho"){const o=i.filter(d=>d.status==="Activo"),c=new Set(o.map(d=>d.id));r.some(d=>d.sireId===t.id&&c.has(d.seasonId))&&s.push(It.SIRE_IN_SERVICE)}return Array.from(new Set(s.map(o=>o.key))).map(o=>It[o]).filter(Boolean)};function NRe({lotId:t,navigateTo:e,onBack:n}){const{sireLots:r,fathers:i,animals:s,parturitions:a,serviceRecords:o,breedingSeasons:c,updateAnimal:u,addServiceRecord:d}=rt(),[f,h]=N.useState(!1),[p,g]=N.useState(""),[m,y]=N.useState(null),[x,w]=N.useState(!1),[_,A]=N.useState(null),E=N.useMemo(()=>r.find(W=>W.id===t),[r,t]),C=N.useMemo(()=>i.find(W=>W.id===(E==null?void 0:E.sireId)),[i,E]),j=N.useMemo(()=>C?pt(C):"Desconocido",[C]),T=N.useMemo(()=>E?s.filter(W=>W.sireLotId===E.id).sort((W,U)=>W.id.localeCompare(U.id)).map(W=>({...W,formattedAge:wa(W.birthDate),statusObjects:TRe(W,a,o,r,c)})):[],[s,E,a,o,r,c]),P=N.useMemo(()=>p?T.filter(W=>W.id.toLowerCase().includes(p.toLowerCase())||W.name&&W.name.toLowerCase().includes(p.toLowerCase())):T,[T,p]),I=async W=>{if(!E)return;const U=W.map($=>u($,{sireLotId:E.id,reproductiveStatus:"En Servicio"}));await Promise.all(U),h(!1)},M=async W=>{!E||!m||(await d({sireLotId:E.id,femaleId:m.id,serviceDate:W.toISOString().split("T")[0]}),H())},F=W=>{if(!W)return[];const U=[];return U.push({label:"Registrar Servicio",icon:gw,onClick:()=>{w(!1),A("service")},color:"text-pink-400"}),U.push({label:"Declarar Parto",icon:ua,onClick:()=>{w(!1),A("parturition")}}),U.push({label:"Declarar Aborto",icon:bv,onClick:()=>{w(!1),A("abortion")},color:"text-yellow-400"}),U.push({label:"Acciones de Leche",icon:Xl,onClick:()=>{w(!1),A("milkWeighing")}}),U.push({label:"Agregar Peso Corporal",icon:sc,onClick:()=>{w(!1),A("bodyWeighing")}}),U.push({label:"Dar de Baja",icon:va,onClick:()=>{w(!1),A("decommission")},color:"text-brand-red"}),U},R=W=>{y(W),w(!0)},H=()=>{A(null),y(null)},X=async W=>{if(!m)return;const U={status:W.reason,isReference:!0,endDate:W.date};W.reason==="Venta"&&Object.assign(U,{salePrice:W.salePrice,saleBuyer:W.saleBuyer,salePurpose:W.salePurpose}),W.reason==="Muerte"&&(U.deathReason=W.deathReason),W.reason==="Descarte"&&Object.assign(U,{cullReason:W.cullReason,cullReasonDetails:W.cullReasonDetails}),await u(m.id,U),H()};return E?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[l.jsxs("header",{className:"flex items-center justify-between pt-8 pb-4 px-4 sticky top-0 bg-brand-dark/80 backdrop-blur-lg z-10 border-b border-brand-border",children:[l.jsx("button",{onClick:n,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(ar,{size:24})}),l.jsxs("div",{className:"text-center flex-grow",children:[l.jsxs("h1",{className:"text-xl font-bold tracking-tight text-white truncate",children:["Lote: ",j]}),l.jsxs("p",{className:"text-xs text-zinc-400 truncate",children:["Reproductor: ",pt(C)]})]}),l.jsx("button",{onClick:()=>h(!0),className:"p-2 -mr-2 bg-brand-orange hover:bg-orange-600 text-white rounded-full transition-colors",children:l.jsx(ir,{size:24})})]}),l.jsxs("div",{className:"space-y-4 pt-4 px-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("h3",{className:"text-lg font-semibold text-zinc-300",children:["Hembras Asignadas (",P.length,")"]}),l.jsxs("div",{className:"relative w-40",children:[l.jsx(Iu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-500"}),l.jsx("input",{type:"search",value:p,onChange:W=>g(W.target.value),placeholder:"Buscar ID o Nombre...",className:"w-full bg-zinc-800/80 rounded-lg pl-8 pr-2 py-1 text-white border-transparent focus:border-brand-amber focus:ring-0 text-sm"})]})]}),l.jsx("div",{className:"space-y-2",children:P.length>0?P.map(W=>l.jsx(xU,{animal:W,onSelect:U=>e({name:"rebano-profile",animalId:U}),onOpenActions:R},W.id)):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-500",children:p?"No se encontraron coincidencias.":"Aún no has asignado hembras a este lote."})})})]})]}),l.jsx(b1,{isOpen:f,onClose:()=>h(!1),onSelect:I,animals:s,parturitions:a,serviceRecords:o,breedingSeasons:c,sireLots:r,title:`Asignar Hembras al Lote de ${j}`,sireIdForInbreedingCheck:E.sireId}),l.jsx(Mu,{isOpen:x,onClose:()=>w(!1),title:`Acciones para ${pt(m)}`,actions:F(m)}),m&&l.jsxs(l.Fragment,{children:[_==="service"&&l.jsx(yP,{isOpen:!0,onClose:H,onSave:M,animal:m}),_==="parturition"&&l.jsx(cd,{isOpen:!0,onClose:H,motherId:m.id}),_==="abortion"&&l.jsx(vP,{animal:m,onCancel:H,onSaveSuccess:H}),_==="bodyWeighing"&&l.jsx(CRe,{animal:m,onCancel:H,onSaveSuccess:H}),_==="decommission"&&l.jsx(gP,{animal:m,onCancel:H,onConfirm:X})]})]}):l.jsxs("div",{className:"text-center p-10",children:[l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Lote de Reproductor no encontrado."}),l.jsx("button",{onClick:n,className:"mt-4 text-brand-orange",children:"Volver"})]})}const PRe=t=>{const[e,n]=N.useState([]),[r,i]=N.useState([]),[s,a]=N.useState(!0);return N.useEffect(()=>{if(!t)return;(async()=>{a(!0);try{const u=Dt(),[d,f]=await Promise.all([u.weighings.where("goatId").equals(t).toArray(),u.parturitions.where("goatId").equals(t).toArray()]);n(d),i(f.sort((h,p)=>new Date(h.parturitionDate).getTime()-new Date(p.parturitionDate).getTime()))}catch(u){console.error(`Error al cargar datos para ${t}:`,u)}finally{a(!1)}})()},[t]),{...N.useMemo(()=>{if(r.length===0)return{allLactations:[],parturitionIntervals:[],lastWeighingDate:null};const c=r.map((f,h)=>{const p=new Date(f.parturitionDate),g=h<r.length-1?new Date(r[h+1].parturitionDate):new Date(9999,11,31),m=e.filter(C=>{const j=new Date(C.date);return j>=p&&j<g}),y=m.map(C=>({del:pc(f.parturitionDate,C.date),kg:C.kg})).sort((C,j)=>C.del-j.del),x=m.reduce((C,j)=>C+j.kg,0),w=m.length>0?x/m.length:0,_=y.reduce((C,j)=>j.kg>C.kg?j:C,{kg:0,del:0}),A=y[y.length-1],E=A?A.del:0;return{parturitionDate:f.parturitionDate,weighings:m,lactationCurve:y,averageProduction:w,peakProduction:_,totalDays:E}}),u=r.slice(1).map((f,h)=>{const p=r[h],g=new Date(f.parturitionDate).getTime()-new Date(p.parturitionDate).getTime();return{period:`${p.parturitionDate.substring(0,4)} - ${f.parturitionDate.substring(0,4)}`,days:Math.round(g/(1e3*60*60*24))}}),d=e.sort((f,h)=>new Date(h.date).getTime()-new Date(f.date).getTime())[0];return{allLactations:c,parturitionIntervals:u,lastWeighingDate:(d==null?void 0:d.date)||null}},[e,r]),isLoading:s}},Iy=(t,e,n)=>{const r={};return t.forEach(i=>{const s=e.filter(o=>o.goatId===i.goatId&&new Date(i.date)>=new Date(o.parturitionDate)).sort((o,c)=>new Date(c.parturitionDate).getTime()-new Date(o.parturitionDate).getTime())[0];if(!s)return;const a=pc(s.parturitionDate,i.date);n!==void 0&&a>n||(r[a]||(r[a]={totalKg:0,count:0}),r[a].totalKg+=i.kg,r[a].count++)}),Object.entries(r).map(([i,s])=>({del:parseInt(i),kg:s.totalKg/s.count})).sort((i,s)=>i.del-s.del)},Oy=(t,e)=>{let n=0,r=0;return t.forEach(i=>{const s=e.filter(a=>a.goatId===i).sort((a,o)=>new Date(a.parturitionDate).getTime()-new Date(o.parturitionDate).getTime());for(let a=1;a<s.length;a++){const o=s[a],c=s[a-1];if(c.dryingStartDate){const u=new Date(c.dryingStartDate),f=new Date(o.parturitionDate).getTime()-u.getTime(),h=Math.round(f/(1e3*60*60*24));h>=0&&(n+=h,r++)}}}),r===0?null:n/r},kRe=(t,e,n,r)=>{const[i,s]=N.useState(null),[a,o]=N.useState(!1);return N.useEffect(()=>{if(!t.type||!t.animal){s(null),o(!1);return}const{type:c,animal:u,highlightedLactationDEL:d}=t;(async()=>{o(!0),s(null);let h=null;try{if(c==="PRIMIPARAS_AVG"||c==="MULTIPARAS_AVG"||c==="HERD_AVG"){const p=n.reduce((A,E)=>(A[E.goatId]=(A[E.goatId]||0)+1,A),{}),g=n.filter(A=>{const E=p[A.goatId]||0;return c==="PRIMIPARAS_AVG"?E===1:c==="MULTIPARAS_AVG"?E>1:!0}),m=new Set(g.map(A=>A.goatId)),y=r.filter(A=>m.has(A.goatId)),x=Iy(y,g,d),w=Oy(m,n);h={name:c==="PRIMIPARAS_AVG"?"Prom. Primíparas":c==="MULTIPARAS_AVG"?"Prom. Multíparas":"Prom. Rebaño",curve:x,averageRestInterval:w}}else if(c==="PEERS_AVG"){const p=new Date(u.birthDate),g=p.getFullYear(),m=Math.floor(p.getMonth()/6),y=new Set(e.filter(C=>{const j=new Date(C.birthDate);return j.getFullYear()===g&&Math.floor(j.getMonth()/6)===m&&C.id!==u.id}).map(C=>C.id)),x=new Set(n.filter(C=>y.has(C.goatId)).map(C=>C.goatId)),w=n.filter(C=>x.has(C.goatId)),_=r.filter(C=>x.has(C.goatId)),A=Iy(_,w,d),E=Oy(x,n);h={name:`Prom. Pares (${g}-S${m+1})`,curve:A,averageRestInterval:E}}else if(c==="DAM")if(u.motherId){const p=n.filter(x=>x.goatId===u.motherId),g=r.filter(x=>x.goatId===u.motherId),m=Iy(g,p,d),y=Oy(new Set([u.motherId]),n);h={name:`Prom. Madre (${u.motherId})`,curve:m,averageRestInterval:y}}else h={name:"Madre (Desconocida)",curve:[],averageRestInterval:null};else if(c==="PROGENY_AVG"){const p=new Set(e.filter(w=>w.motherId===u.id&&w.sex==="Hembra").map(w=>w.id)),g=n.filter(w=>p.has(w.goatId)),m=r.filter(w=>p.has(w.goatId)),y=Iy(m,g,d),x=Oy(p,n);h={name:"Prom. Hijas",curve:y,averageRestInterval:x}}else if(c==="SPECIFIC_LACTATION"&&t.specificLactationIndex!==void 0){const p=n.filter(m=>m.goatId===u.id).sort((m,y)=>new Date(m.parturitionDate).getTime()-new Date(y.parturitionDate).getTime());let g=null;if(t.specificLactationIndex>0&&t.specificLactationIndex<p.length){const m=p[t.specificLactationIndex-1];if(m.dryingStartDate){const y=new Date(m.dryingStartDate),w=new Date(p[t.specificLactationIndex].parturitionDate).getTime()-y.getTime();g=Math.round(w/(1e3*60*60*24))}}if(t.specificLactationIndex<p.length){const m=p[t.specificLactationIndex],y=t.specificLactationIndex+1<p.length?new Date(p[t.specificLactationIndex+1].parturitionDate):new Date(9999,11,31),w=r.filter(A=>{const E=new Date(A.date);return A.goatId===u.id&&E>=new Date(m.parturitionDate)&&E<y}).map(A=>({del:pc(m.parturitionDate,A.date),kg:A.kg})).sort((A,E)=>A.del-E.del);h={name:`Lact. ${new Date(m.parturitionDate).getFullYear()} (#${t.specificLactationIndex+1})`,curve:w,averageRestInterval:g}}else h={name:"Lactancia no encontrada",curve:[],averageRestInterval:null}}}catch(p){console.error("Error calculating comparison data:",p),h={name:"Error",curve:[],averageRestInterval:null}}finally{s(h),o(!1)}})()},[t,e,n,r]),{comparativeData:i,isLoading:a}},My=[{stroke:"#FF9500",fill:"url(#gradient0)"},{stroke:"#34C759",fill:"url(#gradient1)"},{stroke:"#007AFF",fill:"url(#gradient2)"},{stroke:"#AF52DE",fill:"url(#gradient3)"},{stroke:"#FF3B30",fill:"url(#gradient4)"},{stroke:"#5AC8FA",fill:"url(#gradient5)"},{stroke:"#FFCC00",fill:"url(#gradient6)"}],SS="#007AFF",o3="comparisonGradient",DRe=({active:t,payload:e,label:n})=>t&&e&&e.length?l.jsxs("div",{className:"bg-black/70 backdrop-blur-md p-3 rounded-lg border border-zinc-700 text-white shadow-xl",children:[l.jsxs("p",{className:"label text-zinc-400 text-sm font-medium mb-1",children:["DEL: ",n]}),e.map(r=>{var i;return l.jsxs("p",{style:{color:r.stroke||((i=r.payload)==null?void 0:i.stroke)},className:"font-semibold text-base flex justify-between items-center gap-4",children:[l.jsxs("span",{children:[r.name,":"]}),l.jsx("span",{children:typeof r.value=="number"?`${r.value.toFixed(2)} Kg`:"N/A"})]},r.name)})]}):null,IRe=({lactationsData:t,comparisonData:e,highlightedLactationDate:n,onLactationClick:r})=>{const[i,s]=N.useState(null),a=N.useMemo(()=>t?t.slice(-My.length).reverse():[],[t]),o=N.useMemo(()=>new Map(a.map(m=>[`Lact. ${new Date(m.parturitionDate).getFullYear()}`,m.parturitionDate])),[a]),c=(m,y)=>{const x=o.get(m),w=h&&n===x,_=i===m,A=y.dataKey==="kg"&&e&&m===e.name;let E=1;return A?E=1:h?E=w?1:.7:i&&(E=_?1:.7),l.jsx("span",{style:{color:y.color,opacity:E,transition:"opacity 0.2s ease"},children:m})},u=N.useMemo(()=>{if(!a)return[];let m=a.flatMap(y=>y.lactationCurve);return e!=null&&e.curve&&(m=m.concat(e.curve)),m},[a,e]),d=N.useMemo(()=>!u||u.length===0?305:Math.max(...u.map(m=>m.del),0),[u]),f=N.useMemo(()=>!u||u.length===0?5:Math.max(...u.map(m=>m.kg),0),[u]),h=n!==null,p=SS,g=`url(#${o3})`;return a?a.length===0?l.jsx("div",{className:"text-center p-8 text-zinc-500",children:"No hay datos históricos de lactancia para mostrar."}):l.jsx("div",{className:"w-full h-72",children:l.jsx(Er,{children:l.jsxs(eP,{margin:{top:5,right:15,left:-25,bottom:5},onClick:m=>{(!m||!m.activePayload||m.activePayload.length===0)&&r(null)},children:[l.jsxs("defs",{children:[My.map((m,y)=>l.jsxs("linearGradient",{id:`gradient${y}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[l.jsx("stop",{offset:"5%",stopColor:m.stroke,stopOpacity:.7}),l.jsx("stop",{offset:"95%",stopColor:m.stroke,stopOpacity:.15})]},`grad-${y}`)),l.jsxs("linearGradient",{id:o3,x1:"0",y1:"0",x2:"0",y2:"1",children:[l.jsx("stop",{offset:"5%",stopColor:SS,stopOpacity:.6})," ",l.jsx("stop",{offset:"95%",stopColor:SS,stopOpacity:.1})," "]})]}),l.jsx(tp,{strokeDasharray:"3 3",stroke:"rgba(255, 255, 255, 0.1)",vertical:!1}),l.jsx(sr,{dataKey:"del",type:"number",domain:[0,d>0?d:305],tick:{fill:"rgba(255, 255, 255, 0.5)",fontSize:10},stroke:"rgba(255, 255, 255, 0.2)",axisLine:!1,tickLine:!1,name:"DEL"}),l.jsx(gr,{orientation:"right",tick:{fill:"rgba(255, 255, 255, 0.5)",fontSize:10},stroke:"rgba(255, 255, 255, 0.2)",axisLine:!1,tickLine:!1,domain:[0,f>0?Math.ceil(f+.5):5],unit:"Kg",width:35}),l.jsx(fn,{content:l.jsx(DRe,{}),cursor:{stroke:"rgba(255,255,255,0.4)",strokeWidth:1.5}}),l.jsx(aa,{verticalAlign:"top",height:36,iconType:"plainline",wrapperStyle:{fontSize:"12px",paddingBottom:"10px"},formatter:c,onMouseEnter:m=>s(m.value),onMouseLeave:()=>s(null)}),a.map((m,y)=>{const x=My[y%My.length],_=`Lact. ${new Date(m.parturitionDate).getFullYear()}`,A=n===m.parturitionDate,E=i===_,C=A||E,j=h?A?1:.7:E?1:.9,T=C?3.5:2.5,P=h?A?.7:.3:E?.8:.7;return l.jsxs(q.Fragment,{children:[l.jsx(ha,{type:"monotone",data:m.lactationCurve,dataKey:"kg",name:_,stroke:"none",fill:x.fill,fillOpacity:P,activeDot:!1,style:{transition:"opacity 0.2s ease, fill-opacity 0.2s ease"}}),l.jsx(Uu,{type:"monotone",data:m.lactationCurve,dataKey:"kg",name:_,stroke:x.stroke,strokeWidth:T,dot:!1,activeDot:{r:5,strokeWidth:0},strokeOpacity:j,style:{transition:"opacity 0.2s ease, stroke-width 0.2s ease"},onClick:()=>{r(m.parturitionDate)},cursor:"pointer"})]},m.parturitionDate)}),e&&e.curve.length>0&&l.jsxs(q.Fragment,{children:[l.jsx(ha,{type:"monotone",data:e.curve,dataKey:"kg",name:e.name,stroke:"none",fill:g,fillOpacity:h?.4:.6,style:{transition:"opacity 0.2s ease"}}),l.jsx(Uu,{type:"monotone",data:e.curve,dataKey:"kg",name:e.name,stroke:p,strokeWidth:2.5,strokeDasharray:"4 4",dot:!1,activeDot:{r:5,strokeWidth:0},strokeOpacity:1,style:{transition:"opacity 0.2s ease"}})]})]})})}):l.jsx("div",{className:"text-center p-8 text-zinc-500",children:"Cargando datos..."})},ORe=({lactationNumber:t,lactationData:e,onClick:n})=>{const r=new Date(e.parturitionDate+"T00:00:00Z").getUTCFullYear();return l.jsxs("button",{onClick:n,className:"w-full text-left bg-black/20 rounded-2xl p-4 border border-zinc-700/80 hover:border-brand-blue/50 transition-colors group",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsxs("h4",{className:"font-bold text-lg text-white",children:["Lactancia #",t," ",l.jsxs("span",{className:"text-zinc-400 font-normal",children:["(",r,")"]})]}),l.jsx(Gn,{className:"text-zinc-500 group-hover:text-brand-blue transition-colors"})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"text-xs text-zinc-400 flex items-center justify-center gap-1",children:[l.jsx(yv,{size:12}),"Promedio"]}),l.jsxs("p",{className:"text-xl font-semibold text-white",children:[e.averageProduction.toFixed(2),l.jsx("span",{className:"text-sm font-normal text-zinc-400",children:" Kg"})]})]}),l.jsxs("div",{children:[l.jsxs("p",{className:"text-xs text-zinc-400 flex items-center justify-center gap-1",children:[l.jsx(ba,{size:12}),"Pico"]}),l.jsxs("p",{className:"text-xl font-semibold text-white",children:[e.peakProduction.kg.toFixed(2),l.jsx("span",{className:"text-sm font-normal text-zinc-400",children:" Kg"})]})]}),l.jsxs("div",{children:[l.jsxs("p",{className:"text-xs text-zinc-400 flex items-center justify-center gap-1",children:[l.jsx(rT,{size:12}),"Duración"]}),l.jsxs("p",{className:"text-xl font-semibold text-white",children:[e.totalDays,l.jsx("span",{className:"text-sm font-normal text-zinc-400",children:" días"})]})]})]})]})},AS=(t,e=2,n="Kg")=>t==null||isNaN(t)?"N/A":`${t.toFixed(e)} ${n}`,MRe=(t,e,n)=>{const r=n.find(a=>a.goatId===e&&a.parturitionDate===t.parturitionDate);if(!r)return null;const i=n.filter(a=>a.goatId===e&&new Date(a.parturitionDate)<new Date(r.parturitionDate)).sort((a,o)=>new Date(o.parturitionDate).getTime()-new Date(a.parturitionDate).getTime())[0];if(!i||!i.dryingStartDate)return null;const s=new Date(r.parturitionDate).getTime()-new Date(i.dryingStartDate).getTime();return Math.round(s/(1e3*60*60*24))},Ry=({label:t,valueA:e,valueB:n,unit:r,decimals:i=2,invertColors:s=!1})=>{const a=e!=null,o=n!=null,c=a&&o;let u=null,d="N/A",f="text-zinc-400",h=lT;return c&&(u=e-n,Math.abs(u)<.01&&(u=0),d=`${u>0?"+":""}${u.toFixed(i)} ${r}`,u>0?(f=s?"text-brand-red":"text-brand-green",h=Yf):u<0&&(f=s?"text-brand-green":"text-brand-red",h=Gf)),l.jsxs("div",{className:"py-3 border-b border-zinc-700/50 flex justify-between items-center",children:[l.jsx("span",{className:"text-sm font-medium text-zinc-400",children:t}),l.jsxs("div",{className:"flex flex-col items-end",children:[l.jsx("span",{className:"text-lg font-semibold text-white",children:AS(e,i,r)}),c?l.jsxs("span",{className:`text-sm font-medium flex items-center ${f}`,children:[l.jsx(h,{size:16,className:"mr-0.5"}),d,l.jsxs("span",{className:"text-zinc-500 ml-2 text-xs font-normal",children:["(vs ",AS(n,i,r),")"]})]}):l.jsxs("span",{className:"text-sm font-medium text-zinc-500",children:["vs ",AS(n,i,r)]})]})]})},RRe=({lactationA:t,comparisonB:e,allParturitions:n,animalId:r})=>{const i=e!=null&&e.curve.length?e.curve.reduce((d,f)=>d+f.kg,0)/e.curve.length:null,s=e!=null&&e.curve.length?e.curve.reduce((d,f)=>f.kg>d.kg?f:d,{kg:0,del:0}):null,a=e!=null&&e.curve.length?e.curve[e.curve.length-1].del:null,o=N.useMemo(()=>MRe(t,r,n),[t,r,n]),c=e==null?void 0:e.averageRestInterval,u=`Lact. ${new Date(t.parturitionDate).getFullYear()}`;return l.jsxs("div",{className:"mt-4 pt-4 border-t border-brand-border/50 text-white animate-fade-in",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2 px-1",children:[l.jsx("span",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wide",children:"Métrica"}),l.jsxs("div",{className:"flex flex-col items-end",children:[l.jsx("span",{className:"text-xs font-semibold text-white uppercase tracking-wide",children:u}),l.jsxs("span",{className:"text-xs font-light text-zinc-400",children:["vs ",(e==null?void 0:e.name)||"..."]})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx(Ry,{label:"Promedio",valueA:t.averageProduction,valueB:i,unit:"Kg",decimals:2}),l.jsx(Ry,{label:"Pico",valueA:t.peakProduction.kg,valueB:s==null?void 0:s.kg,unit:"Kg",decimals:2}),l.jsx(Ry,{label:"Duración (DEL)",valueA:t.totalDays,valueB:a,unit:"días",decimals:0}),l.jsx(Ry,{label:"Descanso Previo",valueA:o,valueB:c,unit:"días",decimals:0,invertColors:!0})]})]})},LRe=({active:t,payload:e,label:n})=>{var r;return t&&e&&e.length?l.jsxs("div",{className:"bg-zinc-800/80 backdrop-blur-md p-3 rounded-lg border border-zinc-700 text-white shadow-xl",children:[l.jsxs("p",{className:"label text-zinc-400 text-sm font-medium mb-1",children:["DEL: ",n]}),l.jsxs("p",{className:"font-semibold text-base",style:{color:e[0].stroke||((r=e[0].payload)==null?void 0:r.stroke)||e[0].fill},children:[e[0].name,": ",e[0].value.toFixed(2)," Kg"]})]}):null};function QU({animalId:t,onBack:e,navigateTo:n}){const{animals:r,parturitions:i,weighings:s,startDryingProcess:a,setLactationAsDry:o}=rt(),{allLactations:c,parturitionIntervals:u,lastWeighingDate:d,isLoading:f}=PRe(t),[h,p]=N.useState(!1),[g,m]=N.useState(null),[y,x]=N.useState(!1),[w,_]=N.useState(null),A=N.useMemo(()=>r.find(ve=>ve.id===t)||null,[r,t]),[E,C]=N.useState({type:null,animal:A,highlightedLactationDEL:void 0}),{comparativeData:j,isLoading:T}=kRe(E,r,i,s),P=N.useMemo(()=>{if(c.length===0)return null;const ve=c[c.length-1],je=i.find(Se=>Se.parturitionDate===ve.parturitionDate&&Se.goatId===t);return{...ve,id:je==null?void 0:je.id,status:je==null?void 0:je.status}},[c,i,t]),I=N.useMemo(()=>{if(!P||P.status==="seca"||P.status==="finalizada")return"N/A";const ve=P.status!=="activa"&&d?d:new Date().toISOString().split("T")[0];return pc(P.parturitionDate,ve)},[P,d]),M=N.useMemo(()=>!P||P.weighings.length===0?null:[...P.weighings].sort((je,Se)=>new Date(Se.date).getTime()-new Date(je.date).getTime())[0].kg,[P]),F=N.useMemo(()=>!y||!j||T||j.curve.length===0?null:{name:j.name,curve:j.curve},[y,j,T]),R=N.useMemo(()=>c.length>0?c[c.length-1]:null,[c]),H=N.useMemo(()=>u.length>0?u[u.length-1].days:0,[u]),X=N.useMemo(()=>c.length<=1?[]:c.slice(0,-1).reverse(),[c]);if(f)return l.jsx("div",{className:"text-center p-10",children:l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando perfil..."})});const W=c.length===1,U=ve=>{if(!ve)return;const je=c.find(Se=>Se.parturitionDate===ve);return!je||je.lactationCurve.length===0?0:Math.max(...je.lactationCurve.map(Se=>Se.del),0)},$=ve=>{_(ve);const je=U(ve);ve?(x(!0),C(Se=>({...Se,animal:A,highlightedLactationDEL:je}))):(x(!1),C({type:null,animal:null,highlightedLactationDEL:void 0}))},Y=()=>{const ve=!y;if(x(ve),ve){let je=w;!je&&R&&(je=R.parturitionDate,_(je));const Se=U(je);C(Me=>({...Me,animal:A,highlightedLactationDEL:Se}))}else _(null),C({type:null,animal:null,highlightedLactationDEL:void 0})},Q=(ve,je)=>{C(Se=>{const Me=Se.type===ve&&Se.specificLactationIndex===je?null:ve;let Qe=w;Me&&(x(!0),!Qe&&R&&(Qe=R.parturitionDate,_(Qe)));const me=U(Qe);return{...Se,type:Me,animal:A,specificLactationIndex:ve==="SPECIFIC_LACTATION"?je:void 0,highlightedLactationDEL:me}})},ce=ve=>{ve&&ve.lactationCurve.length>0&&(m(ve),p(!0))},ie=(ve,je)=>{const Se=E.type===ve&&(ve!=="SPECIFIC_LACTATION"||E.specificLactationIndex===je);let Me="";return W&&ve==="PRIMIPARAS_AVG"&&(Me="ring-2 ring-amber-400"),!W&&ve==="MULTIPARAS_AVG"&&(Me="ring-2 ring-amber-400"),`px-2 py-1 text-xs rounded-md transition-colors ${Se?"bg-amber-500 text-black font-semibold":"bg-zinc-700/50 text-zinc-300 hover:bg-zinc-600/50"} ${Me}`},oe=w!==null;return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-4xl mx-auto space-y-4 animate-fade-in px-4 pb-12",children:[l.jsxs("header",{className:"flex items-center pt-8 pb-4 sticky top-0 z-10 bg-brand-dark/80 backdrop-blur-md -mx-4 px-4 border-b border-brand-border/50 mb-4",children:[l.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(ar,{size:24})}),l.jsxs("div",{className:"text-center flex-grow",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:t}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Perfil de Lactancia"})]}),l.jsx("button",{onClick:()=>n({name:"rebano-profile",animalId:t}),className:"p-2 -mr-2 text-zinc-400 hover:text-white transition-colors",title:"Ir a la ficha general del animal",children:l.jsx(pw,{size:24})})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[l.jsx(yv,{size:14}),l.jsx("span",{children:"Promedio Actual"})]}),l.jsxs("p",{className:"text-2xl font-bold text-white",children:[(R==null?void 0:R.averageProduction.toFixed(2))||"N/A"," ",l.jsx("span",{className:"text-lg text-zinc-400",children:"Kg"})]})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[l.jsx(ba,{size:14}),l.jsx("span",{children:"Pico Prod. Actual"})]}),l.jsxs("p",{className:"text-2xl font-bold text-white",children:[(R==null?void 0:R.peakProduction.kg.toFixed(2))||"N/A"," ",l.jsx("span",{className:"text-lg text-zinc-400",children:"Kg"})]})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[l.jsx(rT,{size:14}),l.jsx("span",{children:"DEL Actual"})]}),l.jsx("p",{className:"text-2xl font-bold text-white",children:I})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[l.jsx(Jee,{size:14}),l.jsx("span",{children:"Últ. Int. Partos"})]}),l.jsxs("p",{className:"text-2xl font-bold text-white",children:[H||"N/A"," ",l.jsx("span",{className:"text-lg text-zinc-400",children:"días"})]})]}),l.jsxs("button",{onClick:()=>ce(R),disabled:!R||R.weighings.length===0,className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-amber transition-colors col-span-2 md:col-span-1 disabled:opacity-50 disabled:cursor-not-allowed relative group",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[l.jsx(Nee,{size:14}),l.jsx("span",{children:"Últ. Pesaje"})]}),l.jsxs("p",{className:"text-2xl font-bold text-white",children:[(M==null?void 0:M.toFixed(2))??"N/A"," ",l.jsx("span",{className:"text-lg text-zinc-400",children:"Kg"})]}),l.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:d?new Date(d+"T00:00:00").toLocaleDateString():""}),l.jsx("div",{className:"absolute top-3 right-3 text-zinc-500 group-hover:text-brand-amber transition-colors",children:l.jsx(vv,{size:18})})]})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border relative",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center border-b border-brand-border pb-2 mb-4 gap-2",children:[l.jsx("h3",{className:"text-zinc-400 font-semibold text-xs uppercase",children:"Historial de Lactancias"}),l.jsxs("div",{className:"flex items-center space-x-2 self-end sm:self-center",children:[oe&&l.jsxs("button",{onClick:()=>$(null),className:"text-xs font-semibold text-zinc-400 hover:text-white animate-fade-in flex items-center gap-1 bg-zinc-700/50 px-2 py-1 rounded-md",title:"Quitar zoom",children:[l.jsx(Ree,{size:14}),"Ver Todo"]}),l.jsx("span",{className:"text-xs font-semibold text-zinc-300",children:"Comparar:"}),l.jsx("button",{onClick:Y,className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${y?"bg-amber-500":"bg-zinc-700"}`,children:l.jsx("span",{"aria-hidden":"true",className:`inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${y?"translate-x-5":"translate-x-0"}`})})]})]}),y&&l.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-4 animate-fade-in p-2 bg-black/20 rounded-lg",children:[l.jsx("span",{className:"text-xs font-semibold text-zinc-300 w-full sm:w-auto",children:"Grupos:"}),l.jsx("button",{onClick:()=>Q("PRIMIPARAS_AVG"),className:ie("PRIMIPARAS_AVG"),children:"vs Primíparas"}),l.jsx("button",{onClick:()=>Q("MULTIPARAS_AVG"),className:ie("MULTIPARAS_AVG"),children:"vs Multíparas"}),l.jsx("button",{onClick:()=>Q("HERD_AVG"),className:ie("HERD_AVG"),children:"vs Rebaño"}),l.jsx("button",{onClick:()=>Q("PEERS_AVG"),className:ie("PEERS_AVG"),children:"vs Pares"}),l.jsx("span",{className:"text-xs font-semibold text-zinc-300 w-full sm:w-auto pt-2 sm:pt-0",children:"Familia:"}),l.jsx("button",{onClick:()=>Q("DAM"),className:ie("DAM"),disabled:!(A!=null&&A.motherId),children:"Madre"}),l.jsx("button",{onClick:()=>Q("PROGENY_AVG"),className:ie("PROGENY_AVG"),children:"Prom. Hijas"}),l.jsx("span",{className:"text-xs font-semibold text-zinc-300 w-full sm:w-auto pt-2 sm:pt-0",children:"Propias:"}),X.map((ve,je)=>l.jsxs("button",{onClick:()=>Q("SPECIFIC_LACTATION",c.length-2-je),className:ie("SPECIFIC_LACTATION",c.length-2-je),children:["vs Lact. #",c.length-1-je," (",new Date(ve.parturitionDate).getFullYear(),")"]},ve.parturitionDate))]}),l.jsx(IRe,{lactationsData:c,comparisonData:F,highlightedLactationDate:w,onLactationClick:$}),T&&l.jsxs("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 backdrop-blur-sm rounded-xl text-white",children:[l.jsx(ug,{className:"animate-spin mr-2"})," Calculando comparación..."]}),y&&j&&R&&!T&&l.jsx(RRe,{lactationA:c.find(ve=>ve.parturitionDate===w)||R,comparisonB:j,allParturitions:i,animalId:t})]}),X.length>0&&l.jsxs("div",{className:"space-y-3 pt-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-zinc-300 px-1",children:"Lactancias Anteriores"}),X.map((ve,je)=>l.jsx(ORe,{lactationNumber:c.length-1-je,lactationData:ve,onClick:()=>ce(ve)},ve.parturitionDate))]}),(P==null?void 0:P.id)&&P.status!=="finalizada"&&l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsx("h3",{className:"text-zinc-400 font-semibold text-xs uppercase mb-3",children:"Gestión de Lactancia Actual"}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[P.status==="activa"&&l.jsxs("button",{onClick:()=>a(P.id),className:"w-full flex items-center justify-center space-x-2 bg-blue-600/80 hover:bg-blue-500/80 text-white font-semibold py-3 px-4 rounded-xl transition-colors",children:[l.jsx(ed,{size:20}),l.jsx("span",{children:"Iniciar Proceso de Secado"})]}),(P.status==="activa"||P.status==="en-secado")&&l.jsxs("button",{onClick:()=>o(P.id),className:"w-full flex items-center justify-center space-x-2 bg-gray-600/80 hover:bg-gray-500/80 text-white font-semibold py-3 px-4 rounded-xl transition-colors",children:[l.jsx(va,{size:20}),l.jsx("span",{children:"Declarar Lactancia como Seca"})]}),P.status==="seca"&&l.jsx("div",{className:"w-full text-center p-3 bg-black/20 rounded-xl",children:l.jsx("p",{className:"font-semibold text-green-400",children:"Esta lactancia ha finalizado."})})]}),P.status==="en-secado"&&l.jsx("p",{className:"text-center text-xs text-zinc-400 mt-2",children:"El animal está en su período de secado."})]})]}),l.jsx(at,{isOpen:h,onClose:()=>p(!1),title:`Curva Lactancia (${g?new Date(g.parturitionDate).getFullYear():"Actual"}) - ${t}`,children:g?l.jsx("div",{className:"w-full h-[320px] -ml-2 -mr-2",children:l.jsx(Er,{width:"100%",height:"100%",children:l.jsxs(eP,{data:g.lactationCurve,margin:{top:10,right:10,left:0,bottom:0},children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"colorLactation",x1:"0",y1:"0",x2:"0",y2:"1",children:[l.jsx("stop",{offset:"5%",stopColor:"#FBBF24",stopOpacity:.8}),l.jsx("stop",{offset:"95%",stopColor:"#FBBF24",stopOpacity:0})]})}),l.jsx(tp,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)",vertical:!1}),l.jsx(sr,{dataKey:"del",type:"number",domain:["dataMin","dataMax"],tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},tickLine:!1,axisLine:{stroke:"rgba(255,255,255,0.2)"}}),l.jsx(gr,{orientation:"right",tickFormatter:ve=>`${ve.toFixed(1)} Kg`,tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},tickLine:!1,axisLine:{stroke:"rgba(255,255,255,0.2)"}}),l.jsx(fn,{content:l.jsx(LRe,{})}),l.jsx(ha,{type:"monotone",dataKey:"kg",name:`${t} (${new Date(g.parturitionDate).getFullYear()})`,stroke:"#FBBF24",fill:"url(#colorLactation)",strokeWidth:2.5,dot:{r:3,fill:"#FBBF24",stroke:"#FBBF24",strokeWidth:1},activeDot:{r:5,fill:"#FFFFFF",stroke:"#FBBF24",strokeWidth:2}})]})})}):l.jsx("p",{className:"text-center text-zinc-400 py-8",children:"No hay datos para mostrar la curva seleccionada."})})]})}const zRe=({plan:t})=>l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsx("p",{className:"font-semibold text-white",children:t.details}),l.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:["Iniciado el: ",new Date(t.startDate+"T00:00:00").toLocaleDateString("es-VE")]})]});function $Re({lotName:t,onBack:e}){const{feedingPlans:n,addFeedingPlan:r}=rt(),[i,s]=N.useState(""),[a,o]=N.useState(new Date().toISOString().split("T")[0]),[c,u]=N.useState(null),d=N.useMemo(()=>n.filter(h=>h.lotName===t).sort((h,p)=>new Date(p.startDate).getTime()-new Date(h.startDate).getTime()),[n,t]),f=async h=>{if(h.preventDefault(),!i.trim()){u({type:"error",text:"Los detalles del plan no pueden estar vacíos."});return}try{await r({lotName:t,details:i,startDate:a}),u({type:"success",text:"Plan de alimentación guardado con éxito."}),s("")}catch(p){u({type:"error",text:"No se pudo guardar el plan."}),console.error(p)}};return l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 pb-12 animate-fade-in",children:[l.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[l.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(ar,{size:24})}),l.jsxs("div",{className:"text-center flex-grow",children:[l.jsxs("h1",{className:"text-3xl font-bold tracking-tight text-white",children:["Alimentación: ",t]}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Planes de Nutrición del Lote"})]}),l.jsx("div",{className:"w-8"})]}),l.jsxs("form",{onSubmit:f,className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-4",children:[l.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[l.jsx(ir,{size:20})," Asignar Nuevo Plan"]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"planDetails",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Detalles del Plan (Ej: 2kg de concentrado/día)"}),l.jsx("textarea",{id:"planDetails",rows:3,value:i,onChange:h=>s(h.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"planStartDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Inicio"}),l.jsx("input",{id:"planStartDate",type:"date",value:a,onChange:h=>o(h.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),l.jsx("button",{type:"submit",className:"w-full bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 rounded-xl text-lg transition-colors",children:"Guardar Plan"}),c&&l.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${c.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[c.type==="success"?l.jsx(ri,{size:18}):l.jsx($t,{size:18}),l.jsx("span",{children:c.text})]})]}),l.jsxs("div",{className:"space-y-4 pt-4",children:[l.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 px-2 flex items-center gap-2",children:[l.jsx(iT,{size:20})," Historial de Planes"]}),d.length>0?l.jsx("div",{className:"space-y-2",children:d.map(h=>l.jsx(zRe,{plan:h},h.id))}):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-500",children:"No hay planes de alimentación registrados para este lote."})})]})]})}const FRe=({event:t})=>l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsx("p",{className:"font-semibold text-white",children:t.details}),l.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:["Aplicado el: ",new Date(t.date+"T00:00:00").toLocaleDateString("es-VE")]})]});function VRe({lotName:t,onBack:e}){const{events:n,addBatchEvent:r}=rt(),[i,s]=N.useState(""),[a,o]=N.useState(new Date().toISOString().split("T")[0]),[c,u]=N.useState(null),d=N.useMemo(()=>{const h=n.filter(p=>p.lotName===t&&p.type==="Tratamiento").reduce((p,g)=>{const m=`${g.date}-${g.details}`;return p[m]||(p[m]=g),p},{});return Object.values(h).sort((p,g)=>new Date(g.date).getTime()-new Date(p.date).getTime())},[n,t]),f=async h=>{if(h.preventDefault(),u(null),!i.trim()){u({type:"error",text:"Los detalles del tratamiento no pueden estar vacíos."});return}try{await r({lotName:t,details:i,date:a,type:"Tratamiento"}),u({type:"success",text:"Tratamiento registrado con éxito para todo el lote."}),s("")}catch(p){u({type:"error",text:"No se pudo registrar el tratamiento."}),console.error(p)}};return l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 pb-12 animate-fade-in",children:[l.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[l.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(ar,{size:24})}),l.jsxs("div",{className:"text-center flex-grow",children:[l.jsxs("h1",{className:"text-3xl font-bold tracking-tight text-white",children:["Tratamientos: ",t]}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Sanidad Colectiva del Lote"})]}),l.jsx("div",{className:"w-8"})]}),l.jsxs("form",{onSubmit:f,className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-4",children:[l.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[l.jsx(ir,{size:20})," Registrar Tratamiento al Lote"]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"treatmentDetails",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Detalles del Tratamiento (Ej: Vacuna Triple)"}),l.jsx("textarea",{id:"treatmentDetails",rows:3,value:i,onChange:h=>s(h.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"treatmentDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Aplicación"}),l.jsx("input",{id:"treatmentDate",type:"date",value:a,onChange:h=>o(h.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),l.jsx("button",{type:"submit",className:"w-full bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 rounded-xl text-lg transition-colors",children:"Guardar Tratamiento"}),c&&l.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${c.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[c.type==="success"?l.jsx(ri,{size:18}):l.jsx($t,{size:18}),l.jsx("span",{children:c.text})]})]}),l.jsxs("div",{className:"space-y-4 pt-4",children:[l.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 px-2 flex items-center gap-2",children:[l.jsx(ste,{size:20})," Historial de Tratamientos del Lote"]}),d.length>0?l.jsx("div",{className:"space-y-2",children:d.map(h=>l.jsx(FRe,{event:h},h.id))}):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-500",children:"No hay tratamientos registrados para este lote."})})]})]})}const Ld=({icon:t,label:e,value:n,unit:r,colorClass:i})=>l.jsxs("div",{className:`bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border ${i||""}`,children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[l.jsx(t,{size:14}),l.jsx("span",{children:e})]}),l.jsxs("p",{className:"text-2xl font-bold text-white",children:[n," ",l.jsx("span",{className:"text-lg text-zinc-400",children:r})]})]}),BRe=({active:t,payload:e,label:n})=>t&&e&&e.length>0&&typeof n=="number"?l.jsxs("div",{className:"bg-black/50 backdrop-blur-xl p-3 rounded-lg border border-brand-border text-white",children:[l.jsxs("p",{className:"label text-brand-light-gray text-sm",children:["Edad: ",n.toFixed(0)," días"]})," ",e.map((r,i)=>l.jsxs("p",{style:{color:r.color},className:"font-bold text-base",children:[r.name,": ",r.value.toFixed(2)," Kg"]},`${r.name}-${i}`))]}):null;function URe({animalId:t,onBack:e}){const{animals:n,bodyWeighings:r}=rt(),i=N.useMemo(()=>{const p=n.find(j=>j.id===t);if(!p)return null;const g=r.filter(j=>j.animalId===p.id).sort((j,T)=>new Date(j.date).getTime()-new Date(T.date).getTime()),m=tP(p.birthWeight,g),y=wa(p.birthDate),x=g.length>0?g[g.length-1].kg:p.birthWeight||0,w=uDe(p),_=dDe(p,g),A=g.map(j=>({age:(new Date(j.date).getTime()-new Date(p.birthDate+"T00:00:00Z").getTime())/(1e3*60*60*24),[p.id]:j.kg}));p.birthWeight&&A.unshift({age:0,[p.id]:p.birthWeight});const C=[60,90,180,270].map(j=>({days:j,weight:mU(g,p.birthDate,j)}));return{animal:p,gdp:m,formattedAge:y,latestWeight:x,chartData:A,interpolatedWeights:C,weaningIndex:w,precocityIndex:_}},[t,n,r]);if(!i)return l.jsx("div",{className:"text-center p-10",children:l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Animal no encontrado."})});const{animal:s,gdp:a,formattedAge:o,latestWeight:c,chartData:u,interpolatedWeights:d,weaningIndex:f,precocityIndex:h}=i;return l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in pb-12",children:[l.jsxs("header",{className:"flex items-center pt-8 pb-4 px-4 sticky top-0 bg-brand-dark/80 backdrop-blur-md z-10 border-b border-brand-border -mx-4 mb-4",children:[" ",l.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(ar,{size:24})}),l.jsxs("div",{className:"text-center flex-grow",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:pt(s)}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Perfil de Crecimiento"})]}),l.jsx("div",{className:"w-8"})," "]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 px-4",children:[l.jsx(Ld,{icon:sc,label:"Peso Actual",value:c.toFixed(2),unit:"Kg"}),l.jsx(Ld,{icon:ba,label:"GDP General",value:a.overall?(a.overall*1e3).toFixed(0):"N/A",unit:"g/día"}),l.jsx(Ld,{icon:fs,label:"Edad Actual",value:o}),l.jsx(Ld,{icon:Kee,label:"Nº Pesajes",value:u.length>0?u.length-(s.birthWeight?1:0):0})," "]}),(f||h)&&l.jsxs("div",{className:"grid grid-cols-2 gap-4 px-4",children:[f&&l.jsx(Ld,{icon:yte,label:"Índice Destete (60d)",value:f.toFixed(2),unit:"Kg",colorClass:"border-amber-400/50"}),!f&&h&&l.jsx("div",{}),h&&l.jsx(Ld,{icon:gte,label:"Índice Precocidad (7m)",value:h.toFixed(2),unit:"Kg",colorClass:"border-amber-400/50"})]}),l.jsx("div",{className:"px-4",children:l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Curva de Crecimiento"}),u.length>1?l.jsx("div",{className:"w-full h-64",children:l.jsx(Er,{children:l.jsxs(oDe,{data:u,margin:{top:5,right:20,left:-10,bottom:5},children:[l.jsx(tp,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),l.jsx(sr,{dataKey:"age",type:"number",domain:["dataMin","dataMax"],tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},label:{value:"Edad (días)",position:"insideBottom",offset:-5,fill:"rgba(255,255,255,0.5)"}}),l.jsx(gr,{orientation:"right",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},label:{value:"Peso (Kg)",angle:-90,position:"insideRight",fill:"rgba(255,255,255,0.5)"},domain:["dataMin - 2","dataMax + 2"]})," ",l.jsx(fn,{content:l.jsx(BRe,{})}),l.jsx(aa,{verticalAlign:"top",height:36}),l.jsx(Uu,{type:"monotone",dataKey:s.id,name:pt(s),stroke:"#34C759",strokeWidth:2.5,dot:{r:4},activeDot:{r:6}})]})})}):l.jsx("p",{className:"text-center text-zinc-500 py-8",children:"No hay suficientes pesajes para mostrar la curva."})]})}),l.jsx("div",{className:"px-4",children:l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Hitos de Crecimiento (Pesos Estimados)"}),u.length>1?l.jsx("div",{className:"grid grid-cols-2 gap-4",children:d.map(({days:p,weight:g})=>l.jsxs("div",{className:"bg-black/20 p-3 rounded-lg text-center",children:[l.jsxs("p",{className:"text-sm text-zinc-400",children:["Peso a los ",p," días"]}),l.jsx("p",{className:"text-xl font-bold text-white",children:g?`${g.toFixed(2)} Kg`:"---"})," "]},p))}):l.jsx("p",{className:"text-center text-zinc-500 py-4",children:"Se necesitan más pesajes para estimar los hitos."})]})})]})}const WRe=t=>new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(r.result.split(",")[1]),r.onerror=i=>n(i)}),HRe=({onImageSelect:t})=>{const e=N.useRef(null),n=r=>{var i;(i=r.target.files)!=null&&i[0]&&t(r.target.files[0])};return l.jsxs("div",{className:"space-y-4 animate-fade-in",children:[l.jsx("input",{type:"file",ref:e,accept:"image/*",onChange:n,className:"hidden"}),l.jsxs("button",{onClick:()=>{var r,i;(r=e.current)==null||r.setAttribute("capture","environment"),(i=e.current)==null||i.click()},className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-blue-400 text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[l.jsx(Dee,{className:"w-12 h-12 mb-2 text-blue-400"}),l.jsx("span",{className:"text-lg font-semibold",children:"Tomar Foto"}),l.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Usa la cámara para escanear"})]}),l.jsxs("button",{onClick:()=>{var r,i;(r=e.current)==null||r.removeAttribute("capture"),(i=e.current)==null||i.click()},className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-green-400 text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[l.jsx(Uee,{className:"w-12 h-12 mb-2 text-green-400"}),l.jsx("span",{className:"text-lg font-semibold",children:"Seleccionar Archivo"}),l.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Elige una foto de tu galería"})]})]})};function KRe({onBack:t}){const[e,n]=N.useState("capture"),[r,i]=N.useState(""),[s,a]=N.useState(""),o=async c=>{var u,d;n("loading"),i(""),a("");try{const f=await WRe(c),m=await fetch("https://vision.googleapis.com/v1/images:annotate?key=AIzaSyAsHrxI8e8prsvYNvx992YyC26n592GfWk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({requests:[{image:{content:f},features:[{type:"TEXT_DETECTION"}]}]})});if(!m.ok){const w=await m.json();throw new Error(w.error.message||"Error en la API de Google Vision.")}const x=(d=(u=(await m.json()).responses[0])==null?void 0:u.fullTextAnnotation)==null?void 0:d.text;if(x)a(x),n("verification");else throw new Error("No se pudo detectar texto en la imagen. Intenta con una foto más clara.")}catch(f){i(f.message||"Ocurrió un error inesperado."),n("error")}};return l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4",children:[l.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[l.jsx("button",{onClick:t,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(ar,{size:24})}),l.jsxs("div",{className:"text-center flex-grow",children:[l.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white",children:"Escanear Cuaderno"}),l.jsx("p",{className:"text-xl text-zinc-400",children:"Digitalización Asistida"})]}),l.jsx("div",{className:"w-8"})]}),e==="capture"&&l.jsx(HRe,{onImageSelect:o}),e==="loading"&&l.jsxs("div",{className:"text-center py-20 animate-fade-in",children:[l.jsx(OF,{className:"w-12 h-12 text-amber-400 mx-auto animate-spin"}),l.jsx("p",{className:"mt-4 text-zinc-400",children:"Analizando imagen con IA..."})]}),e==="verification"&&l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border animate-fade-in space-y-4",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase tracking-wider border-b border-brand-border pb-2",children:[l.jsx(pw,{}),l.jsx("span",{children:"Texto Reconocido"})]}),l.jsx("textarea",{readOnly:!0,value:s,className:"w-full h-48 bg-black/20 text-white p-3 rounded-lg border border-zinc-700"}),l.jsx("p",{className:"text-xs text-zinc-500 text-center",children:"Funcionalidad de autocompletado de pesajes próximamente."}),l.jsx("button",{onClick:()=>n("capture"),className:"w-full bg-zinc-700 hover:bg-zinc-600 text-white font-semibold py-2 px-4 rounded-lg",children:"Escanear Otra Imagen"})]}),e==="error"&&l.jsxs("div",{className:"bg-red-900/40 border border-red-500/50 rounded-2xl p-6 text-center animate-fade-in",children:[l.jsx($t,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),l.jsx("h2",{className:"text-lg font-semibold text-white mb-2",children:"Ocurrió un Error"}),l.jsx("p",{className:"text-red-300",children:r}),l.jsx("button",{onClick:()=>n("capture"),className:"mt-6 bg-zinc-700 hover:bg-zinc-600 text-white font-semibold py-2 px-4 rounded-lg",children:"Intentar de Nuevo"})]})]})}const l3=152,bP=()=>{const{animals:t,breedingSeasons:e,sireLots:n,serviceRecords:r,fathers:i}=rt();return{forecastBySeason:N.useMemo(()=>{var d;const a=[],o=e.filter(f=>f.status==="Activo");for(const f of o){const h=n.filter(m=>m.seasonId===f.id);if(h.length===0)continue;const p=new Set(h.map(m=>m.id)),g=t.filter(m=>m.sireLotId&&p.has(m.sireLotId));for(const m of g){const y=r.filter(_=>_.femaleId===m.id&&_.sireLotId===m.sireLotId&&new Date(_.serviceDate)>=new Date(f.startDate)&&new Date(_.serviceDate)<=new Date(f.endDate)).sort((_,A)=>new Date(A.serviceDate).getTime()-new Date(_.serviceDate).getTime())[0],x=n.find(_=>_.id===m.sireLotId);if(!x)continue;const w=((d=i.find(_=>_.id===x.sireId))==null?void 0:d.name)||"Desconocido";if(y){const _=new Date(y.serviceDate);_.setDate(_.getDate()+l3),a.push({animal:m,dueDate:_,type:"Confirmada",sireId:x.sireId,sireName:w,seasonId:f.id})}else{const A=new Date(f.startDate);A.setDate(A.getDate()+10+l3),a.push({animal:m,dueDate:A,type:"Probable",sireId:x.sireId,sireName:w,seasonId:f.id})}}}const c=a.reduce((f,h)=>{const{seasonId:p}=h;return f[p]||(f[p]=[]),f[p].push(h),f},{});let u=Object.entries(c).map(([f,h])=>{const p=e.find(x=>x.id===f),g=h.map(x=>x.dueDate.getTime()),m=new Date(Math.min(...g)),y=new Date(Math.max(...g));return{seasonId:f,seasonName:p.name,projectedStartDate:h.length>0?m:null,projectedEndDate:h.length>0?y:null,events:h.sort((x,w)=>x.dueDate.getTime()-w.dueDate.getTime()),totalEvents:h.length,confirmedEvents:h.filter(x=>x.type==="Confirmada").length,probableEvents:h.filter(x=>x.type==="Probable").length,daysSinceLastSeason:null}}).sort((f,h)=>f.projectedStartDate&&h.projectedStartDate?f.projectedStartDate.getTime()-h.projectedStartDate.getTime():f.projectedStartDate?-1:h.projectedStartDate?1:0);if(u.length>1){for(let f=1;f<u.length;f++)if(u[f].projectedStartDate&&u[f-1].projectedEndDate){const h=u[f].projectedStartDate,p=u[f-1].projectedEndDate,g=h.getTime()-p.getTime(),m=Math.ceil(g/(1e3*60*60*24));u[f].daysSinceLastSeason=m}}return u},[t,e,n,r,i])}},qRe=`
  .rdp { --rdp-cell-size: 45px; --rdp-accent-color: #FF9500; --rdp-background-color: #2C2C2E; --rdp-accent-color-dark: #FF9500; --rdp-background-color-dark: #2C2C2E; --rdp-outline: 2px solid var(--rdp-accent-color); --rdp-border-radius: 12px; color: #FFF; width: 100%; }
  .rdp-caption_label, .rdp-nav_button { color: #FF9500; }
  .rdp-head_cell { color: #8e8e93; font-size: 0.8em; }
  .rdp-day_selected { background-color: var(--rdp-accent-color); color: #000; font-weight: bold; }
  .day-confirmed { position: relative; }
  .day-confirmed::after { content: ''; position: absolute; bottom: 6px; left: 50%; transform: translateX(-50%); width: 6px; height: 6px; border-radius: 50%; background-color: #34C759; }
  .day-probable { position: relative; }
  .day-probable::after { content: ''; position: absolute; bottom: 6px; left: 50%; transform: translateX(-50%); width: 6px; height: 6px; border-radius: 50%; background-color: #FF9500; opacity: 0.7; }
`,GRe=({seasonForecast:t,onClick:e})=>{var n,r;return l.jsxs("button",{onClick:e,className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border hover:border-brand-blue transition-colors",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:t.seasonName}),l.jsxs("p",{className:"text-sm text-zinc-400",children:[(n=t.projectedStartDate)==null?void 0:n.toLocaleDateString("es-VE",{month:"long",day:"numeric"})," - ",(r=t.projectedEndDate)==null?void 0:r.toLocaleDateString("es-VE",{month:"long",day:"numeric",year:"numeric"})]})]}),t.daysSinceLastSeason!==null&&t.daysSinceLastSeason>0&&l.jsxs("div",{className:"text-right flex-shrink-0 ml-4",children:[l.jsx("p",{className:"text-xs text-zinc-500",children:"Separación"}),l.jsxs("p",{className:"font-semibold text-white",children:[t.daysSinceLastSeason," días"]})]})]}),l.jsxs("div",{className:"mt-3 pt-3 border-t border-zinc-700/50 flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"font-bold text-2xl text-white",children:t.totalEvents}),l.jsx("p",{className:"text-xs text-zinc-400",children:"Partos"})]}),l.jsxs("div",{className:"text-left text-xs",children:[l.jsxs("p",{className:"flex items-center gap-1 text-brand-green",children:[l.jsx(ri,{size:12})," Confirmados: ",t.confirmedEvents]}),l.jsxs("p",{className:"flex items-center gap-1 text-brand-orange",children:[l.jsx(sT,{size:12})," Probables: ",t.probableEvents]})]})]}),l.jsx(Gn,{className:"text-zinc-600"})]})]})},YRe=({forecastItem:t,onClick:e})=>l.jsxs("button",{onClick:e,className:"w-full text-left bg-black/20 rounded-lg p-3 flex justify-between items-center hover:bg-zinc-800/60 transition-colors",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-white",children:t.animal.id}),l.jsxs("p",{className:"text-xs text-zinc-400",children:["Reproductor: ",t.sireName]})]}),l.jsxs("div",{className:`flex items-center gap-2 text-sm font-semibold ${t.type==="Confirmada"?"text-brand-green":"text-brand-orange"}`,children:[t.type==="Confirmada"?l.jsx(ri,{size:16}):l.jsx(sT,{size:16}),l.jsx("span",{children:t.type})]})]});function QRe({navigateTo:t}){const{forecastBySeason:e}=bP(),[n,r]=N.useState("cards"),[i,s]=N.useState(void 0),[a,o]=N.useState(new Date),c=N.useMemo(()=>e.flatMap(f=>f.events),[e]),u=N.useMemo(()=>({confirmed:c.filter(f=>f.type==="Confirmada").map(f=>f.dueDate),probable:c.filter(f=>f.type==="Probable").map(f=>f.dueDate)}),[c]),d=N.useMemo(()=>i?c.filter(f=>f.dueDate.getFullYear()===i.getFullYear()&&f.dueDate.getMonth()===i.getMonth()&&f.dueDate.getDate()===i.getDate()):[],[c,i]);return l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4",children:[l.jsx("style",{children:qRe}),l.jsxs("header",{className:"text-center",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Calendario de Partos"}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Proyecciones del Rebaño"})]}),l.jsxs("div",{className:"flex justify-center p-1 bg-zinc-800 rounded-xl",children:[l.jsxs("button",{onClick:()=>r("cards"),className:`w-1/2 py-2 text-sm font-semibold rounded-lg flex items-center justify-center gap-2 transition-colors ${n==="cards"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:[l.jsx(IF,{size:16})," Temporadas"]}),l.jsxs("button",{onClick:()=>r("calendar"),className:`w-1/2 py-2 text-sm font-semibold rounded-lg flex items-center justify-center gap-2 transition-colors ${n==="calendar"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:[l.jsx(fs,{size:16})," Calendario"]})]}),n==="cards"&&l.jsx("div",{className:"space-y-3",children:e.length>0?e.map(f=>l.jsx(GRe,{seasonForecast:f,onClick:()=>t({name:"birthing-season-detail",seasonId:f.seasonId})},f.seasonId)):l.jsxs("div",{className:"text-center py-10 bg-brand-glass rounded-2xl flex flex-col items-center gap-2",children:[l.jsx(ua,{size:32,className:"text-zinc-600"}),l.jsx("p",{className:"text-zinc-400",children:"No hay temporadas de parto activas o proyectadas."})]})}),n==="calendar"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-2 border border-brand-border",children:l.jsx(np,{mode:"single",selected:i,onSelect:s,month:a,onMonthChange:o,locale:x1,modifiers:{confirmed:u.confirmed,probable:u.probable},modifiersClassNames:{confirmed:"day-confirmed",probable:"day-probable"},showOutsideDays:!0})}),i&&l.jsxs("div",{className:"space-y-3 pt-2",children:[l.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Proyecciones para el ",i.toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"})]}),d.length>0?l.jsx("div",{className:"space-y-2",children:d.map(f=>l.jsx(YRe,{forecastItem:f,onClick:()=>t({name:"rebano-profile",animalId:f.animal.id})},f.animal.id))}):l.jsx("div",{className:"text-center py-6 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-500",children:"No hay partos proyectados para este día."})})]})]})]})}const XRe=({forecastItem:t,onClick:e})=>l.jsxs("button",{onClick:e,className:"w-full text-left bg-black/20 rounded-lg p-3 flex justify-between items-center hover:bg-zinc-800/60 transition-colors",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-white",children:t.animal.id}),l.jsxs("p",{className:"text-xs text-zinc-400",children:["Reproductor: ",t.sireName]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:`flex items-center gap-2 text-sm font-semibold ${t.type==="Confirmada"?"text-brand-green":"text-brand-orange"}`,children:[t.type==="Confirmada"?l.jsx(ri,{size:16}):l.jsx(sT,{size:16}),l.jsx("span",{children:t.type})]}),l.jsx(Gn,{className:"text-zinc-600"})]})]}),ZRe=t=>{const e=new Date(t.getUTCFullYear(),t.getUTCMonth(),1),n=e.getUTCDay()===0?6:e.getUTCDay()-1,r=t.getUTCDate(),i=Math.ceil((r+n)/7),s=t.toLocaleString("es-VE",{month:"short",timeZone:"UTC"});return`${s.charAt(0).toUpperCase()+s.slice(1)} - Sem ${i}`};function JRe({seasonId:t,onBack:e,navigateTo:n}){const{forecastBySeason:r}=bP(),i=N.useMemo(()=>r.find(a=>a.seasonId===t),[r,t]),s=N.useMemo(()=>{if(!i)return[];const a={};return i.events.forEach(o=>{const c=o.dueDate,u=ZRe(c);if(!a[u]){const d=c.getUTCDate(),f=c.getUTCDay()===0?6:c.getUTCDay()-1,h=new Date(c);h.setUTCDate(d-f),a[u]={count:0,startDate:h}}a[u].count++}),Object.entries(a).map(([o,c])=>({name:o,partos:c.count,startDate:c.startDate})).sort((o,c)=>o.startDate.getTime()-c.startDate.getTime())},[i]);return i?l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4 pb-12",children:[l.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[l.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(ar,{size:24})}),l.jsxs("div",{className:"text-center flex-grow",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:i.seasonName}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Detalle de Proyección de Partos"})]}),l.jsx("div",{className:"w-8"})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-white mb-4",children:[l.jsx(vv,{size:20})," Proyección Semanal de Partos"]}),l.jsx("div",{className:"w-full h-56",children:l.jsx(Er,{children:l.jsxs(Ls,{data:s,margin:{top:5,right:10,left:-20,bottom:5},children:[l.jsx(tp,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),l.jsx(sr,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(gr,{allowDecimals:!1,tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(fn,{cursor:{fill:"rgba(255, 255, 255, 0.1)"},contentStyle:{backgroundColor:"rgba(44, 44, 46, 0.8)",border:"1px solid #444",borderRadius:"12px"}}),l.jsx(Lr,{dataKey:"partos",name:"Nº de Partos",fill:"#007AFF",radius:[4,4,0,0]})]})})})]}),l.jsxs("div",{className:"space-y-3 pt-4",children:[l.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Lista de Animales (",i.totalEvents,")"]}),l.jsxs("div",{className:"space-y-2",children:["M                   ",i.events.map(a=>l.jsx(XRe,{forecastItem:a,onClick:()=>n({name:"rebano-profile",animalId:a.animal.id})},a.animal.id))]})]})]}):l.jsxs("div",{className:"text-center p-10",children:[l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Temporada de Partos no encontrada."}),l.jsx("button",{onClick:e,className:"mt-4 text-brand-orange",children:"Volver"})]})}const e4e=[{id:"rebano",name:"Rebaño",icon:xv,color:"bg-amber-600"},{id:"lactokeeper",name:"LactoKeeper",icon:Xl,color:"bg-brand-blue"},{id:"kilos",name:"Kilos",icon:sc,color:"bg-brand-green"},{id:"salud",name:"StockCare",icon:mw,color:"bg-teal-500"},{id:"cents",name:"Cents",icon:Ql,color:"bg-yellow-500"}],S1=({onSwitchModule:t})=>{const[e,n]=N.useState(!1),r=i=>{n(!1),t(i)};return l.jsxs("div",{className:"fixed bottom-24 right-4 z-40 flex flex-col items-end gap-4",children:[l.jsx("div",{className:`flex flex-col items-end gap-4 transition-all duration-300 ease-in-out overflow-hidden ${e?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:e4e.map(i=>l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"bg-black/60 backdrop-blur-md text-white text-sm font-semibold px-3 py-1 rounded-md shadow-lg",children:i.name}),l.jsx("button",{onClick:()=>r(i.id),className:`w-14 h-14 rounded-full flex items-center justify-center text-white shadow-lg ${i.color} transform transition-transform hover:scale-110`,"aria-label":`Cambiar al módulo ${i.name}`,children:l.jsx(i.icon,{size:28})})]},i.id))}),l.jsx("button",{onClick:()=>n(!e),className:"w-16 h-16 rounded-full flex items-center justify-center text-black bg-brand-amber shadow-2xl shadow-black/50 transform transition-transform duration-200 hover:scale-110 pointer-events-auto","aria-label":"Seleccionar módulo",children:l.jsx("div",{className:`transform transition-transform duration-300 ${e?"rotate-180 scale-75":"rotate-0"}`,children:e?l.jsx(Za,{size:32}):l.jsx(DF,{size:32})})})]})};function t4e(t){return vs({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224l0 32 0 160c0 17.7 14.3 32 32 32l32 0c17.7 0 32-14.3 32-32l0-88.2c9.9 6.6 20.6 12 32 16.1l0 24.2c0 8.8 7.2 16 16 16s16-7.2 16-16l0-16.9c5.3 .6 10.6 .9 16 .9s10.7-.3 16-.9l0 16.9c0 8.8 7.2 16 16 16s16-7.2 16-16l0-24.2c11.4-4 22.1-9.4 32-16.1l0 88.2c0 17.7 14.3 32 32 32l32 0c17.7 0 32-14.3 32-32l0-160 32 32 0 49.5c0 9.5 2.8 18.7 8.1 26.6L530 427c8.8 13.1 23.5 21 39.3 21c22.5 0 41.9-15.9 46.3-38l20.3-101.6c2.6-13-.3-26.5-8-37.3l-3.9-5.5 0-81.6c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 14.4-52.9-74.1C496 86.5 452.4 64 405.9 64L272 64l-16 0-64 0-48 0C77.7 64 24 117.7 24 184l0 54C9.4 249.8 0 267.8 0 288l0 17.6c0 8 6.4 14.4 14.4 14.4C46.2 320 72 294.2 72 262.4l0-6.4 0-32 0-40c0-24.3 12.1-45.8 30.5-58.9C98.3 135.9 96 147.7 96 160l0 64zM560 336a16 16 0 1 1 32 0 16 16 0 1 1 -32 0zM166.6 166.6c-4.2-4.2-6.6-10-6.6-16c0-12.5 10.1-22.6 22.6-22.6l178.7 0c12.5 0 22.6 10.1 22.6 22.6c0 6-2.4 11.8-6.6 16l-23.4 23.4C332.2 211.8 302.7 224 272 224s-60.2-12.2-81.9-33.9l-23.4-23.4z"},child:[]}]})(t)}const n4e={idle:{Icon:$ee,color:"text-green-500",label:"Datos sincronizados"},syncing:{Icon:Lee,color:"text-amber-500 animate-spin-slow",label:"Sincronizando datos..."},offline:{Icon:zee,color:"text-red-500",label:"Sin conexión"}},Lv=({status:t})=>{const{Icon:e,color:n,label:r}=n4e[t];return l.jsx("div",{className:"flex items-center gap-2",title:r,children:l.jsx(e,{className:`w-5 h-5 ${n}`})})};function r4e({initialState:t,onSwitchModule:e}){const{syncStatus:n}=rt(),[r,i]=N.useState({name:"lots-dashboard"}),[s,a]=N.useState([]);N.useEffect(()=>{t&&t.page?(i(t.page),a([])):(i({name:"lots-dashboard"}),a([]))},[t]);const o=[{page:{name:"lots-dashboard"},label:"Lotes",icon:UF,mapsTo:["lots-dashboard","lot-detail","breeding-season-detail","sire-lot-detail","feeding-plan","batch-treatment"]},{page:{name:"herd"},label:"Rebaño",icon:t4e,mapsTo:["herd","rebano-profile","manage-lots","lactation-profile","growth-profile"]},{page:{name:"farm-calendar"},label:"Calendario",icon:rT,mapsTo:["farm-calendar","birthing-season-detail"]},{page:{name:"add-animal"},label:"Añadir",icon:ss,mapsTo:["add-animal","ocr"]}],c=h=>{a(p=>[...p,r]),i(h)},u=()=>{const h=s.pop();h?(a([...s]),i(h)):t&&t.sourceModule?e(t.sourceModule):i({name:"lots-dashboard"})},d=h=>{a([]),i(h)},f=()=>{switch(r.name){case"lots-dashboard":return l.jsx(V5,{navigateTo:c});case"lot-detail":return l.jsx(qMe,{lotName:r.lotName,onBack:u,navigateTo:c});case"breeding-season-detail":return l.jsx(jRe,{seasonId:r.seasonId,onBack:u,navigateTo:c});case"sire-lot-detail":return l.jsx(NRe,{lotId:r.lotId,onBack:u,navigateTo:c});case"herd":return l.jsx(rRe,{navigateTo:c,locationFilter:r.locationFilter});case"manage-lots":return l.jsx(xRe,{onBack:()=>d({name:"herd"})});case"management":return l.jsx(bRe,{onSelectAnimal:h=>c({name:"rebano-profile",animalId:h})});case"add-animal":return l.jsx(ZMe,{onBack:()=>d({name:"herd"})});case"rebano-profile":return l.jsx(vRe,{animalId:r.animalId,onBack:u,navigateTo:c});case"lactation-profile":return l.jsx(QU,{animalId:r.animalId,onBack:u,navigateTo:c});case"growth-profile":return l.jsx(URe,{animalId:r.animalId,onBack:u});case"ocr":return l.jsx(KRe,{onBack:u});case"feeding-plan":return l.jsx($Re,{lotName:r.lotName,onBack:u});case"batch-treatment":return l.jsx(VRe,{lotName:r.lotName,onBack:u});case"farm-calendar":return l.jsx(QRe,{navigateTo:c});case"birthing-season-detail":return l.jsx(JRe,{seasonId:r.seasonId,onBack:u,navigateTo:c});default:return l.jsx(V5,{navigateTo:c})}};return l.jsxs("div",{className:"font-sans text-gray-200 min-h-screen animate-fade-in",children:[l.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-gray-900/80 backdrop-blur-lg border-b border-brand-border",children:l.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(xv,{className:"text-brand-orange",size:28}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-bold text-white leading-none",children:"GanaderoOS"}),l.jsx("p",{className:"text-xs text-zinc-400 leading-none",children:"Rebaño"})]})]}),l.jsx("div",{className:"flex items-center gap-4",children:l.jsx(Lv,{status:n})})]})}),l.jsx("main",{className:"pt-16 pb-16",children:f()})," ",l.jsx(S1,{onSwitchModule:e}),l.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 z-20 bg-black/30 backdrop-blur-xl border-t border-white/20 flex justify-around h-16",children:[o.map(h=>{const p=h.mapsTo.includes(r.name);return l.jsxs("button",{onClick:()=>d(h.page),className:`relative flex flex-col items-center justify-center pt-3 pb-2 w-full transition-colors ${p?"text-amber-400":"text-gray-500 hover:text-white"}`,children:[l.jsx(h.icon,{className:"w-6 h-6"}),l.jsx("span",{className:"text-xs font-semibold mt-1",children:h.label})]},h.label)}),l.jsxs("button",{onClick:()=>Kf.signOut(),className:"relative flex flex-col items-center justify-center pt-3 pb-2 w-full text-gray-500 hover:text-red-400 transition-colors",children:[l.jsx(RF,{className:"w-6 h-6"}),l.jsx("span",{className:"text-xs font-semibold mt-1",children:"Salir"})]})]})]})}const Hu=({active:t,payload:e,label:n})=>{if(t&&e&&e.length){const r=e[0].payload.name==="Promedio Rebaño";return"range"in e[0].payload?l.jsxs("div",{className:"bg-black/50 backdrop-blur-xl p-3 rounded-lg border border-brand-border text-white",children:[l.jsxs("p",{className:"label text-brand-light-gray text-sm",children:["Rango: ",e[0].payload.range," Kg"]}),l.jsxs("p",{className:"font-bold text-base",children:["Nº de Cabras: ",e[0].value]})]}):l.jsxs("div",{className:"bg-black/50 backdrop-blur-xl p-3 rounded-lg border border-brand-border text-white",children:[l.jsx("p",{className:"label text-brand-light-gray text-sm",children:r?`Días en Leche (DEL): ${n}`:`DEL: ${n}`}),l.jsx("p",{className:"font-bold text-base",children:r?`Promedio: ${e[0].value.toFixed(2)} Kg`:`Producción: ${e[0].value.toFixed(2)} Kg`})]})}return null};function c3({onNavigateToAnalysis:t}){const{animals:e,weighings:n,parturitions:r,isLoading:i}=rt(),[s,a]=N.useState("current"),[o,c]=N.useState(!1),[u,d]=N.useState(!1),f=N.useMemo(()=>{if(i||!n.length||!e.length)return{herdAverage:0,activeGoats:0,herdLactationCurve:[],gaussData:{distribution:[],mean:0,stdDev:0}};let h=0;if(n.length>0){const C=n.reduce((j,T)=>T.date>j?T.date:j,n[0].date);h=new Set(n.filter(j=>j.date===C).map(j=>j.goatId)).size}let p=n;if(s==="current"){const C=new Set(r.filter(j=>j.status==="activa").map(j=>j.goatId));p=n.filter(j=>C.has(j.goatId))}const g={};p.forEach(C=>{const j=r.filter(P=>P.goatId===C.goatId&&new Date(C.date)>=new Date(P.parturitionDate)).sort((P,I)=>new Date(I.parturitionDate).getTime()-new Date(P.parturitionDate).getTime())[0];if(!j)return;const T=pc(j.parturitionDate,C.date);g[T]||(g[T]={totalKg:0,count:0}),g[T].totalKg+=C.kg,g[T].count++});const m=Object.entries(g).map(([C,j])=>({del:parseInt(C),kg:j.totalKg/j.count,name:"Promedio Rebaño"})).sort((C,j)=>C.del-j.del),y=e.map(C=>{const j=n.filter(P=>P.goatId===C.id);return j.length===0?null:{avg:j.reduce((P,I)=>P+I.kg,0)/j.length}}).filter(Boolean),x=y.length>0?y.reduce((C,j)=>C+j.avg,0)/y.length:0,w=y.length>0?Math.sqrt(y.reduce((C,j)=>C+Math.pow(j.avg-x,2),0)/y.length):0,_=[];if(y.length>0){const C=Math.floor(Math.min(...y.map(T=>T.avg))*4)/4,j=Math.ceil(Math.max(...y.map(T=>T.avg))*4)/4;for(let T=C;T<=j;T+=.25){const P=T,I=T+.25,M=y.filter(F=>F.avg>=P&&F.avg<I).length;M>0&&_.push({range:`${P.toFixed(2)}`,count:M})}}const A={distribution:_,mean:x,stdDev:w};return{herdAverage:n.length>0?n.reduce((C,j)=>C+j.kg,0)/n.length:0,activeGoats:h,herdLactationCurve:m,gaussData:A}},[e,n,r,i,s]);return i?l.jsx("div",{className:"text-center p-10",children:l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando datos del rebaño..."})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 px-4",children:[l.jsxs("header",{className:"text-center pt-4 pb-4",children:[l.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Dashboard de Producción"}),l.jsx("p",{className:"text-md text-zinc-400",children:"Análisis General de LactoKeeper"})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-2 text-xs uppercase tracking-wider",children:[l.jsx(yv,{size:14}),l.jsx("span",{children:"Promedio Global"})]}),l.jsxs("p",{className:"text-4xl font-bold tracking-tight text-white",children:[f.herdAverage.toFixed(2)," ",l.jsx("span",{className:"text-2xl font-medium text-zinc-400",children:"Kg"})]})]}),l.jsxs("button",{onClick:t,className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border text-left hover:border-brand-orange transition-colors",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-2 text-xs uppercase tracking-wider",children:[l.jsx(nte,{}),l.jsx("span",{children:"Animales en Ordeño"})]}),l.jsx("p",{className:"text-4xl font-bold tracking-tight text-white",children:f.activeGoats})]})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsxs("div",{className:"flex justify-between items-center border-b border-brand-border pb-2 mb-4",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase tracking-wider",children:[l.jsx(lE,{size:16}),l.jsx("span",{children:"Curva de Lactancia"}),l.jsx("button",{onClick:()=>c(!0),className:"text-zinc-500 hover:text-white transition-colors",children:l.jsx(sb,{size:14})})]}),l.jsxs("div",{className:"flex bg-zinc-900/80 rounded-lg p-0.5",children:[l.jsx("button",{onClick:()=>a("current"),className:`px-2 py-0.5 text-xs font-semibold rounded-md transition-colors ${s==="current"?"bg-brand-orange text-white":"text-zinc-400 hover:bg-zinc-700/50"}`,children:"Actual"}),l.jsx("button",{onClick:()=>a("historical"),className:`px-2 py-0.5 text-xs font-semibold rounded-md transition-colors ${s==="historical"?"bg-brand-orange text-white":"text-zinc-400 hover:bg-zinc-700/50"}`,children:"Histórico"})]})]}),l.jsx("div",{className:"w-full h-48",children:l.jsx(Er,{children:l.jsxs(eP,{data:f.herdLactationCurve,margin:{top:5,right:10,left:0,bottom:5},children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"lactationGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[l.jsx("stop",{offset:"0%",stopColor:"#FF9500",stopOpacity:.7}),l.jsx("stop",{offset:"80%",stopColor:"#34C759",stopOpacity:.1})]})}),l.jsx(sr,{dataKey:"del",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1}),l.jsx(gr,{orientation:"right",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1,domain:["dataMin - 0.5","dataMax + 0.5"],width:30}),l.jsx(fn,{content:l.jsx(Hu,{})}),l.jsx(ha,{type:"monotone",dataKey:"kg",stroke:"#FF9500",strokeWidth:2.5,fill:"url(#lactationGradient)"})]})})})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsx("div",{className:"flex justify-between items-center border-b border-brand-border pb-2 mb-4",children:l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase tracking-wider",children:[l.jsx(lE,{size:16}),l.jsx("span",{children:"Distribución del Rebaño"}),l.jsx("button",{onClick:()=>d(!0),className:"text-zinc-500 hover:text-white transition-colors",children:l.jsx(sb,{size:14})})]})}),l.jsx("div",{className:"w-full h-48",children:l.jsx(Er,{children:l.jsxs(Ls,{data:f.gaussData.distribution,margin:{top:10,right:10,left:0,bottom:0},children:[l.jsx(tp,{strokeDasharray:"3 3",stroke:"rgba(255, 255, 255, 0.1)"}),l.jsx(sr,{dataKey:"range",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1}),l.jsx(gr,{orientation:"right",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1,allowDecimals:!1,width:30}),l.jsx(fn,{content:l.jsx(Hu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),l.jsx(Lr,{dataKey:"count",fill:"rgba(255, 255, 255, 0.4)",name:"Nº de Cabras"}),l.jsx(f1,{x:f.gaussData.mean.toFixed(2),stroke:"#34C759",strokeWidth:2,label:{value:"μ",fill:"#34C759",position:"insideTopLeft"}})]})})})]})]}),l.jsx(at,{isOpen:o,onClose:()=>c(!1),title:"¿Qué es la Curva de Lactancia del Rebaño?",children:l.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[l.jsx("p",{children:'Este gráfico revela la **"personalidad productiva"** de tu rebaño. No es un promedio simple, sino una línea de tiempo del rendimiento promedio.'}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-white mb-1",children:"¿Cómo se Calcula?"}),l.jsx("p",{className:"text-sm",children:'Para cada "Día en Leche" (DEL) en el eje horizontal, el sistema agrupa los pesajes de **todos los animales** que han pasado por ese día de su ciclo y calcula el promedio.'}),l.jsxs("p",{className:"text-sm mt-2 bg-black/20 p-2 rounded-md",children:[l.jsx("strong",{children:"Ejemplo:"}),' El punto en "DEL 50" es el promedio de todos los pesajes que se hicieron a cualquier animal cuando estaba exactamente en su día 50 de lactancia.']})]}),l.jsx("p",{className:"pt-2 border-t border-zinc-700/80",children:"Te permite responder visualmente a preguntas clave como: ¿Cuándo ocurre el pico de producción del rebaño? y ¿Qué tan persistente es la lactancia después del pico?"})]})}),l.jsx(at,{isOpen:u,onClose:()=>d(!1),title:"¿Qué es la Distribución del Rebaño?",children:l.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[l.jsx("p",{children:"Este gráfico, conocido como Campana de Gauss o distribución normal, clasifica el rendimiento promedio de cada animal en el rebaño."}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-white mb-1",children:"Media (μ)"}),l.jsx("p",{className:"text-sm",children:"La línea verde marcada como **μ** representa el **promedio de producción de todo el rebaño**. Es el punto de referencia central."})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-white mb-1",children:"Las Barras"}),l.jsx("p",{className:"text-sm",children:"Cada barra muestra cuántos animales caen dentro de un rango específico de producción. Una barra alta en el centro (cerca de μ) indica que la mayoría de tu rebaño tiene un rendimiento promedio y consistente."})]}),l.jsx("p",{className:"pt-2 border-t border-zinc-700/80",children:"Esta herramienta es clave para identificar rápidamente a los animales de élite (extremo derecho) y a los que podrían necesitar atención (extremo izquierdo)."})]})})]})}const xx=(t,e,n,r,i)=>N.useMemo(()=>{if(!t.length||!e.length)return{classifiedAnimals:[],distribution:[],mean:0,stdDev:0,weightedMean:0};const s=t.reduce((m,y)=>{const x=e.find(T=>T.id===y.goatId);if(!x)return m;const w=r.filter(T=>T.goatId===x.id&&new Date(T.parturitionDate)<=new Date(y.date)).sort((T,P)=>new Date(P.parturitionDate).getTime()-new Date(T.parturitionDate).getTime())[0];if(!w)return m;const _=pc(w.parturitionDate,y.date),A=i?lDe(y.kg,_):y.kg,E=n.filter(T=>T.goatId===x.id).sort((T,P)=>new Date(P.date).getTime()-new Date(T.date).getTime());let C="single";const j=E.findIndex(T=>T.date===y.date);if(j!==-1&&j+1<E.length){const T=E[j+1],P=y.kg-T.kg,I=.15;P>I?C="up":P<-I?C="down":C="stable"}return m.push({...x,latestWeighing:y.kg,weighingId:y.id,del:_,score:A,trend:C,date:y.date}),m},[]);if(!s.length)return{classifiedAnimals:[],distribution:[],mean:0,stdDev:0,weightedMean:0};const a=i?"score":"latestWeighing",o=s.reduce((m,y)=>m+y[a],0)/s.length,c=Math.sqrt(s.reduce((m,y)=>m+Math.pow(y[a]-o,2),0)/s.length),u=o-.4*c,d=o+.4*c,f=s.map(m=>{const y=m[a];let x="Promedio";return c>.1&&(y<u?x="Pobre":y>d&&(x="Sobresaliente")),{...m,classification:x}}),h=[{name:"Pobre",count:f.filter(m=>m.classification==="Pobre").length,fill:"#FF3B30"},{name:"Promedio",count:f.filter(m=>m.classification==="Promedio").length,fill:"#6B7280"},{name:"Sobresaliente",count:f.filter(m=>m.classification==="Sobresaliente").length,fill:"#34C759"}],p=s.length>0?s.reduce((m,y)=>m+y.latestWeighing,0)/s.length:0,g=s.length>0?s.reduce((m,y)=>m+y.score,0)/s.length:0;return{classifiedAnimals:f,distribution:h,mean:p,stdDev:c,weightedMean:g}},[t,e,n,r,i]),i4e=({trend:t,isLongTrend:e})=>{if(!t||t==="single")return null;const n={up:{Icon:Yf,color:"text-brand-green"},down:{Icon:Gf,color:"text-brand-red"},stable:{Icon:lT,color:"text-zinc-400"}},{Icon:r,color:i}=n[t];return l.jsxs("div",{className:`flex items-center font-semibold text-sm ${i}`,children:[l.jsx(r,{size:18,strokeWidth:3}),e&&l.jsx("span",{className:"ml-0.5 font-bold",children:"+"})]})},xP=(t,e)=>N.useMemo(()=>{if(!t||!e)return{trend:null,difference:0,isLongTrend:!1,lastTwoWeighings:[]};const r=e.filter(d=>d.goatId===t).sort((d,f)=>new Date(f.date).getTime()-new Date(d.date).getTime());if(r.length<1)return{trend:null,difference:0,isLongTrend:!1,lastTwoWeighings:[]};if(r.length===1)return{trend:"single",difference:0,isLongTrend:!1,lastTwoWeighings:[r[0]]};const i=r[0],s=r[1],a=i.kg-s.kg,o=.15;let c;a>o?c="up":a<-o?c="down":c="stable";let u=!1;if(r.length>=3){const d=r[2],f=s.kg-d.kg,h=a>o&&f>o,p=a<-o&&f<-o;(h||p)&&(u=!0)}return{trend:c,difference:a,isLongTrend:u,lastTwoWeighings:[i,s]}},[t,e]),s4e=({animal:t,onSaveSuccess:e,onCancel:n})=>{const{parturitions:r,addWeighing:i,startDryingProcess:s,setLactationAsDry:a}=rt(),[o,c]=N.useState(new Date().toISOString().split("T")[0]),[u,d]=N.useState(""),[f,h]=N.useState(!1),[p,g]=N.useState(null),[m,y]=N.useState(!1),x=N.useMemo(()=>r.filter(C=>C.goatId===t.id&&(C.status==="activa"||C.status==="en-secado")).sort((C,j)=>new Date(j.parturitionDate).getTime()-new Date(C.parturitionDate).getTime())[0],[r,t.id]),w=x?pc(x.parturitionDate,o):null,_=async C=>{if(C.preventDefault(),!x||x.status==="seca"||x.status==="finalizada"){g({type:"error",text:"No se puede guardar pesaje. El animal no tiene una lactancia activa o en secado."});return}g(null),h(!0);const j=parseFloat(u);if(isNaN(j)||j<=0){g({type:"error",text:"Por favor, introduce un peso válido."}),h(!1);return}if(j>8.5){g({type:"error",text:"La producción parece irracionalmente alta (> 8.5 Kg)."}),h(!1);return}try{await i({goatId:t.id,date:o,kg:j}),g({type:"success",text:`Pesaje de ${pt(t)} guardado con éxito.`}),setTimeout(e,1500)}catch(T){g({type:"error",text:T.message||"No se pudo guardar el pesaje."}),h(!1)}},A=async()=>{if(!(!x||x.status!=="activa")){h(!0),g(null);try{await s(x.id),g({type:"success",text:"Proceso de secado iniciado con éxito."}),setTimeout(e,1500)}catch(C){g({type:"error",text:C.message||"No se pudo iniciar el secado."}),h(!1)}}},E=async()=>{if(!(!x||x.status==="seca"||x.status==="finalizada")){h(!0),g(null);try{await a(x.id),g({type:"success",text:"Lactancia declarada como seca con éxito."}),setTimeout(e,1500)}catch(C){g({type:"error",text:C.message||"No se pudo finalizar la lactancia."}),h(!1)}}};return l.jsxs(l.Fragment,{children:[l.jsx(at,{isOpen:!m,onClose:n,title:`Pesaje Lechero: ${pt(t)}`,children:l.jsx("div",{className:"space-y-4",children:x?l.jsxs("form",{onSubmit:_,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"weighingDateMilk",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha"}),l.jsx("input",{id:"weighingDateMilk",type:"date",value:o,onChange:C=>c(C.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-white",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Días en Leche (DEL)"}),l.jsx("div",{className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-center font-bold text-white",children:w??"N/A"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"weighingKgMilk",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Producción (Kg)"}),l.jsx("input",{id:"weighingKgMilk",type:"number",step:"0.1",value:u,onChange:C=>d(C.target.value),placeholder:"Ej: 3.5",autoFocus:!0,className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-white",required:!0})]}),p&&l.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${p.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[p.type==="success"?l.jsx(ri,{size:18}):l.jsx($t,{size:18}),l.jsx("span",{children:p.text})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-brand-border",children:[l.jsx("button",{type:"button",onClick:n,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg text-white",children:"Cancelar"}),l.jsxs("button",{type:"submit",disabled:f,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50 flex items-center gap-2",children:[l.jsx(zh,{size:18})," Guardar Pesaje"]})]}),l.jsxs("div",{className:"space-y-2 pt-4 border-t border-brand-border",children:[l.jsx("h4",{className:"text-sm font-semibold text-zinc-400",children:"Otras Acciones de Lactancia"}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[l.jsxs("button",{type:"button",onClick:A,disabled:f||x.status!=="activa",className:"w-full flex items-center justify-center gap-2 bg-blue-600/20 text-blue-300 font-semibold py-3 px-3 rounded-lg hover:bg-blue-600/40 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(ed,{size:16})," ",x.status==="en-secado"?"Ya en Secado":"Iniciar Secado"]}),l.jsxs("button",{type:"button",onClick:E,disabled:f||x.status==="seca"||x.status==="finalizada",className:"w-full flex items-center justify-center gap-2 bg-gray-600/20 text-gray-300 font-semibold py-3 px-3 rounded-lg hover:bg-gray-600/40 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(va,{size:16})," ",x.status==="seca"?"Ya Seca":"Declarar Seca"]})]})]})]}):l.jsxs("div",{className:"text-center space-y-4",children:[l.jsx($t,{className:"mx-auto h-12 w-12 text-amber-400"}),l.jsxs("h3",{className:"text-lg font-medium text-white",children:["Animal (",pt(t),") sin Parto Activo"]}),l.jsx("p",{className:"text-sm text-zinc-400",children:"Para registrar un pesaje o gestionar el secado, debe tener un parto activo."}),l.jsxs("button",{onClick:()=>y(!0),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[l.jsx(ua,{size:18})," Declarar Parto"]})]})})}),m&&l.jsx(cd,{isOpen:m,onClose:()=>{y(!1)},motherId:t.id})]})},a4e=()=>{const{animals:t,parturitions:e,weighings:n}=rt();return N.useMemo(()=>{const i=new Date().toISOString().split("T")[0],s=new Set;return e.forEach(o=>{if(o.status==="activa"){const c=pc(o.parturitionDate,i);c>=270&&c<=300&&s.add(o.goatId)}}),t.filter(o=>o.reproductiveStatus==="Preñada"&&!o.isReference).forEach(o=>{const c=n.filter(u=>u.goatId===o.id).sort((u,d)=>new Date(d.date).getTime()-new Date(u.date).getTime());if(c.length>=4){const u=c[0].kg,d=c[1].kg,f=c[2].kg,h=c[3].kg;u<d&&d<f&&f<h&&s.add(o.id)}}),e.forEach(o=>{o.status==="en-secado"&&s.add(o.goatId)}),Array.from(s)},[t,e,n])},o4e=({isOpen:t,onClose:e,animalIds:n,onSelectAnimal:r})=>{const{animals:i,fathers:s}=rt(),a=N.useMemo(()=>{const o=new Map(i.map(u=>[u.id,u])),c=new Map(s.map(u=>[u.id,u]));return n.map(u=>{const d=o.get(u);if(d)return d;const f=c.get(u);return f||{id:u,name:void 0}}).sort((u,d)=>u.id.localeCompare(d.id))},[n,i,s]);return l.jsxs(at,{isOpen:t,onClose:e,title:"Animales que Salieron del Ordeño",children:[l.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto pr-2",children:a.length>0?a.map(o=>l.jsxs("button",{onClick:()=>{r(o.id),e()},className:"w-full text-left p-3 bg-zinc-800 hover:bg-zinc-700 rounded-lg transition-colors flex justify-between items-center group",children:[l.jsx("span",{className:"font-semibold text-white",children:pt(o)}),l.jsx(Gn,{className:"text-zinc-500 group-hover:text-white transition-colors"})]},o.id)):l.jsx("p",{className:"text-center text-zinc-500 py-4",children:"No hay animales que hayan salido en este período."})}),l.jsx("div",{className:"flex justify-end mt-4 pt-4 border-t border-brand-border",children:l.jsx("button",{onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg text-white",children:"Cerrar"})})]})},l4e=({isOpen:t,onClose:e,onConfirm:n,dateToDelete:r})=>{const[i,s]=N.useState(""),a=r?new Date(r+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"}):"",o=i===r;return N.useEffect(()=>{t&&s("")},[t]),l.jsx(at,{isOpen:t,onClose:e,title:"Confirmar Eliminación",children:l.jsxs("div",{className:"space-y-4 text-white",children:[l.jsxs("div",{className:"text-center space-y-2",children:[l.jsx($t,{className:"mx-auto h-12 w-12 text-brand-red"}),l.jsxs("p",{className:"text-lg font-semibold",children:["¿Eliminar todos los pesajes del ",l.jsx("span",{className:"font-bold",children:a}),"?"]}),l.jsxs("p",{className:"text-sm text-zinc-400",children:["Esta acción es irreversible y eliminará ",r?"permanentemente":""," todos los registros de esta fecha."]})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"confirmDateInput",className:"block text-sm font-medium text-zinc-400 mb-1",children:["Para confirmar, escribe la fecha: ",l.jsx("strong",{className:"text-zinc-200",children:r})]}),l.jsx("input",{id:"confirmDateInput",type:"text",value:i,onChange:c=>s(c.target.value),placeholder:"YYYY-MM-DD",className:`w-full bg-zinc-800 p-3 rounded-xl text-lg text-center font-mono border-2 ${i&&!o?"border-red-500":"border-zinc-700"} focus:border-brand-red focus:ring-0`})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-brand-border",children:[l.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{type:"button",onClick:n,disabled:!o,className:"px-5 py-2 bg-brand-red hover:bg-red-700 text-white font-bold rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Eliminar Permanentemente"})]})]})})},Ly=({title:t,value:e,unit:n,icon:r,onClick:i})=>l.jsxs("button",{onClick:i,className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-orange transition-colors w-full",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[l.jsx(r,{size:14}),l.jsx("span",{children:t})]}),l.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:[e," ",l.jsx("span",{className:"text-lg text-zinc-400",children:n})]})]}),ES=({animal:t,onSelectAnimal:e,onOpenActions:n,isNewEntry:r})=>{const{weighings:i}=rt(),{trend:s,isLongTrend:a}=xP(t.id,i),o=lc(),c=N.useRef(!1),u={Sobresaliente:"bg-brand-green",Promedio:"bg-gray-500",Pobre:"bg-brand-red"},d=wa(t.birthDate),f=(h,p)=>{const g=p.offset.x,m=p.velocity.x;(g<-80/2||m<-500)&&n(t),o.start({x:0}),setTimeout(()=>{c.current=!1},100)};return l.jsxs("div",{className:"relative w-full overflow-hidden bg-brand-glass border-b border-brand-border/50 last:border-b-0",children:[l.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:l.jsxs("div",{className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[l.jsx(ir,{size:22}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Acciones"})]})}),l.jsxs(Ln.div,{drag:"x",dragConstraints:{left:-80,right:0},dragElastic:.1,onDragStart:()=>{c.current=!0},onDragEnd:f,onTap:()=>{c.current||e(t.id)},animate:o,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg p-4",children:[l.jsx("div",{className:`absolute top-3 right-3 w-2.5 h-2.5 rounded-full ${t.latestWeighing>0?u[t.classification]:"bg-transparent"}`,title:`Rendimiento: ${t.classification}`}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:pt(t)}),l.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:[t.sex," | ",d," | Lote: ",t.location||"Sin Asignar"]})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"font-semibold text-brand-orange",children:t.latestWeighing>0?`${t.latestWeighing.toFixed(2)} Kg`:"Sin Pesar"}),t.del>0&&l.jsxs("p",{className:"text-xs text-zinc-400",children:["DEL: ",t.del]})]}),l.jsx(nP,{statuses:t.statusObjects}),r?l.jsx("span",{title:"Primer Ingreso al Control Lechero",className:"w-8 h-8 flex items-center justify-center rounded-full bg-green-500/20 text-brand-green",children:l.jsx(MF,{size:18,strokeWidth:3})}):l.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:l.jsx(i4e,{trend:s,isLongTrend:a})}),l.jsx(Gn,{className:"text-zinc-600"})]})]})]})]})},c4e=({animalId:t})=>{var i,s;const{weighings:e}=rt(),{lastTwoWeighings:n,difference:r}=xP(t,e);return n.length<2?l.jsx("p",{children:"No hay suficientes datos para comparar."}):l.jsxs("div",{className:"text-center text-white space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"text-sm text-zinc-400",children:["Pesaje Anterior (",new Date(n[1].date+"T00:00:00").toLocaleDateString(),")"]}),l.jsxs("p",{className:"text-2xl font-semibold",children:[((i=n[1])==null?void 0:i.kg.toFixed(2))||"N/A"," Kg"]})]}),l.jsxs("div",{children:[l.jsxs("p",{className:"text-sm text-zinc-400",children:["Último Pesaje (",new Date(n[0].date+"T00:00:00").toLocaleDateString(),")"]}),l.jsxs("p",{className:"text-2xl font-semibold",children:[((s=n[0])==null?void 0:s.kg.toFixed(2))||"N/A"," Kg"]})]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-zinc-400 text-base mb-1",children:"Diferencia"}),l.jsxs("p",{className:`text-3xl font-bold ${r>.15?"text-brand-green":r<-.15?"text-brand-red":"text-zinc-400"}`,children:[r>0?"+":"",r.toFixed(2)," Kg"]})]})]})},u4e=t=>{const{x:e,y:n,width:r,height:i,value:s,total:a}=t;if(a===0||s===0)return null;const o=(s/a*100).toFixed(0);return l.jsx("text",{x:e+r/2,y:n+i/2,fill:"#fff",textAnchor:"middle",dominantBaseline:"middle",fontSize:"14px",fontWeight:"bold",opacity:.8,children:`${o}%`})};function d4e({onSelectAnimal:t}){const{animals:e,parturitions:n,weighings:r,isLoading:i,serviceRecords:s,sireLots:a,breedingSeasons:o,startDryingProcess:c,setLactationAsDry:u,deleteWeighingSession:d}=rt(),[f,h]=N.useState(!1),[p,g]=N.useState("all"),[m,y]=N.useState("all"),[x,w]=N.useState("all"),[_,A]=N.useState("all"),[E,C]=N.useState(null),[j,T]=N.useState(null),[P,I]=N.useState(!1),[M,F]=N.useState(!1),[R,H]=N.useState(!1),[X,W]=N.useState(!1),[U,$]=N.useState(null),[Y,Q]=N.useState(!1),[ce,ie]=N.useState(0),oe=a4e(),{weighingsByDate:ve,availableDates:je}=N.useMemo(()=>{const Be={};r.forEach(ft=>{Be[ft.date]||(Be[ft.date]=[]),Be[ft.date].push(ft)});const bt=Object.keys(Be).sort((ft,Qn)=>new Date(Qn).getTime()-new Date(ft).getTime());return{weighingsByDate:Be,availableDates:bt}},[r]),Se=je[ce],Me=N.useMemo(()=>{if(!Se)return[];const Be=ve[Se]||[],bt=new Map;return Be.forEach(ft=>bt.set(ft.goatId,ft)),Array.from(bt.values())},[Se,ve]),{classifiedAnimals:Qe,distribution:me,mean:Ye,stdDev:Xe,weightedMean:te}=xx(Me,e,r,n,f),Te=N.useMemo(()=>Qe.map(Be=>{const bt=e.find(ft=>ft.id===Be.id);return{...Be,id:Be.id,name:bt==null?void 0:bt.name,statusObjects:bt?gU(bt,n,s,a,o):[]}}),[Qe,e,n,s,a,o]),ot=N.useMemo(()=>{if(ce+1<je.length){const Be=je[ce+1];return ve[Be]||[]}return[]},[ce,je,ve]),Ct=xx(ot,e,r,n,!1),nt=N.useMemo(()=>{const Be=new Set(Qe.map(re=>re.id)),bt=new Set(Ct.classifiedAnimals.map(re=>re.id));let ft=new Set,Qn=new Set;ce===je.length-1&&je.length>0?ft=Be:je.length>0&&(ft=new Set([...Be].filter(re=>!bt.has(re))),Qn=new Set([...bt].filter(re=>!Be.has(re))));const Sn=je.slice(Math.max(0,ce-2),ce+1).map(re=>{const pe=ve[re]||[];if(pe.length===0)return{date:re,avg:0};const ye=pe.reduce((Re,Ve)=>Re+Ve.kg,0);return{date:new Date(re+"T00:00:00").toLocaleDateString("es-VE",{month:"short",day:"numeric"}),avg:ye/pe.length}}).reverse();let ys=null,Fs=null,$r=0,Je=0,vi=1/0;if(Te.length>0){$r=Te.reduce((pe,ye)=>pe+ye.latestWeighing,0);const re=Te.map(pe=>pe.latestWeighing);Je=Math.max(...re),vi=Math.min(...re.filter(pe=>pe>0)),vi===1/0&&(vi=0),ys=Te.find(pe=>pe.latestWeighing===Je)||null,Fs=Te.find(pe=>pe.latestWeighing===vi)||null}const yi=Ye-Xe,Vs=Ye+Xe,Ue=Qe.filter(re=>re.latestWeighing>=yi&&re.latestWeighing<=Vs).length,qi=Qe.length>0?Ue/Qe.length*100:0;return{trendData:Sn,kpi:{total:$r,max:Je,min:vi},topPerformer:ys,bottomPerformer:Fs,consistency:{percentage:qi},newAnimalIds:ft,exitingAnimalIds:Qn}},[Qe,Te,Ct.classifiedAnimals,je,ce,ve,Ye,Xe]),{searchTerm:st,setSearchTerm:Xt,filteredItems:Yn}=YU(Te,["id","name"]),Mn=N.useMemo(()=>{let Be=st?Yn:Te;return p!=="all"&&(Be=Be.filter(bt=>bt.classification===p)),x==="new"&&(Be=Be.filter(bt=>nt.newAnimalIds.has(bt.id))),m!=="all"&&(Be=Be.filter(bt=>{const{trend:ft}=xP(bt.id,r);return ft===m})),_!=="all"&&(Be=Be.filter(bt=>{const ft=bt.del;return _==="drying"?oe.includes(bt.id):ft===0?!1:_==="first"?ft>0&&ft<=100:_==="second"?ft>100&&ft<=200:_==="third"?ft>200&&ft<270:!1})),Be.sort((bt,ft)=>ft.latestWeighing-bt.latestWeighing)},[st,Yn,Te,p,m,_,x,nt.newAnimalIds,oe,r]),Ft=N.useMemo(()=>{const Be=Qe.filter(Sn=>!nt.newAnimalIds.has(Sn.id)).length;if(Qe.length===0)return{up:0,down:0,stable:0,new:0};if(Be===0&&nt.newAnimalIds.size>0)return{up:0,down:0,stable:0,new:100};if(Be===0)return{up:0,down:0,stable:0,new:0};const bt=Qe.filter(Sn=>Sn.trend==="up").length,ft=Qe.filter(Sn=>Sn.trend==="down").length,Qn=Qe.filter(Sn=>Sn.trend==="stable").length;return{up:bt/Be*100,down:ft/Be*100,stable:Qn/Be*100,new:nt.newAnimalIds.size/Qe.length*100||0}},[Qe,nt.newAnimalIds]),or=()=>{g("all"),y("all"),A("all"),w("all"),Xt("")},He=Be=>{var bt;if((bt=Be==null?void 0:Be.payload)!=null&&bt.name){const ft=Be.payload.name;g(Qn=>Qn===ft?"all":ft)}},Zt=Be=>{$(Be),W(!0)},Pe=Be=>{if(!Be)return[];const bt=[],ft=n.find(Qn=>Qn.goatId===Be.id&&(Qn.status==="activa"||Qn.status==="en-secado"));return bt.push({label:"Registrar/Editar Pesaje",icon:Xl,onClick:()=>{W(!1),C("milkWeighing")}}),ft&&(ft.status==="activa"&&bt.push({label:"Iniciar Secado",icon:ed,onClick:()=>{c(ft.id),W(!1)},color:"text-blue-400"}),(ft.status==="activa"||ft.status==="en-secado")&&bt.push({label:"Declarar Seca",icon:va,onClick:()=>{u(ft.id),W(!1)},color:"text-zinc-400"})),bt},qe=()=>{C(null),$(null)},yt=async()=>{if(Se)try{await d(Se),ie(0),Q(!1)}catch(Be){console.error("Error deleting session:",Be)}};return i&&je.length===0?l.jsx("div",{className:"text-center p-10",children:l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Calculando análisis..."})}):je.length===0?l.jsx("div",{className:"text-center p-10",children:l.jsx("h1",{className:"text-2xl text-zinc-400",children:"No hay pesajes registrados."})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-2xl mx-auto",children:[" ",l.jsxs("div",{className:"p-4 space-y-4",children:[l.jsxs("div",{className:"bg-brand-glass rounded-2xl p-3 border border-brand-border flex justify-between items-center",children:[l.jsx("button",{onClick:()=>ie(Be=>Math.min(Be+1,je.length-1)),disabled:ce>=je.length-1,className:"p-2 rounded-full hover:bg-zinc-700/50 disabled:opacity-30",children:l.jsx(Iee,{})}),l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-lg font-semibold text-white",children:Se?new Date(Se+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"}):"Sin Datos"}),l.jsxs("p",{className:"text-sm text-zinc-400",children:[Me.length," animales pesados"]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsxs("button",{onClick:()=>Q(!0),className:"p-2 rounded-full text-zinc-500 hover:text-brand-red hover:bg-red-500/10 transition-colors mr-2",title:"Eliminar pesajes de este día",children:[" ",l.jsx(ya,{size:18})," "]}),l.jsx("button",{onClick:()=>ie(Be=>Math.max(Be-1,0)),disabled:ce===0,className:"p-2 rounded-full hover:bg-zinc-700/50 disabled:opacity-30",children:l.jsx(Gn,{})})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx(Ly,{icon:Xl,title:f?"Media Ponderada":"Media Prod.",value:(f?te:Ye).toFixed(2),unit:"Kg",onClick:()=>C("media")}),l.jsx(Ly,{icon:$F,title:"Prod. Total",value:nt.kpi.total.toFixed(2),unit:"Kg",onClick:()=>C("total")}),l.jsx(Ly,{icon:FF,title:"Consistencia",value:Xe.toFixed(2),unit:"σ",onClick:()=>C("stdDev")}),l.jsx(Ly,{icon:ba,title:"Rango Prod.",value:`${nt.kpi.min.toFixed(2)} - ${nt.kpi.max.toFixed(2)}`,unit:"Kg",onClick:()=>C("rango")})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border animate-fade-in",children:[l.jsxs("div",{className:"flex justify-between items-center border-b border-brand-border pb-2 mb-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(lE,{className:"text-brand-orange w-[18px] h-[18px]"}),l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Análisis del Día"}),l.jsx("button",{onClick:()=>I(!0),className:"text-zinc-500 hover:text-white",children:l.jsx(sb,{size:14})})]}),l.jsxs("label",{className:"flex items-center space-x-2 text-sm text-zinc-300 cursor-pointer",children:[l.jsx(j_,{size:14,className:f?"text-brand-orange":"text-zinc-500"}),l.jsx("span",{children:"Ponderado a DEL"}),l.jsx("button",{type:"button",onClick:Be=>{Be.preventDefault(),Be.stopPropagation(),F(!0)},className:"text-zinc-500 hover:text-white -ml-1",children:l.jsx(sb,{size:14})}),l.jsx("input",{type:"checkbox",checked:f,onChange:Be=>h(Be.target.checked),className:"form-checkbox h-4 w-4 bg-zinc-700 border-zinc-600 rounded text-brand-orange focus:ring-brand-orange focus:ring-offset-0"})]})]}),l.jsx("div",{className:"w-full h-48",children:l.jsx(Er,{children:l.jsxs(Ls,{data:me,margin:{top:20,right:10,left:-20,bottom:0},children:[l.jsx(sr,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(gr,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},allowDecimals:!1}),l.jsx(fn,{content:l.jsx(Hu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),l.jsxs(Lr,{dataKey:"count",onClick:He,cursor:"pointer",children:[me.map(Be=>l.jsx(Ms,{fill:Be.fill,className:`${p!=="all"&&p!==Be.name?"opacity-30":"opacity-100"} transition-opacity`},Be.name)),l.jsx(cs,{dataKey:"count",content:l.jsx(u4e,{total:Qe.length})})]})]})})}),l.jsxs("div",{className:"text-center text-xs text-zinc-400 mt-2",children:[l.jsxs("span",{children:["μ = ",Ye.toFixed(2)]})," | ",l.jsxs("span",{children:["σ = ",Xe.toFixed(2)]})]})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-2 border border-brand-border space-y-2",children:[l.jsxs("div",{className:"flex justify-between items-center px-2 pt-2",children:[l.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[l.jsx("button",{onClick:()=>{y("all"),w("all")},className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors ${m==="all"&&x==="all"?"bg-zinc-600 text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"Todos"}),l.jsxs("button",{onClick:()=>{y("up"),w("all")},disabled:Ft.up===0&&Qe.length-nt.newAnimalIds.size>0,className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors flex items-center space-x-1 ${m==="up"?"bg-brand-green/80 text-white":"bg-zinc-800/50 text-brand-green"} disabled:opacity-40`,children:[l.jsx(Yf,{size:14})," ",l.jsxs("span",{children:[Ft.up.toFixed(0),"%"]})]}),l.jsxs("button",{onClick:()=>{y("down"),w("all")},disabled:Ft.down===0&&Qe.length-nt.newAnimalIds.size>0,className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors flex items-center space-x-1 ${m==="down"?"bg-brand-red/80 text-white":"bg-zinc-800/50 text-brand-red"} disabled:opacity-40`,children:[l.jsx(Gf,{size:14})," ",l.jsxs("span",{children:[Ft.down.toFixed(0),"%"]})]}),l.jsxs("button",{onClick:()=>{y("single"),w("all")},disabled:Ft.new===0&&Qe.length>0,className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors flex items-center space-x-1 ${m==="single"?"bg-brand-blue/80 text-white":"bg-zinc-800/50 text-brand-blue"} disabled:opacity-40`,children:[l.jsx(j_,{size:14})," ",l.jsxs("span",{children:[Ft.new.toFixed(0),"%"]})]})]}),l.jsx("button",{onClick:or,title:"Limpiar todos los filtros",className:"text-zinc-500 hover:text-white",children:l.jsx(aT,{size:16})})]}),l.jsxs("div",{className:"flex justify-between items-center p-2 border-t border-brand-border",children:[l.jsx("div",{className:"text-xs font-semibold text-zinc-400",children:"Fase Lactancia:"}),l.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[l.jsx("button",{onClick:()=>A("all"),className:`px-2 py-1 text-xs font-semibold rounded-md ${_==="all"?"bg-zinc-600 text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"Todos"}),l.jsx("button",{onClick:()=>A("first"),className:`px-2 py-1 text-xs font-semibold rounded-md ${_==="first"?"bg-brand-blue text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"1er T"}),l.jsx("button",{onClick:()=>A("second"),className:`px-2 py-1 text-xs font-semibold rounded-md ${_==="second"?"bg-brand-blue text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"2do T"}),l.jsx("button",{onClick:()=>A("third"),className:`px-2 py-1 text-xs font-semibold rounded-md ${_==="third"?"bg-brand-blue text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"3er T"}),l.jsx("button",{onClick:()=>A("drying"),className:`px-2 py-1 text-xs font-semibold rounded-md ${_==="drying"?"bg-brand-red/80 text-white":"bg-zinc-800/50 text-brand-red"}`,children:"A Secado"})]})]}),l.jsxs("div",{className:"flex justify-between items-center p-2 border-t border-brand-border",children:[l.jsx("div",{className:"text-xs font-semibold text-zinc-400",children:"Movimientos:"}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("button",{onClick:()=>w(Be=>Be==="new"?"all":"new"),disabled:nt.newAnimalIds.size===0,className:`px-3 py-1 text-xs font-semibold rounded-md flex items-center gap-1.5 transition-all ${x==="new"?"bg-brand-green text-white shadow-lg shadow-green-500/20":"bg-zinc-800/50 text-zinc-300"} ${nt.newAnimalIds.size>0&&x!=="new"&&"animate-pulse"} disabled:opacity-40 disabled:cursor-not-allowed`,children:[l.jsx(MF,{size:14})," ",l.jsxs("span",{children:["Ingresos (",nt.newAnimalIds.size,")"]})]}),l.jsxs("button",{onClick:()=>H(!0),disabled:nt.exitingAnimalIds.size===0,className:`px-3 py-1 text-xs font-semibold rounded-md flex items-center gap-1.5 transition-all bg-zinc-800/50 text-zinc-300 ${nt.exitingAnimalIds.size>0&&"animate-pulse"} disabled:opacity-40 disabled:cursor-not-allowed`,children:[l.jsx(RF,{size:14})," ",l.jsxs("span",{children:["Salidas (",nt.exitingAnimalIds.size,")"]})]})]})]})]}),l.jsxs("div",{className:"relative px-4",children:[l.jsx(Iu,{className:"absolute left-7 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500 pointer-events-none"}),l.jsx("input",{type:"search",placeholder:`Buscar ID o Nombre en ${Mn.length} animales...`,value:st,onChange:Be=>Xt(Be.target.value),className:"w-full bg-brand-glass border border-brand-border rounded-xl pl-10 pr-4 py-3 text-white focus:ring-2 focus:ring-brand-orange"})]})]}),l.jsxs("div",{className:"pt-2 space-y-0 pb-4",children:[" ",Mn.length>0?l.jsxs("div",{className:"bg-brand-glass rounded-2xl border border-brand-border overflow-hidden mx-4",children:[" ",Mn.map(Be=>l.jsx(ES,{animal:Be,onSelectAnimal:t,onOpenActions:Zt,isNewEntry:nt.newAnimalIds.has(Be.id)},Be.id))]}):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl mx-4",children:l.jsx("p",{className:"text-zinc-400",children:st?"No se encontraron resultados":"No hay animales con los filtros."})})]})]})," ",l.jsx(at,{isOpen:E==="media",onClose:()=>C(null),title:"Análisis de Producción Media",children:l.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[l.jsxs("p",{children:["La **Media de Producción** del día es **",Ye.toFixed(2)," Kg**. Representa el promedio simple."]}),l.jsxs("p",{children:["La **Media Ponderada** (",te.toFixed(2)," Kg) premia la **persistencia lechera** (más valor a producción tardía)."]})]})}),l.jsx(at,{isOpen:E==="total",onClose:()=>C(null),title:"Producción Total del Día",children:l.jsxs("div",{className:"text-center",children:[l.jsxs("p",{className:"text-zinc-400",children:["La producción total registrada el ",Se?new Date(Se+"T00:00:00").toLocaleDateString("es-VE"):"-"," fue:"]}),l.jsxs("h2",{className:"text-5xl font-bold text-brand-orange my-2",children:[nt.kpi.total.toFixed(2)," Kg"]})]})}),l.jsx(at,{isOpen:E==="stdDev",onClose:()=>C(null),title:"Análisis de Consistencia (σ)",children:l.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[l.jsxs("p",{children:["La Desviación Estándar (σ) de **",Xe.toFixed(2),"** mide la dispersión. Un valor **bajo** es ideal (rebaño consistente)."]}),l.jsxs("div",{className:"bg-black/30 p-4 rounded-lg text-center",children:[l.jsx("p",{className:"text-sm uppercase text-zinc-400",children:"Rebaño dentro de 1σ"}),l.jsxs("p",{className:"text-4xl font-bold text-brand-orange my-1",children:[nt.consistency.percentage.toFixed(0),"%"]}),l.jsxs("p",{className:"text-sm text-zinc-400",children:["Cercanía al promedio de ",l.jsxs("span",{className:"font-bold text-white",children:[Ye.toFixed(2)," Kg"]}),"."]})]})]})}),l.jsx(at,{isOpen:E==="rango",onClose:()=>C(null),title:"Extremos de Producción del Día",children:l.jsxs("div",{className:"space-y-4",children:[nt.topPerformer&&l.jsxs("div",{className:"bg-green-900/40 border border-green-500/50 rounded-2xl p-4",children:[l.jsx("h3",{className:"font-semibold text-brand-green mb-2",children:"Producción Máxima"}),l.jsx(ES,{animal:nt.topPerformer,onSelectAnimal:()=>{C(null),t(nt.topPerformer.id)},onOpenActions:Zt,isNewEntry:nt.newAnimalIds.has(nt.topPerformer.id)})]}),nt.bottomPerformer&&l.jsxs("div",{className:"bg-red-900/40 border border-red-500/50 rounded-2xl p-4",children:[l.jsx("h3",{className:"font-semibold text-brand-red mb-2",children:"Producción Mínima"}),l.jsx(ES,{animal:nt.bottomPerformer,onSelectAnimal:()=>{C(null),t(nt.bottomPerformer.id)},onOpenActions:Zt,isNewEntry:nt.newAnimalIds.has(nt.bottomPerformer.id)})]})]})}),l.jsx(at,{isOpen:P,onClose:()=>I(!1),title:"¿Qué es el Análisis del Ordeño?",children:l.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[l.jsx("p",{children:"Clasifica animales (Pobre, Promedio, Sobresaliente) usando la media (μ) y desviación estándar (σ)."}),l.jsxs("div",{children:[l.jsxs("h4",{className:"font-semibold text-white mb-1",children:["Ponderado a DEL (",l.jsx(j_,{size:12,className:"inline-block mb-0.5"}),")"]}),l.jsx("p",{className:"text-sm",children:"Activa este cálculo para dar más valor a la producción temprana (persistencia)."})]})]})}),l.jsx(at,{isOpen:M,onClose:()=>F(!1),title:"¿Qué es el Score Ponderado?",children:l.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[l.jsx("p",{children:"Ajusta la producción para premiar la **persistencia lechera**."}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-white mb-1",children:"Fórmula"}),l.jsx("div",{className:"bg-black/30 p-3 rounded-lg text-sm font-mono text-center text-orange-300",children:"Score = Kg × (1 + ((DEL - 50) / (DEL + 50)))"})]}),l.jsx("p",{className:"pt-2 border-t border-zinc-700/80 text-sm",children:"2 Kg en día **200** valen más que 2 Kg en día 40."})]})}),j&&l.jsx(at,{isOpen:!!j,onClose:()=>T(null),title:`Tendencia de ${pt(j)}`,children:l.jsx(c4e,{animalId:j.id})}),l.jsx(o4e,{isOpen:R,onClose:()=>H(!1),animalIds:Array.from(nt.exitingAnimalIds),onSelectAnimal:t}),l.jsx(Mu,{isOpen:X,onClose:()=>W(!1),title:`Acciones para ${pt(U)}`,actions:Pe(U)}),E==="milkWeighing"&&U&&l.jsx(s4e,{animal:U,onCancel:qe,onSaveSuccess:qe}),Se&&l.jsx(l4e,{isOpen:Y,onClose:()=>Q(!1),onConfirm:yt,dateToDelete:Se})]})}const f4e=t=>N.useMemo(()=>{if(t.length===0)return{monthlyData:[]};const n=t.reduce((i,s)=>{const a=s.date.substring(0,7);return i[a]||(i[a]=[]),i[a].push(s),i},{});let r=Object.entries(n).map(([i,s])=>{const a=new Date(`${i}-02T12:00:00Z`),o=a.toLocaleString("es-VE",{month:"long",timeZone:"UTC"}),c=a.getUTCFullYear(),u=s.length,d=s.reduce((f,h)=>f+h.kg,0);return{periodLabel:`${o.charAt(0).toUpperCase()+o.slice(1)} ${c}`,periodId:i,totalKg:d,averageKg:u>0?d/u:0,weighingCount:u,animalCount:new Set(s.map(f=>f.goatId)).size,weighingEvents:new Set(s.map(f=>f.date)).size,weighings:s,newAnimalsWeighings:[]}}).sort((i,s)=>s.periodId.localeCompare(i.periodId));return r=r.map((i,s,a)=>{const o=a[s+1];if(o){const c=o.averageKg?(i.averageKg-o.averageKg)/o.averageKg*100:void 0,u=o.animalCount?(i.animalCount-o.animalCount)/o.animalCount*100:void 0,d=new Set(o.weighings.map(m=>m.goatId)),f=new Set(i.weighings.map(m=>m.goatId)),h=new Set([...f].filter(m=>!d.has(m))),p=i.weighings.filter(m=>h.has(m.goatId)),g=[...d].filter(m=>!f.has(m)).length;return{...i,avgKgChange:c,animalCountChange:u,newAnimalsWeighings:p,previousAnimalCount:o.animalCount,exitingAnimalCount:g}}return{...i,newAnimalsWeighings:i.weighings,previousAnimalCount:0,exitingAnimalCount:0}}),{monthlyData:r,quarterlyData:[],yearlyData:[]}},[t]),g0=({value:t})=>{if(t===void 0||isNaN(t)||t===0)return l.jsx("div",{className:"w-16 h-5"});const e=t>0,n=e?"text-brand-green":"text-brand-red",r=e?Yf:Gf;return l.jsxs("span",{className:`flex items-center text-sm font-bold ${n} whitespace-nowrap`,children:[l.jsx(r,{size:16,className:"mr-0.5"}),t.toFixed(1),"%"]})},h4e=({stats:t,onClick:e})=>l.jsxs("button",{onClick:e,className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-brand-orange transition-colors",children:[l.jsxs("div",{className:"min-w-0 mr-2",children:[l.jsx("p",{className:"font-bold text-lg text-white truncate",children:t.periodLabel}),l.jsxs("p",{className:"text-sm text-zinc-400 truncate",children:["Prom: ",t.averageKg.toFixed(2)," Kg | ",t.animalCount," animales"]})]}),l.jsxs("div",{className:"flex-shrink-0 flex items-center space-x-2",children:[l.jsx(g0,{value:t.avgKgChange}),l.jsx(Gn,{className:"text-zinc-600 flex-shrink-0"})]})]}),XU=({weighing:t,onSelectAnimal:e})=>l.jsxs("button",{onClick:()=>e(t.id),className:"w-full text-left bg-black/20 rounded-lg p-3 border border-zinc-700/50 flex justify-between items-center hover:border-orange-400/50",children:[l.jsx("div",{className:"flex items-center gap-4",children:l.jsx("div",{children:l.jsxs("p",{className:"font-bold text-base text-white flex items-center gap-2",children:[t.id,l.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full text-white ${t.classification==="Pobre"?"bg-brand-red/80":t.classification==="Sobresaliente"?"bg-brand-green/80":"bg-gray-500/80"}`,children:t.classification})]})})}),l.jsxs("p",{className:"font-semibold text-lg text-white",children:[t.latestWeighing.toFixed(2)," ",l.jsx("span",{className:"text-base font-medium text-zinc-400",children:"Kg"})]})]}),ZU=t=>{const{x:e,y:n,width:r,value:i,total:s}=t;if(s===0||i===0)return null;const a=(i/s*100).toFixed(0);return l.jsx("text",{x:e+r/2,y:n+20,fill:"#fff",textAnchor:"middle",fontSize:"12px",fontWeight:"bold",children:`${a}%`})},JU=({active:t,payload:e,label:n})=>t&&e&&e.length?l.jsxs("div",{className:"bg-black/50 backdrop-blur-xl p-2 rounded-lg border border-brand-border text-white text-xs",children:[l.jsx("p",{className:"label font-semibold",children:n}),l.jsx("p",{className:"intro",children:`Animales: ${e[0].value}`})]}):null,p4e=({isOpen:t,onClose:e,data:n,periodLabel:r,onSelectAnimal:i})=>{const{animals:s,weighings:a,parturitions:o}=rt(),[c,u]=N.useState("all"),d=xx((n==null?void 0:n.newAnimalsWeighings)||[],s,a,o,!1),f=N.useMemo(()=>c==="all"?d.classifiedAnimals:d.classifiedAnimals.filter(p=>p.classification===c),[d.classifiedAnimals,c]),h=p=>{if(p!=null&&p.name){const g=p.name;u(m=>m===g?"all":g)}};return!t||!n?null:l.jsx(at,{isOpen:t,onClose:e,title:`Análisis Nuevos Ingresos - ${r}`,children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-black/20 p-3 rounded-2xl",children:[l.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[l.jsx(yv,{size:14}),"Promedio"]}),l.jsxs("p",{className:"text-2xl font-bold text-white",children:[d.mean.toFixed(2),l.jsx("span",{className:"text-lg ml-1 text-zinc-400",children:"Kg"})]})]}),l.jsxs("div",{className:"bg-black/20 p-3 rounded-2xl",children:[l.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[l.jsx(Ou,{size:14}),"Animales"]}),l.jsx("p",{className:"text-2xl font-bold text-white",children:d.classifiedAnimals.length})]})]}),l.jsx("div",{className:"bg-black/20 backdrop-blur-xl rounded-2xl p-4 border border-zinc-800/50",children:l.jsx("div",{className:"w-full h-48",children:l.jsx(Er,{children:l.jsxs(Ls,{data:d.distribution,margin:{top:20,right:10,left:-20,bottom:0},children:[l.jsx(sr,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(gr,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(fn,{content:l.jsx(JU,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),l.jsxs(Lr,{dataKey:"count",onClick:h,cursor:"pointer",children:[d.distribution.map(p=>l.jsx(Ms,{fill:p.fill,className:`${c!=="all"&&c!==p.name?"opacity-30":"opacity-100"}`},p.name)),l.jsx(cs,{dataKey:"count",content:l.jsx(ZU,{total:d.classifiedAnimals.length})})]})]})})})}),l.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:f.sort((p,g)=>g.latestWeighing-p.latestWeighing).map(p=>l.jsx(XU,{weighing:p,onSelectAnimal:i},p.weighingId||p.id))})]})})};function m4e({navigateToRebano:t}){const{animals:e,weighings:n,parturitions:r,isLoading:i}=rt(),[s,a]=N.useState(null),[o,c]=N.useState("all"),[u,d]=N.useState(!1),[f,h]=N.useState(null),{monthlyData:p}=f4e(n),g=xx((s==null?void 0:s.weighings)||[],e,n,r,!1),m=N.useMemo(()=>o==="all"?g.classifiedAnimals:g.classifiedAnimals.filter(x=>x.classification===o),[g.classifiedAnimals,o]),y=x=>{if(x!=null&&x.name){const w=x.name;c(_=>_===w?"all":w)}};return i?l.jsx("div",{className:"text-center p-10",children:l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando historial..."})}):s?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12 animate-fade-in px-4",children:[l.jsxs("header",{className:"flex items-center pt-4 pb-4",children:[l.jsx("button",{onClick:()=>{a(null),c("all")},className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(ar,{size:24})}),l.jsx("div",{className:"text-center flex-grow",children:l.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:s.periodLabel})}),l.jsx("div",{className:"w-8"})," "]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-brand-glass p-3 rounded-2xl",children:[l.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[l.jsx(yv,{size:14}),"Promedio / Animal"]}),l.jsxs("div",{className:"flex items-baseline gap-2",children:[l.jsxs("p",{className:"text-2xl font-bold text-white",children:[s.averageKg.toFixed(2),l.jsx("span",{className:"text-lg ml-1 text-zinc-400",children:"Kg"})]}),l.jsx(g0,{value:s.avgKgChange})]})]}),l.jsxs("div",{className:"bg-brand-glass p-3 rounded-2xl",children:[l.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[l.jsx(fs,{size:14}),"Eventos de Pesaje"]}),l.jsx("p",{className:"text-2xl font-bold text-white",children:s.weighingEvents})]}),l.jsxs("button",{onClick:()=>d(!0),className:"bg-brand-glass p-3 rounded-2xl text-left hover:border-brand-orange transition-colors border border-brand-border",children:[l.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[l.jsx(Ou,{size:14}),"Animales Ordeñados"]}),l.jsxs("div",{className:"flex items-baseline gap-2",children:[l.jsx("p",{className:"text-2xl font-bold text-white",children:s.animalCount}),l.jsx(g0,{value:s.animalCountChange})]})]}),l.jsxs("div",{className:"bg-brand-glass p-3 rounded-2xl",children:[l.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[l.jsx(ba,{size:14}),"Total Registrado"]}),l.jsxs("p",{className:"text-2xl font-bold text-white",children:[s.totalKg.toFixed(0),l.jsx("span",{className:"text-lg ml-1 text-zinc-400",children:"Kg"})]})]})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsxs("div",{className:"flex items-center space-x-2 border-b border-brand-border pb-2 mb-4",children:[l.jsx(vv,{className:"text-brand-orange",size:18}),l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Distribución del Período"})]}),l.jsx("div",{className:"w-full h-48",children:l.jsx(Er,{children:l.jsxs(Ls,{data:g.distribution,margin:{top:20,right:10,left:-20,bottom:0},children:[l.jsx(sr,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(gr,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(fn,{content:l.jsx(JU,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),l.jsxs(Lr,{dataKey:"count",onClick:y,cursor:"pointer",children:[g.distribution.map(x=>l.jsx(Ms,{fill:x.fill,className:`${o!=="all"&&o!==x.name?"opacity-30":"opacity-100"} transition-opacity`},x.name)),l.jsx(cs,{dataKey:"count",content:l.jsx(ZU,{total:g.classifiedAnimals.length})})]})]})})}),l.jsxs("div",{className:"text-center text-xs text-zinc-400 mt-2",children:[l.jsxs("span",{children:["μ = ",g.mean.toFixed(2)," Kg"]})," | ",l.jsxs("span",{children:["σ = ",g.stdDev.toFixed(2)]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 ml-1 mt-4",children:["Pesajes del Período (",m.length,")"]}),m.length>0?m.sort((x,w)=>w.latestWeighing-x.latestWeighing).map(x=>l.jsx(XU,{weighing:x,onSelectAnimal:w=>t({name:"lactation-profile",animalId:w})},x.weighingId||x.id)):l.jsx("div",{className:"text-center py-6 bg-brand-glass rounded-lg",children:l.jsx("p",{className:"text-zinc-500",children:"No hay pesajes que coincidan con el filtro."})})]})]}),l.jsx(at,{isOpen:u,onClose:()=>d(!1),title:"Variación de Animales en Ordeño",children:l.jsxs("div",{className:"text-zinc-300 space-y-4",children:[l.jsxs("div",{children:[l.jsxs("h4",{className:"font-semibold text-white mb-1",children:[s.periodLabel," vs Mes Anterior"]}),l.jsxs("p",{className:"text-sm text-zinc-400",children:["El mes anterior tenías ",l.jsx("span",{className:"font-bold text-white",children:s.previousAnimalCount})," animales en ordeño. Este mes tienes ",l.jsx("span",{className:"font-bold text-white",children:s.animalCount}),"."]}),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[l.jsxs("p",{children:["El cambio neto es de ",l.jsx("span",{className:"font-bold text-white",children:s.animalCount-(s.previousAnimalCount||0)})," animales"]}),l.jsx(g0,{value:s.animalCountChange})]})]}),l.jsxs("div",{className:"pt-4 border-t border-zinc-700/80",children:[s.exitingAnimalCount>0&&l.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:["Salieron del ordeño: ",l.jsx("span",{className:"font-bold text-brand-red",children:s.exitingAnimalCount})," animales."]}),s.newAnimalsWeighings.length>0&&l.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:["Nuevos ingresos: ",l.jsx("span",{className:"font-bold text-brand-green",children:new Set(s.newAnimalsWeighings.map(x=>x.goatId)).size})," animales."]}),s.newAnimalsWeighings.length>0&&l.jsxs("button",{onClick:()=>{h(s),d(!1)},className:"w-full mt-4 bg-brand-orange text-white font-semibold py-2 rounded-lg hover:bg-orange-600 transition-colors",children:["Analizar los ",new Set(s.newAnimalsWeighings.map(x=>x.goatId)).size," Nuevos Ingresos"]})]})]})}),l.jsx(p4e,{isOpen:!!f,onClose:()=>h(null),data:f,periodLabel:s.periodLabel,onSelectAnimal:x=>t({name:"lactation-profile",animalId:x})})]}):l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12 px-4 pt-4",children:[l.jsx("header",{className:"text-center pb-4",children:l.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Historial de Producción"})}),p.length>0?l.jsx("div",{className:"space-y-2",children:p.map(x=>l.jsx(h4e,{stats:x,onClick:()=>a(x)},x.periodId))}):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl mx-4",children:l.jsx("p",{className:"text-zinc-400",children:"No hay datos históricos de pesajes registrados."})})]})}const g4e=({selectedDate:t,onDateChange:e,onOpenCalendar:n})=>{const r=N.useMemo(()=>{const s=new Date;return s.setHours(0,0,0,0),Array.from({length:7},(a,o)=>{const c=new Date(s);return c.setDate(s.getDate()-o),c})},[]),i=(s,a)=>{if(s.getTime()===a.getTime())return"Hoy";const o=new Date(a);return o.setDate(a.getDate()-1),s.getTime()===o.getTime()?"Ayer":s.toLocaleDateString("es-VE",{weekday:"short"}).replace(".","")};return l.jsxs("div",{className:"px-4",children:[l.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-zinc-400 mb-2",children:[l.jsx(fs,{size:16}),"Fecha del Pesaje"]}),l.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",style:{scrollbarWidth:"none",WebkitOverflowScrolling:"touch"},children:[l.jsxs("button",{type:"button",onClick:n,className:"flex flex-col items-center justify-center bg-zinc-800/80 rounded-lg p-2 w-16 h-16 flex-shrink-0 text-zinc-300 hover:bg-zinc-700 transition-colors",children:[l.jsx(fs,{size:20}),l.jsx("span",{className:"text-xs mt-1",children:"Calendario"})]}),r.map(s=>{const a=s.getTime()===t.getTime();return l.jsxs("button",{type:"button",onClick:()=>e(s),className:`flex flex-col items-center justify-center rounded-lg p-2 w-16 h-16 flex-shrink-0 transition-colors ${a?"bg-brand-orange text-white":"bg-zinc-800/80 text-zinc-300 hover:bg-zinc-700"}`,children:[l.jsx("span",{className:"text-xs capitalize",children:i(s,r[0])}),l.jsx("span",{className:"font-bold text-2xl",children:s.getDate()}),l.jsx("span",{className:"text-xs",children:s.toLocaleDateString("es-VE",{month:"short"}).replace(".","")})]},s.toISOString())})]})]})},v4e=({entry:t,onDelete:e,onRegister:n})=>{const r=!t.isRecognized;return l.jsxs("div",{className:`p-3 rounded-lg flex justify-between items-center animate-fade-in group ${r?"bg-amber-900/40 border border-amber-500/50":"bg-zinc-800/50"}`,children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[r&&l.jsx($t,{className:"text-amber-400 flex-shrink-0",size:18}),l.jsx("span",{className:"font-semibold text-white",children:t.animalId})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[r?l.jsx("button",{onClick:()=>n(t.animalId),className:"text-xs font-semibold bg-brand-orange text-white px-2 py-1 rounded-md hover:bg-orange-600",children:"Registrar Parto"}):l.jsxs("span",{className:"text-zinc-300 font-semibold",children:[t.kg.toFixed(2)," Kg"]}),l.jsx("button",{onClick:()=>e(t.tempId),className:"p-1 text-zinc-400 hover:text-brand-red opacity-0 group-hover:opacity-100 transition-opacity",children:l.jsx(Za,{size:16})})]})]})},y4e=({onSaveSuccess:t})=>{const{animals:e,weighings:n,fetchData:r}=rt(),[i,s]=N.useState(""),[a,o]=N.useState(""),[c,u]=N.useState([]),[d,f]=N.useState(null),[h,p]=N.useState(()=>{const R=new Date;return R.setHours(0,0,0,0),R}),[g,m]=N.useState(!1),[y,x]=N.useState({isOpen:!1,motherId:""}),[w,_]=N.useState(!1),A=N.useRef(null),E=N.useRef(null),C=()=>{var $;if(f(null),!i||!a)return;const R=i.toUpperCase().trim(),H=parseFloat(a),X=h.toISOString().split("T")[0];if(H>100){f({type:"error",text:`El valor de ${H} Kg es irracional. Verifique el dato.`});return}if(H>8.5){f({type:"error",text:`Producción de ${H} Kg es muy alta. Límite: 8.5 Kg.`});return}if(c.some(Y=>Y.animalId===R)){f({type:"error",text:`${R} ya tiene un pesaje en esta sesión.`});return}if(n.some(Y=>Y.goatId===R&&Y.date===X)){f({type:"error",text:`${R} ya tiene un pesaje guardado para esta fecha.`});return}const W=e.find(Y=>Y.id===R);if(W&&W.isReference){f({type:"error",text:`${R} es un animal de Referencia. No se pueden añadir pesajes.`});return}const U={tempId:Date.now(),animalId:R,kg:H,date:X,isRecognized:!!W};u(Y=>[U,...Y]),s(""),o(""),($=A.current)==null||$.focus()},j=async()=>{f(null),_(!0);const{currentUser:R}=Kf;if(!R){f({type:"error",text:"Error de autenticación."}),_(!1);return}const H=c.filter(X=>!X.isRecognized).length;if(H>0){f({type:"error",text:`No se puede guardar. Tienes ${H} animal(es) sin registrar.`}),_(!1);return}if(c.length===0){f({type:"error",text:"No hay pesajes para guardar."}),_(!1);return}try{const X=Xc(pn),W=WC(pn,"weighings");c.forEach(U=>{const $=xr(W),Y={goatId:U.animalId,kg:U.kg,date:U.date,userId:R.uid};X.set($,Y)}),await X.commit(),f({type:"success",text:`${c.length} pesajes guardados con éxito.`}),u([]),setTimeout(()=>{t(h.toISOString().split("T")[0])},1500)}catch(X){f({type:"error",text:"Ocurrió un error al guardar en la nube."}),console.error("Error en escritura por lote:",X),_(!1)}},T=R=>{var H;R.key==="Enter"&&i&&(R.preventDefault(),(H=E.current)==null||H.focus())},P=R=>{R.key==="Enter"&&a&&(R.preventDefault(),C())},I=R=>{u(H=>H.filter(X=>X.tempId!==R))},M=R=>{R&&(R.setHours(0,0,0,0),p(R)),m(!1)},F=()=>{r(),u(R=>R.map(H=>H.animalId===y.motherId?{...H,isRecognized:!0}:H)),x({isOpen:!1,motherId:""})};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsxs("div",{className:"flex-shrink-0 space-y-4 pt-4",children:[l.jsxs("div",{className:"text-center px-4",children:[l.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Carga Rápida de Leche"}),l.jsx("p",{className:"text-md text-zinc-400",children:"Sesión de Ordeño"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx(g4e,{selectedDate:h,onDateChange:p,onOpenCalendar:()=>m(!0)}),l.jsxs("div",{className:"flex items-center gap-2 px-4",children:[l.jsx("input",{ref:A,type:"text",value:i,onChange:R=>s(R.target.value),onKeyDown:T,placeholder:"ID Animal",className:"w-full bg-brand-glass p-4 rounded-xl text-lg placeholder-zinc-500 border-2 border-transparent focus:border-brand-orange focus:ring-0"}),l.jsx("input",{ref:E,type:"number",step:"0.01",value:a,onChange:R=>o(R.target.value),onKeyDown:P,placeholder:"Kg",className:"w-32 flex-shrink-0 bg-brand-glass p-4 rounded-xl text-lg placeholder-zinc-500 border-2 border-transparent focus:border-brand-orange focus:ring-0"}),l.jsx("button",{onClick:C,disabled:!i||!a||w,"aria-label":"Añadir a la lista",className:"aspect-square h-full bg-brand-orange text-white rounded-xl flex items-center justify-center transition-all hover:bg-orange-600 disabled:opacity-40",children:l.jsx(ss,{size:24})})]})]})]}),l.jsxs("div",{className:"flex-grow overflow-y-auto px-4 space-y-2 py-4",children:[c.length===0&&l.jsx("p",{className:"text-center text-zinc-500 text-sm pt-8",children:"Los pesajes añadidos aparecerán aquí."}),c.map(R=>l.jsx(v4e,{entry:R,onDelete:I,onRegister:H=>x({isOpen:!0,motherId:H})},R.tempId))]}),l.jsxs("div",{className:"flex-shrink-0 p-4 border-t border-brand-border bg-gray-900/80 backdrop-blur-sm",children:[d&&l.jsxs("div",{className:`mb-3 flex items-center space-x-2 p-3 rounded-lg text-sm ${d.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[" ",d.type==="success"?l.jsx(ri,{size:18}):l.jsx($t,{size:18})," ",l.jsx("span",{children:d.text})," "]}),l.jsxs("button",{onClick:j,disabled:w||c.length===0,className:"w-full flex items-center justify-center gap-2 bg-brand-orange/20 border border-brand-orange text-brand-orange hover:bg-brand-orange/30 font-bold py-4 px-4 rounded-xl transition-colors text-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[w?l.jsx(ug,{size:24,className:"animate-spin"}):l.jsx(zh,{size:20}),w?"Guardando...":`Guardar ${c.length>0?`(${c.length})`:""} Pesajes`]})]})]}),l.jsx(at,{isOpen:g,onClose:()=>m(!1),title:"Seleccionar Fecha",children:l.jsx("div",{className:"flex justify-center",children:l.jsx(np,{mode:"single",selected:h,onSelect:M})})}),l.jsx(cd,{isOpen:y.isOpen,onClose:F,motherId:y.motherId})]})};function b4e({onNavigate:t,onSaveSuccess:e}){const[n,r]=N.useState("options");return n==="rapid"?l.jsx(y4e,{onSaveSuccess:e}):l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4 pt-4",children:[l.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white text-center",children:"Añadir Datos de Leche"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("button",{onClick:()=>r("rapid"),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-brand-orange text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[l.jsx(yw,{className:"w-12 h-12 mb-2 text-brand-orange"}),l.jsx("span",{className:"text-lg font-semibold",children:"Carga Rápida"}),l.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Para carga masiva con teclado"})]}),l.jsxs("button",{onClick:()=>t("ocr",{}),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-brand-blue text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[l.jsx(zF,{className:"w-12 h-12 mb-2 text-brand-blue"}),l.jsx("span",{className:"text-lg font-semibold",children:"Escanear Cuaderno"}),l.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Digitalización asistida por IA"})]})]})]})}const x4e=({animal:t,parturition:e,onSelectAnimal:n})=>l.jsxs("div",{onClick:()=>n(t.id),className:"w-full cursor-pointer text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-amber-400 transition-colors",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),l.jsxs("p",{className:"text-sm text-zinc-400",children:[e.status==="en-secado"&&`Secado desde: ${new Date(e.dryingStartDate+"T00:00:00").toLocaleDateString()}`,e.status==="seca"&&"Lactancia finalizada"]})]}),l.jsx(Gn,{className:"text-zinc-600"})]});function w4e({navigateToRebano:t}){const{animals:e,parturitions:n,isLoading:r}=rt(),[i,s]=N.useState("drying"),a=N.useMemo(()=>{const c=f=>e.find(h=>h.id===f),u=n.filter(f=>f.status==="en-secado").map(f=>({animal:c(f.goatId),parturition:f})).filter(f=>f.animal),d=n.filter(f=>f.status==="seca").map(f=>({animal:c(f.goatId),parturition:f})).filter(f=>f.animal);return{drying:u,dry:d}},[e,n]),o=a[i]||[];return r?l.jsx("div",{className:"text-center p-10",children:l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando datos..."})}):l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12 px-4",children:[l.jsxs("header",{className:"text-center pt-4 pb-4",children:[l.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Gestión de Secado"}),l.jsx("p",{className:"text-md text-zinc-400",children:"Animales por Estado de Lactancia"})]}),l.jsx("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-2 border border-brand-border",children:l.jsxs("div",{className:"flex bg-zinc-900/80 rounded-xl p-1 w-full",children:[l.jsxs("button",{onClick:()=>s("drying"),className:`w-1/2 px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors ${i==="drying"?"bg-blue-500 text-white":"text-zinc-300 hover:bg-zinc-700/50"}`,children:["En Secado (",a.drying.length,")"]}),l.jsxs("button",{onClick:()=>s("dry"),className:`w-1/2 px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors ${i==="dry"?"bg-gray-600 text-white":"text-zinc-300 hover:bg-zinc-700/50"}`,children:["Secas (",a.dry.length,")"]})]})}),l.jsx("div",{className:"space-y-2",children:o.length>0?o.map(({animal:c,parturition:u})=>l.jsx(x4e,{animal:c,parturition:u,onSelectAnimal:d=>t({name:"lactation-profile",animalId:d})},u.id)):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-400",children:"No hay animales en este estado."})})})]})}function _4e({initialPage:t,onPageStateChange:e,navigateToRebano:n,onSwitchModule:r}){const{syncStatus:i}=rt(),[s,a]=N.useState(t||{name:"dashboard"}),[o,c]=N.useState([]);N.useEffect(()=>{e(s)},[s,e]),N.useEffect(()=>{a(t&&typeof t=="object"&&"name"in t?t:{name:"dashboard"})},[t]);const u=[{id:"dashboard",label:"Dashboard",icon:Cee},{id:"analysis",label:"Análisis",icon:IF},{id:"history",label:"Historial",icon:kee},{id:"add-data",label:"Añadir",icon:ss},{id:"drying",label:"Secado",icon:ed}],d=m=>{c(y=>[...y,s]),a(m)},f=()=>{const m=o.pop();m?(a(m),c([...o])):s.name!=="dashboard"?a({name:"dashboard"}):r("rebano")},h=m=>{c([]),a({name:m})},p=m=>{n(m,"lactokeeper")},g=()=>{switch(s.name){case"dashboard":return l.jsx(c3,{onNavigateToAnalysis:()=>d({name:"analysis"})});case"analysis":return l.jsx(d4e,{onSelectAnimal:m=>d({name:"lactation-profile",animalId:m})});case"history":return l.jsx(m4e,{navigateToRebano:p});case"add-data":return l.jsx(b4e,{onNavigate:(m,y)=>p({name:m,...y}),onSaveSuccess:()=>d({name:"analysis"})});case"drying":return l.jsx(w4e,{navigateToRebano:p});case"lactation-profile":return l.jsx(QU,{animalId:s.animalId,onBack:f,navigateTo:p});default:return l.jsx(c3,{onNavigateToAnalysis:()=>d({name:"analysis"})})}};return l.jsxs("div",{className:"min-h-screen animate-fade-in text-white flex flex-col bg-brand-dark",children:[l.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-brand-dark/80 backdrop-blur-lg border-b border-brand-border",children:l.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[l.jsx("button",{onClick:f,className:"p-2 -ml-2 text-zinc-400 hover:text-white","aria-label":"Atrás",children:l.jsx(ar,{size:24})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(vte,{className:"text-brand-orange",size:28}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-bold text-white leading-none",children:"GanaderoOS"}),l.jsx("p",{className:"text-xs text-zinc-400 leading-none",children:"LactoKeeper"})]})]}),l.jsx("div",{className:"w-8 flex justify-end",children:l.jsx(Lv,{status:i})})]})}),l.jsx("main",{className:"flex-grow pt-16 pb-24",children:g()}),l.jsx(S1,{onSwitchModule:r}),l.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-black/30 backdrop-blur-xl border-t border-white/20 flex justify-around z-20 h-16",children:u.map(m=>l.jsxs("button",{onClick:()=>h(m.id),className:`flex flex-col items-center justify-center p-3 w-full transition-colors ${s.name===m.id?"text-brand-orange":"text-gray-400 hover:text-brand-orange"}`,children:[l.jsx(m.icon,{className:"w-6 h-6 mb-1"}),l.jsx("span",{className:"text-xs font-semibold",children:m.label})]},m.id))})]})}const S4e=({selectedDate:t,onDateChange:e,onOpenCalendar:n})=>{const r=N.useMemo(()=>{const s=new Date;return s.setHours(0,0,0,0),Array.from({length:7},(a,o)=>{const c=new Date(s);return c.setDate(s.getDate()-o),c})},[]),i=(s,a)=>{if(s.getTime()===a.getTime())return"Hoy";const o=new Date(a);return o.setDate(a.getDate()-1),s.getTime()===o.getTime()?"Ayer":s.toLocaleDateString("es-VE",{weekday:"short"}).replace(".","")};return l.jsxs("div",{className:"px-4",children:[l.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-zinc-400 mb-2",children:[l.jsx(fs,{size:16}),"Fecha del Pesaje"]}),l.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",style:{scrollbarWidth:"none",WebkitOverflowScrolling:"touch"},children:[l.jsxs("button",{type:"button",onClick:n,className:"flex flex-col items-center justify-center bg-zinc-800/80 rounded-lg p-2 w-16 h-16 flex-shrink-0 text-zinc-300 hover:bg-zinc-700 transition-colors",children:[l.jsx(fs,{size:20}),l.jsx("span",{className:"text-xs mt-1",children:"Calendario"})]}),r.map(s=>{const a=s.getTime()===t.getTime();return l.jsxs("button",{type:"button",onClick:()=>e(s),className:`flex flex-col items-center justify-center rounded-lg p-2 w-16 h-16 flex-shrink-0 transition-colors ${a?"bg-brand-green text-white":"bg-zinc-800/80 text-zinc-300 hover:bg-zinc-700"}`,children:[l.jsx("span",{className:"text-xs capitalize",children:i(s,r[0])}),l.jsx("span",{className:"font-bold text-2xl",children:s.getDate()}),l.jsx("span",{className:"text-xs",children:s.toLocaleDateString("es-VE",{month:"short"}).replace(".","")})]},s.toISOString())})]})]})},A4e=({entry:t,onDelete:e})=>{const n=!t.isRecognized;return l.jsxs("div",{className:`p-3 rounded-lg flex justify-between items-center animate-fade-in group ${n?"bg-amber-900/40 border border-amber-500/50":"bg-zinc-800/50"}`,children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[n&&l.jsx($t,{className:"text-amber-400 flex-shrink-0",size:18}),l.jsx("span",{className:"font-semibold text-white",children:t.animalId})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("span",{className:"text-zinc-300 font-semibold",children:[t.kg.toFixed(2)," Kg"]}),l.jsx("button",{onClick:()=>e(t.tempId),className:"p-1 text-zinc-400 hover:text-brand-red opacity-0 group-hover:opacity-100 transition-opacity",children:l.jsx(Za,{size:16})})]})]})},E4e=({onBack:t,onSaveSuccess:e})=>{const{animals:n}=rt(),[r,i]=N.useState(""),[s,a]=N.useState(""),[o,c]=N.useState([]),[u,d]=N.useState(null),[f,h]=N.useState(()=>{const j=new Date;return j.setHours(0,0,0,0),j}),[p,g]=N.useState(!1),m=N.useRef(null),y=N.useRef(null),x=()=>{var M;if(!r||!s)return;const j=r.toUpperCase().trim(),T=parseFloat(s);if(T>100){d({type:"error",text:`El peso de ${T} Kg es irracional. Verifique el dato.`});return}const P=n.find(F=>F.id===j);if(P&&P.isReference){d({type:"error",text:`${j} es un animal de Referencia y no se le pueden añadir pesajes.`});return}const I={tempId:Date.now(),animalId:j,kg:T,date:f.toISOString().split("T")[0],isRecognized:!!P};c(F=>[I,...F]),i(""),a(""),(M=m.current)==null||M.focus()},w=async()=>{d(null);const{currentUser:j}=Kf;if(!j){d({type:"error",text:"Error de autenticación."});return}if(o.length===0){d({type:"error",text:"No hay pesajes para guardar."});return}try{const T=Xc(pn),P=WC(pn,"bodyWeighings");o.forEach(I=>{const M=xr(P),F={animalId:I.animalId,kg:I.kg,date:I.date,userId:j.uid};T.set(M,F)}),await T.commit(),d({type:"success",text:`${o.length} pesajes guardados con éxito.`}),c([]),setTimeout(()=>e(f.toISOString().split("T")[0]),1500)}catch(T){d({type:"error",text:"Ocurrió un error al guardar en la nube."}),console.error("Error en escritura por lote:",T)}},_=j=>{var T;j.key==="Enter"&&r&&(j.preventDefault(),(T=y.current)==null||T.focus())},A=j=>{j.key==="Enter"&&s&&(j.preventDefault(),x())},E=j=>{c(T=>T.filter(P=>P.tempId!==j))},C=j=>{j&&(j.setHours(0,0,0,0),h(j)),g(!1)};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex flex-col h-full animate-fade-in",children:[l.jsxs("div",{className:"flex-shrink-0 space-y-4",children:[l.jsxs("header",{className:"text-center px-4 flex items-center",children:[l.jsx("button",{onClick:t,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(ar,{size:24})}),l.jsxs("div",{className:"flex-grow",children:[l.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Carga Rápida de Peso"}),l.jsx("p",{className:"text-md text-zinc-400",children:"Sesión de Pesaje"})]}),l.jsx("div",{className:"w-8"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx(S4e,{selectedDate:f,onDateChange:h,onOpenCalendar:()=>g(!0)}),l.jsxs("div",{className:"flex items-center gap-2 px-4",children:[l.jsx("input",{ref:m,type:"text",value:r,onChange:j=>i(j.target.value),onKeyDown:_,placeholder:"ID Animal",className:"w-full bg-brand-glass p-4 rounded-xl text-lg placeholder-zinc-500 border-2 border-transparent focus:border-brand-green focus:ring-0"}),l.jsx("input",{ref:y,type:"number",step:"0.01",value:s,onChange:j=>a(j.target.value),onKeyDown:A,placeholder:"Kg",className:"w-32 flex-shrink-0 bg-brand-glass p-4 rounded-xl text-lg placeholder-zinc-500 border-2 border-transparent focus:border-brand-green focus:ring-0"}),l.jsx("button",{onClick:x,disabled:!r||!s,"aria-label":"Añadir a la lista",className:"aspect-square h-full bg-brand-orange text-white rounded-xl flex items-center justify-center transition-all hover:bg-orange-600 disabled:opacity-40",children:l.jsx(ss,{size:24})})]})]})]}),l.jsxs("div",{className:"flex-grow overflow-y-auto px-4 space-y-2 py-4",children:[o.length===0&&l.jsx("p",{className:"text-center text-zinc-500 text-sm pt-8",children:"Los pesajes añadidos aparecerán aquí."}),o.map(j=>l.jsx(A4e,{entry:j,onDelete:E},j.tempId))]}),l.jsxs("div",{className:"flex-shrink-0 p-4 border-t border-brand-border bg-gray-900/80 backdrop-blur-sm",children:[u&&l.jsxs("div",{className:`mb-3 flex items-center space-x-2 p-3 rounded-lg text-sm ${u.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[" ",u.type==="success"?l.jsx(ri,{size:18}):l.jsx($t,{size:18})," ",l.jsx("span",{children:u.text})," "]}),l.jsxs("button",{onClick:w,className:"w-full flex items-center justify-center gap-2 bg-brand-green/20 border border-brand-green text-brand-green hover:bg-brand-green/30 font-bold py-4 px-4 rounded-xl transition-colors text-lg",children:[l.jsx(zh,{size:20})," Guardar ",o.length>0?`(${o.length})`:""," Pesajes"]})]})]}),l.jsx(at,{isOpen:p,onClose:()=>g(!1),title:"Seleccionar Fecha",children:l.jsx("div",{className:"flex justify-center",children:l.jsx(np,{mode:"single",selected:f,onSelect:C})})})]})};function j4e({onNavigate:t,onSaveSuccess:e}){const[n,r]=N.useState("options");return n==="rapid"?l.jsx(E4e,{onBack:()=>r("options"),onSaveSuccess:e}):l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4",children:[l.jsxs("header",{className:"text-center",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Añadir Pesaje Corporal"}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Carga de Datos de Crecimiento"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("button",{onClick:()=>r("rapid"),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-brand-green text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[l.jsx(yw,{className:"w-12 h-12 mb-2 text-brand-green"}),l.jsx("span",{className:"text-lg font-semibold",children:"Carga Rápida"}),l.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Para carga masiva con teclado"})]}),l.jsxs("button",{onClick:()=>t("ocr",{}),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-brand-blue text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[l.jsx(zF,{className:"w-12 h-12 mb-2 text-brand-blue"}),l.jsx("span",{className:"text-lg font-semibold",children:"Escanear Cuaderno"}),l.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Digitalización asistida por IA"})]})]})]})}const C4e=({gdp:t,averageGdp:e})=>{if(t===null||!e||e===0)return null;const n=t/e;return n>1.1?l.jsx(ba,{size:18,className:"text-brand-green"}):n<.9?l.jsx(ate,{size:18,className:"text-brand-red"}):l.jsx(lT,{size:18,className:"text-zinc-500"})},T4e=({animal:t,onSelect:e,averageGdp:n})=>{const r={Sobresaliente:"text-brand-green",Promedio:"text-zinc-400",Pobre:"text-brand-red"};return l.jsxs("button",{onClick:()=>e(t.id),className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-brand-green transition-colors",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:pt(t)}),l.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:[t.sex," | ",t.formattedAge," | Lote: ",t.location||"N/A"]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"text-right",children:[l.jsxs("p",{className:"font-semibold text-white",children:[t.gdp?`${t.gdp.toFixed(0)}`:"--",l.jsx("span",{className:"text-sm text-zinc-400",children:" g/día"})]}),l.jsx("p",{className:`font-bold text-sm ${r[t.classification]}`,children:t.classification})]}),l.jsx(C4e,{gdp:t.gdp?t.gdp/1e3:null,averageGdp:n}),l.jsx(Gn,{className:"text-zinc-600"})]})]})};function u3({onSelectAnimal:t}){const{animals:e,bodyWeighings:n,parturitions:r}=rt(),[i,s]=N.useState("all"),a=N.useMemo(()=>{const u=e.filter(I=>{const M=od(I,r);return["Cabrita","Cabritona","Cabrito","Macho de Levante"].includes(M)});if(u.length===0)return{analyzedAnimals:[],distribution:[],averageGdp:0,gaussChartData:[],meanGdp:0,stdDev:0};let d=0,f=0;const h=u.map(I=>{const M=n.filter(U=>U.animalId===I.id),R=tP(I.birthWeight,M).overall??0,H=qa(I.birthDate);R>0&&(d+=R,f++);const X=f>0?d/f:0,W=R>0?cDe(R,X,H):0;return{...I,formattedAge:wa(I.birthDate),ageInDays:H,gdpKgDay:R,score:W}}),p=f>0?d/f:0,g=p,m=h.filter(I=>I.score>0).map(I=>I.score),y=m.length>0?m.reduce((I,M)=>I+M,0)/m.length:0,x=m.length>0?Math.sqrt(m.reduce((I,M)=>I+Math.pow(M-y,2),0)/m.length):0,w=y-.4*x,_=y+.4*x,E=h.sort((I,M)=>M.score-I.score).map(I=>{let M="Promedio";return I.score>0&&x>1&&(I.score<w?M="Pobre":I.score>_&&(M="Sobresaliente")),{...I,gdp:I.gdpKgDay*1e3,ageInDays:I.ageInDays,classification:M,formattedAge:I.formattedAge}}),C=[{name:"Pobre",count:E.filter(I=>I.classification==="Pobre").length,fill:"#FF3B30"},{name:"Promedio",count:E.filter(I=>I.classification==="Promedio").length,fill:"#6B7280"},{name:"Sobresaliente",count:E.filter(I=>I.classification==="Sobresaliente").length,fill:"#34C759"}],j=E.map(I=>I.gdp).filter(I=>I>0),T=[];let P=0;if(j.length>0){const I=Math.min(...j),M=Math.max(...j),F=Math.max(10,Math.ceil((M-I)/15));for(let H=Math.floor(I/F)*F;H<M;H+=F){const X=H,W=H+F,U=E.filter($=>$.gdp>=X&&$.gdp<W).length;U>0&&T.push({name:`${X}-${W}`,count:U})}const R=g*1e3;P=j.length>0?Math.sqrt(j.reduce((H,X)=>H+Math.pow(X-R,2),0)/j.length):0}return{analyzedAnimals:E,distribution:C,averageGdp:p,gaussChartData:T,meanGdp:g,stdDev:P}},[e,n,r]),o=q.useMemo(()=>i==="all"?a.analyzedAnimals:a.analyzedAnimals.filter(u=>u.classification===i),[a.analyzedAnimals,i]),c=u=>{var d;if((d=u==null?void 0:u.payload)!=null&&d.name){const f=u.payload.name;s(h=>h===f?"all":f)}};return l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4 pb-12",children:[l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border mt-4",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-2 text-xs uppercase tracking-wider",children:[l.jsx(ba,{}),l.jsx("span",{children:"GDP Promedio del Levante"})]}),l.jsxs("p",{className:"text-4xl font-bold tracking-tight text-white",children:[(a.averageGdp*1e3).toFixed(0)," ",l.jsx("span",{className:"text-2xl font-medium text-zinc-400",children:"g/día"})]})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Distribución del Crecimiento"}),l.jsx("div",{className:"w-full h-48",children:l.jsx(Er,{children:l.jsxs(Ls,{data:a.distribution,margin:{top:20,right:10,left:-20,bottom:0},children:[l.jsx(sr,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(gr,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},allowDecimals:!1}),l.jsx(fn,{content:l.jsx(Hu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),l.jsx(Lr,{dataKey:"count",onClick:c,cursor:"pointer",children:a.distribution.map(u=>l.jsx(Ms,{fill:u.fill,className:`${i!=="all"&&i!==u.name?"opacity-30":"opacity-100"} transition-opacity`},u.name))})]})})})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Campana de Gauss (g/día)"}),l.jsx("div",{className:"w-full h-48",children:l.jsx(Er,{children:l.jsxs(Ls,{data:a.gaussChartData,margin:{top:20,right:10,left:-20,bottom:0},children:[l.jsx(sr,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},interval:0,angle:-30,textAnchor:"end",height:40}),l.jsx(gr,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},allowDecimals:!1}),l.jsx(fn,{content:l.jsx(Hu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),l.jsx(Lr,{dataKey:"count",fill:"rgba(52, 199, 89, 0.6)",name:"Nº Animales"})]})})}),l.jsxs("div",{className:"text-center text-xs text-zinc-400 mt-2",children:[l.jsxs("span",{children:["μ = ",(a.meanGdp*1e3).toFixed(0)," g/día"]})," | ",l.jsxs("span",{children:["σ = ",a.stdDev.toFixed(0)," g/día"]})]})]}),l.jsxs("div",{className:"space-y-2 pt-4",children:[l.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 ml-1",children:[i==="all"?"Todos los Animales":`Animales (${i})`," (",o.length,")"]}),o.length>0?o.map(u=>l.jsx(T4e,{animal:u,onSelect:()=>t(u.id),averageGdp:a.averageGdp},u.id)):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-500",children:"No hay animales que coincidan con los filtros."})})]})]})}const N4e=()=>{const{animals:t,bodyWeighings:e,parturitions:n}=rt();return N.useMemo(()=>{const s=t.filter(_=>{const A=qa(_.birthDate);return A>0&&A<=365&&!_.isReference}).map(_=>{const A=e.filter(C=>C.animalId===_.id),E=tP(_.birthWeight,A);return{..._,gdp:E.overall,ageInDays:qa(_.birthDate)}}).filter(_=>_.gdp!==null&&_.gdp>0);if(s.length<2)return{classifiedAnimals:[],distribution:[],gaussChartData:[],meanGdp:0,stdDev:0};const o=s.reduce((_,A)=>_+A.gdp,0)/s.length,c=Math.sqrt(s.reduce((_,A)=>_+Math.pow(A.gdp-o,2),0)/s.length),u=o-.4*c,d=o+.4*c,f=s.map(_=>{let A="Promedio";return c>.005&&(_.gdp<u?A="Pobre":_.gdp>d&&(A="Sobresaliente")),{..._,classification:A}}),h=[{name:"Pobre",count:f.filter(_=>_.classification==="Pobre").length,fill:"#FF3B30"},{name:"Promedio",count:f.filter(_=>_.classification==="Promedio").length,fill:"#6B7280"},{name:"Sobresaliente",count:f.filter(_=>_.classification==="Sobresaliente").length,fill:"#34C759"}],p=f.map(_=>_.gdp),g=Math.min(...p),m=Math.max(...p),y=10,x=(m-g)/y,w=Array.from({length:y},(_,A)=>{const E=g+A*x,C=E+x,j=f.filter(T=>T.gdp>=E&&T.gdp<C).length;return{name:`${(E*1e3).toFixed(0)}`,count:j}});return{classifiedAnimals:f.sort((_,A)=>A.gdp-_.gdp),distribution:h,gaussChartData:w,meanGdp:o,stdDev:c}},[t,e,n])},P4e=({animal:t,onSelect:e})=>{const n={Sobresaliente:"bg-brand-green/80",Promedio:"bg-gray-500/80",Pobre:"bg-brand-red/80"},r=wa(t.birthDate);return l.jsxs("button",{onClick:()=>e(t.id),className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-brand-green transition-colors",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),l.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:[t.sex," | ",r," | Lote: ",t.location||"Sin Asignar"]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("p",{className:"font-semibold text-white text-right",children:[(t.gdp*1e3).toFixed(0),l.jsx("span",{className:"text-sm text-zinc-400",children:" g/día"})]}),l.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full text-white ${n[t.classification]}`,children:t.classification}),l.jsx(Gn,{className:"text-zinc-600"})]})]})};function k4e({onSelectAnimal:t}){const{classifiedAnimals:e,distribution:n,gaussChartData:r,meanGdp:i,stdDev:s}=N4e(),[a,o]=N.useState("all"),c=q.useMemo(()=>a==="all"?e:e.filter(d=>d.classification===a),[e,a]),u=d=>{if(d!=null&&d.name){const f=d.name;o(h=>h===f?"all":f)}};return l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4",children:[l.jsxs("header",{className:"text-center",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Análisis de GDP"}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Ganancia Diaria de Peso"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[l.jsx(ba,{size:14}),l.jsx("span",{children:"GDP Media"})]}),l.jsxs("p",{className:"text-2xl font-bold text-white",children:[(i*1e3).toFixed(0)," ",l.jsx("span",{className:"text-lg text-zinc-400",children:"g/día"})]})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[l.jsx($F,{size:14}),l.jsx("span",{children:"Desv. Estándar"})]}),l.jsxs("p",{className:"text-2xl font-bold text-white",children:[(s*1e3).toFixed(0)," ",l.jsx("span",{className:"text-lg text-zinc-400",children:"g/día"})]})]})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Distribución del Crecimiento"}),l.jsx("div",{className:"w-full h-48",children:l.jsx(Er,{children:l.jsxs(Ls,{data:n,margin:{top:20,right:10,left:-20,bottom:0},children:[l.jsx(sr,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(gr,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(fn,{content:l.jsx(Hu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),l.jsx(Lr,{dataKey:"count",onClick:u,cursor:"pointer",children:n.map(d=>l.jsx(Ms,{fill:d.fill,className:`${a!=="all"&&a!==d.name?"opacity-30":"opacity-100"} transition-opacity`},d.name))})]})})})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Campana de Gauss (g/día)"}),l.jsx("div",{className:"w-full h-48",children:l.jsx(Er,{children:l.jsxs(Ls,{data:r,margin:{top:20,right:10,left:-20,bottom:0},children:[l.jsx(sr,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(gr,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},allowDecimals:!1}),l.jsx(fn,{content:l.jsx(Hu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),l.jsx(Lr,{dataKey:"count",fill:"rgba(52, 199, 89, 0.6)"})]})})})]}),l.jsxs("div",{className:"space-y-2 pt-4",children:[l.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 ml-1",children:[a==="all"?"Todos los Animales":`Animales (${a})`," (",c.length,")"]}),c.length>0?c.map(d=>l.jsx(P4e,{animal:d,onSelect:t},d.id)):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-500",children:"No hay animales que coincidan con los filtros."})})]})]})}function D4e({navigateToRebano:t,onSwitchModule:e}){const{syncStatus:n}=rt(),[r,i]=N.useState("dashboard"),s=[{id:"dashboard",label:"Dashboard",icon:vv},{id:"analysis",label:"Análisis",icon:mte},{id:"add-data",label:"Añadir",icon:ss}],a=()=>{r!=="dashboard"?i("dashboard"):e("rebano")},o=()=>{switch(r){case"dashboard":return l.jsx(u3,{onSelectAnimal:c=>t({name:"growth-profile",animalId:c})});case"analysis":return l.jsx(k4e,{onSelectAnimal:c=>t({name:"growth-profile",animalId:c})});case"add-data":return l.jsx(j4e,{onNavigate:t,onSaveSuccess:()=>i("analysis")});default:return l.jsx(u3,{onSelectAnimal:c=>t({name:"growth-profile",animalId:c})})}};return l.jsxs("div",{className:"min-h-screen animate-fade-in text-white flex flex-col",children:[l.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-gray-900/80 backdrop-blur-lg border-b border-brand-border",children:l.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[l.jsx("button",{onClick:a,className:"p-2 -ml-2 text-zinc-400 hover:text-white","aria-label":"Atrás",children:l.jsx(ar,{size:24})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(sc,{className:"text-brand-green"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-bold text-white leading-none",children:"GanaderoOS"}),l.jsx("p",{className:"text-xs text-zinc-400 leading-none",children:"Kilos"})]})]}),l.jsx("div",{className:"w-8 flex justify-end",children:l.jsx(Lv,{status:n})})]})}),l.jsx("main",{className:"flex-grow pt-16 pb-24",children:o()}),l.jsx(S1,{onSwitchModule:e}),l.jsx("nav",{className:"flex-shrink-0 fixed bottom-0 left-0 right-0 bg-black/30 backdrop-blur-xl border-t border-white/20 flex justify-around",children:s.map(c=>l.jsxs("button",{onClick:()=>i(c.id),className:`flex flex-col items-center justify-center p-3 w-full transition-colors ${r===c.id?"text-brand-green":"text-gray-400 hover:text-brand-green"}`,children:[l.jsx(c.icon,{className:"w-6 h-6 mb-1"}),l.jsx("span",{className:"text-xs font-semibold",children:c.label})]},c.id))})]})}const I4e=["Desparasitantes","Antibióticos","Vacunas","Vitaminas","Modificadores Orgánicos","Pomadas Tópicas","Analgésicos","Hormonas","Antiinflamatorios","Otro"],wP=({onSave:t,onCancel:e,existingProduct:n})=>{const[r,i]=N.useState(""),[s,a]=N.useState(""),[o,c]=N.useState("Otro"),[u,d]=N.useState(""),[f,h]=N.useState("ml"),[p,g]=N.useState(""),[m,y]=N.useState("Inyectable"),[x,w]=N.useState("Intramuscular"),[_,A]=N.useState("per_kg"),[E,C]=N.useState(""),[j,T]=N.useState(""),[P,I]=N.useState(""),[M,F]=N.useState(null);N.useEffect(()=>{n&&(i(n.name),a(n.laboratory||""),c(n.category||"Otro"),d(String(n.presentationValue||"")),h(n.presentationUnit||"ml"),g(String(n.price||"")),y(n.applicationType),n.applicationRoute&&w(n.applicationRoute),A(n.dosageType||"per_kg"),C(String(n.dosageFixed||"")),T(String(n.dosagePerKg_ml||"")),I(String(n.dosagePerKg_kg||"")))},[n]);const R=async H=>{if(H.preventDefault(),F(null),!r.trim()){F("El nombre es obligatorio.");return}if(_==="fixed"&&!E){F("La dosis fija es obligatoria.");return}if(_==="per_kg"&&(!j||!P)){F("Ambos campos de dosificación por Kg son obligatorios.");return}const X={name:r,applicationType:m,dosageType:_,category:o};s&&(X.laboratory=s),u&&(X.presentationValue=parseFloat(u)),X.presentationUnit=f,p&&(X.price=parseFloat(p)),m==="Inyectable"&&(X.applicationRoute=x),_==="fixed"&&(X.dosageFixed=parseFloat(E)),_==="per_kg"&&(X.dosagePerKg_ml=parseFloat(j),X.dosagePerKg_kg=parseFloat(P));try{await t(X)}catch(W){F("No se pudo guardar el producto."),console.error(W)}};return l.jsxs("form",{onSubmit:R,className:"space-y-4",children:[l.jsx("input",{type:"text",value:r,onChange:H=>i(H.target.value),placeholder:"Nombre o Marca Comercial",className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0}),l.jsxs("select",{value:o,onChange:H=>c(H.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",children:[l.jsx("option",{value:"",disabled:!0,children:"Seleccionar Categoría..."}),I4e.map(H=>l.jsx("option",{value:H,children:H},H))]}),l.jsx("input",{type:"text",value:s,onChange:H=>a(H.target.value),placeholder:"Laboratorio (Opcional)",className:"w-full bg-zinc-800 p-3 rounded-xl"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"number",value:u,onChange:H=>d(H.target.value),placeholder:"Presentación",className:"w-full bg-zinc-800 p-3 rounded-xl"}),l.jsxs("select",{value:f,onChange:H=>h(H.target.value),className:"bg-zinc-800 p-3 rounded-xl",children:[l.jsx("option",{value:"ml",children:"ml"}),l.jsx("option",{value:"L",children:"L"})]})]}),l.jsxs("div",{className:"relative",children:[l.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400",children:"$"}),l.jsx("input",{type:"number",step:"0.01",value:p,onChange:H=>g(H.target.value),placeholder:"Precio",className:"w-full bg-zinc-800 p-3 pl-7 rounded-xl"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium text-zinc-400",children:"Vía de Administración"}),l.jsxs("div",{className:"relative flex w-full justify-between rounded-lg bg-zinc-800 p-1",children:[l.jsx("button",{type:"button",onClick:()=>y("Inyectable"),className:"relative z-10 w-1/2 py-1.5 text-sm font-semibold text-white",children:"Inyectable"}),l.jsx("button",{type:"button",onClick:()=>y("Oral"),className:"relative z-10 w-1/2 py-1.5 text-sm font-semibold text-white",children:"Oral"}),l.jsx(Ln.div,{layoutId:"app-type-bg",transition:{type:"spring",stiffness:400,damping:30},className:`absolute top-1 h-[calc(100%-0.5rem)] w-1/2 rounded-md bg-zinc-600 ${m==="Oral"?"left-1/2":"left-1"}`})]})]}),m==="Inyectable"&&l.jsxs(Ln.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2 overflow-hidden",children:[l.jsx("label",{className:"text-sm font-medium text-zinc-400",children:"Ruta (Inyectable)"}),l.jsxs("div",{className:"relative flex w-full justify-between rounded-lg bg-zinc-800 p-1",children:[l.jsx("button",{type:"button",onClick:()=>w("Intramuscular"),className:"relative z-10 w-1/2 py-1.5 text-sm font-semibold text-white",children:"Intramuscular"}),l.jsx("button",{type:"button",onClick:()=>w("Subcutáneo"),className:"relative z-10 w-1/2 py-1.5 text-sm font-semibold text-white",children:"Subcutáneo"}),l.jsx(Ln.div,{layoutId:"app-route-bg",transition:{type:"spring",stiffness:400,damping:30},className:`absolute top-1 h-[calc(100%-0.5rem)] w-1/2 rounded-md bg-zinc-600 ${x==="Subcutáneo"?"left-1/2":"left-1"}`})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium text-zinc-400",children:"Dosificación"}),l.jsxs("div",{className:"relative flex w-full justify-between rounded-lg bg-zinc-800 p-1",children:[l.jsx("button",{type:"button",onClick:()=>A("per_kg"),className:"relative z-10 w-1/2 py-1.5 text-sm font-semibold text-white",children:"Por Kg PV"}),l.jsx("button",{type:"button",onClick:()=>A("fixed"),className:"relative z-10 w-1/2 py-1.5 text-sm font-semibold text-white",children:"Dosis Única"}),l.jsx(Ln.div,{layoutId:"dosage-type-bg",transition:{type:"spring",stiffness:400,damping:30},className:`absolute top-1 h-[calc(100%-0.5rem)] w-1/2 rounded-md bg-zinc-600 ${_==="fixed"?"left-1/2":"left-1"}`})]}),_==="per_kg"?l.jsxs("div",{className:"flex items-center justify-between gap-2 animate-fade-in",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:"number",step:"0.1",value:j,onChange:H=>T(H.target.value),placeholder:"1",className:"w-full bg-zinc-800 p-3 pr-10 rounded-xl",required:!0}),l.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400 text-sm",children:"ml"})]}),l.jsx("span",{className:"text-zinc-500 text-sm",children:"por cada"}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:"number",step:"1",value:P,onChange:H=>I(H.target.value),placeholder:"50",className:"w-full bg-zinc-800 p-3 pr-10 rounded-xl",required:!0}),l.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400 text-sm",children:"Kg"})]})]}):l.jsxs("div",{className:"relative animate-fade-in",children:[l.jsx("input",{type:"number",step:"0.1",value:E,onChange:H=>C(H.target.value),placeholder:"Ej: 2",className:"w-full bg-zinc-800 p-3 pr-24 rounded-xl",required:!0}),l.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400 text-sm",children:"ml (dosis total)"})]})]}),M&&l.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[l.jsx($t,{size:18}),l.jsx("span",{children:M})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:e,className:"px-5 py-2.5 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"px-5 py-2.5 bg-brand-green text-white font-bold rounded-lg",children:n?"Actualizar Producto":"Guardar Producto"})]})]})};function O4e(){const{products:t,addProduct:e,updateProduct:n,deleteProduct:r}=rt(),[i,s]=N.useState(!1),[a,o]=N.useState(void 0),[c,u]=N.useState(null),[d,f]=N.useState("Todos"),h=A=>{o(A),s(!0)},p=()=>{s(!1),o(void 0)},g=async A=>{a!=null&&a.id?await n(a.id,A):await e(A),p()},m=async()=>{c!=null&&c.id&&await r(c.id),u(null)},y=N.useMemo(()=>{const A=new Set(t.map(E=>E.category).filter(Boolean));return["Todos",...Array.from(A).sort()]},[t]),x=N.useMemo(()=>d==="Todos"?t:t.filter(A=>A.category===d),[t,d]),w=A=>{if(!A.price||!A.presentationValue||A.presentationValue===0)return"N/A";const E=A.presentationUnit==="L"?A.presentationValue*1e3:A.presentationValue;return E===0?"N/A":`$${(A.price/E).toFixed(3)} / ml`},_=A=>A.dosageType==="fixed"?`${A.dosageFixed} ml (fija)`:A.dosageType==="per_kg"?`${A.dosagePerKg_ml} ml / ${A.dosagePerKg_kg} Kg`:"No especificada";return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 animate-fade-in px-4",children:[l.jsxs("header",{className:"text-center",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Inventario de Productos"}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Gestión de Insumos Sanitarios"})]}),l.jsxs("button",{onClick:()=>h(),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:opacity-90 text-black font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[l.jsx(ir,{size:18})," Añadir Nuevo Producto"]}),l.jsxs("div",{className:"space-y-2 pt-4",children:[l.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-zinc-300",children:[l.jsx(Wee,{size:18})," Filtrar por Categoría"]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:y.map(A=>l.jsx("button",{onClick:()=>f(A),className:`px-3 py-1.5 text-sm font-semibold rounded-full transition-colors ${d===A?"bg-brand-blue text-white":"bg-zinc-700 text-zinc-300"}`,children:A},A))})]}),l.jsx("div",{className:"space-y-3 pt-4",children:x.length>0?x.map(A=>l.jsx("div",{className:"bg-dashboard-surface rounded-2xl p-4 border border-brand-border",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:A.name}),l.jsx("p",{className:"text-sm text-zinc-400",children:A.presentationValue?`${A.presentationValue} ${A.presentationUnit}`:"Sin presentación"}),l.jsxs("div",{className:"mt-2 flex items-center flex-wrap gap-x-4 gap-y-1 text-xs",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx($h,{size:14})," ",_(A)]}),l.jsxs("span",{className:"flex items-center gap-1 font-semibold text-amber-400",children:[l.jsx(Ql,{size:14})," ",w(A)]})]})]}),l.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[l.jsx("button",{onClick:()=>h(A),className:"p-2 text-zinc-400 hover:text-brand-orange transition-colors",children:l.jsx(ac,{size:18})}),l.jsx("button",{onClick:()=>u(A),className:"p-2 text-zinc-400 hover:text-brand-red transition-colors",children:l.jsx(ya,{size:18})})]})]})},A.id)):l.jsxs("div",{className:"text-center py-10 bg-dashboard-surface rounded-2xl",children:[l.jsx("p",{className:"text-zinc-500 font-semibold",children:"No se encontraron productos."}),l.jsx("p",{className:"text-zinc-500 text-sm",children:d==="Todos"?"Añade tu primer producto para empezar.":`No hay productos en la categoría "${d}".`})]})})]}),l.jsx(at,{isOpen:i,onClose:p,title:a?"Editar Producto":"Añadir Producto",children:l.jsx(wP,{onSave:g,onCancel:p,existingProduct:a})}),l.jsx(_1,{isOpen:!!c,onClose:()=>u(null),onConfirm:m,title:"Eliminar Producto",message:`¿Estás seguro de que quieres eliminar "${c==null?void 0:c.name}"? Esta acción no se puede deshacer.`})]})}var A1,ht,eW,tW,Ch,Jc,d3,nW,rW,wx={},iW=[],M4e=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Nl(t,e){for(var n in e)t[n]=e[n];return t}function sW(t){var e=t.parentNode;e&&e.removeChild(t)}function xe(t,e,n){var r,i,s,a={};for(s in e)s=="key"?r=e[s]:s=="ref"?i=e[s]:a[s]=e[s];if(arguments.length>2&&(a.children=arguments.length>3?A1.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)a[s]===void 0&&(a[s]=t.defaultProps[s]);return v0(t,a,r,i,null)}function v0(t,e,n,r,i){var s={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i??++eW};return i==null&&ht.vnode!=null&&ht.vnode(s),s}function Bo(){return{current:null}}function qn(t){return t.children}function R4e(t,e,n,r,i){var s;for(s in n)s==="children"||s==="key"||s in e||_x(t,s,null,n[s],r);for(s in e)i&&typeof e[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||n[s]===e[s]||_x(t,s,e[s],n[s],r)}function f3(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||M4e.test(e)?n:n+"px"}function _x(t,e,n,r,i){var s;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||f3(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||f3(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")s=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?r||t.addEventListener(e,s?p3:h3,s):t.removeEventListener(e,s?p3:h3,s);else if(e!=="dangerouslySetInnerHTML"){if(i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e.indexOf("-")==-1?t.removeAttribute(e):t.setAttribute(e,n))}}function h3(t){Ch=!0;try{return this.l[t.type+!1](ht.event?ht.event(t):t)}finally{Ch=!1}}function p3(t){Ch=!0;try{return this.l[t.type+!0](ht.event?ht.event(t):t)}finally{Ch=!1}}function us(t,e){this.props=t,this.context=e}function Xg(t,e){if(e==null)return t.__?Xg(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?Xg(t):null}function aW(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return aW(t)}}function L4e(t){Ch?setTimeout(t):nW(t)}function oj(t){(!t.__d&&(t.__d=!0)&&Jc.push(t)&&!Sx.__r++||d3!==ht.debounceRendering)&&((d3=ht.debounceRendering)||L4e)(Sx)}function Sx(){var t,e,n,r,i,s,a,o;for(Jc.sort(function(c,u){return c.__v.__b-u.__v.__b});t=Jc.shift();)t.__d&&(e=Jc.length,r=void 0,i=void 0,a=(s=(n=t).__v).__e,(o=n.__P)&&(r=[],(i=Nl({},s)).__v=s.__v+1,_P(o,s,i,n.__n,o.ownerSVGElement!==void 0,s.__h!=null?[a]:null,r,a??Xg(s),s.__h),dW(r,s),s.__e!=a&&aW(s)),Jc.length>e&&Jc.sort(function(c,u){return c.__v.__b-u.__v.__b}));Sx.__r=0}function oW(t,e,n,r,i,s,a,o,c,u){var d,f,h,p,g,m,y,x=r&&r.__k||iW,w=x.length;for(n.__k=[],d=0;d<e.length;d++)if((p=n.__k[d]=(p=e[d])==null||typeof p=="boolean"?null:typeof p=="string"||typeof p=="number"||typeof p=="bigint"?v0(null,p,null,null,p):Array.isArray(p)?v0(qn,{children:p},null,null,null):p.__b>0?v0(p.type,p.props,p.key,p.ref?p.ref:null,p.__v):p)!=null){if(p.__=n,p.__b=n.__b+1,(h=x[d])===null||h&&p.key==h.key&&p.type===h.type)x[d]=void 0;else for(f=0;f<w;f++){if((h=x[f])&&p.key==h.key&&p.type===h.type){x[f]=void 0;break}h=null}_P(t,p,h=h||wx,i,s,a,o,c,u),g=p.__e,(f=p.ref)&&h.ref!=f&&(y||(y=[]),h.ref&&y.push(h.ref,null,p),y.push(f,p.__c||g,p)),g!=null?(m==null&&(m=g),typeof p.type=="function"&&p.__k===h.__k?p.__d=c=lW(p,c,t):c=cW(t,p,h,x,g,c),typeof n.type=="function"&&(n.__d=c)):c&&h.__e==c&&c.parentNode!=t&&(c=Xg(h))}for(n.__e=m,d=w;d--;)x[d]!=null&&(typeof n.type=="function"&&x[d].__e!=null&&x[d].__e==n.__d&&(n.__d=uW(r).nextSibling),hW(x[d],x[d]));if(y)for(d=0;d<y.length;d++)fW(y[d],y[++d],y[++d])}function lW(t,e,n){for(var r,i=t.__k,s=0;i&&s<i.length;s++)(r=i[s])&&(r.__=t,e=typeof r.type=="function"?lW(r,e,n):cW(n,r,r,i,r.__e,e));return e}function Ax(t,e){return e=e||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(n){Ax(n,e)}):e.push(t)),e}function cW(t,e,n,r,i,s){var a,o,c;if(e.__d!==void 0)a=e.__d,e.__d=void 0;else if(n==null||i!=s||i.parentNode==null)e:if(s==null||s.parentNode!==t)t.appendChild(i),a=null;else{for(o=s,c=0;(o=o.nextSibling)&&c<r.length;c+=1)if(o==i)break e;t.insertBefore(i,s),a=s}return a!==void 0?a:i.nextSibling}function uW(t){var e,n,r;if(t.type==null||typeof t.type=="string")return t.__e;if(t.__k){for(e=t.__k.length-1;e>=0;e--)if((n=t.__k[e])&&(r=uW(n)))return r}return null}function _P(t,e,n,r,i,s,a,o,c){var u,d,f,h,p,g,m,y,x,w,_,A,E,C,j,T=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(c=n.__h,o=e.__e=n.__e,e.__h=null,s=[o]),(u=ht.__b)&&u(e);try{e:if(typeof T=="function"){if(y=e.props,x=(u=T.contextType)&&r[u.__c],w=u?x?x.props.value:u.__:r,n.__c?m=(d=e.__c=n.__c).__=d.__E:("prototype"in T&&T.prototype.render?e.__c=d=new T(y,w):(e.__c=d=new us(y,w),d.constructor=T,d.render=$4e),x&&x.sub(d),d.props=y,d.state||(d.state={}),d.context=w,d.__n=r,f=d.__d=!0,d.__h=[],d._sb=[]),d.__s==null&&(d.__s=d.state),T.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=Nl({},d.__s)),Nl(d.__s,T.getDerivedStateFromProps(y,d.__s))),h=d.props,p=d.state,d.__v=e,f)T.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(T.getDerivedStateFromProps==null&&y!==h&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(y,w),!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(y,d.__s,w)===!1||e.__v===n.__v){for(e.__v!==n.__v&&(d.props=y,d.state=d.__s,d.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(P){P&&(P.__=e)}),_=0;_<d._sb.length;_++)d.__h.push(d._sb[_]);d._sb=[],d.__h.length&&a.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(y,d.__s,w),d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(h,p,g)})}if(d.context=w,d.props=y,d.__P=t,A=ht.__r,E=0,"prototype"in T&&T.prototype.render){for(d.state=d.__s,d.__d=!1,A&&A(e),u=d.render(d.props,d.state,d.context),C=0;C<d._sb.length;C++)d.__h.push(d._sb[C]);d._sb=[]}else do d.__d=!1,A&&A(e),u=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++E<25);d.state=d.__s,d.getChildContext!=null&&(r=Nl(Nl({},r),d.getChildContext())),f||d.getSnapshotBeforeUpdate==null||(g=d.getSnapshotBeforeUpdate(h,p)),j=u!=null&&u.type===qn&&u.key==null?u.props.children:u,oW(t,Array.isArray(j)?j:[j],e,n,r,i,s,a,o,c),d.base=e.__e,e.__h=null,d.__h.length&&a.push(d),m&&(d.__E=d.__=null),d.__e=!1}else s==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=z4e(n.__e,e,n,r,i,s,a,c);(u=ht.diffed)&&u(e)}catch(P){e.__v=null,(c||s!=null)&&(e.__e=o,e.__h=!!c,s[s.indexOf(o)]=null),ht.__e(P,e,n)}}function dW(t,e){ht.__c&&ht.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(r){r.call(n)})}catch(r){ht.__e(r,n.__v)}})}function z4e(t,e,n,r,i,s,a,o){var c,u,d,f=n.props,h=e.props,p=e.type,g=0;if(p==="svg"&&(i=!0),s!=null){for(;g<s.length;g++)if((c=s[g])&&"setAttribute"in c==!!p&&(p?c.localName===p:c.nodeType===3)){t=c,s[g]=null;break}}if(t==null){if(p===null)return document.createTextNode(h);t=i?document.createElementNS("http://www.w3.org/2000/svg",p):document.createElement(p,h.is&&h),s=null,o=!1}if(p===null)f===h||o&&t.data===h||(t.data=h);else{if(s=s&&A1.call(t.childNodes),u=(f=n.props||wx).dangerouslySetInnerHTML,d=h.dangerouslySetInnerHTML,!o){if(s!=null)for(f={},g=0;g<t.attributes.length;g++)f[t.attributes[g].name]=t.attributes[g].value;(d||u)&&(d&&(u&&d.__html==u.__html||d.__html===t.innerHTML)||(t.innerHTML=d&&d.__html||""))}if(R4e(t,h,f,i,o),d)e.__k=[];else if(g=e.props.children,oW(t,Array.isArray(g)?g:[g],e,n,r,i&&p!=="foreignObject",s,a,s?s[0]:n.__k&&Xg(n,0),o),s!=null)for(g=s.length;g--;)s[g]!=null&&sW(s[g]);o||("value"in h&&(g=h.value)!==void 0&&(g!==t.value||p==="progress"&&!g||p==="option"&&g!==f.value)&&_x(t,"value",g,f.value,!1),"checked"in h&&(g=h.checked)!==void 0&&g!==t.checked&&_x(t,"checked",g,f.checked,!1))}return t}function fW(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(r){ht.__e(r,n)}}function hW(t,e,n){var r,i;if(ht.unmount&&ht.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||fW(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){ht.__e(s,e)}r.base=r.__P=null,t.__c=void 0}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&hW(r[i],e,n||typeof t.type!="function");n||t.__e==null||sW(t.__e),t.__=t.__e=t.__d=void 0}function $4e(t,e,n){return this.constructor(t,n)}function Zg(t,e,n){var r,i,s;ht.__&&ht.__(t,e),i=(r=!1)?null:e.__k,s=[],_P(e,t=e.__k=xe(qn,null,[t]),i||wx,wx,e.ownerSVGElement!==void 0,i?null:e.firstChild?A1.call(e.childNodes):null,s,i?i.__e:e.firstChild,r),dW(s,t)}function F4e(t,e){var n={__c:e="__cC"+rW++,__:t,Consumer:function(r,i){return r.children(i)},Provider:function(r){var i,s;return this.getChildContext||(i=[],(s={})[e]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(a){this.props.value!==a.value&&i.some(function(o){o.__e=!0,oj(o)})},this.sub=function(a){i.push(a);var o=a.componentWillUnmount;a.componentWillUnmount=function(){i.splice(i.indexOf(a),1),o&&o.call(a)}}),r.children}};return n.Provider.__=n.Consumer.contextType=n}A1=iW.slice,ht={__e:function(t,e,n,r){for(var i,s,a;e=e.__;)if((i=e.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(t)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,r||{}),a=i.__d),a)return i.__E=i}catch(o){t=o}throw t}},eW=0,tW=function(t){return t!=null&&t.constructor===void 0},Ch=!1,us.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Nl({},this.state),typeof t=="function"&&(t=t(Nl({},n),this.props)),t&&Nl(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),oj(this))},us.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),oj(this))},us.prototype.render=qn,Jc=[],nW=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Sx.__r=0,rW=0;var Da,jS,m3,pW=[],CS=[],g3=ht.__b,v3=ht.__r,y3=ht.diffed,b3=ht.__c,x3=ht.unmount;function V4e(){for(var t;t=pW.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(y0),t.__H.__h.forEach(lj),t.__H.__h=[]}catch(e){t.__H.__h=[],ht.__e(e,t.__v)}}ht.__b=function(t){Da=null,g3&&g3(t)},ht.__r=function(t){v3&&v3(t);var e=(Da=t.__c).__H;e&&(jS===Da?(e.__h=[],Da.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=CS,n.__N=n.i=void 0})):(e.__h.forEach(y0),e.__h.forEach(lj),e.__h=[])),jS=Da},ht.diffed=function(t){y3&&y3(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(pW.push(e)!==1&&m3===ht.requestAnimationFrame||((m3=ht.requestAnimationFrame)||B4e)(V4e)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==CS&&(n.__=n.__V),n.i=void 0,n.__V=CS})),jS=Da=null},ht.__c=function(t,e){e.some(function(n){try{n.__h.forEach(y0),n.__h=n.__h.filter(function(r){return!r.__||lj(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],ht.__e(r,n.__v)}}),b3&&b3(t,e)},ht.unmount=function(t){x3&&x3(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{y0(r)}catch(i){e=i}}),n.__H=void 0,e&&ht.__e(e,n.__v))};var w3=typeof requestAnimationFrame=="function";function B4e(t){var e,n=function(){clearTimeout(r),w3&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);w3&&(e=requestAnimationFrame(n))}function y0(t){var e=Da,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),Da=e}function lj(t){var e=Da;t.__c=t.__(),Da=e}function U4e(t,e){for(var n in e)t[n]=e[n];return t}function _3(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var r in e)if(r!=="__source"&&t[r]!==e[r])return!0;return!1}function S3(t){this.props=t}(S3.prototype=new us).isPureReactComponent=!0,S3.prototype.shouldComponentUpdate=function(t,e){return _3(this.props,t)||_3(this.state,e)};var A3=ht.__b;ht.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),A3&&A3(t)};var W4e=ht.__e;ht.__e=function(t,e,n,r){if(t.then){for(var i,s=e;s=s.__;)if((i=s.__c)&&i.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),i.__c(t,e)}W4e(t,e,n,r)};var E3=ht.unmount;function mW(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),t.__c.__H=null),(t=U4e({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map(function(r){return mW(r,e,n)})),t}function gW(t,e,n){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(r){return gW(r,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=n)),t}function TS(){this.__u=0,this.t=null,this.__b=null}function vW(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function zy(){this.u=null,this.o=null}ht.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&t.__h===!0&&(t.type=null),E3&&E3(t)},(TS.prototype=new us).__c=function(t,e){var n=e.__c,r=this;r.t==null&&(r.t=[]),r.t.push(n);var i=vW(r.__v),s=!1,a=function(){s||(s=!0,n.__R=null,i?i(o):o())};n.__R=a;var o=function(){if(!--r.__u){if(r.state.__a){var u=r.state.__a;r.__v.__k[0]=gW(u,u.__c.__P,u.__c.__O)}var d;for(r.setState({__a:r.__b=null});d=r.t.pop();)d.forceUpdate()}},c=e.__h===!0;r.__u++||c||r.setState({__a:r.__b=r.__v.__k[0]}),t.then(a,a)},TS.prototype.componentWillUnmount=function(){this.t=[]},TS.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=mW(this.__b,n,r.__O=r.__P)}this.__b=null}var i=e.__a&&xe(qn,null,t.fallback);return i&&(i.__h=null),[xe(qn,null,e.__a?null:t.children),i]};var j3=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};function H4e(t){return this.getChildContext=function(){return t.context},t.children}function K4e(t){var e=this,n=t.i;e.componentWillUnmount=function(){Zg(null,e.l),e.l=null,e.i=null},e.i&&e.i!==n&&e.componentWillUnmount(),t.__v?(e.l||(e.i=n,e.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(r){this.childNodes.push(r),e.i.appendChild(r)},insertBefore:function(r,i){this.childNodes.push(r),e.i.appendChild(r)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),e.i.removeChild(r)}}),Zg(xe(H4e,{context:e.context},t.__v),e.l)):e.l&&e.componentWillUnmount()}function q4e(t,e){var n=xe(K4e,{__v:t,i:e});return n.containerInfo=e,n}(zy.prototype=new us).__a=function(t){var e=this,n=vW(e.__v),r=e.o.get(t);return r[0]++,function(i){var s=function(){e.props.revealOrder?(r.push(i),j3(e,t,r)):i()};n?n(s):s()}},zy.prototype.render=function(t){this.u=null,this.o=new Map;var e=Ax(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},zy.prototype.componentDidUpdate=zy.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,n){j3(t,n,e)})};var G4e=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Y4e=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Q4e=typeof document<"u",X4e=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(t)};us.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(us.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var C3=ht.event;function Z4e(){}function J4e(){return this.cancelBubble}function e5e(){return this.defaultPrevented}ht.event=function(t){return C3&&(t=C3(t)),t.persist=Z4e,t.isPropagationStopped=J4e,t.isDefaultPrevented=e5e,t.nativeEvent=t};var T3={configurable:!0,get:function(){return this.class}},N3=ht.vnode;ht.vnode=function(t){var e=t.type,n=t.props,r=n;if(typeof e=="string"){var i=e.indexOf("-")===-1;for(var s in r={},n){var a=n[s];Q4e&&s==="children"&&e==="noscript"||s==="value"&&"defaultValue"in n&&a==null||(s==="defaultValue"&&"value"in n&&n.value==null?s="value":s==="download"&&a===!0?a="":/ondoubleclick/i.test(s)?s="ondblclick":/^onchange(textarea|input)/i.test(s+e)&&!X4e(n.type)?s="oninput":/^onfocus$/i.test(s)?s="onfocusin":/^onblur$/i.test(s)?s="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(s)?s=s.toLowerCase():i&&Y4e.test(s)?s=s.replace(/[A-Z0-9]/g,"-$&").toLowerCase():a===null&&(a=void 0),/^oninput$/i.test(s)&&(s=s.toLowerCase(),r[s]&&(s="oninputCapture")),r[s]=a)}e=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=Ax(n.children).forEach(function(o){o.props.selected=r.value.indexOf(o.props.value)!=-1})),e=="select"&&r.defaultValue!=null&&(r.value=Ax(n.children).forEach(function(o){o.props.selected=r.multiple?r.defaultValue.indexOf(o.props.value)!=-1:r.defaultValue==o.props.value})),t.props=r,n.class!=n.className&&(T3.enumerable="className"in n,n.className!=null&&(r.class=n.className),Object.defineProperty(r,"className",T3))}t.$$typeof=G4e,N3&&N3(t)};var P3=ht.__r;ht.__r=function(t){P3&&P3(t),t.__c};const yW=[],cj=new Map;function bW(t){yW.push(t),cj.forEach(e=>{wW(e,t)})}function t5e(t){t.isConnected&&t.getRootNode&&xW(t.getRootNode())}function xW(t){let e=cj.get(t);if(!e||!e.isConnected){if(e=t.querySelector("style[data-fullcalendar]"),!e){e=document.createElement("style"),e.setAttribute("data-fullcalendar","");const n=r5e();n&&(e.nonce=n);const r=t===document?document.head:t,i=t===document?r.querySelector("script,link[rel=stylesheet],link[as=style],style"):r.firstChild;r.insertBefore(e,i)}cj.set(t,e),n5e(e)}}function n5e(t){for(const e of yW)wW(t,e)}function wW(t,e){const{sheet:n}=t,r=n.cssRules.length;e.split("}").forEach((i,s)=>{i=i.trim(),i&&n.insertRule(i+"}",r+s)})}let NS;function r5e(){return NS===void 0&&(NS=i5e()),NS}function i5e(){const t=document.querySelector('meta[name="csp-nonce"]');if(t&&t.hasAttribute("content"))return t.getAttribute("content");const e=document.querySelector("script[nonce]");return e&&e.nonce||""}typeof document<"u"&&xW(document);var s5e=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';bW(s5e);class SP{constructor(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),e==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))}pause(e=""){let{pauseDepths:n}=this;n[e]=(n[e]||0)+1,this.clearTimeout()}resume(e="",n){let{pauseDepths:r}=this;e in r&&(n?delete r[e]:(r[e]-=1,r[e]<=0&&delete r[e]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function AP(t){t.parentNode&&t.parentNode.removeChild(t)}function mi(t,e){if(t.closest)return t.closest(e);if(!document.documentElement.contains(t))return null;do{if(a5e(t,e))return t;t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===1);return null}function a5e(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector).call(t,e)}function o5e(t,e){let n=t instanceof HTMLElement?[t]:t,r=[];for(let i=0;i<n.length;i+=1){let s=n[i].querySelectorAll(e);for(let a=0;a<s.length;a+=1)r.push(s[a])}return r}const l5e=/(top|left|right|bottom|width|height)$/i;function Nm(t,e){for(let n in e)_W(t,n,e[n])}function _W(t,e,n){n==null?t.style[e]="":typeof n=="number"&&l5e.test(e)?t.style[e]=`${n}px`:t.style[e]=n}function SW(t){var e,n;return(n=(e=t.composedPath)===null||e===void 0?void 0:e.call(t)[0])!==null&&n!==void 0?n:t.target}let k3=0;function E1(){return k3+=1,"fc-dom-"+k3}function j1(t){t.preventDefault()}function c5e(t,e){return n=>{let r=mi(n.target,t);r&&e.call(r,n,r)}}function AW(t,e,n,r){let i=c5e(n,r);return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}function u5e(t,e,n,r){let i;return AW(t,"mouseover",e,(s,a)=>{if(a!==i){i=a,n(s,a);let o=c=>{i=null,r(c,a),a.removeEventListener("mouseleave",o)};a.addEventListener("mouseleave",o)}})}const D3=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function d5e(t,e){let n=r=>{e(r),D3.forEach(i=>{t.removeEventListener(i,n)})};D3.forEach(r=>{t.addEventListener(r,n)})}function EW(t){return Object.assign({onClick:t},jW(t))}function jW(t){return{tabIndex:0,onKeyDown(e){(e.key==="Enter"||e.key===" ")&&(t(e),e.preventDefault())}}}let I3=0;function ud(){return I3+=1,String(I3)}function EP(){document.body.classList.add("fc-not-allowed")}function jP(){document.body.classList.remove("fc-not-allowed")}function f5e(t){t.style.userSelect="none",t.style.webkitUserSelect="none",t.addEventListener("selectstart",j1)}function h5e(t){t.style.userSelect="",t.style.webkitUserSelect="",t.removeEventListener("selectstart",j1)}function p5e(t){t.addEventListener("contextmenu",j1)}function m5e(t){t.removeEventListener("contextmenu",j1)}function g5e(t){let e=[],n=[],r,i;for(typeof t=="string"?n=t.split(/\s*,\s*/):typeof t=="function"?n=[t]:Array.isArray(t)&&(n=t),r=0;r<n.length;r+=1)i=n[r],typeof i=="string"?e.push(i.charAt(0)==="-"?{field:i.substring(1),order:-1}:{field:i,order:1}):typeof i=="function"&&e.push({func:i});return e}function v5e(t,e,n){let r,i;for(r=0;r<n.length;r+=1)if(i=y5e(t,e,n[r]),i)return i;return 0}function y5e(t,e,n){return n.func?n.func(t,e):b5e(t[n.field],e[n.field])*(n.order||1)}function b5e(t,e){return!t&&!e?0:e==null?-1:t==null?1:typeof t=="string"||typeof e=="string"?String(t).localeCompare(String(e)):t-e}function PS(t,e){let n=String(t);return"000".substr(0,e-n.length)+n}function Pm(t,e,n){return typeof t=="function"?t(...e):typeof t=="string"?e.reduce((r,i,s)=>r.replace("$"+s,i||""),t):n}function x5e(t,e){return t-e}function kS(t){return t%1===0}function w5e(t){let e=t.querySelector(".fc-scrollgrid-shrink-frame"),n=t.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!n)throw new Error("needs fc-scrollgrid-shrink-cushion className");return t.getBoundingClientRect().width-e.getBoundingClientRect().width+n.getBoundingClientRect().width}const _5e=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function Jt(t,e){return typeof t=="string"?S5e(t):typeof t=="object"&&t?O3(t):typeof t=="number"?O3({[e||"milliseconds"]:t}):null}function S5e(t){let e=_5e.exec(t);if(e){let n=e[1]?-1:1;return{years:0,months:0,days:n*(e[2]?parseInt(e[2],10):0),milliseconds:n*((e[3]?parseInt(e[3],10):0)*60*60*1e3+(e[4]?parseInt(e[4],10):0)*60*1e3+(e[5]?parseInt(e[5],10):0)*1e3+(e[6]?parseInt(e[6],10):0))}}return null}function O3(t){let e={years:t.years||t.year||0,months:t.months||t.month||0,days:t.days||t.day||0,milliseconds:(t.hours||t.hour||0)*60*60*1e3+(t.minutes||t.minute||0)*60*1e3+(t.seconds||t.second||0)*1e3+(t.milliseconds||t.millisecond||t.ms||0)},n=t.weeks||t.week;return n&&(e.days+=n*7,e.specifiedWeeks=!0),e}function A5e(t,e){return t.years===e.years&&t.months===e.months&&t.days===e.days&&t.milliseconds===e.milliseconds}function E5e(t,e){return{years:t.years-e.years,months:t.months-e.months,days:t.days-e.days,milliseconds:t.milliseconds-e.milliseconds}}function j5e(t){return Tf(t)/365}function C5e(t){return Tf(t)/30}function Tf(t){return Jg(t)/864e5}function Jg(t){return t.years*(365*864e5)+t.months*(30*864e5)+t.days*864e5+t.milliseconds}function uj(t){let e=t.milliseconds;if(e){if(e%1e3!==0)return{unit:"millisecond",value:e};if(e%(1e3*60)!==0)return{unit:"second",value:e/1e3};if(e%(1e3*60*60)!==0)return{unit:"minute",value:e/(1e3*60)};if(e)return{unit:"hour",value:e/(1e3*60*60)}}return t.days?t.specifiedWeeks&&t.days%7===0?{unit:"week",value:t.days/7}:{unit:"day",value:t.days}:t.months?{unit:"month",value:t.months}:t.years?{unit:"year",value:t.years}:{unit:"millisecond",value:0}}function Jl(t,e,n){if(t===e)return!0;let r=t.length,i;if(r!==e.length)return!1;for(i=0;i<r;i+=1)if(!(n?n(t[i],e[i]):t[i]===e[i]))return!1;return!0}const T5e=["sun","mon","tue","wed","thu","fri","sat"];function M3(t,e){let n=Pl(t);return n[2]+=e*7,$i(n)}function Rr(t,e){let n=Pl(t);return n[2]+=e,$i(n)}function ec(t,e){let n=Pl(t);return n[6]+=e,$i(n)}function N5e(t,e){return rp(t,e)/7}function rp(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60*24)}function P5e(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60)}function k5e(t,e){return(e.valueOf()-t.valueOf())/(1e3*60)}function D5e(t,e){return(e.valueOf()-t.valueOf())/1e3}function I5e(t,e){let n=In(t),r=In(e);return{years:0,months:0,days:Math.round(rp(n,r)),milliseconds:e.valueOf()-r.valueOf()-(t.valueOf()-n.valueOf())}}function O5e(t,e){let n=Ex(t,e);return n!==null&&n%7===0?n/7:null}function Ex(t,e){return kl(t)===kl(e)?Math.round(rp(t,e)):null}function In(t){return $i([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()])}function M5e(t){return $i([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours()])}function R5e(t){return $i([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes()])}function L5e(t){return $i([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()])}function z5e(t,e,n){let r=t.getUTCFullYear(),i=DS(t,r,e,n);if(i<1)return DS(t,r-1,e,n);let s=DS(t,r+1,e,n);return s>=1?Math.min(i,s):i}function DS(t,e,n,r){let i=$i([e,0,1+$5e(e,n,r)]),s=In(t),a=Math.round(rp(i,s));return Math.floor(a/7)+1}function $5e(t,e,n){let r=7+e-n;return-((7+$i([t,0,r]).getUTCDay()-e)%7)+r-1}function R3(t){return[t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()]}function L3(t){return new Date(t[0],t[1]||0,t[2]==null?1:t[2],t[3]||0,t[4]||0,t[5]||0)}function Pl(t){return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()]}function $i(t){return t.length===1&&(t=t.concat([0])),new Date(Date.UTC(...t))}function CW(t){return!isNaN(t.valueOf())}function kl(t){return t.getUTCHours()*1e3*60*60+t.getUTCMinutes()*1e3*60+t.getUTCSeconds()*1e3+t.getUTCMilliseconds()}function F5e(t,e,n=!1){let r=t.toISOString();return r=r.replace(".000",""),n&&(r=r.replace("T00:00:00Z","")),r.length>10&&(e==null?r=r.replace("Z",""):e!==0&&(r=r.replace("Z",TP(e,!0)))),r}function CP(t){return t.toISOString().replace(/T.*$/,"")}function V5e(t){return t.toISOString().match(/^\d{4}-\d{2}/)[0]}function TP(t,e=!1){let n=t<0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),s=Math.round(r%60);return e?`${n+PS(i,2)}:${PS(s,2)}`:`GMT${n}${i}${s?`:${PS(s,2)}`:""}`}function Gt(t,e,n){let r,i;return function(...s){if(!r)i=t.apply(this,s);else if(!Jl(r,s)){let a=t.apply(this,s);(!e||!e(a,i))&&(i=a)}return r=s,i}}function b0(t,e,n){let r,i;return s=>(r?ga(r,s)||(i=t.call(this,s)):i=t.call(this,s),r=s,i)}const IS={week:3,separator:9,omitZeroMinute:9,meridiem:9,omitCommas:9},jx={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},$y=/\s*([ap])\.?m\.?/i,B5e=/,/g,U5e=/\s+/g,W5e=/\u200e/g,H5e=/UTC|GMT/;class K5e{constructor(e){let n={},r={},i=9;for(let s in e)s in IS?(r[s]=e[s],IS[s]<9&&(i=Math.min(IS[s],i))):(n[s]=e[s],s in jx&&(i=Math.min(jx[s],i)));this.standardDateProps=n,this.extendedSettings=r,this.smallestUnitNum=i,this.buildFormattingFunc=Gt(z3)}format(e,n){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,n)(e)}formatRange(e,n,r,i){let{standardDateProps:s,extendedSettings:a}=this,o=Z5e(e.marker,n.marker,r.calendarSystem);if(!o)return this.format(e,r);let c=o;c>1&&(s.year==="numeric"||s.year==="2-digit")&&(s.month==="numeric"||s.month==="2-digit")&&(s.day==="numeric"||s.day==="2-digit")&&(c=1);let u=this.format(e,r),d=this.format(n,r);if(u===d)return u;let f=J5e(s,c),h=z3(f,a,r),p=h(e),g=h(n),m=e3e(u,p,d,g),y=a.separator||i||r.defaultSeparator||"";return m?m.before+p+y+g+m.after:u+y+d}getSmallestUnit(){switch(this.smallestUnitNum){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function z3(t,e,n){let r=Object.keys(t).length;return r===1&&t.timeZoneName==="short"?i=>TP(i.timeZoneOffset):r===0&&e.week?i=>X5e(n.computeWeekNumber(i.marker),n.weekText,n.weekTextLong,n.locale,e.week):q5e(t,e,n)}function q5e(t,e,n){t=Object.assign({},t),e=Object.assign({},e),G5e(t,e),t.timeZone="UTC";let r=new Intl.DateTimeFormat(n.locale.codes,t),i;if(e.omitZeroMinute){let s=Object.assign({},t);delete s.minute,i=new Intl.DateTimeFormat(n.locale.codes,s)}return s=>{let{marker:a}=s,o;i&&!a.getUTCMinutes()?o=i:o=r;let c=o.format(a);return Y5e(c,s,t,e,n)}}function G5e(t,e){t.timeZoneName&&(t.hour||(t.hour="2-digit"),t.minute||(t.minute="2-digit")),t.timeZoneName==="long"&&(t.timeZoneName="short"),e.omitZeroMinute&&(t.second||t.millisecond)&&delete e.omitZeroMinute}function Y5e(t,e,n,r,i){return t=t.replace(W5e,""),n.timeZoneName==="short"&&(t=Q5e(t,i.timeZone==="UTC"||e.timeZoneOffset==null?"UTC":TP(e.timeZoneOffset))),r.omitCommas&&(t=t.replace(B5e,"").trim()),r.omitZeroMinute&&(t=t.replace(":00","")),r.meridiem===!1?t=t.replace($y,"").trim():r.meridiem==="narrow"?t=t.replace($y,(s,a)=>a.toLocaleLowerCase()):r.meridiem==="short"?t=t.replace($y,(s,a)=>`${a.toLocaleLowerCase()}m`):r.meridiem==="lowercase"&&(t=t.replace($y,s=>s.toLocaleLowerCase())),t=t.replace(U5e," "),t=t.trim(),t}function Q5e(t,e){let n=!1;return t=t.replace(H5e,()=>(n=!0,e)),n||(t+=` ${e}`),t}function X5e(t,e,n,r,i){let s=[];return i==="long"?s.push(n):(i==="short"||i==="narrow")&&s.push(e),(i==="long"||i==="short")&&s.push(" "),s.push(r.simpleNumberFormat.format(t)),r.options.direction==="rtl"&&s.reverse(),s.join("")}function Z5e(t,e,n){return n.getMarkerYear(t)!==n.getMarkerYear(e)?5:n.getMarkerMonth(t)!==n.getMarkerMonth(e)?4:n.getMarkerDay(t)!==n.getMarkerDay(e)?2:kl(t)!==kl(e)?1:0}function J5e(t,e){let n={};for(let r in t)(!(r in jx)||jx[r]<=e)&&(n[r]=t[r]);return n}function e3e(t,e,n,r){let i=0;for(;i<t.length;){let s=t.indexOf(e,i);if(s===-1)break;let a=t.substr(0,s);i=s+e.length;let o=t.substr(i),c=0;for(;c<n.length;){let u=n.indexOf(r,c);if(u===-1)break;let d=n.substr(0,u);c=u+r.length;let f=n.substr(c);if(a===d&&o===f)return{before:a,after:o}}}return null}function $3(t,e){let n=e.markerToArray(t.marker);return{marker:t.marker,timeZoneOffset:t.timeZoneOffset,array:n,year:n[0],month:n[1],day:n[2],hour:n[3],minute:n[4],second:n[5],millisecond:n[6]}}function Cx(t,e,n,r){let i=$3(t,n.calendarSystem),s=e?$3(e,n.calendarSystem):null;return{date:i,start:i,end:s,timeZone:n.timeZone,localeCodes:n.locale.codes,defaultSeparator:r||n.defaultSeparator}}class t3e{constructor(e){this.cmdStr=e}format(e,n,r){return n.cmdFormatter(this.cmdStr,Cx(e,null,n,r))}formatRange(e,n,r,i){return r.cmdFormatter(this.cmdStr,Cx(e,n,r,i))}}class n3e{constructor(e){this.func=e}format(e,n,r){return this.func(Cx(e,null,n,r))}formatRange(e,n,r,i){return this.func(Cx(e,n,r,i))}}function Or(t){return typeof t=="object"&&t?new K5e(t):typeof t=="string"?new t3e(t):typeof t=="function"?new n3e(t):null}const F3={navLinkDayClick:ge,navLinkWeekClick:ge,duration:Jt,bootstrapFontAwesome:ge,buttonIcons:ge,customButtons:ge,defaultAllDayEventDuration:Jt,defaultTimedEventDuration:Jt,nextDayThreshold:Jt,scrollTime:Jt,scrollTimeReset:Boolean,slotMinTime:Jt,slotMaxTime:Jt,dayPopoverFormat:Or,slotDuration:Jt,snapDuration:Jt,headerToolbar:ge,footerToolbar:ge,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:Or,dayHeaderClassNames:ge,dayHeaderContent:ge,dayHeaderDidMount:ge,dayHeaderWillUnmount:ge,dayCellClassNames:ge,dayCellContent:ge,dayCellDidMount:ge,dayCellWillUnmount:ge,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:ge,weekNumbers:Boolean,weekNumberClassNames:ge,weekNumberContent:ge,weekNumberDidMount:ge,weekNumberWillUnmount:ge,editable:Boolean,viewClassNames:ge,viewDidMount:ge,viewWillUnmount:ge,nowIndicator:Boolean,nowIndicatorSnap:ge,nowIndicatorClassNames:ge,nowIndicatorContent:ge,nowIndicatorDidMount:ge,nowIndicatorWillUnmount:ge,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:ge,locale:ge,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:ge,eventOrder:g5e,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:ge,contentHeight:ge,direction:String,weekNumberFormat:Or,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:ge,initialDate:ge,now:ge,eventDataTransform:ge,stickyHeaderDates:ge,stickyFooterScrollbar:ge,viewHeight:ge,defaultAllDay:Boolean,eventSourceFailure:ge,eventSourceSuccess:ge,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:ge,eventConstraint:ge,eventAllow:ge,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:ge,eventContent:ge,eventDidMount:ge,eventWillUnmount:ge,selectConstraint:ge,selectOverlap:ge,selectAllow:ge,droppable:Boolean,unselectCancel:String,slotLabelFormat:ge,slotLaneClassNames:ge,slotLaneContent:ge,slotLaneDidMount:ge,slotLaneWillUnmount:ge,slotLabelClassNames:ge,slotLabelContent:ge,slotLabelDidMount:ge,slotLabelWillUnmount:ge,dayMaxEvents:ge,dayMaxEventRows:ge,dayMinWidth:Number,slotLabelInterval:Jt,allDayText:String,allDayClassNames:ge,allDayContent:ge,allDayDidMount:ge,allDayWillUnmount:ge,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:Or,rerenderDelay:Number,moreLinkText:ge,moreLinkHint:ge,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:ge,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:Jt,hiddenDays:ge,fixedWeekCount:Boolean,validRange:ge,visibleRange:ge,titleFormat:ge,eventInteractive:Boolean,noEventsText:String,viewHint:ge,navLinkHint:ge,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:ge,moreLinkClassNames:ge,moreLinkContent:ge,moreLinkDidMount:ge,moreLinkWillUnmount:ge,monthStartFormat:Or,handleCustomRendering:ge,customRenderingMetaMap:ge,customRenderingReplaces:Boolean},km={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:" – ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"},nowIndicatorSnap:"auto"},V3={datesSet:ge,eventsSet:ge,eventAdd:ge,eventChange:ge,eventRemove:ge,windowResize:ge,eventClick:ge,eventMouseEnter:ge,eventMouseLeave:ge,select:ge,unselect:ge,loading:ge,_unmount:ge,_beforeprint:ge,_afterprint:ge,_noEventDrop:ge,_noEventResize:ge,_resize:ge,_scrollRequest:ge},B3={buttonText:ge,buttonHints:ge,views:ge,plugins:ge,initialEvents:ge,events:ge,eventSources:ge},Yc={headerToolbar:Qc,footerToolbar:Qc,buttonText:Qc,buttonHints:Qc,buttonIcons:Qc,dateIncrement:Qc,plugins:Fy,events:Fy,eventSources:Fy,resources:Fy};function Qc(t,e){return typeof t=="object"&&typeof e=="object"&&t&&e?ga(t,e):t===e}function Fy(t,e){return Array.isArray(t)&&Array.isArray(e)?Jl(t,e):t===e}const r3e={type:String,component:ge,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:ge,usesMinMaxTime:Boolean,classNames:ge,content:ge,didMount:ge,willUnmount:ge};function OS(t){return PP(t,Yc)}function NP(t,e){let n={},r={};for(let i in e)i in t&&(n[i]=e[i](t[i]));for(let i in t)i in e||(r[i]=t[i]);return{refined:n,extra:r}}function ge(t){return t}const{hasOwnProperty:Tx}=Object.prototype;function PP(t,e){let n={};if(e){for(let r in e)if(e[r]===Qc){let i=[];for(let s=t.length-1;s>=0;s-=1){let a=t[s][r];if(typeof a=="object"&&a)i.unshift(a);else if(a!==void 0){n[r]=a;break}}i.length&&(n[r]=PP(i))}}for(let r=t.length-1;r>=0;r-=1){let i=t[r];for(let s in i)s in n||(n[s]=i[s])}return n}function Ku(t,e){let n={};for(let r in t)e(t[r],r)&&(n[r]=t[r]);return n}function dd(t,e){let n={};for(let r in t)n[r]=e(t[r],r);return n}function TW(t){let e={};for(let n of t)e[n]=!0;return e}function kP(t){let e=[];for(let n in t)e.push(t[n]);return e}function ga(t,e){if(t===e)return!0;for(let n in t)if(Tx.call(t,n)&&!(n in e))return!1;for(let n in e)if(Tx.call(e,n)&&t[n]!==e[n])return!1;return!0}const i3e=/^on[A-Z]/;function s3e(t,e){const n=a3e(t,e);for(let r of n)if(!i3e.test(r))return!1;return!0}function a3e(t,e){let n=[];for(let r in t)Tx.call(t,r)&&(r in e||n.push(r));for(let r in e)Tx.call(e,r)&&t[r]!==e[r]&&n.push(r);return n}function MS(t,e,n={}){if(t===e)return!0;for(let r in e)if(!(r in t&&o3e(t[r],e[r],n[r])))return!1;for(let r in t)if(!(r in e))return!1;return!0}function o3e(t,e,n){return t===e||n===!0?!0:n?n(t,e):!1}function l3e(t,e=0,n,r=1){let i=[];n==null&&(n=Object.keys(t).length);for(let s=e;s<n;s+=r){let a=t[s];a!==void 0&&i.push(a)}return i}let NW={};function c3e(t,e){NW[t]=e}function u3e(t){return new NW[t]}class d3e{getMarkerYear(e){return e.getUTCFullYear()}getMarkerMonth(e){return e.getUTCMonth()}getMarkerDay(e){return e.getUTCDate()}arrayToMarker(e){return $i(e)}markerToArray(e){return Pl(e)}}c3e("gregory",d3e);const f3e=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function h3e(t){let e=f3e.exec(t);if(e){let n=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?+`0.${e[12]}`*1e3:0));if(CW(n)){let r=null;return e[13]&&(r=(e[15]==="-"?-1:1)*(Number(e[16]||0)*60+Number(e[18]||0))),{marker:n,isTimeUnspecified:!e[6],timeZoneOffset:r}}}return null}class p3e{constructor(e){let n=this.timeZone=e.timeZone,r=n!=="local"&&n!=="UTC";e.namedTimeZoneImpl&&r&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(n)),this.canComputeOffset=!!(!r||this.namedTimeZoneImpl),this.calendarSystem=u3e(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,e.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof e.firstDay=="number"&&(this.weekDow=e.firstDay),typeof e.weekNumberCalculation=="function"&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=e.weekText!=null?e.weekText:e.locale.options.weekText,this.weekTextLong=(e.weekTextLong!=null?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}createMarker(e){let n=this.createMarkerMeta(e);return n===null?null:n.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):$i(R3(new Date))}createMarkerMeta(e){if(typeof e=="string")return this.parse(e);let n=null;return typeof e=="number"?n=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(n=this.timestampToMarker(e))):Array.isArray(e)&&(n=$i(e)),n===null||!CW(n)?null:{marker:n,isTimeUnspecified:!1,forcedTzo:null}}parse(e){let n=h3e(e);if(n===null)return null;let{marker:r}=n,i=null;return n.timeZoneOffset!==null&&(this.canComputeOffset?r=this.timestampToMarker(r.valueOf()-n.timeZoneOffset*60*1e3):i=n.timeZoneOffset),{marker:r,isTimeUnspecified:n.isTimeUnspecified,forcedTzo:i}}getYear(e){return this.calendarSystem.getMarkerYear(e)}getMonth(e){return this.calendarSystem.getMarkerMonth(e)}getDay(e){return this.calendarSystem.getMarkerDay(e)}add(e,n){let r=this.calendarSystem.markerToArray(e);return r[0]+=n.years,r[1]+=n.months,r[2]+=n.days,r[6]+=n.milliseconds,this.calendarSystem.arrayToMarker(r)}subtract(e,n){let r=this.calendarSystem.markerToArray(e);return r[0]-=n.years,r[1]-=n.months,r[2]-=n.days,r[6]-=n.milliseconds,this.calendarSystem.arrayToMarker(r)}addYears(e,n){let r=this.calendarSystem.markerToArray(e);return r[0]+=n,this.calendarSystem.arrayToMarker(r)}addMonths(e,n){let r=this.calendarSystem.markerToArray(e);return r[1]+=n,this.calendarSystem.arrayToMarker(r)}diffWholeYears(e,n){let{calendarSystem:r}=this;return kl(e)===kl(n)&&r.getMarkerDay(e)===r.getMarkerDay(n)&&r.getMarkerMonth(e)===r.getMarkerMonth(n)?r.getMarkerYear(n)-r.getMarkerYear(e):null}diffWholeMonths(e,n){let{calendarSystem:r}=this;return kl(e)===kl(n)&&r.getMarkerDay(e)===r.getMarkerDay(n)?r.getMarkerMonth(n)-r.getMarkerMonth(e)+(r.getMarkerYear(n)-r.getMarkerYear(e))*12:null}greatestWholeUnit(e,n){let r=this.diffWholeYears(e,n);return r!==null?{unit:"year",value:r}:(r=this.diffWholeMonths(e,n),r!==null?{unit:"month",value:r}:(r=O5e(e,n),r!==null?{unit:"week",value:r}:(r=Ex(e,n),r!==null?{unit:"day",value:r}:(r=P5e(e,n),kS(r)?{unit:"hour",value:r}:(r=k5e(e,n),kS(r)?{unit:"minute",value:r}:(r=D5e(e,n),kS(r)?{unit:"second",value:r}:{unit:"millisecond",value:n.valueOf()-e.valueOf()}))))))}countDurationsBetween(e,n,r){let i;return r.years&&(i=this.diffWholeYears(e,n),i!==null)?i/j5e(r):r.months&&(i=this.diffWholeMonths(e,n),i!==null)?i/C5e(r):r.days&&(i=Ex(e,n),i!==null)?i/Tf(r):(n.valueOf()-e.valueOf())/Jg(r)}startOf(e,n){return n==="year"?this.startOfYear(e):n==="month"?this.startOfMonth(e):n==="week"?this.startOfWeek(e):n==="day"?In(e):n==="hour"?M5e(e):n==="minute"?R5e(e):n==="second"?L5e(e):null}startOfYear(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])}startOfMonth(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])}startOfWeek(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):z5e(e,this.weekDow,this.weekDoy)}format(e,n,r={}){return n.format({marker:e,timeZoneOffset:r.forcedTzo!=null?r.forcedTzo:this.offsetForMarker(e)},this)}formatRange(e,n,r,i={}){return i.isEndExclusive&&(n=ec(n,-1)),r.formatRange({marker:e,timeZoneOffset:i.forcedStartTzo!=null?i.forcedStartTzo:this.offsetForMarker(e)},{marker:n,timeZoneOffset:i.forcedEndTzo!=null?i.forcedEndTzo:this.offsetForMarker(n)},this,i.defaultSeparator)}formatIso(e,n={}){let r=null;return n.omitTimeZoneOffset||(n.forcedTzo!=null?r=n.forcedTzo:r=this.offsetForMarker(e)),F5e(e,r,n.omitTime)}timestampToMarker(e){return this.timeZone==="local"?$i(R3(new Date(e))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(e):$i(this.namedTimeZoneImpl.timestampToArray(e))}offsetForMarker(e){return this.timeZone==="local"?-L3(Pl(e)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(Pl(e)):null}toDate(e,n){return this.timeZone==="local"?L3(Pl(e)):this.timeZone==="UTC"?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-this.namedTimeZoneImpl.offsetForArray(Pl(e))*1e3*60):new Date(e.valueOf()-(n||0))}}class zv{constructor(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}setIconOverride(e){let n,r;if(typeof e=="object"&&e){n=Object.assign({},this.iconClasses);for(r in e)n[r]=this.applyIconOverridePrefix(e[r]);this.iconClasses=n}else e===!1&&(this.iconClasses={})}applyIconOverridePrefix(e){let n=this.iconOverridePrefix;return n&&e.indexOf(n)!==0&&(e=n+e),e}getClass(e){return this.classes[e]||""}getIconClass(e,n){let r;return n&&this.rtlIconClasses?r=this.rtlIconClasses[e]||this.iconClasses[e]:r=this.iconClasses[e],r?`${this.baseIconClass} ${r}`:""}getCustomButtonIconClass(e){let n;return this.iconOverrideCustomButtonOption&&(n=e[this.iconOverrideCustomButtonOption],n)?`${this.baseIconClass} ${this.applyIconOverridePrefix(n)}`:""}}zv.prototype.classes={};zv.prototype.iconClasses={};zv.prototype.baseIconClass="";zv.prototype.iconOverridePrefix="";function Nx(t){t();let e=ht.debounceRendering,n=[];function r(i){n.push(i)}for(ht.debounceRendering=r,Zg(xe(m3e,{}),document.createElement("div"));n.length;)n.shift()();ht.debounceRendering=e}class m3e extends us{render(){return xe("div",{})}componentDidMount(){this.setState({})}}function PW(t){let e=F4e(t),n=e.Provider;return e.Provider=function(){let r=!this.getChildContext,i=n.apply(this,arguments);if(r){let s=[];this.shouldComponentUpdate=a=>{this.props.value!==a.value&&s.forEach(o=>{o.context=a.value,o.forceUpdate()})},this.sub=a=>{s.push(a);let o=a.componentWillUnmount;a.componentWillUnmount=()=>{s.splice(s.indexOf(a),1),o&&o.call(a)}}}return i},e}class g3e{constructor(e,n,r,i){this.execFunc=e,this.emitter=n,this.scrollTime=r,this.scrollTimeReset=i,this.handleScrollRequest=s=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},s),this.drain()},n.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const fd=PW({});function v3e(t,e,n,r,i,s,a,o,c,u,d,f,h,p){return{dateEnv:i,nowManager:s,options:n,pluginHooks:o,emitter:d,dispatch:c,getCurrentData:u,calendarApi:f,viewSpec:t,viewApi:e,dateProfileGenerator:r,theme:a,isRtl:n.direction==="rtl",addResizeHandler(g){d.on("_resize",g)},removeResizeHandler(g){d.off("_resize",g)},createScrollResponder(g){return new g3e(g,d,Jt(n.scrollTime),n.scrollTimeReset)},registerInteractiveComponent:h,unregisterInteractiveComponent:p}}class hd extends us{shouldComponentUpdate(e,n){return!MS(this.props,e,this.propEquality)||!MS(this.state,n,this.stateEquality)}safeSetState(e){MS(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}hd.addPropsEquality=y3e;hd.addStateEquality=b3e;hd.contextType=fd;hd.prototype.propEquality={};hd.prototype.stateEquality={};class Vn extends hd{}Vn.contextType=fd;function y3e(t){let e=Object.create(this.prototype.propEquality);Object.assign(e,t),this.prototype.propEquality=e}function b3e(t){let e=Object.create(this.prototype.stateEquality);Object.assign(e,t),this.prototype.stateEquality=e}function Xa(t,e){typeof t=="function"?t(e):t&&(t.current=e)}class DP extends Vn{constructor(){super(...arguments),this.id=ud(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=e=>{const{options:n}=this.context,{generatorName:r}=this.props;(!n.customRenderingReplaces||!dj(r,n))&&this.updateElRef(e)},this.updateElRef=e=>{this.props.elRef&&Xa(this.props.elRef,e)}}render(){const{props:e,context:n}=this,{options:r}=n,{customGenerator:i,defaultGenerator:s,renderProps:a}=e,o=kW(e,[],this.handleEl);let c=!1,u,d=[],f;if(i!=null){const h=typeof i=="function"?i(a,xe):i;if(h===!0)c=!0;else{const p=h&&typeof h=="object";p&&"html"in h?o.dangerouslySetInnerHTML={__html:h.html}:p&&"domNodes"in h?d=Array.prototype.slice.call(h.domNodes):(p?tW(h):typeof h!="function")?u=h:f=h}}else c=!dj(e.generatorName,r);return c&&s&&(u=s(a)),this.queuedDomNodes=d,this.currentGeneratorMeta=f,xe(e.elTag,o,u)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(e){var n;const{props:r,context:i}=this,{handleCustomRendering:s,customRenderingMetaMap:a}=i.options;if(s){const o=(n=this.currentGeneratorMeta)!==null&&n!==void 0?n:a==null?void 0:a[r.generatorName];o&&s(Object.assign(Object.assign({id:this.id,isActive:e,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:o},r),{elClasses:(r.elClasses||[]).filter(x3e)}))}}applyQueueudDomNodes(){const{queuedDomNodes:e,currentDomNodes:n}=this,r=this.base;if(!Jl(e,n)){n.forEach(AP);for(let i of e)r.appendChild(i);this.currentDomNodes=e}}}DP.addPropsEquality({elClasses:Jl,elStyle:ga,elAttrs:s3e,renderProps:ga});function dj(t,e){var n;return!!(e.handleCustomRendering&&t&&(!((n=e.customRenderingMetaMap)===null||n===void 0)&&n[t]))}function kW(t,e,n){const r=Object.assign(Object.assign({},t.elAttrs),{ref:n});return(t.elClasses||e)&&(r.className=(t.elClasses||[]).concat(e||[]).concat(r.className||[]).filter(Boolean).join(" ")),t.elStyle&&(r.style=t.elStyle),r}function x3e(t){return!!t}const DW=PW(0);class Yo extends us{constructor(){super(...arguments),this.InnerContent=w3e.bind(void 0,this),this.handleEl=e=>{this.el=e,this.props.elRef&&(Xa(this.props.elRef,e),e&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:e}=this,n=_3e(e.classNameGenerator,e.renderProps);if(e.children){const r=kW(e,n,this.handleEl),i=e.children(this.InnerContent,e.renderProps,r);return e.elTag?xe(e.elTag,r,i):i}else return xe(DP,Object.assign(Object.assign({},e),{elRef:this.handleEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(n),renderId:this.context}))}componentDidMount(){var e,n;this.el?(n=(e=this.props).didMount)===null||n===void 0||n.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var e,n;(n=(e=this.props).willUnmount)===null||n===void 0||n.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}Yo.contextType=DW;function w3e(t,e){const n=t.props;return xe(DP,Object.assign({renderProps:n.renderProps,generatorName:n.generatorName,customGenerator:n.customGenerator,defaultGenerator:n.defaultGenerator,renderId:t.context},e))}function _3e(t,e){const n=typeof t=="function"?t(e):t||[];return typeof n=="string"?[n]:n}class U3 extends Vn{render(){let{props:e,context:n}=this,{options:r}=n,i={view:n.viewApi};return xe(Yo,{elRef:e.elRef,elTag:e.elTag||"div",elAttrs:e.elAttrs,elClasses:[...IW(e.viewSpec),...e.elClasses||[]],elStyle:e.elStyle,renderProps:i,classNameGenerator:r.viewClassNames,generatorName:void 0,didMount:r.viewDidMount,willUnmount:r.viewWillUnmount},()=>e.children)}}function IW(t){return[`fc-${t.type}-view`,"fc-view"]}function S3e(t,e){let n=null,r=null;return t.start&&(n=e.createMarker(t.start)),t.end&&(r=e.createMarker(t.end)),!n&&!r||n&&r&&r<n?null:{start:n,end:r}}function W3(t,e){let n=[],{start:r}=e,i,s;for(t.sort(A3e),i=0;i<t.length;i+=1)s=t[i],s.start>r&&n.push({start:r,end:s.start}),s.end>r&&(r=s.end);return r<e.end&&n.push({start:r,end:e.end}),n}function A3e(t,e){return t.start.valueOf()-e.start.valueOf()}function Th(t,e){let{start:n,end:r}=t,i=null;return e.start!==null&&(n===null?n=e.start:n=new Date(Math.max(n.valueOf(),e.start.valueOf()))),e.end!=null&&(r===null?r=e.end:r=new Date(Math.min(r.valueOf(),e.end.valueOf()))),(n===null||r===null||n<r)&&(i={start:n,end:r}),i}function E3e(t,e){return(t.start===null?null:t.start.valueOf())===(e.start===null?null:e.start.valueOf())&&(t.end===null?null:t.end.valueOf())===(e.end===null?null:e.end.valueOf())}function IP(t,e){return(t.end===null||e.start===null||t.end>e.start)&&(t.start===null||e.end===null||t.start<e.end)}function C1(t,e){return(t.start===null||e.start!==null&&e.start>=t.start)&&(t.end===null||e.end!==null&&e.end<=t.end)}function Wl(t,e){return(t.start===null||e>=t.start)&&(t.end===null||e<t.end)}function j3e(t,e){return e.start!=null&&t<e.start?e.start:e.end!=null&&t>=e.end?new Date(e.end.valueOf()-1):t}function OW(t){let e=Math.floor(rp(t.start,t.end))||1,n=In(t.start),r=Rr(n,e);return{start:n,end:r}}function MW(t,e=Jt(0)){let n=null,r=null;if(t.end){r=In(t.end);let i=t.end.valueOf()-r.valueOf();i&&i>=Jg(e)&&(r=Rr(r,1))}return t.start&&(n=In(t.start),r&&r<=n&&(r=Rr(n,1))),{start:n,end:r}}function hf(t,e,n,r){return r==="year"?Jt(n.diffWholeYears(t,e),"year"):r==="month"?Jt(n.diffWholeMonths(t,e),"month"):I5e(t,e)}class RW{constructor(e){this.props=e,this.initHiddenDays()}buildPrev(e,n,r){let{dateEnv:i}=this.props,s=i.subtract(i.startOf(n,e.currentRangeUnit),e.dateIncrement);return this.build(s,-1,r)}buildNext(e,n,r){let{dateEnv:i}=this.props,s=i.add(i.startOf(n,e.currentRangeUnit),e.dateIncrement);return this.build(s,1,r)}build(e,n,r=!0){let{props:i}=this,s,a,o,c,u,d;return s=this.buildValidRange(),s=this.trimHiddenDays(s),r&&(e=j3e(e,s)),a=this.buildCurrentRangeInfo(e,n),o=/^(year|month|week|day)$/.test(a.unit),c=this.buildRenderRange(this.trimHiddenDays(a.range),a.unit,o),c=this.trimHiddenDays(c),u=c,i.showNonCurrentDates||(u=Th(u,a.range)),u=this.adjustActiveRange(u),u=Th(u,s),d=IP(a.range,s),Wl(c,e)||(e=c.start),{currentDate:e,validRange:s,currentRange:a.range,currentRangeUnit:a.unit,isRangeAllDay:o,activeRange:u,renderRange:c,slotMinTime:i.slotMinTime,slotMaxTime:i.slotMaxTime,isValid:d,dateIncrement:this.buildDateIncrement(a.duration)}}buildValidRange(){let e=this.props.validRangeInput,n=typeof e=="function"?e.call(this.props.calendarApi,this.props.dateEnv.toDate(this.props.nowManager.getDateMarker())):e;return this.refineRange(n)||{start:null,end:null}}buildCurrentRangeInfo(e,n){let{props:r}=this,i=null,s=null,a=null,o;return r.duration?(i=r.duration,s=r.durationUnit,a=this.buildRangeFromDuration(e,n,i,s)):(o=this.props.dayCount)?(s="day",a=this.buildRangeFromDayCount(e,n,o)):(a=this.buildCustomVisibleRange(e))?s=r.dateEnv.greatestWholeUnit(a.start,a.end).unit:(i=this.getFallbackDuration(),s=uj(i).unit,a=this.buildRangeFromDuration(e,n,i,s)),{duration:i,unit:s,range:a}}getFallbackDuration(){return Jt({day:1})}adjustActiveRange(e){let{dateEnv:n,usesMinMaxTime:r,slotMinTime:i,slotMaxTime:s}=this.props,{start:a,end:o}=e;return r&&(Tf(i)<0&&(a=In(a),a=n.add(a,i)),Tf(s)>1&&(o=In(o),o=Rr(o,-1),o=n.add(o,s))),{start:a,end:o}}buildRangeFromDuration(e,n,r,i){let{dateEnv:s,dateAlignment:a}=this.props,o,c,u;if(!a){let{dateIncrement:f}=this.props;f&&Jg(f)<Jg(r)?a=uj(f).unit:a=i}Tf(r)<=1&&this.isHiddenDay(o)&&(o=this.skipHiddenDays(o,n),o=In(o));function d(){o=s.startOf(e,a),c=s.add(o,r),u={start:o,end:c}}return d(),this.trimHiddenDays(u)||(e=this.skipHiddenDays(e,n),d()),u}buildRangeFromDayCount(e,n,r){let{dateEnv:i,dateAlignment:s}=this.props,a=0,o=e,c;s&&(o=i.startOf(o,s)),o=In(o),o=this.skipHiddenDays(o,n),c=o;do c=Rr(c,1),this.isHiddenDay(c)||(a+=1);while(a<r);return{start:o,end:c}}buildCustomVisibleRange(e){let{props:n}=this,r=n.visibleRangeInput,i=typeof r=="function"?r.call(n.calendarApi,n.dateEnv.toDate(e)):r,s=this.refineRange(i);return s&&(s.start==null||s.end==null)?null:s}buildRenderRange(e,n,r){return e}buildDateIncrement(e){let{dateIncrement:n}=this.props,r;return n||((r=this.props.dateAlignment)?Jt(1,r):e||Jt({days:1}))}refineRange(e){if(e){let n=S3e(e,this.props.dateEnv);return n&&(n=MW(n)),n}return null}initHiddenDays(){let e=this.props.hiddenDays||[],n=[],r=0,i;for(this.props.weekends===!1&&e.push(0,6),i=0;i<7;i+=1)(n[i]=e.indexOf(i)!==-1)||(r+=1);if(!r)throw new Error("invalid hiddenDays");this.isHiddenDayHash=n}trimHiddenDays(e){let{start:n,end:r}=e;return n&&(n=this.skipHiddenDays(n)),r&&(r=this.skipHiddenDays(r,-1,!0)),n==null||r==null||n<r?{start:n,end:r}:null}isHiddenDay(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]}skipHiddenDays(e,n=1,r=!1){for(;this.isHiddenDayHash[(e.getUTCDay()+(r?n:0)+7)%7];)e=Rr(e,n);return e}}function OP(t,e,n,r){return{instanceId:ud(),defId:t,range:e,forcedStartTzo:n??null,forcedEndTzo:r??null}}function C3e(t,e,n,r){for(let i=0;i<r.length;i+=1){let s=r[i].parse(t,n);if(s){let{allDay:a}=t;return a==null&&(a=e,a==null&&(a=s.allDayGuess,a==null&&(a=!1))),{allDay:a,duration:s.duration,typeData:s.typeData,typeId:i}}}return null}function qu(t,e,n){let{dateEnv:r,pluginHooks:i,options:s}=n,{defs:a,instances:o}=t;o=Ku(o,c=>!a[c.defId].recurringDef);for(let c in a){let u=a[c];if(u.recurringDef){let{duration:d}=u.recurringDef;d||(d=u.allDay?s.defaultAllDayEventDuration:s.defaultTimedEventDuration);let f=T3e(u,d,e,r,i.recurringTypes);for(let h of f){let p=OP(c,{start:h,end:r.add(h,d)});o[p.instanceId]=p}}}return{defs:a,instances:o}}function T3e(t,e,n,r,i){let a=i[t.recurringDef.typeId].expand(t.recurringDef.typeData,{start:r.subtract(n.start,e),end:n.end},r);return t.allDay&&(a=a.map(In)),a}const x0={id:String,groupId:String,title:String,url:String,interactive:Boolean},LW={start:ge,end:ge,date:ge,allDay:Boolean},N3e=Object.assign(Object.assign(Object.assign({},x0),LW),{extendedProps:ge});function zW(t,e,n,r,i=MP(n),s,a){let{refined:o,extra:c}=$W(t,n,i),u=k3e(e,n),d=C3e(o,u,n.dateEnv,n.pluginHooks.recurringTypes);if(d){let h=fj(o,c,e?e.sourceId:"",d.allDay,!!d.duration,n,s);return h.recurringDef={typeId:d.typeId,typeData:d.typeData,duration:d.duration},{def:h,instance:null}}let f=P3e(o,u,n,r);if(f){let h=fj(o,c,e?e.sourceId:"",f.allDay,f.hasEnd,n,s),p=OP(h.defId,f.range,f.forcedStartTzo,f.forcedEndTzo);return a&&h.publicId&&a[h.publicId]&&(p.instanceId=a[h.publicId]),{def:h,instance:p}}return null}function $W(t,e,n=MP(e)){return NP(t,n)}function MP(t){return Object.assign(Object.assign(Object.assign({},Px),N3e),t.pluginHooks.eventRefiners)}function fj(t,e,n,r,i,s,a){let o={title:t.title||"",groupId:t.groupId||"",publicId:t.id||"",url:t.url||"",recurringDef:null,defId:(a&&t.id?a[t.id]:"")||ud(),sourceId:n,allDay:r,hasEnd:i,interactive:t.interactive,ui:kx(t,s),extendedProps:Object.assign(Object.assign({},t.extendedProps||{}),e)};for(let c of s.pluginHooks.eventDefMemberAdders)Object.assign(o,c(t));return Object.freeze(o.ui.classNames),Object.freeze(o.extendedProps),o}function P3e(t,e,n,r){let{allDay:i}=t,s,a=null,o=!1,c,u=null,d=t.start!=null?t.start:t.date;if(s=n.dateEnv.createMarkerMeta(d),s)a=s.marker;else if(!r)return null;return t.end!=null&&(c=n.dateEnv.createMarkerMeta(t.end)),i==null&&(e!=null?i=e:i=(!s||s.isTimeUnspecified)&&(!c||c.isTimeUnspecified)),i&&a&&(a=In(a)),c&&(u=c.marker,i&&(u=In(u)),a&&u<=a&&(u=null)),u?o=!0:r||(o=n.options.forceEventDuration||!1,u=n.dateEnv.add(a,i?n.options.defaultAllDayEventDuration:n.options.defaultTimedEventDuration)),{allDay:i,hasEnd:o,range:{start:a,end:u},forcedStartTzo:s?s.forcedTzo:null,forcedEndTzo:c?c.forcedTzo:null}}function k3e(t,e){let n=null;return t&&(n=t.defaultAllDay),n==null&&(n=e.options.defaultAllDay),n}function ev(t,e,n,r,i,s){let a=oa(),o=MP(n);for(let c of t){let u=zW(c,e,n,r,o,i,s);u&&hj(u,a)}return a}function hj(t,e=oa()){return e.defs[t.def.defId]=t.def,t.instance&&(e.instances[t.instance.instanceId]=t.instance),e}function RP(t,e){let n=t.instances[e];if(n){let r=t.defs[n.defId],i=T1(t,s=>D3e(r,s));return i.defs[r.defId]=r,i.instances[n.instanceId]=n,i}return oa()}function D3e(t,e){return!!(t.groupId&&t.groupId===e.groupId)}function oa(){return{defs:{},instances:{}}}function LP(t,e){return{defs:Object.assign(Object.assign({},t.defs),e.defs),instances:Object.assign(Object.assign({},t.instances),e.instances)}}function T1(t,e){let n=Ku(t.defs,e),r=Ku(t.instances,i=>n[i.defId]);return{defs:n,instances:r}}function I3e(t,e){let{defs:n,instances:r}=t,i={},s={};for(let a in n)e.defs[a]||(i[a]=n[a]);for(let a in r)!e.instances[a]&&i[r[a].defId]&&(s[a]=r[a]);return{defs:i,instances:s}}function O3e(t,e){return Array.isArray(t)?ev(t,null,e,!0):typeof t=="object"&&t?ev([t],null,e,!0):t!=null?String(t):null}function H3(t){return Array.isArray(t)?t:typeof t=="string"?t.split(/\s+/):[]}const Px={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:ge,overlap:ge,allow:ge,className:H3,classNames:H3,color:String,backgroundColor:String,borderColor:String,textColor:String},M3e={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function kx(t,e){let n=O3e(t.constraint,e);return{display:t.display||null,startEditable:t.startEditable!=null?t.startEditable:t.editable,durationEditable:t.durationEditable!=null?t.durationEditable:t.editable,constraints:n!=null?[n]:[],overlap:t.overlap!=null?t.overlap:null,allows:t.allow!=null?[t.allow]:[],backgroundColor:t.backgroundColor||t.color||"",borderColor:t.borderColor||t.color||"",textColor:t.textColor||"",classNames:(t.className||[]).concat(t.classNames||[])}}function R3e(t){return t.reduce(L3e,M3e)}function L3e(t,e){return{display:e.display!=null?e.display:t.display,startEditable:e.startEditable!=null?e.startEditable:t.startEditable,durationEditable:e.durationEditable!=null?e.durationEditable:t.durationEditable,constraints:t.constraints.concat(e.constraints),overlap:typeof e.overlap=="boolean"?e.overlap:t.overlap,allows:t.allows.concat(e.allows),backgroundColor:e.backgroundColor||t.backgroundColor,borderColor:e.borderColor||t.borderColor,textColor:e.textColor||t.textColor,classNames:t.classNames.concat(e.classNames)}}const z3e={id:String,defaultAllDay:Boolean,url:String,format:String,events:ge,eventDataTransform:ge,success:ge,failure:ge};function FW(t,e,n=VW(e)){let r;if(typeof t=="string"?r={url:t}:typeof t=="function"||Array.isArray(t)?r={events:t}:typeof t=="object"&&t&&(r=t),r){let{refined:i,extra:s}=NP(r,n),a=$3e(i,e);if(a)return{_raw:t,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:i.defaultAllDay,eventDataTransform:i.eventDataTransform,success:i.success,failure:i.failure,publicId:i.id||"",sourceId:ud(),sourceDefId:a.sourceDefId,meta:a.meta,ui:kx(i,e),extendedProps:s}}return null}function VW(t){return Object.assign(Object.assign(Object.assign({},Px),z3e),t.pluginHooks.eventSourceRefiners)}function $3e(t,e){let n=e.pluginHooks.eventSourceDefs;for(let r=n.length-1;r>=0;r-=1){let s=n[r].parseMeta(t);if(s)return{sourceDefId:r,meta:s}}return null}function F3e(t,e,n,r,i){switch(e.type){case"RECEIVE_EVENTS":return V3e(t,n[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,i);case"RESET_RAW_EVENTS":return B3e(t,n[e.sourceId],e.rawEvents,r.activeRange,i);case"ADD_EVENTS":return U3e(t,e.eventStore,r?r.activeRange:null,i);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return LP(t,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return r?qu(t,r.activeRange,i):t;case"REMOVE_EVENTS":return I3e(t,e.eventStore);case"REMOVE_EVENT_SOURCE":return UW(t,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return T1(t,s=>!s.sourceId);case"REMOVE_ALL_EVENTS":return oa();default:return t}}function V3e(t,e,n,r,i,s){if(e&&n===e.latestFetchId){let a=ev(BW(i,e,s),e,s);return r&&(a=qu(a,r,s)),LP(UW(t,e.sourceId),a)}return t}function B3e(t,e,n,r,i){const{defIdMap:s,instanceIdMap:a}=H3e(t);let o=ev(BW(n,e,i),e,i,!1,s,a);return qu(o,r,i)}function BW(t,e,n){let r=n.options.eventDataTransform,i=e?e.eventDataTransform:null;return i&&(t=K3(t,i)),r&&(t=K3(t,r)),t}function K3(t,e){let n;if(!e)n=t;else{n=[];for(let r of t){let i=e(r);i?n.push(i):i==null&&n.push(r)}}return n}function U3e(t,e,n,r){return n&&(e=qu(e,n,r)),LP(t,e)}function q3(t,e,n){let{defs:r}=t,i=dd(t.instances,s=>r[s.defId].allDay?s:Object.assign(Object.assign({},s),{range:{start:n.createMarker(e.toDate(s.range.start,s.forcedStartTzo)),end:n.createMarker(e.toDate(s.range.end,s.forcedEndTzo))},forcedStartTzo:n.canComputeOffset?null:s.forcedStartTzo,forcedEndTzo:n.canComputeOffset?null:s.forcedEndTzo}));return{defs:r,instances:i}}function UW(t,e){return T1(t,n=>n.sourceId!==e)}function W3e(t,e){return{defs:t.defs,instances:Ku(t.instances,n=>!e[n.instanceId])}}function H3e(t){const{defs:e,instances:n}=t,r={},i={};for(let s in e){const a=e[s],{publicId:o}=a;o&&(r[o]=s)}for(let s in n){const a=n[s],o=e[a.defId],{publicId:c}=o;c&&(i[c]=s)}return{defIdMap:r,instanceIdMap:i}}class N1{constructor(){this.handlers={},this.thisContext=null}setThisContext(e){this.thisContext=e}setOptions(e){this.options=e}on(e,n){K3e(this.handlers,e,n)}off(e,n){q3e(this.handlers,e,n)}trigger(e,...n){let r=this.handlers[e]||[],i=this.options&&this.options[e],s=[].concat(i||[],r);for(let a of s)a.apply(this.thisContext,n)}hasHandlers(e){return!!(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])}}function K3e(t,e,n){(t[e]||(t[e]=[])).push(n)}function q3e(t,e,n){n?t[e]&&(t[e]=t[e].filter(r=>r!==n)):delete t[e]}const G3e={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function Y3e(t,e){return ev(Q3e(t),null,e)}function Q3e(t){let e;return t===!0?e=[{}]:Array.isArray(t)?e=t.filter(n=>n.daysOfWeek):typeof t=="object"&&t?e=[t]:e=[],e=e.map(n=>Object.assign(Object.assign({},G3e),n)),e}function WW(t,e,n){n.emitter.trigger("select",Object.assign(Object.assign({},zP(t,n)),{jsEvent:e?e.origEvent:null,view:n.viewApi||n.calendarApi.view}))}function X3e(t,e){e.emitter.trigger("unselect",{jsEvent:t?t.origEvent:null,view:e.viewApi||e.calendarApi.view})}function zP(t,e){let n={};for(let r of e.pluginHooks.dateSpanTransforms)Object.assign(n,r(t,e));return Object.assign(n,fLe(t,e.dateEnv)),n}function G3(t,e,n){let{dateEnv:r,options:i}=n,s=e;return t?(s=In(s),s=r.add(s,i.defaultAllDayEventDuration)):s=r.add(s,i.defaultTimedEventDuration),s}function $P(t,e,n,r){let i=Dx(t.defs,e),s=oa();for(let a in t.defs){let o=t.defs[a];s.defs[a]=Z3e(o,i[a],n,r)}for(let a in t.instances){let o=t.instances[a],c=s.defs[o.defId];s.instances[a]=J3e(o,c,i[o.defId],n,r)}return s}function Z3e(t,e,n,r){let i=n.standardProps||{};i.hasEnd==null&&e.durationEditable&&(n.startDelta||n.endDelta)&&(i.hasEnd=!0);let s=Object.assign(Object.assign(Object.assign({},t),i),{ui:Object.assign(Object.assign({},t.ui),i.ui)});n.extendedProps&&(s.extendedProps=Object.assign(Object.assign({},s.extendedProps),n.extendedProps));for(let a of r.pluginHooks.eventDefMutationAppliers)a(s,n,r);return!s.hasEnd&&r.options.forceEventDuration&&(s.hasEnd=!0),s}function J3e(t,e,n,r,i){let{dateEnv:s}=i,a=r.standardProps&&r.standardProps.allDay===!0,o=r.standardProps&&r.standardProps.hasEnd===!1,c=Object.assign({},t);return a&&(c.range=OW(c.range)),r.datesDelta&&n.startEditable&&(c.range={start:s.add(c.range.start,r.datesDelta),end:s.add(c.range.end,r.datesDelta)}),r.startDelta&&n.durationEditable&&(c.range={start:s.add(c.range.start,r.startDelta),end:c.range.end}),r.endDelta&&n.durationEditable&&(c.range={start:c.range.start,end:s.add(c.range.end,r.endDelta)}),o&&(c.range={start:c.range.start,end:G3(e.allDay,c.range.start,i)}),e.allDay&&(c.range={start:In(c.range.start),end:In(c.range.end)}),c.range.end<c.range.start&&(c.range.end=G3(e.allDay,c.range.start,i)),c}class Vd{constructor(e,n){this.context=e,this.internalEventSource=n}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class On{constructor(e,n,r){this._context=e,this._def=n,this._instance=r||null}setProp(e,n){if(e in LW)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(e==="id")n=x0[e](n),this.mutate({standardProps:{publicId:n}});else if(e in x0)n=x0[e](n),this.mutate({standardProps:{[e]:n}});else if(e in Px){let r=Px[e](n);e==="color"?r={backgroundColor:n,borderColor:n}:e==="editable"?r={startEditable:n,durationEditable:n}:r={[e]:n},this.mutate({standardProps:{ui:r}})}else console.warn(`Could not set prop '${e}'. Use setExtendedProp instead.`)}setExtendedProp(e,n){this.mutate({extendedProps:{[e]:n}})}setStart(e,n={}){let{dateEnv:r}=this._context,i=r.createMarker(e);if(i&&this._instance){let s=this._instance.range,a=hf(s.start,i,r,n.granularity);n.maintainDuration?this.mutate({datesDelta:a}):this.mutate({startDelta:a})}}setEnd(e,n={}){let{dateEnv:r}=this._context,i;if(!(e!=null&&(i=r.createMarker(e),!i))&&this._instance)if(i){let s=hf(this._instance.range.end,i,r,n.granularity);this.mutate({endDelta:s})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(e,n,r={}){let{dateEnv:i}=this._context,s={allDay:r.allDay},a=i.createMarker(e),o;if(a&&!(n!=null&&(o=i.createMarker(n),!o))&&this._instance){let c=this._instance.range;r.allDay===!0&&(c=OW(c));let u=hf(c.start,a,i,r.granularity);if(o){let d=hf(c.end,o,i,r.granularity);A5e(u,d)?this.mutate({datesDelta:u,standardProps:s}):this.mutate({startDelta:u,endDelta:d,standardProps:s})}else s.hasEnd=!1,this.mutate({datesDelta:u,standardProps:s})}}moveStart(e){let n=Jt(e);n&&this.mutate({startDelta:n})}moveEnd(e){let n=Jt(e);n&&this.mutate({endDelta:n})}moveDates(e){let n=Jt(e);n&&this.mutate({datesDelta:n})}setAllDay(e,n={}){let r={allDay:e},{maintainDuration:i}=n;i==null&&(i=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(r.hasEnd=i),this.mutate({standardProps:r})}formatRange(e){let{dateEnv:n}=this._context,r=this._instance,i=Or(e);return this._def.hasEnd?n.formatRange(r.range.start,r.range.end,i,{forcedStartTzo:r.forcedStartTzo,forcedEndTzo:r.forcedEndTzo}):n.format(r.range.start,i,{forcedTzo:r.forcedStartTzo})}mutate(e){let n=this._instance;if(n){let r=this._def,i=this._context,{eventStore:s}=i.getCurrentData(),a=RP(s,n.instanceId);a=$P(a,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,i);let c=new On(i,r,n);this._def=a.defs[r.defId],this._instance=a.instances[n.instanceId],i.dispatch({type:"MERGE_EVENTS",eventStore:a}),i.emitter.trigger("eventChange",{oldEvent:c,event:this,relatedEvents:Su(a,i,n),revert(){i.dispatch({type:"RESET_EVENTS",eventStore:s})}})}}remove(){let e=this._context,n=HW(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:n}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){e.dispatch({type:"MERGE_EVENTS",eventStore:n})}})}get source(){let{sourceId:e}=this._def;return e?new Vd(this._context,this._context.getCurrentData().eventSources[e]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""}get endStr(){let e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(e={}){let n=this._def,{ui:r}=n,{startStr:i,endStr:s}=this,a={allDay:n.allDay};return n.title&&(a.title=n.title),i&&(a.start=i),s&&(a.end=s),n.publicId&&(a.id=n.publicId),n.groupId&&(a.groupId=n.groupId),n.url&&(a.url=n.url),r.display&&r.display!=="auto"&&(a.display=r.display),e.collapseColor&&r.backgroundColor&&r.backgroundColor===r.borderColor?a.color=r.backgroundColor:(r.backgroundColor&&(a.backgroundColor=r.backgroundColor),r.borderColor&&(a.borderColor=r.borderColor)),r.textColor&&(a.textColor=r.textColor),r.classNames.length&&(a.classNames=r.classNames),Object.keys(n.extendedProps).length&&(e.collapseExtendedProps?Object.assign(a,n.extendedProps):a.extendedProps=n.extendedProps),a}toJSON(){return this.toPlainObject()}}function HW(t){let e=t._def,n=t._instance;return{defs:{[e.defId]:e},instances:n?{[n.instanceId]:n}:{}}}function Su(t,e,n){let{defs:r,instances:i}=t,s=[],a=n?n.instanceId:"";for(let o in i){let c=i[o],u=r[c.defId];c.instanceId!==a&&s.push(new On(e,u,c))}return s}function Y3(t,e,n,r){let i={},s={},a={},o=[],c=[],u=Dx(t.defs,e);for(let d in t.defs){let f=t.defs[d];u[f.defId].display==="inverse-background"&&(f.groupId?(i[f.groupId]=[],a[f.groupId]||(a[f.groupId]=f)):s[d]=[])}for(let d in t.instances){let f=t.instances[d],h=t.defs[f.defId],p=u[h.defId],g=f.range,m=!h.allDay&&r?MW(g,r):g,y=Th(m,n);y&&(p.display==="inverse-background"?h.groupId?i[h.groupId].push(y):s[f.defId].push(y):p.display!=="none"&&(p.display==="background"?o:c).push({def:h,ui:p,instance:f,range:y,isStart:m.start&&m.start.valueOf()===y.start.valueOf(),isEnd:m.end&&m.end.valueOf()===y.end.valueOf()}))}for(let d in i){let f=i[d],h=W3(f,n);for(let p of h){let g=a[d],m=u[g.defId];o.push({def:g,ui:m,instance:null,range:p,isStart:!1,isEnd:!1})}}for(let d in s){let f=s[d],h=W3(f,n);for(let p of h)o.push({def:t.defs[d],ui:u[d],instance:null,range:p,isStart:!1,isEnd:!1})}return{bg:o,fg:c}}function Q3(t,e){t.fcSeg=e}function Nh(t){return t.fcSeg||t.parentNode.fcSeg||null}function Dx(t,e){return dd(t,n=>KW(n,e))}function KW(t,e){let n=[];return e[""]&&n.push(e[""]),e[t.defId]&&n.push(e[t.defId]),n.push(t.ui),R3e(n)}function eLe(t,e){let n=t.map(tLe);return n.sort((r,i)=>v5e(r,i,e)),n.map(r=>r._seg)}function tLe(t){let{eventRange:e}=t,n=e.def,r=e.instance?e.instance.range:e.range,i=r.start?r.start.valueOf():0,s=r.end?r.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},n.extendedProps),n),{id:n.publicId,start:i,end:s,duration:s-i,allDay:Number(n.allDay),_seg:t})}function nLe(t,e){let{pluginHooks:n}=e,r=n.isDraggableTransformers,{def:i,ui:s}=t.eventRange,a=s.startEditable;for(let o of r)a=o(a,i,s,e);return a}function rLe(t,e){return t.isStart&&t.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function iLe(t,e){return t.isEnd&&t.eventRange.ui.durationEditable}function qW(t,e,n,r,i,s,a){let{dateEnv:o,options:c}=n,{displayEventTime:u,displayEventEnd:d}=c,f=t.eventRange.def,h=t.eventRange.instance;u==null&&(u=r!==!1),d==null&&(d=i!==!1);let p=h.range.start,g=h.range.end,m=t.start||t.eventRange.range.start,y=t.end||t.eventRange.range.end,x=In(p).valueOf()===In(m).valueOf(),w=In(ec(g,-1)).valueOf()===In(ec(y,-1)).valueOf();return u&&!f.allDay&&(x||w)?(m=x?p:m,y=w?g:y,d&&f.hasEnd?o.formatRange(m,y,e,{forcedStartTzo:h.forcedStartTzo,forcedEndTzo:h.forcedEndTzo}):o.format(m,e,{forcedTzo:h.forcedStartTzo})):""}function Dm(t,e,n){let r=t.eventRange.range;return{isPast:r.end<=e.start,isFuture:r.start>=e.end,isToday:e&&Wl(e,r.start)}}function sLe(t){let e=["fc-event"];return t.isMirror&&e.push("fc-event-mirror"),t.isDraggable&&e.push("fc-event-draggable"),(t.isStartResizable||t.isEndResizable)&&e.push("fc-event-resizable"),t.isDragging&&e.push("fc-event-dragging"),t.isResizing&&e.push("fc-event-resizing"),t.isSelected&&e.push("fc-event-selected"),t.isStart&&e.push("fc-event-start"),t.isEnd&&e.push("fc-event-end"),t.isPast&&e.push("fc-event-past"),t.isToday&&e.push("fc-event-today"),t.isFuture&&e.push("fc-event-future"),e}function aLe(t){return t.instance?t.instance.instanceId:`${t.def.defId}:${t.range.start.toISOString()}`}function GW(t,e){let{def:n,instance:r}=t.eventRange,{url:i}=n;if(i)return{href:i};let{emitter:s,options:a}=e,{eventInteractive:o}=a;return o==null&&(o=n.interactive,o==null&&(o=!!s.hasHandlers("eventClick"))),o?jW(c=>{s.trigger("eventClick",{el:c.target,event:new On(e,n,r),jsEvent:c,view:e.viewApi})}):{}}const oLe={start:ge,end:ge,allDay:Boolean};function lLe(t,e,n){let r=cLe(t,e),{range:i}=r;if(!i.start)return null;if(!i.end){if(n==null)return null;i.end=e.add(i.start,n)}return r}function cLe(t,e){let{refined:n,extra:r}=NP(t,oLe),i=n.start?e.createMarkerMeta(n.start):null,s=n.end?e.createMarkerMeta(n.end):null,{allDay:a}=n;return a==null&&(a=i&&i.isTimeUnspecified&&(!s||s.isTimeUnspecified)),Object.assign({range:{start:i?i.marker:null,end:s?s.marker:null},allDay:a},r)}function uLe(t,e){return E3e(t.range,e.range)&&t.allDay===e.allDay&&dLe(t,e)}function dLe(t,e){for(let n in e)if(n!=="range"&&n!=="allDay"&&t[n]!==e[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}function fLe(t,e){return Object.assign(Object.assign({},QW(t.range,e,t.allDay)),{allDay:t.allDay})}function YW(t,e,n){return Object.assign(Object.assign({},QW(t,e,n)),{timeZone:e.timeZone})}function QW(t,e,n){return{start:e.toDate(t.start),end:e.toDate(t.end),startStr:e.formatIso(t.start,{omitTime:n}),endStr:e.formatIso(t.end,{omitTime:n})}}function hLe(t,e,n){let r=$W({editable:!1},n),i=fj(r.refined,r.extra,"",t.allDay,!0,n);return{def:i,ui:KW(i,e),instance:OP(i.defId,t.range),range:t.range,isStart:!0,isEnd:!0}}function pLe(t,e,n){let r=!1,i=function(o){r||(r=!0,e(o))},s=function(o){r||(r=!0,n(o))},a=t(i,s);a&&typeof a.then=="function"&&a.then(i,s)}class X3 extends Error{constructor(e,n){super(e),this.response=n}}function mLe(t,e,n){t=t.toUpperCase();const r={method:t};return t==="GET"?e+=(e.indexOf("?")===-1?"?":"&")+new URLSearchParams(n):(r.body=new URLSearchParams(n),r.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(e,r).then(i=>{if(i.ok)return i.json().then(s=>[s,i],()=>{throw new X3("Failure parsing JSON",i)});throw new X3("Request failed",i)})}let RS;function XW(){return RS==null&&(RS=gLe()),RS}function gLe(){if(typeof document>"u")return!0;let t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.innerHTML="<table><tr><td><div></div></td></tr></table>",t.querySelector("table").style.height="100px",t.querySelector("div").style.height="100%",document.body.appendChild(t);let n=t.querySelector("div").offsetHeight>0;return document.body.removeChild(t),n}class vLe extends Vn{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{Nx(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{Nx(()=>{this.setState({forPrint:!1})})}}render(){let{props:e}=this,{options:n}=e,{forPrint:r}=this.state,i=r||n.height==="auto"||n.contentHeight==="auto",s=!i&&n.height!=null?n.height:"",a=["fc",r?"fc-media-print":"fc-media-screen",`fc-direction-${n.direction}`,e.theme.getClass("root")];return XW()||a.push("fc-liquid-hack"),e.children(a,s,i,r)}componentDidMount(){let{emitter:e}=this.props;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:e}=this.props;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)}}class ip{constructor(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}destroy(){}}function yLe(t,e){return{component:t,el:e.el,useEventCenter:e.useEventCenter!=null?e.useEventCenter:!0,isHitComboAllowed:e.isHitComboAllowed||null}}function FP(t){return{[t.component.uid]:t}}const pj={};class P1 extends us{constructor(e,n){super(e,n),this.handleRefresh=()=>{let r=this.computeTiming();r.state.nowDate.valueOf()!==this.state.nowDate.valueOf()&&this.setState(r.state),this.clearTimeout(),this.setTimeout(r.waitMs)},this.handleVisibilityChange=()=>{document.hidden||this.handleRefresh()},this.state=this.computeTiming().state}render(){let{props:e,state:n}=this;return e.children(n.nowDate,n.todayRange)}componentDidMount(){this.setTimeout(),this.context.nowManager.addResetListener(this.handleRefresh),document.addEventListener("visibilitychange",this.handleVisibilityChange)}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout(),this.context.nowManager.removeResetListener(this.handleRefresh),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}computeTiming(){let{props:e,context:n}=this,r=n.nowManager.getDateMarker(),{nowIndicatorSnap:i}=n.options;i==="auto"&&(i=/year|month|week|day/.test(e.unit)||(e.unitValue||1)===1);let s,a;return i?(s=n.dateEnv.startOf(r,e.unit),a=n.dateEnv.add(s,Jt(1,e.unit)).valueOf()-r.valueOf()):(s=r,a=1e3*60),a=Math.min(1e3*60*60*24,a),{state:{nowDate:s,todayRange:bLe(s)},waitMs:a}}setTimeout(e=this.computeTiming().waitMs){this.timeoutId=setTimeout(()=>{const n=this.computeTiming();this.setState(n.state,()=>{this.setTimeout(n.waitMs)})},e)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}P1.contextType=fd;function bLe(t){let e=In(t),n=Rr(e,1);return{start:e,end:n}}class xLe{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(e){this.currentDataManager.dispatch(e)}get view(){return this.getCurrentData().viewApi}batchRendering(e){e()}updateSize(){this.trigger("_resize",!0)}setOption(e,n){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:n})}getOption(e){return this.currentDataManager.currentCalendarOptionsInput[e]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(e,n){let{currentDataManager:r}=this;r.currentCalendarOptionsRefiners[e]?r.emitter.on(e,n):console.warn(`Unknown listener name '${e}'`)}off(e,n){this.currentDataManager.emitter.off(e,n)}trigger(e,...n){this.currentDataManager.emitter.trigger(e,...n)}changeView(e,n){this.batchRendering(()=>{if(this.unselect(),n)if(n.start&&n.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:n});else{let{dateEnv:r}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:r.createMarker(n)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})})}zoomTo(e,n){let r=this.getCurrentData(),i;n=n||"day",i=r.viewSpecs[n]||this.getUnitViewSpec(n),this.unselect(),i?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:i.type,dateMarker:e}):this.dispatch({type:"CHANGE_DATE",dateMarker:e})}getUnitViewSpec(e){let{viewSpecs:n,toolbarConfig:r}=this.getCurrentData(),i=[].concat(r.header?r.header.viewsWithButtons:[],r.footer?r.footer.viewsWithButtons:[]),s,a;for(let o in n)i.push(o);for(s=0;s<i.length;s+=1)if(a=n[i[s]],a&&a.singleUnit===e)return a;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})}nextYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})}today(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.nowManager.getDateMarker()})}gotoDate(e){let n=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.createMarker(e)})}incrementDate(e){let n=this.getCurrentData(),r=Jt(e);r&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.add(n.currentDate,r)}))}getDate(){let e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)}formatDate(e,n){let{dateEnv:r}=this.getCurrentData();return r.format(r.createMarker(e),Or(n))}formatRange(e,n,r){let{dateEnv:i}=this.getCurrentData();return i.formatRange(i.createMarker(e),i.createMarker(n),Or(r),r)}formatIso(e,n){let{dateEnv:r}=this.getCurrentData();return r.formatIso(r.createMarker(e),{omitTime:n})}select(e,n){let r;n==null?e.start!=null?r=e:r={start:e,end:null}:r={start:e,end:n};let i=this.getCurrentData(),s=lLe(r,i.dateEnv,Jt({days:1}));s&&(this.dispatch({type:"SELECT_DATES",selection:s}),WW(s,null,i))}unselect(e){let n=this.getCurrentData();n.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),X3e(e,n))}addEvent(e,n){if(e instanceof On){let a=e._def,o=e._instance;return this.getCurrentData().eventStore.defs[a.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:hj({def:a,instance:o})}),this.triggerEventAdd(e)),e}let r=this.getCurrentData(),i;if(n instanceof Vd)i=n.internalEventSource;else if(typeof n=="boolean")n&&([i]=kP(r.eventSources));else if(n!=null){let a=this.getEventSourceById(n);if(!a)return console.warn(`Could not find an event source with ID "${n}"`),null;i=a.internalEventSource}let s=zW(e,i,r,!1);if(s){let a=new On(r,s.def,s.def.recurringDef?null:s.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:hj(s)}),this.triggerEventAdd(a),a}return null}triggerEventAdd(e){let{emitter:n}=this.getCurrentData();n.trigger("eventAdd",{event:e,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:HW(e)})}})}getEventById(e){let n=this.getCurrentData(),{defs:r,instances:i}=n.eventStore;e=String(e);for(let s in r){let a=r[s];if(a.publicId===e){if(a.recurringDef)return new On(n,a,null);for(let o in i){let c=i[o];if(c.defId===a.defId)return new On(n,a,c)}}}return null}getEvents(){let e=this.getCurrentData();return Su(e.eventStore,e)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let e=this.getCurrentData(),n=e.eventSources,r=[];for(let i in n)r.push(new Vd(e,n[i]));return r}getEventSourceById(e){let n=this.getCurrentData(),r=n.eventSources;e=String(e);for(let i in r)if(r[i].publicId===e)return new Vd(n,r[i]);return null}addEventSource(e){let n=this.getCurrentData();if(e instanceof Vd)return n.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;let r=FW(e,n);return r?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[r]}),new Vd(n,r)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(e){let n=Jt(e);n&&this.trigger("_scrollRequest",{time:n})}}function wLe(t,e){return t.left>=e.left&&t.left<e.right&&t.top>=e.top&&t.top<e.bottom}function ZW(t,e){let n={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)};return n.left<n.right&&n.top<n.bottom?n:!1}function _Le(t,e){return{left:Math.min(Math.max(t.left,e.left),e.right),top:Math.min(Math.max(t.top,e.top),e.bottom)}}function SLe(t){return{left:(t.left+t.right)/2,top:(t.top+t.bottom)/2}}function ALe(t,e){return{left:t.left-e.left,top:t.top-e.top}}function JW(t,e,n,r){return{dow:t.getUTCDay(),isDisabled:!!(r&&(!r.activeRange||!Wl(r.activeRange,t))),isOther:!!(r&&!Wl(r.currentRange,t)),isToday:!!(e&&Wl(e,t)),isPast:!!(e&&t<e.start),isFuture:!!(e&&t>=e.end)}}function VP(t,e){let n=["fc-day",`fc-day-${T5e[t.dow]}`];return t.isDisabled?n.push("fc-day-disabled"):(t.isToday&&(n.push("fc-day-today"),n.push(e.getClass("today"))),t.isPast&&n.push("fc-day-past"),t.isFuture&&n.push("fc-day-future"),t.isOther&&n.push("fc-day-other")),n}const ELe=Or({year:"numeric",month:"long",day:"numeric"}),jLe=Or({week:"long"});function mj(t,e,n="day",r=!0){const{dateEnv:i,options:s,calendarApi:a}=t;let o=i.format(e,n==="week"?jLe:ELe);if(s.navLinks){let c=i.toDate(e);const u=d=>{let f=n==="day"?s.navLinkDayClick:n==="week"?s.navLinkWeekClick:null;typeof f=="function"?f.call(a,i.toDate(e),d):(typeof f=="string"&&(n=f),a.zoomTo(e,n))};return Object.assign({title:Pm(s.navLinkHint,[o,c],o),"data-navlink":""},r?EW(u):{onClick:u})}return{"aria-label":o}}let LS=null;function CLe(){return LS===null&&(LS=TLe()),LS}function TLe(){let t=document.createElement("div");Nm(t,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),t.innerHTML="<div></div>",document.body.appendChild(t);let n=t.firstChild.getBoundingClientRect().left>t.getBoundingClientRect().left;return AP(t),n}let zS;function NLe(){return zS||(zS=PLe()),zS}function PLe(){let t=document.createElement("div");t.style.overflow="scroll",t.style.position="absolute",t.style.top="-9999px",t.style.left="-9999px",document.body.appendChild(t);let e=eH(t);return document.body.removeChild(t),e}function eH(t){return{x:t.offsetHeight-t.clientHeight,y:t.offsetWidth-t.clientWidth}}function kLe(t,e=!1){let n=window.getComputedStyle(t),r=parseInt(n.borderLeftWidth,10)||0,i=parseInt(n.borderRightWidth,10)||0,s=parseInt(n.borderTopWidth,10)||0,a=parseInt(n.borderBottomWidth,10)||0,o=eH(t),c=o.y-r-i,u=o.x-s-a,d={borderLeft:r,borderRight:i,borderTop:s,borderBottom:a,scrollbarBottom:u,scrollbarLeft:0,scrollbarRight:0};return CLe()&&n.direction==="rtl"?d.scrollbarLeft=c:d.scrollbarRight=c,e&&(d.paddingLeft=parseInt(n.paddingLeft,10)||0,d.paddingRight=parseInt(n.paddingRight,10)||0,d.paddingTop=parseInt(n.paddingTop,10)||0,d.paddingBottom=parseInt(n.paddingBottom,10)||0),d}function DLe(t,e=!1,n){let r=BP(t),i=kLe(t,e),s={left:r.left+i.borderLeft+i.scrollbarLeft,right:r.right-i.borderRight-i.scrollbarRight,top:r.top+i.borderTop,bottom:r.bottom-i.borderBottom-i.scrollbarBottom};return e&&(s.left+=i.paddingLeft,s.right-=i.paddingRight,s.top+=i.paddingTop,s.bottom-=i.paddingBottom),s}function BP(t){let e=t.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY,right:e.right+window.scrollX,bottom:e.bottom+window.scrollY}}function ILe(t){let e=tH(t),n=t.getBoundingClientRect();for(let r of e){let i=ZW(n,r.getBoundingClientRect());if(i)n=i;else return null}return n}function tH(t){let e=[];for(;t instanceof HTMLElement;){let n=window.getComputedStyle(t);if(n.position==="fixed")break;/(auto|scroll)/.test(n.overflow+n.overflowY+n.overflowX)&&e.push(t),t=t.parentNode}return e}class Ix{constructor(e,n,r,i){this.els=n;let s=this.originClientRect=e.getBoundingClientRect();r&&this.buildElHorizontals(s.left),i&&this.buildElVerticals(s.top)}buildElHorizontals(e){let n=[],r=[];for(let i of this.els){let s=i.getBoundingClientRect();n.push(s.left-e),r.push(s.right-e)}this.lefts=n,this.rights=r}buildElVerticals(e){let n=[],r=[];for(let i of this.els){let s=i.getBoundingClientRect();n.push(s.top-e),r.push(s.bottom-e)}this.tops=n,this.bottoms=r}leftToIndex(e){let{lefts:n,rights:r}=this,i=n.length,s;for(s=0;s<i;s+=1)if(e>=n[s]&&e<r[s])return s}topToIndex(e){let{tops:n,bottoms:r}=this,i=n.length,s;for(s=0;s<i;s+=1)if(e>=n[s]&&e<r[s])return s}getWidth(e){return this.rights[e]-this.lefts[e]}getHeight(e){return this.bottoms[e]-this.tops[e]}similarTo(e){return Vy(this.tops||[],e.tops||[])&&Vy(this.bottoms||[],e.bottoms||[])&&Vy(this.lefts||[],e.lefts||[])&&Vy(this.rights||[],e.rights||[])}}function Vy(t,e){const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(Math.round(t[r])!==Math.round(e[r]))return!1;return!0}class UP{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class OLe extends UP{constructor(e){super(),this.el=e}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(e){this.el.scrollTop=e}setScrollLeft(e){this.el.scrollLeft=e}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class MLe extends UP{getScrollTop(){return window.scrollY}getScrollLeft(){return window.scrollX}setScrollTop(e){window.scroll(window.scrollX,e)}setScrollLeft(e){window.scroll(e,window.scrollY)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class pd extends Vn{constructor(){super(...arguments),this.uid=ud()}prepareHits(){}queryHit(e,n,r,i){return null}isValidSegDownEl(e){return!this.props.eventDrag&&!this.props.eventResize&&!mi(e,".fc-event-mirror")}isValidDateDownEl(e){return!mi(e,".fc-event:not(.fc-bg-event)")&&!mi(e,".fc-more-link")&&!mi(e,"a[data-navlink]")&&!mi(e,".fc-popover")}}class RLe{constructor(e=n=>n.thickness||1){this.getEntryThickness=e,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(e){let n=[];for(let r of e)this.insertEntry(r,n);return n}insertEntry(e,n){let r=this.findInsertion(e);this.isInsertionValid(r,e)?this.insertEntryAt(e,r):this.handleInvalidInsertion(r,e,n)}isInsertionValid(e,n){return(this.maxCoord===-1||e.levelCoord+this.getEntryThickness(n)<=this.maxCoord)&&(this.maxStackCnt===-1||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,n,r){if(this.allowReslicing&&e.touchingEntry){const i=Object.assign(Object.assign({},n),{span:nH(n.span,e.touchingEntry.span)});r.push(i),this.splitEntry(n,e.touchingEntry,r)}else r.push(n)}splitEntry(e,n,r){let i=e.span,s=n.span;i.start<s.start&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:i.start,end:s.start}},r),i.end>s.end&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:s.end,end:i.end}},r)}insertEntryAt(e,n){let{entriesByLevel:r,levelCoords:i}=this;n.lateral===-1?($S(i,n.level,n.levelCoord),$S(r,n.level,[e])):$S(r[n.level],n.lateral,e),this.stackCnts[Im(e)]=n.stackCnt}findInsertion(e){let{levelCoords:n,entriesByLevel:r,strictOrder:i,stackCnts:s}=this,a=n.length,o=0,c=-1,u=-1,d=null,f=0;for(let g=0;g<a;g+=1){const m=n[g];if(!i&&m>=o+this.getEntryThickness(e))break;let y=r[g],x,w=J3(y,e.span.start,Z3),_=w[0]+w[1];for(;(x=y[_])&&x.span.start<e.span.end;){let A=m+this.getEntryThickness(x);A>o&&(o=A,d=x,c=g,u=_),A===o&&(f=Math.max(f,s[Im(x)]+1)),_+=1}}let h=0;if(d)for(h=c+1;h<a&&n[h]<o;)h+=1;let p=-1;return h<a&&n[h]===o&&(p=J3(r[h],e.span.end,Z3)[0]),{touchingLevel:c,touchingLateral:u,touchingEntry:d,stackCnt:f,levelCoord:o,level:h,lateral:p}}toRects(){let{entriesByLevel:e,levelCoords:n}=this,r=e.length,i=[];for(let s=0;s<r;s+=1){let a=e[s],o=n[s];for(let c of a)i.push(Object.assign(Object.assign({},c),{thickness:this.getEntryThickness(c),levelCoord:o}))}return i}}function Z3(t){return t.span.end}function Im(t){return t.index+":"+t.span.start}function nH(t,e){let n=Math.max(t.start,e.start),r=Math.min(t.end,e.end);return n<r?{start:n,end:r}:null}function $S(t,e,n){t.splice(e,0,n)}function J3(t,e,n){let r=0,i=t.length;if(!i||e<n(t[r]))return[0,0];if(e>n(t[i-1]))return[i,0];for(;r<i;){let s=Math.floor(r+(i-r)/2),a=n(t[s]);if(e<a)i=s;else if(e>a)r=s+1;else return[s,1]}return[r,0]}class LLe{constructor(e,n){this.emitter=new N1}destroy(){}setMirrorIsVisible(e){}setMirrorNeedsRevert(e){}setAutoScrollEnabled(e){}}const WP={};function zLe(t,e){return!t||e>10?Or({weekday:"short"}):e>1?Or({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):Or({weekday:"long"})}const rH="fc-col-header-cell";function iH(t){return t.text}class $Le extends Vn{render(){let{dateEnv:e,options:n,theme:r,viewApi:i}=this.context,{props:s}=this,{date:a,dateProfile:o}=s,c=JW(a,s.todayRange,null,o),u=[rH].concat(VP(c,r)),d=e.format(a,s.dayHeaderFormat),f=!c.isDisabled&&s.colCnt>1?mj(this.context,a):{},h=e.toDate(a);e.namedTimeZoneImpl&&(h=ec(h,36e5));let p=Object.assign(Object.assign(Object.assign({date:h,view:i},s.extraRenderProps),{text:d}),c);return xe(Yo,{elTag:"th",elClasses:u,elAttrs:Object.assign({role:"columnheader",colSpan:s.colSpan,"data-date":c.isDisabled?void 0:CP(a)},s.extraDataAttrs),renderProps:p,generatorName:"dayHeaderContent",customGenerator:n.dayHeaderContent,defaultGenerator:iH,classNameGenerator:n.dayHeaderClassNames,didMount:n.dayHeaderDidMount,willUnmount:n.dayHeaderWillUnmount},g=>xe("div",{className:"fc-scrollgrid-sync-inner"},!c.isDisabled&&xe(g,{elTag:"a",elAttrs:f,elClasses:["fc-col-header-cell-cushion",s.isSticky&&"fc-sticky"]})))}}const FLe=Or({weekday:"long"});class VLe extends Vn{render(){let{props:e}=this,{dateEnv:n,theme:r,viewApi:i,options:s}=this.context,a=Rr(new Date(2592e5),e.dow),o={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},c=n.format(a,e.dayHeaderFormat),u=Object.assign(Object.assign(Object.assign(Object.assign({date:a},o),{view:i}),e.extraRenderProps),{text:c});return xe(Yo,{elTag:"th",elClasses:[rH,...VP(o,r),...e.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:e.colSpan},e.extraDataAttrs),renderProps:u,generatorName:"dayHeaderContent",customGenerator:s.dayHeaderContent,defaultGenerator:iH,classNameGenerator:s.dayHeaderClassNames,didMount:s.dayHeaderDidMount,willUnmount:s.dayHeaderWillUnmount},d=>xe("div",{className:"fc-scrollgrid-sync-inner"},xe(d,{elTag:"a",elClasses:["fc-col-header-cell-cushion",e.isSticky&&"fc-sticky"],elAttrs:{"aria-label":n.format(a,FLe)}})))}}class BLe extends Vn{constructor(){super(...arguments),this.createDayHeaderFormatter=Gt(ULe)}render(){let{context:e}=this,{dates:n,dateProfile:r,datesRepDistinctDays:i,renderIntro:s}=this.props,a=this.createDayHeaderFormatter(e.options.dayHeaderFormat,i,n.length);return xe(P1,{unit:"day"},(o,c)=>xe("tr",{role:"row"},s&&s("day"),n.map(u=>i?xe($Le,{key:u.toISOString(),date:u,dateProfile:r,todayRange:c,colCnt:n.length,dayHeaderFormat:a}):xe(VLe,{key:u.getUTCDay(),dow:u.getUTCDay(),dayHeaderFormat:a}))))}}function ULe(t,e,n){return t||zLe(e,n)}class WLe{constructor(e,n){let r=e.start,{end:i}=e,s=[],a=[],o=-1;for(;r<i;)n.isHiddenDay(r)?s.push(o+.5):(o+=1,s.push(o),a.push(r)),r=Rr(r,1);this.dates=a,this.indices=s,this.cnt=a.length}sliceRange(e){let n=this.getDateDayIndex(e.start),r=this.getDateDayIndex(Rr(e.end,-1)),i=Math.max(0,n),s=Math.min(this.cnt-1,r);return i=Math.ceil(i),s=Math.floor(s),i<=s?{firstIndex:i,lastIndex:s,isStart:n===i,isEnd:r===s}:null}getDateDayIndex(e){let{indices:n}=this,r=Math.floor(rp(this.dates[0],e));return r<0?n[0]-1:r>=n.length?n[n.length-1]+1:n[r]}}class HLe{constructor(e,n){let{dates:r}=e,i,s,a;if(n){for(s=r[0].getUTCDay(),i=1;i<r.length&&r[i].getUTCDay()!==s;i+=1);a=Math.ceil(r.length/i)}else a=1,i=r.length;this.rowCnt=a,this.colCnt=i,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let e=[];for(let n=0;n<this.rowCnt;n+=1){let r=[];for(let i=0;i<this.colCnt;i+=1)r.push(this.buildCell(n,i));e.push(r)}return e}buildCell(e,n){let r=this.daySeries.dates[e*this.colCnt+n];return{key:r.toISOString(),date:r}}buildHeaderDates(){let e=[];for(let n=0;n<this.colCnt;n+=1)e.push(this.cells[0][n].date);return e}sliceRange(e){let{colCnt:n}=this,r=this.daySeries.sliceRange(e),i=[];if(r){let{firstIndex:s,lastIndex:a}=r,o=s;for(;o<=a;){let c=Math.floor(o/n),u=Math.min((c+1)*n,a+1);i.push({row:c,firstCol:o%n,lastCol:(u-1)%n,isStart:r.isStart&&o===s,isEnd:r.isEnd&&u-1===a}),o=u}}return i}}class KLe{constructor(){this.sliceBusinessHours=Gt(this._sliceBusinessHours),this.sliceDateSelection=Gt(this._sliceDateSpan),this.sliceEventStore=Gt(this._sliceEventStore),this.sliceEventDrag=Gt(this._sliceInteraction),this.sliceEventResize=Gt(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(e,n,r,i,...s){let{eventUiBases:a}=e,o=this.sliceEventStore(e.eventStore,a,n,r,...s);return{dateSelectionSegs:this.sliceDateSelection(e.dateSelection,n,r,a,i,...s),businessHourSegs:this.sliceBusinessHours(e.businessHours,n,r,i,...s),fgEventSegs:o.fg,bgEventSegs:o.bg,eventDrag:this.sliceEventDrag(e.eventDrag,a,n,r,...s),eventResize:this.sliceEventResize(e.eventResize,a,n,r,...s),eventSelection:e.eventSelection}}sliceNowDate(e,n,r,i,...s){return this._sliceDateSpan({range:{start:e,end:ec(e,1)},allDay:!1},n,r,{},i,...s)}_sliceBusinessHours(e,n,r,i,...s){return e?this._sliceEventStore(qu(e,By(n,!!r),i),{},n,r,...s).bg:[]}_sliceEventStore(e,n,r,i,...s){if(e){let a=Y3(e,n,By(r,!!i),i);return{bg:this.sliceEventRanges(a.bg,s),fg:this.sliceEventRanges(a.fg,s)}}return{bg:[],fg:[]}}_sliceInteraction(e,n,r,i,...s){if(!e)return null;let a=Y3(e.mutatedEvents,n,By(r,!!i),i);return{segs:this.sliceEventRanges(a.fg,s),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}}_sliceDateSpan(e,n,r,i,s,...a){if(!e)return[];let o=By(n,!!r),c=Th(e.range,o);if(c){e=Object.assign(Object.assign({},e),{range:c});let u=hLe(e,i,s),d=this.sliceRange(e.range,...a);for(let f of d)f.eventRange=u;return d}return[]}sliceEventRanges(e,n){let r=[];for(let i of e)r.push(...this.sliceEventRange(i,n));return r}sliceEventRange(e,n){let r=e.range;this.forceDayIfListItem&&e.ui.display==="list-item"&&(r={start:r.start,end:Rr(r.start,1)});let i=this.sliceRange(r,...n);for(let s of i)s.eventRange=e,s.isStart=e.isStart&&s.isStart,s.isEnd=e.isEnd&&s.isEnd;return i}}function By(t,e){let n=t.activeRange;return e?n:{start:ec(n.start,t.slotMinTime.milliseconds),end:ec(n.end,t.slotMaxTime.milliseconds-864e5)}}function sH(t,e,n){let{instances:r}=t.mutatedEvents;for(let i in r)if(!C1(e.validRange,r[i].range))return!1;return aH({eventDrag:t},n)}function qLe(t,e,n){return C1(e.validRange,t.range)?aH({dateSelection:t},n):!1}function aH(t,e){let n=e.getCurrentData(),r=Object.assign({businessHours:n.businessHours,dateSelection:"",eventStore:n.eventStore,eventUiBases:n.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},t);return(e.pluginHooks.isPropsValid||GLe)(r,e)}function GLe(t,e,n={},r){return!(t.eventDrag&&!YLe(t,e,n,r)||t.dateSelection&&!QLe(t,e,n,r))}function YLe(t,e,n,r){let i=e.getCurrentData(),s=t.eventDrag,a=s.mutatedEvents,o=a.defs,c=a.instances,u=Dx(o,s.isEvent?t.eventUiBases:{"":i.selectionConfig});r&&(u=dd(u,r));let d=W3e(t.eventStore,s.affectedEvents.instances),f=d.defs,h=d.instances,p=Dx(f,t.eventUiBases);for(let g in c){let m=c[g],y=m.range,x=u[m.defId],w=o[m.defId];if(!oH(x.constraints,y,d,t.businessHours,e))return!1;let{eventOverlap:_}=e.options,A=typeof _=="function"?_:null;for(let C in h){let j=h[C];if(IP(y,j.range)&&(p[j.defId].overlap===!1&&s.isEvent||x.overlap===!1||A&&!A(new On(e,f[j.defId],j),new On(e,w,m))))return!1}let E=i.eventStore;for(let C of x.allows){let j=Object.assign(Object.assign({},n),{range:m.range,allDay:w.allDay}),T=E.defs[w.defId],P=E.instances[g],I;if(T?I=new On(e,T,P):I=new On(e,w),!C(zP(j,e),I))return!1}}return!0}function QLe(t,e,n,r){let i=t.eventStore,s=i.defs,a=i.instances,o=t.dateSelection,c=o.range,{selectionConfig:u}=e.getCurrentData();if(r&&(u=r(u)),!oH(u.constraints,c,i,t.businessHours,e))return!1;let{selectOverlap:d}=e.options,f=typeof d=="function"?d:null;for(let h in a){let p=a[h];if(IP(c,p.range)&&(u.overlap===!1||f&&!f(new On(e,s[p.defId],p),null)))return!1}for(let h of u.allows){let p=Object.assign(Object.assign({},n),o);if(!h(zP(p,e),null))return!1}return!0}function oH(t,e,n,r,i){for(let s of t)if(!ZLe(XLe(s,e,n,r,i),e))return!1;return!0}function XLe(t,e,n,r,i){return t==="businessHours"?FS(qu(r,e,i)):typeof t=="string"?FS(T1(n,s=>s.groupId===t)):typeof t=="object"&&t?FS(qu(t,e,i)):[]}function FS(t){let{instances:e}=t,n=[];for(let r in e)n.push(e[r].range);return n}function ZLe(t,e){for(let n of t)if(C1(n,e))return!0;return!1}const Uy=/^(visible|hidden)$/;class JLe extends Vn{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,Xa(this.props.elRef,e)}}render(){let{props:e}=this,{liquid:n,liquidIsAbsolute:r}=e,i=n&&r,s=["fc-scroller"];return n&&(r?s.push("fc-scroller-liquid-absolute"):s.push("fc-scroller-liquid")),xe("div",{ref:this.handleEl,className:s.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:i&&-(e.overcomeLeft||0)||"",right:i&&-(e.overcomeRight||0)||"",bottom:i&&-(e.overcomeBottom||0)||"",marginLeft:!i&&-(e.overcomeLeft||0)||"",marginRight:!i&&-(e.overcomeRight||0)||"",marginBottom:!i&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)}needsXScrolling(){if(Uy.test(this.props.overflowX))return!1;let{el:e}=this,n=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:r}=e;for(let i=0;i<r.length;i+=1)if(r[i].getBoundingClientRect().width>n)return!0;return!1}needsYScrolling(){if(Uy.test(this.props.overflowY))return!1;let{el:e}=this,n=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:r}=e;for(let i=0;i<r.length;i+=1)if(r[i].getBoundingClientRect().height>n)return!0;return!1}getXScrollbarWidth(){return Uy.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return Uy.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class du{constructor(e){this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(n,r)=>{let{depths:i,currentMap:s}=this,a=!1,o=!1;n!==null?(a=r in s,s[r]=n,i[r]=(i[r]||0)+1,o=!0):(i[r]-=1,i[r]||(delete s[r],delete this.callbackMap[r],a=!0)),this.masterCallback&&(a&&this.masterCallback(null,String(r)),o&&this.masterCallback(n,String(r)))}}createRef(e){let n=this.callbackMap[e];return n||(n=this.callbackMap[e]=r=>{this.handleValue(r,String(e))}),n}collect(e,n,r){return l3e(this.currentMap,e,n,r)}getAll(){return kP(this.currentMap)}}function eze(t){let e=o5e(t,".fc-scrollgrid-shrink"),n=0;for(let r of e)n=Math.max(n,w5e(r));return Math.ceil(n)}function lH(t,e){return t.liquid&&e.liquid}function tze(t,e){return e.maxHeight!=null||lH(t,e)}function nze(t,e,n,r){let{expandRows:i}=n;return typeof e.content=="function"?e.content(n):xe("table",{role:"presentation",className:[e.tableClassName,t.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:n.tableMinWidth,width:n.clientWidth,height:i?n.clientHeight:""}},n.tableColGroupNode,xe(r?"thead":"tbody",{role:"presentation"},typeof e.rowContent=="function"?e.rowContent(n):e.rowContent))}function rze(t,e){return Jl(t,e,ga)}function ize(t,e){let n=[];for(let r of t){let i=r.span||1;for(let s=0;s<i;s+=1)n.push(xe("col",{style:{width:r.width==="shrink"?sze(e):r.width||"",minWidth:r.minWidth||""}}))}return xe("colgroup",{},...n)}function sze(t){return t??4}function aze(t){for(let e of t)if(e.width==="shrink")return!0;return!1}function oze(t,e){let n=["fc-scrollgrid",e.theme.getClass("table")];return t&&n.push("fc-scrollgrid-liquid"),n}function lze(t,e){let n=["fc-scrollgrid-section",`fc-scrollgrid-section-${t.type}`,t.className];return e&&t.liquid&&t.maxHeight==null&&n.push("fc-scrollgrid-section-liquid"),t.isSticky&&n.push("fc-scrollgrid-section-sticky"),n}function cze(t){return xe("div",{className:"fc-scrollgrid-sticky-shim",style:{width:t.clientWidth,minWidth:t.tableMinWidth}})}function eL(t){let{stickyHeaderDates:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}function uze(t){let{stickyFooterScrollbar:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}class cH extends Vn{constructor(){super(...arguments),this.processCols=Gt(e=>e,rze),this.renderMicroColGroup=Gt(ize),this.scrollerRefs=new du,this.scrollerElRefs=new du(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:e,state:n,context:r}=this,i=e.sections||[],s=this.processCols(e.cols),a=this.renderMicroColGroup(s,n.shrinkWidth),o=oze(e.liquid,r);e.collapsibleWidth&&o.push("fc-scrollgrid-collapsible");let c=i.length,u=0,d,f=[],h=[],p=[];for(;u<c&&(d=i[u]).type==="header";)f.push(this.renderSection(d,a,!0)),u+=1;for(;u<c&&(d=i[u]).type==="body";)h.push(this.renderSection(d,a,!1)),u+=1;for(;u<c&&(d=i[u]).type==="footer";)p.push(this.renderSection(d,a,!0)),u+=1;let g=!XW();const m={role:"rowgroup"};return xe("table",{role:"grid",className:o.join(" "),style:{height:e.height}},!!(!g&&f.length)&&xe("thead",m,...f),!!(!g&&h.length)&&xe("tbody",m,...h),!!(!g&&p.length)&&xe("tfoot",m,...p),g&&xe("tbody",m,...f,...h,...p))}renderSection(e,n,r){return"outerContent"in e?xe(qn,{key:e.key},e.outerContent):xe("tr",{key:e.key,role:"presentation",className:lze(e,this.props.liquid).join(" ")},this.renderChunkTd(e,n,e.chunk,r))}renderChunkTd(e,n,r,i){if("outerContent"in r)return r.outerContent;let{props:s}=this,{forceYScrollbars:a,scrollerClientWidths:o,scrollerClientHeights:c}=this.state,u=tze(s,e),d=lH(s,e),f=s.liquid?a?"scroll":u?"auto":"hidden":"visible",h=e.key,p=nze(e,r,{tableColGroupNode:n,tableMinWidth:"",clientWidth:!s.collapsibleWidth&&o[h]!==void 0?o[h]:null,clientHeight:c[h]!==void 0?c[h]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},i);return xe(i?"th":"td",{ref:r.elRef,role:"presentation"},xe("div",{className:`fc-scroller-harness${d?" fc-scroller-harness-liquid":""}`},xe(JLe,{ref:this.scrollerRefs.createRef(h),elRef:this.scrollerElRefs.createRef(h),overflowY:f,overflowX:s.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:d,liquidIsAbsolute:!0},p)))}_handleScrollerEl(e,n){let r=dze(this.props.sections,n);r&&Xa(r.chunk.scrollerElRef,e)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return aze(this.props.cols)?eze(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let e=NLe(),{scrollerRefs:n,scrollerElRefs:r}=this,i=!1,s={},a={};for(let o in n.currentMap){let c=n.currentMap[o];if(c&&c.needsYScrolling()){i=!0;break}}for(let o of this.props.sections){let c=o.key,u=r.currentMap[c];if(u){let d=u.parentNode;s[c]=Math.floor(d.getBoundingClientRect().width-(i?e.y:0)),a[c]=Math.floor(d.getBoundingClientRect().height)}}return{forceYScrollbars:i,scrollerClientWidths:s,scrollerClientHeights:a}}}cH.addStateEquality({scrollerClientWidths:ga,scrollerClientHeights:ga});function dze(t,e){for(let n of t)if(n.key===e)return n;return null}class HP extends Vn{constructor(){super(...arguments),this.buildPublicEvent=Gt((e,n,r)=>new On(e,n,r)),this.handleEl=e=>{this.el=e,Xa(this.props.elRef,e),e&&Q3(e,this.props.seg)}}render(){const{props:e,context:n}=this,{options:r}=n,{seg:i}=e,{eventRange:s}=i,{ui:a}=s,o={event:this.buildPublicEvent(n,s.def,s.instance),view:n.viewApi,timeText:e.timeText,textColor:a.textColor,backgroundColor:a.backgroundColor,borderColor:a.borderColor,isDraggable:!e.disableDragging&&nLe(i,n),isStartResizable:!e.disableResizing&&rLe(i,n),isEndResizable:!e.disableResizing&&iLe(i),isMirror:!!(e.isDragging||e.isResizing||e.isDateSelecting),isStart:!!i.isStart,isEnd:!!i.isEnd,isPast:!!e.isPast,isFuture:!!e.isFuture,isToday:!!e.isToday,isSelected:!!e.isSelected,isDragging:!!e.isDragging,isResizing:!!e.isResizing};return xe(Yo,{elRef:this.handleEl,elTag:e.elTag,elAttrs:e.elAttrs,elClasses:[...sLe(o),...i.eventRange.ui.classNames,...e.elClasses||[]],elStyle:e.elStyle,renderProps:o,generatorName:"eventContent",customGenerator:r.eventContent,defaultGenerator:e.defaultGenerator,classNameGenerator:r.eventClassNames,didMount:r.eventDidMount,willUnmount:r.eventWillUnmount},e.children)}componentDidUpdate(e){this.el&&this.props.seg!==e.seg&&Q3(this.el,this.props.seg)}}class uH extends Vn{render(){let{props:e,context:n}=this,{options:r}=n,{seg:i}=e,{ui:s}=i.eventRange,a=r.eventTimeFormat||e.defaultTimeFormat,o=qW(i,a,n,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return xe(HP,Object.assign({},e,{elTag:"a",elStyle:{borderColor:s.borderColor,backgroundColor:s.backgroundColor},elAttrs:GW(i,n),defaultGenerator:fze,timeText:o}),(c,u)=>xe(qn,null,xe(c,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:u.textColor}}),!!u.isStartResizable&&xe("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!u.isEndResizable&&xe("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}uH.addPropsEquality({seg:ga});function fze(t){return xe("div",{className:"fc-event-main-frame"},t.timeText&&xe("div",{className:"fc-event-time"},t.timeText),xe("div",{className:"fc-event-title-container"},xe("div",{className:"fc-event-title fc-sticky"},t.event.title||xe(qn,null," "))))}const hze=Or({day:"numeric"});class dH extends Vn{constructor(){super(...arguments),this.refineRenderProps=b0(pze)}render(){let{props:e,context:n}=this,{options:r}=n,i=this.refineRenderProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,isMonthStart:e.isMonthStart||!1,showDayNumber:e.showDayNumber,extraRenderProps:e.extraRenderProps,viewApi:n.viewApi,dateEnv:n.dateEnv,monthStartFormat:r.monthStartFormat});return xe(Yo,{elRef:e.elRef,elTag:e.elTag,elAttrs:Object.assign(Object.assign({},e.elAttrs),i.isDisabled?{}:{"data-date":CP(e.date)}),elClasses:[...VP(i,n.theme),...e.elClasses||[]],elStyle:e.elStyle,renderProps:i,generatorName:"dayCellContent",customGenerator:r.dayCellContent,defaultGenerator:e.defaultGenerator,classNameGenerator:i.isDisabled?void 0:r.dayCellClassNames,didMount:r.dayCellDidMount,willUnmount:r.dayCellWillUnmount},e.children)}}function fH(t){return!!(t.dayCellContent||dj("dayCellContent",t))}function pze(t){let{date:e,dateEnv:n,dateProfile:r,isMonthStart:i}=t,s=JW(e,t.todayRange,null,r),a=t.showDayNumber?n.format(e,i?t.monthStartFormat:hze):"";return Object.assign(Object.assign(Object.assign({date:n.toDate(e),view:t.viewApi},s),{isMonthStart:i,dayNumberText:a}),t.extraRenderProps)}class mze extends Vn{render(){let{props:e}=this,{seg:n}=e;return xe(HP,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:n.eventRange.ui.backgroundColor},defaultGenerator:gze,seg:n,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,disableDragging:!0,disableResizing:!0})}}function gze(t){let{title:e}=t.event;return e&&xe("div",{className:"fc-event-title"},t.event.title)}function vze(t){return xe("div",{className:`fc-${t}`})}const yze=t=>xe(fd.Consumer,null,e=>{let{dateEnv:n,options:r}=e,{date:i}=t,s=r.weekNumberFormat||t.defaultFormat,a=n.computeWeekNumber(i),o=n.format(i,s),c={num:a,text:o,date:i};return xe(Yo,{elRef:t.elRef,elTag:t.elTag,elAttrs:t.elAttrs,elClasses:t.elClasses,elStyle:t.elStyle,renderProps:c,generatorName:"weekNumberContent",customGenerator:r.weekNumberContent,defaultGenerator:bze,classNameGenerator:r.weekNumberClassNames,didMount:r.weekNumberDidMount,willUnmount:r.weekNumberWillUnmount},t.children)});function bze(t){return t.text}const VS=10;class xze extends Vn{constructor(){super(...arguments),this.state={titleId:E1()},this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&Xa(this.props.elRef,e)},this.handleDocumentMouseDown=e=>{const n=SW(e);this.rootEl.contains(n)||this.handleCloseClick()},this.handleDocumentKeyDown=e=>{e.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:e}=this.props;e&&e()}}render(){let{theme:e,options:n}=this.context,{props:r,state:i}=this,s=["fc-popover",e.getClass("popover")].concat(r.extraClassNames||[]);return q4e(xe("div",Object.assign({},r.extraAttrs,{id:r.id,className:s.join(" "),"aria-labelledby":i.titleId,ref:this.handleRootEl}),xe("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},xe("span",{className:"fc-popover-title",id:i.titleId},r.title),xe("span",{className:"fc-popover-close "+e.getIconClass("close"),title:n.closeHint,onClick:this.handleCloseClick})),xe("div",{className:"fc-popover-body "+e.getClass("popoverContent")},r.children)),r.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:e}=this.context,{alignmentEl:n,alignGridTop:r}=this.props,{rootEl:i}=this,s=ILe(n);if(s){let a=i.getBoundingClientRect(),o=r?mi(n,".fc-scrollgrid").getBoundingClientRect().top:s.top,c=e?s.right-a.width:s.left;o=Math.max(o,VS),c=Math.min(c,document.documentElement.clientWidth-VS-a.width),c=Math.max(c,VS);let u=i.offsetParent.getBoundingClientRect();Nm(i,{top:o-u.top,left:c-u.left})}}}class wze extends pd{constructor(){super(...arguments),this.handleRootEl=e=>{this.rootEl=e,e?this.context.registerInteractiveComponent(this,{el:e,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:e,dateEnv:n}=this.context,{props:r}=this,{startDate:i,todayRange:s,dateProfile:a}=r,o=n.format(i,e.dayPopoverFormat);return xe(dH,{elRef:this.handleRootEl,date:i,dateProfile:a,todayRange:s},(c,u,d)=>xe(xze,{elRef:d.ref,id:r.id,title:o,extraClassNames:["fc-more-popover"].concat(d.className||[]),extraAttrs:d,parentEl:r.parentEl,alignmentEl:r.alignmentEl,alignGridTop:r.alignGridTop,onClose:r.onClose},fH(e)&&xe(c,{elTag:"div",elClasses:["fc-more-popover-misc"]}),r.children))}queryHit(e,n,r,i){let{rootEl:s,props:a}=this;return e>=0&&e<r&&n>=0&&n<i?{dateProfile:a.dateProfile,dateSpan:Object.assign({allDay:!a.forceTimed,range:{start:a.startDate,end:a.endDate}},a.extraDateSpan),dayEl:s,rect:{left:0,top:0,right:r,bottom:i},layer:1}:null}}class _ze extends Vn{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:E1()},this.handleLinkEl=e=>{this.linkEl=e,this.props.elRef&&Xa(this.props.elRef,e)},this.handleClick=e=>{let{props:n,context:r}=this,{moreLinkClick:i}=r.options,s=tL(n).start;function a(o){let{def:c,instance:u,range:d}=o.eventRange;return{event:new On(r,c,u),start:r.dateEnv.toDate(d.start),end:r.dateEnv.toDate(d.end),isStart:o.isStart,isEnd:o.isEnd}}typeof i=="function"&&(i=i({date:s,allDay:!!n.allDayDate,allSegs:n.allSegs.map(a),hiddenSegs:n.hiddenSegs.map(a),jsEvent:e,view:r.viewApi})),!i||i==="popover"?this.setState({isPopoverOpen:!0}):typeof i=="string"&&r.calendarApi.zoomTo(s,i)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:e,state:n}=this;return xe(fd.Consumer,null,r=>{let{viewApi:i,options:s,calendarApi:a}=r,{moreLinkText:o}=s,{moreCnt:c}=e,u=tL(e),d=typeof o=="function"?o.call(a,c):`+${c} ${o}`,f=Pm(s.moreLinkHint,[c],d),h={num:c,shortText:`+${c}`,text:d,view:i};return xe(qn,null,!!e.moreCnt&&xe(Yo,{elTag:e.elTag||"a",elRef:this.handleLinkEl,elClasses:[...e.elClasses||[],"fc-more-link"],elStyle:e.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},e.elAttrs),EW(this.handleClick)),{title:f,"aria-expanded":n.isPopoverOpen,"aria-controls":n.isPopoverOpen?n.popoverId:""}),renderProps:h,generatorName:"moreLinkContent",customGenerator:s.moreLinkContent,defaultGenerator:e.defaultGenerator||Sze,classNameGenerator:s.moreLinkClassNames,didMount:s.moreLinkDidMount,willUnmount:s.moreLinkWillUnmount},e.children),n.isPopoverOpen&&xe(wze,{id:n.popoverId,startDate:u.start,endDate:u.end,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:e.extraDateSpan,parentEl:this.parentEl,alignmentEl:e.alignmentElRef?e.alignmentElRef.current:this.linkEl,alignGridTop:e.alignGridTop,forceTimed:e.forceTimed,onClose:this.handlePopoverClose},e.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=mi(this.linkEl,".fc-view-harness"))}}function Sze(t){return t.text}function tL(t){if(t.allDayDate)return{start:t.allDayDate,end:Rr(t.allDayDate,1)};let{hiddenSegs:e}=t;return{start:Aze(e),end:jze(e)}}function Aze(t){return t.reduce(Eze).eventRange.range.start}function Eze(t,e){return t.eventRange.range.start<e.eventRange.range.start?t:e}function jze(t){return t.reduce(Cze).eventRange.range.end}function Cze(t,e){return t.eventRange.range.end>e.eventRange.range.end?t:e}class Tze{constructor(){this.handlers=[]}set(e){this.currentValue=e;for(let n of this.handlers)n(e)}subscribe(e){this.handlers.push(e),this.currentValue!==void 0&&e(this.currentValue)}}class Nze extends Tze{constructor(){super(...arguments),this.map=new Map}handle(e){const{map:n}=this;let r=!1;e.isActive?(n.set(e.id,e),r=!0):n.has(e.id)&&(n.delete(e.id),r=!0),r&&this.set(n)}}const Pze=[],hH={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},pH=Object.assign(Object.assign({},hH),{buttonHints:{prev:"Previous $0",next:"Next $0",today(t,e){return e==="day"?"Today":`This ${t}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(t){return`Show ${t} more event${t===1?"":"s"}`}});function kze(t){let e=t.length>0?t[0].code:"en",n=Pze.concat(t),r={en:pH};for(let i of n)r[i.code]=i;return{map:r,defaultCode:e}}function mH(t,e){return typeof t=="object"&&!Array.isArray(t)?gH(t.code,[t.code],t):Dze(t,e)}function Dze(t,e){let n=[].concat(t||[]),r=Ize(n,e)||pH;return gH(t,n,r)}function Ize(t,e){for(let n=0;n<t.length;n+=1){let r=t[n].toLocaleLowerCase().split("-");for(let i=r.length;i>0;i-=1){let s=r.slice(0,i).join("-");if(e[s])return e[s]}}return null}function gH(t,e,n){let r=PP([hH,n],["buttonText"]);delete r.code;let{week:i}=r;return delete r.week,{codeArg:t,codes:e,week:i,simpleNumberFormat:new Intl.NumberFormat(t),options:r}}function mc(t){return{id:ud(),name:t.name,premiumReleaseDate:t.premiumReleaseDate?new Date(t.premiumReleaseDate):void 0,deps:t.deps||[],reducers:t.reducers||[],isLoadingFuncs:t.isLoadingFuncs||[],contextInit:[].concat(t.contextInit||[]),eventRefiners:t.eventRefiners||{},eventDefMemberAdders:t.eventDefMemberAdders||[],eventSourceRefiners:t.eventSourceRefiners||{},isDraggableTransformers:t.isDraggableTransformers||[],eventDragMutationMassagers:t.eventDragMutationMassagers||[],eventDefMutationAppliers:t.eventDefMutationAppliers||[],dateSelectionTransformers:t.dateSelectionTransformers||[],datePointTransforms:t.datePointTransforms||[],dateSpanTransforms:t.dateSpanTransforms||[],views:t.views||{},viewPropsTransformers:t.viewPropsTransformers||[],isPropsValid:t.isPropsValid||null,externalDefTransforms:t.externalDefTransforms||[],viewContainerAppends:t.viewContainerAppends||[],eventDropTransformers:t.eventDropTransformers||[],componentInteractions:t.componentInteractions||[],calendarInteractions:t.calendarInteractions||[],themeClasses:t.themeClasses||{},eventSourceDefs:t.eventSourceDefs||[],cmdFormatter:t.cmdFormatter,recurringTypes:t.recurringTypes||[],namedTimeZonedImpl:t.namedTimeZonedImpl,initialView:t.initialView||"",elementDraggingImpl:t.elementDraggingImpl,optionChangeHandlers:t.optionChangeHandlers||{},scrollGridImpl:t.scrollGridImpl||null,listenerRefiners:t.listenerRefiners||{},optionRefiners:t.optionRefiners||{},propSetHandlers:t.propSetHandlers||{}}}function Oze(t,e){let n={},r={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function i(s){for(let a of s){const o=a.name,c=n[o];c===void 0?(n[o]=a.id,i(a.deps),r=Rze(r,a)):c!==a.id&&console.warn(`Duplicate plugin '${o}'`)}}return t&&i(t),i(e),r}function Mze(){let t=[],e=[],n;return(r,i)=>((!n||!Jl(r,t)||!Jl(i,e))&&(n=Oze(r,i)),t=r,e=i,n)}function Rze(t,e){return{premiumReleaseDate:Lze(t.premiumReleaseDate,e.premiumReleaseDate),reducers:t.reducers.concat(e.reducers),isLoadingFuncs:t.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:t.contextInit.concat(e.contextInit),eventRefiners:Object.assign(Object.assign({},t.eventRefiners),e.eventRefiners),eventDefMemberAdders:t.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},t.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:t.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:t.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:t.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:t.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:t.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:t.dateSpanTransforms.concat(e.dateSpanTransforms),views:Object.assign(Object.assign({},t.views),e.views),viewPropsTransformers:t.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||t.isPropsValid,externalDefTransforms:t.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:t.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:t.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:t.calendarInteractions.concat(e.calendarInteractions),componentInteractions:t.componentInteractions.concat(e.componentInteractions),themeClasses:Object.assign(Object.assign({},t.themeClasses),e.themeClasses),eventSourceDefs:t.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||t.cmdFormatter,recurringTypes:t.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||t.namedTimeZonedImpl,initialView:t.initialView||e.initialView,elementDraggingImpl:t.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},t.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||t.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},t.listenerRefiners),e.listenerRefiners),optionRefiners:Object.assign(Object.assign({},t.optionRefiners),e.optionRefiners),propSetHandlers:Object.assign(Object.assign({},t.propSetHandlers),e.propSetHandlers)}}function Lze(t,e){return t===void 0?e:e===void 0?t:new Date(Math.max(t.valueOf(),e.valueOf()))}class gc extends zv{}gc.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};gc.prototype.baseIconClass="fc-icon";gc.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};gc.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};gc.prototype.iconOverrideOption="buttonIcons";gc.prototype.iconOverrideCustomButtonOption="icon";gc.prototype.iconOverridePrefix="fc-icon-";function zze(t,e){let n={},r;for(r in t)gj(r,n,t,e);for(r in e)gj(r,n,t,e);return n}function gj(t,e,n,r){if(e[t])return e[t];let i=$ze(t,e,n,r);return i&&(e[t]=i),i}function $ze(t,e,n,r){let i=n[t],s=r[t],a=d=>i&&i[d]!==null?i[d]:s&&s[d]!==null?s[d]:null,o=a("component"),c=a("superType"),u=null;if(c){if(c===t)throw new Error("Can't have a custom view type that references itself");u=gj(c,e,n,r)}return!o&&u&&(o=u.component),o?{type:t,component:o,defaults:Object.assign(Object.assign({},u?u.defaults:{}),i?i.rawOptions:{}),overrides:Object.assign(Object.assign({},u?u.overrides:{}),s?s.rawOptions:{})}:null}function nL(t){return dd(t,Fze)}function Fze(t){let e=typeof t=="function"?{component:t}:t,{component:n}=e;return e.content?n=rL(e):n&&!(n.prototype instanceof Vn)&&(n=rL(Object.assign(Object.assign({},e),{content:n}))),{superType:e.type,component:n,rawOptions:e}}function rL(t){return e=>xe(fd.Consumer,null,n=>xe(Yo,{elTag:"div",elClasses:IW(n.viewSpec),renderProps:Object.assign(Object.assign({},e),{nextDayThreshold:n.options.nextDayThreshold}),generatorName:void 0,customGenerator:t.content,classNameGenerator:t.classNames,didMount:t.didMount,willUnmount:t.willUnmount}))}function Vze(t,e,n,r){let i=nL(t),s=nL(e.views),a=zze(i,s);return dd(a,o=>Bze(o,s,e,n,r))}function Bze(t,e,n,r,i){let s=t.overrides.duration||t.defaults.duration||r.duration||n.duration,a=null,o="",c="",u={};if(s&&(a=Uze(s),a)){let h=uj(a);o=h.unit,h.value===1&&(c=o,u=e[o]?e[o].rawOptions:{})}let d=h=>{let p=h.buttonText||{},g=t.defaults.buttonTextKey;return g!=null&&p[g]!=null?p[g]:p[t.type]!=null?p[t.type]:p[c]!=null?p[c]:null},f=h=>{let p=h.buttonHints||{},g=t.defaults.buttonTextKey;return g!=null&&p[g]!=null?p[g]:p[t.type]!=null?p[t.type]:p[c]!=null?p[c]:null};return{type:t.type,component:t.component,duration:a,durationUnit:o,singleUnit:c,optionDefaults:t.defaults,optionOverrides:Object.assign(Object.assign({},u),t.overrides),buttonTextOverride:d(r)||d(n)||t.overrides.buttonText,buttonTextDefault:d(i)||t.defaults.buttonText||d(km)||t.type,buttonTitleOverride:f(r)||f(n)||t.overrides.buttonHint,buttonTitleDefault:f(i)||t.defaults.buttonHint||f(km)}}let iL={};function Uze(t){let e=JSON.stringify(t),n=iL[e];return n===void 0&&(n=Jt(t),iL[e]=n),n}function Wze(t,e){switch(e.type){case"CHANGE_VIEW_TYPE":t=e.viewType}return t}function Hze(t,e){switch(e.type){case"CHANGE_DATE":return e.dateMarker;default:return t}}function Kze(t,e,n){let r=t.initialDate;return r!=null?e.createMarker(r):n.getDateMarker()}function qze(t,e){switch(e.type){case"SET_OPTION":return Object.assign(Object.assign({},t),{[e.optionName]:e.rawOptionValue});default:return t}}function Gze(t,e,n,r){let i;switch(e.type){case"CHANGE_VIEW_TYPE":return r.build(e.dateMarker||n);case"CHANGE_DATE":return r.build(e.dateMarker);case"PREV":if(i=r.buildPrev(t,n),i.isValid)return i;break;case"NEXT":if(i=r.buildNext(t,n),i.isValid)return i;break}return t}function Yze(t,e,n){let r=e?e.activeRange:null;return yH({},n$e(t,n),r,n)}function Qze(t,e,n,r){let i=n?n.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return yH(t,e.sources,i,r);case"REMOVE_EVENT_SOURCE":return Zze(t,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return n?bH(t,i,r):t;case"FETCH_EVENT_SOURCES":return KP(t,e.sourceIds?TW(e.sourceIds):xH(t,r),i,e.isRefetch||!1,r);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return t$e(t,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return t}}function Xze(t,e,n){let r=e?e.activeRange:null;return KP(t,xH(t,n),r,!0,n)}function vH(t){for(let e in t)if(t[e].isFetching)return!0;return!1}function yH(t,e,n,r){let i={};for(let s of e)i[s.sourceId]=s;return n&&(i=bH(i,n,r)),Object.assign(Object.assign({},t),i)}function Zze(t,e){return Ku(t,n=>n.sourceId!==e)}function bH(t,e,n){return KP(t,Ku(t,r=>Jze(r,e,n)),e,!1,n)}function Jze(t,e,n){return wH(t,n)?!n.options.lazyFetching||!t.fetchRange||t.isFetching||e.start<t.fetchRange.start||e.end>t.fetchRange.end:!t.latestFetchId}function KP(t,e,n,r,i){let s={};for(let a in t){let o=t[a];e[a]?s[a]=e$e(o,n,r,i):s[a]=o}return s}function e$e(t,e,n,r){let{options:i,calendarApi:s}=r,a=r.pluginHooks.eventSourceDefs[t.sourceDefId],o=ud();return a.fetch({eventSource:t,range:e,isRefetch:n,context:r},c=>{let{rawEvents:u}=c;i.eventSourceSuccess&&(u=i.eventSourceSuccess.call(s,u,c.response)||u),t.success&&(u=t.success.call(s,u,c.response)||u),r.dispatch({type:"RECEIVE_EVENTS",sourceId:t.sourceId,fetchId:o,fetchRange:e,rawEvents:u})},c=>{let u=!1;i.eventSourceFailure&&(i.eventSourceFailure.call(s,c),u=!0),t.failure&&(t.failure(c),u=!0),u||console.warn(c.message,c),r.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:t.sourceId,fetchId:o,fetchRange:e,error:c})}),Object.assign(Object.assign({},t),{isFetching:!0,latestFetchId:o})}function t$e(t,e,n,r){let i=t[e];return i&&n===i.latestFetchId?Object.assign(Object.assign({},t),{[e]:Object.assign(Object.assign({},i),{isFetching:!1,fetchRange:r})}):t}function xH(t,e){return Ku(t,n=>wH(n,e))}function n$e(t,e){let n=VW(e),r=[].concat(t.eventSources||[]),i=[];t.initialEvents&&r.unshift(t.initialEvents),t.events&&r.unshift(t.events);for(let s of r){let a=FW(s,e,n);a&&i.push(a)}return i}function wH(t,e){return!e.pluginHooks.eventSourceDefs[t.sourceDefId].ignoreRange}function r$e(t,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return t}}function i$e(t,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return t}}function s$e(t,e){let n;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return n=e.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return t}}function a$e(t,e){let n;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return n=e.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return t}}function o$e(t,e,n,r,i){let s=t.headerToolbar?sL(t.headerToolbar,t,e,n,r,i):null,a=t.footerToolbar?sL(t.footerToolbar,t,e,n,r,i):null;return{header:s,footer:a}}function sL(t,e,n,r,i,s){let a={},o=[],c=!1;for(let u in t){let d=t[u],f=l$e(d,e,n,r,i,s);a[u]=f.widgets,o.push(...f.viewsWithButtons),c=c||f.hasTitle}return{sectionWidgets:a,viewsWithButtons:o,hasTitle:c}}function l$e(t,e,n,r,i,s){let a=e.direction==="rtl",o=e.customButtons||{},c=n.buttonText||{},u=e.buttonText||{},d=n.buttonHints||{},f=e.buttonHints||{},h=t?t.split(" "):[],p=[],g=!1;return{widgets:h.map(y=>y.split(",").map(x=>{if(x==="title")return g=!0,{buttonName:x};let w,_,A,E,C,j;if(w=o[x])A=T=>{w.click&&w.click.call(T.target,T,T.target)},(E=r.getCustomButtonIconClass(w))||(E=r.getIconClass(x,a))||(C=w.text),j=w.hint||w.text;else if(_=i[x]){p.push(x),A=()=>{s.changeView(x)},(C=_.buttonTextOverride)||(E=r.getIconClass(x,a))||(C=_.buttonTextDefault);let T=_.buttonTextOverride||_.buttonTextDefault;j=Pm(_.buttonTitleOverride||_.buttonTitleDefault||e.viewHint,[T,x],T)}else if(s[x])if(A=()=>{s[x]()},(C=c[x])||(E=r.getIconClass(x,a))||(C=u[x]),x==="prevYear"||x==="nextYear"){let T=x==="prevYear"?"prev":"next";j=Pm(d[T]||f[T],[u.year||"year","year"],u[x])}else j=T=>Pm(d[x]||f[x],[u[T]||T,T],u[x]);return{buttonName:x,buttonClick:A,buttonIcon:E,buttonText:C,buttonHint:j}})),viewsWithButtons:p,hasTitle:g}}class c$e{constructor(e,n,r){this.type=e,this.getCurrentData=n,this.dateEnv=r}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(e){return this.getCurrentData().options[e]}}let u$e={ignoreRange:!0,parseMeta(t){return Array.isArray(t.events)?t.events:null},fetch(t,e){e({rawEvents:t.eventSource.meta})}};const d$e=mc({name:"array-event-source",eventSourceDefs:[u$e]});let f$e={parseMeta(t){return typeof t.events=="function"?t.events:null},fetch(t,e,n){const{dateEnv:r}=t.context,i=t.eventSource.meta;pLe(i.bind(null,YW(t.range,r)),s=>e({rawEvents:s}),n)}};const h$e=mc({name:"func-event-source",eventSourceDefs:[f$e]}),p$e={method:String,extraParams:ge,startParam:String,endParam:String,timeZoneParam:String};let m$e={parseMeta(t){return t.url&&(t.format==="json"||!t.format)?{url:t.url,format:"json",method:(t.method||"GET").toUpperCase(),extraParams:t.extraParams,startParam:t.startParam,endParam:t.endParam,timeZoneParam:t.timeZoneParam}:null},fetch(t,e,n){const{meta:r}=t.eventSource,i=v$e(r,t.range,t.context);mLe(r.method,r.url,i).then(([s,a])=>{e({rawEvents:s,response:a})},n)}};const g$e=mc({name:"json-event-source",eventSourceRefiners:p$e,eventSourceDefs:[m$e]});function v$e(t,e,n){let{dateEnv:r,options:i}=n,s,a,o,c,u={};return s=t.startParam,s==null&&(s=i.startParam),a=t.endParam,a==null&&(a=i.endParam),o=t.timeZoneParam,o==null&&(o=i.timeZoneParam),typeof t.extraParams=="function"?c=t.extraParams():c=t.extraParams||{},Object.assign(u,c),u[s]=r.formatIso(e.start),u[a]=r.formatIso(e.end),r.timeZone!=="local"&&(u[o]=r.timeZone),u}const y$e={daysOfWeek:ge,startTime:Jt,endTime:Jt,duration:Jt,startRecur:ge,endRecur:ge};let b$e={parse(t,e){if(t.daysOfWeek||t.startTime||t.endTime||t.startRecur||t.endRecur){let n={daysOfWeek:t.daysOfWeek||null,startTime:t.startTime||null,endTime:t.endTime||null,startRecur:t.startRecur?e.createMarker(t.startRecur):null,endRecur:t.endRecur?e.createMarker(t.endRecur):null,dateEnv:e},r;return t.duration&&(r=t.duration),!r&&t.startTime&&t.endTime&&(r=E5e(t.endTime,t.startTime)),{allDayGuess:!t.startTime&&!t.endTime,duration:r,typeData:n}}return null},expand(t,e,n){let r=Th(e,{start:t.startRecur,end:t.endRecur});return r?w$e(t.daysOfWeek,t.startTime,t.dateEnv,n,r):[]}};const x$e=mc({name:"simple-recurring-event",recurringTypes:[b$e],eventRefiners:y$e});function w$e(t,e,n,r,i){let s=t?TW(t):null,a=In(i.start),o=i.end,c=[];for(e&&(e.milliseconds<0?o=Rr(o,1):e.milliseconds>=1e3*60*60*24&&(a=Rr(a,-1)));a<o;){let u;(!s||s[a.getUTCDay()])&&(e?u=r.add(a,e):u=a,c.push(r.createMarker(n.toDate(u)))),a=Rr(a,1)}return c}const _$e=mc({name:"change-handler",optionChangeHandlers:{events(t,e){aL([t],e)},eventSources:aL}});function aL(t,e){let n=kP(e.getCurrentData().eventSources);if(n.length===1&&t.length===1&&Array.isArray(n[0]._raw)&&Array.isArray(t[0])){e.dispatch({type:"RESET_RAW_EVENTS",sourceId:n[0].sourceId,rawEvents:t[0]});return}let r=[];for(let i of t){let s=!1;for(let a=0;a<n.length;a+=1)if(n[a]._raw===i){n.splice(a,1),s=!0;break}s||r.push(i)}for(let i of n)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:i.sourceId});for(let i of r)e.calendarApi.addEventSource(i)}function S$e(t,e){e.emitter.trigger("datesSet",Object.assign(Object.assign({},YW(t.activeRange,e.dateEnv)),{view:e.viewApi}))}function A$e(t,e){let{emitter:n}=e;n.hasHandlers("eventsSet")&&n.trigger("eventsSet",Su(t,e))}const E$e=[d$e,h$e,g$e,x$e,_$e,mc({name:"misc",isLoadingFuncs:[t=>vH(t.eventSources)],propSetHandlers:{dateProfile:S$e,eventStore:A$e}})];class j$e{constructor(e,n){this.runTaskOption=e,this.drainedOption=n,this.queue=[],this.delayedRunner=new SP(this.drain.bind(this))}request(e,n){this.queue.push(e),this.delayedRunner.request(n)}pause(e){this.delayedRunner.pause(e)}resume(e,n){this.delayedRunner.resume(e,n)}drain(){let{queue:e}=this;for(;e.length;){let n=[],r;for(;r=e.shift();)this.runTask(r),n.push(r);this.drained(n)}}runTask(e){this.runTaskOption&&this.runTaskOption(e)}drained(e){this.drainedOption&&this.drainedOption(e)}}function C$e(t,e,n){let r;return/^(year|month)$/.test(t.currentRangeUnit)?r=t.currentRange:r=t.activeRange,n.formatRange(r.start,r.end,Or(e.titleFormat||T$e(t)),{isEndExclusive:t.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}function T$e(t){let{currentRangeUnit:e}=t;if(e==="year")return{year:"numeric"};if(e==="month")return{year:"numeric",month:"long"};let n=Ex(t.currentRange.start,t.currentRange.end);return n!==null&&n>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class oL{constructor(){this.resetListeners=new Set}handleInput(e,n){const r=this.dateEnv;if(e!==r&&(typeof n=="function"?this.nowFn=n:r||(this.nowAnchorDate=e.toDate(n?e.createMarker(n):e.createNowMarker()),this.nowAnchorQueried=Date.now()),this.dateEnv=e,r))for(const i of this.resetListeners.values())i()}getDateMarker(){return this.nowAnchorDate?this.dateEnv.timestampToMarker(this.nowAnchorDate.valueOf()+(Date.now()-this.nowAnchorQueried)):this.dateEnv.createMarker(this.nowFn())}addResetListener(e){this.resetListeners.add(e)}removeResetListener(e){this.resetListeners.delete(e)}}class N$e{constructor(e){this.computeCurrentViewData=Gt(this._computeCurrentViewData),this.organizeRawLocales=Gt(kze),this.buildLocale=Gt(mH),this.buildPluginHooks=Mze(),this.buildDateEnv=Gt(P$e),this.buildTheme=Gt(k$e),this.parseToolbars=Gt(o$e),this.buildViewSpecs=Gt(Vze),this.buildDateProfileGenerator=b0(D$e),this.buildViewApi=Gt(I$e),this.buildViewUiProps=b0(R$e),this.buildEventUiBySource=Gt(O$e,ga),this.buildEventUiBases=Gt(M$e),this.parseContextBusinessHours=b0(L$e),this.buildTitle=Gt(C$e),this.nowManager=new oL,this.emitter=new N1,this.actionRunner=new j$e(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=h=>{this.actionRunner.request(h)},this.props=e,this.actionRunner.pause(),this.nowManager=new oL;let n={},r=this.computeOptionsData(e.optionOverrides,n,e.calendarApi),i=r.calendarOptions.initialView||r.pluginHooks.initialView,s=this.computeCurrentViewData(i,r,e.optionOverrides,n);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(s.options);let a={nowManager:this.nowManager,dateEnv:r.dateEnv,options:r.calendarOptions,pluginHooks:r.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},o=Kze(r.calendarOptions,r.dateEnv,this.nowManager),c=s.dateProfileGenerator.build(o);Wl(c.activeRange,o)||(o=c.currentRange.start);for(let h of r.pluginHooks.contextInit)h(a);let u=Yze(r.calendarOptions,c,a),d={dynamicOptionOverrides:n,currentViewType:i,currentDate:o,dateProfile:c,businessHours:this.parseContextBusinessHours(a),eventSources:u,eventUiBases:{},eventStore:oa(),renderableEventStore:oa(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(a).selectionConfig},f=Object.assign(Object.assign({},a),d);for(let h of r.pluginHooks.reducers)Object.assign(d,h(null,null,f));BS(d,a)&&this.emitter.trigger("loading",!0),this.state=d,this.updateData(),this.actionRunner.resume()}resetOptions(e,n){let{props:r}=this;n===void 0?r.optionOverrides=e:(r.optionOverrides=Object.assign(Object.assign({},r.optionOverrides||{}),e),this.optionsForRefining.push(...n)),(n===void 0||n.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(e){let{props:n,state:r,emitter:i}=this,s=qze(r.dynamicOptionOverrides,e),a=this.computeOptionsData(n.optionOverrides,s,n.calendarApi),o=Wze(r.currentViewType,e),c=this.computeCurrentViewData(o,a,n.optionOverrides,s);n.calendarApi.currentDataManager=this,i.setThisContext(n.calendarApi),i.setOptions(c.options);let u={nowManager:this.nowManager,dateEnv:a.dateEnv,options:a.calendarOptions,pluginHooks:a.pluginHooks,calendarApi:n.calendarApi,dispatch:this.dispatch,emitter:i,getCurrentData:this.getCurrentData},{currentDate:d,dateProfile:f}=r;this.data&&this.data.dateProfileGenerator!==c.dateProfileGenerator&&(f=c.dateProfileGenerator.build(d)),d=Hze(d,e),f=Gze(f,e,d,c.dateProfileGenerator),(e.type==="PREV"||e.type==="NEXT"||!Wl(f.currentRange,d))&&(d=f.currentRange.start);let h=Qze(r.eventSources,e,f,u),p=F3e(r.eventStore,e,h,f,u),m=vH(h)&&!c.options.progressiveEventRendering&&r.renderableEventStore||p,{eventUiSingleBase:y,selectionConfig:x}=this.buildViewUiProps(u),w=this.buildEventUiBySource(h),_=this.buildEventUiBases(m.defs,y,w),A={dynamicOptionOverrides:s,currentViewType:o,currentDate:d,dateProfile:f,eventSources:h,eventStore:p,renderableEventStore:m,selectionConfig:x,eventUiBases:_,businessHours:this.parseContextBusinessHours(u),dateSelection:r$e(r.dateSelection,e),eventSelection:i$e(r.eventSelection,e),eventDrag:s$e(r.eventDrag,e),eventResize:a$e(r.eventResize,e)},E=Object.assign(Object.assign({},u),A);for(let T of a.pluginHooks.reducers)Object.assign(A,T(r,e,E));let C=BS(r,u),j=BS(A,u);!C&&j?i.trigger("loading",!0):C&&!j&&i.trigger("loading",!1),this.state=A,n.onAction&&n.onAction(e)}updateData(){let{props:e,state:n}=this,r=this.data,i=this.computeOptionsData(e.optionOverrides,n.dynamicOptionOverrides,e.calendarApi),s=this.computeCurrentViewData(n.currentViewType,i,e.optionOverrides,n.dynamicOptionOverrides),a=this.data=Object.assign(Object.assign(Object.assign({nowManager:this.nowManager,viewTitle:this.buildTitle(n.dateProfile,s.options,i.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},i),s),n),o=i.pluginHooks.optionChangeHandlers,c=r&&r.calendarOptions,u=i.calendarOptions;if(c&&c!==u){c.timeZone!==u.timeZone&&(n.eventSources=a.eventSources=Xze(a.eventSources,n.dateProfile,a),n.eventStore=a.eventStore=q3(a.eventStore,r.dateEnv,a.dateEnv),n.renderableEventStore=a.renderableEventStore=q3(a.renderableEventStore,r.dateEnv,a.dateEnv));for(let d in o)(this.optionsForHandling.indexOf(d)!==-1||c[d]!==u[d])&&o[d](u[d],a)}this.optionsForHandling=[],e.onData&&e.onData(a)}computeOptionsData(e,n,r){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&n===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:i,pluginHooks:s,localeDefaults:a,availableLocaleData:o,extra:c}=this.processRawCalendarOptions(e,n);lL(c);let u=this.buildDateEnv(i.timeZone,i.locale,i.weekNumberCalculation,i.firstDay,i.weekText,s,o,i.defaultRangeSeparator),d=this.buildViewSpecs(s.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,a),f=this.buildTheme(i,s),h=this.parseToolbars(i,this.stableOptionOverrides,f,d,r);return this.stableCalendarOptionsData={calendarOptions:i,pluginHooks:s,dateEnv:u,viewSpecs:d,theme:f,toolbarConfig:h,localeDefaults:a,availableRawLocales:o.map}}processRawCalendarOptions(e,n){let{locales:r,locale:i}=OS([km,e,n]),s=this.organizeRawLocales(r),a=s.map,o=this.buildLocale(i||s.defaultCode,a).options,c=this.buildPluginHooks(e.plugins||[],E$e),u=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},F3),V3),B3),c.listenerRefiners),c.optionRefiners),d={},f=OS([km,o,e,n]),h={},p=this.currentCalendarOptionsInput,g=this.currentCalendarOptionsRefined,m=!1;for(let y in f)this.optionsForRefining.indexOf(y)===-1&&(f[y]===p[y]||Yc[y]&&y in p&&Yc[y](p[y],f[y]))?h[y]=g[y]:u[y]?(h[y]=u[y](f[y]),m=!0):d[y]=p[y];return m&&(this.currentCalendarOptionsInput=f,this.currentCalendarOptionsRefined=h,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=n),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:c,availableLocaleData:s,localeDefaults:o,extra:d}}_computeCurrentViewData(e,n,r,i){let s=n.viewSpecs[e];if(!s)throw new Error(`viewType "${e}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:a,extra:o}=this.processRawViewOptions(s,n.pluginHooks,n.localeDefaults,r,i);lL(o),this.nowManager.handleInput(n.dateEnv,a.now);let c=this.buildDateProfileGenerator({dateProfileGeneratorClass:s.optionDefaults.dateProfileGeneratorClass,nowManager:this.nowManager,duration:s.duration,durationUnit:s.durationUnit,usesMinMaxTime:s.optionDefaults.usesMinMaxTime,dateEnv:n.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:a.slotMinTime,slotMaxTime:a.slotMaxTime,showNonCurrentDates:a.showNonCurrentDates,dayCount:a.dayCount,dateAlignment:a.dateAlignment,dateIncrement:a.dateIncrement,hiddenDays:a.hiddenDays,weekends:a.weekends,validRangeInput:a.validRange,visibleRangeInput:a.visibleRange,fixedWeekCount:a.fixedWeekCount}),u=this.buildViewApi(e,this.getCurrentData,n.dateEnv);return{viewSpec:s,options:a,dateProfileGenerator:c,viewApi:u}}processRawViewOptions(e,n,r,i,s){let a=OS([km,e.optionDefaults,r,i,e.optionOverrides,s]),o=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},F3),V3),B3),r3e),n.listenerRefiners),n.optionRefiners),c={},u=this.currentViewOptionsInput,d=this.currentViewOptionsRefined,f=!1,h={};for(let p in a)a[p]===u[p]||Yc[p]&&Yc[p](a[p],u[p])?c[p]=d[p]:(a[p]===this.currentCalendarOptionsInput[p]||Yc[p]&&Yc[p](a[p],this.currentCalendarOptionsInput[p])?p in this.currentCalendarOptionsRefined&&(c[p]=this.currentCalendarOptionsRefined[p]):o[p]?c[p]=o[p](a[p]):h[p]=a[p],f=!0);return f&&(this.currentViewOptionsInput=a,this.currentViewOptionsRefined=c),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:h}}}function P$e(t,e,n,r,i,s,a,o){let c=mH(e||a.defaultCode,a.map);return new p3e({calendarSystem:"gregory",timeZone:t,namedTimeZoneImpl:s.namedTimeZonedImpl,locale:c,weekNumberCalculation:n,firstDay:r,weekText:i,cmdFormatter:s.cmdFormatter,defaultSeparator:o})}function k$e(t,e){let n=e.themeClasses[t.themeSystem]||gc;return new n(t)}function D$e(t){let e=t.dateProfileGeneratorClass||RW;return new e(t)}function I$e(t,e,n){return new c$e(t,e,n)}function O$e(t){return dd(t,e=>e.ui)}function M$e(t,e,n){let r={"":e};for(let i in t){let s=t[i];s.sourceId&&n[s.sourceId]&&(r[i]=n[s.sourceId])}return r}function R$e(t){let{options:e}=t;return{eventUiSingleBase:kx({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:typeof e.eventOverlap=="boolean"?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},t),selectionConfig:kx({constraint:e.selectConstraint,overlap:typeof e.selectOverlap=="boolean"?e.selectOverlap:void 0,allow:e.selectAllow},t)}}function BS(t,e){for(let n of e.pluginHooks.isLoadingFuncs)if(n(t))return!0;return!1}function L$e(t){return Y3e(t.options.businessHours,t)}function lL(t,e){for(let n in t)console.warn(`Unknown option '${n}'`)}class z$e extends Vn{render(){let e=this.props.widgetGroups.map(n=>this.renderWidgetGroup(n));return xe("div",{className:"fc-toolbar-chunk"},...e)}renderWidgetGroup(e){let{props:n}=this,{theme:r}=this.context,i=[],s=!0;for(let a of e){let{buttonName:o,buttonClick:c,buttonText:u,buttonIcon:d,buttonHint:f}=a;if(o==="title")s=!1,i.push(xe("h2",{className:"fc-toolbar-title",id:n.titleId},n.title));else{let h=o===n.activeButton,p=!n.isTodayEnabled&&o==="today"||!n.isPrevEnabled&&o==="prev"||!n.isNextEnabled&&o==="next",g=[`fc-${o}-button`,r.getClass("button")];h&&g.push(r.getClass("buttonActive")),i.push(xe("button",{type:"button",title:typeof f=="function"?f(n.navUnit):f,disabled:p,"aria-pressed":h,className:g.join(" "),onClick:c},u||(d?xe("span",{className:d,role:"img"}):"")))}}if(i.length>1){let a=s&&r.getClass("buttonGroup")||"";return xe("div",{className:a},...i)}return i[0]}}class cL extends Vn{render(){let{model:e,extraClassName:n}=this.props,r=!1,i,s,a=e.sectionWidgets,o=a.center;return a.left?(r=!0,i=a.left):i=a.start,a.right?(r=!0,s=a.right):s=a.end,xe("div",{className:[n||"","fc-toolbar",r?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",i||[]),this.renderSection("center",o||[]),this.renderSection("end",s||[]))}renderSection(e,n){let{props:r}=this;return xe(z$e,{key:e,widgetGroups:n,title:r.title,navUnit:r.navUnit,activeButton:r.activeButton,isTodayEnabled:r.isTodayEnabled,isPrevEnabled:r.isPrevEnabled,isNextEnabled:r.isNextEnabled,titleId:r.titleId})}}class $$e extends Vn{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,Xa(this.props.elRef,e),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:e,state:n}=this,{aspectRatio:r}=e,i=["fc-view-harness",r||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],s="",a="";return r?n.availableWidth!==null?s=n.availableWidth/r:a=`${1/r*100}%`:s=e.height||"",xe("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:i.join(" "),style:{height:s,paddingBottom:a}},e.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class F$e extends ip{constructor(e){super(e),this.handleSegClick=(n,r)=>{let{component:i}=this,{context:s}=i,a=Nh(r);if(a&&i.isValidSegDownEl(n.target)){let o=mi(n.target,".fc-event-forced-url"),c=o?o.querySelector("a[href]").href:"";s.emitter.trigger("eventClick",{el:r,event:new On(i.context,a.eventRange.def,a.eventRange.instance),jsEvent:n,view:s.viewApi}),c&&!n.defaultPrevented&&(window.location.href=c)}},this.destroy=AW(e.el,"click",".fc-event",this.handleSegClick)}}class V$e extends ip{constructor(e){super(e),this.handleEventElRemove=n=>{n===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(n,r)=>{Nh(r)&&(this.currentSegEl=r,this.triggerEvent("eventMouseEnter",n,r))},this.handleSegLeave=(n,r)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",n,r))},this.removeHoverListeners=u5e(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(e,n,r){let{component:i}=this,{context:s}=i,a=Nh(r);(!n||i.isValidSegDownEl(n.target))&&s.emitter.trigger(e,{el:r,event:new On(s,a.eventRange.def,a.eventRange.instance),jsEvent:n,view:s.viewApi})}}class B$e extends hd{constructor(){super(...arguments),this.buildViewContext=Gt(v3e),this.buildViewPropTransformers=Gt(W$e),this.buildToolbarProps=Gt(U$e),this.headerRef=Bo(),this.footerRef=Bo(),this.interactionsStore={},this.state={viewLabelId:E1()},this.registerInteractiveComponent=(e,n)=>{let r=yLe(e,n),a=[F$e,V$e].concat(this.props.pluginHooks.componentInteractions).map(o=>new o(r));this.interactionsStore[e.uid]=a,pj[e.uid]=r},this.unregisterInteractiveComponent=e=>{let n=this.interactionsStore[e.uid];if(n){for(let r of n)r.destroy();delete this.interactionsStore[e.uid]}delete pj[e.uid]},this.resizeRunner=new SP(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=e=>{let{options:n}=this.props;n.handleWindowResize&&e.target===window&&this.resizeRunner.request(n.windowResizeDelay)}}render(){let{props:e}=this,{toolbarConfig:n,options:r}=e,i=!1,s="",a;e.isHeightAuto||e.forPrint?s="":r.height!=null?i=!0:r.contentHeight!=null?s=r.contentHeight:a=Math.max(r.aspectRatio,.5);let o=this.buildViewContext(e.viewSpec,e.viewApi,e.options,e.dateProfileGenerator,e.dateEnv,e.nowManager,e.theme,e.pluginHooks,e.dispatch,e.getCurrentData,e.emitter,e.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),c=n.header&&n.header.hasTitle?this.state.viewLabelId:void 0;return xe(fd.Provider,{value:o},xe(P1,{unit:"day"},u=>{let d=this.buildToolbarProps(e.viewSpec,e.dateProfile,e.dateProfileGenerator,e.currentDate,u,e.viewTitle);return xe(qn,null,n.header&&xe(cL,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:n.header,titleId:c},d)),xe($$e,{liquid:i,height:s,aspectRatio:a,labeledById:c},this.renderView(e),this.buildAppendContent()),n.footer&&xe(cL,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:n.footer,titleId:""},d)))}))}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map(r=>new r(e)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:n}=e.pluginHooks;for(let r in n)n[r](e[r],e)}componentDidUpdate(e){let{props:n}=this,{propSetHandlers:r}=n.pluginHooks;for(let i in r)n[i]!==e[i]&&r[i](n[i],n)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let e of this.calendarInteractions)e.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:e}=this,n=e.pluginHooks.viewContainerAppends.map(r=>r(e));return xe(qn,{},...n)}renderView(e){let{pluginHooks:n}=e,{viewSpec:r}=e,i={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},s=this.buildViewPropTransformers(n.viewPropsTransformers);for(let o of s)Object.assign(i,o.transform(i,e));let a=r.component;return xe(a,Object.assign({},i))}}function U$e(t,e,n,r,i,s){let a=n.build(i,void 0,!1),o=n.buildPrev(e,r,!1),c=n.buildNext(e,r,!1);return{title:s,activeButton:t.type,navUnit:t.singleUnit,isTodayEnabled:a.isValid&&!Wl(e.currentRange,i),isPrevEnabled:o.isValid,isNextEnabled:c.isValid}}function W$e(t){return t.map(e=>new e)}class H$e extends xLe{constructor(e,n={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=r=>{switch(r.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=r=>{this.currentData=r,this.renderRunner.request(r.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:r}=this;Nx(()=>{Zg(xe(vLe,{options:r.calendarOptions,theme:r.theme,emitter:r.emitter},(i,s,a,o)=>(this.setClassNames(i),this.setHeight(s),xe(DW.Provider,{value:this.customContentRenderId},xe(B$e,Object.assign({isHeightAuto:a,forPrint:o},r))))),this.el)})}else this.isRendered&&(this.isRendered=!1,Zg(null,this.el),this.setClassNames([]),this.setHeight(""))},t5e(e),this.el=e,this.renderRunner=new SP(this.handleRenderRequest),new N$e({optionOverrides:n,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){Nx(()=>{super.updateSize()})}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(e,n){this.currentDataManager.resetOptions(e,n)}setClassNames(e){if(!Jl(e,this.currentClassNames)){let{classList:n}=this.el;for(let r of this.currentClassNames)n.remove(r);for(let r of e)n.add(r);this.currentClassNames=e}}setHeight(e){_W(this.el,"height",e)}}const K$e=parseInt(String(q.version).split(".")[0]),q$e=K$e<18;class qP extends N.Component{constructor(){super(...arguments),this.elRef=N.createRef(),this.isUpdating=!1,this.isUnmounting=!1,this.state={customRenderingMap:new Map},this.requestResize=()=>{this.isUnmounting||(this.cancelResize(),this.resizeId=requestAnimationFrame(()=>{this.doResize()}))}}render(){const e=[];for(const n of this.state.customRenderingMap.values())e.push(q.createElement(G$e,{key:n.id,customRendering:n}));return q.createElement("div",{ref:this.elRef},e)}componentDidMount(){this.isUnmounting=!1;const e=new Nze;this.handleCustomRendering=e.handle.bind(e),this.calendar=new H$e(this.elRef.current,Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.calendar.render(),this.calendar.on("_beforeprint",()=>{Xm.flushSync(()=>{})});let n;e.subscribe(r=>{const i=Date.now(),s=!n;(q$e||s||this.isUpdating||this.isUnmounting||i-n<100?_H:Xm.flushSync)(()=>{this.setState({customRenderingMap:r},()=>{n=i,s?this.doResize():this.requestResize()})})})}componentDidUpdate(){this.isUpdating=!0,this.calendar.resetOptions(Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.isUpdating=!1}componentWillUnmount(){this.isUnmounting=!0,this.cancelResize(),this.calendar.destroy()}doResize(){this.calendar.updateSize()}cancelResize(){this.resizeId!==void 0&&(cancelAnimationFrame(this.resizeId),this.resizeId=void 0)}getApi(){return this.calendar}}qP.act=_H;class G$e extends N.PureComponent{render(){const{customRendering:e}=this.props,{generatorMeta:n}=e,r=typeof n=="function"?n(e.renderProps):n;return Xm.createPortal(r,e.containerEl)}}function _H(t){t()}class Y$e extends pd{constructor(){super(...arguments),this.headerElRef=Bo()}renderSimpleLayout(e,n){let{props:r,context:i}=this,s=[],a=eL(i.options);return e&&s.push({type:"header",key:"header",isSticky:a,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),s.push({type:"body",key:"body",liquid:!0,chunk:{content:n}}),xe(U3,{elClasses:["fc-daygrid"],viewSpec:i.viewSpec},xe(cH,{liquid:!r.isHeightAuto&&!r.forPrint,collapsibleWidth:r.forPrint,cols:[],sections:s}))}renderHScrollLayout(e,n,r,i){let s=this.context.pluginHooks.scrollGridImpl;if(!s)throw new Error("No ScrollGrid implementation");let{props:a,context:o}=this,c=!a.forPrint&&eL(o.options),u=!a.forPrint&&uze(o.options),d=[];return e&&d.push({type:"header",key:"header",isSticky:c,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),d.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:n}]}),u&&d.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:cze}]}),xe(U3,{elClasses:["fc-daygrid"],viewSpec:o.viewSpec},xe(s,{liquid:!a.isHeightAuto&&!a.forPrint,forPrint:a.forPrint,collapsibleWidth:a.forPrint,colGroups:[{cols:[{span:r,minWidth:i}]}],sections:d}))}}function w0(t,e){let n=[];for(let r=0;r<e;r+=1)n[r]=[];for(let r of t)n[r.row].push(r);return n}function Wy(t,e){let n=[];for(let r=0;r<e;r+=1)n[r]=[];for(let r of t)n[r.firstCol].push(r);return n}function uL(t,e){let n=[];if(t){for(let r=0;r<e;r+=1)n[r]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(let r of t.segs)n[r.row].segs.push(r)}else for(let r=0;r<e;r+=1)n[r]=null;return n}const SH=Or({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function AH(t){let{display:e}=t.eventRange.ui;return e==="list-item"||e==="auto"&&!t.eventRange.def.allDay&&t.firstCol===t.lastCol&&t.isStart&&t.isEnd}class EH extends Vn{render(){let{props:e}=this;return xe(uH,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:SH,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class jH extends Vn{render(){let{props:e,context:n}=this,{options:r}=n,{seg:i}=e,s=r.eventTimeFormat||SH,a=qW(i,s,n,!0,e.defaultDisplayEventEnd);return xe(HP,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:GW(e.seg,n),defaultGenerator:Q$e,timeText:a,isResizing:!1,isDateSelecting:!1}))}}function Q$e(t){return xe(qn,null,xe("div",{className:"fc-daygrid-event-dot",style:{borderColor:t.borderColor||t.backgroundColor}}),t.timeText&&xe("div",{className:"fc-event-time"},t.timeText),xe("div",{className:"fc-event-title"},t.event.title||xe(qn,null," ")))}class X$e extends Vn{constructor(){super(...arguments),this.compileSegs=Gt(Z$e)}render(){let{props:e}=this,{allSegs:n,invisibleSegs:r}=this.compileSegs(e.singlePlacements);return xe(_ze,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:n,hiddenSegs:r,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let i=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return xe(qn,null,n.map(s=>{let a=s.eventRange.instance.instanceId;return xe("div",{className:"fc-daygrid-event-harness",key:a,style:{visibility:i[a]?"hidden":""}},AH(s)?xe(jH,Object.assign({seg:s,isDragging:!1,isSelected:a===e.eventSelection,defaultDisplayEventEnd:!1},Dm(s,e.todayRange))):xe(EH,Object.assign({seg:s,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:a===e.eventSelection,defaultDisplayEventEnd:!1},Dm(s,e.todayRange))))}))}})}}function Z$e(t){let e=[],n=[];for(let r of t)e.push(r.seg),r.isVisible||n.push(r.seg);return{allSegs:e,invisibleSegs:n}}const J$e=Or({week:"narrow"});class e6e extends pd{constructor(){super(...arguments),this.rootElRef=Bo(),this.state={dayNumberId:E1()},this.handleRootEl=e=>{Xa(this.rootElRef,e),Xa(this.props.elRef,e)}}render(){let{context:e,props:n,state:r,rootElRef:i}=this,{options:s,dateEnv:a}=e,{date:o,dateProfile:c}=n;const u=n.showDayNumber&&n6e(o,c.currentRange,a);return xe(dH,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...n.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},n.extraDataAttrs),n.showDayNumber?{"aria-labelledby":r.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:t6e,date:o,dateProfile:c,todayRange:n.todayRange,showDayNumber:n.showDayNumber,isMonthStart:u,extraRenderProps:n.extraRenderProps},(d,f)=>xe("div",{ref:n.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:n.minHeight}},n.showWeekNumber&&xe(yze,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:mj(e,o,"week"),date:o,defaultFormat:J$e}),!f.isDisabled&&(n.showDayNumber||fH(s)||n.forceDayTop)?xe("div",{className:"fc-daygrid-day-top"},xe(d,{elTag:"a",elClasses:["fc-daygrid-day-number",u&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},mj(e,o)),{id:r.dayNumberId})})):n.showDayNumber?xe("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},xe("a",{className:"fc-daygrid-day-number"}," ")):void 0,xe("div",{className:"fc-daygrid-day-events",ref:n.fgContentElRef},n.fgContent,xe("div",{className:"fc-daygrid-day-bottom",style:{marginTop:n.moreMarginTop}},xe(X$e,{allDayDate:o,singlePlacements:n.singlePlacements,moreCnt:n.moreCnt,alignmentElRef:i,alignGridTop:!n.showDayNumber,extraDateSpan:n.extraDateSpan,dateProfile:n.dateProfile,eventSelection:n.eventSelection,eventDrag:n.eventDrag,eventResize:n.eventResize,todayRange:n.todayRange}))),xe("div",{className:"fc-daygrid-day-bg"},n.bgContent)))}}function t6e(t){return t.dayNumberText||xe(qn,null," ")}function n6e(t,e,n){const{start:r,end:i}=e,s=ec(i,-1),a=n.getYear(r),o=n.getMonth(r),c=n.getYear(s),u=n.getMonth(s);return!(a===c&&o===u)&&(t.valueOf()===r.valueOf()||n.getDay(t)===1&&t.valueOf()<i.valueOf())}function CH(t){return t.eventRange.instance.instanceId+":"+t.firstCol}function TH(t){return CH(t)+":"+t.lastCol}function r6e(t,e,n,r,i,s,a){let o=new a6e(x=>{let w=t[x.index].eventRange.instance.instanceId+":"+x.span.start+":"+(x.span.end-1);return i[w]||1});o.allowReslicing=!0,o.strictOrder=r,e===!0||n===!0?(o.maxCoord=s,o.hiddenConsumes=!0):typeof e=="number"?o.maxStackCnt=e:typeof n=="number"&&(o.maxStackCnt=n,o.hiddenConsumes=!0);let c=[],u=[];for(let x=0;x<t.length;x+=1){let w=t[x],_=TH(w);i[_]!=null?c.push({index:x,span:{start:w.firstCol,end:w.lastCol+1}}):u.push(w)}let d=o.addSegs(c),f=o.toRects(),{singleColPlacements:h,multiColPlacements:p,leftoverMargins:g}=i6e(f,t,a),m=[],y=[];for(let x of u){p[x.firstCol].push({seg:x,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let w=x.firstCol;w<=x.lastCol;w+=1)h[w].push({seg:Nf(x,w,w+1,a),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let x=0;x<a.length;x+=1)m.push(0);for(let x of d){let w=t[x.index],_=x.span;p[_.start].push({seg:Nf(w,_.start,_.end,a),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let A=_.start;A<_.end;A+=1)m[A]+=1,h[A].push({seg:Nf(w,A,A+1,a),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let x=0;x<a.length;x+=1)y.push(g[x]);return{singleColPlacements:h,multiColPlacements:p,moreCnts:m,moreMarginTops:y}}function i6e(t,e,n){let r=s6e(t,n.length),i=[],s=[],a=[];for(let o=0;o<n.length;o+=1){let c=r[o],u=[],d=0,f=0;for(let p of c){let g=e[p.index];u.push({seg:Nf(g,o,o+1,n),isVisible:!0,isAbsolute:!1,absoluteTop:p.levelCoord,marginTop:p.levelCoord-d}),d=p.levelCoord+p.thickness}let h=[];d=0,f=0;for(let p of c){let g=e[p.index],m=p.span.end-p.span.start>1,y=p.span.start===o;f+=p.levelCoord-d,d=p.levelCoord+p.thickness,m?(f+=p.thickness,y&&h.push({seg:Nf(g,p.span.start,p.span.end,n),isVisible:!0,isAbsolute:!0,absoluteTop:p.levelCoord,marginTop:0})):y&&(h.push({seg:Nf(g,p.span.start,p.span.end,n),isVisible:!0,isAbsolute:!1,absoluteTop:p.levelCoord,marginTop:f}),f=0)}i.push(u),s.push(h),a.push(f)}return{singleColPlacements:i,multiColPlacements:s,leftoverMargins:a}}function s6e(t,e){let n=[];for(let r=0;r<e;r+=1)n.push([]);for(let r of t)for(let i=r.span.start;i<r.span.end;i+=1)n[i].push(r);return n}function Nf(t,e,n,r){if(t.firstCol===e&&t.lastCol===n-1)return t;let i=t.eventRange,s=i.range,a=Th(s,{start:r[e].date,end:Rr(r[n-1].date,1)});return Object.assign(Object.assign({},t),{firstCol:e,lastCol:n-1,eventRange:{def:i.def,ui:Object.assign(Object.assign({},i.ui),{durationEditable:!1}),instance:i.instance,range:a},isStart:t.isStart&&a.start.valueOf()===s.start.valueOf(),isEnd:t.isEnd&&a.end.valueOf()===s.end.valueOf()})}class a6e extends RLe{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const n=super.addSegs(e),{entriesByLevel:r}=this,i=s=>!this.forceHidden[Im(s)];for(let s=0;s<r.length;s+=1)r[s]=r[s].filter(i);return n}handleInvalidInsertion(e,n,r){const{entriesByLevel:i,forceHidden:s}=this,{touchingEntry:a,touchingLevel:o,touchingLateral:c}=e;if(this.hiddenConsumes&&a){const u=Im(a);if(!s[u])if(this.allowReslicing){const d=Object.assign(Object.assign({},a),{span:nH(a.span,n.span)}),f=Im(d);s[f]=!0,i[o][c]=d,r.push(d),this.splitEntry(a,n,r)}else s[u]=!0,r.push(a)}super.handleInvalidInsertion(e,n,r)}}class NH extends pd{constructor(){super(...arguments),this.cellElRefs=new du,this.frameElRefs=new du,this.fgElRefs=new du,this.segHarnessRefs=new du,this.rootElRef=Bo(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:n,context:r}=this,{options:i}=r,s=e.cells.length,a=Wy(e.businessHourSegs,s),o=Wy(e.bgEventSegs,s),c=Wy(this.getHighlightSegs(),s),u=Wy(this.getMirrorSegs(),s),{singleColPlacements:d,multiColPlacements:f,moreCnts:h,moreMarginTops:p}=r6e(eLe(e.fgEventSegs,i.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,i.eventOrderStrict,n.segHeights,n.maxContentHeight,e.cells),g=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return xe("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((m,y)=>{let x=this.renderFgSegs(y,e.forPrint?d[y]:f[y],e.todayRange,g),w=this.renderFgSegs(y,o6e(u[y],f),e.todayRange,{},!!e.eventDrag,!!e.eventResize,!1);return xe(e6e,{key:m.key,elRef:this.cellElRefs.createRef(m.key),innerElRef:this.frameElRefs.createRef(m.key),dateProfile:e.dateProfile,date:m.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&y===0,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:m.extraRenderProps,extraDataAttrs:m.extraDataAttrs,extraClassNames:m.extraClassNames,extraDateSpan:m.extraDateSpan,moreCnt:h[y],moreMarginTop:p[y],singlePlacements:d[y],fgContentElRef:this.fgElRefs.createRef(m.key),fgContent:xe(qn,null,xe(qn,null,x),xe(qn,null,w)),bgContent:xe(qn,null,this.renderFillSegs(c[y],"highlight"),this.renderFillSegs(a[y],"non-business"),this.renderFillSegs(o[y],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,n){let r=this.props;this.updateSizing(!ga(e,r))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,n,r,i,s,a,o){let{context:c}=this,{eventSelection:u}=this.props,{framePositions:d}=this.state,f=this.props.cells.length===1,h=s||a||o,p=[];if(d)for(let g of n){let{seg:m}=g,{instanceId:y}=m.eventRange.instance,x=g.isVisible&&!i[y],w=g.isAbsolute,_="",A="";w&&(c.isRtl?(A=0,_=d.lefts[m.lastCol]-d.lefts[m.firstCol]):(_=0,A=d.rights[m.firstCol]-d.rights[m.lastCol])),p.push(xe("div",{className:"fc-daygrid-event-harness"+(w?" fc-daygrid-event-harness-abs":""),key:CH(m),ref:h?null:this.segHarnessRefs.createRef(TH(m)),style:{visibility:x?"":"hidden",marginTop:w?"":g.marginTop,top:w?g.absoluteTop:"",left:_,right:A}},AH(m)?xe(jH,Object.assign({seg:m,isDragging:s,isSelected:y===u,defaultDisplayEventEnd:f},Dm(m,r))):xe(EH,Object.assign({seg:m,isDragging:s,isResizing:a,isDateSelecting:o,isSelected:y===u,defaultDisplayEventEnd:f},Dm(m,r)))))}return p}renderFillSegs(e,n){let{isRtl:r}=this.context,{todayRange:i}=this.props,{framePositions:s}=this.state,a=[];if(s)for(let o of e){let c=r?{right:0,left:s.lefts[o.lastCol]-s.lefts[o.firstCol]}:{left:0,right:s.rights[o.firstCol]-s.rights[o.lastCol]};a.push(xe("div",{key:aLe(o.eventRange),className:"fc-daygrid-bg-harness",style:c},n==="bg-event"?xe(mze,Object.assign({seg:o},Dm(o,i))):vze(n)))}return xe(qn,{},...a)}updateSizing(e){let{props:n,state:r,frameElRefs:i}=this;if(!n.forPrint&&n.clientWidth!==null){if(e){let c=n.cells.map(u=>i.currentMap[u.key]);if(c.length){let u=this.rootElRef.current,d=new Ix(u,c,!0,!1);(!r.framePositions||!r.framePositions.similarTo(d))&&this.setState({framePositions:new Ix(u,c,!0,!1)})}}const s=this.state.segHeights,a=this.querySegHeights(),o=n.dayMaxEvents===!0||n.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},s),a),maxContentHeight:o?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,n={};for(let r in e){let i=Math.round(e[r].getBoundingClientRect().height);n[r]=Math.max(n[r]||0,i)}return n}computeMaxContentHeight(){let e=this.props.cells[0].key,n=this.cellElRefs.currentMap[e],r=this.fgElRefs.currentMap[e];return n.getBoundingClientRect().bottom-r.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(n=>e[n.key])}}NH.addStateEquality({segHeights:ga});function o6e(t,e){if(!t.length)return[];let n=l6e(e);return t.map(r=>({seg:r,isVisible:!0,isAbsolute:!0,absoluteTop:n[r.eventRange.instance.instanceId],marginTop:0}))}function l6e(t){let e={};for(let n of t)for(let r of n)e[r.seg.eventRange.instance.instanceId]=r.absoluteTop;return e}class c6e extends pd{constructor(){super(...arguments),this.splitBusinessHourSegs=Gt(w0),this.splitBgEventSegs=Gt(u6e),this.splitFgEventSegs=Gt(w0),this.splitDateSelectionSegs=Gt(w0),this.splitEventDrag=Gt(uL),this.splitEventResize=Gt(uL),this.rowRefs=new du}render(){let{props:e,context:n}=this,r=e.cells.length,i=this.splitBusinessHourSegs(e.businessHourSegs,r),s=this.splitBgEventSegs(e.bgEventSegs,r),a=this.splitFgEventSegs(e.fgEventSegs,r),o=this.splitDateSelectionSegs(e.dateSelectionSegs,r),c=this.splitEventDrag(e.eventDrag,r),u=this.splitEventResize(e.eventResize,r),d=r>=7&&e.clientWidth?e.clientWidth/n.options.aspectRatio/6:null;return xe(P1,{unit:"day"},(f,h)=>xe(qn,null,e.cells.map((p,g)=>xe(NH,{ref:this.rowRefs.createRef(g),key:p.length?p[0].date.toISOString():g,showDayNumbers:r>1,showWeekNumbers:e.showWeekNumbers,todayRange:h,dateProfile:e.dateProfile,cells:p,renderIntro:e.renderRowIntro,businessHourSegs:i[g],eventSelection:e.eventSelection,bgEventSegs:s[g],fgEventSegs:a[g],dateSelectionSegs:o[g],eventDrag:c[g],eventResize:u[g],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:d,forPrint:e.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],n=e?e.closest(".fc-daygrid-body"):null;n&&(this.rootEl=n,this.context.registerInteractiveComponent(this,{el:n,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new Ix(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new Ix(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,n){let{colPositions:r,rowPositions:i}=this,s=r.leftToIndex(e),a=i.topToIndex(n);if(a!=null&&s!=null){let o=this.props.cells[a][s];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(a,s),allDay:!0},o.extraDateSpan),dayEl:this.getCellEl(a,s),rect:{left:r.lefts[s],right:r.rights[s],top:i.tops[a],bottom:i.bottoms[a]},layer:0}}return null}getCellEl(e,n){return this.rowRefs.currentMap[e].getCellEls()[n]}getCellRange(e,n){let r=this.props.cells[e][n].date,i=Rr(r,1);return{start:r,end:i}}}function u6e(t,e){return w0(t.filter(d6e),e)}function d6e(t){return t.eventRange.def.allDay}class f6e extends pd{constructor(){super(...arguments),this.elRef=Bo(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:n,dayMaxEvents:r,expandRows:i}=e,s=r===!0||n===!0;s&&!i&&(s=!1,n=null,r=null);let a=["fc-daygrid-body",s?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",i?"":"fc-daygrid-body-natural"];return xe("div",{ref:this.elRef,className:a.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},xe("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:i?e.clientHeight:""}},e.colGroupNode,xe("tbody",{role:"presentation"},xe(c6e,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:r,dayMaxEventRows:n,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=h6e(this.elRef.current,this.props.dateProfile);if(e){const n=e.closest(".fc-daygrid-body"),r=n.closest(".fc-scroller"),i=e.getBoundingClientRect().top-n.getBoundingClientRect().top;r.scrollTop=i?i+1:0}this.needsScrollReset=!1}}}function h6e(t,e){let n;return e.currentRangeUnit.match(/year|month/)&&(n=t.querySelector(`[data-date="${V5e(e.currentDate)}-01"]`)),n||(n=t.querySelector(`[data-date="${CP(e.currentDate)}"]`)),n}class p6e extends KLe{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,n){return n.sliceRange(e)}}class m6e extends pd{constructor(){super(...arguments),this.slicer=new p6e,this.tableRef=Bo()}render(){let{props:e,context:n}=this;return xe(f6e,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,n,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}class g6e extends Y$e{constructor(){super(...arguments),this.buildDayTableModel=Gt(v6e),this.headerRef=Bo(),this.tableRef=Bo()}render(){let{options:e,dateProfileGenerator:n}=this.context,{props:r}=this,i=this.buildDayTableModel(r.dateProfile,n),s=e.dayHeaders&&xe(BLe,{ref:this.headerRef,dateProfile:r.dateProfile,dates:i.headerDates,datesRepDistinctDays:i.rowCnt===1}),a=o=>xe(m6e,{ref:this.tableRef,dateProfile:r.dateProfile,dayTableModel:i,businessHours:r.businessHours,dateSelection:r.dateSelection,eventStore:r.eventStore,eventUiBases:r.eventUiBases,eventSelection:r.eventSelection,eventDrag:r.eventDrag,eventResize:r.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:o.tableColGroupNode,tableMinWidth:o.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!r.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:o.clientWidth,clientHeight:o.clientHeight,forPrint:r.forPrint});return e.dayMinWidth?this.renderHScrollLayout(s,a,i.colCnt,e.dayMinWidth):this.renderSimpleLayout(s,a)}}function v6e(t,e){let n=new WLe(t.renderRange,e);return new HLe(n,/year|month|week/.test(t.currentRangeUnit))}class y6e extends RW{buildRenderRange(e,n,r){let i=super.buildRenderRange(e,n,r),{props:s}=this;return b6e({currentRange:i,snapToWeek:/^(year|month)$/.test(n),fixedWeekCount:s.fixedWeekCount,dateEnv:s.dateEnv})}}function b6e(t){let{dateEnv:e,currentRange:n}=t,{start:r,end:i}=n,s;if(t.snapToWeek&&(r=e.startOfWeek(r),s=e.startOfWeek(i),s.valueOf()!==i.valueOf()&&(i=M3(s,1))),t.fixedWeekCount){let a=e.startOfWeek(e.startOfMonth(Rr(n.end,-1))),o=Math.ceil(N5e(a,i));i=M3(i,6-o)}return{start:r,end:i}}var x6e=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';bW(x6e);var PH=mc({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:g6e,dateProfileGeneratorClass:y6e},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}}),kH={code:"es",week:{dow:1,doy:4},buttonText:{prev:"Ant",next:"Sig",today:"Hoy",year:"Año",month:"Mes",week:"Semana",day:"Día",list:"Agenda"},buttonHints:{prev:"$0 antes",next:"$0 siguiente",today(t){return t==="Día"?"Hoy":(t==="Semana"?"Esta":"Este")+" "+t.toLocaleLowerCase()}},viewHint(t){return"Vista "+(t==="Semana"?"de la":"del")+" "+t.toLocaleLowerCase()},weekText:"Sm",weekTextLong:"Semana",allDayText:"Todo el día",moreLinkText:"más",moreLinkHint(t){return`Mostrar ${t} eventos más`},noEventsText:"No hay eventos para mostrar",navLinkHint:"Ir al $0",closeHint:"Cerrar",timeHint:"La hora",eventHint:"Evento"};const w6e=(t,e)=>{const n=[],r=new Date,i=r.getFullYear();return t.forEach(s=>{const a=s.category==="Tratamiento"?"#007AFF":"#AF52DE";if(e==="Maternidad"&&s.trigger.type==="age"&&s.trigger.days)s.trigger.days.forEach(o=>{const c=new Date;c.setDate(r.getDate()+o),n.push({title:s.name,start:c,backgroundColor:a,borderColor:a})});else if(e==="Adultos"&&s.trigger.type==="fixed_date_period"&&s.trigger.month&&s.trigger.week){const o=(s.trigger.week-1)*7+1,c=new Date(i,s.trigger.month-1,o);n.push({title:s.name,start:c,backgroundColor:a,borderColor:a})}}),n},_6e=({isOpen:t,onClose:e,activities:n,targetGroup:r})=>{const i=q.useMemo(()=>w6e(n,r),[n,r]);return l.jsx(at,{isOpen:t,onClose:e,title:"",children:l.jsxs(Ln.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full max-w-2xl mx-auto p-4 sm:p-0",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-white leading-none",children:"Previsualización del Plan"}),l.jsx("p",{className:"text-zinc-400 mt-2",children:r==="Maternidad"?"Este calendario simula las fechas de las actividades asumiendo un nacimiento el día de hoy.":"Este calendario muestra la distribución de las actividades a lo largo del año actual."})]}),l.jsx("div",{className:"h-[55vh] sm:h-[60vh] text-white",children:l.jsx(qP,{plugins:[PH],initialView:"dayGridMonth",locale:kH,events:i,height:"100%",headerToolbar:{left:"prev,next",center:"title",right:"today"}})}),l.jsx("div",{className:"flex justify-end mt-6",children:l.jsx("button",{onClick:e,className:"px-6 py-3 bg-brand-blue text-white font-bold rounded-xl w-full sm:w-auto",children:"Cerrar"})})]})})},S6e=({targetGroup:t,activityType:e,onSaveActivity:n,existingActivity:r,clearEditing:i})=>{const{products:s,addProduct:a}=rt(),[o,c]=N.useState(""),[u,d]=N.useState(""),[f,h]=N.useState(""),[p,g]=N.useState(!1),[m,y]=N.useState(null),[x,w]=N.useState(new Set),[_,A]=N.useState(""),[E,C]=N.useState(null),j=["0","8","15","21","30","45","60","75","90","105","120"],F=e==="Control"?t==="Maternidad"?["Cura de Ombligo","Descorne","Castración","Hematología","Coprología","FAMACHA"]:["Hematología","Coprología","Arreglo Podal","FAMACHA"]:t==="Maternidad"?["Coxidioestático","Desparasitación","Vacuna Clostridial"]:["Desparasitación","Vacuna Leptospirosis","Vacuna Clostridial","Vacuna Rabia"],R=N.useMemo(()=>s.reduce((Q,ce)=>{const ie=ce.category||"Otro";return Q[ie]||(Q[ie]=[]),Q[ie].push(ce),Q},{}),[s]);N.useEffect(()=>{r?(c(r.name),e==="Tratamiento"&&(d(r.productId||""),h(r.complementaryProductId||"")),t==="Maternidad"&&r.trigger.days&&w(new Set(r.trigger.days.map(String))),t==="Adultos"&&r.trigger.month&&r.trigger.week&&w(new Set([`${r.trigger.month}-${r.trigger.week}`]))):H()},[r,e,t]);const H=()=>{c(""),d(""),h(""),w(new Set),A(""),y(null),i()},X=Q=>{Q.trim()&&w(ce=>{const ie=new Set(ce);return ie.has(Q)?ie.delete(Q):ie.add(Q),ie})},W=()=>{_&&!isNaN(Number(_))&&(X(_),A(""))},U=async Q=>{await a(Q),g(!1)},$=()=>{if(y(null),!o.trim()){y("El nombre es obligatorio.");return}if(e==="Tratamiento"&&!u){y("Debe seleccionar un producto principal.");return}if(x.size===0){y("Debe seleccionar al menos un tiempo de aplicación.");return}const Q=[],ce={category:e,name:o};if(e==="Tratamiento"&&(u&&(ce.productId=u),f&&(ce.complementaryProductId=f)),t==="Maternidad"){const ie={type:"age",days:Array.from(x).map(Number).sort((oe,ve)=>oe-ve)};Q.push({...ce,trigger:ie})}else Array.from(x).forEach(ie=>{const[oe,ve]=ie.split("-").map(Number),je={type:"fixed_date_period",month:oe,week:ve};Q.push({...ce,trigger:je})});Q.forEach(ie=>n(ie,!!r)),H()},Y=Array.from(x).filter(Q=>!j.includes(Q));return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("h3",{className:"text-xl font-semibold text-white",children:["Añadir ",e]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{list:"activity-names-list",value:o,onChange:Q=>c(Q.target.value),placeholder:`Nombre del ${e}...`,className:"w-full bg-zinc-800 p-3 rounded-lg text-base"}),l.jsx("datalist",{id:"activity-names-list",children:F.map(Q=>l.jsx("option",{value:Q},Q))}),e==="Control"&&l.jsx("button",{type:"button",onClick:()=>alert("Funcionalidad para crear nuevos tipos de control en desarrollo."),className:"flex-shrink-0 p-3 bg-brand-orange/80 text-white rounded-lg",children:l.jsx(ss,{size:20})})]}),e==="Tratamiento"&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{value:u,onChange:Q=>d(Q.target.value),className:"w-full bg-zinc-800 p-3 rounded-lg text-base appearance-none",children:[l.jsx("option",{value:"",disabled:!0,children:"Producto Principal..."}),Object.entries(R).map(([Q,ce])=>l.jsx("optgroup",{label:Q,children:ce.map(ie=>l.jsx("option",{value:ie.id,children:ie.name},ie.id))},Q))]}),l.jsx("button",{type:"button",onClick:()=>g(!0),className:"flex-shrink-0 p-3 bg-brand-orange text-white rounded-lg",children:l.jsx(ss,{size:20})})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{value:f,onChange:Q=>h(Q.target.value),className:"w-full bg-zinc-800 p-3 rounded-lg text-base appearance-none",children:[l.jsx("option",{value:"",children:"Producto Complementario (Opcional)..."}),Object.entries(R).map(([Q,ce])=>l.jsx("optgroup",{label:Q,children:ce.map(ie=>l.jsx("option",{value:ie.id,children:ie.name},ie.id))},Q))]}),l.jsx("button",{type:"button",onClick:()=>g(!0),className:"flex-shrink-0 p-3 bg-brand-orange/50 text-white rounded-lg",children:l.jsx(ss,{size:20})})]})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("label",{className:"text-base font-medium text-zinc-400",children:"Tiempos de Aplicación (Selecciona uno o varios)"}),t==="Maternidad"?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex flex-wrap gap-2",children:[j.map(Q=>l.jsx("button",{type:"button",onClick:()=>X(Q),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-colors ${x.has(Q)?"bg-zinc-200 text-black":"bg-zinc-700 text-zinc-300"}`,children:Q==="0"?"Nacimiento":`${Q} días`},Q)),Y.map(Q=>l.jsxs("button",{type:"button",onClick:()=>X(Q),className:"flex items-center gap-1.5 px-4 py-2 text-sm font-semibold rounded-lg bg-zinc-200 text-black",children:[Q," días ",l.jsx(Za,{size:16})]},`manual-${Q}`))]}),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[l.jsx("input",{type:"number",value:_,onChange:Q=>A(Q.target.value),placeholder:"Día manual...",className:"w-full bg-zinc-800 p-3 rounded-lg text-base"}),l.jsx("button",{type:"button",onClick:W,className:"px-5 py-3 bg-zinc-700 text-white font-semibold rounded-lg text-sm hover:bg-zinc-600",children:"Agregar"})]})]}):l.jsx("div",{className:"p-2 bg-zinc-800 rounded-lg",children:l.jsx(u0,{mode:"wait",children:E?l.jsxs(Ln.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:()=>C(null),className:"p-2 text-zinc-400 hover:bg-zinc-700 rounded-md",children:l.jsx(ar,{size:16})}),l.jsx("h4",{className:"font-bold text-white",children:new Date(0,E-1).toLocaleString("es-VE",{month:"long"})})]}),l.jsx("div",{className:"grid grid-cols-4 gap-2",children:[1,2,3,4].map(Q=>{const ce=`${E}-${Q}`,ie=x.has(ce);return l.jsxs("button",{type:"button",onClick:()=>X(ce),className:`py-3 px-2 text-sm font-semibold rounded-md transition-colors ${ie?"bg-teal-500 text-white":"bg-zinc-700 text-zinc-300 hover:bg-zinc-600"}`,children:["Semana ",Q]},Q)})})]},"weeks-view"):l.jsx(Ln.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"grid grid-cols-4 gap-2",children:[...Array(12)].map((Q,ce)=>{const ie=ce+1,oe=new Date(0,ce).toLocaleString("es-VE",{month:"short"}),ve=Array.from(x).some(je=>je.startsWith(`${ie}-`));return l.jsxs("button",{type:"button",onClick:()=>C(ie),className:"relative text-center py-3 px-2 text-sm font-semibold rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-300 transition-colors",children:[ve&&l.jsx("span",{className:"absolute top-1.5 right-1.5 w-1.5 h-1.5 bg-brand-green rounded-full"}),oe.charAt(0).toUpperCase()+oe.slice(1)]},ie)})},"months-view")})})]}),m&&l.jsxs("p",{className:"text-sm text-red-400 flex items-center gap-2",children:[l.jsx($t,{size:16})," ",m]}),l.jsx("button",{type:"button",onClick:$,className:"w-full py-3 bg-brand-orange text-black font-bold rounded-lg text-base mt-4",children:r?"Actualizar Actividad":"Añadir a la Lista"}),l.jsx(at,{isOpen:p,onClose:()=>g(!1),title:"Crear Producto",children:l.jsx(wP,{onSave:U,onCancel:()=>g(!1)})})]})},A6e=({onSave:t,onCancel:e})=>{const[n,r]=N.useState(1),[i,s]=N.useState(""),[a,o]=N.useState(""),[c,u]=N.useState("Maternidad"),[d,f]=N.useState(new Set),[h,p]=N.useState([]),[g,m]=N.useState(null),[y,x]=N.useState(null),[w,_]=N.useState(!1),[A,E]=N.useState("Tratamiento"),[C,j]=N.useState(!1),T=["Cabritonas","Cabras","Reproductores","Machos de Levante"],P=H=>{f(X=>{const W=new Set(X);return W.has(H)?W.delete(H):W.add(H),W})},I=(H,X)=>{p(X&&g?W=>W.map(U=>U.tempId===g.tempId?{...H,tempId:U.tempId}:U):W=>[...W,{...H,tempId:Date.now()}])},M=H=>{p(X=>X.filter(W=>W.tempId!==H))},F=async()=>{if(!i.trim()){x("El nombre del plan es obligatorio.");return}if(c==="Adultos"&&d.size===0){x("Debe seleccionar al menos una categoría de adulto.");return}if(h.length===0){x("Debe añadir al menos una actividad al plan.");return}x(null),_(!0);try{const H=h.map(({tempId:W,...U})=>U),X={name:i,description:a,targetGroup:c,adultsSubgroup:c==="Adultos"?Array.from(d):void 0};await t(X,H)}catch{x("No se pudo guardar el plan."),_(!1)}},R=()=>n===1?l.jsxs(Ln.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},transition:{duration:.3},className:"space-y-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Crear Plan Sanitario"}),l.jsx("p",{className:"text-zinc-400",children:"Paso 1: Define tu plan"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("input",{type:"text",value:i,onChange:H=>s(H.target.value),placeholder:"Nombre del Plan",className:"w-full bg-zinc-800 p-3 rounded-xl text-base"}),l.jsx("input",{type:"text",value:a,onChange:H=>o(H.target.value),placeholder:"Descripción (Opcional)",className:"w-full bg-zinc-800 p-3 rounded-xl text-base"}),l.jsxs("div",{children:[l.jsx("label",{className:"text-base font-medium text-zinc-400 mb-2 block",children:"Grupo Objetivo"}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("button",{type:"button",onClick:()=>u("Maternidad"),className:`p-4 rounded-2xl border-2 flex flex-col items-center gap-2 transition-all ${c==="Maternidad"?"bg-teal-500/20 border-teal-500 scale-105":"bg-zinc-800/50 border-zinc-700"}`,children:[l.jsx(wte,{className:"w-8 h-8 text-teal-400"}),l.jsx("span",{className:"font-semibold text-white",children:"Maternidad"})]}),l.jsxs("button",{type:"button",onClick:()=>u("Adultos"),className:`p-4 rounded-2xl border-2 flex flex-col items-center gap-2 transition-all ${c==="Adultos"?"bg-pink-500/20 border-pink-500 scale-105":"bg-zinc-800/50 border-zinc-700"}`,children:[l.jsx(Ate,{className:"w-8 h-8 text-pink-400"}),l.jsx("span",{className:"font-semibold text-white",children:"Rebaño Adulto"})]})]})]})]}),y&&l.jsxs("p",{className:"text-sm text-red-400 flex items-center gap-2 mt-4",children:[l.jsx($t,{size:16})," ",y]}),l.jsxs("div",{className:"flex flex-col sm:flex-row-reverse sm:justify-start gap-3 pt-4",children:[l.jsx("button",{onClick:()=>{i.trim()?(r(2),x(null)):x("El nombre del plan es obligatorio.")},className:"w-full sm:w-auto px-5 py-3 bg-brand-orange text-black font-bold rounded-xl flex items-center justify-center gap-2",children:"Siguiente"}),l.jsx("button",{onClick:e,className:"w-full sm:w-auto px-5 py-3 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-xl",children:"Cancelar"})]})]},"step1"):n===2?l.jsxs(Ln.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},className:"space-y-8",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:i||"Nuevo Plan"}),l.jsxs("p",{className:"text-zinc-400",children:["Paso 2: Añade las actividades para el grupo: ",l.jsx("span",{className:"font-semibold text-white",children:c})]})]}),l.jsx(u0,{children:c==="Adultos"&&l.jsxs(Ln.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2 overflow-hidden",children:[l.jsx("label",{className:"text-base font-medium text-zinc-400 mb-2 block",children:"Categorías (Selecciona una o varias)"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:T.map(H=>l.jsx("button",{type:"button",onClick:()=>P(H),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-colors ${d.has(H)?"bg-pink-500 text-white":"bg-zinc-700 text-zinc-300"}`,children:H},H))})]})}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("h3",{className:"text-xl font-semibold text-zinc-300",children:["Actividades del Plan (",h.length,")"]}),l.jsx("div",{className:"min-h-[100px] max-h-60 overflow-y-auto pr-2 border border-brand-border rounded-xl p-2 space-y-2",children:l.jsx(u0,{children:h.length>0?h.map(H=>{var X;return l.jsxs(Ln.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`flex justify-between items-center bg-zinc-800 p-3 rounded-lg border-l-4 ${H.category==="Tratamiento"?"border-blue-500":"border-purple-500"}`,children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-white",children:H.name}),l.jsxs("p",{className:"text-xs text-zinc-400",children:[((X=H.trigger.days)==null?void 0:X.map(W=>W===0?"Nacer":W).join(", "))||"Tiempos no definidos"," días"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>m({activity:H,tempId:H.tempId}),className:"p-1 text-zinc-400 hover:text-brand-orange",children:l.jsx(ac,{size:16})}),l.jsx("button",{onClick:()=>M(H.tempId),className:"p-1 text-zinc-400 hover:text-brand-red",children:l.jsx(ya,{size:16})})]})]},H.tempId)}):l.jsx("div",{className:"text-center py-6 text-zinc-500",children:l.jsx("p",{children:"Añade actividades para empezar a construir tu plan."})})})})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"relative flex w-full max-w-sm mx-auto justify-between rounded-lg bg-zinc-800 p-1 mb-6",children:[l.jsxs("button",{type:"button",onClick:()=>E("Tratamiento"),className:"relative z-10 w-1/2 py-2 text-sm font-semibold text-white flex items-center justify-center gap-2",children:[l.jsx(Ste,{})," Tratamiento"]}),l.jsxs("button",{type:"button",onClick:()=>E("Control"),className:"relative z-10 w-1/2 py-2 text-sm font-semibold text-white flex items-center justify-center gap-2",children:[l.jsx(_te,{})," Control"]}),l.jsx(Ln.div,{layoutId:"add-type-bg",transition:{type:"spring",stiffness:400,damping:30},className:`absolute top-1 h-[calc(100%-0.5rem)] w-1/2 rounded-md bg-zinc-600 ${A==="Control"?"left-1/2":"left-1"}`})]}),l.jsx(S6e,{targetGroup:c,activityType:A,onSaveActivity:I,existingActivity:g?g.activity:null,clearEditing:()=>m(null)})]}),y&&l.jsxs("p",{className:"text-sm text-red-400 flex items-center gap-2 mt-4",children:[l.jsx($t,{size:16})," ",y]}),l.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-between items-center pt-6 gap-4",children:[l.jsxs("button",{onClick:()=>r(1),className:"w-full sm:w-auto px-5 py-3 text-zinc-300 font-semibold rounded-xl flex items-center justify-center gap-2 hover:bg-zinc-700",children:[l.jsx(ar,{size:16})," Atrás"]}),l.jsxs("div",{className:"flex gap-3 w-full sm:w-auto",children:[l.jsxs("button",{onClick:()=>j(!0),className:"flex-1 px-5 py-3 bg-brand-blue text-white font-bold rounded-xl flex items-center justify-center gap-2",children:[l.jsx(kF,{size:16})," Previsualizar"]}),l.jsx("button",{onClick:F,disabled:w,className:"flex-1 px-5 py-3 bg-brand-green text-white font-bold rounded-xl flex items-center justify-center gap-2 disabled:opacity-50",children:w?"Guardando...":l.jsxs(l.Fragment,{children:[l.jsx(ri,{size:16})," Guardar"]})})]})]})]},"step2"):null;return l.jsxs("div",{className:"w-full p-4",children:[l.jsx(u0,{mode:"wait",children:R()}),l.jsx(_6e,{isOpen:C,onClose:()=>j(!1),activities:h,targetGroup:c})]})},E6e=({plan:t,onClick:e,onDelete:n,isDeleting:r})=>{const i=lc(),s=N.useRef(!1),a=(o,c)=>{const u=c.offset.x,d=c.velocity.x;if(Math.abs(u)<5&&!s.current){e();return}u<-80/2||d<-500?i.start({x:-80}):i.start({x:0}),setTimeout(()=>{s.current=!1},100)};return l.jsxs("div",{className:`relative w-full overflow-hidden rounded-2xl bg-dashboard-surface border border-brand-border transition-opacity ${r?"opacity-50":"opacity-100"}`,children:[l.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:l.jsxs("button",{onClick:n,onPointerDown:o=>o.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-red text-white transition-colors hover:bg-red-600",children:[l.jsx(ya,{size:22}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Eliminar"})]})}),l.jsx(Ln.div,{drag:"x",dragConstraints:{left:-80,right:0},dragElastic:.1,onDragStart:()=>{s.current=!0},onDragEnd:a,onTap:()=>{!s.current&&!r&&e()},animate:i,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg p-4",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:t.name}),l.jsx("p",{className:"text-sm text-zinc-400 mt-1",children:t.description||`Plan para ${t.targetGroup}`})]}),r?l.jsx(ug,{className:"animate-spin text-zinc-400"}):l.jsx(Gn,{className:"text-zinc-600"})]})})]})};function j6e({navigateTo:t}){const{healthPlans:e,deleteHealthPlan:n,addHealthPlanWithActivities:r}=rt(),[i,s]=N.useState(!1),[a,o]=N.useState(null),[c,u]=N.useState(null),d=async(h,p)=>{await r(h,p),s(!1)},f=async()=>{if(a!=null&&a.id){u(a.id),o(null);try{await n(a.id)}catch(h){console.error("Error al eliminar el plan:",h)}finally{u(null)}}};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4",children:[l.jsxs("header",{className:"text-center",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Planificador Sanitario"}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Define tus Protocolos y Planes"})]}),l.jsxs("button",{onClick:()=>s(!0),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:opacity-90 text-black font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[l.jsx(ir,{size:18})," Crear Nuevo Plan Sanitario"]}),l.jsx("div",{className:"space-y-3 pt-4",children:e.length>0?e.map(h=>l.jsx(E6e,{plan:h,onClick:()=>t({name:"plan-detail",planId:h.id}),onDelete:()=>o(h),isDeleting:c===h.id},h.id)):l.jsxs("div",{className:"text-center py-10 bg-dashboard-surface rounded-2xl flex flex-col items-center gap-4",children:[l.jsx(iT,{size:48,className:"text-zinc-600"}),l.jsx("p",{className:"text-zinc-400 font-semibold",children:"Aún no has creado ningún plan."}),l.jsx("p",{className:"text-zinc-500 text-sm",children:"Usa el botón de arriba para empezar."})]})})]}),l.jsx(at,{isOpen:i,onClose:()=>s(!1),title:"",children:l.jsx(A6e,{onSave:d,onCancel:()=>s(!1)})}),l.jsx(_1,{isOpen:!!a,onClose:()=>o(null),onConfirm:f,title:`Eliminar Plan "${a==null?void 0:a.name}"`,message:"¿Estás seguro? Al eliminar el plan, también se eliminarán todas sus actividades asociadas. Esta acción no se puede deshacer."})]})}WP.touchMouseIgnoreWait=500;let vj=0,Ox=0,yj=!1;class DH{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=n=>{if(!this.shouldIgnoreMouse()&&C6e(n)&&this.tryStart(n)){let r=this.createEventFromMouse(n,!0);this.emitter.trigger("pointerdown",r),this.initScrollWatch(r),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=n=>{let r=this.createEventFromMouse(n);this.recordCoords(r),this.emitter.trigger("pointermove",r)},this.handleMouseUp=n=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(n)),this.cleanup()},this.handleTouchStart=n=>{if(this.tryStart(n)){this.isTouchDragging=!0;let r=this.createEventFromTouch(n,!0);this.emitter.trigger("pointerdown",r),this.initScrollWatch(r);let i=n.target;this.shouldIgnoreMove||i.addEventListener("touchmove",this.handleTouchMove),i.addEventListener("touchend",this.handleTouchEnd),i.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=n=>{let r=this.createEventFromTouch(n);this.recordCoords(r),this.emitter.trigger("pointermove",r)},this.handleTouchEnd=n=>{if(this.isDragging){let r=n.target;r.removeEventListener("touchmove",this.handleTouchMove),r.removeEventListener("touchend",this.handleTouchEnd),r.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(n)),this.cleanup(),this.isTouchDragging=!1,T6e()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=n=>{if(!this.shouldIgnoreMove){let r=window.scrollX-this.prevScrollX+this.prevPageX,i=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:n,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:r,pageY:i,deltaX:r-this.origPageX,deltaY:i-this.origPageY})}},this.containerEl=e,this.emitter=new N1,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),N6e()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),P6e()}tryStart(e){let n=this.querySubjectEl(e),r=e.target;return n&&(!this.handleSelector||mi(r,this.handleSelector))?(this.subjectEl=n,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){yj=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?mi(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return vj||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(yj=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,n){let r=0,i=0;return n?(this.origPageX=e.pageX,this.origPageY=e.pageY):(r=e.pageX-this.origPageX,i=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:r,deltaY:i}}createEventFromTouch(e,n){let r=e.touches,i,s,a=0,o=0;return r&&r.length?(i=r[0].pageX,s=r[0].pageY):(i=e.pageX,s=e.pageY),n?(this.origPageX=i,this.origPageY=s):(a=i-this.origPageX,o=s-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:i,pageY:s,deltaX:a,deltaY:o}}}function C6e(t){return t.button===0&&!t.ctrlKey}function T6e(){vj+=1,setTimeout(()=>{vj-=1},WP.touchMouseIgnoreWait)}function N6e(){Ox+=1,Ox===1&&window.addEventListener("touchmove",IH,{passive:!1})}function P6e(){Ox-=1,Ox||window.removeEventListener("touchmove",IH,{passive:!1})}function IH(t){yj&&t.preventDefault()}class k6e{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,n,r){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=n-window.scrollX,this.origScreenY=r-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,n){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=n-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,n){let r=()=>{this.cleanup(),n()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(r,this.revertDuration):setTimeout(r,0)}doRevertAnimation(e,n){let r=this.mirrorEl,i=this.sourceEl.getBoundingClientRect();r.style.transition="top "+n+"ms,left "+n+"ms",Nm(r,{left:i.left,top:i.top}),d5e(r,()=>{r.style.transition="",e()})}cleanup(){this.mirrorEl&&(AP(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&Nm(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,n=this.mirrorEl;return n||(n=this.mirrorEl=this.sourceEl.cloneNode(!0),n.style.userSelect="none",n.style.webkitUserSelect="none",n.style.pointerEvents="none",n.classList.add("fc-event-dragging"),Nm(n,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(n)),n}}class OH extends UP{constructor(e,n){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=n,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class MH extends OH{constructor(e,n){super(new OLe(e),n)}getEventTarget(){return this.scrollController.el}computeClientRect(){return DLe(this.scrollController.el)}}class D6e extends OH{constructor(e){super(new MLe,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const dL=typeof performance=="function"?performance.now:Date.now;class I6e{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let n=dL();this.handleSide(e,(n-this.msSinceRequest)/1e3),this.requestAnimation(n)}else this.isAnimating=!1}}}start(e,n,r){this.isEnabled&&(this.scrollCaches=this.buildCaches(r),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,n))}handleMove(e,n){if(this.isEnabled){let r=e-window.scrollX,i=n-window.scrollY,s=this.pointerScreenY===null?0:i-this.pointerScreenY,a=this.pointerScreenX===null?0:r-this.pointerScreenX;s<0?this.everMovedUp=!0:s>0&&(this.everMovedDown=!0),a<0?this.everMovedLeft=!0:a>0&&(this.everMovedRight=!0),this.pointerScreenX=r,this.pointerScreenY=i,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(dL()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,n){let{scrollCache:r}=e,{edgeThreshold:i}=this,s=i-e.distance,a=s*s/(i*i)*this.maxVelocity*n,o=1;switch(e.name){case"left":o=-1;case"right":r.setScrollLeft(r.getScrollLeft()+a*o);break;case"top":o=-1;case"bottom":r.setScrollTop(r.getScrollTop()+a*o);break}}computeBestEdge(e,n){let{edgeThreshold:r}=this,i=null,s=this.scrollCaches||[];for(let a of s){let o=a.clientRect,c=e-o.left,u=o.right-e,d=n-o.top,f=o.bottom-n;c>=0&&u>=0&&d>=0&&f>=0&&(d<=r&&this.everMovedUp&&a.canScrollUp()&&(!i||i.distance>d)&&(i={scrollCache:a,name:"top",distance:d}),f<=r&&this.everMovedDown&&a.canScrollDown()&&(!i||i.distance>f)&&(i={scrollCache:a,name:"bottom",distance:f}),c<=r&&this.everMovedLeft&&a.canScrollLeft()&&(!i||i.distance>c)&&(i={scrollCache:a,name:"left",distance:c}),u<=r&&this.everMovedRight&&a.canScrollRight()&&(!i||i.distance>u)&&(i={scrollCache:a,name:"right",distance:u}))}return i}buildCaches(e){return this.queryScrollEls(e).map(n=>n===window?new D6e(!1):new MH(n,!1))}queryScrollEls(e){let n=[];for(let r of this.scrollQuery)typeof r=="object"?n.push(r):n.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(r)));return n}}class $v extends LLe{constructor(e,n){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=i=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,f5e(document.body),p5e(document.body),i.isTouch||i.origEvent.preventDefault(),this.emitter.trigger("pointerdown",i),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(i.subjectEl,i.pageX,i.pageY),this.startDelay(i),this.minDistance||this.handleDistanceSurpassed(i)))},this.onPointerMove=i=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",i),!this.isDistanceSurpassed){let s=this.minDistance,a,{deltaX:o,deltaY:c}=i;a=o*o+c*c,a>=s*s&&this.handleDistanceSurpassed(i)}this.isDragging&&(i.origEvent.type!=="scroll"&&(this.mirror.handleMove(i.pageX,i.pageY),this.autoScroller.handleMove(i.pageX,i.pageY)),this.emitter.trigger("dragmove",i))}},this.onPointerUp=i=>{this.isInteracting&&(this.isInteracting=!1,h5e(document.body),m5e(document.body),this.emitter.trigger("pointerup",i),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(i)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let r=this.pointer=new DH(e);r.emitter.on("pointerdown",this.onPointerDown),r.emitter.on("pointermove",this.onPointerMove),r.emitter.on("pointerup",this.onPointerUp),n&&(r.selector=n),this.mirror=new k6e,this.autoScroller=new I6e}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class O6e{constructor(e){this.el=e,this.origRect=BP(e),this.scrollCaches=tH(e).map(n=>new MH(n,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let n of this.scrollCaches)e+=n.origScrollLeft-n.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let n of this.scrollCaches)e+=n.origScrollTop-n.getScrollTop();return e}isWithinClipping(e,n){let r={left:e,top:n};for(let i of this.scrollCaches)if(!M6e(i.getEventTarget())&&!wLe(r,i.clientRect))return!1;return!0}}function M6e(t){let e=t.tagName;return e==="HTML"||e==="BODY"}class k1{constructor(e,n){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=r=>{let{dragging:i}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(r),this.initialHit||!this.requireInitial?(i.setIgnoreMove(!1),this.emitter.trigger("pointerdown",r)):i.setIgnoreMove(!0)},this.handleDragStart=r=>{this.emitter.trigger("dragstart",r),this.handleMove(r,!0)},this.handleDragMove=r=>{this.emitter.trigger("dragmove",r),this.handleMove(r)},this.handlePointerUp=r=>{this.releaseHits(),this.emitter.trigger("pointerup",r)},this.handleDragEnd=r=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,r),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",r)},this.droppableStore=n,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new N1}processFirstCoord(e){let n={left:e.pageX,top:e.pageY},r=n,i=e.subjectEl,s;i instanceof HTMLElement&&(s=BP(i),r=_Le(r,s));let a=this.initialHit=this.queryHitForOffset(r.left,r.top);if(a){if(this.useSubjectCenter&&s){let o=ZW(s,a.rect);o&&(r=SLe(o))}this.coordAdjust=ALe(r,n)}else this.coordAdjust={left:0,top:0}}handleMove(e,n){let r=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(n||!D1(this.movingHit,r))&&(this.movingHit=r,this.emitter.trigger("hitupdate",r,!1,e))}prepareHits(){this.offsetTrackers=dd(this.droppableStore,e=>(e.component.prepareHits(),new O6e(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let n in e)e[n].destroy();this.offsetTrackers={}}queryHitForOffset(e,n){let{droppableStore:r,offsetTrackers:i}=this,s=null;for(let a in r){let o=r[a].component,c=i[a];if(c&&c.isWithinClipping(e,n)){let u=c.computeLeft(),d=c.computeTop(),f=e-u,h=n-d,{origRect:p}=c,g=p.right-p.left,m=p.bottom-p.top;if(f>=0&&f<g&&h>=0&&h<m){let y=o.queryHit(f,h,g,m);y&&C1(y.dateProfile.activeRange,y.dateSpan.range)&&(this.disablePointCheck||c.el.contains(c.el.getRootNode().elementFromPoint(f+u-window.scrollX,h+d-window.scrollY)))&&(!s||y.layer>s.layer)&&(y.componentId=a,y.context=o.context,y.rect.left+=u,y.rect.right+=u,y.rect.top+=d,y.rect.bottom+=d,s=y)}}}return s}}function D1(t,e){return!t&&!e?!0:!!t!=!!e?!1:uLe(t.dateSpan,e.dateSpan)}function RH(t,e){let n={};for(let r of e.pluginHooks.datePointTransforms)Object.assign(n,r(t,e));return Object.assign(n,R6e(t,e.dateEnv)),n}function R6e(t,e){return{date:e.toDate(t.range.start),dateStr:e.formatIso(t.range.start,{omitTime:t.allDay}),allDay:t.allDay}}class L6e extends ip{constructor(e){super(e),this.handlePointerDown=r=>{let{dragging:i}=this,s=r.origEvent.target;i.setIgnoreMove(!this.component.isValidDateDownEl(s))},this.handleDragEnd=r=>{let{component:i}=this,{pointer:s}=this.dragging;if(!s.wasTouchScroll){let{initialHit:a,finalHit:o}=this.hitDragging;if(a&&o&&D1(a,o)){let{context:c}=i,u=Object.assign(Object.assign({},RH(a.dateSpan,c)),{dayEl:a.dayEl,jsEvent:r.origEvent,view:c.viewApi||c.calendarApi.view});c.emitter.trigger("dateClick",u)}}},this.dragging=new $v(e.el),this.dragging.autoScroller.isEnabled=!1;let n=this.hitDragging=new k1(this.dragging,FP(e));n.emitter.on("pointerdown",this.handlePointerDown),n.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class z6e extends ip{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=a=>{let{component:o,dragging:c}=this,{options:u}=o.context,d=u.selectable&&o.isValidDateDownEl(a.origEvent.target);c.setIgnoreMove(!d),c.delay=a.isTouch?$6e(o):null},this.handleDragStart=a=>{this.component.context.calendarApi.unselect(a)},this.handleHitUpdate=(a,o)=>{let{context:c}=this.component,u=null,d=!1;if(a){let f=this.hitDragging.initialHit;a.componentId===f.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(f,a)||(u=F6e(f,a,c.pluginHooks.dateSelectionTransformers)),(!u||!qLe(u,a.dateProfile,c))&&(d=!0,u=null)}u?c.dispatch({type:"SELECT_DATES",selection:u}):o||c.dispatch({type:"UNSELECT_DATES"}),d?EP():jP(),o||(this.dragSelection=u)},this.handlePointerUp=a=>{this.dragSelection&&(WW(this.dragSelection,a,this.component.context),this.dragSelection=null)};let{component:n}=e,{options:r}=n.context,i=this.dragging=new $v(e.el);i.touchScrollAllowed=!1,i.minDistance=r.selectMinDistance||0,i.autoScroller.isEnabled=r.dragScroll;let s=this.hitDragging=new k1(this.dragging,FP(e));s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function $6e(t){let{options:e}=t.context,n=e.selectLongPressDelay;return n==null&&(n=e.longPressDelay),n}function F6e(t,e,n){let r=t.dateSpan,i=e.dateSpan,s=[r.range.start,r.range.end,i.range.start,i.range.end];s.sort(x5e);let a={};for(let o of n){let c=o(t,e);if(c===!1)return null;c&&Object.assign(a,c)}return a.range={start:s[0],end:s[3]},a.allDay=r.allDay,a}class Fv extends ip{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=a=>{let o=a.origEvent.target,{component:c,dragging:u}=this,{mirror:d}=u,{options:f}=c.context,h=c.context;this.subjectEl=a.subjectEl;let p=this.subjectSeg=Nh(a.subjectEl),m=(this.eventRange=p.eventRange).instance.instanceId;this.relevantEvents=RP(h.getCurrentData().eventStore,m),u.minDistance=a.isTouch?0:f.eventDragMinDistance,u.delay=a.isTouch&&m!==c.props.eventSelection?B6e(c):null,f.fixedMirrorParent?d.parentNode=f.fixedMirrorParent:d.parentNode=mi(o,".fc"),d.revertDuration=f.dragRevertDuration;let y=c.isValidSegDownEl(o)&&!mi(o,".fc-event-resizer");u.setIgnoreMove(!y),this.isDragging=y&&a.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=a=>{let o=this.component.context,c=this.eventRange,u=c.instance.instanceId;a.isTouch?u!==this.component.props.eventSelection&&o.dispatch({type:"SELECT_EVENT",eventInstanceId:u}):o.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(o.calendarApi.unselect(a),o.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new On(o,c.def,c.instance),jsEvent:a.origEvent,view:o.viewApi}))},this.handleHitUpdate=(a,o)=>{if(!this.isDragging)return;let c=this.relevantEvents,u=this.hitDragging.initialHit,d=this.component.context,f=null,h=null,p=null,g=!1,m={affectedEvents:c,mutatedEvents:oa(),isEvent:!0};if(a){f=a.context;let y=f.options;d===f||y.editable&&y.droppable?(h=V6e(u,a,this.eventRange.instance.range.start,f.getCurrentData().pluginHooks.eventDragMutationMassagers),h&&(p=$P(c,f.getCurrentData().eventUiBases,h,f),m.mutatedEvents=p,sH(m,a.dateProfile,f)||(g=!0,h=null,p=null,m.mutatedEvents=oa()))):f=null}this.displayDrag(f,m),g?EP():jP(),o||(d===f&&D1(u,a)&&(h=null),this.dragging.setMirrorNeedsRevert(!h),this.dragging.setMirrorIsVisible(!a||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=f,this.validMutation=h,this.mutatedRelevantEvents=p)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=a=>{if(this.isDragging){let o=this.component.context,c=o.viewApi,{receivingContext:u,validMutation:d}=this,f=this.eventRange.def,h=this.eventRange.instance,p=new On(o,f,h),g=this.relevantEvents,m=this.mutatedRelevantEvents,{finalHit:y}=this.hitDragging;if(this.clearDrag(),o.emitter.trigger("eventDragStop",{el:this.subjectEl,event:p,jsEvent:a.origEvent,view:c}),d){if(u===o){let x=new On(o,m.defs[f.defId],h?m.instances[h.instanceId]:null);o.dispatch({type:"MERGE_EVENTS",eventStore:m});let w={oldEvent:p,event:x,relatedEvents:Su(m,o,h),revert(){o.dispatch({type:"MERGE_EVENTS",eventStore:g})}},_={};for(let A of o.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(_,A(d,o));o.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},w),_),{el:a.subjectEl,delta:d.datesDelta,jsEvent:a.origEvent,view:c})),o.emitter.trigger("eventChange",w)}else if(u){let x={event:p,relatedEvents:Su(g,o,h),revert(){o.dispatch({type:"MERGE_EVENTS",eventStore:g})}};o.emitter.trigger("eventLeave",Object.assign(Object.assign({},x),{draggedEl:a.subjectEl,view:c})),o.dispatch({type:"REMOVE_EVENTS",eventStore:g}),o.emitter.trigger("eventRemove",x);let w=m.defs[f.defId],_=m.instances[h.instanceId],A=new On(u,w,_);u.dispatch({type:"MERGE_EVENTS",eventStore:m});let E={event:A,relatedEvents:Su(m,u,_),revert(){u.dispatch({type:"REMOVE_EVENTS",eventStore:m})}};u.emitter.trigger("eventAdd",E),a.isTouch&&u.dispatch({type:"SELECT_EVENT",eventInstanceId:h.instanceId}),u.emitter.trigger("drop",Object.assign(Object.assign({},RH(y.dateSpan,u)),{draggedEl:a.subjectEl,jsEvent:a.origEvent,view:y.context.viewApi})),u.emitter.trigger("eventReceive",Object.assign(Object.assign({},E),{draggedEl:a.subjectEl,view:y.context.viewApi}))}}else o.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:n}=this,{options:r}=n.context,i=this.dragging=new $v(e.el);i.pointer.selector=Fv.SELECTOR,i.touchScrollAllowed=!1,i.autoScroller.isEnabled=r.dragScroll;let s=this.hitDragging=new k1(this.dragging,pj);s.useSubjectCenter=e.useEventCenter,s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("pointerup",this.handlePointerUp),s.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,n){let r=this.component.context,i=this.receivingContext;i&&i!==e&&(i===r?i.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:n.affectedEvents,mutatedEvents:oa(),isEvent:!0}}):i.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:n})}clearDrag(){let e=this.component.context,{receivingContext:n}=this;n&&n.dispatch({type:"UNSET_EVENT_DRAG"}),e!==n&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}Fv.SELECTOR=".fc-event-draggable, .fc-event-resizable";function V6e(t,e,n,r){let i=t.dateSpan,s=e.dateSpan,a=i.range.start,o=s.range.start,c={};i.allDay!==s.allDay&&(c.allDay=s.allDay,c.hasEnd=e.context.options.allDayMaintainDuration,s.allDay?a=In(n):a=n);let u=hf(a,o,t.context.dateEnv,t.componentId===e.componentId?t.largeUnit:null);u.milliseconds&&(c.allDay=!1);let d={datesDelta:u,standardProps:c};for(let f of r)f(d,t,e);return d}function B6e(t){let{options:e}=t.context,n=e.eventLongPressDelay;return n==null&&(n=e.longPressDelay),n}class U6e extends ip{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=s=>{let{component:a}=this,o=this.querySegEl(s),c=Nh(o),u=this.eventRange=c.eventRange;this.dragging.minDistance=a.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(s.origEvent.target)||s.isTouch&&this.component.props.eventSelection!==u.instance.instanceId)},this.handleDragStart=s=>{let{context:a}=this.component,o=this.eventRange;this.relevantEvents=RP(a.getCurrentData().eventStore,this.eventRange.instance.instanceId);let c=this.querySegEl(s);this.draggingSegEl=c,this.draggingSeg=Nh(c),a.calendarApi.unselect(),a.emitter.trigger("eventResizeStart",{el:c,event:new On(a,o.def,o.instance),jsEvent:s.origEvent,view:a.viewApi})},this.handleHitUpdate=(s,a,o)=>{let{context:c}=this.component,u=this.relevantEvents,d=this.hitDragging.initialHit,f=this.eventRange.instance,h=null,p=null,g=!1,m={affectedEvents:u,mutatedEvents:oa(),isEvent:!0};s&&(s.componentId===d.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(d,s)||(h=W6e(d,s,o.subjectEl.classList.contains("fc-event-resizer-start"),f.range))),h&&(p=$P(u,c.getCurrentData().eventUiBases,h,c),m.mutatedEvents=p,sH(m,s.dateProfile,c)||(g=!0,h=null,p=null,m.mutatedEvents=null)),p?c.dispatch({type:"SET_EVENT_RESIZE",state:m}):c.dispatch({type:"UNSET_EVENT_RESIZE"}),g?EP():jP(),a||(h&&D1(d,s)&&(h=null),this.validMutation=h,this.mutatedRelevantEvents=p)},this.handleDragEnd=s=>{let{context:a}=this.component,o=this.eventRange.def,c=this.eventRange.instance,u=new On(a,o,c),d=this.relevantEvents,f=this.mutatedRelevantEvents;if(a.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:u,jsEvent:s.origEvent,view:a.viewApi}),this.validMutation){let h=new On(a,f.defs[o.defId],c?f.instances[c.instanceId]:null);a.dispatch({type:"MERGE_EVENTS",eventStore:f});let p={oldEvent:u,event:h,relatedEvents:Su(f,a,c),revert(){a.dispatch({type:"MERGE_EVENTS",eventStore:d})}};a.emitter.trigger("eventResize",Object.assign(Object.assign({},p),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||Jt(0),endDelta:this.validMutation.endDelta||Jt(0),jsEvent:s.origEvent,view:a.viewApi})),a.emitter.trigger("eventChange",p)}else a.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:n}=e,r=this.dragging=new $v(e.el);r.pointer.selector=".fc-event-resizer",r.touchScrollAllowed=!1,r.autoScroller.isEnabled=n.context.options.dragScroll;let i=this.hitDragging=new k1(this.dragging,FP(e));i.emitter.on("pointerdown",this.handlePointerDown),i.emitter.on("dragstart",this.handleDragStart),i.emitter.on("hitupdate",this.handleHitUpdate),i.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return mi(e.subjectEl,".fc-event")}}function W6e(t,e,n,r){let i=t.context.dateEnv,s=t.dateSpan.range.start,a=e.dateSpan.range.start,o=hf(s,a,i,t.largeUnit);if(n){if(i.add(r.start,o)<r.end)return{startDelta:o}}else if(i.add(r.end,o)>r.start)return{endDelta:o};return null}class H6e{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=r=>{r.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=r=>{let i=this.context.options.unselectCancel,s=SW(r.origEvent);this.matchesCancel=!!mi(s,i),this.matchesEvent=!!mi(s,Fv.SELECTOR)},this.onDocumentPointerUp=r=>{let{context:i}=this,{documentPointer:s}=this,a=i.getCurrentData();if(!s.wasTouchScroll){if(a.dateSelection&&!this.isRecentPointerDateSelect){let o=i.options.unselectAuto;o&&(!o||!this.matchesCancel)&&i.calendarApi.unselect(r)}a.eventSelection&&!this.matchesEvent&&i.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let n=this.documentPointer=new DH(document);n.shouldIgnoreMove=!0,n.shouldWatchScroll=!1,n.emitter.on("pointerdown",this.onDocumentPointerDown),n.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const K6e={fixedMirrorParent:ge},q6e={dateClick:ge,eventDragStart:ge,eventDragStop:ge,eventDrop:ge,eventResizeStart:ge,eventResizeStop:ge,eventResize:ge,drop:ge,eventReceive:ge,eventLeave:ge};WP.dataAttrPrefix="";var G6e=mc({name:"@fullcalendar/interaction",componentInteractions:[L6e,z6e,Fv,U6e],calendarInteractions:[H6e],elementDraggingImpl:$v,optionRefiners:K6e,listenerRefiners:q6e});const Y6e=(t,e,n)=>{const r=(n-1)*7+1;return new Date(Date.UTC(t,e-1,r))},Q6e=()=>{const{animals:t,healthPlans:e,planActivities:n,healthEvents:r,parturitions:i}=rt(),{forecastBySeason:s}=bP(),a=N.useMemo(()=>{const c=new Date;c.setUTCHours(0,0,0,0);const u=c.getUTCFullYear(),d=new Date(c.getTime()+90*24*60*60*1e3),f=[],h=t.filter(p=>p.status==="Activo"&&!p.isReference);for(const p of e){const g=h.filter(y=>{var w,_;const x=qa(y.birthDate);if(x<0)return!1;if(p.targetGroup==="Maternidad")return x<=120;if(p.targetGroup==="Adultos"){if(x<=120)return!1;const A=p.adultsSubgroup&&p.adultsSubgroup.length>0,E=p.targetLots&&p.targetLots.length>0;if(!A&&!E)return!0;const C=od(y,i),j=A&&((w=p.adultsSubgroup)==null?void 0:w.includes(C)),T=E&&((_=p.targetLots)==null?void 0:_.includes(y.location));if(A&&E)return j||T;if(A)return j;if(E)return T}return!1}),m=n.filter(y=>y.healthPlanId===p.id);for(const y of g)for(const x of m){const w=(_,A)=>{if(!_||!A)return;if(_.setUTCHours(0,0,0,0),!r.some(C=>C.animalId!==y.id||C.activityId!==x.id?!1:x.trigger.type==="age"?new Date(C.date+"T00:00:00Z").getTime()===_.getTime():new Date(C.date+"T00:00:00Z").getUTCFullYear()===_.getUTCFullYear())&&_<=d){let C="Próxima";const j=Math.ceil((_.getTime()-c.getTime())/864e5);j<0?C="Atrasada":j===0&&(C="Para Hoy"),f.push({key:A,animal:y,plan:p,activity:x,dueDate:_,status:C})}};if(x.trigger.type==="age"&&x.trigger.days)for(const _ of x.trigger.days){const A=new Date(y.birthDate+"T00:00:00Z");A.setUTCDate(A.getUTCDate()+_),w(A,`${y.id}-${x.id}-${_}`)}else if(x.trigger.type==="fixed_date_period"&&x.trigger.month&&x.trigger.week){const _=Y6e(u,x.trigger.month,x.trigger.week),A=`${y.id}-${x.id}-${u}`;w(_,A)}else if(x.trigger.type==="birthing_season_event"&&x.trigger.offsetDays!==void 0){const _=s.find(A=>A.events.some(E=>E.animal.id===y.id));if(_&&_.projectedStartDate){const A=new Date(_.projectedStartDate);A.setUTCDate(A.getUTCDate()+x.trigger.offsetDays);const E=A,C=`${y.id}-${x.id}-${_.seasonId}`;w(E,C)}}}}return f.sort((p,g)=>p.dueDate.getTime()-g.dueDate.getTime())},[t,e,n,r,i,s]);return{...N.useMemo(()=>({overdue:a.filter(c=>c.status==="Atrasada"),today:a.filter(c=>c.status==="Para Hoy"),upcoming:a.filter(c=>c.status==="Próxima")}),[a]),allTasks:a}},X6e=({task:t,onSave:e,onCancel:n})=>{const{addHealthEvent:r,products:i,bodyWeighings:s}=rt(),[a,o]=N.useState(new Date().toISOString().split("T")[0]),[c,u]=N.useState(""),[d,f]=N.useState(null),[h,p]=N.useState(!1),{animal:g,activity:m}=t,y=N.useMemo(()=>i.find(E=>E.id===m.productId),[i,m.productId]),x=N.useMemo(()=>s.filter(E=>E.animalId===g.id).sort((E,C)=>new Date(C.date).getTime()-new Date(E.date).getTime())[0],[s,g.id]),{doseApplied:w,calculatedCost:_}=N.useMemo(()=>{if(!y||!x)return{doseApplied:void 0,calculatedCost:void 0};let E=0;if(y.dosageType==="fixed"&&y.dosageFixed?E=y.dosageFixed:y.dosageType==="per_kg"&&y.dosagePerKg_ml&&y.dosagePerKg_kg&&(E=x.kg/y.dosagePerKg_kg*y.dosagePerKg_ml),E===0)return{doseApplied:void 0,calculatedCost:void 0};let C=0;const j=y.presentationUnit==="L"?(y.presentationValue||0)*1e3:y.presentationValue||0;if(y.price&&j>0){const T=y.price/j;C=E*T}return{doseApplied:parseFloat(E.toFixed(2)),calculatedCost:parseFloat(C.toFixed(2))}},[y,x]),A=async E=>{E.preventDefault(),p(!0),f(null);try{await r({animalId:g.id,lotName:g.location,date:a,activityId:m.id,type:m.name,productUsed:y==null?void 0:y.id,doseApplied:w,unit:"ml",calculatedCost:_,notes:c,executedBy:"self"}),e()}catch(C){console.error(C),f("No se pudo registrar el evento. Inténtelo de nuevo.")}finally{p(!1)}};return l.jsxs("form",{onSubmit:A,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("p",{children:[l.jsx("span",{className:"font-semibold text-zinc-400",children:"Animal:"})," ",l.jsx("span",{className:"font-bold text-white",children:g.id})]}),l.jsxs("p",{children:[l.jsx("span",{className:"font-semibold text-zinc-400",children:"Actividad:"})," ",l.jsx("span",{className:"font-bold text-white",children:m.name})]}),y&&l.jsxs("p",{children:[l.jsx("span",{className:"font-semibold text-zinc-400",children:"Producto:"})," ",l.jsx("span",{className:"font-bold text-white",children:y.name})]})]}),l.jsxs("div",{className:"p-4 bg-black/20 rounded-xl space-y-2",children:[l.jsx("h3",{className:"font-semibold text-white",children:"Detalles del Registro"}),x?l.jsxs("div",{children:[l.jsxs("p",{className:"text-sm text-zinc-300",children:["Basado en el último peso registrado de ",l.jsxs("span",{className:"font-bold text-white",children:[x.kg," kg"]}),"."]}),w!==void 0&&l.jsxs("p",{className:"text-sm text-zinc-300",children:["Dosis Calculada: ",l.jsxs("span",{className:"font-bold text-teal-400",children:[w," ml"]})]}),_!==void 0&&l.jsxs("p",{className:"text-sm text-zinc-300",children:["Costo Estimado: ",l.jsxs("span",{className:"font-bold text-amber-400",children:["$",_.toFixed(2)]})]})]}):l.jsx("p",{className:"text-sm text-amber-400",children:"Advertencia: No se encontró un peso reciente para este animal. La dosis y el costo no se pueden calcular automáticamente."})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Aplicación"}),l.jsx("input",{id:"date",type:"date",value:a,onChange:E=>o(E.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Notas (Opcional)"}),l.jsx("textarea",{id:"notes",value:c,onChange:E=>u(E.target.value),placeholder:"Anotaciones sobre la aplicación, etc.",rows:3,className:"w-full bg-zinc-800 p-3 rounded-xl"})]}),d&&l.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[l.jsx($t,{size:18}),l.jsx("span",{children:d})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:n,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:h,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:h?"Guardando...":"Confirmar Registro"})]})]})},Z6e=({animals:t,selectedAnimalIds:e,onChange:n})=>{const r=i=>{const s=Array.from(i.target.selectedOptions,a=>a.value);n(s)};return l.jsx("select",{multiple:!0,value:e,onChange:r,className:"w-full h-32 bg-zinc-800 p-3 rounded-xl",children:t.map(i=>l.jsx("option",{value:i.id,children:i.id},i.id))})},J6e=({onSaveSuccess:t,onCancel:e})=>{const{addHealthEvent:n,products:r,animals:i,bodyWeighings:s}=rt(),[a,o]=N.useState([]),[c,u]=N.useState(new Date().toISOString().split("T")[0]),[d,f]=N.useState(""),[h,p]=N.useState(void 0),[g,m]=N.useState(""),[y,x]=N.useState(null),[w,_]=N.useState(!1),A=N.useMemo(()=>r.find(C=>C.id===h),[r,h]),E=async C=>{if(C.preventDefault(),a.length===0||!d.trim()){x("Debe seleccionar al menos un animal y especificar el tipo de actividad.");return}_(!0),x(null);try{const j=a.map(T=>{const P=i.find(R=>R.id===T);if(!P)return null;const I=s.filter(R=>R.animalId===T).sort((R,H)=>new Date(H.date).getTime()-new Date(R.date).getTime())[0];let M,F;if(A&&I){let R=0;if(A.dosageType==="fixed"&&A.dosageFixed?R=A.dosageFixed:A.dosageType==="per_kg"&&A.dosagePerKg_ml&&A.dosagePerKg_kg&&(R=I.kg/A.dosagePerKg_kg*A.dosagePerKg_ml),R>0){M=parseFloat(R.toFixed(2));const H=A.presentationUnit==="L"?(A.presentationValue||0)*1e3:A.presentationValue||0;if(A.price&&H>0){const X=A.price/H;F=parseFloat((R*X).toFixed(2))}}}return{animalId:T,lotName:P.location,date:c,type:d,productUsed:h,doseApplied:M,unit:"ml",calculatedCost:F,notes:g}});for(const T of j)T&&await n(T);t()}catch(j){console.error(j),x("No se pudo registrar el evento. Inténtelo de nuevo.")}finally{_(!1)}};return l.jsxs("form",{onSubmit:E,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Animal(es) (mantén Ctrl/Cmd para seleccionar varios)"}),l.jsx(Z6e,{animals:i.filter(C=>C.status==="Activo"),selectedAnimalIds:a,onChange:o}),l.jsxs("p",{className:"text-xs text-zinc-500 mt-1",children:[a.length," animal(es) seleccionado(s)."]})]}),l.jsx("input",{type:"text",value:d,onChange:C=>f(C.target.value),placeholder:"Tipo de Actividad (Ej: Tratamiento por Neumonía)",className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0}),l.jsxs("select",{value:h||"",onChange:C=>p(C.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",children:[l.jsx("option",{value:"",children:"Seleccionar Producto (Opcional)..."}),r.map(C=>l.jsx("option",{value:C.id,children:C.name},C.id))]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"unplanned-date",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Aplicación"}),l.jsx("input",{id:"unplanned-date",type:"date",value:c,onChange:C=>u(C.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl"})]}),l.jsx("textarea",{value:g,onChange:C=>m(C.target.value),placeholder:"Notas (Opcional)",rows:3,className:"w-full bg-zinc-800 p-3 rounded-xl"}),y&&l.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[l.jsx($t,{size:18}),l.jsx("span",{children:y})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:w,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:w?"Guardando...":"Registrar Evento"})]})]})};function fL(){const{allTasks:t}=Q6e(),[e,n]=N.useState(null),[r,i]=N.useState(!1),s=N.useRef(null),[a,o]=N.useState("dayGridMonth"),[c,u]=N.useState(""),d=N.useMemo(()=>t.map(m=>({id:m.key,title:`${m.animal.id} - ${m.activity.name}`,start:m.dueDate,allDay:!0,extendedProps:{task:m},backgroundColor:m.status==="Atrasada"?"#FF3B30":m.status==="Para Hoy"?"#34C759":"#007AFF",borderColor:m.status==="Atrasada"?"#FF3B30":m.status==="Para Hoy"?"#34C759":"#007AFF"})),[t]),f=m=>{n(m.event.extendedProps.task)},h=()=>{n(null),i(!1)},p=m=>{var y;(y=s.current)==null||y.getApi().changeView(m),o(m)},g=m=>{u(m.view.title)};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full h-full max-w-4xl mx-auto p-4 flex flex-col",children:[l.jsxs("header",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start mb-4 gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl sm:text-4xl font-bold tracking-tight text-white leading-tight",children:"Calendario Sanitario"}),l.jsx("p",{className:"text-base sm:text-lg text-zinc-400",children:"Vista completa de actividades"})]}),l.jsxs("button",{onClick:()=>i(!0),className:"flex-shrink-0 flex items-center justify-center gap-2 bg-brand-blue text-white font-semibold py-2 px-4 rounded-lg transition-colors text-sm w-full sm:w-auto",children:[l.jsx(ir,{size:16})," Registrar Actividad"]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between mb-4 gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>{var m;return(m=s.current)==null?void 0:m.getApi().prev()},className:"p-2 bg-zinc-700 rounded-md hover:bg-zinc-600",children:"‹"}),l.jsx("button",{onClick:()=>{var m;return(m=s.current)==null?void 0:m.getApi().next()},className:"p-2 bg-zinc-700 rounded-md hover:bg-zinc-600",children:"›"}),l.jsx("h2",{className:"text-xl font-semibold text-white capitalize w-40 text-center",children:c})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>{var m;return(m=s.current)==null?void 0:m.getApi().today()},className:"px-4 py-1.5 bg-zinc-700 rounded-md hover:bg-zinc-600 text-sm font-semibold",children:"Hoy"}),l.jsxs("div",{className:"relative flex justify-between rounded-lg bg-zinc-700 p-1 text-sm font-semibold",children:[l.jsx("button",{onClick:()=>p("dayGridMonth"),className:"relative z-10 w-20 py-1 rounded-md",children:"Mes"}),l.jsx("button",{onClick:()=>p("dayGridWeek"),className:"relative z-10 w-20 py-1 rounded-md",children:"Semana"}),l.jsx(Ln.div,{layoutId:"calendar-view-bg",transition:{type:"spring",stiffness:400,damping:30},className:`absolute top-1 h-[calc(100%-0.5rem)] w-20 rounded-md bg-zinc-500 ${a==="dayGridWeek"?"left-[calc(50%_-_2px)]":"left-1"}`})]})]})]}),l.jsx("div",{className:"flex-grow",children:l.jsx(qP,{ref:s,plugins:[PH,G6e],initialView:a,locale:kH,events:d,eventClick:f,height:"100%",headerToolbar:!1,datesSet:g})})]}),e&&l.jsx(at,{isOpen:!!e,onClose:()=>n(null),title:`Registrar: ${e.activity.name}`,children:l.jsx(X6e,{task:e,onSave:h,onCancel:()=>n(null)})}),l.jsx(at,{isOpen:r,onClose:()=>i(!1),title:"Registrar Actividad No Planificada",children:l.jsx(J6e,{onSaveSuccess:h,onCancel:()=>i(!1)})})]})}const US=({legend:t,children:e})=>l.jsxs("fieldset",{className:"bg-black/20 rounded-2xl p-4 border border-zinc-700 space-y-4",children:[l.jsx("legend",{className:"px-2 text-sm font-semibold text-zinc-400",children:t}),e]}),eFe=["Coxidioestático","Desparasitación","Vacuna Clostridial"],tFe=["Desparasitación","Vacuna Leptospirosis","Vacuna Clostridial","Vacuna Rabia"],nFe=["Cura de ombligo","Revisión de Mucosas (FAMACHA)","Descorne","Castración"],rFe=["Revisión de Mucosas (FAMACHA)","Recorte de Pezuñas","Toma de muestra de Hematología y Coprología"],iFe=[1,8,15,21,30,45,60,90,120],sFe=[{value:1,label:"Enero"},{value:2,label:"Febrero"},{value:3,label:"Marzo"},{value:4,label:"Abril"},{value:5,label:"Mayo"},{value:6,label:"Junio"},{value:7,label:"Julio"},{value:8,label:"Agosto"},{value:9,label:"Septiembre"},{value:10,label:"Octubre"},{value:11,label:"Noviembre"},{value:12,label:"Diciembre"}],aFe=[{value:1,label:"1ra Semana"},{value:2,label:"2da Semana"},{value:3,label:"3ra Semana"},{value:4,label:"4ta Semana"}],oFe=({healthPlanId:t,targetGroup:e,onSave:n,onCancel:r,existingActivity:i})=>{const{products:s,addProduct:a}=rt(),[o,c]=N.useState("Tratamiento"),[u,d]=N.useState(""),[f,h]=N.useState(void 0),[p,g]=N.useState(void 0),[m,y]=N.useState(e==="Maternidad"?"age":"fixed_date_period"),[x,w]=N.useState(""),[_,A]=N.useState("1"),[E,C]=N.useState("1"),[j,T]=N.useState(""),[P,I]=N.useState(!1),[M,F]=N.useState(null),R=e==="Maternidad"?o==="Tratamiento"?eFe:nFe:o==="Tratamiento"?tFe:rFe;N.useEffect(()=>{var W;i&&(c(i.category),d(i.name),h(i.productId),g(i.complementaryProductId),y(i.trigger.type),i.trigger.type==="age"&&w(String(((W=i.trigger.days)==null?void 0:W[0])||"")),i.trigger.type==="fixed_date_period"&&(A(String(i.trigger.month||"1")),C(String(i.trigger.week||"1"))),i.trigger.type==="birthing_season_event"&&T(String(i.trigger.offsetDays||"")))},[i]);const H=async W=>{await a(W),I(!1)},X=async W=>{if(W.preventDefault(),F(null),!u.trim()){F("El nombre es obligatorio.");return}if(o==="Tratamiento"&&!f){F("Debe seleccionar un producto principal.");return}let U;if(e==="Maternidad"){const Y=parseInt(x,10);if(isNaN(Y)||Y<0){F("Los días de nacido deben ser un número válido.");return}U={type:"age",days:[Y]}}else if(m==="fixed_date_period")U={type:"fixed_date_period",month:parseInt(_,10),week:parseInt(E,10)};else{const Y=parseInt(j,10);if(isNaN(Y)){F("Debe introducir un número válido de días.");return}U={type:"birthing_season_event",offsetDays:Y}}await n({healthPlanId:t,category:o,name:u,productId:f,complementaryProductId:p,trigger:U})};return l.jsxs(l.Fragment,{children:[l.jsxs("form",{onSubmit:X,className:"space-y-6",children:[l.jsxs(US,{legend:"Paso 1: Define la Actividad",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("button",{type:"button",onClick:()=>c("Tratamiento"),className:`p-4 rounded-2xl border-2 transition-colors flex flex-col items-center gap-2 ${o==="Tratamiento"?"bg-blue-500/20 border-blue-500":"bg-zinc-800/50 border-zinc-700 hover:border-zinc-500"}`,children:[l.jsx($h,{className:"w-8 h-8 text-blue-400"}),l.jsx("span",{className:"font-semibold text-white",children:"Tratamiento"})]}),l.jsxs("button",{type:"button",onClick:()=>c("Control"),className:`p-4 rounded-2xl border-2 transition-colors flex flex-col items-center gap-2 ${o==="Control"?"bg-purple-500/20 border-purple-500":"bg-zinc-800/50 border-zinc-700 hover:border-zinc-500"}`,children:[l.jsx(NF,{className:"w-8 h-8 text-purple-400"}),l.jsx("span",{className:"font-semibold text-white",children:"Control"})]})]}),l.jsx("input",{list:"activity-names",value:u,onChange:W=>d(W.target.value),placeholder:`Nombre del ${o}...`,className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0}),l.jsx("datalist",{id:"activity-names",children:R.map(W=>l.jsx("option",{value:W},W))})]}),o==="Tratamiento"&&l.jsxs(US,{legend:"Paso 2: Selecciona los Productos",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{value:f||"",onChange:W=>h(W.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0,children:[l.jsx("option",{value:"",children:"Producto Principal..."}),s.map(W=>l.jsx("option",{value:W.id,children:W.name},W.id))]}),l.jsx("button",{type:"button",onClick:()=>I(!0),className:"flex-shrink-0 p-3 bg-brand-orange text-white rounded-xl",children:l.jsx(ss,{size:20})})]}),l.jsxs("select",{value:p||"",onChange:W=>g(W.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",children:[l.jsx("option",{value:"",children:"Producto Complementario (Opcional)..."}),s.map(W=>l.jsx("option",{value:W.id,children:W.name},W.id))]})]}),l.jsx(US,{legend:`Paso ${o==="Tratamiento"?"3":"2"}: ¿Cuándo se ejecuta?`,children:e==="Maternidad"?l.jsxs("div",{className:"animate-fade-in",children:[l.jsx("label",{className:"block text-xs font-medium text-zinc-400 mb-2",children:"A los Días de Nacido"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:iFe.map(W=>l.jsxs("button",{type:"button",onClick:()=>w(String(W)),className:`px-3 py-1 text-sm font-semibold rounded-full transition-colors ${x===String(W)?"bg-teal-500 text-white":"bg-zinc-700 text-zinc-300"}`,children:[W," días"]},W))}),l.jsx("div",{className:"flex items-center gap-2 mt-4",children:l.jsx("input",{type:"number",value:x,onChange:W=>w(W.target.value),placeholder:"O escribe los días...",className:"w-full bg-zinc-800 p-2 rounded-lg",required:!0})})]}):l.jsxs(l.Fragment,{children:[l.jsxs("select",{value:m,onChange:W=>y(W.target.value),className:"w-full bg-zinc-800 p-2 rounded-lg",children:[l.jsx("option",{value:"fixed_date_period",children:"Por Fecha Fija Anual"}),l.jsx("option",{value:"birthing_season_event",children:"Relativo a Temporada de Partos"})]}),m==="fixed_date_period"&&l.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-fade-in",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"triggerMonth",className:"block text-xs font-medium text-zinc-400 mb-1",children:"Mes"}),l.jsx("select",{id:"triggerMonth",value:_,onChange:W=>A(W.target.value),className:"w-full bg-zinc-800 p-2 rounded-lg",children:sFe.map(W=>l.jsx("option",{value:W.value,children:W.label},W.value))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"triggerWeek",className:"block text-xs font-medium text-zinc-400 mb-1",children:"Semana"}),l.jsx("select",{id:"triggerWeek",value:E,onChange:W=>C(W.target.value),className:"w-full bg-zinc-800 p-2 rounded-lg",children:aFe.map(W=>l.jsx("option",{value:W.value,children:W.label},W.value))})]})]}),m==="birthing_season_event"&&l.jsxs("div",{className:"animate-fade-in",children:[l.jsx("label",{htmlFor:"triggerOffsetDays",className:"block text-xs font-medium text-zinc-400 mb-1",children:"Días antes (-) / después (+) del inicio de la temporada"}),l.jsx("input",{id:"triggerOffsetDays",type:"number",value:j,onChange:W=>T(W.target.value),placeholder:"Ej: -30 (para 30 días antes)",className:"w-full bg-zinc-800 p-2 rounded-lg",required:!0})]})]})}),M&&l.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[l.jsx($t,{size:18})," ",l.jsx("span",{children:M})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:r,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:i?"Actualizar Actividad":"Añadir al Plan"})]})]}),l.jsx(at,{isOpen:P,onClose:()=>I(!1),title:"Crear Nuevo Producto",children:l.jsx(wP,{onSave:H,onCancel:()=>I(!1)})})]})},lFe=({activity:t,onEdit:e,onDelete:n})=>{const{products:r}=rt(),i=r.find(d=>d.id===t.productId),s=r.find(d=>d.id===t.complementaryProductId),a=lc(),o=N.useRef(!1),c=(d,f)=>{const h=f.offset.x,p=f.velocity.x;h<-160/2||p<-500?a.start({x:-160}):a.start({x:0}),setTimeout(()=>{o.current=!1},100)},u=()=>{var f;const{trigger:d}=t;switch(d.type){case"age":return`Días: ${((f=d.days)==null?void 0:f.join(", "))||"N/A"}`;case"fixed_date_period":const h=new Date(2024,d.month-1,1).toLocaleString("es-VE",{month:"long"});return`${d.week}a semana de ${h}`;case"birthing_season_event":const p=d.offsetDays>=0?"días después":"días antes";return`${Math.abs(d.offsetDays)} ${p} del inicio de la temporada de partos`;default:return"Tiempo no especificado"}};return l.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-black/20 border border-zinc-700",children:[l.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:[l.jsxs("button",{onClick:e,onPointerDown:d=>d.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[l.jsx(ac,{size:20}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Editar"})]}),l.jsxs("button",{onClick:n,onPointerDown:d=>d.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-red text-white",children:[l.jsx(ya,{size:20}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Eliminar"})]})]}),l.jsxs(Ln.div,{drag:"x",dragConstraints:{left:-160,right:0},dragElastic:.1,onDragStart:()=>{o.current=!0},onDragEnd:c,animate:a,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-grab bg-ios-modal-bg/50 p-4",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:t.name}),l.jsx("p",{className:`text-sm font-semibold ${t.category==="Tratamiento"?"text-blue-400":"text-purple-400"}`,children:t.category}),i&&l.jsxs("p",{className:"text-xs text-zinc-400 mt-1",children:["Ppal: ",i.name]}),s&&l.jsxs("p",{className:"text-xs text-zinc-400",children:["Comp: ",s.name]})]}),t.category==="Tratamiento"?l.jsx($h,{className:"text-blue-400"}):l.jsx(NF,{className:"text-purple-400"})]}),l.jsxs("div",{className:"mt-3 pt-3 border-t border-zinc-700 flex items-center text-zinc-300",children:[l.jsx(fs,{size:16,className:"mr-2"}),l.jsx("span",{className:"text-sm font-semibold",children:u()})]})]})]})};function cFe({planId:t,onBack:e}){const{healthPlans:n,planActivities:r,addPlanActivity:i,updatePlanActivity:s,deletePlanActivity:a}=rt(),[o,c]=N.useState(!1),[u,d]=N.useState(void 0),[f,h]=N.useState(null),p=N.useMemo(()=>n.find(_=>_.id===t),[n,t]),g=N.useMemo(()=>p?r.filter(_=>_.healthPlanId===t).sort((_,A)=>{var E,C;return(((E=_.trigger.days)==null?void 0:E[0])||0)-(((C=A.trigger.days)==null?void 0:C[0])||0)}):[],[r,t,p]),m=_=>{d(_),c(!0)},y=()=>{c(!1),d(void 0)},x=async _=>{u!=null&&u.id?await s(u.id,_):await i({..._,healthPlanId:t}),y()},w=async()=>{f!=null&&f.id&&await a(f.id),h(null)};return p?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 pb-12 animate-fade-in px-4",children:[l.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[l.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(ar,{size:24})}),l.jsxs("div",{className:"text-center flex-grow",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:p.name}),l.jsx("p",{className:"text-lg text-zinc-400",children:p.targetGroup})]}),l.jsx("div",{className:"w-8"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-zinc-300",children:"Actividades del Plan"}),l.jsxs("button",{onClick:()=>m(),className:"flex items-center gap-2 bg-teal-600 hover:bg-teal-500 text-white font-bold py-2 px-3 rounded-lg transition-colors text-sm",children:[l.jsx(ir,{size:16})," Añadir Actividad"]})]}),g.length>0?l.jsx("div",{className:"space-y-3",children:g.map(_=>l.jsx(lFe,{activity:_,onEdit:()=>m(_),onDelete:()=>h(_)},_.id))}):l.jsxs("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:[l.jsx("p",{className:"text-zinc-500 font-semibold",children:"Este plan aún no tiene actividades."}),l.jsx("p",{className:"text-zinc-500 text-sm",children:"Añade tratamientos o controles para empezar."})]})]})]}),l.jsx(at,{isOpen:o,onClose:y,title:u?"Editar Actividad":"Añadir Actividad al Plan",children:l.jsx(oFe,{healthPlanId:p.id,targetGroup:p.targetGroup,onSave:x,onCancel:y,existingActivity:u})}),l.jsx(_1,{isOpen:!!f,onClose:()=>h(null),onConfirm:w,title:`Eliminar Actividad "${f==null?void 0:f.name}"`,message:"¿Estás seguro de que quieres eliminar esta actividad del plan? Esta acción no se puede deshacer."})]}):l.jsxs("div",{className:"text-center p-10",children:[l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Plan no encontrado."}),l.jsx("button",{onClick:e,className:"mt-4 text-brand-amber",children:"Volver al Planificador"})]})}const uFe=()=>{const{healthEvents:t,products:e,animals:n}=rt();return N.useMemo(()=>{const i=new Date;i.setDate(i.getDate()-30),i.setHours(0,0,0,0);const a=t.filter(y=>new Date(y.date)>=i).reduce((y,x)=>y+(x.calculatedCost||0),0),o=n.filter(y=>y.status==="Activo").length,c=o>0?a/o:0,u=[],d={},f=new Date;f.setMonth(f.getMonth()-6),t.filter(y=>new Date(y.date)>=f).forEach(y=>{const x=y.date.substring(0,7);d[x]||(d[x]=0),d[x]+=y.calculatedCost||0}),Object.keys(d).sort().forEach(y=>{u.push({name:y,total:parseFloat(d[y].toFixed(2))})});const h={};t.forEach(y=>{const x=y.type||"Sin Categoría";h[x]||(h[x]=0),h[x]+=y.calculatedCost||0});const p=Object.keys(h).map(y=>({name:y,total:parseFloat(h[y].toFixed(2))})).sort((y,x)=>x.total-y.total),g={};t.forEach(y=>{g[y.animalId]||(g[y.animalId]=0),g[y.animalId]+=y.calculatedCost||0});const m=Object.keys(g).map(y=>({animalId:y,total:g[y]})).sort((y,x)=>x.total-y.total).slice(0,5);return{totalCostLast30Days:a,avgCostPerAnimal:c,monthlyCosts:u,costsByCategory:p,topCostAnimals:m}},[t,e,n])},hL=({title:t,value:e,unit:n,icon:r})=>l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[l.jsx(r,{size:14}),l.jsx("span",{children:t})]}),l.jsxs("p",{className:"text-3xl font-bold text-white mt-1",children:[e," ",l.jsx("span",{className:"text-xl text-zinc-400",children:n})]})]}),pL=["#34C759","#FF9500","#007AFF","#AF52DE","#FF3B30","#5E5CE6","#5AC8FA","#FFCC00"];function dFe(){const{totalCostLast30Days:t,avgCostPerAnimal:e,monthlyCosts:n,costsByCategory:r,topCostAnimals:i}=uFe(),s=a=>new Date(a+"-02T00:00:00Z").toLocaleString("es-VE",{month:"short",year:"2-digit"});return l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4",children:[l.jsxs("header",{className:"text-center",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Análisis de Costos"}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Módulo StockCare"})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsx(hL,{title:"Costo (Últimos 30 días)",value:`$${t.toFixed(2)}`,icon:Ql}),l.jsx(hL,{title:"Costo Prom./Animal (30d)",value:`$${e.toFixed(2)}`,icon:ba})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-white mb-4",children:[l.jsx(vv,{size:20})," Costo Mensual (Últimos 6m)"]}),l.jsx("div",{className:"w-full h-56",children:l.jsx(Er,{children:l.jsxs(Ls,{data:n,margin:{top:5,right:10,left:-20,bottom:5},children:[l.jsx(sr,{dataKey:"name",tickFormatter:s,tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(gr,{tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},unit:"$"}),l.jsx(fn,{cursor:{fill:"rgba(255, 255, 255, 0.1)"},contentStyle:{backgroundColor:"rgba(44, 44, 46, 0.8)",border:"1px solid #444",borderRadius:"12px"},formatter:a=>`$${a.toFixed(2)}`}),l.jsx(Lr,{dataKey:"total",name:"Costo Total",fill:"#2dd4bf",radius:[4,4,0,0]})]})})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-white mb-4",children:[l.jsx(Qee,{size:20})," Costos por Categoría"]}),l.jsx("div",{className:"w-full h-48",children:l.jsx(Er,{children:l.jsxs(tj,{children:[l.jsx(fa,{data:r,dataKey:"total",nameKey:"name",cx:"50%",cy:"50%",outerRadius:60,fill:"#8884d8",children:r.map((a,o)=>l.jsx(Ms,{fill:pL[o%pL.length]},`cell-${o}`))}),l.jsx(fn,{contentStyle:{backgroundColor:"rgba(44, 44, 46, 0.8)",border:"1px solid #444",borderRadius:"12px"},formatter:a=>`$${a.toFixed(2)}`}),l.jsx(aa,{iconSize:10,wrapperStyle:{fontSize:"12px",color:"#a1a1aa"}})]})})})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Top 5 Animales (Costo Total)"}),l.jsx("div",{className:"space-y-2",children:i.length>0?i.map((a,o)=>l.jsxs("div",{className:"flex justify-between items-center text-sm bg-black/20 p-2 rounded-md",children:[l.jsxs("span",{className:"font-semibold text-white",children:[o+1,". ",a.animalId]}),l.jsxs("span",{className:"font-bold text-teal-300",children:["$",a.total.toFixed(2)]})]},a.animalId)):l.jsx("p",{className:"text-sm text-zinc-500 text-center pt-8",children:"No hay datos suficientes."})})]})]})]})}function fFe({onSwitchModule:t}){const{syncStatus:e}=rt(),[n,r]=N.useState({name:"calendario"}),[i,s]=N.useState([]),a=[{id:"calendario",label:"Calendario",icon:Pee},{id:"planes",label:"Planes",icon:iT},{id:"inventario",label:"Inventario",icon:$h},{id:"costos",label:"Costos",icon:Ql}],o=f=>{s(h=>[...h,n]),r(f)},c=()=>{const f=i.pop();f?(s([...i]),r(f)):t("rebano")},u=f=>{s([]),r({name:f})},d=()=>{switch(n.name){case"calendario":return l.jsx(fL,{});case"planes":return l.jsx(j6e,{navigateTo:o});case"inventario":return l.jsx(O4e,{});case"costos":return l.jsx(dFe,{});case"plan-detail":return l.jsx(cFe,{planId:n.planId,onBack:c});default:return l.jsx(fL,{})}};return l.jsxs("div",{className:"min-h-screen animate-fade-in text-white flex flex-col bg-brand-dark",children:[l.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-brand-dark/80 backdrop-blur-lg border-b border-brand-border",children:l.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[l.jsx("button",{onClick:c,className:"p-2 -ml-2 text-zinc-400 hover:text-white","aria-label":"Atrás",children:l.jsx(ar,{size:24})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(mw,{className:"text-teal-400"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-bold text-white leading-none",children:"GanaderoOS"}),l.jsx("p",{className:"text-xs text-zinc-400 leading-none",children:"StockCare"})]})]}),l.jsx("div",{className:"w-8 flex justify-end",children:l.jsx(Lv,{status:e})})]})}),l.jsx("main",{className:"flex-grow pt-16 pb-24",children:d()}),l.jsx("nav",{className:"flex-shrink-0 fixed bottom-0 left-0 right-0 bg-black/30 backdrop-blur-xl border-t border-white/20 flex justify-around z-20",children:a.map(f=>l.jsxs("button",{onClick:()=>u(f.id),className:`flex flex-col items-center justify-center p-3 w-full transition-colors ${n.name===f.id?"text-teal-400":"text-gray-400 hover:text-teal-400"}`,children:[l.jsx(f.icon,{className:"w-6 h-6 mb-1"}),l.jsx("span",{className:"text-xs font-semibold",children:f.label})]},f.id))})]})}const mL=.5,hFe=()=>{const{animals:t,healthEvents:e,weighings:n,parturitions:r}=rt();return N.useMemo(()=>{const o=[...t.filter(p=>p.status==="Activo"&&p.sex==="Hembra").map(p=>{const g=e.filter(C=>C.animalId===p.id).reduce((C,j)=>C+(j.calculatedCost||0),0),m=n.filter(C=>C.goatId===p.id),y=m.reduce((C,j)=>C+j.kg,0),x=y*mL;let w=null,_=0;const A=r.filter(C=>C.goatId===p.id);y>0&&A.length>0&&(_=A.reduce((j,T)=>{const P=m.filter(R=>new Date(R.date)>=new Date(T.parturitionDate));if(P.length===0)return j;const I=new Date(T.parturitionDate),F=(new Date(P.sort((R,H)=>new Date(H.date).getTime()-new Date(R.date).getTime())[0].date).getTime()-I.getTime())/(1e3*60*60*24);return j+F},0),w=g/y);const E=x-g;return{animalId:p.id,totalRevenue:x,totalCosts:g,netProfit:E,costPerLiter:w,totalKgProduced:y,lactationDays:_}})].sort((p,g)=>g.netProfit-p.netProfit),c=o.reduce((p,g)=>p+g.totalRevenue,0),u=o.reduce((p,g)=>p+g.totalCosts,0),d=c-u,f=o.filter(p=>p.costPerLiter!==null&&p.costPerLiter>0).map(p=>p.costPerLiter),h=f.length>0?f.reduce((p,g)=>p+g,0)/f.length:0;return{animalsByProfitability:o,totalFarmRevenue:c,totalFarmCosts:u,totalFarmNetProfit:d,averageCostPerLiter:h,assumedMilkPrice:mL}},[t,e,n,r])},Hy=({title:t,value:e,unit:n,icon:r,colorClass:i})=>l.jsxs("div",{className:`bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border ${i||""}`,children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[l.jsx(r,{size:14}),l.jsx("span",{children:t})]}),l.jsxs("p",{className:"text-3xl font-bold text-white mt-1",children:[e," ",l.jsx("span",{className:"text-xl text-zinc-400",children:n})]})]}),gL=({animalData:t})=>{const e=t.netProfit>=0;return l.jsxs("div",{className:"w-full text-left bg-black/20 rounded-xl p-4 border border-zinc-700/80 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-xl text-white",children:t.animalId}),l.jsxs("div",{className:"flex items-center gap-4 text-xs text-zinc-400 mt-1",children:[l.jsxs("span",{children:["Ingresos: $",t.totalRevenue.toFixed(2)]}),l.jsxs("span",{children:["Costos: $",t.totalCosts.toFixed(2)]})]})]}),l.jsxs("div",{className:`text-right font-bold text-2xl ${e?"text-brand-green":"text-brand-red"}`,children:[e?"+":"","$",t.netProfit.toFixed(2)]})]})},pFe=({active:t,payload:e})=>t&&e&&e.length?l.jsxs("div",{className:"bg-black/60 backdrop-blur-md p-2 rounded-lg border border-zinc-700 text-white text-sm",children:[l.jsx("p",{className:"font-bold",children:e[0].payload.animalId}),l.jsxs("p",{style:{color:e[0].fill},children:["Rentabilidad: $",e[0].value.toFixed(2)]})]}):null;function mFe(){const{animalsByProfitability:t,totalFarmRevenue:e,totalFarmCosts:n,totalFarmNetProfit:r,averageCostPerLiter:i,assumedMilkPrice:s}=hFe(),a=t.slice(0,5),o=t.slice(-5).reverse();return t.length===0?l.jsxs("div",{className:"text-center py-10 bg-brand-glass rounded-2xl mx-4 flex flex-col items-center gap-4",children:[l.jsx(Ql,{size:48,className:"text-zinc-600"}),l.jsx("p",{className:"text-zinc-400 font-semibold text-lg",children:"No hay datos suficientes"}),l.jsx("p",{className:"text-zinc-500 text-sm max-w-xs",children:"Registra pesajes lecheros y eventos de salud con costos para empezar a ver el análisis económico."})]}):l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 animate-fade-in px-4",children:[l.jsxs("header",{className:"text-center",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Análisis Económico"}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Rentabilidad de la Finca"})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsx(Hy,{title:"Ingresos Totales (Leche)",value:`$${e.toFixed(2)}`,icon:Yf,colorClass:"border-green-500/30"}),l.jsx(Hy,{title:"Costos Totales (Sanidad)",value:`$${n.toFixed(2)}`,icon:Gf,colorClass:"border-red-500/30"})]}),l.jsxs("div",{className:`bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border ${r>=0?"border-green-500/50":"border-red-500/50"}`,children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[l.jsx(Ql,{size:14}),l.jsx("span",{children:"Rentabilidad Neta (Ingresos - Costos)"})]}),l.jsxs("p",{className:`text-5xl font-bold mt-1 ${r>=0?"text-brand-green":"text-brand-red"}`,children:[r>=0?"+":"","$",r.toFixed(2)]})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsx(Hy,{title:"Costo / Litro de Leche",value:`$${i.toFixed(3)}`,icon:Xl}),l.jsx(Hy,{title:"Precio Leche (Asumido)",value:`$${s.toFixed(2)}`,unit:"/Kg",icon:ba})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-white mb-4",children:[l.jsx(Tee,{size:20})," Distribución de Rentabilidad"]}),l.jsx("div",{className:"w-full h-56",children:l.jsx(Er,{children:l.jsxs(Ls,{data:t,margin:{top:5,right:0,left:0,bottom:5},children:[l.jsx(sr,{dataKey:"animalId",tick:!1,axisLine:!1}),l.jsx(fn,{content:l.jsx(pFe,{}),cursor:{fill:"rgba(255, 255, 255, 0.1)"}}),l.jsx(Lr,{dataKey:"netProfit",children:t.map(c=>l.jsx(Ms,{fill:c.netProfit>=0?"#34C759":"#FF3B30"},c.animalId))})]})})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-xl font-semibold text-zinc-300",children:"Ranking de Rentabilidad"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("h4",{className:"font-semibold text-brand-green flex items-center gap-2",children:[l.jsx(Yf,{size:18})," Top 5 Animales Más Rentables"]}),a.map(c=>l.jsx(gL,{animalData:c},c.animalId))]}),l.jsxs("div",{className:"space-y-2 pt-4",children:[l.jsxs("h4",{className:"font-semibold text-brand-red flex items-center gap-2",children:[l.jsx(Gf,{size:18})," Top 5 Animales Menos Rentables"]}),o.map(c=>l.jsx(gL,{animalData:c},c.animalId))]})]})]})}function gFe({onSwitchModule:t}){const{syncStatus:e}=rt();return l.jsxs("div",{className:"min-h-screen animate-fade-in text-white flex flex-col",children:[l.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-gray-900/80 backdrop-blur-lg border-b border-brand-border",children:l.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[l.jsx("button",{onClick:()=>t("rebano"),className:"p-2 -ml-2 text-zinc-400 hover:text-white","aria-label":"Salir del módulo",children:l.jsx(ar,{size:24})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ql,{className:"text-yellow-400"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-bold text-white leading-none",children:"GanaderoOS"}),l.jsx("p",{className:"text-xs text-zinc-400 leading-none",children:"Cents"})]})]}),l.jsx("div",{className:"w-8 flex justify-end",children:l.jsx(Lv,{status:e})})]})}),l.jsx("main",{className:"flex-grow pt-16 pb-24",children:l.jsx(mFe,{})}),l.jsx(S1,{onSwitchModule:t})]})}const vFe=()=>l.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-[#1C1C1E] animate-fade-in",children:[l.jsxs("div",{className:"relative flex items-center justify-center w-24 h-24",children:[l.jsx(xv,{className:"text-brand-orange w-12 h-12"}),l.jsx("div",{className:"absolute inset-0",children:l.jsx(OF,{className:"w-24 h-24 text-zinc-700 animate-spin-slow"})})]}),l.jsx("p",{className:"mt-4 text-lg font-medium text-zinc-400 tracking-wider",children:"Cargando datos..."})]});function yFe(){const{currentUser:t,isLoading:e}=SF(),{isLoading:n}=rt(),[r,i]=N.useState("rebano"),[s,a]=N.useState({page:null,sourceModule:void 0}),[o,c]=N.useState({lactokeeper:{name:"dashboard"}});N.useEffect(()=>{r!=="rebano"&&a({page:null,sourceModule:void 0})},[r]);const u=N.useCallback(h=>{i(h)},[]),d=N.useCallback((h,p)=>{a({page:h,sourceModule:p}),i("rebano")},[]),f=N.useCallback(h=>{c(p=>({...p,lactokeeper:h}))},[]);if(e||t&&n)return l.jsx(vFe,{});if(!t)return l.jsx(xte,{});switch(r){case"lactokeeper":return l.jsx(_4e,{initialPage:o.lactokeeper,onPageStateChange:f,navigateToRebano:d,onSwitchModule:u});case"kilos":return l.jsx(D4e,{navigateToRebano:d,onSwitchModule:u});case"salud":return l.jsx(fFe,{onSwitchModule:u});case"cents":return l.jsx(gFe,{onSwitchModule:u});case"rebano":default:return l.jsx(r4e,{initialState:s,onSwitchModule:u})}}WS.createRoot(document.getElementById("root")).render(l.jsx(q.StrictMode,{children:l.jsx(dee,{children:l.jsx(xee,{children:l.jsx(yFe,{})})})}));
