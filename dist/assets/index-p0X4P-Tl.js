var s9=Object.defineProperty;var o9=(t,e,n)=>e in t?s9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var xr=(t,e,n)=>o9(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Vu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var n4={exports:{}},F0={},r4={exports:{}},bt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pm=Symbol.for("react.element"),l9=Symbol.for("react.portal"),c9=Symbol.for("react.fragment"),u9=Symbol.for("react.strict_mode"),d9=Symbol.for("react.profiler"),f9=Symbol.for("react.provider"),h9=Symbol.for("react.context"),p9=Symbol.for("react.forward_ref"),m9=Symbol.for("react.suspense"),g9=Symbol.for("react.memo"),y9=Symbol.for("react.lazy"),TT=Symbol.iterator;function v9(t){return t===null||typeof t!="object"?null:(t=TT&&t[TT]||t["@@iterator"],typeof t=="function"?t:null)}var i4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},a4=Object.assign,s4={};function xf(t,e,n){this.props=t,this.context=e,this.refs=s4,this.updater=n||i4}xf.prototype.isReactComponent={};xf.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};xf.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function o4(){}o4.prototype=xf.prototype;function k2(t,e,n){this.props=t,this.context=e,this.refs=s4,this.updater=n||i4}var N2=k2.prototype=new o4;N2.constructor=k2;a4(N2,xf.prototype);N2.isPureReactComponent=!0;var PT=Array.isArray,l4=Object.prototype.hasOwnProperty,O2={current:null},c4={key:!0,ref:!0,__self:!0,__source:!0};function u4(t,e,n){var r,i={},a=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(a=""+e.key),e)l4.call(e,r)&&!c4.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Pm,type:t,key:a,ref:s,props:i,_owner:O2.current}}function x9(t,e){return{$$typeof:Pm,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function I2(t){return typeof t=="object"&&t!==null&&t.$$typeof===Pm}function b9(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var CT=/\/+/g;function Ib(t,e){return typeof t=="object"&&t!==null&&t.key!=null?b9(""+t.key):e.toString(36)}function my(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Pm:case l9:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Ib(s,0):r,PT(i)?(n="",t!=null&&(n=t.replace(CT,"$&/")+"/"),my(i,e,n,"",function(u){return u})):i!=null&&(I2(i)&&(i=x9(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(CT,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",PT(t))for(var o=0;o<t.length;o++){a=t[o];var l=r+Ib(a,o);s+=my(a,e,n,l,i)}else if(l=v9(t),typeof l=="function")for(t=l.call(t),o=0;!(a=t.next()).done;)a=a.value,l=r+Ib(a,o++),s+=my(a,e,n,l,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Tg(t,e,n){if(t==null)return t;var r=[],i=0;return my(t,r,"","",function(a){return e.call(n,a,i++)}),r}function w9(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ei={current:null},gy={transition:null},_9={ReactCurrentDispatcher:ei,ReactCurrentBatchConfig:gy,ReactCurrentOwner:O2};function d4(){throw Error("act(...) is not supported in production builds of React.")}bt.Children={map:Tg,forEach:function(t,e,n){Tg(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Tg(t,function(){e++}),e},toArray:function(t){return Tg(t,function(e){return e})||[]},only:function(t){if(!I2(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};bt.Component=xf;bt.Fragment=c9;bt.Profiler=d9;bt.PureComponent=k2;bt.StrictMode=u9;bt.Suspense=m9;bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_9;bt.act=d4;bt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=a4({},t.props),i=t.key,a=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,s=O2.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)l4.call(e,l)&&!c4.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:Pm,type:t.type,key:i,ref:a,props:r,_owner:s}};bt.createContext=function(t){return t={$$typeof:h9,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:f9,_context:t},t.Consumer=t};bt.createElement=u4;bt.createFactory=function(t){var e=u4.bind(null,t);return e.type=t,e};bt.createRef=function(){return{current:null}};bt.forwardRef=function(t){return{$$typeof:p9,render:t}};bt.isValidElement=I2;bt.lazy=function(t){return{$$typeof:y9,_payload:{_status:-1,_result:t},_init:w9}};bt.memo=function(t,e){return{$$typeof:g9,type:t,compare:e===void 0?null:e}};bt.startTransition=function(t){var e=gy.transition;gy.transition={};try{t()}finally{gy.transition=e}};bt.unstable_act=d4;bt.useCallback=function(t,e){return ei.current.useCallback(t,e)};bt.useContext=function(t){return ei.current.useContext(t)};bt.useDebugValue=function(){};bt.useDeferredValue=function(t){return ei.current.useDeferredValue(t)};bt.useEffect=function(t,e){return ei.current.useEffect(t,e)};bt.useId=function(){return ei.current.useId()};bt.useImperativeHandle=function(t,e,n){return ei.current.useImperativeHandle(t,e,n)};bt.useInsertionEffect=function(t,e){return ei.current.useInsertionEffect(t,e)};bt.useLayoutEffect=function(t,e){return ei.current.useLayoutEffect(t,e)};bt.useMemo=function(t,e){return ei.current.useMemo(t,e)};bt.useReducer=function(t,e,n){return ei.current.useReducer(t,e,n)};bt.useRef=function(t){return ei.current.useRef(t)};bt.useState=function(t){return ei.current.useState(t)};bt.useSyncExternalStore=function(t,e,n){return ei.current.useSyncExternalStore(t,e,n)};bt.useTransition=function(){return ei.current.useTransition()};bt.version="18.3.1";r4.exports=bt;var O=r4.exports;const F=Vt(O);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S9=O,E9=Symbol.for("react.element"),A9=Symbol.for("react.fragment"),j9=Object.prototype.hasOwnProperty,T9=S9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,P9={key:!0,ref:!0,__self:!0,__source:!0};function f4(t,e,n){var r,i={},a=null,s=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)j9.call(e,r)&&!P9.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:E9,type:t,key:a,ref:s,props:i,_owner:T9.current}}F0.Fragment=A9;F0.jsx=f4;F0.jsxs=f4;n4.exports=F0;var c=n4.exports,h1={},h4={exports:{}},Hi={},p4={exports:{}},m4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,Y){var le=q.length;q.push(Y);e:for(;0<le;){var ce=le-1>>>1,ye=q[ce];if(0<i(ye,Y))q[ce]=Y,q[le]=ye,le=ce;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var Y=q[0],le=q.pop();if(le!==Y){q[0]=le;e:for(var ce=0,ye=q.length,Ee=ye>>>1;ce<Ee;){var He=2*(ce+1)-1,ct=q[He],ft=He+1,It=q[ft];if(0>i(ct,le))ft<ye&&0>i(It,ct)?(q[ce]=It,q[ft]=le,ce=ft):(q[ce]=ct,q[He]=le,ce=He);else if(ft<ye&&0>i(It,le))q[ce]=It,q[ft]=le,ce=ft;else break e}}return Y}function i(q,Y){var le=q.sortIndex-Y.sortIndex;return le!==0?le:q.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var l=[],u=[],f=1,d=null,h=3,p=!1,v=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(q){for(var Y=n(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=q)r(u),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(u)}}function P(q){if(y=!1,E(q),!v)if(n(l)!==null)v=!0,U(A);else{var Y=n(u);Y!==null&&Z(P,Y.startTime-q)}}function A(q,Y){v=!1,y&&(y=!1,x(T),T=-1),p=!0;var le=h;try{for(E(Y),d=n(l);d!==null&&(!(d.expirationTime>Y)||q&&!M());){var ce=d.callback;if(typeof ce=="function"){d.callback=null,h=d.priorityLevel;var ye=ce(d.expirationTime<=Y);Y=t.unstable_now(),typeof ye=="function"?d.callback=ye:d===n(l)&&r(l),E(Y)}else r(l);d=n(l)}if(d!==null)var Ee=!0;else{var He=n(u);He!==null&&Z(P,He.startTime-Y),Ee=!1}return Ee}finally{d=null,h=le,p=!1}}var j=!1,S=null,T=-1,N=5,D=-1;function M(){return!(t.unstable_now()-D<N)}function $(){if(S!==null){var q=t.unstable_now();D=q;var Y=!0;try{Y=S(!0,q)}finally{Y?z():(j=!1,S=null)}}else j=!1}var z;if(typeof _=="function")z=function(){_($)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,ee=H.port2;H.port1.onmessage=$,z=function(){ee.postMessage(null)}}else z=function(){b($,0)};function U(q){S=q,j||(j=!0,z())}function Z(q,Y){T=b(function(){q(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,U(A))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(q){switch(h){case 1:case 2:case 3:var Y=3;break;default:Y=h}var le=h;h=Y;try{return q()}finally{h=le}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,Y){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var le=h;h=q;try{return Y()}finally{h=le}},t.unstable_scheduleCallback=function(q,Y,le){var ce=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?ce+le:ce):le=ce,q){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=le+ye,q={id:f++,callback:Y,priorityLevel:q,startTime:le,expirationTime:ye,sortIndex:-1},le>ce?(q.sortIndex=le,e(u,q),n(l)===null&&q===n(u)&&(y?(x(T),T=-1):y=!0,Z(P,le-ce))):(q.sortIndex=ye,e(l,q),v||p||(v=!0,U(A))),q},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(q){var Y=h;return function(){var le=h;h=Y;try{return q.apply(this,arguments)}finally{h=le}}}})(m4);p4.exports=m4;var C9=p4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k9=O,Wi=C9;function Te(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g4=new Set,hp={};function Zc(t,e){Sd(t,e),Sd(t+"Capture",e)}function Sd(t,e){for(hp[t]=e,t=0;t<e.length;t++)g4.add(e[t])}var io=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p1=Object.prototype.hasOwnProperty,N9=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kT={},NT={};function O9(t){return p1.call(NT,t)?!0:p1.call(kT,t)?!1:N9.test(t)?NT[t]=!0:(kT[t]=!0,!1)}function I9(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function D9(t,e,n,r){if(e===null||typeof e>"u"||I9(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ti(t,e,n,r,i,a,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=s}var Tr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tr[t]=new ti(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tr[e]=new ti(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tr[t]=new ti(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tr[t]=new ti(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tr[t]=new ti(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tr[t]=new ti(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tr[t]=new ti(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tr[t]=new ti(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tr[t]=new ti(t,5,!1,t.toLowerCase(),null,!1,!1)});var D2=/[\-:]([a-z])/g;function M2(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(D2,M2);Tr[e]=new ti(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(D2,M2);Tr[e]=new ti(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(D2,M2);Tr[e]=new ti(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tr[t]=new ti(t,1,!1,t.toLowerCase(),null,!1,!1)});Tr.xlinkHref=new ti("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tr[t]=new ti(t,1,!1,t.toLowerCase(),null,!0,!0)});function R2(t,e,n,r){var i=Tr.hasOwnProperty(e)?Tr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(D9(e,n,i,r)&&(n=null),r||i===null?O9(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var xo=k9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pg=Symbol.for("react.element"),Fu=Symbol.for("react.portal"),Bu=Symbol.for("react.fragment"),$2=Symbol.for("react.strict_mode"),m1=Symbol.for("react.profiler"),y4=Symbol.for("react.provider"),v4=Symbol.for("react.context"),L2=Symbol.for("react.forward_ref"),g1=Symbol.for("react.suspense"),y1=Symbol.for("react.suspense_list"),z2=Symbol.for("react.memo"),Uo=Symbol.for("react.lazy"),x4=Symbol.for("react.offscreen"),OT=Symbol.iterator;function sh(t){return t===null||typeof t!="object"?null:(t=OT&&t[OT]||t["@@iterator"],typeof t=="function"?t:null)}var En=Object.assign,Db;function Ah(t){if(Db===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Db=e&&e[1]||""}return`
`+Db+t}var Mb=!1;function Rb(t,e){if(!t||Mb)return"";Mb=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=r.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=o);break}}}finally{Mb=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ah(t):""}function M9(t){switch(t.tag){case 5:return Ah(t.type);case 16:return Ah("Lazy");case 13:return Ah("Suspense");case 19:return Ah("SuspenseList");case 0:case 2:case 15:return t=Rb(t.type,!1),t;case 11:return t=Rb(t.type.render,!1),t;case 1:return t=Rb(t.type,!0),t;default:return""}}function v1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bu:return"Fragment";case Fu:return"Portal";case m1:return"Profiler";case $2:return"StrictMode";case g1:return"Suspense";case y1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case v4:return(t.displayName||"Context")+".Consumer";case y4:return(t._context.displayName||"Context")+".Provider";case L2:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case z2:return e=t.displayName||null,e!==null?e:v1(t.type)||"Memo";case Uo:e=t._payload,t=t._init;try{return v1(t(e))}catch{}}return null}function R9(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return v1(e);case 8:return e===$2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function pl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function b4(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $9(t){var e=b4(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,a.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cg(t){t._valueTracker||(t._valueTracker=$9(t))}function w4(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=b4(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function zy(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function x1(t,e){var n=e.checked;return En({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function IT(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=pl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _4(t,e){e=e.checked,e!=null&&R2(t,"checked",e,!1)}function b1(t,e){_4(t,e);var n=pl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?w1(t,e.type,n):e.hasOwnProperty("defaultValue")&&w1(t,e.type,pl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function DT(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function w1(t,e,n){(e!=="number"||zy(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var jh=Array.isArray;function cd(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+pl(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function _1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Te(91));return En({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function MT(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Te(92));if(jh(n)){if(1<n.length)throw Error(Te(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:pl(n)}}function S4(t,e){var n=pl(e.value),r=pl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function RT(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function E4(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function S1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?E4(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var kg,A4=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(kg=kg||document.createElement("div"),kg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=kg.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function pp(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Vh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},L9=["Webkit","ms","Moz","O"];Object.keys(Vh).forEach(function(t){L9.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Vh[e]=Vh[t]})});function j4(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Vh.hasOwnProperty(t)&&Vh[t]?(""+e).trim():e+"px"}function T4(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=j4(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var z9=En({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function E1(t,e){if(e){if(z9[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Te(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Te(62))}}function A1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var j1=null;function V2(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var T1=null,ud=null,dd=null;function $T(t){if(t=Nm(t)){if(typeof T1!="function")throw Error(Te(280));var e=t.stateNode;e&&(e=q0(e),T1(t.stateNode,t.type,e))}}function P4(t){ud?dd?dd.push(t):dd=[t]:ud=t}function C4(){if(ud){var t=ud,e=dd;if(dd=ud=null,$T(t),e)for(t=0;t<e.length;t++)$T(e[t])}}function k4(t,e){return t(e)}function N4(){}var $b=!1;function O4(t,e,n){if($b)return t(e,n);$b=!0;try{return k4(t,e,n)}finally{$b=!1,(ud!==null||dd!==null)&&(N4(),C4())}}function mp(t,e){var n=t.stateNode;if(n===null)return null;var r=q0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Te(231,e,typeof n));return n}var P1=!1;if(io)try{var oh={};Object.defineProperty(oh,"passive",{get:function(){P1=!0}}),window.addEventListener("test",oh,oh),window.removeEventListener("test",oh,oh)}catch{P1=!1}function V9(t,e,n,r,i,a,s,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(f){this.onError(f)}}var Fh=!1,Vy=null,Fy=!1,C1=null,F9={onError:function(t){Fh=!0,Vy=t}};function B9(t,e,n,r,i,a,s,o,l){Fh=!1,Vy=null,V9.apply(F9,arguments)}function U9(t,e,n,r,i,a,s,o,l){if(B9.apply(this,arguments),Fh){if(Fh){var u=Vy;Fh=!1,Vy=null}else throw Error(Te(198));Fy||(Fy=!0,C1=u)}}function Jc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function I4(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function LT(t){if(Jc(t)!==t)throw Error(Te(188))}function W9(t){var e=t.alternate;if(!e){if(e=Jc(t),e===null)throw Error(Te(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return LT(i),t;if(a===r)return LT(i),e;a=a.sibling}throw Error(Te(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,o=i.child;o;){if(o===n){s=!0,n=i,r=a;break}if(o===r){s=!0,r=i,n=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===n){s=!0,n=a,r=i;break}if(o===r){s=!0,r=a,n=i;break}o=o.sibling}if(!s)throw Error(Te(189))}}if(n.alternate!==r)throw Error(Te(190))}if(n.tag!==3)throw Error(Te(188));return n.stateNode.current===n?t:e}function D4(t){return t=W9(t),t!==null?M4(t):null}function M4(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=M4(t);if(e!==null)return e;t=t.sibling}return null}var R4=Wi.unstable_scheduleCallback,zT=Wi.unstable_cancelCallback,K9=Wi.unstable_shouldYield,q9=Wi.unstable_requestPaint,Ln=Wi.unstable_now,H9=Wi.unstable_getCurrentPriorityLevel,F2=Wi.unstable_ImmediatePriority,$4=Wi.unstable_UserBlockingPriority,By=Wi.unstable_NormalPriority,G9=Wi.unstable_LowPriority,L4=Wi.unstable_IdlePriority,B0=null,gs=null;function Y9(t){if(gs&&typeof gs.onCommitFiberRoot=="function")try{gs.onCommitFiberRoot(B0,t,void 0,(t.current.flags&128)===128)}catch{}}var Ua=Math.clz32?Math.clz32:Z9,X9=Math.log,Q9=Math.LN2;function Z9(t){return t>>>=0,t===0?32:31-(X9(t)/Q9|0)|0}var Ng=64,Og=4194304;function Th(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Uy(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,s=n&268435455;if(s!==0){var o=s&~i;o!==0?r=Th(o):(a&=s,a!==0&&(r=Th(a)))}else s=n&~i,s!==0?r=Th(s):a!==0&&(r=Th(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ua(e),i=1<<n,r|=t[n],e&=~i;return r}function J9(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eB(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var s=31-Ua(a),o=1<<s,l=i[s];l===-1?(!(o&n)||o&r)&&(i[s]=J9(o,e)):l<=e&&(t.expiredLanes|=o),a&=~o}}function k1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function z4(){var t=Ng;return Ng<<=1,!(Ng&4194240)&&(Ng=64),t}function Lb(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Cm(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ua(e),t[e]=n}function tB(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ua(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}function B2(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ua(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Wt=0;function V4(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var F4,U2,B4,U4,W4,N1=!1,Ig=[],el=null,tl=null,nl=null,gp=new Map,yp=new Map,qo=[],nB="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function VT(t,e){switch(t){case"focusin":case"focusout":el=null;break;case"dragenter":case"dragleave":tl=null;break;case"mouseover":case"mouseout":nl=null;break;case"pointerover":case"pointerout":gp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":yp.delete(e.pointerId)}}function lh(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Nm(e),e!==null&&U2(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function rB(t,e,n,r,i){switch(e){case"focusin":return el=lh(el,t,e,n,r,i),!0;case"dragenter":return tl=lh(tl,t,e,n,r,i),!0;case"mouseover":return nl=lh(nl,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return gp.set(a,lh(gp.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,yp.set(a,lh(yp.get(a)||null,t,e,n,r,i)),!0}return!1}function K4(t){var e=mc(t.target);if(e!==null){var n=Jc(e);if(n!==null){if(e=n.tag,e===13){if(e=I4(n),e!==null){t.blockedOn=e,W4(t.priority,function(){B4(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yy(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=O1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);j1=r,n.target.dispatchEvent(r),j1=null}else return e=Nm(n),e!==null&&U2(e),t.blockedOn=n,!1;e.shift()}return!0}function FT(t,e,n){yy(t)&&n.delete(e)}function iB(){N1=!1,el!==null&&yy(el)&&(el=null),tl!==null&&yy(tl)&&(tl=null),nl!==null&&yy(nl)&&(nl=null),gp.forEach(FT),yp.forEach(FT)}function ch(t,e){t.blockedOn===e&&(t.blockedOn=null,N1||(N1=!0,Wi.unstable_scheduleCallback(Wi.unstable_NormalPriority,iB)))}function vp(t){function e(i){return ch(i,t)}if(0<Ig.length){ch(Ig[0],t);for(var n=1;n<Ig.length;n++){var r=Ig[n];r.blockedOn===t&&(r.blockedOn=null)}}for(el!==null&&ch(el,t),tl!==null&&ch(tl,t),nl!==null&&ch(nl,t),gp.forEach(e),yp.forEach(e),n=0;n<qo.length;n++)r=qo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<qo.length&&(n=qo[0],n.blockedOn===null);)K4(n),n.blockedOn===null&&qo.shift()}var fd=xo.ReactCurrentBatchConfig,Wy=!0;function aB(t,e,n,r){var i=Wt,a=fd.transition;fd.transition=null;try{Wt=1,W2(t,e,n,r)}finally{Wt=i,fd.transition=a}}function sB(t,e,n,r){var i=Wt,a=fd.transition;fd.transition=null;try{Wt=4,W2(t,e,n,r)}finally{Wt=i,fd.transition=a}}function W2(t,e,n,r){if(Wy){var i=O1(t,e,n,r);if(i===null)Gb(t,e,r,Ky,n),VT(t,r);else if(rB(i,t,e,n,r))r.stopPropagation();else if(VT(t,r),e&4&&-1<nB.indexOf(t)){for(;i!==null;){var a=Nm(i);if(a!==null&&F4(a),a=O1(t,e,n,r),a===null&&Gb(t,e,r,Ky,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Gb(t,e,r,null,n)}}var Ky=null;function O1(t,e,n,r){if(Ky=null,t=V2(r),t=mc(t),t!==null)if(e=Jc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=I4(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ky=t,null}function q4(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(H9()){case F2:return 1;case $4:return 4;case By:case G9:return 16;case L4:return 536870912;default:return 16}default:return 16}}var Yo=null,K2=null,vy=null;function H4(){if(vy)return vy;var t,e=K2,n=e.length,r,i="value"in Yo?Yo.value:Yo.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[a-r];r++);return vy=i.slice(t,1<r?1-r:void 0)}function xy(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Dg(){return!0}function BT(){return!1}function Gi(t){function e(n,r,i,a,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Dg:BT,this.isPropagationStopped=BT,this}return En(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Dg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Dg)},persist:function(){},isPersistent:Dg}),e}var bf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},q2=Gi(bf),km=En({},bf,{view:0,detail:0}),oB=Gi(km),zb,Vb,uh,U0=En({},km,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:H2,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==uh&&(uh&&t.type==="mousemove"?(zb=t.screenX-uh.screenX,Vb=t.screenY-uh.screenY):Vb=zb=0,uh=t),zb)},movementY:function(t){return"movementY"in t?t.movementY:Vb}}),UT=Gi(U0),lB=En({},U0,{dataTransfer:0}),cB=Gi(lB),uB=En({},km,{relatedTarget:0}),Fb=Gi(uB),dB=En({},bf,{animationName:0,elapsedTime:0,pseudoElement:0}),fB=Gi(dB),hB=En({},bf,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),pB=Gi(hB),mB=En({},bf,{data:0}),WT=Gi(mB),gB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xB(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=vB[t])?!!e[t]:!1}function H2(){return xB}var bB=En({},km,{key:function(t){if(t.key){var e=gB[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xy(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?yB[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:H2,charCode:function(t){return t.type==="keypress"?xy(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xy(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),wB=Gi(bB),_B=En({},U0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),KT=Gi(_B),SB=En({},km,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:H2}),EB=Gi(SB),AB=En({},bf,{propertyName:0,elapsedTime:0,pseudoElement:0}),jB=Gi(AB),TB=En({},U0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),PB=Gi(TB),CB=[9,13,27,32],G2=io&&"CompositionEvent"in window,Bh=null;io&&"documentMode"in document&&(Bh=document.documentMode);var kB=io&&"TextEvent"in window&&!Bh,G4=io&&(!G2||Bh&&8<Bh&&11>=Bh),qT=" ",HT=!1;function Y4(t,e){switch(t){case"keyup":return CB.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function X4(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Uu=!1;function NB(t,e){switch(t){case"compositionend":return X4(e);case"keypress":return e.which!==32?null:(HT=!0,qT);case"textInput":return t=e.data,t===qT&&HT?null:t;default:return null}}function OB(t,e){if(Uu)return t==="compositionend"||!G2&&Y4(t,e)?(t=H4(),vy=K2=Yo=null,Uu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return G4&&e.locale!=="ko"?null:e.data;default:return null}}var IB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function GT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!IB[t.type]:e==="textarea"}function Q4(t,e,n,r){P4(r),e=qy(e,"onChange"),0<e.length&&(n=new q2("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Uh=null,xp=null;function DB(t){lR(t,0)}function W0(t){var e=qu(t);if(w4(e))return t}function MB(t,e){if(t==="change")return e}var Z4=!1;if(io){var Bb;if(io){var Ub="oninput"in document;if(!Ub){var YT=document.createElement("div");YT.setAttribute("oninput","return;"),Ub=typeof YT.oninput=="function"}Bb=Ub}else Bb=!1;Z4=Bb&&(!document.documentMode||9<document.documentMode)}function XT(){Uh&&(Uh.detachEvent("onpropertychange",J4),xp=Uh=null)}function J4(t){if(t.propertyName==="value"&&W0(xp)){var e=[];Q4(e,xp,t,V2(t)),O4(DB,e)}}function RB(t,e,n){t==="focusin"?(XT(),Uh=e,xp=n,Uh.attachEvent("onpropertychange",J4)):t==="focusout"&&XT()}function $B(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return W0(xp)}function LB(t,e){if(t==="click")return W0(e)}function zB(t,e){if(t==="input"||t==="change")return W0(e)}function VB(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qa=typeof Object.is=="function"?Object.is:VB;function bp(t,e){if(qa(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!p1.call(e,i)||!qa(t[i],e[i]))return!1}return!0}function QT(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ZT(t,e){var n=QT(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=QT(n)}}function eR(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?eR(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function tR(){for(var t=window,e=zy();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=zy(t.document)}return e}function Y2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function FB(t){var e=tR(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&eR(n.ownerDocument.documentElement,n)){if(r!==null&&Y2(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=ZT(n,a);var s=ZT(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var BB=io&&"documentMode"in document&&11>=document.documentMode,Wu=null,I1=null,Wh=null,D1=!1;function JT(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;D1||Wu==null||Wu!==zy(r)||(r=Wu,"selectionStart"in r&&Y2(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Wh&&bp(Wh,r)||(Wh=r,r=qy(I1,"onSelect"),0<r.length&&(e=new q2("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Wu)))}function Mg(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ku={animationend:Mg("Animation","AnimationEnd"),animationiteration:Mg("Animation","AnimationIteration"),animationstart:Mg("Animation","AnimationStart"),transitionend:Mg("Transition","TransitionEnd")},Wb={},nR={};io&&(nR=document.createElement("div").style,"AnimationEvent"in window||(delete Ku.animationend.animation,delete Ku.animationiteration.animation,delete Ku.animationstart.animation),"TransitionEvent"in window||delete Ku.transitionend.transition);function K0(t){if(Wb[t])return Wb[t];if(!Ku[t])return t;var e=Ku[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in nR)return Wb[t]=e[n];return t}var rR=K0("animationend"),iR=K0("animationiteration"),aR=K0("animationstart"),sR=K0("transitionend"),oR=new Map,eP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sl(t,e){oR.set(t,e),Zc(e,[t])}for(var Kb=0;Kb<eP.length;Kb++){var qb=eP[Kb],UB=qb.toLowerCase(),WB=qb[0].toUpperCase()+qb.slice(1);Sl(UB,"on"+WB)}Sl(rR,"onAnimationEnd");Sl(iR,"onAnimationIteration");Sl(aR,"onAnimationStart");Sl("dblclick","onDoubleClick");Sl("focusin","onFocus");Sl("focusout","onBlur");Sl(sR,"onTransitionEnd");Sd("onMouseEnter",["mouseout","mouseover"]);Sd("onMouseLeave",["mouseout","mouseover"]);Sd("onPointerEnter",["pointerout","pointerover"]);Sd("onPointerLeave",["pointerout","pointerover"]);Zc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ph="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KB=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ph));function tP(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,U9(r,e,void 0,t),t.currentTarget=null}function lR(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;tP(i,o,u),a=l}else for(s=0;s<r.length;s++){if(o=r[s],l=o.instance,u=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;tP(i,o,u),a=l}}}if(Fy)throw t=C1,Fy=!1,C1=null,t}function on(t,e){var n=e[z1];n===void 0&&(n=e[z1]=new Set);var r=t+"__bubble";n.has(r)||(cR(e,t,2,!1),n.add(r))}function Hb(t,e,n){var r=0;e&&(r|=4),cR(n,t,r,e)}var Rg="_reactListening"+Math.random().toString(36).slice(2);function wp(t){if(!t[Rg]){t[Rg]=!0,g4.forEach(function(n){n!=="selectionchange"&&(KB.has(n)||Hb(n,!1,t),Hb(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Rg]||(e[Rg]=!0,Hb("selectionchange",!1,e))}}function cR(t,e,n,r){switch(q4(e)){case 1:var i=aB;break;case 4:i=sB;break;default:i=W2}n=i.bind(null,e,n,t),i=void 0,!P1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Gb(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;o!==null;){if(s=mc(o),s===null)return;if(l=s.tag,l===5||l===6){r=a=s;continue e}o=o.parentNode}}r=r.return}O4(function(){var u=a,f=V2(n),d=[];e:{var h=oR.get(t);if(h!==void 0){var p=q2,v=t;switch(t){case"keypress":if(xy(n)===0)break e;case"keydown":case"keyup":p=wB;break;case"focusin":v="focus",p=Fb;break;case"focusout":v="blur",p=Fb;break;case"beforeblur":case"afterblur":p=Fb;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=UT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=cB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=EB;break;case rR:case iR:case aR:p=fB;break;case sR:p=jB;break;case"scroll":p=oB;break;case"wheel":p=PB;break;case"copy":case"cut":case"paste":p=pB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=KT}var y=(e&4)!==0,b=!y&&t==="scroll",x=y?h!==null?h+"Capture":null:h;y=[];for(var _=u,E;_!==null;){E=_;var P=E.stateNode;if(E.tag===5&&P!==null&&(E=P,x!==null&&(P=mp(_,x),P!=null&&y.push(_p(_,P,E)))),b)break;_=_.return}0<y.length&&(h=new p(h,v,null,n,f),d.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&n!==j1&&(v=n.relatedTarget||n.fromElement)&&(mc(v)||v[ao]))break e;if((p||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,p?(v=n.relatedTarget||n.toElement,p=u,v=v?mc(v):null,v!==null&&(b=Jc(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(p=null,v=u),p!==v)){if(y=UT,P="onMouseLeave",x="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(y=KT,P="onPointerLeave",x="onPointerEnter",_="pointer"),b=p==null?h:qu(p),E=v==null?h:qu(v),h=new y(P,_+"leave",p,n,f),h.target=b,h.relatedTarget=E,P=null,mc(f)===u&&(y=new y(x,_+"enter",v,n,f),y.target=E,y.relatedTarget=b,P=y),b=P,p&&v)t:{for(y=p,x=v,_=0,E=y;E;E=Pu(E))_++;for(E=0,P=x;P;P=Pu(P))E++;for(;0<_-E;)y=Pu(y),_--;for(;0<E-_;)x=Pu(x),E--;for(;_--;){if(y===x||x!==null&&y===x.alternate)break t;y=Pu(y),x=Pu(x)}y=null}else y=null;p!==null&&nP(d,h,p,y,!1),v!==null&&b!==null&&nP(d,b,v,y,!0)}}e:{if(h=u?qu(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var A=MB;else if(GT(h))if(Z4)A=zB;else{A=$B;var j=RB}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(A=LB);if(A&&(A=A(t,u))){Q4(d,A,n,f);break e}j&&j(t,h,u),t==="focusout"&&(j=h._wrapperState)&&j.controlled&&h.type==="number"&&w1(h,"number",h.value)}switch(j=u?qu(u):window,t){case"focusin":(GT(j)||j.contentEditable==="true")&&(Wu=j,I1=u,Wh=null);break;case"focusout":Wh=I1=Wu=null;break;case"mousedown":D1=!0;break;case"contextmenu":case"mouseup":case"dragend":D1=!1,JT(d,n,f);break;case"selectionchange":if(BB)break;case"keydown":case"keyup":JT(d,n,f)}var S;if(G2)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Uu?Y4(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(G4&&n.locale!=="ko"&&(Uu||T!=="onCompositionStart"?T==="onCompositionEnd"&&Uu&&(S=H4()):(Yo=f,K2="value"in Yo?Yo.value:Yo.textContent,Uu=!0)),j=qy(u,T),0<j.length&&(T=new WT(T,t,null,n,f),d.push({event:T,listeners:j}),S?T.data=S:(S=X4(n),S!==null&&(T.data=S)))),(S=kB?NB(t,n):OB(t,n))&&(u=qy(u,"onBeforeInput"),0<u.length&&(f=new WT("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:u}),f.data=S))}lR(d,e)})}function _p(t,e,n){return{instance:t,listener:e,currentTarget:n}}function qy(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=mp(t,n),a!=null&&r.unshift(_p(t,a,i)),a=mp(t,e),a!=null&&r.push(_p(t,a,i))),t=t.return}return r}function Pu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function nP(t,e,n,r,i){for(var a=e._reactName,s=[];n!==null&&n!==r;){var o=n,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,i?(l=mp(n,a),l!=null&&s.unshift(_p(n,l,o))):i||(l=mp(n,a),l!=null&&s.push(_p(n,l,o)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var qB=/\r\n?/g,HB=/\u0000|\uFFFD/g;function rP(t){return(typeof t=="string"?t:""+t).replace(qB,`
`).replace(HB,"")}function $g(t,e,n){if(e=rP(e),rP(t)!==e&&n)throw Error(Te(425))}function Hy(){}var M1=null,R1=null;function $1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var L1=typeof setTimeout=="function"?setTimeout:void 0,GB=typeof clearTimeout=="function"?clearTimeout:void 0,iP=typeof Promise=="function"?Promise:void 0,YB=typeof queueMicrotask=="function"?queueMicrotask:typeof iP<"u"?function(t){return iP.resolve(null).then(t).catch(XB)}:L1;function XB(t){setTimeout(function(){throw t})}function Yb(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),vp(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);vp(e)}function rl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function aP(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var wf=Math.random().toString(36).slice(2),cs="__reactFiber$"+wf,Sp="__reactProps$"+wf,ao="__reactContainer$"+wf,z1="__reactEvents$"+wf,QB="__reactListeners$"+wf,ZB="__reactHandles$"+wf;function mc(t){var e=t[cs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ao]||n[cs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=aP(t);t!==null;){if(n=t[cs])return n;t=aP(t)}return e}t=n,n=t.parentNode}return null}function Nm(t){return t=t[cs]||t[ao],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Te(33))}function q0(t){return t[Sp]||null}var V1=[],Hu=-1;function El(t){return{current:t}}function dn(t){0>Hu||(t.current=V1[Hu],V1[Hu]=null,Hu--)}function rn(t,e){Hu++,V1[Hu]=t.current,t.current=e}var ml={},Ur=El(ml),bi=El(!1),Rc=ml;function Ed(t,e){var n=t.type.contextTypes;if(!n)return ml;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function wi(t){return t=t.childContextTypes,t!=null}function Gy(){dn(bi),dn(Ur)}function sP(t,e,n){if(Ur.current!==ml)throw Error(Te(168));rn(Ur,e),rn(bi,n)}function uR(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Te(108,R9(t)||"Unknown",i));return En({},n,r)}function Yy(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ml,Rc=Ur.current,rn(Ur,t),rn(bi,bi.current),!0}function oP(t,e,n){var r=t.stateNode;if(!r)throw Error(Te(169));n?(t=uR(t,e,Rc),r.__reactInternalMemoizedMergedChildContext=t,dn(bi),dn(Ur),rn(Ur,t)):dn(bi),rn(bi,n)}var Bs=null,H0=!1,Xb=!1;function dR(t){Bs===null?Bs=[t]:Bs.push(t)}function JB(t){H0=!0,dR(t)}function Al(){if(!Xb&&Bs!==null){Xb=!0;var t=0,e=Wt;try{var n=Bs;for(Wt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Bs=null,H0=!1}catch(i){throw Bs!==null&&(Bs=Bs.slice(t+1)),R4(F2,Al),i}finally{Wt=e,Xb=!1}}return null}var Gu=[],Yu=0,Xy=null,Qy=0,ia=[],aa=0,$c=null,Us=1,Ws="";function ac(t,e){Gu[Yu++]=Qy,Gu[Yu++]=Xy,Xy=t,Qy=e}function fR(t,e,n){ia[aa++]=Us,ia[aa++]=Ws,ia[aa++]=$c,$c=t;var r=Us;t=Ws;var i=32-Ua(r)-1;r&=~(1<<i),n+=1;var a=32-Ua(e)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Us=1<<32-Ua(e)+i|n<<i|r,Ws=a+t}else Us=1<<a|n<<i|r,Ws=t}function X2(t){t.return!==null&&(ac(t,1),fR(t,1,0))}function Q2(t){for(;t===Xy;)Xy=Gu[--Yu],Gu[Yu]=null,Qy=Gu[--Yu],Gu[Yu]=null;for(;t===$c;)$c=ia[--aa],ia[aa]=null,Ws=ia[--aa],ia[aa]=null,Us=ia[--aa],ia[aa]=null}var Vi=null,Li=null,pn=!1,za=null;function hR(t,e){var n=la(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function lP(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Vi=t,Li=rl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Vi=t,Li=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=$c!==null?{id:Us,overflow:Ws}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=la(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Vi=t,Li=null,!0):!1;default:return!1}}function F1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function B1(t){if(pn){var e=Li;if(e){var n=e;if(!lP(t,e)){if(F1(t))throw Error(Te(418));e=rl(n.nextSibling);var r=Vi;e&&lP(t,e)?hR(r,n):(t.flags=t.flags&-4097|2,pn=!1,Vi=t)}}else{if(F1(t))throw Error(Te(418));t.flags=t.flags&-4097|2,pn=!1,Vi=t}}}function cP(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Vi=t}function Lg(t){if(t!==Vi)return!1;if(!pn)return cP(t),pn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$1(t.type,t.memoizedProps)),e&&(e=Li)){if(F1(t))throw pR(),Error(Te(418));for(;e;)hR(t,e),e=rl(e.nextSibling)}if(cP(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Te(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Li=rl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Li=null}}else Li=Vi?rl(t.stateNode.nextSibling):null;return!0}function pR(){for(var t=Li;t;)t=rl(t.nextSibling)}function Ad(){Li=Vi=null,pn=!1}function Z2(t){za===null?za=[t]:za.push(t)}var e7=xo.ReactCurrentBatchConfig;function dh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Te(309));var r=n.stateNode}if(!r)throw Error(Te(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(s){var o=i.refs;s===null?delete o[a]:o[a]=s},e._stringRef=a,e)}if(typeof t!="string")throw Error(Te(284));if(!n._owner)throw Error(Te(290,t))}return t}function zg(t,e){throw t=Object.prototype.toString.call(e),Error(Te(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function uP(t){var e=t._init;return e(t._payload)}function mR(t){function e(x,_){if(t){var E=x.deletions;E===null?(x.deletions=[_],x.flags|=16):E.push(_)}}function n(x,_){if(!t)return null;for(;_!==null;)e(x,_),_=_.sibling;return null}function r(x,_){for(x=new Map;_!==null;)_.key!==null?x.set(_.key,_):x.set(_.index,_),_=_.sibling;return x}function i(x,_){return x=ol(x,_),x.index=0,x.sibling=null,x}function a(x,_,E){return x.index=E,t?(E=x.alternate,E!==null?(E=E.index,E<_?(x.flags|=2,_):E):(x.flags|=2,_)):(x.flags|=1048576,_)}function s(x){return t&&x.alternate===null&&(x.flags|=2),x}function o(x,_,E,P){return _===null||_.tag!==6?(_=rw(E,x.mode,P),_.return=x,_):(_=i(_,E),_.return=x,_)}function l(x,_,E,P){var A=E.type;return A===Bu?f(x,_,E.props.children,P,E.key):_!==null&&(_.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Uo&&uP(A)===_.type)?(P=i(_,E.props),P.ref=dh(x,_,E),P.return=x,P):(P=jy(E.type,E.key,E.props,null,x.mode,P),P.ref=dh(x,_,E),P.return=x,P)}function u(x,_,E,P){return _===null||_.tag!==4||_.stateNode.containerInfo!==E.containerInfo||_.stateNode.implementation!==E.implementation?(_=iw(E,x.mode,P),_.return=x,_):(_=i(_,E.children||[]),_.return=x,_)}function f(x,_,E,P,A){return _===null||_.tag!==7?(_=Pc(E,x.mode,P,A),_.return=x,_):(_=i(_,E),_.return=x,_)}function d(x,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return _=rw(""+_,x.mode,E),_.return=x,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Pg:return E=jy(_.type,_.key,_.props,null,x.mode,E),E.ref=dh(x,null,_),E.return=x,E;case Fu:return _=iw(_,x.mode,E),_.return=x,_;case Uo:var P=_._init;return d(x,P(_._payload),E)}if(jh(_)||sh(_))return _=Pc(_,x.mode,E,null),_.return=x,_;zg(x,_)}return null}function h(x,_,E,P){var A=_!==null?_.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return A!==null?null:o(x,_,""+E,P);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Pg:return E.key===A?l(x,_,E,P):null;case Fu:return E.key===A?u(x,_,E,P):null;case Uo:return A=E._init,h(x,_,A(E._payload),P)}if(jh(E)||sh(E))return A!==null?null:f(x,_,E,P,null);zg(x,E)}return null}function p(x,_,E,P,A){if(typeof P=="string"&&P!==""||typeof P=="number")return x=x.get(E)||null,o(_,x,""+P,A);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Pg:return x=x.get(P.key===null?E:P.key)||null,l(_,x,P,A);case Fu:return x=x.get(P.key===null?E:P.key)||null,u(_,x,P,A);case Uo:var j=P._init;return p(x,_,E,j(P._payload),A)}if(jh(P)||sh(P))return x=x.get(E)||null,f(_,x,P,A,null);zg(_,P)}return null}function v(x,_,E,P){for(var A=null,j=null,S=_,T=_=0,N=null;S!==null&&T<E.length;T++){S.index>T?(N=S,S=null):N=S.sibling;var D=h(x,S,E[T],P);if(D===null){S===null&&(S=N);break}t&&S&&D.alternate===null&&e(x,S),_=a(D,_,T),j===null?A=D:j.sibling=D,j=D,S=N}if(T===E.length)return n(x,S),pn&&ac(x,T),A;if(S===null){for(;T<E.length;T++)S=d(x,E[T],P),S!==null&&(_=a(S,_,T),j===null?A=S:j.sibling=S,j=S);return pn&&ac(x,T),A}for(S=r(x,S);T<E.length;T++)N=p(S,x,T,E[T],P),N!==null&&(t&&N.alternate!==null&&S.delete(N.key===null?T:N.key),_=a(N,_,T),j===null?A=N:j.sibling=N,j=N);return t&&S.forEach(function(M){return e(x,M)}),pn&&ac(x,T),A}function y(x,_,E,P){var A=sh(E);if(typeof A!="function")throw Error(Te(150));if(E=A.call(E),E==null)throw Error(Te(151));for(var j=A=null,S=_,T=_=0,N=null,D=E.next();S!==null&&!D.done;T++,D=E.next()){S.index>T?(N=S,S=null):N=S.sibling;var M=h(x,S,D.value,P);if(M===null){S===null&&(S=N);break}t&&S&&M.alternate===null&&e(x,S),_=a(M,_,T),j===null?A=M:j.sibling=M,j=M,S=N}if(D.done)return n(x,S),pn&&ac(x,T),A;if(S===null){for(;!D.done;T++,D=E.next())D=d(x,D.value,P),D!==null&&(_=a(D,_,T),j===null?A=D:j.sibling=D,j=D);return pn&&ac(x,T),A}for(S=r(x,S);!D.done;T++,D=E.next())D=p(S,x,T,D.value,P),D!==null&&(t&&D.alternate!==null&&S.delete(D.key===null?T:D.key),_=a(D,_,T),j===null?A=D:j.sibling=D,j=D);return t&&S.forEach(function($){return e(x,$)}),pn&&ac(x,T),A}function b(x,_,E,P){if(typeof E=="object"&&E!==null&&E.type===Bu&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Pg:e:{for(var A=E.key,j=_;j!==null;){if(j.key===A){if(A=E.type,A===Bu){if(j.tag===7){n(x,j.sibling),_=i(j,E.props.children),_.return=x,x=_;break e}}else if(j.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Uo&&uP(A)===j.type){n(x,j.sibling),_=i(j,E.props),_.ref=dh(x,j,E),_.return=x,x=_;break e}n(x,j);break}else e(x,j);j=j.sibling}E.type===Bu?(_=Pc(E.props.children,x.mode,P,E.key),_.return=x,x=_):(P=jy(E.type,E.key,E.props,null,x.mode,P),P.ref=dh(x,_,E),P.return=x,x=P)}return s(x);case Fu:e:{for(j=E.key;_!==null;){if(_.key===j)if(_.tag===4&&_.stateNode.containerInfo===E.containerInfo&&_.stateNode.implementation===E.implementation){n(x,_.sibling),_=i(_,E.children||[]),_.return=x,x=_;break e}else{n(x,_);break}else e(x,_);_=_.sibling}_=iw(E,x.mode,P),_.return=x,x=_}return s(x);case Uo:return j=E._init,b(x,_,j(E._payload),P)}if(jh(E))return v(x,_,E,P);if(sh(E))return y(x,_,E,P);zg(x,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,_!==null&&_.tag===6?(n(x,_.sibling),_=i(_,E),_.return=x,x=_):(n(x,_),_=rw(E,x.mode,P),_.return=x,x=_),s(x)):n(x,_)}return b}var jd=mR(!0),gR=mR(!1),Zy=El(null),Jy=null,Xu=null,J2=null;function eE(){J2=Xu=Jy=null}function tE(t){var e=Zy.current;dn(Zy),t._currentValue=e}function U1(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function hd(t,e){Jy=t,J2=Xu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(yi=!0),t.firstContext=null)}function fa(t){var e=t._currentValue;if(J2!==t)if(t={context:t,memoizedValue:e,next:null},Xu===null){if(Jy===null)throw Error(Te(308));Xu=t,Jy.dependencies={lanes:0,firstContext:t}}else Xu=Xu.next=t;return e}var gc=null;function nE(t){gc===null?gc=[t]:gc.push(t)}function yR(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,nE(e)):(n.next=i.next,i.next=n),e.interleaved=n,so(t,r)}function so(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Wo=!1;function rE(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vR(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function il(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ct&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,so(t,n)}return i=r.interleaved,i===null?(e.next=e,nE(r)):(e.next=i.next,i.next=e),r.interleaved=e,so(t,n)}function by(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,B2(t,n)}}function dP(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=s:a=a.next=s,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ev(t,e,n,r){var i=t.updateQueue;Wo=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,s===null?a=u:s.next=u,s=l;var f=t.alternate;f!==null&&(f=f.updateQueue,o=f.lastBaseUpdate,o!==s&&(o===null?f.firstBaseUpdate=u:o.next=u,f.lastBaseUpdate=l))}if(a!==null){var d=i.baseState;s=0,f=u=l=null,o=a;do{var h=o.lane,p=o.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=t,y=o;switch(h=e,p=n,y.tag){case 1:if(v=y.payload,typeof v=="function"){d=v.call(p,d,h);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,h=typeof v=="function"?v.call(p,d,h):v,h==null)break e;d=En({},d,h);break e;case 2:Wo=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},f===null?(u=f=p,l=d):f=f.next=p,s|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;h=o,o=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(f===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);zc|=s,t.lanes=s,t.memoizedState=d}}function fP(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Te(191,i));i.call(r)}}}var Om={},ys=El(Om),Ep=El(Om),Ap=El(Om);function yc(t){if(t===Om)throw Error(Te(174));return t}function iE(t,e){switch(rn(Ap,e),rn(Ep,t),rn(ys,Om),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:S1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=S1(e,t)}dn(ys),rn(ys,e)}function Td(){dn(ys),dn(Ep),dn(Ap)}function xR(t){yc(Ap.current);var e=yc(ys.current),n=S1(e,t.type);e!==n&&(rn(Ep,t),rn(ys,n))}function aE(t){Ep.current===t&&(dn(ys),dn(Ep))}var _n=El(0);function tv(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qb=[];function sE(){for(var t=0;t<Qb.length;t++)Qb[t]._workInProgressVersionPrimary=null;Qb.length=0}var wy=xo.ReactCurrentDispatcher,Zb=xo.ReactCurrentBatchConfig,Lc=0,Sn=null,tr=null,hr=null,nv=!1,Kh=!1,jp=0,t7=0;function Dr(){throw Error(Te(321))}function oE(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!qa(t[n],e[n]))return!1;return!0}function lE(t,e,n,r,i,a){if(Lc=a,Sn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wy.current=t===null||t.memoizedState===null?a7:s7,t=n(r,i),Kh){a=0;do{if(Kh=!1,jp=0,25<=a)throw Error(Te(301));a+=1,hr=tr=null,e.updateQueue=null,wy.current=o7,t=n(r,i)}while(Kh)}if(wy.current=rv,e=tr!==null&&tr.next!==null,Lc=0,hr=tr=Sn=null,nv=!1,e)throw Error(Te(300));return t}function cE(){var t=jp!==0;return jp=0,t}function ss(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hr===null?Sn.memoizedState=hr=t:hr=hr.next=t,hr}function ha(){if(tr===null){var t=Sn.alternate;t=t!==null?t.memoizedState:null}else t=tr.next;var e=hr===null?Sn.memoizedState:hr.next;if(e!==null)hr=e,tr=t;else{if(t===null)throw Error(Te(310));tr=t,t={memoizedState:tr.memoizedState,baseState:tr.baseState,baseQueue:tr.baseQueue,queue:tr.queue,next:null},hr===null?Sn.memoizedState=hr=t:hr=hr.next=t}return hr}function Tp(t,e){return typeof e=="function"?e(t):e}function Jb(t){var e=ha(),n=e.queue;if(n===null)throw Error(Te(311));n.lastRenderedReducer=t;var r=tr,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var o=s=null,l=null,u=a;do{var f=u.lane;if((Lc&f)===f)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=d,s=r):l=l.next=d,Sn.lanes|=f,zc|=f}u=u.next}while(u!==null&&u!==a);l===null?s=r:l.next=o,qa(r,e.memoizedState)||(yi=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do a=i.lane,Sn.lanes|=a,zc|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ew(t){var e=ha(),n=e.queue;if(n===null)throw Error(Te(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do a=t(a,s.action),s=s.next;while(s!==i);qa(a,e.memoizedState)||(yi=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function bR(){}function wR(t,e){var n=Sn,r=ha(),i=e(),a=!qa(r.memoizedState,i);if(a&&(r.memoizedState=i,yi=!0),r=r.queue,uE(ER.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||hr!==null&&hr.memoizedState.tag&1){if(n.flags|=2048,Pp(9,SR.bind(null,n,r,i,e),void 0,null),gr===null)throw Error(Te(349));Lc&30||_R(n,e,i)}return i}function _R(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Sn.updateQueue,e===null?(e={lastEffect:null,stores:null},Sn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function SR(t,e,n,r){e.value=n,e.getSnapshot=r,AR(e)&&jR(t)}function ER(t,e,n){return n(function(){AR(e)&&jR(t)})}function AR(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!qa(t,n)}catch{return!0}}function jR(t){var e=so(t,1);e!==null&&Wa(e,t,1,-1)}function hP(t){var e=ss();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tp,lastRenderedState:t},e.queue=t,t=t.dispatch=i7.bind(null,Sn,t),[e.memoizedState,t]}function Pp(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Sn.updateQueue,e===null?(e={lastEffect:null,stores:null},Sn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function TR(){return ha().memoizedState}function _y(t,e,n,r){var i=ss();Sn.flags|=t,i.memoizedState=Pp(1|e,n,void 0,r===void 0?null:r)}function G0(t,e,n,r){var i=ha();r=r===void 0?null:r;var a=void 0;if(tr!==null){var s=tr.memoizedState;if(a=s.destroy,r!==null&&oE(r,s.deps)){i.memoizedState=Pp(e,n,a,r);return}}Sn.flags|=t,i.memoizedState=Pp(1|e,n,a,r)}function pP(t,e){return _y(8390656,8,t,e)}function uE(t,e){return G0(2048,8,t,e)}function PR(t,e){return G0(4,2,t,e)}function CR(t,e){return G0(4,4,t,e)}function kR(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function NR(t,e,n){return n=n!=null?n.concat([t]):null,G0(4,4,kR.bind(null,e,t),n)}function dE(){}function OR(t,e){var n=ha();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&oE(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function IR(t,e){var n=ha();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&oE(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function DR(t,e,n){return Lc&21?(qa(n,e)||(n=z4(),Sn.lanes|=n,zc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,yi=!0),t.memoizedState=n)}function n7(t,e){var n=Wt;Wt=n!==0&&4>n?n:4,t(!0);var r=Zb.transition;Zb.transition={};try{t(!1),e()}finally{Wt=n,Zb.transition=r}}function MR(){return ha().memoizedState}function r7(t,e,n){var r=sl(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},RR(t))$R(e,n);else if(n=yR(t,e,n,r),n!==null){var i=Zr();Wa(n,t,r,i),LR(n,e,r)}}function i7(t,e,n){var r=sl(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(RR(t))$R(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var s=e.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,qa(o,s)){var l=e.interleaved;l===null?(i.next=i,nE(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=yR(t,e,i,r),n!==null&&(i=Zr(),Wa(n,t,r,i),LR(n,e,r))}}function RR(t){var e=t.alternate;return t===Sn||e!==null&&e===Sn}function $R(t,e){Kh=nv=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function LR(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,B2(t,n)}}var rv={readContext:fa,useCallback:Dr,useContext:Dr,useEffect:Dr,useImperativeHandle:Dr,useInsertionEffect:Dr,useLayoutEffect:Dr,useMemo:Dr,useReducer:Dr,useRef:Dr,useState:Dr,useDebugValue:Dr,useDeferredValue:Dr,useTransition:Dr,useMutableSource:Dr,useSyncExternalStore:Dr,useId:Dr,unstable_isNewReconciler:!1},a7={readContext:fa,useCallback:function(t,e){return ss().memoizedState=[t,e===void 0?null:e],t},useContext:fa,useEffect:pP,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,_y(4194308,4,kR.bind(null,e,t),n)},useLayoutEffect:function(t,e){return _y(4194308,4,t,e)},useInsertionEffect:function(t,e){return _y(4,2,t,e)},useMemo:function(t,e){var n=ss();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ss();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=r7.bind(null,Sn,t),[r.memoizedState,t]},useRef:function(t){var e=ss();return t={current:t},e.memoizedState=t},useState:hP,useDebugValue:dE,useDeferredValue:function(t){return ss().memoizedState=t},useTransition:function(){var t=hP(!1),e=t[0];return t=n7.bind(null,t[1]),ss().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Sn,i=ss();if(pn){if(n===void 0)throw Error(Te(407));n=n()}else{if(n=e(),gr===null)throw Error(Te(349));Lc&30||_R(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,pP(ER.bind(null,r,a,t),[t]),r.flags|=2048,Pp(9,SR.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=ss(),e=gr.identifierPrefix;if(pn){var n=Ws,r=Us;n=(r&~(1<<32-Ua(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=jp++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=t7++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},s7={readContext:fa,useCallback:OR,useContext:fa,useEffect:uE,useImperativeHandle:NR,useInsertionEffect:PR,useLayoutEffect:CR,useMemo:IR,useReducer:Jb,useRef:TR,useState:function(){return Jb(Tp)},useDebugValue:dE,useDeferredValue:function(t){var e=ha();return DR(e,tr.memoizedState,t)},useTransition:function(){var t=Jb(Tp)[0],e=ha().memoizedState;return[t,e]},useMutableSource:bR,useSyncExternalStore:wR,useId:MR,unstable_isNewReconciler:!1},o7={readContext:fa,useCallback:OR,useContext:fa,useEffect:uE,useImperativeHandle:NR,useInsertionEffect:PR,useLayoutEffect:CR,useMemo:IR,useReducer:ew,useRef:TR,useState:function(){return ew(Tp)},useDebugValue:dE,useDeferredValue:function(t){var e=ha();return tr===null?e.memoizedState=t:DR(e,tr.memoizedState,t)},useTransition:function(){var t=ew(Tp)[0],e=ha().memoizedState;return[t,e]},useMutableSource:bR,useSyncExternalStore:wR,useId:MR,unstable_isNewReconciler:!1};function Da(t,e){if(t&&t.defaultProps){e=En({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function W1(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:En({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Y0={isMounted:function(t){return(t=t._reactInternals)?Jc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Zr(),i=sl(t),a=Qs(r,i);a.payload=e,n!=null&&(a.callback=n),e=il(t,a,i),e!==null&&(Wa(e,t,i,r),by(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Zr(),i=sl(t),a=Qs(r,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=il(t,a,i),e!==null&&(Wa(e,t,i,r),by(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Zr(),r=sl(t),i=Qs(n,r);i.tag=2,e!=null&&(i.callback=e),e=il(t,i,r),e!==null&&(Wa(e,t,r,n),by(e,t,r))}};function mP(t,e,n,r,i,a,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,s):e.prototype&&e.prototype.isPureReactComponent?!bp(n,r)||!bp(i,a):!0}function zR(t,e,n){var r=!1,i=ml,a=e.contextType;return typeof a=="object"&&a!==null?a=fa(a):(i=wi(e)?Rc:Ur.current,r=e.contextTypes,a=(r=r!=null)?Ed(t,i):ml),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Y0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function gP(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Y0.enqueueReplaceState(e,e.state,null)}function K1(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},rE(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=fa(a):(a=wi(e)?Rc:Ur.current,i.context=Ed(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(W1(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Y0.enqueueReplaceState(i,i.state,null),ev(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Pd(t,e){try{var n="",r=e;do n+=M9(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function tw(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function q1(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var l7=typeof WeakMap=="function"?WeakMap:Map;function VR(t,e,n){n=Qs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){av||(av=!0,n_=r),q1(t,e)},n}function FR(t,e,n){n=Qs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){q1(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){q1(t,e),typeof r!="function"&&(al===null?al=new Set([this]):al.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function yP(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new l7;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=_7.bind(null,t,e,n),e.then(t,t))}function vP(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function xP(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qs(-1,1),e.tag=2,il(n,e,1))),n.lanes|=1),t)}var c7=xo.ReactCurrentOwner,yi=!1;function Gr(t,e,n,r){e.child=t===null?gR(e,null,n,r):jd(e,t.child,n,r)}function bP(t,e,n,r,i){n=n.render;var a=e.ref;return hd(e,i),r=lE(t,e,n,r,a,i),n=cE(),t!==null&&!yi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,oo(t,e,i)):(pn&&n&&X2(e),e.flags|=1,Gr(t,e,r,i),e.child)}function wP(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!xE(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,BR(t,e,a,r,i)):(t=jy(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var s=a.memoizedProps;if(n=n.compare,n=n!==null?n:bp,n(s,r)&&t.ref===e.ref)return oo(t,e,i)}return e.flags|=1,t=ol(a,r),t.ref=e.ref,t.return=e,e.child=t}function BR(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(bp(a,r)&&t.ref===e.ref)if(yi=!1,e.pendingProps=r=a,(t.lanes&i)!==0)t.flags&131072&&(yi=!0);else return e.lanes=t.lanes,oo(t,e,i)}return H1(t,e,n,r,i)}function UR(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rn(Zu,Di),Di|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,rn(Zu,Di),Di|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,rn(Zu,Di),Di|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,rn(Zu,Di),Di|=r;return Gr(t,e,i,n),e.child}function WR(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function H1(t,e,n,r,i){var a=wi(n)?Rc:Ur.current;return a=Ed(e,a),hd(e,i),n=lE(t,e,n,r,a,i),r=cE(),t!==null&&!yi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,oo(t,e,i)):(pn&&r&&X2(e),e.flags|=1,Gr(t,e,n,i),e.child)}function _P(t,e,n,r,i){if(wi(n)){var a=!0;Yy(e)}else a=!1;if(hd(e,i),e.stateNode===null)Sy(t,e),zR(e,n,r),K1(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,o=e.memoizedProps;s.props=o;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=fa(u):(u=wi(n)?Rc:Ur.current,u=Ed(e,u));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==r||l!==u)&&gP(e,s,r,u),Wo=!1;var h=e.memoizedState;s.state=h,ev(e,r,s,i),l=e.memoizedState,o!==r||h!==l||bi.current||Wo?(typeof f=="function"&&(W1(e,n,f,r),l=e.memoizedState),(o=Wo||mP(e,n,o,r,h,l,u))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=u,r=o):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,vR(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:Da(e.type,o),s.props=u,d=e.pendingProps,h=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=fa(l):(l=wi(n)?Rc:Ur.current,l=Ed(e,l));var p=n.getDerivedStateFromProps;(f=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==d||h!==l)&&gP(e,s,r,l),Wo=!1,h=e.memoizedState,s.state=h,ev(e,r,s,i);var v=e.memoizedState;o!==d||h!==v||bi.current||Wo?(typeof p=="function"&&(W1(e,n,p,r),v=e.memoizedState),(u=Wo||mP(e,n,u,r,h,v,l)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,v,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,v,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),s.props=r,s.state=v,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return G1(t,e,n,r,a,i)}function G1(t,e,n,r,i,a){WR(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&oP(e,n,!1),oo(t,e,a);r=e.stateNode,c7.current=e;var o=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=jd(e,t.child,null,a),e.child=jd(e,null,o,a)):Gr(t,e,o,a),e.memoizedState=r.state,i&&oP(e,n,!0),e.child}function KR(t){var e=t.stateNode;e.pendingContext?sP(t,e.pendingContext,e.pendingContext!==e.context):e.context&&sP(t,e.context,!1),iE(t,e.containerInfo)}function SP(t,e,n,r,i){return Ad(),Z2(i),e.flags|=256,Gr(t,e,n,r),e.child}var Y1={dehydrated:null,treeContext:null,retryLane:0};function X1(t){return{baseLanes:t,cachePool:null,transitions:null}}function qR(t,e,n){var r=e.pendingProps,i=_n.current,a=!1,s=(e.flags&128)!==0,o;if((o=s)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),rn(_n,i&1),t===null)return B1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,a?(r=e.mode,a=e.child,s={mode:"hidden",children:s},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=Z0(s,r,0,null),t=Pc(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=X1(n),e.memoizedState=Y1,t):fE(e,s));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return u7(t,e,s,r,o,i,n);if(a){a=r.fallback,s=e.mode,i=t.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ol(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=ol(o,a):(a=Pc(a,s,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,s=t.child.memoizedState,s=s===null?X1(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=t.childLanes&~n,e.memoizedState=Y1,r}return a=t.child,t=a.sibling,r=ol(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function fE(t,e){return e=Z0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vg(t,e,n,r){return r!==null&&Z2(r),jd(e,t.child,null,n),t=fE(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function u7(t,e,n,r,i,a,s){if(n)return e.flags&256?(e.flags&=-257,r=tw(Error(Te(422))),Vg(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=Z0({mode:"visible",children:r.children},i,0,null),a=Pc(a,i,s,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&jd(e,t.child,null,s),e.child.memoizedState=X1(s),e.memoizedState=Y1,a);if(!(e.mode&1))return Vg(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,a=Error(Te(419)),r=tw(a,r,void 0),Vg(t,e,s,r)}if(o=(s&t.childLanes)!==0,yi||o){if(r=gr,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,so(t,i),Wa(r,t,i,-1))}return vE(),r=tw(Error(Te(421))),Vg(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=S7.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Li=rl(i.nextSibling),Vi=e,pn=!0,za=null,t!==null&&(ia[aa++]=Us,ia[aa++]=Ws,ia[aa++]=$c,Us=t.id,Ws=t.overflow,$c=e),e=fE(e,r.children),e.flags|=4096,e)}function EP(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),U1(t.return,e,n)}function nw(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function HR(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(Gr(t,e,r.children,n),r=_n.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&EP(t,n,e);else if(t.tag===19)EP(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(rn(_n,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&tv(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),nw(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&tv(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}nw(e,!0,n,null,a);break;case"together":nw(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Sy(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function oo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),zc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Te(153));if(e.child!==null){for(t=e.child,n=ol(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ol(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function d7(t,e,n){switch(e.tag){case 3:KR(e),Ad();break;case 5:xR(e);break;case 1:wi(e.type)&&Yy(e);break;case 4:iE(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;rn(Zy,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(rn(_n,_n.current&1),e.flags|=128,null):n&e.child.childLanes?qR(t,e,n):(rn(_n,_n.current&1),t=oo(t,e,n),t!==null?t.sibling:null);rn(_n,_n.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return HR(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),rn(_n,_n.current),r)break;return null;case 22:case 23:return e.lanes=0,UR(t,e,n)}return oo(t,e,n)}var GR,Q1,YR,XR;GR=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Q1=function(){};YR=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,yc(ys.current);var a=null;switch(n){case"input":i=x1(t,i),r=x1(t,r),a=[];break;case"select":i=En({},i,{value:void 0}),r=En({},r,{value:void 0}),a=[];break;case"textarea":i=_1(t,i),r=_1(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Hy)}E1(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(s in o)o.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(hp.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var l=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(a||(a=[]),a.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(hp.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&on("scroll",t),a||o===l||(a=[])):(a=a||[]).push(u,l))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};XR=function(t,e,n,r){n!==r&&(e.flags|=4)};function fh(t,e){if(!pn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Mr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function f7(t,e,n){var r=e.pendingProps;switch(Q2(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mr(e),null;case 1:return wi(e.type)&&Gy(),Mr(e),null;case 3:return r=e.stateNode,Td(),dn(bi),dn(Ur),sE(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Lg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,za!==null&&(a_(za),za=null))),Q1(t,e),Mr(e),null;case 5:aE(e);var i=yc(Ap.current);if(n=e.type,t!==null&&e.stateNode!=null)YR(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Te(166));return Mr(e),null}if(t=yc(ys.current),Lg(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[cs]=e,r[Sp]=a,t=(e.mode&1)!==0,n){case"dialog":on("cancel",r),on("close",r);break;case"iframe":case"object":case"embed":on("load",r);break;case"video":case"audio":for(i=0;i<Ph.length;i++)on(Ph[i],r);break;case"source":on("error",r);break;case"img":case"image":case"link":on("error",r),on("load",r);break;case"details":on("toggle",r);break;case"input":IT(r,a),on("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},on("invalid",r);break;case"textarea":MT(r,a),on("invalid",r)}E1(n,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?r.textContent!==o&&(a.suppressHydrationWarning!==!0&&$g(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&$g(r.textContent,o,t),i=["children",""+o]):hp.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&on("scroll",r)}switch(n){case"input":Cg(r),DT(r,a,!0);break;case"textarea":Cg(r),RT(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Hy)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=E4(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[cs]=e,t[Sp]=r,GR(t,e,!1,!1),e.stateNode=t;e:{switch(s=A1(n,r),n){case"dialog":on("cancel",t),on("close",t),i=r;break;case"iframe":case"object":case"embed":on("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ph.length;i++)on(Ph[i],t);i=r;break;case"source":on("error",t),i=r;break;case"img":case"image":case"link":on("error",t),on("load",t),i=r;break;case"details":on("toggle",t),i=r;break;case"input":IT(t,r),i=x1(t,r),on("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=En({},r,{value:void 0}),on("invalid",t);break;case"textarea":MT(t,r),i=_1(t,r),on("invalid",t);break;default:i=r}E1(n,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="style"?T4(t,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&A4(t,l)):a==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&pp(t,l):typeof l=="number"&&pp(t,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(hp.hasOwnProperty(a)?l!=null&&a==="onScroll"&&on("scroll",t):l!=null&&R2(t,a,l,s))}switch(n){case"input":Cg(t),DT(t,r,!1);break;case"textarea":Cg(t),RT(t);break;case"option":r.value!=null&&t.setAttribute("value",""+pl(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?cd(t,!!r.multiple,a,!1):r.defaultValue!=null&&cd(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Hy)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mr(e),null;case 6:if(t&&e.stateNode!=null)XR(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Te(166));if(n=yc(Ap.current),yc(ys.current),Lg(e)){if(r=e.stateNode,n=e.memoizedProps,r[cs]=e,(a=r.nodeValue!==n)&&(t=Vi,t!==null))switch(t.tag){case 3:$g(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$g(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[cs]=e,e.stateNode=r}return Mr(e),null;case 13:if(dn(_n),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pn&&Li!==null&&e.mode&1&&!(e.flags&128))pR(),Ad(),e.flags|=98560,a=!1;else if(a=Lg(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(Te(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Te(317));a[cs]=e}else Ad(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mr(e),a=!1}else za!==null&&(a_(za),za=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||_n.current&1?rr===0&&(rr=3):vE())),e.updateQueue!==null&&(e.flags|=4),Mr(e),null);case 4:return Td(),Q1(t,e),t===null&&wp(e.stateNode.containerInfo),Mr(e),null;case 10:return tE(e.type._context),Mr(e),null;case 17:return wi(e.type)&&Gy(),Mr(e),null;case 19:if(dn(_n),a=e.memoizedState,a===null)return Mr(e),null;if(r=(e.flags&128)!==0,s=a.rendering,s===null)if(r)fh(a,!1);else{if(rr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=tv(t),s!==null){for(e.flags|=128,fh(a,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,t=s.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return rn(_n,_n.current&1|2),e.child}t=t.sibling}a.tail!==null&&Ln()>Cd&&(e.flags|=128,r=!0,fh(a,!1),e.lanes=4194304)}else{if(!r)if(t=tv(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),fh(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!pn)return Mr(e),null}else 2*Ln()-a.renderingStartTime>Cd&&n!==1073741824&&(e.flags|=128,r=!0,fh(a,!1),e.lanes=4194304);a.isBackwards?(s.sibling=e.child,e.child=s):(n=a.last,n!==null?n.sibling=s:e.child=s,a.last=s)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Ln(),e.sibling=null,n=_n.current,rn(_n,r?n&1|2:n&1),e):(Mr(e),null);case 22:case 23:return yE(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Di&1073741824&&(Mr(e),e.subtreeFlags&6&&(e.flags|=8192)):Mr(e),null;case 24:return null;case 25:return null}throw Error(Te(156,e.tag))}function h7(t,e){switch(Q2(e),e.tag){case 1:return wi(e.type)&&Gy(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Td(),dn(bi),dn(Ur),sE(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return aE(e),null;case 13:if(dn(_n),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Te(340));Ad()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return dn(_n),null;case 4:return Td(),null;case 10:return tE(e.type._context),null;case 22:case 23:return yE(),null;case 24:return null;default:return null}}var Fg=!1,Vr=!1,p7=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function Qu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Pn(t,e,r)}else n.current=null}function Z1(t,e,n){try{n()}catch(r){Pn(t,e,r)}}var AP=!1;function m7(t,e){if(M1=Wy,t=tR(),Y2(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var s=0,o=-1,l=-1,u=0,f=0,d=t,h=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(o=s+i),d!==a||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===t)break t;if(h===n&&++u===i&&(o=s),h===a&&++f===r&&(l=s),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(R1={focusedElem:t,selectionRange:n},Wy=!1,Fe=e;Fe!==null;)if(e=Fe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Fe=t;else for(;Fe!==null;){e=Fe;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,b=v.memoizedState,x=e.stateNode,_=x.getSnapshotBeforeUpdate(e.elementType===e.type?y:Da(e.type,y),b);x.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Te(163))}}catch(P){Pn(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,Fe=t;break}Fe=e.return}return v=AP,AP=!1,v}function qh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&Z1(e,n,a)}i=i.next}while(i!==r)}}function X0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function J1(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function QR(t){var e=t.alternate;e!==null&&(t.alternate=null,QR(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[cs],delete e[Sp],delete e[z1],delete e[QB],delete e[ZB])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ZR(t){return t.tag===5||t.tag===3||t.tag===4}function jP(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ZR(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function e_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Hy));else if(r!==4&&(t=t.child,t!==null))for(e_(t,e,n),t=t.sibling;t!==null;)e_(t,e,n),t=t.sibling}function t_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(t_(t,e,n),t=t.sibling;t!==null;)t_(t,e,n),t=t.sibling}var wr=null,Ra=!1;function Ro(t,e,n){for(n=n.child;n!==null;)JR(t,e,n),n=n.sibling}function JR(t,e,n){if(gs&&typeof gs.onCommitFiberUnmount=="function")try{gs.onCommitFiberUnmount(B0,n)}catch{}switch(n.tag){case 5:Vr||Qu(n,e);case 6:var r=wr,i=Ra;wr=null,Ro(t,e,n),wr=r,Ra=i,wr!==null&&(Ra?(t=wr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):wr.removeChild(n.stateNode));break;case 18:wr!==null&&(Ra?(t=wr,n=n.stateNode,t.nodeType===8?Yb(t.parentNode,n):t.nodeType===1&&Yb(t,n),vp(t)):Yb(wr,n.stateNode));break;case 4:r=wr,i=Ra,wr=n.stateNode.containerInfo,Ra=!0,Ro(t,e,n),wr=r,Ra=i;break;case 0:case 11:case 14:case 15:if(!Vr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&Z1(n,e,s),i=i.next}while(i!==r)}Ro(t,e,n);break;case 1:if(!Vr&&(Qu(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Pn(n,e,o)}Ro(t,e,n);break;case 21:Ro(t,e,n);break;case 22:n.mode&1?(Vr=(r=Vr)||n.memoizedState!==null,Ro(t,e,n),Vr=r):Ro(t,e,n);break;default:Ro(t,e,n)}}function TP(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new p7),e.forEach(function(r){var i=E7.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Na(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,s=e,o=s;e:for(;o!==null;){switch(o.tag){case 5:wr=o.stateNode,Ra=!1;break e;case 3:wr=o.stateNode.containerInfo,Ra=!0;break e;case 4:wr=o.stateNode.containerInfo,Ra=!0;break e}o=o.return}if(wr===null)throw Error(Te(160));JR(a,s,i),wr=null,Ra=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Pn(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)e5(e,t),e=e.sibling}function e5(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Na(e,t),as(t),r&4){try{qh(3,t,t.return),X0(3,t)}catch(y){Pn(t,t.return,y)}try{qh(5,t,t.return)}catch(y){Pn(t,t.return,y)}}break;case 1:Na(e,t),as(t),r&512&&n!==null&&Qu(n,n.return);break;case 5:if(Na(e,t),as(t),r&512&&n!==null&&Qu(n,n.return),t.flags&32){var i=t.stateNode;try{pp(i,"")}catch(y){Pn(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,s=n!==null?n.memoizedProps:a,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&_4(i,a),A1(o,s);var u=A1(o,a);for(s=0;s<l.length;s+=2){var f=l[s],d=l[s+1];f==="style"?T4(i,d):f==="dangerouslySetInnerHTML"?A4(i,d):f==="children"?pp(i,d):R2(i,f,d,u)}switch(o){case"input":b1(i,a);break;case"textarea":S4(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?cd(i,!!a.multiple,p,!1):h!==!!a.multiple&&(a.defaultValue!=null?cd(i,!!a.multiple,a.defaultValue,!0):cd(i,!!a.multiple,a.multiple?[]:"",!1))}i[Sp]=a}catch(y){Pn(t,t.return,y)}}break;case 6:if(Na(e,t),as(t),r&4){if(t.stateNode===null)throw Error(Te(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(y){Pn(t,t.return,y)}}break;case 3:if(Na(e,t),as(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{vp(e.containerInfo)}catch(y){Pn(t,t.return,y)}break;case 4:Na(e,t),as(t);break;case 13:Na(e,t),as(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(mE=Ln())),r&4&&TP(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Vr=(u=Vr)||f,Na(e,t),Vr=u):Na(e,t),as(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!f&&t.mode&1)for(Fe=t,f=t.child;f!==null;){for(d=Fe=f;Fe!==null;){switch(h=Fe,p=h.child,h.tag){case 0:case 11:case 14:case 15:qh(4,h,h.return);break;case 1:Qu(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){Pn(r,n,y)}}break;case 5:Qu(h,h.return);break;case 22:if(h.memoizedState!==null){CP(d);continue}}p!==null?(p.return=h,Fe=p):CP(d)}f=f.sibling}e:for(f=null,d=t;;){if(d.tag===5){if(f===null){f=d;try{i=d.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=j4("display",s))}catch(y){Pn(t,t.return,y)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){Pn(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Na(e,t),as(t),r&4&&TP(t);break;case 21:break;default:Na(e,t),as(t)}}function as(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ZR(n)){var r=n;break e}n=n.return}throw Error(Te(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(pp(i,""),r.flags&=-33);var a=jP(t);t_(t,a,i);break;case 3:case 4:var s=r.stateNode.containerInfo,o=jP(t);e_(t,o,s);break;default:throw Error(Te(161))}}catch(l){Pn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function g7(t,e,n){Fe=t,t5(t)}function t5(t,e,n){for(var r=(t.mode&1)!==0;Fe!==null;){var i=Fe,a=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Fg;if(!s){var o=i.alternate,l=o!==null&&o.memoizedState!==null||Vr;o=Fg;var u=Vr;if(Fg=s,(Vr=l)&&!u)for(Fe=i;Fe!==null;)s=Fe,l=s.child,s.tag===22&&s.memoizedState!==null?kP(i):l!==null?(l.return=s,Fe=l):kP(i);for(;a!==null;)Fe=a,t5(a),a=a.sibling;Fe=i,Fg=o,Vr=u}PP(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Fe=a):PP(t)}}function PP(t){for(;Fe!==null;){var e=Fe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Vr||X0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Vr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Da(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&fP(e,a,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}fP(e,s,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&vp(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Te(163))}Vr||e.flags&512&&J1(e)}catch(h){Pn(e,e.return,h)}}if(e===t){Fe=null;break}if(n=e.sibling,n!==null){n.return=e.return,Fe=n;break}Fe=e.return}}function CP(t){for(;Fe!==null;){var e=Fe;if(e===t){Fe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Fe=n;break}Fe=e.return}}function kP(t){for(;Fe!==null;){var e=Fe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{X0(4,e)}catch(l){Pn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Pn(e,i,l)}}var a=e.return;try{J1(e)}catch(l){Pn(e,a,l)}break;case 5:var s=e.return;try{J1(e)}catch(l){Pn(e,s,l)}}}catch(l){Pn(e,e.return,l)}if(e===t){Fe=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Fe=o;break}Fe=e.return}}var y7=Math.ceil,iv=xo.ReactCurrentDispatcher,hE=xo.ReactCurrentOwner,ua=xo.ReactCurrentBatchConfig,Ct=0,gr=null,qn=null,jr=0,Di=0,Zu=El(0),rr=0,Cp=null,zc=0,Q0=0,pE=0,Hh=null,mi=null,mE=0,Cd=1/0,Vs=null,av=!1,n_=null,al=null,Bg=!1,Xo=null,sv=0,Gh=0,r_=null,Ey=-1,Ay=0;function Zr(){return Ct&6?Ln():Ey!==-1?Ey:Ey=Ln()}function sl(t){return t.mode&1?Ct&2&&jr!==0?jr&-jr:e7.transition!==null?(Ay===0&&(Ay=z4()),Ay):(t=Wt,t!==0||(t=window.event,t=t===void 0?16:q4(t.type)),t):1}function Wa(t,e,n,r){if(50<Gh)throw Gh=0,r_=null,Error(Te(185));Cm(t,n,r),(!(Ct&2)||t!==gr)&&(t===gr&&(!(Ct&2)&&(Q0|=n),rr===4&&Ho(t,jr)),_i(t,r),n===1&&Ct===0&&!(e.mode&1)&&(Cd=Ln()+500,H0&&Al()))}function _i(t,e){var n=t.callbackNode;eB(t,e);var r=Uy(t,t===gr?jr:0);if(r===0)n!==null&&zT(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&zT(n),e===1)t.tag===0?JB(NP.bind(null,t)):dR(NP.bind(null,t)),YB(function(){!(Ct&6)&&Al()}),n=null;else{switch(V4(r)){case 1:n=F2;break;case 4:n=$4;break;case 16:n=By;break;case 536870912:n=L4;break;default:n=By}n=c5(n,n5.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function n5(t,e){if(Ey=-1,Ay=0,Ct&6)throw Error(Te(327));var n=t.callbackNode;if(pd()&&t.callbackNode!==n)return null;var r=Uy(t,t===gr?jr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ov(t,r);else{e=r;var i=Ct;Ct|=2;var a=i5();(gr!==t||jr!==e)&&(Vs=null,Cd=Ln()+500,Tc(t,e));do try{b7();break}catch(o){r5(t,o)}while(!0);eE(),iv.current=a,Ct=i,qn!==null?e=0:(gr=null,jr=0,e=rr)}if(e!==0){if(e===2&&(i=k1(t),i!==0&&(r=i,e=i_(t,i))),e===1)throw n=Cp,Tc(t,0),Ho(t,r),_i(t,Ln()),n;if(e===6)Ho(t,r);else{if(i=t.current.alternate,!(r&30)&&!v7(i)&&(e=ov(t,r),e===2&&(a=k1(t),a!==0&&(r=a,e=i_(t,a))),e===1))throw n=Cp,Tc(t,0),Ho(t,r),_i(t,Ln()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Te(345));case 2:sc(t,mi,Vs);break;case 3:if(Ho(t,r),(r&130023424)===r&&(e=mE+500-Ln(),10<e)){if(Uy(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Zr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=L1(sc.bind(null,t,mi,Vs),e);break}sc(t,mi,Vs);break;case 4:if(Ho(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-Ua(r);a=1<<s,s=e[s],s>i&&(i=s),r&=~a}if(r=i,r=Ln()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*y7(r/1960))-r,10<r){t.timeoutHandle=L1(sc.bind(null,t,mi,Vs),r);break}sc(t,mi,Vs);break;case 5:sc(t,mi,Vs);break;default:throw Error(Te(329))}}}return _i(t,Ln()),t.callbackNode===n?n5.bind(null,t):null}function i_(t,e){var n=Hh;return t.current.memoizedState.isDehydrated&&(Tc(t,e).flags|=256),t=ov(t,e),t!==2&&(e=mi,mi=n,e!==null&&a_(e)),t}function a_(t){mi===null?mi=t:mi.push.apply(mi,t)}function v7(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!qa(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ho(t,e){for(e&=~pE,e&=~Q0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ua(e),r=1<<n;t[n]=-1,e&=~r}}function NP(t){if(Ct&6)throw Error(Te(327));pd();var e=Uy(t,0);if(!(e&1))return _i(t,Ln()),null;var n=ov(t,e);if(t.tag!==0&&n===2){var r=k1(t);r!==0&&(e=r,n=i_(t,r))}if(n===1)throw n=Cp,Tc(t,0),Ho(t,e),_i(t,Ln()),n;if(n===6)throw Error(Te(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,sc(t,mi,Vs),_i(t,Ln()),null}function gE(t,e){var n=Ct;Ct|=1;try{return t(e)}finally{Ct=n,Ct===0&&(Cd=Ln()+500,H0&&Al())}}function Vc(t){Xo!==null&&Xo.tag===0&&!(Ct&6)&&pd();var e=Ct;Ct|=1;var n=ua.transition,r=Wt;try{if(ua.transition=null,Wt=1,t)return t()}finally{Wt=r,ua.transition=n,Ct=e,!(Ct&6)&&Al()}}function yE(){Di=Zu.current,dn(Zu)}function Tc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,GB(n)),qn!==null)for(n=qn.return;n!==null;){var r=n;switch(Q2(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Gy();break;case 3:Td(),dn(bi),dn(Ur),sE();break;case 5:aE(r);break;case 4:Td();break;case 13:dn(_n);break;case 19:dn(_n);break;case 10:tE(r.type._context);break;case 22:case 23:yE()}n=n.return}if(gr=t,qn=t=ol(t.current,null),jr=Di=e,rr=0,Cp=null,pE=Q0=zc=0,mi=Hh=null,gc!==null){for(e=0;e<gc.length;e++)if(n=gc[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var s=a.next;a.next=i,r.next=s}n.pending=r}gc=null}return t}function r5(t,e){do{var n=qn;try{if(eE(),wy.current=rv,nv){for(var r=Sn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}nv=!1}if(Lc=0,hr=tr=Sn=null,Kh=!1,jp=0,hE.current=null,n===null||n.return===null){rr=1,Cp=e,qn=null;break}e:{var a=t,s=n.return,o=n,l=e;if(e=jr,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,f=o,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=vP(s);if(p!==null){p.flags&=-257,xP(p,s,o,a,e),p.mode&1&&yP(a,u,e),e=p,l=u;var v=e.updateQueue;if(v===null){var y=new Set;y.add(l),e.updateQueue=y}else v.add(l);break e}else{if(!(e&1)){yP(a,u,e),vE();break e}l=Error(Te(426))}}else if(pn&&o.mode&1){var b=vP(s);if(b!==null){!(b.flags&65536)&&(b.flags|=256),xP(b,s,o,a,e),Z2(Pd(l,o));break e}}a=l=Pd(l,o),rr!==4&&(rr=2),Hh===null?Hh=[a]:Hh.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var x=VR(a,l,e);dP(a,x);break e;case 1:o=l;var _=a.type,E=a.stateNode;if(!(a.flags&128)&&(typeof _.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(al===null||!al.has(E)))){a.flags|=65536,e&=-e,a.lanes|=e;var P=FR(a,o,e);dP(a,P);break e}}a=a.return}while(a!==null)}s5(n)}catch(A){e=A,qn===n&&n!==null&&(qn=n=n.return);continue}break}while(!0)}function i5(){var t=iv.current;return iv.current=rv,t===null?rv:t}function vE(){(rr===0||rr===3||rr===2)&&(rr=4),gr===null||!(zc&268435455)&&!(Q0&268435455)||Ho(gr,jr)}function ov(t,e){var n=Ct;Ct|=2;var r=i5();(gr!==t||jr!==e)&&(Vs=null,Tc(t,e));do try{x7();break}catch(i){r5(t,i)}while(!0);if(eE(),Ct=n,iv.current=r,qn!==null)throw Error(Te(261));return gr=null,jr=0,rr}function x7(){for(;qn!==null;)a5(qn)}function b7(){for(;qn!==null&&!K9();)a5(qn)}function a5(t){var e=l5(t.alternate,t,Di);t.memoizedProps=t.pendingProps,e===null?s5(t):qn=e,hE.current=null}function s5(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=h7(n,e),n!==null){n.flags&=32767,qn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{rr=6,qn=null;return}}else if(n=f7(n,e,Di),n!==null){qn=n;return}if(e=e.sibling,e!==null){qn=e;return}qn=e=t}while(e!==null);rr===0&&(rr=5)}function sc(t,e,n){var r=Wt,i=ua.transition;try{ua.transition=null,Wt=1,w7(t,e,n,r)}finally{ua.transition=i,Wt=r}return null}function w7(t,e,n,r){do pd();while(Xo!==null);if(Ct&6)throw Error(Te(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Te(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(tB(t,a),t===gr&&(qn=gr=null,jr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bg||(Bg=!0,c5(By,function(){return pd(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=ua.transition,ua.transition=null;var s=Wt;Wt=1;var o=Ct;Ct|=4,hE.current=null,m7(t,n),e5(n,t),FB(R1),Wy=!!M1,R1=M1=null,t.current=n,g7(n),q9(),Ct=o,Wt=s,ua.transition=a}else t.current=n;if(Bg&&(Bg=!1,Xo=t,sv=i),a=t.pendingLanes,a===0&&(al=null),Y9(n.stateNode),_i(t,Ln()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(av)throw av=!1,t=n_,n_=null,t;return sv&1&&t.tag!==0&&pd(),a=t.pendingLanes,a&1?t===r_?Gh++:(Gh=0,r_=t):Gh=0,Al(),null}function pd(){if(Xo!==null){var t=V4(sv),e=ua.transition,n=Wt;try{if(ua.transition=null,Wt=16>t?16:t,Xo===null)var r=!1;else{if(t=Xo,Xo=null,sv=0,Ct&6)throw Error(Te(331));var i=Ct;for(Ct|=4,Fe=t.current;Fe!==null;){var a=Fe,s=a.child;if(Fe.flags&16){var o=a.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(Fe=u;Fe!==null;){var f=Fe;switch(f.tag){case 0:case 11:case 15:qh(8,f,a)}var d=f.child;if(d!==null)d.return=f,Fe=d;else for(;Fe!==null;){f=Fe;var h=f.sibling,p=f.return;if(QR(f),f===u){Fe=null;break}if(h!==null){h.return=p,Fe=h;break}Fe=p}}}var v=a.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(y!==null)}}Fe=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,Fe=s;else e:for(;Fe!==null;){if(a=Fe,a.flags&2048)switch(a.tag){case 0:case 11:case 15:qh(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,Fe=x;break e}Fe=a.return}}var _=t.current;for(Fe=_;Fe!==null;){s=Fe;var E=s.child;if(s.subtreeFlags&2064&&E!==null)E.return=s,Fe=E;else e:for(s=_;Fe!==null;){if(o=Fe,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:X0(9,o)}}catch(A){Pn(o,o.return,A)}if(o===s){Fe=null;break e}var P=o.sibling;if(P!==null){P.return=o.return,Fe=P;break e}Fe=o.return}}if(Ct=i,Al(),gs&&typeof gs.onPostCommitFiberRoot=="function")try{gs.onPostCommitFiberRoot(B0,t)}catch{}r=!0}return r}finally{Wt=n,ua.transition=e}}return!1}function OP(t,e,n){e=Pd(n,e),e=VR(t,e,1),t=il(t,e,1),e=Zr(),t!==null&&(Cm(t,1,e),_i(t,e))}function Pn(t,e,n){if(t.tag===3)OP(t,t,n);else for(;e!==null;){if(e.tag===3){OP(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(al===null||!al.has(r))){t=Pd(n,t),t=FR(e,t,1),e=il(e,t,1),t=Zr(),e!==null&&(Cm(e,1,t),_i(e,t));break}}e=e.return}}function _7(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Zr(),t.pingedLanes|=t.suspendedLanes&n,gr===t&&(jr&n)===n&&(rr===4||rr===3&&(jr&130023424)===jr&&500>Ln()-mE?Tc(t,0):pE|=n),_i(t,e)}function o5(t,e){e===0&&(t.mode&1?(e=Og,Og<<=1,!(Og&130023424)&&(Og=4194304)):e=1);var n=Zr();t=so(t,e),t!==null&&(Cm(t,e,n),_i(t,n))}function S7(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),o5(t,n)}function E7(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Te(314))}r!==null&&r.delete(e),o5(t,n)}var l5;l5=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||bi.current)yi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return yi=!1,d7(t,e,n);yi=!!(t.flags&131072)}else yi=!1,pn&&e.flags&1048576&&fR(e,Qy,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Sy(t,e),t=e.pendingProps;var i=Ed(e,Ur.current);hd(e,n),i=lE(null,e,r,t,i,n);var a=cE();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,wi(r)?(a=!0,Yy(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,rE(e),i.updater=Y0,e.stateNode=i,i._reactInternals=e,K1(e,r,t,n),e=G1(null,e,r,!0,a,n)):(e.tag=0,pn&&a&&X2(e),Gr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Sy(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=j7(r),t=Da(r,t),i){case 0:e=H1(null,e,r,t,n);break e;case 1:e=_P(null,e,r,t,n);break e;case 11:e=bP(null,e,r,t,n);break e;case 14:e=wP(null,e,r,Da(r.type,t),n);break e}throw Error(Te(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Da(r,i),H1(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Da(r,i),_P(t,e,r,i,n);case 3:e:{if(KR(e),t===null)throw Error(Te(387));r=e.pendingProps,a=e.memoizedState,i=a.element,vR(t,e),ev(e,r,null,n);var s=e.memoizedState;if(r=s.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Pd(Error(Te(423)),e),e=SP(t,e,r,n,i);break e}else if(r!==i){i=Pd(Error(Te(424)),e),e=SP(t,e,r,n,i);break e}else for(Li=rl(e.stateNode.containerInfo.firstChild),Vi=e,pn=!0,za=null,n=gR(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ad(),r===i){e=oo(t,e,n);break e}Gr(t,e,r,n)}e=e.child}return e;case 5:return xR(e),t===null&&B1(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,s=i.children,$1(r,i)?s=null:a!==null&&$1(r,a)&&(e.flags|=32),WR(t,e),Gr(t,e,s,n),e.child;case 6:return t===null&&B1(e),null;case 13:return qR(t,e,n);case 4:return iE(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=jd(e,null,r,n):Gr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Da(r,i),bP(t,e,r,i,n);case 7:return Gr(t,e,e.pendingProps,n),e.child;case 8:return Gr(t,e,e.pendingProps.children,n),e.child;case 12:return Gr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value,rn(Zy,r._currentValue),r._currentValue=s,a!==null)if(qa(a.value,s)){if(a.children===i.children&&!bi.current){e=oo(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(a.tag===1){l=Qs(-1,n&-n),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?l.next=l:(l.next=f.next,f.next=l),u.pending=l}}a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),U1(a.return,n,e),o.lanes|=n;break}l=l.next}}else if(a.tag===10)s=a.type===e.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(Te(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),U1(s,n,e),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}Gr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,hd(e,n),i=fa(i),r=r(i),e.flags|=1,Gr(t,e,r,n),e.child;case 14:return r=e.type,i=Da(r,e.pendingProps),i=Da(r.type,i),wP(t,e,r,i,n);case 15:return BR(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Da(r,i),Sy(t,e),e.tag=1,wi(r)?(t=!0,Yy(e)):t=!1,hd(e,n),zR(e,r,i),K1(e,r,i,n),G1(null,e,r,!0,t,n);case 19:return HR(t,e,n);case 22:return UR(t,e,n)}throw Error(Te(156,e.tag))};function c5(t,e){return R4(t,e)}function A7(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function la(t,e,n,r){return new A7(t,e,n,r)}function xE(t){return t=t.prototype,!(!t||!t.isReactComponent)}function j7(t){if(typeof t=="function")return xE(t)?1:0;if(t!=null){if(t=t.$$typeof,t===L2)return 11;if(t===z2)return 14}return 2}function ol(t,e){var n=t.alternate;return n===null?(n=la(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function jy(t,e,n,r,i,a){var s=2;if(r=t,typeof t=="function")xE(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Bu:return Pc(n.children,i,a,e);case $2:s=8,i|=8;break;case m1:return t=la(12,n,e,i|2),t.elementType=m1,t.lanes=a,t;case g1:return t=la(13,n,e,i),t.elementType=g1,t.lanes=a,t;case y1:return t=la(19,n,e,i),t.elementType=y1,t.lanes=a,t;case x4:return Z0(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case y4:s=10;break e;case v4:s=9;break e;case L2:s=11;break e;case z2:s=14;break e;case Uo:s=16,r=null;break e}throw Error(Te(130,t==null?t:typeof t,""))}return e=la(s,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function Pc(t,e,n,r){return t=la(7,t,r,e),t.lanes=n,t}function Z0(t,e,n,r){return t=la(22,t,r,e),t.elementType=x4,t.lanes=n,t.stateNode={isHidden:!1},t}function rw(t,e,n){return t=la(6,t,null,e),t.lanes=n,t}function iw(t,e,n){return e=la(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function T7(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lb(0),this.expirationTimes=Lb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lb(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function bE(t,e,n,r,i,a,s,o,l){return t=new T7(t,e,n,o,l),e===1?(e=1,a===!0&&(e|=8)):e=0,a=la(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},rE(a),t}function P7(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fu,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function u5(t){if(!t)return ml;t=t._reactInternals;e:{if(Jc(t)!==t||t.tag!==1)throw Error(Te(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(wi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Te(171))}if(t.tag===1){var n=t.type;if(wi(n))return uR(t,n,e)}return e}function d5(t,e,n,r,i,a,s,o,l){return t=bE(n,r,!0,t,i,a,s,o,l),t.context=u5(null),n=t.current,r=Zr(),i=sl(n),a=Qs(r,i),a.callback=e??null,il(n,a,i),t.current.lanes=i,Cm(t,i,r),_i(t,r),t}function J0(t,e,n,r){var i=e.current,a=Zr(),s=sl(i);return n=u5(n),e.context===null?e.context=n:e.pendingContext=n,e=Qs(a,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=il(i,e,s),t!==null&&(Wa(t,i,s,a),by(t,i,s)),s}function lv(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function IP(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function wE(t,e){IP(t,e),(t=t.alternate)&&IP(t,e)}function C7(){return null}var f5=typeof reportError=="function"?reportError:function(t){console.error(t)};function _E(t){this._internalRoot=t}ex.prototype.render=_E.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Te(409));J0(t,e,null,null)};ex.prototype.unmount=_E.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vc(function(){J0(null,t,null,null)}),e[ao]=null}};function ex(t){this._internalRoot=t}ex.prototype.unstable_scheduleHydration=function(t){if(t){var e=U4();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qo.length&&e!==0&&e<qo[n].priority;n++);qo.splice(n,0,t),n===0&&K4(t)}};function SE(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function tx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function DP(){}function k7(t,e,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var u=lv(s);a.call(u)}}var s=d5(e,r,t,0,null,!1,!1,"",DP);return t._reactRootContainer=s,t[ao]=s.current,wp(t.nodeType===8?t.parentNode:t),Vc(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=lv(l);o.call(u)}}var l=bE(t,0,!1,null,null,!1,!1,"",DP);return t._reactRootContainer=l,t[ao]=l.current,wp(t.nodeType===8?t.parentNode:t),Vc(function(){J0(e,l,n,r)}),l}function nx(t,e,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var l=lv(s);o.call(l)}}J0(e,s,t,i)}else s=k7(n,e,t,i,r);return lv(s)}F4=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Th(e.pendingLanes);n!==0&&(B2(e,n|1),_i(e,Ln()),!(Ct&6)&&(Cd=Ln()+500,Al()))}break;case 13:Vc(function(){var r=so(t,1);if(r!==null){var i=Zr();Wa(r,t,1,i)}}),wE(t,1)}};U2=function(t){if(t.tag===13){var e=so(t,134217728);if(e!==null){var n=Zr();Wa(e,t,134217728,n)}wE(t,134217728)}};B4=function(t){if(t.tag===13){var e=sl(t),n=so(t,e);if(n!==null){var r=Zr();Wa(n,t,e,r)}wE(t,e)}};U4=function(){return Wt};W4=function(t,e){var n=Wt;try{return Wt=t,e()}finally{Wt=n}};T1=function(t,e,n){switch(e){case"input":if(b1(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=q0(r);if(!i)throw Error(Te(90));w4(r),b1(r,i)}}}break;case"textarea":S4(t,n);break;case"select":e=n.value,e!=null&&cd(t,!!n.multiple,e,!1)}};k4=gE;N4=Vc;var N7={usingClientEntryPoint:!1,Events:[Nm,qu,q0,P4,C4,gE]},hh={findFiberByHostInstance:mc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},O7={bundleType:hh.bundleType,version:hh.version,rendererPackageName:hh.rendererPackageName,rendererConfig:hh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=D4(t),t===null?null:t.stateNode},findFiberByHostInstance:hh.findFiberByHostInstance||C7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ug=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ug.isDisabled&&Ug.supportsFiber)try{B0=Ug.inject(O7),gs=Ug}catch{}}Hi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N7;Hi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!SE(e))throw Error(Te(200));return P7(t,e,null,n)};Hi.createRoot=function(t,e){if(!SE(t))throw Error(Te(299));var n=!1,r="",i=f5;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=bE(t,1,!1,null,null,n,!1,r,i),t[ao]=e.current,wp(t.nodeType===8?t.parentNode:t),new _E(e)};Hi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Te(188)):(t=Object.keys(t).join(","),Error(Te(268,t)));return t=D4(e),t=t===null?null:t.stateNode,t};Hi.flushSync=function(t){return Vc(t)};Hi.hydrate=function(t,e,n){if(!tx(e))throw Error(Te(200));return nx(null,t,e,!0,n)};Hi.hydrateRoot=function(t,e,n){if(!SE(t))throw Error(Te(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",s=f5;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=d5(e,null,t,1,n??null,i,!1,a,s),t[ao]=e.current,wp(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ex(e)};Hi.render=function(t,e,n){if(!tx(e))throw Error(Te(200));return nx(null,t,e,!1,n)};Hi.unmountComponentAtNode=function(t){if(!tx(t))throw Error(Te(40));return t._reactRootContainer?(Vc(function(){nx(null,null,t,!1,function(){t._reactRootContainer=null,t[ao]=null})}),!0):!1};Hi.unstable_batchedUpdates=gE;Hi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!tx(n))throw Error(Te(200));if(t==null||t._reactInternals===void 0)throw Error(Te(38));return nx(t,e,n,!1,r)};Hi.version="18.3.1-next-f1338f8080-20240426";function h5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h5)}catch(t){console.error(t)}}h5(),h4.exports=Hi;var p5=h4.exports,MP=p5;h1.createRoot=MP.createRoot,h1.hydrateRoot=MP.hydrateRoot;const I7=()=>{};var RP={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},D7=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],s=t[n++],o=t[n++],l=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const a=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},g5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],s=i+1<t.length,o=s?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,f=a>>2,d=(a&3)<<4|o>>4;let h=(o&15)<<2|u>>6,p=u&63;l||(p=64,s||(h=64)),r.push(n[f],n[d],n[h],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(m5(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):D7(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||o==null||u==null||d==null)throw new M7;const h=a<<2|o>>4;if(r.push(h),u!==64){const p=o<<4&240|u>>2;if(r.push(p),d!==64){const v=u<<6&192|d;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class M7 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const R7=function(t){const e=m5(t);return g5.encodeByteArray(e,!0)},y5=function(t){return R7(t).replace(/\./g,"")},v5=function(t){try{return g5.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $7(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L7=()=>$7().__FIREBASE_DEFAULTS__,z7=()=>{if(typeof process>"u"||typeof RP>"u")return;const t=RP.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},V7=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&v5(t[1]);return e&&JSON.parse(e)},EE=()=>{try{return I7()||L7()||z7()||V7()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},F7=()=>{var t;return(t=EE())==null?void 0:t.config},B7=t=>{var e;return(e=EE())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U7{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function W7(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function K7(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ei())}function q7(){var e;const t=(e=EE())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function H7(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function G7(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Y7(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function X7(){const t=Ei();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Q7(){return!q7()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Z7(){try{return typeof indexedDB=="object"}catch{return!1}}function J7(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eU="FirebaseError";class bo extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=eU,Object.setPrototypeOf(this,bo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Im.prototype.create)}}class Im{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?tU(a,r):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new bo(i,o,r)}}function tU(t,e){return t.replace(nU,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const nU=/\{\$([^}]+)}/g;function kp(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],s=e[i];if($P(a)&&$P(s)){if(!kp(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function $P(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x5(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ch(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function kh(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function rU(t,e){const n=new iU(t,e);return n.subscribe.bind(n)}class iU{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");aU(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=aw),i.error===void 0&&(i.error=aw),i.complete===void 0&&(i.complete=aw);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aU(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function aw(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(t){return t&&t._delegate?t._delegate:t}class Fc{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new U7;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lU(e))try{this.getOrInitializeService({instanceIdentifier:oc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=oc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oc){return this.instances.has(e)}getOptions(e=oc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&s.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:oU(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=oc){return this.component?this.component.multipleInstances?e:oc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oU(t){return t===oc?void 0:t}function lU(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new sU(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(wt||(wt={}));const uU={debug:wt.DEBUG,verbose:wt.VERBOSE,info:wt.INFO,warn:wt.WARN,error:wt.ERROR,silent:wt.SILENT},dU=wt.INFO,fU={[wt.DEBUG]:"log",[wt.VERBOSE]:"log",[wt.INFO]:"info",[wt.WARN]:"warn",[wt.ERROR]:"error"},hU=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=fU[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class AE{constructor(e){this.name=e,this._logLevel=dU,this._logHandler=hU,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in wt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,wt.DEBUG,...e),this._logHandler(this,wt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,wt.VERBOSE,...e),this._logHandler(this,wt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,wt.INFO,...e),this._logHandler(this,wt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,wt.WARN,...e),this._logHandler(this,wt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,wt.ERROR,...e),this._logHandler(this,wt.ERROR,...e)}}const pU=(t,e)=>e.some(n=>t instanceof n);let LP,zP;function mU(){return LP||(LP=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gU(){return zP||(zP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const b5=new WeakMap,s_=new WeakMap,w5=new WeakMap,sw=new WeakMap,jE=new WeakMap;function yU(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{n(ll(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&b5.set(n,t)}).catch(()=>{}),jE.set(e,t),e}function vU(t){if(s_.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});s_.set(t,e)}let o_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return s_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||w5.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ll(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function xU(t){o_=t(o_)}function bU(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ow(this),e,...n);return w5.set(r,e.sort?e.sort():[e]),ll(r)}:gU().includes(t)?function(...e){return t.apply(ow(this),e),ll(b5.get(this))}:function(...e){return ll(t.apply(ow(this),e))}}function wU(t){return typeof t=="function"?bU(t):(t instanceof IDBTransaction&&vU(t),pU(t,mU())?new Proxy(t,o_):t)}function ll(t){if(t instanceof IDBRequest)return yU(t);if(sw.has(t))return sw.get(t);const e=wU(t);return e!==t&&(sw.set(t,e),jE.set(e,t)),e}const ow=t=>jE.get(t);function _U(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(t,e),o=ll(s);return r&&s.addEventListener("upgradeneeded",l=>{r(ll(s.result),l.oldVersion,l.newVersion,ll(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),o.then(l=>{a&&l.addEventListener("close",()=>a()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const SU=["get","getKey","getAll","getAllKeys","count"],EU=["put","add","delete","clear"],lw=new Map;function VP(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(lw.get(e))return lw.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=EU.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||SU.includes(n)))return;const a=async function(s,...o){const l=this.transaction(s,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),i&&l.done]))[0]};return lw.set(e,a),a}xU(t=>({...t,get:(e,n,r)=>VP(e,n)||t.get(e,n,r),has:(e,n)=>!!VP(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AU{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(jU(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function jU(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const l_="@firebase/app",FP="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo=new AE("@firebase/app"),TU="@firebase/app-compat",PU="@firebase/analytics-compat",CU="@firebase/analytics",kU="@firebase/app-check-compat",NU="@firebase/app-check",OU="@firebase/auth",IU="@firebase/auth-compat",DU="@firebase/database",MU="@firebase/data-connect",RU="@firebase/database-compat",$U="@firebase/functions",LU="@firebase/functions-compat",zU="@firebase/installations",VU="@firebase/installations-compat",FU="@firebase/messaging",BU="@firebase/messaging-compat",UU="@firebase/performance",WU="@firebase/performance-compat",KU="@firebase/remote-config",qU="@firebase/remote-config-compat",HU="@firebase/storage",GU="@firebase/storage-compat",YU="@firebase/firestore",XU="@firebase/ai",QU="@firebase/firestore-compat",ZU="firebase",JU="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eW="[DEFAULT]",tW={[l_]:"fire-core",[TU]:"fire-core-compat",[CU]:"fire-analytics",[PU]:"fire-analytics-compat",[NU]:"fire-app-check",[kU]:"fire-app-check-compat",[OU]:"fire-auth",[IU]:"fire-auth-compat",[DU]:"fire-rtdb",[MU]:"fire-data-connect",[RU]:"fire-rtdb-compat",[$U]:"fire-fn",[LU]:"fire-fn-compat",[zU]:"fire-iid",[VU]:"fire-iid-compat",[FU]:"fire-fcm",[BU]:"fire-fcm-compat",[UU]:"fire-perf",[WU]:"fire-perf-compat",[KU]:"fire-rc",[qU]:"fire-rc-compat",[HU]:"fire-gcs",[GU]:"fire-gcs-compat",[YU]:"fire-fst",[QU]:"fire-fst-compat",[XU]:"fire-vertex","fire-js":"fire-js",[ZU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_=new Map,nW=new Map,u_=new Map;function BP(t,e){try{t.container.addComponent(e)}catch(n){lo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function kd(t){const e=t.name;if(u_.has(e))return lo.debug(`There were multiple attempts to register component ${e}.`),!1;u_.set(e,t);for(const n of c_.values())BP(n,t);for(const n of nW.values())BP(n,t);return!0}function _5(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function us(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rW={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cc=new Im("app","Firebase",rW);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iW{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix=JU;function aW(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:eW,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Cc.create("bad-app-name",{appName:String(i)});if(n||(n=F7()),!n)throw Cc.create("no-options");const a=c_.get(i);if(a){if(kp(n,a.options)&&kp(r,a.config))return a;throw Cc.create("duplicate-app",{appName:i})}const s=new cU(i);for(const l of u_.values())s.addComponent(l);const o=new iW(n,r,s);return c_.set(i,o),o}function cl(t,e,n){let r=tW[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&s.push("and"),a&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),lo.warn(s.join(" "));return}kd(new Fc(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sW="firebase-heartbeat-database",oW=1,Np="firebase-heartbeat-store";let cw=null;function S5(){return cw||(cw=_U(sW,oW,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Np)}catch(n){console.warn(n)}}}}).catch(t=>{throw Cc.create("idb-open",{originalErrorMessage:t.message})})),cw}async function lW(t){try{const n=(await S5()).transaction(Np),r=await n.objectStore(Np).get(E5(t));return await n.done,r}catch(e){if(e instanceof bo)lo.warn(e.message);else{const n=Cc.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});lo.warn(n.message)}}}async function UP(t,e){try{const r=(await S5()).transaction(Np,"readwrite");await r.objectStore(Np).put(e,E5(t)),await r.done}catch(n){if(n instanceof bo)lo.warn(n.message);else{const r=Cc.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});lo.warn(r.message)}}}function E5(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cW=1024,uW=30;class dW{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new hW(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=WP();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>uW){const s=pW(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){lo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=WP(),{heartbeatsToSend:r,unsentEntries:i}=fW(this._heartbeatsCache.heartbeats),a=y5(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return lo.warn(n),""}}}function WP(){return new Date().toISOString().substring(0,10)}function fW(t,e=cW){const n=[];let r=t.slice();for(const i of t){const a=n.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),KP(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),KP(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class hW{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Z7()?J7().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await lW(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return UP(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return UP(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function KP(t){return y5(JSON.stringify({version:2,heartbeats:t})).length}function pW(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mW(t){kd(new Fc("platform-logger",e=>new AU(e),"PRIVATE")),kd(new Fc("heartbeat",e=>new dW(e),"PRIVATE")),cl(l_,FP,t),cl(l_,FP,"esm2020"),cl("fire-js","")}mW("");function A5(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gW=A5,j5=new Im("auth","Firebase",A5());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv=new AE("@firebase/auth");function yW(t,...e){cv.logLevel<=wt.WARN&&cv.warn(`Auth (${ix}): ${t}`,...e)}function Ty(t,...e){cv.logLevel<=wt.ERROR&&cv.error(`Auth (${ix}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(t,...e){throw PE(t,...e)}function TE(t,...e){return PE(t,...e)}function T5(t,e,n){const r={...gW(),[e]:n};return new Im("auth","Firebase",r).create(e,{appName:t.name})}function kc(t){return T5(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function PE(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return j5.create(t,...e)}function Pt(t,e,...n){if(!t)throw PE(e,...n)}function Ks(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ty(e),new Error(e)}function uv(t,e){t||Ks(e)}function vW(){return qP()==="http:"||qP()==="https:"}function qP(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xW(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vW()||G7()||"connection"in navigator)?navigator.onLine:!0}function bW(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e,n){this.shortDelay=e,this.longDelay=n,uv(n>e,"Short delay should be less than long delay!"),this.isMobile=K7()||Y7()}get(){return xW()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wW(t,e){uv(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ks("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ks("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ks("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _W={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SW=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],EW=new Dm(3e4,6e4);function eu(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function tu(t,e,n,r,i={}){return C5(t,i,async()=>{let a={},s={};r&&(e==="GET"?s=r:a={body:JSON.stringify(r)});const o=x5({key:t.config.apiKey,...s}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...a};return H7()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&rx(t.emulatorConfig.host)&&(u.credentials="include"),P5.fetch()(await k5(t,t.config.apiHost,n,o),u)})}async function C5(t,e,n){t._canInitEmulator=!1;const r={..._W,...e};try{const i=new jW(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw Wg(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wg(t,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw Wg(t,"email-already-in-use",s);if(l==="USER_DISABLED")throw Wg(t,"user-disabled",s);const f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw T5(t,f,u);Nd(t,f)}}catch(i){if(i instanceof bo)throw i;Nd(t,"network-request-failed",{message:String(i)})}}async function ax(t,e,n,r,i={}){const a=await tu(t,e,n,r,i);return"mfaPendingCredential"in a&&Nd(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function k5(t,e,n,r){const i=`${e}${n}?${r}`,a=t,s=a.config.emulator?wW(t.config,i):`${t.config.apiScheme}://${i}`;return SW.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}function AW(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class jW{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(TE(this.auth,"network-request-failed")),EW.get())})}}function Wg(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=TE(t,e,r);return i.customData._tokenResponse=n,i}function HP(t){return t!==void 0&&t.enterprise!==void 0}class TW{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return AW(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function PW(t,e){return tu(t,"GET","/v2/recaptchaConfig",eu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CW(t,e){return tu(t,"POST","/v1/accounts:delete",e)}async function dv(t,e){return tu(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function kW(t,e=!1){const n=yr(t),r=await n.getIdToken(e),i=N5(r);Pt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Yh(uw(i.auth_time)),issuedAtTime:Yh(uw(i.iat)),expirationTime:Yh(uw(i.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function uw(t){return Number(t)*1e3}function N5(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ty("JWT malformed, contained fewer than 3 sections"),null;try{const i=v5(n);return i?JSON.parse(i):(Ty("Failed to decode base64 JWT payload"),null)}catch(i){return Ty("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function GP(t){const e=N5(t);return Pt(e,"internal-error"),Pt(typeof e.exp<"u","internal-error"),Pt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d_(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof bo&&NW(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function NW({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OW{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yh(this.lastLoginAt),this.creationTime=Yh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fv(t){var d;const e=t.auth,n=await t.getIdToken(),r=await d_(t,dv(e,{idToken:n}));Pt(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=(d=i.providerUserInfo)!=null&&d.length?O5(i.providerUserInfo):[],s=DW(t.providerData,a),o=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(s!=null&&s.length),u=o?l:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new f_(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function IW(t){const e=yr(t);await fv(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DW(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function O5(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MW(t,e){const n=await C5(t,{},async()=>{const r=x5({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,s=await k5(t,i,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:r};return t.emulatorConfig&&rx(t.emulatorConfig.host)&&(l.credentials="include"),P5.fetch()(s,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function RW(t,e){return tu(t,"POST","/v2/accounts:revokeToken",eu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pt(e.idToken,"internal-error"),Pt(typeof e.idToken<"u","internal-error"),Pt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):GP(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Pt(e.length!==0,"internal-error");const n=GP(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Pt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await MW(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,s=new md;return r&&(Pt(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Pt(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(Pt(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new md,this.toJSON())}_performRefresh(){return Ks("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(t,e){Pt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Fa{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new OW(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new f_(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await d_(this,this.stsTokenManager.getToken(this.auth,e));return Pt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return kW(this,e)}reload(){return IW(this)}_assign(e){this!==e&&(Pt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Fa({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Pt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await fv(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(us(this.auth.app))return Promise.reject(kc(this.auth));const e=await this.getIdToken();return await d_(this,CW(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,s=n.photoURL??void 0,o=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:d,emailVerified:h,isAnonymous:p,providerData:v,stsTokenManager:y}=n;Pt(d&&y,e,"internal-error");const b=md.fromJSON(this.name,y);Pt(typeof d=="string",e,"internal-error"),$o(r,e.name),$o(i,e.name),Pt(typeof h=="boolean",e,"internal-error"),Pt(typeof p=="boolean",e,"internal-error"),$o(a,e.name),$o(s,e.name),$o(o,e.name),$o(l,e.name),$o(u,e.name),$o(f,e.name);const x=new Fa({uid:d,auth:e,email:i,emailVerified:h,displayName:r,isAnonymous:p,photoURL:s,phoneNumber:a,tenantId:o,stsTokenManager:b,createdAt:u,lastLoginAt:f});return v&&Array.isArray(v)&&(x.providerData=v.map(_=>({..._}))),l&&(x._redirectEventId=l),x}static async _fromIdTokenResponse(e,n,r=!1){const i=new md;i.updateFromServerResponse(n);const a=new Fa({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await fv(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Pt(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?O5(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),o=new md;o.updateFromIdToken(r);const l=new Fa({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new f_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=new Map;function vc(t){uv(t instanceof Function,"Expected a class definition");let e=YP.get(t);return e?(uv(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,YP.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}I5.type="NONE";const XP=I5;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(t,e,n){return`firebase:${t}:${e}:${n}`}class gd{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=dw(this.userKey,i.apiKey,a),this.fullPersistenceKey=dw("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await dv(this.auth,{idToken:e}).catch(()=>{});return n?Fa._fromGetAccountInfoResponse(this.auth,n,e):null}return Fa._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new gd(vc(XP),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=i[0]||vc(XP);const s=dw(r,e.config.apiKey,e.name);let o=null;for(const u of n)try{const f=await u._get(s);if(f){let d;if(typeof f=="string"){const h=await dv(e,{idToken:f}).catch(()=>{});if(!h)break;d=await Fa._fromGetAccountInfoResponse(e,h,f)}else d=Fa._fromJSON(e,f);u!==a&&(o=d),a=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!l.length?new gd(a,e,r):(a=l[0],o&&await a._set(s,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==a)try{await u._remove(s)}catch{}})),new gd(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QP(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(D5(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($W(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(R5(e))return"Blackberry";if($5(e))return"Webos";if(LW(e))return"Safari";if((e.includes("chrome/")||zW(e))&&!e.includes("edge/"))return"Chrome";if(M5(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function $W(t=Ei()){return/firefox\//i.test(t)}function LW(t=Ei()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zW(t=Ei()){return/crios\//i.test(t)}function D5(t=Ei()){return/iemobile/i.test(t)}function M5(t=Ei()){return/android/i.test(t)}function R5(t=Ei()){return/blackberry/i.test(t)}function $5(t=Ei()){return/webos/i.test(t)}function VW(t=Ei()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function FW(){return X7()&&document.documentMode===10}function BW(t=Ei()){return VW(t)||M5(t)||$5(t)||R5(t)||/windows phone/i.test(t)||D5(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L5(t,e=[]){let n;switch(t){case"Browser":n=QP(Ei());break;case"Worker":n=`${QP(Ei())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ix}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UW{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((s,o)=>{try{const l=e(a);s(l)}catch(l){o(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WW(t,e={}){return tu(t,"GET","/v2/passwordPolicy",eu(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KW=6;class qW{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??KW,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HW{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ZP(this),this.idTokenSubscription=new ZP(this),this.beforeStateQueue=new UW(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=j5,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=vc(n)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await gd.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await dv(this,{idToken:e}),r=await Fa._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(us(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(a=this.redirectUser)==null?void 0:a._redirectEventId,o=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!s||s===o)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Pt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await fv(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bW()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(us(this.app))return Promise.reject(kc(this));const n=e?yr(e):null;return n&&Pt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Pt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return us(this.app)?Promise.reject(kc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return us(this.app)?Promise.reject(kc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vc(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await WW(this),n=new qW(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Im("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await RW(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&vc(e)||this._popupRedirectResolver;Pt(n,this,"argument-error"),this.redirectPersistenceManager=await gd.create(this,[vc(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pt(o,this,"internal-error"),o.then(()=>{s||a(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{s=!0,l()}}else{const l=e.addObserver(n);return()=>{s=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=L5(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(us(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&yW(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Mm(t){return yr(t)}class ZP{constructor(e){this.auth=e,this.observer=null,this.addObserver=rU(n=>this.observer=n)}get next(){return Pt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CE={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function GW(t){CE=t}function YW(t){return CE.loadJS(t)}function XW(){return CE.recaptchaEnterpriseScript}class QW{constructor(){this.enterprise=new ZW}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class ZW{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const JW="recaptcha-enterprise",z5="NO_RECAPTCHA";class eK{constructor(e){this.type=JW,this.auth=Mm(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(s,o)=>{PW(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new TW(l);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,s(u.siteKey)}}).catch(l=>{o(l)})})}function i(a,s,o){const l=window.grecaptcha;HP(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:e}).then(u=>{s(u)}).catch(()=>{s(z5)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new QW().execute("siteKey",{action:"verify"}):new Promise((a,s)=>{r(this.auth).then(o=>{if(!n&&HP(window.grecaptcha))i(o,a,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let l=XW();l.length!==0&&(l+=o),YW(l).then(()=>{i(o,a,s)}).catch(u=>{s(u)})}}).catch(o=>{s(o)})})}}async function JP(t,e,n,r=!1,i=!1){const a=new eK(t);let s;if(i)s=z5;else try{s=await a.verify(n)}catch{s=await a.verify(n,!0)}const o={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function h_(t,e,n,r,i){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await JP(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await JP(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tK(t,e){const n=_5(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(kp(a,e??{}))return i;Nd(i,"already-initialized")}return n.initialize({options:e})}function nK(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vc);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rK{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ks("not implemented")}_getIdTokenResponse(e){return Ks("not implemented")}_linkToIdToken(e,n){return Ks("not implemented")}_getReauthenticationResolver(e){return Ks("not implemented")}}async function iK(t,e){return tu(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aK(t,e){return ax(t,"POST","/v1/accounts:signInWithPassword",eu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sK(t,e){return ax(t,"POST","/v1/accounts:signInWithEmailLink",eu(t,e))}async function oK(t,e){return ax(t,"POST","/v1/accounts:signInWithEmailLink",eu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op extends rK{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Op(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Op(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return h_(e,n,"signInWithPassword",aK);case"emailLink":return sK(e,{email:this._email,oobCode:this._password});default:Nd(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return h_(e,r,"signUpPassword",iK);case"emailLink":return oK(e,{idToken:n,email:this._email,oobCode:this._password});default:Nd(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lK(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cK(t){const e=Ch(kh(t)).link,n=e?Ch(kh(e)).deep_link_id:null,r=Ch(kh(t)).deep_link_id;return(r?Ch(kh(r)).link:null)||r||n||e||t}class kE{constructor(e){const n=Ch(kh(e)),r=n.apiKey??null,i=n.oobCode??null,a=lK(n.mode??null);Pt(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=cK(e);try{return new kE(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(){this.providerId=_f.PROVIDER_ID}static credential(e,n){return Op._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=kE.parseLink(n);return Pt(r,"argument-error"),Op._fromEmailAndCode(e,r.code,r.tenantId)}}_f.PROVIDER_ID="password";_f.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_f.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uK(t,e){return ax(t,"POST","/v1/accounts:signUp",eu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await Fa._fromIdTokenResponse(e,r,i),s=eC(r);return new Ip({user:a,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=eC(r);return new Ip({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function eC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv extends bo{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,hv.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new hv(e,n,r,i)}}function dK(t,e,n,r){return n._getIdTokenResponse(t).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?hv._fromErrorAndOperation(t,a,e,r):a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fK(t,e,n=!1){if(us(t.app))return Promise.reject(kc(t));const r="signIn",i=await dK(t,r,e),a=await Ip._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function hK(t,e){return fK(Mm(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V5(t){const e=Mm(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function pK(t,e,n){if(us(t.app))return Promise.reject(kc(t));const r=Mm(t),s=await h_(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",uK).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&V5(t),l}),o=await Ip._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}function mK(t,e,n){return us(t.app)?Promise.reject(kc(t)):hK(yr(t),_f.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&V5(t),r})}function gK(t,e,n,r){return yr(t).onAuthStateChanged(e,n,r)}const tC="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(tC,"1"),this.storage.removeItem(tC),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yK=1e3,vK=10;class B5 extends F5{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BW(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,o,l)=>{this.notifyListeners(s,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},a=this.storage.getItem(r);FW()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,vK):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},yK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}B5.type="LOCAL";const xK=B5;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bK extends F5{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}bK.type="SESSION";new Dm(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Dm(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Dm(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Dm(5e3,15e3);var nC="@firebase/auth",rC="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wK{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Pt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _K(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SK(t){kd(new Fc("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;Pt(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:L5(t)},u=new HW(r,i,a,l);return nK(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),kd(new Fc("auth-internal",e=>{const n=Mm(e.getProvider("auth").getImmediate());return(r=>new wK(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),cl(nC,rC,_K(t)),cl(nC,rC,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EK=5*60;B7("authIdTokenMaxAge");function AK(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}GW({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=TE("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",AK().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SK("Browser");var jK="firebase",TK="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cl(jK,TK,"app");var iC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ul,U5;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,T){function N(){}N.prototype=T.prototype,S.F=T.prototype,S.prototype=new N,S.prototype.constructor=S,S.D=function(D,M,$){for(var z=Array(arguments.length-2),H=2;H<arguments.length;H++)z[H-2]=arguments[H];return T.prototype[M].apply(D,z)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,T,N){N||(N=0);const D=Array(16);if(typeof T=="string")for(var M=0;M<16;++M)D[M]=T.charCodeAt(N++)|T.charCodeAt(N++)<<8|T.charCodeAt(N++)<<16|T.charCodeAt(N++)<<24;else for(M=0;M<16;++M)D[M]=T[N++]|T[N++]<<8|T[N++]<<16|T[N++]<<24;T=S.g[0],N=S.g[1],M=S.g[2];let $=S.g[3],z;z=T+($^N&(M^$))+D[0]+3614090360&4294967295,T=N+(z<<7&4294967295|z>>>25),z=$+(M^T&(N^M))+D[1]+3905402710&4294967295,$=T+(z<<12&4294967295|z>>>20),z=M+(N^$&(T^N))+D[2]+606105819&4294967295,M=$+(z<<17&4294967295|z>>>15),z=N+(T^M&($^T))+D[3]+3250441966&4294967295,N=M+(z<<22&4294967295|z>>>10),z=T+($^N&(M^$))+D[4]+4118548399&4294967295,T=N+(z<<7&4294967295|z>>>25),z=$+(M^T&(N^M))+D[5]+1200080426&4294967295,$=T+(z<<12&4294967295|z>>>20),z=M+(N^$&(T^N))+D[6]+2821735955&4294967295,M=$+(z<<17&4294967295|z>>>15),z=N+(T^M&($^T))+D[7]+4249261313&4294967295,N=M+(z<<22&4294967295|z>>>10),z=T+($^N&(M^$))+D[8]+1770035416&4294967295,T=N+(z<<7&4294967295|z>>>25),z=$+(M^T&(N^M))+D[9]+2336552879&4294967295,$=T+(z<<12&4294967295|z>>>20),z=M+(N^$&(T^N))+D[10]+4294925233&4294967295,M=$+(z<<17&4294967295|z>>>15),z=N+(T^M&($^T))+D[11]+2304563134&4294967295,N=M+(z<<22&4294967295|z>>>10),z=T+($^N&(M^$))+D[12]+1804603682&4294967295,T=N+(z<<7&4294967295|z>>>25),z=$+(M^T&(N^M))+D[13]+4254626195&4294967295,$=T+(z<<12&4294967295|z>>>20),z=M+(N^$&(T^N))+D[14]+2792965006&4294967295,M=$+(z<<17&4294967295|z>>>15),z=N+(T^M&($^T))+D[15]+1236535329&4294967295,N=M+(z<<22&4294967295|z>>>10),z=T+(M^$&(N^M))+D[1]+4129170786&4294967295,T=N+(z<<5&4294967295|z>>>27),z=$+(N^M&(T^N))+D[6]+3225465664&4294967295,$=T+(z<<9&4294967295|z>>>23),z=M+(T^N&($^T))+D[11]+643717713&4294967295,M=$+(z<<14&4294967295|z>>>18),z=N+($^T&(M^$))+D[0]+3921069994&4294967295,N=M+(z<<20&4294967295|z>>>12),z=T+(M^$&(N^M))+D[5]+3593408605&4294967295,T=N+(z<<5&4294967295|z>>>27),z=$+(N^M&(T^N))+D[10]+38016083&4294967295,$=T+(z<<9&4294967295|z>>>23),z=M+(T^N&($^T))+D[15]+3634488961&4294967295,M=$+(z<<14&4294967295|z>>>18),z=N+($^T&(M^$))+D[4]+3889429448&4294967295,N=M+(z<<20&4294967295|z>>>12),z=T+(M^$&(N^M))+D[9]+568446438&4294967295,T=N+(z<<5&4294967295|z>>>27),z=$+(N^M&(T^N))+D[14]+3275163606&4294967295,$=T+(z<<9&4294967295|z>>>23),z=M+(T^N&($^T))+D[3]+4107603335&4294967295,M=$+(z<<14&4294967295|z>>>18),z=N+($^T&(M^$))+D[8]+1163531501&4294967295,N=M+(z<<20&4294967295|z>>>12),z=T+(M^$&(N^M))+D[13]+2850285829&4294967295,T=N+(z<<5&4294967295|z>>>27),z=$+(N^M&(T^N))+D[2]+4243563512&4294967295,$=T+(z<<9&4294967295|z>>>23),z=M+(T^N&($^T))+D[7]+1735328473&4294967295,M=$+(z<<14&4294967295|z>>>18),z=N+($^T&(M^$))+D[12]+2368359562&4294967295,N=M+(z<<20&4294967295|z>>>12),z=T+(N^M^$)+D[5]+4294588738&4294967295,T=N+(z<<4&4294967295|z>>>28),z=$+(T^N^M)+D[8]+2272392833&4294967295,$=T+(z<<11&4294967295|z>>>21),z=M+($^T^N)+D[11]+1839030562&4294967295,M=$+(z<<16&4294967295|z>>>16),z=N+(M^$^T)+D[14]+4259657740&4294967295,N=M+(z<<23&4294967295|z>>>9),z=T+(N^M^$)+D[1]+2763975236&4294967295,T=N+(z<<4&4294967295|z>>>28),z=$+(T^N^M)+D[4]+1272893353&4294967295,$=T+(z<<11&4294967295|z>>>21),z=M+($^T^N)+D[7]+4139469664&4294967295,M=$+(z<<16&4294967295|z>>>16),z=N+(M^$^T)+D[10]+3200236656&4294967295,N=M+(z<<23&4294967295|z>>>9),z=T+(N^M^$)+D[13]+681279174&4294967295,T=N+(z<<4&4294967295|z>>>28),z=$+(T^N^M)+D[0]+3936430074&4294967295,$=T+(z<<11&4294967295|z>>>21),z=M+($^T^N)+D[3]+3572445317&4294967295,M=$+(z<<16&4294967295|z>>>16),z=N+(M^$^T)+D[6]+76029189&4294967295,N=M+(z<<23&4294967295|z>>>9),z=T+(N^M^$)+D[9]+3654602809&4294967295,T=N+(z<<4&4294967295|z>>>28),z=$+(T^N^M)+D[12]+3873151461&4294967295,$=T+(z<<11&4294967295|z>>>21),z=M+($^T^N)+D[15]+530742520&4294967295,M=$+(z<<16&4294967295|z>>>16),z=N+(M^$^T)+D[2]+3299628645&4294967295,N=M+(z<<23&4294967295|z>>>9),z=T+(M^(N|~$))+D[0]+4096336452&4294967295,T=N+(z<<6&4294967295|z>>>26),z=$+(N^(T|~M))+D[7]+1126891415&4294967295,$=T+(z<<10&4294967295|z>>>22),z=M+(T^($|~N))+D[14]+2878612391&4294967295,M=$+(z<<15&4294967295|z>>>17),z=N+($^(M|~T))+D[5]+4237533241&4294967295,N=M+(z<<21&4294967295|z>>>11),z=T+(M^(N|~$))+D[12]+1700485571&4294967295,T=N+(z<<6&4294967295|z>>>26),z=$+(N^(T|~M))+D[3]+2399980690&4294967295,$=T+(z<<10&4294967295|z>>>22),z=M+(T^($|~N))+D[10]+4293915773&4294967295,M=$+(z<<15&4294967295|z>>>17),z=N+($^(M|~T))+D[1]+2240044497&4294967295,N=M+(z<<21&4294967295|z>>>11),z=T+(M^(N|~$))+D[8]+1873313359&4294967295,T=N+(z<<6&4294967295|z>>>26),z=$+(N^(T|~M))+D[15]+4264355552&4294967295,$=T+(z<<10&4294967295|z>>>22),z=M+(T^($|~N))+D[6]+2734768916&4294967295,M=$+(z<<15&4294967295|z>>>17),z=N+($^(M|~T))+D[13]+1309151649&4294967295,N=M+(z<<21&4294967295|z>>>11),z=T+(M^(N|~$))+D[4]+4149444226&4294967295,T=N+(z<<6&4294967295|z>>>26),z=$+(N^(T|~M))+D[11]+3174756917&4294967295,$=T+(z<<10&4294967295|z>>>22),z=M+(T^($|~N))+D[2]+718787259&4294967295,M=$+(z<<15&4294967295|z>>>17),z=N+($^(M|~T))+D[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+(M+(z<<21&4294967295|z>>>11))&4294967295,S.g[2]=S.g[2]+M&4294967295,S.g[3]=S.g[3]+$&4294967295}r.prototype.v=function(S,T){T===void 0&&(T=S.length);const N=T-this.blockSize,D=this.C;let M=this.h,$=0;for(;$<T;){if(M==0)for(;$<=N;)i(this,S,$),$+=this.blockSize;if(typeof S=="string"){for(;$<T;)if(D[M++]=S.charCodeAt($++),M==this.blockSize){i(this,D),M=0;break}}else for(;$<T;)if(D[M++]=S[$++],M==this.blockSize){i(this,D),M=0;break}}this.h=M,this.o+=T},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;T=this.o*8;for(var N=S.length-8;N<S.length;++N)S[N]=T&255,T/=256;for(this.v(S),S=Array(16),T=0,N=0;N<4;++N)for(let D=0;D<32;D+=8)S[T++]=this.g[N]>>>D&255;return S};function a(S,T){var N=o;return Object.prototype.hasOwnProperty.call(N,S)?N[S]:N[S]=T(S)}function s(S,T){this.h=T;const N=[];let D=!0;for(let M=S.length-1;M>=0;M--){const $=S[M]|0;D&&$==T||(N[M]=$,D=!1)}this.g=N}var o={};function l(S){return-128<=S&&S<128?a(S,function(T){return new s([T|0],T<0?-1:0)}):new s([S|0],S<0?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return d;if(S<0)return b(u(-S));const T=[];let N=1;for(let D=0;S>=N;D++)T[D]=S/N|0,N*=4294967296;return new s(T,0)}function f(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return b(f(S.substring(1),T));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=u(Math.pow(T,8));let D=d;for(let $=0;$<S.length;$+=8){var M=Math.min(8,S.length-$);const z=parseInt(S.substring($,$+M),T);M<8?(M=u(Math.pow(T,M)),D=D.j(M).add(u(z))):(D=D.j(N),D=D.add(u(z)))}return D}var d=l(0),h=l(1),p=l(16777216);t=s.prototype,t.m=function(){if(y(this))return-b(this).m();let S=0,T=1;for(let N=0;N<this.g.length;N++){const D=this.i(N);S+=(D>=0?D:4294967296+D)*T,T*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(v(this))return"0";if(y(this))return"-"+b(this).toString(S);const T=u(Math.pow(S,6));var N=this;let D="";for(;;){const M=P(N,T).g;N=x(N,M.j(T));let $=((N.g.length>0?N.g[0]:N.h)>>>0).toString(S);if(N=M,v(N))return $+D;for(;$.length<6;)$="0"+$;D=$+D}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function v(S){if(S.h!=0)return!1;for(let T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function y(S){return S.h==-1}t.l=function(S){return S=x(this,S),y(S)?-1:v(S)?0:1};function b(S){const T=S.g.length,N=[];for(let D=0;D<T;D++)N[D]=~S.g[D];return new s(N,~S.h).add(h)}t.abs=function(){return y(this)?b(this):this},t.add=function(S){const T=Math.max(this.g.length,S.g.length),N=[];let D=0;for(let M=0;M<=T;M++){let $=D+(this.i(M)&65535)+(S.i(M)&65535),z=($>>>16)+(this.i(M)>>>16)+(S.i(M)>>>16);D=z>>>16,$&=65535,z&=65535,N[M]=z<<16|$}return new s(N,N[N.length-1]&-2147483648?-1:0)};function x(S,T){return S.add(b(T))}t.j=function(S){if(v(this)||v(S))return d;if(y(this))return y(S)?b(this).j(b(S)):b(b(this).j(S));if(y(S))return b(this.j(b(S)));if(this.l(p)<0&&S.l(p)<0)return u(this.m()*S.m());const T=this.g.length+S.g.length,N=[];for(var D=0;D<2*T;D++)N[D]=0;for(D=0;D<this.g.length;D++)for(let M=0;M<S.g.length;M++){const $=this.i(D)>>>16,z=this.i(D)&65535,H=S.i(M)>>>16,ee=S.i(M)&65535;N[2*D+2*M]+=z*ee,_(N,2*D+2*M),N[2*D+2*M+1]+=$*ee,_(N,2*D+2*M+1),N[2*D+2*M+1]+=z*H,_(N,2*D+2*M+1),N[2*D+2*M+2]+=$*H,_(N,2*D+2*M+2)}for(S=0;S<T;S++)N[S]=N[2*S+1]<<16|N[2*S];for(S=T;S<2*T;S++)N[S]=0;return new s(N,0)};function _(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function E(S,T){this.g=S,this.h=T}function P(S,T){if(v(T))throw Error("division by zero");if(v(S))return new E(d,d);if(y(S))return T=P(b(S),T),new E(b(T.g),b(T.h));if(y(T))return T=P(S,b(T)),new E(b(T.g),T.h);if(S.g.length>30){if(y(S)||y(T))throw Error("slowDivide_ only works with positive integers.");for(var N=h,D=T;D.l(S)<=0;)N=A(N),D=A(D);var M=j(N,1),$=j(D,1);for(D=j(D,2),N=j(N,2);!v(D);){var z=$.add(D);z.l(S)<=0&&(M=M.add(N),$=z),D=j(D,1),N=j(N,1)}return T=x(S,M.j(T)),new E(M,T)}for(M=d;S.l(T)>=0;){for(N=Math.max(1,Math.floor(S.m()/T.m())),D=Math.ceil(Math.log(N)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),$=u(N),z=$.j(T);y(z)||z.l(S)>0;)N-=D,$=u(N),z=$.j(T);v($)&&($=h),M=M.add($),S=x(S,z)}return new E(M,S)}t.B=function(S){return P(this,S).h},t.and=function(S){const T=Math.max(this.g.length,S.g.length),N=[];for(let D=0;D<T;D++)N[D]=this.i(D)&S.i(D);return new s(N,this.h&S.h)},t.or=function(S){const T=Math.max(this.g.length,S.g.length),N=[];for(let D=0;D<T;D++)N[D]=this.i(D)|S.i(D);return new s(N,this.h|S.h)},t.xor=function(S){const T=Math.max(this.g.length,S.g.length),N=[];for(let D=0;D<T;D++)N[D]=this.i(D)^S.i(D);return new s(N,this.h^S.h)};function A(S){const T=S.g.length+1,N=[];for(let D=0;D<T;D++)N[D]=S.i(D)<<1|S.i(D-1)>>>31;return new s(N,S.h)}function j(S,T){const N=T>>5;T%=32;const D=S.g.length-N,M=[];for(let $=0;$<D;$++)M[$]=T>0?S.i($+N)>>>T|S.i($+N+1)<<32-T:S.i($+N);return new s(M,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,U5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=f,ul=s}).apply(typeof iC<"u"?iC:typeof self<"u"?self:typeof window<"u"?window:{});var Kg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var W5,Nh,K5,Py,p_,q5,H5,G5;(function(){var t,e=Object.defineProperty;function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kg=="object"&&Kg];for(var k=0;k<m.length;++k){var R=m[k];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var r=n(this);function i(m,k){if(k)e:{var R=r;m=m.split(".");for(var B=0;B<m.length-1;B++){var oe=m[B];if(!(oe in R))break e;R=R[oe]}m=m[m.length-1],B=R[m],k=k(B),k!=B&&k!=null&&e(R,m,{configurable:!0,writable:!0,value:k})}}i("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(m){return m||function(k){var R=[],B;for(B in k)Object.prototype.hasOwnProperty.call(k,B)&&R.push([B,k[B]]);return R}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},s=this||self;function o(m){var k=typeof m;return k=="object"&&m!=null||k=="function"}function l(m,k,R){return m.call.apply(m.bind,arguments)}function u(m,k,R){return u=l,u.apply(null,arguments)}function f(m,k){var R=Array.prototype.slice.call(arguments,1);return function(){var B=R.slice();return B.push.apply(B,arguments),m.apply(this,B)}}function d(m,k){function R(){}R.prototype=k.prototype,m.Z=k.prototype,m.prototype=new R,m.prototype.constructor=m,m.Ob=function(B,oe,ue){for(var ke=Array(arguments.length-2),pt=2;pt<arguments.length;pt++)ke[pt-2]=arguments[pt];return k.prototype[oe].apply(B,ke)}}var h=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function p(m){const k=m.length;if(k>0){const R=Array(k);for(let B=0;B<k;B++)R[B]=m[B];return R}return[]}function v(m,k){for(let B=1;B<arguments.length;B++){const oe=arguments[B];var R=typeof oe;if(R=R!="object"?R:oe?Array.isArray(oe)?"array":R:"null",R=="array"||R=="object"&&typeof oe.length=="number"){R=m.length||0;const ue=oe.length||0;m.length=R+ue;for(let ke=0;ke<ue;ke++)m[R+ke]=oe[ke]}else m.push(oe)}}class y{constructor(k,R){this.i=k,this.j=R,this.h=0,this.g=null}get(){let k;return this.h>0?(this.h--,k=this.g,this.g=k.next,k.next=null):k=this.i(),k}}function b(m){s.setTimeout(()=>{throw m},0)}function x(){var m=S;let k=null;return m.g&&(k=m.g,m.g=m.g.next,m.g||(m.h=null),k.next=null),k}class _{constructor(){this.h=this.g=null}add(k,R){const B=E.get();B.set(k,R),this.h?this.h.next=B:this.g=B,this.h=B}}var E=new y(()=>new P,m=>m.reset());class P{constructor(){this.next=this.g=this.h=null}set(k,R){this.h=k,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let A,j=!1,S=new _,T=()=>{const m=Promise.resolve(void 0);A=()=>{m.then(N)}};function N(){for(var m;m=x();){try{m.h.call(m.g)}catch(R){b(R)}var k=E;k.j(m),k.h<100&&(k.h++,m.next=k.g,k.g=m)}j=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(m,k){this.type=m,this.g=this.target=k,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var $=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var m=!1,k=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const R=()=>{};s.addEventListener("test",R,k),s.removeEventListener("test",R,k)}catch{}return m}();function z(m){return/^[\s\xa0]*$/.test(m)}function H(m,k){M.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,k)}d(H,M),H.prototype.init=function(m,k){const R=this.type=m.type,B=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=k,k=m.relatedTarget,k||(R=="mouseover"?k=m.fromElement:R=="mouseout"&&(k=m.toElement)),this.relatedTarget=k,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&H.Z.h.call(this)},H.prototype.h=function(){H.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var ee="closure_listenable_"+(Math.random()*1e6|0),U=0;function Z(m,k,R,B,oe){this.listener=m,this.proxy=null,this.src=k,this.type=R,this.capture=!!B,this.ha=oe,this.key=++U,this.da=this.fa=!1}function q(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Y(m,k,R){for(const B in m)k.call(R,m[B],B,m)}function le(m,k){for(const R in m)k.call(void 0,m[R],R,m)}function ce(m){const k={};for(const R in m)k[R]=m[R];return k}const ye="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ee(m,k){let R,B;for(let oe=1;oe<arguments.length;oe++){B=arguments[oe];for(R in B)m[R]=B[R];for(let ue=0;ue<ye.length;ue++)R=ye[ue],Object.prototype.hasOwnProperty.call(B,R)&&(m[R]=B[R])}}function He(m){this.src=m,this.g={},this.h=0}He.prototype.add=function(m,k,R,B,oe){const ue=m.toString();m=this.g[ue],m||(m=this.g[ue]=[],this.h++);const ke=ft(m,k,B,oe);return ke>-1?(k=m[ke],R||(k.fa=!1)):(k=new Z(k,this.src,ue,!!B,oe),k.fa=R,m.push(k)),k};function ct(m,k){const R=k.type;if(R in m.g){var B=m.g[R],oe=Array.prototype.indexOf.call(B,k,void 0),ue;(ue=oe>=0)&&Array.prototype.splice.call(B,oe,1),ue&&(q(k),m.g[R].length==0&&(delete m.g[R],m.h--))}}function ft(m,k,R,B){for(let oe=0;oe<m.length;++oe){const ue=m[oe];if(!ue.da&&ue.listener==k&&ue.capture==!!R&&ue.ha==B)return oe}return-1}var It="closure_lm_"+(Math.random()*1e6|0),Dt={};function fe(m,k,R,B,oe){if(Array.isArray(k)){for(let ue=0;ue<k.length;ue++)fe(m,k[ue],R,B,oe);return null}return R=Ht(R),m&&m[ee]?m.J(k,R,o(B)?!!B.capture:!1,oe):Qe(m,k,R,!1,B,oe)}function Qe(m,k,R,B,oe,ue){if(!k)throw Error("Invalid event type");const ke=o(oe)?!!oe.capture:!!oe;let pt=Ze(m);if(pt||(m[It]=pt=new He(m)),R=pt.add(k,R,B,ke,ue),R.proxy)return R;if(B=Ye(),R.proxy=B,B.src=m,B.listener=R,m.addEventListener)$||(oe=ke),oe===void 0&&(oe=!1),m.addEventListener(k.toString(),B,oe);else if(m.attachEvent)m.attachEvent(Le(k.toString()),B);else if(m.addListener&&m.removeListener)m.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return R}function Ye(){function m(R){return k.call(m.src,m.listener,R)}const k=_e;return m}function he(m,k,R,B,oe){if(Array.isArray(k))for(var ue=0;ue<k.length;ue++)he(m,k[ue],R,B,oe);else B=o(B)?!!B.capture:!!B,R=Ht(R),m&&m[ee]?(m=m.i,ue=String(k).toString(),ue in m.g&&(k=m.g[ue],R=ft(k,R,B,oe),R>-1&&(q(k[R]),Array.prototype.splice.call(k,R,1),k.length==0&&(delete m.g[ue],m.h--)))):m&&(m=Ze(m))&&(k=m.g[k.toString()],m=-1,k&&(m=ft(k,R,B,oe)),(R=m>-1?k[m]:null)&&Se(R))}function Se(m){if(typeof m!="number"&&m&&!m.da){var k=m.src;if(k&&k[ee])ct(k.i,m);else{var R=m.type,B=m.proxy;k.removeEventListener?k.removeEventListener(R,B,m.capture):k.detachEvent?k.detachEvent(Le(R),B):k.addListener&&k.removeListener&&k.removeListener(B),(R=Ze(k))?(ct(R,m),R.h==0&&(R.src=null,k[It]=null)):q(m)}}}function Le(m){return m in Dt?Dt[m]:Dt[m]="on"+m}function _e(m,k){if(m.da)m=!0;else{k=new H(k,this);const R=m.listener,B=m.ha||m.src;m.fa&&Se(m),m=R.call(B,k)}return m}function Ze(m){return m=m[It],m instanceof He?m:null}var qt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ht(m){return typeof m=="function"?m:(m[qt]||(m[qt]=function(k){return m.handleEvent(k)}),m[qt])}function kt(){D.call(this),this.i=new He(this),this.M=this,this.G=null}d(kt,D),kt.prototype[ee]=!0,kt.prototype.removeEventListener=function(m,k,R,B){he(this,m,k,R,B)};function Mt(m,k){var R,B=m.G;if(B)for(R=[];B;B=B.G)R.push(B);if(m=m.M,B=k.type||k,typeof k=="string")k=new M(k,m);else if(k instanceof M)k.target=k.target||m;else{var oe=k;k=new M(B,m),Ee(k,oe)}oe=!0;let ue,ke;if(R)for(ke=R.length-1;ke>=0;ke--)ue=k.g=R[ke],oe=Rt(ue,B,!0,k)&&oe;if(ue=k.g=m,oe=Rt(ue,B,!0,k)&&oe,oe=Rt(ue,B,!1,k)&&oe,R)for(ke=0;ke<R.length;ke++)ue=k.g=R[ke],oe=Rt(ue,B,!1,k)&&oe}kt.prototype.N=function(){if(kt.Z.N.call(this),this.i){var m=this.i;for(const k in m.g){const R=m.g[k];for(let B=0;B<R.length;B++)q(R[B]);delete m.g[k],m.h--}}this.G=null},kt.prototype.J=function(m,k,R,B){return this.i.add(String(m),k,!1,R,B)},kt.prototype.K=function(m,k,R,B){return this.i.add(String(m),k,!0,R,B)};function Rt(m,k,R,B){if(k=m.i.g[String(k)],!k)return!0;k=k.concat();let oe=!0;for(let ue=0;ue<k.length;++ue){const ke=k[ue];if(ke&&!ke.da&&ke.capture==R){const pt=ke.listener,bn=ke.ha||ke.src;ke.fa&&ct(m.i,ke),oe=pt.call(bn,B)!==!1&&oe}}return oe&&!B.defaultPrevented}function In(m,k){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=u(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(k)>2147483647?-1:s.setTimeout(m,k||0)}function Vn(m){m.g=In(()=>{m.g=null,m.i&&(m.i=!1,Vn(m))},m.l);const k=m.h;m.h=null,m.m.apply(null,k)}class Wr extends D{constructor(k,R){super(),this.m=k,this.l=R,this.h=null,this.i=!1,this.g=null}j(k){this.h=arguments,this.g?this.i=!0:Vn(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fn(m){D.call(this),this.h=m,this.g={}}d(Fn,D);var Cr=[];function Tt(m){Y(m.g,function(k,R){this.g.hasOwnProperty(R)&&Se(k)},m),m.g={}}Fn.prototype.N=function(){Fn.Z.N.call(this),Tt(this)},Fn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vn=s.JSON.stringify,Kr=s.JSON.parse,va=class{stringify(m){return s.JSON.stringify(m,void 0)}parse(m){return s.JSON.parse(m,void 0)}};function Ti(){}function ri(){}var ii={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function xa(){M.call(this,"d")}d(xa,M);function kr(){M.call(this,"c")}d(kr,M);var ze={},xe=null;function We(){return xe=xe||new kt}ze.Ia="serverreachability";function Ue(m){M.call(this,ze.Ia,m)}d(Ue,M);function be(m){const k=We();Mt(k,new Ue(k))}ze.STAT_EVENT="statevent";function Ne(m,k){M.call(this,ze.STAT_EVENT,m),this.stat=k}d(Ne,M);function Ke(m){const k=We();Mt(k,new Ne(k,m))}ze.Ja="timingevent";function rt(m,k){M.call(this,ze.Ja,m),this.size=k}d(rt,M);function Je(m,k){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){m()},k)}function cr(){this.g=!0}cr.prototype.ua=function(){this.g=!1};function Ns(m,k,R,B,oe,ue){m.info(function(){if(m.g)if(ue){var ke="",pt=ue.split("&");for(let Nt=0;Nt<pt.length;Nt++){var bn=pt[Nt].split("=");if(bn.length>1){const Un=bn[0];bn=bn[1];const ui=Un.split("_");ke=ui.length>=2&&ui[1]=="type"?ke+(Un+"="+bn+"&"):ke+(Un+"=redacted&")}}}else ke=null;else ke=ue;return"XMLHTTP REQ ("+B+") [attempt "+oe+"]: "+k+`
`+R+`
`+ke})}function ai(m,k,R,B,oe,ue,ke){m.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+oe+"]: "+k+`
`+R+`
`+ue+" "+ke})}function fn(m,k,R,B){m.info(function(){return"XMLHTTP TEXT ("+k+"): "+Os(m,R)+(B?" "+B:"")})}function Dn(m,k){m.info(function(){return"TIMEOUT: "+k})}cr.prototype.info=function(){};function Os(m,k){if(!m.g)return k;if(!k)return null;try{const ue=JSON.parse(k);if(ue){for(m=0;m<ue.length;m++)if(Array.isArray(ue[m])){var R=ue[m];if(!(R.length<2)){var B=R[1];if(Array.isArray(B)&&!(B.length<1)){var oe=B[0];if(oe!="noop"&&oe!="stop"&&oe!="close")for(let ke=1;ke<B.length;ke++)B[ke]=""}}}}return vn(ue)}catch{return k}}var ba={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ft={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xn;function Yf(){}d(Yf,Ti),Yf.prototype.g=function(){return new XMLHttpRequest},xn=new Yf;function Qa(m){return encodeURIComponent(String(m))}function fu(m){var k=1;m=m.split(":");const R=[];for(;k>0&&m.length;)R.push(m.shift()),k--;return m.length&&R.push(m.join(":")),R}function Pi(m,k,R,B){this.j=m,this.i=k,this.l=R,this.S=B||1,this.V=new Fn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new dg}function dg(){this.i=null,this.g="",this.h=!1}var wa={},Za={};function Yi(m,k,R){m.M=1,m.A=es(ki(k)),m.u=R,m.R=!0,Fl(m,null)}function Fl(m,k){m.F=Date.now(),Xi(m),m.B=ki(m.A);var R=m.B,B=m.S;Array.isArray(B)||(B=[String(B)]),yg(R.i,"t",B),m.C=0,R=m.j.L,m.h=new dg,m.g=Io(m.j,R?k:null,!m.u),m.P>0&&(m.O=new Wr(u(m.Y,m,m.g),m.P)),k=m.V,R=m.g,B=m.ba;var oe="readystatechange";Array.isArray(oe)||(oe&&(Cr[0]=oe.toString()),oe=Cr);for(let ue=0;ue<oe.length;ue++){const ke=fe(R,oe[ue],B||k.handleEvent,!1,k.h||k);if(!ke)break;k.g[ke.key]=ke}k=m.J?ce(m.J):{},m.u?(m.v||(m.v="POST"),k["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,k)):(m.v="GET",m.g.ea(m.B,m.v,null,k)),be(),Ns(m.i,m.v,m.B,m.l,m.S,m.u)}Pi.prototype.ba=function(m){m=m.target;const k=this.O;k&&ci(m)==3?k.j():this.Y(m)},Pi.prototype.Y=function(m){try{if(m==this.g)e:{const pt=ci(this.g),bn=this.g.ya(),Nt=this.g.ca();if(!(pt<3)&&(pt!=3||this.g&&(this.h.h||this.g.la()||wg(this.g)))){this.K||pt!=4||bn==7||(bn==8||Nt<=0?be(3):be(2)),Bl(this);var k=this.g.ca();this.X=k;var R=Tb(this);if(this.o=k==200,ai(this.i,this.v,this.B,this.l,this.S,pt,k),this.o){if(this.U&&!this.L){t:{if(this.g){var B,oe=this.g;if((B=oe.g?oe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(B)){var ue=B;break t}}ue=null}if(m=ue)fn(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ci(this,m);else{this.o=!1,this.m=3,Ke(12),qr(this),Xt(this);break e}}if(this.R){m=!0;let Un;for(;!this.K&&this.C<R.length;)if(Un=fg(this,R),Un==Za){pt==4&&(this.m=4,Ke(14),m=!1),fn(this.i,this.l,null,"[Incomplete Response]");break}else if(Un==wa){this.m=4,Ke(15),fn(this.i,this.l,R,"[Invalid Chunk]"),m=!1;break}else fn(this.i,this.l,Un,null),Ci(this,Un);if(_a(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||R.length!=0||this.h.h||(this.m=1,Ke(16),m=!1),this.o=this.o&&m,!m)fn(this.i,this.l,R,"[Invalid Chunked Response]"),qr(this),Xt(this);else if(R.length>0&&!this.W){this.W=!0;var ke=this.j;ke.g==this&&ke.aa&&!ke.P&&(ke.j.info("Great, no buffering proxy detected. Bytes received: "+R.length),wu(ke),ke.P=!0,Ke(11))}}else fn(this.i,this.l,R,null),Ci(this,R);pt==4&&qr(this),this.o&&!this.K&&(pt==4?_u(this.j,this):(this.o=!1,Xi(this)))}else Pb(this.g),k==400&&R.indexOf("Unknown SID")>0?(this.m=3,Ke(12)):(this.m=0,Ke(13)),qr(this),Xt(this)}}}catch{}finally{}};function Tb(m){if(!_a(m))return m.g.la();const k=wg(m.g);if(k==="")return"";let R="";const B=k.length,oe=ci(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return qr(m),Xt(m),"";m.h.i=new s.TextDecoder}for(let ue=0;ue<B;ue++)m.h.h=!0,R+=m.h.i.decode(k[ue],{stream:!(oe&&ue==B-1)});return k.length=0,m.h.g+=R,m.C=0,m.h.g}function _a(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function fg(m,k){var R=m.C,B=k.indexOf(`
`,R);return B==-1?Za:(R=Number(k.substring(R,B)),isNaN(R)?wa:(B+=1,B+R>k.length?Za:(k=k.slice(B,B+R),m.C=B+R,k)))}Pi.prototype.cancel=function(){this.K=!0,qr(this)};function Xi(m){m.T=Date.now()+m.H,Xf(m,m.H)}function Xf(m,k){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Je(u(m.aa,m),k)}function Bl(m){m.D&&(s.clearTimeout(m.D),m.D=null)}Pi.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Dn(this.i,this.B),this.M!=2&&(be(),Ke(17)),qr(this),this.m=2,Xt(this)):Xf(this,this.T-m)};function Xt(m){m.j.I==0||m.K||_u(m.j,m)}function qr(m){Bl(m);var k=m.O;k&&typeof k.dispose=="function"&&k.dispose(),m.O=null,Tt(m.V),m.g&&(k=m.g,m.g=null,k.abort(),k.dispose())}function Ci(m,k){try{var R=m.j;if(R.I!=0&&(R.g==m||Wl(R.h,m))){if(!m.L&&Wl(R.h,m)&&R.I==3){try{var B=R.Ba.g.parse(k)}catch{B=null}if(Array.isArray(B)&&B.length==3){var oe=B;if(oe[0]==0){e:if(!R.v){if(R.g)if(R.g.F+3e3<m.F)ja(R),vu(R);else break e;Oo(R),Ke(18)}}else R.xa=oe[1],0<R.xa-R.K&&oe[2]<37500&&R.F&&R.A==0&&!R.C&&(R.C=Je(u(R.Va,R),6e3));hu(R.h)<=1&&R.ta&&(R.ta=void 0)}else Ta(R,11)}else if((m.L||R.g==m)&&ja(R),!z(k))for(oe=R.Ba.g.parse(k),k=0;k<oe.length;k++){let Nt=oe[k];const Un=Nt[0];if(!(Un<=R.K))if(R.K=Un,Nt=Nt[1],R.I==2)if(Nt[0]=="c"){R.M=Nt[1],R.ba=Nt[2];const ui=Nt[3];ui!=null&&(R.ka=ui,R.j.info("VER="+R.ka));const Ca=Nt[4];Ca!=null&&(R.za=Ca,R.j.info("SVER="+R.za));const is=Nt[5];is!=null&&typeof is=="number"&&is>0&&(B=1.5*is,R.O=B,R.j.info("backChannelRequestTimeoutMs_="+B)),B=R;const ka=m.g;if(ka){const Au=ka.g?ka.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Au){var ue=B.h;ue.g||Au.indexOf("spdy")==-1&&Au.indexOf("quic")==-1&&Au.indexOf("h2")==-1||(ue.j=ue.l,ue.g=new Set,ue.h&&(Sa(ue,ue.h),ue.h=null))}if(B.G){const ju=ka.g?ka.g.getResponseHeader("X-HTTP-Session-Id"):null;ju&&(B.wa=ju,$t(B.J,B.G,ju))}}R.I=3,R.l&&R.l.ra(),R.aa&&(R.T=Date.now()-m.F,R.j.info("Handshake RTT: "+R.T+"ms")),B=R;var ke=m;if(B.na=Qn(B,B.L?B.ba:null,B.W),ke.L){Qf(B.h,ke);var pt=ke,bn=B.O;bn&&(pt.H=bn),pt.D&&(Bl(pt),Xi(pt)),B.g=ke}else Ql(B);R.i.length>0&&xu(R)}else Nt[0]!="stop"&&Nt[0]!="close"||Ta(R,7);else R.I==3&&(Nt[0]=="stop"||Nt[0]=="close"?Nt[0]=="stop"?Ta(R,7):Yl(R):Nt[0]!="noop"&&R.l&&R.l.qa(Nt),R.A=0)}}be(4)}catch{}}var hg=class{constructor(m,k){this.g=m,this.map=k}};function Is(m){this.l=m||10,s.PerformanceNavigationTiming?(m=s.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ul(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function hu(m){return m.h?1:m.g?m.g.size:0}function Wl(m,k){return m.h?m.h==k:m.g?m.g.has(k):!1}function Sa(m,k){m.g?m.g.add(k):m.h=k}function Qf(m,k){m.h&&m.h==k?m.h=null:m.g&&m.g.has(k)&&m.g.delete(k)}Is.prototype.cancel=function(){if(this.i=Kl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Kl(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let k=m.i;for(const R of m.g.values())k=k.concat(R.G);return k}return p(m.i)}var Zf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vt(m,k){if(m){m=m.split("&");for(let R=0;R<m.length;R++){const B=m[R].indexOf("=");let oe,ue=null;B>=0?(oe=m[R].substring(0,B),ue=m[R].substring(B+1)):oe=m[R],k(oe,ue?decodeURIComponent(ue.replace(/\+/g," ")):"")}}}function Ea(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let k;m instanceof Ea?(this.l=m.l,Ja(this,m.j),this.o=m.o,this.g=m.g,To(this,m.u),this.h=m.h,Bt(this,Nr(m.i)),this.m=m.m):m&&(k=String(m).match(Zf))?(this.l=!1,Ja(this,k[1]||"",!0),this.o=Qi(k[2]||""),this.g=Qi(k[3]||"",!0),To(this,k[4]),this.h=Qi(k[5]||"",!0),Bt(this,k[6]||"",!0),this.m=Qi(k[7]||"")):(this.l=!1,this.i=new Po(null,this.l))}Ea.prototype.toString=function(){const m=[];var k=this.j;k&&m.push(Ds(k,ql,!0),":");var R=this.g;return(R||k=="file")&&(m.push("//"),(k=this.o)&&m.push(Ds(k,ql,!0),"@"),m.push(Qa(R).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.u,R!=null&&m.push(":",String(R))),(R=this.h)&&(this.g&&R.charAt(0)!="/"&&m.push("/"),m.push(Ds(R,R.charAt(0)=="/"?pu:pg,!0))),(R=this.i.toString())&&m.push("?",R),(R=this.m)&&m.push("#",Ds(R,Hl)),m.join("")},Ea.prototype.resolve=function(m){const k=ki(this);let R=!!m.j;R?Ja(k,m.j):R=!!m.o,R?k.o=m.o:R=!!m.g,R?k.g=m.g:R=m.u!=null;var B=m.h;if(R)To(k,m.u);else if(R=!!m.h){if(B.charAt(0)!="/")if(this.g&&!this.h)B="/"+B;else{var oe=k.h.lastIndexOf("/");oe!=-1&&(B=k.h.slice(0,oe+1)+B)}if(oe=B,oe==".."||oe==".")B="";else if(oe.indexOf("./")!=-1||oe.indexOf("/.")!=-1){B=oe.lastIndexOf("/",0)==0,oe=oe.split("/");const ue=[];for(let ke=0;ke<oe.length;){const pt=oe[ke++];pt=="."?B&&ke==oe.length&&ue.push(""):pt==".."?((ue.length>1||ue.length==1&&ue[0]!="")&&ue.pop(),B&&ke==oe.length&&ue.push("")):(ue.push(pt),B=!0)}B=ue.join("/")}else B=oe}return R?k.h=B:R=m.i.toString()!=="",R?Bt(k,Nr(m.i)):R=!!m.m,R&&(k.m=m.m),k};function ki(m){return new Ea(m)}function Ja(m,k,R){m.j=R?Qi(k,!0):k,m.j&&(m.j=m.j.replace(/:$/,""))}function To(m,k){if(k){if(k=Number(k),isNaN(k)||k<0)throw Error("Bad port number "+k);m.u=k}else m.u=null}function Bt(m,k,R){k instanceof Po?(m.i=k,mu(m.i,m.l)):(R||(k=Ds(k,mg)),m.i=new Po(k,m.l))}function $t(m,k,R){m.i.set(k,R)}function es(m){return $t(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Qi(m,k){return m?k?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Ds(m,k,R){return typeof m=="string"?(m=encodeURI(m).replace(k,Jf),R&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Jf(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var ql=/[#\/\?@]/g,pg=/[#\?:]/g,pu=/[#\?]/g,mg=/[#\?@]/g,Hl=/#/g;function Po(m,k){this.h=this.g=null,this.i=m||null,this.j=!!k}function Ms(m){m.g||(m.g=new Map,m.h=0,m.i&&vt(m.i,function(k,R){m.add(decodeURIComponent(k.replace(/\+/g," ")),R)}))}t=Po.prototype,t.add=function(m,k){Ms(this),this.i=null,m=Ni(this,m);let R=this.g.get(m);return R||this.g.set(m,R=[]),R.push(k),this.h+=1,this};function Et(m,k){Ms(m),k=Ni(m,k),m.g.has(k)&&(m.i=null,m.h-=m.g.get(k).length,m.g.delete(k))}function eh(m,k){return Ms(m),k=Ni(m,k),m.g.has(k)}t.forEach=function(m,k){Ms(this),this.g.forEach(function(R,B){R.forEach(function(oe){m.call(k,oe,B,this)},this)},this)};function gg(m,k){Ms(m);let R=[];if(typeof k=="string")eh(m,k)&&(R=R.concat(m.g.get(Ni(m,k))));else for(m=Array.from(m.g.values()),k=0;k<m.length;k++)R=R.concat(m[k]);return R}t.set=function(m,k){return Ms(this),this.i=null,m=Ni(this,m),eh(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[k]),this.h+=1,this},t.get=function(m,k){return m?(m=gg(this,m),m.length>0?String(m[0]):k):k};function yg(m,k,R){Et(m,k),R.length>0&&(m.i=null,m.g.set(Ni(m,k),p(R)),m.h+=R.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],k=Array.from(this.g.keys());for(let B=0;B<k.length;B++){var R=k[B];const oe=Qa(R);R=gg(this,R);for(let ue=0;ue<R.length;ue++){let ke=oe;R[ue]!==""&&(ke+="="+Qa(R[ue])),m.push(ke)}}return this.i=m.join("&")};function Nr(m){const k=new Po;return k.i=m.i,m.g&&(k.g=new Map(m.g),k.h=m.h),k}function Ni(m,k){return k=String(k),m.j&&(k=k.toLowerCase()),k}function mu(m,k){k&&!m.j&&(Ms(m),m.i=null,m.g.forEach(function(R,B){const oe=B.toLowerCase();B!=oe&&(Et(this,B),yg(this,oe,R))},m)),m.j=k}function ts(m,k){const R=new cr;if(s.Image){const B=new Image;B.onload=f(Aa,R,"TestLoadImage: loaded",!0,k,B),B.onerror=f(Aa,R,"TestLoadImage: error",!1,k,B),B.onabort=f(Aa,R,"TestLoadImage: abort",!1,k,B),B.ontimeout=f(Aa,R,"TestLoadImage: timeout",!1,k,B),s.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=m}else k(!1)}function vg(m,k){const R=new cr,B=new AbortController,oe=setTimeout(()=>{B.abort(),Aa(R,"TestPingServer: timeout",!1,k)},1e4);fetch(m,{signal:B.signal}).then(ue=>{clearTimeout(oe),ue.ok?Aa(R,"TestPingServer: ok",!0,k):Aa(R,"TestPingServer: server error",!1,k)}).catch(()=>{clearTimeout(oe),Aa(R,"TestPingServer: error",!1,k)})}function Aa(m,k,R,B,oe){try{oe&&(oe.onload=null,oe.onerror=null,oe.onabort=null,oe.ontimeout=null),B(R)}catch{}}function Bn(){this.g=new va}function si(m){this.i=m.Sb||null,this.h=m.ab||!1}d(si,Ti),si.prototype.g=function(){return new ns(this.i,this.h)};function ns(m,k){kt.call(this),this.H=m,this.o=k,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(ns,kt),t=ns.prototype,t.open=function(m,k){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=k,this.readyState=1,oi(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const k={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(k.body=m),(this.H||s).fetch(new Request(this.D,k)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Rs(this)),this.readyState=0},t.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,oi(this)),this.g&&(this.readyState=3,oi(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Co(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Co(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}t.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var k=m.value?m.value:new Uint8Array(0);(k=this.B.decode(k,{stream:!m.done}))&&(this.response=this.responseText+=k)}m.done?Rs(this):oi(this),this.readyState==3&&Co(this)}},t.Oa=function(m){this.g&&(this.response=this.responseText=m,Rs(this))},t.Na=function(m){this.g&&(this.response=m,Rs(this))},t.ga=function(){this.g&&Rs(this)};function Rs(m){m.readyState=4,m.l=null,m.j=null,m.B=null,oi(m)}t.setRequestHeader=function(m,k){this.A.append(m,k)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],k=this.h.entries();for(var R=k.next();!R.done;)R=R.value,m.push(R[0]+": "+R[1]),R=k.next();return m.join(`\r
`)};function oi(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(ns.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function xg(m){let k="";return Y(m,function(R,B){k+=B,k+=":",k+=R,k+=`\r
`}),k}function li(m,k,R){e:{for(B in R){var B=!1;break e}B=!0}B||(R=xg(R),typeof m=="string"?R!=null&&Qa(R):$t(m,k,R))}function Jt(m){kt.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(Jt,kt);var bg=/^https?$/i,th=["POST","PUT"];t=Jt.prototype,t.Fa=function(m){this.H=m},t.ea=function(m,k,R,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);k=k?k.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xn.g(),this.g.onreadystatechange=h(u(this.Ca,this));try{this.B=!0,this.g.open(k,String(m),!0),this.B=!1}catch(ue){ko(this,ue);return}if(m=R||"",R=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var oe in B)R.set(oe,B[oe]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const ue of B.keys())R.set(ue,B.get(ue));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(R.keys()).find(ue=>ue.toLowerCase()=="content-type"),oe=s.FormData&&m instanceof s.FormData,!(Array.prototype.indexOf.call(th,k,void 0)>=0)||B||oe||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ue,ke]of R)this.g.setRequestHeader(ue,ke);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(ue){ko(this,ue)}};function ko(m,k){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=k,m.o=5,gu(m),yu(m)}function gu(m){m.A||(m.A=!0,Mt(m,"complete"),Mt(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Mt(this,"complete"),Mt(this,"abort"),yu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yu(this,!0)),Jt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?nh(this):this.Xa())},t.Xa=function(){nh(this)};function nh(m){if(m.h&&typeof a<"u"){if(m.v&&ci(m)==4)setTimeout(m.Ca.bind(m),0);else if(Mt(m,"readystatechange"),ci(m)==4){m.h=!1;try{const ue=m.ca();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var k=!0;break e;default:k=!1}var R;if(!(R=k)){var B;if(B=ue===0){let ke=String(m.D).match(Zf)[1]||null;!ke&&s.self&&s.self.location&&(ke=s.self.location.protocol.slice(0,-1)),B=!bg.test(ke?ke.toLowerCase():"")}R=B}if(R)Mt(m,"complete"),Mt(m,"success");else{m.o=6;try{var oe=ci(m)>2?m.g.statusText:""}catch{oe=""}m.l=oe+" ["+m.ca()+"]",gu(m)}}finally{yu(m)}}}}function yu(m,k){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const R=m.g;m.g=null,k||Mt(m,"ready");try{R.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ci(m){return m.g?m.g.readyState:0}t.ca=function(){try{return ci(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(m){if(this.g){var k=this.g.responseText;return m&&k.indexOf(m)==0&&(k=k.substring(m.length)),Kr(k)}};function wg(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Pb(m){const k={};m=(m.g&&ci(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<m.length;B++){if(z(m[B]))continue;var R=fu(m[B]);const oe=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const ue=k[oe]||[];k[oe]=ue,ue.push(R)}le(k,function(B){return B.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function rs(m,k,R){return R&&R.internalChannelParams&&R.internalChannelParams[m]||k}function Gl(m){this.za=0,this.i=[],this.j=new cr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=rs("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=rs("baseRetryDelayMs",5e3,m),this.Za=rs("retryDelaySeedMs",1e4,m),this.Ta=rs("forwardChannelMaxRetries",2,m),this.va=rs("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Is(m&&m.concurrentRequestLimit),this.Ba=new Bn,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Gl.prototype,t.ka=8,t.I=1,t.connect=function(m,k,R,B){Ke(0),this.W=m,this.H=k||{},R&&B!==void 0&&(this.H.OSID=R,this.H.OAID=B),this.F=this.X,this.J=Qn(this,null,this.W),xu(this)};function Yl(m){if(_g(m),m.I==3){var k=m.V++,R=ki(m.J);if($t(R,"SID",m.M),$t(R,"RID",k),$t(R,"TYPE","terminate"),No(m,R),k=new Pi(m,m.j,k),k.M=2,k.A=es(ki(R)),R=!1,s.navigator&&s.navigator.sendBeacon)try{R=s.navigator.sendBeacon(k.A.toString(),"")}catch{}!R&&s.Image&&(new Image().src=k.A,R=!0),R||(k.g=Io(k.j,null),k.g.ea(k.A)),k.F=Date.now(),Xi(k)}Eu(m)}function vu(m){m.g&&(wu(m),m.g.cancel(),m.g=null)}function _g(m){vu(m),m.v&&(s.clearTimeout(m.v),m.v=null),ja(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&s.clearTimeout(m.m),m.m=null)}function xu(m){if(!Ul(m.h)&&!m.m){m.m=!0;var k=m.Ea;A||T(),j||(A(),j=!0),S.add(k,m),m.D=0}}function rh(m,k){return hu(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=k.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Je(u(m.Ea,m,k),Su(m,m.D)),m.D++,!0)}t.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const oe=new Pi(this,this.j,m);let ue=this.o;if(this.U&&(ue?(ue=ce(ue),Ee(ue,this.U)):ue=this.U),this.u!==null||this.R||(oe.J=ue,ue=null),this.S)e:{for(var k=0,R=0;R<this.i.length;R++){t:{var B=this.i[R];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(k+=B,k>4096){k=R;break e}if(k===4096||R===this.i.length-1){k=R+1;break e}}k=1e3}else k=1e3;k=Xl(this,oe,k),R=ki(this.J),$t(R,"RID",m),$t(R,"CVER",22),this.G&&$t(R,"X-HTTP-Session-Id",this.G),No(this,R),ue&&(this.R?k="headers="+Qa(xg(ue))+"&"+k:this.u&&li(R,this.u,ue)),Sa(this.h,oe),this.Ra&&$t(R,"TYPE","init"),this.S?($t(R,"$req",k),$t(R,"SID","null"),oe.U=!0,Yi(oe,R,null)):Yi(oe,R,k),this.I=2}}else this.I==3&&(m?bu(this,m):this.i.length==0||Ul(this.h)||bu(this))};function bu(m,k){var R;k?R=k.l:R=m.V++;const B=ki(m.J);$t(B,"SID",m.M),$t(B,"RID",R),$t(B,"AID",m.K),No(m,B),m.u&&m.o&&li(B,m.u,m.o),R=new Pi(m,m.j,R,m.D+1),m.u===null&&(R.J=m.o),k&&(m.i=k.G.concat(m.i)),k=Xl(m,R,1e3),R.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Sa(m.h,R),Yi(R,B,k)}function No(m,k){m.H&&Y(m.H,function(R,B){$t(k,B,R)}),m.l&&Y({},function(R,B){$t(k,B,R)})}function Xl(m,k,R){R=Math.min(m.i.length,R);const B=m.l?u(m.l.Ka,m.l,m):null;e:{var oe=m.i;let pt=-1;for(;;){const bn=["count="+R];pt==-1?R>0?(pt=oe[0].g,bn.push("ofs="+pt)):pt=0:bn.push("ofs="+pt);let Nt=!0;for(let Un=0;Un<R;Un++){var ue=oe[Un].g;const ui=oe[Un].map;if(ue-=pt,ue<0)pt=Math.max(0,oe[Un].g-100),Nt=!1;else try{ue="req"+ue+"_"||"";try{var ke=ui instanceof Map?ui:Object.entries(ui);for(const[Ca,is]of ke){let ka=is;o(is)&&(ka=vn(is)),bn.push(ue+Ca+"="+encodeURIComponent(ka))}}catch(Ca){throw bn.push(ue+"type="+encodeURIComponent("_badmap")),Ca}}catch{B&&B(ui)}}if(Nt){ke=bn.join("&");break e}}ke=void 0}return m=m.i.splice(0,R),k.G=m,ke}function Ql(m){if(!m.g&&!m.v){m.Y=1;var k=m.Da;A||T(),j||(A(),j=!0),S.add(k,m),m.A=0}}function Oo(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Je(u(m.Da,m),Su(m,m.A)),m.A++,!0)}t.Da=function(){if(this.v=null,Sg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Je(u(this.Wa,this),m)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ke(10),vu(this),Sg(this))};function wu(m){m.B!=null&&(s.clearTimeout(m.B),m.B=null)}function Sg(m){m.g=new Pi(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var k=ki(m.na);$t(k,"RID","rpc"),$t(k,"SID",m.M),$t(k,"AID",m.K),$t(k,"CI",m.F?"0":"1"),!m.F&&m.ia&&$t(k,"TO",m.ia),$t(k,"TYPE","xmlhttp"),No(m,k),m.u&&m.o&&li(k,m.u,m.o),m.O&&(m.g.H=m.O);var R=m.g;m=m.ba,R.M=1,R.A=es(ki(k)),R.u=null,R.R=!0,Fl(R,m)}t.Va=function(){this.C!=null&&(this.C=null,vu(this),Oo(this),Ke(19))};function ja(m){m.C!=null&&(s.clearTimeout(m.C),m.C=null)}function _u(m,k){var R=null;if(m.g==k){ja(m),wu(m),m.g=null;var B=2}else if(Wl(m.h,k))R=k.G,Qf(m.h,k),B=1;else return;if(m.I!=0){if(k.o)if(B==1){R=k.u?k.u.length:0,k=Date.now()-k.F;var oe=m.D;B=We(),Mt(B,new rt(B,R)),xu(m)}else Ql(m);else if(oe=k.m,oe==3||oe==0&&k.X>0||!(B==1&&rh(m,k)||B==2&&Oo(m)))switch(R&&R.length>0&&(k=m.h,k.i=k.i.concat(R)),oe){case 1:Ta(m,5);break;case 4:Ta(m,10);break;case 3:Ta(m,6);break;default:Ta(m,2)}}}function Su(m,k){let R=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(R*=2),R*k}function Ta(m,k){if(m.j.info("Error code "+k),k==2){var R=u(m.bb,m),B=m.Ua;const oe=!B;B=new Ea(B||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Ja(B,"https"),es(B),oe?ts(B.toString(),R):vg(B.toString(),R)}else Ke(2);m.I=0,m.l&&m.l.pa(k),Eu(m),_g(m)}t.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Ke(2)):(this.j.info("Failed to ping google.com"),Ke(1))};function Eu(m){if(m.I=0,m.ja=[],m.l){const k=Kl(m.h);(k.length!=0||m.i.length!=0)&&(v(m.ja,k),v(m.ja,m.i),m.h.i.length=0,p(m.i),m.i.length=0),m.l.oa()}}function Qn(m,k,R){var B=R instanceof Ea?ki(R):new Ea(R);if(B.g!="")k&&(B.g=k+"."+B.g),To(B,B.u);else{var oe=s.location;B=oe.protocol,k=k?k+"."+oe.hostname:oe.hostname,oe=+oe.port;const ue=new Ea(null);B&&Ja(ue,B),k&&(ue.g=k),oe&&To(ue,oe),R&&(ue.h=R),B=ue}return R=m.G,k=m.wa,R&&k&&$t(B,R,k),$t(B,"VER",m.ka),No(m,B),B}function Io(m,k,R){if(k&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return k=m.Aa&&!m.ma?new Jt(new si({ab:R})):new Jt(m.ma),k.Fa(m.L),k}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Do(){}t=Do.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Zl(){}Zl.prototype.g=function(m,k){return new ur(m,k)};function ur(m,k){kt.call(this),this.g=new Gl(k),this.l=m,this.h=k&&k.messageUrlParams||null,m=k&&k.messageHeaders||null,k&&k.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=k&&k.initMessageHeaders||null,k&&k.messageContentType&&(m?m["X-WebChannel-Content-Type"]=k.messageContentType:m={"X-WebChannel-Content-Type":k.messageContentType}),k&&k.sa&&(m?m["X-WebChannel-Client-Profile"]=k.sa:m={"X-WebChannel-Client-Profile":k.sa}),this.g.U=m,(m=k&&k.Qb)&&!z(m)&&(this.g.u=m),this.A=k&&k.supportsCrossDomainXhr||!1,this.v=k&&k.sendRawJson||!1,(k=k&&k.httpSessionIdParam)&&!z(k)&&(this.g.G=k,m=this.h,m!==null&&k in m&&(m=this.h,k in m&&delete m[k])),this.j=new Pa(this)}d(ur,kt),ur.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ur.prototype.close=function(){Yl(this.g)},ur.prototype.o=function(m){var k=this.g;if(typeof m=="string"){var R={};R.__data__=m,m=R}else this.v&&(R={},R.__data__=vn(m),m=R);k.i.push(new hg(k.Ya++,m)),k.I==3&&xu(k)},ur.prototype.N=function(){this.g.l=null,delete this.j,Yl(this.g),delete this.g,ur.Z.N.call(this)};function ih(m){xa.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var k=m.__sm__;if(k){e:{for(const R in k){m=R;break e}m=void 0}(this.i=m)&&(m=this.i,k=k!==null&&m in k?k[m]:void 0),this.data=k}else this.data=m}d(ih,xa);function ah(){kr.call(this),this.status=1}d(ah,kr);function Pa(m){this.g=m}d(Pa,Do),Pa.prototype.ra=function(){Mt(this.g,"a")},Pa.prototype.qa=function(m){Mt(this.g,new ih(m))},Pa.prototype.pa=function(m){Mt(this.g,new ah)},Pa.prototype.oa=function(){Mt(this.g,"b")},Zl.prototype.createWebChannel=Zl.prototype.g,ur.prototype.send=ur.prototype.o,ur.prototype.open=ur.prototype.m,ur.prototype.close=ur.prototype.close,G5=function(){return new Zl},H5=function(){return We()},q5=ze,p_={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ba.NO_ERROR=0,ba.TIMEOUT=8,ba.HTTP_ERROR=6,Py=ba,Ft.COMPLETE="complete",K5=Ft,ri.EventType=ii,ii.OPEN="a",ii.CLOSE="b",ii.ERROR="c",ii.MESSAGE="d",kt.prototype.listen=kt.prototype.J,Nh=ri,Jt.prototype.listenOnce=Jt.prototype.K,Jt.prototype.getLastError=Jt.prototype.Ha,Jt.prototype.getLastErrorCode=Jt.prototype.ya,Jt.prototype.getStatus=Jt.prototype.ca,Jt.prototype.getResponseJson=Jt.prototype.La,Jt.prototype.getResponseText=Jt.prototype.la,Jt.prototype.send=Jt.prototype.ea,Jt.prototype.setWithCredentials=Jt.prototype.Fa,W5=Jt}).apply(typeof Kg<"u"?Kg:typeof self<"u"?self:typeof window<"u"?window:{});const aC="@firebase/firestore",sC="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hi=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};hi.UNAUTHENTICATED=new hi(null),hi.GOOGLE_CREDENTIALS=new hi("google-credentials-uid"),hi.FIRST_PARTY=new hi("first-party-uid"),hi.MOCK_USER=new hi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sf="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc=new AE("@firebase/firestore");function Ru(){return Bc.logLevel}function Ve(t,...e){if(Bc.logLevel<=wt.DEBUG){const n=e.map(NE);Bc.debug(`Firestore (${Sf}): ${t}`,...n)}}function co(t,...e){if(Bc.logLevel<=wt.ERROR){const n=e.map(NE);Bc.error(`Firestore (${Sf}): ${t}`,...n)}}function Dp(t,...e){if(Bc.logLevel<=wt.WARN){const n=e.map(NE);Bc.warn(`Firestore (${Sf}): ${t}`,...n)}}function NE(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Y5(t,r,n)}function Y5(t,e,n){let r=`FIRESTORE (${Sf}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw co(r),new Error(r)}function zt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||Y5(e,i,r)}function dt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ve={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends bo{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PK{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class CK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(hi.UNAUTHENTICATED))}shutdown(){}}class kK{constructor(e){this.t=e,this.currentUser=hi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){zt(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let a=new dl;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new dl,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=a;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},o=l=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new dl)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(zt(typeof r.accessToken=="string",31837,{l:r}),new PK(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return zt(e===null||typeof e=="string",2055,{h:e}),new hi(e)}}class NK{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=hi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class OK{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new NK(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(hi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class IK{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,us(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){zt(this.o===void 0,3512);const r=a=>{a.error!=null&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,Ve("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new oC(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(zt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new oC(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DK(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=DK(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function _t(t,e){return t<e?-1:t>e?1:0}function m_(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),a=e.charAt(r);if(i!==a)return fw(i)===fw(a)?_t(i,a):fw(i)?1:-1}return _t(t.length,e.length)}const MK=55296,RK=57343;function fw(t){const e=t.charCodeAt(0);return e>=MK&&e<=RK}function Od(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC="__name__";class ls{constructor(e,n,r){n===void 0?n=0:n>e.length&&it(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&it(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ls.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ls?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=ls.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return _t(e.length,n.length)}static compareSegments(e,n){const r=ls.isNumericId(e),i=ls.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?ls.extractNumericId(e).compare(ls.extractNumericId(n)):m_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ul.fromString(e.substring(4,e.length-2))}}class nn extends ls{construct(e,n,r){return new nn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ve.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new nn(n)}static emptyPath(){return new nn([])}}const $K=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Er extends ls{construct(e,n,r){return new Er(e,n,r)}static isValidIdentifier(e){return $K.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Er.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lC}static keyField(){return new Er([lC])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Re(ve.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Re(ve.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Re(ve.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(r+=o,i++):(a(),i++)}if(a(),s)throw new Re(ve.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Er(n)}static emptyPath(){return new Er([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.path=e}static fromPath(e){return new Xe(nn.fromString(e))}static fromName(e){return new Xe(nn.fromString(e).popFirst(5))}static empty(){return new Xe(nn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return nn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xe(new nn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X5(t,e,n){if(!n)throw new Re(ve.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function LK(t,e,n,r){if(e===!0&&r===!0)throw new Re(ve.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function cC(t){if(!Xe.isDocumentKey(t))throw new Re(ve.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function uC(t){if(Xe.isDocumentKey(t))throw new Re(ve.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Q5(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function sx(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":it(12329,{type:typeof t})}function da(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Re(ve.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sx(t);throw new Re(ve.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Rm(t,e){if(!Q5(t))throw new Re(ve.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&s!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Re(ve.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC=-62135596800,fC=1e6;class un{static now(){return un.fromMillis(Date.now())}static fromDate(e){return un.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*fC);return new un(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Re(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Re(ve.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<dC)throw new Re(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ve.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fC}_compareTo(e){return this.seconds===e.seconds?_t(this.nanoseconds,e.nanoseconds):_t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:un._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Rm(e,un._jsonSchema))return new un(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-dC;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}un._jsonSchemaVersion="firestore/timestamp/1.0",un._jsonSchema={type:Gn("string",un._jsonSchemaVersion),seconds:Gn("number"),nanoseconds:Gn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{static fromTimestamp(e){return new lt(e)}static min(){return new lt(new un(0,0))}static max(){return new lt(new un(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=-1;function zK(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=lt.fromTimestamp(r===1e9?new un(n+1,0):new un(n,r));return new gl(i,Xe.empty(),e)}function VK(t){return new gl(t.readTime,t.key,Mp)}class gl{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new gl(lt.min(),Xe.empty(),Mp)}static max(){return new gl(lt.max(),Xe.empty(),Mp)}}function FK(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Xe.comparator(t.documentKey,e.documentKey),n!==0?n:_t(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BK="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UK{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ef(t){if(t.code!==ve.FAILED_PRECONDITION||t.message!==BK)throw t;Ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&it(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new we((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof we?n:we.resolve(n)}catch(n){return we.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):we.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):we.reject(n)}static resolve(e){return new we((n,r)=>{n(e)})}static reject(e){return new we((n,r)=>{r(e)})}static waitFor(e){return new we((n,r)=>{let i=0,a=0,s=!1;e.forEach(o=>{++i,o.next(()=>{++a,s&&a===i&&n()},l=>r(l))}),s=!0,a===i&&n()})}static or(e){let n=we.resolve(!1);for(const r of e)n=n.next(i=>i?we.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,a)=>{r.push(n.call(this,i,a))}),this.waitFor(r)}static mapArray(e,n){return new we((r,i)=>{const a=e.length,s=new Array(a);let o=0;for(let l=0;l<a;l++){const u=l;n(e[u]).next(f=>{s[u]=f,++o,o===a&&r(s)},f=>i(f))}})}static doWhile(e,n){return new we((r,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):r()};a()})}}function WK(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Af(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ox.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE=-1;function lx(t){return t==null}function pv(t){return t===0&&1/t==-1/0}function KK(t){return typeof t=="number"&&Number.isInteger(t)&&!pv(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z5="";function qK(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=hC(e)),e=HK(t.get(n),e);return hC(e)}function HK(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case Z5:n+="";break;default:n+=a}}return n}function hC(t){return t+Z5+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function jl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function J5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,n){this.comparator=e,this.root=n||Sr.EMPTY}insert(e,n){return new An(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Sr.BLACK,null,null))}remove(e){return new An(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qg(this.root,e,this.comparator,!1)}getReverseIterator(){return new qg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qg(this.root,e,this.comparator,!0)}}class qg{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Sr{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??Sr.RED,this.left=i??Sr.EMPTY,this.right=a??Sr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new Sr(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Sr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Sr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Sr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Sr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw it(43730,{key:this.key,value:this.value});if(this.right.isRed())throw it(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw it(27949);return e+(this.isRed()?0:1)}}Sr.EMPTY=null,Sr.RED=!0,Sr.BLACK=!1;Sr.EMPTY=new class{constructor(){this.size=0}get key(){throw it(57766)}get value(){throw it(16141)}get color(){throw it(16727)}get left(){throw it(29726)}get right(){throw it(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new Sr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e){this.comparator=e,this.data=new An(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new mC(this.data.getIterator())}getIteratorFrom(e){return new mC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ar)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ar(this.comparator);return n.data=e,n}}class mC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.fields=e,e.sort(Er.comparator)}static empty(){return new zi([])}unionWith(e){let n=new ar(Er.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new zi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Od(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new e3("Invalid base64 string: "+a):a}}(e);return new Pr(n)}static fromUint8Array(e){const n=function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a}(e);return new Pr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pr.EMPTY_BYTE_STRING=new Pr("");const GK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yl(t){if(zt(!!t,39018),typeof t=="string"){let e=0;const n=GK.exec(t);if(zt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$n(t.seconds),nanos:$n(t.nanos)}}function $n(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function vl(t){return typeof t=="string"?Pr.fromBase64String(t):Pr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3="server_timestamp",n3="__type__",r3="__previous_value__",i3="__local_write_time__";function DE(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[n3])==null?void 0:r.stringValue)===t3}function cx(t){const e=t.mapValue.fields[r3];return DE(e)?cx(e):e}function Rp(t){const e=yl(t.mapValue.fields[i3].timestampValue);return new un(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YK{constructor(e,n,r,i,a,s,o,l,u,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=f}}const mv="(default)";class $p{constructor(e,n){this.projectId=e,this.database=n||mv}static empty(){return new $p("","")}get isDefaultDatabase(){return this.database===mv}isEqual(e){return e instanceof $p&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a3="__type__",XK="__max__",Hg={mapValue:{}},s3="__vector__",gv="value";function xl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?DE(t)?4:ZK(t)?9007199254740991:QK(t)?10:11:it(28295,{value:t})}function js(t,e){if(t===e)return!0;const n=xl(t);if(n!==xl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Rp(t).isEqual(Rp(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=yl(i.timestampValue),o=yl(a.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return vl(i.bytesValue).isEqual(vl(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return $n(i.geoPointValue.latitude)===$n(a.geoPointValue.latitude)&&$n(i.geoPointValue.longitude)===$n(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return $n(i.integerValue)===$n(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=$n(i.doubleValue),o=$n(a.doubleValue);return s===o?pv(s)===pv(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return Od(t.arrayValue.values||[],e.arrayValue.values||[],js);case 10:case 11:return function(i,a){const s=i.mapValue.fields||{},o=a.mapValue.fields||{};if(pC(s)!==pC(o))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(o[l]===void 0||!js(s[l],o[l])))return!1;return!0}(t,e);default:return it(52216,{left:t})}}function Lp(t,e){return(t.values||[]).find(n=>js(n,e))!==void 0}function Id(t,e){if(t===e)return 0;const n=xl(t),r=xl(e);if(n!==r)return _t(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _t(t.booleanValue,e.booleanValue);case 2:return function(a,s){const o=$n(a.integerValue||a.doubleValue),l=$n(s.integerValue||s.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return gC(t.timestampValue,e.timestampValue);case 4:return gC(Rp(t),Rp(e));case 5:return m_(t.stringValue,e.stringValue);case 6:return function(a,s){const o=vl(a),l=vl(s);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(a,s){const o=a.split("/"),l=s.split("/");for(let u=0;u<o.length&&u<l.length;u++){const f=_t(o[u],l[u]);if(f!==0)return f}return _t(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,s){const o=_t($n(a.latitude),$n(s.latitude));return o!==0?o:_t($n(a.longitude),$n(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return yC(t.arrayValue,e.arrayValue);case 10:return function(a,s){var h,p,v,y;const o=a.fields||{},l=s.fields||{},u=(h=o[gv])==null?void 0:h.arrayValue,f=(p=l[gv])==null?void 0:p.arrayValue,d=_t(((v=u==null?void 0:u.values)==null?void 0:v.length)||0,((y=f==null?void 0:f.values)==null?void 0:y.length)||0);return d!==0?d:yC(u,f)}(t.mapValue,e.mapValue);case 11:return function(a,s){if(a===Hg.mapValue&&s===Hg.mapValue)return 0;if(a===Hg.mapValue)return 1;if(s===Hg.mapValue)return-1;const o=a.fields||{},l=Object.keys(o),u=s.fields||{},f=Object.keys(u);l.sort(),f.sort();for(let d=0;d<l.length&&d<f.length;++d){const h=m_(l[d],f[d]);if(h!==0)return h;const p=Id(o[l[d]],u[f[d]]);if(p!==0)return p}return _t(l.length,f.length)}(t.mapValue,e.mapValue);default:throw it(23264,{he:n})}}function gC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _t(t,e);const n=yl(t),r=yl(e),i=_t(n.seconds,r.seconds);return i!==0?i:_t(n.nanos,r.nanos)}function yC(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=Id(n[i],r[i]);if(a)return a}return _t(n.length,r.length)}function Dd(t){return g_(t)}function g_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=yl(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return vl(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Xe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=g_(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const s of r)a?a=!1:i+=",",i+=`${s}:${g_(n.fields[s])}`;return i+"}"}(t.mapValue):it(61005,{value:t})}function Cy(t){switch(xl(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=cx(t);return e?16+Cy(e):16;case 5:return 2*t.stringValue.length;case 6:return vl(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+Cy(a),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return jl(r.fields,(a,s)=>{i+=a.length+Cy(s)}),i}(t.mapValue);default:throw it(13486,{value:t})}}function vC(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function y_(t){return!!t&&"integerValue"in t}function ME(t){return!!t&&"arrayValue"in t}function xC(t){return!!t&&"nullValue"in t}function bC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ky(t){return!!t&&"mapValue"in t}function QK(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[a3])==null?void 0:r.stringValue)===s3}function Xh(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return jl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Xh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Xh(t.arrayValue.values[n]);return e}return{...t}}function ZK(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===XK}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this.value=e}static empty(){return new gi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ky(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xh(n)}setAll(e){let n=Er.emptyPath(),r={},i=[];e.forEach((s,o)=>{if(!n.isImmediateParentOf(o)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=o.popLast()}s?r[o.lastSegment()]=Xh(s):i.push(o.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());ky(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return js(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ky(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){jl(n,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new gi(Xh(this.value))}}function o3(t){const e=[];return jl(t.fields,(n,r)=>{const i=new Er([n]);if(ky(r)){const a=o3(r.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)}),new zi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,n,r,i,a,s,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Fr(e,0,lt.min(),lt.min(),lt.min(),gi.empty(),0)}static newFoundDocument(e,n,r,i){return new Fr(e,1,n,lt.min(),r,i,0)}static newNoDocument(e,n){return new Fr(e,2,n,lt.min(),lt.min(),gi.empty(),0)}static newUnknownDocument(e,n){return new Fr(e,3,n,lt.min(),lt.min(),gi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(lt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=lt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Fr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e,n){this.position=e,this.inclusive=n}}function wC(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],s=t.position[i];if(a.field.isKeyField()?r=Xe.comparator(Xe.fromName(s.referenceValue),n.key):r=Id(s,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function _C(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!js(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e,n="asc"){this.field=e,this.dir=n}}function JK(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{}class Hn extends l3{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new tq(e,n,r):n==="array-contains"?new iq(e,r):n==="in"?new aq(e,r):n==="not-in"?new sq(e,r):n==="array-contains-any"?new oq(e,r):new Hn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new nq(e,r):new rq(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Id(n,this.value)):n!==null&&xl(this.value)===xl(n)&&this.matchesComparison(Id(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return it(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ha extends l3{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ha(e,n)}matches(e){return c3(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function c3(t){return t.op==="and"}function u3(t){return eq(t)&&c3(t)}function eq(t){for(const e of t.filters)if(e instanceof Ha)return!1;return!0}function v_(t){if(t instanceof Hn)return t.field.canonicalString()+t.op.toString()+Dd(t.value);if(u3(t))return t.filters.map(e=>v_(e)).join(",");{const e=t.filters.map(n=>v_(n)).join(",");return`${t.op}(${e})`}}function d3(t,e){return t instanceof Hn?function(r,i){return i instanceof Hn&&r.op===i.op&&r.field.isEqual(i.field)&&js(r.value,i.value)}(t,e):t instanceof Ha?function(r,i){return i instanceof Ha&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,s,o)=>a&&d3(s,i.filters[o]),!0):!1}(t,e):void it(19439)}function f3(t){return t instanceof Hn?function(n){return`${n.field.canonicalString()} ${n.op} ${Dd(n.value)}`}(t):t instanceof Ha?function(n){return n.op.toString()+" {"+n.getFilters().map(f3).join(" ,")+"}"}(t):"Filter"}class tq extends Hn{constructor(e,n,r){super(e,n,r),this.key=Xe.fromName(r.referenceValue)}matches(e){const n=Xe.comparator(e.key,this.key);return this.matchesComparison(n)}}class nq extends Hn{constructor(e,n){super(e,"in",n),this.keys=h3("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class rq extends Hn{constructor(e,n){super(e,"not-in",n),this.keys=h3("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function h3(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Xe.fromName(r.referenceValue))}class iq extends Hn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ME(n)&&Lp(n.arrayValue,this.value)}}class aq extends Hn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Lp(this.value.arrayValue,n)}}class sq extends Hn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Lp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Lp(this.value.arrayValue,n)}}class oq extends Hn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ME(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Lp(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lq{constructor(e,n=null,r=[],i=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=s,this.endAt=o,this.Te=null}}function SC(t,e=null,n=[],r=[],i=null,a=null,s=null){return new lq(t,e,n,r,i,a,s)}function RE(t){const e=dt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>v_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),lx(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Dd(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Dd(r)).join(",")),e.Te=n}return e.Te}function $E(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!JK(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!d3(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_C(t.startAt,e.startAt)&&_C(t.endAt,e.endAt)}function x_(t){return Xe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,n=null,r=[],i=[],a=null,s="F",o=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function cq(t,e,n,r,i,a,s,o){return new $m(t,e,n,r,i,a,s,o)}function ux(t){return new $m(t)}function EC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function p3(t){return t.collectionGroup!==null}function Qh(t){const e=dt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new ar(Er.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new vv(a,r))}),n.has(Er.keyField().canonicalString())||e.Ie.push(new vv(Er.keyField(),r))}return e.Ie}function vs(t){const e=dt(t);return e.Ee||(e.Ee=uq(e,Qh(t))),e.Ee}function uq(t,e){if(t.limitType==="F")return SC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new vv(i.field,a)});const n=t.endAt?new yv(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new yv(t.startAt.position,t.startAt.inclusive):null;return SC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function b_(t,e){const n=t.filters.concat([e]);return new $m(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function w_(t,e,n){return new $m(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function dx(t,e){return $E(vs(t),vs(e))&&t.limitType===e.limitType}function m3(t){return`${RE(vs(t))}|lt:${t.limitType}`}function $u(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>f3(i)).join(", ")}]`),lx(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Dd(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Dd(i)).join(",")),`Target(${r})`}(vs(t))}; limitType=${t.limitType})`}function fx(t,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Xe.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,i){for(const a of Qh(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,o,l){const u=wC(s,o,l);return s.inclusive?u<=0:u<0}(r.startAt,Qh(r),i)||r.endAt&&!function(s,o,l){const u=wC(s,o,l);return s.inclusive?u>=0:u>0}(r.endAt,Qh(r),i))}(t,e)}function dq(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function g3(t){return(e,n)=>{let r=!1;for(const i of Qh(t)){const a=fq(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function fq(t,e,n){const r=t.field.isKeyField()?Xe.comparator(e.key,n.key):function(a,s,o){const l=s.data.field(a),u=o.data.field(a);return l!==null&&u!==null?Id(l,u):it(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return it(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){jl(this.inner,(n,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return J5(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hq=new An(Xe.comparator);function uo(){return hq}const y3=new An(Xe.comparator);function Oh(...t){let e=y3;for(const n of t)e=e.insert(n.key,n);return e}function v3(t){let e=y3;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function xc(){return Zh()}function x3(){return Zh()}function Zh(){return new nu(t=>t.toString(),(t,e)=>t.isEqual(e))}const pq=new An(Xe.comparator),mq=new ar(Xe.comparator);function St(...t){let e=mq;for(const n of t)e=e.add(n);return e}const gq=new ar(_t);function yq(){return gq}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pv(e)?"-0":e}}function b3(t){return{integerValue:""+t}}function vq(t,e){return KK(e)?b3(e):LE(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(){this._=void 0}}function xq(t,e,n){return t instanceof xv?function(i,a){const s={fields:{[n3]:{stringValue:t3},[i3]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&DE(a)&&(a=cx(a)),a&&(s.fields[r3]=a),{mapValue:s}}(n,e):t instanceof zp?_3(t,e):t instanceof Vp?S3(t,e):function(i,a){const s=w3(i,a),o=AC(s)+AC(i.Ae);return y_(s)&&y_(i.Ae)?b3(o):LE(i.serializer,o)}(t,e)}function bq(t,e,n){return t instanceof zp?_3(t,e):t instanceof Vp?S3(t,e):n}function w3(t,e){return t instanceof bv?function(r){return y_(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class xv extends hx{}class zp extends hx{constructor(e){super(),this.elements=e}}function _3(t,e){const n=E3(e);for(const r of t.elements)n.some(i=>js(i,r))||n.push(r);return{arrayValue:{values:n}}}class Vp extends hx{constructor(e){super(),this.elements=e}}function S3(t,e){let n=E3(e);for(const r of t.elements)n=n.filter(i=>!js(i,r));return{arrayValue:{values:n}}}class bv extends hx{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function AC(t){return $n(t.integerValue||t.doubleValue)}function E3(t){return ME(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function wq(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof zp&&i instanceof zp||r instanceof Vp&&i instanceof Vp?Od(r.elements,i.elements,js):r instanceof bv&&i instanceof bv?js(r.Ae,i.Ae):r instanceof xv&&i instanceof xv}(t.transform,e.transform)}class _q{constructor(e,n){this.version=e,this.transformResults=n}}class Jr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Jr}static exists(e){return new Jr(void 0,e)}static updateTime(e){return new Jr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ny(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class px{}function A3(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new mx(t.key,Jr.none()):new Lm(t.key,t.data,Jr.none());{const n=t.data,r=gi.empty();let i=new ar(Er.comparator);for(let a of e.fields)if(!i.has(a)){let s=n.field(a);s===null&&a.length>1&&(a=a.popLast(),s=n.field(a)),s===null?r.delete(a):r.set(a,s),i=i.add(a)}return new Tl(t.key,r,new zi(i.toArray()),Jr.none())}}function Sq(t,e,n){t instanceof Lm?function(i,a,s){const o=i.value.clone(),l=TC(i.fieldTransforms,a,s.transformResults);o.setAll(l),a.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Tl?function(i,a,s){if(!Ny(i.precondition,a))return void a.convertToUnknownDocument(s.version);const o=TC(i.fieldTransforms,a,s.transformResults),l=a.data;l.setAll(j3(i)),l.setAll(o),a.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Jh(t,e,n,r){return t instanceof Lm?function(a,s,o,l){if(!Ny(a.precondition,s))return o;const u=a.value.clone(),f=PC(a.fieldTransforms,l,s);return u.setAll(f),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Tl?function(a,s,o,l){if(!Ny(a.precondition,s))return o;const u=PC(a.fieldTransforms,l,s),f=s.data;return f.setAll(j3(a)),f.setAll(u),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(a,s,o){return Ny(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function Eq(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=w3(r.transform,i||null);a!=null&&(n===null&&(n=gi.empty()),n.set(r.field,a))}return n||null}function jC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Od(r,i,(a,s)=>wq(a,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Lm extends px{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Tl extends px{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function j3(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function TC(t,e,n){const r=new Map;zt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const a=t[i],s=a.transform,o=e.data.field(a.field);r.set(a.field,bq(s,o,n[i]))}return r}function PC(t,e,n){const r=new Map;for(const i of t){const a=i.transform,s=n.data.field(i.field);r.set(i.field,xq(a,s,e))}return r}class mx extends px{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Aq extends px{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jq{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Sq(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Jh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Jh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=x3();return this.mutations.forEach(i=>{const a=e.get(i.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=n.has(i.key)?null:o;const l=A3(s,o);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(lt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),St())}isEqual(e){return this.batchId===e.batchId&&Od(this.mutations,e.mutations,(n,r)=>jC(n,r))&&Od(this.baseMutations,e.baseMutations,(n,r)=>jC(n,r))}}class zE{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){zt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return pq}();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new zE(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tq{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pq{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wn,jt;function Cq(t){switch(t){case ve.OK:return it(64938);case ve.CANCELLED:case ve.UNKNOWN:case ve.DEADLINE_EXCEEDED:case ve.RESOURCE_EXHAUSTED:case ve.INTERNAL:case ve.UNAVAILABLE:case ve.UNAUTHENTICATED:return!1;case ve.INVALID_ARGUMENT:case ve.NOT_FOUND:case ve.ALREADY_EXISTS:case ve.PERMISSION_DENIED:case ve.FAILED_PRECONDITION:case ve.ABORTED:case ve.OUT_OF_RANGE:case ve.UNIMPLEMENTED:case ve.DATA_LOSS:return!0;default:return it(15467,{code:t})}}function T3(t){if(t===void 0)return co("GRPC error has no .code"),ve.UNKNOWN;switch(t){case Wn.OK:return ve.OK;case Wn.CANCELLED:return ve.CANCELLED;case Wn.UNKNOWN:return ve.UNKNOWN;case Wn.DEADLINE_EXCEEDED:return ve.DEADLINE_EXCEEDED;case Wn.RESOURCE_EXHAUSTED:return ve.RESOURCE_EXHAUSTED;case Wn.INTERNAL:return ve.INTERNAL;case Wn.UNAVAILABLE:return ve.UNAVAILABLE;case Wn.UNAUTHENTICATED:return ve.UNAUTHENTICATED;case Wn.INVALID_ARGUMENT:return ve.INVALID_ARGUMENT;case Wn.NOT_FOUND:return ve.NOT_FOUND;case Wn.ALREADY_EXISTS:return ve.ALREADY_EXISTS;case Wn.PERMISSION_DENIED:return ve.PERMISSION_DENIED;case Wn.FAILED_PRECONDITION:return ve.FAILED_PRECONDITION;case Wn.ABORTED:return ve.ABORTED;case Wn.OUT_OF_RANGE:return ve.OUT_OF_RANGE;case Wn.UNIMPLEMENTED:return ve.UNIMPLEMENTED;case Wn.DATA_LOSS:return ve.DATA_LOSS;default:return it(39323,{code:t})}}(jt=Wn||(Wn={}))[jt.OK=0]="OK",jt[jt.CANCELLED=1]="CANCELLED",jt[jt.UNKNOWN=2]="UNKNOWN",jt[jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jt[jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jt[jt.NOT_FOUND=5]="NOT_FOUND",jt[jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",jt[jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",jt[jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",jt[jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jt[jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jt[jt.ABORTED=10]="ABORTED",jt[jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",jt[jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",jt[jt.INTERNAL=13]="INTERNAL",jt[jt.UNAVAILABLE=14]="UNAVAILABLE",jt[jt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kq(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nq=new ul([4294967295,4294967295],0);function CC(t){const e=kq().encode(t),n=new U5;return n.update(e),new Uint8Array(n.digest())}function kC(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ul([n,r],0),new ul([i,a],0)]}class VE{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ih(`Invalid padding: ${n}`);if(r<0)throw new Ih(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ih(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ih(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ul.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(ul.fromNumber(r)));return i.compare(Nq)===1&&(i=new ul([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=CC(e),[r,i]=kC(n);for(let a=0;a<this.hashCount;a++){const s=this.ye(r,i,a);if(!this.we(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new VE(a,i,n);return r.forEach(o=>s.insert(o)),s}insert(e){if(this.ge===0)return;const n=CC(e),[r,i]=kC(n);for(let a=0;a<this.hashCount;a++){const s=this.ye(r,i,a);this.Se(s)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ih extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,zm.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new gx(lt.min(),i,new An(_t),uo(),St())}}class zm{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new zm(r,n,St(),St(),St())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class P3{constructor(e,n){this.targetId=e,this.Ce=n}}class C3{constructor(e,n,r=Pr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class NC{constructor(){this.ve=0,this.Fe=OC(),this.Me=Pr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=St(),n=St(),r=St();return this.Fe.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:it(38017,{changeType:a})}}),new zm(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=OC()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,zt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Oq{constructor(e){this.Ge=e,this.ze=new Map,this.je=uo(),this.Je=Gg(),this.He=Gg(),this.Ye=new An(_t)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:it(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const a=i.target;if(x_(a))if(r===0){const s=new Xe(a.path);this.et(n,s,Fr.newNoDocument(s,lt.min()))}else zt(r===1,20013,{expectedCount:r});else{const s=this._t(n);if(s!==r){const o=this.ut(e),l=o?this.ct(o,e,s):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let s,o;try{s=vl(r).toUint8Array()}catch(l){if(l instanceof e3)return Dp("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new VE(s,i,a)}catch(l){return Dp(l instanceof Ih?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(a=>{const s=this.Ge.ht(),o=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.et(n,a,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((a,s)=>{const o=this.ot(s);if(o){if(a.current&&x_(o.target)){const l=new Xe(o.target.path);this.It(l).has(s)||this.Et(s,l)||this.et(s,l,Fr.newNoDocument(l,e))}a.Be&&(n.set(s,a.ke()),a.qe())}});let r=St();this.He.forEach((a,s)=>{let o=!0;s.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(a))}),this.je.forEach((a,s)=>s.setReadTime(e));const i=new gx(e,n,this.Ye,this.je,r);return this.je=uo(),this.Je=Gg(),this.He=Gg(),this.Ye=new An(_t),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new NC,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ar(_t),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ar(_t),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ve("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new NC),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Gg(){return new An(Xe.comparator)}function OC(){return new An(Xe.comparator)}const Iq={asc:"ASCENDING",desc:"DESCENDING"},Dq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Mq={and:"AND",or:"OR"};class Rq{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function __(t,e){return t.useProto3Json||lx(e)?e:{value:e}}function wv(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function k3(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function $q(t,e){return wv(t,e.toTimestamp())}function xs(t){return zt(!!t,49232),lt.fromTimestamp(function(n){const r=yl(n);return new un(r.seconds,r.nanos)}(t))}function FE(t,e){return S_(t,e).canonicalString()}function S_(t,e){const n=function(i){return new nn(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function N3(t){const e=nn.fromString(t);return zt(R3(e),10190,{key:e.toString()}),e}function E_(t,e){return FE(t.databaseId,e.path)}function hw(t,e){const n=N3(e);if(n.get(1)!==t.databaseId.projectId)throw new Re(ve.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Re(ve.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Xe(I3(n))}function O3(t,e){return FE(t.databaseId,e)}function Lq(t){const e=N3(t);return e.length===4?nn.emptyPath():I3(e)}function A_(t){return new nn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function I3(t){return zt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function IC(t,e,n){return{name:E_(t,e),fields:n.value.mapValue.fields}}function zq(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:it(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(u,f){return u.useProto3Json?(zt(f===void 0||typeof f=="string",58123),Pr.fromBase64String(f||"")):(zt(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Pr.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&function(u){const f=u.code===void 0?ve.UNKNOWN:T3(u.code);return new Re(f,u.message||"")}(s);n=new C3(r,i,a,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=hw(t,r.document.name),a=xs(r.document.updateTime),s=r.document.createTime?xs(r.document.createTime):lt.min(),o=new gi({mapValue:{fields:r.document.fields}}),l=Fr.newFoundDocument(i,a,s,o),u=r.targetIds||[],f=r.removedTargetIds||[];n=new Oy(u,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=hw(t,r.document),a=r.readTime?xs(r.readTime):lt.min(),s=Fr.newNoDocument(i,a),o=r.removedTargetIds||[];n=new Oy([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=hw(t,r.document),a=r.removedTargetIds||[];n=new Oy([],a,i,null)}else{if(!("filter"in e))return it(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,s=new Pq(i,a),o=r.targetId;n=new P3(o,s)}}return n}function Vq(t,e){let n;if(e instanceof Lm)n={update:IC(t,e.key,e.value)};else if(e instanceof mx)n={delete:E_(t,e.key)};else if(e instanceof Tl)n={update:IC(t,e.key,e.data),updateMask:Yq(e.fieldMask)};else{if(!(e instanceof Aq))return it(16599,{Vt:e.type});n={verify:E_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,s){const o=s.transform;if(o instanceof xv)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof zp)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Vp)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof bv)return{fieldPath:s.field.canonicalString(),increment:o.Ae};throw it(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:$q(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:it(27497)}(t,e.precondition)),n}function Fq(t,e){return t&&t.length>0?(zt(e!==void 0,14353),t.map(n=>function(i,a){let s=i.updateTime?xs(i.updateTime):xs(a);return s.isEqual(lt.min())&&(s=xs(a)),new _q(s,i.transformResults||[])}(n,e))):[]}function Bq(t,e){return{documents:[O3(t,e.path)]}}function Uq(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=O3(t,i);const a=function(u){if(u.length!==0)return M3(Ha.create(u,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const s=function(u){if(u.length!==0)return u.map(f=>function(h){return{field:Lu(h.field),direction:qq(h.dir)}}(f))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=__(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:i}}function Wq(t){let e=Lq(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){zt(r===1,65062);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let a=[];n.where&&(a=function(d){const h=D3(d);return h instanceof Ha&&u3(h)?h.getFilters():[h]}(n.where));let s=[];n.orderBy&&(s=function(d){return d.map(h=>function(v){return new vv(zu(v.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(h))}(n.orderBy));let o=null;n.limit&&(o=function(d){let h;return h=typeof d=="object"?d.value:d,lx(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(d){const h=!!d.before,p=d.values||[];return new yv(p,h)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const h=!d.before,p=d.values||[];return new yv(p,h)}(n.endAt)),cq(e,i,s,a,o,"F",l,u)}function Kq(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return it(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function D3(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=zu(n.unaryFilter.field);return Hn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=zu(n.unaryFilter.field);return Hn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=zu(n.unaryFilter.field);return Hn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=zu(n.unaryFilter.field);return Hn.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return it(61313);default:return it(60726)}}(t):t.fieldFilter!==void 0?function(n){return Hn.create(zu(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return it(58110);default:return it(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ha.create(n.compositeFilter.filters.map(r=>D3(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return it(1026)}}(n.compositeFilter.op))}(t):it(30097,{filter:t})}function qq(t){return Iq[t]}function Hq(t){return Dq[t]}function Gq(t){return Mq[t]}function Lu(t){return{fieldPath:t.canonicalString()}}function zu(t){return Er.fromServerFormat(t.fieldPath)}function M3(t){return t instanceof Hn?function(n){if(n.op==="=="){if(bC(n.value))return{unaryFilter:{field:Lu(n.field),op:"IS_NAN"}};if(xC(n.value))return{unaryFilter:{field:Lu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(bC(n.value))return{unaryFilter:{field:Lu(n.field),op:"IS_NOT_NAN"}};if(xC(n.value))return{unaryFilter:{field:Lu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lu(n.field),op:Hq(n.op),value:n.value}}}(t):t instanceof Ha?function(n){const r=n.getFilters().map(i=>M3(i));return r.length===1?r[0]:{compositeFilter:{op:Gq(n.op),filters:r}}}(t):it(54877,{filter:t})}function Yq(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function R3(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,n,r,i,a=lt.min(),s=lt.min(),o=Pr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new Qo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Qo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xq{constructor(e){this.yt=e}}function Qq(t){const e=Wq({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?w_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zq{constructor(){this.Cn=new Jq}addToCollectionParentIndex(e,n){return this.Cn.add(n),we.resolve()}getCollectionParents(e,n){return we.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return we.resolve()}deleteFieldIndex(e,n){return we.resolve()}deleteAllFieldIndexes(e){return we.resolve()}createTargetIndexes(e,n){return we.resolve()}getDocumentsMatchingTarget(e,n){return we.resolve(null)}getIndexType(e,n){return we.resolve(0)}getFieldIndexes(e,n){return we.resolve([])}getNextCollectionGroupToUpdate(e){return we.resolve(null)}getMinOffset(e,n){return we.resolve(gl.min())}getMinOffsetFromCollectionGroup(e,n){return we.resolve(gl.min())}updateCollectionGroup(e,n,r){return we.resolve()}updateIndexEntries(e,n){return we.resolve()}}class Jq{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ar(nn.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ar(nn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$3=41943040;class pi{static withCacheSize(e){return new pi(e,pi.DEFAULT_COLLECTION_PERCENTILE,pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pi.DEFAULT_COLLECTION_PERCENTILE=10,pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pi.DEFAULT=new pi($3,pi.DEFAULT_COLLECTION_PERCENTILE,pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pi.DISABLED=new pi(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Md(0)}static cr(){return new Md(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="LruGarbageCollector",L3=1048576;function RC([t,e],[n,r]){const i=_t(t,n);return i===0?_t(e,r):i}class eH{constructor(e){this.Ir=e,this.buffer=new ar(RC),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();RC(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class tH{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ve(MC,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Af(n)?Ve(MC,"Ignoring IndexedDB error during garbage collection: ",n):await Ef(n)}await this.Vr(3e5)})}}class nH{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return we.resolve(ox.ce);const r=new eH(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),we.resolve(DC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),DC):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,a,s,o,l,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,s=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,o=Date.now(),this.removeTargets(e,r,n))).next(d=>(a=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(u=Date.now(),Ru()<=wt.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(o-s)+`ms
	Removed ${a} targets in `+(l-o)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-f}ms`),we.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:d})))}}function rH(t,e){return new nH(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iH{constructor(){this.changes=new nu(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Fr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?we.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aH{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sH{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Jh(r.mutation,i,zi.empty(),un.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,St()).next(()=>r))}getLocalViewOfDocuments(e,n,r=St()){const i=xc();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(a=>{let s=Oh();return a.forEach((o,l)=>{s=s.insert(o,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=xc();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,St()))}populateOverlays(e,n,r){const i=[];return r.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((s,o)=>{n.set(s,o)})})}computeViews(e,n,r,i){let a=uo();const s=Zh(),o=function(){return Zh()}();return n.forEach((l,u)=>{const f=r.get(u.key);i.has(u.key)&&(f===void 0||f.mutation instanceof Tl)?a=a.insert(u.key,u):f!==void 0?(s.set(u.key,f.mutation.getFieldMask()),Jh(f.mutation,u,f.mutation.getFieldMask(),un.now())):s.set(u.key,zi.empty())}),this.recalculateAndSaveOverlays(e,a).next(l=>(l.forEach((u,f)=>s.set(u,f)),n.forEach((u,f)=>o.set(u,new aH(f,s.get(u)??null))),o))}recalculateAndSaveOverlays(e,n){const r=Zh();let i=new An((s,o)=>s-o),a=St();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const o of s)o.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let f=r.get(l)||zi.empty();f=o.applyToLocalView(u,f),r.set(l,f);const d=(i.get(o.batchId)||St()).add(l);i=i.insert(o.batchId,d)})}).next(()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,f=l.value,d=x3();f.forEach(h=>{if(!a.has(h)){const p=A3(n.get(h),r.get(h));p!==null&&d.set(h,p),a=a.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,d))}return we.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return Xe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):p3(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):we.resolve(xc());let o=Mp,l=a;return s.next(u=>we.forEach(u,(f,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),a.get(f)?we.resolve():this.remoteDocumentCache.getEntry(e,f).next(h=>{l=l.insert(f,h)}))).next(()=>this.populateOverlays(e,u,a)).next(()=>this.computeViews(e,l,u,St())).next(f=>({batchId:o,changes:v3(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Xe(n)).next(r=>{let i=Oh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let s=Oh();return this.indexManager.getCollectionParents(e,a).next(o=>we.forEach(o,l=>{const u=function(d,h){return new $m(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(f=>{f.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i))).next(s=>{a.forEach((l,u)=>{const f=u.getKey();s.get(f)===null&&(s=s.insert(f,Fr.newInvalidDocument(f)))});let o=Oh();return s.forEach((l,u)=>{const f=a.get(l);f!==void 0&&Jh(f.mutation,u,zi.empty(),un.now()),fx(n,u)&&(o=o.insert(l,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oH{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return we.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:xs(i.createTime)}}(n)),we.resolve()}getNamedQuery(e,n){return we.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:Qq(i.bundledQuery),readTime:xs(i.readTime)}}(n)),we.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lH{constructor(){this.overlays=new An(Xe.comparator),this.qr=new Map}getOverlay(e,n){return we.resolve(this.overlays.get(n))}getOverlays(e,n){const r=xc();return we.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,a)=>{this.St(e,n,a)}),we.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(r)),we.resolve()}getOverlaysForCollection(e,n,r){const i=xc(),a=n.length+1,s=new Xe(n.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===a&&l.largestBatchId>r&&i.set(l.getKey(),l)}return we.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new An((u,f)=>u-f);const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let f=a.get(u.largestBatchId);f===null&&(f=xc(),a=a.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const o=xc(),l=a.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,f)=>o.set(u,f)),!(o.size()>=i)););return we.resolve(o)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Tq(n,r));let a=this.qr.get(n);a===void 0&&(a=St(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cH{constructor(){this.sessionToken=Pr.EMPTY_BYTE_STRING}getSessionToken(e){return we.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,we.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(){this.Qr=new ar(dr.$r),this.Ur=new ar(dr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new dr(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new dr(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Xe(new nn([])),r=new dr(n,e),i=new dr(n,e+1),a=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),a.push(s.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Xe(new nn([])),r=new dr(n,e),i=new dr(n,e+1);let a=St();return this.Ur.forEachInRange([r,i],s=>{a=a.add(s.key)}),a}containsKey(e){const n=new dr(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class dr{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Xe.comparator(e.key,n.key)||_t(e.Yr,n.Yr)}static Kr(e,n){return _t(e.Yr,n.Yr)||Xe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uH{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ar(dr.$r)}checkEmpty(e){return we.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new jq(a,n,r,i);this.mutationQueue.push(s);for(const o of i)this.Zr=this.Zr.add(new dr(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return we.resolve(s)}lookupMutationBatch(e,n){return we.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),a=i<0?0:i;return we.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return we.resolve(this.mutationQueue.length===0?IE:this.tr-1)}getAllMutationBatches(e){return we.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new dr(n,0),i=new dr(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],s=>{const o=this.Xr(s.Yr);a.push(o)}),we.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ar(_t);return n.forEach(i=>{const a=new dr(i,0),s=new dr(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,s],o=>{r=r.add(o.Yr)})}),we.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;Xe.isDocumentKey(a)||(a=a.child(""));const s=new dr(new Xe(a),0);let o=new ar(_t);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(o=o.add(l.Yr)),!0)},s),we.resolve(this.ti(o))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){zt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return we.forEach(n.mutations,i=>{const a=new dr(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new dr(n,0),i=this.Zr.firstAfterOrEqual(r);return we.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,we.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dH{constructor(e){this.ri=e,this.docs=function(){return new An(Xe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return we.resolve(r?r.document.mutableCopy():Fr.newInvalidDocument(n))}getEntries(e,n){let r=uo();return n.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Fr.newInvalidDocument(i))}),we.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=uo();const s=n.path,o=new Xe(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:f}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||FK(VK(f),r)<=0||(i.has(f.key)||fx(n,f))&&(a=a.insert(f.key,f.mutableCopy()))}return we.resolve(a)}getAllFromCollectionGroup(e,n,r,i){it(9500)}ii(e,n){return we.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new fH(this)}getSize(e){return we.resolve(this.size)}}class fH extends iH{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),we.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hH{constructor(e){this.persistence=e,this.si=new nu(n=>RE(n),$E),this.lastRemoteSnapshotVersion=lt.min(),this.highestTargetId=0,this.oi=0,this._i=new BE,this.targetCount=0,this.ai=Md.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),we.resolve()}getLastRemoteSnapshotVersion(e){return we.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return we.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),we.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),we.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Md(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,we.resolve()}updateTargetData(e,n){return this.Pr(n),we.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,we.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.si.forEach((s,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.si.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),we.waitFor(a).next(()=>i)}getTargetCount(e){return we.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return we.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),we.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(s=>{a.push(i.markPotentiallyOrphaned(e,s))}),we.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),we.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return we.resolve(r)}containsKey(e,n){return we.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e,n){this.ui={},this.overlays={},this.ci=new ox(0),this.li=!1,this.li=!0,this.hi=new cH,this.referenceDelegate=e(this),this.Pi=new hH(this),this.indexManager=new Zq,this.remoteDocumentCache=function(i){return new dH(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Xq(n),this.Ii=new oH(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new lH,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new uH(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Ve("MemoryPersistence","Starting transaction:",e);const i=new pH(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ai(e,n){return we.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class pH extends UK{constructor(e){super(),this.currentSequenceNumber=e}}class UE{constructor(e){this.persistence=e,this.Ri=new BE,this.Vi=null}static mi(e){return new UE(e)}get fi(){if(this.Vi)return this.Vi;throw it(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),we.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),we.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),we.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.fi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return we.forEach(this.fi,r=>{const i=Xe.fromPath(r);return this.gi(e,i).next(a=>{a||n.removeEntry(i,lt.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return we.or([()=>we.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class _v{constructor(e,n){this.persistence=e,this.pi=new nu(r=>qK(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=rH(this,n)}static mi(e,n){return new _v(e,n)}Ei(){}di(e){return we.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return we.forEach(this.pi,(r,i)=>this.br(e,r,i).next(a=>a?we.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,n).next(o=>{o||(r++,a.removeEntry(s,lt.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),we.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),we.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),we.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),we.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Cy(e.data.value)),n}br(e,n,r){return we.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return we.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=St(),i=St();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new WE(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mH{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gH{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Q7()?8:WK(Ei())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.ys(e,n).next(s=>{a.result=s}).next(()=>{if(!a.result)return this.ws(e,n,i,r).next(s=>{a.result=s})}).next(()=>{if(a.result)return;const s=new mH;return this.Ss(e,n,s).next(o=>{if(a.result=o,this.Vs)return this.bs(e,n,s,o.size)})}).next(()=>a.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Ru()<=wt.DEBUG&&Ve("QueryEngine","SDK will not create cache indexes for query:",$u(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),we.resolve()):(Ru()<=wt.DEBUG&&Ve("QueryEngine","Query:",$u(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Ru()<=wt.DEBUG&&Ve("QueryEngine","The SDK decides to create cache indexes for query:",$u(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vs(n))):we.resolve())}ys(e,n){if(EC(n))return we.resolve(null);let r=vs(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=w_(n,null,"F"),r=vs(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const s=St(...a);return this.ps.getDocuments(e,s).next(o=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Ds(n,o);return this.Cs(n,u,s,l.readTime)?this.ys(e,w_(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,r,i){return EC(n)||i.isEqual(lt.min())?we.resolve(null):this.ps.getDocuments(e,r).next(a=>{const s=this.Ds(n,a);return this.Cs(n,s,r,i)?we.resolve(null):(Ru()<=wt.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$u(n)),this.vs(e,s,n,zK(i,Mp)).next(o=>o))})}Ds(e,n){let r=new ar(g3(e));return n.forEach((i,a)=>{fx(e,a)&&(r=r.add(a))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,n,r){return Ru()<=wt.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",$u(n)),this.ps.getDocumentsMatchingQuery(e,n,gl.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(a=>(n.forEach(s=>{a=a.insert(s.key,s)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="LocalStore",yH=3e8;class vH{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new An(_t),this.xs=new nu(a=>RE(a),$E),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sH(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function xH(t,e,n,r){return new vH(t,e,n,r)}async function V3(t,e){const n=dt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const s=[],o=[];let l=St();for(const u of i){s.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}for(const u of a){o.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:s,addedBatchIds:o}))})})}function bH(t,e){const n=dt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,u,f){const d=u.batch,h=d.keys();let p=we.resolve();return h.forEach(v=>{p=p.next(()=>f.getEntry(l,v)).next(y=>{const b=u.docVersions.get(v);zt(b!==null,48541),y.version.compareTo(b)<0&&(d.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),f.addEntry(y)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(l,d))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=St();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function F3(t){const e=dt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function wH(t,e){const n=dt(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const o=[];e.targetChanges.forEach((f,d)=>{const h=i.get(d);if(!h)return;o.push(n.Pi.removeMatchingKeys(a,f.removedDocuments,d).next(()=>n.Pi.addMatchingKeys(a,f.addedDocuments,d)));let p=h.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(Pr.EMPTY_BYTE_STRING,lt.min()).withLastLimboFreeSnapshotVersion(lt.min()):f.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(f.resumeToken,r)),i=i.insert(d,p),function(y,b,x){return y.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=yH?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(h,p,f)&&o.push(n.Pi.updateTargetData(a,p))});let l=uo(),u=St();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(a,f))}),o.push(_H(a,s,e.documentUpdates).next(f=>{l=f.ks,u=f.qs})),!r.isEqual(lt.min())){const f=n.Pi.getLastRemoteSnapshotVersion(a).next(d=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r));o.push(f)}return we.waitFor(o).next(()=>s.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,l,u)).next(()=>l)}).then(a=>(n.Ms=i,a))}function _H(t,e,n){let r=St(),i=St();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let s=uo();return n.forEach((o,l)=>{const u=a.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),l.isNoDocument()&&l.version.isEqual(lt.min())?(e.removeEntry(o,l.readTime),s=s.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(o,l)):Ve(KE,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)}),{ks:s,qs:i}})}function SH(t,e){const n=dt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=IE),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function EH(t,e){const n=dt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(a=>a?(i=a,we.resolve(i)):n.Pi.allocateTargetId(r).next(s=>(i=new Qo(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function j_(t,e,n){const r=dt(t),i=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Af(s))throw s;Ve(KE,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function $C(t,e,n){const r=dt(t);let i=lt.min(),a=St();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,f){const d=dt(l),h=d.xs.get(f);return h!==void 0?we.resolve(d.Ms.get(h)):d.Pi.getTargetData(u,f)}(r,s,vs(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,o.targetId).next(l=>{a=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,n?i:lt.min(),n?a:St())).next(o=>(AH(r,dq(e),o),{documents:o,Qs:a})))}function AH(t,e,n){let r=t.Os.get(e)||lt.min();n.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.Os.set(e,r)}class LC{constructor(){this.activeTargetIds=yq()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jH{constructor(){this.Mo=new LC,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new LC,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TH{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC="ConnectivityMonitor";class VC{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ve(zC,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ve(zC,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yg=null;function T_(){return Yg===null?Yg=function(){return 268435456+Math.round(2147483648*Math.random())}():Yg++,"0x"+Yg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw="RestConnection",PH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class CH{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===mv?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,a){const s=T_(),o=this.zo(e,n.toUriEncodedString());Ve(pw,`Sending RPC '${e}' ${s}:`,o,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,a);const{host:u}=new URL(o),f=rx(u);return this.Jo(e,o,l,r,f).then(d=>(Ve(pw,`Received RPC '${e}' ${s}: `,d),d),d=>{throw Dp(pw,`RPC '${e}' ${s} failed with error: `,d,"url: ",o,"request:",r),d})}Ho(e,n,r,i,a,s){return this.Go(e,n,r,i,a)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Sf}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}zo(e,n){const r=PH[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kH{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr="WebChannelConnection";class NH extends CH{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,a){const s=T_();return new Promise((o,l)=>{const u=new W5;u.setWithCredentials(!0),u.listenOnce(K5.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Py.NO_ERROR:const d=u.getResponseJson();Ve(Rr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Py.TIMEOUT:Ve(Rr,`RPC '${e}' ${s} timed out`),l(new Re(ve.DEADLINE_EXCEEDED,"Request time out"));break;case Py.HTTP_ERROR:const h=u.getStatus();if(Ve(Rr,`RPC '${e}' ${s} failed with status:`,h,"response text:",u.getResponseText()),h>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const v=p==null?void 0:p.error;if(v&&v.status&&v.message){const y=function(x){const _=x.toLowerCase().replace(/_/g,"-");return Object.values(ve).indexOf(_)>=0?_:ve.UNKNOWN}(v.status);l(new Re(y,v.message))}else l(new Re(ve.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Re(ve.UNAVAILABLE,"Connection failed."));break;default:it(9055,{l_:e,streamId:s,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Ve(Rr,`RPC '${e}' ${s} completed.`)}});const f=JSON.stringify(i);Ve(Rr,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",f,r,15)})}T_(e,n,r){const i=T_(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=G5(),o=H5(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const f=a.join("");Ve(Rr,`Creating RPC '${e}' stream ${i}: ${f}`,l);const d=s.createWebChannel(f,l);this.I_(d);let h=!1,p=!1;const v=new kH({Yo:b=>{p?Ve(Rr,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(h||(Ve(Rr,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),Ve(Rr,`RPC '${e}' stream ${i} sending:`,b),d.send(b))},Zo:()=>d.close()}),y=(b,x,_)=>{b.listen(x,E=>{try{_(E)}catch(P){setTimeout(()=>{throw P},0)}})};return y(d,Nh.EventType.OPEN,()=>{p||(Ve(Rr,`RPC '${e}' stream ${i} transport opened.`),v.o_())}),y(d,Nh.EventType.CLOSE,()=>{p||(p=!0,Ve(Rr,`RPC '${e}' stream ${i} transport closed`),v.a_(),this.E_(d))}),y(d,Nh.EventType.ERROR,b=>{p||(p=!0,Dp(Rr,`RPC '${e}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),v.a_(new Re(ve.UNAVAILABLE,"The operation could not be completed")))}),y(d,Nh.EventType.MESSAGE,b=>{var x;if(!p){const _=b.data[0];zt(!!_,16349);const E=_,P=(E==null?void 0:E.error)||((x=E[0])==null?void 0:x.error);if(P){Ve(Rr,`RPC '${e}' stream ${i} received error:`,P);const A=P.status;let j=function(N){const D=Wn[N];if(D!==void 0)return T3(D)}(A),S=P.message;j===void 0&&(j=ve.INTERNAL,S="Unknown error status: "+A+" with message "+P.message),p=!0,v.a_(new Re(j,S)),d.close()}else Ve(Rr,`RPC '${e}' stream ${i} received:`,_),v.u_(_)}}),y(o,q5.STAT_EVENT,b=>{b.stat===p_.PROXY?Ve(Rr,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===p_.NOPROXY&&Ve(Rr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.__()},0),v}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function mw(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yx(t){return new Rq(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC="PersistentStream";class U3{constructor(e,n,r,i,a,s,o,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new B3(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ve.RESOURCE_EXHAUSTED?(co(n.toString()),co("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ve.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new Re(ve.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Ve(FC,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Ve(FC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OH extends U3{constructor(e,n,r,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=zq(this.serializer,e),r=function(a){if(!("targetChange"in a))return lt.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?lt.min():s.readTime?xs(s.readTime):lt.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=A_(this.serializer),n.addTarget=function(a,s){let o;const l=s.target;if(o=x_(l)?{documents:Bq(a,l)}:{query:Uq(a,l).ft},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=k3(a,s.resumeToken);const u=__(a,s.expectedCount);u!==null&&(o.expectedCount=u)}else if(s.snapshotVersion.compareTo(lt.min())>0){o.readTime=wv(a,s.snapshotVersion.toTimestamp());const u=__(a,s.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const r=Kq(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=A_(this.serializer),n.removeTarget=e,this.q_(n)}}class IH extends U3{constructor(e,n,r,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return zt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,zt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){zt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Fq(e.writeResults,e.commitTime),r=xs(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=A_(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Vq(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DH{}class MH extends DH{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Re(ve.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection.Go(e,S_(n,r),i,a,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Re(ve.UNKNOWN,a.toString())})}Ho(e,n,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Ho(e,S_(n,r),i,s,o,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ve.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Re(ve.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class RH{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(co(n),this.aa=!1):Ve("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc="RemoteStore";class $H{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(s=>{r.enqueueAndForget(async()=>{ru(this)&&(Ve(Uc,"Restarting streams for network reachability change."),await async function(l){const u=dt(l);u.Ea.add(4),await Vm(u),u.Ra.set("Unknown"),u.Ea.delete(4),await vx(u)}(this))})}),this.Ra=new RH(r,i)}}async function vx(t){if(ru(t))for(const e of t.da)await e(!0)}async function Vm(t){for(const e of t.da)await e(!1)}function W3(t,e){const n=dt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),YE(n)?GE(n):jf(n).O_()&&HE(n,e))}function qE(t,e){const n=dt(t),r=jf(n);n.Ia.delete(e),r.O_()&&K3(n,e),n.Ia.size===0&&(r.O_()?r.L_():ru(n)&&n.Ra.set("Unknown"))}function HE(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(lt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}jf(t).Y_(e)}function K3(t,e){t.Va.Ue(e),jf(t).Z_(e)}function GE(t){t.Va=new Oq({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),jf(t).start(),t.Ra.ua()}function YE(t){return ru(t)&&!jf(t).x_()&&t.Ia.size>0}function ru(t){return dt(t).Ea.size===0}function q3(t){t.Va=void 0}async function LH(t){t.Ra.set("Online")}async function zH(t){t.Ia.forEach((e,n)=>{HE(t,e)})}async function VH(t,e){q3(t),YE(t)?(t.Ra.ha(e),GE(t)):t.Ra.set("Unknown")}async function FH(t,e,n){if(t.Ra.set("Online"),e instanceof C3&&e.state===2&&e.cause)try{await async function(i,a){const s=a.cause;for(const o of a.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Ia.delete(o),i.Va.removeTarget(o))}(t,e)}catch(r){Ve(Uc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Sv(t,r)}else if(e instanceof Oy?t.Va.Ze(e):e instanceof P3?t.Va.st(e):t.Va.tt(e),!n.isEqual(lt.min()))try{const r=await F3(t.localStore);n.compareTo(r)>=0&&await function(a,s){const o=a.Va.Tt(s);return o.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const f=a.Ia.get(u);f&&a.Ia.set(u,f.withResumeToken(l.resumeToken,s))}}),o.targetMismatches.forEach((l,u)=>{const f=a.Ia.get(l);if(!f)return;a.Ia.set(l,f.withResumeToken(Pr.EMPTY_BYTE_STRING,f.snapshotVersion)),K3(a,l);const d=new Qo(f.target,l,u,f.sequenceNumber);HE(a,d)}),a.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){Ve(Uc,"Failed to raise snapshot:",r),await Sv(t,r)}}async function Sv(t,e,n){if(!Af(e))throw e;t.Ea.add(1),await Vm(t),t.Ra.set("Offline"),n||(n=()=>F3(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ve(Uc,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await vx(t)})}function H3(t,e){return e().catch(n=>Sv(t,n,e))}async function xx(t){const e=dt(t),n=bl(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:IE;for(;BH(e);)try{const i=await SH(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,UH(e,i)}catch(i){await Sv(e,i)}G3(e)&&Y3(e)}function BH(t){return ru(t)&&t.Ta.length<10}function UH(t,e){t.Ta.push(e);const n=bl(t);n.O_()&&n.X_&&n.ea(e.mutations)}function G3(t){return ru(t)&&!bl(t).x_()&&t.Ta.length>0}function Y3(t){bl(t).start()}async function WH(t){bl(t).ra()}async function KH(t){const e=bl(t);for(const n of t.Ta)e.ea(n.mutations)}async function qH(t,e,n){const r=t.Ta.shift(),i=zE.from(r,e,n);await H3(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await xx(t)}async function HH(t,e){e&&bl(t).X_&&await async function(r,i){if(function(s){return Cq(s)&&s!==ve.ABORTED}(i.code)){const a=r.Ta.shift();bl(r).B_(),await H3(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await xx(r)}}(t,e),G3(t)&&Y3(t)}async function BC(t,e){const n=dt(t);n.asyncQueue.verifyOperationInProgress(),Ve(Uc,"RemoteStore received new credentials");const r=ru(n);n.Ea.add(3),await Vm(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await vx(n)}async function GH(t,e){const n=dt(t);e?(n.Ea.delete(2),await vx(n)):e||(n.Ea.add(2),await Vm(n),n.Ra.set("Unknown"))}function jf(t){return t.ma||(t.ma=function(n,r,i){const a=dt(n);return a.sa(),new OH(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Xo:LH.bind(null,t),t_:zH.bind(null,t),r_:VH.bind(null,t),H_:FH.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),YE(t)?GE(t):t.Ra.set("Unknown")):(await t.ma.stop(),q3(t))})),t.ma}function bl(t){return t.fa||(t.fa=function(n,r,i){const a=dt(n);return a.sa(),new IH(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:WH.bind(null,t),r_:HH.bind(null,t),ta:KH.bind(null,t),na:qH.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await xx(t)):(await t.fa.stop(),t.Ta.length>0&&(Ve(Uc,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new dl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const s=Date.now()+r,o=new XE(e,n,s,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Re(ve.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function QE(t,e){if(co("AsyncQueue",`${e}: ${t}`),Af(t))return new Re(ve.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{static emptySet(e){return new yd(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Xe.comparator(n.key,r.key):(n,r)=>Xe.comparator(n.key,r.key),this.keyedMap=Oh(),this.sortedSet=new An(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof yd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new yd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(){this.ga=new An(Xe.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):it(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Rd{constructor(e,n,r,i,a,s,o,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,a){const s=[];return n.forEach(o=>{s.push({type:0,doc:o})}),new Rd(e,n,yd.emptySet(n),s,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dx(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YH{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class XH{constructor(){this.queries=WC(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=dt(n),a=i.queries;i.queries=WC(),a.forEach((s,o)=>{for(const l of o.Sa)l.onError(r)})})(this,new Re(ve.ABORTED,"Firestore shutting down"))}}function WC(){return new nu(t=>m3(t),dx)}async function X3(t,e){const n=dt(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new YH,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const o=QE(s,`Initialization of query '${$u(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&ZE(n)}async function Q3(t,e){const n=dt(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const s=a.Sa.indexOf(e);s>=0&&(a.Sa.splice(s,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function QH(t,e){const n=dt(t);let r=!1;for(const i of e){const a=i.query,s=n.queries.get(a);if(s){for(const o of s.Sa)o.Fa(i)&&(r=!0);s.wa=i}}r&&ZE(n)}function ZH(t,e,n){const r=dt(t),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(n);r.queries.delete(e)}function ZE(t){t.Ca.forEach(e=>{e.next()})}var P_,KC;(KC=P_||(P_={})).Ma="default",KC.Cache="cache";class Z3{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Rd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Rd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==P_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(e){this.key=e}}class e${constructor(e){this.key=e}}class JH{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=St(),this.mutatedKeys=St(),this.eu=g3(e),this.tu=new yd(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new UC,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,s=i,o=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,d)=>{const h=i.get(f),p=fx(this.query,d)?d:null,v=!!h&&this.mutatedKeys.has(h.key),y=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let b=!1;h&&p?h.data.isEqual(p.data)?v!==y&&(r.track({type:3,doc:p}),b=!0):this.su(h,p)||(r.track({type:2,doc:p}),b=!0,(l&&this.eu(p,l)>0||u&&this.eu(p,u)<0)&&(o=!0)):!h&&p?(r.track({type:0,doc:p}),b=!0):h&&!p&&(r.track({type:1,doc:h}),b=!0,(l||u)&&(o=!0)),b&&(p?(s=s.add(p),a=y?a.add(f):a.delete(f)):(s=s.delete(f),a=a.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),a=a.delete(f.key),r.track({type:1,doc:f})}return{tu:s,iu:r,Cs:o,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((f,d)=>function(p,v){const y=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it(20277,{Rt:b})}};return y(p)-y(v)}(f.type,d.type)||this.eu(f.doc,d.doc)),this.ou(r),i=i??!1;const o=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,s.length!==0||u?{snapshot:new Rd(this.query,e.tu,a,s,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new UC,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=St(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new e$(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new J3(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=St();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Rd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const JE="SyncEngine";class eG{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class tG{constructor(e){this.key=e,this.hu=!1}}class nG{constructor(e,n,r,i,a,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new nu(o=>m3(o),dx),this.Iu=new Map,this.Eu=new Set,this.du=new An(Xe.comparator),this.Au=new Map,this.Ru=new BE,this.Vu={},this.mu=new Map,this.fu=Md.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rG(t,e,n=!0){const r=s$(t);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await t$(r,e,n,!0),i}async function iG(t,e){const n=s$(t);await t$(n,e,!0,!1)}async function t$(t,e,n,r){const i=await EH(t.localStore,vs(e)),a=i.targetId,s=t.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await aG(t,e,a,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&W3(t.remoteStore,i),o}async function aG(t,e,n,r,i){t.pu=(d,h,p)=>async function(y,b,x,_){let E=b.view.ru(x);E.Cs&&(E=await $C(y.localStore,b.query,!1).then(({documents:S})=>b.view.ru(S,E)));const P=_&&_.targetChanges.get(b.targetId),A=_&&_.targetMismatches.get(b.targetId)!=null,j=b.view.applyChanges(E,y.isPrimaryClient,P,A);return HC(y,b.targetId,j.au),j.snapshot}(t,d,h,p);const a=await $C(t.localStore,e,!0),s=new JH(e,a.Qs),o=s.ru(a.documents),l=zm.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(o,t.isPrimaryClient,l);HC(t,n,u.au);const f=new eG(e,n,s);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function sG(t,e,n){const r=dt(t),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter(s=>!dx(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await j_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&qE(r.remoteStore,i.targetId),C_(r,i.targetId)}).catch(Ef)):(C_(r,i.targetId),await j_(r.localStore,i.targetId,!0))}async function oG(t,e){const n=dt(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),qE(n.remoteStore,r.targetId))}async function lG(t,e,n){const r=mG(t);try{const i=await function(s,o){const l=dt(s),u=un.now(),f=o.reduce((p,v)=>p.add(v.key),St());let d,h;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let v=uo(),y=St();return l.Ns.getEntries(p,f).next(b=>{v=b,v.forEach((x,_)=>{_.isValidDocument()||(y=y.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,v)).next(b=>{d=b;const x=[];for(const _ of o){const E=Eq(_,d.get(_.key).overlayedDocument);E!=null&&x.push(new Tl(_.key,E,o3(E.value.mapValue),Jr.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,x,o)}).next(b=>{h=b;const x=b.applyToLocalDocumentSet(d,y);return l.documentOverlayCache.saveOverlays(p,b.batchId,x)})}).then(()=>({batchId:h.batchId,changes:v3(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,l){let u=s.Vu[s.currentUser.toKey()];u||(u=new An(_t)),u=u.insert(o,l),s.Vu[s.currentUser.toKey()]=u}(r,i.batchId,n),await Fm(r,i.changes),await xx(r.remoteStore)}catch(i){const a=QE(i,"Failed to persist write");n.reject(a)}}async function n$(t,e){const n=dt(t);try{const r=await wH(n.localStore,e);e.targetChanges.forEach((i,a)=>{const s=n.Au.get(a);s&&(zt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?zt(s.hu,14607):i.removedDocuments.size>0&&(zt(s.hu,42227),s.hu=!1))}),await Fm(n,r,e)}catch(r){await Ef(r)}}function qC(t,e,n){const r=dt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((a,s)=>{const o=s.view.va(e);o.snapshot&&i.push(o.snapshot)}),function(s,o){const l=dt(s);l.onlineState=o;let u=!1;l.queries.forEach((f,d)=>{for(const h of d.Sa)h.va(o)&&(u=!0)}),u&&ZE(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function cG(t,e,n){const r=dt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),a=i&&i.key;if(a){let s=new An(Xe.comparator);s=s.insert(a,Fr.newNoDocument(a,lt.min()));const o=St().add(a),l=new gx(lt.min(),new Map,new An(_t),s,o);await n$(r,l),r.du=r.du.remove(a),r.Au.delete(e),eA(r)}else await j_(r.localStore,e,!1).then(()=>C_(r,e,n)).catch(Ef)}async function uG(t,e){const n=dt(t),r=e.batch.batchId;try{const i=await bH(n.localStore,e);i$(n,r,null),r$(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Fm(n,i)}catch(i){await Ef(i)}}async function dG(t,e,n){const r=dt(t);try{const i=await function(s,o){const l=dt(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return l.mutationQueue.lookupMutationBatch(u,o).next(d=>(zt(d!==null,37113),f=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,f,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>l.localDocuments.getDocuments(u,f))})}(r.localStore,e);i$(r,e,n),r$(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Fm(r,i)}catch(i){await Ef(i)}}function r$(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function i$(t,e,n){const r=dt(t);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function C_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||a$(t,r)})}function a$(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(qE(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),eA(t))}function HC(t,e,n){for(const r of n)r instanceof J3?(t.Ru.addReference(r.key,e),fG(t,r)):r instanceof e$?(Ve(JE,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||a$(t,r.key)):it(19791,{wu:r})}function fG(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Ve(JE,"New document in limbo: "+n),t.Eu.add(r),eA(t))}function eA(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Xe(nn.fromString(e)),r=t.fu.next();t.Au.set(r,new tG(n)),t.du=t.du.insert(n,r),W3(t.remoteStore,new Qo(vs(ux(n.path)),r,"TargetPurposeLimboResolution",ox.ce))}}async function Fm(t,e,n){const r=dt(t),i=[],a=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((o,l)=>{s.push(r.pu(l,e,n).then(u=>{var f;if((u||n)&&r.isPrimaryClient){const d=u?!u.fromCache:(f=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:f.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){i.push(u);const d=WE.As(l.targetId,u);a.push(d)}}))}),await Promise.all(s),r.Pu.H_(i),await async function(l,u){const f=dt(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>we.forEach(u,h=>we.forEach(h.Es,p=>f.persistence.referenceDelegate.addReference(d,h.targetId,p)).next(()=>we.forEach(h.ds,p=>f.persistence.referenceDelegate.removeReference(d,h.targetId,p)))))}catch(d){if(!Af(d))throw d;Ve(KE,"Failed to update sequence numbers: "+d)}for(const d of u){const h=d.targetId;if(!d.fromCache){const p=f.Ms.get(h),v=p.snapshotVersion,y=p.withLastLimboFreeSnapshotVersion(v);f.Ms=f.Ms.insert(h,y)}}}(r.localStore,a))}async function hG(t,e){const n=dt(t);if(!n.currentUser.isEqual(e)){Ve(JE,"User change. New user:",e.toKey());const r=await V3(n.localStore,e);n.currentUser=e,function(a,s){a.mu.forEach(o=>{o.forEach(l=>{l.reject(new Re(ve.CANCELLED,s))})}),a.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Fm(n,r.Ls)}}function pG(t,e){const n=dt(t),r=n.Au.get(e);if(r&&r.hu)return St().add(r.key);{let i=St();const a=n.Iu.get(e);if(!a)return i;for(const s of a){const o=n.Tu.get(s);i=i.unionWith(o.view.nu)}return i}}function s$(t){const e=dt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=n$.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cG.bind(null,e),e.Pu.H_=QH.bind(null,e.eventManager),e.Pu.yu=ZH.bind(null,e.eventManager),e}function mG(t){const e=dt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dG.bind(null,e),e}class Ev{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yx(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return xH(this.persistence,new gH,e.initialUser,this.serializer)}Cu(e){return new z3(UE.mi,this.serializer)}Du(e){return new jH}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ev.provider={build:()=>new Ev};class o$ extends Ev{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){zt(this.persistence.referenceDelegate instanceof _v,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new tH(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?pi.withCacheSize(this.cacheSizeBytes):pi.DEFAULT;return new z3(r=>_v.mi(r,n),this.serializer)}}class Av{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>qC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=hG.bind(null,this.syncEngine),await GH(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new XH}()}createDatastore(e){const n=yx(e.databaseInfo.databaseId),r=function(a){return new NH(a)}(e.databaseInfo);return function(a,s,o,l){return new MH(a,s,o,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,a,s,o){return new $H(r,i,a,s,o)}(this.localStore,this.datastore,e.asyncQueue,n=>qC(this.syncEngine,n,0),function(){return VC.v()?new VC:new TH}())}createSyncEngine(e,n){return function(i,a,s,o,l,u,f){const d=new nG(i,a,s,o,l,u);return f&&(d.gu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const a=dt(i);Ve(Uc,"RemoteStore shutting down."),a.Ea.add(5),await Vm(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Av.provider={build:()=>new Av};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l${constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):co("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl="FirestoreClient";class gG{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=hi.UNAUTHENTICATED,this.clientId=OE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async s=>{Ve(wl,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Ve(wl,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new dl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=QE(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function gw(t,e){t.asyncQueue.verifyOperationInProgress(),Ve(wl,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await V3(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function GC(t,e){t.asyncQueue.verifyOperationInProgress();const n=await yG(t);Ve(wl,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>BC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>BC(e.remoteStore,i)),t._onlineComponents=e}async function yG(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ve(wl,"Using user provided OfflineComponentProvider");try{await gw(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===ve.FAILED_PRECONDITION||i.code===ve.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Dp("Error using user provided cache. Falling back to memory cache: "+n),await gw(t,new Ev)}}else Ve(wl,"Using default OfflineComponentProvider"),await gw(t,new o$(void 0));return t._offlineComponents}async function c$(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ve(wl,"Using user provided OnlineComponentProvider"),await GC(t,t._uninitializedComponentsProvider._online)):(Ve(wl,"Using default OnlineComponentProvider"),await GC(t,new Av))),t._onlineComponents}function vG(t){return c$(t).then(e=>e.syncEngine)}async function k_(t){const e=await c$(t),n=e.eventManager;return n.onListen=rG.bind(null,e.syncEngine),n.onUnlisten=sG.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=iG.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=oG.bind(null,e.syncEngine),n}function xG(t,e,n={}){const r=new dl;return t.asyncQueue.enqueueAndForget(async()=>function(a,s,o,l,u){const f=new l$({next:h=>{f.Nu(),s.enqueueAndForget(()=>Q3(a,d));const p=h.docs.has(o);!p&&h.fromCache?u.reject(new Re(ve.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&h.fromCache&&l&&l.source==="server"?u.reject(new Re(ve.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),d=new Z3(ux(o.path),f,{includeMetadataChanges:!0,qa:!0});return X3(a,d)}(await k_(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u$(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bG="firestore.googleapis.com",XC=!0;class QC{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Re(ve.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bG,this.ssl=XC}else this.host=e.host,this.ssl=e.ssl??XC;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$3;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<L3)throw new Re(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LK("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=u$(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Re(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Re(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Re(ve.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tA{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new QC({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Re(ve.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Re(ve.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new QC(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new CK;switch(r.type){case"firstParty":return new OK(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Re(ve.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=YC.get(n);r&&(Ve("ComponentProvider","Removing Datastore"),YC.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Tf(this.firestore,e,this._query)}}class On{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new On(this.firestore,e,this._key)}toJSON(){return{type:On._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Rm(n,On._jsonSchema))return new On(e,r||null,new Xe(nn.fromString(n.referencePath)))}}On._jsonSchemaVersion="firestore/documentReference/1.0",On._jsonSchema={type:Gn("string",On._jsonSchemaVersion),referencePath:Gn("string")};class fl extends Tf{constructor(e,n,r){super(e,n,ux(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new On(this.firestore,null,new Xe(e))}withConverter(e){return new fl(this.firestore,e,this._path)}}function er(t,e,...n){if(t=yr(t),X5("collection","path",e),t instanceof tA){const r=nn.fromString(e,...n);return uC(r),new fl(t,null,r)}{if(!(t instanceof On||t instanceof fl))throw new Re(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(nn.fromString(e,...n));return uC(r),new fl(t.firestore,null,r)}}function hn(t,e,...n){if(t=yr(t),arguments.length===1&&(e=OE.newId()),X5("doc","path",e),t instanceof tA){const r=nn.fromString(e,...n);return cC(r),new On(t,null,new Xe(r))}{if(!(t instanceof On||t instanceof fl))throw new Re(ve.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(nn.fromString(e,...n));return cC(r),new On(t.firestore,t instanceof fl?t.converter:null,new Xe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="AsyncQueue";class JC{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new B3(this,"async_queue_retry"),this._c=()=>{const r=mw();r&&Ve(ZC,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=mw();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=mw();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new dl;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Af(e))throw e;Ve(ZC,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,co("INTERNAL UNHANDLED ERROR: ",ek(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=XE.createAndSchedule(this,e,n,r,a=>this.hc(a));return this.tc.push(i),i}uc(){this.nc&&it(47125,{Pc:ek(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function ek(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class fo extends tA{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new JC,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new JC(e),this._firestoreClient=void 0,await e}}}function wG(t,e,n){n||(n=mv);const r=_5(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),a=r.getOptions(n);if(kp(a,e))return i;throw new Re(ve.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Re(ve.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<L3)throw new Re(ve.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&rx(e.host)&&W7(e.host),r.initialize({options:e,instanceIdentifier:n})}function bx(t){if(t._terminated)throw new Re(ve.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||_G(t),t._firestoreClient}function _G(t){var r,i,a;const e=t._freezeSettings(),n=function(o,l,u,f){return new YK(o,l,u,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,u$(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new gG(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sa(Pr.fromBase64String(e))}catch(n){throw new Re(ve.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new sa(Pr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:sa._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Rm(e,sa._jsonSchema))return sa.fromBase64String(e.bytes)}}sa._jsonSchemaVersion="firestore/bytes/1.0",sa._jsonSchema={type:Gn("string",sa._jsonSchemaVersion),bytes:Gn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Re(ve.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Re(ve.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Re(ve.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return _t(this._lat,e._lat)||_t(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:bs._jsonSchemaVersion}}static fromJSON(e){if(Rm(e,bs._jsonSchema))return new bs(e.latitude,e.longitude)}}bs._jsonSchemaVersion="firestore/geoPoint/1.0",bs._jsonSchema={type:Gn("string",bs._jsonSchemaVersion),latitude:Gn("number"),longitude:Gn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ws._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Rm(e,ws._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new ws(e.vectorValues);throw new Re(ve.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ws._jsonSchemaVersion="firestore/vectorValue/1.0",ws._jsonSchema={type:Gn("string",ws._jsonSchemaVersion),vectorValues:Gn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SG=/^__.*__$/;class EG{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Tl(e,this.data,this.fieldMask,n,this.fieldTransforms):new Lm(e,this.data,n,this.fieldTransforms)}}class d${constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Tl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function f$(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it(40011,{Ac:t})}}class rA{constructor(e,n,r,i,a,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new rA({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return jv(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(f$(this.Ac)&&SG.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class AG{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||yx(e)}Cc(e,n,r,i=!1){return new rA({Ac:e,methodName:n,Dc:r,path:Er.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Um(t){const e=t._freezeSettings(),n=yx(t._databaseId);return new AG(t._databaseId,!!e.ignoreUndefinedProperties,n)}function iA(t,e,n,r,i,a={}){const s=t.Cc(a.merge||a.mergeFields?2:0,e,n,i);aA("Data must be an object, but it was:",s,r);const o=m$(r,s);let l,u;if(a.merge)l=new zi(s.fieldMask),u=s.fieldTransforms;else if(a.mergeFields){const f=[];for(const d of a.mergeFields){const h=N_(e,d,n);if(!s.contains(h))throw new Re(ve.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);y$(f,h)||f.push(h)}l=new zi(f),u=s.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=s.fieldTransforms;return new EG(new gi(o),l,u)}class wx extends nA{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wx}}function h$(t,e,n,r){const i=t.Cc(1,e,n);aA("Data must be an object, but it was:",i,r);const a=[],s=gi.empty();jl(r,(l,u)=>{const f=sA(e,l,n);u=yr(u);const d=i.yc(f);if(u instanceof wx)a.push(f);else{const h=Wm(u,d);h!=null&&(a.push(f),s.set(f,h))}});const o=new zi(a);return new d$(s,o,i.fieldTransforms)}function p$(t,e,n,r,i,a){const s=t.Cc(1,e,n),o=[N_(e,r,n)],l=[i];if(a.length%2!=0)throw new Re(ve.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<a.length;h+=2)o.push(N_(e,a[h])),l.push(a[h+1]);const u=[],f=gi.empty();for(let h=o.length-1;h>=0;--h)if(!y$(u,o[h])){const p=o[h];let v=l[h];v=yr(v);const y=s.yc(p);if(v instanceof wx)u.push(p);else{const b=Wm(v,y);b!=null&&(u.push(p),f.set(p,b))}}const d=new zi(u);return new d$(f,d,s.fieldTransforms)}function jG(t,e,n,r=!1){return Wm(n,t.Cc(r?4:3,e))}function Wm(t,e){if(g$(t=yr(t)))return aA("Unsupported field value:",e,t),m$(t,e);if(t instanceof nA)return function(r,i){if(!f$(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const a=[];let s=0;for(const o of r){let l=Wm(o,i.wc(s));l==null&&(l={nullValue:"NULL_VALUE"}),a.push(l),s++}return{arrayValue:{values:a}}}(t,e)}return function(r,i){if((r=yr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return vq(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=un.fromDate(r);return{timestampValue:wv(i.serializer,a)}}if(r instanceof un){const a=new un(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:wv(i.serializer,a)}}if(r instanceof bs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof sa)return{bytesValue:k3(i.serializer,r._byteString)};if(r instanceof On){const a=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(a))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:FE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ws)return function(s,o){return{mapValue:{fields:{[a3]:{stringValue:s3},[gv]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return LE(o.serializer,u)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${sx(r)}`)}(t,e)}function m$(t,e){const n={};return J5(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jl(t,(r,i)=>{const a=Wm(i,e.mc(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function g$(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof un||t instanceof bs||t instanceof sa||t instanceof On||t instanceof nA||t instanceof ws)}function aA(t,e,n){if(!g$(n)||!Q5(n)){const r=sx(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function N_(t,e,n){if((e=yr(e))instanceof Bm)return e._internalPath;if(typeof e=="string")return sA(t,e);throw jv("Field path arguments must be of type string or ",t,!1,void 0,n)}const TG=new RegExp("[~\\*/\\[\\]]");function sA(t,e,n){if(e.search(TG)>=0)throw jv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Bm(...e.split("."))._internalPath}catch{throw jv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jv(t,e,n,r,i){const a=r&&!r.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||s)&&(l+=" (found",a&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new Re(ve.INVALID_ARGUMENT,o+t+l)}function y$(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v${constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new On(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new PG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(oA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class PG extends v${data(){return super.data()}}function oA(t,e){return typeof e=="string"?sA(t,e):e instanceof Bm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CG(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Re(ve.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lA{}class kG extends lA{}function NG(t,e,...n){let r=[];e instanceof lA&&r.push(e),r=r.concat(n),function(a){const s=a.filter(l=>l instanceof cA).length,o=a.filter(l=>l instanceof _x).length;if(s>1||s>0&&o>0)throw new Re(ve.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class _x extends kG{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new _x(e,n,r)}_apply(e){const n=this._parse(e);return x$(e._query,n),new Tf(e.firestore,e.converter,b_(e._query,n))}_parse(e){const n=Um(e.firestore);return function(a,s,o,l,u,f,d){let h;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Re(ve.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){rk(d,f);const v=[];for(const y of d)v.push(nk(l,a,y));h={arrayValue:{values:v}}}else h=nk(l,a,d)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||rk(d,f),h=jG(o,s,d,f==="in"||f==="not-in");return Hn.create(u,f,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function OG(t,e,n){const r=e,i=oA("where",t);return _x._create(i,r,n)}class cA extends lA{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new cA(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ha.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,a){let s=i;const o=a.getFlattenedFilters();for(const l of o)x$(s,l),s=b_(s,l)}(e._query,n),new Tf(e.firestore,e.converter,b_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function nk(t,e,n){if(typeof(n=yr(n))=="string"){if(n==="")throw new Re(ve.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!p3(e)&&n.indexOf("/")!==-1)throw new Re(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(nn.fromString(n));if(!Xe.isDocumentKey(r))throw new Re(ve.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vC(t,new Xe(r))}if(n instanceof On)return vC(t,n._key);throw new Re(ve.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sx(n)}.`)}function rk(t,e){if(!Array.isArray(t)||t.length===0)throw new Re(ve.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function x$(t,e){const n=function(i,a){for(const s of i)for(const o of s.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Re(ve.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Re(ve.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class IG{convertValue(e,n="none"){switch(xl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $n(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(vl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw it(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return jl(e,(i,a)=>{r[i]=this.convertValue(a,n)}),r}convertVectorValue(e){var r,i,a;const n=(a=(i=(r=e.fields)==null?void 0:r[gv].arrayValue)==null?void 0:i.values)==null?void 0:a.map(s=>$n(s.doubleValue));return new ws(n)}convertGeoPoint(e){return new bs($n(e.latitude),$n(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=cx(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Rp(e));default:return null}}convertTimestamp(e){const n=yl(e);return new un(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=nn.fromString(e);zt(R3(r),9688,{name:e});const i=new $p(r.get(1),r.get(3)),a=new Xe(r.popFirst(5));return i.isEqual(n)||co(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Dh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Nc extends v${constructor(e,n,r,i,a,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Iy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(oA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(ve.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Nc._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Nc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Nc._jsonSchema={type:Gn("string",Nc._jsonSchemaVersion),bundleSource:Gn("string","DocumentSnapshot"),bundleName:Gn("string"),bundle:Gn("string")};class Iy extends Nc{data(e={}){return super.data(e)}}class vd{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Dh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Iy(this._firestore,this._userDataWriter,r.key,r,new Dh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Re(ve.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>{const l=new Iy(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Dh(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>a||o.type!==3).map(o=>{const l=new Iy(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Dh(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,f=-1;return o.type!==0&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),f=s.indexOf(o.doc.key)),{type:DG(o.type),doc:l,oldIndex:u,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(ve.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=vd._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=OE.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function DG(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MG(t){t=da(t,On);const e=da(t.firestore,fo);return xG(bx(e),t._key).then(n=>w$(e,t,n))}vd._jsonSchemaVersion="firestore/querySnapshot/1.0",vd._jsonSchema={type:Gn("string",vd._jsonSchemaVersion),bundleSource:Gn("string","QuerySnapshot"),bundleName:Gn("string"),bundle:Gn("string")};class b$ extends IG{constructor(e){super(),this.firestore=e}convertBytes(e){return new sa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new On(this.firestore,null,n)}}function RG(t,e,n){t=da(t,On);const r=da(t.firestore,fo),i=uA(t.converter,e,n);return Km(r,[iA(Um(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Jr.none())])}function Lo(t,e,n,...r){t=da(t,On);const i=da(t.firestore,fo),a=Um(i);let s;return s=typeof(e=yr(e))=="string"||e instanceof Bm?p$(a,"updateDoc",t._key,e,n,r):h$(a,"updateDoc",t._key,e),Km(i,[s.toMutation(t._key,Jr.exists(!0))])}function zo(t){return Km(da(t.firestore,fo),[new mx(t._key,Jr.none())])}function di(t,e){const n=da(t.firestore,fo),r=hn(t),i=uA(t.converter,e);return Km(n,[iA(Um(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Jr.exists(!1))]).then(()=>r)}function $G(t,...e){var l,u,f;t=yr(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||tk(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(tk(e[r])){const d=e[r];e[r]=(l=d.next)==null?void 0:l.bind(d),e[r+1]=(u=d.error)==null?void 0:u.bind(d),e[r+2]=(f=d.complete)==null?void 0:f.bind(d)}let a,s,o;if(t instanceof On)s=da(t.firestore,fo),o=ux(t._key.path),a={next:d=>{e[r]&&e[r](w$(s,t,d))},error:e[r+1],complete:e[r+2]};else{const d=da(t,Tf);s=da(d.firestore,fo),o=d._query;const h=new b$(s);a={next:p=>{e[r]&&e[r](new vd(s,h,d,p))},error:e[r+1],complete:e[r+2]},CG(t._query)}return function(h,p,v,y){const b=new l$(y),x=new Z3(p,b,v);return h.asyncQueue.enqueueAndForget(async()=>X3(await k_(h),x)),()=>{b.Nu(),h.asyncQueue.enqueueAndForget(async()=>Q3(await k_(h),x))}}(bx(s),o,i,a)}function Km(t,e){return function(r,i){const a=new dl;return r.asyncQueue.enqueueAndForget(async()=>lG(await vG(r),i,a)),a.promise}(bx(t),e)}function w$(t,e,n){const r=n.docs.get(e._key),i=new b$(t);return new Nc(t,i,e._key,r,new Dh(n.hasPendingWrites,n.fromCache),e.converter)}class LG{constructor(e){this.kind="memory",this._onlineComponentProvider=Av.provider,this._offlineComponentProvider=e!=null&&e.garbageCollector?e.garbageCollector._offlineComponentProvider:{build:()=>new o$(void 0)}}toJSON(){return{kind:this.kind}}}function zG(t){return new LG(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VG{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Um(e)}set(e,n,r){this._verifyNotCommitted();const i=yw(e,this._firestore),a=uA(i.converter,n,r),s=iA(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Jr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=yw(e,this._firestore);let s;return s=typeof(n=yr(n))=="string"||n instanceof Bm?p$(this._dataReader,"WriteBatch.update",a._key,n,r,i):h$(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(s.toMutation(a._key,Jr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=yw(e,this._firestore);return this._mutations=this._mutations.concat(new mx(n._key,Jr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ve.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function yw(t,e){if((t=yr(t)).firestore!==e)throw new Re(ve.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(t){return bx(t=da(t,fo)),new VG(t,e=>Km(t,e))}(function(e,n=!0){(function(i){Sf=i})(ix),kd(new Fc("firestore",(r,{instanceIdentifier:i,options:a})=>{const s=r.getProvider("app").getImmediate(),o=new fo(new kK(r.getProvider("auth-internal")),new IK(s,r.getProvider("app-check-internal")),function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Re(ve.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $p(u.options.projectId,f)}(s,i),s);return a={useFetchStreams:n,...a},o._setSettings(a),o},"PUBLIC").setMultipleInstances(!0)),cl(aC,sC,e),cl(aC,sC,"esm2020")})();const FG={apiKey:"AIzaSyCq3MZURc1tNUbpK7BDzKZKQoh8C3twzmA",authDomain:"lactokeeper.firebaseapp.com",projectId:"lactokeeper",storageBucket:"https://www.google.com/search?q=lactokeeper.appspot.com",messagingSenderId:"437430613715",appId:"1:437430613715:web:b4e56c7a0698c719ae8626"},_$=aW(FG),$d=tK(_$,{persistence:xK}),gt=wG(_$,{localCache:zG()}),S$=O.createContext({currentUser:null,isLoading:!0}),E$=()=>O.useContext(S$),BG=({children:t})=>{const[e,n]=O.useState(null),[r,i]=O.useState(!0);O.useEffect(()=>gK($d,o=>{n(o),setTimeout(()=>i(!1),200)}),[]);const a={currentUser:e,isLoading:r};return c.jsx(S$.Provider,{value:a,children:t})};var A$={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Vu,function(){var n=function(g,w){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,I){C.__proto__=I}||function(C,I){for(var L in I)Object.prototype.hasOwnProperty.call(I,L)&&(C[L]=I[L])})(g,w)},r=function(){return(r=Object.assign||function(g){for(var w,C=1,I=arguments.length;C<I;C++)for(var L in w=arguments[C])Object.prototype.hasOwnProperty.call(w,L)&&(g[L]=w[L]);return g}).apply(this,arguments)};function i(g,w,C){for(var I,L=0,V=w.length;L<V;L++)!I&&L in w||((I=I||Array.prototype.slice.call(w,0,L))[L]=w[L]);return g.concat(I||Array.prototype.slice.call(w))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Vu,s=Object.keys,o=Array.isArray;function l(g,w){return typeof w!="object"||s(w).forEach(function(C){g[C]=w[C]}),g}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var u=Object.getPrototypeOf,f={}.hasOwnProperty;function d(g,w){return f.call(g,w)}function h(g,w){typeof w=="function"&&(w=w(u(g))),(typeof Reflect>"u"?s:Reflect.ownKeys)(w).forEach(function(C){v(g,C,w[C])})}var p=Object.defineProperty;function v(g,w,C,I){p(g,w,l(C&&d(C,"get")&&typeof C.get=="function"?{get:C.get,set:C.set,configurable:!0}:{value:C,configurable:!0,writable:!0},I))}function y(g){return{from:function(w){return g.prototype=Object.create(w.prototype),v(g.prototype,"constructor",g),{extend:h.bind(null,g.prototype)}}}}var b=Object.getOwnPropertyDescriptor,x=[].slice;function _(g,w,C){return x.call(g,w,C)}function E(g,w){return w(g)}function P(g){if(!g)throw new Error("Assertion Failed")}function A(g){a.setImmediate?setImmediate(g):setTimeout(g,0)}function j(g,w){if(typeof w=="string"&&d(g,w))return g[w];if(!w)return g;if(typeof w!="string"){for(var C=[],I=0,L=w.length;I<L;++I){var V=j(g,w[I]);C.push(V)}return C}var W=w.indexOf(".");if(W!==-1){var K=g[w.substr(0,W)];return K==null?void 0:j(K,w.substr(W+1))}}function S(g,w,C){if(g&&w!==void 0&&!("isFrozen"in Object&&Object.isFrozen(g)))if(typeof w!="string"&&"length"in w){P(typeof C!="string"&&"length"in C);for(var I=0,L=w.length;I<L;++I)S(g,w[I],C[I])}else{var V,W,K=w.indexOf(".");K!==-1?(V=w.substr(0,K),(W=w.substr(K+1))===""?C===void 0?o(g)&&!isNaN(parseInt(V))?g.splice(V,1):delete g[V]:g[V]=C:S(K=!(K=g[V])||!d(g,V)?g[V]={}:K,W,C)):C===void 0?o(g)&&!isNaN(parseInt(w))?g.splice(w,1):delete g[w]:g[w]=C}}function T(g){var w,C={};for(w in g)d(g,w)&&(C[w]=g[w]);return C}var N=[].concat;function D(g){return N.apply([],g)}var Cr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(D([8,16,32,64].map(function(g){return["Int","Uint","Float"].map(function(w){return w+g+"Array"})}))).filter(function(g){return a[g]}),M=new Set(Cr.map(function(g){return a[g]})),$=null;function z(g){return $=new WeakMap,g=function w(C){if(!C||typeof C!="object")return C;var I=$.get(C);if(I)return I;if(o(C)){I=[],$.set(C,I);for(var L=0,V=C.length;L<V;++L)I.push(w(C[L]))}else if(M.has(C.constructor))I=C;else{var W,K=u(C);for(W in I=K===Object.prototype?{}:Object.create(K),$.set(C,I),C)d(C,W)&&(I[W]=w(C[W]))}return I}(g),$=null,g}var H={}.toString;function ee(g){return H.call(g).slice(8,-1)}var U=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Z=typeof U=="symbol"?function(g){var w;return g!=null&&(w=g[U])&&w.apply(g)}:function(){return null};function q(g,w){return w=g.indexOf(w),0<=w&&g.splice(w,1),0<=w}var Y={};function le(g){var w,C,I,L;if(arguments.length===1){if(o(g))return g.slice();if(this===Y&&typeof g=="string")return[g];if(L=Z(g)){for(C=[];!(I=L.next()).done;)C.push(I.value);return C}if(g==null)return[g];if(typeof(w=g.length)!="number")return[g];for(C=new Array(w);w--;)C[w]=g[w];return C}for(w=arguments.length,C=new Array(w);w--;)C[w]=arguments[w];return C}var ce=typeof Symbol<"u"?function(g){return g[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Fn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Zi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Fn),ye={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ee(g,w){this.name=g,this.message=w}function He(g,w){return g+". Errors: "+Object.keys(w).map(function(C){return w[C].toString()}).filter(function(C,I,L){return L.indexOf(C)===I}).join(`
`)}function ct(g,w,C,I){this.failures=w,this.failedKeys=I,this.successCount=C,this.message=He(g,w)}function ft(g,w){this.name="BulkError",this.failures=Object.keys(w).map(function(C){return w[C]}),this.failuresByPos=w,this.message=He(g,this.failures)}y(Ee).from(Error).extend({toString:function(){return this.name+": "+this.message}}),y(ct).from(Ee),y(ft).from(Ee);var It=Zi.reduce(function(g,w){return g[w]=w+"Error",g},{}),Dt=Ee,fe=Zi.reduce(function(g,w){var C=w+"Error";function I(L,V){this.name=C,L?typeof L=="string"?(this.message="".concat(L).concat(V?`
 `+V:""),this.inner=V||null):typeof L=="object"&&(this.message="".concat(L.name," ").concat(L.message),this.inner=L):(this.message=ye[w]||C,this.inner=null)}return y(I).from(Dt),g[w]=I,g},{});fe.Syntax=SyntaxError,fe.Type=TypeError,fe.Range=RangeError;var Qe=Fn.reduce(function(g,w){return g[w+"Error"]=fe[w],g},{}),Ye=Zi.reduce(function(g,w){return["Syntax","Type","Range"].indexOf(w)===-1&&(g[w+"Error"]=fe[w]),g},{});function he(){}function Se(g){return g}function Le(g,w){return g==null||g===Se?w:function(C){return w(g(C))}}function _e(g,w){return function(){g.apply(this,arguments),w.apply(this,arguments)}}function Ze(g,w){return g===he?w:function(){var C=g.apply(this,arguments);C!==void 0&&(arguments[0]=C);var I=this.onsuccess,L=this.onerror;this.onsuccess=null,this.onerror=null;var V=w.apply(this,arguments);return I&&(this.onsuccess=this.onsuccess?_e(I,this.onsuccess):I),L&&(this.onerror=this.onerror?_e(L,this.onerror):L),V!==void 0?V:C}}function qt(g,w){return g===he?w:function(){g.apply(this,arguments);var C=this.onsuccess,I=this.onerror;this.onsuccess=this.onerror=null,w.apply(this,arguments),C&&(this.onsuccess=this.onsuccess?_e(C,this.onsuccess):C),I&&(this.onerror=this.onerror?_e(I,this.onerror):I)}}function Ht(g,w){return g===he?w:function(C){var I=g.apply(this,arguments);l(C,I);var L=this.onsuccess,V=this.onerror;return this.onsuccess=null,this.onerror=null,C=w.apply(this,arguments),L&&(this.onsuccess=this.onsuccess?_e(L,this.onsuccess):L),V&&(this.onerror=this.onerror?_e(V,this.onerror):V),I===void 0?C===void 0?void 0:C:l(I,C)}}function kt(g,w){return g===he?w:function(){return w.apply(this,arguments)!==!1&&g.apply(this,arguments)}}function Mt(g,w){return g===he?w:function(){var C=g.apply(this,arguments);if(C&&typeof C.then=="function"){for(var I=this,L=arguments.length,V=new Array(L);L--;)V[L]=arguments[L];return C.then(function(){return w.apply(I,V)})}return w.apply(this,arguments)}}Ye.ModifyError=ct,Ye.DexieError=Ee,Ye.BulkError=ft;var Rt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function In(g){Rt=g}var Vn={},Wr=100,Cr=typeof Promise>"u"?[]:function(){var g=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[g,u(g),g];var w=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[w,u(w),g]}(),Fn=Cr[0],Zi=Cr[1],Cr=Cr[2],Zi=Zi&&Zi.then,Tt=Fn&&Fn.constructor,vn=!!Cr,Kr=function(g,w){xe.push([g,w]),Ti&&(queueMicrotask(ai),Ti=!1)},va=!0,Ti=!0,ri=[],ii=[],xa=Se,kr={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:he,pgp:!1,env:{},finalize:he},ze=kr,xe=[],We=0,Ue=[];function be(g){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var w=this._PSD=ze;if(typeof g!="function"){if(g!==Vn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&rt(this,this._value))}this._state=null,this._value=null,++w.ref,function C(I,L){try{L(function(V){if(I._state===null){if(V===I)throw new TypeError("A promise cannot be resolved with itself.");var W=I._lib&&fn();V&&typeof V.then=="function"?C(I,function(K,X){V instanceof be?V._then(K,X):V.then(K,X)}):(I._state=!0,I._value=V,Je(I)),W&&Dn()}},rt.bind(null,I))}catch(V){rt(I,V)}}(this,g)}var Ne={get:function(){var g=ze,w=Pi;function C(I,L){var V=this,W=!g.global&&(g!==ze||w!==Pi),K=W&&!Yi(),X=new be(function(J,ne){cr(V,new Ke(Xf(I,g,W,K),Xf(L,g,W,K),J,ne,g))});return this._consoleTask&&(X._consoleTask=this._consoleTask),X}return C.prototype=Vn,C},set:function(g){v(this,"then",g&&g.prototype===Vn?Ne:{get:function(){return g},set:Ne.set})}};function Ke(g,w,C,I,L){this.onFulfilled=typeof g=="function"?g:null,this.onRejected=typeof w=="function"?w:null,this.resolve=C,this.reject=I,this.psd=L}function rt(g,w){var C,I;ii.push(w),g._state===null&&(C=g._lib&&fn(),w=xa(w),g._state=!1,g._value=w,I=g,ri.some(function(L){return L._value===I._value})||ri.push(I),Je(g),C&&Dn())}function Je(g){var w=g._listeners;g._listeners=[];for(var C=0,I=w.length;C<I;++C)cr(g,w[C]);var L=g._PSD;--L.ref||L.finalize(),We===0&&(++We,Kr(function(){--We==0&&Os()},[]))}function cr(g,w){if(g._state!==null){var C=g._state?w.onFulfilled:w.onRejected;if(C===null)return(g._state?w.resolve:w.reject)(g._value);++w.psd.ref,++We,Kr(Ns,[C,g,w])}else g._listeners.push(w)}function Ns(g,w,C){try{var I,L=w._value;!w._state&&ii.length&&(ii=[]),I=Rt&&w._consoleTask?w._consoleTask.run(function(){return g(L)}):g(L),w._state||ii.indexOf(L)!==-1||function(V){for(var W=ri.length;W;)if(ri[--W]._value===V._value)return ri.splice(W,1)}(w),C.resolve(I)}catch(V){C.reject(V)}finally{--We==0&&Os(),--C.psd.ref||C.psd.finalize()}}function ai(){Xi(kr,function(){fn()&&Dn()})}function fn(){var g=va;return Ti=va=!1,g}function Dn(){var g,w,C;do for(;0<xe.length;)for(g=xe,xe=[],C=g.length,w=0;w<C;++w){var I=g[w];I[0].apply(null,I[1])}while(0<xe.length);Ti=va=!0}function Os(){var g=ri;ri=[],g.forEach(function(I){I._PSD.onunhandled.call(null,I._value,I)});for(var w=Ue.slice(0),C=w.length;C;)w[--C]()}function ba(g){return new be(Vn,!1,g)}function Ft(g,w){var C=ze;return function(){var I=fn(),L=ze;try{return _a(C,!0),g.apply(this,arguments)}catch(V){w&&w(V)}finally{_a(L,!1),I&&Dn()}}}h(be.prototype,{then:Ne,_then:function(g,w){cr(this,new Ke(null,null,g,w,ze))},catch:function(g){if(arguments.length===1)return this.then(null,g);var w=g,C=arguments[1];return typeof w=="function"?this.then(null,function(I){return(I instanceof w?C:ba)(I)}):this.then(null,function(I){return(I&&I.name===w?C:ba)(I)})},finally:function(g){return this.then(function(w){return be.resolve(g()).then(function(){return w})},function(w){return be.resolve(g()).then(function(){return ba(w)})})},timeout:function(g,w){var C=this;return g<1/0?new be(function(I,L){var V=setTimeout(function(){return L(new fe.Timeout(w))},g);C.then(I,L).finally(clearTimeout.bind(null,V))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&v(be.prototype,Symbol.toStringTag,"Dexie.Promise"),kr.env=fg(),h(be,{all:function(){var g=le.apply(null,arguments).map(Fl);return new be(function(w,C){g.length===0&&w([]);var I=g.length;g.forEach(function(L,V){return be.resolve(L).then(function(W){g[V]=W,--I||w(g)},C)})})},resolve:function(g){return g instanceof be?g:g&&typeof g.then=="function"?new be(function(w,C){g.then(w,C)}):new be(Vn,!0,g)},reject:ba,race:function(){var g=le.apply(null,arguments).map(Fl);return new be(function(w,C){g.map(function(I){return be.resolve(I).then(w,C)})})},PSD:{get:function(){return ze},set:function(g){return ze=g}},totalEchoes:{get:function(){return Pi}},newPSD:wa,usePSD:Xi,scheduler:{get:function(){return Kr},set:function(g){Kr=g}},rejectionMapper:{get:function(){return xa},set:function(g){xa=g}},follow:function(g,w){return new be(function(C,I){return wa(function(L,V){var W=ze;W.unhandleds=[],W.onunhandled=V,W.finalize=_e(function(){var K,X=this;K=function(){X.unhandleds.length===0?L():V(X.unhandleds[0])},Ue.push(function J(){K(),Ue.splice(Ue.indexOf(J),1)}),++We,Kr(function(){--We==0&&Os()},[])},W.finalize),g()},w,C,I)})}}),Tt&&(Tt.allSettled&&v(be,"allSettled",function(){var g=le.apply(null,arguments).map(Fl);return new be(function(w){g.length===0&&w([]);var C=g.length,I=new Array(C);g.forEach(function(L,V){return be.resolve(L).then(function(W){return I[V]={status:"fulfilled",value:W}},function(W){return I[V]={status:"rejected",reason:W}}).then(function(){return--C||w(I)})})})}),Tt.any&&typeof AggregateError<"u"&&v(be,"any",function(){var g=le.apply(null,arguments).map(Fl);return new be(function(w,C){g.length===0&&C(new AggregateError([]));var I=g.length,L=new Array(I);g.forEach(function(V,W){return be.resolve(V).then(function(K){return w(K)},function(K){L[W]=K,--I||C(new AggregateError(L))})})})}),Tt.withResolvers&&(be.withResolvers=Tt.withResolvers));var xn={awaits:0,echoes:0,id:0},Yf=0,Qa=[],fu=0,Pi=0,dg=0;function wa(g,w,C,I){var L=ze,V=Object.create(L);return V.parent=L,V.ref=0,V.global=!1,V.id=++dg,kr.env,V.env=vn?{Promise:be,PromiseProp:{value:be,configurable:!0,writable:!0},all:be.all,race:be.race,allSettled:be.allSettled,any:be.any,resolve:be.resolve,reject:be.reject}:{},w&&l(V,w),++L.ref,V.finalize=function(){--this.parent.ref||this.parent.finalize()},I=Xi(V,g,C,I),V.ref===0&&V.finalize(),I}function Za(){return xn.id||(xn.id=++Yf),++xn.awaits,xn.echoes+=Wr,xn.id}function Yi(){return!!xn.awaits&&(--xn.awaits==0&&(xn.id=0),xn.echoes=xn.awaits*Wr,!0)}function Fl(g){return xn.echoes&&g&&g.constructor===Tt?(Za(),g.then(function(w){return Yi(),w},function(w){return Yi(),Xt(w)})):g}function Tb(){var g=Qa[Qa.length-1];Qa.pop(),_a(g,!1)}function _a(g,w){var C,I=ze;(w?!xn.echoes||fu++&&g===ze:!fu||--fu&&g===ze)||queueMicrotask(w?(function(L){++Pi,xn.echoes&&--xn.echoes!=0||(xn.echoes=xn.awaits=xn.id=0),Qa.push(ze),_a(L,!0)}).bind(null,g):Tb),g!==ze&&(ze=g,I===kr&&(kr.env=fg()),vn&&(C=kr.env.Promise,w=g.env,(I.global||g.global)&&(Object.defineProperty(a,"Promise",w.PromiseProp),C.all=w.all,C.race=w.race,C.resolve=w.resolve,C.reject=w.reject,w.allSettled&&(C.allSettled=w.allSettled),w.any&&(C.any=w.any))))}function fg(){var g=a.Promise;return vn?{Promise:g,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:g.all,race:g.race,allSettled:g.allSettled,any:g.any,resolve:g.resolve,reject:g.reject}:{}}function Xi(g,w,C,I,L){var V=ze;try{return _a(g,!0),w(C,I,L)}finally{_a(V,!1)}}function Xf(g,w,C,I){return typeof g!="function"?g:function(){var L=ze;C&&Za(),_a(w,!0);try{return g.apply(this,arguments)}finally{_a(L,!1),I&&queueMicrotask(Yi)}}}function Bl(g){Promise===Tt&&xn.echoes===0?fu===0?g():enqueueNativeMicroTask(g):setTimeout(g,0)}(""+Zi).indexOf("[native code]")===-1&&(Za=Yi=he);var Xt=be.reject,qr="",Ci="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",hg="String expected.",Is=[],Ul="__dbnames",hu="readonly",Wl="readwrite";function Sa(g,w){return g?w?function(){return g.apply(this,arguments)&&w.apply(this,arguments)}:g:w}var Qf={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Kl(g){return typeof g!="string"||/\./.test(g)?function(w){return w}:function(w){return w[g]===void 0&&g in w&&delete(w=z(w))[g],w}}function Zf(){throw fe.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function vt(g,w){try{var C=Ea(g),I=Ea(w);if(C!==I)return C==="Array"?1:I==="Array"?-1:C==="binary"?1:I==="binary"?-1:C==="string"?1:I==="string"?-1:C==="Date"?1:I!=="Date"?NaN:-1;switch(C){case"number":case"Date":case"string":return w<g?1:g<w?-1:0;case"binary":return function(L,V){for(var W=L.length,K=V.length,X=W<K?W:K,J=0;J<X;++J)if(L[J]!==V[J])return L[J]<V[J]?-1:1;return W===K?0:W<K?-1:1}(ki(g),ki(w));case"Array":return function(L,V){for(var W=L.length,K=V.length,X=W<K?W:K,J=0;J<X;++J){var ne=vt(L[J],V[J]);if(ne!==0)return ne}return W===K?0:W<K?-1:1}(g,w)}}catch{}return NaN}function Ea(g){var w=typeof g;return w!="object"?w:ArrayBuffer.isView(g)?"binary":(g=ee(g),g==="ArrayBuffer"?"binary":g)}function ki(g){return g instanceof Uint8Array?g:ArrayBuffer.isView(g)?new Uint8Array(g.buffer,g.byteOffset,g.byteLength):new Uint8Array(g)}function Ja(g,w,C){var I=g.schema.yProps;return I?(w&&0<C.numFailures&&(w=w.filter(function(L,V){return!C.failures[V]})),Promise.all(I.map(function(L){return L=L.updatesTable,w?g.db.table(L).where("k").anyOf(w).delete():g.db.table(L).clear()})).then(function(){return C})):C}var To=(Bt.prototype._trans=function(g,w,C){var I=this._tx||ze.trans,L=this.name,V=Rt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(g==="readonly"?"read":"write"," ").concat(this.name));function W(J,ne,G){if(!G.schema[L])throw new fe.NotFound("Table "+L+" not part of transaction");return w(G.idbtrans,G)}var K=fn();try{var X=I&&I.db._novip===this.db._novip?I===ze.trans?I._promise(g,W,C):wa(function(){return I._promise(g,W,C)},{trans:I,transless:ze.transless||ze}):function J(ne,G,ae,Q){if(ne.idbdb&&(ne._state.openComplete||ze.letThrough||ne._vip)){var te=ne._createTransaction(G,ae,ne._dbSchema);try{te.create(),ne._state.PR1398_maxLoop=3}catch(ie){return ie.name===It.InvalidState&&ne.isOpen()&&0<--ne._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ne.close({disableAutoOpen:!1}),ne.open().then(function(){return J(ne,G,ae,Q)})):Xt(ie)}return te._promise(G,function(ie,re){return wa(function(){return ze.trans=te,Q(ie,re,te)})}).then(function(ie){if(G==="readwrite")try{te.idbtrans.commit()}catch{}return G==="readonly"?ie:te._completion.then(function(){return ie})})}if(ne._state.openComplete)return Xt(new fe.DatabaseClosed(ne._state.dbOpenError));if(!ne._state.isBeingOpened){if(!ne._state.autoOpen)return Xt(new fe.DatabaseClosed);ne.open().catch(he)}return ne._state.dbReadyPromise.then(function(){return J(ne,G,ae,Q)})}(this.db,g,[this.name],W);return V&&(X._consoleTask=V,X=X.catch(function(J){return console.trace(J),Xt(J)})),X}finally{K&&Dn()}},Bt.prototype.get=function(g,w){var C=this;return g&&g.constructor===Object?this.where(g).first(w):g==null?Xt(new fe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(I){return C.core.get({trans:I,key:g}).then(function(L){return C.hook.reading.fire(L)})}).then(w)},Bt.prototype.where=function(g){if(typeof g=="string")return new this.db.WhereClause(this,g);if(o(g))return new this.db.WhereClause(this,"[".concat(g.join("+"),"]"));var w=s(g);if(w.length===1)return this.where(w[0]).equals(g[w[0]]);var C=this.schema.indexes.concat(this.schema.primKey).filter(function(K){if(K.compound&&w.every(function(J){return 0<=K.keyPath.indexOf(J)})){for(var X=0;X<w.length;++X)if(w.indexOf(K.keyPath[X])===-1)return!1;return!0}return!1}).sort(function(K,X){return K.keyPath.length-X.keyPath.length})[0];if(C&&this.db._maxKey!==qr){var V=C.keyPath.slice(0,w.length);return this.where(V).equals(V.map(function(X){return g[X]}))}!C&&Rt&&console.warn("The query ".concat(JSON.stringify(g)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(w.join("+"),"]"));var I=this.schema.idxByName;function L(K,X){return vt(K,X)===0}var W=w.reduce(function(G,X){var J=G[0],ne=G[1],G=I[X],ae=g[X];return[J||G,J||!G?Sa(ne,G&&G.multi?function(Q){return Q=j(Q,X),o(Q)&&Q.some(function(te){return L(ae,te)})}:function(Q){return L(ae,j(Q,X))}):ne]},[null,null]),V=W[0],W=W[1];return V?this.where(V.name).equals(g[V.keyPath]).filter(W):C?this.filter(W):this.where(w).equals("")},Bt.prototype.filter=function(g){return this.toCollection().and(g)},Bt.prototype.count=function(g){return this.toCollection().count(g)},Bt.prototype.offset=function(g){return this.toCollection().offset(g)},Bt.prototype.limit=function(g){return this.toCollection().limit(g)},Bt.prototype.each=function(g){return this.toCollection().each(g)},Bt.prototype.toArray=function(g){return this.toCollection().toArray(g)},Bt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Bt.prototype.orderBy=function(g){return new this.db.Collection(new this.db.WhereClause(this,o(g)?"[".concat(g.join("+"),"]"):g))},Bt.prototype.reverse=function(){return this.toCollection().reverse()},Bt.prototype.mapToClass=function(g){var w,C=this.db,I=this.name;function L(){return w!==null&&w.apply(this,arguments)||this}(this.schema.mappedClass=g).prototype instanceof Zf&&(function(X,J){if(typeof J!="function"&&J!==null)throw new TypeError("Class extends value "+String(J)+" is not a constructor or null");function ne(){this.constructor=X}n(X,J),X.prototype=J===null?Object.create(J):(ne.prototype=J.prototype,new ne)}(L,w=g),Object.defineProperty(L.prototype,"db",{get:function(){return C},enumerable:!1,configurable:!0}),L.prototype.table=function(){return I},g=L);for(var V=new Set,W=g.prototype;W;W=u(W))Object.getOwnPropertyNames(W).forEach(function(X){return V.add(X)});function K(X){if(!X)return X;var J,ne=Object.create(g.prototype);for(J in X)if(!V.has(J))try{ne[J]=X[J]}catch{}return ne}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=K,this.hook("reading",K),g},Bt.prototype.defineClass=function(){return this.mapToClass(function(g){l(this,g)})},Bt.prototype.add=function(g,w){var C=this,I=this.schema.primKey,L=I.auto,V=I.keyPath,W=g;return V&&L&&(W=Kl(V)(g)),this._trans("readwrite",function(K){return C.core.mutate({trans:K,type:"add",keys:w!=null?[w]:null,values:[W]})}).then(function(K){return K.numFailures?be.reject(K.failures[0]):K.lastResult}).then(function(K){if(V)try{S(g,V,K)}catch{}return K})},Bt.prototype.update=function(g,w){return typeof g!="object"||o(g)?this.where(":id").equals(g).modify(w):(g=j(g,this.schema.primKey.keyPath),g===void 0?Xt(new fe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(g).modify(w))},Bt.prototype.put=function(g,w){var C=this,I=this.schema.primKey,L=I.auto,V=I.keyPath,W=g;return V&&L&&(W=Kl(V)(g)),this._trans("readwrite",function(K){return C.core.mutate({trans:K,type:"put",values:[W],keys:w!=null?[w]:null})}).then(function(K){return K.numFailures?be.reject(K.failures[0]):K.lastResult}).then(function(K){if(V)try{S(g,V,K)}catch{}return K})},Bt.prototype.delete=function(g){var w=this;return this._trans("readwrite",function(C){return w.core.mutate({trans:C,type:"delete",keys:[g]}).then(function(I){return Ja(w,[g],I)}).then(function(I){return I.numFailures?be.reject(I.failures[0]):void 0})})},Bt.prototype.clear=function(){var g=this;return this._trans("readwrite",function(w){return g.core.mutate({trans:w,type:"deleteRange",range:Qf}).then(function(C){return Ja(g,null,C)})}).then(function(w){return w.numFailures?be.reject(w.failures[0]):void 0})},Bt.prototype.bulkGet=function(g){var w=this;return this._trans("readonly",function(C){return w.core.getMany({keys:g,trans:C}).then(function(I){return I.map(function(L){return w.hook.reading.fire(L)})})})},Bt.prototype.bulkAdd=function(g,w,C){var I=this,L=Array.isArray(w)?w:void 0,V=(C=C||(L?void 0:w))?C.allKeys:void 0;return this._trans("readwrite",function(W){var J=I.schema.primKey,K=J.auto,J=J.keyPath;if(J&&L)throw new fe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(L&&L.length!==g.length)throw new fe.InvalidArgument("Arguments objects and keys must have the same length");var X=g.length,J=J&&K?g.map(Kl(J)):g;return I.core.mutate({trans:W,type:"add",keys:L,values:J,wantResults:V}).then(function(te){var G=te.numFailures,ae=te.results,Q=te.lastResult,te=te.failures;if(G===0)return V?ae:Q;throw new ft("".concat(I.name,".bulkAdd(): ").concat(G," of ").concat(X," operations failed"),te)})})},Bt.prototype.bulkPut=function(g,w,C){var I=this,L=Array.isArray(w)?w:void 0,V=(C=C||(L?void 0:w))?C.allKeys:void 0;return this._trans("readwrite",function(W){var J=I.schema.primKey,K=J.auto,J=J.keyPath;if(J&&L)throw new fe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(L&&L.length!==g.length)throw new fe.InvalidArgument("Arguments objects and keys must have the same length");var X=g.length,J=J&&K?g.map(Kl(J)):g;return I.core.mutate({trans:W,type:"put",keys:L,values:J,wantResults:V}).then(function(te){var G=te.numFailures,ae=te.results,Q=te.lastResult,te=te.failures;if(G===0)return V?ae:Q;throw new ft("".concat(I.name,".bulkPut(): ").concat(G," of ").concat(X," operations failed"),te)})})},Bt.prototype.bulkUpdate=function(g){var w=this,C=this.core,I=g.map(function(W){return W.key}),L=g.map(function(W){return W.changes}),V=[];return this._trans("readwrite",function(W){return C.getMany({trans:W,keys:I,cache:"clone"}).then(function(K){var X=[],J=[];g.forEach(function(G,ae){var Q=G.key,te=G.changes,ie=K[ae];if(ie){for(var re=0,se=Object.keys(te);re<se.length;re++){var de=se[re],pe=te[de];if(de===w.schema.primKey.keyPath){if(vt(pe,Q)!==0)throw new fe.Constraint("Cannot update primary key in bulkUpdate()")}else S(ie,de,pe)}V.push(ae),X.push(Q),J.push(ie)}});var ne=X.length;return C.mutate({trans:W,type:"put",keys:X,values:J,updates:{keys:I,changeSpecs:L}}).then(function(G){var ae=G.numFailures,Q=G.failures;if(ae===0)return ne;for(var te=0,ie=Object.keys(Q);te<ie.length;te++){var re,se=ie[te],de=V[Number(se)];de!=null&&(re=Q[se],delete Q[se],Q[de]=re)}throw new ft("".concat(w.name,".bulkUpdate(): ").concat(ae," of ").concat(ne," operations failed"),Q)})})})},Bt.prototype.bulkDelete=function(g){var w=this,C=g.length;return this._trans("readwrite",function(I){return w.core.mutate({trans:I,type:"delete",keys:g}).then(function(L){return Ja(w,g,L)})}).then(function(W){var L=W.numFailures,V=W.lastResult,W=W.failures;if(L===0)return V;throw new ft("".concat(w.name,".bulkDelete(): ").concat(L," of ").concat(C," operations failed"),W)})},Bt);function Bt(){}function $t(g){function w(W,K){if(K){for(var X=arguments.length,J=new Array(X-1);--X;)J[X-1]=arguments[X];return C[W].subscribe.apply(null,J),g}if(typeof W=="string")return C[W]}var C={};w.addEventType=V;for(var I=1,L=arguments.length;I<L;++I)V(arguments[I]);return w;function V(W,K,X){if(typeof W!="object"){var J;K=K||kt;var ne={subscribers:[],fire:X=X||he,subscribe:function(G){ne.subscribers.indexOf(G)===-1&&(ne.subscribers.push(G),ne.fire=K(ne.fire,G))},unsubscribe:function(G){ne.subscribers=ne.subscribers.filter(function(ae){return ae!==G}),ne.fire=ne.subscribers.reduce(K,X)}};return C[W]=w[W]=ne}s(J=W).forEach(function(G){var ae=J[G];if(o(ae))V(G,J[G][0],J[G][1]);else{if(ae!=="asap")throw new fe.InvalidArgument("Invalid event config");var Q=V(G,Se,function(){for(var te=arguments.length,ie=new Array(te);te--;)ie[te]=arguments[te];Q.subscribers.forEach(function(re){A(function(){re.apply(null,ie)})})})}})}}function es(g,w){return y(w).from({prototype:g}),w}function Qi(g,w){return!(g.filter||g.algorithm||g.or)&&(w?g.justLimit:!g.replayFilter)}function Ds(g,w){g.filter=Sa(g.filter,w)}function Jf(g,w,C){var I=g.replayFilter;g.replayFilter=I?function(){return Sa(I(),w())}:w,g.justLimit=C&&!I}function ql(g,w){if(g.isPrimKey)return w.primaryKey;var C=w.getIndexByKeyPath(g.index);if(!C)throw new fe.Schema("KeyPath "+g.index+" on object store "+w.name+" is not indexed");return C}function pg(g,w,C){var I=ql(g,w.schema);return w.openCursor({trans:C,values:!g.keysOnly,reverse:g.dir==="prev",unique:!!g.unique,query:{index:I,range:g.range}})}function pu(g,w,C,I){var L=g.replayFilter?Sa(g.filter,g.replayFilter()):g.filter;if(g.or){var V={},W=function(K,X,J){var ne,G;L&&!L(X,J,function(ae){return X.stop(ae)},function(ae){return X.fail(ae)})||((G=""+(ne=X.primaryKey))=="[object ArrayBuffer]"&&(G=""+new Uint8Array(ne)),d(V,G)||(V[G]=!0,w(K,X,J)))};return Promise.all([g.or._iterate(W,C),mg(pg(g,I,C),g.algorithm,W,!g.keysOnly&&g.valueMapper)])}return mg(pg(g,I,C),Sa(g.algorithm,L),w,!g.keysOnly&&g.valueMapper)}function mg(g,w,C,I){var L=Ft(I?function(V,W,K){return C(I(V),W,K)}:C);return g.then(function(V){if(V)return V.start(function(){var W=function(){return V.continue()};w&&!w(V,function(K){return W=K},function(K){V.stop(K),W=he},function(K){V.fail(K),W=he})||L(V.value,V,function(K){return W=K}),W()})})}var Hl=(Po.prototype.execute=function(g){var w=this["@@propmod"];if(w.add!==void 0){var C=w.add;if(o(C))return i(i([],o(g)?g:[],!0),C).sort();if(typeof C=="number")return(Number(g)||0)+C;if(typeof C=="bigint")try{return BigInt(g)+C}catch{return BigInt(0)+C}throw new TypeError("Invalid term ".concat(C))}if(w.remove!==void 0){var I=w.remove;if(o(I))return o(g)?g.filter(function(L){return!I.includes(L)}).sort():[];if(typeof I=="number")return Number(g)-I;if(typeof I=="bigint")try{return BigInt(g)-I}catch{return BigInt(0)-I}throw new TypeError("Invalid subtrahend ".concat(I))}return C=(C=w.replacePrefix)===null||C===void 0?void 0:C[0],C&&typeof g=="string"&&g.startsWith(C)?w.replacePrefix[1]+g.substring(C.length):g},Po);function Po(g){this["@@propmod"]=g}var Ms=(Et.prototype._read=function(g,w){var C=this._ctx;return C.error?C.table._trans(null,Xt.bind(null,C.error)):C.table._trans("readonly",g).then(w)},Et.prototype._write=function(g){var w=this._ctx;return w.error?w.table._trans(null,Xt.bind(null,w.error)):w.table._trans("readwrite",g,"locked")},Et.prototype._addAlgorithm=function(g){var w=this._ctx;w.algorithm=Sa(w.algorithm,g)},Et.prototype._iterate=function(g,w){return pu(this._ctx,g,w,this._ctx.table.core)},Et.prototype.clone=function(g){var w=Object.create(this.constructor.prototype),C=Object.create(this._ctx);return g&&l(C,g),w._ctx=C,w},Et.prototype.raw=function(){return this._ctx.valueMapper=null,this},Et.prototype.each=function(g){var w=this._ctx;return this._read(function(C){return pu(w,g,C,w.table.core)})},Et.prototype.count=function(g){var w=this;return this._read(function(C){var I=w._ctx,L=I.table.core;if(Qi(I,!0))return L.count({trans:C,query:{index:ql(I,L.schema),range:I.range}}).then(function(W){return Math.min(W,I.limit)});var V=0;return pu(I,function(){return++V,!1},C,L).then(function(){return V})}).then(g)},Et.prototype.sortBy=function(g,w){var C=g.split(".").reverse(),I=C[0],L=C.length-1;function V(X,J){return J?V(X[C[J]],J-1):X[I]}var W=this._ctx.dir==="next"?1:-1;function K(X,J){return vt(V(X,L),V(J,L))*W}return this.toArray(function(X){return X.sort(K)}).then(w)},Et.prototype.toArray=function(g){var w=this;return this._read(function(C){var I=w._ctx;if(I.dir==="next"&&Qi(I,!0)&&0<I.limit){var L=I.valueMapper,V=ql(I,I.table.core.schema);return I.table.core.query({trans:C,limit:I.limit,values:!0,query:{index:V,range:I.range}}).then(function(K){return K=K.result,L?K.map(L):K})}var W=[];return pu(I,function(K){return W.push(K)},C,I.table.core).then(function(){return W})},g)},Et.prototype.offset=function(g){var w=this._ctx;return g<=0||(w.offset+=g,Qi(w)?Jf(w,function(){var C=g;return function(I,L){return C===0||(C===1?--C:L(function(){I.advance(C),C=0}),!1)}}):Jf(w,function(){var C=g;return function(){return--C<0}})),this},Et.prototype.limit=function(g){return this._ctx.limit=Math.min(this._ctx.limit,g),Jf(this._ctx,function(){var w=g;return function(C,I,L){return--w<=0&&I(L),0<=w}},!0),this},Et.prototype.until=function(g,w){return Ds(this._ctx,function(C,I,L){return!g(C.value)||(I(L),w)}),this},Et.prototype.first=function(g){return this.limit(1).toArray(function(w){return w[0]}).then(g)},Et.prototype.last=function(g){return this.reverse().first(g)},Et.prototype.filter=function(g){var w;return Ds(this._ctx,function(C){return g(C.value)}),(w=this._ctx).isMatch=Sa(w.isMatch,g),this},Et.prototype.and=function(g){return this.filter(g)},Et.prototype.or=function(g){return new this.db.WhereClause(this._ctx.table,g,this)},Et.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Et.prototype.desc=function(){return this.reverse()},Et.prototype.eachKey=function(g){var w=this._ctx;return w.keysOnly=!w.isMatch,this.each(function(C,I){g(I.key,I)})},Et.prototype.eachUniqueKey=function(g){return this._ctx.unique="unique",this.eachKey(g)},Et.prototype.eachPrimaryKey=function(g){var w=this._ctx;return w.keysOnly=!w.isMatch,this.each(function(C,I){g(I.primaryKey,I)})},Et.prototype.keys=function(g){var w=this._ctx;w.keysOnly=!w.isMatch;var C=[];return this.each(function(I,L){C.push(L.key)}).then(function(){return C}).then(g)},Et.prototype.primaryKeys=function(g){var w=this._ctx;if(w.dir==="next"&&Qi(w,!0)&&0<w.limit)return this._read(function(I){var L=ql(w,w.table.core.schema);return w.table.core.query({trans:I,values:!1,limit:w.limit,query:{index:L,range:w.range}})}).then(function(I){return I.result}).then(g);w.keysOnly=!w.isMatch;var C=[];return this.each(function(I,L){C.push(L.primaryKey)}).then(function(){return C}).then(g)},Et.prototype.uniqueKeys=function(g){return this._ctx.unique="unique",this.keys(g)},Et.prototype.firstKey=function(g){return this.limit(1).keys(function(w){return w[0]}).then(g)},Et.prototype.lastKey=function(g){return this.reverse().firstKey(g)},Et.prototype.distinct=function(){var g=this._ctx,g=g.index&&g.table.schema.idxByName[g.index];if(!g||!g.multi)return this;var w={};return Ds(this._ctx,function(L){var I=L.primaryKey.toString(),L=d(w,I);return w[I]=!0,!L}),this},Et.prototype.modify=function(g){var w=this,C=this._ctx;return this._write(function(I){var L,V,W;W=typeof g=="function"?g:(L=s(g),V=L.length,function(se){for(var de=!1,pe=0;pe<V;++pe){var me=L[pe],Ae=g[me],Oe=j(se,me);Ae instanceof Hl?(S(se,me,Ae.execute(Oe)),de=!0):Oe!==Ae&&(S(se,me,Ae),de=!0)}return de});var K=C.table.core,G=K.schema.primaryKey,X=G.outbound,J=G.extractKey,ne=200,G=w.db._options.modifyChunkSize;G&&(ne=typeof G=="object"?G[K.name]||G["*"]||200:G);function ae(se,me){var pe=me.failures,me=me.numFailures;te+=se-me;for(var Ae=0,Oe=s(pe);Ae<Oe.length;Ae++){var Pe=Oe[Ae];Q.push(pe[Pe])}}var Q=[],te=0,ie=[],re=g===eh;return w.clone().primaryKeys().then(function(se){function de(me){var Ae=Math.min(ne,se.length-me),Oe=se.slice(me,me+Ae);return(re?Promise.resolve([]):K.getMany({trans:I,keys:Oe,cache:"immutable"})).then(function(Pe){var Ce=[],Me=[],De=X?[]:null,$e=re?Oe:[];if(!re)for(var mt=0;mt<Ae;++mt){var At=Pe[mt],ut={value:z(At),primKey:se[me+mt]};W.call(ut,ut.value,ut)!==!1&&(ut.value==null?$e.push(se[me+mt]):X||vt(J(At),J(ut.value))===0?(Me.push(ut.value),X&&De.push(se[me+mt])):($e.push(se[me+mt]),Ce.push(ut.value)))}return Promise.resolve(0<Ce.length&&K.mutate({trans:I,type:"add",values:Ce}).then(function(jn){for(var ot in jn.failures)$e.splice(parseInt(ot),1);ae(Ce.length,jn)})).then(function(){return(0<Me.length||pe&&typeof g=="object")&&K.mutate({trans:I,type:"put",keys:De,values:Me,criteria:pe,changeSpec:typeof g!="function"&&g,isAdditionalChunk:0<me}).then(function(jn){return ae(Me.length,jn)})}).then(function(){return(0<$e.length||pe&&re)&&K.mutate({trans:I,type:"delete",keys:$e,criteria:pe,isAdditionalChunk:0<me}).then(function(jn){return Ja(C.table,$e,jn)}).then(function(jn){return ae($e.length,jn)})}).then(function(){return se.length>me+Ae&&de(me+ne)})})}var pe=Qi(C)&&C.limit===1/0&&(typeof g!="function"||re)&&{index:C.index,range:C.range};return de(0).then(function(){if(0<Q.length)throw new ct("Error modifying one or more objects",Q,te,ie);return se.length})})})},Et.prototype.delete=function(){var g=this._ctx,w=g.range;return!Qi(g)||g.table.schema.yProps||!g.isPrimKey&&w.type!==3?this.modify(eh):this._write(function(C){var I=g.table.core.schema.primaryKey,L=w;return g.table.core.count({trans:C,query:{index:I,range:L}}).then(function(V){return g.table.core.mutate({trans:C,type:"deleteRange",range:L}).then(function(X){var K=X.failures,X=X.numFailures;if(X)throw new ct("Could not delete some values",Object.keys(K).map(function(J){return K[J]}),V-X);return V-X})})})},Et);function Et(){}var eh=function(g,w){return w.value=null};function gg(g,w){return g<w?-1:g===w?0:1}function yg(g,w){return w<g?-1:g===w?0:1}function Nr(g,w,C){return g=g instanceof Aa?new g.Collection(g):g,g._ctx.error=new(C||TypeError)(w),g}function Ni(g){return new g.Collection(g,function(){return vg("")}).limit(0)}function mu(g,w,C,I){var L,V,W,K,X,J,ne,G=C.length;if(!C.every(function(te){return typeof te=="string"}))return Nr(g,hg);function ae(te){L=te==="next"?function(re){return re.toUpperCase()}:function(re){return re.toLowerCase()},V=te==="next"?function(re){return re.toLowerCase()}:function(re){return re.toUpperCase()},W=te==="next"?gg:yg;var ie=C.map(function(re){return{lower:V(re),upper:L(re)}}).sort(function(re,se){return W(re.lower,se.lower)});K=ie.map(function(re){return re.upper}),X=ie.map(function(re){return re.lower}),ne=(J=te)==="next"?"":I}ae("next"),g=new g.Collection(g,function(){return ts(K[0],X[G-1]+I)}),g._ondirectionchange=function(te){ae(te)};var Q=0;return g._addAlgorithm(function(te,ie,re){var se=te.key;if(typeof se!="string")return!1;var de=V(se);if(w(de,X,Q))return!0;for(var pe=null,me=Q;me<G;++me){var Ae=function(Oe,Pe,Ce,Me,De,$e){for(var mt=Math.min(Oe.length,Me.length),At=-1,ut=0;ut<mt;++ut){var jn=Pe[ut];if(jn!==Me[ut])return De(Oe[ut],Ce[ut])<0?Oe.substr(0,ut)+Ce[ut]+Ce.substr(ut+1):De(Oe[ut],Me[ut])<0?Oe.substr(0,ut)+Me[ut]+Ce.substr(ut+1):0<=At?Oe.substr(0,At)+Pe[At]+Ce.substr(At+1):null;De(Oe[ut],jn)<0&&(At=ut)}return mt<Me.length&&$e==="next"?Oe+Ce.substr(Oe.length):mt<Oe.length&&$e==="prev"?Oe.substr(0,Ce.length):At<0?null:Oe.substr(0,At)+Me[At]+Ce.substr(At+1)}(se,de,K[me],X[me],W,J);Ae===null&&pe===null?Q=me+1:(pe===null||0<W(pe,Ae))&&(pe=Ae)}return ie(pe!==null?function(){te.continue(pe+ne)}:re),!1}),g}function ts(g,w,C,I){return{type:2,lower:g,upper:w,lowerOpen:C,upperOpen:I}}function vg(g){return{type:1,lower:g,upper:g}}var Aa=(Object.defineProperty(Bn.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Bn.prototype.between=function(g,w,C,I){C=C!==!1,I=I===!0;try{return 0<this._cmp(g,w)||this._cmp(g,w)===0&&(C||I)&&(!C||!I)?Ni(this):new this.Collection(this,function(){return ts(g,w,!C,!I)})}catch{return Nr(this,Ci)}},Bn.prototype.equals=function(g){return g==null?Nr(this,Ci):new this.Collection(this,function(){return vg(g)})},Bn.prototype.above=function(g){return g==null?Nr(this,Ci):new this.Collection(this,function(){return ts(g,void 0,!0)})},Bn.prototype.aboveOrEqual=function(g){return g==null?Nr(this,Ci):new this.Collection(this,function(){return ts(g,void 0,!1)})},Bn.prototype.below=function(g){return g==null?Nr(this,Ci):new this.Collection(this,function(){return ts(void 0,g,!1,!0)})},Bn.prototype.belowOrEqual=function(g){return g==null?Nr(this,Ci):new this.Collection(this,function(){return ts(void 0,g)})},Bn.prototype.startsWith=function(g){return typeof g!="string"?Nr(this,hg):this.between(g,g+qr,!0,!0)},Bn.prototype.startsWithIgnoreCase=function(g){return g===""?this.startsWith(g):mu(this,function(w,C){return w.indexOf(C[0])===0},[g],qr)},Bn.prototype.equalsIgnoreCase=function(g){return mu(this,function(w,C){return w===C[0]},[g],"")},Bn.prototype.anyOfIgnoreCase=function(){var g=le.apply(Y,arguments);return g.length===0?Ni(this):mu(this,function(w,C){return C.indexOf(w)!==-1},g,"")},Bn.prototype.startsWithAnyOfIgnoreCase=function(){var g=le.apply(Y,arguments);return g.length===0?Ni(this):mu(this,function(w,C){return C.some(function(I){return w.indexOf(I)===0})},g,qr)},Bn.prototype.anyOf=function(){var g=this,w=le.apply(Y,arguments),C=this._cmp;try{w.sort(C)}catch{return Nr(this,Ci)}if(w.length===0)return Ni(this);var I=new this.Collection(this,function(){return ts(w[0],w[w.length-1])});I._ondirectionchange=function(V){C=V==="next"?g._ascending:g._descending,w.sort(C)};var L=0;return I._addAlgorithm(function(V,W,K){for(var X=V.key;0<C(X,w[L]);)if(++L===w.length)return W(K),!1;return C(X,w[L])===0||(W(function(){V.continue(w[L])}),!1)}),I},Bn.prototype.notEqual=function(g){return this.inAnyRange([[-1/0,g],[g,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Bn.prototype.noneOf=function(){var g=le.apply(Y,arguments);if(g.length===0)return new this.Collection(this);try{g.sort(this._ascending)}catch{return Nr(this,Ci)}var w=g.reduce(function(C,I){return C?C.concat([[C[C.length-1][1],I]]):[[-1/0,I]]},null);return w.push([g[g.length-1],this.db._maxKey]),this.inAnyRange(w,{includeLowers:!1,includeUppers:!1})},Bn.prototype.inAnyRange=function(se,w){var C=this,I=this._cmp,L=this._ascending,V=this._descending,W=this._min,K=this._max;if(se.length===0)return Ni(this);if(!se.every(function(de){return de[0]!==void 0&&de[1]!==void 0&&L(de[0],de[1])<=0}))return Nr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",fe.InvalidArgument);var X=!w||w.includeLowers!==!1,J=w&&w.includeUppers===!0,ne,G=L;function ae(de,pe){return G(de[0],pe[0])}try{(ne=se.reduce(function(de,pe){for(var me=0,Ae=de.length;me<Ae;++me){var Oe=de[me];if(I(pe[0],Oe[1])<0&&0<I(pe[1],Oe[0])){Oe[0]=W(Oe[0],pe[0]),Oe[1]=K(Oe[1],pe[1]);break}}return me===Ae&&de.push(pe),de},[])).sort(ae)}catch{return Nr(this,Ci)}var Q=0,te=J?function(de){return 0<L(de,ne[Q][1])}:function(de){return 0<=L(de,ne[Q][1])},ie=X?function(de){return 0<V(de,ne[Q][0])}:function(de){return 0<=V(de,ne[Q][0])},re=te,se=new this.Collection(this,function(){return ts(ne[0][0],ne[ne.length-1][1],!X,!J)});return se._ondirectionchange=function(de){G=de==="next"?(re=te,L):(re=ie,V),ne.sort(ae)},se._addAlgorithm(function(de,pe,me){for(var Ae,Oe=de.key;re(Oe);)if(++Q===ne.length)return pe(me),!1;return!te(Ae=Oe)&&!ie(Ae)||(C._cmp(Oe,ne[Q][1])===0||C._cmp(Oe,ne[Q][0])===0||pe(function(){G===L?de.continue(ne[Q][0]):de.continue(ne[Q][1])}),!1)}),se},Bn.prototype.startsWithAnyOf=function(){var g=le.apply(Y,arguments);return g.every(function(w){return typeof w=="string"})?g.length===0?Ni(this):this.inAnyRange(g.map(function(w){return[w,w+qr]})):Nr(this,"startsWithAnyOf() only works with strings")},Bn);function Bn(){}function si(g){return Ft(function(w){return ns(w),g(w.target.error),!1})}function ns(g){g.stopPropagation&&g.stopPropagation(),g.preventDefault&&g.preventDefault()}var Co="storagemutated",Rs="x-storagemutated-1",oi=$t(null,Co),xg=(li.prototype._lock=function(){return P(!ze.global),++this._reculock,this._reculock!==1||ze.global||(ze.lockOwnerFor=this),this},li.prototype._unlock=function(){if(P(!ze.global),--this._reculock==0)for(ze.global||(ze.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var g=this._blockedFuncs.shift();try{Xi(g[1],g[0])}catch{}}return this},li.prototype._locked=function(){return this._reculock&&ze.lockOwnerFor!==this},li.prototype.create=function(g){var w=this;if(!this.mode)return this;var C=this.db.idbdb,I=this.db._state.dbOpenError;if(P(!this.idbtrans),!g&&!C)switch(I&&I.name){case"DatabaseClosedError":throw new fe.DatabaseClosed(I);case"MissingAPIError":throw new fe.MissingAPI(I.message,I);default:throw new fe.OpenFailed(I)}if(!this.active)throw new fe.TransactionInactive;return P(this._completion._state===null),(g=this.idbtrans=g||(this.db.core||C).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ft(function(L){ns(L),w._reject(g.error)}),g.onabort=Ft(function(L){ns(L),w.active&&w._reject(new fe.Abort(g.error)),w.active=!1,w.on("abort").fire(L)}),g.oncomplete=Ft(function(){w.active=!1,w._resolve(),"mutatedParts"in g&&oi.storagemutated.fire(g.mutatedParts)}),this},li.prototype._promise=function(g,w,C){var I=this;if(g==="readwrite"&&this.mode!=="readwrite")return Xt(new fe.ReadOnly("Transaction is readonly"));if(!this.active)return Xt(new fe.TransactionInactive);if(this._locked())return new be(function(V,W){I._blockedFuncs.push([function(){I._promise(g,w,C).then(V,W)},ze])});if(C)return wa(function(){var V=new be(function(W,K){I._lock();var X=w(W,K,I);X&&X.then&&X.then(W,K)});return V.finally(function(){return I._unlock()}),V._lib=!0,V});var L=new be(function(V,W){var K=w(V,W,I);K&&K.then&&K.then(V,W)});return L._lib=!0,L},li.prototype._root=function(){return this.parent?this.parent._root():this},li.prototype.waitFor=function(g){var w,C=this._root(),I=be.resolve(g);C._waitingFor?C._waitingFor=C._waitingFor.then(function(){return I}):(C._waitingFor=I,C._waitingQueue=[],w=C.idbtrans.objectStore(C.storeNames[0]),function V(){for(++C._spinCount;C._waitingQueue.length;)C._waitingQueue.shift()();C._waitingFor&&(w.get(-1/0).onsuccess=V)}());var L=C._waitingFor;return new be(function(V,W){I.then(function(K){return C._waitingQueue.push(Ft(V.bind(null,K)))},function(K){return C._waitingQueue.push(Ft(W.bind(null,K)))}).finally(function(){C._waitingFor===L&&(C._waitingFor=null)})})},li.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new fe.Abort))},li.prototype.table=function(g){var w=this._memoizedTables||(this._memoizedTables={});if(d(w,g))return w[g];var C=this.schema[g];if(!C)throw new fe.NotFound("Table "+g+" not part of transaction");return C=new this.db.Table(g,C,this),C.core=this.db.core.table(g),w[g]=C},li);function li(){}function Jt(g,w,C,I,L,V,W,K){return{name:g,keyPath:w,unique:C,multi:I,auto:L,compound:V,src:(C&&!W?"&":"")+(I?"*":"")+(L?"++":"")+bg(w),type:K}}function bg(g){return typeof g=="string"?g:g?"["+[].join.call(g,"+")+"]":""}function th(g,w,C){return{name:g,primKey:w,indexes:C,mappedClass:null,idxByName:(I=function(L){return[L.name,L]},C.reduce(function(L,V,W){return W=I(V,W),W&&(L[W[0]]=W[1]),L},{}))};var I}var ko=function(g){try{return g.only([[]]),ko=function(){return[[]]},[[]]}catch{return ko=function(){return qr},qr}};function gu(g){return g==null?function(){}:typeof g=="string"?(w=g).split(".").length===1?function(C){return C[w]}:function(C){return j(C,w)}:function(C){return j(C,g)};var w}function nh(g){return[].slice.call(g)}var yu=0;function ci(g){return g==null?":id":typeof g=="string"?g:"[".concat(g.join("+"),"]")}function wg(g,w,X){function I(re){if(re.type===3)return null;if(re.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Q=re.lower,te=re.upper,ie=re.lowerOpen,re=re.upperOpen;return Q===void 0?te===void 0?null:w.upperBound(te,!!re):te===void 0?w.lowerBound(Q,!!ie):w.bound(Q,te,!!ie,!!re)}function L(ae){var Q,te=ae.name;return{name:te,schema:ae,mutate:function(ie){var re=ie.trans,se=ie.type,de=ie.keys,pe=ie.values,me=ie.range;return new Promise(function(Ae,Oe){Ae=Ft(Ae);var Pe=re.objectStore(te),Ce=Pe.keyPath==null,Me=se==="put"||se==="add";if(!Me&&se!=="delete"&&se!=="deleteRange")throw new Error("Invalid operation type: "+se);var De,$e=(de||pe||{length:1}).length;if(de&&pe&&de.length!==pe.length)throw new Error("Given keys array must have same length as given values array.");if($e===0)return Ae({numFailures:0,failures:{},results:[],lastResult:void 0});function mt(Hr){++jn,ns(Hr)}var At=[],ut=[],jn=0;if(se==="deleteRange"){if(me.type===4)return Ae({numFailures:jn,failures:ut,results:[],lastResult:void 0});me.type===3?At.push(De=Pe.clear()):At.push(De=Pe.delete(I(me)))}else{var Ce=Me?Ce?[pe,de]:[pe,null]:[de,null],ot=Ce[0],Or=Ce[1];if(Me)for(var Ir=0;Ir<$e;++Ir)At.push(De=Or&&Or[Ir]!==void 0?Pe[se](ot[Ir],Or[Ir]):Pe[se](ot[Ir])),De.onerror=mt;else for(Ir=0;Ir<$e;++Ir)At.push(De=Pe[se](ot[Ir])),De.onerror=mt}function jg(Hr){Hr=Hr.target.result,At.forEach(function(ec,Ob){return ec.error!=null&&(ut[Ob]=ec.error)}),Ae({numFailures:jn,failures:ut,results:se==="delete"?de:At.map(function(ec){return ec.result}),lastResult:Hr})}De.onerror=function(Hr){mt(Hr),jg(Hr)},De.onsuccess=jg})},getMany:function(ie){var re=ie.trans,se=ie.keys;return new Promise(function(de,pe){de=Ft(de);for(var me,Ae=re.objectStore(te),Oe=se.length,Pe=new Array(Oe),Ce=0,Me=0,De=function(At){At=At.target,Pe[At._pos]=At.result,++Me===Ce&&de(Pe)},$e=si(pe),mt=0;mt<Oe;++mt)se[mt]!=null&&((me=Ae.get(se[mt]))._pos=mt,me.onsuccess=De,me.onerror=$e,++Ce);Ce===0&&de(Pe)})},get:function(ie){var re=ie.trans,se=ie.key;return new Promise(function(de,pe){de=Ft(de);var me=re.objectStore(te).get(se);me.onsuccess=function(Ae){return de(Ae.target.result)},me.onerror=si(pe)})},query:(Q=J,function(ie){return new Promise(function(re,se){re=Ft(re);var de,pe,me,Ce=ie.trans,Ae=ie.values,Oe=ie.limit,De=ie.query,Pe=Oe===1/0?void 0:Oe,Me=De.index,De=De.range,Ce=Ce.objectStore(te),Me=Me.isPrimaryKey?Ce:Ce.index(Me.name),De=I(De);if(Oe===0)return re({result:[]});Q?((Pe=Ae?Me.getAll(De,Pe):Me.getAllKeys(De,Pe)).onsuccess=function($e){return re({result:$e.target.result})},Pe.onerror=si(se)):(de=0,pe=!Ae&&"openKeyCursor"in Me?Me.openKeyCursor(De):Me.openCursor(De),me=[],pe.onsuccess=function($e){var mt=pe.result;return mt?(me.push(Ae?mt.value:mt.primaryKey),++de===Oe?re({result:me}):void mt.continue()):re({result:me})},pe.onerror=si(se))})}),openCursor:function(ie){var re=ie.trans,se=ie.values,de=ie.query,pe=ie.reverse,me=ie.unique;return new Promise(function(Ae,Oe){Ae=Ft(Ae);var Me=de.index,Pe=de.range,Ce=re.objectStore(te),Ce=Me.isPrimaryKey?Ce:Ce.index(Me.name),Me=pe?me?"prevunique":"prev":me?"nextunique":"next",De=!se&&"openKeyCursor"in Ce?Ce.openKeyCursor(I(Pe),Me):Ce.openCursor(I(Pe),Me);De.onerror=si(Oe),De.onsuccess=Ft(function($e){var mt,At,ut,jn,ot=De.result;ot?(ot.___id=++yu,ot.done=!1,mt=ot.continue.bind(ot),At=(At=ot.continuePrimaryKey)&&At.bind(ot),ut=ot.advance.bind(ot),jn=function(){throw new Error("Cursor not stopped")},ot.trans=re,ot.stop=ot.continue=ot.continuePrimaryKey=ot.advance=function(){throw new Error("Cursor not started")},ot.fail=Ft(Oe),ot.next=function(){var Or=this,Ir=1;return this.start(function(){return Ir--?Or.continue():Or.stop()}).then(function(){return Or})},ot.start=function(Or){function Ir(){if(De.result)try{Or()}catch(Hr){ot.fail(Hr)}else ot.done=!0,ot.start=function(){throw new Error("Cursor behind last entry")},ot.stop()}var jg=new Promise(function(Hr,ec){Hr=Ft(Hr),De.onerror=si(ec),ot.fail=ec,ot.stop=function(Ob){ot.stop=ot.continue=ot.continuePrimaryKey=ot.advance=jn,Hr(Ob)}});return De.onsuccess=Ft(function(Hr){De.onsuccess=Ir,Ir()}),ot.continue=mt,ot.continuePrimaryKey=At,ot.advance=ut,Ir(),jg},Ae(ot)):Ae(null)},Oe)})},count:function(ie){var re=ie.query,se=ie.trans,de=re.index,pe=re.range;return new Promise(function(me,Ae){var Oe=se.objectStore(te),Pe=de.isPrimaryKey?Oe:Oe.index(de.name),Oe=I(pe),Pe=Oe?Pe.count(Oe):Pe.count();Pe.onsuccess=Ft(function(Ce){return me(Ce.target.result)}),Pe.onerror=si(Ae)})}}}var V,W,K,ne=(W=X,K=nh((V=g).objectStoreNames),{schema:{name:V.name,tables:K.map(function(ae){return W.objectStore(ae)}).map(function(ae){var Q=ae.keyPath,re=ae.autoIncrement,te=o(Q),ie={},re={name:ae.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Q==null,compound:te,keyPath:Q,autoIncrement:re,unique:!0,extractKey:gu(Q)},indexes:nh(ae.indexNames).map(function(se){return ae.index(se)}).map(function(me){var de=me.name,pe=me.unique,Ae=me.multiEntry,me=me.keyPath,Ae={name:de,compound:o(me),keyPath:me,unique:pe,multiEntry:Ae,extractKey:gu(me)};return ie[ci(me)]=Ae}),getIndexByKeyPath:function(se){return ie[ci(se)]}};return ie[":id"]=re.primaryKey,Q!=null&&(ie[ci(Q)]=re.primaryKey),re})},hasGetAll:0<K.length&&"getAll"in W.objectStore(K[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),X=ne.schema,J=ne.hasGetAll,ne=X.tables.map(L),G={};return ne.forEach(function(ae){return G[ae.name]=ae}),{stack:"dbcore",transaction:g.transaction.bind(g),table:function(ae){if(!G[ae])throw new Error("Table '".concat(ae,"' not found"));return G[ae]},MIN_KEY:-1/0,MAX_KEY:ko(w),schema:X}}function Pb(g,w,C,I){var L=C.IDBKeyRange;return C.indexedDB,{dbcore:(I=wg(w,L,I),g.dbcore.reduce(function(V,W){return W=W.create,r(r({},V),W(V))},I))}}function rs(g,I){var C=I.db,I=Pb(g._middlewares,C,g._deps,I);g.core=I.dbcore,g.tables.forEach(function(L){var V=L.name;g.core.schema.tables.some(function(W){return W.name===V})&&(L.core=g.core.table(V),g[V]instanceof g.Table&&(g[V].core=L.core))})}function Gl(g,w,C,I){C.forEach(function(L){var V=I[L];w.forEach(function(W){var K=function X(J,ne){return b(J,ne)||(J=u(J))&&X(J,ne)}(W,L);(!K||"value"in K&&K.value===void 0)&&(W===g.Transaction.prototype||W instanceof g.Transaction?v(W,L,{get:function(){return this.table(L)},set:function(X){p(this,L,{value:X,writable:!0,configurable:!0,enumerable:!0})}}):W[L]=new g.Table(L,V))})})}function Yl(g,w){w.forEach(function(C){for(var I in C)C[I]instanceof g.Table&&delete C[I]})}function vu(g,w){return g._cfg.version-w._cfg.version}function _g(g,w,C,I){var L=g._dbSchema;C.objectStoreNames.contains("$meta")&&!L.$meta&&(L.$meta=th("$meta",wu("")[0],[]),g._storeNames.push("$meta"));var V=g._createTransaction("readwrite",g._storeNames,L);V.create(C),V._completion.catch(I);var W=V._reject.bind(V),K=ze.transless||ze;wa(function(){return ze.trans=V,ze.transless=K,w!==0?(rs(g,C),J=w,((X=V).storeNames.includes("$meta")?X.table("$meta").get("version").then(function(ne){return ne??J}):be.resolve(J)).then(function(ne){return ae=ne,Q=V,te=C,ie=[],ne=(G=g)._versions,re=G._dbSchema=Ql(0,G.idbdb,te),(ne=ne.filter(function(se){return se._cfg.version>=ae})).length!==0?(ne.forEach(function(se){ie.push(function(){var de=re,pe=se._cfg.dbschema;Oo(G,de,te),Oo(G,pe,te),re=G._dbSchema=pe;var me=rh(de,pe);me.add.forEach(function(Me){bu(te,Me[0],Me[1].primKey,Me[1].indexes)}),me.change.forEach(function(Me){if(Me.recreate)throw new fe.Upgrade("Not yet support for changing primary key");var De=te.objectStore(Me.name);Me.add.forEach(function($e){return Xl(De,$e)}),Me.change.forEach(function($e){De.deleteIndex($e.name),Xl(De,$e)}),Me.del.forEach(function($e){return De.deleteIndex($e)})});var Ae=se._cfg.contentUpgrade;if(Ae&&se._cfg.version>ae){rs(G,te),Q._memoizedTables={};var Oe=T(pe);me.del.forEach(function(Me){Oe[Me]=de[Me]}),Yl(G,[G.Transaction.prototype]),Gl(G,[G.Transaction.prototype],s(Oe),Oe),Q.schema=Oe;var Pe,Ce=ce(Ae);return Ce&&Za(),me=be.follow(function(){var Me;(Pe=Ae(Q))&&Ce&&(Me=Yi.bind(null,null),Pe.then(Me,Me))}),Pe&&typeof Pe.then=="function"?be.resolve(Pe):me.then(function(){return Pe})}}),ie.push(function(de){var pe,me,Ae=se._cfg.dbschema;pe=Ae,me=de,[].slice.call(me.db.objectStoreNames).forEach(function(Oe){return pe[Oe]==null&&me.db.deleteObjectStore(Oe)}),Yl(G,[G.Transaction.prototype]),Gl(G,[G.Transaction.prototype],G._storeNames,G._dbSchema),Q.schema=G._dbSchema}),ie.push(function(de){G.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(G.idbdb.version/10)===se._cfg.version?(G.idbdb.deleteObjectStore("$meta"),delete G._dbSchema.$meta,G._storeNames=G._storeNames.filter(function(pe){return pe!=="$meta"})):de.objectStore("$meta").put(se._cfg.version,"version"))})}),function se(){return ie.length?be.resolve(ie.shift()(Q.idbtrans)).then(se):be.resolve()}().then(function(){No(re,te)})):be.resolve();var G,ae,Q,te,ie,re}).catch(W)):(s(L).forEach(function(ne){bu(C,ne,L[ne].primKey,L[ne].indexes)}),rs(g,C),void be.follow(function(){return g.on.populate.fire(V)}).catch(W));var X,J})}function xu(g,w){No(g._dbSchema,w),w.db.version%10!=0||w.objectStoreNames.contains("$meta")||w.db.createObjectStore("$meta").add(Math.ceil(w.db.version/10-1),"version");var C=Ql(0,g.idbdb,w);Oo(g,g._dbSchema,w);for(var I=0,L=rh(C,g._dbSchema).change;I<L.length;I++){var V=function(W){if(W.change.length||W.recreate)return console.warn("Unable to patch indexes of table ".concat(W.name," because it has changes on the type of index or primary key.")),{value:void 0};var K=w.objectStore(W.name);W.add.forEach(function(X){Rt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(W.name,".").concat(X.src)),Xl(K,X)})}(L[I]);if(typeof V=="object")return V.value}}function rh(g,w){var C,I={del:[],add:[],change:[]};for(C in g)w[C]||I.del.push(C);for(C in w){var L=g[C],V=w[C];if(L){var W={name:C,def:V,recreate:!1,del:[],add:[],change:[]};if(""+(L.primKey.keyPath||"")!=""+(V.primKey.keyPath||"")||L.primKey.auto!==V.primKey.auto)W.recreate=!0,I.change.push(W);else{var K=L.idxByName,X=V.idxByName,J=void 0;for(J in K)X[J]||W.del.push(J);for(J in X){var ne=K[J],G=X[J];ne?ne.src!==G.src&&W.change.push(G):W.add.push(G)}(0<W.del.length||0<W.add.length||0<W.change.length)&&I.change.push(W)}}else I.add.push([C,V])}return I}function bu(g,w,C,I){var L=g.db.createObjectStore(w,C.keyPath?{keyPath:C.keyPath,autoIncrement:C.auto}:{autoIncrement:C.auto});return I.forEach(function(V){return Xl(L,V)}),L}function No(g,w){s(g).forEach(function(C){w.db.objectStoreNames.contains(C)||(Rt&&console.debug("Dexie: Creating missing table",C),bu(w,C,g[C].primKey,g[C].indexes))})}function Xl(g,w){g.createIndex(w.name,w.keyPath,{unique:w.unique,multiEntry:w.multi})}function Ql(g,w,C){var I={};return _(w.objectStoreNames,0).forEach(function(L){for(var V=C.objectStore(L),W=Jt(bg(J=V.keyPath),J||"",!0,!1,!!V.autoIncrement,J&&typeof J!="string",!0),K=[],X=0;X<V.indexNames.length;++X){var ne=V.index(V.indexNames[X]),J=ne.keyPath,ne=Jt(ne.name,J,!!ne.unique,!!ne.multiEntry,!1,J&&typeof J!="string",!1);K.push(ne)}I[L]=th(L,W,K)}),I}function Oo(g,w,C){for(var I=C.db.objectStoreNames,L=0;L<I.length;++L){var V=I[L],W=C.objectStore(V);g._hasGetAll="getAll"in W;for(var K=0;K<W.indexNames.length;++K){var X=W.indexNames[K],J=W.index(X).keyPath,ne=typeof J=="string"?J:"["+_(J).join("+")+"]";!w[V]||(J=w[V].idxByName[ne])&&(J.name=X,delete w[V].idxByName[ne],w[V].idxByName[X]=J)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(g._hasGetAll=!1)}function wu(g){return g.split(",").map(function(w,C){var V=w.split(":"),I=(L=V[1])===null||L===void 0?void 0:L.trim(),L=(w=V[0].trim()).replace(/([&*]|\+\+)/g,""),V=/^\[/.test(L)?L.match(/^\[(.*)\]$/)[1].split("+"):L;return Jt(L,V||null,/\&/.test(w),/\*/.test(w),/\+\+/.test(w),o(V),C===0,I)})}var Sg=(ja.prototype._createTableSchema=th,ja.prototype._parseIndexSyntax=wu,ja.prototype._parseStoresSpec=function(g,w){var C=this;s(g).forEach(function(I){if(g[I]!==null){var L=C._parseIndexSyntax(g[I]),V=L.shift();if(!V)throw new fe.Schema("Invalid schema for table "+I+": "+g[I]);if(V.unique=!0,V.multi)throw new fe.Schema("Primary key cannot be multiEntry*");L.forEach(function(W){if(W.auto)throw new fe.Schema("Only primary key can be marked as autoIncrement (++)");if(!W.keyPath)throw new fe.Schema("Index must have a name and cannot be an empty string")}),L=C._createTableSchema(I,V,L),w[I]=L}})},ja.prototype.stores=function(C){var w=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,C):C;var C=w._versions,I={},L={};return C.forEach(function(V){l(I,V._cfg.storesSource),L=V._cfg.dbschema={},V._parseStoresSpec(I,L)}),w._dbSchema=L,Yl(w,[w._allTables,w,w.Transaction.prototype]),Gl(w,[w._allTables,w,w.Transaction.prototype,this._cfg.tables],s(L),L),w._storeNames=s(L),this},ja.prototype.upgrade=function(g){return this._cfg.contentUpgrade=Mt(this._cfg.contentUpgrade||he,g),this},ja);function ja(){}function _u(g,w){var C=g._dbNamesDB;return C||(C=g._dbNamesDB=new $s(Ul,{addons:[],indexedDB:g,IDBKeyRange:w})).version(1).stores({dbnames:"name"}),C.table("dbnames")}function Su(g){return g&&typeof g.databases=="function"}function Ta(g){return wa(function(){return ze.letThrough=!0,g()})}function Eu(g){return!("from"in g)}var Qn=function(g,w){if(!this){var C=new Qn;return g&&"d"in g&&l(C,g),C}l(this,arguments.length?{d:1,from:g,to:1<arguments.length?w:g}:{d:0})};function Io(g,w,C){var I=vt(w,C);if(!isNaN(I)){if(0<I)throw RangeError();if(Eu(g))return l(g,{from:w,to:C,d:1});var L=g.l,I=g.r;if(vt(C,g.from)<0)return L?Io(L,w,C):g.l={from:w,to:C,d:1,l:null,r:null},ih(g);if(0<vt(w,g.to))return I?Io(I,w,C):g.r={from:w,to:C,d:1,l:null,r:null},ih(g);vt(w,g.from)<0&&(g.from=w,g.l=null,g.d=I?I.d+1:1),0<vt(C,g.to)&&(g.to=C,g.r=null,g.d=g.l?g.l.d+1:1),C=!g.r,L&&!g.l&&Do(g,L),I&&C&&Do(g,I)}}function Do(g,w){Eu(w)||function C(I,X){var V=X.from,W=X.to,K=X.l,X=X.r;Io(I,V,W),K&&C(I,K),X&&C(I,X)}(g,w)}function Zl(g,w){var C=ur(w),I=C.next();if(I.done)return!1;for(var L=I.value,V=ur(g),W=V.next(L.from),K=W.value;!I.done&&!W.done;){if(vt(K.from,L.to)<=0&&0<=vt(K.to,L.from))return!0;vt(L.from,K.from)<0?L=(I=C.next(K.from)).value:K=(W=V.next(L.from)).value}return!1}function ur(g){var w=Eu(g)?null:{s:0,n:g};return{next:function(C){for(var I=0<arguments.length;w;)switch(w.s){case 0:if(w.s=1,I)for(;w.n.l&&vt(C,w.n.from)<0;)w={up:w,n:w.n.l,s:1};else for(;w.n.l;)w={up:w,n:w.n.l,s:1};case 1:if(w.s=2,!I||vt(C,w.n.to)<=0)return{value:w.n,done:!1};case 2:if(w.n.r){w.s=3,w={up:w,n:w.n.r,s:0};continue}case 3:w=w.up}return{done:!0}}}}function ih(g){var w,C,I=(((w=g.r)===null||w===void 0?void 0:w.d)||0)-(((C=g.l)===null||C===void 0?void 0:C.d)||0),L=1<I?"r":I<-1?"l":"";L&&(w=L=="r"?"l":"r",C=r({},g),I=g[L],g.from=I.from,g.to=I.to,g[L]=I[L],C[L]=I[w],(g[w]=C).d=ah(C)),g.d=ah(g)}function ah(C){var w=C.r,C=C.l;return(w?C?Math.max(w.d,C.d):w.d:C?C.d:0)+1}function Pa(g,w){return s(w).forEach(function(C){g[C]?Do(g[C],w[C]):g[C]=function I(L){var V,W,K={};for(V in L)d(L,V)&&(W=L[V],K[V]=!W||typeof W!="object"||M.has(W.constructor)?W:I(W));return K}(w[C])}),g}function m(g,w){return g.all||w.all||Object.keys(g).some(function(C){return w[C]&&Zl(w[C],g[C])})}h(Qn.prototype,((Zi={add:function(g){return Do(this,g),this},addKey:function(g){return Io(this,g,g),this},addKeys:function(g){var w=this;return g.forEach(function(C){return Io(w,C,C)}),this},hasKey:function(g){var w=ur(this).next(g).value;return w&&vt(w.from,g)<=0&&0<=vt(w.to,g)}})[U]=function(){return ur(this)},Zi));var k={},R={},B=!1;function oe(g){Pa(R,g),B||(B=!0,setTimeout(function(){B=!1,ue(R,!(R={}))},0))}function ue(g,w){w===void 0&&(w=!1);var C=new Set;if(g.all)for(var I=0,L=Object.values(k);I<L.length;I++)ke(W=L[I],g,C,w);else for(var V in g){var W,K=/^idb\:\/\/(.*)\/(.*)\//.exec(V);K&&(V=K[1],K=K[2],(W=k["idb://".concat(V,"/").concat(K)])&&ke(W,g,C,w))}C.forEach(function(X){return X()})}function ke(g,w,C,I){for(var L=[],V=0,W=Object.entries(g.queries.query);V<W.length;V++){for(var K=W[V],X=K[0],J=[],ne=0,G=K[1];ne<G.length;ne++){var ae=G[ne];m(w,ae.obsSet)?ae.subscribers.forEach(function(re){return C.add(re)}):I&&J.push(ae)}I&&L.push([X,J])}if(I)for(var Q=0,te=L;Q<te.length;Q++){var ie=te[Q],X=ie[0],J=ie[1];g.queries.query[X]=J}}function pt(g){var w=g._state,C=g._deps.indexedDB;if(w.isBeingOpened||g.idbdb)return w.dbReadyPromise.then(function(){return w.dbOpenError?Xt(w.dbOpenError):g});w.isBeingOpened=!0,w.dbOpenError=null,w.openComplete=!1;var I=w.openCanceller,L=Math.round(10*g.verno),V=!1;function W(){if(w.openCanceller!==I)throw new fe.DatabaseClosed("db.open() was cancelled")}function K(){return new be(function(ae,Q){if(W(),!C)throw new fe.MissingAPI;var te=g.name,ie=w.autoSchema||!L?C.open(te):C.open(te,L);if(!ie)throw new fe.MissingAPI;ie.onerror=si(Q),ie.onblocked=Ft(g._fireOnBlocked),ie.onupgradeneeded=Ft(function(re){var se;ne=ie.transaction,w.autoSchema&&!g._options.allowEmptyDB?(ie.onerror=ns,ne.abort(),ie.result.close(),(se=C.deleteDatabase(te)).onsuccess=se.onerror=Ft(function(){Q(new fe.NoSuchDatabase("Database ".concat(te," doesnt exist")))})):(ne.onerror=si(Q),re=re.oldVersion>Math.pow(2,62)?0:re.oldVersion,G=re<1,g.idbdb=ie.result,V&&xu(g,ne),_g(g,re/10,ne,Q))},Q),ie.onsuccess=Ft(function(){ne=null;var re,se,de,pe,me,Ae=g.idbdb=ie.result,Oe=_(Ae.objectStoreNames);if(0<Oe.length)try{var Pe=Ae.transaction((pe=Oe).length===1?pe[0]:pe,"readonly");if(w.autoSchema)se=Ae,de=Pe,(re=g).verno=se.version/10,de=re._dbSchema=Ql(0,se,de),re._storeNames=_(se.objectStoreNames,0),Gl(re,[re._allTables],s(de),de);else if(Oo(g,g._dbSchema,Pe),((me=rh(Ql(0,(me=g).idbdb,Pe),me._dbSchema)).add.length||me.change.some(function(Ce){return Ce.add.length||Ce.change.length}))&&!V)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Ae.close(),L=Ae.version+1,V=!0,ae(K());rs(g,Pe)}catch{}Is.push(g),Ae.onversionchange=Ft(function(Ce){w.vcFired=!0,g.on("versionchange").fire(Ce)}),Ae.onclose=Ft(function(Ce){g.on("close").fire(Ce)}),G&&(me=g._deps,Pe=te,Ae=me.indexedDB,me=me.IDBKeyRange,Su(Ae)||Pe===Ul||_u(Ae,me).put({name:Pe}).catch(he)),ae()},Q)}).catch(function(ae){switch(ae==null?void 0:ae.name){case"UnknownError":if(0<w.PR1398_maxLoop)return w.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),K();break;case"VersionError":if(0<L)return L=0,K()}return be.reject(ae)})}var X,J=w.dbReadyResolve,ne=null,G=!1;return be.race([I,(typeof navigator>"u"?be.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(ae){function Q(){return indexedDB.databases().finally(ae)}X=setInterval(Q,100),Q()}).finally(function(){return clearInterval(X)}):Promise.resolve()).then(K)]).then(function(){return W(),w.onReadyBeingFired=[],be.resolve(Ta(function(){return g.on.ready.fire(g.vip)})).then(function ae(){if(0<w.onReadyBeingFired.length){var Q=w.onReadyBeingFired.reduce(Mt,he);return w.onReadyBeingFired=[],be.resolve(Ta(function(){return Q(g.vip)})).then(ae)}})}).finally(function(){w.openCanceller===I&&(w.onReadyBeingFired=null,w.isBeingOpened=!1)}).catch(function(ae){w.dbOpenError=ae;try{ne&&ne.abort()}catch{}return I===w.openCanceller&&g._close(),Xt(ae)}).finally(function(){w.openComplete=!0,J()}).then(function(){var ae;return G&&(ae={},g.tables.forEach(function(Q){Q.schema.indexes.forEach(function(te){te.name&&(ae["idb://".concat(g.name,"/").concat(Q.name,"/").concat(te.name)]=new Qn(-1/0,[[[]]]))}),ae["idb://".concat(g.name,"/").concat(Q.name,"/")]=ae["idb://".concat(g.name,"/").concat(Q.name,"/:dels")]=new Qn(-1/0,[[[]]])}),oi(Co).fire(ae),ue(ae,!0)),g})}function bn(g){function w(V){return g.next(V)}var C=L(w),I=L(function(V){return g.throw(V)});function L(V){return function(X){var K=V(X),X=K.value;return K.done?X:X&&typeof X.then=="function"?X.then(C,I):o(X)?Promise.all(X).then(C,I):C(X)}}return L(w)()}function Nt(g,w,C){for(var I=o(g)?g.slice():[g],L=0;L<C;++L)I.push(w);return I}var Un={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(g){return r(r({},g),{table:function(w){var C=g.table(w),I=C.schema,L={},V=[];function W(G,ae,Q){var te=ci(G),ie=L[te]=L[te]||[],re=G==null?0:typeof G=="string"?1:G.length,se=0<ae,se=r(r({},Q),{name:se?"".concat(te,"(virtual-from:").concat(Q.name,")"):Q.name,lowLevelIndex:Q,isVirtual:se,keyTail:ae,keyLength:re,extractKey:gu(G),unique:!se&&Q.unique});return ie.push(se),se.isPrimaryKey||V.push(se),1<re&&W(re===2?G[0]:G.slice(0,re-1),ae+1,Q),ie.sort(function(de,pe){return de.keyTail-pe.keyTail}),se}w=W(I.primaryKey.keyPath,0,I.primaryKey),L[":id"]=[w];for(var K=0,X=I.indexes;K<X.length;K++){var J=X[K];W(J.keyPath,0,J)}function ne(G){var ae,Q=G.query.index;return Q.isVirtual?r(r({},G),{query:{index:Q.lowLevelIndex,range:(ae=G.query.range,Q=Q.keyTail,{type:ae.type===1?2:ae.type,lower:Nt(ae.lower,ae.lowerOpen?g.MAX_KEY:g.MIN_KEY,Q),lowerOpen:!0,upper:Nt(ae.upper,ae.upperOpen?g.MIN_KEY:g.MAX_KEY,Q),upperOpen:!0})}}):G}return r(r({},C),{schema:r(r({},I),{primaryKey:w,indexes:V,getIndexByKeyPath:function(G){return(G=L[ci(G)])&&G[0]}}),count:function(G){return C.count(ne(G))},query:function(G){return C.query(ne(G))},openCursor:function(G){var ae=G.query.index,Q=ae.keyTail,te=ae.isVirtual,ie=ae.keyLength;return te?C.openCursor(ne(G)).then(function(se){return se&&re(se)}):C.openCursor(G);function re(se){return Object.create(se,{continue:{value:function(de){de!=null?se.continue(Nt(de,G.reverse?g.MAX_KEY:g.MIN_KEY,Q)):G.unique?se.continue(se.key.slice(0,ie).concat(G.reverse?g.MIN_KEY:g.MAX_KEY,Q)):se.continue()}},continuePrimaryKey:{value:function(de,pe){se.continuePrimaryKey(Nt(de,g.MAX_KEY,Q),pe)}},primaryKey:{get:function(){return se.primaryKey}},key:{get:function(){var de=se.key;return ie===1?de[0]:de.slice(0,ie)}},value:{get:function(){return se.value}}})}}})}})}};function ui(g,w,C,I){return C=C||{},I=I||"",s(g).forEach(function(L){var V,W,K;d(w,L)?(V=g[L],W=w[L],typeof V=="object"&&typeof W=="object"&&V&&W?(K=ee(V))!==ee(W)?C[I+L]=w[L]:K==="Object"?ui(V,W,C,I+L+"."):V!==W&&(C[I+L]=w[L]):V!==W&&(C[I+L]=w[L])):C[I+L]=void 0}),s(w).forEach(function(L){d(g,L)||(C[I+L]=w[L])}),C}function Ca(g,w){return w.type==="delete"?w.keys:w.keys||w.values.map(g.extractKey)}var is={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(g){return r(r({},g),{table:function(w){var C=g.table(w),I=C.schema.primaryKey;return r(r({},C),{mutate:function(L){var V=ze.trans,W=V.table(w).hook,K=W.deleting,X=W.creating,J=W.updating;switch(L.type){case"add":if(X.fire===he)break;return V._promise("readwrite",function(){return ne(L)},!0);case"put":if(X.fire===he&&J.fire===he)break;return V._promise("readwrite",function(){return ne(L)},!0);case"delete":if(K.fire===he)break;return V._promise("readwrite",function(){return ne(L)},!0);case"deleteRange":if(K.fire===he)break;return V._promise("readwrite",function(){return function G(ae,Q,te){return C.query({trans:ae,values:!1,query:{index:I,range:Q},limit:te}).then(function(ie){var re=ie.result;return ne({type:"delete",keys:re,trans:ae}).then(function(se){return 0<se.numFailures?Promise.reject(se.failures[0]):re.length<te?{failures:[],numFailures:0,lastResult:void 0}:G(ae,r(r({},Q),{lower:re[re.length-1],lowerOpen:!0}),te)})})}(L.trans,L.range,1e4)},!0)}return C.mutate(L);function ne(G){var ae,Q,te,ie=ze.trans,re=G.keys||Ca(I,G);if(!re)throw new Error("Keys missing");return(G=G.type==="add"||G.type==="put"?r(r({},G),{keys:re}):r({},G)).type!=="delete"&&(G.values=i([],G.values)),G.keys&&(G.keys=i([],G.keys)),ae=C,te=re,((Q=G).type==="add"?Promise.resolve([]):ae.getMany({trans:Q.trans,keys:te,cache:"immutable"})).then(function(se){var de=re.map(function(pe,me){var Ae,Oe,Pe,Ce=se[me],Me={onerror:null,onsuccess:null};return G.type==="delete"?K.fire.call(Me,pe,Ce,ie):G.type==="add"||Ce===void 0?(Ae=X.fire.call(Me,pe,G.values[me],ie),pe==null&&Ae!=null&&(G.keys[me]=pe=Ae,I.outbound||S(G.values[me],I.keyPath,pe))):(Ae=ui(Ce,G.values[me]),(Oe=J.fire.call(Me,Ae,pe,Ce,ie))&&(Pe=G.values[me],Object.keys(Oe).forEach(function(De){d(Pe,De)?Pe[De]=Oe[De]:S(Pe,De,Oe[De])}))),Me});return C.mutate(G).then(function(pe){for(var me=pe.failures,Ae=pe.results,Oe=pe.numFailures,pe=pe.lastResult,Pe=0;Pe<re.length;++Pe){var Ce=(Ae||re)[Pe],Me=de[Pe];Ce==null?Me.onerror&&Me.onerror(me[Pe]):Me.onsuccess&&Me.onsuccess(G.type==="put"&&se[Pe]?G.values[Pe]:Ce)}return{failures:me,results:Ae,numFailures:Oe,lastResult:pe}}).catch(function(pe){return de.forEach(function(me){return me.onerror&&me.onerror(pe)}),Promise.reject(pe)})})}}})}})}};function ka(g,w,C){try{if(!w||w.keys.length<g.length)return null;for(var I=[],L=0,V=0;L<w.keys.length&&V<g.length;++L)vt(w.keys[L],g[V])===0&&(I.push(C?z(w.values[L]):w.values[L]),++V);return I.length===g.length?I:null}catch{return null}}var Au={stack:"dbcore",level:-1,create:function(g){return{table:function(w){var C=g.table(w);return r(r({},C),{getMany:function(I){if(!I.cache)return C.getMany(I);var L=ka(I.keys,I.trans._cache,I.cache==="clone");return L?be.resolve(L):C.getMany(I).then(function(V){return I.trans._cache={keys:I.keys,values:I.cache==="clone"?z(V):V},V})},mutate:function(I){return I.type!=="add"&&(I.trans._cache=null),C.mutate(I)}})}}}};function ju(g,w){return g.trans.mode==="readonly"&&!!g.subscr&&!g.trans.explicit&&g.trans.db._options.cache!=="disabled"&&!w.schema.primaryKey.outbound}function wT(g,w){switch(g){case"query":return w.values&&!w.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var t9={stack:"dbcore",level:0,name:"Observability",create:function(g){var w=g.schema.name,C=new Qn(g.MIN_KEY,g.MAX_KEY);return r(r({},g),{transaction:function(I,L,V){if(ze.subscr&&L!=="readonly")throw new fe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ze.querier));return g.transaction(I,L,V)},table:function(I){var L=g.table(I),V=L.schema,W=V.primaryKey,G=V.indexes,K=W.extractKey,X=W.outbound,J=W.autoIncrement&&G.filter(function(Q){return Q.compound&&Q.keyPath.includes(W.keyPath)}),ne=r(r({},L),{mutate:function(Q){function te(De){return De="idb://".concat(w,"/").concat(I,"/").concat(De),pe[De]||(pe[De]=new Qn)}var ie,re,se,de=Q.trans,pe=Q.mutatedParts||(Q.mutatedParts={}),me=te(""),Ae=te(":dels"),Oe=Q.type,Me=Q.type==="deleteRange"?[Q.range]:Q.type==="delete"?[Q.keys]:Q.values.length<50?[Ca(W,Q).filter(function(De){return De}),Q.values]:[],Pe=Me[0],Ce=Me[1],Me=Q.trans._cache;return o(Pe)?(me.addKeys(Pe),(Me=Oe==="delete"||Pe.length===Ce.length?ka(Pe,Me):null)||Ae.addKeys(Pe),(Me||Ce)&&(ie=te,re=Me,se=Ce,V.indexes.forEach(function(De){var $e=ie(De.name||"");function mt(ut){return ut!=null?De.extractKey(ut):null}function At(ut){return De.multiEntry&&o(ut)?ut.forEach(function(jn){return $e.addKey(jn)}):$e.addKey(ut)}(re||se).forEach(function(ut,Or){var ot=re&&mt(re[Or]),Or=se&&mt(se[Or]);vt(ot,Or)!==0&&(ot!=null&&At(ot),Or!=null&&At(Or))})}))):Pe?(Ce={from:(Ce=Pe.lower)!==null&&Ce!==void 0?Ce:g.MIN_KEY,to:(Ce=Pe.upper)!==null&&Ce!==void 0?Ce:g.MAX_KEY},Ae.add(Ce),me.add(Ce)):(me.add(C),Ae.add(C),V.indexes.forEach(function(De){return te(De.name).add(C)})),L.mutate(Q).then(function(De){return!Pe||Q.type!=="add"&&Q.type!=="put"||(me.addKeys(De.results),J&&J.forEach(function($e){for(var mt=Q.values.map(function(ot){return $e.extractKey(ot)}),At=$e.keyPath.findIndex(function(ot){return ot===W.keyPath}),ut=0,jn=De.results.length;ut<jn;++ut)mt[ut][At]=De.results[ut];te($e.name).addKeys(mt)})),de.mutatedParts=Pa(de.mutatedParts||{},pe),De})}}),G=function(te){var ie=te.query,te=ie.index,ie=ie.range;return[te,new Qn((te=ie.lower)!==null&&te!==void 0?te:g.MIN_KEY,(ie=ie.upper)!==null&&ie!==void 0?ie:g.MAX_KEY)]},ae={get:function(Q){return[W,new Qn(Q.key)]},getMany:function(Q){return[W,new Qn().addKeys(Q.keys)]},count:G,query:G,openCursor:G};return s(ae).forEach(function(Q){ne[Q]=function(te){var ie=ze.subscr,re=!!ie,se=ju(ze,L)&&wT(Q,te)?te.obsSet={}:ie;if(re){var de=function(Ce){return Ce="idb://".concat(w,"/").concat(I,"/").concat(Ce),se[Ce]||(se[Ce]=new Qn)},pe=de(""),me=de(":dels"),ie=ae[Q](te),re=ie[0],ie=ie[1];if((Q==="query"&&re.isPrimaryKey&&!te.values?me:de(re.name||"")).add(ie),!re.isPrimaryKey){if(Q!=="count"){var Ae=Q==="query"&&X&&te.values&&L.query(r(r({},te),{values:!1}));return L[Q].apply(this,arguments).then(function(Ce){if(Q==="query"){if(X&&te.values)return Ae.then(function(mt){return mt=mt.result,pe.addKeys(mt),Ce});var Me=te.values?Ce.result.map(K):Ce.result;(te.values?pe:me).addKeys(Me)}else if(Q==="openCursor"){var De=Ce,$e=te.values;return De&&Object.create(De,{key:{get:function(){return me.addKey(De.primaryKey),De.key}},primaryKey:{get:function(){var mt=De.primaryKey;return me.addKey(mt),mt}},value:{get:function(){return $e&&pe.addKey(De.primaryKey),De.value}}})}return Ce})}me.add(C)}}return L[Q].apply(this,arguments)}}),ne}})}};function _T(g,w,C){if(C.numFailures===0)return w;if(w.type==="deleteRange")return null;var I=w.keys?w.keys.length:"values"in w&&w.values?w.values.length:1;return C.numFailures===I?null:(w=r({},w),o(w.keys)&&(w.keys=w.keys.filter(function(L,V){return!(V in C.failures)})),"values"in w&&o(w.values)&&(w.values=w.values.filter(function(L,V){return!(V in C.failures)})),w)}function Cb(g,w){return C=g,((I=w).lower===void 0||(I.lowerOpen?0<vt(C,I.lower):0<=vt(C,I.lower)))&&(g=g,(w=w).upper===void 0||(w.upperOpen?vt(g,w.upper)<0:vt(g,w.upper)<=0));var C,I}function ST(g,w,ae,I,L,V){if(!ae||ae.length===0)return g;var W=w.query.index,K=W.multiEntry,X=w.query.range,J=I.schema.primaryKey.extractKey,ne=W.extractKey,G=(W.lowLevelIndex||W).extractKey,ae=ae.reduce(function(Q,te){var ie=Q,re=[];if(te.type==="add"||te.type==="put")for(var se=new Qn,de=te.values.length-1;0<=de;--de){var pe,me=te.values[de],Ae=J(me);se.hasKey(Ae)||(pe=ne(me),(K&&o(pe)?pe.some(function(De){return Cb(De,X)}):Cb(pe,X))&&(se.addKey(Ae),re.push(me)))}switch(te.type){case"add":var Oe=new Qn().addKeys(w.values?Q.map(function($e){return J($e)}):Q),ie=Q.concat(w.values?re.filter(function($e){return $e=J($e),!Oe.hasKey($e)&&(Oe.addKey($e),!0)}):re.map(function($e){return J($e)}).filter(function($e){return!Oe.hasKey($e)&&(Oe.addKey($e),!0)}));break;case"put":var Pe=new Qn().addKeys(te.values.map(function($e){return J($e)}));ie=Q.filter(function($e){return!Pe.hasKey(w.values?J($e):$e)}).concat(w.values?re:re.map(function($e){return J($e)}));break;case"delete":var Ce=new Qn().addKeys(te.keys);ie=Q.filter(function($e){return!Ce.hasKey(w.values?J($e):$e)});break;case"deleteRange":var Me=te.range;ie=Q.filter(function($e){return!Cb(J($e),Me)})}return ie},g);return ae===g?g:(ae.sort(function(Q,te){return vt(G(Q),G(te))||vt(J(Q),J(te))}),w.limit&&w.limit<1/0&&(ae.length>w.limit?ae.length=w.limit:g.length===w.limit&&ae.length<w.limit&&(L.dirty=!0)),V?Object.freeze(ae):ae)}function ET(g,w){return vt(g.lower,w.lower)===0&&vt(g.upper,w.upper)===0&&!!g.lowerOpen==!!w.lowerOpen&&!!g.upperOpen==!!w.upperOpen}function n9(g,w){return function(C,I,L,V){if(C===void 0)return I!==void 0?-1:0;if(I===void 0)return 1;if((I=vt(C,I))===0){if(L&&V)return 0;if(L)return 1;if(V)return-1}return I}(g.lower,w.lower,g.lowerOpen,w.lowerOpen)<=0&&0<=function(C,I,L,V){if(C===void 0)return I!==void 0?1:0;if(I===void 0)return-1;if((I=vt(C,I))===0){if(L&&V)return 0;if(L)return-1;if(V)return 1}return I}(g.upper,w.upper,g.upperOpen,w.upperOpen)}function r9(g,w,C,I){g.subscribers.add(C),I.addEventListener("abort",function(){var L,V;g.subscribers.delete(C),g.subscribers.size===0&&(L=g,V=w,setTimeout(function(){L.subscribers.size===0&&q(V,L)},3e3))})}var i9={stack:"dbcore",level:0,name:"Cache",create:function(g){var w=g.schema.name;return r(r({},g),{transaction:function(C,I,L){var V,W,K=g.transaction(C,I,L);return I==="readwrite"&&(W=(V=new AbortController).signal,L=function(X){return function(){if(V.abort(),I==="readwrite"){for(var J=new Set,ne=0,G=C;ne<G.length;ne++){var ae=G[ne],Q=k["idb://".concat(w,"/").concat(ae)];if(Q){var te=g.table(ae),ie=Q.optimisticOps.filter(function($e){return $e.trans===K});if(K._explicit&&X&&K.mutatedParts)for(var re=0,se=Object.values(Q.queries.query);re<se.length;re++)for(var de=0,pe=(Oe=se[re]).slice();de<pe.length;de++)m((Pe=pe[de]).obsSet,K.mutatedParts)&&(q(Oe,Pe),Pe.subscribers.forEach(function($e){return J.add($e)}));else if(0<ie.length){Q.optimisticOps=Q.optimisticOps.filter(function($e){return $e.trans!==K});for(var me=0,Ae=Object.values(Q.queries.query);me<Ae.length;me++)for(var Oe,Pe,Ce,Me=0,De=(Oe=Ae[me]).slice();Me<De.length;Me++)(Pe=De[Me]).res!=null&&K.mutatedParts&&(X&&!Pe.dirty?(Ce=Object.isFrozen(Pe.res),Ce=ST(Pe.res,Pe.req,ie,te,Pe,Ce),Pe.dirty?(q(Oe,Pe),Pe.subscribers.forEach(function($e){return J.add($e)})):Ce!==Pe.res&&(Pe.res=Ce,Pe.promise=be.resolve({result:Ce}))):(Pe.dirty&&q(Oe,Pe),Pe.subscribers.forEach(function($e){return J.add($e)})))}}}J.forEach(function($e){return $e()})}}},K.addEventListener("abort",L(!1),{signal:W}),K.addEventListener("error",L(!1),{signal:W}),K.addEventListener("complete",L(!0),{signal:W})),K},table:function(C){var I=g.table(C),L=I.schema.primaryKey;return r(r({},I),{mutate:function(V){var W=ze.trans;if(L.outbound||W.db._options.cache==="disabled"||W.explicit||W.idbtrans.mode!=="readwrite")return I.mutate(V);var K=k["idb://".concat(w,"/").concat(C)];return K?(W=I.mutate(V),V.type!=="add"&&V.type!=="put"||!(50<=V.values.length||Ca(L,V).some(function(X){return X==null}))?(K.optimisticOps.push(V),V.mutatedParts&&oe(V.mutatedParts),W.then(function(X){0<X.numFailures&&(q(K.optimisticOps,V),(X=_T(0,V,X))&&K.optimisticOps.push(X),V.mutatedParts&&oe(V.mutatedParts))}),W.catch(function(){q(K.optimisticOps,V),V.mutatedParts&&oe(V.mutatedParts)})):W.then(function(X){var J=_T(0,r(r({},V),{values:V.values.map(function(ne,G){var ae;return X.failures[G]?ne:(ne=(ae=L.keyPath)!==null&&ae!==void 0&&ae.includes(".")?z(ne):r({},ne),S(ne,L.keyPath,X.results[G]),ne)})}),X);K.optimisticOps.push(J),queueMicrotask(function(){return V.mutatedParts&&oe(V.mutatedParts)})}),W):I.mutate(V)},query:function(V){if(!ju(ze,I)||!wT("query",V))return I.query(V);var W=((J=ze.trans)===null||J===void 0?void 0:J.db._options.cache)==="immutable",G=ze,K=G.requery,X=G.signal,J=function(te,ie,re,se){var de=k["idb://".concat(te,"/").concat(ie)];if(!de)return[];if(!(ie=de.queries[re]))return[null,!1,de,null];var pe=ie[(se.query?se.query.index.name:null)||""];if(!pe)return[null,!1,de,null];switch(re){case"query":var me=pe.find(function(Ae){return Ae.req.limit===se.limit&&Ae.req.values===se.values&&ET(Ae.req.query.range,se.query.range)});return me?[me,!0,de,pe]:[pe.find(function(Ae){return("limit"in Ae.req?Ae.req.limit:1/0)>=se.limit&&(!se.values||Ae.req.values)&&n9(Ae.req.query.range,se.query.range)}),!1,de,pe];case"count":return me=pe.find(function(Ae){return ET(Ae.req.query.range,se.query.range)}),[me,!!me,de,pe]}}(w,C,"query",V),ne=J[0],G=J[1],ae=J[2],Q=J[3];return ne&&G?ne.obsSet=V.obsSet:(G=I.query(V).then(function(te){var ie=te.result;if(ne&&(ne.res=ie),W){for(var re=0,se=ie.length;re<se;++re)Object.freeze(ie[re]);Object.freeze(ie)}else te.result=z(ie);return te}).catch(function(te){return Q&&ne&&q(Q,ne),Promise.reject(te)}),ne={obsSet:V.obsSet,promise:G,subscribers:new Set,type:"query",req:V,dirty:!1},Q?Q.push(ne):(Q=[ne],(ae=ae||(k["idb://".concat(w,"/").concat(C)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[V.query.index.name||""]=Q)),r9(ne,Q,K,X),ne.promise.then(function(te){return{result:ST(te.result,V,ae==null?void 0:ae.optimisticOps,I,ne,W)}})}})}})}};function Eg(g,w){return new Proxy(g,{get:function(C,I,L){return I==="db"?w:Reflect.get(C,I,L)}})}var $s=(Mn.prototype.version=function(g){if(isNaN(g)||g<.1)throw new fe.Type("Given version is not a positive number");if(g=Math.round(10*g)/10,this.idbdb||this._state.isBeingOpened)throw new fe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,g);var w=this._versions,C=w.filter(function(I){return I._cfg.version===g})[0];return C||(C=new this.Version(g),w.push(C),w.sort(vu),C.stores({}),this._state.autoSchema=!1,C)},Mn.prototype._whenReady=function(g){var w=this;return this.idbdb&&(this._state.openComplete||ze.letThrough||this._vip)?g():new be(function(C,I){if(w._state.openComplete)return I(new fe.DatabaseClosed(w._state.dbOpenError));if(!w._state.isBeingOpened){if(!w._state.autoOpen)return void I(new fe.DatabaseClosed);w.open().catch(he)}w._state.dbReadyPromise.then(C,I)}).then(g)},Mn.prototype.use=function(g){var w=g.stack,C=g.create,I=g.level,L=g.name;return L&&this.unuse({stack:w,name:L}),g=this._middlewares[w]||(this._middlewares[w]=[]),g.push({stack:w,create:C,level:I??10,name:L}),g.sort(function(V,W){return V.level-W.level}),this},Mn.prototype.unuse=function(g){var w=g.stack,C=g.name,I=g.create;return w&&this._middlewares[w]&&(this._middlewares[w]=this._middlewares[w].filter(function(L){return I?L.create!==I:!!C&&L.name!==C})),this},Mn.prototype.open=function(){var g=this;return Xi(kr,function(){return pt(g)})},Mn.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var g=this._state,w=Is.indexOf(this);if(0<=w&&Is.splice(w,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}g.isBeingOpened||(g.dbReadyPromise=new be(function(C){g.dbReadyResolve=C}),g.openCanceller=new be(function(C,I){g.cancelOpen=I}))},Mn.prototype.close=function(C){var w=(C===void 0?{disableAutoOpen:!0}:C).disableAutoOpen,C=this._state;w?(C.isBeingOpened&&C.cancelOpen(new fe.DatabaseClosed),this._close(),C.autoOpen=!1,C.dbOpenError=new fe.DatabaseClosed):(this._close(),C.autoOpen=this._options.autoOpen||C.isBeingOpened,C.openComplete=!1,C.dbOpenError=null)},Mn.prototype.delete=function(g){var w=this;g===void 0&&(g={disableAutoOpen:!0});var C=0<arguments.length&&typeof arguments[0]!="object",I=this._state;return new be(function(L,V){function W(){w.close(g);var K=w._deps.indexedDB.deleteDatabase(w.name);K.onsuccess=Ft(function(){var X,J,ne;X=w._deps,J=w.name,ne=X.indexedDB,X=X.IDBKeyRange,Su(ne)||J===Ul||_u(ne,X).delete(J).catch(he),L()}),K.onerror=si(V),K.onblocked=w._fireOnBlocked}if(C)throw new fe.InvalidArgument("Invalid closeOptions argument to db.delete()");I.isBeingOpened?I.dbReadyPromise.then(W):W()})},Mn.prototype.backendDB=function(){return this.idbdb},Mn.prototype.isOpen=function(){return this.idbdb!==null},Mn.prototype.hasBeenClosed=function(){var g=this._state.dbOpenError;return g&&g.name==="DatabaseClosed"},Mn.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Mn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Mn.prototype,"tables",{get:function(){var g=this;return s(this._allTables).map(function(w){return g._allTables[w]})},enumerable:!1,configurable:!0}),Mn.prototype.transaction=function(){var g=(function(w,C,I){var L=arguments.length;if(L<2)throw new fe.InvalidArgument("Too few arguments");for(var V=new Array(L-1);--L;)V[L-1]=arguments[L];return I=V.pop(),[w,D(V),I]}).apply(this,arguments);return this._transaction.apply(this,g)},Mn.prototype._transaction=function(g,w,C){var I=this,L=ze.trans;L&&L.db===this&&g.indexOf("!")===-1||(L=null);var V,W,K=g.indexOf("?")!==-1;g=g.replace("!","").replace("?","");try{if(W=w.map(function(J){if(J=J instanceof I.Table?J.name:J,typeof J!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return J}),g=="r"||g===hu)V=hu;else{if(g!="rw"&&g!=Wl)throw new fe.InvalidArgument("Invalid transaction mode: "+g);V=Wl}if(L){if(L.mode===hu&&V===Wl){if(!K)throw new fe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");L=null}L&&W.forEach(function(J){if(L&&L.storeNames.indexOf(J)===-1){if(!K)throw new fe.SubTransaction("Table "+J+" not included in parent transaction.");L=null}}),K&&L&&!L.active&&(L=null)}}catch(J){return L?L._promise(null,function(ne,G){G(J)}):Xt(J)}var X=(function J(ne,G,ae,Q,te){return be.resolve().then(function(){var ie=ze.transless||ze,re=ne._createTransaction(G,ae,ne._dbSchema,Q);if(re.explicit=!0,ie={trans:re,transless:ie},Q)re.idbtrans=Q.idbtrans;else try{re.create(),re.idbtrans._explicit=!0,ne._state.PR1398_maxLoop=3}catch(pe){return pe.name===It.InvalidState&&ne.isOpen()&&0<--ne._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ne.close({disableAutoOpen:!1}),ne.open().then(function(){return J(ne,G,ae,null,te)})):Xt(pe)}var se,de=ce(te);return de&&Za(),ie=be.follow(function(){var pe;(se=te.call(re,re))&&(de?(pe=Yi.bind(null,null),se.then(pe,pe)):typeof se.next=="function"&&typeof se.throw=="function"&&(se=bn(se)))},ie),(se&&typeof se.then=="function"?be.resolve(se).then(function(pe){return re.active?pe:Xt(new fe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ie.then(function(){return se})).then(function(pe){return Q&&re._resolve(),re._completion.then(function(){return pe})}).catch(function(pe){return re._reject(pe),Xt(pe)})})}).bind(null,this,V,W,L,C);return L?L._promise(V,X,"lock"):ze.trans?Xi(ze.transless,function(){return I._whenReady(X)}):this._whenReady(X)},Mn.prototype.table=function(g){if(!d(this._allTables,g))throw new fe.InvalidTable("Table ".concat(g," does not exist"));return this._allTables[g]},Mn);function Mn(g,w){var C=this;this._middlewares={},this.verno=0;var I=Mn.dependencies;this._options=w=r({addons:Mn.addons,autoOpen:!0,indexedDB:I.indexedDB,IDBKeyRange:I.IDBKeyRange,cache:"cloned"},w),this._deps={indexedDB:w.indexedDB,IDBKeyRange:w.IDBKeyRange},I=w.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var L,V,W,K,X,J={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:he,dbReadyPromise:null,cancelOpen:he,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:w.autoOpen};J.dbReadyPromise=new be(function(G){J.dbReadyResolve=G}),J.openCanceller=new be(function(G,ae){J.cancelOpen=ae}),this._state=J,this.name=g,this.on=$t(this,"populate","blocked","versionchange","close",{ready:[Mt,he]}),this.once=function(G,ae){var Q=function(){for(var te=[],ie=0;ie<arguments.length;ie++)te[ie]=arguments[ie];C.on(G).unsubscribe(Q),ae.apply(C,te)};return C.on(G,Q)},this.on.ready.subscribe=E(this.on.ready.subscribe,function(G){return function(ae,Q){Mn.vip(function(){var te,ie=C._state;ie.openComplete?(ie.dbOpenError||be.resolve().then(ae),Q&&G(ae)):ie.onReadyBeingFired?(ie.onReadyBeingFired.push(ae),Q&&G(ae)):(G(ae),te=C,Q||G(function re(){te.on.ready.unsubscribe(ae),te.on.ready.unsubscribe(re)}))})}}),this.Collection=(L=this,es(Ms.prototype,function(se,re){this.db=L;var Q=Qf,te=null;if(re)try{Q=re()}catch(de){te=de}var ie=se._ctx,re=ie.table,se=re.hook.reading.fire;this._ctx={table:re,index:ie.index,isPrimKey:!ie.index||re.schema.primKey.keyPath&&ie.index===re.schema.primKey.name,range:Q,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:te,or:ie.or,valueMapper:se!==Se?se:null}})),this.Table=(V=this,es(To.prototype,function(G,ae,Q){this.db=V,this._tx=Q,this.name=G,this.schema=ae,this.hook=V._allTables[G]?V._allTables[G].hook:$t(null,{creating:[Ze,he],reading:[Le,Se],updating:[Ht,he],deleting:[qt,he]})})),this.Transaction=(W=this,es(xg.prototype,function(G,ae,Q,te,ie){var re=this;G!=="readonly"&&ae.forEach(function(se){se=(se=Q[se])===null||se===void 0?void 0:se.yProps,se&&(ae=ae.concat(se.map(function(de){return de.updatesTable})))}),this.db=W,this.mode=G,this.storeNames=ae,this.schema=Q,this.chromeTransactionDurability=te,this.idbtrans=null,this.on=$t(this,"complete","error","abort"),this.parent=ie||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new be(function(se,de){re._resolve=se,re._reject=de}),this._completion.then(function(){re.active=!1,re.on.complete.fire()},function(se){var de=re.active;return re.active=!1,re.on.error.fire(se),re.parent?re.parent._reject(se):de&&re.idbtrans&&re.idbtrans.abort(),Xt(se)})})),this.Version=(K=this,es(Sg.prototype,function(G){this.db=K,this._cfg={version:G,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(X=this,es(Aa.prototype,function(G,ae,Q){if(this.db=X,this._ctx={table:G,index:ae===":id"?null:ae,or:Q},this._cmp=this._ascending=vt,this._descending=function(te,ie){return vt(ie,te)},this._max=function(te,ie){return 0<vt(te,ie)?te:ie},this._min=function(te,ie){return vt(te,ie)<0?te:ie},this._IDBKeyRange=X._deps.IDBKeyRange,!this._IDBKeyRange)throw new fe.MissingAPI})),this.on("versionchange",function(G){0<G.newVersion?console.warn("Another connection wants to upgrade database '".concat(C.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(C.name,"'. Closing db now to resume the delete request.")),C.close({disableAutoOpen:!1})}),this.on("blocked",function(G){!G.newVersion||G.newVersion<G.oldVersion?console.warn("Dexie.delete('".concat(C.name,"') was blocked")):console.warn("Upgrade '".concat(C.name,"' blocked by other connection holding version ").concat(G.oldVersion/10))}),this._maxKey=ko(w.IDBKeyRange),this._createTransaction=function(G,ae,Q,te){return new C.Transaction(G,ae,Q,C._options.chromeTransactionDurability,te)},this._fireOnBlocked=function(G){C.on("blocked").fire(G),Is.filter(function(ae){return ae.name===C.name&&ae!==C&&!ae._state.vcFired}).map(function(ae){return ae.on("versionchange").fire(G)})},this.use(Au),this.use(i9),this.use(t9),this.use(Un),this.use(is);var ne=new Proxy(this,{get:function(G,ae,Q){if(ae==="_vip")return!0;if(ae==="table")return function(ie){return Eg(C.table(ie),ne)};var te=Reflect.get(G,ae,Q);return te instanceof To?Eg(te,ne):ae==="tables"?te.map(function(ie){return Eg(ie,ne)}):ae==="_createTransaction"?function(){return Eg(te.apply(this,arguments),ne)}:te}});this.vip=ne,I.forEach(function(G){return G(C)})}var Ag,Zi=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",a9=(kb.prototype.subscribe=function(g,w,C){return this._subscribe(g&&typeof g!="function"?g:{next:g,error:w,complete:C})},kb.prototype[Zi]=function(){return this},kb);function kb(g){this._subscribe=g}try{Ag={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{Ag={indexedDB:null,IDBKeyRange:null}}function AT(g){var w,C=!1,I=new a9(function(L){var V=ce(g),W,K=!1,X={},J={},ne={get closed(){return K},unsubscribe:function(){K||(K=!0,W&&W.abort(),G&&oi.storagemutated.unsubscribe(Q))}};L.start&&L.start(ne);var G=!1,ae=function(){return Bl(te)},Q=function(ie){Pa(X,ie),m(J,X)&&ae()},te=function(){var ie,re,se;!K&&Ag.indexedDB&&(X={},ie={},W&&W.abort(),W=new AbortController,se=function(de){var pe=fn();try{V&&Za();var me=wa(g,de);return me=V?me.finally(Yi):me}finally{pe&&Dn()}}(re={subscr:ie,signal:W.signal,requery:ae,querier:g,trans:null}),Promise.resolve(se).then(function(de){C=!0,w=de,K||re.signal.aborted||(X={},function(pe){for(var me in pe)if(d(pe,me))return;return 1}(J=ie)||G||(oi(Co,Q),G=!0),Bl(function(){return!K&&L.next&&L.next(de)}))},function(de){C=!1,["DatabaseClosedError","AbortError"].includes(de==null?void 0:de.name)||K||Bl(function(){K||L.error&&L.error(de)})}))};return setTimeout(ae,0),ne});return I.hasValue=function(){return C},I.getValue=function(){return w},I}var Jl=$s;function Nb(g){var w=Mo;try{Mo=!0,oi.storagemutated.fire(g),ue(g,!0)}finally{Mo=w}}h(Jl,r(r({},Ye),{delete:function(g){return new Jl(g,{addons:[]}).delete()},exists:function(g){return new Jl(g,{addons:[]}).open().then(function(w){return w.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(g){try{return w=Jl.dependencies,C=w.indexedDB,w=w.IDBKeyRange,(Su(C)?Promise.resolve(C.databases()).then(function(I){return I.map(function(L){return L.name}).filter(function(L){return L!==Ul})}):_u(C,w).toCollection().primaryKeys()).then(g)}catch{return Xt(new fe.MissingAPI)}var w,C},defineClass:function(){return function(g){l(this,g)}},ignoreTransaction:function(g){return ze.trans?Xi(ze.transless,g):g()},vip:Ta,async:function(g){return function(){try{var w=bn(g.apply(this,arguments));return w&&typeof w.then=="function"?w:be.resolve(w)}catch(C){return Xt(C)}}},spawn:function(g,w,C){try{var I=bn(g.apply(C,w||[]));return I&&typeof I.then=="function"?I:be.resolve(I)}catch(L){return Xt(L)}},currentTransaction:{get:function(){return ze.trans||null}},waitFor:function(g,w){return w=be.resolve(typeof g=="function"?Jl.ignoreTransaction(g):g).timeout(w||6e4),ze.trans?ze.trans.waitFor(w):w},Promise:be,debug:{get:function(){return Rt},set:function(g){In(g)}},derive:y,extend:l,props:h,override:E,Events:$t,on:oi,liveQuery:AT,extendObservabilitySet:Pa,getByKeyPath:j,setByKeyPath:S,delByKeyPath:function(g,w){typeof w=="string"?S(g,w,void 0):"length"in w&&[].map.call(w,function(C){S(g,C,void 0)})},shallowClone:T,deepClone:z,getObjectDiff:ui,cmp:vt,asap:A,minKey:-1/0,addons:[],connections:Is,errnames:It,dependencies:Ag,cache:k,semVer:"4.2.0",version:"4.2.0".split(".").map(function(g){return parseInt(g)}).reduce(function(g,w,C){return g+w/Math.pow(10,2*C)})})),Jl.maxKey=ko(Jl.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(oi(Co,function(g){Mo||(g=new CustomEvent(Rs,{detail:g}),Mo=!0,dispatchEvent(g),Mo=!1)}),addEventListener(Rs,function(g){g=g.detail,Mo||Nb(g)}));var Tu,Mo=!1,jT=function(){};return typeof BroadcastChannel<"u"&&((jT=function(){(Tu=new BroadcastChannel(Rs)).onmessage=function(g){return g.data&&Nb(g.data)}})(),typeof Tu.unref=="function"&&Tu.unref(),oi(Co,function(g){Mo||Tu.postMessage(g)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(g){if(!$s.disableBfCache&&g.persisted){Rt&&console.debug("Dexie: handling persisted pagehide"),Tu!=null&&Tu.close();for(var w=0,C=Is;w<C.length;w++)C[w].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(g){!$s.disableBfCache&&g.persisted&&(Rt&&console.debug("Dexie: handling persisted pageshow"),jT(),Nb({all:new Qn(-1/0,[[]])}))})),be.rejectionMapper=function(g,w){return!g||g instanceof Ee||g instanceof TypeError||g instanceof SyntaxError||!g.name||!Qe[g.name]?g:(w=new Qe[g.name](w||g.message,g),"stack"in g&&v(w,"stack",{get:function(){return this.inner.stack}}),w)},In(Rt),r($s,Object.freeze({__proto__:null,Dexie:$s,liveQuery:AT,Entity:Zf,cmp:vt,PropModification:Hl,replacePrefix:function(g,w){return new Hl({replacePrefix:[g,w]})},add:function(g){return new Hl({add:g})},remove:function(g){return new Hl({remove:g})},default:$s,RangeSet:Qn,mergeRanges:Do,rangesOverlap:Zl}),{default:$s}),$s})})(A$);var UG=A$.exports;const O_=Vt(UG),ik=Symbol.for("Dexie"),Ld=globalThis[ik]||(globalThis[ik]=O_);if(O_.semVer!==Ld.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${O_.semVer} and ${Ld.semVer}`);const{liveQuery:_Oe,mergeRanges:SOe,rangesOverlap:EOe,RangeSet:AOe,cmp:jOe,Entity:TOe,PropModification:POe,replacePrefix:COe,add:kOe,remove:NOe,DexieYProvider:OOe}=Ld,j$="GanaderoOS_DB",WG=6;class KG extends Ld{constructor(){super(j$);xr(this,"animals");xr(this,"fathers");xr(this,"parturitions");xr(this,"weighings");xr(this,"lots");xr(this,"origins");xr(this,"breedingSeasons");xr(this,"sireLots");xr(this,"serviceRecords");xr(this,"events");xr(this,"feedingPlans");xr(this,"bodyWeighings");xr(this,"products");xr(this,"healthPlans");xr(this,"healthPlanTasks");xr(this,"healthEvents");this.version(1).stores({animals:"&id, createdAt, status, isReference, location",fathers:"&id",parturitions:"++id, &goatId, sireId, status",weighings:"++id, goatId, date",lots:"++id, name",origins:"++id, name",breedingGroups:"++id, sireId, status",serviceRecords:"++id, breedingGroupId, femaleId",events:"++id, animalId, date, type",feedingPlans:"++id, lotName",bodyWeighings:"++id, animalId, date"}),this.version(2).stores({products:"++id, &name",healthPlans:"++id, &name",healthPlanTasks:"++id, healthPlanId, productId",healthEvents:"++id, animalId, date, type, taskId"}),this.version(3).stores({animals:"&id, createdAt, status, isReference, location, sireLotId",breedingGroups:null,breedingSeasons:"++id, &name, status",sireLots:"++id, seasonId, sireId",serviceRecords:"++id, sireLotId, femaleId"}),this.version(4).stores({breedingSeasons:"&id, &name, status",sireLots:"&id, seasonId, sireId"}),this.version(5).stores({healthPlanTasks:"++id, healthPlanId, productId"}),this.version(WG).stores({healthPlans:"++id, &name",healthPlanTasks:"++id, healthPlanId, productId"})}}let ep=null;const qG=async()=>{if(ep)return ep;const t=new KG;try{return await t.open(),console.log("Base de datos local abierta con xito."),ep=t,t}catch(e){return console.error("Error al abrir la base de datos local. Podra ser un problema de migracin.",e),confirm("GanaderoOS ha sido actualizado y necesita reiniciar la base de datos local. Tus datos en la nube estn a salvo. Deseas continuar? La aplicacin se recargar.")?(await Ld.delete(j$),window.location.reload()):alert("La aplicacin no puede continuar sin una base de datos funcional. Por favor, recarga la pgina e intenta de nuevo."),new Promise(()=>{})}},T$=()=>{if(!ep)throw new Error("La base de datos no ha sido inicializada. Llama a initDB() primero.");return ep},P$=O.createContext({animals:[],fathers:[],weighings:[],parturitions:[],lots:[],origins:[],breedingSeasons:[],sireLots:[],serviceRecords:[],events:[],feedingPlans:[],bodyWeighings:[],products:[],healthPlans:[],healthPlanTasks:[],healthEvents:[],isLoading:!0,syncStatus:"idle",addAnimal:async()=>{},updateAnimal:async()=>{},deleteAnimalPermanently:async()=>{},startDryingProcess:async()=>{},setLactationAsDry:async()=>{},addLot:async()=>{},deleteLot:async()=>{},addOrigin:async()=>{},deleteOrigin:async()=>{},addBreedingSeason:async()=>"",updateBreedingSeason:async()=>{},deleteBreedingSeason:async()=>{},addSireLot:async()=>"",updateSireLot:async()=>{},deleteSireLot:async()=>{},addServiceRecord:async()=>{},addFeedingPlan:async()=>{},addBatchEvent:async()=>{},addWeighing:async()=>{},addBodyWeighing:async()=>{},addParturition:async()=>{},fetchData:async()=>{},addFather:async()=>{},addProduct:async()=>{},updateProduct:async()=>{},deleteProduct:async()=>{},addHealthPlan:async()=>{},updateHealthPlan:async()=>{},deleteHealthPlan:async()=>{},addHealthPlanTask:async()=>{},updateHealthPlanTask:async()=>{},deleteHealthPlanTask:async()=>{},addHealthEvent:async()=>{}}),at=()=>O.useContext(P$),HG=({children:t})=>{const{currentUser:e}=E$(),[n,r]=O.useState([]),[i,a]=O.useState([]),[s,o]=O.useState([]),[l,u]=O.useState([]),[f,d]=O.useState([]),[h,p]=O.useState([]),[v,y]=O.useState([]),[b,x]=O.useState([]),[_,E]=O.useState([]),[P,A]=O.useState([]),[j,S]=O.useState([]),[T,N]=O.useState([]),[D,M]=O.useState([]),[$,z]=O.useState([]),[H,ee]=O.useState([]),[U,Z]=O.useState([]),[q,Y]=O.useState(!0),[le,ce]=O.useState(navigator.onLine?"idle":"offline"),ye=O.useRef(null),Ee=O.useCallback(async()=>{try{const xe=T$(),[We,Ue,be,Ne,Ke,rt,Je,cr,Ns,ai,fn,Dn,Os,ba,Ft,xn]=await Promise.all([xe.animals.toArray(),xe.fathers.toArray(),xe.weighings.toArray(),xe.parturitions.toArray(),xe.lots.toArray(),xe.origins.toArray(),xe.breedingSeasons.toArray(),xe.sireLots.toArray(),xe.serviceRecords.toArray(),xe.events.toArray(),xe.feedingPlans.toArray(),xe.bodyWeighings.toArray(),xe.products.toArray(),xe.healthPlans.toArray(),xe.healthPlanTasks.toArray(),xe.healthEvents.toArray()]);r(We),a(Ue),o(be),u(Ne),d(Ke),p(rt),y(Je),x(cr),E(Ns),A(ai),S(fn),N(Dn),M(Os),z(ba),ee(Ft),Z(xn)}catch(xe){console.error("Error al cargar datos locales:",xe)}finally{Y(!1)}},[]);O.useEffect(()=>{let xe=[];const We=()=>ce("idle"),Ue=()=>ce("offline");return window.addEventListener("online",We),window.addEventListener("offline",Ue),(async()=>{if(!e){Y(!1),r([]),a([]),o([]),u([]),d([]),p([]),y([]),x([]),E([]),A([]),S([]),N([]),M([]),z([]),ee([]),Z([]);return}Y(!0);try{const Ne=await qG();await Ee();const Ke=Je=>NG(er(gt,Je),OG("userId","==",e.uid)),rt=(Je,cr)=>{const Ns=$G(Ke(Je),async ai=>{ai.docChanges().length>0&&(console.log(`[Sync] Recibidos ${ai.docChanges().length} cambios para '${Je}'. Actualizando DB local.`),navigator.onLine&&(ce("syncing"),ye.current&&clearTimeout(ye.current),ye.current=setTimeout(()=>ce("idle"),2e3)));const fn=[];for(const Dn of ai.docChanges()){const Os={...Dn.doc.data(),id:Dn.doc.id};(Dn.type==="added"||Dn.type==="modified")&&fn.push(cr.put(Os)),Dn.type==="removed"&&fn.push(cr.delete(Dn.doc.id))}fn.length>0&&(await Promise.all(fn),Ee())},ai=>{ai.code!=="permission-denied"&&console.error(`Error sincronizando ${Je}:`,ai)});xe.push(Ns)};rt("animals",Ne.animals),rt("fathers",Ne.fathers),rt("parturitions",Ne.parturitions),rt("weighings",Ne.weighings),rt("lots",Ne.lots),rt("origins",Ne.origins),rt("breedingSeasons",Ne.breedingSeasons),rt("sireLots",Ne.sireLots),rt("serviceRecords",Ne.serviceRecords),rt("events",Ne.events),rt("feedingPlans",Ne.feedingPlans),rt("bodyWeighings",Ne.bodyWeighings),rt("products",Ne.products),rt("healthPlans",Ne.healthPlans),rt("healthPlanTasks",Ne.healthPlanTasks),rt("healthEvents",Ne.healthEvents)}catch(Ne){console.error("Fallo crtico en la inicializacin de DataProvider:",Ne)}})(),()=>{xe.forEach(Ne=>Ne()),window.removeEventListener("online",We),window.removeEventListener("offline",Ue),ye.current&&clearTimeout(ye.current)}},[e,Ee]);const He=async xe=>{if(!e)throw new Error("Usuario no autenticado");await di(er(gt,"events"),{...xe,userId:e.uid})},ct=async xe=>{if(!e)throw new Error("Usuario no autenticado");const We=hn(gt,"animals",xe.id.toUpperCase());await RG(We,{...xe,id:xe.id.toUpperCase(),userId:e.uid,createdAt:Date.now()})},ft=async(xe,We)=>{if(!e)throw new Error("Usuario no autenticado");const Ue=hn(gt,"animals",xe),be=await MG(Ue);if(!be.exists())throw new Error("El animal no existe.");const Ne=be.data(),Ke=new Date().toISOString().split("T")[0];if(We.location!==void 0&&We.location!==Ne.location&&await He({animalId:xe,date:Ke,type:"Movimiento",details:`Movido del lote '${Ne.location||"N/A"}' al lote '${We.location||"Sin Asignar"}'`}),We.status&&We.status!==Ne.status){let rt=`Estado cambiado de '${Ne.status}' a '${We.status}'`;We.status==="Venta"&&(rt=`Vendido por ${We.salePrice||"precio no especificado"}. Comprador: ${We.saleBuyer||"N/A"}. Fin: ${We.salePurpose||"N/A"}.`),We.status==="Muerte"&&(rt=`Muerte. Causa: ${We.deathReason||"No especificada"}.`),We.status==="Descarte"&&(rt=`Descarte. Causa: ${We.cullReason||"No especificada"}. ${We.cullReasonDetails||""}`),await He({animalId:xe,date:We.endDate||Ke,type:"Cambio de Estado",details:rt})}await Lo(Ue,We)},It=async xe=>{if(!e)throw new Error("Usuario no autenticado");await zo(hn(gt,"animals",xe))},Dt=async xe=>{if(!e)throw new Error("Usuario no autenticado");await Lo(hn(gt,"parturitions",xe),{status:"en-secado",dryingStartDate:new Date().toISOString().split("T")[0]})},fe=async xe=>{if(!e)throw new Error("Usuario no autenticado");await Lo(hn(gt,"parturitions",xe),{status:"seca"})},Qe=async xe=>{if(!e)throw new Error("Usuario no autenticado");await di(er(gt,"lots"),{name:xe,userId:e.uid})},Ye=async xe=>{if(!e)throw new Error("Usuario no autenticado");await zo(hn(gt,"lots",xe))},he=async xe=>{if(!e)throw new Error("Usuario no autenticado");await di(er(gt,"origins"),{name:xe,userId:e.uid})},Se=async xe=>{if(!e)throw new Error("Usuario no autenticado");await zo(hn(gt,"origins",xe))},Le=async xe=>{if(!e)throw new Error("Usuario no autenticado");await di(er(gt,"weighings"),{...xe,userId:e.uid})},_e=async xe=>{if(!e)throw new Error("Usuario no autenticado");await di(er(gt,"bodyWeighings"),{...xe,userId:e.uid})},Ze=async xe=>{if(!e)throw new Error("Usuario no autenticado");await di(er(gt,"fathers"),{...xe,userId:e.uid})},qt=async xe=>{if(!e)throw new Error("Usuario no autenticado");const We=Tv(gt),Ue=xe.motherId.toUpperCase(),be=hn(gt,"animals",Ue);We.set(be,{id:Ue,sex:"Hembra",status:"Activo",birthDate:"N/A",userId:e.uid},{merge:!0});const Ne=hn(er(gt,"parturitions"));We.set(Ne,{goatId:Ue,parturitionDate:xe.parturitionDate,sireId:xe.sireId,offspringCount:xe.offspring.length,parturitionType:xe.parturitionType,status:"activa",userId:e.uid}),xe.offspring.forEach(Ke=>{const rt=Ke.id.toUpperCase(),Je=hn(gt,"animals",rt),cr={id:rt,sex:Ke.sex,status:Ke.sex==="Macho"?"Descartado":"Activo",birthDate:xe.parturitionDate,motherId:Ue,fatherId:xe.sireId,birthWeight:parseFloat(Ke.birthWeight),userId:e.uid,createdAt:Date.now()};We.set(Je,cr,{merge:!0})}),await We.commit()},Ht=async xe=>{if(!e)throw new Error("Usuario no autenticado");await di(er(gt,"serviceRecords"),{...xe,userId:e.uid})},kt=async xe=>{if(!e)throw new Error("Usuario no autenticado");const We=n.filter(Ne=>Ne.location===xe.lotName);if(We.length===0){console.warn(`No se encontraron animales en el lote "${xe.lotName}" para registrar el evento.`);return}const Ue=Tv(gt),be=er(gt,"events");We.forEach(Ne=>{const Ke=hn(be),rt={animalId:Ne.id,date:xe.date,type:xe.type,details:xe.details,lotName:xe.lotName,notes:`Evento aplicado a todo el lote: ${xe.lotName}`};Ue.set(Ke,{...rt,userId:e.uid})}),await Ue.commit()},Mt=async xe=>{if(!e)throw new Error("Usuario no autenticado");await di(er(gt,"feedingPlans"),{...xe,userId:e.uid})},Rt=async xe=>{if(!e)throw new Error("Usuario no autenticado");await di(er(gt,"products"),{...xe,userId:e.uid})},In=async(xe,We)=>{if(!e)throw new Error("Usuario no autenticado");await Lo(hn(gt,"products",xe),We)},Vn=async xe=>{if(!e)throw new Error("Usuario no autenticado");await zo(hn(gt,"products",xe))},Wr=async xe=>{if(!e)throw new Error("Usuario no autenticado");await di(er(gt,"healthPlans"),{...xe,userId:e.uid})},Fn=async(xe,We)=>{if(!e)throw new Error("Usuario no autenticado");await Lo(hn(gt,"healthPlans",xe),We)},Cr=async xe=>{if(!e)throw new Error("Usuario no autenticado");await zo(hn(gt,"healthPlans",xe))},Tt=async xe=>{if(!e)throw new Error("Usuario no autenticado");await di(er(gt,"healthPlanTasks"),{...xe,userId:e.uid})},vn=async(xe,We)=>{if(!e)throw new Error("Usuario no autenticado");await Lo(hn(gt,"healthPlanTasks",xe),We)},Kr=async xe=>{if(!e)throw new Error("Usuario no autenticado");await zo(hn(gt,"healthPlanTasks",xe))},va=async xe=>{if(!e)throw new Error("Usuario no autenticado");await di(er(gt,"healthEvents"),{...xe,userId:e.uid})},Ti=async xe=>{if(!e)throw new Error("Usuario no autenticado");return(await di(er(gt,"breedingSeasons"),{...xe,userId:e.uid})).id},ri=async(xe,We)=>{if(!e)throw new Error("Usuario no autenticado");await Lo(hn(gt,"breedingSeasons",xe),We)},ii=async xe=>{if(!e)throw new Error("Usuario no autenticado");await zo(hn(gt,"breedingSeasons",xe))},xa=async xe=>{if(!e)throw new Error("Usuario no autenticado");return(await di(er(gt,"sireLots"),{...xe,userId:e.uid})).id},kr=async(xe,We)=>{if(!e)throw new Error("Usuario no autenticado");await Lo(hn(gt,"sireLots",xe),We)},ze=async xe=>{if(!e)throw new Error("Usuario no autenticado");await zo(hn(gt,"sireLots",xe))};return c.jsx(P$.Provider,{value:{animals:n,fathers:i,weighings:s,parturitions:l,lots:f,origins:h,breedingSeasons:v,sireLots:b,serviceRecords:_,events:P,feedingPlans:j,bodyWeighings:T,products:D,healthPlans:$,healthPlanTasks:H,healthEvents:U,isLoading:q,syncStatus:le,addAnimal:ct,updateAnimal:ft,deleteAnimalPermanently:It,startDryingProcess:Dt,setLactationAsDry:fe,addLot:Qe,deleteLot:Ye,addOrigin:he,deleteOrigin:Se,addBreedingSeason:Ti,updateBreedingSeason:ri,deleteBreedingSeason:ii,addSireLot:xa,updateSireLot:kr,deleteSireLot:ze,addServiceRecord:Ht,addFeedingPlan:Mt,addBatchEvent:kt,addWeighing:Le,addBodyWeighing:_e,addParturition:qt,fetchData:Ee,addFather:Ze,addProduct:Rt,updateProduct:In,deleteProduct:Vn,addHealthPlan:Wr,updateHealthPlan:Fn,deleteHealthPlan:Cr,addHealthPlanTask:Tt,updateHealthPlanTask:vn,deleteHealthPlanTask:Kr,addHealthEvent:va},children:t})};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GG=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),C$=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var YG={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XG=O.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...o},l)=>O.createElement("svg",{ref:l,...YG,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:C$("lucide",i),...o},[...s.map(([u,f])=>O.createElement(u,f)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=(t,e)=>{const n=O.forwardRef(({className:r,...i},a)=>O.createElement(XG,{ref:a,iconNode:e,className:C$(`lucide-${GG(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=Ie("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=Ie("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=Ie("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=Ie("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QG=Ie("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k$=Ie("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZG=Ie("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=Ie("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=Ie("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JG=Ie("CalendarCheck2",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 14V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"bce9hv"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m16 20 2 2 4-4",key:"13tcca"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I_=Ie("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N$=Ie("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O$=Ie("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=Ie("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eY=Ie("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=Ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tY=Ie("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=Ie("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=Ie("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nY=Ie("CircleOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.35 2.69A10 10 0 0 1 21.3 15.65",key:"1pfsoa"}],["path",{d:"M19.08 19.08A10 10 0 1 1 4.92 4.92",key:"1ablyi"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=Ie("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=Ie("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=Ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rY=Ie("CloudCog",[["circle",{cx:"12",cy:"17",r:"3",key:"1spfwm"}],["path",{d:"M4.2 15.1A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.2",key:"zaobp"}],["path",{d:"m15.7 18.4-.9-.3",key:"4qxpbn"}],["path",{d:"m9.2 15.9-.9-.3",key:"17q7o2"}],["path",{d:"m10.6 20.7.3-.9",key:"1pf4s2"}],["path",{d:"m13.1 14.2.3-.9",key:"1mnuqm"}],["path",{d:"m13.6 20.7-.4-1",key:"1jpd1m"}],["path",{d:"m10.8 14.3-.4-1",key:"17ugyy"}],["path",{d:"m8.3 18.6 1-.4",key:"s42vdx"}],["path",{d:"m14.7 15.8 1-.4",key:"2wizun"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iY=Ie("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aY=Ie("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=Ie("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qm=Ie("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=Ie("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I$=Ie("Feather",[["path",{d:"M12.67 19a2 2 0 0 0 1.416-.588l6.154-6.172a6 6 0 0 0-8.49-8.49L5.586 9.914A2 2 0 0 0 5 11.328V18a1 1 0 0 0 1 1z",key:"18jl4k"}],["path",{d:"M16 8 2 22",key:"vp34q"}],["path",{d:"M17.5 15H9",key:"1oz8nu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sY=Ie("FileArchive",[["path",{d:"M16 22h2a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v18",key:"1oywqq"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oY=Ie("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D$=Ie("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=Ie("FilterX",[["path",{d:"M13.013 3H2l8 9.46V19l4 2v-8.54l.9-1.055",key:"1fi1da"}],["path",{d:"m22 3-5 5",key:"12jva0"}],["path",{d:"m17 3 5 5",key:"k36vhe"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=Ie("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lY=Ie("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cY=Ie("HeartCrack",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"m12 13-1-1 2-2-3-3 2-2",key:"xjdxli"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uY=Ie("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"12sd6o"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=Ie("HeartPulse",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=Ie("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M$=Ie("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=Ie("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dY=Ie("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R$=Ie("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $$=Ie("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fY=Ie("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L$=Ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hY=Ie("Milk",[["path",{d:"M8 2h8",key:"1ssgc1"}],["path",{d:"M9 2v2.789a4 4 0 0 1-.672 2.219l-.656.984A4 4 0 0 0 7 10.212V20a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-9.789a4 4 0 0 0-.672-2.219l-.656-.984A4 4 0 0 1 15 4.788V2",key:"qtp12x"}],["path",{d:"M7 15a6.472 6.472 0 0 1 5 0 6.47 6.47 0 0 0 5 0",key:"ygeh44"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z$=Ie("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V$=Ie("MoveRight",[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F$=Ie("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pY=Ie("PackageOpen",[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mY=Ie("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=Ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gY=Ie("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yY=Ie("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vY=Ie("Replace",[["path",{d:"M14 4c0-1.1.9-2 2-2",key:"1mvvbw"}],["path",{d:"M20 2c1.1 0 2 .9 2 2",key:"1mj6oe"}],["path",{d:"M22 8c0 1.1-.9 2-2 2",key:"v1wql3"}],["path",{d:"M16 10c-1.1 0-2-.9-2-2",key:"821ux0"}],["path",{d:"m3 7 3 3 3-3",key:"x25e72"}],["path",{d:"M6 10V5c0-1.7 1.3-3 3-3h1",key:"13af7h"}],["rect",{width:"8",height:"8",x:"2",y:"14",rx:"2",key:"17ihk4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=Ie("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=Ie("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B$=Ie("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=Ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xY=Ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U$=Ie("Sigma",[["path",{d:"M18 7V4H6l6 8-6 8h12v-3",key:"zis8ev"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=Ie("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bY=Ie("SquareActivity",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M17 12h-2l-2 5-2-10-2 5H7",key:"15hlnc"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=Ie("SquareCheckBig",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=Ie("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=Ie("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wY=Ie("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=Ie("Syringe",[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Y=Ie("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SY=Ie("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W$=Ie("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=Ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EY=Ie("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=Ie("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=Ie("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AY=Ie("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=Ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jY=Ie("Waypoints",[["circle",{cx:"12",cy:"4.5",r:"2.5",key:"r5ysbb"}],["path",{d:"m10.2 6.3-3.9 3.9",key:"1nzqf6"}],["circle",{cx:"4.5",cy:"12",r:"2.5",key:"jydg6v"}],["path",{d:"M7 12h10",key:"b7w52i"}],["circle",{cx:"19.5",cy:"12",r:"2.5",key:"1piiel"}],["path",{d:"m13.8 17.7 3.9-3.9",key:"1wyg1y"}],["circle",{cx:"12",cy:"19.5",r:"2.5",key:"13o1pw"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=Ie("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nl=Ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=Ie("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),TY=()=>{const[t,e]=O.useState(!0),[n,r]=O.useState(""),[i,a]=O.useState(""),[s,o]=O.useState(null),[l,u]=O.useState(!1),f=async()=>{if(window.confirm("Ests seguro de que quieres forzar la eliminacin de la base de datos local? Esto no afectar tus datos en la nube."))try{await Ld.delete("LactoKeeperDB_v6"),alert("Base de datos local eliminada con xito. La pgina se recargar."),window.location.reload()}catch(p){alert("Error al eliminar la base de datos."),console.error(p)}},d=p=>{if(p.code==="auth/network-request-failed")return"No hay conexin a internet. Se requiere conexin para iniciar sesin.";switch(p.code){case"auth/invalid-email":return"El formato del correo electrnico no es vlido.";case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":return"Correo electrnico o contrasea incorrectos.";case"auth/email-already-in-use":return"Este correo electrnico ya est registrado.";case"auth/weak-password":return"La contrasea debe tener al menos 6 caracteres.";default:return console.error("Firebase Auth Error:",p),"Ocurri un error inesperado. Por favor, intenta de nuevo."}},h=async p=>{p.preventDefault(),o(null),u(!0);try{t?await mK($d,n,i):await pK($d,n,i)}catch(v){o(d(v))}finally{u(!1)}};return c.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 font-sans",children:c.jsxs("div",{className:"w-full max-w-sm",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[c.jsx(qm,{className:"w-10 h-10 text-brand-orange"}),c.jsx("h1",{className:"text-4xl font-bold text-white",children:"LactoKeeper"})]}),c.jsx("p",{className:"text-zinc-400",children:"Tu gestin de rebao, en la nube."})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-6 border border-brand-border",children:[c.jsxs("div",{className:"flex bg-zinc-900/80 rounded-xl p-1 w-full mb-6",children:[c.jsx("button",{onClick:()=>e(!0),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t?"bg-zinc-700 text-white":"text-zinc-400 hover:bg-zinc-800/50"}`,children:"Iniciar Sesin"}),c.jsx("button",{onClick:()=>e(!1),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t?"text-zinc-400 hover:bg-zinc-800/50":"bg-zinc-700 text-white"}`,children:"Registrarse"})]}),c.jsxs("form",{onSubmit:h,className:"space-y-4",children:[c.jsx("input",{type:"email",value:n,onChange:p=>r(p.target.value),placeholder:"Correo electrnico",required:!0,className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl border border-transparent focus:border-brand-orange focus:ring-0 focus:outline-none placeholder-zinc-400"}),c.jsx("input",{type:"password",value:i,onChange:p=>a(p.target.value),placeholder:"Contrasea",required:!0,className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl border border-transparent focus:border-brand-orange focus:ring-0 focus:outline-none placeholder-zinc-400"}),s&&c.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[c.jsx(yn,{size:18}),c.jsx("span",{children:s})]}),c.jsx("button",{type:"submit",disabled:l,className:"w-full bg-brand-orange text-white font-bold py-3 rounded-xl transition-colors hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Procesando...":t?"Iniciar Sesin":"Crear Cuenta"})]})]}),c.jsxs("div",{className:"mt-6 text-center",children:[c.jsxs("button",{onClick:f,className:"flex items-center justify-center gap-2 mx-auto bg-brand-red/20 text-brand-red font-semibold py-2 px-4 rounded-lg border border-brand-red/50 hover:bg-brand-red/30 transition-colors",children:[c.jsx(wo,{size:16}),"Forzar Reinicio de DB Local"]}),c.jsx("p",{className:"text-xs text-zinc-600 mt-2",children:"Si la app no carga, usa este botn."})]})]})})},yt=({isOpen:t,onClose:e,title:n,children:r,size:i="default"})=>{if(!t)return null;const a=i==="fullscreen"?"items-end":"items-center",s={default:"max-w-md m-4 rounded-2xl",large:"max-w-xl m-4 rounded-2xl",fullscreen:"w-full h-[95vh] rounded-t-2xl flex flex-col"};return c.jsx("div",{className:`fixed inset-0 bg-black/60 backdrop-blur-md flex justify-center z-50 animate-fade-in ${a}`,onClick:e,children:c.jsxs("div",{className:`bg-ios-modal-bg border border-zinc-700/80 shadow-2xl text-white transform transition-all animate-slide-up ${s[i]}`,onClick:o=>o.stopPropagation(),children:[c.jsxs("header",{className:"flex-shrink-0 flex justify-between items-center p-4 border-b border-zinc-800/80",children:[c.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:n}),c.jsx("button",{onClick:e,className:"p-1 rounded-full text-zinc-500 hover:text-white hover:bg-zinc-700/50 transition-colors",children:c.jsx(Nl,{size:20})})]}),c.jsx("div",{className:i==="fullscreen"?"flex-1 overflow-y-auto p-4":"p-6",children:r})]})})},K$=({isOpen:t,onClose:e})=>{const{addLot:n}=at(),[r,i]=O.useState(""),[a,s]=O.useState(""),o=async()=>{if(r.trim()===""){s("El nombre del lote no puede estar vaco.");return}try{await n(r),i(""),s(""),e()}catch(u){s("No se pudo guardar el lote."),console.error(u)}},l=()=>{i(""),s(""),e()};return c.jsx(yt,{isOpen:t,onClose:l,title:"Crear Nuevo Lote",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-sm text-zinc-400",children:"Introduce el nombre de la nueva ubicacin o lote en tu finca."}),c.jsx("div",{children:c.jsx("input",{type:"text",value:r,onChange:u=>i(u.target.value),placeholder:"Ej: Cabritonas Servicio",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0"})}),a&&c.jsx("p",{className:"text-sm text-brand-red",children:a}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[c.jsx("button",{onClick:l,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{onClick:o,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:"Guardar Lote"})]})]})})},q$=O.createContext({});function au(t){const e=O.useRef(null);return e.current===null&&(e.current=t()),e.current}const SA=O.createContext(null),EA=O.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function PY(t=!0){const e=O.useContext(SA);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=O.useId();O.useEffect(()=>{t&&i(a)},[t]);const s=O.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,s]:[!0]}const AA=typeof window<"u",jA=AA?O.useLayoutEffect:O.useEffect,Fi=t=>t;let H$=Fi;function TA(t){let e;return()=>(e===void 0&&(e=t()),e)}const Vd=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Zs=t=>t*1e3,Js=t=>t/1e3,CY={useManualTiming:!1};function kY(t){let e=new Set,n=new Set,r=!1,i=!1;const a=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1};function o(u){a.has(u)&&(l.schedule(u),t()),u(s)}const l={schedule:(u,f=!1,d=!1)=>{const p=d&&r?e:n;return f&&a.add(u),p.has(u)||p.add(u),u},cancel:u=>{n.delete(u),a.delete(u)},process:u=>{if(s=u,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(o),e.clear(),r=!1,i&&(i=!1,l.process(u))}};return l}const Xg=["read","resolveKeyframes","update","preRender","render","postRender"],NY=40;function G$(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,s=Xg.reduce((x,_)=>(x[_]=kY(a),x),{}),{read:o,resolveKeyframes:l,update:u,preRender:f,render:d,postRender:h}=s,p=()=>{const x=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(x-i.timestamp,NY),1),i.timestamp=x,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),f.process(i),d.process(i),h.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(p))},v=()=>{n=!0,r=!0,i.isProcessing||t(p)};return{schedule:Xg.reduce((x,_)=>{const E=s[_];return x[_]=(P,A=!1,j=!1)=>(n||v(),E.schedule(P,A,j)),x},{}),cancel:x=>{for(let _=0;_<Xg.length;_++)s[Xg[_]].cancel(x)},state:i,steps:s}}const{schedule:sn,cancel:po,state:_r,steps:xw}=G$(typeof requestAnimationFrame<"u"?requestAnimationFrame:Fi,!0),Y$=O.createContext({strict:!1}),sk={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Fd={};for(const t in sk)Fd[t]={isEnabled:e=>sk[t].some(n=>!!e[n])};function OY(t){for(const e in t)Fd[e]={...Fd[e],...t[e]}}const IY=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Cv(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||IY.has(t)}let X$=t=>!Cv(t);function DY(t){t&&(X$=e=>e.startsWith("on")?!Cv(e):t(e))}try{DY(require("@emotion/is-prop-valid").default)}catch{}function MY(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(X$(i)||n===!0&&Cv(i)||!e&&!Cv(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function RY(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const jx=O.createContext({});function Fp(t){return typeof t=="string"||Array.isArray(t)}function Tx(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const PA=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],CA=["initial",...PA];function Px(t){return Tx(t.animate)||CA.some(e=>Fp(t[e]))}function Q$(t){return!!(Px(t)||t.variants)}function $Y(t,e){if(Px(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Fp(n)?n:void 0,animate:Fp(r)?r:void 0}}return t.inherit!==!1?e:{}}function LY(t){const{initial:e,animate:n}=$Y(t,O.useContext(jx));return O.useMemo(()=>({initial:e,animate:n}),[ok(e),ok(n)])}function ok(t){return Array.isArray(t)?t.join(" "):t}const zY=Symbol.for("motionComponentSymbol");function Ju(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function VY(t,e,n){return O.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ju(n)&&(n.current=r))},[e])}const kA=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),FY="framerAppearId",Z$="data-"+kA(FY),{schedule:NA}=G$(queueMicrotask,!1),J$=O.createContext({});function BY(t,e,n,r,i){var a,s;const{visualElement:o}=O.useContext(jx),l=O.useContext(Y$),u=O.useContext(SA),f=O.useContext(EA).reducedMotion,d=O.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:o,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:f}));const h=d.current,p=O.useContext(J$);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&UY(d.current,n,i,p);const v=O.useRef(!1);O.useInsertionEffect(()=>{h&&v.current&&h.update(n,u)});const y=n[Z$],b=O.useRef(!!y&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,y))&&((s=window.MotionHasOptimisedAnimation)===null||s===void 0?void 0:s.call(window,y)));return jA(()=>{h&&(v.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),NA.render(h.render),b.current&&h.animationState&&h.animationState.animateChanges())}),O.useEffect(()=>{h&&(!b.current&&h.animationState&&h.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)===null||x===void 0||x.call(window,y)}),b.current=!1))}),h}function UY(t,e,n,r){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:l,layoutRoot:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:eL(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&Ju(o),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function eL(t){if(t)return t.options.allowProjection!==!1?t.projection:eL(t.parent)}function WY({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var a,s;t&&OY(t);function o(u,f){let d;const h={...O.useContext(EA),...u,layoutId:KY(u)},{isStatic:p}=h,v=LY(u),y=r(u,p);if(!p&&AA){qY();const b=HY(h);d=b.MeasureLayout,v.visualElement=BY(i,y,h,e,b.ProjectionNode)}return c.jsxs(jx.Provider,{value:v,children:[d&&v.visualElement?c.jsx(d,{visualElement:v.visualElement,...h}):null,n(i,u,VY(y,v.visualElement,f),y,p,v.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${(s=(a=i.displayName)!==null&&a!==void 0?a:i.name)!==null&&s!==void 0?s:""})`}`;const l=O.forwardRef(o);return l[zY]=i,l}function KY({layoutId:t}){const e=O.useContext(q$).id;return e&&t!==void 0?e+"-"+t:t}function qY(t,e){O.useContext(Y$).strict}function HY(t){const{drag:e,layout:n}=Fd;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const GY=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function OA(t){return typeof t!="string"||t.includes("-")?!1:!!(GY.indexOf(t)>-1||/[A-Z]/u.test(t))}function lk(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function IA(t,e,n,r){if(typeof e=="function"){const[i,a]=lk(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=lk(r);e=e(n!==void 0?n:t.custom,i,a)}return e}const R_=t=>Array.isArray(t),YY=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),XY=t=>R_(t)?t[t.length-1]||0:t,Ar=t=>!!(t&&t.getVelocity);function Dy(t){const e=Ar(t)?t.get():t;return YY(e)?e.toValue():e}function QY({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,a){const s={latestValues:ZY(r,i,a,t),renderState:e()};return n&&(s.onMount=o=>n({props:r,current:o,...s}),s.onUpdate=o=>n(o)),s}const tL=t=>(e,n)=>{const r=O.useContext(jx),i=O.useContext(SA),a=()=>QY(t,e,r,i);return n?a():au(a)};function ZY(t,e,n,r){const i={},a=r(t,{});for(const h in a)i[h]=Dy(a[h]);let{initial:s,animate:o}=t;const l=Px(t),u=Q$(t);e&&u&&!l&&t.inherit!==!1&&(s===void 0&&(s=e.initial),o===void 0&&(o=e.animate));let f=n?n.initial===!1:!1;f=f||s===!1;const d=f?o:s;if(d&&typeof d!="boolean"&&!Tx(d)){const h=Array.isArray(d)?d:[d];for(let p=0;p<h.length;p++){const v=IA(t,h[p]);if(v){const{transitionEnd:y,transition:b,...x}=v;for(const _ in x){let E=x[_];if(Array.isArray(E)){const P=f?E.length-1:0;E=E[P]}E!==null&&(i[_]=E)}for(const _ in y)i[_]=y[_]}}}return i}const Cf=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],su=new Set(Cf),nL=t=>e=>typeof e=="string"&&e.startsWith(t),rL=nL("--"),JY=nL("var(--"),DA=t=>JY(t)?eX.test(t.split("/*")[0].trim()):!1,eX=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,iL=(t,e)=>e&&typeof t=="number"?e.transform(t):t,mo=(t,e,n)=>n>e?e:n<t?t:n,kf={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Bp={...kf,transform:t=>mo(0,1,t)},Qg={...kf,default:1},Ym=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Fo=Ym("deg"),_s=Ym("%"),tt=Ym("px"),tX=Ym("vh"),nX=Ym("vw"),ck={..._s,parse:t=>_s.parse(t)/100,transform:t=>_s.transform(t*100)},rX={borderWidth:tt,borderTopWidth:tt,borderRightWidth:tt,borderBottomWidth:tt,borderLeftWidth:tt,borderRadius:tt,radius:tt,borderTopLeftRadius:tt,borderTopRightRadius:tt,borderBottomRightRadius:tt,borderBottomLeftRadius:tt,width:tt,maxWidth:tt,height:tt,maxHeight:tt,top:tt,right:tt,bottom:tt,left:tt,padding:tt,paddingTop:tt,paddingRight:tt,paddingBottom:tt,paddingLeft:tt,margin:tt,marginTop:tt,marginRight:tt,marginBottom:tt,marginLeft:tt,backgroundPositionX:tt,backgroundPositionY:tt},iX={rotate:Fo,rotateX:Fo,rotateY:Fo,rotateZ:Fo,scale:Qg,scaleX:Qg,scaleY:Qg,scaleZ:Qg,skew:Fo,skewX:Fo,skewY:Fo,distance:tt,translateX:tt,translateY:tt,translateZ:tt,x:tt,y:tt,z:tt,perspective:tt,transformPerspective:tt,opacity:Bp,originX:ck,originY:ck,originZ:tt},uk={...kf,transform:Math.round},MA={...rX,...iX,zIndex:uk,size:tt,fillOpacity:Bp,strokeOpacity:Bp,numOctaves:uk},aX={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},sX=Cf.length;function oX(t,e,n){let r="",i=!0;for(let a=0;a<sX;a++){const s=Cf[a],o=t[s];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(s.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const u=iL(o,MA[s]);if(!l){i=!1;const f=aX[s]||s;r+=`${f}(${u}) `}n&&(e[s]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function RA(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let s=!1,o=!1;for(const l in e){const u=e[l];if(su.has(l)){s=!0;continue}else if(rL(l)){i[l]=u;continue}else{const f=iL(u,MA[l]);l.startsWith("origin")?(o=!0,a[l]=f):r[l]=f}}if(e.transform||(s||n?r.transform=oX(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:f=0}=a;r.transformOrigin=`${l} ${u} ${f}`}}const lX={offset:"stroke-dashoffset",array:"stroke-dasharray"},cX={offset:"strokeDashoffset",array:"strokeDasharray"};function uX(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?lX:cX;t[a.offset]=tt.transform(-r);const s=tt.transform(e),o=tt.transform(n);t[a.array]=`${s} ${o}`}function dk(t,e,n){return typeof t=="string"?t:tt.transform(e+n*t)}function dX(t,e,n){const r=dk(e,t.x,t.width),i=dk(n,t.y,t.height);return`${r} ${i}`}function $A(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:a,pathLength:s,pathSpacing:o=1,pathOffset:l=0,...u},f,d){if(RA(t,u,d),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:p,dimensions:v}=t;h.transform&&(v&&(p.transform=h.transform),delete h.transform),v&&(i!==void 0||a!==void 0||p.transform)&&(p.transformOrigin=dX(v,i!==void 0?i:.5,a!==void 0?a:.5)),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),s!==void 0&&uX(h,s,o,l,!1)}const LA=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),aL=()=>({...LA(),attrs:{}}),zA=t=>typeof t=="string"&&t.toLowerCase()==="svg";function sL(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const a in n)t.style.setProperty(a,n[a])}const oL=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function lL(t,e,n,r){sL(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(oL.has(i)?i:kA(i),e.attrs[i])}const kv={};function fX(t){Object.assign(kv,t)}function cL(t,{layout:e,layoutId:n}){return su.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!kv[t]||t==="opacity")}function VA(t,e,n){var r;const{style:i}=t,a={};for(const s in i)(Ar(i[s])||e.style&&Ar(e.style[s])||cL(s,t)||((r=n==null?void 0:n.getValue(s))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[s]=i[s]);return a}function uL(t,e,n){const r=VA(t,e,n);for(const i in t)if(Ar(t[i])||Ar(e[i])){const a=Cf.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}function hX(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const fk=["x","y","width","height","cx","cy","r"],pX={useVisualState:tL({scrapeMotionValuesFromProps:uL,createRenderState:aL,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let a=!!t.drag;if(!a){for(const o in i)if(su.has(o)){a=!0;break}}if(!a)return;let s=!e;if(e)for(let o=0;o<fk.length;o++){const l=fk[o];t[l]!==e[l]&&(s=!0)}s&&sn.read(()=>{hX(n,r),sn.render(()=>{$A(r,i,zA(n.tagName),t.transformTemplate),lL(n,r)})})}})},mX={useVisualState:tL({scrapeMotionValuesFromProps:VA,createRenderState:LA})};function dL(t,e,n){for(const r in e)!Ar(e[r])&&!cL(r,n)&&(t[r]=e[r])}function gX({transformTemplate:t},e){return O.useMemo(()=>{const n=LA();return RA(n,e,t),Object.assign({},n.vars,n.style)},[e])}function yX(t,e){const n=t.style||{},r={};return dL(r,n,t),Object.assign(r,gX(t,e)),r}function vX(t,e){const n={},r=yX(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function xX(t,e,n,r){const i=O.useMemo(()=>{const a=aL();return $A(a,e,zA(r),t.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};dL(a,t.style,t),i.style={...a,...i.style}}return i}function bX(t=!1){return(n,r,i,{latestValues:a},s)=>{const l=(OA(n)?xX:vX)(r,a,s,n),u=MY(r,typeof n=="string",t),f=n!==O.Fragment?{...u,...l,ref:i}:{},{children:d}=r,h=O.useMemo(()=>Ar(d)?d.get():d,[d]);return O.createElement(n,{...f,children:h})}}function wX(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const s={...OA(r)?pX:mX,preloadedFeatures:t,useRender:bX(i),createVisualElement:e,Component:r};return WY(s)}}function fL(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Cx(t,e,n){const r=t.getProps();return IA(r,e,n!==void 0?n:r.custom,t)}const _X=TA(()=>window.ScrollTimeline!==void 0);class SX{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(_X()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class EX extends SX{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function FA(t,e){return t?t[e]||t.default||t:void 0}const $_=2e4;function hL(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<$_;)e+=n,r=t.next(e);return e>=$_?1/0:e}function BA(t){return typeof t=="function"}function hk(t,e){t.timeline=e,t.onfinish=null}const UA=t=>Array.isArray(t)&&typeof t[0]=="number",AX={linearEasing:void 0};function jX(t,e){const n=TA(t);return()=>{var r;return(r=AX[e])!==null&&r!==void 0?r:n()}}const Nv=jX(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),pL=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=t(Vd(0,i-1,a))+", ";return`linear(${r.substring(0,r.length-2)})`};function mL(t){return!!(typeof t=="function"&&Nv()||!t||typeof t=="string"&&(t in L_||Nv())||UA(t)||Array.isArray(t)&&t.every(mL))}const Mh=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,L_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Mh([0,.65,.55,1]),circOut:Mh([.55,0,1,.45]),backIn:Mh([.31,.01,.66,-.59]),backOut:Mh([.33,1.53,.69,.99])};function gL(t,e){if(t)return typeof t=="function"&&Nv()?pL(t,e):UA(t)?Mh(t):Array.isArray(t)?t.map(n=>gL(n,e)||L_.easeOut):L_[t]}const Ia={x:!1,y:!1};function yL(){return Ia.x||Ia.y}function TX(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const a=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}function vL(t,e){const n=TX(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function pk(t){return e=>{e.pointerType==="touch"||yL()||t(e)}}function PX(t,e,n={}){const[r,i,a]=vL(t,n),s=pk(o=>{const{target:l}=o,u=e(o);if(typeof u!="function"||!l)return;const f=pk(d=>{u(d),l.removeEventListener("pointerleave",f)});l.addEventListener("pointerleave",f,i)});return r.forEach(o=>{o.addEventListener("pointerenter",s,i)}),a}const xL=(t,e)=>e?t===e?!0:xL(t,e.parentElement):!1,WA=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,CX=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function kX(t){return CX.has(t.tagName)||t.tabIndex!==-1}const Rh=new WeakSet;function mk(t){return e=>{e.key==="Enter"&&t(e)}}function bw(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const NX=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=mk(()=>{if(Rh.has(n))return;bw(n,"down");const i=mk(()=>{bw(n,"up")}),a=()=>bw(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function gk(t){return WA(t)&&!yL()}function OX(t,e,n={}){const[r,i,a]=vL(t,n),s=o=>{const l=o.currentTarget;if(!gk(o)||Rh.has(l))return;Rh.add(l);const u=e(o),f=(p,v)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",h),!(!gk(p)||!Rh.has(l))&&(Rh.delete(l),typeof u=="function"&&u(p,{success:v}))},d=p=>{f(p,n.useGlobalTarget||xL(l,p.target))},h=p=>{f(p,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",h,i)};return r.forEach(o=>{!kX(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(n.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),o.addEventListener("focus",u=>NX(u,i),i)}),a}function IX(t){return t==="x"||t==="y"?Ia[t]?null:(Ia[t]=!0,()=>{Ia[t]=!1}):Ia.x||Ia.y?null:(Ia.x=Ia.y=!0,()=>{Ia.x=Ia.y=!1})}const bL=new Set(["width","height","top","left","right","bottom",...Cf]);let My;function DX(){My=void 0}const Ss={now:()=>(My===void 0&&Ss.set(_r.isProcessing||CY.useManualTiming?_r.timestamp:performance.now()),My),set:t=>{My=t,queueMicrotask(DX)}};function KA(t,e){t.indexOf(e)===-1&&t.push(e)}function qA(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function MX([...t],e,n){const r=e<0?t.length+e:e;if(r>=0&&r<t.length){const i=n<0?t.length+n:n,[a]=t.splice(e,1);t.splice(i,0,a)}return t}class HA{constructor(){this.subscriptions=[]}add(e){return KA(this.subscriptions,e),()=>qA(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function wL(t,e){return e?t*(1e3/e):0}const yk=30,RX=t=>!isNaN(parseFloat(t)),tp={current:void 0};class $X{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const a=Ss.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Ss.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=RX(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new HA);const r=this.events[e].add(n);return e==="change"?()=>{r(),sn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return tp.current&&tp.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Ss.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>yk)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,yk);return wL(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Bd(t,e){return new $X(t,e)}function LX(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Bd(n))}function GA(t,e){const n=Cx(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const s in a){const o=XY(a[s]);LX(t,s,o)}}function zX(t){return!!(Ar(t)&&t.add)}function z_(t,e){const n=t.getValue("willChange");if(zX(n))return n.add(e)}function _L(t){return t.props[Z$]}const SL=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,VX=1e-7,FX=12;function BX(t,e,n,r,i){let a,s,o=0;do s=e+(n-e)/2,a=SL(s,r,i)-t,a>0?n=s:e=s;while(Math.abs(a)>VX&&++o<FX);return s}function Xm(t,e,n,r){if(t===e&&n===r)return Fi;const i=a=>BX(a,0,1,t,n);return a=>a===0||a===1?a:SL(i(a),e,r)}const EL=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,AL=t=>e=>1-t(1-e),jL=Xm(.33,1.53,.69,.99),YA=AL(jL),TL=EL(YA),PL=t=>(t*=2)<1?.5*YA(t):.5*(2-Math.pow(2,-10*(t-1))),XA=t=>1-Math.sin(Math.acos(t)),CL=AL(XA),kL=EL(XA),NL=t=>/^0[^.\s]+$/u.test(t);function UX(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||NL(t):!0}const np=t=>Math.round(t*1e5)/1e5,QA=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function WX(t){return t==null}const KX=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ZA=(t,e)=>n=>!!(typeof n=="string"&&KX.test(n)&&n.startsWith(t)||e&&!WX(n)&&Object.prototype.hasOwnProperty.call(n,e)),OL=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,s,o]=r.match(QA);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},qX=t=>mo(0,255,t),ww={...kf,transform:t=>Math.round(qX(t))},bc={test:ZA("rgb","red"),parse:OL("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+ww.transform(t)+", "+ww.transform(e)+", "+ww.transform(n)+", "+np(Bp.transform(r))+")"};function HX(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const V_={test:ZA("#"),parse:HX,transform:bc.transform},ed={test:ZA("hsl","hue"),parse:OL("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+_s.transform(np(e))+", "+_s.transform(np(n))+", "+np(Bp.transform(r))+")"},$r={test:t=>bc.test(t)||V_.test(t)||ed.test(t),parse:t=>bc.test(t)?bc.parse(t):ed.test(t)?ed.parse(t):V_.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?bc.transform(t):ed.transform(t)},GX=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function YX(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(QA))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(GX))===null||n===void 0?void 0:n.length)||0)>0}const IL="number",DL="color",XX="var",QX="var(",vk="${}",ZX=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Up(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const o=e.replace(ZX,l=>($r.test(l)?(r.color.push(a),i.push(DL),n.push($r.parse(l))):l.startsWith(QX)?(r.var.push(a),i.push(XX),n.push(l)):(r.number.push(a),i.push(IL),n.push(parseFloat(l))),++a,vk)).split(vk);return{values:n,split:o,indexes:r,types:i}}function ML(t){return Up(t).values}function RL(t){const{split:e,types:n}=Up(t),r=e.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=e[s],i[s]!==void 0){const o=n[s];o===IL?a+=np(i[s]):o===DL?a+=$r.transform(i[s]):a+=i[s]}return a}}const JX=t=>typeof t=="number"?0:t;function eQ(t){const e=ML(t);return RL(t)(e.map(JX))}const _l={test:YX,parse:ML,createTransformer:RL,getAnimatableNone:eQ},tQ=new Set(["brightness","contrast","saturate","opacity"]);function nQ(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(QA)||[];if(!r)return t;const i=n.replace(r,"");let a=tQ.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const rQ=/\b([a-z-]*)\(.*?\)/gu,F_={..._l,getAnimatableNone:t=>{const e=t.match(rQ);return e?e.map(nQ).join(" "):t}},iQ={...MA,color:$r,backgroundColor:$r,outlineColor:$r,fill:$r,stroke:$r,borderColor:$r,borderTopColor:$r,borderRightColor:$r,borderBottomColor:$r,borderLeftColor:$r,filter:F_,WebkitFilter:F_},JA=t=>iQ[t];function $L(t,e){let n=JA(t);return n!==F_&&(n=_l),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const aQ=new Set(["auto","none","0"]);function sQ(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!aQ.has(a)&&Up(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=$L(n,i)}const xk=t=>t===kf||t===tt,bk=(t,e)=>parseFloat(t.split(", ")[e]),wk=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return bk(i[1],e);{const a=r.match(/^matrix\((.+)\)$/u);return a?bk(a[1],t):0}},oQ=new Set(["x","y","z"]),lQ=Cf.filter(t=>!oQ.has(t));function cQ(t){const e=[];return lQ.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Ud={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:wk(4,13),y:wk(5,14)};Ud.translateX=Ud.x;Ud.translateY=Ud.y;const Oc=new Set;let B_=!1,U_=!1;function LL(){if(U_){const t=Array.from(Oc).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=cQ(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,s])=>{var o;(o=r.getValue(a))===null||o===void 0||o.set(s)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}U_=!1,B_=!1,Oc.forEach(t=>t.complete()),Oc.clear()}function zL(){Oc.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(U_=!0)})}function uQ(){zL(),LL()}class ej{constructor(e,n,r,i,a,s=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Oc.add(this),B_||(B_=!0,sn.read(zL),sn.resolveKeyframes(LL))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const l=r.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Oc.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Oc.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const VL=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),dQ=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function fQ(t){const e=dQ.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function FL(t,e,n=1){const[r,i]=fQ(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const s=a.trim();return VL(s)?parseFloat(s):s}return DA(i)?FL(i,e,n+1):i}const BL=t=>e=>e.test(t),hQ={test:t=>t==="auto",parse:t=>t},UL=[kf,tt,_s,Fo,nX,tX,hQ],_k=t=>UL.find(BL(t));class WL extends ej{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),DA(u))){const f=FL(u,n.current);f!==void 0&&(e[l]=f),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!bL.has(r)||e.length!==2)return;const[i,a]=e,s=_k(i),o=_k(a);if(s!==o)if(xk(s)&&xk(o))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)UX(e[i])&&r.push(i);r.length&&sQ(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ud[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const a=n.getValue(r);a&&a.jump(this.measuredOrigin,!1);const s=i.length-1,o=i[s];i[s]=Ud[r](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{n.getValue(l).set(u)}),this.resolveNoneKeyframes()}}const Sk=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(_l.test(t)||t==="0")&&!t.startsWith("url("));function pQ(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function mQ(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],s=Sk(i,e),o=Sk(a,e);return!s||!o?!1:pQ(t)||(n==="spring"||BA(n))&&r}const gQ=t=>t!==null;function kx(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(gQ),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const yQ=40;class KL{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Ss.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:s,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>yQ?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&uQ(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Ss.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:a,delay:s,onComplete:o,onUpdate:l,isGenerator:u}=this.options;if(!u&&!mQ(e,r,i,a))if(s)this.options.duration=0;else{l&&l(kx(e,this.options,n)),o&&o(),this.resolveFinishedPromise();return}const f=this.initPlayback(e,n);f!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...f},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const mn=(t,e,n)=>t+(e-t)*n;function _w(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function vQ({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,s=0;if(!e)i=a=s=n;else{const o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;i=_w(l,o,t+1/3),a=_w(l,o,t),s=_w(l,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function Ov(t,e){return n=>n>0?e:t}const Sw=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},xQ=[V_,bc,ed],bQ=t=>xQ.find(e=>e.test(t));function Ek(t){const e=bQ(t);if(!e)return!1;let n=e.parse(t);return e===ed&&(n=vQ(n)),n}const Ak=(t,e)=>{const n=Ek(t),r=Ek(e);if(!n||!r)return Ov(t,e);const i={...n};return a=>(i.red=Sw(n.red,r.red,a),i.green=Sw(n.green,r.green,a),i.blue=Sw(n.blue,r.blue,a),i.alpha=mn(n.alpha,r.alpha,a),bc.transform(i))},wQ=(t,e)=>n=>e(t(n)),Qm=(...t)=>t.reduce(wQ),W_=new Set(["none","hidden"]);function _Q(t,e){return W_.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function SQ(t,e){return n=>mn(t,e,n)}function tj(t){return typeof t=="number"?SQ:typeof t=="string"?DA(t)?Ov:$r.test(t)?Ak:jQ:Array.isArray(t)?qL:typeof t=="object"?$r.test(t)?Ak:EQ:Ov}function qL(t,e){const n=[...t],r=n.length,i=t.map((a,s)=>tj(a)(a,e[s]));return a=>{for(let s=0;s<r;s++)n[s]=i[s](a);return n}}function EQ(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=tj(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function AQ(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const s=e.types[a],o=t.indexes[s][i[s]],l=(n=t.values[o])!==null&&n!==void 0?n:0;r[a]=l,i[s]++}return r}const jQ=(t,e)=>{const n=_l.createTransformer(e),r=Up(t),i=Up(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?W_.has(t)&&!i.values.length||W_.has(e)&&!r.values.length?_Q(t,e):Qm(qL(AQ(r,i),i.values),n):Ov(t,e)};function HL(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?mn(t,e,n):tj(t)(t,e)}const TQ=5;function GL(t,e,n){const r=Math.max(e-TQ,0);return wL(n-t(r),e-r)}const Tn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ew=.001;function PQ({duration:t=Tn.duration,bounce:e=Tn.bounce,velocity:n=Tn.velocity,mass:r=Tn.mass}){let i,a,s=1-e;s=mo(Tn.minDamping,Tn.maxDamping,s),t=mo(Tn.minDuration,Tn.maxDuration,Js(t)),s<1?(i=u=>{const f=u*s,d=f*t,h=f-n,p=K_(u,s),v=Math.exp(-d);return Ew-h/p*v},a=u=>{const d=u*s*t,h=d*n+n,p=Math.pow(s,2)*Math.pow(u,2)*t,v=Math.exp(-d),y=K_(Math.pow(u,2),s);return(-i(u)+Ew>0?-1:1)*((h-p)*v)/y}):(i=u=>{const f=Math.exp(-u*t),d=(u-n)*t+1;return-Ew+f*d},a=u=>{const f=Math.exp(-u*t),d=(n-u)*(t*t);return f*d});const o=5/t,l=kQ(i,a,o);if(t=Zs(t),isNaN(l))return{stiffness:Tn.stiffness,damping:Tn.damping,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:t}}}const CQ=12;function kQ(t,e,n){let r=n;for(let i=1;i<CQ;i++)r=r-t(r)/e(r);return r}function K_(t,e){return t*Math.sqrt(1-e*e)}const NQ=["duration","bounce"],OQ=["stiffness","damping","mass"];function jk(t,e){return e.some(n=>t[n]!==void 0)}function IQ(t){let e={velocity:Tn.velocity,stiffness:Tn.stiffness,damping:Tn.damping,mass:Tn.mass,isResolvedFromDuration:!1,...t};if(!jk(t,OQ)&&jk(t,NQ))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*mo(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Tn.mass,stiffness:i,damping:a}}else{const n=PQ(t);e={...e,...n,mass:Tn.mass},e.isResolvedFromDuration=!0}return e}function YL(t=Tn.visualDuration,e=Tn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:u,mass:f,duration:d,velocity:h,isResolvedFromDuration:p}=IQ({...n,velocity:-Js(n.velocity||0)}),v=h||0,y=u/(2*Math.sqrt(l*f)),b=s-a,x=Js(Math.sqrt(l/f)),_=Math.abs(b)<5;r||(r=_?Tn.restSpeed.granular:Tn.restSpeed.default),i||(i=_?Tn.restDelta.granular:Tn.restDelta.default);let E;if(y<1){const A=K_(x,y);E=j=>{const S=Math.exp(-y*x*j);return s-S*((v+y*x*b)/A*Math.sin(A*j)+b*Math.cos(A*j))}}else if(y===1)E=A=>s-Math.exp(-x*A)*(b+(v+x*b)*A);else{const A=x*Math.sqrt(y*y-1);E=j=>{const S=Math.exp(-y*x*j),T=Math.min(A*j,300);return s-S*((v+y*x*b)*Math.sinh(T)+A*b*Math.cosh(T))/A}}const P={calculatedDuration:p&&d||null,next:A=>{const j=E(A);if(p)o.done=A>=d;else{let S=0;y<1&&(S=A===0?Zs(v):GL(E,A,j));const T=Math.abs(S)<=r,N=Math.abs(s-j)<=i;o.done=T&&N}return o.value=o.done?s:j,o},toString:()=>{const A=Math.min(hL(P),$_),j=pL(S=>P.next(A*S).value,A,30);return A+"ms "+j}};return P}function Tk({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:l,restDelta:u=.5,restSpeed:f}){const d=t[0],h={done:!1,value:d},p=T=>o!==void 0&&T<o||l!==void 0&&T>l,v=T=>o===void 0?l:l===void 0||Math.abs(o-T)<Math.abs(l-T)?o:l;let y=n*e;const b=d+y,x=s===void 0?b:s(b);x!==b&&(y=x-d);const _=T=>-y*Math.exp(-T/r),E=T=>x+_(T),P=T=>{const N=_(T),D=E(T);h.done=Math.abs(N)<=u,h.value=h.done?x:D};let A,j;const S=T=>{p(h.value)&&(A=T,j=YL({keyframes:[h.value,v(h.value)],velocity:GL(E,T,h.value),damping:i,stiffness:a,restDelta:u,restSpeed:f}))};return S(0),{calculatedDuration:null,next:T=>{let N=!1;return!j&&A===void 0&&(N=!0,P(T),S(T)),A!==void 0&&T>=A?j.next(T-A):(!N&&P(T),h)}}}const DQ=Xm(.42,0,1,1),MQ=Xm(0,0,.58,1),XL=Xm(.42,0,.58,1),RQ=t=>Array.isArray(t)&&typeof t[0]!="number",$Q={linear:Fi,easeIn:DQ,easeInOut:XL,easeOut:MQ,circIn:XA,circInOut:kL,circOut:CL,backIn:YA,backInOut:TL,backOut:jL,anticipate:PL},Pk=t=>{if(UA(t)){H$(t.length===4);const[e,n,r,i]=t;return Xm(e,n,r,i)}else if(typeof t=="string")return $Q[t];return t};function LQ(t,e,n){const r=[],i=n||HL,a=t.length-1;for(let s=0;s<a;s++){let o=i(t[s],t[s+1]);if(e){const l=Array.isArray(e)?e[s]||Fi:e;o=Qm(l,o)}r.push(o)}return r}function QL(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(H$(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const s=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=LQ(e,r,i),l=o.length,u=f=>{if(s&&f<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(f<t[d+1]);d++);const h=Vd(t[d],t[d+1],f);return o[d](h)};return n?f=>u(mo(t[0],t[a-1],f)):u}function zQ(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Vd(0,e,r);t.push(mn(n,1,i))}}function VQ(t){const e=[0];return zQ(e,t.length-1),e}function FQ(t,e){return t.map(n=>n*e)}function BQ(t,e){return t.map(()=>e||XL).splice(0,t.length-1)}function Iv({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=RQ(r)?r.map(Pk):Pk(r),a={done:!1,value:e[0]},s=FQ(n&&n.length===e.length?n:VQ(e),t),o=QL(s,e,{ease:Array.isArray(i)?i:BQ(e,i)});return{calculatedDuration:t,next:l=>(a.value=o(l),a.done=l>=t,a)}}const UQ=t=>{const e=({timestamp:n})=>t(n);return{start:()=>sn.update(e,!0),stop:()=>po(e),now:()=>_r.isProcessing?_r.timestamp:Ss.now()}},WQ={decay:Tk,inertia:Tk,tween:Iv,keyframes:Iv,spring:YL},KQ=t=>t/100;class nj extends KL{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:a}=this.options,s=(i==null?void 0:i.KeyframeResolver)||ej,o=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new s(a,o,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=this.options,o=BA(n)?n:WQ[n]||Iv;let l,u;o!==Iv&&typeof e[0]!="number"&&(l=Qm(KQ,HL(e[0],e[1])),e=[0,100]);const f=o({...this.options,keyframes:e});a==="mirror"&&(u=o({...this.options,keyframes:[...e].reverse(),velocity:-s})),f.calculatedDuration===null&&(f.calculatedDuration=hL(f));const{calculatedDuration:d}=f,h=d+i,p=h*(r+1)-i;return{generator:f,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:h,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:T}=this.options;return{done:!0,value:T[T.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:s,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:u,totalDuration:f,resolvedDuration:d}=r;if(this.startTime===null)return a.next(0);const{delay:h,repeat:p,repeatType:v,repeatDelay:y,onUpdate:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-f/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const x=this.currentTime-h*(this.speed>=0?1:-1),_=this.speed>=0?x<0:x>f;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=f);let E=this.currentTime,P=a;if(p){const T=Math.min(this.currentTime,f)/d;let N=Math.floor(T),D=T%1;!D&&T>=1&&(D=1),D===1&&N--,N=Math.min(N,p+1),!!(N%2)&&(v==="reverse"?(D=1-D,y&&(D-=y/d)):v==="mirror"&&(P=s)),E=mo(0,1,D)*d}const A=_?{done:!1,value:l[0]}:P.next(E);o&&(A.value=o(A.value));let{done:j}=A;!_&&u!==null&&(j=this.speed>=0?this.currentTime>=f:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&j);return S&&i!==void 0&&(A.value=kx(l,this.options,i)),b&&b(A.value),S&&this.finish(),A}get duration(){const{resolved:e}=this;return e?Js(e.calculatedDuration):0}get time(){return Js(this.currentTime)}set time(e){e=Zs(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Js(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=UQ,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const qQ=new Set(["opacity","clipPath","filter","transform"]);function HQ(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeInOut",times:l}={}){const u={[e]:n};l&&(u.offset=l);const f=gL(o,i);return Array.isArray(f)&&(u.easing=f),t.animate(u,{delay:r,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"})}const GQ=TA(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Dv=10,YQ=2e4;function XQ(t){return BA(t.type)||t.type==="spring"||!mL(t.ease)}function QQ(t,e){const n=new nj({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let a=0;for(;!r.done&&a<YQ;)r=n.sample(a),i.push(r.value),a+=Dv;return{times:void 0,keyframes:i,duration:a-Dv,ease:"linear"}}const ZL={anticipate:PL,backInOut:TL,circInOut:kL};function ZQ(t){return t in ZL}class Ck extends KL{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:a}=this.options;this.resolver=new WL(a,(s,o)=>this.onKeyframesResolved(s,o),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:a,type:s,motionValue:o,name:l,startTime:u}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof a=="string"&&Nv()&&ZQ(a)&&(a=ZL[a]),XQ(this.options)){const{onComplete:d,onUpdate:h,motionValue:p,element:v,...y}=this.options,b=QQ(e,y);e=b.keyframes,e.length===1&&(e[1]=e[0]),r=b.duration,i=b.times,a=b.ease,s="keyframes"}const f=HQ(o.owner.current,l,e,{...this.options,duration:r,times:i,ease:a});return f.startTime=u??this.calcStartTime(),this.pendingTimeline?(hk(f,this.pendingTimeline),this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:d}=this.options;o.set(kx(e,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:r,times:i,type:s,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Js(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Js(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Zs(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Fi;const{animation:r}=n;hk(r,e)}return Fi}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:a,ease:s,times:o}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:f,onComplete:d,element:h,...p}=this.options,v=new nj({...p,keyframes:r,duration:i,type:a,ease:s,times:o,isGenerator:!0}),y=Zs(this.time);u.setWithVelocity(v.sample(y-Dv).value,v.sample(y).value,Dv)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:a,damping:s,type:o}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=n.owner.getProps();return GQ()&&r&&qQ.has(r)&&!l&&!u&&!i&&a!=="mirror"&&s!==0&&o!=="inertia"}}const JQ={type:"spring",stiffness:500,damping:25,restSpeed:10},eZ=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),tZ={type:"keyframes",duration:.8},nZ={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},rZ=(t,{keyframes:e})=>e.length>2?tZ:su.has(t)?t.startsWith("scale")?eZ(e[1]):JQ:nZ;function iZ({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:l,elapsed:u,...f}){return!!Object.keys(f).length}const rj=(t,e,n,r={},i,a)=>s=>{const o=FA(r,t)||{},l=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Zs(l);let f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:h=>{e.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:a?void 0:i};iZ(o)||(f={...f,...rZ(t,f)}),f.duration&&(f.duration=Zs(f.duration)),f.repeatDelay&&(f.repeatDelay=Zs(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let d=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(f.duration=0,f.delay===0&&(d=!0)),d&&!a&&e.get()!==void 0){const h=kx(f.keyframes,o);if(h!==void 0)return sn.update(()=>{f.onUpdate(h),f.onComplete()}),new EX([])}return!a&&Ck.supports(f)?new Ck(f):new nj(f)};function aZ({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function JL(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var a;let{transition:s=t.getDefaultTransition(),transitionEnd:o,...l}=e;r&&(s=r);const u=[],f=i&&t.animationState&&t.animationState.getState()[i];for(const d in l){const h=t.getValue(d,(a=t.latestValues[d])!==null&&a!==void 0?a:null),p=l[d];if(p===void 0||f&&aZ(f,d))continue;const v={delay:n,...FA(s||{},d)};let y=!1;if(window.MotionHandoffAnimation){const x=_L(t);if(x){const _=window.MotionHandoffAnimation(x,d,sn);_!==null&&(v.startTime=_,y=!0)}}z_(t,d),h.start(rj(d,h,p,t.shouldReduceMotion&&bL.has(d)?{type:!1}:v,t,y));const b=h.animation;b&&u.push(b)}return o&&Promise.all(u).then(()=>{sn.update(()=>{o&&GA(t,o)})}),u}function q_(t,e,n={}){var r;const i=Cx(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const s=i?()=>Promise.all(JL(t,i,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:f=0,staggerChildren:d,staggerDirection:h}=a;return sZ(t,e,f+u,d,h,n)}:()=>Promise.resolve(),{when:l}=a;if(l){const[u,f]=l==="beforeChildren"?[s,o]:[o,s];return u().then(()=>f())}else return Promise.all([s(),o(n.delay)])}function sZ(t,e,n=0,r=0,i=1,a){const s=[],o=(t.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>o-u*r;return Array.from(t.variantChildren).sort(oZ).forEach((u,f)=>{u.notify("AnimationStart",e),s.push(q_(u,e,{...a,delay:n+l(f)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(s)}function oZ(t,e){return t.sortNodePosition(e)}function ez(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>q_(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=q_(t,e,n);else{const i=typeof e=="function"?Cx(t,e,n.custom):e;r=Promise.all(JL(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const lZ=CA.length;function tz(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?tz(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<lZ;n++){const r=CA[n],i=t.props[r];(Fp(i)||i===!1)&&(e[r]=i)}return e}const cZ=[...PA].reverse(),uZ=PA.length;function dZ(t){return e=>Promise.all(e.map(({animation:n,options:r})=>ez(t,n,r)))}function fZ(t){let e=dZ(t),n=kk(),r=!0;const i=l=>(u,f)=>{var d;const h=Cx(t,f,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(h){const{transition:p,transitionEnd:v,...y}=h;u={...u,...y,...v}}return u};function a(l){e=l(t)}function s(l){const{props:u}=t,f=tz(t.parent)||{},d=[],h=new Set;let p={},v=1/0;for(let b=0;b<uZ;b++){const x=cZ[b],_=n[x],E=u[x]!==void 0?u[x]:f[x],P=Fp(E),A=x===l?_.isActive:null;A===!1&&(v=b);let j=E===f[x]&&E!==u[x]&&P;if(j&&r&&t.manuallyAnimateOnMount&&(j=!1),_.protectedKeys={...p},!_.isActive&&A===null||!E&&!_.prevProp||Tx(E)||typeof E=="boolean")continue;const S=hZ(_.prevProp,E);let T=S||x===l&&_.isActive&&!j&&P||b>v&&P,N=!1;const D=Array.isArray(E)?E:[E];let M=D.reduce(i(x),{});A===!1&&(M={});const{prevResolvedValues:$={}}=_,z={...$,...M},H=Z=>{T=!0,h.has(Z)&&(N=!0,h.delete(Z)),_.needsAnimating[Z]=!0;const q=t.getValue(Z);q&&(q.liveStyle=!1)};for(const Z in z){const q=M[Z],Y=$[Z];if(p.hasOwnProperty(Z))continue;let le=!1;R_(q)&&R_(Y)?le=!fL(q,Y):le=q!==Y,le?q!=null?H(Z):h.add(Z):q!==void 0&&h.has(Z)?H(Z):_.protectedKeys[Z]=!0}_.prevProp=E,_.prevResolvedValues=M,_.isActive&&(p={...p,...M}),r&&t.blockInitialAnimation&&(T=!1),T&&(!(j&&S)||N)&&d.push(...D.map(Z=>({animation:Z,options:{type:x}})))}if(h.size){const b={};h.forEach(x=>{const _=t.getBaseTarget(x),E=t.getValue(x);E&&(E.liveStyle=!0),b[x]=_??null}),d.push({animation:b})}let y=!!d.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(y=!1),r=!1,y?e(d):Promise.resolve()}function o(l,u){var f;if(n[l].isActive===u)return Promise.resolve();(f=t.variantChildren)===null||f===void 0||f.forEach(h=>{var p;return(p=h.animationState)===null||p===void 0?void 0:p.setActive(l,u)}),n[l].isActive=u;const d=s(l);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=kk(),r=!0}}}function hZ(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!fL(e,t):!1}function tc(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function kk(){return{animate:tc(!0),whileInView:tc(),whileHover:tc(),whileTap:tc(),whileDrag:tc(),whileFocus:tc(),exit:tc()}}class Ol{constructor(e){this.isMounted=!1,this.node=e}update(){}}class pZ extends Ol{constructor(e){super(e),e.animationState||(e.animationState=fZ(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Tx(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let mZ=0;class gZ extends Ol{constructor(){super(...arguments),this.id=mZ++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const yZ={animation:{Feature:pZ},exit:{Feature:gZ}};function Wp(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Zm(t){return{point:{x:t.pageX,y:t.pageY}}}const vZ=t=>e=>WA(e)&&t(e,Zm(e));function rp(t,e,n,r){return Wp(t,e,vZ(n),r)}const Nk=(t,e)=>Math.abs(t-e);function xZ(t,e){const n=Nk(t.x,e.x),r=Nk(t.y,e.y);return Math.sqrt(n**2+r**2)}class nz{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=jw(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,p=xZ(d.offset,{x:0,y:0})>=3;if(!h&&!p)return;const{point:v}=d,{timestamp:y}=_r;this.history.push({...v,timestamp:y});const{onStart:b,onMove:x}=this.handlers;h||(b&&b(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,d)},this.handlePointerMove=(d,h)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=Aw(h,this.transformPagePoint),sn.update(this.updatePoint,!0)},this.handlePointerUp=(d,h)=>{this.end();const{onEnd:p,onSessionEnd:v,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=jw(d.type==="pointercancel"?this.lastMoveEventInfo:Aw(h,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,b),v&&v(d,b)},!WA(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const s=Zm(e),o=Aw(s,this.transformPagePoint),{point:l}=o,{timestamp:u}=_r;this.history=[{...l,timestamp:u}];const{onSessionStart:f}=n;f&&f(e,jw(o,this.history)),this.removeListeners=Qm(rp(this.contextWindow,"pointermove",this.handlePointerMove),rp(this.contextWindow,"pointerup",this.handlePointerUp),rp(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),po(this.updatePoint)}}function Aw(t,e){return e?{point:e(t.point)}:t}function Ok(t,e){return{x:t.x-e.x,y:t.y-e.y}}function jw({point:t},e){return{point:t,delta:Ok(t,rz(e)),offset:Ok(t,bZ(e)),velocity:wZ(e,.1)}}function bZ(t){return t[0]}function rz(t){return t[t.length-1]}function wZ(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=rz(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Zs(e)));)n--;if(!r)return{x:0,y:0};const a=Js(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}const iz=1e-4,_Z=1-iz,SZ=1+iz,az=.01,EZ=0-az,AZ=0+az;function Ki(t){return t.max-t.min}function jZ(t,e,n){return Math.abs(t-e)<=n}function Ik(t,e,n,r=.5){t.origin=r,t.originPoint=mn(e.min,e.max,t.origin),t.scale=Ki(n)/Ki(e),t.translate=mn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=_Z&&t.scale<=SZ||isNaN(t.scale))&&(t.scale=1),(t.translate>=EZ&&t.translate<=AZ||isNaN(t.translate))&&(t.translate=0)}function ip(t,e,n,r){Ik(t.x,e.x,n.x,r?r.originX:void 0),Ik(t.y,e.y,n.y,r?r.originY:void 0)}function Dk(t,e,n){t.min=n.min+e.min,t.max=t.min+Ki(e)}function TZ(t,e,n){Dk(t.x,e.x,n.x),Dk(t.y,e.y,n.y)}function Mk(t,e,n){t.min=e.min-n.min,t.max=t.min+Ki(e)}function ap(t,e,n){Mk(t.x,e.x,n.x),Mk(t.y,e.y,n.y)}function PZ(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?mn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?mn(n,t,r.max):Math.min(t,n)),t}function Rk(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function CZ(t,{top:e,left:n,bottom:r,right:i}){return{x:Rk(t.x,n,i),y:Rk(t.y,e,r)}}function $k(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function kZ(t,e){return{x:$k(t.x,e.x),y:$k(t.y,e.y)}}function NZ(t,e){let n=.5;const r=Ki(t),i=Ki(e);return i>r?n=Vd(e.min,e.max-r,t.min):r>i&&(n=Vd(t.min,t.max-i,e.min)),mo(0,1,n)}function OZ(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const H_=.35;function IZ(t=H_){return t===!1?t=0:t===!0&&(t=H_),{x:Lk(t,"left","right"),y:Lk(t,"top","bottom")}}function Lk(t,e,n){return{min:zk(t,e),max:zk(t,n)}}function zk(t,e){return typeof t=="number"?t:t[e]||0}const Vk=()=>({translate:0,scale:1,origin:0,originPoint:0}),td=()=>({x:Vk(),y:Vk()}),Fk=()=>({min:0,max:0}),Rn=()=>({x:Fk(),y:Fk()});function ra(t){return[t("x"),t("y")]}function sz({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function DZ({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function MZ(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Tw(t){return t===void 0||t===1}function G_({scale:t,scaleX:e,scaleY:n}){return!Tw(t)||!Tw(e)||!Tw(n)}function lc(t){return G_(t)||oz(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function oz(t){return Bk(t.x)||Bk(t.y)}function Bk(t){return t&&t!=="0%"}function Mv(t,e,n){const r=t-n,i=e*r;return n+i}function Uk(t,e,n,r,i){return i!==void 0&&(t=Mv(t,i,r)),Mv(t,n,r)+e}function Y_(t,e=0,n=1,r,i){t.min=Uk(t.min,e,n,r,i),t.max=Uk(t.max,e,n,r,i)}function lz(t,{x:e,y:n}){Y_(t.x,e.translate,e.scale,e.originPoint),Y_(t.y,n.translate,n.scale,n.originPoint)}const Wk=.999999999999,Kk=1.0000000000001;function RZ(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,s;for(let o=0;o<i;o++){a=n[o],s=a.projectionDelta;const{visualElement:l}=a.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&rd(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,lz(t,s)),r&&lc(a.latestValues)&&rd(t,a.latestValues))}e.x<Kk&&e.x>Wk&&(e.x=1),e.y<Kk&&e.y>Wk&&(e.y=1)}function nd(t,e){t.min=t.min+e,t.max=t.max+e}function qk(t,e,n,r,i=.5){const a=mn(t.min,t.max,i);Y_(t,e,n,a,r)}function rd(t,e){qk(t.x,e.x,e.scaleX,e.scale,e.originX),qk(t.y,e.y,e.scaleY,e.scale,e.originY)}function cz(t,e){return sz(MZ(t.getBoundingClientRect(),e))}function $Z(t,e,n){const r=cz(t,n),{scroll:i}=e;return i&&(nd(r.x,i.offset.x),nd(r.y,i.offset.y)),r}const uz=({current:t})=>t?t.ownerDocument.defaultView:null,LZ=new WeakMap;class zZ{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Rn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=f=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Zm(f).point)},a=(f,d)=>{const{drag:h,dragPropagation:p,onDragStart:v}=this.getProps();if(h&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=IX(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ra(b=>{let x=this.getAxisMotionValue(b).get()||0;if(_s.test(x)){const{projection:_}=this.visualElement;if(_&&_.layout){const E=_.layout.layoutBox[b];E&&(x=Ki(E)*(parseFloat(x)/100))}}this.originPoint[b]=x}),v&&sn.postRender(()=>v(f,d)),z_(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},s=(f,d)=>{const{dragPropagation:h,dragDirectionLock:p,onDirectionLock:v,onDrag:y}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:b}=d;if(p&&this.currentDirection===null){this.currentDirection=VZ(b),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",d.point,b),this.updateAxis("y",d.point,b),this.visualElement.render(),y&&y(f,d)},o=(f,d)=>this.stop(f,d),l=()=>ra(f=>{var d;return this.getAnimationState(f)==="paused"&&((d=this.getAxisMotionValue(f).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new nz(e,{onSessionStart:i,onStart:a,onMove:s,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:uz(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&sn.postRender(()=>a(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Zg(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=PZ(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;n&&Ju(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=CZ(i.layoutBox,n):this.constraints=!1,this.elastic=IZ(r),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ra(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=OZ(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ju(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=$Z(r,i.root,this.visualElement.getTransformPagePoint());let s=kZ(i.layout.layoutBox,a);if(n){const o=n(DZ(s));this.hasMutatedConstraints=!!o,o&&(s=sz(o))}return s}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=ra(f=>{if(!Zg(f,n,this.currentDirection))return;let d=l&&l[f]||{};s&&(d={min:0,max:0});const h=i?200:1e6,p=i?40:1e7,v={type:"inertia",velocity:r?e[f]:0,bounceStiffness:h,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...a,...d};return this.startAxisValueAnimation(f,v)});return Promise.all(u).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return z_(this.visualElement,e),r.start(rj(e,r,0,n,this.visualElement,!1))}stopAnimation(){ra(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ra(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ra(n=>{const{drag:r}=this.getProps();if(!Zg(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[n];a.set(e[n]-mn(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ju(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ra(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const l=o.get();i[s]=NZ({min:l,max:l},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ra(s=>{if(!Zg(s,e,null))return;const o=this.getAxisMotionValue(s),{min:l,max:u}=this.constraints[s];o.set(mn(l,u,i[s]))})}addListeners(){if(!this.visualElement.current)return;LZ.set(this.visualElement,this);const e=this.visualElement.current,n=rp(e,"pointerdown",l=>{const{drag:u,dragListener:f=!0}=this.getProps();u&&f&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Ju(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),sn.read(r);const s=Wp(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(ra(f=>{const d=this.getAxisMotionValue(f);d&&(this.originPoint[f]+=l[f].translate,d.set(d.get()+l[f].translate))}),this.visualElement.render())});return()=>{s(),n(),a(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=H_,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function Zg(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function VZ(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class FZ extends Ol{constructor(e){super(e),this.removeGroupControls=Fi,this.removeListeners=Fi,this.controls=new zZ(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Fi}unmount(){this.removeGroupControls(),this.removeListeners()}}const Hk=t=>(e,n)=>{t&&sn.postRender(()=>t(e,n))};class BZ extends Ol{constructor(){super(...arguments),this.removePointerDownListener=Fi}onPointerDown(e){this.session=new nz(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:uz(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Hk(e),onStart:Hk(n),onMove:r,onEnd:(a,s)=>{delete this.session,i&&sn.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=rp(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ry={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Gk(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ph={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(tt.test(t))t=parseFloat(t);else return t;const n=Gk(t,e.target.x),r=Gk(t,e.target.y);return`${n}% ${r}%`}},UZ={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=_l.parse(t);if(i.length>5)return r;const a=_l.createTransformer(t),s=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,l=n.y.scale*e.y;i[0+s]/=o,i[1+s]/=l;const u=mn(o,l,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),a(i)}};class WZ extends O.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;fX(KZ),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Ry.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,s=r.projection;return s&&(s.isPresent=a,i||e.layoutDependency!==n||n===void 0?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||sn.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),NA.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function dz(t){const[e,n]=PY(),r=O.useContext(q$);return c.jsx(WZ,{...t,layoutGroup:r,switchLayoutGroup:O.useContext(J$),isPresent:e,safeToRemove:n})}const KZ={borderRadius:{...ph,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ph,borderTopRightRadius:ph,borderBottomLeftRadius:ph,borderBottomRightRadius:ph,boxShadow:UZ};function qZ(t,e,n){const r=Ar(t)?t:Bd(t);return r.start(rj("",r,e,n)),r.animation}function HZ(t){return t instanceof SVGElement&&t.tagName!=="svg"}const GZ=(t,e)=>t.depth-e.depth;class YZ{constructor(){this.children=[],this.isDirty=!1}add(e){KA(this.children,e),this.isDirty=!0}remove(e){qA(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(GZ),this.isDirty=!1,this.children.forEach(e)}}function XZ(t,e){const n=Ss.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(po(r),t(a-e))};return sn.read(r,!0),()=>po(r)}const fz=["TopLeft","TopRight","BottomLeft","BottomRight"],QZ=fz.length,Yk=t=>typeof t=="string"?parseFloat(t):t,Xk=t=>typeof t=="number"||tt.test(t);function ZZ(t,e,n,r,i,a){i?(t.opacity=mn(0,n.opacity!==void 0?n.opacity:1,JZ(r)),t.opacityExit=mn(e.opacity!==void 0?e.opacity:1,0,eJ(r))):a&&(t.opacity=mn(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let s=0;s<QZ;s++){const o=`border${fz[s]}Radius`;let l=Qk(e,o),u=Qk(n,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||Xk(l)===Xk(u)?(t[o]=Math.max(mn(Yk(l),Yk(u),r),0),(_s.test(u)||_s.test(l))&&(t[o]+="%")):t[o]=u}(e.rotate||n.rotate)&&(t.rotate=mn(e.rotate||0,n.rotate||0,r))}function Qk(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const JZ=hz(0,.5,CL),eJ=hz(.5,.95,Fi);function hz(t,e,n){return r=>r<t?0:r>e?1:n(Vd(t,e,r))}function Zk(t,e){t.min=e.min,t.max=e.max}function Ji(t,e){Zk(t.x,e.x),Zk(t.y,e.y)}function Jk(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function eN(t,e,n,r,i){return t-=e,t=Mv(t,1/n,r),i!==void 0&&(t=Mv(t,1/i,r)),t}function tJ(t,e=0,n=1,r=.5,i,a=t,s=t){if(_s.test(e)&&(e=parseFloat(e),e=mn(s.min,s.max,e/100)-s.min),typeof e!="number")return;let o=mn(a.min,a.max,r);t===a&&(o-=e),t.min=eN(t.min,e,n,o,i),t.max=eN(t.max,e,n,o,i)}function tN(t,e,[n,r,i],a,s){tJ(t,e[n],e[r],e[i],e.scale,a,s)}const nJ=["x","scaleX","originX"],rJ=["y","scaleY","originY"];function nN(t,e,n,r){tN(t.x,e,nJ,n?n.x:void 0,r?r.x:void 0),tN(t.y,e,rJ,n?n.y:void 0,r?r.y:void 0)}function rN(t){return t.translate===0&&t.scale===1}function pz(t){return rN(t.x)&&rN(t.y)}function iN(t,e){return t.min===e.min&&t.max===e.max}function iJ(t,e){return iN(t.x,e.x)&&iN(t.y,e.y)}function aN(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function mz(t,e){return aN(t.x,e.x)&&aN(t.y,e.y)}function sN(t){return Ki(t.x)/Ki(t.y)}function oN(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class aJ{constructor(){this.members=[]}add(e){KA(this.members,e),e.scheduleRender()}remove(e){if(qA(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function sJ(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,s=(n==null?void 0:n.z)||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:f,rotateX:d,rotateY:h,skewX:p,skewY:v}=n;u&&(r=`perspective(${u}px) ${r}`),f&&(r+=`rotate(${f}deg) `),d&&(r+=`rotateX(${d}deg) `),h&&(r+=`rotateY(${h}deg) `),p&&(r+=`skewX(${p}deg) `),v&&(r+=`skewY(${v}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const cc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},$h=typeof window<"u"&&window.MotionDebug!==void 0,Pw=["","X","Y","Z"],oJ={visibility:"hidden"},lN=1e3;let lJ=0;function Cw(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function gz(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=_L(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",sn,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&gz(r)}function yz({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=e==null?void 0:e()){this.id=lJ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,$h&&(cc.totalNodes=cc.resolvedTargetDeltas=cc.recalculatedProjection=0),this.nodes.forEach(dJ),this.nodes.forEach(gJ),this.nodes.forEach(yJ),this.nodes.forEach(fJ),$h&&window.MotionDebug.record(cc)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new YZ)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new HA),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const l=this.eventHandlers.get(s);l&&l.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=HZ(s),this.instance=s;const{layoutId:l,layout:u,visualElement:f}=this.options;if(f&&!f.current&&f.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||l)&&(this.isLayoutDirty=!0),t){let d;const h=()=>this.root.updateBlockedByResize=!1;t(s,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=XZ(h,250),Ry.hasAnimatedSinceResize&&(Ry.hasAnimatedSinceResize=!1,this.nodes.forEach(uN))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&f&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeTargetChanged:p,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||f.getDefaultTransition()||_J,{onLayoutAnimationStart:b,onLayoutAnimationComplete:x}=f.getProps(),_=!this.targetLayout||!mz(this.targetLayout,v)||p,E=!h&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||E||h&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,E);const P={...FA(y,"layout"),onPlay:b,onComplete:x};(f.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P)}else h||uN(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,po(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(vJ),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&gz(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const d=this.path[f];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(cN);return}this.isUpdating||this.nodes.forEach(pJ),this.isUpdating=!1,this.nodes.forEach(mJ),this.nodes.forEach(cJ),this.nodes.forEach(uJ),this.clearAllSnapshots();const o=Ss.now();_r.delta=mo(0,1e3/60,o-_r.timestamp),_r.timestamp=o,_r.isProcessing=!0,xw.update.process(_r),xw.preRender.process(_r),xw.render.process(_r),_r.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,NA.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(hJ),this.sharedNodes.forEach(xJ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,sn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){sn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Rn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!pz(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,f=u!==this.prevTransformTemplateValue;s&&(o||lc(this.latestValues)||f)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return s&&(l=this.removeTransform(l)),SJ(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var s;const{visualElement:o}=this.options;if(!o)return Rn();const l=o.measureViewportBox();if(!(((s=this.scroll)===null||s===void 0?void 0:s.wasRoot)||this.path.some(EJ))){const{scroll:f}=this.root;f&&(nd(l.x,f.offset.x),nd(l.y,f.offset.y))}return l}removeElementScroll(s){var o;const l=Rn();if(Ji(l,s),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let u=0;u<this.path.length;u++){const f=this.path[u],{scroll:d,options:h}=f;f!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&Ji(l,s),nd(l.x,d.offset.x),nd(l.y,d.offset.y))}return l}applyTransform(s,o=!1){const l=Rn();Ji(l,s);for(let u=0;u<this.path.length;u++){const f=this.path[u];!o&&f.options.layoutScroll&&f.scroll&&f!==f.root&&rd(l,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),lc(f.latestValues)&&rd(l,f.latestValues)}return lc(this.latestValues)&&rd(l,this.latestValues),l}removeTransform(s){const o=Rn();Ji(o,s);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!lc(u.latestValues))continue;G_(u.latestValues)&&u.updateSnapshot();const f=Rn(),d=u.measurePageBox();Ji(f,d),nN(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,f)}return lc(this.latestValues)&&nN(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==_r.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(s||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=_r.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Rn(),this.relativeTargetOrigin=Rn(),ap(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Ji(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Rn(),this.targetWithTransforms=Rn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),TZ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ji(this.target,this.layout.layoutBox),lz(this.target,this.targetDelta)):Ji(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Rn(),this.relativeTargetOrigin=Rn(),ap(this.relativeTargetOrigin,this.target,p.target),Ji(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}$h&&cc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||G_(this.parent.latestValues)||oz(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===_r.timestamp&&(u=!1),u)return;const{layout:f,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||d))return;Ji(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;RZ(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Rn());const{target:v}=o;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Jk(this.prevProjectionDelta.x,this.projectionDelta.x),Jk(this.prevProjectionDelta.y,this.projectionDelta.y)),ip(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==p||!oN(this.projectionDelta.x,this.prevProjectionDelta.x)||!oN(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),$h&&cc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),s){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=td(),this.projectionDelta=td(),this.projectionDeltaWithTransform=td()}setAnimationOrigin(s,o=!1){const l=this.snapshot,u=l?l.latestValues:{},f={...this.latestValues},d=td();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=Rn(),p=l?l.source:void 0,v=this.layout?this.layout.source:void 0,y=p!==v,b=this.getStack(),x=!b||b.members.length<=1,_=!!(y&&!x&&this.options.crossfade===!0&&!this.path.some(wJ));this.animationProgress=0;let E;this.mixTargetDelta=P=>{const A=P/1e3;dN(d.x,s.x,A),dN(d.y,s.y,A),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ap(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),bJ(this.relativeTarget,this.relativeTargetOrigin,h,A),E&&iJ(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=Rn()),Ji(E,this.relativeTarget)),y&&(this.animationValues=f,ZZ(f,u,this.latestValues,A,_,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(po(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=sn.update(()=>{Ry.hasAnimatedSinceResize=!0,this.currentAnimation=qZ(0,lN,{...s,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(lN),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:f}=s;if(!(!o||!l||!u)){if(this!==s&&this.layout&&u&&vz(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Rn();const d=Ki(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+d;const h=Ki(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+h}Ji(o,l),rd(o,f),ip(this.projectionDeltaWithTransform,this.layoutCorrected,o,f)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new aJ),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:o}=this.options;return o?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:o}=this.options;return o?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:l}=s;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&Cw("z",s,u,this.animationValues);for(let f=0;f<Pw.length;f++)Cw(`rotate${Pw[f]}`,s,u,this.animationValues),Cw(`skew${Pw[f]}`,s,u,this.animationValues);s.render();for(const f in u)s.setStaticValue(f,u[f]),this.animationValues&&(this.animationValues[f]=u[f]);s.scheduleRender()}getProjectionStyles(s){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return oJ;const u={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Dy(s==null?void 0:s.pointerEvents)||"",u.transform=f?f(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=Dy(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!lc(this.latestValues)&&(y.transform=f?f({},""):"none",this.hasProjected=!1),y}const h=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=sJ(this.projectionDeltaWithTransform,this.treeScale,h),f&&(u.transform=f(h,u.transform));const{x:p,y:v}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${v.origin*100}% 0`,d.animationValues?u.opacity=d===this?(l=(o=h.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:u.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const y in kv){if(h[y]===void 0)continue;const{correct:b,applyTo:x}=kv[y],_=u.transform==="none"?h[y]:b(h[y],d);if(x){const E=x.length;for(let P=0;P<E;P++)u[x[P]]=_}else u[y]=_}return this.options.layoutId&&(u.pointerEvents=d===this?Dy(s==null?void 0:s.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var o;return(o=s.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(cN),this.root.sharedNodes.clear()}}}function cJ(t){t.updateLayout()}function uJ(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:a}=t.options,s=n.source!==t.layout.source;a==="size"?ra(d=>{const h=s?n.measuredBox[d]:n.layoutBox[d],p=Ki(h);h.min=r[d].min,h.max=h.min+p}):vz(a,n.layoutBox,r)&&ra(d=>{const h=s?n.measuredBox[d]:n.layoutBox[d],p=Ki(r[d]);h.max=h.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+p)});const o=td();ip(o,r,n.layoutBox);const l=td();s?ip(l,t.applyTransform(i,!0),n.measuredBox):ip(l,r,n.layoutBox);const u=!pz(o);let f=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:p}=d;if(h&&p){const v=Rn();ap(v,n.layoutBox,h.layoutBox);const y=Rn();ap(y,r,p.layoutBox),mz(v,y)||(f=!0),d.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=v,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:f})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function dJ(t){$h&&cc.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function fJ(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function hJ(t){t.clearSnapshot()}function cN(t){t.clearMeasurements()}function pJ(t){t.isLayoutDirty=!1}function mJ(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function uN(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function gJ(t){t.resolveTargetDelta()}function yJ(t){t.calcProjection()}function vJ(t){t.resetSkewAndRotation()}function xJ(t){t.removeLeadSnapshot()}function dN(t,e,n){t.translate=mn(e.translate,0,n),t.scale=mn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function fN(t,e,n,r){t.min=mn(e.min,n.min,r),t.max=mn(e.max,n.max,r)}function bJ(t,e,n,r){fN(t.x,e.x,n.x,r),fN(t.y,e.y,n.y,r)}function wJ(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const _J={duration:.45,ease:[.4,0,.1,1]},hN=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),pN=hN("applewebkit/")&&!hN("chrome/")?Math.round:Fi;function mN(t){t.min=pN(t.min),t.max=pN(t.max)}function SJ(t){mN(t.x),mN(t.y)}function vz(t,e,n){return t==="position"||t==="preserve-aspect"&&!jZ(sN(e),sN(n),.2)}function EJ(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const AJ=yz({attachResizeListener:(t,e)=>Wp(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),kw={current:void 0},xz=yz({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!kw.current){const t=new AJ({});t.mount(window),t.setOptions({layoutScroll:!0}),kw.current=t}return kw.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),jJ={pan:{Feature:BZ},drag:{Feature:FZ,ProjectionNode:xz,MeasureLayout:dz}};function gN(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&sn.postRender(()=>a(e,Zm(e)))}class TJ extends Ol{mount(){const{current:e}=this.node;e&&(this.unmount=PX(e,n=>(gN(this.node,n,"Start"),r=>gN(this.node,r,"End"))))}unmount(){}}class PJ extends Ol{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Qm(Wp(this.node.current,"focus",()=>this.onFocus()),Wp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function yN(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&sn.postRender(()=>a(e,Zm(e)))}class CJ extends Ol{mount(){const{current:e}=this.node;e&&(this.unmount=OX(e,n=>(yN(this.node,n,"Start"),(r,{success:i})=>yN(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const X_=new WeakMap,Nw=new WeakMap,kJ=t=>{const e=X_.get(t.target);e&&e(t)},NJ=t=>{t.forEach(kJ)};function OJ({root:t,...e}){const n=t||document;Nw.has(n)||Nw.set(n,{});const r=Nw.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(NJ,{root:t,...e})),r[i]}function IJ(t,e,n){const r=OJ(e);return X_.set(t,n),r.observe(t),()=>{X_.delete(t),r.unobserve(t)}}const DJ={some:0,all:1};class MJ extends Ol{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:DJ[i]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:f,onViewportLeave:d}=this.node.getProps(),h=u?f:d;h&&h(l)};return IJ(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(RJ(e,n))&&this.startObserver()}unmount(){}}function RJ({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const $J={inView:{Feature:MJ},tap:{Feature:CJ},focus:{Feature:PJ},hover:{Feature:TJ}},LJ={layout:{ProjectionNode:xz,MeasureLayout:dz}},Q_={current:null},bz={current:!1};function zJ(){if(bz.current=!0,!!AA)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Q_.current=t.matches;t.addListener(e),e()}else Q_.current=!1}const VJ=[...UL,$r,_l],FJ=t=>VJ.find(BL(t)),vN=new WeakMap;function BJ(t,e,n){for(const r in e){const i=e[r],a=n[r];if(Ar(i))t.addValue(r,i);else if(Ar(a))t.addValue(r,Bd(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const s=t.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=t.getStaticValue(r);t.addValue(r,Bd(s!==void 0?s:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const xN=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class UJ{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ej,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Ss.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,sn.render(this.render,!1,!0))};const{latestValues:l,renderState:u,onUpdate:f}=s;this.onUpdate=f,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=Px(n),this.isVariantNode=Q$(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in h){const v=h[p];l[p]!==void 0&&Ar(v)&&v.set(l[p],!1)}}mount(e){this.current=e,vN.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),bz.current||zJ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Q_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){vN.delete(this.current),this.projection&&this.projection.unmount(),po(this.notifyUpdate),po(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=su.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&sn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Fd){const n=Fd[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Rn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<xN.length;r++){const i=xN[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=e[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=BJ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Bd(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(VL(i)||NL(i))?i=parseFloat(i):!FJ(i)&&_l.test(n)&&(i=$L(e,n)),this.setBaseTarget(e,Ar(i)?i.get():i)),Ar(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const s=IA(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);s&&(i=s[e])}if(r&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!Ar(a)?a:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new HA),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class wz extends UJ{constructor(){super(...arguments),this.KeyframeResolver=WL}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ar(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function WJ(t){return window.getComputedStyle(t)}class KJ extends wz{constructor(){super(...arguments),this.type="html",this.renderInstance=sL}readValueFromInstance(e,n){if(su.has(n)){const r=JA(n);return r&&r.default||0}else{const r=WJ(e),i=(rL(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return cz(e,n)}build(e,n,r){RA(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return VA(e,n,r)}}class qJ extends wz{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Rn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(su.has(n)){const r=JA(n);return r&&r.default||0}return n=oL.has(n)?n:kA(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return uL(e,n,r)}build(e,n,r){$A(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){lL(e,n,r,i)}mount(e){this.isSVGTag=zA(e.tagName),super.mount(e)}}const HJ=(t,e)=>OA(t)?new qJ(e):new KJ(e,{allowProjection:t!==O.Fragment}),GJ=wX({...yZ,...$J,...jJ,...LJ},HJ),Il=RY(GJ);function _z(t){const e=au(()=>Bd(t)),{isStatic:n}=O.useContext(EA);if(n){const[,r]=O.useState(t);O.useEffect(()=>e.on("change",r),[])}return e}function Sz(t,e){const n=_z(e()),r=()=>n.set(e());return r(),jA(()=>{const i=()=>sn.preRender(r,!1,!0),a=t.map(s=>s.on("change",i));return()=>{a.forEach(s=>s()),po(r)}}),n}const YJ=t=>t&&typeof t=="object"&&t.mix,XJ=t=>YJ(t)?t.mix:void 0;function QJ(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],i=t[1+n],a=t[2+n],s=t[3+n],o=QL(i,a,{mixer:XJ(a[0]),...s});return e?o(r):o}function ZJ(t){tp.current=[],t();const e=Sz(tp.current,t);return tp.current=void 0,e}function JJ(t,e,n,r){if(typeof t=="function")return ZJ(t);const i=typeof e=="function"?e:QJ(e,n,r);return Array.isArray(t)?bN(t,i):bN([t],([a])=>i(a))}function bN(t,e){const n=au(()=>[]);return Sz(t,()=>{n.length=0;const r=t.length;for(let i=0;i<r;i++)n[i]=t[i].get();return e(n)})}function eee(t){t.values.forEach(e=>e.stop())}function Z_(t,e){[...e].reverse().forEach(r=>{const i=t.getVariant(r);i&&GA(t,i),t.variantChildren&&t.variantChildren.forEach(a=>{Z_(a,e)})})}function tee(t,e){if(Array.isArray(e))return Z_(t,e);if(typeof e=="string")return Z_(t,[e]);GA(t,e)}function nee(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,r){const i=[];return t.forEach(a=>{i.push(ez(a,n,{transitionOverride:r}))}),Promise.all(i)},set(n){return t.forEach(r=>{tee(r,n)})},stop(){t.forEach(n=>{eee(n)})},mount(){return()=>{e.stop()}}};return e}function ree(){const t=au(nee);return jA(t.mount,[]),t}const Nf=ree;class iee{constructor(){this.componentControls=new Set}subscribe(e){return this.componentControls.add(e),()=>this.componentControls.delete(e)}start(e,n){this.componentControls.forEach(r=>{r.start(e.nativeEvent||e,n)})}}const aee=()=>new iee;function ij(){return au(aee)}const Ez=O.createContext(null);function see(t,e,n,r){if(!r)return t;const i=t.findIndex(f=>f.value===e);if(i===-1)return t;const a=r>0?1:-1,s=t[i+a];if(!s)return t;const o=t[i],l=s.layout,u=mn(l.min,l.max,.5);return a===1&&o.layout.max+n>u||a===-1&&o.layout.min+n<u?MX(t,i,i+a):t}function oee({children:t,as:e="ul",axis:n="y",onReorder:r,values:i,...a},s){const o=au(()=>Il[e]),l=[],u=O.useRef(!1),f={axis:n,registerItem:(d,h)=>{const p=l.findIndex(v=>d===v.value);p!==-1?l[p].layout=h[n]:l.push({value:d,layout:h[n]}),l.sort(cee)},updateOrder:(d,h,p)=>{if(u.current)return;const v=see(l,d,h,p);l!==v&&(u.current=!0,r(v.map(lee).filter(y=>i.indexOf(y)!==-1)))}};return O.useEffect(()=>{u.current=!1}),c.jsx(o,{...a,ref:s,ignoreStrict:!0,children:c.jsx(Ez.Provider,{value:f,children:t})})}const aj=O.forwardRef(oee);function lee(t){return t.value}function cee(t,e){return t.layout.min-e.layout.min}function wN(t,e=0){return Ar(t)?t:_z(e)}function uee({children:t,style:e={},value:n,as:r="li",onDrag:i,layout:a=!0,...s},o){const l=au(()=>Il[r]),u=O.useContext(Ez),f={x:wN(e.x),y:wN(e.y)},d=JJ([f.x,f.y],([y,b])=>y||b?1:"unset"),{axis:h,registerItem:p,updateOrder:v}=u;return c.jsx(l,{drag:h,...s,dragSnapToOrigin:!0,style:{...e,x:f.x,y:f.y,zIndex:d},layout:a,onDrag:(y,b)=>{const{velocity:x}=b;x[h]&&v(n,f[h].get(),x[h]),i&&i(y,b)},onLayoutMeasure:y=>p(n,y),ref:o,ignoreStrict:!0,children:t})}const sj=O.forwardRef(uee),J_=({isOpen:t,onClose:e,title:n,actions:r})=>t?c.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex justify-center items-end sm:items-center z-50 animate-fade-in",onClick:e,children:c.jsxs("div",{className:"w-full max-w-sm bg-ios-modal-bg rounded-t-2xl sm:rounded-2xl shadow-2xl text-white animate-slide-up",onClick:i=>i.stopPropagation(),children:[c.jsx("div",{className:"p-2",children:c.jsx("header",{className:"text-center p-2 rounded-lg bg-zinc-800/50",children:c.jsx("h2",{className:"text-sm font-semibold text-brand-light-gray",children:n})})}),c.jsx("div",{className:"p-2",children:c.jsx("div",{className:"bg-zinc-800/50 rounded-lg",children:r.map((i,a)=>c.jsxs("button",{onClick:()=>{i.onClick(),e()},className:`w-full flex items-center p-3 text-left transition-colors hover:bg-white/10 ${i.color||"text-brand-blue"} ${a>0?"border-t border-zinc-700/80":""}`,children:[c.jsx(i.icon,{size:22,className:"mr-4"}),c.jsx("span",{className:"text-lg font-medium text-white",children:i.label})]},a))})}),c.jsx("div",{className:"p-2 mt-1",children:c.jsx("button",{onClick:e,className:"w-full bg-zinc-700 p-3 text-lg font-bold text-white rounded-xl hover:bg-zinc-600 transition-colors",children:"Cancelar"})})]})}):null,dee=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i})=>t?c.jsxs(yt,{isOpen:t,onClose:e,title:r,children:[" ",c.jsxs("div",{className:"space-y-6",children:[" ",c.jsx("p",{className:"text-zinc-300",children:i})," ",c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{onClick:e,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-6 rounded-lg",children:"Cancelar"}),c.jsx("button",{onClick:()=>{n(),e()},className:"bg-brand-red hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg",children:"Confirmar"})]})," "]})," "]}):null,fee=({lotName:t,count:e,dragControls:n})=>c.jsxs("div",{className:"w-full p-4 flex items-center",children:[c.jsx("div",{className:"pl-2 pr-4 cursor-grab touch-none self-stretch flex items-center",onPointerDown:r=>n.start(r),children:c.jsx(yA,{className:"text-zinc-500"})}),c.jsxs("div",{className:"flex-grow",children:[c.jsx("p",{className:"font-bold text-lg text-white",children:t}),c.jsxs("p",{className:"text-sm text-zinc-400",children:[c.jsx("span",{className:"font-semibold text-brand-orange",children:e})," ",e===1?"animal":"animales"]})]})]}),hee=({lot:t,onEdit:e,onDelete:n,onClick:r,dragControls:i})=>{const a=Nf(),s=O.useRef(!1),o=t.count>0,l=t.name!=="Sin Asignar",u=(o?80:0)+(l?80:0),f=(d,h)=>{const p=h.offset.x,v=h.velocity.x;if(Math.abs(p)<2){r();return}p<-u/2||v<-500?a.start({x:-u}):a.start({x:0}),setTimeout(()=>{s.current=!1},100)};return c.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-brand-glass border border-brand-border",children:[c.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:[o&&c.jsxs("button",{onClick:e,onPointerDown:d=>d.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-orange text-white",children:[c.jsx(Cl,{size:22}),c.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Editar"})]}),l&&c.jsxs("button",{onClick:n,onPointerDown:d=>d.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-red text-white",children:[c.jsx(wo,{size:22}),c.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Borrar"})]})]}),c.jsx(Il.div,{drag:"x",dragConstraints:{left:-u,right:0},dragElastic:.1,onDragStart:()=>{s.current=!0},onDragEnd:f,onTap:()=>{s.current||r()},animate:a,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg",children:c.jsx(fee,{lotName:t.name,count:t.count,dragControls:i})})]})},pee=({lot:t,navigateTo:e,onEdit:n,onDelete:r})=>{const i=ij();return c.jsxs(sj,{value:t,dragListener:!1,dragControls:i,children:[" ",c.jsx(hee,{lot:t,dragControls:i,onClick:()=>e({name:"lot-detail",lotName:t.name}),onEdit:()=>n(t),onDelete:()=>r(t)})," "]},t.id)};function mee({navigateTo:t}){const{animals:e,lots:n,deleteLot:r}=at(),[i,a]=O.useState(!1),[s,o]=O.useState(null),[l,u]=O.useState(null),f=O.useMemo(()=>{const y=new Map;return n.forEach(x=>y.set(x.name,0)),(e||[]).forEach(x=>{const _=x.location||"Sin Asignar";y.set(_,(y.get(_)||0)+1)}),Array.from(new Set([...n.map(x=>x.name),...e.map(x=>x.location||"Sin Asignar")])).map(x=>{const _=n.find(E=>E.name===x);return{id:(_==null?void 0:_.id)||x,name:x,count:y.get(x)||0}}).sort((x,_)=>x.name.localeCompare(_.name))},[e,n]),[d,h]=O.useState(f);O.useEffect(()=>{h(f)},[f]);const p=[{label:"Mover Animales",icon:F$,onClick:()=>t({name:"lot-detail",lotName:(s==null?void 0:s.name)||""})},{label:"Asignar Alimentacin",icon:Sx,onClick:()=>t({name:"feeding-plan",lotName:(s==null?void 0:s.name)||""})},{label:"Asignar Tratamiento",icon:W$,onClick:()=>t({name:"batch-treatment",lotName:(s==null?void 0:s.name)||""})},{label:"Convertir en Lote de Monta",icon:Gm,onClick:()=>alert(`FUNCIONALIDAD FUTURA: Convertir ${s==null?void 0:s.name} en Lote de Monta`)}],v=()=>{l&&r(l.id)};return c.jsxs(c.Fragment,{children:[c.jsx(aj,{as:"div",axis:"y",values:d,onReorder:h,className:"space-y-3",children:d.map(y=>c.jsx(pee,{lot:y,navigateTo:t,onEdit:b=>{o(b),a(!0)},onDelete:b=>u(b)},y.id))}),c.jsx(J_,{isOpen:i,onClose:()=>a(!1),title:`Acciones para "${s==null?void 0:s.name}"`,actions:p}),c.jsx(dee,{isOpen:!!l,onClose:()=>u(null),onConfirm:v,title:"Eliminar Lote",message:`Ests seguro de que quieres eliminar el lote "${l==null?void 0:l.name}"? Esta accin no se puede deshacer.`})]})}const gee=({onSave:t,onCancel:e,existingSeason:n})=>{const[r,i]=O.useState(""),[a,s]=O.useState(""),[o,l]=O.useState("45"),[u,f]=O.useState(!1),[d,h]=O.useState(null),[p,v]=O.useState(!1);O.useEffect(()=>{if(n){i(n.name),s(n.startDate);const b=new Date(n.startDate),x=new Date(n.endDate),_=Math.abs(x.getTime()-b.getTime()),E=Math.ceil(_/(1e3*60*60*24));l(String(E)),f(n.requiresLightTreatment)}else s(new Date().toISOString().split("T")[0])},[n]);const y=async b=>{if(b.preventDefault(),h(null),!r.trim()||!a||!o){h("Todos los campos son obligatorios.");return}v(!0);const x=new Date(a),_=new Date(x);_.setDate(x.getDate()+parseInt(o,10));const E={name:r,startDate:a,endDate:_.toISOString().split("T")[0],requiresLightTreatment:u};try{await t(E)}catch(P){h("No se pudo guardar la temporada de monta."),console.error(P),v(!1)}};return c.jsxs("form",{onSubmit:y,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Nombre de la Temporada"}),c.jsx("input",{id:"name",type:"text",value:r,onChange:b=>i(b.target.value),placeholder:"Ej: Monta de Otoo 2025",className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Inicio"}),c.jsx("input",{id:"startDate",type:"date",value:a,onChange:b=>s(b.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"duration",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Duracin (das)"}),c.jsx("input",{id:"duration",type:"number",value:o,onChange:b=>l(b.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]})]}),c.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-zinc-700 flex items-center justify-between",children:[c.jsx("label",{htmlFor:"lightTreatment",className:"text-sm font-medium text-zinc-300",children:"Requiere Tratamiento de Luz?"}),c.jsx("input",{id:"lightTreatment",type:"checkbox",checked:u,onChange:b=>f(b.target.checked),className:"form-checkbox h-5 w-5 bg-zinc-700 border-zinc-600 rounded text-brand-orange focus:ring-brand-orange focus:ring-offset-0"})]}),d&&c.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[c.jsx(yn,{size:18}),c.jsx("span",{children:d})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:p,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:p?"Guardando...":"Guardar Temporada"})]})]})},yee=({season:t,dragControls:e})=>c.jsxs("div",{className:"w-full p-4 flex items-center",children:[c.jsx("div",{className:"pl-2 pr-4 cursor-grab touch-none self-stretch flex items-center",onPointerDown:n=>e.start(n),children:c.jsx(yA,{className:"text-zinc-500"})}),c.jsxs("div",{className:"flex-grow",children:[c.jsxs("p",{className:"font-bold text-lg text-white flex items-center gap-2",children:[t.name,t.requiresLightTreatment&&c.jsx("span",{title:"Requiere Tratamiento de Luz",children:c.jsx(wY,{size:16,className:"text-yellow-400"})})]}),c.jsxs("p",{className:"text-sm text-zinc-400",children:[new Date(t.startDate+"T00:00:00").toLocaleDateString()," - ",new Date(t.endDate+"T00:00:00").toLocaleDateString()]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${t.status==="Activo"?"bg-green-500/80 text-white":"bg-zinc-600 text-zinc-300"}`,children:t.status}),c.jsx(Ai,{className:"text-zinc-600"})]})]}),vee=({season:t,onEdit:e,onClick:n,dragControls:r})=>{const i=Nf(),a=O.useRef(!1),s=(o,l)=>{const u=l.offset.x,f=l.velocity.x;if(Math.abs(u)<2){n();return}u<-80/2||f<-500?i.start({x:-80}):i.start({x:0}),setTimeout(()=>{a.current=!1},100)};return c.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-brand-glass border border-brand-border",children:[c.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:c.jsxs("button",{onClick:e,onPointerDown:o=>o.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[c.jsx(Cl,{size:22}),c.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Editar"})]})}),c.jsx(Il.div,{drag:"x",dragConstraints:{left:-80,right:0},dragElastic:.1,onDragStart:()=>{a.current=!0},onDragEnd:s,onTap:()=>{a.current||n()},animate:i,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg",children:c.jsx(yee,{season:t,dragControls:r})})]})},xee=({season:t,navigateTo:e,onEdit:n})=>{const r=ij();return c.jsx(sj,{value:t,dragListener:!1,dragControls:r,children:c.jsx(vee,{season:t,dragControls:r,onClick:()=>e({name:"breeding-season-detail",seasonId:t.id}),onEdit:()=>n(t)})},t.id)};function bee({navigateTo:t}){const{breedingSeasons:e,addBreedingSeason:n,updateBreedingSeason:r}=at(),[i,a]=O.useState(!1),[s,o]=O.useState(void 0),l=O.useMemo(()=>[...e].sort((p,v)=>p.status==="Activo"&&v.status!=="Activo"?-1:p.status!=="Activo"&&v.status==="Activo"?1:new Date(v.startDate).getTime()-new Date(p.startDate).getTime()),[e]),[u,f]=O.useState(l);O.useEffect(()=>{f(l)},[l]);const d=p=>{o(p),a(!0)},h=async p=>{s?await r(s.id,{...p}):await n({...p,status:"Activo"}),a(!1),o(void 0)};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("button",{onClick:()=>d(),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-xl transition-colors text-lg",children:[c.jsx(ni,{size:20})," Crear Nueva Temporada de Monta"]}),c.jsx("div",{className:"space-y-3 pt-2",children:u.length>0?c.jsx(aj,{as:"div",axis:"y",values:u,onReorder:f,className:"space-y-3",children:u.map(p=>c.jsx(xee,{season:p,navigateTo:t,onEdit:d},p.id))}):c.jsxs("div",{className:"text-center py-6 bg-brand-glass rounded-2xl",children:[c.jsx(Gm,{size:32,className:"mx-auto text-zinc-600 mb-2"}),c.jsx("p",{className:"text-zinc-500",children:"No hay temporadas de monta creadas."})]})})]}),c.jsx(yt,{isOpen:i,onClose:()=>{a(!1),o(void 0)},title:s?"Editar Temporada de Monta":"Crear Temporada de Monta",children:c.jsx(gee,{onSave:h,onCancel:()=>{a(!1),o(void 0)},existingSeason:s})})]})}function _N({navigateTo:t}){const[e,n]=O.useState("physical"),[r,i]=O.useState(!1);return c.jsxs("div",{className:"w-full max-w-lg mx-auto space-y-4 pb-24",children:[c.jsxs("header",{className:"text-center pt-8 pb-4 px-0",children:[c.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white",children:"Lotes"}),c.jsx("p",{className:"text-xl text-zinc-400",children:"Gestin de Grupos"})]}),c.jsx("div",{className:"px-4",children:c.jsxs("div",{className:"relative bg-brand-glass rounded-xl p-1 border border-brand-border flex items-center",children:[c.jsxs("button",{onClick:()=>n("physical"),className:`w-1/2 py-2 rounded-lg transition-colors flex items-center justify-center gap-2 ${e==="physical"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:[c.jsx(iu,{size:16})," ",c.jsx("span",{className:"text-sm font-semibold",children:"Lotes Fsicos"}),c.jsx("span",{onClick:a=>{a.stopPropagation(),i(!0)},className:"ml-2 p-1 rounded-full hover:bg-brand-orange/50",children:c.jsx(ni,{size:18})})]}),c.jsxs("button",{onClick:()=>n("breeding"),className:`w-1/2 py-2 text-sm font-semibold rounded-lg transition-colors flex items-center justify-center gap-2 ${e==="breeding"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:[c.jsx(Gm,{size:16})," Lotes de Monta"]})]})}),c.jsx("div",{className:"pt-0",children:c.jsxs("div",{className:"px-0",children:[e==="physical"&&c.jsx(mee,{navigateTo:t}),e==="breeding"&&c.jsx(bee,{navigateTo:t})]})}),c.jsx(K$,{isOpen:r,onClose:()=>i(!1)})]})}const wee=()=>({isRelated:O.useCallback((e,n,r)=>{if(!e||!n)return!1;const i=r.find(a=>a.id===e);if(!i)return!1;if(i.fatherId===n)return!0;if(i.motherId){const a=r.find(s=>s.id===i.motherId);if(a&&a.fatherId===n)return!0}return!1},[])}),eo=t=>{if(!t||t==="N/A")return-1;const e=new Date(t+"T00:00:00Z"),n=new Date,r=new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()));if(isNaN(e.getTime()))return-1;const i=r.getTime()-e.getTime(),a=Math.floor(i/(1e3*60*60*24));return Math.max(0,a)},Ya=t=>{const e=eo(t);if(e<0)return"N/A";if(e<=60)return`${e} da${e!==1?"s":""}`;const n=30.4375,r=Math.floor(e/n);if(r<12){const s=Math.round(e%n);return`${r} mes${r!==1?"es":""}${s>0?` y ${s} da${s!==1?"s":""}`:""}`}const i=Math.floor(r/12),a=Math.round(r%12);return`${i} ao${i!==1?"s":""}${a>0?` y ${a} mes${a!==1?"es":""}`:""}`},Of=(t,e)=>{const n=eo(t.birthDate);return n<0?"Indefinido":t.sex==="Hembra"?t.weaningDate||n>60?e.some(i=>i.goatId===t.id)?"Cabra":"Cabritona":"Cabrita":n>=365?"Macho Cabro":t.weaningDate||n>60?"Macho de Levante":"Cabrito"},Jm=(t,e)=>{const n=new Date(t+"T00:00:00Z"),r=new Date(e+"T00:00:00Z");if(isNaN(n.getTime())||isNaN(r.getTime()))return 0;const i=r.getTime()-n.getTime(),a=Math.floor(i/(1e3*60*60*24));return Math.max(0,a)},_ee=(t,e)=>{const r=1+(e-50)/(e+50),i=t*Math.max(.5,r);return parseFloat(i.toFixed(2))},oj=(t,e)=>{if(e.length===0)return{overall:null,recent:null};const n=[...e].sort((s,o)=>new Date(s.date).getTime()-new Date(o.date).getTime()),r=n[n.length-1];let i=null;if(t&&t>0){const s=eo(r.date)-eo(new Date().toISOString().split("T")[0])+eo(new Date(r.date).toISOString().split("T")[0]);s>0&&(i=(r.kg-t)/s)}let a=null;if(n.length>=2){const s=r,o=n[n.length-2],l=(new Date(s.date).getTime()-new Date(o.date).getTime())/(1e3*60*60*24);l>0&&(a=(s.kg-o.kg)/l)}return{overall:i,recent:a}},Az=(t,e,n)=>{const r=t.map(f=>({age:(new Date(f.date).getTime()-new Date(e).getTime())/864e5,kg:f.kg})).sort((f,d)=>f.age-d.age);if(r.length<1)return null;const i=r.filter(f=>f.age<=n).pop(),a=r.find(f=>f.age>=n);if(i&&i.age===n)return i.kg;if(a&&a.age===n)return a.kg;if(!i||!a)return null;if(i.age===a.age)return i.kg;const s=a.age-i.age;if(s===0)return i.kg;const o=a.kg-i.kg,l=n-i.age,u=i.kg+l/s*o;return parseFloat(u.toFixed(2))},See=(t,e,n)=>{if(e===0)return 100;const r=t/e*100,i=1+(180-Math.min(n,180))/180*.1;return Math.round(r*i)},Eee=t=>{if(!t.weaningWeight||!t.weaningDate||!t.birthWeight||!t.birthDate)return null;const e=(new Date(t.weaningDate).getTime()-new Date(t.birthDate).getTime())/(1e3*60*60*24);if(e<=0)return null;const n=(t.weaningWeight-t.birthWeight)/e,r=t.birthWeight+n*60;return parseFloat(r.toFixed(2))},Aee=(t,e)=>{const n=e.filter(r=>r.animalId===t.id);return Az(n,t.birthDate,210)};var jz={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},SN=F.createContext&&F.createContext(jz),jee=["attr","size","title"];function Tee(t,e){if(t==null)return{};var n=Pee(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Pee(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Rv(){return Rv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rv.apply(this,arguments)}function EN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $v(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EN(Object(n),!0).forEach(function(r){Cee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cee(t,e,n){return e=kee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kee(t){var e=Nee(t,"string");return typeof e=="symbol"?e:e+""}function Nee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tz(t){return t&&t.map((e,n)=>F.createElement(e.tag,$v({key:n},e.attr),Tz(e.child)))}function Dl(t){return e=>F.createElement(Oee,Rv({attr:$v({},t.attr)},e),Tz(t.child))}function Oee(t){var e=n=>{var{attr:r,size:i,title:a}=t,s=Tee(t,jee),o=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),F.createElement("svg",Rv({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:l,style:$v($v({color:t.color||n.color},n.style),t.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),a&&F.createElement("title",null,a),t.children)};return SN!==void 0?F.createElement(SN.Consumer,null,n=>e(n)):e(jz)}function Iee(t){return Dl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 23.38L89.844 89.845l-64.9 162.254 14.85 5.943c20.312-50.766 40.62-101.535 60.93-152.304l1.432-3.58L256 40.616l153.844 61.54 1.43 3.58 60.93 152.305 14.853-5.942-64.9-162.254C366.77 67.69 311.386 45.534 256 23.38zm0 36.624l-139.996 55.998L72.8 224h.2v263h78V329h-39v-18h297v176h30V224h.2c-14.402-36-28.802-72-43.204-107.998L256 60.004zM151 135h210v114H151V135zm23.563 18L199 201.873V153h-24.438zM313 153v48.873L337.438 153H313zm-144 29.127V231h24.438L169 182.127zm174 0L318.562 231H343v-48.873zm-98.73 18.69c-1.207-.02-2.31.02-3.288.128-2.823.31-10.76 3.708-16.86 7.3-2.796 1.645-5.23 3.22-7.122 4.484V231h78v-16.97c-4.193-1.675-10.334-4.02-17.578-6.368-11.206-3.63-24.71-6.71-33.152-6.846zM160 263h192v18H160v-18zm15.16 66L208 389.205 240.84 329h-65.68zm144 0L352 389.205 384.84 329h-65.68zM169 355.295v105.41L197.748 408 169 355.295zm78 0L218.252 408 247 460.705v-105.41zm66 0v105.41L341.748 408 313 355.295zm78 0L362.252 408 391 460.705v-105.41zm-183 71.5L175.16 487h65.68L208 426.795zm144 0L319.16 487h65.68L352 426.795z"},child:[]}]})(t)}function Dee(t){return Dl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M23 23v466h466v-18H41v-82.184l85.854-57.234 70.023 70.022 65.133-260.536L387.28 203.7 455.07 95.73l19.317 11.858 6.102-71.1-60.644 37.616 19.884 12.207-59.01 93.99-130.732-65.366-62.865 251.462-57.98-57.978L41 367.184V23H23z"},child:[]}]})(t)}function Mee(t){return Dl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M44.62 106a26 26 0 0 0-25.69 29.3c16 124 16 117.4 0 241.4A26 26 0 0 0 54.72 404l138.68-57.7c-1.2 9.5-2.4 18.9-3.9 30.4-2.5 19.8 17.3 35 35.8 27.3l252-124c9.7-4 16-13.5 16-24s-6.3-20-16-24l-252-124c-3.2-1.3-6.6-2-10.1-2-15.6.1-27.7 13.8-25.7 29.3 1.5 11.5 2.7 20.9 3.9 30.4L54.72 108a26 26 0 0 0-10.1-2z"},child:[]}]})(t)}function lj(t){return Dl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M273 459l7.79-20 6.21 20 5.79-23.33-4.25-48c-7.76 7.94-17.54 17.85-29.74 30.27zm38.5-380.86a115.06 115.06 0 0 0-21.13-19.6c-17.315-11.88-35.418-18.913-55.08-22.14-18.751-3.067-37.99-2.743-56.33.12A203.86 203.86 0 0 0 133 49.42a184.2 184.2 0 0 0-29.62 15.36c-12.304 8.597-10.431 6.828.95 1.82a179.6 179.6 0 0 1 30.9-10c50.427-4.832 98.41-7.579 134.17 27.17a80 80 0 0 1 12.28 16c4.714 8.06 7.805 16.877 9.66 25.59l45.69 2.84c-5.032-17.752-15.256-37.574-25.53-50.06zm50.05 26.63c-8.531-13.217-18.495-25.428-29.66-34.88a78.24 78.24 0 0 0-15.79-10.38c2.67 2.68 5.22 5.45 7.61 8.32a138.13 138.13 0 0 1 9.13 12.11l.1.14.09.14c9.772 15.14 17.164 33.862 20.78 49.15l22.19 1.3a253.49 253.49 0 0 0-14.43-25.91zm29.89 43l70 179.4-11.82 28.37-65.77-37.94-8 13.86 67.56 39-4.327 5.754L394.12 372l-65.33-31.47a42.41 42.41 0 0 0-9.29-1.43c-5.71 0-9.52 2.06-12.71 6.62-2.53 3.61-78.5 80.52-147.64 150.28H16V243.73l92.85 3.85 96.61-33.26 10.13-11a214.71 214.71 0 0 1 38 24.27 18.57 18.57 0 0 0 11.61 3.93c13.792-1.574 22.025-9.12 32.83-17.83-3.267-21.244-6.724-43.71-9.56-62.1-6.463-2.155-12.926-4.308-19.39-6.46l4.39-4.78zm-37.25 65.02c-4.024-14.705-20.114-19.427-30.58-18.14-3.073.432-6.167 1.427-8.77 2.68.868 3.09 2.17 7.87 3.79 10.35 6.527 9.211 17.348 13.898 27.64 12.51 3.967-.672 8.94-3.676 7.92-7.4zm61.63 105.47l19 20 11.6-11-19-20zM475 172.99s-40.54-27.8-57-1.2l11.25 28.83zM294 382.05l13.4 22.28-.4-35.64c-3.29 3.45-7.53 7.82-12.95 13.36zm-30.6-167c5.858 1.872 17.61-6.048 17.33-8.01l-6.67-43.33-28-9.31c-17.65-2.861-58.224-4.989-67.27 9.28 39.596 39.732 39.526 16.87 84.61 51.37zm127.08 172.89c-15.313-7.704-30.838-14.996-46.28-22.44 5.153 29.387 10.895 58.672 15.75 88.11l25.26 37.33-2.6-34L400 469.61v-28.67l10.19-41.95 6.67-11.05z"},child:[]}]})(t)}function Ree(t){return Dl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M302.958 20.019l-93.916 46.564v35.404c31.305-15.522 62.61-31.047 93.916-46.568zm6.53 52.252l-95.4 47.3 63.036 78.137 95.397-47.303zm-111.915 55.492l-33.732 16.724h47.224zm-22.119 34.722l71.615 26.633-21.484-26.633zm-41.021 3.948v276.752l131.22 48.796v-276.75zm243.134 1.56c-31.306 15.521-62.61 31.044-93.916 46.567v275.863l93.916-46.567zM176.501 272.466s-15.3 15.085-9.889 24.203c4.167 7.02 21.889 5.418 21.889 5.418l15.549 3.848s17.72 10.374 21.887 5.416c5.41-6.44-9.887-29.098-9.887-29.098s35.91 33.492 29.662 47.318c-3.143 6.955-24.719-2.117-24.719-2.117s5.495 7.21 4.944 10.549c-1.001 6.062-13.774 9.916-13.774 9.916s1.111 21.24-6 25.168c-5.147 2.843-14.628.497-19.775-4.895-7.111-7.448-6-28.136-6-28.136s-12.775-10.177-13.776-16.735c-.55-3.611 4.944-8.103 4.944-8.103s-21.575-1.607-24.717-10.117c-6.247-16.919 29.662-32.635 29.662-32.635z"},child:[]}]})(t)}function $ee(t){return Dl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M90.52 390.06h38.497v16.583H65.443V390.06l31.933-28.182c2.852-2.578 4.96-5.098 6.328-7.56 1.368-2.46 2.05-5.018 2.05-7.675 0-4.1-1.386-7.402-4.16-9.902-2.733-2.5-6.386-3.75-10.956-3.75-3.516 0-7.363.763-11.543 2.286-4.18 1.485-8.652 3.71-13.418 6.68v-19.22c5.078-1.678 10.098-2.948 15.06-3.807 4.96-.9 9.823-1.35 14.588-1.35 10.47 0 18.594 2.306 24.375 6.915 5.82 4.61 8.73 11.035 8.73 19.277 0 4.766-1.23 9.22-3.69 13.36-2.46 4.1-7.637 9.61-15.528 16.523l-18.69 16.406m349.377 32.915c5.897 1.524 10.37 4.18 13.417 7.97 3.086 3.75 4.63 8.534 4.63 14.355 0 8.672-3.322 15.273-9.962 19.804-6.64 4.493-16.328 6.74-29.063 6.74-4.492 0-9.004-.372-13.535-1.115-4.492-.704-8.945-1.778-13.36-3.223v-17.403c4.22 2.11 8.4 3.71 12.54 4.805 4.18 1.054 8.28 1.58 12.304 1.58 5.978 0 10.548-1.034 13.712-3.104 3.203-2.07 4.805-5.04 4.805-8.907 0-3.985-1.64-6.993-4.922-9.024-3.242-2.07-8.047-3.105-14.414-3.106h-9.022v-14.53h9.492c5.664 0 9.883-.88 12.656-2.638 2.773-1.796 4.16-4.51 4.16-8.144 0-3.36-1.347-5.957-4.043-7.793-2.695-1.836-6.504-2.754-11.426-2.754-3.632 0-7.304.41-11.015 1.232-3.71.82-7.403 2.03-11.074 3.632V384.83c4.453-1.25 8.867-2.186 13.242-2.812 4.375-.624 8.672-.937 12.89-.937 11.368 0 19.864 1.876 25.49 5.626 5.663 3.71 8.495 9.316 8.495 16.816 0 5.118-1.348 9.317-4.043 12.598-2.696 3.242-6.68 5.527-11.953 6.856M236.062 230.74h19.922v-56.544l-20.45 4.22v-15.352l20.333-4.22h21.445v71.895h19.922v15.585h-61.172V230.74M496 496V352H352V128H176v160H16v208"},child:[]}]})(t)}function Lee(t){return Dl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M24.844 25.563c1.333 77.685 25.778 141.568 63.283 187.955 4.367-4.937 8.77-9.796 13.13-14.553a9.5 9.5 0 0 1 7.348-3.178 9.5 9.5 0 0 1 6.66 16.016c-22.957 25.048-46.51 52.82-58.777 76.95-6.132 12.067-9.31 23.07-9.037 31.874.17 5.474 1.374 10.174 4.26 14.562l16.552-22.684a9.5 9.5 0 0 1 7.898-4.008 9.5 9.5 0 0 1 7.45 15.207l-16.635 22.797c2.973.316 6.316-.284 10.474-1.75 8.174-2.882 18.38-9.868 28.734-19.672 20.704-19.608 42.15-50.057 56.953-77.644a9.5 9.5 0 0 1 9.9-4.885c6.228 1.017 22.147 2.215 35.78.573 6.816-.82 13.107-2.395 17.232-4.432 4.124-2.035 5.597-3.84 6.12-5.934a9.5 9.5 0 1 1 18.434 4.603c-2.193 8.78-8.967 14.825-16.145 18.37-7.18 3.542-15.245 5.277-23.372 6.256-12.798 1.542-25.47 1.082-34.522.143-2.816 5.038-5.806 10.122-8.937 15.192 29.03 14.058 60.48 21.354 92.34 21.115 22.055-.164 43.82-4.29 64.64-11.937-6.014-8.637-11.297-17.378-15.596-25.96A9.5 9.5 0 1 1 326 252.03c13.688 27.32 40.692 59.164 67.537 79.982 13.423 10.41 26.846 18.047 37.842 21.363 5.988 1.806 10.902 2.378 14.983 1.854l-10.996-13.093a9.5 9.5 0 0 1 7.06-15.715 9.5 9.5 0 0 1 7.49 3.494l12.054 14.352c3.226-4.725 4.71-9.948 5.042-16.102.513-9.534-2.39-21.344-8.18-34.158-11.578-25.63-34.297-54.796-57.053-79.625a9.5 9.5 0 0 1 7.322-16.01 9.5 9.5 0 0 1 6.685 3.172c3.1 3.384 6.205 6.848 9.29 10.37 37.514-47.34 61.834-111.574 62.892-186.352H24.843zm138.664 270.68c-4.952 14.607-8.863 29.266-11.043 42.61-2.476 15.154-2.608 28.608-.29 37.745 2.32 9.137 5.71 13.32 12.514 15.22 10.31 2.88 17.56 1.32 24.884-3.572 7.325-4.893 14.436-13.87 20.696-25.87 6.813-13.064 12.555-29.486 17.517-47.09-22.16-3.106-43.775-9.54-64.28-19.044zm173.04 6.083c-9.938 3.936-20.108 7.144-30.456 9.57.512.913 1.02 1.844 1.54 2.733 7.736 13.262 16.197 23.722 23.802 29.292 7.604 5.57 12.882 6.638 19.34 3.77 7.937-3.52 12.458-8.014 15.236-14.087-10.454-9.556-20.457-20.185-29.46-31.28z"},child:[]}]})(t)}const Ma={PREGNANT:{key:"PREGNANT",Icon:k$,color:"text-pink-400",label:"Preada"},IN_SERVICE_CONFIRMED:{key:"IN_SERVICE_CONFIRMED",Icon:uY,color:"text-pink-500",label:"Servicio Visto"},IN_SERVICE:{key:"IN_SERVICE",Icon:M_,color:"text-red-400",label:"En Monta"},EMPTY:{key:"EMPTY",Icon:nY,color:"text-zinc-500",label:"Vaca"},SIRE_IN_SERVICE:{key:"SIRE_IN_SERVICE",Icon:jY,color:"text-blue-400",label:"Reproductor Activo"},MILKING:{key:"MILKING",Icon:Lee,color:"text-blue-300",label:"En Ordeo"},DRYING_OFF:{key:"DRYING_OFF",Icon:_A,color:"text-yellow-400",label:"Secando"},DRY:{key:"DRY",Icon:dA,color:"text-zinc-400",label:"Seca"}},zee=(t,e,n,r,i)=>{const a=[];if(!t)return[];if(t.sex==="Hembra"){const s=e.filter(o=>o.goatId===t.id&&o.status!=="finalizada").sort((o,l)=>new Date(l.parturitionDate).getTime()-new Date(o.parturitionDate).getTime())[0];s&&(s.status==="activa"?a.push("MILKING"):s.status==="en-secado"?a.push("DRYING_OFF"):s.status==="seca"&&a.push("DRY"))}if(t.reproductiveStatus==="Preada"?a.push("PREGNANT"):t.reproductiveStatus==="En Servicio"?n.some(o=>o.femaleId===t.id&&o.sireLotId===t.sireLotId)?a.push("IN_SERVICE_CONFIRMED"):a.push("IN_SERVICE"):(t.reproductiveStatus==="Vaca"||t.reproductiveStatus==="Post-Parto")&&a.push("EMPTY"),t.sex==="Macho"){const s=i.filter(u=>u.status==="Activo"),o=new Set(s.map(u=>u.id));r.some(u=>u.sireId===t.id&&o.has(u.seasonId))&&a.push("SIRE_IN_SERVICE")}return Array.from(new Set(a))},Vee=["Cabrita","Cabritona","Cabra","Cabrito","Macho de Levante","Macho Cabro"],AN=({title:t,filters:e,activeFilter:n,onFilterChange:r})=>c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-semibold text-zinc-400 mb-2",children:t}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{type:"button",onClick:()=>r("ALL"),className:`px-2 py-1 text-xs font-semibold rounded-full transition-colors ${n==="ALL"?"bg-zinc-600 text-white":"bg-zinc-800/80 text-zinc-300"}`,children:"Todos"}),e.map(i=>{const{Icon:a,label:s}=Ma[i];return c.jsxs("button",{type:"button",onClick:()=>r(i),className:`flex items-center gap-1.5 px-2 py-1 text-xs font-semibold rounded-full transition-colors ${n===i?"bg-brand-blue text-white":"bg-zinc-800/80 text-zinc-300"}`,children:[c.jsx(a,{size:14}),s]},i)})]})]}),Nx=({isOpen:t,onClose:e,onSelect:n,animals:r,parturitions:i,serviceRecords:a,breedingSeasons:s,sireLots:o,title:l,sireIdForInbreedingCheck:u})=>{const[f,d]=O.useState(""),[h,p]=O.useState(new Set),{isRelated:v}=wee(),[y,b]=O.useState(!1),[x,_]=O.useState("Todos"),[E,P]=O.useState(!1),[A,j]=O.useState("ALL"),[S,T]=O.useState("ALL"),N=O.useMemo(()=>r.map(H=>({...H,statuses:zee(H,i,a,o,s),formattedAge:Ya(H.birthDate),zootecnicCategory:Of(H,i)})),[r,i,a,o,s]),D=O.useMemo(()=>{let H=N;return E?H.sort((ee,U)=>(U.createdAt||0)-(ee.createdAt||0)).slice(0,25):(x!=="Todos"&&(H=H.filter(ee=>ee.zootecnicCategory===x)),A!=="ALL"&&(H=H.filter(ee=>ee.statuses.includes(A))),S!=="ALL"&&(H=H.filter(ee=>ee.statuses.includes(S))),f&&(H=H.filter(ee=>ee.id.toLowerCase().includes(f.toLowerCase()))),H)},[N,x,E,A,S,f]),M=()=>{D.every(H=>h.has(H.id))?p(new Set):p(new Set(D.map(H=>H.id)))},$=()=>{n(Array.from(h)),e()},z=()=>{_("Todos"),P(!1),j("ALL"),T("ALL"),d("")};return c.jsx(yt,{isOpen:t,onClose:e,title:l,size:"fullscreen",children:c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsxs("div",{className:"flex-shrink-0 space-y-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx(zd,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500"}),c.jsx("input",{type:"search",placeholder:"Buscar por ID...",value:f,onChange:H=>d(H.target.value),className:"w-full bg-zinc-800 border border-zinc-700 rounded-xl pl-10 pr-4 py-2.5 text-white focus:ring-2 focus:ring-brand-orange"})]}),c.jsxs("button",{onClick:()=>b(!y),className:"w-full flex justify-between items-center text-zinc-400 hover:text-white",children:[c.jsx("span",{className:"text-sm font-semibold",children:"Filtros Avanzados"}),c.jsx(D_,{className:`transition-transform ${y?"rotate-180":""}`})]}),y&&c.jsxs("div",{className:"space-y-4 p-4 bg-black/20 rounded-2xl animate-fade-in",children:[c.jsx(AN,{title:"Filtros Productivos",filters:["MILKING","DRYING_OFF","DRY"],activeFilter:A,onFilterChange:j}),c.jsx(AN,{title:"Filtros Reproductivos",filters:["PREGNANT","IN_SERVICE_CONFIRMED","IN_SERVICE","EMPTY","SIRE_IN_SERVICE"],activeFilter:S,onFilterChange:T}),c.jsxs("div",{className:"flex gap-2 pt-2 border-t border-brand-border",children:[c.jsxs("select",{value:x,onChange:H=>_(H.target.value),className:"w-full bg-zinc-800 p-2 rounded-xl text-white border border-zinc-700 text-sm",children:[c.jsx("option",{value:"Todos",children:"Categora Zootcnica..."}),Vee.map(H=>c.jsx("option",{value:H,children:H},H))]}),c.jsxs("button",{onClick:()=>P(!E),className:`flex-shrink-0 flex items-center gap-2 p-2 rounded-xl border text-sm transition-colors ${E?"bg-brand-orange border-brand-orange text-white":"border-zinc-700 bg-zinc-800 text-zinc-300"}`,children:[c.jsx(M$,{size:16})," ltima Carga"]}),c.jsx("button",{onClick:z,className:"flex-shrink-0 p-2 rounded-xl border border-zinc-700 bg-zinc-800 text-zinc-300",children:c.jsx(gA,{size:16})})]})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 py-4 min-h-[10rem]",children:D.length>0?D.map(H=>{const ee=u?v(H.id,u,r):!1;return c.jsxs("div",{onClick:()=>p(U=>{const Z=new Set(U);return Z.has(H.id)?Z.delete(H.id):Z.add(H.id),Z}),className:`w-full text-left p-3 flex items-center gap-4 rounded-lg cursor-pointer transition-colors ${ee?"bg-yellow-900/50 border border-yellow-500/60 hover:bg-yellow-800/50":"bg-zinc-800/50 hover:bg-zinc-700"}`,children:[h.has(H.id)?c.jsx(bA,{className:"text-brand-orange flex-shrink-0"}):c.jsx(wA,{className:"text-zinc-500 flex-shrink-0"}),c.jsxs("div",{className:"flex-grow",children:[c.jsxs("p",{className:"font-bold text-white flex items-center gap-2",children:[H.id," ",ee&&c.jsx(yn,{className:"text-yellow-400",size:16})]}),c.jsxs("p",{className:"text-xs text-zinc-400",children:[H.sex," | ",H.formattedAge," | Lote: ",H.location||"Sin Asignar"]})]})]},H.id)}):c.jsx("div",{className:"flex-grow flex items-center justify-center",children:c.jsx("p",{className:"text-zinc-500 text-center",children:"No se encontraron animales."})})}),c.jsxs("div",{className:"flex-shrink-0 grid grid-cols-3 items-center pt-4 border-t border-brand-border gap-2",children:[c.jsx("button",{type:"button",onClick:M,disabled:D.length===0,className:"bg-zinc-700 hover:bg-zinc-600 text-white font-bold py-3 px-2 rounded-lg disabled:opacity-50 text-sm",children:D.every(H=>h.has(H.id))?"Deseleccionar":"Sel. Todos"}),c.jsx("button",{onClick:e,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-3 px-2 rounded-lg text-sm",children:"Cancelar"}),c.jsxs("button",{onClick:$,className:"bg-brand-green hover:bg-green-600 text-white font-bold py-3 px-2 rounded-lg disabled:opacity-50 text-sm",children:["Seleccionar (",h.size,")"]})]})]})})},Fee=({isOpen:t,onClose:e,animalsToTransfer:n,fromLot:r})=>{const{lots:i,updateAnimal:a}=at(),[s,o]=O.useState(""),l=O.useMemo(()=>i.filter(f=>f.name!==r),[i,r]),u=async()=>{if(!s||n.length===0)return;const f=n.map(d=>a(d,{location:s}));try{await Promise.all(f),e()}catch(d){console.error("Error al transferir animales:",d)}};return c.jsx(yt,{isOpen:t,onClose:e,title:`Transferir ${n.length} animales`,children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:["Transferir desde: ",c.jsx("span",{className:"font-semibold text-white",children:r})]}),c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1 mt-4",children:"Hacia el lote:"}),c.jsxs("select",{value:s,onChange:f=>o(f.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",children:[c.jsx("option",{value:"",children:"Seleccionar lote de destino..."}),l.map(f=>c.jsx("option",{value:f.name,children:f.name},f.id))]})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[c.jsx("button",{onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{onClick:u,disabled:!s,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:"Confirmar Transferencia"})]})]})})};function Cu(t,e,n){let r=n.initialDeps??[],i;function a(){var s,o,l,u;let f;n.key&&((s=n.debug)!=null&&s.call(n))&&(f=Date.now());const d=t();if(!(d.length!==r.length||d.some((v,y)=>r[y]!==v)))return i;r=d;let p;if(n.key&&((o=n.debug)!=null&&o.call(n))&&(p=Date.now()),i=e(...d),n.key&&((l=n.debug)!=null&&l.call(n))){const v=Math.round((Date.now()-f)*100)/100,y=Math.round((Date.now()-p)*100)/100,b=y/16,x=(_,E)=>{for(_=String(_);_.length<E;)_=" "+_;return _};console.info(`%c ${x(y,5)} /${x(v,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*b,120))}deg 100% 31%);`,n==null?void 0:n.key)}return(u=n==null?void 0:n.onChange)==null||u.call(n,i),i}return a.updateDeps=s=>{r=s},a}function jN(t,e){if(t===void 0)throw new Error("Unexpected undefined");return t}const Bee=(t,e)=>Math.abs(t-e)<1.01,Uee=(t,e,n)=>{let r;return function(...i){t.clearTimeout(r),r=t.setTimeout(()=>e.apply(this,i),n)}},TN=t=>{const{offsetWidth:e,offsetHeight:n}=t;return{width:e,height:n}},Wee=t=>t,Kee=t=>{const e=Math.max(t.startIndex-t.overscan,0),n=Math.min(t.endIndex+t.overscan,t.count-1),r=[];for(let i=e;i<=n;i++)r.push(i);return r},qee=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;const i=s=>{const{width:o,height:l}=s;e({width:Math.round(o),height:Math.round(l)})};if(i(TN(n)),!r.ResizeObserver)return()=>{};const a=new r.ResizeObserver(s=>{const o=()=>{const l=s[0];if(l!=null&&l.borderBoxSize){const u=l.borderBoxSize[0];if(u){i({width:u.inlineSize,height:u.blockSize});return}}i(TN(n))};t.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()});return a.observe(n,{box:"border-box"}),()=>{a.unobserve(n)}},PN={passive:!0},CN=typeof window>"u"?!0:"onscrollend"in window,Hee=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;let i=0;const a=t.options.useScrollendEvent&&CN?()=>{}:Uee(r,()=>{e(i,!1)},t.options.isScrollingResetDelay),s=f=>()=>{const{horizontal:d,isRtl:h}=t.options;i=d?n.scrollLeft*(h&&-1||1):n.scrollTop,a(),e(i,f)},o=s(!0),l=s(!1);l(),n.addEventListener("scroll",o,PN);const u=t.options.useScrollendEvent&&CN;return u&&n.addEventListener("scrollend",l,PN),()=>{n.removeEventListener("scroll",o),u&&n.removeEventListener("scrollend",l)}},Gee=(t,e,n)=>{if(e!=null&&e.borderBoxSize){const r=e.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return t[n.options.horizontal?"offsetWidth":"offsetHeight"]},Yee=(t,{adjustments:e=0,behavior:n},r)=>{var i,a;const s=t+e;(a=(i=r.scrollElement)==null?void 0:i.scrollTo)==null||a.call(i,{[r.options.horizontal?"left":"top"]:s,behavior:n})};class Xee{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(i=>{i.forEach(a=>{const s=()=>{this._measureElement(a.target,a)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(s):s()})}));return{disconnect:()=>{var i;(i=r())==null||i.disconnect(),n=null},observe:i=>{var a;return(a=r())==null?void 0:a.observe(i,{box:"border-box"})},unobserve:i=>{var a;return(a=r())==null?void 0:a.unobserve(i)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,i])=>{typeof i>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Wee,rangeExtractor:Kee,onChange:()=>{},measureElement:Gee,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,i;(i=(r=this.options).onChange)==null||i.call(r,this,n)},this.maybeNotify=Cu(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,a)=>{this.scrollAdjustments=0,this.scrollDirection=a?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=a,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const i=new Map,a=new Map;for(let s=r-1;s>=0;s--){const o=n[s];if(i.has(o.lane))continue;const l=a.get(o.lane);if(l==null||o.end>l.end?a.set(o.lane,o):o.end<l.end&&i.set(o.lane,!0),i.size===this.options.lanes)break}return a.size===this.options.lanes?Array.from(a.values()).sort((s,o)=>s.end===o.end?s.index-o.index:s.end-o.end)[0]:void 0},this.getMeasurementOptions=Cu(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,r,i,a,s)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:i,getItemKey:a,enabled:s}),{key:!1}),this.getMeasurements=Cu(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:i,getItemKey:a,enabled:s},o)=>{if(!s)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(f=>{this.itemSizeCache.set(f.key,f.size)}));const l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const u=this.measurementsCache.slice(0,l);for(let f=l;f<n;f++){const d=a(f),h=this.options.lanes===1?u[f-1]:this.getFurthestMeasurement(u,f),p=h?h.end+this.options.gap:r+i,v=o.get(d),y=typeof v=="number"?v:this.options.estimateSize(f),b=p+y,x=h?h.lane:f%this.options.lanes;u[f]={index:f,start:p,size:y,end:b,key:d,lane:x}}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Cu(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,i,a)=>this.range=n.length>0&&r>0?Qee({measurements:n,outerSize:r,scrollOffset:i,lanes:a}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Cu(()=>{let n=null,r=null;const i=this.calculateRange();return i&&(n=i.startIndex,r=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,i,a,s)=>a===null||s===null?[]:n({startIndex:a,endIndex:s,overscan:r,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,i=n.getAttribute(r);return i?parseInt(i,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const i=this.indexFromElement(n),a=this.measurementsCache[i];if(!a)return;const s=a.key,o=this.elementsCache.get(s);o!==n&&(o&&this.observer.unobserve(o),this.observer.observe(n),this.elementsCache.set(s,n)),n.isConnected&&this.resizeItem(i,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const i=this.measurementsCache[n];if(!i)return;const a=this.itemSizeCache.get(i.key)??i.size,s=r-a;s!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,s,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=s,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,i)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(i))});return}this._measureElement(n,void 0)},this.getVirtualItems=Cu(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const i=[];for(let a=0,s=n.length;a<s;a++){const o=n[a],l=r[o];i.push(l)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return jN(r[Pz(0,r.length-1,i=>jN(r[i]).start,n)])},this.getOffsetForAlignment=(n,r,i=0)=>{const a=this.getSize(),s=this.getScrollOffset();r==="auto"&&(r=n>=s+a?"end":"start"),r==="center"?n+=(i-a)/2:r==="end"&&(n-=a);const o=this.getTotalSize()+this.options.scrollMargin-a;return Math.max(Math.min(o,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const i=this.measurementsCache[n];if(!i)return;const a=this.getSize(),s=this.getScrollOffset();if(r==="auto")if(i.end>=s+a-this.options.scrollPaddingEnd)r="end";else if(i.start<=s+this.options.scrollPaddingStart)r="start";else return[s,r];const o=r==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,r,i.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:i})},this.scrollToIndex=(n,{align:r="auto",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let a=0;const s=10,o=u=>{if(!this.targetWindow)return;const f=this.getOffsetForIndex(n,u);if(!f){console.warn("Failed to get offset for index:",n);return}const[d,h]=f;this._scrollToOffset(d,{adjustments:void 0,behavior:i}),this.targetWindow.requestAnimationFrame(()=>{const p=this.getScrollOffset(),v=this.getOffsetForIndex(n,h);if(!v){console.warn("Failed to get offset for index:",n);return}Bee(v[0],p)||l(h)})},l=u=>{this.targetWindow&&(a++,a<s?this.targetWindow.requestAnimationFrame(()=>o(u)):console.warn(`Failed to scroll to index ${n} after ${s} attempts.`))};o(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let i;if(r.length===0)i=this.options.paddingStart;else if(this.options.lanes===1)i=((n=r[r.length-1])==null?void 0:n.end)??0;else{const a=Array(this.options.lanes).fill(null);let s=r.length-1;for(;s>=0&&a.some(o=>o===null);){const o=r[s];a[o.lane]===null&&(a[o.lane]=o.end),s--}i=Math.max(...a.filter(o=>o!==null))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:i})=>{this.options.scrollToFn(n,{behavior:i,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(e)}}const Pz=(t,e,n,r)=>{for(;t<=e;){const i=(t+e)/2|0,a=n(i);if(a<r)t=i+1;else if(a>r)e=i-1;else return i}return t>0?t-1:0};function Qee({measurements:t,outerSize:e,scrollOffset:n,lanes:r}){const i=t.length-1,a=l=>t[l].start;if(t.length<=r)return{startIndex:0,endIndex:i};let s=Pz(0,i,a,n),o=s;if(r===1)for(;o<i&&t[o].end<n+e;)o++;else if(r>1){const l=Array(r).fill(0);for(;o<i&&l.some(f=>f<n+e);){const f=t[o];l[f.lane]=f.end,o++}const u=Array(r).fill(n+e);for(;s>=0&&u.some(f=>f>=n);){const f=t[s];u[f.lane]=f.start,s--}s=Math.max(0,s-s%r),o=Math.min(i,o+(r-1-o%r))}return{startIndex:s,endIndex:o}}const kN=typeof document<"u"?O.useLayoutEffect:O.useEffect;function Zee(t){const e=O.useReducer(()=>({}),{})[1],n={...t,onChange:(i,a)=>{var s;a?p5.flushSync(e):e(),(s=t.onChange)==null||s.call(t,i,a)}},[r]=O.useState(()=>new Xee(n));return r.setOptions(n),kN(()=>r._didMount(),[]),kN(()=>r._willUpdate()),r}function cj(t){return Zee({observeElementRect:qee,observeElementOffset:Hee,scrollToFn:Yee,...t})}const Jee=({animal:t,onSelect:e,isEditing:n,isSelected:r})=>{const i=Ya(t.birthDate);return c.jsx("div",{onClick:()=>e(t.id),className:`w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border flex justify-between items-center transition-all ${n?"cursor-pointer border-transparent":"hover:border-brand-orange"}`,children:c.jsxs("div",{className:"flex items-center gap-4",children:[n&&(r?c.jsx(bA,{className:"text-brand-orange flex-shrink-0",size:24}):c.jsx(wA,{className:"text-zinc-500 flex-shrink-0",size:24})),c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),c.jsxs("p",{className:"text-sm text-zinc-400",children:[t.sex," | ",i," | Lote: ",t.location||"Sin Asignar"]})]})]})})};function ete({lotName:t,onBack:e,navigateTo:n}){const{animals:r,parturitions:i,serviceRecords:a,breedingSeasons:s,sireLots:o,updateAnimal:l}=at(),[u,f]=O.useState(!1),[d,h]=O.useState(!1),[p,v]=O.useState(new Set),[y,b]=O.useState(!1),x=O.useMemo(()=>r.filter(S=>(S.location||"Sin Asignar")===t).sort((S,T)=>S.id.localeCompare(T.id)),[r,t]),_=O.useRef(null),E=cj({count:x.length,getScrollElement:()=>_.current,estimateSize:()=>92,overscan:5}),P=S=>{v(T=>{const N=new Set(T);return N.has(S)?N.delete(S):N.add(S),N})},A=async()=>{const S=Array.from(p).map(T=>l(T,{location:""}));try{await Promise.all(S),h(!1),v(new Set)}catch(T){console.error("Error al quitar animales del lote:",T)}},j=async S=>{const T=S.map(N=>l(N,{location:t}));await Promise.all(T)};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-24 animate-fade-in",children:[c.jsxs("header",{className:"flex items-center justify-between pt-8 pb-4 px-4",children:[c.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(or,{size:24})}),c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:t}),c.jsxs("p",{className:"text-lg text-zinc-400",children:[x.length," ",x.length===1?"animal":"animales"]})]}),d?c.jsx("button",{onClick:()=>{h(!1),v(new Set)},className:"text-brand-orange font-semibold px-2 py-1",children:"Listo"}):c.jsx("button",{onClick:()=>h(!0),className:"p-2 -mr-2 text-zinc-400 hover:text-white",children:c.jsx(Cl,{size:20})})]}),!d&&c.jsx("div",{className:"px-4",children:c.jsxs("button",{onClick:()=>f(!0),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-4 px-4 rounded-xl transition-colors text-lg",children:[c.jsx(ni,{size:20})," Aadir Animales"]})}),c.jsx("div",{ref:_,className:"pt-4",style:{height:"calc(100vh - 250px)",overflowY:"auto"},children:x.length>0?c.jsx("div",{style:{height:`${E.getTotalSize()}px`,width:"100%",position:"relative"},children:E.getVirtualItems().map(S=>{const T=x[S.index];return c.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${S.size}px`,transform:`translateY(${S.start}px)`,padding:"0 1rem 0.5rem 1rem"},children:c.jsx(Jee,{animal:T,isEditing:d,isSelected:p.has(T.id),onSelect:N=>d?P(N):n({name:"rebano-profile",animalId:N})})},S.key)})}):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl mx-4",children:c.jsx("p",{className:"text-zinc-500",children:"Este lote est vaco."})})})]}),d&&p.size>0&&c.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-black/50 backdrop-blur-md p-4 border-t border-brand-border animate-slide-up z-20",children:c.jsxs("div",{className:"max-w-2xl mx-auto flex gap-4",children:[c.jsxs("button",{onClick:A,className:"flex-1 flex items-center justify-center gap-2 bg-brand-red text-white font-bold py-3 rounded-xl",children:[c.jsx(wo,{size:18})," Quitar del Lote"]}),c.jsxs("button",{onClick:()=>b(!0),className:"flex-1 flex items-center justify-center gap-2 bg-brand-blue text-white font-bold py-3 rounded-xl",children:[c.jsx(V$,{size:18})," Transferir"]})]})}),c.jsx(Nx,{isOpen:u,onClose:()=>f(!1),onSelect:j,animals:r,parturitions:i,serviceRecords:a,breedingSeasons:s,sireLots:o,title:`Aadir animales a: ${t}`}),c.jsx(Fee,{isOpen:y,onClose:()=>{b(!1),h(!1),v(new Set)},animalsToTransfer:Array.from(p),fromLot:t})]})}const tte=({activeFilter:t,setActiveFilter:e})=>c.jsxs("div",{className:"flex bg-zinc-800 rounded-xl p-1 w-full",children:[c.jsx("button",{onClick:()=>e("Activo"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t==="Activo"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"Activos"}),c.jsx("button",{onClick:()=>e("Referencia"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t==="Referencia"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"De Referencia"})]}),nte=({activeFilter:t,setFilter:e})=>{const n=[{key:"all",label:"Todos"},{key:"Venta",label:"Vendidos"},{key:"Muerte",label:"Muertos"},{key:"Descarte",label:"Descartados"}];return c.jsxs("div",{className:"p-3 bg-black/20 rounded-lg",children:[c.jsx("label",{className:"block text-xs font-medium text-zinc-400 mb-2",children:"Filtrar por estado:"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(r=>c.jsx("button",{onClick:()=>e(r.key),className:`px-3 py-1 text-xs font-semibold rounded-full transition-colors ${t===r.key?"bg-brand-blue text-white":"bg-zinc-700 text-zinc-300"}`,children:r.label},r.key))})]})},NN=({isOpen:t,onClose:e,onSelect:n,animals:r,title:i,filterSex:a})=>{const[s,o]=O.useState(""),[l,u]=O.useState("Activo"),[f,d]=O.useState("all"),h=y=>{u(y),d("all")},p=O.useMemo(()=>r.filter(y=>{if(a&&y.sex!==a)return!1;const b=y.isReference||!1;return l==="Referencia"?b?f!=="all"?y.status===f:!0:!1:!b}).filter(y=>s?y.id.toLowerCase().includes(s.toLowerCase()):!0),[r,s,l,f,a]),v=y=>{n(y),o("")};return c.jsx(yt,{isOpen:t,onClose:e,title:i,children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx(zd,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500"}),c.jsx("input",{type:"search",placeholder:"Buscar por ID...",value:s,onChange:y=>o(y.target.value),className:"w-full bg-zinc-800 border border-zinc-700 rounded-xl pl-10 pr-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-orange"})]}),c.jsx(tte,{activeFilter:l,setActiveFilter:h}),l==="Referencia"&&c.jsx("div",{className:"animate-fade-in",children:c.jsx(nte,{activeFilter:f,setFilter:d})}),c.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2 pr-2",children:p.length>0?p.map(y=>c.jsxs("button",{onClick:()=>v(y.id),className:"w-full text-left p-3 bg-zinc-800/50 hover:bg-zinc-700 rounded-lg transition-colors",children:[c.jsx("p",{className:"font-bold text-white",children:y.id}),c.jsxs("p",{className:"text-xs text-zinc-400",children:[y.sex," | ",Ya(y.birthDate)," | Lote: ",y.location||"Sin Asignar"]})]},y.id)):c.jsx("p",{className:"text-center text-zinc-500 py-8",children:"No se encontraron animales con estos filtros."})})]})})};function rte(t,e,n="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:t,timeZoneName:n}).format(e).split(/\s/g).slice(2).join(" ")}const Ow={},Lh={};function wc(t,e){try{const r=(Ow[t]||(Ow[t]=new Intl.DateTimeFormat("en-US",{timeZone:t,timeZoneName:"longOffset"}).format))(e).split("GMT")[1];return r in Lh?Lh[r]:ON(r,r.split(":"))}catch{if(t in Lh)return Lh[t];const n=t==null?void 0:t.match(ite);return n?ON(t,n.slice(1)):NaN}}const ite=/([+-]\d\d):?(\d\d)?/;function ON(t,e){const n=+(e[0]||0),r=+(e[1]||0),i=+(e[2]||0)/60;return Lh[t]=n*60+r>0?n*60+r+i:n*60-r-i}class hs extends Date{constructor(...e){super(),e.length>1&&typeof e[e.length-1]=="string"&&(this.timeZone=e.pop()),this.internal=new Date,isNaN(wc(this.timeZone,this))?this.setTime(NaN):e.length?typeof e[0]=="number"&&(e.length===1||e.length===2&&typeof e[1]!="number")?this.setTime(e[0]):typeof e[0]=="string"?this.setTime(+new Date(e[0])):e[0]instanceof Date?this.setTime(+e[0]):(this.setTime(+new Date(...e)),Cz(this),eS(this)):this.setTime(Date.now())}static tz(e,...n){return n.length?new hs(...n,e):new hs(Date.now(),e)}withTimeZone(e){return new hs(+this,e)}getTimezoneOffset(){const e=-wc(this.timeZone,this);return e>0?Math.floor(e):Math.ceil(e)}setTime(e){return Date.prototype.setTime.apply(this,arguments),eS(this),+this}[Symbol.for("constructDateFrom")](e){return new hs(+new Date(e),this.timeZone)}}const IN=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(t=>{if(!IN.test(t))return;const e=t.replace(IN,"$1UTC");hs.prototype[e]&&(t.startsWith("get")?hs.prototype[t]=function(){return this.internal[e]()}:(hs.prototype[t]=function(){return Date.prototype[e].apply(this.internal,arguments),ate(this),+this},hs.prototype[e]=function(){return Date.prototype[e].apply(this,arguments),eS(this),+this}))});function eS(t){t.internal.setTime(+t),t.internal.setUTCSeconds(t.internal.getUTCSeconds()-Math.round(-wc(t.timeZone,t)*60))}function ate(t){Date.prototype.setFullYear.call(t,t.internal.getUTCFullYear(),t.internal.getUTCMonth(),t.internal.getUTCDate()),Date.prototype.setHours.call(t,t.internal.getUTCHours(),t.internal.getUTCMinutes(),t.internal.getUTCSeconds(),t.internal.getUTCMilliseconds()),Cz(t)}function Cz(t){const e=wc(t.timeZone,t),n=e>0?Math.floor(e):Math.ceil(e),r=new Date(+t);r.setUTCHours(r.getUTCHours()-1);const i=-new Date(+t).getTimezoneOffset(),a=-new Date(+r).getTimezoneOffset(),s=i-a,o=Date.prototype.getHours.apply(t)!==t.internal.getUTCHours();s&&o&&t.internal.setUTCMinutes(t.internal.getUTCMinutes()+s);const l=i-n;l&&Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+l);const u=new Date(+t);u.setUTCSeconds(0);const f=i>0?u.getSeconds():(u.getSeconds()-60)%60,d=Math.round(-(wc(t.timeZone,t)*60))%60;(d||f)&&(t.internal.setUTCSeconds(t.internal.getUTCSeconds()+d),Date.prototype.setUTCSeconds.call(t,Date.prototype.getUTCSeconds.call(t)+d+f));const h=wc(t.timeZone,t),p=h>0?Math.floor(h):Math.ceil(h),y=-new Date(+t).getTimezoneOffset()-p,b=p!==n,x=y-l;if(b&&x){Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+x);const _=wc(t.timeZone,t),E=_>0?Math.floor(_):Math.ceil(_),P=p-E;P&&(t.internal.setUTCMinutes(t.internal.getUTCMinutes()+P),Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+P))}}class zr extends hs{static tz(e,...n){return n.length?new zr(...n,e):new zr(Date.now(),e)}toISOString(){const[e,n,r]=this.tzComponents(),i=`${e}${n}:${r}`;return this.internal.toISOString().slice(0,-1)+i}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[e,n,r,i]=this.internal.toUTCString().split(" ");return`${e==null?void 0:e.slice(0,-1)} ${r} ${n} ${i}`}toTimeString(){const e=this.internal.toUTCString().split(" ")[4],[n,r,i]=this.tzComponents();return`${e} GMT${n}${r}${i} (${rte(this.timeZone,this)})`}toLocaleString(e,n){return Date.prototype.toLocaleString.call(this,e,{...n,timeZone:(n==null?void 0:n.timeZone)||this.timeZone})}toLocaleDateString(e,n){return Date.prototype.toLocaleDateString.call(this,e,{...n,timeZone:(n==null?void 0:n.timeZone)||this.timeZone})}toLocaleTimeString(e,n){return Date.prototype.toLocaleTimeString.call(this,e,{...n,timeZone:(n==null?void 0:n.timeZone)||this.timeZone})}tzComponents(){const e=this.getTimezoneOffset(),n=e>0?"-":"+",r=String(Math.floor(Math.abs(e)/60)).padStart(2,"0"),i=String(Math.abs(e)%60).padStart(2,"0");return[n,r,i]}withTimeZone(e){return new zr(+this,e)}[Symbol.for("constructDateFrom")](e){return new zr(+new Date(e),this.timeZone)}}const kz=6048e5,ste=864e5,DN=Symbol.for("constructDateFrom");function sr(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&DN in t?t[DN](e):t instanceof Date?new t.constructor(e):new Date(e)}function Yt(t,e){return sr(e||t,t)}function Nz(t,e,n){const r=Yt(t,n==null?void 0:n.in);return isNaN(e)?sr(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function Oz(t,e,n){const r=Yt(t,n==null?void 0:n.in);if(isNaN(e))return sr(t,NaN);if(!e)return r;const i=r.getDate(),a=sr(t,r.getTime());a.setMonth(r.getMonth()+e+1,0);const s=a.getDate();return i>=s?a:(r.setFullYear(a.getFullYear(),a.getMonth(),i),r)}let ote={};function eg(){return ote}function Wd(t,e){var o,l,u,f;const n=eg(),r=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((f=(u=n.locale)==null?void 0:u.options)==null?void 0:f.weekStartsOn)??0,i=Yt(t,e==null?void 0:e.in),a=i.getDay(),s=(a<r?7:0)+a-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function Kp(t,e){return Wd(t,{...e,weekStartsOn:1})}function Iz(t,e){const n=Yt(t,e==null?void 0:e.in),r=n.getFullYear(),i=sr(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const a=Kp(i),s=sr(n,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=Kp(s);return n.getTime()>=a.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function MN(t){const e=Yt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function If(t,...e){const n=sr.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function qp(t,e){const n=Yt(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function Dz(t,e,n){const[r,i]=If(n==null?void 0:n.in,t,e),a=qp(r),s=qp(i),o=+a-MN(a),l=+s-MN(s);return Math.round((o-l)/ste)}function lte(t,e){const n=Iz(t,e),r=sr(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Kp(r)}function cte(t,e,n){return Nz(t,e*7,n)}function ute(t,e,n){return Oz(t,e*12,n)}function dte(t,e){let n,r=e==null?void 0:e.in;return t.forEach(i=>{!r&&typeof i=="object"&&(r=sr.bind(null,i));const a=Yt(i,r);(!n||n<a||isNaN(+a))&&(n=a)}),sr(r,n||NaN)}function fte(t,e){let n,r=e==null?void 0:e.in;return t.forEach(i=>{!r&&typeof i=="object"&&(r=sr.bind(null,i));const a=Yt(i,r);(!n||n>a||isNaN(+a))&&(n=a)}),sr(r,n||NaN)}function hte(t,e,n){const[r,i]=If(n==null?void 0:n.in,t,e);return+qp(r)==+qp(i)}function Mz(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function pte(t){return!(!Mz(t)&&typeof t!="number"||isNaN(+Yt(t)))}function mte(t,e,n){const[r,i]=If(n==null?void 0:n.in,t,e),a=r.getFullYear()-i.getFullYear(),s=r.getMonth()-i.getMonth();return a*12+s}function gte(t,e){const n=Yt(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function yte(t,e){const[n,r]=If(t,e.start,e.end);return{start:n,end:r}}function vte(t,e){const{start:n,end:r}=yte(e==null?void 0:e.in,t);let i=+n>+r;const a=i?+n:+r,s=i?r:n;s.setHours(0,0,0,0),s.setDate(1);let o=1;const l=[];for(;+s<=a;)l.push(sr(n,s)),s.setMonth(s.getMonth()+o);return i?l.reverse():l}function xte(t,e){const n=Yt(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function bte(t,e){const n=Yt(t,e==null?void 0:e.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function Rz(t,e){const n=Yt(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function $z(t,e){var o,l,u,f;const n=eg(),r=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((f=(u=n.locale)==null?void 0:u.options)==null?void 0:f.weekStartsOn)??0,i=Yt(t,e==null?void 0:e.in),a=i.getDay(),s=(a<r?-7:0)+6-(a-r);return i.setDate(i.getDate()+s),i.setHours(23,59,59,999),i}function wte(t,e){return $z(t,{...e,weekStartsOn:1})}const _te={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ste=(t,e,n)=>{let r;const i=_te[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function xd(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Ete={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ate={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},jte={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Tte={date:xd({formats:Ete,defaultWidth:"full"}),time:xd({formats:Ate,defaultWidth:"full"}),dateTime:xd({formats:jte,defaultWidth:"full"})},Pte={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Cte=(t,e,n,r)=>Pte[t];function ds(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const s=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):s;i=t.formattingValues[o]||t.formattingValues[s]}else{const s=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[o]||t.values[s]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const kte={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Nte={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ote={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ite={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Dte={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Mte={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Rte=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},$te={ordinalNumber:Rte,era:ds({values:kte,defaultWidth:"wide"}),quarter:ds({values:Nte,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ds({values:Ote,defaultWidth:"wide"}),day:ds({values:Ite,defaultWidth:"wide"}),dayPeriod:ds({values:Dte,defaultWidth:"wide",formattingValues:Mte,defaultFormattingWidth:"wide"})};function fs(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const s=a[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(o)?zte(o,d=>d.test(s)):Lte(o,d=>d.test(s));let u;u=t.valueCallback?t.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;const f=e.slice(s.length);return{value:u,rest:f}}}function Lte(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function zte(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Lz(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let s=t.valueCallback?t.valueCallback(a[0]):a[0];s=n.valueCallback?n.valueCallback(s):s;const o=e.slice(i.length);return{value:s,rest:o}}}const Vte=/^(\d+)(th|st|nd|rd)?/i,Fte=/\d+/i,Bte={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ute={any:[/^b/i,/^(a|c)/i]},Wte={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Kte={any:[/1/i,/2/i,/3/i,/4/i]},qte={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Hte={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Gte={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Yte={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Xte={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Qte={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Zte={ordinalNumber:Lz({matchPattern:Vte,parsePattern:Fte,valueCallback:t=>parseInt(t,10)}),era:fs({matchPatterns:Bte,defaultMatchWidth:"wide",parsePatterns:Ute,defaultParseWidth:"any"}),quarter:fs({matchPatterns:Wte,defaultMatchWidth:"wide",parsePatterns:Kte,defaultParseWidth:"any",valueCallback:t=>t+1}),month:fs({matchPatterns:qte,defaultMatchWidth:"wide",parsePatterns:Hte,defaultParseWidth:"any"}),day:fs({matchPatterns:Gte,defaultMatchWidth:"wide",parsePatterns:Yte,defaultParseWidth:"any"}),dayPeriod:fs({matchPatterns:Xte,defaultMatchWidth:"any",parsePatterns:Qte,defaultParseWidth:"any"})},uj={code:"en-US",formatDistance:Ste,formatLong:Tte,formatRelative:Cte,localize:$te,match:Zte,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Jte(t,e){const n=Yt(t,e==null?void 0:e.in);return Dz(n,Rz(n))+1}function zz(t,e){const n=Yt(t,e==null?void 0:e.in),r=+Kp(n)-+lte(n);return Math.round(r/kz)+1}function Vz(t,e){var f,d,h,p;const n=Yt(t,e==null?void 0:e.in),r=n.getFullYear(),i=eg(),a=(e==null?void 0:e.firstWeekContainsDate)??((d=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:d.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(h=i.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,s=sr((e==null?void 0:e.in)||t,0);s.setFullYear(r+1,0,a),s.setHours(0,0,0,0);const o=Wd(s,e),l=sr((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,a),l.setHours(0,0,0,0);const u=Wd(l,e);return+n>=+o?r+1:+n>=+u?r:r-1}function ene(t,e){var o,l,u,f;const n=eg(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(u=n.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??1,i=Vz(t,e),a=sr((e==null?void 0:e.in)||t,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),Wd(a,e)}function Fz(t,e){const n=Yt(t,e==null?void 0:e.in),r=+Wd(n,e)-+ene(n,e);return Math.round(r/kz)+1}function Ut(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Vo={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Ut(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Ut(n+1,2)},d(t,e){return Ut(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Ut(t.getHours()%12||12,e.length)},H(t,e){return Ut(t.getHours(),e.length)},m(t,e){return Ut(t.getMinutes(),e.length)},s(t,e){return Ut(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Ut(i,e.length)}},ku={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},RN={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Vo.y(t,e)},Y:function(t,e,n,r){const i=Vz(t,r),a=i>0?i:1-i;if(e==="YY"){const s=a%100;return Ut(s,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):Ut(a,e.length)},R:function(t,e){const n=Iz(t);return Ut(n,e.length)},u:function(t,e){const n=t.getFullYear();return Ut(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Ut(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Ut(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Vo.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Ut(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=Fz(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Ut(i,e.length)},I:function(t,e,n){const r=zz(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Ut(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Vo.d(t,e)},D:function(t,e,n){const r=Jte(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Ut(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Ut(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Ut(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Ut(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=ku.noon:r===0?i=ku.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=ku.evening:r>=12?i=ku.afternoon:r>=4?i=ku.morning:i=ku.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Vo.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Vo.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Ut(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Ut(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Vo.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Vo.s(t,e)},S:function(t,e){return Vo.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return LN(r);case"XXXX":case"XX":return uc(r);case"XXXXX":case"XXX":default:return uc(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return LN(r);case"xxxx":case"xx":return uc(r);case"xxxxx":case"xxx":default:return uc(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+$N(r,":");case"OOOO":default:return"GMT"+uc(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+$N(r,":");case"zzzz":default:return"GMT"+uc(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return Ut(r,e.length)},T:function(t,e,n){return Ut(+t,e.length)}};function $N(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+e+Ut(a,2)}function LN(t,e){return t%60===0?(t>0?"-":"+")+Ut(Math.abs(t)/60,2):uc(t,e)}function uc(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Ut(Math.trunc(r/60),2),a=Ut(r%60,2);return n+i+e+a}const zN=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Bz=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},tne=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return zN(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",zN(r,e)).replace("{{time}}",Bz(i,e))},nne={p:Bz,P:tne},rne=/^D+$/,ine=/^Y+$/,ane=["D","DD","YY","YYYY"];function sne(t){return rne.test(t)}function one(t){return ine.test(t)}function lne(t,e,n){const r=cne(t,e,n);if(console.warn(r),ane.includes(t))throw new RangeError(r)}function cne(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const une=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,dne=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,fne=/^'([^]*?)'?$/,hne=/''/g,pne=/[a-zA-Z]/;function mne(t,e,n){var f,d,h,p,v,y,b,x;const r=eg(),i=(n==null?void 0:n.locale)??r.locale??uj,a=(n==null?void 0:n.firstWeekContainsDate)??((d=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:d.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(h=r.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,s=(n==null?void 0:n.weekStartsOn)??((y=(v=n==null?void 0:n.locale)==null?void 0:v.options)==null?void 0:y.weekStartsOn)??r.weekStartsOn??((x=(b=r.locale)==null?void 0:b.options)==null?void 0:x.weekStartsOn)??0,o=Yt(t,n==null?void 0:n.in);if(!pte(o))throw new RangeError("Invalid time value");let l=e.match(dne).map(_=>{const E=_[0];if(E==="p"||E==="P"){const P=nne[E];return P(_,i.formatLong)}return _}).join("").match(une).map(_=>{if(_==="''")return{isToken:!1,value:"'"};const E=_[0];if(E==="'")return{isToken:!1,value:gne(_)};if(RN[E])return{isToken:!0,value:_};if(E.match(pne))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");return{isToken:!1,value:_}});i.localize.preprocessor&&(l=i.localize.preprocessor(o,l));const u={firstWeekContainsDate:a,weekStartsOn:s,locale:i};return l.map(_=>{if(!_.isToken)return _.value;const E=_.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&one(E)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&sne(E))&&lne(E,e,String(t));const P=RN[E[0]];return P(o,E,i.localize,u)}).join("")}function gne(t){const e=t.match(fne);return e?e[1].replace(hne,"'"):t}function yne(t,e){const n=Yt(t,e==null?void 0:e.in),r=n.getFullYear(),i=n.getMonth(),a=sr(n,0);return a.setFullYear(r,i+1,0),a.setHours(0,0,0,0),a.getDate()}function vne(t,e){return Yt(t,e==null?void 0:e.in).getMonth()}function xne(t,e){return Yt(t,e==null?void 0:e.in).getFullYear()}function bne(t,e){return+Yt(t)>+Yt(e)}function wne(t,e){return+Yt(t)<+Yt(e)}function _ne(t,e,n){const[r,i]=If(n==null?void 0:n.in,t,e);return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()}function Sne(t,e,n){const[r,i]=If(n==null?void 0:n.in,t,e);return r.getFullYear()===i.getFullYear()}function Ene(t,e,n){const r=Yt(t,n==null?void 0:n.in),i=r.getFullYear(),a=r.getDate(),s=sr(t,0);s.setFullYear(i,e,15),s.setHours(0,0,0,0);const o=yne(s);return r.setMonth(e,Math.min(a,o)),r}function Ane(t,e,n){const r=Yt(t,n==null?void 0:n.in);return isNaN(+r)?sr(t,NaN):(r.setFullYear(e),r)}const VN=5,jne=4;function Tne(t,e){const n=e.startOfMonth(t),r=n.getDay()>0?n.getDay():7,i=e.addDays(t,-r+1),a=e.addDays(i,VN*7-1);return e.getMonth(t)===e.getMonth(a)?VN:jne}function Uz(t,e){const n=e.startOfMonth(t),r=n.getDay();return r===1?n:r===0?e.addDays(n,-1*6):e.addDays(n,-1*(r-1))}function Pne(t,e){const n=Uz(t,e),r=Tne(t,e);return e.addDays(n,r*7-1)}class qi{constructor(e,n){this.Date=Date,this.today=()=>{var r;return(r=this.overrides)!=null&&r.today?this.overrides.today():this.options.timeZone?zr.tz(this.options.timeZone):new this.Date},this.newDate=(r,i,a)=>{var s;return(s=this.overrides)!=null&&s.newDate?this.overrides.newDate(r,i,a):this.options.timeZone?new zr(r,i,a,this.options.timeZone):new Date(r,i,a)},this.addDays=(r,i)=>{var a;return(a=this.overrides)!=null&&a.addDays?this.overrides.addDays(r,i):Nz(r,i)},this.addMonths=(r,i)=>{var a;return(a=this.overrides)!=null&&a.addMonths?this.overrides.addMonths(r,i):Oz(r,i)},this.addWeeks=(r,i)=>{var a;return(a=this.overrides)!=null&&a.addWeeks?this.overrides.addWeeks(r,i):cte(r,i)},this.addYears=(r,i)=>{var a;return(a=this.overrides)!=null&&a.addYears?this.overrides.addYears(r,i):ute(r,i)},this.differenceInCalendarDays=(r,i)=>{var a;return(a=this.overrides)!=null&&a.differenceInCalendarDays?this.overrides.differenceInCalendarDays(r,i):Dz(r,i)},this.differenceInCalendarMonths=(r,i)=>{var a;return(a=this.overrides)!=null&&a.differenceInCalendarMonths?this.overrides.differenceInCalendarMonths(r,i):mte(r,i)},this.eachMonthOfInterval=r=>{var i;return(i=this.overrides)!=null&&i.eachMonthOfInterval?this.overrides.eachMonthOfInterval(r):vte(r)},this.endOfBroadcastWeek=r=>{var i;return(i=this.overrides)!=null&&i.endOfBroadcastWeek?this.overrides.endOfBroadcastWeek(r):Pne(r,this)},this.endOfISOWeek=r=>{var i;return(i=this.overrides)!=null&&i.endOfISOWeek?this.overrides.endOfISOWeek(r):wte(r)},this.endOfMonth=r=>{var i;return(i=this.overrides)!=null&&i.endOfMonth?this.overrides.endOfMonth(r):gte(r)},this.endOfWeek=(r,i)=>{var a;return(a=this.overrides)!=null&&a.endOfWeek?this.overrides.endOfWeek(r,i):$z(r,this.options)},this.endOfYear=r=>{var i;return(i=this.overrides)!=null&&i.endOfYear?this.overrides.endOfYear(r):bte(r)},this.format=(r,i,a)=>{var o;const s=(o=this.overrides)!=null&&o.format?this.overrides.format(r,i,this.options):mne(r,i,this.options);return this.options.numerals&&this.options.numerals!=="latn"?this.replaceDigits(s):s},this.getISOWeek=r=>{var i;return(i=this.overrides)!=null&&i.getISOWeek?this.overrides.getISOWeek(r):zz(r)},this.getMonth=(r,i)=>{var a;return(a=this.overrides)!=null&&a.getMonth?this.overrides.getMonth(r,this.options):vne(r,this.options)},this.getYear=(r,i)=>{var a;return(a=this.overrides)!=null&&a.getYear?this.overrides.getYear(r,this.options):xne(r,this.options)},this.getWeek=(r,i)=>{var a;return(a=this.overrides)!=null&&a.getWeek?this.overrides.getWeek(r,this.options):Fz(r,this.options)},this.isAfter=(r,i)=>{var a;return(a=this.overrides)!=null&&a.isAfter?this.overrides.isAfter(r,i):bne(r,i)},this.isBefore=(r,i)=>{var a;return(a=this.overrides)!=null&&a.isBefore?this.overrides.isBefore(r,i):wne(r,i)},this.isDate=r=>{var i;return(i=this.overrides)!=null&&i.isDate?this.overrides.isDate(r):Mz(r)},this.isSameDay=(r,i)=>{var a;return(a=this.overrides)!=null&&a.isSameDay?this.overrides.isSameDay(r,i):hte(r,i)},this.isSameMonth=(r,i)=>{var a;return(a=this.overrides)!=null&&a.isSameMonth?this.overrides.isSameMonth(r,i):_ne(r,i)},this.isSameYear=(r,i)=>{var a;return(a=this.overrides)!=null&&a.isSameYear?this.overrides.isSameYear(r,i):Sne(r,i)},this.max=r=>{var i;return(i=this.overrides)!=null&&i.max?this.overrides.max(r):dte(r)},this.min=r=>{var i;return(i=this.overrides)!=null&&i.min?this.overrides.min(r):fte(r)},this.setMonth=(r,i)=>{var a;return(a=this.overrides)!=null&&a.setMonth?this.overrides.setMonth(r,i):Ene(r,i)},this.setYear=(r,i)=>{var a;return(a=this.overrides)!=null&&a.setYear?this.overrides.setYear(r,i):Ane(r,i)},this.startOfBroadcastWeek=(r,i)=>{var a;return(a=this.overrides)!=null&&a.startOfBroadcastWeek?this.overrides.startOfBroadcastWeek(r,this):Uz(r,this)},this.startOfDay=r=>{var i;return(i=this.overrides)!=null&&i.startOfDay?this.overrides.startOfDay(r):qp(r)},this.startOfISOWeek=r=>{var i;return(i=this.overrides)!=null&&i.startOfISOWeek?this.overrides.startOfISOWeek(r):Kp(r)},this.startOfMonth=r=>{var i;return(i=this.overrides)!=null&&i.startOfMonth?this.overrides.startOfMonth(r):xte(r)},this.startOfWeek=(r,i)=>{var a;return(a=this.overrides)!=null&&a.startOfWeek?this.overrides.startOfWeek(r,this.options):Wd(r,this.options)},this.startOfYear=r=>{var i;return(i=this.overrides)!=null&&i.startOfYear?this.overrides.startOfYear(r):Rz(r)},this.options={locale:uj,...e},this.overrides=n}getDigitMap(){const{numerals:e="latn"}=this.options,n=new Intl.NumberFormat("en-US",{numberingSystem:e}),r={};for(let i=0;i<10;i++)r[i.toString()]=n.format(i);return r}replaceDigits(e){const n=this.getDigitMap();return e.replace(/\d/g,r=>n[r]||r)}formatNumber(e){return this.replaceDigits(e.toString())}getMonthYearOrder(){var n;const e=(n=this.options.locale)==null?void 0:n.code;return e&&qi.yearFirstLocales.has(e)?"year-first":"month-first"}formatMonthYear(e){const{locale:n,timeZone:r,numerals:i}=this.options,a=n==null?void 0:n.code;if(a&&qi.yearFirstLocales.has(a))try{return new Intl.DateTimeFormat(a,{month:"long",year:"numeric",timeZone:r,numberingSystem:i}).format(e)}catch{}const s=this.getMonthYearOrder()==="year-first"?"y LLLL":"LLLL y";return this.format(e,s)}}qi.yearFirstLocales=new Set(["eu","hu","ja","ja-Hira","ja-JP","ko","ko-KR","lt","lt-LT","lv","lv-LV","mn","mn-MN","zh","zh-CN","zh-HK","zh-TW"]);const Ps=new qi;class Wz{constructor(e,n,r=Ps){this.date=e,this.displayMonth=n,this.outside=!!(n&&!r.isSameMonth(e,n)),this.dateLib=r}isEqualTo(e){return this.dateLib.isSameDay(e.date,this.date)&&this.dateLib.isSameMonth(e.displayMonth,this.displayMonth)}}class Cne{constructor(e,n){this.date=e,this.weeks=n}}class kne{constructor(e,n){this.days=n,this.weekNumber=e}}function Nne(t){return F.createElement("button",{...t})}function One(t){return F.createElement("span",{...t})}function Ine(t){const{size:e=24,orientation:n="left",className:r}=t;return F.createElement("svg",{className:r,width:e,height:e,viewBox:"0 0 24 24"},n==="up"&&F.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),n==="down"&&F.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),n==="left"&&F.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),n==="right"&&F.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}function Dne(t){const{day:e,modifiers:n,...r}=t;return F.createElement("td",{...r})}function Mne(t){const{day:e,modifiers:n,...r}=t,i=F.useRef(null);return F.useEffect(()=>{var a;n.focused&&((a=i.current)==null||a.focus())},[n.focused]),F.createElement("button",{ref:i,...r})}var Ge;(function(t){t.Root="root",t.Chevron="chevron",t.Day="day",t.DayButton="day_button",t.CaptionLabel="caption_label",t.Dropdowns="dropdowns",t.Dropdown="dropdown",t.DropdownRoot="dropdown_root",t.Footer="footer",t.MonthGrid="month_grid",t.MonthCaption="month_caption",t.MonthsDropdown="months_dropdown",t.Month="month",t.Months="months",t.Nav="nav",t.NextMonthButton="button_next",t.PreviousMonthButton="button_previous",t.Week="week",t.Weeks="weeks",t.Weekday="weekday",t.Weekdays="weekdays",t.WeekNumber="week_number",t.WeekNumberHeader="week_number_header",t.YearsDropdown="years_dropdown"})(Ge||(Ge={}));var wn;(function(t){t.disabled="disabled",t.hidden="hidden",t.outside="outside",t.focused="focused",t.today="today"})(wn||(wn={}));var Ba;(function(t){t.range_end="range_end",t.range_middle="range_middle",t.range_start="range_start",t.selected="selected"})(Ba||(Ba={}));var Mi;(function(t){t.weeks_before_enter="weeks_before_enter",t.weeks_before_exit="weeks_before_exit",t.weeks_after_enter="weeks_after_enter",t.weeks_after_exit="weeks_after_exit",t.caption_after_enter="caption_after_enter",t.caption_after_exit="caption_after_exit",t.caption_before_enter="caption_before_enter",t.caption_before_exit="caption_before_exit"})(Mi||(Mi={}));function Rne(t){const{options:e,className:n,components:r,classNames:i,...a}=t,s=[i[Ge.Dropdown],n].join(" "),o=e==null?void 0:e.find(({value:l})=>l===a.value);return F.createElement("span",{"data-disabled":a.disabled,className:i[Ge.DropdownRoot]},F.createElement(r.Select,{className:s,...a},e==null?void 0:e.map(({value:l,label:u,disabled:f})=>F.createElement(r.Option,{key:l,value:l,disabled:f},u))),F.createElement("span",{className:i[Ge.CaptionLabel],"aria-hidden":!0},o==null?void 0:o.label,F.createElement(r.Chevron,{orientation:"down",size:18,className:i[Ge.Chevron]})))}function $ne(t){return F.createElement("div",{...t})}function Lne(t){return F.createElement("div",{...t})}function zne(t){const{calendarMonth:e,displayIndex:n,...r}=t;return F.createElement("div",{...r},t.children)}function Vne(t){const{calendarMonth:e,displayIndex:n,...r}=t;return F.createElement("div",{...r})}function Fne(t){return F.createElement("table",{...t})}function Bne(t){return F.createElement("div",{...t})}const Kz=O.createContext(void 0);function tg(){const t=O.useContext(Kz);if(t===void 0)throw new Error("useDayPicker() must be used within a custom component.");return t}function Une(t){const{components:e}=tg();return F.createElement(e.Dropdown,{...t})}function Wne(t){const{onPreviousClick:e,onNextClick:n,previousMonth:r,nextMonth:i,...a}=t,{components:s,classNames:o,labels:{labelPrevious:l,labelNext:u}}=tg(),f=O.useCallback(h=>{i&&(n==null||n(h))},[i,n]),d=O.useCallback(h=>{r&&(e==null||e(h))},[r,e]);return F.createElement("nav",{...a},F.createElement(s.PreviousMonthButton,{type:"button",className:o[Ge.PreviousMonthButton],tabIndex:r?void 0:-1,"aria-disabled":r?void 0:!0,"aria-label":l(r),onClick:d},F.createElement(s.Chevron,{disabled:r?void 0:!0,className:o[Ge.Chevron],orientation:"left"})),F.createElement(s.NextMonthButton,{type:"button",className:o[Ge.NextMonthButton],tabIndex:i?void 0:-1,"aria-disabled":i?void 0:!0,"aria-label":u(i),onClick:f},F.createElement(s.Chevron,{disabled:i?void 0:!0,orientation:"right",className:o[Ge.Chevron]})))}function Kne(t){const{components:e}=tg();return F.createElement(e.Button,{...t})}function qne(t){return F.createElement("option",{...t})}function Hne(t){const{components:e}=tg();return F.createElement(e.Button,{...t})}function Gne(t){const{rootRef:e,...n}=t;return F.createElement("div",{...n,ref:e})}function Yne(t){return F.createElement("select",{...t})}function Xne(t){const{week:e,...n}=t;return F.createElement("tr",{...n})}function Qne(t){return F.createElement("th",{...t})}function Zne(t){return F.createElement("thead",{"aria-hidden":!0},F.createElement("tr",{...t}))}function Jne(t){const{week:e,...n}=t;return F.createElement("th",{...n})}function ere(t){return F.createElement("th",{...t})}function tre(t){return F.createElement("tbody",{...t})}function nre(t){const{components:e}=tg();return F.createElement(e.Dropdown,{...t})}const rre=Object.freeze(Object.defineProperty({__proto__:null,Button:Nne,CaptionLabel:One,Chevron:Ine,Day:Dne,DayButton:Mne,Dropdown:Rne,DropdownNav:$ne,Footer:Lne,Month:zne,MonthCaption:Vne,MonthGrid:Fne,Months:Bne,MonthsDropdown:Une,Nav:Wne,NextMonthButton:Kne,Option:qne,PreviousMonthButton:Hne,Root:Gne,Select:Yne,Week:Xne,WeekNumber:Jne,WeekNumberHeader:ere,Weekday:Qne,Weekdays:Zne,Weeks:tre,YearsDropdown:nre},Symbol.toStringTag,{value:"Module"}));function qs(t,e,n=!1,r=Ps){let{from:i,to:a}=t;const{differenceInCalendarDays:s,isSameDay:o}=r;return i&&a?(s(a,i)<0&&([i,a]=[a,i]),s(e,i)>=(n?1:0)&&s(a,e)>=(n?1:0)):!n&&a?o(a,e):!n&&i?o(i,e):!1}function qz(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function dj(t){return!!(t&&typeof t=="object"&&"from"in t)}function Hz(t){return!!(t&&typeof t=="object"&&"after"in t)}function Gz(t){return!!(t&&typeof t=="object"&&"before"in t)}function Yz(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function Xz(t,e){return Array.isArray(t)&&t.every(e.isDate)}function Hs(t,e,n=Ps){const r=Array.isArray(e)?e:[e],{isSameDay:i,differenceInCalendarDays:a,isAfter:s}=n;return r.some(o=>{if(typeof o=="boolean")return o;if(n.isDate(o))return i(t,o);if(Xz(o,n))return o.includes(t);if(dj(o))return qs(o,t,!1,n);if(Yz(o))return Array.isArray(o.dayOfWeek)?o.dayOfWeek.includes(t.getDay()):o.dayOfWeek===t.getDay();if(qz(o)){const l=a(o.before,t),u=a(o.after,t),f=l>0,d=u<0;return s(o.before,o.after)?d&&f:f||d}return Hz(o)?a(t,o.after)>0:Gz(o)?a(o.before,t)>0:typeof o=="function"?o(t):!1})}function ire(t,e,n,r,i){const{disabled:a,hidden:s,modifiers:o,showOutsideDays:l,broadcastCalendar:u,today:f}=e,{isSameDay:d,isSameMonth:h,startOfMonth:p,isBefore:v,endOfMonth:y,isAfter:b}=i,x=n&&p(n),_=r&&y(r),E={[wn.focused]:[],[wn.outside]:[],[wn.disabled]:[],[wn.hidden]:[],[wn.today]:[]},P={};for(const A of t){const{date:j,displayMonth:S}=A,T=!!(S&&!h(j,S)),N=!!(x&&v(j,x)),D=!!(_&&b(j,_)),M=!!(a&&Hs(j,a,i)),$=!!(s&&Hs(j,s,i))||N||D||!u&&!l&&T||u&&l===!1&&T,z=d(j,f??i.today());T&&E.outside.push(A),M&&E.disabled.push(A),$&&E.hidden.push(A),z&&E.today.push(A),o&&Object.keys(o).forEach(H=>{const ee=o==null?void 0:o[H];ee&&Hs(j,ee,i)&&(P[H]?P[H].push(A):P[H]=[A])})}return A=>{const j={[wn.focused]:!1,[wn.disabled]:!1,[wn.hidden]:!1,[wn.outside]:!1,[wn.today]:!1},S={};for(const T in E){const N=E[T];j[T]=N.some(D=>D===A)}for(const T in P)S[T]=P[T].some(N=>N===A);return{...j,...S}}}function are(t,e,n={}){return Object.entries(t).filter(([,i])=>i===!0).reduce((i,[a])=>(n[a]?i.push(n[a]):e[wn[a]]?i.push(e[wn[a]]):e[Ba[a]]&&i.push(e[Ba[a]]),i),[e[Ge.Day]])}function sre(t){return{...rre,...t}}function ore(t){const e={"data-mode":t.mode??void 0,"data-required":"required"in t?t.required:void 0,"data-multiple-months":t.numberOfMonths&&t.numberOfMonths>1||void 0,"data-week-numbers":t.showWeekNumber||void 0,"data-broadcast-calendar":t.broadcastCalendar||void 0,"data-nav-layout":t.navLayout||void 0};return Object.entries(t).forEach(([n,r])=>{n.startsWith("data-")&&(e[n]=r)}),e}function lre(){const t={};for(const e in Ge)t[Ge[e]]=`rdp-${Ge[e]}`;for(const e in wn)t[wn[e]]=`rdp-${wn[e]}`;for(const e in Ba)t[Ba[e]]=`rdp-${Ba[e]}`;for(const e in Mi)t[Mi[e]]=`rdp-${Mi[e]}`;return t}function Qz(t,e,n){return(n??new qi(e)).formatMonthYear(t)}const cre=Qz;function ure(t,e,n){return(n??new qi(e)).format(t,"d")}function dre(t,e=Ps){return e.format(t,"LLLL")}function fre(t,e,n){return(n??new qi(e)).format(t,"cccccc")}function hre(t,e=Ps){return t<10?e.formatNumber(`0${t.toLocaleString()}`):e.formatNumber(`${t.toLocaleString()}`)}function pre(){return""}function Zz(t,e=Ps){return e.format(t,"yyyy")}const mre=Zz,gre=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:Qz,formatDay:ure,formatMonthCaption:cre,formatMonthDropdown:dre,formatWeekNumber:hre,formatWeekNumberHeader:pre,formatWeekdayName:fre,formatYearCaption:mre,formatYearDropdown:Zz},Symbol.toStringTag,{value:"Module"}));function yre(t){return t!=null&&t.formatMonthCaption&&!t.formatCaption&&(t.formatCaption=t.formatMonthCaption),t!=null&&t.formatYearCaption&&!t.formatYearDropdown&&(t.formatYearDropdown=t.formatYearCaption),{...gre,...t}}function vre(t,e,n,r,i){const{startOfMonth:a,startOfYear:s,endOfYear:o,eachMonthOfInterval:l,getMonth:u}=i;return l({start:s(t),end:o(t)}).map(h=>{const p=r.formatMonthDropdown(h,i),v=u(h),y=e&&h<a(e)||n&&h>a(n)||!1;return{value:v,label:p,disabled:y}})}function xre(t,e={},n={}){let r={...e==null?void 0:e[Ge.Day]};return Object.entries(t).filter(([,i])=>i===!0).forEach(([i])=>{r={...r,...n==null?void 0:n[i]}}),r}function bre(t,e,n){const r=t.today(),i=e?t.startOfISOWeek(r):t.startOfWeek(r),a=[];for(let s=0;s<7;s++){const o=t.addDays(i,s);a.push(o)}return a}function wre(t,e,n,r,i=!1){if(!t||!e)return;const{startOfYear:a,endOfYear:s,addYears:o,getYear:l,isBefore:u,isSameYear:f}=r,d=a(t),h=s(e),p=[];let v=d;for(;u(v,h)||f(v,h);)p.push(v),v=o(v,1);return i&&p.reverse(),p.map(y=>{const b=n.formatYearDropdown(y,r);return{value:l(y),label:b,disabled:!1}})}function Jz(t,e,n,r){let i=(r??new qi(n)).format(t,"PPPP");return e.today&&(i=`Today, ${i}`),e.selected&&(i=`${i}, selected`),i}const _re=Jz;function e6(t,e,n){return(n??new qi(e)).formatMonthYear(t)}const Sre=e6;function Ere(t,e,n,r){let i=(r??new qi(n)).format(t,"PPPP");return e!=null&&e.today&&(i=`Today, ${i}`),i}function Are(t){return"Choose the Month"}function jre(){return""}function Tre(t){return"Go to the Next Month"}function Pre(t){return"Go to the Previous Month"}function Cre(t,e,n){return(n??new qi(e)).format(t,"cccc")}function kre(t,e){return`Week ${t}`}function Nre(t){return"Week Number"}function Ore(t){return"Choose the Year"}const Ire=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:Sre,labelDay:_re,labelDayButton:Jz,labelGrid:e6,labelGridcell:Ere,labelMonthDropdown:Are,labelNav:jre,labelNext:Tre,labelPrevious:Pre,labelWeekNumber:kre,labelWeekNumberHeader:Nre,labelWeekday:Cre,labelYearDropdown:Ore},Symbol.toStringTag,{value:"Module"})),ng=t=>t instanceof HTMLElement?t:null,Iw=t=>[...t.querySelectorAll("[data-animated-month]")??[]],Dre=t=>ng(t.querySelector("[data-animated-month]")),Dw=t=>ng(t.querySelector("[data-animated-caption]")),Mw=t=>ng(t.querySelector("[data-animated-weeks]")),Mre=t=>ng(t.querySelector("[data-animated-nav]")),Rre=t=>ng(t.querySelector("[data-animated-weekdays]"));function $re(t,e,{classNames:n,months:r,focused:i,dateLib:a}){const s=O.useRef(null),o=O.useRef(r),l=O.useRef(!1);O.useLayoutEffect(()=>{const u=o.current;if(o.current=r,!e||!t.current||!(t.current instanceof HTMLElement)||r.length===0||u.length===0||r.length!==u.length)return;const f=a.isSameMonth(r[0].date,u[0].date),d=a.isAfter(r[0].date,u[0].date),h=d?n[Mi.caption_after_enter]:n[Mi.caption_before_enter],p=d?n[Mi.weeks_after_enter]:n[Mi.weeks_before_enter],v=s.current,y=t.current.cloneNode(!0);if(y instanceof HTMLElement?(Iw(y).forEach(E=>{if(!(E instanceof HTMLElement))return;const P=Dre(E);P&&E.contains(P)&&E.removeChild(P);const A=Dw(E);A&&A.classList.remove(h);const j=Mw(E);j&&j.classList.remove(p)}),s.current=y):s.current=null,l.current||f||i)return;const b=v instanceof HTMLElement?Iw(v):[],x=Iw(t.current);if(x!=null&&x.every(_=>_ instanceof HTMLElement)&&b&&b.every(_=>_ instanceof HTMLElement)){l.current=!0,t.current.style.isolation="isolate";const _=Mre(t.current);_&&(_.style.zIndex="1"),x.forEach((E,P)=>{const A=b[P];if(!A)return;E.style.position="relative",E.style.overflow="hidden";const j=Dw(E);j&&j.classList.add(h);const S=Mw(E);S&&S.classList.add(p);const T=()=>{l.current=!1,t.current&&(t.current.style.isolation=""),_&&(_.style.zIndex=""),j&&j.classList.remove(h),S&&S.classList.remove(p),E.style.position="",E.style.overflow="",E.contains(A)&&E.removeChild(A)};A.style.pointerEvents="none",A.style.position="absolute",A.style.overflow="hidden",A.setAttribute("aria-hidden","true");const N=Rre(A);N&&(N.style.opacity="0");const D=Dw(A);D&&(D.classList.add(d?n[Mi.caption_before_exit]:n[Mi.caption_after_exit]),D.addEventListener("animationend",T));const M=Mw(A);M&&M.classList.add(d?n[Mi.weeks_before_exit]:n[Mi.weeks_after_exit]),E.insertBefore(A,E.firstChild)})}})}function Lre(t,e,n,r){const i=t[0],a=t[t.length-1],{ISOWeek:s,fixedWeeks:o,broadcastCalendar:l}=n??{},{addDays:u,differenceInCalendarDays:f,differenceInCalendarMonths:d,endOfBroadcastWeek:h,endOfISOWeek:p,endOfMonth:v,endOfWeek:y,isAfter:b,startOfBroadcastWeek:x,startOfISOWeek:_,startOfWeek:E}=r,P=l?x(i,r):s?_(i):E(i),A=l?h(a):s?p(v(a)):y(v(a)),j=f(A,P),S=d(a,i)+1,T=[];for(let M=0;M<=j;M++){const $=u(P,M);if(e&&b($,e))break;T.push($)}const D=(l?35:42)*S;if(o&&T.length<D){const M=D-T.length;for(let $=0;$<M;$++){const z=u(T[T.length-1],1);T.push(z)}}return T}function zre(t){const e=[];return t.reduce((n,r)=>{const i=r.weeks.reduce((a,s)=>a.concat(s.days.slice()),e.slice());return n.concat(i.slice())},e.slice())}function Vre(t,e,n,r){const{numberOfMonths:i=1}=n,a=[];for(let s=0;s<i;s++){const o=r.addMonths(t,s);if(e&&o>e)break;a.push(o)}return a}function FN(t,e,n,r){const{month:i,defaultMonth:a,today:s=r.today(),numberOfMonths:o=1}=t;let l=i||a||s;const{differenceInCalendarMonths:u,addMonths:f,startOfMonth:d}=r;if(n&&u(n,l)<o-1){const h=-1*(o-1);l=f(n,h)}return e&&u(l,e)<0&&(l=e),d(l)}function Fre(t,e,n,r){const{addDays:i,endOfBroadcastWeek:a,endOfISOWeek:s,endOfMonth:o,endOfWeek:l,getISOWeek:u,getWeek:f,startOfBroadcastWeek:d,startOfISOWeek:h,startOfWeek:p}=r,v=t.reduce((y,b)=>{const x=n.broadcastCalendar?d(b,r):n.ISOWeek?h(b):p(b),_=n.broadcastCalendar?a(b):n.ISOWeek?s(o(b)):l(o(b)),E=e.filter(S=>S>=x&&S<=_),P=n.broadcastCalendar?35:42;if(n.fixedWeeks&&E.length<P){const S=e.filter(T=>{const N=P-E.length;return T>_&&T<=i(_,N)});E.push(...S)}const A=E.reduce((S,T)=>{const N=n.ISOWeek?u(T):f(T),D=S.find($=>$.weekNumber===N),M=new Wz(T,b,r);return D?D.days.push(M):S.push(new kne(N,[M])),S},[]),j=new Cne(b,A);return y.push(j),y},[]);return n.reverseMonths?v.reverse():v}function Bre(t,e){let{startMonth:n,endMonth:r}=t;const{startOfYear:i,startOfDay:a,startOfMonth:s,endOfMonth:o,addYears:l,endOfYear:u,newDate:f,today:d}=e,{fromYear:h,toYear:p,fromMonth:v,toMonth:y}=t;!n&&v&&(n=v),!n&&h&&(n=e.newDate(h,0,1)),!r&&y&&(r=y),!r&&p&&(r=f(p,11,31));const b=t.captionLayout==="dropdown"||t.captionLayout==="dropdown-years";return n?n=s(n):h?n=f(h,0,1):!n&&b&&(n=i(l(t.today??d(),-100))),r?r=o(r):p?r=f(p,11,31):!r&&b&&(r=u(t.today??d())),[n&&a(n),r&&a(r)]}function Ure(t,e,n,r){if(n.disableNavigation)return;const{pagedNavigation:i,numberOfMonths:a=1}=n,{startOfMonth:s,addMonths:o,differenceInCalendarMonths:l}=r,u=i?a:1,f=s(t);if(!e)return o(f,u);if(!(l(e,t)<a))return o(f,u)}function Wre(t,e,n,r){if(n.disableNavigation)return;const{pagedNavigation:i,numberOfMonths:a}=n,{startOfMonth:s,addMonths:o,differenceInCalendarMonths:l}=r,u=i?a??1:1,f=s(t);if(!e)return o(f,-u);if(!(l(f,e)<=0))return o(f,-u)}function Kre(t){const e=[];return t.reduce((n,r)=>n.concat(r.weeks.slice()),e.slice())}function Ox(t,e){const[n,r]=O.useState(t);return[e===void 0?n:e,r]}function qre(t,e){const[n,r]=Bre(t,e),{startOfMonth:i,endOfMonth:a}=e,s=FN(t,n,r,e),[o,l]=Ox(s,t.month?s:void 0);O.useEffect(()=>{const j=FN(t,n,r,e);l(j)},[t.timeZone]);const u=Vre(o,r,t,e),f=Lre(u,t.endMonth?a(t.endMonth):void 0,t,e),d=Fre(u,f,t,e),h=Kre(d),p=zre(d),v=Wre(o,n,t,e),y=Ure(o,r,t,e),{disableNavigation:b,onMonthChange:x}=t,_=j=>h.some(S=>S.days.some(T=>T.isEqualTo(j))),E=j=>{if(b)return;let S=i(j);n&&S<i(n)&&(S=i(n)),r&&S>i(r)&&(S=i(r)),l(S),x==null||x(S)};return{months:d,weeks:h,days:p,navStart:n,navEnd:r,previousMonth:v,nextMonth:y,goToMonth:E,goToDay:j=>{_(j)||E(j.date)}}}var os;(function(t){t[t.Today=0]="Today",t[t.Selected=1]="Selected",t[t.LastFocused=2]="LastFocused",t[t.FocusedModifier=3]="FocusedModifier"})(os||(os={}));function BN(t){return!t[wn.disabled]&&!t[wn.hidden]&&!t[wn.outside]}function Hre(t,e,n,r){let i,a=-1;for(const s of t){const o=e(s);BN(o)&&(o[wn.focused]&&a<os.FocusedModifier?(i=s,a=os.FocusedModifier):r!=null&&r.isEqualTo(s)&&a<os.LastFocused?(i=s,a=os.LastFocused):n(s.date)&&a<os.Selected?(i=s,a=os.Selected):o[wn.today]&&a<os.Today&&(i=s,a=os.Today))}return i||(i=t.find(s=>BN(e(s)))),i}function Gre(t,e,n,r,i,a,s){const{ISOWeek:o,broadcastCalendar:l}=a,{addDays:u,addMonths:f,addWeeks:d,addYears:h,endOfBroadcastWeek:p,endOfISOWeek:v,endOfWeek:y,max:b,min:x,startOfBroadcastWeek:_,startOfISOWeek:E,startOfWeek:P}=s;let j={day:u,week:d,month:f,year:h,startOfWeek:S=>l?_(S,s):o?E(S):P(S),endOfWeek:S=>l?p(S):o?v(S):y(S)}[t](n,e==="after"?1:-1);return e==="before"&&r?j=b([r,j]):e==="after"&&i&&(j=x([i,j])),j}function t6(t,e,n,r,i,a,s,o=0){if(o>365)return;const l=Gre(t,e,n.date,r,i,a,s),u=!!(a.disabled&&Hs(l,a.disabled,s)),f=!!(a.hidden&&Hs(l,a.hidden,s)),d=l,h=new Wz(l,d,s);return!u&&!f?h:t6(t,e,h,r,i,a,s,o+1)}function Yre(t,e,n,r,i){const{autoFocus:a}=t,[s,o]=O.useState(),l=Hre(e.days,n,r||(()=>!1),s),[u,f]=O.useState(a?l:void 0);return{isFocusTarget:y=>!!(l!=null&&l.isEqualTo(y)),setFocused:f,focused:u,blur:()=>{o(u),f(void 0)},moveFocus:(y,b)=>{if(!u)return;const x=t6(y,b,u,e.navStart,e.navEnd,t,i);x&&(e.goToDay(x),f(x))}}}function Xre(t,e){const{selected:n,required:r,onSelect:i}=t,[a,s]=Ox(n,i?n:void 0),o=i?n:a,{isSameDay:l}=e,u=p=>(o==null?void 0:o.some(v=>l(v,p)))??!1,{min:f,max:d}=t;return{selected:o,select:(p,v,y)=>{let b=[...o??[]];if(u(p)){if((o==null?void 0:o.length)===f||r&&(o==null?void 0:o.length)===1)return;b=o==null?void 0:o.filter(x=>!l(x,p))}else(o==null?void 0:o.length)===d?b=[p]:b=[...b,p];return i||s(b),i==null||i(b,p,v,y),b},isSelected:u}}function Qre(t,e,n=0,r=0,i=!1,a=Ps){const{from:s,to:o}=e||{},{isSameDay:l,isAfter:u,isBefore:f}=a;let d;if(!s&&!o)d={from:t,to:n>0?void 0:t};else if(s&&!o)l(s,t)?n===0?d={from:s,to:t}:i?d={from:s,to:void 0}:d=void 0:f(t,s)?d={from:t,to:s}:d={from:s,to:t};else if(s&&o)if(l(s,t)&&l(o,t))i?d={from:s,to:o}:d=void 0;else if(l(s,t))d={from:s,to:n>0?void 0:t};else if(l(o,t))d={from:t,to:n>0?void 0:t};else if(f(t,s))d={from:t,to:o};else if(u(t,s))d={from:s,to:t};else if(u(t,o))d={from:s,to:t};else throw new Error("Invalid range");if(d!=null&&d.from&&(d!=null&&d.to)){const h=a.differenceInCalendarDays(d.to,d.from);r>0&&h>r?d={from:t,to:void 0}:n>1&&h<n&&(d={from:t,to:void 0})}return d}function Zre(t,e,n=Ps){const r=Array.isArray(e)?e:[e];let i=t.from;const a=n.differenceInCalendarDays(t.to,t.from),s=Math.min(a,6);for(let o=0;o<=s;o++){if(r.includes(i.getDay()))return!0;i=n.addDays(i,1)}return!1}function UN(t,e,n=Ps){return qs(t,e.from,!1,n)||qs(t,e.to,!1,n)||qs(e,t.from,!1,n)||qs(e,t.to,!1,n)}function Jre(t,e,n=Ps){const r=Array.isArray(e)?e:[e];if(r.filter(o=>typeof o!="function").some(o=>typeof o=="boolean"?o:n.isDate(o)?qs(t,o,!1,n):Xz(o,n)?o.some(l=>qs(t,l,!1,n)):dj(o)?o.from&&o.to?UN(t,{from:o.from,to:o.to},n):!1:Yz(o)?Zre(t,o.dayOfWeek,n):qz(o)?n.isAfter(o.before,o.after)?UN(t,{from:n.addDays(o.after,1),to:n.addDays(o.before,-1)},n):Hs(t.from,o,n)||Hs(t.to,o,n):Hz(o)||Gz(o)?Hs(t.from,o,n)||Hs(t.to,o,n):!1))return!0;const s=r.filter(o=>typeof o=="function");if(s.length){let o=t.from;const l=n.differenceInCalendarDays(t.to,t.from);for(let u=0;u<=l;u++){if(s.some(f=>f(o)))return!0;o=n.addDays(o,1)}}return!1}function eie(t,e){const{disabled:n,excludeDisabled:r,selected:i,required:a,onSelect:s}=t,[o,l]=Ox(i,s?i:void 0),u=s?i:o;return{selected:u,select:(h,p,v)=>{const{min:y,max:b}=t,x=h?Qre(h,u,y,b,a,e):void 0;return r&&n&&(x!=null&&x.from)&&x.to&&Jre({from:x.from,to:x.to},n,e)&&(x.from=h,x.to=void 0),s||l(x),s==null||s(x,h,p,v),x},isSelected:h=>u&&qs(u,h,!1,e)}}function tie(t,e){const{selected:n,required:r,onSelect:i}=t,[a,s]=Ox(n,i?n:void 0),o=i?n:a,{isSameDay:l}=e;return{selected:o,select:(d,h,p)=>{let v=d;return!r&&o&&o&&l(d,o)&&(v=void 0),i||s(v),i==null||i(v,d,h,p),v},isSelected:d=>o?l(o,d):!1}}function nie(t,e){const n=tie(t,e),r=Xre(t,e),i=eie(t,e);switch(t.mode){case"single":return n;case"multiple":return r;case"range":return i;default:return}}function Df(t){var We;let e=t;e.timeZone&&(e={...t},e.today&&(e.today=new zr(e.today,e.timeZone)),e.month&&(e.month=new zr(e.month,e.timeZone)),e.defaultMonth&&(e.defaultMonth=new zr(e.defaultMonth,e.timeZone)),e.startMonth&&(e.startMonth=new zr(e.startMonth,e.timeZone)),e.endMonth&&(e.endMonth=new zr(e.endMonth,e.timeZone)),e.mode==="single"&&e.selected?e.selected=new zr(e.selected,e.timeZone):e.mode==="multiple"&&e.selected?e.selected=(We=e.selected)==null?void 0:We.map(Ue=>new zr(Ue,e.timeZone)):e.mode==="range"&&e.selected&&(e.selected={from:e.selected.from?new zr(e.selected.from,e.timeZone):void 0,to:e.selected.to?new zr(e.selected.to,e.timeZone):void 0}));const{components:n,formatters:r,labels:i,dateLib:a,locale:s,classNames:o}=O.useMemo(()=>{const Ue={...uj,...e.locale};return{dateLib:new qi({locale:Ue,weekStartsOn:e.broadcastCalendar?1:e.weekStartsOn,firstWeekContainsDate:e.firstWeekContainsDate,useAdditionalWeekYearTokens:e.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:e.useAdditionalDayOfYearTokens,timeZone:e.timeZone,numerals:e.numerals},e.dateLib),components:sre(e.components),formatters:yre(e.formatters),labels:{...Ire,...e.labels},locale:Ue,classNames:{...lre(),...e.classNames}}},[e.locale,e.broadcastCalendar,e.weekStartsOn,e.firstWeekContainsDate,e.useAdditionalWeekYearTokens,e.useAdditionalDayOfYearTokens,e.timeZone,e.numerals,e.dateLib,e.components,e.formatters,e.labels,e.classNames]),{captionLayout:l,mode:u,navLayout:f,numberOfMonths:d=1,onDayBlur:h,onDayClick:p,onDayFocus:v,onDayKeyDown:y,onDayMouseEnter:b,onDayMouseLeave:x,onNextClick:_,onPrevClick:E,showWeekNumber:P,styles:A}=e,{formatCaption:j,formatDay:S,formatMonthDropdown:T,formatWeekNumber:N,formatWeekNumberHeader:D,formatWeekdayName:M,formatYearDropdown:$}=r,z=qre(e,a),{days:H,months:ee,navStart:U,navEnd:Z,previousMonth:q,nextMonth:Y,goToMonth:le}=z,ce=ire(H,e,U,Z,a),{isSelected:ye,select:Ee,selected:He}=nie(e,a)??{},{blur:ct,focused:ft,isFocusTarget:It,moveFocus:Dt,setFocused:fe}=Yre(e,z,ce,ye??(()=>!1),a),{labelDayButton:Qe,labelGridcell:Ye,labelGrid:he,labelMonthDropdown:Se,labelNav:Le,labelPrevious:_e,labelNext:Ze,labelWeekday:qt,labelWeekNumber:Ht,labelWeekNumberHeader:kt,labelYearDropdown:Mt}=i,Rt=O.useMemo(()=>bre(a,e.ISOWeek),[a,e.ISOWeek]),In=u!==void 0||p!==void 0,Vn=O.useCallback(()=>{q&&(le(q),E==null||E(q))},[q,le,E]),Wr=O.useCallback(()=>{Y&&(le(Y),_==null||_(Y))},[le,Y,_]),Fn=O.useCallback((Ue,be)=>Ne=>{Ne.preventDefault(),Ne.stopPropagation(),fe(Ue),Ee==null||Ee(Ue.date,be,Ne),p==null||p(Ue.date,be,Ne)},[Ee,p,fe]),Cr=O.useCallback((Ue,be)=>Ne=>{fe(Ue),v==null||v(Ue.date,be,Ne)},[v,fe]),Tt=O.useCallback((Ue,be)=>Ne=>{ct(),h==null||h(Ue.date,be,Ne)},[ct,h]),vn=O.useCallback((Ue,be)=>Ne=>{const Ke={ArrowLeft:[Ne.shiftKey?"month":"day",e.dir==="rtl"?"after":"before"],ArrowRight:[Ne.shiftKey?"month":"day",e.dir==="rtl"?"before":"after"],ArrowDown:[Ne.shiftKey?"year":"week","after"],ArrowUp:[Ne.shiftKey?"year":"week","before"],PageUp:[Ne.shiftKey?"year":"month","before"],PageDown:[Ne.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(Ke[Ne.key]){Ne.preventDefault(),Ne.stopPropagation();const[rt,Je]=Ke[Ne.key];Dt(rt,Je)}y==null||y(Ue.date,be,Ne)},[Dt,y,e.dir]),Kr=O.useCallback((Ue,be)=>Ne=>{b==null||b(Ue.date,be,Ne)},[b]),va=O.useCallback((Ue,be)=>Ne=>{x==null||x(Ue.date,be,Ne)},[x]),Ti=O.useCallback(Ue=>be=>{const Ne=Number(be.target.value),Ke=a.setMonth(a.startOfMonth(Ue),Ne);le(Ke)},[a,le]),ri=O.useCallback(Ue=>be=>{const Ne=Number(be.target.value),Ke=a.setYear(a.startOfMonth(Ue),Ne);le(Ke)},[a,le]),{className:ii,style:xa}=O.useMemo(()=>({className:[o[Ge.Root],e.className].filter(Boolean).join(" "),style:{...A==null?void 0:A[Ge.Root],...e.style}}),[o,e.className,e.style,A]),kr=ore(e),ze=O.useRef(null);$re(ze,!!e.animate,{classNames:o,months:ee,focused:ft,dateLib:a});const xe={dayPickerProps:e,selected:He,select:Ee,isSelected:ye,months:ee,nextMonth:Y,previousMonth:q,goToMonth:le,getModifiers:ce,components:n,classNames:o,styles:A,labels:i,formatters:r};return F.createElement(Kz.Provider,{value:xe},F.createElement(n.Root,{rootRef:e.animate?ze:void 0,className:ii,style:xa,dir:e.dir,id:e.id,lang:e.lang,nonce:e.nonce,title:e.title,role:e.role,"aria-label":e["aria-label"],"aria-labelledby":e["aria-labelledby"],...kr},F.createElement(n.Months,{className:o[Ge.Months],style:A==null?void 0:A[Ge.Months]},!e.hideNavigation&&!f&&F.createElement(n.Nav,{"data-animated-nav":e.animate?"true":void 0,className:o[Ge.Nav],style:A==null?void 0:A[Ge.Nav],"aria-label":Le(),onPreviousClick:Vn,onNextClick:Wr,previousMonth:q,nextMonth:Y}),ee.map((Ue,be)=>F.createElement(n.Month,{"data-animated-month":e.animate?"true":void 0,className:o[Ge.Month],style:A==null?void 0:A[Ge.Month],key:be,displayIndex:be,calendarMonth:Ue},f==="around"&&!e.hideNavigation&&be===0&&F.createElement(n.PreviousMonthButton,{type:"button",className:o[Ge.PreviousMonthButton],tabIndex:q?void 0:-1,"aria-disabled":q?void 0:!0,"aria-label":_e(q),onClick:Vn,"data-animated-button":e.animate?"true":void 0},F.createElement(n.Chevron,{disabled:q?void 0:!0,className:o[Ge.Chevron],orientation:e.dir==="rtl"?"right":"left"})),F.createElement(n.MonthCaption,{"data-animated-caption":e.animate?"true":void 0,className:o[Ge.MonthCaption],style:A==null?void 0:A[Ge.MonthCaption],calendarMonth:Ue,displayIndex:be},l!=null&&l.startsWith("dropdown")?F.createElement(n.DropdownNav,{className:o[Ge.Dropdowns],style:A==null?void 0:A[Ge.Dropdowns]},(()=>{const Ne=l==="dropdown"||l==="dropdown-months"?F.createElement(n.MonthsDropdown,{key:"month",className:o[Ge.MonthsDropdown],"aria-label":Se(),classNames:o,components:n,disabled:!!e.disableNavigation,onChange:Ti(Ue.date),options:vre(Ue.date,U,Z,r,a),style:A==null?void 0:A[Ge.Dropdown],value:a.getMonth(Ue.date)}):F.createElement("span",{key:"month"},T(Ue.date,a)),Ke=l==="dropdown"||l==="dropdown-years"?F.createElement(n.YearsDropdown,{key:"year",className:o[Ge.YearsDropdown],"aria-label":Mt(a.options),classNames:o,components:n,disabled:!!e.disableNavigation,onChange:ri(Ue.date),options:wre(U,Z,r,a,!!e.reverseYears),style:A==null?void 0:A[Ge.Dropdown],value:a.getYear(Ue.date)}):F.createElement("span",{key:"year"},$(Ue.date,a));return a.getMonthYearOrder()==="year-first"?[Ke,Ne]:[Ne,Ke]})(),F.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},j(Ue.date,a.options,a))):F.createElement(n.CaptionLabel,{className:o[Ge.CaptionLabel],role:"status","aria-live":"polite"},j(Ue.date,a.options,a))),f==="around"&&!e.hideNavigation&&be===d-1&&F.createElement(n.NextMonthButton,{type:"button",className:o[Ge.NextMonthButton],tabIndex:Y?void 0:-1,"aria-disabled":Y?void 0:!0,"aria-label":Ze(Y),onClick:Wr,"data-animated-button":e.animate?"true":void 0},F.createElement(n.Chevron,{disabled:Y?void 0:!0,className:o[Ge.Chevron],orientation:e.dir==="rtl"?"left":"right"})),be===d-1&&f==="after"&&!e.hideNavigation&&F.createElement(n.Nav,{"data-animated-nav":e.animate?"true":void 0,className:o[Ge.Nav],style:A==null?void 0:A[Ge.Nav],"aria-label":Le(),onPreviousClick:Vn,onNextClick:Wr,previousMonth:q,nextMonth:Y}),F.createElement(n.MonthGrid,{role:"grid","aria-multiselectable":u==="multiple"||u==="range","aria-label":he(Ue.date,a.options,a)||void 0,className:o[Ge.MonthGrid],style:A==null?void 0:A[Ge.MonthGrid]},!e.hideWeekdays&&F.createElement(n.Weekdays,{"data-animated-weekdays":e.animate?"true":void 0,className:o[Ge.Weekdays],style:A==null?void 0:A[Ge.Weekdays]},P&&F.createElement(n.WeekNumberHeader,{"aria-label":kt(a.options),className:o[Ge.WeekNumberHeader],style:A==null?void 0:A[Ge.WeekNumberHeader],scope:"col"},D()),Rt.map(Ne=>F.createElement(n.Weekday,{"aria-label":qt(Ne,a.options,a),className:o[Ge.Weekday],key:String(Ne),style:A==null?void 0:A[Ge.Weekday],scope:"col"},M(Ne,a.options,a)))),F.createElement(n.Weeks,{"data-animated-weeks":e.animate?"true":void 0,className:o[Ge.Weeks],style:A==null?void 0:A[Ge.Weeks]},Ue.weeks.map(Ne=>F.createElement(n.Week,{className:o[Ge.Week],key:Ne.weekNumber,style:A==null?void 0:A[Ge.Week],week:Ne},P&&F.createElement(n.WeekNumber,{week:Ne,style:A==null?void 0:A[Ge.WeekNumber],"aria-label":Ht(Ne.weekNumber,{locale:s}),className:o[Ge.WeekNumber],scope:"row",role:"rowheader"},N(Ne.weekNumber,a)),Ne.days.map(Ke=>{const{date:rt}=Ke,Je=ce(Ke);if(Je[wn.focused]=!Je.hidden&&!!(ft!=null&&ft.isEqualTo(Ke)),Je[Ba.selected]=(ye==null?void 0:ye(rt))||Je.selected,dj(He)){const{from:fn,to:Dn}=He;Je[Ba.range_start]=!!(fn&&Dn&&a.isSameDay(rt,fn)),Je[Ba.range_end]=!!(fn&&Dn&&a.isSameDay(rt,Dn)),Je[Ba.range_middle]=qs(He,rt,!0,a)}const cr=xre(Je,A,e.modifiersStyles),Ns=are(Je,o,e.modifiersClassNames),ai=!In&&!Je.hidden?Ye(rt,Je,a.options,a):void 0;return F.createElement(n.Day,{key:`${a.format(rt,"yyyy-MM-dd")}_${a.format(Ke.displayMonth,"yyyy-MM")}`,day:Ke,modifiers:Je,className:Ns.join(" "),style:cr,role:"gridcell","aria-selected":Je.selected||void 0,"aria-label":ai,"data-day":a.format(rt,"yyyy-MM-dd"),"data-month":Ke.outside?a.format(rt,"yyyy-MM"):void 0,"data-selected":Je.selected||void 0,"data-disabled":Je.disabled||void 0,"data-hidden":Je.hidden||void 0,"data-outside":Ke.outside||void 0,"data-focused":Je.focused||void 0,"data-today":Je.today||void 0},!Je.hidden&&In?F.createElement(n.DayButton,{className:o[Ge.DayButton],style:A==null?void 0:A[Ge.DayButton],type:"button",day:Ke,modifiers:Je,disabled:Je.disabled||void 0,tabIndex:It(Ke)?0:-1,"aria-label":Qe(rt,Je,a.options,a),onClick:Fn(Ke,Je),onBlur:Tt(Ke,Je),onFocus:Cr(Ke,Je),onKeyDown:vn(Ke,Je),onMouseEnter:Kr(Ke,Je),onMouseLeave:va(Ke,Je)},S(rt,a.options,a)):!Je.hidden&&S(Ke.date,a.options,a))})))))))),e.footer&&F.createElement(n.Footer,{className:o[Ge.Footer],style:A==null?void 0:A[Ge.Footer],role:"status","aria-live":"polite"},e.footer)))}const rie=(t,e)=>{if(!t||!e)return"Indefinido";const n=new Date,r=new Date(t);if(isNaN(r.getTime()))return"Indefinido";const i=(n.getTime()-r.getTime())/(1e3*60*60*24);return e==="Hembra"?i<=60?"Cabrita":i<=365?"Cabritona":"Cabra Primpara":i<=60?"Cabrito":i<=365?"Macho de Levante":"Macho Cabro (Reproductor)"},Jg=({legend:t,children:e})=>c.jsxs("fieldset",{className:"bg-black/20 rounded-2xl p-4 border border-zinc-800/50 space-y-4",children:[c.jsx("legend",{className:"px-2 text-sm font-semibold text-zinc-400",children:t}),e]}),WN=({labelOn:t,labelOff:e,value:n,onChange:r})=>c.jsxs("div",{onClick:()=>r(!n),className:"w-full bg-zinc-800/80 rounded-xl p-1 flex cursor-pointer",children:[c.jsx("span",{className:`w-1/2 text-center font-semibold p-2 rounded-lg transition-all ${n?"bg-zinc-600 text-white":"text-zinc-400"}`,children:t}),c.jsx("span",{className:`w-1/2 text-center font-semibold p-2 rounded-lg transition-all ${n?"text-zinc-400":"bg-zinc-600 text-white"}`,children:e})]}),iie=({onSaveSuccess:t,onCancel:e})=>{const{addAnimal:n,animals:r,lots:i}=at(),[a,s]=O.useState("Hembra"),[o,l]=O.useState(!1),[u,f]=O.useState(""),[d,h]=O.useState(""),[p,v]=O.useState(""),[y,b]=O.useState(""),[x,_]=O.useState(""),[E,P]=O.useState(""),[A,j]=O.useState(""),[S,T]=O.useState(""),[N,D]=O.useState(null),[M,$]=O.useState(!1),[z,H]=O.useState(!1),[ee,U]=O.useState(!1),Z=O.useMemo(()=>rie(d,a),[d,a]),q=async Y=>{if(Y.preventDefault(),D(null),!u||!d){D({type:"error",text:"El ID y la Fecha de Nacimiento son obligatorios."});return}const le={sex:a,isReference:o,birthDate:d,lifecycleStage:Z,conceptionMethod:p,birthWeight:y?parseFloat(y):void 0,fatherId:x||void 0,motherId:E||void 0,racialComposition:A||void 0,location:S||"",status:"Activo",reproductiveStatus:"No Aplica"};try{await n({id:u.toUpperCase(),...le}),D({type:"success",text:`Animal ${u.toUpperCase()} agregado con xito.`}),setTimeout(t,1500)}catch(ce){D({type:"error",text:ce.message||"No se pudo guardar el animal."}),console.error("Error al guardar animal:",ce)}};return c.jsxs(c.Fragment,{children:[c.jsxs("form",{onSubmit:q,className:"w-full space-y-6",children:[c.jsxs(Jg,{legend:"Categora",children:[c.jsx(WN,{labelOn:"Hembra",labelOff:"Macho",value:a==="Hembra",onChange:Y=>s(Y?"Hembra":"Macho")}),c.jsx(WN,{labelOn:"Activo",labelOff:"Referencia",value:!o,onChange:Y=>l(!Y)})]}),c.jsxs(Jg,{legend:"Identificacin",children:[c.jsx("input",{autoFocus:!0,value:u,onChange:Y=>f(Y.target.value),placeholder:"Identificacin del Animal (ID)",className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg",required:!0}),c.jsxs("button",{type:"button",onClick:()=>$(!0),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-left flex justify-between items-center",children:[c.jsx("span",{className:d?"text-white":"text-zinc-500",children:d?new Date(d+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"}):"Fecha de Nacimiento"}),c.jsx(ho,{className:"text-zinc-400",size:20})]}),c.jsxs("div",{className:"bg-zinc-800/80 p-3 rounded-xl text-lg flex justify-between items-center",children:[c.jsx("span",{className:"text-zinc-400",children:"Estado:"}),c.jsx("span",{className:"font-semibold text-white",children:Z})]})]}),c.jsxs(Jg,{legend:"Gentica y Nacimiento",children:[c.jsxs("select",{value:p,onChange:Y=>v(Y.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg",children:[c.jsx("option",{value:"",children:"Origen / Concepcin..."}),c.jsx("option",{value:"MN",children:"Monta Natural (MN)"}),c.jsx("option",{value:"IA",children:"Inseminacin Artificial (IA)"}),c.jsx("option",{value:"TE",children:"Transferencia de Embriones (TE)"})]}),c.jsx("input",{type:"number",step:"0.1",value:y,onChange:Y=>b(Y.target.value),placeholder:"Peso al Nacer (Kg)",className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"}),c.jsxs("button",{type:"button",onClick:()=>U(!0),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-left flex justify-between items-center",children:[c.jsx("span",{className:x?"text-white":"text-zinc-500",children:x||"Padre (Semental)"}),c.jsx(zd,{className:"text-zinc-400",size:20})]}),c.jsxs("button",{type:"button",onClick:()=>H(!0),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-left flex justify-between items-center",children:[c.jsx("span",{className:E?"text-white":"text-zinc-500",children:E||"Madre"}),c.jsx(zd,{className:"text-zinc-400",size:20})]}),c.jsx("input",{value:A,onChange:Y=>j(Y.target.value),placeholder:"Composicin Racial (Ej: 50%A 50%S)",className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),c.jsxs(Jg,{legend:"Manejo",children:[c.jsxs("select",{value:S,onChange:Y=>T(Y.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg",children:[c.jsx("option",{value:"",children:"Ubicacin / Lote (Opcional)..."}),i.map(Y=>c.jsx("option",{value:Y.name,children:Y.name},Y.id))]}),c.jsx("p",{className:"text-xs text-zinc-500 text-center px-4",children:'Si no se asigna un lote, se podr encontrar en el filtro "ltima Carga".'})]}),c.jsxs("div",{className:"space-y-3 pt-4",children:[N&&c.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${N.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[" ",N.type==="success"?c.jsx(ma,{size:18}):c.jsx(yn,{size:18})," ",c.jsx("span",{children:N.text})," "]}),c.jsx("button",{type:"submit",className:"w-full bg-brand-green hover:bg-green-600 text-white font-bold py-4 rounded-xl text-lg",children:"Guardar Animal"}),c.jsx("button",{type:"button",onClick:e,className:"w-full bg-zinc-700 hover:bg-zinc-600 text-white font-semibold py-3 rounded-xl text-lg",children:"Cancelar"})]})]}),c.jsx(yt,{isOpen:M,onClose:()=>$(!1),title:"Seleccionar Fecha de Nacimiento",children:c.jsx("div",{className:"flex justify-center",children:c.jsx(Df,{mode:"single",selected:d?new Date(d+"T00:00:00"):void 0,onSelect:Y=>{Y&&h(Y.toISOString().split("T")[0]),$(!1)},captionLayout:"dropdown",fromYear:new Date().getFullYear()-20,toYear:new Date().getFullYear()})})}),c.jsx(NN,{isOpen:z,onClose:()=>H(!1),onSelect:Y=>{P(Y),H(!1)},animals:r,title:"Seleccionar Madre",filterSex:"Hembra"}),c.jsx(NN,{isOpen:ee,onClose:()=>U(!1),onSelect:Y=>{_(Y),U(!1)},animals:r,title:"Seleccionar Padre",filterSex:"Macho"})]})};function aie({onBack:t}){return c.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-md flex flex-col justify-end animate-fade-in",onClick:t,children:c.jsxs("div",{className:"bg-ios-modal-bg w-full max-w-4xl mx-auto h-[95vh] rounded-t-2xl flex flex-col animate-slide-up",onClick:e=>e.stopPropagation(),children:[c.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between p-4 border-b border-brand-border",children:[c.jsx("div",{className:"w-10"})," ",c.jsx("h1",{className:"text-xl font-bold tracking-tight text-white",children:"Ingresar Nuevo Animal"}),c.jsx("button",{onClick:t,className:"p-2 text-zinc-400 hover:text-white rounded-full hover:bg-zinc-700/50 transition-colors","aria-label":"Cerrar",children:c.jsx(Nl,{size:24})})]}),c.jsx("main",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:c.jsx("div",{className:"max-w-2xl mx-auto",children:c.jsx(iie,{onSaveSuccess:t,onCancel:t})})})]})})}const n6=(t,e)=>{const[n,r]=O.useState(""),i=O.useMemo(()=>n?t.filter(a=>e.some(s=>{const o=a[s];return typeof o=="string"||typeof o=="number"?o.toString().toLowerCase().includes(n.toLowerCase()):!1})):t,[t,n,e]);return{searchTerm:n,setSearchTerm:r,filteredItems:i}},r6=({title:t,subtitle:e,searchTerm:n,setSearchTerm:r})=>{const[i,a]=O.useState(!1),s=O.useRef(null);O.useEffect(()=>{var l;i&&((l=s.current)==null||l.focus())},[i]);const o=()=>{r(""),a(!1)};return c.jsxs("header",{className:"text-center pt-4 pb-4 relative overflow-hidden",children:[c.jsxs("div",{className:`transition-transform duration-300 ${i?"-translate-y-20":"translate-y-0"}`,children:[c.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:t}),c.jsx("p",{className:"text-md text-zinc-400",children:e})]}),c.jsx("div",{className:`absolute inset-0 transition-transform duration-300 flex items-center pt-2 ${i?"translate-y-0":"translate-y-20"}`,children:c.jsx("input",{ref:s,type:"text",value:n,onChange:l=>r(l.target.value),placeholder:"Buscar por ID...",className:"w-full bg-zinc-800 text-white text-lg placeholder-zinc-500 p-3 rounded-xl border-2 border-transparent focus:border-amber-500 focus:ring-0 focus:outline-none"})}),c.jsx("div",{className:"absolute top-4 right-0 pt-1",children:c.jsx("button",{onClick:i?o:()=>a(!0),className:"p-2 text-zinc-400 hover:text-white transition-colors",children:i?c.jsx(Nl,{size:22}):c.jsx(zd,{size:22})})})]})},sie=({statuses:t})=>{if(!t||t.length===0)return null;const e=[...t].sort((n,r)=>{const i=["MILKING","DRYING_OFF","DRY","PREGNANT","IN_SERVICE_CONFIRMED","IN_SERVICE","EMPTY","SIRE_IN_SERVICE"];return i.indexOf(n.key)-i.indexOf(r.key)});return c.jsx("div",{className:"flex items-center space-x-1.5",children:e.map(({key:n,Icon:r,color:i,label:a})=>c.jsx("span",{title:a,children:c.jsx(r,{className:i,size:16,strokeWidth:2.5})},n))})},oie=(t,e,n,r,i)=>{const a=[];if(!t)return[];if(t.sex==="Hembra"){const s=e.filter(o=>o.goatId===t.id&&o.status!=="finalizada").sort((o,l)=>new Date(l.parturitionDate).getTime()-new Date(o.parturitionDate).getTime())[0];s&&(s.status==="activa"?a.push(Ma.MILKING):s.status==="en-secado"?a.push(Ma.DRYING_OFF):s.status==="seca"&&a.push(Ma.DRY))}return t.reproductiveStatus==="Preada"?a.push(Ma.PREGNANT):t.reproductiveStatus==="En Servicio"?n.some(o=>o.femaleId===t.id&&o.sireLotId===t.sireLotId)?a.push(Ma.IN_SERVICE_CONFIRMED):a.push(Ma.IN_SERVICE):(t.reproductiveStatus==="Vaca"||t.reproductiveStatus==="Post-Parto")&&a.push(Ma.EMPTY),t.sex==="Macho"&&new Set(i.filter(o=>o.status==="Activo").flatMap(o=>r.filter(l=>l.seasonId===o.id)).map(o=>o.sireId)).has(t.id)&&a.push(Ma.SIRE_IN_SERVICE),a},lie=["Cabrita","Cabritona","Cabra","Cabrito","Macho de Levante","Macho Cabro"],cie=({animal:t,onSelect:e})=>c.jsxs("button",{onClick:()=>e(t.id),className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-brand-orange transition-colors",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),c.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:[t.sex," | ",t.formattedAge," | Lote: ",t.location||"Sin Asignar"]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(sie,{statuses:t.statusObjects}),c.jsx(Ai,{className:"text-zinc-600"})]})]}),Rw=({title:t,filters:e,activeFilter:n,onFilterChange:r})=>c.jsxs("div",{children:[t&&c.jsx("label",{className:"block text-sm font-semibold text-zinc-400 mb-2",children:t}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:()=>r("all"),className:`px-3 py-1 text-xs font-semibold rounded-full transition-colors ${n==="all"||n==="ALL"?"bg-zinc-600 text-white":"bg-zinc-800/80 text-zinc-300"}`,children:"Todos"}),e.map(i=>{const a=i.Icon||null;return c.jsxs("button",{onClick:()=>r(i.key),className:`flex items-center gap-1.5 px-3 py-1 text-xs font-semibold rounded-full transition-colors ${n===i.key?"bg-brand-green text-white":"bg-zinc-800/80 text-zinc-300"}`,children:[a&&c.jsx(a,{size:14}),i.label]},i.key)})]})]});function uie({navigateTo:t,locationFilter:e}){const{animals:n,parturitions:r,serviceRecords:i,breedingSeasons:a,sireLots:s,isLoading:o}=at(),[l,u]=O.useState("Activos"),[f,d]=O.useState("all"),[h,p]=O.useState("Todos"),[v,y]=O.useState(!1),[b,x]=O.useState("ALL"),[_,E]=O.useState("ALL"),[P,A]=O.useState(!1),[j,S]=O.useState(!1),T=O.useMemo(()=>n.map(U=>({...U,statusObjects:oie(U,r,i,s,a),formattedAge:Ya(U.birthDate),zootecnicCategory:Of(U,r)})),[n,r,i,s,a]),N=O.useMemo(()=>{let U=l==="Activos"?T.filter(Z=>!Z.isReference):T.filter(Z=>Z.isReference);return v?U.sort((Z,q)=>(q.endDate?new Date(q.endDate).getTime():q.createdAt||0)-(Z.endDate?new Date(Z.endDate).getTime():Z.createdAt||0)).slice(0,25):(e&&(U=U.filter(Z=>(Z.location||"Sin Asignar")===e)),l==="Activos"?(b!=="ALL"&&(U=U.filter(Z=>Z.statusObjects.some(q=>q.key===b))),_!=="ALL"&&(U=U.filter(Z=>Z.statusObjects.some(q=>q.key===_)))):f!=="all"&&(U=U.filter(Z=>Z.status===f)),h!=="Todos"&&(U=U.filter(Z=>Z.zootecnicCategory===h)),U)},[T,l,v,e,h,b,_,f]),{searchTerm:D,setSearchTerm:M,filteredItems:$}=n6(N,["id"]),z=()=>{p("Todos"),y(!1),x("ALL"),E("ALL"),d("all"),M("")},H=O.useRef(null),ee=cj({count:$.length,getScrollElement:()=>H.current,estimateSize:()=>104,overscan:5});return o?c.jsx("div",{className:"text-center p-10",children:c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando rebao..."})}):c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[c.jsx(r6,{title:e||"Mi Rebao",subtitle:`${$.length} animales en la vista`,searchTerm:D,setSearchTerm:M}),c.jsxs("div",{className:"space-y-4 px-4",children:[c.jsxs("div",{className:"flex bg-zinc-800 rounded-xl p-1 w-full",children:[c.jsxs("button",{onClick:()=>u("Activos"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors flex items-center justify-center gap-2 ${l==="Activos"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:[c.jsx(iu,{size:16})," Activos"]}),c.jsxs("button",{onClick:()=>u("Referencia"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors flex items-center justify-center gap-2 ${l==="Referencia"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:[c.jsx(sY,{size:16})," Referencia"]})]}),l==="Activos"?c.jsxs("div",{className:"space-y-4 animate-fade-in",children:[c.jsxs("button",{onClick:()=>t({name:"add-animal"}),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[c.jsx(ni,{size:18})," Ingresar Nuevo Animal"]}),c.jsxs("div",{className:"space-y-4 bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsxs("button",{onClick:()=>A(!P),className:"w-full flex justify-between items-center text-sm font-semibold text-zinc-400 hover:text-white transition-colors",children:[c.jsx("span",{children:"Filtros Productivos"}),c.jsx(D_,{className:`transition-transform ${P?"rotate-180":""}`,size:18})]}),P&&c.jsx("div",{className:"animate-fade-in",children:c.jsx(Rw,{title:"",filters:["MILKING","DRYING_OFF","DRY"].map(U=>Ma[U]),activeFilter:b,onFilterChange:x})})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("button",{onClick:()=>S(!j),className:"w-full flex justify-between items-center text-sm font-semibold text-zinc-400 hover:text-white transition-colors",children:[c.jsx("span",{children:"Filtros Reproductivos"}),c.jsx(D_,{className:`transition-transform ${j?"rotate-180":""}`,size:18})]}),j&&c.jsx("div",{className:"animate-fade-in",children:c.jsx(Rw,{title:"",filters:["PREGNANT","IN_SERVICE_CONFIRMED","IN_SERVICE","EMPTY","SIRE_IN_SERVICE"].map(U=>Ma[U]),activeFilter:_,onFilterChange:E})})]})]})]}):c.jsx("div",{className:"space-y-4 bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border animate-fade-in",children:c.jsx(Rw,{title:"Filtrar por Causa de Baja",filters:[{key:"Venta",label:"Venta"},{key:"Muerte",label:"Muerte"},{key:"Descarte",label:"Descarte"}],activeFilter:f,onFilterChange:d})}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("button",{onClick:()=>y(!0),title:"ltima Carga",className:`flex items-center gap-2 py-1 px-3 text-sm font-semibold rounded-lg transition-colors ${v?"text-brand-orange":"text-zinc-400 hover:text-brand-orange"}`,children:[c.jsx(M$,{size:16})," ltima Carga"]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("button",{onClick:()=>t({name:"manage-lots"}),className:"flex items-center gap-2 text-zinc-400 hover:text-brand-orange text-sm font-semibold py-1 px-3",children:[c.jsx(xY,{size:14})," Gestionar Lotes"]}),c.jsxs("button",{onClick:z,className:"flex items-center gap-2 text-zinc-400 hover:text-brand-orange text-sm font-semibold py-1 px-3",children:[c.jsx(gA,{size:14})," Limpiar"]})]})]}),c.jsxs("select",{value:h,onChange:U=>p(U.target.value),className:"w-full bg-brand-glass p-3 rounded-xl text-white border border-brand-border focus:border-brand-orange focus:ring-0",children:[c.jsx("option",{value:"Todos",children:"Todas las Categoras Zootcnicas"}),lie.map(U=>c.jsx("option",{value:U,children:U},U))]})]}),c.jsx("div",{ref:H,className:"pt-4",style:{height:"600px",overflowY:"auto"},children:$.length>0?c.jsx("div",{style:{height:`${ee.getTotalSize()}px`,width:"100%",position:"relative"},children:ee.getVirtualItems().map(U=>{const Z=$[U.index];return c.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${U.size}px`,transform:`translateY(${U.start}px)`,padding:"0 1rem 0.5rem 1rem"},children:c.jsx(cie,{animal:Z,onSelect:()=>t({name:"rebano-profile",animalId:Z.id})})},U.key)})}):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl mx-4",children:c.jsx("p",{className:"text-zinc-400",children:D?`No se encontraron resultados para "${D}"`:"No hay animales que coincidan con los filtros."})})})]})}const die=({isOpen:t,onClose:e})=>{const{addOrigin:n}=at(),[r,i]=O.useState(""),[a,s]=O.useState(""),o=async()=>{if(r.trim()===""){s("El nombre del origen no puede estar vaco.");return}try{await n(r),i(""),s(""),e()}catch(u){s("No se pudo guardar el origen."),console.error(u)}},l=()=>{i(""),s(""),e()};return c.jsx(yt,{isOpen:t,onClose:l,title:"Crear Nuevo Origen",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-sm text-zinc-400",children:"Introduce el nombre de la ganadera o finca de origen."}),c.jsx("div",{children:c.jsx("input",{type:"text",value:r,onChange:u=>i(u.target.value),placeholder:"Ej: Agropecuaria La Bendicin",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0"})}),a&&c.jsx("p",{className:"text-sm text-brand-red",children:a}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[c.jsx("button",{onClick:l,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{onClick:o,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:"Guardar Origen"})]})]})})},fie=t=>{const{events:e}=at();return O.useMemo(()=>t?e.filter(a=>a.animalId===t).sort((a,s)=>new Date(s.date).getTime()-new Date(a.date).getTime()):[],[e,t])},hie=t=>{const{animals:e}=at(),n=O.useMemo(()=>{const i=new Map;return e.forEach(a=>i.set(a.id,a)),i},[e]);return O.useMemo(()=>{const i=(s,o)=>{if(!s||o>3)return;const l=n.get(s);if(!l)return;const u=i(l.fatherId,o+1),f=i(l.motherId,o+1);return{animal:l,sire:u,dam:f}};return i(t,0)||null},[t,n])},fi=({animal:t,onClick:e})=>{const n="bg-zinc-800/80 p-2 rounded-lg border border-zinc-700/80 w-32 text-center shadow-md transition-colors text-xs";if(!t)return c.jsx("div",{className:`${n} bg-zinc-900/50 border-dashed`,children:c.jsx("p",{className:"font-semibold text-zinc-500",children:"Desconocido"})});const r=t.sex==="Hembra"?"text-pink-400":"text-blue-400";return c.jsxs("button",{onClick:()=>e(t.id),className:`${n} hover:border-brand-orange`,children:[c.jsx("p",{className:`font-bold truncate ${r}`,children:t.id}),c.jsx("p",{className:"text-zinc-400",children:t.sex})]})},pie=({rootNode:t,onAncestorClick:e})=>{var i,a,s,o,l,u,f,d,h,p,v,y,b,x,_,E,P,A,j,S,T,N,D,M,$,z,H,ee,U,Z,q,Y,le,ce;if(!t)return c.jsx("div",{className:"text-center p-8 text-zinc-500",children:"No hay datos de genealoga suficientes para mostrar el pedigr."});const n="border-zinc-600",r=c.jsx("div",{className:`w-4 border-t-2 ${n}`});return c.jsxs("div",{className:"flex items-center justify-center p-4 overflow-x-auto",children:[c.jsx("div",{className:"flex flex-col items-center justify-center",children:c.jsxs("div",{className:"bg-zinc-800/80 p-2 rounded-lg border border-zinc-700/80 w-32 text-center shadow-md text-xs",children:[c.jsx("p",{className:`font-bold truncate ${t.animal.sex==="Hembra"?"text-pink-400":"text-blue-400"}`,children:t.animal.id}),c.jsx("p",{className:"text-zinc-400",children:t.animal.sex})]})}),c.jsxs("div",{className:"flex flex-col items-center",children:[r,c.jsx("div",{className:`h-20 border-r-2 ${n}`}),r]}),c.jsxs("div",{className:"flex flex-col items-center justify-around",children:[c.jsx(fi,{animal:(i=t.sire)==null?void 0:i.animal,onClick:e}),c.jsx(fi,{animal:(a=t.dam)==null?void 0:a.animal,onClick:e})]}),c.jsxs("div",{className:"flex flex-col items-center justify-around",children:[c.jsxs("div",{className:"flex items-center",children:[r,c.jsx("div",{className:`h-10 border-r-2 ${n}`}),r]}),c.jsxs("div",{className:"flex items-center",children:[r,c.jsx("div",{className:`h-10 border-r-2 ${n}`}),r]})]}),c.jsxs("div",{className:"flex flex-col items-center justify-around gap-[24px]",children:[c.jsx(fi,{animal:(o=(s=t.sire)==null?void 0:s.sire)==null?void 0:o.animal,onClick:e}),c.jsx(fi,{animal:(u=(l=t.sire)==null?void 0:l.dam)==null?void 0:u.animal,onClick:e}),c.jsx(fi,{animal:(d=(f=t.dam)==null?void 0:f.sire)==null?void 0:d.animal,onClick:e}),c.jsx(fi,{animal:(p=(h=t.dam)==null?void 0:h.dam)==null?void 0:p.animal,onClick:e})]}),c.jsxs("div",{className:"flex flex-col items-center justify-around gap-[24px]",children:[c.jsxs("div",{className:"flex items-center",children:[" ",r," ",c.jsx("div",{className:`h-6 border-r-2 ${n}`})," ",r," "]}),c.jsxs("div",{className:"flex items-center",children:[" ",r," ",c.jsx("div",{className:`h-6 border-r-2 ${n}`})," ",r," "]}),c.jsxs("div",{className:"flex items-center",children:[" ",r," ",c.jsx("div",{className:`h-6 border-r-2 ${n}`})," ",r," "]}),c.jsxs("div",{className:"flex items-center",children:[" ",r," ",c.jsx("div",{className:`h-6 border-r-2 ${n}`})," ",r," "]})]}),c.jsxs("div",{className:"flex flex-col items-center justify-around gap-[8px]",children:[c.jsx(fi,{animal:(b=(y=(v=t.sire)==null?void 0:v.sire)==null?void 0:y.sire)==null?void 0:b.animal,onClick:e}),c.jsx(fi,{animal:(E=(_=(x=t.sire)==null?void 0:x.sire)==null?void 0:_.dam)==null?void 0:E.animal,onClick:e}),c.jsx(fi,{animal:(j=(A=(P=t.sire)==null?void 0:P.dam)==null?void 0:A.sire)==null?void 0:j.animal,onClick:e}),c.jsx(fi,{animal:(N=(T=(S=t.sire)==null?void 0:S.dam)==null?void 0:T.dam)==null?void 0:N.animal,onClick:e}),c.jsx(fi,{animal:($=(M=(D=t.dam)==null?void 0:D.sire)==null?void 0:M.sire)==null?void 0:$.animal,onClick:e}),c.jsx(fi,{animal:(ee=(H=(z=t.dam)==null?void 0:z.sire)==null?void 0:H.dam)==null?void 0:ee.animal,onClick:e}),c.jsx(fi,{animal:(q=(Z=(U=t.dam)==null?void 0:U.dam)==null?void 0:Z.sire)==null?void 0:q.animal,onClick:e}),c.jsx(fi,{animal:(ce=(le=(Y=t.dam)==null?void 0:Y.dam)==null?void 0:le.dam)==null?void 0:ce.animal,onClick:e})]})]})},mie=({animalId:t,birthDate:e,onSave:n,onCancel:r})=>{const[i,a]=O.useState(new Date().toISOString().split("T")[0]),[s,o]=O.useState(""),[l,u]=O.useState(null),[f,d]=O.useState(!1),h=async p=>{p.preventDefault(),u(null),d(!0);const v=parseFloat(s);if(!i||!s||isNaN(v)||v<=0){u("Por favor, introduce una fecha y un peso vlidos."),d(!1);return}if(new Date(i)<new Date(e)){u("La fecha de destete no puede ser anterior a la fecha de nacimiento."),d(!1);return}try{await n({weaningDate:i,weaningWeight:v})}catch(y){u("No se pudo guardar el registro de destete."),console.error(y)}finally{d(!1)}};return c.jsxs("form",{onSubmit:h,className:"space-y-4",children:[c.jsxs("p",{className:"text-sm text-zinc-400",children:["Registra la fecha y el peso al momento de separar a ",c.jsx("span",{className:"font-bold text-white",children:t})," de su madre."]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"weaningDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Destete"}),c.jsx("input",{id:"weaningDate",type:"date",value:i,onChange:p=>a(p.target.value),className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl text-lg",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"weaningWeight",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Peso al Destete (Kg)"}),c.jsx("input",{id:"weaningWeight",type:"number",step:"0.1",value:s,onChange:p=>o(p.target.value),placeholder:"Ej: 15.5",className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl text-lg",required:!0})]}),l&&c.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[c.jsx(yn,{size:18}),c.jsx("span",{children:l})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:r,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:f,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:f?"Guardando...":"Guardar Destete"})]})]})},i6=({isOpen:t,onClose:e,onSave:n})=>{const[r,i]=O.useState(""),[a,s]=O.useState(""),[o,l]=O.useState(""),{fathers:u}=at(),f=()=>{l("");const d=r.trim().toUpperCase(),h=a.trim();if(!d||!h){l("Ambos campos son obligatorios.");return}if(u.some(p=>p.id===d)){l("Este ID ya est en uso. Por favor, elige otro.");return}n({id:d,name:h}),i(""),s("")};return c.jsx(yt,{isOpen:t,onClose:e,title:"Aadir Nuevo Padre",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-sm text-zinc-400",children:"Introduce un ID nico y el nombre del nuevo semental."}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("input",{type:"text",value:r,onChange:d=>i(d.target.value),placeholder:"ID del Padre (ej. P002)",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0"}),c.jsx("input",{type:"text",value:a,onChange:d=>s(d.target.value),placeholder:"Nombre del Padre (ej. Sansn)",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0"})]}),o&&c.jsx("p",{className:"text-sm text-brand-red",children:o}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[c.jsx("button",{onClick:e,className:"px-5 py-2 bg-zinc-600 rounded-lg hover:bg-zinc-500 font-semibold",children:"Cancelar"}),c.jsx("button",{onClick:f,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:"Guardar Padre"})]})]})})},gie={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 da",other:"{{count}} das"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 ao",other:"alrededor de {{count}} aos"},xYears:{one:"1 ao",other:"{{count}} aos"},overXYears:{one:"ms de 1 ao",other:"ms de {{count}} aos"},almostXYears:{one:"casi 1 ao",other:"casi {{count}} aos"}},yie=(t,e,n)=>{let r;const i=gie[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"en "+r:"hace "+r:r},vie={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},xie={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},bie={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},wie={date:xd({formats:vie,defaultWidth:"full"}),time:xd({formats:xie,defaultWidth:"full"}),dateTime:xd({formats:bie,defaultWidth:"full"})},_ie={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'maana a la' p",nextWeek:"eeee 'a la' p",other:"P"},Sie={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'maana a las' p",nextWeek:"eeee 'a las' p",other:"P"},Eie=(t,e,n,r)=>e.getHours()!==1?Sie[t]:_ie[t],Aie={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despus de cristo"]},jie={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},Tie={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},Pie={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s"],abbreviated:["dom","lun","mar","mi","jue","vie","sb"],wide:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},Cie={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"}},kie={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},Nie=(t,e)=>Number(t)+"",Oie={ordinalNumber:Nie,era:ds({values:Aie,defaultWidth:"wide"}),quarter:ds({values:jie,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:ds({values:Tie,defaultWidth:"wide"}),day:ds({values:Pie,defaultWidth:"wide"}),dayPeriod:ds({values:Cie,defaultWidth:"wide",formattingValues:kie,defaultFormattingWidth:"wide"})},Iie=/^(\d+)()?/i,Die=/\d+/i,Mie={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},Rie={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},$ie={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},Lie={any:[/1/i,/2/i,/3/i,/4/i]},zie={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},Vie={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},Fie={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},Bie={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},Uie={narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},Wie={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},Kie={ordinalNumber:Lz({matchPattern:Iie,parsePattern:Die,valueCallback:function(t){return parseInt(t,10)}}),era:fs({matchPatterns:Mie,defaultMatchWidth:"wide",parsePatterns:Rie,defaultParseWidth:"any"}),quarter:fs({matchPatterns:$ie,defaultMatchWidth:"wide",parsePatterns:Lie,defaultParseWidth:"any",valueCallback:t=>t+1}),month:fs({matchPatterns:zie,defaultMatchWidth:"wide",parsePatterns:Vie,defaultParseWidth:"any"}),day:fs({matchPatterns:Fie,defaultMatchWidth:"wide",parsePatterns:Bie,defaultParseWidth:"any"}),dayPeriod:fs({matchPatterns:Uie,defaultMatchWidth:"any",parsePatterns:Wie,defaultParseWidth:"any"})},fj={code:"es",formatDistance:yie,formatLong:wie,formatRelative:Eie,localize:Oie,match:Kie,options:{weekStartsOn:1,firstWeekContainsDate:1}},KN=[{count:1,name:"Simple"},{count:2,name:"Doble"},{count:3,name:"Triple"},{count:4,name:"Cudruple"},{count:5,name:"Quntuple"}],qie=140,qN=7,Hie=`
  .rdp {
    --rdp-cell-size: 40px; --rdp-accent-color: #FF9500; --rdp-background-color: #1c1c1e;
    --rdp-accent-color-dark: #FF9500; --rdp-background-color-dark: #1c1c1e;
    --rdp-outline: 2px solid var(--rdp-accent-color); --rdp-border-radius: 12px; color: #FFF;
  }
  .rdp-caption_label, .rdp-nav_button { color: #FF9500; }
  .rdp-head_cell { color: #8e8e93; }
  .rdp-day_selected { background-color: var(--rdp-accent-color); color: #000; font-weight: bold; }
`,a6=({isOpen:t,onClose:e,motherId:n})=>{const{fathers:r,addFather:i,addParturition:a,parturitions:s}=at(),[o,l]=O.useState(1),[u,f]=O.useState(new Date().toISOString().split("T")[0]),[d,h]=O.useState(""),[p,v]=O.useState(1),[y,b]=O.useState([]),[x,_]=O.useState(!1),[E,P]=O.useState(!1),[A,j]=O.useState(!1),[S,T]=O.useState("");O.useEffect(()=>{t&&(l(1),f(new Date().toISOString().split("T")[0]),h(""),v(1),b([]),j(!1),T(""))},[t]);const N=()=>l(U=>U<4?U+1:U),D=()=>l(U=>U>1?U-1:U),M=U=>{v(U),b(Array.from({length:U},(Z,q)=>({id:`kid_${q}_${Date.now()}`,sex:"Hembra",correlative:"",birthWeight:""}))),N()},$=(U,Z,q)=>{const Y=[...y];let le=q;Z==="birthWeight"&&parseFloat(q)>qN&&(le=qN.toString()),Y[U]={...Y[U],[Z]:le},b(Y)},z=async()=>{var Y;j(!0),T("");const U=s.filter(le=>le.goatId.toUpperCase()===n.toUpperCase()),Z=new Date(u).getTime();if(U.some(le=>{const ce=new Date(le.parturitionDate).getTime();return Math.abs(Z-ce)/(1e3*60*60*24)<qie})){T(`Ya existe un parto registrado para ${n} en una fecha demasiado cercana. Verifique los registros.`),j(!1);return}try{const le=r.find(ye=>ye.id===d);if(!le)throw new Error("Padre no encontrado");const ce=y.map(ye=>({sex:ye.sex,birthWeight:ye.birthWeight,id:`${ye.sex==="Macho"?"X":le.name.charAt(0).toUpperCase()}${ye.correlative}`}));await a({motherId:n.toUpperCase(),parturitionDate:u,sireId:d,parturitionType:((Y=KN.find(ye=>ye.count===p))==null?void 0:Y.name)||"Simple",offspring:ce}),N(),setTimeout(e,2e3)}catch(le){T(le.message||"Error al registrar el parto. Revisa los datos."),console.error(le),j(!1)}},H=O.useMemo(()=>r.find(U=>U.id===d),[d,r]),ee=async U=>{await i(U),h(U.id),_(!1)};return t?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex flex-col justify-end z-50 animate-fade-in",onClick:e,children:c.jsxs("div",{className:"bg-ios-modal-bg w-full h-[95vh] rounded-t-2xl flex flex-col animate-slide-up",onClick:U=>U.stopPropagation(),children:[c.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between p-4 border-b border-brand-border",children:[o>1&&o<4&&c.jsx("button",{onClick:D,className:"p-2 text-zinc-400 hover:text-white",children:c.jsx(or,{size:24})}),c.jsxs("h1",{className:"text-xl font-bold tracking-tight text-white mx-auto",children:["Registrar Parto para ",n]}),o<4?c.jsx("button",{onClick:e,className:"p-2 text-zinc-400 hover:text-white",children:c.jsx(Nl,{size:24})}):c.jsx("div",{className:"w-10"})]}),c.jsxs("main",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:[o===1&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Fecha del Parto"}),c.jsxs("button",{type:"button",onClick:()=>P(!0),className:"w-full bg-zinc-800 p-4 rounded-xl text-lg text-left flex justify-between items-center",children:[c.jsx("span",{className:u?"text-white":"text-zinc-500",children:u?new Date(u+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"}):"Seleccionar Fecha"}),c.jsx(ho,{className:"text-zinc-400",size:20})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Padre (Semental)"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("select",{value:d,onChange:U=>h(U.target.value),className:"w-full bg-zinc-800 p-4 rounded-xl text-lg appearance-none",children:[c.jsx("option",{value:"",children:"Seleccionar Padre..."}),r.map(U=>c.jsxs("option",{value:U.id,children:[U.name," (",U.id,")"]},U.id))]}),c.jsx("button",{type:"button",onClick:()=>_(!0),className:"flex-shrink-0 p-4 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",children:c.jsx(ni,{size:24})})]})]}),c.jsx("button",{onClick:N,disabled:!u||!d,className:"w-full bg-brand-orange text-white font-bold py-4 rounded-xl text-lg disabled:opacity-50",children:"Siguiente"})]}),o===2&&c.jsxs("div",{className:"space-y-6 text-center",children:[c.jsx("h2",{className:"text-2xl font-semibold text-white",children:"Cuntas cras nacieron?"}),c.jsx("div",{className:"grid grid-cols-2 gap-4",children:KN.map(U=>c.jsx("button",{onClick:()=>M(U.count),className:"bg-zinc-800 hover:bg-zinc-700 text-white font-bold py-8 rounded-2xl text-2xl transition-colors",children:U.name},U.count))})]}),o===3&&c.jsxs("div",{className:"space-y-4",children:[y.map((U,Z)=>c.jsxs("div",{className:"bg-black/20 rounded-2xl p-4 border border-zinc-700 space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("p",{className:"font-semibold text-brand-orange",children:["Cra ",Z+1]}),c.jsx("div",{className:"w-40",children:c.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[c.jsx("button",{type:"button",onClick:()=>$(Z,"sex","Hembra"),className:`w-1/2 text-xs rounded-md py-1 transition-all ${U.sex==="Hembra"?"bg-pink-500 text-white":"text-zinc-400"}`,children:"Hembra"}),c.jsx("button",{type:"button",onClick:()=>$(Z,"sex","Macho"),className:`w-1/2 text-xs rounded-md py-1 transition-all ${U.sex==="Macho"?"bg-blue-500 text-white":"text-zinc-400"}`,children:"Macho"})]})})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3 items-center",children:[c.jsxs("div",{className:"flex items-center bg-zinc-800 p-3 rounded-xl gap-2",children:[c.jsx("span",{className:"font-mono text-zinc-400 text-lg",children:U.sex==="Macho"?"X":(H==null?void 0:H.name.charAt(0).toUpperCase())||"?"}),c.jsx("input",{autoFocus:Z===0,value:U.correlative,onChange:q=>$(Z,"correlative",q.target.value.toUpperCase()),placeholder:"ID",className:"w-full bg-transparent text-lg text-white focus:outline-none"})]}),c.jsx("input",{value:U.birthWeight,onChange:q=>$(Z,"birthWeight",q.target.value),placeholder:"Peso (Kg)",type:"number",step:"0.1",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg"})]})]},U.id)),c.jsx("button",{onClick:z,disabled:A||y.some(U=>!U.correlative||!U.birthWeight),className:"w-full bg-brand-green text-white font-bold py-4 rounded-xl text-lg disabled:opacity-50",children:A?"Guardando...":`Guardar Parto y ${p} Cra(s)`}),S&&c.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[c.jsx(yn,{size:18}),c.jsx("span",{children:S})]})]}),o===4&&c.jsxs("div",{className:"text-center flex flex-col justify-center items-center h-full",children:[c.jsx(ma,{size:80,className:"text-brand-green mb-4"}),c.jsx("h2",{className:"text-3xl font-bold text-white",children:"xito!"}),c.jsx("p",{className:"text-lg text-zinc-400",children:"El parto y las cras se han registrado correctamente."})]})]})]})}),c.jsxs(yt,{isOpen:E,onClose:()=>P(!1),title:"Seleccionar Fecha del Parto",children:[c.jsx("style",{children:Hie}),c.jsx("div",{className:"flex justify-center",children:c.jsx(Df,{mode:"single",selected:new Date(u+"T00:00:00"),onSelect:U=>{U&&f(U.toISOString().split("T")[0]),P(!1)},locale:fj,disabled:{after:new Date},captionLayout:"dropdown",fromYear:new Date().getFullYear()-20,toYear:new Date().getFullYear()})})]}),c.jsx(i6,{isOpen:x,onClose:()=>_(!1),onSave:ee})]}):null},Ls=({label:t,value:e,isEditing:n,children:r})=>c.jsxs("div",{children:[c.jsx("dt",{className:"text-sm font-medium text-zinc-400",children:t}),n&&r?r:c.jsx("dd",{className:"mt-1 text-lg font-semibold text-white",children:e||"N/A"})]}),Gie=({animalId:t,navigateTo:e})=>{const n=hie(t);return c.jsx(pie,{rootNode:n,onAncestorClick:r=>e({name:"rebano-profile",animalId:r})})},Yie={Nacimiento:{icon:I$,color:"bg-green-500/20 text-brand-green"},Movimiento:{icon:F$,color:"bg-blue-500/20 text-brand-blue"},"Cambio de Estado":{icon:_Y,color:"bg-yellow-500/20 text-amber-400"},"Pesaje Lechero":{icon:hY,color:"bg-gray-500/20 text-gray-300"},"Pesaje Corporal":{icon:Hm,color:"bg-purple-500/20 text-purple-300"},Servicio:{icon:vA,color:"bg-pink-500/20 text-pink-300"},Tratamiento:{icon:Ax,color:"bg-red-500/20 text-brand-red"},Diagnstico:{icon:ma,color:"bg-teal-500/20 text-teal-300"}},Xie=({animalId:t})=>{const e=fie(t);return e.length===0?c.jsx("div",{className:"text-center p-8 text-zinc-500",children:"Este animal no tiene eventos registrados."}):c.jsx("div",{className:"space-y-3",children:e.map(n=>{const r=Yie[n.type]||{icon:D$,color:"bg-gray-500/20 text-gray-300"},i=r.icon;return c.jsxs("div",{className:"flex items-start gap-4 p-3 bg-black/20 rounded-lg",children:[c.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${r.color}`,children:c.jsx(i,{size:20})}),c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-white",children:n.type}),c.jsx("p",{className:"text-sm text-zinc-300",children:n.details}),c.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:new Date(n.date+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"})})]})]},n.id)})})},Qie=({offspring:t,navigateTo:e})=>t.length===0?c.jsx("div",{className:"text-center p-8 text-zinc-500",children:"Este animal no tiene descendencia registrada."}):c.jsx("div",{className:"space-y-2",children:t.map(n=>c.jsxs("button",{onClick:()=>e({name:"rebano-profile",animalId:n.id}),className:"w-full text-left p-3 bg-black/20 hover:bg-zinc-800/60 rounded-lg transition-colors flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-lg text-white",children:n.id}),c.jsxs("p",{className:"text-sm text-zinc-400",children:[n.sex," | ",Ya(n.birthDate)," | Lote: ",n.location||"Sin Asignar"]})]}),c.jsx(Ai,{className:"text-zinc-600"})]},n.id))}),Zie=({animal:t,parturitions:e,isEditing:n,editedData:r,setEditedData:i,origins:a,onAddOriginClick:s,onLocationClick:o})=>{const l=(d,h)=>{i(p=>({...p,[d]:h}))},u=Ya(t.birthDate),f=Of(t,e);return c.jsxs("dl",{className:"grid grid-cols-2 gap-x-4 gap-y-6",children:[c.jsx(Ls,{label:"ID",value:t.id}),c.jsx(Ls,{label:"Sexo",value:t.sex}),c.jsx(Ls,{label:"Fecha Nacimiento",value:t.birthDate,isEditing:n,children:c.jsx("input",{type:"date",value:r.birthDate||"",onChange:d=>l("birthDate",d.target.value),className:"w-full bg-zinc-700 p-2 rounded-md mt-1"})}),c.jsx(Ls,{label:"Edad",value:u}),c.jsx(Ls,{label:"Ubicacin / Lote",children:!n&&c.jsx("dd",{className:"mt-1 text-lg",children:c.jsx("button",{onClick:o,className:"font-semibold text-brand-orange hover:underline text-left",children:t.location||"Sin Asignar"})})}),c.jsx(Ls,{label:"Estado Fisiolgico",value:f}),c.jsx(Ls,{label:"Origen",value:t.origin,isEditing:n,children:c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c.jsxs("select",{value:r.origin||"",onChange:d=>l("origin",d.target.value),className:"w-full bg-zinc-700 p-2 rounded-md",children:[c.jsx("option",{value:"Finca Masparrito",children:"Finca Masparrito"}),a.map(d=>c.jsx("option",{value:d.name,children:d.name},d.id))]}),c.jsx("button",{type:"button",onClick:s,className:"p-2 bg-brand-orange hover:bg-orange-600 text-white rounded-md",children:c.jsx(Pl,{size:20})})]})}),t.weaningDate&&c.jsx(Ls,{label:"Fecha de Destete",value:new Date(t.weaningDate+"T00:00:00").toLocaleDateString("es-VE")}),t.weaningWeight&&c.jsx(Ls,{label:"Peso al Destete",value:`${t.weaningWeight} Kg`})]})},Jie=({isOpen:t,onClose:e,onConfirm:n,reason:r})=>{const[i,a]=O.useState(new Date().toISOString().split("T")[0]),[s,o]=O.useState(""),[l,u]=O.useState(""),[f,d]=O.useState("Cra"),[h,p]=O.useState(""),[v,y]=O.useState(),[b,x]=O.useState("");if(!t||!r)return null;const _=["Baja produccin","Bajo ndice de crecimiento","Inflamacin articular","Linfadenitis caseosa","Sospecha de otras enfermedades"],E=()=>{n({date:i,price:parseFloat(s)||void 0,buyer:l||void 0,purpose:f,reason:h||void 0,cullReason:v||void 0,cullDetails:v==="Sospecha de otras enfermedades"?b:void 0})};return c.jsx(yt,{isOpen:t,onClose:e,title:`Dar de baja por ${r}`,children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha"}),c.jsx("input",{type:"date",value:i,onChange:P=>a(P.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg"})]}),r==="Venta"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Precio de Venta (Opcional)"}),c.jsx("input",{type:"number",value:s,onChange:P=>o(P.target.value),placeholder:"0.00",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Comprador (Opcional)"}),c.jsx("input",{type:"text",value:l,onChange:P=>u(P.target.value),placeholder:"Nombre del comprador",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fin de la Venta"}),c.jsxs("select",{value:f,onChange:P=>d(P.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",children:[c.jsx("option",{value:"Cra",children:"Cra"}),c.jsx("option",{value:"Carne",children:"Carne"})]})]})]}),r==="Muerte"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Causa / Descripcin de la Muerte"}),c.jsx("textarea",{value:h,onChange:P=>p(P.target.value),placeholder:"Ej: Infeccin, ataque de depredador...",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",rows:3})]}),r==="Descarte"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Causa del Descarte"}),c.jsxs("select",{value:v||"",onChange:P=>y(P.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",children:[c.jsx("option",{value:"",children:"Seleccione una causa..."}),_.map(P=>c.jsx("option",{value:P,children:P},P))]})]}),v==="Sospecha de otras enfermedades"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Especificar Sospecha / Sntomas"}),c.jsx("input",{type:"text",value:b,onChange:P=>x(P.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg"})]})]}),c.jsx("p",{className:"text-sm text-zinc-400",children:'El animal ser movido a la lista de "Referencia". Esta accin no se puede deshacer.'}),c.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[c.jsx("button",{onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{onClick:E,className:"px-5 py-2 bg-brand-red hover:bg-red-700 text-white font-bold rounded-lg",children:"Confirmar Baja"})]})]})})},eae=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i})=>t?c.jsx(yt,{isOpen:t,onClose:e,title:r,children:c.jsxs("div",{className:"space-y-6",children:[c.jsx("p",{className:"text-zinc-300",children:i}),c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{onClick:e,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-6 rounded-lg",children:"Cancelar"}),c.jsx("button",{onClick:()=>{n(),e()},className:"bg-brand-red hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg",children:"Confirmar"})]})]})}):null;function tae({animalId:t,onBack:e,navigateTo:n}){const{animals:r,lots:i,origins:a,parturitions:s,updateAnimal:o,deleteAnimalPermanently:l}=at(),[u,f]=O.useState("main"),[d,h]=O.useState(!1),[p,v]=O.useState({}),[y,b]=O.useState("idle"),[x,_]=O.useState(!1),[E,P]=O.useState(!1),[A,j]=O.useState(!1),[S,T]=O.useState(!1),[N,D]=O.useState(""),[M,$]=O.useState(!1),[z,H]=O.useState(null),[ee,U]=O.useState(!1),[Z,q]=O.useState(!1),[Y,le]=O.useState(!1),ce=O.useMemo(()=>r.find(_e=>_e.id===t),[r,t]),ye=O.useMemo(()=>ce?ce.sex==="Hembra"?r.filter(_e=>_e.motherId===ce.id).sort((_e,Ze)=>new Date(Ze.birthDate).getTime()-new Date(_e.birthDate).getTime()):ce.sex==="Macho"?r.filter(_e=>_e.fatherId===ce.id).sort((_e,Ze)=>new Date(Ze.birthDate).getTime()-new Date(_e.birthDate).getTime()):[]:[],[r,ce]),Ee=O.useMemo(()=>ce?Of(ce,s):"",[ce,s]),He=(ce==null?void 0:ce.breedingFailures)||0,ct=He>=2?"border-brand-red ring-2 ring-brand-red/80":"border-brand-border";O.useEffect(()=>{ce&&(d&&v({birthDate:ce.birthDate,origin:ce.origin}),D(ce.location||""))},[ce,d]);const ft=async()=>{if(ce){b("saving");try{await o(ce.id,p),b("success"),setTimeout(()=>{h(!1),b("idle")},1500)}catch(_e){console.error("Error al actualizar el animal:",_e),b("idle")}}},It=()=>{h(!1)},Dt=async()=>{if(ce)try{await o(ce.id,{location:N}),T(!1)}catch(_e){console.error("Error al actualizar la ubicacin:",_e)}},fe=async _e=>{if(!ce||!z)return;const Ze={status:z,isReference:!0,endDate:_e.date};z==="Venta"&&(_e.price&&(Ze.salePrice=_e.price),_e.buyer&&(Ze.saleBuyer=_e.buyer),_e.purpose&&(Ze.salePurpose=_e.purpose)),z==="Muerte"&&_e.reason&&(Ze.deathReason=_e.reason),z==="Descarte"&&(_e.cullReason&&(Ze.cullReason=_e.cullReason),_e.cullDetails&&(Ze.cullReasonDetails=_e.cullDetails)),await o(ce.id,Ze),H(null),e()},Qe=async()=>{ce&&await o(ce.id,{isReference:!1,status:"Activo"})},Ye=async()=>{ce&&(await l(ce.id),e())},he=async _e=>{ce&&(await o(ce.id,{weaningDate:_e.weaningDate,weaningWeight:_e.weaningWeight}),le(!1))},Se=[{label:"Por Venta",icon:pA,onClick:()=>H("Venta")},{label:"Por Muerte",icon:cY,onClick:()=>H("Muerte"),color:"text-brand-red"},{label:"Por Descarte",icon:ZG,onClick:()=>H("Descarte"),color:"text-brand-red"}],Le=[{label:"Reintegrar a Activos",icon:gY,onClick:Qe},{label:"Eliminar Permanentemente",icon:wo,onClick:()=>q(!0),color:"text-brand-red"}];return ce?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in pb-12",children:[c.jsxs("header",{className:`bg-brand-glass backdrop-blur-xl rounded-b-2xl p-4 border-b border-x sticky top-0 z-10 transition-all ${ct}`,children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(or,{size:24})}),c.jsxs("h1",{className:"text-2xl font-bold tracking-tight text-white flex items-center gap-2",children:[ce.id," ",He===1&&c.jsx("span",{title:"1 fallo reproductivo reportado",children:c.jsx(yn,{className:"text-yellow-400",size:20})})," ",He>=2&&c.jsx("span",{title:`${He} fallos reproductivos reportados`,children:c.jsx(yn,{className:"text-brand-red",size:20})})]}),c.jsx("div",{className:"w-8"})]}),c.jsx("p",{className:"text-center text-brand-orange font-semibold text-sm -mt-1 mb-3 uppercase tracking-wider",children:ce.isReference?"Referencia":ce.location||"Sin Asignar"}),c.jsxs("div",{className:"flex justify-around bg-black/20 rounded-xl p-1",children:[ce.sex==="Hembra"&&c.jsxs(c.Fragment,{children:[" ",c.jsxs("button",{onClick:()=>n({name:"lactation-profile",animalId:ce.id}),className:"flex flex-col items-center p-2 text-blue-300 hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[c.jsx(mA,{size:22}),c.jsx("span",{className:"text-xs mt-1",children:"Leche"})]})," ",c.jsxs("button",{onClick:()=>j(!0),disabled:ce.isReference,className:"flex flex-col items-center p-2 text-pink-400 hover:bg-zinc-700/50 w-full rounded-lg transition-colors disabled:opacity-40 disabled:cursor-not-allowed",children:[c.jsx(I$,{size:22}),c.jsx("span",{className:"text-xs mt-1",children:"Parto"})]})," "]}),(Ee==="Cabrita"||Ee==="Cabrito")&&!ce.weaningDate&&!ce.isReference&&c.jsxs("button",{onClick:()=>le(!0),className:"flex flex-col items-center p-2 text-yellow-300 hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[c.jsx(QG,{size:22}),c.jsx("span",{className:"text-xs mt-1",children:"Destetar"})]}),c.jsxs("button",{onClick:()=>n({name:"growth-profile",animalId:ce.id}),className:"flex flex-col items-center p-2 text-brand-green hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[c.jsx(Hm,{size:22}),c.jsx("span",{className:"text-xs mt-1",children:"Peso"})]}),c.jsxs("button",{onClick:()=>alert("Funcin en desarrollo"),disabled:ce.isReference,className:"flex flex-col items-center p-2 text-teal-300 hover:bg-zinc-700/50 w-full rounded-lg transition-colors disabled:opacity-40 disabled:cursor-not-allowed",children:[c.jsx(Ax,{size:22}),c.jsx("span",{className:"text-xs mt-1",children:"Sanidad"})]}),c.jsxs("button",{onClick:()=>ce.isReference?U(!0):T(!0),className:"flex flex-col items-center p-2 text-brand-blue hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[c.jsx(vY,{size:22}),c.jsx("span",{className:"text-xs mt-1",children:"Mover"})]}),!ce.isReference&&c.jsxs("button",{onClick:()=>$(!0),className:"flex flex-col items-center p-2 text-amber-400 hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[c.jsx(dA,{size:22}),c.jsx("span",{className:"text-xs mt-1",children:"Dar de baja"})]}),c.jsxs("button",{onClick:()=>h(!d),disabled:ce.isReference,className:`flex flex-col items-center p-2 w-full rounded-lg transition-colors ${d?"text-green-400":"text-brand-orange"} hover:bg-zinc-700/50 disabled:opacity-40 disabled:cursor-not-allowed`,children:[c.jsx(Cl,{size:22}),c.jsx("span",{className:"text-xs mt-1",children:"Editar"})]})]})]}),c.jsxs("main",{className:"p-4 space-y-4",children:[c.jsxs("div",{className:"flex bg-brand-glass rounded-xl p-1 border border-brand-border",children:[c.jsx("button",{onClick:()=>f("main"),className:`w-1/4 py-2 text-sm font-semibold rounded-lg transition-colors ${u==="main"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Ficha"}),c.jsx("button",{onClick:()=>f("genetics"),className:`w-1/4 py-2 text-sm font-semibold rounded-lg transition-colors ${u==="genetics"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Genealoga"}),c.jsx("button",{onClick:()=>f("progeny"),className:`w-1/4 py-2 text-sm font-semibold rounded-lg transition-colors ${u==="progeny"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Progenie"}),c.jsx("button",{onClick:()=>f("events"),className:`w-1/4 py-2 text-sm font-semibold rounded-lg transition-colors ${u==="events"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Eventos"})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[u==="main"&&c.jsxs("div",{className:"space-y-6",children:[" ",c.jsx(Zie,{animal:ce,parturitions:s,isEditing:d,editedData:p,setEditedData:v,origins:a,onAddOriginClick:()=>P(!0),onLocationClick:()=>T(!0)})," ",d&&c.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-zinc-700",children:[" ",c.jsxs("button",{onClick:It,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-6 rounded-lg flex items-center gap-2",children:[c.jsx(Nl,{size:18})," Cancelar"]})," ",c.jsxs("button",{onClick:ft,disabled:y!=="idle",className:"bg-brand-green hover:bg-green-600 text-white font-bold py-2 px-6 rounded-lg flex items-center gap-2 disabled:opacity-50 min-w-[130px] justify-center",children:[" ",y==="saving"&&c.jsx("span",{className:"animate-spin h-5 w-5 border-2 border-current border-t-transparent rounded-full"})," ",y==="success"&&c.jsx(ma,{size:18})," ",y==="idle"&&c.jsx(xA,{size:18})," ",c.jsx("span",{className:"ml-2",children:y==="success"?"Guardado":"Guardar"})," "]})," "]})," "]}),u==="genetics"&&c.jsx(Gie,{animalId:ce.id,navigateTo:n}),u==="progeny"&&c.jsx(Qie,{offspring:ye,navigateTo:n}),u==="events"&&c.jsx(Xie,{animalId:ce.id})]})]})]}),c.jsx(yt,{isOpen:S,onClose:()=>T(!1),title:`Cambiar Lote para ${ce.id}`,children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Seleccionar nuevo lote"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("select",{value:N,onChange:_e=>D(_e.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",children:[c.jsx("option",{value:"",children:"Sin Asignar"}),i.map(_e=>c.jsx("option",{value:_e.name,children:_e.name},_e.id))]}),c.jsx("button",{type:"button",onClick:()=>{T(!1),_(!0)},className:"p-3 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",children:c.jsx(Pl,{size:24})})]})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[c.jsx("button",{onClick:()=>T(!1),className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{onClick:Dt,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:"Guardar Cambio"})]})]})}),c.jsx(J_,{isOpen:M,onClose:()=>$(!1),title:"Causa de la Baja",actions:Se}),c.jsx(Jie,{isOpen:!!z,onClose:()=>H(null),onConfirm:fe,reason:z}),c.jsx(J_,{isOpen:ee,onClose:()=>U(!1),title:"Acciones de Referencia",actions:Le}),c.jsx(eae,{isOpen:Z,onClose:()=>q(!1),onConfirm:Ye,title:`Eliminar ${ce.id} Permanentemente?`,message:"Esta accin borrar el registro del animal de la base de datos para siempre y no se puede deshacer."}),c.jsx(K$,{isOpen:x,onClose:()=>_(!1)}),c.jsx(die,{isOpen:E,onClose:()=>P(!1)}),c.jsx(a6,{isOpen:A,onClose:()=>j(!1),motherId:ce.id}),c.jsx(yt,{isOpen:Y,onClose:()=>le(!1),title:`Registrar Destete de ${ce.id}`,children:c.jsx(mie,{animalId:ce.id,birthDate:ce.birthDate,onSave:he,onCancel:()=>le(!1)})})]}):c.jsxs("div",{className:"text-center p-10",children:[c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Animal no encontrado."}),c.jsx("button",{onClick:e,className:"mt-4 text-brand-orange",children:"Volver"})]})}const nae=({animal:t,parturition:e,onSelectAnimal:n})=>c.jsxs("div",{onClick:()=>n(t.id),className:"w-full cursor-pointer text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-amber-400 transition-colors",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),c.jsxs("p",{className:"text-sm text-zinc-400",children:[e.status==="en-secado"&&`Secado desde: ${new Date(e.dryingStartDate).toLocaleDateString()}`,e.status==="seca"&&"Lactancia finalizada"]})]}),c.jsx(Ai,{className:"text-zinc-600"})]});function s6({onSelectAnimal:t,defaultView:e="drying"}){const{animals:n,parturitions:r,isLoading:i}=at(),[a,s]=O.useState(e);O.useEffect(()=>{s(e)},[e]);const o=O.useMemo(()=>{const u=h=>n.find(p=>p.id===h),f=r.filter(h=>h.status==="en-secado").map(h=>({animal:u(h.goatId),parturition:h})).filter(h=>h.animal),d=r.filter(h=>h.status==="seca").map(h=>({animal:u(h.goatId),parturition:h})).filter(h=>h.animal);return{drying:f,dry:d}},[n,r]),l=o[a]||[];return i?c.jsx("div",{className:"text-center p-10",children:c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando datos..."})}):c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[c.jsxs("header",{className:"text-center pt-8 pb-4",children:[c.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white",children:"Gestin de Rebao"}),c.jsx("p",{className:"text-xl text-zinc-400",children:"Animales por Estado de Lactancia"})]}),c.jsx("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-2 border border-brand-border flex justify-between items-center",children:c.jsxs("div",{className:"flex bg-zinc-900/80 rounded-xl p-1 w-full",children:[c.jsxs("button",{onClick:()=>s("drying"),className:`w-1/2 px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors ${a==="drying"?"bg-blue-500 text-white":"text-zinc-300 hover:bg-zinc-700/50"}`,children:["En Secado (",o.drying.length,")"]}),c.jsxs("button",{onClick:()=>s("dry"),className:`w-1/2 px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors ${a==="dry"?"bg-gray-600 text-white":"text-zinc-300 hover:bg-zinc-700/50"}`,children:["Secas (",o.dry.length,")"]})]})}),c.jsx("div",{className:"space-y-2",children:l.length>0?l.map(({animal:u,parturition:f})=>c.jsx(nae,{animal:u,parturition:f,onSelectAnimal:t},f.id)):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:c.jsx("p",{className:"text-zinc-400",children:"No hay animales en este estado."})})})]})}function rae({onBack:t}){const{lots:e,animals:n,parturitions:r,serviceRecords:i,breedingSeasons:a,sireLots:s,addLot:o,deleteLot:l,updateAnimal:u}=at(),[f,d]=O.useState(""),[h,p]=O.useState(!1),[v,y]=O.useState(null),b=async()=>{f.trim()!==""&&(await o(f),d(""))},x=E=>{y(E),p(!0)},_=async E=>{if(!v)return;const P=E.map(A=>u(A,{location:v}));await Promise.all(P),p(!1),y(null)};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[c.jsxs("header",{className:"flex items-center pt-8 pb-4 px-4",children:[c.jsx("button",{onClick:t,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(or,{size:24})}),c.jsxs("div",{className:"text-center flex-grow",children:[c.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Gestionar Lotes Fsicos"}),c.jsx("p",{className:"text-md text-zinc-400",children:"Crea ubicaciones y asigna animales"})]}),c.jsx("div",{className:"w-8"})]}),c.jsx("div",{className:"px-4",children:c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-white",children:"Aadir Nuevo Lote"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",value:f,onChange:E=>d(E.target.value),placeholder:"Nombre del lote...",className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"}),c.jsx("button",{onClick:b,className:"p-3 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",children:c.jsx(ni,{size:24})})]})]})}),c.jsxs("div",{className:"space-y-2 pt-4 px-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-zinc-300 px-2",children:"Lotes Existentes"}),e.length>0?e.map(E=>c.jsxs("div",{className:"w-full text-left bg-brand-glass rounded-2xl p-4 flex justify-between items-center",children:[c.jsx("p",{className:"font-semibold text-white",children:E.name}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{onClick:()=>x(E.name),className:"flex items-center gap-2 bg-zinc-700/80 text-white font-semibold py-2 px-3 rounded-lg hover:bg-zinc-600/80 transition-colors",children:[c.jsx(iu,{size:16})," Asignar"]}),c.jsx("button",{onClick:()=>l(E.id),className:"p-2 text-zinc-500 hover:text-brand-red transition-colors",children:c.jsx(wo,{size:18})})]})]},E.id)):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:c.jsx("p",{className:"text-zinc-500",children:"An no has creado ningn lote."})})]})]}),c.jsx(Nx,{isOpen:h,onClose:()=>p(!1),onSelect:_,animals:n,parturitions:r,serviceRecords:i,breedingSeasons:a,sireLots:s,title:`Asignar animales a: ${v}`})]})}const iae=({onSave:t,onCancel:e})=>{const{fathers:n,addFather:r}=at(),[i,a]=O.useState(""),[s,o]=O.useState(!1),[l,u]=O.useState(null),[f,d]=O.useState(!1),h=async v=>{await r(v),a(v.id),o(!1)},p=async v=>{if(v.preventDefault(),u(null),!i){u("Debes seleccionar un semental.");return}d(!0);try{await t(i)}catch(y){u("No se pudo guardar el lote."),console.error(y),d(!1)}};return c.jsxs(c.Fragment,{children:[c.jsxs("form",{onSubmit:p,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"sire",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Seleccionar Semental"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("select",{id:"sire",value:i,onChange:v=>a(v.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0,children:[c.jsx("option",{value:"",children:"Elegir reproductor..."}),n.map(v=>c.jsxs("option",{value:v.id,children:[v.name," (",v.id,")"]},v.id))]}),c.jsx("button",{type:"button",onClick:()=>o(!0),className:"flex-shrink-0 p-3 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",children:c.jsx(ni,{size:24})})]})]}),l&&c.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[c.jsx(yn,{size:18}),c.jsx("span",{children:l})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:f||!i,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:f?"Guardando...":"Crear Lote"})]})]}),c.jsx(i6,{isOpen:s,onClose:()=>o(!1),onSave:h})]})},Ix=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i})=>t?c.jsx(yt,{isOpen:t,onClose:e,title:r,children:c.jsxs("div",{className:"space-y-6",children:[c.jsx("p",{className:"text-zinc-300",children:i}),c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{onClick:e,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-6 rounded-lg transition-colors",children:"Cancelar"}),c.jsx("button",{onClick:()=>{n(),e()},className:"bg-brand-red hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg transition-colors",children:"Confirmar"})]})]})}):null,aae=({isOpen:t,onClose:e,femalesToTransfer:n,originSeasonId:r,onConfirmTransfer:i})=>{const{breedingSeasons:a}=at(),[s,o]=O.useState(new Set),[l,u]=O.useState(""),[f,d]=O.useState(!1),[h,p]=O.useState("");F.useEffect(()=>{t&&(o(new Set(n.map(x=>x.id))),u(""),p(""))},[t,n]);const v=O.useMemo(()=>a.filter(x=>x.status==="Activo"&&x.id!==r),[a,r]),y=x=>{o(_=>{const E=new Set(_);return E.has(x)?E.delete(x):E.add(x),E})},b=async()=>{if(!l){p("Debes seleccionar una temporada de destino.");return}if(s.size===0){p("Debes seleccionar al menos una hembra para transferir.");return}d(!0),await i(l,Array.from(s)),d(!1),e()};return t?c.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex justify-center items-center z-50 animate-fade-in",onClick:e,children:c.jsxs("div",{className:"bg-ios-modal-bg w-full max-w-lg m-4 rounded-2xl flex flex-col animate-slide-up",onClick:x=>x.stopPropagation(),children:[c.jsx("header",{className:"flex-shrink-0 p-4 border-b border-brand-border",children:c.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Transferir Hembras sin Servicio"})}),c.jsxs("main",{className:"p-6 space-y-4 overflow-y-auto",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:["Hembras a transferir (",s.size,"/",n.length,")"]}),c.jsx("div",{className:"max-h-40 overflow-y-auto space-y-2 p-2 bg-black/20 rounded-lg",children:n.map(x=>c.jsxs("div",{onClick:()=>y(x.id),className:"flex items-center gap-3 p-2 rounded-md hover:bg-zinc-700 cursor-pointer",children:[s.has(x.id)?c.jsx(bA,{className:"text-brand-orange flex-shrink-0"}):c.jsx(wA,{className:"text-zinc-500 flex-shrink-0"}),c.jsx("span",{className:"font-semibold text-white",children:x.id})]},x.id))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"destination",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Transferir a la Temporada:"}),c.jsxs("select",{id:"destination",value:l,onChange:x=>u(x.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",children:[c.jsx("option",{value:"",children:"Seleccionar temporada de destino..."}),v.map(x=>c.jsx("option",{value:x.id,children:x.name},x.id))]})]}),h&&c.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[c.jsx(yn,{size:18}),c.jsx("span",{children:h})]})]}),c.jsxs("footer",{className:"flex-shrink-0 flex justify-end gap-4 p-4 border-t border-brand-border",children:[c.jsx("button",{onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{onClick:b,disabled:f,className:"px-5 py-2 bg-brand-orange hover:bg-orange-600 text-white font-bold rounded-lg disabled:opacity-50",children:f?"Transfiriendo...":`Transferir ${s.size} Hembra(s)`})]})]})}):null},sae=({sireName:t,animalCount:e,dragControls:n})=>c.jsxs("div",{className:"w-full p-4 flex items-center",children:[c.jsx("div",{className:"pl-2 pr-4 cursor-grab touch-none self-stretch flex items-center",onPointerDown:r=>n.start(r),children:c.jsx(yA,{className:"text-zinc-500"})}),c.jsxs("div",{className:"flex-grow",children:[c.jsxs("p",{className:"font-bold text-lg text-white flex items-center gap-2",children:[c.jsx(lj,{})," Lote: ",t]}),c.jsxs("p",{className:"text-sm text-zinc-400 mt-1 flex items-center gap-2",children:[c.jsx(iu,{size:14})," ",e," ",e===1?"hembra asignada":"hembras asignadas"]})]}),c.jsx(Ai,{className:"text-zinc-600"})]}),oae=({lot:t,onEdit:e,onDelete:n,onClick:r,dragControls:i})=>{const a=Nf(),s=O.useRef(!1),o=(l,u)=>{const f=u.offset.x,d=u.velocity.x;if(Math.abs(f)<2){r();return}f<-160/2||d<-500?a.start({x:-160}):a.start({x:0}),setTimeout(()=>{s.current=!1},100)};return c.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-brand-glass border border-brand-border",children:[c.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:[c.jsxs("button",{onClick:e,onPointerDown:l=>l.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[c.jsx(Cl,{size:22}),c.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Editar"})]}),c.jsxs("button",{onClick:n,onPointerDown:l=>l.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-red text-white",children:[c.jsx(wo,{size:22}),c.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Eliminar"})]})]}),c.jsx(Il.div,{drag:"x",dragConstraints:{left:-160,right:0},dragElastic:.1,onDragStart:()=>{s.current=!0},onDragEnd:o,onTap:()=>{s.current||r()},animate:a,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg",children:c.jsx(sae,{sireName:t.sireName,animalCount:t.animalCount,dragControls:i})})]})},lae=({lot:t,navigateTo:e,onEdit:n,onDelete:r})=>{const i=ij();return c.jsx(sj,{value:t,dragListener:!1,dragControls:i,children:c.jsx(oae,{lot:t,dragControls:i,onClick:()=>e({name:"sire-lot-detail",lotId:t.id}),onEdit:()=>n(t),onDelete:()=>r(t)})},t.id)};function cae({seasonId:t,onBack:e,navigateTo:n}){const{breedingSeasons:r,sireLots:i,fathers:a,animals:s,serviceRecords:o,addSireLot:l,updateSireLot:u,deleteSireLot:f,updateAnimal:d}=at(),[h,p]=O.useState(!1),[v,y]=O.useState(void 0),[b,x]=O.useState(null),[_,E]=O.useState(null),[P,A]=O.useState(!1),j=O.useMemo(()=>r.find(U=>U.id===t),[r,t]),S=O.useMemo(()=>i.filter(U=>U.seasonId===t).map(U=>{var Y;const Z=((Y=a.find(le=>le.id===U.sireId))==null?void 0:Y.name)||"Desconocido",q=s.filter(le=>le.sireLotId===U.id).length;return{...U,sireName:Z,animalCount:q}}),[i,t,a,s]),[T,N]=O.useState(S);O.useEffect(()=>{N(S)},[S]);const D=O.useMemo(()=>{if(!j||j.status!=="Cerrado")return[];const U=new Set(S.map(Y=>Y.id)),Z=s.filter(Y=>Y.sireLotId&&U.has(Y.sireLotId)),q=new Set(o.filter(Y=>Y.sireLotId&&U.has(Y.sireLotId)).map(Y=>Y.femaleId));return Z.filter(Y=>!q.has(Y.id))},[j,S,s,o]),M=U=>{y(U),p(!0)},$=async U=>{v?await u(v.id,{sireId:U}):await l({seasonId:t,sireId:U}),p(!1),y(void 0)},z=U=>{U.animalCount>0?E(`No se puede eliminar. Reasigna las ${U.animalCount} hembra(s) a otro lote primero.`):x(U)},H=()=>{b&&(f(b.id),x(null))},ee=async(U,Z)=>{const q=i.find(le=>le.seasonId===U);if(!q){alert("La temporada de destino no tiene lotes de reproductor. Por favor, crea uno primero.");return}const Y=Z.map(le=>d(le,{sireLotId:q.id,reproductiveStatus:"En Servicio"}));await Promise.all(Y)};return j?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 pb-12 animate-fade-in",children:[c.jsxs("header",{className:"flex items-center pt-8 pb-4 px-4",children:[c.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(or,{size:24})}),c.jsxs("div",{className:"text-center flex-grow",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:j.name}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Detalle de la Temporada"})]}),c.jsx("div",{className:"w-8"})]}),c.jsxs("div",{className:"space-y-4 px-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-xl font-semibold text-zinc-300",children:"Lotes de Reproductor"}),c.jsxs("button",{onClick:()=>M(),className:"flex items-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-2 px-3 rounded-lg transition-colors text-sm",children:[c.jsx(ni,{size:16})," Aadir Lote"]})]}),T.length>0?c.jsx(aj,{as:"div",axis:"y",values:T,onReorder:N,className:"space-y-3",children:T.map(U=>c.jsx(lae,{lot:U,navigateTo:n,onEdit:M,onDelete:z},U.id))}):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:c.jsx("p",{className:"text-zinc-500",children:"Esta temporada an no tiene lotes de reproductor."})})]}),j.status==="Cerrado"&&c.jsxs("div",{className:"space-y-4 px-4 pt-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-xl font-semibold text-zinc-300",children:"Resultados: Hembras sin Servicio"}),D.length>0&&c.jsxs("button",{onClick:()=>A(!0),className:"flex items-center gap-2 bg-brand-blue hover:bg-blue-600 text-white font-bold py-2 px-3 rounded-lg text-sm",children:[c.jsx(V$,{size:16})," Transferir"]})]}),c.jsx("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-2",children:D.length>0?D.map(U=>c.jsxs("div",{className:"flex items-center justify-between p-2 bg-black/20 rounded-md",children:[c.jsx("span",{className:"font-semibold text-white",children:U.id}),c.jsxs("span",{className:"text-xs text-zinc-400",children:["Lote Fsico: ",U.location||"N/A"]})]},U.id)):c.jsxs("div",{className:"text-center py-6 flex flex-col items-center gap-2",children:[c.jsx(pY,{size:32,className:"text-zinc-600"}),c.jsx("p",{className:"text-zinc-400 font-semibold",children:"Todas las hembras tuvieron servicio en esta temporada."})]})})]})]}),c.jsx(yt,{isOpen:h,onClose:()=>{p(!1),y(void 0)},title:v?`Editar Lote de ${v.sireName}`:"Aadir Lote de Reproductor",children:c.jsx(iae,{onSave:$,onCancel:()=>{p(!1),y(void 0)}})}),c.jsx(Ix,{isOpen:!!b,onClose:()=>x(null),onConfirm:H,title:`Eliminar Lote de ${b==null?void 0:b.sireName}`,message:"Ests seguro de que quieres eliminar este lote? Esta accin es irreversible."}),c.jsx(yt,{isOpen:!!_,onClose:()=>E(null),title:"Accin no permitida",children:c.jsxs("div",{className:"space-y-4 text-center",children:[" ",c.jsx(yn,{size:40,className:"mx-auto text-amber-400"})," ",c.jsx("p",{className:"text-zinc-300",children:_})," ",c.jsx("button",{onClick:()=>E(null),className:"mt-4 bg-brand-orange text-white font-semibold py-2 px-6 rounded-lg",children:"Entendido"})," "]})}),c.jsx(aae,{isOpen:P,onClose:()=>A(!1),femalesToTransfer:D,originSeasonId:j.id,onConfirmTransfer:ee})]}):c.jsxs("div",{className:"text-center p-10",children:[c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Temporada no encontrada."}),c.jsx("button",{onClick:e,className:"mt-4 text-brand-orange",children:"Volver"})]})}const uae=`
  .rdp {
    --rdp-cell-size: 40px;
    --rdp-accent-color: #FF9500;
    --rdp-background-color: #1c1c1e;
    --rdp-accent-color-dark: #FF9500;
    --rdp-background-color-dark: #1c1c1e;
    --rdp-outline: 2px solid var(--rdp-accent-color);
    --rdp-border-radius: 12px;
    color: #FFF;
  }
  .rdp-caption_label, .rdp-nav_button { color: #FF9500; }
  .rdp-head_cell { color: #8e8e93; }
  .rdp-day_selected { background-color: var(--rdp-accent-color); color: #000; font-weight: bold; }
`,dae=({isOpen:t,onClose:e,onSave:n,animalId:r})=>{if(!t)return null;const i=a=>{a&&n(a),e()};return c.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex justify-center items-end sm:items-center z-50 animate-fade-in",onClick:e,children:c.jsxs("div",{className:"w-full max-w-sm bg-ios-modal-bg rounded-t-2xl sm:rounded-2xl shadow-2xl text-white animate-slide-up",onClick:a=>a.stopPropagation(),children:[c.jsxs("header",{className:"text-center p-3",children:[c.jsxs("h2",{className:"font-semibold text-white",children:["Registrar Servicio para ",r]}),c.jsx("p",{className:"text-sm text-zinc-400",children:"Selecciona la fecha del servicio"})]}),c.jsx("style",{children:uae}),c.jsx("div",{className:"flex justify-center pb-4",children:c.jsx(Df,{mode:"single",onSelect:i,defaultMonth:new Date,locale:fj,disabled:{after:new Date}})})]})})},fae=({animal:t,services:e,onSelect:n,onDeclareServiceClick:r})=>{const i=e.length,a=i>0?new Date(e[e.length-1].serviceDate+"T00:00:00").toLocaleDateString("es-VE"):null,s=Nf(),o=O.useRef(!1),l=(u,f)=>{const d=f.offset.x,h=f.velocity.x;if(Math.abs(d)<2){n(t.id);return}d<-140/2||h<-500?s.start({x:-140}):s.start({x:0}),setTimeout(()=>{o.current=!1},100)};return c.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-brand-glass border border-brand-border",children:[c.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:c.jsxs("button",{onClick:()=>r(t.id),onPointerDown:u=>u.stopPropagation(),className:"h-full w-[140px] flex flex-col items-center justify-center bg-pink-600 text-white",children:[c.jsx(M_,{size:22}),c.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Reg. Servicio"})]})}),c.jsx(Il.div,{drag:"x",dragConstraints:{left:-140,right:0},dragElastic:.1,onDragStart:()=>{o.current=!0},onDragEnd:l,onTap:()=>{o.current||n(t.id)},animate:s,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg p-4",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),c.jsxs("p",{className:"text-sm text-zinc-400",children:[t.sex," | ",Ya(t.birthDate)," | Lote: ",t.location||"Sin Asignar"]})]}),c.jsxs("div",{className:"text-right",children:[i>0?c.jsxs("p",{className:"flex items-center gap-1 text-pink-400 font-semibold",children:[c.jsx(M_,{size:14,fill:"currentColor"})," ",i," Servicios"]}):c.jsx("p",{className:"text-zinc-500 text-sm",children:"Sin servicio"}),a&&c.jsxs("p",{className:"text-xs text-zinc-400",children:["lt: ",a]})]})]})})]})};function hae({lotId:t,navigateTo:e,onBack:n}){const{sireLots:r,fathers:i,animals:a,parturitions:s,serviceRecords:o,breedingSeasons:l,updateAnimal:u,addServiceRecord:f}=at(),[d,h]=O.useState(!1),[p,v]=O.useState(""),[y,b]=O.useState({isOpen:!1,animalId:null}),x=O.useMemo(()=>r.find(S=>S.id===t),[r,t]),_=O.useMemo(()=>{var S;return(S=i.find(T=>T.id===(x==null?void 0:x.sireId)))==null?void 0:S.name},[i,x]),E=O.useMemo(()=>x?a.filter(S=>S.sireLotId===x.id).sort((S,T)=>S.id.localeCompare(T.id)):[],[a,x]),P=O.useMemo(()=>p?E.filter(S=>S.id.toLowerCase().includes(p.toLowerCase())):E,[E,p]),A=async S=>{if(!x)return;const T=S.map(N=>u(N,{sireLotId:x.id,reproductiveStatus:"En Servicio"}));await Promise.all(T)},j=async S=>{!x||!y.animalId||(await f({sireLotId:x.id,femaleId:y.animalId,serviceDate:S.toISOString().split("T")[0]}),b({isOpen:!1,animalId:null}))};return x?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[c.jsxs("header",{className:"flex items-center justify-between pt-8 pb-4 px-4 sticky top-0 bg-gray-900/80 backdrop-blur-lg z-10 border-b border-brand-border",children:[c.jsx("button",{onClick:n,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(or,{size:24})}),c.jsxs("div",{className:"text-center flex-grow",children:[c.jsxs("h1",{className:"text-xl font-bold tracking-tight text-white truncate",children:["Lote: ",_]}),c.jsxs("p",{className:"text-xs text-zinc-400 truncate",children:["Reproductor: ",_," (",x.sireId,")"]})]}),c.jsx("button",{onClick:()=>h(!0),className:"p-2 -mr-2 bg-brand-orange hover:bg-orange-600 text-white rounded-full transition-colors",children:c.jsx(ni,{size:24})})]}),c.jsxs("div",{className:"space-y-4 pt-4 px-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("h3",{className:"text-lg font-semibold text-zinc-300",children:["Hembras Asignadas (",P.length,")"]}),c.jsxs("div",{className:"relative w-40",children:[c.jsx(zd,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-500"}),c.jsx("input",{type:"search",value:p,onChange:S=>v(S.target.value),placeholder:"Buscar...",className:"w-full bg-zinc-800/80 rounded-lg pl-8 pr-2 py-1 text-white border-transparent focus:border-brand-amber focus:ring-0 text-sm"})]})]}),c.jsx("div",{className:"space-y-2",children:P.length>0?P.map(S=>{const T=o.filter(N=>N.femaleId===S.id&&N.sireLotId===x.id).sort((N,D)=>new Date(N.serviceDate).getTime()-new Date(D.serviceDate).getTime());return c.jsx(fae,{animal:S,services:T,lotId:x.id,onSelect:N=>e({name:"rebano-profile",animalId:N}),onDeclareServiceClick:N=>b({isOpen:!0,animalId:N})},S.id)}):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:c.jsx("p",{className:"text-zinc-500",children:p?"No se encontraron coincidencias.":"An no has asignado hembras a este lote."})})})]})]}),c.jsx(Nx,{isOpen:d,onClose:()=>h(!1),onSelect:A,animals:a,parturitions:s,serviceRecords:o,breedingSeasons:l,sireLots:r,title:`Asignar Hembras al Lote de ${_}`,sireIdForInbreedingCheck:x.sireId}),c.jsx(dae,{isOpen:y.isOpen,onClose:()=>b({isOpen:!1,animalId:null}),onSave:j,animalId:y.animalId||""})]}):c.jsxs("div",{className:"text-center p-10",children:[c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Lote de Reproductor no encontrado."}),c.jsx("button",{onClick:n,className:"mt-4 text-brand-orange",children:"Volver"})]})}function o6(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=o6(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function ht(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=o6(t))&&(r&&(r+=" "),r+=e);return r}var pae=Array.isArray,ji=pae,mae=typeof Vu=="object"&&Vu&&Vu.Object===Object&&Vu,l6=mae,gae=l6,yae=typeof self=="object"&&self&&self.Object===Object&&self,vae=gae||yae||Function("return this")(),Cs=vae,xae=Cs,bae=xae.Symbol,rg=bae,HN=rg,c6=Object.prototype,wae=c6.hasOwnProperty,_ae=c6.toString,mh=HN?HN.toStringTag:void 0;function Sae(t){var e=wae.call(t,mh),n=t[mh];try{t[mh]=void 0;var r=!0}catch{}var i=_ae.call(t);return r&&(e?t[mh]=n:delete t[mh]),i}var Eae=Sae,Aae=Object.prototype,jae=Aae.toString;function Tae(t){return jae.call(t)}var Pae=Tae,GN=rg,Cae=Eae,kae=Pae,Nae="[object Null]",Oae="[object Undefined]",YN=GN?GN.toStringTag:void 0;function Iae(t){return t==null?t===void 0?Oae:Nae:YN&&YN in Object(t)?Cae(t):kae(t)}var _o=Iae;function Dae(t){return t!=null&&typeof t=="object"}var So=Dae,Mae=_o,Rae=So,$ae="[object Symbol]";function Lae(t){return typeof t=="symbol"||Rae(t)&&Mae(t)==$ae}var Mf=Lae,zae=ji,Vae=Mf,Fae=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Bae=/^\w*$/;function Uae(t,e){if(zae(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Vae(t)?!0:Bae.test(t)||!Fae.test(t)||e!=null&&t in Object(e)}var hj=Uae;function Wae(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Ml=Wae;const Rf=Vt(Ml);var Kae=_o,qae=Ml,Hae="[object AsyncFunction]",Gae="[object Function]",Yae="[object GeneratorFunction]",Xae="[object Proxy]";function Qae(t){if(!qae(t))return!1;var e=Kae(t);return e==Gae||e==Yae||e==Hae||e==Xae}var pj=Qae;const nt=Vt(pj);var Zae=Cs,Jae=Zae["__core-js_shared__"],ese=Jae,$w=ese,XN=function(){var t=/[^.]+$/.exec($w&&$w.keys&&$w.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function tse(t){return!!XN&&XN in t}var nse=tse,rse=Function.prototype,ise=rse.toString;function ase(t){if(t!=null){try{return ise.call(t)}catch{}try{return t+""}catch{}}return""}var u6=ase,sse=pj,ose=nse,lse=Ml,cse=u6,use=/[\\^$.*+?()[\]{}|]/g,dse=/^\[object .+?Constructor\]$/,fse=Function.prototype,hse=Object.prototype,pse=fse.toString,mse=hse.hasOwnProperty,gse=RegExp("^"+pse.call(mse).replace(use,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function yse(t){if(!lse(t)||ose(t))return!1;var e=sse(t)?gse:dse;return e.test(cse(t))}var vse=yse;function xse(t,e){return t==null?void 0:t[e]}var bse=xse,wse=vse,_se=bse;function Sse(t,e){var n=_se(t,e);return wse(n)?n:void 0}var ou=Sse,Ese=ou,Ase=Ese(Object,"create"),Dx=Ase,QN=Dx;function jse(){this.__data__=QN?QN(null):{},this.size=0}var Tse=jse;function Pse(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Cse=Pse,kse=Dx,Nse="__lodash_hash_undefined__",Ose=Object.prototype,Ise=Ose.hasOwnProperty;function Dse(t){var e=this.__data__;if(kse){var n=e[t];return n===Nse?void 0:n}return Ise.call(e,t)?e[t]:void 0}var Mse=Dse,Rse=Dx,$se=Object.prototype,Lse=$se.hasOwnProperty;function zse(t){var e=this.__data__;return Rse?e[t]!==void 0:Lse.call(e,t)}var Vse=zse,Fse=Dx,Bse="__lodash_hash_undefined__";function Use(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Fse&&e===void 0?Bse:e,this}var Wse=Use,Kse=Tse,qse=Cse,Hse=Mse,Gse=Vse,Yse=Wse;function $f(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}$f.prototype.clear=Kse;$f.prototype.delete=qse;$f.prototype.get=Hse;$f.prototype.has=Gse;$f.prototype.set=Yse;var Xse=$f;function Qse(){this.__data__=[],this.size=0}var Zse=Qse;function Jse(t,e){return t===e||t!==t&&e!==e}var mj=Jse,eoe=mj;function toe(t,e){for(var n=t.length;n--;)if(eoe(t[n][0],e))return n;return-1}var Mx=toe,noe=Mx,roe=Array.prototype,ioe=roe.splice;function aoe(t){var e=this.__data__,n=noe(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():ioe.call(e,n,1),--this.size,!0}var soe=aoe,ooe=Mx;function loe(t){var e=this.__data__,n=ooe(e,t);return n<0?void 0:e[n][1]}var coe=loe,uoe=Mx;function doe(t){return uoe(this.__data__,t)>-1}var foe=doe,hoe=Mx;function poe(t,e){var n=this.__data__,r=hoe(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var moe=poe,goe=Zse,yoe=soe,voe=coe,xoe=foe,boe=moe;function Lf(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Lf.prototype.clear=goe;Lf.prototype.delete=yoe;Lf.prototype.get=voe;Lf.prototype.has=xoe;Lf.prototype.set=boe;var Rx=Lf,woe=ou,_oe=Cs,Soe=woe(_oe,"Map"),gj=Soe,ZN=Xse,Eoe=Rx,Aoe=gj;function joe(){this.size=0,this.__data__={hash:new ZN,map:new(Aoe||Eoe),string:new ZN}}var Toe=joe;function Poe(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var Coe=Poe,koe=Coe;function Noe(t,e){var n=t.__data__;return koe(e)?n[typeof e=="string"?"string":"hash"]:n.map}var $x=Noe,Ooe=$x;function Ioe(t){var e=Ooe(this,t).delete(t);return this.size-=e?1:0,e}var Doe=Ioe,Moe=$x;function Roe(t){return Moe(this,t).get(t)}var $oe=Roe,Loe=$x;function zoe(t){return Loe(this,t).has(t)}var Voe=zoe,Foe=$x;function Boe(t,e){var n=Foe(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var Uoe=Boe,Woe=Toe,Koe=Doe,qoe=$oe,Hoe=Voe,Goe=Uoe;function zf(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}zf.prototype.clear=Woe;zf.prototype.delete=Koe;zf.prototype.get=qoe;zf.prototype.has=Hoe;zf.prototype.set=Goe;var yj=zf,d6=yj,Yoe="Expected a function";function vj(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Yoe);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var s=t.apply(this,r);return n.cache=a.set(i,s)||a,s};return n.cache=new(vj.Cache||d6),n}vj.Cache=d6;var f6=vj;const Xoe=Vt(f6);var Qoe=f6,Zoe=500;function Joe(t){var e=Qoe(t,function(r){return n.size===Zoe&&n.clear(),r}),n=e.cache;return e}var ele=Joe,tle=ele,nle=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rle=/\\(\\)?/g,ile=tle(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(nle,function(n,r,i,a){e.push(i?a.replace(rle,"$1"):r||n)}),e}),ale=ile;function sle(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var xj=sle,JN=rg,ole=xj,lle=ji,cle=Mf,eO=JN?JN.prototype:void 0,tO=eO?eO.toString:void 0;function h6(t){if(typeof t=="string")return t;if(lle(t))return ole(t,h6)+"";if(cle(t))return tO?tO.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var ule=h6,dle=ule;function fle(t){return t==null?"":dle(t)}var p6=fle,hle=ji,ple=hj,mle=ale,gle=p6;function yle(t,e){return hle(t)?t:ple(t,e)?[t]:mle(gle(t))}var m6=yle,vle=Mf;function xle(t){if(typeof t=="string"||vle(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var Lx=xle,ble=m6,wle=Lx;function _le(t,e){e=ble(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[wle(e[n++])];return n&&n==r?t:void 0}var bj=_le,Sle=bj;function Ele(t,e,n){var r=t==null?void 0:Sle(t,e);return r===void 0?n:r}var g6=Ele;const Bi=Vt(g6);function Ale(t){return t==null}var jle=Ale;const st=Vt(jle);var Tle=_o,Ple=ji,Cle=So,kle="[object String]";function Nle(t){return typeof t=="string"||!Ple(t)&&Cle(t)&&Tle(t)==kle}var Ole=Nle;const Wc=Vt(Ole);var y6={exports:{}},Kt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wj=Symbol.for("react.element"),_j=Symbol.for("react.portal"),zx=Symbol.for("react.fragment"),Vx=Symbol.for("react.strict_mode"),Fx=Symbol.for("react.profiler"),Bx=Symbol.for("react.provider"),Ux=Symbol.for("react.context"),Ile=Symbol.for("react.server_context"),Wx=Symbol.for("react.forward_ref"),Kx=Symbol.for("react.suspense"),qx=Symbol.for("react.suspense_list"),Hx=Symbol.for("react.memo"),Gx=Symbol.for("react.lazy"),Dle=Symbol.for("react.offscreen"),v6;v6=Symbol.for("react.module.reference");function ga(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case wj:switch(t=t.type,t){case zx:case Fx:case Vx:case Kx:case qx:return t;default:switch(t=t&&t.$$typeof,t){case Ile:case Ux:case Wx:case Gx:case Hx:case Bx:return t;default:return e}}case _j:return e}}}Kt.ContextConsumer=Ux;Kt.ContextProvider=Bx;Kt.Element=wj;Kt.ForwardRef=Wx;Kt.Fragment=zx;Kt.Lazy=Gx;Kt.Memo=Hx;Kt.Portal=_j;Kt.Profiler=Fx;Kt.StrictMode=Vx;Kt.Suspense=Kx;Kt.SuspenseList=qx;Kt.isAsyncMode=function(){return!1};Kt.isConcurrentMode=function(){return!1};Kt.isContextConsumer=function(t){return ga(t)===Ux};Kt.isContextProvider=function(t){return ga(t)===Bx};Kt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===wj};Kt.isForwardRef=function(t){return ga(t)===Wx};Kt.isFragment=function(t){return ga(t)===zx};Kt.isLazy=function(t){return ga(t)===Gx};Kt.isMemo=function(t){return ga(t)===Hx};Kt.isPortal=function(t){return ga(t)===_j};Kt.isProfiler=function(t){return ga(t)===Fx};Kt.isStrictMode=function(t){return ga(t)===Vx};Kt.isSuspense=function(t){return ga(t)===Kx};Kt.isSuspenseList=function(t){return ga(t)===qx};Kt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===zx||t===Fx||t===Vx||t===Kx||t===qx||t===Dle||typeof t=="object"&&t!==null&&(t.$$typeof===Gx||t.$$typeof===Hx||t.$$typeof===Bx||t.$$typeof===Ux||t.$$typeof===Wx||t.$$typeof===v6||t.getModuleId!==void 0)};Kt.typeOf=ga;y6.exports=Kt;var Mle=y6.exports,Rle=_o,$le=So,Lle="[object Number]";function zle(t){return typeof t=="number"||$le(t)&&Rle(t)==Lle}var x6=zle;const Vle=Vt(x6);var Fle=x6;function Ble(t){return Fle(t)&&t!=+t}var Ule=Ble;const Vf=Vt(Ule);var Yr=function(e){return e===0?0:e>0?1:-1},_c=function(e){return Wc(e)&&e.indexOf("%")===e.length-1},je=function(e){return Vle(e)&&!Vf(e)},Wle=function(e){return st(e)},ir=function(e){return je(e)||Wc(e)},Kle=0,lu=function(e){var n=++Kle;return"".concat(e||"").concat(n)},Xr=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!je(e)&&!Wc(e))return r;var a;if(_c(e)){var s=e.indexOf("%");a=n*parseFloat(e.slice(0,s))/100}else a=+e;return Vf(a)&&(a=r),i&&a>n&&(a=n),a},Go=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},qle=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},nr=function(e,n){return je(e)&&je(n)?function(r){return e+r*(n-e)}:function(){return n}};function Lv(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Bi(r,e))===n})}var Hle=function(e,n){return je(e)&&je(n)?e-n:Wc(e)&&Wc(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function bd(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function tS(t){"@babel/helpers - typeof";return tS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tS(t)}var Gle=["viewBox","children"],Yle=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],nO=["points","pathLength"],Lw={svg:Gle,polygon:nO,polyline:nO},Sj=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],zv=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(O.isValidElement(e)&&(r=e.props),!Rf(r))return null;var i={};return Object.keys(r).forEach(function(a){Sj.includes(a)&&(i[a]=n||function(s){return r[a](r,s)})}),i},Xle=function(e,n,r){return function(i){return e(n,r,i),null}},Kc=function(e,n,r){if(!Rf(e)||tS(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var s=e[a];Sj.includes(a)&&typeof s=="function"&&(i||(i={}),i[a]=Xle(s,n,r))}),i},Qle=["children"],Zle=["children"];function rO(t,e){if(t==null)return{};var n=Jle(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Jle(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function nS(t){"@babel/helpers - typeof";return nS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nS(t)}var iO={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},to=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},aO=null,zw=null,Ej=function t(e){if(e===aO&&Array.isArray(zw))return zw;var n=[];return O.Children.forEach(e,function(r){st(r)||(Mle.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),zw=n,aO=e,n};function Ui(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return to(i)}):r=[to(e)],Ej(t).forEach(function(i){var a=Bi(i,"type.displayName")||Bi(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}function Ri(t,e){var n=Ui(t,e);return n&&n[0]}var sO=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!je(r)||r<=0||!je(i)||i<=0)},ece=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],tce=function(e){return e&&e.type&&Wc(e.type)&&ece.indexOf(e.type)>=0},b6=function(e){return e&&nS(e)==="object"&&"clipDot"in e},nce=function(e,n,r,i){var a,s=(a=Lw==null?void 0:Lw[i])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!nt(e)&&(i&&s.includes(n)||Yle.includes(n))||r&&Sj.includes(n)},qe=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(O.isValidElement(e)&&(i=e.props),!Rf(i))return null;var a={};return Object.keys(i).forEach(function(s){var o;nce((o=i)===null||o===void 0?void 0:o[s],s,n,r)&&(a[s]=i[s])}),a},rS=function t(e,n){if(e===n)return!0;var r=O.Children.count(e);if(r!==O.Children.count(n))return!1;if(r===0)return!0;if(r===1)return oO(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var a=e[i],s=n[i];if(Array.isArray(a)||Array.isArray(s)){if(!t(a,s))return!1}else if(!oO(a,s))return!1}return!0},oO=function(e,n){if(st(e)&&st(n))return!0;if(!st(e)&&!st(n)){var r=e.props||{},i=r.children,a=rO(r,Qle),s=n.props||{},o=s.children,l=rO(s,Zle);return i&&o?bd(a,l)&&rS(i,o):!i&&!o?bd(a,l):!1}return!1},lO=function(e,n){var r=[],i={};return Ej(e).forEach(function(a,s){if(tce(a))r.push(a);else if(a){var o=to(a.type),l=n[o]||{},u=l.handler,f=l.once;if(u&&(!f||!i[o])){var d=u(a,o,s);r.push(d),i[o]=!0}}}),r},rce=function(e){var n=e&&e.type;return n&&iO[n]?iO[n]:null},ice=function(e,n){return Ej(n).indexOf(e)},ace=["children","width","height","viewBox","className","style","title","desc"];function iS(){return iS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iS.apply(this,arguments)}function sce(t,e){if(t==null)return{};var n=oce(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function oce(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function aS(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,a=t.className,s=t.style,o=t.title,l=t.desc,u=sce(t,ace),f=i||{width:n,height:r,x:0,y:0},d=ht("recharts-surface",a);return F.createElement("svg",iS({},qe(u,!0,"svg"),{className:d,width:n,height:r,style:s,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),F.createElement("title",null,o),F.createElement("desc",null,l),e)}var lce=["children","className"];function sS(){return sS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sS.apply(this,arguments)}function cce(t,e){if(t==null)return{};var n=uce(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function uce(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var xt=F.forwardRef(function(t,e){var n=t.children,r=t.className,i=cce(t,lce),a=ht("recharts-layer",r);return F.createElement("g",sS({className:a},qe(i,!0),{ref:e}),n)}),Ka=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]};function dce(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var a=Array(i);++r<i;)a[r]=t[r+e];return a}var fce=dce,hce=fce;function pce(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:hce(t,e,n)}var mce=pce,gce="\\ud800-\\udfff",yce="\\u0300-\\u036f",vce="\\ufe20-\\ufe2f",xce="\\u20d0-\\u20ff",bce=yce+vce+xce,wce="\\ufe0e\\ufe0f",_ce="\\u200d",Sce=RegExp("["+_ce+gce+bce+wce+"]");function Ece(t){return Sce.test(t)}var w6=Ece;function Ace(t){return t.split("")}var jce=Ace,_6="\\ud800-\\udfff",Tce="\\u0300-\\u036f",Pce="\\ufe20-\\ufe2f",Cce="\\u20d0-\\u20ff",kce=Tce+Pce+Cce,Nce="\\ufe0e\\ufe0f",Oce="["+_6+"]",oS="["+kce+"]",lS="\\ud83c[\\udffb-\\udfff]",Ice="(?:"+oS+"|"+lS+")",S6="[^"+_6+"]",E6="(?:\\ud83c[\\udde6-\\uddff]){2}",A6="[\\ud800-\\udbff][\\udc00-\\udfff]",Dce="\\u200d",j6=Ice+"?",T6="["+Nce+"]?",Mce="(?:"+Dce+"(?:"+[S6,E6,A6].join("|")+")"+T6+j6+")*",Rce=T6+j6+Mce,$ce="(?:"+[S6+oS+"?",oS,E6,A6,Oce].join("|")+")",Lce=RegExp(lS+"(?="+lS+")|"+$ce+Rce,"g");function zce(t){return t.match(Lce)||[]}var Vce=zce,Fce=jce,Bce=w6,Uce=Vce;function Wce(t){return Bce(t)?Uce(t):Fce(t)}var Kce=Wce,qce=mce,Hce=w6,Gce=Kce,Yce=p6;function Xce(t){return function(e){e=Yce(e);var n=Hce(e)?Gce(e):void 0,r=n?n[0]:e.charAt(0),i=n?qce(n,1).join(""):e.slice(1);return r[t]()+i}}var Qce=Xce,Zce=Qce,Jce=Zce("toUpperCase"),eue=Jce;const Yx=Vt(eue);function tn(t){return function(){return t}}const P6=Math.cos,Vv=Math.sin,Xa=Math.sqrt,Fv=Math.PI,Xx=2*Fv,cS=Math.PI,uS=2*cS,dc=1e-6,tue=uS-dc;function C6(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function nue(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return C6;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class rue{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?C6:nue(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=r-e,u=i-n,f=s-e,d=o-n,h=f*f+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>dc)if(!(Math.abs(d*l-u*f)>dc)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let p=r-s,v=i-o,y=l*l+u*u,b=p*p+v*v,x=Math.sqrt(y),_=Math.sqrt(h),E=a*Math.tan((cS-Math.acos((y+h-b)/(2*x*_)))/2),P=E/_,A=E/x;Math.abs(P-1)>dc&&this._append`L${e+P*f},${n+P*d}`,this._append`A${a},${a},0,0,${+(d*p>f*v)},${this._x1=e+A*l},${this._y1=n+A*u}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),u=e+o,f=n+l,d=1^s,h=s?i-a:a-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>dc||Math.abs(this._y1-f)>dc)&&this._append`L${u},${f}`,r&&(h<0&&(h=h%uS+uS),h>tue?this._append`A${r},${r},0,1,${d},${e-o},${n-l}A${r},${r},0,1,${d},${this._x1=u},${this._y1=f}`:h>dc&&this._append`A${r},${r},0,${+(h>=cS)},${d},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Aj(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new rue(e)}function jj(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function k6(t){this._context=t}k6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Qx(t){return new k6(t)}function N6(t){return t[0]}function O6(t){return t[1]}function I6(t,e){var n=tn(!0),r=null,i=Qx,a=null,s=Aj(o);t=typeof t=="function"?t:t===void 0?N6:tn(t),e=typeof e=="function"?e:e===void 0?O6:tn(e);function o(l){var u,f=(l=jj(l)).length,d,h=!1,p;for(r==null&&(a=i(p=s())),u=0;u<=f;++u)!(u<f&&n(d=l[u],u,l))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(d,u,l),+e(d,u,l));if(p)return a=null,p+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:tn(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:tn(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:tn(!!l),o):n},o.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),o):i},o.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),o):r},o}function ey(t,e,n){var r=null,i=tn(!0),a=null,s=Qx,o=null,l=Aj(u);t=typeof t=="function"?t:t===void 0?N6:tn(+t),e=typeof e=="function"?e:tn(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?O6:tn(+n);function u(d){var h,p,v,y=(d=jj(d)).length,b,x=!1,_,E=new Array(y),P=new Array(y);for(a==null&&(o=s(_=l())),h=0;h<=y;++h){if(!(h<y&&i(b=d[h],h,d))===x)if(x=!x)p=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),v=h-1;v>=p;--v)o.point(E[v],P[v]);o.lineEnd(),o.areaEnd()}x&&(E[h]=+t(b,h,d),P[h]=+e(b,h,d),o.point(r?+r(b,h,d):E[h],n?+n(b,h,d):P[h]))}if(_)return o=null,_+""||null}function f(){return I6().defined(i).curve(s).context(a)}return u.x=function(d){return arguments.length?(t=typeof d=="function"?d:tn(+d),r=null,u):t},u.x0=function(d){return arguments.length?(t=typeof d=="function"?d:tn(+d),u):t},u.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:tn(+d),u):r},u.y=function(d){return arguments.length?(e=typeof d=="function"?d:tn(+d),n=null,u):e},u.y0=function(d){return arguments.length?(e=typeof d=="function"?d:tn(+d),u):e},u.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:tn(+d),u):n},u.lineX0=u.lineY0=function(){return f().x(t).y(e)},u.lineY1=function(){return f().x(t).y(n)},u.lineX1=function(){return f().x(r).y(e)},u.defined=function(d){return arguments.length?(i=typeof d=="function"?d:tn(!!d),u):i},u.curve=function(d){return arguments.length?(s=d,a!=null&&(o=s(a)),u):s},u.context=function(d){return arguments.length?(d==null?a=o=null:o=s(a=d),u):a},u}class D6{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function iue(t){return new D6(t,!0)}function aue(t){return new D6(t,!1)}const Tj={draw(t,e){const n=Xa(e/Fv);t.moveTo(n,0),t.arc(0,0,n,0,Xx)}},sue={draw(t,e){const n=Xa(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},M6=Xa(1/3),oue=M6*2,lue={draw(t,e){const n=Xa(e/oue),r=n*M6;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},cue={draw(t,e){const n=Xa(e),r=-n/2;t.rect(r,r,n,n)}},uue=.8908130915292852,R6=Vv(Fv/10)/Vv(7*Fv/10),due=Vv(Xx/10)*R6,fue=-P6(Xx/10)*R6,hue={draw(t,e){const n=Xa(e*uue),r=due*n,i=fue*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const s=Xx*a/5,o=P6(s),l=Vv(s);t.lineTo(l*n,-o*n),t.lineTo(o*r-l*i,l*r+o*i)}t.closePath()}},Vw=Xa(3),pue={draw(t,e){const n=-Xa(e/(Vw*3));t.moveTo(0,n*2),t.lineTo(-Vw*n,-n),t.lineTo(Vw*n,-n),t.closePath()}},ea=-.5,ta=Xa(3)/2,dS=1/Xa(12),mue=(dS/2+1)*3,gue={draw(t,e){const n=Xa(e/mue),r=n/2,i=n*dS,a=r,s=n*dS+n,o=-a,l=s;t.moveTo(r,i),t.lineTo(a,s),t.lineTo(o,l),t.lineTo(ea*r-ta*i,ta*r+ea*i),t.lineTo(ea*a-ta*s,ta*a+ea*s),t.lineTo(ea*o-ta*l,ta*o+ea*l),t.lineTo(ea*r+ta*i,ea*i-ta*r),t.lineTo(ea*a+ta*s,ea*s-ta*a),t.lineTo(ea*o+ta*l,ea*l-ta*o),t.closePath()}};function yue(t,e){let n=null,r=Aj(i);t=typeof t=="function"?t:tn(t||Tj),e=typeof e=="function"?e:tn(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:tn(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:tn(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function Bv(){}function Uv(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function $6(t){this._context=t}$6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Uv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Uv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function vue(t){return new $6(t)}function L6(t){this._context=t}L6.prototype={areaStart:Bv,areaEnd:Bv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Uv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function xue(t){return new L6(t)}function z6(t){this._context=t}z6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Uv(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function bue(t){return new z6(t)}function V6(t){this._context=t}V6.prototype={areaStart:Bv,areaEnd:Bv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function wue(t){return new V6(t)}function cO(t){return t<0?-1:1}function uO(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(cO(a)+cO(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function dO(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Fw(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-r)/3;t._context.bezierCurveTo(r+o,i+o*e,a-o,s-o*n,a,s)}function Wv(t){this._context=t}Wv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Fw(this,this._t0,dO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Fw(this,dO(this,n=uO(this,t,e)),n);break;default:Fw(this,this._t0,n=uO(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function F6(t){this._context=new B6(t)}(F6.prototype=Object.create(Wv.prototype)).point=function(t,e){Wv.prototype.point.call(this,e,t)};function B6(t){this._context=t}B6.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function _ue(t){return new Wv(t)}function Sue(t){return new F6(t)}function U6(t){this._context=t}U6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=fO(t),i=fO(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function fO(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function Eue(t){return new U6(t)}function Zx(t,e){this._context=t,this._t=e}Zx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Aue(t){return new Zx(t,.5)}function jue(t){return new Zx(t,0)}function Tue(t){return new Zx(t,1)}function Kd(t,e){if((s=t.length)>1)for(var n=1,r,i,a=t[e[0]],s,o=a.length;n<s;++n)for(i=a,a=t[e[n]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function fS(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Pue(t,e){return t[e]}function Cue(t){const e=[];return e.key=t,e}function kue(){var t=tn([]),e=fS,n=Kd,r=Pue;function i(a){var s=Array.from(t.apply(this,arguments),Cue),o,l=s.length,u=-1,f;for(const d of a)for(o=0,++u;o<l;++o)(s[o][u]=[0,+r(d,s[o].key,u,a)]).data=d;for(o=0,f=jj(e(s));o<l;++o)s[f[o]].index=o;return n(s,f),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:tn(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:tn(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?fS:typeof a=="function"?a:tn(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??Kd,i):n},i}function Nue(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}Kd(t,e)}}function Oue(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var s=0,o=0;s<i;++s)o+=t[s][n][1]||0;r[n][1]+=r[n][0]=-o/2}Kd(t,e)}}function Iue(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var o=0,l=0,u=0;o<s;++o){for(var f=t[e[o]],d=f[r][1]||0,h=f[r-1][1]||0,p=(d-h)/2,v=0;v<o;++v){var y=t[e[v]],b=y[r][1]||0,x=y[r-1][1]||0;p+=b-x}l+=d,u+=p*d}i[r-1][1]+=i[r-1][0]=n,l&&(n-=u/l)}i[r-1][1]+=i[r-1][0]=n,Kd(t,e)}}function Hp(t){"@babel/helpers - typeof";return Hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hp(t)}var Due=["type","size","sizeType"];function hS(){return hS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hS.apply(this,arguments)}function hO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hO(Object(n),!0).forEach(function(r){Mue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mue(t,e,n){return e=Rue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rue(t){var e=$ue(t,"string");return Hp(e)=="symbol"?e:e+""}function $ue(t,e){if(Hp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Hp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lue(t,e){if(t==null)return{};var n=zue(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function zue(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var W6={symbolCircle:Tj,symbolCross:sue,symbolDiamond:lue,symbolSquare:cue,symbolStar:hue,symbolTriangle:pue,symbolWye:gue},Vue=Math.PI/180,Fue=function(e){var n="symbol".concat(Yx(e));return W6[n]||Tj},Bue=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*Vue;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Uue=function(e,n){W6["symbol".concat(Yx(e))]=n},Pj=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,a=i===void 0?64:i,s=e.sizeType,o=s===void 0?"area":s,l=Lue(e,Due),u=pO(pO({},l),{},{type:r,size:a,sizeType:o}),f=function(){var b=Fue(r),x=yue().type(b).size(Bue(a,o,r));return x()},d=u.className,h=u.cx,p=u.cy,v=qe(u,!0);return h===+h&&p===+p&&a===+a?F.createElement("path",hS({},v,{className:ht("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(p,")"),d:f()})):null};Pj.registerSymbol=Uue;function qd(t){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qd(t)}function pS(){return pS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pS.apply(this,arguments)}function mO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Wue(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mO(Object(n),!0).forEach(function(r){Gp(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function que(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,q6(r.key),r)}}function Hue(t,e,n){return e&&que(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gue(t,e,n){return e=Kv(e),Yue(t,K6()?Reflect.construct(e,n||[],Kv(t).constructor):e.apply(t,n))}function Yue(t,e){if(e&&(qd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xue(t)}function Xue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function K6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(K6=function(){return!!t})()}function Kv(t){return Kv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kv(t)}function Que(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mS(t,e)}function mS(t,e){return mS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},mS(t,e)}function Gp(t,e,n){return e=q6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q6(t){var e=Zue(t,"string");return qd(e)=="symbol"?e:e+""}function Zue(t,e){if(qd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(qd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var na=32,Cj=function(t){function e(){return Kue(this,e),Gue(this,e,arguments)}return Que(e,t),Hue(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,a=na/2,s=na/6,o=na/3,l=r.inactive?i:r.color;if(r.type==="plainline")return F.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:na,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return F.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(na,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return F.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(na/8,"h").concat(na,"v").concat(na*3/4,"h").concat(-na,"z"),className:"recharts-legend-icon"});if(F.isValidElement(r.legendIcon)){var u=Wue({},r);return delete u.legendIcon,F.cloneElement(r.legendIcon,u)}return F.createElement(Pj,{fill:l,cx:a,cy:a,size:na,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,a=i.payload,s=i.iconSize,o=i.layout,l=i.formatter,u=i.inactiveColor,f={x:0,y:0,width:na,height:na},d={display:o==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(p,v){var y=p.formatter||l,b=ht(Gp(Gp({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",p.inactive));if(p.type==="none")return null;var x=nt(p.value)?null:p.value;Ka(!nt(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var _=p.inactive?u:p.color;return F.createElement("li",pS({className:b,style:d,key:"legend-item-".concat(v)},Kc(r.props,p,v)),F.createElement(aS,{width:s,height:s,viewBox:f,style:h},r.renderIcon(p)),F.createElement("span",{className:"recharts-legend-item-text",style:{color:_}},y?y(x,p,v):x))})}},{key:"render",value:function(){var r=this.props,i=r.payload,a=r.layout,s=r.align;if(!i||!i.length)return null;var o={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return F.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(O.PureComponent);Gp(Cj,"displayName","Legend");Gp(Cj,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Jue=Rx;function ede(){this.__data__=new Jue,this.size=0}var tde=ede;function nde(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var rde=nde;function ide(t){return this.__data__.get(t)}var ade=ide;function sde(t){return this.__data__.has(t)}var ode=sde,lde=Rx,cde=gj,ude=yj,dde=200;function fde(t,e){var n=this.__data__;if(n instanceof lde){var r=n.__data__;if(!cde||r.length<dde-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new ude(r)}return n.set(t,e),this.size=n.size,this}var hde=fde,pde=Rx,mde=tde,gde=rde,yde=ade,vde=ode,xde=hde;function Ff(t){var e=this.__data__=new pde(t);this.size=e.size}Ff.prototype.clear=mde;Ff.prototype.delete=gde;Ff.prototype.get=yde;Ff.prototype.has=vde;Ff.prototype.set=xde;var H6=Ff,bde="__lodash_hash_undefined__";function wde(t){return this.__data__.set(t,bde),this}var _de=wde;function Sde(t){return this.__data__.has(t)}var Ede=Sde,Ade=yj,jde=_de,Tde=Ede;function qv(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Ade;++e<n;)this.add(t[e])}qv.prototype.add=qv.prototype.push=jde;qv.prototype.has=Tde;var G6=qv;function Pde(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Y6=Pde;function Cde(t,e){return t.has(e)}var X6=Cde,kde=G6,Nde=Y6,Ode=X6,Ide=1,Dde=2;function Mde(t,e,n,r,i,a){var s=n&Ide,o=t.length,l=e.length;if(o!=l&&!(s&&l>o))return!1;var u=a.get(t),f=a.get(e);if(u&&f)return u==e&&f==t;var d=-1,h=!0,p=n&Dde?new kde:void 0;for(a.set(t,e),a.set(e,t);++d<o;){var v=t[d],y=e[d];if(r)var b=s?r(y,v,d,e,t,a):r(v,y,d,t,e,a);if(b!==void 0){if(b)continue;h=!1;break}if(p){if(!Nde(e,function(x,_){if(!Ode(p,_)&&(v===x||i(v,x,n,r,a)))return p.push(_)})){h=!1;break}}else if(!(v===y||i(v,y,n,r,a))){h=!1;break}}return a.delete(t),a.delete(e),h}var Q6=Mde,Rde=Cs,$de=Rde.Uint8Array,Lde=$de;function zde(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var Vde=zde;function Fde(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var kj=Fde,gO=rg,yO=Lde,Bde=mj,Ude=Q6,Wde=Vde,Kde=kj,qde=1,Hde=2,Gde="[object Boolean]",Yde="[object Date]",Xde="[object Error]",Qde="[object Map]",Zde="[object Number]",Jde="[object RegExp]",efe="[object Set]",tfe="[object String]",nfe="[object Symbol]",rfe="[object ArrayBuffer]",ife="[object DataView]",vO=gO?gO.prototype:void 0,Bw=vO?vO.valueOf:void 0;function afe(t,e,n,r,i,a,s){switch(n){case ife:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case rfe:return!(t.byteLength!=e.byteLength||!a(new yO(t),new yO(e)));case Gde:case Yde:case Zde:return Bde(+t,+e);case Xde:return t.name==e.name&&t.message==e.message;case Jde:case tfe:return t==e+"";case Qde:var o=Wde;case efe:var l=r&qde;if(o||(o=Kde),t.size!=e.size&&!l)return!1;var u=s.get(t);if(u)return u==e;r|=Hde,s.set(t,e);var f=Ude(o(t),o(e),r,i,a,s);return s.delete(t),f;case nfe:if(Bw)return Bw.call(t)==Bw.call(e)}return!1}var sfe=afe;function ofe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var Z6=ofe,lfe=Z6,cfe=ji;function ufe(t,e,n){var r=e(t);return cfe(t)?r:lfe(r,n(t))}var dfe=ufe;function ffe(t,e){for(var n=-1,r=t==null?0:t.length,i=0,a=[];++n<r;){var s=t[n];e(s,n,t)&&(a[i++]=s)}return a}var hfe=ffe;function pfe(){return[]}var mfe=pfe,gfe=hfe,yfe=mfe,vfe=Object.prototype,xfe=vfe.propertyIsEnumerable,xO=Object.getOwnPropertySymbols,bfe=xO?function(t){return t==null?[]:(t=Object(t),gfe(xO(t),function(e){return xfe.call(t,e)}))}:yfe,wfe=bfe;function _fe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var Sfe=_fe,Efe=_o,Afe=So,jfe="[object Arguments]";function Tfe(t){return Afe(t)&&Efe(t)==jfe}var Pfe=Tfe,bO=Pfe,Cfe=So,J6=Object.prototype,kfe=J6.hasOwnProperty,Nfe=J6.propertyIsEnumerable,Ofe=bO(function(){return arguments}())?bO:function(t){return Cfe(t)&&kfe.call(t,"callee")&&!Nfe.call(t,"callee")},Nj=Ofe,Hv={exports:{}};function Ife(){return!1}var Dfe=Ife;Hv.exports;(function(t,e){var n=Cs,r=Dfe,i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,s=a&&a.exports===i,o=s?n.Buffer:void 0,l=o?o.isBuffer:void 0,u=l||r;t.exports=u})(Hv,Hv.exports);var eV=Hv.exports,Mfe=9007199254740991,Rfe=/^(?:0|[1-9]\d*)$/;function $fe(t,e){var n=typeof t;return e=e??Mfe,!!e&&(n=="number"||n!="symbol"&&Rfe.test(t))&&t>-1&&t%1==0&&t<e}var Oj=$fe,Lfe=9007199254740991;function zfe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Lfe}var Ij=zfe,Vfe=_o,Ffe=Ij,Bfe=So,Ufe="[object Arguments]",Wfe="[object Array]",Kfe="[object Boolean]",qfe="[object Date]",Hfe="[object Error]",Gfe="[object Function]",Yfe="[object Map]",Xfe="[object Number]",Qfe="[object Object]",Zfe="[object RegExp]",Jfe="[object Set]",ehe="[object String]",the="[object WeakMap]",nhe="[object ArrayBuffer]",rhe="[object DataView]",ihe="[object Float32Array]",ahe="[object Float64Array]",she="[object Int8Array]",ohe="[object Int16Array]",lhe="[object Int32Array]",che="[object Uint8Array]",uhe="[object Uint8ClampedArray]",dhe="[object Uint16Array]",fhe="[object Uint32Array]",ln={};ln[ihe]=ln[ahe]=ln[she]=ln[ohe]=ln[lhe]=ln[che]=ln[uhe]=ln[dhe]=ln[fhe]=!0;ln[Ufe]=ln[Wfe]=ln[nhe]=ln[Kfe]=ln[rhe]=ln[qfe]=ln[Hfe]=ln[Gfe]=ln[Yfe]=ln[Xfe]=ln[Qfe]=ln[Zfe]=ln[Jfe]=ln[ehe]=ln[the]=!1;function hhe(t){return Bfe(t)&&Ffe(t.length)&&!!ln[Vfe(t)]}var phe=hhe;function mhe(t){return function(e){return t(e)}}var tV=mhe,Gv={exports:{}};Gv.exports;(function(t,e){var n=l6,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,s=a&&n.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();t.exports=o})(Gv,Gv.exports);var ghe=Gv.exports,yhe=phe,vhe=tV,wO=ghe,_O=wO&&wO.isTypedArray,xhe=_O?vhe(_O):yhe,nV=xhe,bhe=Sfe,whe=Nj,_he=ji,She=eV,Ehe=Oj,Ahe=nV,jhe=Object.prototype,The=jhe.hasOwnProperty;function Phe(t,e){var n=_he(t),r=!n&&whe(t),i=!n&&!r&&She(t),a=!n&&!r&&!i&&Ahe(t),s=n||r||i||a,o=s?bhe(t.length,String):[],l=o.length;for(var u in t)(e||The.call(t,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Ehe(u,l)))&&o.push(u);return o}var Che=Phe,khe=Object.prototype;function Nhe(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||khe;return t===n}var Ohe=Nhe;function Ihe(t,e){return function(n){return t(e(n))}}var rV=Ihe,Dhe=rV,Mhe=Dhe(Object.keys,Object),Rhe=Mhe,$he=Ohe,Lhe=Rhe,zhe=Object.prototype,Vhe=zhe.hasOwnProperty;function Fhe(t){if(!$he(t))return Lhe(t);var e=[];for(var n in Object(t))Vhe.call(t,n)&&n!="constructor"&&e.push(n);return e}var Bhe=Fhe,Uhe=pj,Whe=Ij;function Khe(t){return t!=null&&Whe(t.length)&&!Uhe(t)}var ig=Khe,qhe=Che,Hhe=Bhe,Ghe=ig;function Yhe(t){return Ghe(t)?qhe(t):Hhe(t)}var Jx=Yhe,Xhe=dfe,Qhe=wfe,Zhe=Jx;function Jhe(t){return Xhe(t,Zhe,Qhe)}var epe=Jhe,SO=epe,tpe=1,npe=Object.prototype,rpe=npe.hasOwnProperty;function ipe(t,e,n,r,i,a){var s=n&tpe,o=SO(t),l=o.length,u=SO(e),f=u.length;if(l!=f&&!s)return!1;for(var d=l;d--;){var h=o[d];if(!(s?h in e:rpe.call(e,h)))return!1}var p=a.get(t),v=a.get(e);if(p&&v)return p==e&&v==t;var y=!0;a.set(t,e),a.set(e,t);for(var b=s;++d<l;){h=o[d];var x=t[h],_=e[h];if(r)var E=s?r(_,x,h,e,t,a):r(x,_,h,t,e,a);if(!(E===void 0?x===_||i(x,_,n,r,a):E)){y=!1;break}b||(b=h=="constructor")}if(y&&!b){var P=t.constructor,A=e.constructor;P!=A&&"constructor"in t&&"constructor"in e&&!(typeof P=="function"&&P instanceof P&&typeof A=="function"&&A instanceof A)&&(y=!1)}return a.delete(t),a.delete(e),y}var ape=ipe,spe=ou,ope=Cs,lpe=spe(ope,"DataView"),cpe=lpe,upe=ou,dpe=Cs,fpe=upe(dpe,"Promise"),hpe=fpe,ppe=ou,mpe=Cs,gpe=ppe(mpe,"Set"),iV=gpe,ype=ou,vpe=Cs,xpe=ype(vpe,"WeakMap"),bpe=xpe,gS=cpe,yS=gj,vS=hpe,xS=iV,bS=bpe,aV=_o,Bf=u6,EO="[object Map]",wpe="[object Object]",AO="[object Promise]",jO="[object Set]",TO="[object WeakMap]",PO="[object DataView]",_pe=Bf(gS),Spe=Bf(yS),Epe=Bf(vS),Ape=Bf(xS),jpe=Bf(bS),fc=aV;(gS&&fc(new gS(new ArrayBuffer(1)))!=PO||yS&&fc(new yS)!=EO||vS&&fc(vS.resolve())!=AO||xS&&fc(new xS)!=jO||bS&&fc(new bS)!=TO)&&(fc=function(t){var e=aV(t),n=e==wpe?t.constructor:void 0,r=n?Bf(n):"";if(r)switch(r){case _pe:return PO;case Spe:return EO;case Epe:return AO;case Ape:return jO;case jpe:return TO}return e});var Tpe=fc,Uw=H6,Ppe=Q6,Cpe=sfe,kpe=ape,CO=Tpe,kO=ji,NO=eV,Npe=nV,Ope=1,OO="[object Arguments]",IO="[object Array]",ty="[object Object]",Ipe=Object.prototype,DO=Ipe.hasOwnProperty;function Dpe(t,e,n,r,i,a){var s=kO(t),o=kO(e),l=s?IO:CO(t),u=o?IO:CO(e);l=l==OO?ty:l,u=u==OO?ty:u;var f=l==ty,d=u==ty,h=l==u;if(h&&NO(t)){if(!NO(e))return!1;s=!0,f=!1}if(h&&!f)return a||(a=new Uw),s||Npe(t)?Ppe(t,e,n,r,i,a):Cpe(t,e,l,n,r,i,a);if(!(n&Ope)){var p=f&&DO.call(t,"__wrapped__"),v=d&&DO.call(e,"__wrapped__");if(p||v){var y=p?t.value():t,b=v?e.value():e;return a||(a=new Uw),i(y,b,n,r,a)}}return h?(a||(a=new Uw),kpe(t,e,n,r,i,a)):!1}var Mpe=Dpe,Rpe=Mpe,MO=So;function sV(t,e,n,r,i){return t===e?!0:t==null||e==null||!MO(t)&&!MO(e)?t!==t&&e!==e:Rpe(t,e,n,r,sV,i)}var Dj=sV,$pe=H6,Lpe=Dj,zpe=1,Vpe=2;function Fpe(t,e,n,r){var i=n.length,a=i,s=!r;if(t==null)return!a;for(t=Object(t);i--;){var o=n[i];if(s&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<a;){o=n[i];var l=o[0],u=t[l],f=o[1];if(s&&o[2]){if(u===void 0&&!(l in t))return!1}else{var d=new $pe;if(r)var h=r(u,f,l,t,e,d);if(!(h===void 0?Lpe(f,u,zpe|Vpe,r,d):h))return!1}}return!0}var Bpe=Fpe,Upe=Ml;function Wpe(t){return t===t&&!Upe(t)}var oV=Wpe,Kpe=oV,qpe=Jx;function Hpe(t){for(var e=qpe(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Kpe(i)]}return e}var Gpe=Hpe;function Ype(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var lV=Ype,Xpe=Bpe,Qpe=Gpe,Zpe=lV;function Jpe(t){var e=Qpe(t);return e.length==1&&e[0][2]?Zpe(e[0][0],e[0][1]):function(n){return n===t||Xpe(n,t,e)}}var eme=Jpe;function tme(t,e){return t!=null&&e in Object(t)}var nme=tme,rme=m6,ime=Nj,ame=ji,sme=Oj,ome=Ij,lme=Lx;function cme(t,e,n){e=rme(e,t);for(var r=-1,i=e.length,a=!1;++r<i;){var s=lme(e[r]);if(!(a=t!=null&&n(t,s)))break;t=t[s]}return a||++r!=i?a:(i=t==null?0:t.length,!!i&&ome(i)&&sme(s,i)&&(ame(t)||ime(t)))}var ume=cme,dme=nme,fme=ume;function hme(t,e){return t!=null&&fme(t,e,dme)}var pme=hme,mme=Dj,gme=g6,yme=pme,vme=hj,xme=oV,bme=lV,wme=Lx,_me=1,Sme=2;function Eme(t,e){return vme(t)&&xme(e)?bme(wme(t),e):function(n){var r=gme(n,t);return r===void 0&&r===e?yme(n,t):mme(e,r,_me|Sme)}}var Ame=Eme;function jme(t){return t}var Uf=jme;function Tme(t){return function(e){return e==null?void 0:e[t]}}var Pme=Tme,Cme=bj;function kme(t){return function(e){return Cme(e,t)}}var Nme=kme,Ome=Pme,Ime=Nme,Dme=hj,Mme=Lx;function Rme(t){return Dme(t)?Ome(Mme(t)):Ime(t)}var $me=Rme,Lme=eme,zme=Ame,Vme=Uf,Fme=ji,Bme=$me;function Ume(t){return typeof t=="function"?t:t==null?Vme:typeof t=="object"?Fme(t)?zme(t[0],t[1]):Lme(t):Bme(t)}var ks=Ume;function Wme(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}var cV=Wme;function Kme(t){return t!==t}var qme=Kme;function Hme(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var Gme=Hme,Yme=cV,Xme=qme,Qme=Gme;function Zme(t,e,n){return e===e?Qme(t,e,n):Yme(t,Xme,n)}var Jme=Zme,ege=Jme;function tge(t,e){var n=t==null?0:t.length;return!!n&&ege(t,e,0)>-1}var nge=tge;function rge(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var ige=rge;function age(){}var sge=age,Ww=iV,oge=sge,lge=kj,cge=1/0,uge=Ww&&1/lge(new Ww([,-0]))[1]==cge?function(t){return new Ww(t)}:oge,dge=uge,fge=G6,hge=nge,pge=ige,mge=X6,gge=dge,yge=kj,vge=200;function xge(t,e,n){var r=-1,i=hge,a=t.length,s=!0,o=[],l=o;if(n)s=!1,i=pge;else if(a>=vge){var u=e?null:gge(t);if(u)return yge(u);s=!1,i=mge,l=new fge}else l=e?[]:o;e:for(;++r<a;){var f=t[r],d=e?e(f):f;if(f=n||f!==0?f:0,s&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue e;e&&l.push(d),o.push(f)}else i(l,d,n)||(l!==o&&l.push(d),o.push(f))}return o}var bge=xge,wge=ks,_ge=bge;function Sge(t,e){return t&&t.length?_ge(t,wge(e)):[]}var Ege=Sge;const RO=Vt(Ege);function uV(t,e,n){return e===!0?RO(t,n):nt(e)?RO(t,e):t}function Hd(t){"@babel/helpers - typeof";return Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hd(t)}var Age=["ref"];function $O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$O(Object(n),!0).forEach(function(r){eb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$O(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function LO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fV(r.key),r)}}function Tge(t,e,n){return e&&LO(t.prototype,e),n&&LO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pge(t,e,n){return e=Yv(e),Cge(t,dV()?Reflect.construct(e,n||[],Yv(t).constructor):e.apply(t,n))}function Cge(t,e){if(e&&(Hd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kge(t)}function kge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dV=function(){return!!t})()}function Yv(t){return Yv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Yv(t)}function Nge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wS(t,e)}function wS(t,e){return wS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},wS(t,e)}function eb(t,e,n){return e=fV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fV(t){var e=Oge(t,"string");return Hd(e)=="symbol"?e:e+""}function Oge(t,e){if(Hd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Hd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Ige(t,e){if(t==null)return{};var n=Dge(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Dge(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Mge(t){return t.value}function Rge(t,e){if(F.isValidElement(t))return F.cloneElement(t,e);if(typeof t=="function")return F.createElement(t,e);e.ref;var n=Ige(e,Age);return F.createElement(Cj,n)}var zO=1,no=function(t){function e(){var n;jge(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Pge(this,e,[].concat(i)),eb(n,"lastBoundingBox",{width:-1,height:-1}),n}return Nge(e,t),Tge(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>zO||Math.abs(i.height-this.lastBoundingBox.height)>zO)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?zs({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,a=i.layout,s=i.align,o=i.verticalAlign,l=i.margin,u=i.chartWidth,f=i.chartHeight,d,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(s==="center"&&a==="vertical"){var p=this.getBBoxSnapshot();d={left:((u||0)-p.width)/2}}else d=s==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(o==="middle"){var v=this.getBBoxSnapshot();h={top:((f||0)-v.height)/2}}else h=o==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return zs(zs({},d),h)}},{key:"render",value:function(){var r=this,i=this.props,a=i.content,s=i.width,o=i.height,l=i.wrapperStyle,u=i.payloadUniqBy,f=i.payload,d=zs(zs({position:"absolute",width:s||"auto",height:o||"auto"},this.getDefaultPosition(l)),l);return F.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(p){r.wrapperNode=p}},Rge(a,zs(zs({},this.props),{},{payload:uV(f,u,Mge)})))}}],[{key:"getWithHeight",value:function(r,i){var a=zs(zs({},this.defaultProps),r.props),s=a.layout;return s==="vertical"&&je(r.props.height)?{height:r.props.height}:s==="horizontal"?{width:r.props.width||i}:null}}])}(O.PureComponent);eb(no,"displayName","Legend");eb(no,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var VO=rg,$ge=Nj,Lge=ji,FO=VO?VO.isConcatSpreadable:void 0;function zge(t){return Lge(t)||$ge(t)||!!(FO&&t&&t[FO])}var Vge=zge,Fge=Z6,Bge=Vge;function hV(t,e,n,r,i){var a=-1,s=t.length;for(n||(n=Bge),i||(i=[]);++a<s;){var o=t[a];e>0&&n(o)?e>1?hV(o,e-1,n,r,i):Fge(i,o):r||(i[i.length]=o)}return i}var pV=hV;function Uge(t){return function(e,n,r){for(var i=-1,a=Object(e),s=r(e),o=s.length;o--;){var l=s[t?o:++i];if(n(a[l],l,a)===!1)break}return e}}var Wge=Uge,Kge=Wge,qge=Kge(),Hge=qge,Gge=Hge,Yge=Jx;function Xge(t,e){return t&&Gge(t,e,Yge)}var mV=Xge,Qge=ig;function Zge(t,e){return function(n,r){if(n==null)return n;if(!Qge(n))return t(n,r);for(var i=n.length,a=e?i:-1,s=Object(n);(e?a--:++a<i)&&r(s[a],a,s)!==!1;);return n}}var Jge=Zge,eye=mV,tye=Jge,nye=tye(eye),Mj=nye,rye=Mj,iye=ig;function aye(t,e){var n=-1,r=iye(t)?Array(t.length):[];return rye(t,function(i,a,s){r[++n]=e(i,a,s)}),r}var gV=aye;function sye(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var oye=sye,BO=Mf;function lye(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,a=BO(t),s=e!==void 0,o=e===null,l=e===e,u=BO(e);if(!o&&!u&&!a&&t>e||a&&s&&l&&!o&&!u||r&&s&&l||!n&&l||!i)return 1;if(!r&&!a&&!u&&t<e||u&&n&&i&&!r&&!a||o&&n&&i||!s&&i||!l)return-1}return 0}var cye=lye,uye=cye;function dye(t,e,n){for(var r=-1,i=t.criteria,a=e.criteria,s=i.length,o=n.length;++r<s;){var l=uye(i[r],a[r]);if(l){if(r>=o)return l;var u=n[r];return l*(u=="desc"?-1:1)}}return t.index-e.index}var fye=dye,Kw=xj,hye=bj,pye=ks,mye=gV,gye=oye,yye=tV,vye=fye,xye=Uf,bye=ji;function wye(t,e,n){e.length?e=Kw(e,function(a){return bye(a)?function(s){return hye(s,a.length===1?a[0]:a)}:a}):e=[xye];var r=-1;e=Kw(e,yye(pye));var i=mye(t,function(a,s,o){var l=Kw(e,function(u){return u(a)});return{criteria:l,index:++r,value:a}});return gye(i,function(a,s){return vye(a,s,n)})}var _ye=wye;function Sye(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var Eye=Sye,Aye=Eye,UO=Math.max;function jye(t,e,n){return e=UO(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=UO(r.length-e,0),s=Array(a);++i<a;)s[i]=r[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=r[i];return o[e]=n(s),Aye(t,this,o)}}var Tye=jye;function Pye(t){return function(){return t}}var Cye=Pye,kye=ou,Nye=function(){try{var t=kye(Object,"defineProperty");return t({},"",{}),t}catch{}}(),yV=Nye,Oye=Cye,WO=yV,Iye=Uf,Dye=WO?function(t,e){return WO(t,"toString",{configurable:!0,enumerable:!1,value:Oye(e),writable:!0})}:Iye,Mye=Dye,Rye=800,$ye=16,Lye=Date.now;function zye(t){var e=0,n=0;return function(){var r=Lye(),i=$ye-(r-n);if(n=r,i>0){if(++e>=Rye)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Vye=zye,Fye=Mye,Bye=Vye,Uye=Bye(Fye),Wye=Uye,Kye=Uf,qye=Tye,Hye=Wye;function Gye(t,e){return Hye(qye(t,e,Kye),t+"")}var Yye=Gye,Xye=mj,Qye=ig,Zye=Oj,Jye=Ml;function eve(t,e,n){if(!Jye(n))return!1;var r=typeof e;return(r=="number"?Qye(n)&&Zye(e,n.length):r=="string"&&e in n)?Xye(n[e],t):!1}var tb=eve,tve=pV,nve=_ye,rve=Yye,KO=tb,ive=rve(function(t,e){if(t==null)return[];var n=e.length;return n>1&&KO(t,e[0],e[1])?e=[]:n>2&&KO(e[0],e[1],e[2])&&(e=[e[0]]),nve(t,tve(e,1),[])}),ave=ive;const Rj=Vt(ave);function Yp(t){"@babel/helpers - typeof";return Yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yp(t)}function _S(){return _S=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_S.apply(this,arguments)}function sve(t,e){return uve(t)||cve(t,e)||lve(t,e)||ove()}function ove(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lve(t,e){if(t){if(typeof t=="string")return qO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qO(t,e)}}function qO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cve(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function uve(t){if(Array.isArray(t))return t}function HO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HO(Object(n),!0).forEach(function(r){dve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dve(t,e,n){return e=fve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fve(t){var e=hve(t,"string");return Yp(e)=="symbol"?e:e+""}function hve(t,e){if(Yp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Yp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pve(t){return Array.isArray(t)&&ir(t[0])&&ir(t[1])?t.join(" ~ "):t}var mve=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,a=i===void 0?{}:i,s=e.itemStyle,o=s===void 0?{}:s,l=e.labelStyle,u=l===void 0?{}:l,f=e.payload,d=e.formatter,h=e.itemSorter,p=e.wrapperClassName,v=e.labelClassName,y=e.label,b=e.labelFormatter,x=e.accessibilityLayer,_=x===void 0?!1:x,E=function(){if(f&&f.length){var $={padding:0,margin:0},z=(h?Rj(f,h):f).map(function(H,ee){if(H.type==="none")return null;var U=qw({display:"block",paddingTop:4,paddingBottom:4,color:H.color||"#000"},o),Z=H.formatter||d||pve,q=H.value,Y=H.name,le=q,ce=Y;if(Z&&le!=null&&ce!=null){var ye=Z(q,Y,H,ee,f);if(Array.isArray(ye)){var Ee=sve(ye,2);le=Ee[0],ce=Ee[1]}else le=ye}return F.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(ee),style:U},ir(ce)?F.createElement("span",{className:"recharts-tooltip-item-name"},ce):null,ir(ce)?F.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,F.createElement("span",{className:"recharts-tooltip-item-value"},le),F.createElement("span",{className:"recharts-tooltip-item-unit"},H.unit||""))});return F.createElement("ul",{className:"recharts-tooltip-item-list",style:$},z)}return null},P=qw({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),A=qw({margin:0},u),j=!st(y),S=j?y:"",T=ht("recharts-default-tooltip",p),N=ht("recharts-tooltip-label",v);j&&b&&f!==void 0&&f!==null&&(S=b(y,f));var D=_?{role:"status","aria-live":"assertive"}:{};return F.createElement("div",_S({className:T,style:P},D),F.createElement("p",{className:N,style:A},F.isValidElement(S)?S:"".concat(S)),E())};function Xp(t){"@babel/helpers - typeof";return Xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xp(t)}function ny(t,e,n){return e=gve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gve(t){var e=yve(t,"string");return Xp(e)=="symbol"?e:e+""}function yve(t,e){if(Xp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gh="recharts-tooltip-wrapper",vve={visibility:"hidden"};function xve(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return ht(gh,ny(ny(ny(ny({},"".concat(gh,"-right"),je(n)&&e&&je(e.x)&&n>=e.x),"".concat(gh,"-left"),je(n)&&e&&je(e.x)&&n<e.x),"".concat(gh,"-bottom"),je(r)&&e&&je(e.y)&&r>=e.y),"".concat(gh,"-top"),je(r)&&e&&je(e.y)&&r<e.y))}function GO(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,a=t.position,s=t.reverseDirection,o=t.tooltipDimension,l=t.viewBox,u=t.viewBoxDimension;if(a&&je(a[r]))return a[r];var f=n[r]-o-i,d=n[r]+i;if(e[r])return s[r]?f:d;if(s[r]){var h=f,p=l[r];return h<p?Math.max(d,l[r]):Math.max(f,l[r])}var v=d+o,y=l[r]+u;return v>y?Math.max(f,l[r]):Math.max(d,l[r])}function bve(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function wve(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,a=t.reverseDirection,s=t.tooltipBox,o=t.useTranslate3d,l=t.viewBox,u,f,d;return s.height>0&&s.width>0&&n?(f=GO({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:l,viewBoxDimension:l.width}),d=GO({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:l,viewBoxDimension:l.height}),u=bve({translateX:f,translateY:d,useTranslate3d:o})):u=vve,{cssProperties:u,cssClasses:xve({translateX:f,translateY:d,coordinate:n})}}function Gd(t){"@babel/helpers - typeof";return Gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gd(t)}function YO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function XO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YO(Object(n),!0).forEach(function(r){ES(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _ve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xV(r.key),r)}}function Eve(t,e,n){return e&&Sve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ave(t,e,n){return e=Xv(e),jve(t,vV()?Reflect.construct(e,n||[],Xv(t).constructor):e.apply(t,n))}function jve(t,e){if(e&&(Gd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tve(t)}function Tve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vV=function(){return!!t})()}function Xv(t){return Xv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xv(t)}function Pve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SS(t,e)}function SS(t,e){return SS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},SS(t,e)}function ES(t,e,n){return e=xV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xV(t){var e=Cve(t,"string");return Gd(e)=="symbol"?e:e+""}function Cve(t,e){if(Gd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Gd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var QO=1,kve=function(t){function e(){var n;_ve(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Ave(this,e,[].concat(i)),ES(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),ES(n,"handleKeyDown",function(s){if(s.key==="Escape"){var o,l,u,f;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&o!==void 0?o:0,y:(u=(f=n.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),n}return Pve(e,t),Eve(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>QO||Math.abs(r.height-this.state.lastBoundingBox.height)>QO)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,u=i.children,f=i.coordinate,d=i.hasPayload,h=i.isAnimationActive,p=i.offset,v=i.position,y=i.reverseDirection,b=i.useTranslate3d,x=i.viewBox,_=i.wrapperStyle,E=wve({allowEscapeViewBox:s,coordinate:f,offsetTopLeft:p,position:v,reverseDirection:y,tooltipBox:this.state.lastBoundingBox,useTranslate3d:b,viewBox:x}),P=E.cssClasses,A=E.cssProperties,j=XO(XO({transition:h&&a?"transform ".concat(o,"ms ").concat(l):void 0},A),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&d?"visible":"hidden",position:"absolute",top:0,left:0},_);return F.createElement("div",{tabIndex:-1,className:P,style:j,ref:function(T){r.wrapperNode=T}},u)}}])}(O.PureComponent),Nve=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Rl={isSsr:Nve()};function Yd(t){"@babel/helpers - typeof";return Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yd(t)}function ZO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function JO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZO(Object(n),!0).forEach(function(r){$j(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ove(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ive(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wV(r.key),r)}}function Dve(t,e,n){return e&&Ive(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mve(t,e,n){return e=Qv(e),Rve(t,bV()?Reflect.construct(e,n||[],Qv(t).constructor):e.apply(t,n))}function Rve(t,e){if(e&&(Yd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $ve(t)}function $ve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bV=function(){return!!t})()}function Qv(t){return Qv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qv(t)}function Lve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AS(t,e)}function AS(t,e){return AS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},AS(t,e)}function $j(t,e,n){return e=wV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wV(t){var e=zve(t,"string");return Yd(e)=="symbol"?e:e+""}function zve(t,e){if(Yd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Yd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Vve(t){return t.dataKey}function Fve(t,e){return F.isValidElement(t)?F.cloneElement(t,e):typeof t=="function"?F.createElement(t,e):F.createElement(mve,e)}var Qt=function(t){function e(){return Ove(this,e),Mve(this,e,arguments)}return Lve(e,t),Dve(e,[{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,l=i.animationEasing,u=i.content,f=i.coordinate,d=i.filterNull,h=i.isAnimationActive,p=i.offset,v=i.payload,y=i.payloadUniqBy,b=i.position,x=i.reverseDirection,_=i.useTranslate3d,E=i.viewBox,P=i.wrapperStyle,A=v??[];d&&A.length&&(A=uV(v.filter(function(S){return S.value!=null&&(S.hide!==!0||r.props.includeHidden)}),y,Vve));var j=A.length>0;return F.createElement(kve,{allowEscapeViewBox:s,animationDuration:o,animationEasing:l,isAnimationActive:h,active:a,coordinate:f,hasPayload:j,offset:p,position:b,reverseDirection:x,useTranslate3d:_,viewBox:E,wrapperStyle:P},Fve(u,JO(JO({},this.props),{},{payload:A})))}}])}(O.PureComponent);$j(Qt,"displayName","Tooltip");$j(Qt,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Rl.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Bve=Cs,Uve=function(){return Bve.Date.now()},Wve=Uve,Kve=/\s/;function qve(t){for(var e=t.length;e--&&Kve.test(t.charAt(e)););return e}var Hve=qve,Gve=Hve,Yve=/^\s+/;function Xve(t){return t&&t.slice(0,Gve(t)+1).replace(Yve,"")}var Qve=Xve,Zve=Qve,eI=Ml,Jve=Mf,tI=NaN,e0e=/^[-+]0x[0-9a-f]+$/i,t0e=/^0b[01]+$/i,n0e=/^0o[0-7]+$/i,r0e=parseInt;function i0e(t){if(typeof t=="number")return t;if(Jve(t))return tI;if(eI(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=eI(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Zve(t);var n=t0e.test(t);return n||n0e.test(t)?r0e(t.slice(2),n?2:8):e0e.test(t)?tI:+t}var _V=i0e,a0e=Ml,Hw=Wve,nI=_V,s0e="Expected a function",o0e=Math.max,l0e=Math.min;function c0e(t,e,n){var r,i,a,s,o,l,u=0,f=!1,d=!1,h=!0;if(typeof t!="function")throw new TypeError(s0e);e=nI(e)||0,a0e(n)&&(f=!!n.leading,d="maxWait"in n,a=d?o0e(nI(n.maxWait)||0,e):a,h="trailing"in n?!!n.trailing:h);function p(j){var S=r,T=i;return r=i=void 0,u=j,s=t.apply(T,S),s}function v(j){return u=j,o=setTimeout(x,e),f?p(j):s}function y(j){var S=j-l,T=j-u,N=e-S;return d?l0e(N,a-T):N}function b(j){var S=j-l,T=j-u;return l===void 0||S>=e||S<0||d&&T>=a}function x(){var j=Hw();if(b(j))return _(j);o=setTimeout(x,y(j))}function _(j){return o=void 0,h&&r?p(j):(r=i=void 0,s)}function E(){o!==void 0&&clearTimeout(o),u=0,r=l=i=o=void 0}function P(){return o===void 0?s:_(Hw())}function A(){var j=Hw(),S=b(j);if(r=arguments,i=this,l=j,S){if(o===void 0)return v(l);if(d)return clearTimeout(o),o=setTimeout(x,e),p(l)}return o===void 0&&(o=setTimeout(x,e)),s}return A.cancel=E,A.flush=P,A}var u0e=c0e,d0e=u0e,f0e=Ml,h0e="Expected a function";function p0e(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(h0e);return f0e(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),d0e(t,e,{leading:r,maxWait:e,trailing:i})}var m0e=p0e;const SV=Vt(m0e);function Qp(t){"@babel/helpers - typeof";return Qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qp(t)}function rI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ry(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rI(Object(n),!0).forEach(function(r){g0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function g0e(t,e,n){return e=y0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y0e(t){var e=v0e(t,"string");return Qp(e)=="symbol"?e:e+""}function v0e(t,e){if(Qp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function x0e(t,e){return S0e(t)||_0e(t,e)||w0e(t,e)||b0e()}function b0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w0e(t,e){if(t){if(typeof t=="string")return iI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iI(t,e)}}function iI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function S0e(t){if(Array.isArray(t))return t}var mr=O.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,a=t.width,s=a===void 0?"100%":a,o=t.height,l=o===void 0?"100%":o,u=t.minWidth,f=u===void 0?0:u,d=t.minHeight,h=t.maxHeight,p=t.children,v=t.debounce,y=v===void 0?0:v,b=t.id,x=t.className,_=t.onResize,E=t.style,P=E===void 0?{}:E,A=O.useRef(null),j=O.useRef();j.current=_,O.useImperativeHandle(e,function(){return Object.defineProperty(A.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),A.current},configurable:!0})});var S=O.useState({containerWidth:i.width,containerHeight:i.height}),T=x0e(S,2),N=T[0],D=T[1],M=O.useCallback(function(z,H){D(function(ee){var U=Math.round(z),Z=Math.round(H);return ee.containerWidth===U&&ee.containerHeight===Z?ee:{containerWidth:U,containerHeight:Z}})},[]);O.useEffect(function(){var z=function(Y){var le,ce=Y[0].contentRect,ye=ce.width,Ee=ce.height;M(ye,Ee),(le=j.current)===null||le===void 0||le.call(j,ye,Ee)};y>0&&(z=SV(z,y,{trailing:!0,leading:!1}));var H=new ResizeObserver(z),ee=A.current.getBoundingClientRect(),U=ee.width,Z=ee.height;return M(U,Z),H.observe(A.current),function(){H.disconnect()}},[M,y]);var $=O.useMemo(function(){var z=N.containerWidth,H=N.containerHeight;if(z<0||H<0)return null;Ka(_c(s)||_c(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,l),Ka(!n||n>0,"The aspect(%s) must be greater than zero.",n);var ee=_c(s)?z:s,U=_c(l)?H:l;n&&n>0&&(ee?U=ee/n:U&&(ee=U*n),h&&U>h&&(U=h)),Ka(ee>0||U>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,ee,U,s,l,f,d,n);var Z=!Array.isArray(p)&&to(p.type).endsWith("Chart");return F.Children.map(p,function(q){return F.isValidElement(q)?O.cloneElement(q,ry({width:ee,height:U},Z?{style:ry({height:"100%",width:"100%",maxHeight:U,maxWidth:ee},q.props.style)}:{})):q})},[n,p,l,h,d,f,N,s]);return F.createElement("div",{id:b?"".concat(b):void 0,className:ht("recharts-responsive-container",x),style:ry(ry({},P),{},{width:s,height:l,minWidth:f,minHeight:d,maxHeight:h}),ref:A},$)}),Eo=function(e){return null};Eo.displayName="Cell";function Zp(t){"@babel/helpers - typeof";return Zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zp(t)}function aI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aI(Object(n),!0).forEach(function(r){E0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function E0e(t,e,n){return e=A0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A0e(t){var e=j0e(t,"string");return Zp(e)=="symbol"?e:e+""}function j0e(t,e){if(Zp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Nu={widthCache:{},cacheCount:0},T0e=2e3,P0e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},sI="recharts_measurement_span";function C0e(t){var e=jS({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var sp=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Rl.isSsr)return{width:0,height:0};var r=C0e(n),i=JSON.stringify({text:e,copyStyle:r});if(Nu.widthCache[i])return Nu.widthCache[i];try{var a=document.getElementById(sI);a||(a=document.createElement("span"),a.setAttribute("id",sI),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=jS(jS({},P0e),r);Object.assign(a.style,s),a.textContent="".concat(e);var o=a.getBoundingClientRect(),l={width:o.width,height:o.height};return Nu.widthCache[i]=l,++Nu.cacheCount>T0e&&(Nu.cacheCount=0,Nu.widthCache={}),l}catch{return{width:0,height:0}}},k0e=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Jp(t){"@babel/helpers - typeof";return Jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jp(t)}function Zv(t,e){return D0e(t)||I0e(t,e)||O0e(t,e)||N0e()}function N0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O0e(t,e){if(t){if(typeof t=="string")return oI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oI(t,e)}}function oI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function I0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function D0e(t){if(Array.isArray(t))return t}function M0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$0e(r.key),r)}}function R0e(t,e,n){return e&&lI(t.prototype,e),n&&lI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function $0e(t){var e=L0e(t,"string");return Jp(e)=="symbol"?e:e+""}function L0e(t,e){if(Jp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jp(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var cI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,uI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,z0e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,V0e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,EV={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},F0e=Object.keys(EV),id="NaN";function B0e(t,e){return t*EV[e]}var iy=function(){function t(e,n){M0e(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!z0e.test(n)&&(this.num=NaN,this.unit=""),F0e.includes(n)&&(this.num=B0e(e,n),this.unit="px")}return R0e(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=V0e.exec(n))!==null&&r!==void 0?r:[],a=Zv(i,3),s=a[1],o=a[2];return new t(parseFloat(s),o??"")}}])}();function AV(t){if(t.includes(id))return id;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=cI.exec(e))!==null&&n!==void 0?n:[],i=Zv(r,4),a=i[1],s=i[2],o=i[3],l=iy.parse(a??""),u=iy.parse(o??""),f=s==="*"?l.multiply(u):l.divide(u);if(f.isNaN())return id;e=e.replace(cI,f.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,h=(d=uI.exec(e))!==null&&d!==void 0?d:[],p=Zv(h,4),v=p[1],y=p[2],b=p[3],x=iy.parse(v??""),_=iy.parse(b??""),E=y==="+"?x.add(_):x.subtract(_);if(E.isNaN())return id;e=e.replace(uI,E.toString())}return e}var dI=/\(([^()]*)\)/;function U0e(t){for(var e=t;e.includes("(");){var n=dI.exec(e),r=Zv(n,2),i=r[1];e=e.replace(dI,AV(i))}return e}function W0e(t){var e=t.replace(/\s+/g,"");return e=U0e(e),e=AV(e),e}function K0e(t){try{return W0e(t)}catch{return id}}function Gw(t){var e=K0e(t.slice(5,-1));return e===id?"":e}var q0e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],H0e=["dx","dy","angle","className","breakAll"];function TS(){return TS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TS.apply(this,arguments)}function fI(t,e){if(t==null)return{};var n=G0e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function G0e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function hI(t,e){return Z0e(t)||Q0e(t,e)||X0e(t,e)||Y0e()}function Y0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X0e(t,e){if(t){if(typeof t=="string")return pI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pI(t,e)}}function pI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Q0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Z0e(t){if(Array.isArray(t))return t}var jV=/[ \f\n\r\t\v\u2028\u2029]+/,TV=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var a=[];st(n)||(r?a=n.toString().split(""):a=n.toString().split(jV));var s=a.map(function(l){return{word:l,width:sp(l,i).width}}),o=r?0:sp("",i).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},J0e=function(e,n,r,i,a){var s=e.maxLines,o=e.children,l=e.style,u=e.breakAll,f=je(s),d=o,h=function(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return ee.reduce(function(U,Z){var q=Z.word,Y=Z.width,le=U[U.length-1];if(le&&(i==null||a||le.width+Y+r<Number(i)))le.words.push(q),le.width+=Y+r;else{var ce={words:[q],width:Y};U.push(ce)}return U},[])},p=h(n),v=function(ee){return ee.reduce(function(U,Z){return U.width>Z.width?U:Z})};if(!f)return p;for(var y="",b=function(ee){var U=d.slice(0,ee),Z=TV({breakAll:u,style:l,children:U+y}).wordsWithComputedWidth,q=h(Z),Y=q.length>s||v(q).width>Number(i);return[Y,q]},x=0,_=d.length-1,E=0,P;x<=_&&E<=d.length-1;){var A=Math.floor((x+_)/2),j=A-1,S=b(j),T=hI(S,2),N=T[0],D=T[1],M=b(A),$=hI(M,1),z=$[0];if(!N&&!z&&(x=A+1),N&&z&&(_=A-1),!N&&z){P=D;break}E++}return P||p},mI=function(e){var n=st(e)?[]:e.toString().split(jV);return[{words:n}]},exe=function(e){var n=e.width,r=e.scaleToFit,i=e.children,a=e.style,s=e.breakAll,o=e.maxLines;if((n||r)&&!Rl.isSsr){var l,u,f=TV({breakAll:s,children:i,style:a});if(f){var d=f.wordsWithComputedWidth,h=f.spaceWidth;l=d,u=h}else return mI(i);return J0e({breakAll:s,children:i,maxLines:o,style:a},l,u,n,r)}return mI(i)},gI="#808080",qc=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,s=e.lineHeight,o=s===void 0?"1em":s,l=e.capHeight,u=l===void 0?"0.71em":l,f=e.scaleToFit,d=f===void 0?!1:f,h=e.textAnchor,p=h===void 0?"start":h,v=e.verticalAnchor,y=v===void 0?"end":v,b=e.fill,x=b===void 0?gI:b,_=fI(e,q0e),E=O.useMemo(function(){return exe({breakAll:_.breakAll,children:_.children,maxLines:_.maxLines,scaleToFit:d,style:_.style,width:_.width})},[_.breakAll,_.children,_.maxLines,d,_.style,_.width]),P=_.dx,A=_.dy,j=_.angle,S=_.className,T=_.breakAll,N=fI(_,H0e);if(!ir(r)||!ir(a))return null;var D=r+(je(P)?P:0),M=a+(je(A)?A:0),$;switch(y){case"start":$=Gw("calc(".concat(u,")"));break;case"middle":$=Gw("calc(".concat((E.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:$=Gw("calc(".concat(E.length-1," * -").concat(o,")"));break}var z=[];if(d){var H=E[0].width,ee=_.width;z.push("scale(".concat((je(ee)?ee/H:1)/H,")"))}return j&&z.push("rotate(".concat(j,", ").concat(D,", ").concat(M,")")),z.length&&(N.transform=z.join(" ")),F.createElement("text",TS({},qe(N,!0),{x:D,y:M,className:ht("recharts-text",S),textAnchor:p,fill:x.includes("url")?gI:x}),E.map(function(U,Z){var q=U.words.join(T?"":" ");return F.createElement("tspan",{x:D,dy:Z===0?$:o,key:"".concat(q,"-").concat(Z)},q)}))};function hl(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function txe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Lj(t){let e,n,r;t.length!==2?(e=hl,n=(o,l)=>hl(t(o),l),r=(o,l)=>t(o)-l):(e=t===hl||t===txe?t:nxe,n=t,r=t);function i(o,l,u=0,f=o.length){if(u<f){if(e(l,l)!==0)return f;do{const d=u+f>>>1;n(o[d],l)<0?u=d+1:f=d}while(u<f)}return u}function a(o,l,u=0,f=o.length){if(u<f){if(e(l,l)!==0)return f;do{const d=u+f>>>1;n(o[d],l)<=0?u=d+1:f=d}while(u<f)}return u}function s(o,l,u=0,f=o.length){const d=i(o,l,u,f-1);return d>u&&r(o[d-1],l)>-r(o[d],l)?d-1:d}return{left:i,center:s,right:a}}function nxe(){return 0}function PV(t){return t===null?NaN:+t}function*rxe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const ixe=Lj(hl),ag=ixe.right;Lj(PV).center;class yI extends Map{constructor(e,n=oxe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(vI(this,e))}has(e){return super.has(vI(this,e))}set(e,n){return super.set(axe(this,e),n)}delete(e){return super.delete(sxe(this,e))}}function vI({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function axe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function sxe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function oxe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function lxe(t=hl){if(t===hl)return CV;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function CV(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const cxe=Math.sqrt(50),uxe=Math.sqrt(10),dxe=Math.sqrt(2);function Jv(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=cxe?10:a>=uxe?5:a>=dxe?2:1;let o,l,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(t*u),l=Math.round(e*u),o/u<t&&++o,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*s,o=Math.round(t/u),l=Math.round(e/u),o*u<t&&++o,l*u>e&&--l),l<o&&.5<=n&&n<2?Jv(t,e,n*2):[o,l,u]}function PS(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?Jv(e,t,n):Jv(t,e,n);if(!(a>=i))return[];const o=a-i+1,l=new Array(o);if(r)if(s<0)for(let u=0;u<o;++u)l[u]=(a-u)/-s;else for(let u=0;u<o;++u)l[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)l[u]=(i+u)/-s;else for(let u=0;u<o;++u)l[u]=(i+u)*s;return l}function CS(t,e,n){return e=+e,t=+t,n=+n,Jv(t,e,n)[2]}function kS(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?CS(e,t,n):CS(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function xI(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function bI(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function kV(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?CV:lxe(i);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,f=Math.log(l),d=.5*Math.exp(2*f/3),h=.5*Math.sqrt(f*d*(l-d)/l)*(u-l/2<0?-1:1),p=Math.max(n,Math.floor(e-u*d/l+h)),v=Math.min(r,Math.floor(e+(l-u)*d/l+h));kV(t,e,p,v,i)}const a=t[e];let s=n,o=r;for(yh(t,n,e),i(t[r],a)>0&&yh(t,n,r);s<o;){for(yh(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[n],a)===0?yh(t,n,o):(++o,yh(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function yh(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function fxe(t,e,n){if(t=Float64Array.from(rxe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return bI(t);if(e>=1)return xI(t);var r,i=(r-1)*e,a=Math.floor(i),s=xI(kV(t,a).subarray(0,a+1)),o=bI(t.subarray(a+1));return s+(o-s)*(i-a)}}function hxe(t,e,n=PV){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t),o=+n(t[a+1],a+1,t);return s+(o-s)*(i-a)}}function pxe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function ya(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ao(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const NS=Symbol("implicit");function zj(){var t=new yI,e=[],n=[],r=NS;function i(a){let s=t.get(a);if(s===void 0){if(r!==NS)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new yI;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return zj(e,n).unknown(r)},ya.apply(i,arguments),i}function em(){var t=zj().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,l=0,u=0,f=.5;delete t.unknown;function d(){var h=e().length,p=i<r,v=p?i:r,y=p?r:i;a=(y-v)/Math.max(1,h-l+u*2),o&&(a=Math.floor(a)),v+=(y-v-a*(h-l))*f,s=a*(1-l),o&&(v=Math.round(v),s=Math.round(s));var b=pxe(h).map(function(x){return v+a*x});return n(p?b.reverse():b)}return t.domain=function(h){return arguments.length?(e(h),d()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,d()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,o=!0,d()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(h){return arguments.length?(o=!!h,d()):o},t.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),d()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),d()):l},t.paddingOuter=function(h){return arguments.length?(u=+h,d()):u},t.align=function(h){return arguments.length?(f=Math.max(0,Math.min(1,h)),d()):f},t.copy=function(){return em(e(),[r,i]).round(o).paddingInner(l).paddingOuter(u).align(f)},ya.apply(d(),arguments)}function NV(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return NV(e())},t}function op(){return NV(em.apply(null,arguments).paddingInner(1))}function Vj(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function OV(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function sg(){}var tm=.7,e0=1/tm,wd="\\s*([+-]?\\d+)\\s*",nm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Es="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mxe=/^#([0-9a-f]{3,8})$/,gxe=new RegExp(`^rgb\\(${wd},${wd},${wd}\\)$`),yxe=new RegExp(`^rgb\\(${Es},${Es},${Es}\\)$`),vxe=new RegExp(`^rgba\\(${wd},${wd},${wd},${nm}\\)$`),xxe=new RegExp(`^rgba\\(${Es},${Es},${Es},${nm}\\)$`),bxe=new RegExp(`^hsl\\(${nm},${Es},${Es}\\)$`),wxe=new RegExp(`^hsla\\(${nm},${Es},${Es},${nm}\\)$`),wI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Vj(sg,rm,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:_I,formatHex:_I,formatHex8:_xe,formatHsl:Sxe,formatRgb:SI,toString:SI});function _I(){return this.rgb().formatHex()}function _xe(){return this.rgb().formatHex8()}function Sxe(){return IV(this).formatHsl()}function SI(){return this.rgb().formatRgb()}function rm(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=mxe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?EI(e):n===3?new vi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ay(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ay(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=gxe.exec(t))?new vi(e[1],e[2],e[3],1):(e=yxe.exec(t))?new vi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=vxe.exec(t))?ay(e[1],e[2],e[3],e[4]):(e=xxe.exec(t))?ay(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=bxe.exec(t))?TI(e[1],e[2]/100,e[3]/100,1):(e=wxe.exec(t))?TI(e[1],e[2]/100,e[3]/100,e[4]):wI.hasOwnProperty(t)?EI(wI[t]):t==="transparent"?new vi(NaN,NaN,NaN,0):null}function EI(t){return new vi(t>>16&255,t>>8&255,t&255,1)}function ay(t,e,n,r){return r<=0&&(t=e=n=NaN),new vi(t,e,n,r)}function Exe(t){return t instanceof sg||(t=rm(t)),t?(t=t.rgb(),new vi(t.r,t.g,t.b,t.opacity)):new vi}function OS(t,e,n,r){return arguments.length===1?Exe(t):new vi(t,e,n,r??1)}function vi(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Vj(vi,OS,OV(sg,{brighter(t){return t=t==null?e0:Math.pow(e0,t),new vi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?tm:Math.pow(tm,t),new vi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new vi(Ic(this.r),Ic(this.g),Ic(this.b),t0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:AI,formatHex:AI,formatHex8:Axe,formatRgb:jI,toString:jI}));function AI(){return`#${Sc(this.r)}${Sc(this.g)}${Sc(this.b)}`}function Axe(){return`#${Sc(this.r)}${Sc(this.g)}${Sc(this.b)}${Sc((isNaN(this.opacity)?1:this.opacity)*255)}`}function jI(){const t=t0(this.opacity);return`${t===1?"rgb(":"rgba("}${Ic(this.r)}, ${Ic(this.g)}, ${Ic(this.b)}${t===1?")":`, ${t})`}`}function t0(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ic(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Sc(t){return t=Ic(t),(t<16?"0":"")+t.toString(16)}function TI(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Va(t,e,n,r)}function IV(t){if(t instanceof Va)return new Va(t.h,t.s,t.l,t.opacity);if(t instanceof sg||(t=rm(t)),!t)return new Va;if(t instanceof Va)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,l=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=l<.5?a+i:2-a-i,s*=60):o=l>0&&l<1?0:s,new Va(s,o,l,t.opacity)}function jxe(t,e,n,r){return arguments.length===1?IV(t):new Va(t,e,n,r??1)}function Va(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Vj(Va,jxe,OV(sg,{brighter(t){return t=t==null?e0:Math.pow(e0,t),new Va(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?tm:Math.pow(tm,t),new Va(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new vi(Yw(t>=240?t-240:t+120,i,r),Yw(t,i,r),Yw(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Va(PI(this.h),sy(this.s),sy(this.l),t0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=t0(this.opacity);return`${t===1?"hsl(":"hsla("}${PI(this.h)}, ${sy(this.s)*100}%, ${sy(this.l)*100}%${t===1?")":`, ${t})`}`}}));function PI(t){return t=(t||0)%360,t<0?t+360:t}function sy(t){return Math.max(0,Math.min(1,t||0))}function Yw(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Fj=t=>()=>t;function Txe(t,e){return function(n){return t+n*e}}function Pxe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Cxe(t){return(t=+t)==1?DV:function(e,n){return n-e?Pxe(e,n,t):Fj(isNaN(e)?n:e)}}function DV(t,e){var n=e-t;return n?Txe(t,n):Fj(isNaN(t)?e:t)}const CI=function t(e){var n=Cxe(e);function r(i,a){var s=n((i=OS(i)).r,(a=OS(a)).r),o=n(i.g,a.g),l=n(i.b,a.b),u=DV(i.opacity,a.opacity);return function(f){return i.r=s(f),i.g=o(f),i.b=l(f),i.opacity=u(f),i+""}}return r.gamma=t,r}(1);function kxe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function Nxe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Oxe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=Wf(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function Ixe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function n0(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Dxe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Wf(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var IS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Xw=new RegExp(IS.source,"g");function Mxe(t){return function(){return t}}function Rxe(t){return function(e){return t(e)+""}}function $xe(t,e){var n=IS.lastIndex=Xw.lastIndex=0,r,i,a,s=-1,o=[],l=[];for(t=t+"",e=e+"";(r=IS.exec(t))&&(i=Xw.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:n0(r,i)})),n=Xw.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?Rxe(l[0].x):Mxe(e):(e=l.length,function(u){for(var f=0,d;f<e;++f)o[(d=l[f]).i]=d.x(u);return o.join("")})}function Wf(t,e){var n=typeof e,r;return e==null||n==="boolean"?Fj(e):(n==="number"?n0:n==="string"?(r=rm(e))?(e=r,CI):$xe:e instanceof rm?CI:e instanceof Date?Ixe:Nxe(e)?kxe:Array.isArray(e)?Oxe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Dxe:n0)(t,e)}function Bj(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Lxe(t,e){e===void 0&&(e=t,t=Wf);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(s){var o=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[o](s-o)}}function zxe(t){return function(){return t}}function r0(t){return+t}var kI=[0,1];function Qr(t){return t}function DS(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:zxe(isNaN(e)?NaN:.5)}function Vxe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Fxe(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=DS(i,r),a=n(s,a)):(r=DS(r,i),a=n(a,s)),function(o){return a(r(o))}}function Bxe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=DS(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var l=ag(t,o,1,r)-1;return a[l](i[l](o))}}function og(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function nb(){var t=kI,e=kI,n=Wf,r,i,a,s=Qr,o,l,u;function f(){var h=Math.min(t.length,e.length);return s!==Qr&&(s=Vxe(t[0],t[h-1])),o=h>2?Bxe:Fxe,l=u=null,d}function d(h){return h==null||isNaN(h=+h)?a:(l||(l=o(t.map(r),e,n)))(r(s(h)))}return d.invert=function(h){return s(i((u||(u=o(e,t.map(r),n0)))(h)))},d.domain=function(h){return arguments.length?(t=Array.from(h,r0),f()):t.slice()},d.range=function(h){return arguments.length?(e=Array.from(h),f()):e.slice()},d.rangeRound=function(h){return e=Array.from(h),n=Bj,f()},d.clamp=function(h){return arguments.length?(s=h?!0:Qr,f()):s!==Qr},d.interpolate=function(h){return arguments.length?(n=h,f()):n},d.unknown=function(h){return arguments.length?(a=h,d):a},function(h,p){return r=h,i=p,f()}}function Uj(){return nb()(Qr,Qr)}function Uxe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function i0(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Xd(t){return t=i0(Math.abs(t)),t?t[1]:NaN}function Wxe(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),a.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function Kxe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var qxe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function im(t){if(!(e=qxe.exec(t)))throw new Error("invalid format: "+t);var e;return new Wj({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}im.prototype=Wj.prototype;function Wj(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Wj.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Hxe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var MV;function Gxe(t,e){var n=i0(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(MV=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+i0(t,Math.max(0,e+a-1))[0]}function NI(t,e){var n=i0(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const OI={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Uxe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>NI(t*100,e),r:NI,s:Gxe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function II(t){return t}var DI=Array.prototype.map,MI=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Yxe(t){var e=t.grouping===void 0||t.thousands===void 0?II:Wxe(DI.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?II:Kxe(DI.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(d){d=im(d);var h=d.fill,p=d.align,v=d.sign,y=d.symbol,b=d.zero,x=d.width,_=d.comma,E=d.precision,P=d.trim,A=d.type;A==="n"?(_=!0,A="g"):OI[A]||(E===void 0&&(E=12),P=!0,A="g"),(b||h==="0"&&p==="=")&&(b=!0,h="0",p="=");var j=y==="$"?n:y==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",S=y==="$"?r:/[%p]/.test(A)?s:"",T=OI[A],N=/[defgprs%]/.test(A);E=E===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function D(M){var $=j,z=S,H,ee,U;if(A==="c")z=T(M)+z,M="";else{M=+M;var Z=M<0||1/M<0;if(M=isNaN(M)?l:T(Math.abs(M),E),P&&(M=Hxe(M)),Z&&+M==0&&v!=="+"&&(Z=!1),$=(Z?v==="("?v:o:v==="-"||v==="("?"":v)+$,z=(A==="s"?MI[8+MV/3]:"")+z+(Z&&v==="("?")":""),N){for(H=-1,ee=M.length;++H<ee;)if(U=M.charCodeAt(H),48>U||U>57){z=(U===46?i+M.slice(H+1):M.slice(H))+z,M=M.slice(0,H);break}}}_&&!b&&(M=e(M,1/0));var q=$.length+M.length+z.length,Y=q<x?new Array(x-q+1).join(h):"";switch(_&&b&&(M=e(Y+M,Y.length?x-z.length:1/0),Y=""),p){case"<":M=$+M+z+Y;break;case"=":M=$+Y+M+z;break;case"^":M=Y.slice(0,q=Y.length>>1)+$+M+z+Y.slice(q);break;default:M=Y+$+M+z;break}return a(M)}return D.toString=function(){return d+""},D}function f(d,h){var p=u((d=im(d),d.type="f",d)),v=Math.max(-8,Math.min(8,Math.floor(Xd(h)/3)))*3,y=Math.pow(10,-v),b=MI[8+v/3];return function(x){return p(y*x)+b}}return{format:u,formatPrefix:f}}var oy,Kj,RV;Xxe({thousands:",",grouping:[3],currency:["$",""]});function Xxe(t){return oy=Yxe(t),Kj=oy.format,RV=oy.formatPrefix,oy}function Qxe(t){return Math.max(0,-Xd(Math.abs(t)))}function Zxe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Xd(e)/3)))*3-Xd(Math.abs(t)))}function Jxe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Xd(e)-Xd(t))+1}function $V(t,e,n,r){var i=kS(t,e,n),a;switch(r=im(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=Zxe(i,s))&&(r.precision=a),RV(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Jxe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Qxe(i))&&(r.precision=a-(r.type==="%")*2);break}}return Kj(r)}function $l(t){var e=t.domain;return t.ticks=function(n){var r=e();return PS(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return $V(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],l,u,f=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);f-- >0;){if(u=CS(s,o,n),u===l)return r[i]=s,r[a]=o,e(r);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;l=u}return t},t}function a0(){var t=Uj();return t.copy=function(){return og(t,a0())},ya.apply(t,arguments),$l(t)}function LV(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,r0),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return LV(t).unknown(e)},t=arguments.length?Array.from(t,r0):[0,1],$l(n)}function zV(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function RI(t){return Math.log(t)}function $I(t){return Math.exp(t)}function ebe(t){return-Math.log(-t)}function tbe(t){return-Math.exp(-t)}function nbe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function rbe(t){return t===10?nbe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function ibe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function LI(t){return(e,n)=>-t(-e,n)}function qj(t){const e=t(RI,$I),n=e.domain;let r=10,i,a;function s(){return i=ibe(r),a=rbe(r),n()[0]<0?(i=LI(i),a=LI(a),t(ebe,tbe)):t(RI,$I),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=o=>{const l=n();let u=l[0],f=l[l.length-1];const d=f<u;d&&([u,f]=[f,u]);let h=i(u),p=i(f),v,y;const b=o==null?10:+o;let x=[];if(!(r%1)&&p-h<b){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(v=1;v<r;++v)if(y=h<0?v/a(-h):v*a(h),!(y<u)){if(y>f)break;x.push(y)}}else for(;h<=p;++h)for(v=r-1;v>=1;--v)if(y=h>0?v/a(-h):v*a(h),!(y<u)){if(y>f)break;x.push(y)}x.length*2<b&&(x=PS(u,f,b))}else x=PS(h,p,Math.min(p-h,b)).map(a);return d?x.reverse():x},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=im(l)).precision==null&&(l.trim=!0),l=Kj(l)),o===1/0)return l;const u=Math.max(1,r*o/e.ticks().length);return f=>{let d=f/a(Math.round(i(f)));return d*r<r-.5&&(d*=r),d<=u?l(f):""}},e.nice=()=>n(zV(n(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function VV(){const t=qj(nb()).domain([1,10]);return t.copy=()=>og(t,VV()).base(t.base()),ya.apply(t,arguments),t}function zI(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function VI(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Hj(t){var e=1,n=t(zI(e),VI(e));return n.constant=function(r){return arguments.length?t(zI(e=+r),VI(e)):e},$l(n)}function FV(){var t=Hj(nb());return t.copy=function(){return og(t,FV()).constant(t.constant())},ya.apply(t,arguments)}function FI(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function abe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function sbe(t){return t<0?-t*t:t*t}function Gj(t){var e=t(Qr,Qr),n=1;function r(){return n===1?t(Qr,Qr):n===.5?t(abe,sbe):t(FI(n),FI(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},$l(e)}function Yj(){var t=Gj(nb());return t.copy=function(){return og(t,Yj()).exponent(t.exponent())},ya.apply(t,arguments),t}function obe(){return Yj.apply(null,arguments).exponent(.5)}function BI(t){return Math.sign(t)*t*t}function lbe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function BV(){var t=Uj(),e=[0,1],n=!1,r;function i(a){var s=lbe(t(a));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(a){return t.invert(BI(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,r0)).map(BI)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return BV(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},ya.apply(i,arguments),$l(i)}function UV(){var t=[],e=[],n=[],r;function i(){var s=0,o=Math.max(1,e.length);for(n=new Array(o-1);++s<o;)n[s-1]=hxe(t,s/o);return a}function a(s){return s==null||isNaN(s=+s)?r:e[ag(n,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let o of s)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(hl),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return UV().domain(t).range(e).unknown(r)},ya.apply(a,arguments)}function WV(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function s(l){return l!=null&&l<=l?i[ag(r,l,0,n)]:a}function o(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return s}return s.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,o()):[t,e]},s.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,o()):i.slice()},s.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return WV().domain([t,e]).range(i).unknown(a)},ya.apply($l(s),arguments)}function KV(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[ag(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return KV().domain(t).range(e).unknown(n)},ya.apply(i,arguments)}const Qw=new Date,Zw=new Date;function lr(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const l=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return l;let u;do l.push(u=new Date(+a)),e(a,o),t(a);while(u<a&&a<s);return l},i.filter=a=>lr(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(Qw.setTime(+a),Zw.setTime(+s),t(Qw),t(Zw),Math.floor(n(Qw,Zw))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const s0=lr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);s0.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?lr(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):s0);s0.range;const Gs=1e3,ca=Gs*60,Ys=ca*60,go=Ys*24,Xj=go*7,UI=go*30,Jw=go*365,Ec=lr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Gs)},(t,e)=>(e-t)/Gs,t=>t.getUTCSeconds());Ec.range;const Qj=lr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Gs)},(t,e)=>{t.setTime(+t+e*ca)},(t,e)=>(e-t)/ca,t=>t.getMinutes());Qj.range;const Zj=lr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ca)},(t,e)=>(e-t)/ca,t=>t.getUTCMinutes());Zj.range;const Jj=lr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Gs-t.getMinutes()*ca)},(t,e)=>{t.setTime(+t+e*Ys)},(t,e)=>(e-t)/Ys,t=>t.getHours());Jj.range;const eT=lr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Ys)},(t,e)=>(e-t)/Ys,t=>t.getUTCHours());eT.range;const lg=lr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ca)/go,t=>t.getDate()-1);lg.range;const rb=lr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/go,t=>t.getUTCDate()-1);rb.range;const qV=lr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/go,t=>Math.floor(t/go));qV.range;function cu(t){return lr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ca)/Xj)}const ib=cu(0),o0=cu(1),cbe=cu(2),ube=cu(3),Qd=cu(4),dbe=cu(5),fbe=cu(6);ib.range;o0.range;cbe.range;ube.range;Qd.range;dbe.range;fbe.range;function uu(t){return lr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/Xj)}const ab=uu(0),l0=uu(1),hbe=uu(2),pbe=uu(3),Zd=uu(4),mbe=uu(5),gbe=uu(6);ab.range;l0.range;hbe.range;pbe.range;Zd.range;mbe.range;gbe.range;const tT=lr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());tT.range;const nT=lr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());nT.range;const yo=lr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());yo.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:lr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});yo.range;const vo=lr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());vo.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:lr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});vo.range;function HV(t,e,n,r,i,a){const s=[[Ec,1,Gs],[Ec,5,5*Gs],[Ec,15,15*Gs],[Ec,30,30*Gs],[a,1,ca],[a,5,5*ca],[a,15,15*ca],[a,30,30*ca],[i,1,Ys],[i,3,3*Ys],[i,6,6*Ys],[i,12,12*Ys],[r,1,go],[r,2,2*go],[n,1,Xj],[e,1,UI],[e,3,3*UI],[t,1,Jw]];function o(u,f,d){const h=f<u;h&&([u,f]=[f,u]);const p=d&&typeof d.range=="function"?d:l(u,f,d),v=p?p.range(u,+f+1):[];return h?v.reverse():v}function l(u,f,d){const h=Math.abs(f-u)/d,p=Lj(([,,b])=>b).right(s,h);if(p===s.length)return t.every(kS(u/Jw,f/Jw,d));if(p===0)return s0.every(Math.max(kS(u,f,d),1));const[v,y]=s[h/s[p-1][2]<s[p][2]/h?p-1:p];return v.every(y)}return[o,l]}const[ybe,vbe]=HV(vo,nT,ab,qV,eT,Zj),[xbe,bbe]=HV(yo,tT,ib,lg,Jj,Qj);function e1(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function t1(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function vh(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function wbe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,l=t.shortMonths,u=xh(i),f=bh(i),d=xh(a),h=bh(a),p=xh(s),v=bh(s),y=xh(o),b=bh(o),x=xh(l),_=bh(l),E={a:Z,A:q,b:Y,B:le,c:null,d:YI,e:YI,f:Wbe,g:ewe,G:nwe,H:Fbe,I:Bbe,j:Ube,L:GV,m:Kbe,M:qbe,p:ce,q:ye,Q:ZI,s:JI,S:Hbe,u:Gbe,U:Ybe,V:Xbe,w:Qbe,W:Zbe,x:null,X:null,y:Jbe,Y:twe,Z:rwe,"%":QI},P={a:Ee,A:He,b:ct,B:ft,c:null,d:XI,e:XI,f:owe,g:ywe,G:xwe,H:iwe,I:awe,j:swe,L:XV,m:lwe,M:cwe,p:It,q:Dt,Q:ZI,s:JI,S:uwe,u:dwe,U:fwe,V:hwe,w:pwe,W:mwe,x:null,X:null,y:gwe,Y:vwe,Z:bwe,"%":QI},A={a:D,A:M,b:$,B:z,c:H,d:HI,e:HI,f:$be,g:qI,G:KI,H:GI,I:GI,j:Ibe,L:Rbe,m:Obe,M:Dbe,p:N,q:Nbe,Q:zbe,s:Vbe,S:Mbe,u:jbe,U:Tbe,V:Pbe,w:Abe,W:Cbe,x:ee,X:U,y:qI,Y:KI,Z:kbe,"%":Lbe};E.x=j(n,E),E.X=j(r,E),E.c=j(e,E),P.x=j(n,P),P.X=j(r,P),P.c=j(e,P);function j(fe,Qe){return function(Ye){var he=[],Se=-1,Le=0,_e=fe.length,Ze,qt,Ht;for(Ye instanceof Date||(Ye=new Date(+Ye));++Se<_e;)fe.charCodeAt(Se)===37&&(he.push(fe.slice(Le,Se)),(qt=WI[Ze=fe.charAt(++Se)])!=null?Ze=fe.charAt(++Se):qt=Ze==="e"?" ":"0",(Ht=Qe[Ze])&&(Ze=Ht(Ye,qt)),he.push(Ze),Le=Se+1);return he.push(fe.slice(Le,Se)),he.join("")}}function S(fe,Qe){return function(Ye){var he=vh(1900,void 0,1),Se=T(he,fe,Ye+="",0),Le,_e;if(Se!=Ye.length)return null;if("Q"in he)return new Date(he.Q);if("s"in he)return new Date(he.s*1e3+("L"in he?he.L:0));if(Qe&&!("Z"in he)&&(he.Z=0),"p"in he&&(he.H=he.H%12+he.p*12),he.m===void 0&&(he.m="q"in he?he.q:0),"V"in he){if(he.V<1||he.V>53)return null;"w"in he||(he.w=1),"Z"in he?(Le=t1(vh(he.y,0,1)),_e=Le.getUTCDay(),Le=_e>4||_e===0?l0.ceil(Le):l0(Le),Le=rb.offset(Le,(he.V-1)*7),he.y=Le.getUTCFullYear(),he.m=Le.getUTCMonth(),he.d=Le.getUTCDate()+(he.w+6)%7):(Le=e1(vh(he.y,0,1)),_e=Le.getDay(),Le=_e>4||_e===0?o0.ceil(Le):o0(Le),Le=lg.offset(Le,(he.V-1)*7),he.y=Le.getFullYear(),he.m=Le.getMonth(),he.d=Le.getDate()+(he.w+6)%7)}else("W"in he||"U"in he)&&("w"in he||(he.w="u"in he?he.u%7:"W"in he?1:0),_e="Z"in he?t1(vh(he.y,0,1)).getUTCDay():e1(vh(he.y,0,1)).getDay(),he.m=0,he.d="W"in he?(he.w+6)%7+he.W*7-(_e+5)%7:he.w+he.U*7-(_e+6)%7);return"Z"in he?(he.H+=he.Z/100|0,he.M+=he.Z%100,t1(he)):e1(he)}}function T(fe,Qe,Ye,he){for(var Se=0,Le=Qe.length,_e=Ye.length,Ze,qt;Se<Le;){if(he>=_e)return-1;if(Ze=Qe.charCodeAt(Se++),Ze===37){if(Ze=Qe.charAt(Se++),qt=A[Ze in WI?Qe.charAt(Se++):Ze],!qt||(he=qt(fe,Ye,he))<0)return-1}else if(Ze!=Ye.charCodeAt(he++))return-1}return he}function N(fe,Qe,Ye){var he=u.exec(Qe.slice(Ye));return he?(fe.p=f.get(he[0].toLowerCase()),Ye+he[0].length):-1}function D(fe,Qe,Ye){var he=p.exec(Qe.slice(Ye));return he?(fe.w=v.get(he[0].toLowerCase()),Ye+he[0].length):-1}function M(fe,Qe,Ye){var he=d.exec(Qe.slice(Ye));return he?(fe.w=h.get(he[0].toLowerCase()),Ye+he[0].length):-1}function $(fe,Qe,Ye){var he=x.exec(Qe.slice(Ye));return he?(fe.m=_.get(he[0].toLowerCase()),Ye+he[0].length):-1}function z(fe,Qe,Ye){var he=y.exec(Qe.slice(Ye));return he?(fe.m=b.get(he[0].toLowerCase()),Ye+he[0].length):-1}function H(fe,Qe,Ye){return T(fe,e,Qe,Ye)}function ee(fe,Qe,Ye){return T(fe,n,Qe,Ye)}function U(fe,Qe,Ye){return T(fe,r,Qe,Ye)}function Z(fe){return s[fe.getDay()]}function q(fe){return a[fe.getDay()]}function Y(fe){return l[fe.getMonth()]}function le(fe){return o[fe.getMonth()]}function ce(fe){return i[+(fe.getHours()>=12)]}function ye(fe){return 1+~~(fe.getMonth()/3)}function Ee(fe){return s[fe.getUTCDay()]}function He(fe){return a[fe.getUTCDay()]}function ct(fe){return l[fe.getUTCMonth()]}function ft(fe){return o[fe.getUTCMonth()]}function It(fe){return i[+(fe.getUTCHours()>=12)]}function Dt(fe){return 1+~~(fe.getUTCMonth()/3)}return{format:function(fe){var Qe=j(fe+="",E);return Qe.toString=function(){return fe},Qe},parse:function(fe){var Qe=S(fe+="",!1);return Qe.toString=function(){return fe},Qe},utcFormat:function(fe){var Qe=j(fe+="",P);return Qe.toString=function(){return fe},Qe},utcParse:function(fe){var Qe=S(fe+="",!0);return Qe.toString=function(){return fe},Qe}}}var WI={"-":"",_:" ",0:"0"},vr=/^\s*\d+/,_be=/^%/,Sbe=/[\\^$*+?|[\]().{}]/g;function Ot(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Ebe(t){return t.replace(Sbe,"\\$&")}function xh(t){return new RegExp("^(?:"+t.map(Ebe).join("|")+")","i")}function bh(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Abe(t,e,n){var r=vr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function jbe(t,e,n){var r=vr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Tbe(t,e,n){var r=vr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Pbe(t,e,n){var r=vr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Cbe(t,e,n){var r=vr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function KI(t,e,n){var r=vr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function qI(t,e,n){var r=vr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function kbe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Nbe(t,e,n){var r=vr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Obe(t,e,n){var r=vr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function HI(t,e,n){var r=vr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Ibe(t,e,n){var r=vr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function GI(t,e,n){var r=vr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Dbe(t,e,n){var r=vr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Mbe(t,e,n){var r=vr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Rbe(t,e,n){var r=vr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function $be(t,e,n){var r=vr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Lbe(t,e,n){var r=_be.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function zbe(t,e,n){var r=vr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Vbe(t,e,n){var r=vr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function YI(t,e){return Ot(t.getDate(),e,2)}function Fbe(t,e){return Ot(t.getHours(),e,2)}function Bbe(t,e){return Ot(t.getHours()%12||12,e,2)}function Ube(t,e){return Ot(1+lg.count(yo(t),t),e,3)}function GV(t,e){return Ot(t.getMilliseconds(),e,3)}function Wbe(t,e){return GV(t,e)+"000"}function Kbe(t,e){return Ot(t.getMonth()+1,e,2)}function qbe(t,e){return Ot(t.getMinutes(),e,2)}function Hbe(t,e){return Ot(t.getSeconds(),e,2)}function Gbe(t){var e=t.getDay();return e===0?7:e}function Ybe(t,e){return Ot(ib.count(yo(t)-1,t),e,2)}function YV(t){var e=t.getDay();return e>=4||e===0?Qd(t):Qd.ceil(t)}function Xbe(t,e){return t=YV(t),Ot(Qd.count(yo(t),t)+(yo(t).getDay()===4),e,2)}function Qbe(t){return t.getDay()}function Zbe(t,e){return Ot(o0.count(yo(t)-1,t),e,2)}function Jbe(t,e){return Ot(t.getFullYear()%100,e,2)}function ewe(t,e){return t=YV(t),Ot(t.getFullYear()%100,e,2)}function twe(t,e){return Ot(t.getFullYear()%1e4,e,4)}function nwe(t,e){var n=t.getDay();return t=n>=4||n===0?Qd(t):Qd.ceil(t),Ot(t.getFullYear()%1e4,e,4)}function rwe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ot(e/60|0,"0",2)+Ot(e%60,"0",2)}function XI(t,e){return Ot(t.getUTCDate(),e,2)}function iwe(t,e){return Ot(t.getUTCHours(),e,2)}function awe(t,e){return Ot(t.getUTCHours()%12||12,e,2)}function swe(t,e){return Ot(1+rb.count(vo(t),t),e,3)}function XV(t,e){return Ot(t.getUTCMilliseconds(),e,3)}function owe(t,e){return XV(t,e)+"000"}function lwe(t,e){return Ot(t.getUTCMonth()+1,e,2)}function cwe(t,e){return Ot(t.getUTCMinutes(),e,2)}function uwe(t,e){return Ot(t.getUTCSeconds(),e,2)}function dwe(t){var e=t.getUTCDay();return e===0?7:e}function fwe(t,e){return Ot(ab.count(vo(t)-1,t),e,2)}function QV(t){var e=t.getUTCDay();return e>=4||e===0?Zd(t):Zd.ceil(t)}function hwe(t,e){return t=QV(t),Ot(Zd.count(vo(t),t)+(vo(t).getUTCDay()===4),e,2)}function pwe(t){return t.getUTCDay()}function mwe(t,e){return Ot(l0.count(vo(t)-1,t),e,2)}function gwe(t,e){return Ot(t.getUTCFullYear()%100,e,2)}function ywe(t,e){return t=QV(t),Ot(t.getUTCFullYear()%100,e,2)}function vwe(t,e){return Ot(t.getUTCFullYear()%1e4,e,4)}function xwe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Zd(t):Zd.ceil(t),Ot(t.getUTCFullYear()%1e4,e,4)}function bwe(){return"+0000"}function QI(){return"%"}function ZI(t){return+t}function JI(t){return Math.floor(+t/1e3)}var Ou,ZV,JV;wwe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function wwe(t){return Ou=wbe(t),ZV=Ou.format,Ou.parse,JV=Ou.utcFormat,Ou.utcParse,Ou}function _we(t){return new Date(t)}function Swe(t){return t instanceof Date?+t:+new Date(+t)}function rT(t,e,n,r,i,a,s,o,l,u){var f=Uj(),d=f.invert,h=f.domain,p=u(".%L"),v=u(":%S"),y=u("%I:%M"),b=u("%I %p"),x=u("%a %d"),_=u("%b %d"),E=u("%B"),P=u("%Y");function A(j){return(l(j)<j?p:o(j)<j?v:s(j)<j?y:a(j)<j?b:r(j)<j?i(j)<j?x:_:n(j)<j?E:P)(j)}return f.invert=function(j){return new Date(d(j))},f.domain=function(j){return arguments.length?h(Array.from(j,Swe)):h().map(_we)},f.ticks=function(j){var S=h();return t(S[0],S[S.length-1],j??10)},f.tickFormat=function(j,S){return S==null?A:u(S)},f.nice=function(j){var S=h();return(!j||typeof j.range!="function")&&(j=e(S[0],S[S.length-1],j??10)),j?h(zV(S,j)):f},f.copy=function(){return og(f,rT(t,e,n,r,i,a,s,o,l,u))},f}function Ewe(){return ya.apply(rT(xbe,bbe,yo,tT,ib,lg,Jj,Qj,Ec,ZV).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Awe(){return ya.apply(rT(ybe,vbe,vo,nT,ab,rb,eT,Zj,Ec,JV).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function sb(){var t=0,e=1,n,r,i,a,s=Qr,o=!1,l;function u(d){return d==null||isNaN(d=+d)?l:s(i===0?.5:(d=(a(d)-n)*i,o?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([t,e]=d,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(d){return arguments.length?(o=!!d,u):o},u.interpolator=function(d){return arguments.length?(s=d,u):s};function f(d){return function(h){var p,v;return arguments.length?([p,v]=h,s=d(p,v),u):[s(0),s(1)]}}return u.range=f(Wf),u.rangeRound=f(Bj),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return a=d,n=d(t),r=d(e),i=n===r?0:1/(r-n),u}}function Ll(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function eF(){var t=$l(sb()(Qr));return t.copy=function(){return Ll(t,eF())},Ao.apply(t,arguments)}function tF(){var t=qj(sb()).domain([1,10]);return t.copy=function(){return Ll(t,tF()).base(t.base())},Ao.apply(t,arguments)}function nF(){var t=Hj(sb());return t.copy=function(){return Ll(t,nF()).constant(t.constant())},Ao.apply(t,arguments)}function iT(){var t=Gj(sb());return t.copy=function(){return Ll(t,iT()).exponent(t.exponent())},Ao.apply(t,arguments)}function jwe(){return iT.apply(null,arguments).exponent(.5)}function rF(){var t=[],e=Qr;function n(r){if(r!=null&&!isNaN(r=+r))return e((ag(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(hl),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>fxe(t,a/r))},n.copy=function(){return rF(e).domain(t)},Ao.apply(n,arguments)}function ob(){var t=0,e=.5,n=1,r=1,i,a,s,o,l,u=Qr,f,d=!1,h;function p(y){return isNaN(y=+y)?h:(y=.5+((y=+f(y))-a)*(r*y<r*a?o:l),u(d?Math.max(0,Math.min(1,y)):y))}p.domain=function(y){return arguments.length?([t,e,n]=y,i=f(t=+t),a=f(e=+e),s=f(n=+n),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),r=a<i?-1:1,p):[t,e,n]},p.clamp=function(y){return arguments.length?(d=!!y,p):d},p.interpolator=function(y){return arguments.length?(u=y,p):u};function v(y){return function(b){var x,_,E;return arguments.length?([x,_,E]=b,u=Lxe(y,[x,_,E]),p):[u(0),u(.5),u(1)]}}return p.range=v(Wf),p.rangeRound=v(Bj),p.unknown=function(y){return arguments.length?(h=y,p):h},function(y){return f=y,i=y(t),a=y(e),s=y(n),o=i===a?0:.5/(a-i),l=a===s?0:.5/(s-a),r=a<i?-1:1,p}}function iF(){var t=$l(ob()(Qr));return t.copy=function(){return Ll(t,iF())},Ao.apply(t,arguments)}function aF(){var t=qj(ob()).domain([.1,1,10]);return t.copy=function(){return Ll(t,aF()).base(t.base())},Ao.apply(t,arguments)}function sF(){var t=Hj(ob());return t.copy=function(){return Ll(t,sF()).constant(t.constant())},Ao.apply(t,arguments)}function aT(){var t=Gj(ob());return t.copy=function(){return Ll(t,aT()).exponent(t.exponent())},Ao.apply(t,arguments)}function Twe(){return aT.apply(null,arguments).exponent(.5)}const eD=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:em,scaleDiverging:iF,scaleDivergingLog:aF,scaleDivergingPow:aT,scaleDivergingSqrt:Twe,scaleDivergingSymlog:sF,scaleIdentity:LV,scaleImplicit:NS,scaleLinear:a0,scaleLog:VV,scaleOrdinal:zj,scalePoint:op,scalePow:Yj,scaleQuantile:UV,scaleQuantize:WV,scaleRadial:BV,scaleSequential:eF,scaleSequentialLog:tF,scaleSequentialPow:iT,scaleSequentialQuantile:rF,scaleSequentialSqrt:jwe,scaleSequentialSymlog:nF,scaleSqrt:obe,scaleSymlog:FV,scaleThreshold:KV,scaleTime:Ewe,scaleUtc:Awe,tickFormat:$V},Symbol.toStringTag,{value:"Module"}));var Pwe=Mf;function Cwe(t,e,n){for(var r=-1,i=t.length;++r<i;){var a=t[r],s=e(a);if(s!=null&&(o===void 0?s===s&&!Pwe(s):n(s,o)))var o=s,l=a}return l}var lb=Cwe;function kwe(t,e){return t>e}var oF=kwe,Nwe=lb,Owe=oF,Iwe=Uf;function Dwe(t){return t&&t.length?Nwe(t,Iwe,Owe):void 0}var Mwe=Dwe;const Zo=Vt(Mwe);function Rwe(t,e){return t<e}var lF=Rwe,$we=lb,Lwe=lF,zwe=Uf;function Vwe(t){return t&&t.length?$we(t,zwe,Lwe):void 0}var Fwe=Vwe;const cb=Vt(Fwe);var Bwe=xj,Uwe=ks,Wwe=gV,Kwe=ji;function qwe(t,e){var n=Kwe(t)?Bwe:Wwe;return n(t,Uwe(e))}var Hwe=qwe,Gwe=pV,Ywe=Hwe;function Xwe(t,e){return Gwe(Ywe(t,e),1)}var Qwe=Xwe;const Zwe=Vt(Qwe);var Jwe=Dj;function e1e(t,e){return Jwe(t,e)}var t1e=e1e;const Hc=Vt(t1e);var Kf=1e9,n1e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},oT,gn=!0,pa="[DecimalError] ",Dc=pa+"Invalid argument: ",sT=pa+"Exponent out of range: ",qf=Math.floor,hc=Math.pow,r1e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,$i,fr=1e7,cn=7,cF=9007199254740991,c0=qf(cF/cn),Be={};Be.absoluteValue=Be.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Be.comparedTo=Be.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Be.decimalPlaces=Be.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*cn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Be.dividedBy=Be.div=function(t){return ro(this,new this.constructor(t))};Be.dividedToIntegerBy=Be.idiv=function(t){var e=this,n=e.constructor;return Zt(ro(e,new n(t),0,1),n.precision)};Be.equals=Be.eq=function(t){return!this.cmp(t)};Be.exponent=function(){return Xn(this)};Be.greaterThan=Be.gt=function(t){return this.cmp(t)>0};Be.greaterThanOrEqualTo=Be.gte=function(t){return this.cmp(t)>=0};Be.isInteger=Be.isint=function(){return this.e>this.d.length-2};Be.isNegative=Be.isneg=function(){return this.s<0};Be.isPositive=Be.ispos=function(){return this.s>0};Be.isZero=function(){return this.s===0};Be.lessThan=Be.lt=function(t){return this.cmp(t)<0};Be.lessThanOrEqualTo=Be.lte=function(t){return this.cmp(t)<1};Be.logarithm=Be.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq($i))throw Error(pa+"NaN");if(n.s<1)throw Error(pa+(n.s?"NaN":"-Infinity"));return n.eq($i)?new r(0):(gn=!1,e=ro(am(n,a),am(t,a),a),gn=!0,Zt(e,i))};Be.minus=Be.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?fF(e,t):uF(e,(t.s=-t.s,t))};Be.modulo=Be.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(pa+"NaN");return n.s?(gn=!1,e=ro(n,t,0,1).times(t),gn=!0,n.minus(e)):Zt(new r(n),i)};Be.naturalExponential=Be.exp=function(){return dF(this)};Be.naturalLogarithm=Be.ln=function(){return am(this)};Be.negated=Be.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Be.plus=Be.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?uF(e,t):fF(e,(t.s=-t.s,t))};Be.precision=Be.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Dc+t);if(e=Xn(i)+1,r=i.d.length-1,n=r*cn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Be.squareRoot=Be.sqrt=function(){var t,e,n,r,i,a,s,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(pa+"NaN")}for(t=Xn(o),gn=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=ps(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=qf((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=s=n+3;;)if(a=r,r=a.plus(ro(o,a,s+2)).times(.5),ps(a.d).slice(0,s)===(e=ps(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(Zt(a,n+1,0),a.times(a).eq(o)){r=a;break}}else if(e!="9999")break;s+=4}return gn=!0,Zt(r,n)};Be.times=Be.mul=function(t){var e,n,r,i,a,s,o,l,u,f=this,d=f.constructor,h=f.d,p=(t=new d(t)).d;if(!f.s||!t.s)return new d(0);for(t.s*=f.s,n=f.e+t.e,l=h.length,u=p.length,l<u&&(a=h,h=p,p=a,s=l,l=u,u=s),a=[],s=l+u,r=s;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,i=l+r;i>r;)o=a[i]+p[r]*h[i-r-1]+e,a[i--]=o%fr|0,e=o/fr|0;a[i]=(a[i]+e)%fr|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,gn?Zt(t,d.precision):t};Be.toDecimalPlaces=Be.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Ts(t,0,Kf),e===void 0?e=r.rounding:Ts(e,0,8),Zt(n,t+Xn(n)+1,e))};Be.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Gc(r,!0):(Ts(t,0,Kf),e===void 0?e=i.rounding:Ts(e,0,8),r=Zt(new i(r),t+1,e),n=Gc(r,!0,t+1)),n};Be.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?Gc(i):(Ts(t,0,Kf),e===void 0?e=a.rounding:Ts(e,0,8),r=Zt(new a(i),t+Xn(i)+1,e),n=Gc(r.abs(),!1,t+Xn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Be.toInteger=Be.toint=function(){var t=this,e=t.constructor;return Zt(new e(t),Xn(t)+1,e.rounding)};Be.toNumber=function(){return+this};Be.toPower=Be.pow=function(t){var e,n,r,i,a,s,o=this,l=o.constructor,u=12,f=+(t=new l(t));if(!t.s)return new l($i);if(o=new l(o),!o.s){if(t.s<1)throw Error(pa+"Infinity");return o}if(o.eq($i))return o;if(r=l.precision,t.eq($i))return Zt(o,r);if(e=t.e,n=t.d.length-1,s=e>=n,a=o.s,s){if((n=f<0?-f:f)<=cF){for(i=new l($i),e=Math.ceil(r/cn+4),gn=!1;n%2&&(i=i.times(o),nD(i.d,e)),n=qf(n/2),n!==0;)o=o.times(o),nD(o.d,e);return gn=!0,t.s<0?new l($i).div(i):Zt(i,r)}}else if(a<0)throw Error(pa+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,gn=!1,i=t.times(am(o,r+u)),gn=!0,i=dF(i),i.s=a,i};Be.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=Xn(i),r=Gc(i,n<=a.toExpNeg||n>=a.toExpPos)):(Ts(t,1,Kf),e===void 0?e=a.rounding:Ts(e,0,8),i=Zt(new a(i),t,e),n=Xn(i),r=Gc(i,t<=n||n<=a.toExpNeg,t)),r};Be.toSignificantDigits=Be.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Ts(t,1,Kf),e===void 0?e=r.rounding:Ts(e,0,8)),Zt(new r(n),t,e)};Be.toString=Be.valueOf=Be.val=Be.toJSON=Be[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Xn(t),n=t.constructor;return Gc(t,e<=n.toExpNeg||e>=n.toExpPos)};function uF(t,e){var n,r,i,a,s,o,l,u,f=t.constructor,d=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),gn?Zt(e,d):e;if(l=t.d,u=e.d,s=t.e,i=e.e,l=l.slice(),a=s-i,a){for(a<0?(r=l,a=-a,o=u.length):(r=u,i=s,o=l.length),s=Math.ceil(d/cn),o=s>o?s+1:o+1,a>o&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(o=l.length,a=u.length,o-a<0&&(a=o,r=u,u=l,l=r),n=0;a;)n=(l[--a]=l[a]+u[a]+n)/fr|0,l[a]%=fr;for(n&&(l.unshift(n),++i),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=i,gn?Zt(e,d):e}function Ts(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Dc+t)}function ps(t){var e,n,r,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)r=t[e]+"",n=cn-r.length,n&&(a+=Ko(n)),a+=r;s=t[e],r=s+"",n=cn-r.length,n&&(a+=Ko(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var ro=function(){function t(r,i){var a,s=0,o=r.length;for(r=r.slice();o--;)a=r[o]*i+s,r[o]=a%fr|0,s=a/fr|0;return s&&r.unshift(s),r}function e(r,i,a,s){var o,l;if(a!=s)l=a>s?1:-1;else for(o=l=0;o<a;o++)if(r[o]!=i[o]){l=r[o]>i[o]?1:-1;break}return l}function n(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*fr+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var o,l,u,f,d,h,p,v,y,b,x,_,E,P,A,j,S,T,N=r.constructor,D=r.s==i.s?1:-1,M=r.d,$=i.d;if(!r.s)return new N(r);if(!i.s)throw Error(pa+"Division by zero");for(l=r.e-i.e,S=$.length,A=M.length,p=new N(D),v=p.d=[],u=0;$[u]==(M[u]||0);)++u;if($[u]>(M[u]||0)&&--l,a==null?_=a=N.precision:s?_=a+(Xn(r)-Xn(i))+1:_=a,_<0)return new N(0);if(_=_/cn+2|0,u=0,S==1)for(f=0,$=$[0],_++;(u<A||f)&&_--;u++)E=f*fr+(M[u]||0),v[u]=E/$|0,f=E%$|0;else{for(f=fr/($[0]+1)|0,f>1&&($=t($,f),M=t(M,f),S=$.length,A=M.length),P=S,y=M.slice(0,S),b=y.length;b<S;)y[b++]=0;T=$.slice(),T.unshift(0),j=$[0],$[1]>=fr/2&&++j;do f=0,o=e($,y,S,b),o<0?(x=y[0],S!=b&&(x=x*fr+(y[1]||0)),f=x/j|0,f>1?(f>=fr&&(f=fr-1),d=t($,f),h=d.length,b=y.length,o=e(d,y,h,b),o==1&&(f--,n(d,S<h?T:$,h))):(f==0&&(o=f=1),d=$.slice()),h=d.length,h<b&&d.unshift(0),n(y,d,b),o==-1&&(b=y.length,o=e($,y,S,b),o<1&&(f++,n(y,S<b?T:$,b))),b=y.length):o===0&&(f++,y=[0]),v[u++]=f,o&&y[0]?y[b++]=M[P]||0:(y=[M[P]],b=1);while((P++<A||y[0]!==void 0)&&_--)}return v[0]||v.shift(),p.e=l,Zt(p,s?a+Xn(p)+1:a)}}();function dF(t,e){var n,r,i,a,s,o,l=0,u=0,f=t.constructor,d=f.precision;if(Xn(t)>16)throw Error(sT+Xn(t));if(!t.s)return new f($i);for(gn=!1,o=d,s=new f(.03125);t.abs().gte(.1);)t=t.times(s),u+=5;for(r=Math.log(hc(2,u))/Math.LN10*2+5|0,o+=r,n=i=a=new f($i),f.precision=o;;){if(i=Zt(i.times(t),o),n=n.times(++l),s=a.plus(ro(i,n,o)),ps(s.d).slice(0,o)===ps(a.d).slice(0,o)){for(;u--;)a=Zt(a.times(a),o);return f.precision=d,e==null?(gn=!0,Zt(a,d)):a}a=s}}function Xn(t){for(var e=t.e*cn,n=t.d[0];n>=10;n/=10)e++;return e}function n1(t,e,n){if(e>t.LN10.sd())throw gn=!0,n&&(t.precision=n),Error(pa+"LN10 precision limit exceeded");return Zt(new t(t.LN10),e)}function Ko(t){for(var e="";t--;)e+="0";return e}function am(t,e){var n,r,i,a,s,o,l,u,f,d=1,h=10,p=t,v=p.d,y=p.constructor,b=y.precision;if(p.s<1)throw Error(pa+(p.s?"NaN":"-Infinity"));if(p.eq($i))return new y(0);if(e==null?(gn=!1,u=b):u=e,p.eq(10))return e==null&&(gn=!0),n1(y,u);if(u+=h,y.precision=u,n=ps(v),r=n.charAt(0),a=Xn(p),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(t),n=ps(p.d),r=n.charAt(0),d++;a=Xn(p),r>1?(p=new y("0."+n),a++):p=new y(r+"."+n.slice(1))}else return l=n1(y,u+2,b).times(a+""),p=am(new y(r+"."+n.slice(1)),u-h).plus(l),y.precision=b,e==null?(gn=!0,Zt(p,b)):p;for(o=s=p=ro(p.minus($i),p.plus($i),u),f=Zt(p.times(p),u),i=3;;){if(s=Zt(s.times(f),u),l=o.plus(ro(s,new y(i),u)),ps(l.d).slice(0,u)===ps(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(n1(y,u+2,b).times(a+""))),o=ro(o,new y(d),u),y.precision=b,e==null?(gn=!0,Zt(o,b)):o;o=l,i+=2}}function tD(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=qf(n/cn),t.d=[],r=(n+1)%cn,n<0&&(r+=cn),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=cn;r<i;)t.d.push(+e.slice(r,r+=cn));e=e.slice(r),r=cn-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),gn&&(t.e>c0||t.e<-c0))throw Error(sT+n)}else t.s=0,t.e=0,t.d=[0];return t}function Zt(t,e,n){var r,i,a,s,o,l,u,f,d=t.d;for(s=1,a=d[0];a>=10;a/=10)s++;if(r=e-s,r<0)r+=cn,i=e,u=d[f=0];else{if(f=Math.ceil((r+1)/cn),a=d.length,f>=a)return t;for(u=a=d[f],s=1;a>=10;a/=10)s++;r%=cn,i=r-cn+s}if(n!==void 0&&(a=hc(10,s-i-1),o=u/a%10|0,l=e<0||d[f+1]!==void 0||u%a,l=n<4?(o||l)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||l||n==6&&(r>0?i>0?u/hc(10,s-i):0:d[f-1])%10&1||n==(t.s<0?8:7))),e<1||!d[0])return l?(a=Xn(t),d.length=1,e=e-a-1,d[0]=hc(10,(cn-e%cn)%cn),t.e=qf(-e/cn)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(r==0?(d.length=f,a=1,f--):(d.length=f+1,a=hc(10,cn-r),d[f]=i>0?(u/hc(10,s-i)%hc(10,i)|0)*a:0),l)for(;;)if(f==0){(d[0]+=a)==fr&&(d[0]=1,++t.e);break}else{if(d[f]+=a,d[f]!=fr)break;d[f--]=0,a=1}for(r=d.length;d[--r]===0;)d.pop();if(gn&&(t.e>c0||t.e<-c0))throw Error(sT+Xn(t));return t}function fF(t,e){var n,r,i,a,s,o,l,u,f,d,h=t.constructor,p=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),gn?Zt(e,p):e;if(l=t.d,d=e.d,r=e.e,u=t.e,l=l.slice(),s=u-r,s){for(f=s<0,f?(n=l,s=-s,o=d.length):(n=d,r=u,o=l.length),i=Math.max(Math.ceil(p/cn),o)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=l.length,o=d.length,f=i<o,f&&(o=i),i=0;i<o;i++)if(l[i]!=d[i]){f=l[i]<d[i];break}s=0}for(f&&(n=l,l=d,d=n,e.s=-e.s),o=l.length,i=d.length-o;i>0;--i)l[o++]=0;for(i=d.length;i>s;){if(l[--i]<d[i]){for(a=i;a&&l[--a]===0;)l[a]=fr-1;--l[a],l[i]+=fr}l[i]-=d[i]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,gn?Zt(e,p):e):new h(0)}function Gc(t,e,n){var r,i=Xn(t),a=ps(t.d),s=a.length;return e?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+Ko(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Ko(-i-1)+a,n&&(r=n-s)>0&&(a+=Ko(r))):i>=s?(a+=Ko(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+Ko(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=Ko(r))),t.s<0?"-"+a:a}function nD(t,e){if(t.length>e)return t.length=e,!0}function hF(t){var e,n,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Dc+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return tD(s,a.toString())}else if(typeof a!="string")throw Error(Dc+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,r1e.test(a))tD(s,a);else throw Error(Dc+a)}if(i.prototype=Be,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=hF,i.config=i.set=i1e,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function i1e(t){if(!t||typeof t!="object")throw Error(pa+"Object expected");var e,n,r,i=["precision",1,Kf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(qf(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Dc+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Dc+n+": "+r);return this}var oT=hF(n1e);$i=new oT(1);const Gt=oT;function a1e(t){return c1e(t)||l1e(t)||o1e(t)||s1e()}function s1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o1e(t,e){if(t){if(typeof t=="string")return MS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MS(t,e)}}function l1e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function c1e(t){if(Array.isArray(t))return MS(t)}function MS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var u1e=function(e){return e},pF={},mF=function(e){return e===pF},rD=function(e){return function n(){return arguments.length===0||arguments.length===1&&mF(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},d1e=function t(e,n){return e===1?n:rD(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var s=i.filter(function(o){return o!==pF}).length;return s>=e?n.apply(void 0,i):t(e-s,rD(function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];var f=i.map(function(d){return mF(d)?l.shift():d});return n.apply(void 0,a1e(f).concat(l))}))})},ub=function(e){return d1e(e.length,e)},RS=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},f1e=ub(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),h1e=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return u1e;var i=n.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce(function(o,l){return l(o)},a.apply(void 0,arguments))}},$S=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},gF=function(e){var n=null,r=null;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n&&a.every(function(o,l){return o===n[l]})||(n=a,r=e.apply(void 0,a)),r}};function p1e(t){var e;return t===0?e=1:e=Math.floor(new Gt(t).abs().log(10).toNumber())+1,e}function m1e(t,e,n){for(var r=new Gt(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var g1e=ub(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),y1e=ub(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),v1e=ub(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const db={rangeStep:m1e,getDigitCount:p1e,interpolateNumber:g1e,uninterpolateNumber:y1e,uninterpolateTruncation:v1e};function LS(t){return w1e(t)||b1e(t)||yF(t)||x1e()}function x1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b1e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function w1e(t){if(Array.isArray(t))return zS(t)}function sm(t,e){return E1e(t)||S1e(t,e)||yF(t,e)||_1e()}function _1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yF(t,e){if(t){if(typeof t=="string")return zS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zS(t,e)}}function zS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function S1e(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,a=void 0;try{for(var s=t[Symbol.iterator](),o;!(r=(o=s.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,a=l}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw a}}return n}}function E1e(t){if(Array.isArray(t))return t}function vF(t){var e=sm(t,2),n=e[0],r=e[1],i=n,a=r;return n>r&&(i=r,a=n),[i,a]}function xF(t,e,n){if(t.lte(0))return new Gt(0);var r=db.getDigitCount(t.toNumber()),i=new Gt(10).pow(r),a=t.div(i),s=r!==1?.05:.1,o=new Gt(Math.ceil(a.div(s).toNumber())).add(n).mul(s),l=o.mul(i);return e?l:new Gt(Math.ceil(l))}function A1e(t,e,n){var r=1,i=new Gt(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new Gt(10).pow(db.getDigitCount(t)-1),i=new Gt(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new Gt(Math.floor(t)))}else t===0?i=new Gt(Math.floor((e-1)/2)):n||(i=new Gt(Math.floor(t)));var s=Math.floor((e-1)/2),o=h1e(f1e(function(l){return i.add(new Gt(l-s).mul(r)).toNumber()}),RS);return o(0,e)}function bF(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new Gt(0),tickMin:new Gt(0),tickMax:new Gt(0)};var a=xF(new Gt(e).sub(t).div(n-1),r,i),s;t<=0&&e>=0?s=new Gt(0):(s=new Gt(t).add(e).div(2),s=s.sub(new Gt(s).mod(a)));var o=Math.ceil(s.sub(t).div(a).toNumber()),l=Math.ceil(new Gt(e).sub(s).div(a).toNumber()),u=o+l+1;return u>n?bF(t,e,n,r,i+1):(u<n&&(l=e>0?l+(n-u):l,o=e>0?o:o+(n-u)),{step:a,tickMin:s.sub(new Gt(o).mul(a)),tickMax:s.add(new Gt(l).mul(a))})}function j1e(t){var e=sm(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),o=vF([n,r]),l=sm(o,2),u=l[0],f=l[1];if(u===-1/0||f===1/0){var d=f===1/0?[u].concat(LS(RS(0,i-1).map(function(){return 1/0}))):[].concat(LS(RS(0,i-1).map(function(){return-1/0})),[f]);return n>r?$S(d):d}if(u===f)return A1e(u,i,a);var h=bF(u,f,s,a),p=h.step,v=h.tickMin,y=h.tickMax,b=db.rangeStep(v,y.add(new Gt(.1).mul(p)),p);return n>r?$S(b):b}function T1e(t,e){var n=sm(t,2),r=n[0],i=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=vF([r,i]),o=sm(s,2),l=o[0],u=o[1];if(l===-1/0||u===1/0)return[r,i];if(l===u)return[l];var f=Math.max(e,2),d=xF(new Gt(u).sub(l).div(f-1),a,0),h=[].concat(LS(db.rangeStep(new Gt(l),new Gt(u).sub(new Gt(.99).mul(d)),d)),[u]);return r>i?$S(h):h}var P1e=gF(j1e),C1e=gF(T1e),k1e="Invariant failed";function Yc(t,e){throw new Error(k1e)}var N1e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Jd(t){"@babel/helpers - typeof";return Jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jd(t)}function u0(){return u0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u0.apply(this,arguments)}function O1e(t,e){return R1e(t)||M1e(t,e)||D1e(t,e)||I1e()}function I1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D1e(t,e){if(t){if(typeof t=="string")return iD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iD(t,e)}}function iD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function M1e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function R1e(t){if(Array.isArray(t))return t}function $1e(t,e){if(t==null)return{};var n=L1e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function L1e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function z1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function V1e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,SF(r.key),r)}}function F1e(t,e,n){return e&&V1e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function B1e(t,e,n){return e=d0(e),U1e(t,wF()?Reflect.construct(e,n||[],d0(t).constructor):e.apply(t,n))}function U1e(t,e){if(e&&(Jd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return W1e(t)}function W1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wF=function(){return!!t})()}function d0(t){return d0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},d0(t)}function K1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VS(t,e)}function VS(t,e){return VS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},VS(t,e)}function _F(t,e,n){return e=SF(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SF(t){var e=q1e(t,"string");return Jd(e)=="symbol"?e:e+""}function q1e(t,e){if(Jd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var cg=function(t){function e(){return z1e(this,e),B1e(this,e,arguments)}return K1e(e,t),F1e(e,[{key:"render",value:function(){var r=this.props,i=r.offset,a=r.layout,s=r.width,o=r.dataKey,l=r.data,u=r.dataPointFormatter,f=r.xAxis,d=r.yAxis,h=$1e(r,N1e),p=qe(h,!1);this.props.direction==="x"&&f.type!=="number"&&Yc();var v=l.map(function(y){var b=u(y,o),x=b.x,_=b.y,E=b.value,P=b.errorVal;if(!P)return null;var A=[],j,S;if(Array.isArray(P)){var T=O1e(P,2);j=T[0],S=T[1]}else j=S=P;if(a==="vertical"){var N=f.scale,D=_+i,M=D+s,$=D-s,z=N(E-j),H=N(E+S);A.push({x1:H,y1:M,x2:H,y2:$}),A.push({x1:z,y1:D,x2:H,y2:D}),A.push({x1:z,y1:M,x2:z,y2:$})}else if(a==="horizontal"){var ee=d.scale,U=x+i,Z=U-s,q=U+s,Y=ee(E-j),le=ee(E+S);A.push({x1:Z,y1:le,x2:q,y2:le}),A.push({x1:U,y1:Y,x2:U,y2:le}),A.push({x1:Z,y1:Y,x2:q,y2:Y})}return F.createElement(xt,u0({className:"recharts-errorBar",key:"bar-".concat(A.map(function(ce){return"".concat(ce.x1,"-").concat(ce.x2,"-").concat(ce.y1,"-").concat(ce.y2)}))},p),A.map(function(ce){return F.createElement("line",u0({},ce,{key:"line-".concat(ce.x1,"-").concat(ce.x2,"-").concat(ce.y1,"-").concat(ce.y2)}))}))});return F.createElement(xt,{className:"recharts-errorBars"},v)}}])}(F.Component);_F(cg,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});_F(cg,"displayName","ErrorBar");function om(t){"@babel/helpers - typeof";return om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},om(t)}function aD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aD(Object(n),!0).forEach(function(r){H1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function H1e(t,e,n){return e=G1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G1e(t){var e=Y1e(t,"string");return om(e)=="symbol"?e:e+""}function Y1e(t,e){if(om(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(om(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var EF=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,s=Ri(n,no);if(!s)return null;var o=no.defaultProps,l=o!==void 0?nc(nc({},o),s.props):{},u;return s.props&&s.props.payload?u=s.props&&s.props.payload:a==="children"?u=(r||[]).reduce(function(f,d){var h=d.item,p=d.props,v=p.sectors||p.data||[];return f.concat(v.map(function(y){return{type:s.props.iconType||h.props.legendType,value:y.name,color:y.fill,payload:y}}))},[]):u=(r||[]).map(function(f){var d=f.item,h=d.type.defaultProps,p=h!==void 0?nc(nc({},h),d.props):{},v=p.dataKey,y=p.name,b=p.legendType,x=p.hide;return{inactive:x,dataKey:v,type:l.iconType||b||"square",color:lT(d),value:y||v,payload:p}}),nc(nc(nc({},l),no.getWithHeight(s,i)),{},{payload:u,item:s})};function lm(t){"@babel/helpers - typeof";return lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lm(t)}function sD(t){return J1e(t)||Z1e(t)||Q1e(t)||X1e()}function X1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q1e(t,e){if(t){if(typeof t=="string")return FS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FS(t,e)}}function Z1e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function J1e(t){if(Array.isArray(t))return FS(t)}function FS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function oD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oD(Object(n),!0).forEach(function(r){_d(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _d(t,e,n){return e=e_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e_e(t){var e=t_e(t,"string");return lm(e)=="symbol"?e:e+""}function t_e(t,e){if(lm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(lm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zn(t,e,n){return st(t)||st(e)?n:ir(e)?Bi(t,e,n):nt(e)?e(t):n}function lp(t,e,n,r){var i=Zwe(t,function(o){return zn(o,e)});if(n==="number"){var a=i.filter(function(o){return je(o)||parseFloat(o)});return a.length?[cb(a),Zo(a)]:[1/0,-1/0]}var s=r?i.filter(function(o){return!st(o)}):i;return s.map(function(o){return ir(o)||o instanceof Date?o:""})}var n_e=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,o=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(o<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var l=a.range,u=0;u<o;u++){var f=u>0?i[u-1].coordinate:i[o-1].coordinate,d=i[u].coordinate,h=u>=o-1?i[0].coordinate:i[u+1].coordinate,p=void 0;if(Yr(d-f)!==Yr(h-d)){var v=[];if(Yr(h-d)===Yr(l[1]-l[0])){p=h;var y=d+l[1]-l[0];v[0]=Math.min(y,(y+f)/2),v[1]=Math.max(y,(y+f)/2)}else{p=f;var b=h+l[1]-l[0];v[0]=Math.min(d,(b+d)/2),v[1]=Math.max(d,(b+d)/2)}var x=[Math.min(d,(p+d)/2),Math.max(d,(p+d)/2)];if(e>x[0]&&e<=x[1]||e>=v[0]&&e<=v[1]){s=i[u].index;break}}else{var _=Math.min(f,h),E=Math.max(f,h);if(e>(_+d)/2&&e<=(E+d)/2){s=i[u].index;break}}}else for(var P=0;P<o;P++)if(P===0&&e<=(r[P].coordinate+r[P+1].coordinate)/2||P>0&&P<o-1&&e>(r[P].coordinate+r[P-1].coordinate)/2&&e<=(r[P].coordinate+r[P+1].coordinate)/2||P===o-1&&e>(r[P].coordinate+r[P-1].coordinate)/2){s=r[P].index;break}return s},lT=function(e){var n,r=e,i=r.type.displayName,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Cn(Cn({},e.type.defaultProps),e.props):e.props,s=a.stroke,o=a.fill,l;switch(i){case"Line":l=s;break;case"Area":case"Radar":l=s&&s!=="none"?s:o;break;default:l=o;break}return l},r_e=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var s={},o=Object.keys(a),l=0,u=o.length;l<u;l++)for(var f=a[o[l]].stackGroups,d=Object.keys(f),h=0,p=d.length;h<p;h++){var v=f[d[h]],y=v.items,b=v.cateAxisId,x=y.filter(function(S){return to(S.type).indexOf("Bar")>=0});if(x&&x.length){var _=x[0].type.defaultProps,E=_!==void 0?Cn(Cn({},_),x[0].props):x[0].props,P=E.barSize,A=E[b];s[A]||(s[A]=[]);var j=st(P)?n:P;s[A].push({item:x[0],stackList:x.slice(1),barSize:st(j)?void 0:Xr(j,r,0)})}}return s},i_e=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,a=e.sizeList,s=a===void 0?[]:a,o=e.maxBarSize,l=s.length;if(l<1)return null;var u=Xr(n,i,0,!0),f,d=[];if(s[0].barSize===+s[0].barSize){var h=!1,p=i/l,v=s.reduce(function(P,A){return P+A.barSize||0},0);v+=(l-1)*u,v>=i&&(v-=(l-1)*u,u=0),v>=i&&p>0&&(h=!0,p*=.9,v=l*p);var y=(i-v)/2>>0,b={offset:y-u,size:0};f=s.reduce(function(P,A){var j={item:A.item,position:{offset:b.offset+b.size+u,size:h?p:A.barSize}},S=[].concat(sD(P),[j]);return b=S[S.length-1].position,A.stackList&&A.stackList.length&&A.stackList.forEach(function(T){S.push({item:T,position:b})}),S},d)}else{var x=Xr(r,i,0,!0);i-2*x-(l-1)*u<=0&&(u=0);var _=(i-2*x-(l-1)*u)/l;_>1&&(_>>=0);var E=o===+o?Math.min(_,o):_;f=s.reduce(function(P,A,j){var S=[].concat(sD(P),[{item:A.item,position:{offset:x+(_+u)*j+(_-E)/2,size:E}}]);return A.stackList&&A.stackList.length&&A.stackList.forEach(function(T){S.push({item:T,position:S[S.length-1].position})}),S},d)}return f},a_e=function(e,n,r,i){var a=r.children,s=r.width,o=r.margin,l=s-(o.left||0)-(o.right||0),u=EF({children:a,legendWidth:l});if(u){var f=i||{},d=f.width,h=f.height,p=u.align,v=u.verticalAlign,y=u.layout;if((y==="vertical"||y==="horizontal"&&v==="middle")&&p!=="center"&&je(e[p]))return Cn(Cn({},e),{},_d({},p,e[p]+(d||0)));if((y==="horizontal"||y==="vertical"&&p==="center")&&v!=="middle"&&je(e[v]))return Cn(Cn({},e),{},_d({},v,e[v]+(h||0)))}return e},s_e=function(e,n,r){return st(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},AF=function(e,n,r,i,a){var s=n.props.children,o=Ui(s,cg).filter(function(u){return s_e(i,a,u.props.direction)});if(o&&o.length){var l=o.map(function(u){return u.props.dataKey});return e.reduce(function(u,f){var d=zn(f,r);if(st(d))return u;var h=Array.isArray(d)?[cb(d),Zo(d)]:[d,d],p=l.reduce(function(v,y){var b=zn(f,y,0),x=h[0]-Math.abs(Array.isArray(b)?b[0]:b),_=h[1]+Math.abs(Array.isArray(b)?b[1]:b);return[Math.min(x,v[0]),Math.max(_,v[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},o_e=function(e,n,r,i,a){var s=n.map(function(o){return AF(e,o,r,a,i)}).filter(function(o){return!st(o)});return s&&s.length?s.reduce(function(o,l){return[Math.min(o[0],l[0]),Math.max(o[1],l[1])]},[1/0,-1/0]):null},jF=function(e,n,r,i,a){var s=n.map(function(l){var u=l.props.dataKey;return r==="number"&&u&&AF(e,l,u,i)||lp(e,u,r,a)});if(r==="number")return s.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var o={};return s.reduce(function(l,u){for(var f=0,d=u.length;f<d;f++)o[u[f]]||(o[u[f]]=!0,l.push(u[f]));return l},[])},TF=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},PF=function(e,n,r,i){if(i)return e.map(function(l){return l.coordinate});var a,s,o=e.map(function(l){return l.coordinate===n&&(a=!0),l.coordinate===r&&(s=!0),l.coordinate});return a||o.push(n),s||o.push(r),o},Xs=function(e,n,r){if(!e)return null;var i=e.scale,a=e.duplicateDomain,s=e.type,o=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||r)&&s==="category"&&i.bandwidth?i.bandwidth()/l:0;if(u=e.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?Yr(o[0]-o[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var f=(e.ticks||e.niceTicks).map(function(d){var h=a?a.indexOf(d):d;return{coordinate:i(h)+u,value:d,offset:u}});return f.filter(function(d){return!Vf(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,h){return{coordinate:i(d)+u,value:d,index:h,offset:u}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(d){return{coordinate:i(d)+u,value:d,offset:u}}):i.domain().map(function(d,h){return{coordinate:i(d)+u,value:a?a[d]:d,index:h,offset:u}})},r1=new WeakMap,ly=function(e,n){if(typeof n!="function")return e;r1.has(e)||r1.set(e,new WeakMap);var r=r1.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},CF=function(e,n,r){var i=e.scale,a=e.type,s=e.layout,o=e.axisType;if(i==="auto")return s==="radial"&&o==="radiusAxis"?{scale:em(),realScaleType:"band"}:s==="radial"&&o==="angleAxis"?{scale:a0(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:op(),realScaleType:"point"}:a==="category"?{scale:em(),realScaleType:"band"}:{scale:a0(),realScaleType:"linear"};if(Wc(i)){var l="scale".concat(Yx(i));return{scale:(eD[l]||op)(),realScaleType:eD[l]?l:"point"}}return nt(i)?{scale:i}:{scale:op(),realScaleType:"point"}},lD=1e-4,kF=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),a=Math.min(i[0],i[1])-lD,s=Math.max(i[0],i[1])+lD,o=e(n[0]),l=e(n[r-1]);(o<a||o>s||l<a||l>s)&&e.domain([n[0],n[r-1]])}},l_e=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},c_e=function(e,n){if(!n||n.length!==2||!je(n[0])||!je(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a=[e[0],e[1]];return(!je(e[0])||e[0]<r)&&(a[0]=r),(!je(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<r&&(a[1]=r),a},u_e=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0,o=0;o<n;++o){var l=Vf(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=a,e[o][r][1]=a+l,a=e[o][r][1]):(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1])}},d_e=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0;s<n;++s){var o=Vf(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},f_e={sign:u_e,expand:Nue,none:Kd,silhouette:Oue,wiggle:Iue,positive:d_e},h_e=function(e,n,r){var i=n.map(function(o){return o.props.dataKey}),a=f_e[r],s=kue().keys(i).value(function(o,l){return+zn(o,l,0)}).order(fS).offset(a);return s(e)},p_e=function(e,n,r,i,a,s){if(!e)return null;var o=s?n.reverse():n,l={},u=o.reduce(function(d,h){var p,v=(p=h.type)!==null&&p!==void 0&&p.defaultProps?Cn(Cn({},h.type.defaultProps),h.props):h.props,y=v.stackId,b=v.hide;if(b)return d;var x=v[r],_=d[x]||{hasStack:!1,stackGroups:{}};if(ir(y)){var E=_.stackGroups[y]||{numericAxisId:r,cateAxisId:i,items:[]};E.items.push(h),_.hasStack=!0,_.stackGroups[y]=E}else _.stackGroups[lu("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[h]};return Cn(Cn({},d),{},_d({},x,_))},l),f={};return Object.keys(u).reduce(function(d,h){var p=u[h];if(p.hasStack){var v={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(y,b){var x=p.stackGroups[b];return Cn(Cn({},y),{},_d({},b,{numericAxisId:r,cateAxisId:i,items:x.items,stackedData:h_e(e,x.items,a)}))},v)}return Cn(Cn({},d),{},_d({},h,p))},f)},NF=function(e,n){var r=n.realScaleType,i=n.type,a=n.tickCount,s=n.originalDomain,o=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(a&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var u=e.domain();if(!u.length)return null;var f=P1e(u,a,o);return e.domain([cb(f),Zo(f)]),{niceTicks:f}}if(a&&i==="number"){var d=e.domain(),h=C1e(d,a,o);return{niceTicks:h}}return null};function f0(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,a=t.index,s=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!st(i[e.dataKey])){var o=Lv(n,"value",i[e.dataKey]);if(o)return o.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var l=zn(i,st(s)?e.dataKey:s);return st(l)?null:e.scale(l)}var cD=function(e){var n=e.axis,r=e.ticks,i=e.offset,a=e.bandSize,s=e.entry,o=e.index;if(n.type==="category")return r[o]?r[o].coordinate+i:null;var l=zn(s,n.dataKey,n.domain[o]);return st(l)?null:n.scale(l)-a/2+i},m_e=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return i<=0&&a>=0?0:a<0?a:i}return r[0]},g_e=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Cn(Cn({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(ir(a)){var s=n[a];if(s){var o=s.items.indexOf(e);return o>=0?s.stackedData[o]:null}}return null},y_e=function(e){return e.reduce(function(n,r){return[cb(r.concat([n[0]]).filter(je)),Zo(r.concat([n[1]]).filter(je))]},[1/0,-1/0])},OF=function(e,n,r){return Object.keys(e).reduce(function(i,a){var s=e[a],o=s.stackedData,l=o.reduce(function(u,f){var d=y_e(f.slice(n,r+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},uD=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,dD=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,BS=function(e,n,r){if(nt(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(je(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(uD.test(e[0])){var a=+uD.exec(e[0])[1];i[0]=n[0]-a}else nt(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(je(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(dD.test(e[1])){var s=+dD.exec(e[1])[1];i[1]=n[1]+s}else nt(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},h0=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var a=Rj(n,function(d){return d.coordinate}),s=1/0,o=1,l=a.length;o<l;o++){var u=a[o],f=a[o-1];s=Math.min((u.coordinate||0)-(f.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},fD=function(e,n,r){return!e||!e.length||Hc(e,Bi(r,"type.defaultProps.domain"))?n:e},IF=function(e,n){var r=e.type.defaultProps?Cn(Cn({},e.type.defaultProps),e.props):e.props,i=r.dataKey,a=r.name,s=r.unit,o=r.formatter,l=r.tooltipType,u=r.chartType,f=r.hide;return Cn(Cn({},qe(e,!1)),{},{dataKey:i,unit:s,formatter:o,name:a||i,color:lT(e),value:zn(n,i),type:l,payload:n,chartType:u,hide:f})};function cm(t){"@babel/helpers - typeof";return cm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cm(t)}function hD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hD(Object(n),!0).forEach(function(r){DF(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DF(t,e,n){return e=v_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v_e(t){var e=x_e(t,"string");return cm(e)=="symbol"?e:e+""}function x_e(t,e){if(cm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(cm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function b_e(t,e){return E_e(t)||S_e(t,e)||__e(t,e)||w_e()}function w_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function __e(t,e){if(t){if(typeof t=="string")return pD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pD(t,e)}}function pD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function S_e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function E_e(t){if(Array.isArray(t))return t}var p0=Math.PI/180,A_e=function(e){return e*180/Math.PI},an=function(e,n,r,i){return{x:e+Math.cos(-p0*i)*r,y:n+Math.sin(-p0*i)*r}},MF=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},j_e=function(e,n,r,i,a){var s=e.width,o=e.height,l=e.startAngle,u=e.endAngle,f=Xr(e.cx,s,s/2),d=Xr(e.cy,o,o/2),h=MF(s,o,r),p=Xr(e.innerRadius,h,0),v=Xr(e.outerRadius,h,h*.8),y=Object.keys(n);return y.reduce(function(b,x){var _=n[x],E=_.domain,P=_.reversed,A;if(st(_.range))i==="angleAxis"?A=[l,u]:i==="radiusAxis"&&(A=[p,v]),P&&(A=[A[1],A[0]]);else{A=_.range;var j=A,S=b_e(j,2);l=S[0],u=S[1]}var T=CF(_,a),N=T.realScaleType,D=T.scale;D.domain(E).range(A),kF(D);var M=NF(D,Fs(Fs({},_),{},{realScaleType:N})),$=Fs(Fs(Fs({},_),M),{},{range:A,radius:v,realScaleType:N,scale:D,cx:f,cy:d,innerRadius:p,outerRadius:v,startAngle:l,endAngle:u});return Fs(Fs({},b),{},DF({},x,$))},{})},T_e=function(e,n){var r=e.x,i=e.y,a=n.x,s=n.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-s,2))},P_e=function(e,n){var r=e.x,i=e.y,a=n.cx,s=n.cy,o=T_e({x:r,y:i},{x:a,y:s});if(o<=0)return{radius:o};var l=(r-a)/o,u=Math.acos(l);return i>s&&(u=2*Math.PI-u),{radius:o,angle:A_e(u),angleInRadian:u}},C_e=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),a=Math.floor(r/360),s=Math.min(i,a);return{startAngle:n-s*360,endAngle:r-s*360}},k_e=function(e,n){var r=n.startAngle,i=n.endAngle,a=Math.floor(r/360),s=Math.floor(i/360),o=Math.min(a,s);return e+o*360},mD=function(e,n){var r=e.x,i=e.y,a=P_e({x:r,y:i},n),s=a.radius,o=a.angle,l=n.innerRadius,u=n.outerRadius;if(s<l||s>u)return!1;if(s===0)return!0;var f=C_e(n),d=f.startAngle,h=f.endAngle,p=o,v;if(d<=h){for(;p>h;)p-=360;for(;p<d;)p+=360;v=p>=d&&p<=h}else{for(;p>d;)p-=360;for(;p<h;)p+=360;v=p>=h&&p<=d}return v?Fs(Fs({},n),{},{radius:s,angle:k_e(p,n)}):null},RF=function(e){return!O.isValidElement(e)&&!nt(e)&&typeof e!="boolean"?e.className:""};function um(t){"@babel/helpers - typeof";return um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},um(t)}var N_e=["offset"];function O_e(t){return R_e(t)||M_e(t)||D_e(t)||I_e()}function I_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D_e(t,e){if(t){if(typeof t=="string")return US(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return US(t,e)}}function M_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function R_e(t){if(Array.isArray(t))return US(t)}function US(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $_e(t,e){if(t==null)return{};var n=L_e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function L_e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function gD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gD(Object(n),!0).forEach(function(r){z_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function z_e(t,e,n){return e=V_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function V_e(t){var e=F_e(t,"string");return um(e)=="symbol"?e:e+""}function F_e(t,e){if(um(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(um(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dm(){return dm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dm.apply(this,arguments)}var B_e=function(e){var n=e.value,r=e.formatter,i=st(e.children)?n:e.children;return nt(r)?r(i):i},U_e=function(e,n){var r=Yr(n-e),i=Math.min(Math.abs(n-e),360);return r*i},W_e=function(e,n,r){var i=e.position,a=e.viewBox,s=e.offset,o=e.className,l=a,u=l.cx,f=l.cy,d=l.innerRadius,h=l.outerRadius,p=l.startAngle,v=l.endAngle,y=l.clockWise,b=(d+h)/2,x=U_e(p,v),_=x>=0?1:-1,E,P;i==="insideStart"?(E=p+_*s,P=y):i==="insideEnd"?(E=v-_*s,P=!y):i==="end"&&(E=v+_*s,P=y),P=x<=0?P:!P;var A=an(u,f,b,E),j=an(u,f,b,E+(P?1:-1)*359),S="M".concat(A.x,",").concat(A.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(P?0:1,`,
    `).concat(j.x,",").concat(j.y),T=st(e.id)?lu("recharts-radial-line-"):e.id;return F.createElement("text",dm({},r,{dominantBaseline:"central",className:ht("recharts-radial-bar-label",o)}),F.createElement("defs",null,F.createElement("path",{id:T,d:S})),F.createElement("textPath",{xlinkHref:"#".concat(T)},n))},K_e=function(e){var n=e.viewBox,r=e.offset,i=e.position,a=n,s=a.cx,o=a.cy,l=a.innerRadius,u=a.outerRadius,f=a.startAngle,d=a.endAngle,h=(f+d)/2;if(i==="outside"){var p=an(s,o,u+r,h),v=p.x,y=p.y;return{x:v,y,textAnchor:v>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"end"};var b=(l+u)/2,x=an(s,o,b,h),_=x.x,E=x.y;return{x:_,y:E,textAnchor:"middle",verticalAnchor:"middle"}},q_e=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,a=e.position,s=n,o=s.x,l=s.y,u=s.width,f=s.height,d=f>=0?1:-1,h=d*i,p=d>0?"end":"start",v=d>0?"start":"end",y=u>=0?1:-1,b=y*i,x=y>0?"end":"start",_=y>0?"start":"end";if(a==="top"){var E={x:o+u/2,y:l-d*i,textAnchor:"middle",verticalAnchor:p};return Jn(Jn({},E),r?{height:Math.max(l-r.y,0),width:u}:{})}if(a==="bottom"){var P={x:o+u/2,y:l+f+h,textAnchor:"middle",verticalAnchor:v};return Jn(Jn({},P),r?{height:Math.max(r.y+r.height-(l+f),0),width:u}:{})}if(a==="left"){var A={x:o-b,y:l+f/2,textAnchor:x,verticalAnchor:"middle"};return Jn(Jn({},A),r?{width:Math.max(A.x-r.x,0),height:f}:{})}if(a==="right"){var j={x:o+u+b,y:l+f/2,textAnchor:_,verticalAnchor:"middle"};return Jn(Jn({},j),r?{width:Math.max(r.x+r.width-j.x,0),height:f}:{})}var S=r?{width:u,height:f}:{};return a==="insideLeft"?Jn({x:o+b,y:l+f/2,textAnchor:_,verticalAnchor:"middle"},S):a==="insideRight"?Jn({x:o+u-b,y:l+f/2,textAnchor:x,verticalAnchor:"middle"},S):a==="insideTop"?Jn({x:o+u/2,y:l+h,textAnchor:"middle",verticalAnchor:v},S):a==="insideBottom"?Jn({x:o+u/2,y:l+f-h,textAnchor:"middle",verticalAnchor:p},S):a==="insideTopLeft"?Jn({x:o+b,y:l+h,textAnchor:_,verticalAnchor:v},S):a==="insideTopRight"?Jn({x:o+u-b,y:l+h,textAnchor:x,verticalAnchor:v},S):a==="insideBottomLeft"?Jn({x:o+b,y:l+f-h,textAnchor:_,verticalAnchor:p},S):a==="insideBottomRight"?Jn({x:o+u-b,y:l+f-h,textAnchor:x,verticalAnchor:p},S):Rf(a)&&(je(a.x)||_c(a.x))&&(je(a.y)||_c(a.y))?Jn({x:o+Xr(a.x,u),y:l+Xr(a.y,f),textAnchor:"end",verticalAnchor:"end"},S):Jn({x:o+u/2,y:l+f/2,textAnchor:"middle",verticalAnchor:"middle"},S)},H_e=function(e){return"cx"in e&&je(e.cx)};function pr(t){var e=t.offset,n=e===void 0?5:e,r=$_e(t,N_e),i=Jn({offset:n},r),a=i.viewBox,s=i.position,o=i.value,l=i.children,u=i.content,f=i.className,d=f===void 0?"":f,h=i.textBreakAll;if(!a||st(o)&&st(l)&&!O.isValidElement(u)&&!nt(u))return null;if(O.isValidElement(u))return O.cloneElement(u,i);var p;if(nt(u)){if(p=O.createElement(u,i),O.isValidElement(p))return p}else p=B_e(i);var v=H_e(a),y=qe(i,!0);if(v&&(s==="insideStart"||s==="insideEnd"||s==="end"))return W_e(i,p,y);var b=v?K_e(i):q_e(i);return F.createElement(qc,dm({className:ht("recharts-label",d)},y,b,{breakAll:h}),p)}pr.displayName="Label";var $F=function(e){var n=e.cx,r=e.cy,i=e.angle,a=e.startAngle,s=e.endAngle,o=e.r,l=e.radius,u=e.innerRadius,f=e.outerRadius,d=e.x,h=e.y,p=e.top,v=e.left,y=e.width,b=e.height,x=e.clockWise,_=e.labelViewBox;if(_)return _;if(je(y)&&je(b)){if(je(d)&&je(h))return{x:d,y:h,width:y,height:b};if(je(p)&&je(v))return{x:p,y:v,width:y,height:b}}return je(d)&&je(h)?{x:d,y:h,width:0,height:0}:je(n)&&je(r)?{cx:n,cy:r,startAngle:a||i||0,endAngle:s||i||0,innerRadius:u||0,outerRadius:f||l||o||0,clockWise:x}:e.viewBox?e.viewBox:{}},G_e=function(e,n){return e?e===!0?F.createElement(pr,{key:"label-implicit",viewBox:n}):ir(e)?F.createElement(pr,{key:"label-implicit",viewBox:n,value:e}):O.isValidElement(e)?e.type===pr?O.cloneElement(e,{key:"label-implicit",viewBox:n}):F.createElement(pr,{key:"label-implicit",content:e,viewBox:n}):nt(e)?F.createElement(pr,{key:"label-implicit",content:e,viewBox:n}):Rf(e)?F.createElement(pr,dm({viewBox:n},e,{key:"label-implicit"})):null:null},Y_e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,a=$F(e),s=Ui(i,pr).map(function(l,u){return O.cloneElement(l,{viewBox:n||a,key:"label-".concat(u)})});if(!r)return s;var o=G_e(e.label,n||a);return[o].concat(O_e(s))};pr.parseViewBox=$F;pr.renderCallByParent=Y_e;function X_e(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Q_e=X_e;const Z_e=Vt(Q_e);function fm(t){"@babel/helpers - typeof";return fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fm(t)}var J_e=["valueAccessor"],eSe=["data","dataKey","clockWise","id","textBreakAll"];function tSe(t){return aSe(t)||iSe(t)||rSe(t)||nSe()}function nSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rSe(t,e){if(t){if(typeof t=="string")return WS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WS(t,e)}}function iSe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function aSe(t){if(Array.isArray(t))return WS(t)}function WS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function m0(){return m0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m0.apply(this,arguments)}function yD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yD(Object(n),!0).forEach(function(r){sSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sSe(t,e,n){return e=oSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oSe(t){var e=lSe(t,"string");return fm(e)=="symbol"?e:e+""}function lSe(t,e){if(fm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(fm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xD(t,e){if(t==null)return{};var n=cSe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function cSe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var uSe=function(e){return Array.isArray(e.value)?Z_e(e.value):e.value};function Si(t){var e=t.valueAccessor,n=e===void 0?uSe:e,r=xD(t,J_e),i=r.data,a=r.dataKey,s=r.clockWise,o=r.id,l=r.textBreakAll,u=xD(r,eSe);return!i||!i.length?null:F.createElement(xt,{className:"recharts-label-list"},i.map(function(f,d){var h=st(a)?n(f,d):zn(f&&f.payload,a),p=st(o)?{}:{id:"".concat(o,"-").concat(d)};return F.createElement(pr,m0({},qe(f,!0),u,p,{parentViewBox:f.parentViewBox,value:h,textBreakAll:l,viewBox:pr.parseViewBox(st(s)?f:vD(vD({},f),{},{clockWise:s})),key:"label-".concat(d),index:d}))}))}Si.displayName="LabelList";function dSe(t,e){return t?t===!0?F.createElement(Si,{key:"labelList-implicit",data:e}):F.isValidElement(t)||nt(t)?F.createElement(Si,{key:"labelList-implicit",data:e,content:t}):Rf(t)?F.createElement(Si,m0({data:e},t,{key:"labelList-implicit"})):null:null}function fSe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=Ui(r,Si).map(function(s,o){return O.cloneElement(s,{data:e,key:"labelList-".concat(o)})});if(!n)return i;var a=dSe(t.label,e);return[a].concat(tSe(i))}Si.renderCallByParent=fSe;function hm(t){"@babel/helpers - typeof";return hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hm(t)}function KS(){return KS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},KS.apply(this,arguments)}function bD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bD(Object(n),!0).forEach(function(r){hSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hSe(t,e,n){return e=pSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pSe(t){var e=mSe(t,"string");return hm(e)=="symbol"?e:e+""}function mSe(t,e){if(hm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gSe=function(e,n){var r=Yr(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},cy=function(e){var n=e.cx,r=e.cy,i=e.radius,a=e.angle,s=e.sign,o=e.isExternal,l=e.cornerRadius,u=e.cornerIsExternal,f=l*(o?1:-1)+i,d=Math.asin(l/f)/p0,h=u?a:a+s*d,p=an(n,r,f,h),v=an(n,r,i,h),y=u?a-s*d:a,b=an(n,r,f*Math.cos(d*p0),y);return{center:p,circleTangency:v,lineTangency:b,theta:d}},LF=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.startAngle,o=e.endAngle,l=gSe(s,o),u=s+l,f=an(n,r,a,s),d=an(n,r,a,u),h="M ".concat(f.x,",").concat(f.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(s>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(i>0){var p=an(n,r,i,s),v=an(n,r,i,u);h+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(s<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(n,",").concat(r," Z");return h},ySe=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.cornerRadius,o=e.forceCornerRadius,l=e.cornerIsExternal,u=e.startAngle,f=e.endAngle,d=Yr(f-u),h=cy({cx:n,cy:r,radius:a,angle:u,sign:d,cornerRadius:s,cornerIsExternal:l}),p=h.circleTangency,v=h.lineTangency,y=h.theta,b=cy({cx:n,cy:r,radius:a,angle:f,sign:-d,cornerRadius:s,cornerIsExternal:l}),x=b.circleTangency,_=b.lineTangency,E=b.theta,P=l?Math.abs(u-f):Math.abs(u-f)-y-E;if(P<0)return o?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):LF({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:u,endAngle:f});var A="M ".concat(v.x,",").concat(v.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(P>180),",").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(_.x,",").concat(_.y,`
  `);if(i>0){var j=cy({cx:n,cy:r,radius:i,angle:u,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),S=j.circleTangency,T=j.lineTangency,N=j.theta,D=cy({cx:n,cy:r,radius:i,angle:f,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),M=D.circleTangency,$=D.lineTangency,z=D.theta,H=l?Math.abs(u-f):Math.abs(u-f)-N-z;if(H<0&&s===0)return"".concat(A,"L").concat(n,",").concat(r,"Z");A+="L".concat($.x,",").concat($.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(M.x,",").concat(M.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(H>180),",").concat(+(d>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(T.x,",").concat(T.y,"Z")}else A+="L".concat(n,",").concat(r,"Z");return A},vSe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},zF=function(e){var n=wD(wD({},vSe),e),r=n.cx,i=n.cy,a=n.innerRadius,s=n.outerRadius,o=n.cornerRadius,l=n.forceCornerRadius,u=n.cornerIsExternal,f=n.startAngle,d=n.endAngle,h=n.className;if(s<a||f===d)return null;var p=ht("recharts-sector",h),v=s-a,y=Xr(o,v,0,!0),b;return y>0&&Math.abs(f-d)<360?b=ySe({cx:r,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(y,v/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:f,endAngle:d}):b=LF({cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:f,endAngle:d}),F.createElement("path",KS({},qe(n,!0),{className:p,d:b,role:"img"}))};function pm(t){"@babel/helpers - typeof";return pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pm(t)}function qS(){return qS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qS.apply(this,arguments)}function _D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_D(Object(n),!0).forEach(function(r){xSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_D(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xSe(t,e,n){return e=bSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bSe(t){var e=wSe(t,"string");return pm(e)=="symbol"?e:e+""}function wSe(t,e){if(pm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(pm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ED={curveBasisClosed:xue,curveBasisOpen:bue,curveBasis:vue,curveBumpX:iue,curveBumpY:aue,curveLinearClosed:wue,curveLinear:Qx,curveMonotoneX:_ue,curveMonotoneY:Sue,curveNatural:Eue,curveStep:Aue,curveStepAfter:Tue,curveStepBefore:jue},uy=function(e){return e.x===+e.x&&e.y===+e.y},wh=function(e){return e.x},_h=function(e){return e.y},_Se=function(e,n){if(nt(e))return e;var r="curve".concat(Yx(e));return(r==="curveMonotone"||r==="curveBump")&&n?ED["".concat(r).concat(n==="vertical"?"Y":"X")]:ED[r]||Qx},SSe=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,a=i===void 0?[]:i,s=e.baseLine,o=e.layout,l=e.connectNulls,u=l===void 0?!1:l,f=_Se(r,o),d=u?a.filter(function(y){return uy(y)}):a,h;if(Array.isArray(s)){var p=u?s.filter(function(y){return uy(y)}):s,v=d.map(function(y,b){return SD(SD({},y),{},{base:p[b]})});return o==="vertical"?h=ey().y(_h).x1(wh).x0(function(y){return y.base.x}):h=ey().x(wh).y1(_h).y0(function(y){return y.base.y}),h.defined(uy).curve(f),h(v)}return o==="vertical"&&je(s)?h=ey().y(_h).x1(wh).x0(s):je(s)?h=ey().x(wh).y1(_h).y0(s):h=I6().x(wh).y(_h),h.defined(uy).curve(f),h(d)},Mc=function(e){var n=e.className,r=e.points,i=e.path,a=e.pathRef;if((!r||!r.length)&&!i)return null;var s=r&&r.length?SSe(e):i;return O.createElement("path",qS({},qe(e,!1),zv(e),{className:ht("recharts-curve",n),d:s,ref:a}))},VF={exports:{}},ESe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ASe=ESe,jSe=ASe;function FF(){}function BF(){}BF.resetWarningCache=FF;var TSe=function(){function t(r,i,a,s,o,l){if(l!==jSe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:BF,resetWarningCache:FF};return n.PropTypes=n,n};VF.exports=TSe();var PSe=VF.exports;const Lt=Vt(PSe);var CSe=Object.getOwnPropertyNames,kSe=Object.getOwnPropertySymbols,NSe=Object.prototype.hasOwnProperty;function AD(t,e){return function(r,i,a){return t(r,i,a)&&e(r,i,a)}}function dy(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var a=i.cache,s=a.get(n),o=a.get(r);if(s&&o)return s===r&&o===n;a.set(n,r),a.set(r,n);var l=t(n,r,i);return a.delete(n),a.delete(r),l}}function OSe(t){return t!=null?t[Symbol.toStringTag]:void 0}function jD(t){return CSe(t).concat(kSe(t))}var ISe=Object.hasOwn||function(t,e){return NSe.call(t,e)};function du(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var DSe="__v",MSe="__o",RSe="_owner",TD=Object.getOwnPropertyDescriptor,PD=Object.keys;function $Se(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function LSe(t,e){return du(t.getTime(),e.getTime())}function zSe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function VSe(t,e){return t===e}function CD(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=t.entries(),s,o,l=0;(s=a.next())&&!s.done;){for(var u=e.entries(),f=!1,d=0;(o=u.next())&&!o.done;){if(i[d]){d++;continue}var h=s.value,p=o.value;if(n.equals(h[0],p[0],l,d,t,e,n)&&n.equals(h[1],p[1],h[0],p[0],t,e,n)){f=i[d]=!0;break}d++}if(!f)return!1;l++}return!0}var FSe=du;function BSe(t,e,n){var r=PD(t),i=r.length;if(PD(e).length!==i)return!1;for(;i-- >0;)if(!UF(t,e,n,r[i]))return!1;return!0}function Sh(t,e,n){var r=jD(t),i=r.length;if(jD(e).length!==i)return!1;for(var a,s,o;i-- >0;)if(a=r[i],!UF(t,e,n,a)||(s=TD(t,a),o=TD(e,a),(s||o)&&(!s||!o||s.configurable!==o.configurable||s.enumerable!==o.enumerable||s.writable!==o.writable)))return!1;return!0}function USe(t,e){return du(t.valueOf(),e.valueOf())}function WSe(t,e){return t.source===e.source&&t.flags===e.flags}function kD(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=t.values(),s,o;(s=a.next())&&!s.done;){for(var l=e.values(),u=!1,f=0;(o=l.next())&&!o.done;){if(!i[f]&&n.equals(s.value,o.value,s.value,o.value,t,e,n)){u=i[f]=!0;break}f++}if(!u)return!1}return!0}function KSe(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function qSe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function UF(t,e,n,r){return(r===RSe||r===MSe||r===DSe)&&(t.$$typeof||e.$$typeof)?!0:ISe(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var HSe="[object Arguments]",GSe="[object Boolean]",YSe="[object Date]",XSe="[object Error]",QSe="[object Map]",ZSe="[object Number]",JSe="[object Object]",e2e="[object RegExp]",t2e="[object Set]",n2e="[object String]",r2e="[object URL]",i2e=Array.isArray,ND=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,OD=Object.assign,a2e=Object.prototype.toString.call.bind(Object.prototype.toString);function s2e(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,a=t.areMapsEqual,s=t.areNumbersEqual,o=t.areObjectsEqual,l=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,f=t.areSetsEqual,d=t.areTypedArraysEqual,h=t.areUrlsEqual,p=t.unknownTagComparators;return function(y,b,x){if(y===b)return!0;if(y==null||b==null)return!1;var _=typeof y;if(_!==typeof b)return!1;if(_!=="object")return _==="number"?s(y,b,x):_==="function"?i(y,b,x):!1;var E=y.constructor;if(E!==b.constructor)return!1;if(E===Object)return o(y,b,x);if(i2e(y))return e(y,b,x);if(ND!=null&&ND(y))return d(y,b,x);if(E===Date)return n(y,b,x);if(E===RegExp)return u(y,b,x);if(E===Map)return a(y,b,x);if(E===Set)return f(y,b,x);var P=a2e(y);if(P===YSe)return n(y,b,x);if(P===e2e)return u(y,b,x);if(P===QSe)return a(y,b,x);if(P===t2e)return f(y,b,x);if(P===JSe)return typeof y.then!="function"&&typeof b.then!="function"&&o(y,b,x);if(P===r2e)return h(y,b,x);if(P===XSe)return r(y,b,x);if(P===HSe)return o(y,b,x);if(P===GSe||P===ZSe||P===n2e)return l(y,b,x);if(p){var A=p[P];if(!A){var j=OSe(y);j&&(A=p[j])}if(A)return A(y,b,x)}return!1}}function o2e(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?Sh:$Se,areDatesEqual:LSe,areErrorsEqual:zSe,areFunctionsEqual:VSe,areMapsEqual:r?AD(CD,Sh):CD,areNumbersEqual:FSe,areObjectsEqual:r?Sh:BSe,arePrimitiveWrappersEqual:USe,areRegExpsEqual:WSe,areSetsEqual:r?AD(kD,Sh):kD,areTypedArraysEqual:r?Sh:KSe,areUrlsEqual:qSe,unknownTagComparators:void 0};if(n&&(i=OD({},i,n(i))),e){var a=dy(i.areArraysEqual),s=dy(i.areMapsEqual),o=dy(i.areObjectsEqual),l=dy(i.areSetsEqual);i=OD({},i,{areArraysEqual:a,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:l})}return i}function l2e(t){return function(e,n,r,i,a,s,o){return t(e,n,o)}}function c2e(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,a=t.strict;if(r)return function(l,u){var f=r(),d=f.cache,h=d===void 0?e?new WeakMap:void 0:d,p=f.meta;return n(l,u,{cache:h,equals:i,meta:p,strict:a})};if(e)return function(l,u){return n(l,u,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var s={cache:void 0,equals:i,meta:void 0,strict:a};return function(l,u){return n(l,u,s)}}var u2e=zl();zl({strict:!0});zl({circular:!0});zl({circular:!0,strict:!0});zl({createInternalComparator:function(){return du}});zl({strict:!0,createInternalComparator:function(){return du}});zl({circular:!0,createInternalComparator:function(){return du}});zl({circular:!0,createInternalComparator:function(){return du},strict:!0});function zl(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,a=t.strict,s=a===void 0?!1:a,o=o2e(t),l=s2e(o),u=r?r(l):l2e(l);return c2e({circular:n,comparator:l,createState:i,equals:u,strict:s})}function d2e(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function ID(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(a){n<0&&(n=a),a-n>e?(t(a),n=-1):d2e(i)};requestAnimationFrame(r)}function HS(t){"@babel/helpers - typeof";return HS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HS(t)}function f2e(t){return g2e(t)||m2e(t)||p2e(t)||h2e()}function h2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p2e(t,e){if(t){if(typeof t=="string")return DD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DD(t,e)}}function DD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function m2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function g2e(t){if(Array.isArray(t))return t}function y2e(){var t={},e=function(){return null},n=!1,r=function i(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var s=a,o=f2e(s),l=o[0],u=o.slice(1);if(typeof l=="number"){ID(i.bind(null,u),l);return}i(l),ID(i.bind(null,u));return}HS(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,r(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function mm(t){"@babel/helpers - typeof";return mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mm(t)}function MD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function RD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MD(Object(n),!0).forEach(function(r){WF(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WF(t,e,n){return e=v2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v2e(t){var e=x2e(t,"string");return mm(e)==="symbol"?e:String(e)}function x2e(t,e){if(mm(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(mm(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var b2e=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(a){return i.includes(a)})})},w2e=function(e){return e},_2e=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},cp=function(e,n){return Object.keys(n).reduce(function(r,i){return RD(RD({},r),{},WF({},i,e(i,n[i])))},{})},$D=function(e,n,r){return e.map(function(i){return"".concat(_2e(i)," ").concat(n,"ms ").concat(r)}).join(",")};function S2e(t,e){return j2e(t)||A2e(t,e)||KF(t,e)||E2e()}function E2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A2e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function j2e(t){if(Array.isArray(t))return t}function T2e(t){return k2e(t)||C2e(t)||KF(t)||P2e()}function P2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KF(t,e){if(t){if(typeof t=="string")return GS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GS(t,e)}}function C2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function k2e(t){if(Array.isArray(t))return GS(t)}function GS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var g0=1e-4,qF=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},HF=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},LD=function(e,n){return function(r){var i=qF(e,n);return HF(i,r)}},N2e=function(e,n){return function(r){var i=qF(e,n),a=[].concat(T2e(i.map(function(s,o){return s*o}).slice(1)),[0]);return HF(a,r)}},zD=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,a=0,s=1,o=1;break;case"ease":i=.25,a=.1,s=.25,o=1;break;case"ease-in":i=.42,a=0,s=1,o=1;break;case"ease-out":i=.42,a=0,s=.58,o=1;break;case"ease-in-out":i=0,a=0,s=.58,o=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(b){return parseFloat(b)}),f=S2e(u,4);i=f[0],a=f[1],s=f[2],o=f[3]}}}var d=LD(i,s),h=LD(a,o),p=N2e(i,s),v=function(x){return x>1?1:x<0?0:x},y=function(x){for(var _=x>1?1:x,E=_,P=0;P<8;++P){var A=d(E)-_,j=p(E);if(Math.abs(A-_)<g0||j<g0)return h(E);E=v(E-A/j)}return h(E)};return y.isStepper=!1,y},O2e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,a=i===void 0?8:i,s=e.dt,o=s===void 0?17:s,l=function(f,d,h){var p=-(f-d)*r,v=h*a,y=h+(p-v)*o/1e3,b=h*o/1e3+f;return Math.abs(b-d)<g0&&Math.abs(y)<g0?[d,0]:[b,y]};return l.isStepper=!0,l.dt=o,l},I2e=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return zD(i);case"spring":return O2e();default:if(i.split("(")[0]==="cubic-bezier")return zD(i)}return typeof i=="function"?i:null};function gm(t){"@babel/helpers - typeof";return gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gm(t)}function VD(t){return R2e(t)||M2e(t)||GF(t)||D2e()}function D2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function R2e(t){if(Array.isArray(t))return XS(t)}function FD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function br(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FD(Object(n),!0).forEach(function(r){YS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YS(t,e,n){return e=$2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $2e(t){var e=L2e(t,"string");return gm(e)==="symbol"?e:String(e)}function L2e(t,e){if(gm(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gm(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function z2e(t,e){return B2e(t)||F2e(t,e)||GF(t,e)||V2e()}function V2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GF(t,e){if(t){if(typeof t=="string")return XS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XS(t,e)}}function XS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function F2e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function B2e(t){if(Array.isArray(t))return t}var y0=function(e,n,r){return e+(n-e)*r},QS=function(e){var n=e.from,r=e.to;return n!==r},U2e=function t(e,n,r){var i=cp(function(a,s){if(QS(s)){var o=e(s.from,s.to,s.velocity),l=z2e(o,2),u=l[0],f=l[1];return br(br({},s),{},{from:u,velocity:f})}return s},n);return r<1?cp(function(a,s){return QS(s)?br(br({},s),{},{velocity:y0(s.velocity,i[a].velocity,r),from:y0(s.from,i[a].from,r)}):s},n):t(e,i,r-1)};const W2e=function(t,e,n,r,i){var a=b2e(t,e),s=a.reduce(function(b,x){return br(br({},b),{},YS({},x,[t[x],e[x]]))},{}),o=a.reduce(function(b,x){return br(br({},b),{},YS({},x,{from:t[x],velocity:0,to:e[x]}))},{}),l=-1,u,f,d=function(){return null},h=function(){return cp(function(x,_){return _.from},o)},p=function(){return!Object.values(o).filter(QS).length},v=function(x){u||(u=x);var _=x-u,E=_/n.dt;o=U2e(n,o,E),i(br(br(br({},t),e),h())),u=x,p()||(l=requestAnimationFrame(d))},y=function(x){f||(f=x);var _=(x-f)/r,E=cp(function(A,j){return y0.apply(void 0,VD(j).concat([n(_)]))},s);if(i(br(br(br({},t),e),E)),_<1)l=requestAnimationFrame(d);else{var P=cp(function(A,j){return y0.apply(void 0,VD(j).concat([n(1)]))},s);i(br(br(br({},t),e),P))}};return d=n.isStepper?v:y,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function ef(t){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ef(t)}var K2e=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function q2e(t,e){if(t==null)return{};var n=H2e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function H2e(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function i1(t){return Q2e(t)||X2e(t)||Y2e(t)||G2e()}function G2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y2e(t,e){if(t){if(typeof t=="string")return ZS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZS(t,e)}}function X2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Q2e(t){if(Array.isArray(t))return ZS(t)}function ZS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function BD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Oa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BD(Object(n),!0).forEach(function(r){zh(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zh(t,e,n){return e=YF(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Z2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function J2e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,YF(r.key),r)}}function eEe(t,e,n){return e&&J2e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function YF(t){var e=tEe(t,"string");return ef(e)==="symbol"?e:String(e)}function tEe(t,e){if(ef(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ef(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nEe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JS(t,e)}function JS(t,e){return JS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},JS(t,e)}function rEe(t){var e=iEe();return function(){var r=v0(t),i;if(e){var a=v0(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return e2(this,i)}}function e2(t,e){if(e&&(ef(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return t2(t)}function t2(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iEe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function v0(t){return v0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},v0(t)}var Ga=function(t){nEe(n,t);var e=rEe(n);function n(r,i){var a;Z2e(this,n),a=e.call(this,r,i);var s=a.props,o=s.isActive,l=s.attributeName,u=s.from,f=s.to,d=s.steps,h=s.children,p=s.duration;if(a.handleStyleChange=a.handleStyleChange.bind(t2(a)),a.changeStyle=a.changeStyle.bind(t2(a)),!o||p<=0)return a.state={style:{}},typeof h=="function"&&(a.state={style:f}),e2(a);if(d&&d.length)a.state={style:d[0].style};else if(u){if(typeof h=="function")return a.state={style:u},e2(a);a.state={style:l?zh({},l,u):u}}else a.state={style:{}};return a}return eEe(n,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,s=i.canBegin;this.mounted=!0,!(!a||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isActive,o=a.canBegin,l=a.attributeName,u=a.shouldReAnimate,f=a.to,d=a.from,h=this.state.style;if(o){if(!s){var p={style:l?zh({},l,f):f};this.state&&h&&(l&&h[l]!==f||!l&&h!==f)&&this.setState(p);return}if(!(u2e(i.to,f)&&i.canBegin&&i.isActive)){var v=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var y=v||u?d:i.to;if(this.state&&h){var b={style:l?zh({},l,y):y};(l&&h[l]!==y||!l&&h!==y)&&this.setState(b)}this.runAnimation(Oa(Oa({},this.props),{},{from:y,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,s=i.from,o=i.to,l=i.duration,u=i.easing,f=i.begin,d=i.onAnimationEnd,h=i.onAnimationStart,p=W2e(s,o,I2e(u),l,this.changeStyle),v=function(){a.stopJSAnimation=p()};this.manager.start([h,f,v,l,d])}},{key:"runStepAnimation",value:function(i){var a=this,s=i.steps,o=i.begin,l=i.onAnimationStart,u=s[0],f=u.style,d=u.duration,h=d===void 0?0:d,p=function(y,b,x){if(x===0)return y;var _=b.duration,E=b.easing,P=E===void 0?"ease":E,A=b.style,j=b.properties,S=b.onAnimationEnd,T=x>0?s[x-1]:b,N=j||Object.keys(A);if(typeof P=="function"||P==="spring")return[].concat(i1(y),[a.runJSAnimation.bind(a,{from:T.style,to:A,duration:_,easing:P}),_]);var D=$D(N,_,P),M=Oa(Oa(Oa({},T.style),A),{},{transition:D});return[].concat(i1(y),[M,_,S]).filter(w2e)};return this.manager.start([l].concat(i1(s.reduce(p,[f,Math.max(h,o)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=y2e());var a=i.begin,s=i.duration,o=i.attributeName,l=i.to,u=i.easing,f=i.onAnimationStart,d=i.onAnimationEnd,h=i.steps,p=i.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var y=o?zh({},o,l):l,b=$D(Object.keys(y),s,u);v.start([f,a,Oa(Oa({},y),{},{transition:b}),s,d])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var o=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=q2e(i,K2e),u=O.Children.count(a),f=this.state.style;if(typeof a=="function")return a(f);if(!o||u===0||s<=0)return a;var d=function(p){var v=p.props,y=v.style,b=y===void 0?{}:y,x=v.className,_=O.cloneElement(p,Oa(Oa({},l),{},{style:Oa(Oa({},b),f),className:x}));return _};return u===1?d(O.Children.only(a)):F.createElement("div",null,O.Children.map(a,function(h){return d(h)}))}}]),n}(O.PureComponent);Ga.displayName="Animate";Ga.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ga.propTypes={from:Lt.oneOfType([Lt.object,Lt.string]),to:Lt.oneOfType([Lt.object,Lt.string]),attributeName:Lt.string,duration:Lt.number,begin:Lt.number,easing:Lt.oneOfType([Lt.string,Lt.func]),steps:Lt.arrayOf(Lt.shape({duration:Lt.number.isRequired,style:Lt.object.isRequired,easing:Lt.oneOfType([Lt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Lt.func]),properties:Lt.arrayOf("string"),onAnimationEnd:Lt.func})),children:Lt.oneOfType([Lt.node,Lt.func]),isActive:Lt.bool,canBegin:Lt.bool,onAnimationEnd:Lt.func,shouldReAnimate:Lt.bool,onAnimationStart:Lt.func,onAnimationReStart:Lt.func};function ym(t){"@babel/helpers - typeof";return ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ym(t)}function x0(){return x0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},x0.apply(this,arguments)}function aEe(t,e){return cEe(t)||lEe(t,e)||oEe(t,e)||sEe()}function sEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oEe(t,e){if(t){if(typeof t=="string")return UD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UD(t,e)}}function UD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lEe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function cEe(t){if(Array.isArray(t))return t}function WD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function KD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WD(Object(n),!0).forEach(function(r){uEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uEe(t,e,n){return e=dEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dEe(t){var e=fEe(t,"string");return ym(e)=="symbol"?e:e+""}function fEe(t,e){if(ym(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ym(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qD=function(e,n,r,i,a){var s=Math.min(Math.abs(r)/2,Math.abs(i)/2),o=i>=0?1:-1,l=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,f;if(s>0&&a instanceof Array){for(var d=[0,0,0,0],h=0,p=4;h<p;h++)d[h]=a[h]>s?s:a[h];f="M".concat(e,",").concat(n+o*d[0]),d[0]>0&&(f+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(e+l*d[0],",").concat(n)),f+="L ".concat(e+r-l*d[1],",").concat(n),d[1]>0&&(f+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+o*d[1])),f+="L ".concat(e+r,",").concat(n+i-o*d[2]),d[2]>0&&(f+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(e+r-l*d[2],",").concat(n+i)),f+="L ".concat(e+l*d[3],",").concat(n+i),d[3]>0&&(f+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+i-o*d[3])),f+="Z"}else if(s>0&&a===+a&&a>0){var v=Math.min(s,a);f="M ".concat(e,",").concat(n+o*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+l*v,",").concat(n,`
            L `).concat(e+r-l*v,",").concat(n,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+r,",").concat(n+o*v,`
            L `).concat(e+r,",").concat(n+i-o*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e+r-l*v,",").concat(n+i,`
            L `).concat(e+l*v,",").concat(n+i,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(e,",").concat(n+i-o*v," Z")}else f="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return f},hEe=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,a=n.x,s=n.y,o=n.width,l=n.height;if(Math.abs(o)>0&&Math.abs(l)>0){var u=Math.min(a,a+o),f=Math.max(a,a+o),d=Math.min(s,s+l),h=Math.max(s,s+l);return r>=u&&r<=f&&i>=d&&i<=h}return!1},pEe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},cT=function(e){var n=KD(KD({},pEe),e),r=O.useRef(),i=O.useState(-1),a=aEe(i,2),s=a[0],o=a[1];O.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var P=r.current.getTotalLength();P&&o(P)}catch{}},[]);var l=n.x,u=n.y,f=n.width,d=n.height,h=n.radius,p=n.className,v=n.animationEasing,y=n.animationDuration,b=n.animationBegin,x=n.isAnimationActive,_=n.isUpdateAnimationActive;if(l!==+l||u!==+u||f!==+f||d!==+d||f===0||d===0)return null;var E=ht("recharts-rectangle",p);return _?F.createElement(Ga,{canBegin:s>0,from:{width:f,height:d,x:l,y:u},to:{width:f,height:d,x:l,y:u},duration:y,animationEasing:v,isActive:_},function(P){var A=P.width,j=P.height,S=P.x,T=P.y;return F.createElement(Ga,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:y,isActive:x,easing:v},F.createElement("path",x0({},qe(n,!0),{className:E,d:qD(S,T,A,j,h),ref:r})))}):F.createElement("path",x0({},qe(n,!0),{className:E,d:qD(l,u,f,d,h)}))},mEe=["points","className","baseLinePoints","connectNulls"];function ad(){return ad=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ad.apply(this,arguments)}function gEe(t,e){if(t==null)return{};var n=yEe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yEe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function HD(t){return wEe(t)||bEe(t)||xEe(t)||vEe()}function vEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xEe(t,e){if(t){if(typeof t=="string")return n2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return n2(t,e)}}function bEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wEe(t){if(Array.isArray(t))return n2(t)}function n2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var GD=function(e){return e&&e.x===+e.x&&e.y===+e.y},_Ee=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){GD(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),GD(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},up=function(e,n){var r=_Ee(e);n&&(r=[r.reduce(function(a,s){return[].concat(HD(a),HD(s))},[])]);var i=r.map(function(a){return a.reduce(function(s,o,l){return"".concat(s).concat(l===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},SEe=function(e,n,r){var i=up(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(up(n.reverse(),r).slice(1))},EEe=function(e){var n=e.points,r=e.className,i=e.baseLinePoints,a=e.connectNulls,s=gEe(e,mEe);if(!n||!n.length)return null;var o=ht("recharts-polygon",r);if(i&&i.length){var l=s.stroke&&s.stroke!=="none",u=SEe(n,i,a);return F.createElement("g",{className:o},F.createElement("path",ad({},qe(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:u})),l?F.createElement("path",ad({},qe(s,!0),{fill:"none",d:up(n,a)})):null,l?F.createElement("path",ad({},qe(s,!0),{fill:"none",d:up(i,a)})):null)}var f=up(n,a);return F.createElement("path",ad({},qe(s,!0),{fill:f.slice(-1)==="Z"?s.fill:"none",className:o,d:f}))};function r2(){return r2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r2.apply(this,arguments)}var ug=function(e){var n=e.cx,r=e.cy,i=e.r,a=e.className,s=ht("recharts-dot",a);return n===+n&&r===+r&&i===+i?O.createElement("circle",r2({},qe(e,!1),zv(e),{className:s,cx:n,cy:r,r:i})):null};function vm(t){"@babel/helpers - typeof";return vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vm(t)}var AEe=["x","y","top","left","width","height","className"];function i2(){return i2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i2.apply(this,arguments)}function YD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jEe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YD(Object(n),!0).forEach(function(r){TEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TEe(t,e,n){return e=PEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PEe(t){var e=CEe(t,"string");return vm(e)=="symbol"?e:e+""}function CEe(t,e){if(vm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kEe(t,e){if(t==null)return{};var n=NEe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function NEe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var OEe=function(e,n,r,i,a,s){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(s,",").concat(n,"h").concat(r)},IEe=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,s=e.top,o=s===void 0?0:s,l=e.left,u=l===void 0?0:l,f=e.width,d=f===void 0?0:f,h=e.height,p=h===void 0?0:h,v=e.className,y=kEe(e,AEe),b=jEe({x:r,y:a,top:o,left:u,width:d,height:p},y);return!je(r)||!je(a)||!je(d)||!je(p)||!je(o)||!je(u)?null:F.createElement("path",i2({},qe(b,!0),{className:ht("recharts-cross",v),d:OEe(r,a,d,p,o,u)}))},DEe=lb,MEe=oF,REe=ks;function $Ee(t,e){return t&&t.length?DEe(t,REe(e),MEe):void 0}var LEe=$Ee;const zEe=Vt(LEe);var VEe=lb,FEe=ks,BEe=lF;function UEe(t,e){return t&&t.length?VEe(t,FEe(e),BEe):void 0}var WEe=UEe;const KEe=Vt(WEe);var qEe=["cx","cy","angle","ticks","axisLine"],HEe=["ticks","tick","angle","tickFormatter","stroke"];function tf(t){"@babel/helpers - typeof";return tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tf(t)}function dp(){return dp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dp.apply(this,arguments)}function XD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XD(Object(n),!0).forEach(function(r){fb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QD(t,e){if(t==null)return{};var n=GEe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function GEe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function YEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,QF(r.key),r)}}function XEe(t,e,n){return e&&ZD(t.prototype,e),n&&ZD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function QEe(t,e,n){return e=b0(e),ZEe(t,XF()?Reflect.construct(e,n||[],b0(t).constructor):e.apply(t,n))}function ZEe(t,e){if(e&&(tf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JEe(t)}function JEe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XF=function(){return!!t})()}function b0(t){return b0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},b0(t)}function eAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a2(t,e)}function a2(t,e){return a2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},a2(t,e)}function fb(t,e,n){return e=QF(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QF(t){var e=tAe(t,"string");return tf(e)=="symbol"?e:e+""}function tAe(t,e){if(tf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(tf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var hb=function(t){function e(){return YEe(this,e),QEe(this,e,arguments)}return eAe(e,t),XEe(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,a=this.props,s=a.angle,o=a.cx,l=a.cy;return an(o,l,i,s)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.angle,o=r.ticks,l=zEe(o,function(f){return f.coordinate||0}),u=KEe(o,function(f){return f.coordinate||0});return{cx:i,cy:a,startAngle:s,endAngle:s,innerRadius:u.coordinate||0,outerRadius:l.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.angle,o=r.ticks,l=r.axisLine,u=QD(r,qEe),f=o.reduce(function(v,y){return[Math.min(v[0],y.coordinate),Math.max(v[1],y.coordinate)]},[1/0,-1/0]),d=an(i,a,f[0],s),h=an(i,a,f[1],s),p=rc(rc(rc({},qe(u,!1)),{},{fill:"none"},qe(l,!1)),{},{x1:d.x,y1:d.y,x2:h.x,y2:h.y});return F.createElement("line",dp({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,s=i.tick,o=i.angle,l=i.tickFormatter,u=i.stroke,f=QD(i,HEe),d=this.getTickTextAnchor(),h=qe(f,!1),p=qe(s,!1),v=a.map(function(y,b){var x=r.getTickValueCoord(y),_=rc(rc(rc(rc({textAnchor:d,transform:"rotate(".concat(90-o,", ").concat(x.x,", ").concat(x.y,")")},h),{},{stroke:"none",fill:u},p),{},{index:b},x),{},{payload:y});return F.createElement(xt,dp({className:ht("recharts-polar-radius-axis-tick",RF(s)),key:"tick-".concat(y.coordinate)},Kc(r.props,y,b)),e.renderTickItem(s,_,l?l(y.value,b):y.value))});return F.createElement(xt,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.axisLine,s=r.tick;return!i||!i.length?null:F.createElement(xt,{className:ht("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),s&&this.renderTicks(),pr.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,a){var s;return F.isValidElement(r)?s=F.cloneElement(r,i):nt(r)?s=r(i):s=F.createElement(qc,dp({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),s}}])}(O.PureComponent);fb(hb,"displayName","PolarRadiusAxis");fb(hb,"axisType","radiusAxis");fb(hb,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function nf(t){"@babel/helpers - typeof";return nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nf(t)}function pc(){return pc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pc.apply(this,arguments)}function JD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ic(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JD(Object(n),!0).forEach(function(r){pb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,JF(r.key),r)}}function rAe(t,e,n){return e&&eM(t.prototype,e),n&&eM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function iAe(t,e,n){return e=w0(e),aAe(t,ZF()?Reflect.construct(e,n||[],w0(t).constructor):e.apply(t,n))}function aAe(t,e){if(e&&(nf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sAe(t)}function sAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZF=function(){return!!t})()}function w0(t){return w0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},w0(t)}function oAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s2(t,e)}function s2(t,e){return s2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},s2(t,e)}function pb(t,e,n){return e=JF(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JF(t){var e=lAe(t,"string");return nf(e)=="symbol"?e:e+""}function lAe(t,e){if(nf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(nf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var cAe=Math.PI/180,tM=1e-5,mb=function(t){function e(){return nAe(this,e),iAe(this,e,arguments)}return oAe(e,t),rAe(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.cx,s=i.cy,o=i.radius,l=i.orientation,u=i.tickSize,f=u||8,d=an(a,s,o,r.coordinate),h=an(a,s,o+(l==="inner"?-1:1)*f,r.coordinate);return{x1:d.x,y1:d.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,a=Math.cos(-r.coordinate*cAe),s;return a>tM?s=i==="outer"?"start":"end":a<-tM?s=i==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.radius,o=r.axisLine,l=r.axisLineType,u=ic(ic({},qe(this.props,!1)),{},{fill:"none"},qe(o,!1));if(l==="circle")return F.createElement(ug,pc({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:a,r:s}));var f=this.props.ticks,d=f.map(function(h){return an(i,a,s,h.coordinate)});return F.createElement(EEe,pc({className:"recharts-polar-angle-axis-line"},u,{points:d}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,s=i.tick,o=i.tickLine,l=i.tickFormatter,u=i.stroke,f=qe(this.props,!1),d=qe(s,!1),h=ic(ic({},f),{},{fill:"none"},qe(o,!1)),p=a.map(function(v,y){var b=r.getTickLineCoord(v),x=r.getTickTextAnchor(v),_=ic(ic(ic({textAnchor:x},f),{},{stroke:"none",fill:u},d),{},{index:y,payload:v,x:b.x2,y:b.y2});return F.createElement(xt,pc({className:ht("recharts-polar-angle-axis-tick",RF(s)),key:"tick-".concat(v.coordinate)},Kc(r.props,v,y)),o&&F.createElement("line",pc({className:"recharts-polar-angle-axis-tick-line"},h,b)),s&&e.renderTickItem(s,_,l?l(v.value,y):v.value))});return F.createElement(xt,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.radius,s=r.axisLine;return a<=0||!i||!i.length?null:F.createElement(xt,{className:ht("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,a){var s;return F.isValidElement(r)?s=F.cloneElement(r,i):nt(r)?s=r(i):s=F.createElement(qc,pc({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),s}}])}(O.PureComponent);pb(mb,"displayName","PolarAngleAxis");pb(mb,"axisType","angleAxis");pb(mb,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var uAe=rV,dAe=uAe(Object.getPrototypeOf,Object),fAe=dAe,hAe=_o,pAe=fAe,mAe=So,gAe="[object Object]",yAe=Function.prototype,vAe=Object.prototype,e8=yAe.toString,xAe=vAe.hasOwnProperty,bAe=e8.call(Object);function wAe(t){if(!mAe(t)||hAe(t)!=gAe)return!1;var e=pAe(t);if(e===null)return!0;var n=xAe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&e8.call(n)==bAe}var _Ae=wAe;const SAe=Vt(_Ae);var EAe=_o,AAe=So,jAe="[object Boolean]";function TAe(t){return t===!0||t===!1||AAe(t)&&EAe(t)==jAe}var PAe=TAe;const CAe=Vt(PAe);function xm(t){"@babel/helpers - typeof";return xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xm(t)}function _0(){return _0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_0.apply(this,arguments)}function kAe(t,e){return DAe(t)||IAe(t,e)||OAe(t,e)||NAe()}function NAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OAe(t,e){if(t){if(typeof t=="string")return nM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nM(t,e)}}function nM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function IAe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function DAe(t){if(Array.isArray(t))return t}function rM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function iM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rM(Object(n),!0).forEach(function(r){MAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MAe(t,e,n){return e=RAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RAe(t){var e=$Ae(t,"string");return xm(e)=="symbol"?e:e+""}function $Ae(t,e){if(xm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(xm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var aM=function(e,n,r,i,a){var s=r-i,o;return o="M ".concat(e,",").concat(n),o+="L ".concat(e+r,",").concat(n),o+="L ".concat(e+r-s/2,",").concat(n+a),o+="L ".concat(e+r-s/2-i,",").concat(n+a),o+="L ".concat(e,",").concat(n," Z"),o},LAe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},zAe=function(e){var n=iM(iM({},LAe),e),r=O.useRef(),i=O.useState(-1),a=kAe(i,2),s=a[0],o=a[1];O.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var E=r.current.getTotalLength();E&&o(E)}catch{}},[]);var l=n.x,u=n.y,f=n.upperWidth,d=n.lowerWidth,h=n.height,p=n.className,v=n.animationEasing,y=n.animationDuration,b=n.animationBegin,x=n.isUpdateAnimationActive;if(l!==+l||u!==+u||f!==+f||d!==+d||h!==+h||f===0&&d===0||h===0)return null;var _=ht("recharts-trapezoid",p);return x?F.createElement(Ga,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:u},to:{upperWidth:f,lowerWidth:d,height:h,x:l,y:u},duration:y,animationEasing:v,isActive:x},function(E){var P=E.upperWidth,A=E.lowerWidth,j=E.height,S=E.x,T=E.y;return F.createElement(Ga,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:y,easing:v},F.createElement("path",_0({},qe(n,!0),{className:_,d:aM(S,T,P,A,j),ref:r})))}):F.createElement("g",null,F.createElement("path",_0({},qe(n,!0),{className:_,d:aM(l,u,f,d,h)})))},VAe=["option","shapeType","propTransformer","activeClassName","isActive"];function bm(t){"@babel/helpers - typeof";return bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bm(t)}function FAe(t,e){if(t==null)return{};var n=BAe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function BAe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function sM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function S0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sM(Object(n),!0).forEach(function(r){UAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function UAe(t,e,n){return e=WAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WAe(t){var e=KAe(t,"string");return bm(e)=="symbol"?e:e+""}function KAe(t,e){if(bm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qAe(t,e){return S0(S0({},e),t)}function HAe(t,e){return t==="symbols"}function oM(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return F.createElement(cT,n);case"trapezoid":return F.createElement(zAe,n);case"sector":return F.createElement(zF,n);case"symbols":if(HAe(e))return F.createElement(Pj,n);break;default:return null}}function GAe(t){return O.isValidElement(t)?t.props:t}function t8(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?qAe:r,a=t.activeClassName,s=a===void 0?"recharts-active-shape":a,o=t.isActive,l=FAe(t,VAe),u;if(O.isValidElement(e))u=O.cloneElement(e,S0(S0({},l),GAe(e)));else if(nt(e))u=e(l);else if(SAe(e)&&!CAe(e)){var f=i(e,l);u=F.createElement(oM,{shapeType:n,elementProps:f})}else{var d=l;u=F.createElement(oM,{shapeType:n,elementProps:d})}return o?F.createElement(xt,{className:s},u):u}function gb(t,e){return e!=null&&"trapezoids"in t.props}function yb(t,e){return e!=null&&"sectors"in t.props}function wm(t,e){return e!=null&&"points"in t.props}function YAe(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,a=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&a}function XAe(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function QAe(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function ZAe(t,e){var n;return gb(t,e)?n=YAe:yb(t,e)?n=XAe:wm(t,e)&&(n=QAe),n}function JAe(t,e){var n;return gb(t,e)?n="trapezoids":yb(t,e)?n="sectors":wm(t,e)&&(n="points"),n}function eje(t,e){if(gb(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(yb(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return wm(t,e)?e.payload:{}}function tje(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=JAe(n,e),a=eje(n,e),s=r.filter(function(l,u){var f=Hc(a,l),d=n.props[i].filter(function(v){var y=ZAe(n,e);return y(v,e)}),h=n.props[i].indexOf(d[d.length-1]),p=u===h;return f&&p}),o=r.indexOf(s[s.length-1]);return o}var $y;function rf(t){"@babel/helpers - typeof";return rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rf(t)}function sd(){return sd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sd.apply(this,arguments)}function lM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function en(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lM(Object(n),!0).forEach(function(r){oa(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r8(r.key),r)}}function rje(t,e,n){return e&&cM(t.prototype,e),n&&cM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ije(t,e,n){return e=E0(e),aje(t,n8()?Reflect.construct(e,n||[],E0(t).constructor):e.apply(t,n))}function aje(t,e){if(e&&(rf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sje(t)}function sje(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function n8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(n8=function(){return!!t})()}function E0(t){return E0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},E0(t)}function oje(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o2(t,e)}function o2(t,e){return o2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},o2(t,e)}function oa(t,e,n){return e=r8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r8(t){var e=lje(t,"string");return rf(e)=="symbol"?e:e+""}function lje(t,e){if(rf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(rf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var jo=function(t){function e(n){var r;return nje(this,e),r=ije(this,e,[n]),oa(r,"pieRef",null),oa(r,"sectorRefs",[]),oa(r,"id",lu("recharts-pie-")),oa(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),nt(i)&&i()}),oa(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),nt(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return oje(e,t),rje(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.label,o=a.labelLine,l=a.dataKey,u=a.valueKey,f=qe(this.props,!1),d=qe(s,!1),h=qe(o,!1),p=s&&s.offsetRadius||20,v=r.map(function(y,b){var x=(y.startAngle+y.endAngle)/2,_=an(y.cx,y.cy,y.outerRadius+p,x),E=en(en(en(en({},f),y),{},{stroke:"none"},d),{},{index:b,textAnchor:e.getTextAnchor(_.x,y.cx)},_),P=en(en(en(en({},f),y),{},{fill:"none",stroke:y.fill},h),{},{index:b,points:[an(y.cx,y.cy,y.outerRadius,x),_]}),A=l;return st(l)&&st(u)?A="value":st(l)&&(A=u),F.createElement(xt,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(b)},o&&e.renderLabelLineItem(o,P,"line"),e.renderLabelItem(s,E,zn(y,A)))});return F.createElement(xt,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(r){var i=this,a=this.props,s=a.activeShape,o=a.blendStroke,l=a.inactiveShape;return r.map(function(u,f){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&r.length!==1)return null;var d=i.isActiveIndex(f),h=l&&i.hasActiveIndex()?l:null,p=d?s:h,v=en(en({},u),{},{stroke:o?u.fill:u.stroke,tabIndex:-1});return F.createElement(xt,sd({ref:function(b){b&&!i.sectorRefs.includes(b)&&i.sectorRefs.push(b)},tabIndex:-1,className:"recharts-pie-sector"},Kc(i.props,u,f),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(f)}),F.createElement(t8,sd({option:p,isActive:d,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,a=i.sectors,s=i.isAnimationActive,o=i.animationBegin,l=i.animationDuration,u=i.animationEasing,f=i.animationId,d=this.state,h=d.prevSectors,p=d.prevIsAnimationActive;return F.createElement(Ga,{begin:o,duration:l,isActive:s,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var y=v.t,b=[],x=a&&a[0],_=x.startAngle;return a.forEach(function(E,P){var A=h&&h[P],j=P>0?Bi(E,"paddingAngle",0):0;if(A){var S=nr(A.endAngle-A.startAngle,E.endAngle-E.startAngle),T=en(en({},E),{},{startAngle:_+j,endAngle:_+S(y)+j});b.push(T),_=T.endAngle}else{var N=E.endAngle,D=E.startAngle,M=nr(0,N-D),$=M(y),z=en(en({},E),{},{startAngle:_+j,endAngle:_+$+j});b.push(z),_=z.endAngle}}),F.createElement(xt,null,r.renderSectorsStatically(b))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var s=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"ArrowRight":{var o=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,a=r.isAnimationActive,s=this.state.prevSectors;return a&&i&&i.length&&(!s||!Hc(s,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,a=i.hide,s=i.sectors,o=i.className,l=i.label,u=i.cx,f=i.cy,d=i.innerRadius,h=i.outerRadius,p=i.isAnimationActive,v=this.state.isAnimationFinished;if(a||!s||!s.length||!je(u)||!je(f)||!je(d)||!je(h))return null;var y=ht("recharts-pie",o);return F.createElement(xt,{tabIndex:this.props.rootTabIndex,className:y,ref:function(x){r.pieRef=x}},this.renderSectors(),l&&this.renderLabels(s),pr.renderCallByParent(this.props,null,!1),(!p||v)&&Si.renderCallByParent(this.props,s,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,a){if(F.isValidElement(r))return F.cloneElement(r,i);if(nt(r))return r(i);var s=ht("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return F.createElement(Mc,sd({},i,{key:a,type:"linear",className:s}))}},{key:"renderLabelItem",value:function(r,i,a){if(F.isValidElement(r))return F.cloneElement(r,i);var s=a;if(nt(r)&&(s=r(i),F.isValidElement(s)))return s;var o=ht("recharts-pie-label-text",typeof r!="boolean"&&!nt(r)?r.className:"");return F.createElement(qc,sd({},i,{alignmentBaseline:"middle",className:o}),s)}}])}(O.PureComponent);$y=jo;oa(jo,"displayName","Pie");oa(jo,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Rl.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});oa(jo,"parseDeltaAngle",function(t,e){var n=Yr(e-t),r=Math.min(Math.abs(e-t),360);return n*r});oa(jo,"getRealPieData",function(t){var e=t.data,n=t.children,r=qe(t,!1),i=Ui(n,Eo);return e&&e.length?e.map(function(a,s){return en(en(en({payload:a},r),a),i&&i[s]&&i[s].props)}):i&&i.length?i.map(function(a){return en(en({},r),a.props)}):[]});oa(jo,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,i=e.width,a=e.height,s=MF(i,a),o=r+Xr(t.cx,i,i/2),l=n+Xr(t.cy,a,a/2),u=Xr(t.innerRadius,s,0),f=Xr(t.outerRadius,s,s*.8),d=t.maxRadius||Math.sqrt(i*i+a*a)/2;return{cx:o,cy:l,innerRadius:u,outerRadius:f,maxRadius:d}});oa(jo,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?en(en({},e.type.defaultProps),e.props):e.props,i=$y.getRealPieData(r);if(!i||!i.length)return null;var a=r.cornerRadius,s=r.startAngle,o=r.endAngle,l=r.paddingAngle,u=r.dataKey,f=r.nameKey,d=r.valueKey,h=r.tooltipType,p=Math.abs(r.minAngle),v=$y.parseCoordinateOfPie(r,n),y=$y.parseDeltaAngle(s,o),b=Math.abs(y),x=u;st(u)&&st(d)?(Ka(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x="value"):st(u)&&(Ka(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x=d);var _=i.filter(function(T){return zn(T,x,0)!==0}).length,E=(b>=360?_:_-1)*l,P=b-_*p-E,A=i.reduce(function(T,N){var D=zn(N,x,0);return T+(je(D)?D:0)},0),j;if(A>0){var S;j=i.map(function(T,N){var D=zn(T,x,0),M=zn(T,f,N),$=(je(D)?D:0)/A,z;N?z=S.endAngle+Yr(y)*l*(D!==0?1:0):z=s;var H=z+Yr(y)*((D!==0?p:0)+$*P),ee=(z+H)/2,U=(v.innerRadius+v.outerRadius)/2,Z=[{name:M,value:D,payload:T,dataKey:x,type:h}],q=an(v.cx,v.cy,U,ee);return S=en(en(en({percent:$,cornerRadius:a,name:M,tooltipPayload:Z,midAngle:ee,middleRadius:U,tooltipPosition:q},T),v),{},{value:zn(T,x),startAngle:z,endAngle:H,payload:T,paddingAngle:Yr(y)*l}),S})}return en(en({},v),{},{sectors:j,data:i})});var cje=Math.ceil,uje=Math.max;function dje(t,e,n,r){for(var i=-1,a=uje(cje((e-t)/(n||1)),0),s=Array(a);a--;)s[r?a:++i]=t,t+=n;return s}var fje=dje,hje=_V,uM=1/0,pje=17976931348623157e292;function mje(t){if(!t)return t===0?t:0;if(t=hje(t),t===uM||t===-uM){var e=t<0?-1:1;return e*pje}return t===t?t:0}var i8=mje,gje=fje,yje=tb,a1=i8;function vje(t){return function(e,n,r){return r&&typeof r!="number"&&yje(e,n,r)&&(n=r=void 0),e=a1(e),n===void 0?(n=e,e=0):n=a1(n),r=r===void 0?e<n?1:-1:a1(r),gje(e,n,r,t)}}var xje=vje,bje=xje,wje=bje(),_je=wje;const A0=Vt(_je);function _m(t){"@babel/helpers - typeof";return _m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_m(t)}function dM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dM(Object(n),!0).forEach(function(r){a8(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function a8(t,e,n){return e=Sje(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sje(t){var e=Eje(t,"string");return _m(e)=="symbol"?e:e+""}function Eje(t,e){if(_m(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_m(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Aje=["Webkit","Moz","O","ms"],jje=function(e,n){var r=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=Aje.reduce(function(a,s){return fM(fM({},a),{},a8({},s+r,n))},{});return i[e]=n,i};function af(t){"@babel/helpers - typeof";return af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},af(t)}function j0(){return j0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j0.apply(this,arguments)}function hM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function s1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hM(Object(n),!0).forEach(function(r){Ii(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o8(r.key),r)}}function Pje(t,e,n){return e&&pM(t.prototype,e),n&&pM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cje(t,e,n){return e=T0(e),kje(t,s8()?Reflect.construct(e,n||[],T0(t).constructor):e.apply(t,n))}function kje(t,e){if(e&&(af(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nje(t)}function Nje(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(s8=function(){return!!t})()}function T0(t){return T0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},T0(t)}function Oje(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l2(t,e)}function l2(t,e){return l2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},l2(t,e)}function Ii(t,e,n){return e=o8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o8(t){var e=Ije(t,"string");return af(e)=="symbol"?e:e+""}function Ije(t,e){if(af(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(af(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Dje=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,a=e.x,s=e.width,o=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,u=op().domain(A0(0,l)).range([a,a+s-o]),f=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:f}},mM=function(e){return e.changedTouches&&!!e.changedTouches.length},sf=function(t){function e(n){var r;return Tje(this,e),r=Cje(this,e,[n]),Ii(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),Ii(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),Ii(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,a=i.endIndex,s=i.onDragEnd,o=i.startIndex;s==null||s({endIndex:a,startIndex:o})}),r.detachDragEndListener()}),Ii(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Ii(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Ii(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Ii(r,"handleSlideDragStart",function(i){var a=mM(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return Oje(e,t),Pje(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,a=r.endX,s=this.state.scaleValues,o=this.props,l=o.gap,u=o.data,f=u.length-1,d=Math.min(i,a),h=Math.max(i,a),p=e.getIndexInRange(s,d),v=e.getIndexInRange(s,h);return{startIndex:p-p%l,endIndex:v===f?f:v-v%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,a=i.data,s=i.tickFormatter,o=i.dataKey,l=zn(a[r],o,r);return nt(s)?s(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,a=i.slideMoveStartX,s=i.startX,o=i.endX,l=this.props,u=l.x,f=l.width,d=l.travellerWidth,h=l.startIndex,p=l.endIndex,v=l.onChange,y=r.pageX-a;y>0?y=Math.min(y,u+f-d-o,u+f-d-s):y<0&&(y=Math.max(y,u-s,u-o));var b=this.getIndex({startX:s+y,endX:o+y});(b.startIndex!==h||b.endIndex!==p)&&v&&v(b),this.setState({startX:s+y,endX:o+y,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var a=mM(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,a=i.brushMoveStartX,s=i.movingTravellerId,o=i.endX,l=i.startX,u=this.state[s],f=this.props,d=f.x,h=f.width,p=f.travellerWidth,v=f.onChange,y=f.gap,b=f.data,x={startX:this.state.startX,endX:this.state.endX},_=r.pageX-a;_>0?_=Math.min(_,d+h-p-u):_<0&&(_=Math.max(_,d-u)),x[s]=u+_;var E=this.getIndex(x),P=E.startIndex,A=E.endIndex,j=function(){var T=b.length-1;return s==="startX"&&(o>l?P%y===0:A%y===0)||o<l&&A===T||s==="endX"&&(o>l?A%y===0:P%y===0)||o>l&&A===T};this.setState(Ii(Ii({},s,u+_),"brushMoveStartX",r.pageX),function(){v&&j()&&v(E)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var a=this,s=this.state,o=s.scaleValues,l=s.startX,u=s.endX,f=this.state[i],d=o.indexOf(f);if(d!==-1){var h=d+r;if(!(h===-1||h>=o.length)){var p=o[h];i==="startX"&&p>=u||i==="endX"&&p<=l||this.setState(Ii({},i,p),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,l=r.fill,u=r.stroke;return F.createElement("rect",{stroke:u,fill:l,x:i,y:a,width:s,height:o})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,l=r.data,u=r.children,f=r.padding,d=O.Children.only(u);return d?F.cloneElement(d,{x:i,y:a,width:s,height:o,margin:f,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var a,s,o=this,l=this.props,u=l.y,f=l.travellerWidth,d=l.height,h=l.traveller,p=l.ariaLabel,v=l.data,y=l.startIndex,b=l.endIndex,x=Math.max(r,this.props.x),_=s1(s1({},qe(this.props,!1)),{},{x,y:u,width:f,height:d}),E=p||"Min value: ".concat((a=v[y])===null||a===void 0?void 0:a.name,", Max value: ").concat((s=v[b])===null||s===void 0?void 0:s.name);return F.createElement(xt,{tabIndex:0,role:"slider","aria-label":E,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(A){["ArrowLeft","ArrowRight"].includes(A.key)&&(A.preventDefault(),A.stopPropagation(),o.handleTravellerMoveKeyboard(A.key==="ArrowRight"?1:-1,i))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(h,_))}},{key:"renderSlide",value:function(r,i){var a=this.props,s=a.y,o=a.height,l=a.stroke,u=a.travellerWidth,f=Math.min(r,i)+u,d=Math.max(Math.abs(i-r)-u,0);return F.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:f,y:s,width:d,height:o})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,a=r.endIndex,s=r.y,o=r.height,l=r.travellerWidth,u=r.stroke,f=this.state,d=f.startX,h=f.endX,p=5,v={pointerEvents:"none",fill:u};return F.createElement(xt,{className:"recharts-brush-texts"},F.createElement(qc,j0({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,h)-p,y:s+o/2},v),this.getTextOfTick(i)),F.createElement(qc,j0({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,h)+l+p,y:s+o/2},v),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,i=r.data,a=r.className,s=r.children,o=r.x,l=r.y,u=r.width,f=r.height,d=r.alwaysShowText,h=this.state,p=h.startX,v=h.endX,y=h.isTextActive,b=h.isSlideMoving,x=h.isTravellerMoving,_=h.isTravellerFocused;if(!i||!i.length||!je(o)||!je(l)||!je(u)||!je(f)||u<=0||f<=0)return null;var E=ht("recharts-brush",a),P=F.Children.count(s)===1,A=jje("userSelect","none");return F.createElement(xt,{className:E,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:A},this.renderBackground(),P&&this.renderPanorama(),this.renderSlide(p,v),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(v,"endX"),(y||b||x||_||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,a=r.y,s=r.width,o=r.height,l=r.stroke,u=Math.floor(a+o/2)-1;return F.createElement(F.Fragment,null,F.createElement("rect",{x:i,y:a,width:s,height:o,fill:l,stroke:"none"}),F.createElement("line",{x1:i+1,y1:u,x2:i+s-1,y2:u,fill:"none",stroke:"#fff"}),F.createElement("line",{x1:i+1,y1:u+2,x2:i+s-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var a;return F.isValidElement(r)?a=F.cloneElement(r,i):nt(r)?a=r(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(r,i){var a=r.data,s=r.width,o=r.x,l=r.travellerWidth,u=r.updateId,f=r.startIndex,d=r.endIndex;if(a!==i.prevData||u!==i.prevUpdateId)return s1({prevData:a,prevTravellerWidth:l,prevUpdateId:u,prevX:o,prevWidth:s},a&&a.length?Dje({data:a,width:s,x:o,travellerWidth:l,startIndex:f,endIndex:d}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||o!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([o,o+s-l]);var h=i.scale.domain().map(function(p){return i.scale(p)});return{prevData:a,prevTravellerWidth:l,prevUpdateId:u,prevX:o,prevWidth:s,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,i){for(var a=r.length,s=0,o=a-1;o-s>1;){var l=Math.floor((s+o)/2);r[l]>i?o=l:s=l}return i>=r[o]?o:s}}])}(O.PureComponent);Ii(sf,"displayName","Brush");Ii(sf,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Mje=Mj;function Rje(t,e){var n;return Mje(t,function(r,i,a){return n=e(r,i,a),!n}),!!n}var $je=Rje,Lje=Y6,zje=ks,Vje=$je,Fje=ji,Bje=tb;function Uje(t,e,n){var r=Fje(t)?Lje:Vje;return n&&Bje(t,e,n)&&(e=void 0),r(t,zje(e))}var Wje=Uje;const Kje=Vt(Wje);var As=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},gM=yV;function qje(t,e,n){e=="__proto__"&&gM?gM(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var Hje=qje,Gje=Hje,Yje=mV,Xje=ks;function Qje(t,e){var n={};return e=Xje(e),Yje(t,function(r,i,a){Gje(n,i,e(r,i,a))}),n}var Zje=Qje;const Jje=Vt(Zje);function eTe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var tTe=eTe,nTe=Mj;function rTe(t,e){var n=!0;return nTe(t,function(r,i,a){return n=!!e(r,i,a),n}),n}var iTe=rTe,aTe=tTe,sTe=iTe,oTe=ks,lTe=ji,cTe=tb;function uTe(t,e,n){var r=lTe(t)?aTe:sTe;return n&&cTe(t,e,n)&&(e=void 0),r(t,oTe(e))}var dTe=uTe;const l8=Vt(dTe);var fTe=["x","y"];function Sm(t){"@babel/helpers - typeof";return Sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sm(t)}function c2(){return c2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c2.apply(this,arguments)}function yM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Eh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yM(Object(n),!0).forEach(function(r){hTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hTe(t,e,n){return e=pTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pTe(t){var e=mTe(t,"string");return Sm(e)=="symbol"?e:e+""}function mTe(t,e){if(Sm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gTe(t,e){if(t==null)return{};var n=yTe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yTe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function vTe(t,e){var n=t.x,r=t.y,i=gTe(t,fTe),a="".concat(n),s=parseInt(a,10),o="".concat(r),l=parseInt(o,10),u="".concat(e.height||i.height),f=parseInt(u,10),d="".concat(e.width||i.width),h=parseInt(d,10);return Eh(Eh(Eh(Eh(Eh({},e),i),s?{x:s}:{}),l?{y:l}:{}),{},{height:f,width:h,name:e.name,radius:e.radius})}function vM(t){return F.createElement(t8,c2({shapeType:"rectangle",propTransformer:vTe,activeClassName:"recharts-active-bar"},t))}var xTe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var a=je(r)||Wle(r);return a?e(r,i):(a||Yc(),n)}},bTe=["value","background"],c8;function of(t){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},of(t)}function wTe(t,e){if(t==null)return{};var n=_Te(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _Te(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function P0(){return P0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},P0.apply(this,arguments)}function xM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xM(Object(n),!0).forEach(function(r){Jo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function STe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,d8(r.key),r)}}function ETe(t,e,n){return e&&bM(t.prototype,e),n&&bM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ATe(t,e,n){return e=C0(e),jTe(t,u8()?Reflect.construct(e,n||[],C0(t).constructor):e.apply(t,n))}function jTe(t,e){if(e&&(of(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TTe(t)}function TTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(u8=function(){return!!t})()}function C0(t){return C0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},C0(t)}function PTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u2(t,e)}function u2(t,e){return u2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},u2(t,e)}function Jo(t,e,n){return e=d8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d8(t){var e=CTe(t,"string");return of(e)=="symbol"?e:e+""}function CTe(t,e){if(of(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(of(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Yn=function(t){function e(){var n;STe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=ATe(this,e,[].concat(i)),Jo(n,"state",{isAnimationFinished:!1}),Jo(n,"id",lu("recharts-bar-")),Jo(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),s&&s()}),Jo(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),s&&s()}),n}return PTe(e,t),ETe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,a=this.props,s=a.shape,o=a.dataKey,l=a.activeIndex,u=a.activeBar,f=qe(this.props,!1);return r&&r.map(function(d,h){var p=h===l,v=p?u:s,y=Kn(Kn(Kn({},f),d),{},{isActive:p,option:v,index:h,dataKey:o,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return F.createElement(xt,P0({className:"recharts-bar-rectangle"},Kc(i.props,d,h),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(h)}),F.createElement(vM,y))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,a=i.data,s=i.layout,o=i.isAnimationActive,l=i.animationBegin,u=i.animationDuration,f=i.animationEasing,d=i.animationId,h=this.state.prevData;return F.createElement(Ga,{begin:l,duration:u,isActive:o,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var v=p.t,y=a.map(function(b,x){var _=h&&h[x];if(_){var E=nr(_.x,b.x),P=nr(_.y,b.y),A=nr(_.width,b.width),j=nr(_.height,b.height);return Kn(Kn({},b),{},{x:E(v),y:P(v),width:A(v),height:j(v)})}if(s==="horizontal"){var S=nr(0,b.height),T=S(v);return Kn(Kn({},b),{},{y:b.y+b.height-T,height:T})}var N=nr(0,b.width),D=N(v);return Kn(Kn({},b),{},{width:D})});return F.createElement(xt,null,r.renderRectanglesStatically(y))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,a=r.isAnimationActive,s=this.state.prevData;return a&&i&&i.length&&(!s||!Hc(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,a=i.data,s=i.dataKey,o=i.activeIndex,l=qe(this.props.background,!1);return a.map(function(u,f){u.value;var d=u.background,h=wTe(u,bTe);if(!d)return null;var p=Kn(Kn(Kn(Kn(Kn({},h),{},{fill:"#eee"},d),l),Kc(r.props,u,f)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:s,index:f,className:"recharts-bar-background-rectangle"});return F.createElement(vM,P0({key:"background-bar-".concat(f),option:r.props.background,isActive:f===o},p))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.data,o=a.xAxis,l=a.yAxis,u=a.layout,f=a.children,d=Ui(f,cg);if(!d)return null;var h=u==="vertical"?s[0].height/2:s[0].width/2,p=function(b,x){var _=Array.isArray(b.value)?b.value[1]:b.value;return{x:b.x,y:b.y,value:_,errorVal:zn(b,x)}},v={clipPath:r?"url(#clipPath-".concat(i,")"):null};return F.createElement(xt,v,d.map(function(y){return F.cloneElement(y,{key:"error-bar-".concat(i,"-").concat(y.props.dataKey),data:s,xAxis:o,yAxis:l,layout:u,offset:h,dataPointFormatter:p})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.data,s=r.className,o=r.xAxis,l=r.yAxis,u=r.left,f=r.top,d=r.width,h=r.height,p=r.isAnimationActive,v=r.background,y=r.id;if(i||!a||!a.length)return null;var b=this.state.isAnimationFinished,x=ht("recharts-bar",s),_=o&&o.allowDataOverflow,E=l&&l.allowDataOverflow,P=_||E,A=st(y)?this.id:y;return F.createElement(xt,{className:x},_||E?F.createElement("defs",null,F.createElement("clipPath",{id:"clipPath-".concat(A)},F.createElement("rect",{x:_?u:u-d/2,y:E?f:f-h/2,width:_?d:d*2,height:E?h:h*2}))):null,F.createElement(xt,{className:"recharts-bar-rectangles",clipPath:P?"url(#clipPath-".concat(A,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(P,A),(!p||b)&&Si.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(O.PureComponent);c8=Yn;Jo(Yn,"displayName","Bar");Jo(Yn,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Rl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Jo(Yn,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,a=t.xAxis,s=t.yAxis,o=t.xAxisTicks,l=t.yAxisTicks,u=t.stackedData,f=t.dataStartIndex,d=t.displayedData,h=t.offset,p=l_e(r,n);if(!p)return null;var v=e.layout,y=n.type.defaultProps,b=y!==void 0?Kn(Kn({},y),n.props):n.props,x=b.dataKey,_=b.children,E=b.minPointSize,P=v==="horizontal"?s:a,A=u?P.scale.domain():null,j=m_e({numericAxis:P}),S=Ui(_,Eo),T=d.map(function(N,D){var M,$,z,H,ee,U;u?M=c_e(u[f+D],A):(M=zn(N,x),Array.isArray(M)||(M=[j,M]));var Z=xTe(E,c8.defaultProps.minPointSize)(M[1],D);if(v==="horizontal"){var q,Y=[s.scale(M[0]),s.scale(M[1])],le=Y[0],ce=Y[1];$=cD({axis:a,ticks:o,bandSize:i,offset:p.offset,entry:N,index:D}),z=(q=ce??le)!==null&&q!==void 0?q:void 0,H=p.size;var ye=le-ce;if(ee=Number.isNaN(ye)?0:ye,U={x:$,y:s.y,width:H,height:s.height},Math.abs(Z)>0&&Math.abs(ee)<Math.abs(Z)){var Ee=Yr(ee||Z)*(Math.abs(Z)-Math.abs(ee));z-=Ee,ee+=Ee}}else{var He=[a.scale(M[0]),a.scale(M[1])],ct=He[0],ft=He[1];if($=ct,z=cD({axis:s,ticks:l,bandSize:i,offset:p.offset,entry:N,index:D}),H=ft-ct,ee=p.size,U={x:a.x,y:z,width:a.width,height:ee},Math.abs(Z)>0&&Math.abs(H)<Math.abs(Z)){var It=Yr(H||Z)*(Math.abs(Z)-Math.abs(H));H+=It}}return Kn(Kn(Kn({},N),{},{x:$,y:z,width:H,height:ee,value:u?M:M[1],payload:N,background:U},S&&S[D]&&S[D].props),{},{tooltipPayload:[IF(n,N)],tooltipPosition:{x:$+H/2,y:z+ee/2}})});return Kn({data:T,layout:v},h)});function Em(t){"@babel/helpers - typeof";return Em=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Em(t)}function kTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f8(r.key),r)}}function NTe(t,e,n){return e&&wM(t.prototype,e),n&&wM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $a(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_M(Object(n),!0).forEach(function(r){vb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_M(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vb(t,e,n){return e=f8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f8(t){var e=OTe(t,"string");return Em(e)=="symbol"?e:e+""}function OTe(t,e){if(Em(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Em(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uT=function(e,n,r,i,a){var s=e.width,o=e.height,l=e.layout,u=e.children,f=Object.keys(n),d={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:o-r.bottom,bottomMirror:o-r.bottom},h=!!Ri(u,Yn);return f.reduce(function(p,v){var y=n[v],b=y.orientation,x=y.domain,_=y.padding,E=_===void 0?{}:_,P=y.mirror,A=y.reversed,j="".concat(b).concat(P?"Mirror":""),S,T,N,D,M;if(y.type==="number"&&(y.padding==="gap"||y.padding==="no-gap")){var $=x[1]-x[0],z=1/0,H=y.categoricalDomain.sort(Hle);if(H.forEach(function(He,ct){ct>0&&(z=Math.min((He||0)-(H[ct-1]||0),z))}),Number.isFinite(z)){var ee=z/$,U=y.layout==="vertical"?r.height:r.width;if(y.padding==="gap"&&(S=ee*U/2),y.padding==="no-gap"){var Z=Xr(e.barCategoryGap,ee*U),q=ee*U/2;S=q-Z-(q-Z)/U*Z}}}i==="xAxis"?T=[r.left+(E.left||0)+(S||0),r.left+r.width-(E.right||0)-(S||0)]:i==="yAxis"?T=l==="horizontal"?[r.top+r.height-(E.bottom||0),r.top+(E.top||0)]:[r.top+(E.top||0)+(S||0),r.top+r.height-(E.bottom||0)-(S||0)]:T=y.range,A&&(T=[T[1],T[0]]);var Y=CF(y,a,h),le=Y.scale,ce=Y.realScaleType;le.domain(x).range(T),kF(le);var ye=NF(le,$a($a({},y),{},{realScaleType:ce}));i==="xAxis"?(M=b==="top"&&!P||b==="bottom"&&P,N=r.left,D=d[j]-M*y.height):i==="yAxis"&&(M=b==="left"&&!P||b==="right"&&P,N=d[j]-M*y.width,D=r.top);var Ee=$a($a($a({},y),ye),{},{realScaleType:ce,x:N,y:D,scale:le,width:i==="xAxis"?r.width:y.width,height:i==="yAxis"?r.height:y.height});return Ee.bandSize=h0(Ee,ye),!y.hide&&i==="xAxis"?d[j]+=(M?-1:1)*Ee.height:y.hide||(d[j]+=(M?-1:1)*Ee.width),$a($a({},p),{},vb({},v,Ee))},{})},h8=function(e,n){var r=e.x,i=e.y,a=n.x,s=n.y;return{x:Math.min(r,a),y:Math.min(i,s),width:Math.abs(a-r),height:Math.abs(s-i)}},ITe=function(e){var n=e.x1,r=e.y1,i=e.x2,a=e.y2;return h8({x:n,y:r},{x:i,y:a})},p8=function(){function t(e){kTe(this,t),this.scale=e}return NTe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,a=r.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+s}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(n)+o}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],a=r[r.length-1];return i<=a?n>=i&&n<=a:n>=a&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();vb(p8,"EPS",1e-4);var dT=function(e){var n=Object.keys(e).reduce(function(r,i){return $a($a({},r),{},vb({},i,p8.create(e[i])))},{});return $a($a({},n),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,o=a.position;return Jje(i,function(l,u){return n[u].apply(l,{bandAware:s,position:o})})},isInRange:function(i){return l8(i,function(a,s){return n[s].isInRange(a)})}})};function DTe(t){return(t%180+180)%180}var MTe=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=DTe(i),s=a*Math.PI/180,o=Math.atan(r/n),l=s>o&&s<Math.PI-o?r/Math.sin(s):n/Math.cos(s);return Math.abs(l)},RTe=ks,$Te=ig,LTe=Jx;function zTe(t){return function(e,n,r){var i=Object(e);if(!$Te(e)){var a=RTe(n);e=LTe(e),n=function(o){return a(i[o],o,i)}}var s=t(e,n,r);return s>-1?i[a?e[s]:s]:void 0}}var VTe=zTe,FTe=i8;function BTe(t){var e=FTe(t),n=e%1;return e===e?n?e-n:e:0}var UTe=BTe,WTe=cV,KTe=ks,qTe=UTe,HTe=Math.max;function GTe(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:qTe(n);return i<0&&(i=HTe(r+i,0)),WTe(t,KTe(e),i)}var YTe=GTe,XTe=VTe,QTe=YTe,ZTe=XTe(QTe),JTe=ZTe;const ePe=Vt(JTe);var tPe=Xoe(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),fT=O.createContext(void 0),hT=O.createContext(void 0),m8=O.createContext(void 0),g8=O.createContext({}),y8=O.createContext(void 0),v8=O.createContext(0),x8=O.createContext(0),SM=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,a=n.offset,s=e.clipPathId,o=e.children,l=e.width,u=e.height,f=tPe(a);return F.createElement(fT.Provider,{value:r},F.createElement(hT.Provider,{value:i},F.createElement(g8.Provider,{value:a},F.createElement(m8.Provider,{value:f},F.createElement(y8.Provider,{value:s},F.createElement(v8.Provider,{value:u},F.createElement(x8.Provider,{value:l},o)))))))},nPe=function(){return O.useContext(y8)},b8=function(e){var n=O.useContext(fT);n==null&&Yc();var r=n[e];return r==null&&Yc(),r},rPe=function(){var e=O.useContext(fT);return Go(e)},iPe=function(){var e=O.useContext(hT),n=ePe(e,function(r){return l8(r.domain,Number.isFinite)});return n||Go(e)},w8=function(e){var n=O.useContext(hT);n==null&&Yc();var r=n[e];return r==null&&Yc(),r},aPe=function(){var e=O.useContext(m8);return e},sPe=function(){return O.useContext(g8)},pT=function(){return O.useContext(x8)},mT=function(){return O.useContext(v8)};function lf(t){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lf(t)}function oPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lPe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,S8(r.key),r)}}function cPe(t,e,n){return e&&lPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function uPe(t,e,n){return e=k0(e),dPe(t,_8()?Reflect.construct(e,n||[],k0(t).constructor):e.apply(t,n))}function dPe(t,e){if(e&&(lf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fPe(t)}function fPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_8=function(){return!!t})()}function k0(t){return k0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},k0(t)}function hPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d2(t,e)}function d2(t,e){return d2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},d2(t,e)}function EM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function AM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EM(Object(n),!0).forEach(function(r){gT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gT(t,e,n){return e=S8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S8(t){var e=pPe(t,"string");return lf(e)=="symbol"?e:e+""}function pPe(t,e){if(lf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(lf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function mPe(t,e){return xPe(t)||vPe(t,e)||yPe(t,e)||gPe()}function gPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yPe(t,e){if(t){if(typeof t=="string")return jM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jM(t,e)}}function jM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vPe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function xPe(t){if(Array.isArray(t))return t}function f2(){return f2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f2.apply(this,arguments)}var bPe=function(e,n){var r;return F.isValidElement(e)?r=F.cloneElement(e,n):nt(e)?r=e(n):r=F.createElement("line",f2({},n,{className:"recharts-reference-line-line"})),r},wPe=function(e,n,r,i,a,s,o,l,u){var f=a.x,d=a.y,h=a.width,p=a.height;if(r){var v=u.y,y=e.y.apply(v,{position:s});if(As(u,"discard")&&!e.y.isInRange(y))return null;var b=[{x:f+h,y},{x:f,y}];return l==="left"?b.reverse():b}if(n){var x=u.x,_=e.x.apply(x,{position:s});if(As(u,"discard")&&!e.x.isInRange(_))return null;var E=[{x:_,y:d+p},{x:_,y:d}];return o==="top"?E.reverse():E}if(i){var P=u.segment,A=P.map(function(j){return e.apply(j,{position:s})});return As(u,"discard")&&Kje(A,function(j){return!e.isInRange(j)})?null:A}return null};function _Pe(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,a=t.yAxisId,s=t.shape,o=t.className,l=t.alwaysShow,u=nPe(),f=b8(i),d=w8(a),h=aPe();if(!u||!h)return null;Ka(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=dT({x:f.scale,y:d.scale}),v=ir(e),y=ir(n),b=r&&r.length===2,x=wPe(p,v,y,b,h,t.position,f.orientation,d.orientation,t);if(!x)return null;var _=mPe(x,2),E=_[0],P=E.x,A=E.y,j=_[1],S=j.x,T=j.y,N=As(t,"hidden")?"url(#".concat(u,")"):void 0,D=AM(AM({clipPath:N},qe(t,!0)),{},{x1:P,y1:A,x2:S,y2:T});return F.createElement(xt,{className:ht("recharts-reference-line",o)},bPe(s,D),pr.renderCallByParent(t,ITe({x1:P,y1:A,x2:S,y2:T})))}var xb=function(t){function e(){return oPe(this,e),uPe(this,e,arguments)}return hPe(e,t),cPe(e,[{key:"render",value:function(){return F.createElement(_Pe,this.props)}}])}(F.Component);gT(xb,"displayName","ReferenceLine");gT(xb,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function h2(){return h2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h2.apply(this,arguments)}function cf(t){"@babel/helpers - typeof";return cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cf(t)}function TM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function PM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TM(Object(n),!0).forEach(function(r){bb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function SPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function EPe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A8(r.key),r)}}function APe(t,e,n){return e&&EPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function jPe(t,e,n){return e=N0(e),TPe(t,E8()?Reflect.construct(e,n||[],N0(t).constructor):e.apply(t,n))}function TPe(t,e){if(e&&(cf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PPe(t)}function PPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E8=function(){return!!t})()}function N0(t){return N0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},N0(t)}function CPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p2(t,e)}function p2(t,e){return p2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},p2(t,e)}function bb(t,e,n){return e=A8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A8(t){var e=kPe(t,"string");return cf(e)=="symbol"?e:e+""}function kPe(t,e){if(cf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(cf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var NPe=function(e){var n=e.x,r=e.y,i=e.xAxis,a=e.yAxis,s=dT({x:i.scale,y:a.scale}),o=s.apply({x:n,y:r},{bandAware:!0});return As(e,"discard")&&!s.isInRange(o)?null:o},wb=function(t){function e(){return SPe(this,e),jPe(this,e,arguments)}return CPe(e,t),APe(e,[{key:"render",value:function(){var r=this.props,i=r.x,a=r.y,s=r.r,o=r.alwaysShow,l=r.clipPathId,u=ir(i),f=ir(a);if(Ka(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!f)return null;var d=NPe(this.props);if(!d)return null;var h=d.x,p=d.y,v=this.props,y=v.shape,b=v.className,x=As(this.props,"hidden")?"url(#".concat(l,")"):void 0,_=PM(PM({clipPath:x},qe(this.props,!0)),{},{cx:h,cy:p});return F.createElement(xt,{className:ht("recharts-reference-dot",b)},e.renderDot(y,_),pr.renderCallByParent(this.props,{x:h-s,y:p-s,width:2*s,height:2*s}))}}])}(F.Component);bb(wb,"displayName","ReferenceDot");bb(wb,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});bb(wb,"renderDot",function(t,e){var n;return F.isValidElement(t)?n=F.cloneElement(t,e):nt(t)?n=t(e):n=F.createElement(ug,h2({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function m2(){return m2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m2.apply(this,arguments)}function uf(t){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uf(t)}function CM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CM(Object(n),!0).forEach(function(r){_b(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function OPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IPe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,T8(r.key),r)}}function DPe(t,e,n){return e&&IPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function MPe(t,e,n){return e=O0(e),RPe(t,j8()?Reflect.construct(e,n||[],O0(t).constructor):e.apply(t,n))}function RPe(t,e){if(e&&(uf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $Pe(t)}function $Pe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(j8=function(){return!!t})()}function O0(t){return O0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},O0(t)}function LPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g2(t,e)}function g2(t,e){return g2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},g2(t,e)}function _b(t,e,n){return e=T8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T8(t){var e=zPe(t,"string");return uf(e)=="symbol"?e:e+""}function zPe(t,e){if(uf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(uf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var VPe=function(e,n,r,i,a){var s=a.x1,o=a.x2,l=a.y1,u=a.y2,f=a.xAxis,d=a.yAxis;if(!f||!d)return null;var h=dT({x:f.scale,y:d.scale}),p={x:e?h.x.apply(s,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(l,{position:"start"}):h.y.rangeMin},v={x:n?h.x.apply(o,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(u,{position:"end"}):h.y.rangeMax};return As(a,"discard")&&(!h.isInRange(p)||!h.isInRange(v))?null:h8(p,v)},Sb=function(t){function e(){return OPe(this,e),MPe(this,e,arguments)}return LPe(e,t),DPe(e,[{key:"render",value:function(){var r=this.props,i=r.x1,a=r.x2,s=r.y1,o=r.y2,l=r.className,u=r.alwaysShow,f=r.clipPathId;Ka(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=ir(i),h=ir(a),p=ir(s),v=ir(o),y=this.props.shape;if(!d&&!h&&!p&&!v&&!y)return null;var b=VPe(d,h,p,v,this.props);if(!b&&!y)return null;var x=As(this.props,"hidden")?"url(#".concat(f,")"):void 0;return F.createElement(xt,{className:ht("recharts-reference-area",l)},e.renderRect(y,kM(kM({clipPath:x},qe(this.props,!0)),b)),pr.renderCallByParent(this.props,b))}}])}(F.Component);_b(Sb,"displayName","ReferenceArea");_b(Sb,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});_b(Sb,"renderRect",function(t,e){var n;return F.isValidElement(t)?n=F.cloneElement(t,e):nt(t)?n=t(e):n=F.createElement(cT,m2({},e,{className:"recharts-reference-area-rect"})),n});function P8(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function FPe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return MTe(r,n)}function BPe(t,e,n){var r=n==="width",i=t.x,a=t.y,s=t.width,o=t.height;return e===1?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}function I0(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function UPe(t,e){return P8(t,e+1)}function WPe(t,e,n,r,i){for(var a=(r||[]).slice(),s=e.start,o=e.end,l=0,u=1,f=s,d=function(){var v=r==null?void 0:r[l];if(v===void 0)return{v:P8(r,u)};var y=l,b,x=function(){return b===void 0&&(b=n(v,y)),b},_=v.coordinate,E=l===0||I0(t,_,x,f,o);E||(l=0,f=s,u+=1),E&&(f=_+t*(x()/2+i),l+=u)},h;u<=a.length;)if(h=d(),h)return h.v;return[]}function Am(t){"@babel/helpers - typeof";return Am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Am(t)}function NM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Lr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NM(Object(n),!0).forEach(function(r){KPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KPe(t,e,n){return e=qPe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qPe(t){var e=HPe(t,"string");return Am(e)=="symbol"?e:e+""}function HPe(t,e){if(Am(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Am(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GPe(t,e,n,r,i){for(var a=(r||[]).slice(),s=a.length,o=e.start,l=e.end,u=function(h){var p=a[h],v,y=function(){return v===void 0&&(v=n(p,h)),v};if(h===s-1){var b=t*(p.coordinate+t*y()/2-l);a[h]=p=Lr(Lr({},p),{},{tickCoord:b>0?p.coordinate-b*t:p.coordinate})}else a[h]=p=Lr(Lr({},p),{},{tickCoord:p.coordinate});var x=I0(t,p.tickCoord,y,o,l);x&&(l=p.tickCoord-t*(y()/2+i),a[h]=Lr(Lr({},p),{},{isShow:!0}))},f=s-1;f>=0;f--)u(f);return a}function YPe(t,e,n,r,i,a){var s=(r||[]).slice(),o=s.length,l=e.start,u=e.end;if(a){var f=r[o-1],d=n(f,o-1),h=t*(f.coordinate+t*d/2-u);s[o-1]=f=Lr(Lr({},f),{},{tickCoord:h>0?f.coordinate-h*t:f.coordinate});var p=I0(t,f.tickCoord,function(){return d},l,u);p&&(u=f.tickCoord-t*(d/2+i),s[o-1]=Lr(Lr({},f),{},{isShow:!0}))}for(var v=a?o-1:o,y=function(_){var E=s[_],P,A=function(){return P===void 0&&(P=n(E,_)),P};if(_===0){var j=t*(E.coordinate-t*A()/2-l);s[_]=E=Lr(Lr({},E),{},{tickCoord:j<0?E.coordinate-j*t:E.coordinate})}else s[_]=E=Lr(Lr({},E),{},{tickCoord:E.coordinate});var S=I0(t,E.tickCoord,A,l,u);S&&(l=E.tickCoord+t*(A()/2+i),s[_]=Lr(Lr({},E),{},{isShow:!0}))},b=0;b<v;b++)y(b);return s}function yT(t,e,n){var r=t.tick,i=t.ticks,a=t.viewBox,s=t.minTickGap,o=t.orientation,l=t.interval,u=t.tickFormatter,f=t.unit,d=t.angle;if(!i||!i.length||!r)return[];if(je(l)||Rl.isSsr)return UPe(i,typeof l=="number"&&je(l)?l:0);var h=[],p=o==="top"||o==="bottom"?"width":"height",v=f&&p==="width"?sp(f,{fontSize:e,letterSpacing:n}):{width:0,height:0},y=function(E,P){var A=nt(u)?u(E.value,P):E.value;return p==="width"?FPe(sp(A,{fontSize:e,letterSpacing:n}),v,d):sp(A,{fontSize:e,letterSpacing:n})[p]},b=i.length>=2?Yr(i[1].coordinate-i[0].coordinate):1,x=BPe(a,b,p);return l==="equidistantPreserveStart"?WPe(b,x,y,i,s):(l==="preserveStart"||l==="preserveStartEnd"?h=YPe(b,x,y,i,s,l==="preserveStartEnd"):h=GPe(b,x,y,i,s),h.filter(function(_){return _.isShow}))}var XPe=["viewBox"],QPe=["viewBox"],ZPe=["ticks"];function df(t){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},df(t)}function od(){return od=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},od.apply(this,arguments)}function OM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OM(Object(n),!0).forEach(function(r){vT(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function o1(t,e){if(t==null)return{};var n=JPe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function JPe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function eCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,k8(r.key),r)}}function tCe(t,e,n){return e&&IM(t.prototype,e),n&&IM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function nCe(t,e,n){return e=D0(e),rCe(t,C8()?Reflect.construct(e,n||[],D0(t).constructor):e.apply(t,n))}function rCe(t,e){if(e&&(df(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iCe(t)}function iCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C8=function(){return!!t})()}function D0(t){return D0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},D0(t)}function aCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y2(t,e)}function y2(t,e){return y2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},y2(t,e)}function vT(t,e,n){return e=k8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k8(t){var e=sCe(t,"string");return df(e)=="symbol"?e:e+""}function sCe(t,e){if(df(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(df(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Hf=function(t){function e(n){var r;return eCe(this,e),r=nCe(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return aCe(e,t),tCe(e,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,s=o1(r,XPe),o=this.props,l=o.viewBox,u=o1(o,QPe);return!bd(a,l)||!bd(s,u)||!bd(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,s=i.y,o=i.width,l=i.height,u=i.orientation,f=i.tickSize,d=i.mirror,h=i.tickMargin,p,v,y,b,x,_,E=d?-1:1,P=r.tickSize||f,A=je(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":p=v=r.coordinate,b=s+ +!d*l,y=b-E*P,_=y-E*h,x=A;break;case"left":y=b=r.coordinate,v=a+ +!d*o,p=v-E*P,x=p-E*h,_=A;break;case"right":y=b=r.coordinate,v=a+ +d*o,p=v+E*P,x=p+E*h,_=A;break;default:p=v=r.coordinate,b=s+ +d*l,y=b+E*P,_=y+E*h,x=A;break}return{line:{x1:p,y1:y,x2:v,y2:b},tick:{x,y:_}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s;switch(i){case"left":s=a?"start":"end";break;case"right":s=a?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=a?"start":"end";break;default:s=a?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,l=r.orientation,u=r.mirror,f=r.axisLine,d=Zn(Zn(Zn({},qe(this.props,!1)),qe(f,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var h=+(l==="top"&&!u||l==="bottom"&&u);d=Zn(Zn({},d),{},{x1:i,y1:a+h*o,x2:i+s,y2:a+h*o})}else{var p=+(l==="left"&&!u||l==="right"&&u);d=Zn(Zn({},d),{},{x1:i+p*s,y1:a,x2:i+p*s,y2:a+o})}return F.createElement("line",od({},d,{className:ht("recharts-cartesian-axis-line",Bi(f,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var s=this,o=this.props,l=o.tickLine,u=o.stroke,f=o.tick,d=o.tickFormatter,h=o.unit,p=yT(Zn(Zn({},this.props),{},{ticks:r}),i,a),v=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),b=qe(this.props,!1),x=qe(f,!1),_=Zn(Zn({},b),{},{fill:"none"},qe(l,!1)),E=p.map(function(P,A){var j=s.getTickLineCoord(P),S=j.line,T=j.tick,N=Zn(Zn(Zn(Zn({textAnchor:v,verticalAnchor:y},b),{},{stroke:"none",fill:u},x),T),{},{index:A,payload:P,visibleTicksCount:p.length,tickFormatter:d});return F.createElement(xt,od({className:"recharts-cartesian-axis-tick",key:"tick-".concat(P.value,"-").concat(P.coordinate,"-").concat(P.tickCoord)},Kc(s.props,P,A)),l&&F.createElement("line",od({},_,S,{className:ht("recharts-cartesian-axis-tick-line",Bi(l,"className"))})),f&&e.renderTickItem(f,N,"".concat(nt(d)?d(P.value,A):P.value).concat(h||"")))});return F.createElement("g",{className:"recharts-cartesian-axis-ticks"},E)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,s=i.width,o=i.height,l=i.ticksGenerator,u=i.className,f=i.hide;if(f)return null;var d=this.props,h=d.ticks,p=o1(d,ZPe),v=h;return nt(l)&&(v=h&&h.length>0?l(this.props):l(p)),s<=0||o<=0||!v||!v.length?null:F.createElement(xt,{className:ht("recharts-cartesian-axis",u),ref:function(b){r.layerReference=b}},a&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),pr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var s,o=ht(i.className,"recharts-cartesian-axis-tick-value");return F.isValidElement(r)?s=F.cloneElement(r,Zn(Zn({},i),{},{className:o})):nt(r)?s=r(Zn(Zn({},i),{},{className:o})):s=F.createElement(qc,od({},i,{className:"recharts-cartesian-axis-tick-value"}),a),s}}])}(O.Component);vT(Hf,"displayName","CartesianAxis");vT(Hf,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var oCe=["x1","y1","x2","y2","key"],lCe=["offset"];function Xc(t){"@babel/helpers - typeof";return Xc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xc(t)}function DM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Br(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DM(Object(n),!0).forEach(function(r){cCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cCe(t,e,n){return e=uCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uCe(t){var e=dCe(t,"string");return Xc(e)=="symbol"?e:e+""}function dCe(t,e){if(Xc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ac(){return Ac=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ac.apply(this,arguments)}function MM(t,e){if(t==null)return{};var n=fCe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fCe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var hCe=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,a=e.y,s=e.width,o=e.height,l=e.ry;return F.createElement("rect",{x:i,y:a,ry:l,width:s,height:o,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function N8(t,e){var n;if(F.isValidElement(t))n=F.cloneElement(t,e);else if(nt(t))n=t(e);else{var r=e.x1,i=e.y1,a=e.x2,s=e.y2,o=e.key,l=MM(e,oCe),u=qe(l,!1);u.offset;var f=MM(u,lCe);n=F.createElement("line",Ac({},f,{x1:r,y1:i,x2:a,y2:s,fill:"none",key:o}))}return n}function pCe(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,a=t.horizontalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,l){var u=Br(Br({},t),{},{x1:e,y1:o,x2:e+n,y2:o,key:"line-".concat(l),index:l});return N8(i,u)});return F.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function mCe(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,a=t.verticalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,l){var u=Br(Br({},t),{},{x1:o,y1:e,x2:o,y2:e+n,key:"line-".concat(l),index:l});return N8(i,u)});return F.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function gCe(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,a=t.width,s=t.height,o=t.horizontalPoints,l=t.horizontal,u=l===void 0?!0:l;if(!u||!e||!e.length)return null;var f=o.map(function(h){return Math.round(h+i-i)}).sort(function(h,p){return h-p});i!==f[0]&&f.unshift(0);var d=f.map(function(h,p){var v=!f[p+1],y=v?i+s-h:f[p+1]-h;if(y<=0)return null;var b=p%e.length;return F.createElement("rect",{key:"react-".concat(p),y:h,x:r,height:y,width:a,stroke:"none",fill:e[b],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return F.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function yCe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,a=t.x,s=t.y,o=t.width,l=t.height,u=t.verticalPoints;if(!n||!r||!r.length)return null;var f=u.map(function(h){return Math.round(h+a-a)}).sort(function(h,p){return h-p});a!==f[0]&&f.unshift(0);var d=f.map(function(h,p){var v=!f[p+1],y=v?a+o-h:f[p+1]-h;if(y<=0)return null;var b=p%r.length;return F.createElement("rect",{key:"react-".concat(p),x:h,y:s,width:y,height:l,stroke:"none",fill:r[b],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return F.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var vCe=function(e,n){var r=e.xAxis,i=e.width,a=e.height,s=e.offset;return PF(yT(Br(Br(Br({},Hf.defaultProps),r),{},{ticks:Xs(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.left,s.left+s.width,n)},xCe=function(e,n){var r=e.yAxis,i=e.width,a=e.height,s=e.offset;return PF(yT(Br(Br(Br({},Hf.defaultProps),r),{},{ticks:Xs(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.top,s.top+s.height,n)},Iu={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Gf(t){var e,n,r,i,a,s,o=pT(),l=mT(),u=sPe(),f=Br(Br({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Iu.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Iu.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:Iu.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Iu.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:Iu.vertical,verticalFill:(s=t.verticalFill)!==null&&s!==void 0?s:Iu.verticalFill,x:je(t.x)?t.x:u.left,y:je(t.y)?t.y:u.top,width:je(t.width)?t.width:u.width,height:je(t.height)?t.height:u.height}),d=f.x,h=f.y,p=f.width,v=f.height,y=f.syncWithTicks,b=f.horizontalValues,x=f.verticalValues,_=rPe(),E=iPe();if(!je(p)||p<=0||!je(v)||v<=0||!je(d)||d!==+d||!je(h)||h!==+h)return null;var P=f.verticalCoordinatesGenerator||vCe,A=f.horizontalCoordinatesGenerator||xCe,j=f.horizontalPoints,S=f.verticalPoints;if((!j||!j.length)&&nt(A)){var T=b&&b.length,N=A({yAxis:E?Br(Br({},E),{},{ticks:T?b:E.ticks}):void 0,width:o,height:l,offset:u},T?!0:y);Ka(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Xc(N),"]")),Array.isArray(N)&&(j=N)}if((!S||!S.length)&&nt(P)){var D=x&&x.length,M=P({xAxis:_?Br(Br({},_),{},{ticks:D?x:_.ticks}):void 0,width:o,height:l,offset:u},D?!0:y);Ka(Array.isArray(M),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Xc(M),"]")),Array.isArray(M)&&(S=M)}return F.createElement("g",{className:"recharts-cartesian-grid"},F.createElement(hCe,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),F.createElement(pCe,Ac({},f,{offset:u,horizontalPoints:j,xAxis:_,yAxis:E})),F.createElement(mCe,Ac({},f,{offset:u,verticalPoints:S,xAxis:_,yAxis:E})),F.createElement(gCe,Ac({},f,{horizontalPoints:j})),F.createElement(yCe,Ac({},f,{verticalPoints:S})))}Gf.displayName="CartesianGrid";var bCe=["type","layout","connectNulls","ref"],wCe=["key"];function ff(t){"@babel/helpers - typeof";return ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ff(t)}function RM(t,e){if(t==null)return{};var n=_Ce(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _Ce(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function fp(){return fp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fp.apply(this,arguments)}function $M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Oi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$M(Object(n),!0).forEach(function(r){La(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$M(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Du(t){return jCe(t)||ACe(t)||ECe(t)||SCe()}function SCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ECe(t,e){if(t){if(typeof t=="string")return v2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v2(t,e)}}function ACe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jCe(t){if(Array.isArray(t))return v2(t)}function v2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function TCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function LM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,I8(r.key),r)}}function PCe(t,e,n){return e&&LM(t.prototype,e),n&&LM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function CCe(t,e,n){return e=M0(e),kCe(t,O8()?Reflect.construct(e,n||[],M0(t).constructor):e.apply(t,n))}function kCe(t,e){if(e&&(ff(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NCe(t)}function NCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(O8=function(){return!!t})()}function M0(t){return M0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},M0(t)}function OCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x2(t,e)}function x2(t,e){return x2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},x2(t,e)}function La(t,e,n){return e=I8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I8(t){var e=ICe(t,"string");return ff(e)=="symbol"?e:e+""}function ICe(t,e){if(ff(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ff(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Qc=function(t){function e(){var n;TCe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=CCe(this,e,[].concat(i)),La(n,"state",{isAnimationFinished:!0,totalLength:0}),La(n,"generateSimpleStrokeDasharray",function(s,o){return"".concat(o,"px ").concat(s-o,"px")}),La(n,"getStrokeDasharray",function(s,o,l){var u=l.reduce(function(x,_){return x+_});if(!u)return n.generateSimpleStrokeDasharray(o,s);for(var f=Math.floor(s/u),d=s%u,h=o-s,p=[],v=0,y=0;v<l.length;y+=l[v],++v)if(y+l[v]>d){p=[].concat(Du(l.slice(0,v)),[d-y]);break}var b=p.length%2===0?[0,h]:[h];return[].concat(Du(e.repeat(l,f)),Du(p),b).map(function(x){return"".concat(x,"px")}).join(", ")}),La(n,"id",lu("recharts-line-")),La(n,"pathRef",function(s){n.mainCurve=s}),La(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),La(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return OCe(e,t),PCe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.points,o=a.xAxis,l=a.yAxis,u=a.layout,f=a.children,d=Ui(f,cg);if(!d)return null;var h=function(y,b){return{x:y.x,y:y.y,value:y.value,errorVal:zn(y.payload,b)}},p={clipPath:r?"url(#clipPath-".concat(i,")"):null};return F.createElement(xt,p,d.map(function(v){return F.cloneElement(v,{key:"bar-".concat(v.props.dataKey),data:s,xAxis:o,yAxis:l,layout:u,dataPointFormatter:h})}))}},{key:"renderDots",value:function(r,i,a){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var o=this.props,l=o.dot,u=o.points,f=o.dataKey,d=qe(this.props,!1),h=qe(l,!0),p=u.map(function(y,b){var x=Oi(Oi(Oi({key:"dot-".concat(b),r:3},d),h),{},{index:b,cx:y.x,cy:y.y,value:y.value,dataKey:f,payload:y.payload,points:u});return e.renderDotItem(l,x)}),v={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return F.createElement(xt,fp({className:"recharts-line-dots",key:"dots"},v),p)}},{key:"renderCurveStatically",value:function(r,i,a,s){var o=this.props,l=o.type,u=o.layout,f=o.connectNulls;o.ref;var d=RM(o,bCe),h=Oi(Oi(Oi({},qe(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:r},s),{},{type:l,layout:u,connectNulls:f});return F.createElement(Mc,fp({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var a=this,s=this.props,o=s.points,l=s.strokeDasharray,u=s.isAnimationActive,f=s.animationBegin,d=s.animationDuration,h=s.animationEasing,p=s.animationId,v=s.animateNewValues,y=s.width,b=s.height,x=this.state,_=x.prevPoints,E=x.totalLength;return F.createElement(Ga,{begin:f,duration:d,isActive:u,easing:h,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(P){var A=P.t;if(_){var j=_.length/o.length,S=o.map(function($,z){var H=Math.floor(z*j);if(_[H]){var ee=_[H],U=nr(ee.x,$.x),Z=nr(ee.y,$.y);return Oi(Oi({},$),{},{x:U(A),y:Z(A)})}if(v){var q=nr(y*2,$.x),Y=nr(b/2,$.y);return Oi(Oi({},$),{},{x:q(A),y:Y(A)})}return Oi(Oi({},$),{},{x:$.x,y:$.y})});return a.renderCurveStatically(S,r,i)}var T=nr(0,E),N=T(A),D;if(l){var M="".concat(l).split(/[,\s]+/gim).map(function($){return parseFloat($)});D=a.getStrokeDasharray(N,E,M)}else D=a.generateSimpleStrokeDasharray(E,N);return a.renderCurveStatically(o,r,i,{strokeDasharray:D})})}},{key:"renderCurve",value:function(r,i){var a=this.props,s=a.points,o=a.isAnimationActive,l=this.state,u=l.prevPoints,f=l.totalLength;return o&&s&&s.length&&(!u&&f>0||!Hc(u,s))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(s,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,s=i.dot,o=i.points,l=i.className,u=i.xAxis,f=i.yAxis,d=i.top,h=i.left,p=i.width,v=i.height,y=i.isAnimationActive,b=i.id;if(a||!o||!o.length)return null;var x=this.state.isAnimationFinished,_=o.length===1,E=ht("recharts-line",l),P=u&&u.allowDataOverflow,A=f&&f.allowDataOverflow,j=P||A,S=st(b)?this.id:b,T=(r=qe(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},N=T.r,D=N===void 0?3:N,M=T.strokeWidth,$=M===void 0?2:M,z=b6(s)?s:{},H=z.clipDot,ee=H===void 0?!0:H,U=D*2+$;return F.createElement(xt,{className:E},P||A?F.createElement("defs",null,F.createElement("clipPath",{id:"clipPath-".concat(S)},F.createElement("rect",{x:P?h:h-p/2,y:A?d:d-v/2,width:P?p:p*2,height:A?v:v*2})),!ee&&F.createElement("clipPath",{id:"clipPath-dots-".concat(S)},F.createElement("rect",{x:h-U/2,y:d-U/2,width:p+U,height:v+U}))):null,!_&&this.renderCurve(j,S),this.renderErrorBar(j,S),(_||s)&&this.renderDots(j,ee,S),(!y||x)&&Si.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var a=r.length%2!==0?[].concat(Du(r),[0]):r,s=[],o=0;o<i;++o)s=[].concat(Du(s),Du(a));return s}},{key:"renderDotItem",value:function(r,i){var a;if(F.isValidElement(r))a=F.cloneElement(r,i);else if(nt(r))a=r(i);else{var s=i.key,o=RM(i,wCe),l=ht("recharts-line-dot",typeof r!="boolean"?r.className:"");a=F.createElement(ug,fp({key:s},o,{className:l}))}return a}}])}(O.PureComponent);La(Qc,"displayName","Line");La(Qc,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Rl.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});La(Qc,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,a=t.yAxisTicks,s=t.dataKey,o=t.bandSize,l=t.displayedData,u=t.offset,f=e.layout,d=l.map(function(h,p){var v=zn(h,s);return f==="horizontal"?{x:f0({axis:n,ticks:i,bandSize:o,entry:h,index:p}),y:st(v)?null:r.scale(v),value:v,payload:h}:{x:st(v)?null:n.scale(v),y:f0({axis:r,ticks:a,bandSize:o,entry:h,index:p}),value:v,payload:h}});return Oi({points:d,layout:f},u)});var DCe=["layout","type","stroke","connectNulls","isRange","ref"],MCe=["key"],D8;function hf(t){"@babel/helpers - typeof";return hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hf(t)}function M8(t,e){if(t==null)return{};var n=RCe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function RCe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function jc(){return jc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jc.apply(this,arguments)}function zM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zM(Object(n),!0).forEach(function(r){ms(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $Ce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function VM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$8(r.key),r)}}function LCe(t,e,n){return e&&VM(t.prototype,e),n&&VM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function zCe(t,e,n){return e=R0(e),VCe(t,R8()?Reflect.construct(e,n||[],R0(t).constructor):e.apply(t,n))}function VCe(t,e){if(e&&(hf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FCe(t)}function FCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function R8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(R8=function(){return!!t})()}function R0(t){return R0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},R0(t)}function BCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b2(t,e)}function b2(t,e){return b2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},b2(t,e)}function ms(t,e,n){return e=$8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $8(t){var e=UCe(t,"string");return hf(e)=="symbol"?e:e+""}function UCe(t,e){if(hf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Vl=function(t){function e(){var n;$Ce(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=zCe(this,e,[].concat(i)),ms(n,"state",{isAnimationFinished:!0}),ms(n,"id",lu("recharts-area-")),ms(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),nt(s)&&s()}),ms(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),nt(s)&&s()}),n}return BCe(e,t),LCe(e,[{key:"renderDots",value:function(r,i,a){var s=this.props.isAnimationActive,o=this.state.isAnimationFinished;if(s&&!o)return null;var l=this.props,u=l.dot,f=l.points,d=l.dataKey,h=qe(this.props,!1),p=qe(u,!0),v=f.map(function(b,x){var _=Bo(Bo(Bo({key:"dot-".concat(x),r:3},h),p),{},{index:x,cx:b.x,cy:b.y,dataKey:d,value:b.value,payload:b.payload,points:f});return e.renderDotItem(u,_)}),y={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return F.createElement(xt,jc({className:"recharts-area-dots"},y),v)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,a=i.baseLine,s=i.points,o=i.strokeWidth,l=s[0].x,u=s[s.length-1].x,f=r*Math.abs(l-u),d=Zo(s.map(function(h){return h.y||0}));return je(a)&&typeof a=="number"?d=Math.max(a,d):a&&Array.isArray(a)&&a.length&&(d=Math.max(Zo(a.map(function(h){return h.y||0})),d)),je(d)?F.createElement("rect",{x:l<u?l:l-f,y:0,width:f,height:Math.floor(d+(o?parseInt("".concat(o),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,a=i.baseLine,s=i.points,o=i.strokeWidth,l=s[0].y,u=s[s.length-1].y,f=r*Math.abs(l-u),d=Zo(s.map(function(h){return h.x||0}));return je(a)&&typeof a=="number"?d=Math.max(a,d):a&&Array.isArray(a)&&a.length&&(d=Math.max(Zo(a.map(function(h){return h.x||0})),d)),je(d)?F.createElement("rect",{x:0,y:l<u?l:l-f,width:d+(o?parseInt("".concat(o),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,a,s){var o=this.props,l=o.layout,u=o.type,f=o.stroke,d=o.connectNulls,h=o.isRange;o.ref;var p=M8(o,DCe);return F.createElement(xt,{clipPath:a?"url(#clipPath-".concat(s,")"):null},F.createElement(Mc,jc({},qe(p,!0),{points:r,connectNulls:d,type:u,baseLine:i,layout:l,stroke:"none",className:"recharts-area-area"})),f!=="none"&&F.createElement(Mc,jc({},qe(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:d,fill:"none",points:r})),f!=="none"&&h&&F.createElement(Mc,jc({},qe(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:d,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var a=this,s=this.props,o=s.points,l=s.baseLine,u=s.isAnimationActive,f=s.animationBegin,d=s.animationDuration,h=s.animationEasing,p=s.animationId,v=this.state,y=v.prevPoints,b=v.prevBaseLine;return F.createElement(Ga,{begin:f,duration:d,isActive:u,easing:h,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var _=x.t;if(y){var E=y.length/o.length,P=o.map(function(T,N){var D=Math.floor(N*E);if(y[D]){var M=y[D],$=nr(M.x,T.x),z=nr(M.y,T.y);return Bo(Bo({},T),{},{x:$(_),y:z(_)})}return T}),A;if(je(l)&&typeof l=="number"){var j=nr(b,l);A=j(_)}else if(st(l)||Vf(l)){var S=nr(b,0);A=S(_)}else A=l.map(function(T,N){var D=Math.floor(N*E);if(b[D]){var M=b[D],$=nr(M.x,T.x),z=nr(M.y,T.y);return Bo(Bo({},T),{},{x:$(_),y:z(_)})}return T});return a.renderAreaStatically(P,A,r,i)}return F.createElement(xt,null,F.createElement("defs",null,F.createElement("clipPath",{id:"animationClipPath-".concat(i)},a.renderClipRect(_))),F.createElement(xt,{clipPath:"url(#animationClipPath-".concat(i,")")},a.renderAreaStatically(o,l,r,i)))})}},{key:"renderArea",value:function(r,i){var a=this.props,s=a.points,o=a.baseLine,l=a.isAnimationActive,u=this.state,f=u.prevPoints,d=u.prevBaseLine,h=u.totalLength;return l&&s&&s.length&&(!f&&h>0||!Hc(f,s)||!Hc(d,o))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(s,o,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,s=i.dot,o=i.points,l=i.className,u=i.top,f=i.left,d=i.xAxis,h=i.yAxis,p=i.width,v=i.height,y=i.isAnimationActive,b=i.id;if(a||!o||!o.length)return null;var x=this.state.isAnimationFinished,_=o.length===1,E=ht("recharts-area",l),P=d&&d.allowDataOverflow,A=h&&h.allowDataOverflow,j=P||A,S=st(b)?this.id:b,T=(r=qe(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},N=T.r,D=N===void 0?3:N,M=T.strokeWidth,$=M===void 0?2:M,z=b6(s)?s:{},H=z.clipDot,ee=H===void 0?!0:H,U=D*2+$;return F.createElement(xt,{className:E},P||A?F.createElement("defs",null,F.createElement("clipPath",{id:"clipPath-".concat(S)},F.createElement("rect",{x:P?f:f-p/2,y:A?u:u-v/2,width:P?p:p*2,height:A?v:v*2})),!ee&&F.createElement("clipPath",{id:"clipPath-dots-".concat(S)},F.createElement("rect",{x:f-U/2,y:u-U/2,width:p+U,height:v+U}))):null,_?null:this.renderArea(j,S),(s||_)&&this.renderDots(j,ee,S),(!y||x)&&Si.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(O.PureComponent);D8=Vl;ms(Vl,"displayName","Area");ms(Vl,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Rl.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});ms(Vl,"getBaseValue",function(t,e,n,r){var i=t.layout,a=t.baseValue,s=e.props.baseValue,o=s??a;if(je(o)&&typeof o=="number")return o;var l=i==="horizontal"?r:n,u=l.scale.domain();if(l.type==="number"){var f=Math.max(u[0],u[1]),d=Math.min(u[0],u[1]);return o==="dataMin"?d:o==="dataMax"||f<0?f:Math.max(Math.min(u[0],u[1]),0)}return o==="dataMin"?u[0]:o==="dataMax"?u[1]:u[0]});ms(Vl,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,i=t.yAxis,a=t.xAxisTicks,s=t.yAxisTicks,o=t.bandSize,l=t.dataKey,u=t.stackedData,f=t.dataStartIndex,d=t.displayedData,h=t.offset,p=e.layout,v=u&&u.length,y=D8.getBaseValue(e,n,r,i),b=p==="horizontal",x=!1,_=d.map(function(P,A){var j;v?j=u[f+A]:(j=zn(P,l),Array.isArray(j)?x=!0:j=[y,j]);var S=j[1]==null||v&&zn(P,l)==null;return b?{x:f0({axis:r,ticks:a,bandSize:o,entry:P,index:A}),y:S?null:i.scale(j[1]),value:j,payload:P}:{x:S?null:r.scale(j[1]),y:f0({axis:i,ticks:s,bandSize:o,entry:P,index:A}),value:j,payload:P}}),E;return v||x?E=_.map(function(P){var A=Array.isArray(P.value)?P.value[0]:null;return b?{x:P.x,y:A!=null&&P.y!=null?i.scale(A):null}:{x:A!=null?r.scale(A):null,y:P.y}}):E=b?i.scale(y):r.scale(y),Bo({points:_,baseLine:E,layout:p,isRange:x},h)});ms(Vl,"renderDotItem",function(t,e){var n;if(F.isValidElement(t))n=F.cloneElement(t,e);else if(nt(t))n=t(e);else{var r=ht("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,a=M8(e,MCe);n=F.createElement(ug,jc({},a,{key:i,className:r}))}return n});function pf(t){"@babel/helpers - typeof";return pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pf(t)}function WCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function KCe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,V8(r.key),r)}}function qCe(t,e,n){return e&&KCe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function HCe(t,e,n){return e=$0(e),GCe(t,L8()?Reflect.construct(e,n||[],$0(t).constructor):e.apply(t,n))}function GCe(t,e){if(e&&(pf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YCe(t)}function YCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(L8=function(){return!!t})()}function $0(t){return $0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$0(t)}function XCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w2(t,e)}function w2(t,e){return w2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},w2(t,e)}function z8(t,e,n){return e=V8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function V8(t){var e=QCe(t,"string");return pf(e)=="symbol"?e:e+""}function QCe(t,e){if(pf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(pf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function _2(){return _2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_2.apply(this,arguments)}function ZCe(t){var e=t.xAxisId,n=pT(),r=mT(),i=b8(e);return i==null?null:O.createElement(Hf,_2({},i,{className:ht("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(s){return Xs(s,!0)}}))}var kn=function(t){function e(){return WCe(this,e),HCe(this,e,arguments)}return XCe(e,t),qCe(e,[{key:"render",value:function(){return O.createElement(ZCe,this.props)}}])}(O.Component);z8(kn,"displayName","XAxis");z8(kn,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function mf(t){"@babel/helpers - typeof";return mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mf(t)}function JCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,U8(r.key),r)}}function tke(t,e,n){return e&&eke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function nke(t,e,n){return e=L0(e),rke(t,F8()?Reflect.construct(e,n||[],L0(t).constructor):e.apply(t,n))}function rke(t,e){if(e&&(mf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ike(t)}function ike(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function F8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(F8=function(){return!!t})()}function L0(t){return L0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},L0(t)}function ake(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S2(t,e)}function S2(t,e){return S2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},S2(t,e)}function B8(t,e,n){return e=U8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function U8(t){var e=ske(t,"string");return mf(e)=="symbol"?e:e+""}function ske(t,e){if(mf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(mf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function E2(){return E2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},E2.apply(this,arguments)}var oke=function(e){var n=e.yAxisId,r=pT(),i=mT(),a=w8(n);return a==null?null:O.createElement(Hf,E2({},a,{className:ht("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(o){return Xs(o,!0)}}))},Nn=function(t){function e(){return JCe(this,e),nke(this,e,arguments)}return ake(e,t),tke(e,[{key:"render",value:function(){return O.createElement(oke,this.props)}}])}(O.Component);B8(Nn,"displayName","YAxis");B8(Nn,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function FM(t){return dke(t)||uke(t)||cke(t)||lke()}function lke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cke(t,e){if(t){if(typeof t=="string")return A2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A2(t,e)}}function uke(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function dke(t){if(Array.isArray(t))return A2(t)}function A2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var j2=function(e,n,r,i,a){var s=Ui(e,xb),o=Ui(e,wb),l=[].concat(FM(s),FM(o)),u=Ui(e,Sb),f="".concat(i,"Id"),d=i[0],h=n;if(l.length&&(h=l.reduce(function(y,b){if(b.props[f]===r&&As(b.props,"extendDomain")&&je(b.props[d])){var x=b.props[d];return[Math.min(y[0],x),Math.max(y[1],x)]}return y},h)),u.length){var p="".concat(d,"1"),v="".concat(d,"2");h=u.reduce(function(y,b){if(b.props[f]===r&&As(b.props,"extendDomain")&&je(b.props[p])&&je(b.props[v])){var x=b.props[p],_=b.props[v];return[Math.min(y[0],x,_),Math.max(y[1],x,_)]}return y},h)}return a&&a.length&&(h=a.reduce(function(y,b){return je(b)?[Math.min(y[0],b),Math.max(y[1],b)]:y},h)),h},W8={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,u,f){this.fn=l,this.context=u,this.once=f||!1}function a(l,u,f,d,h){if(typeof f!="function")throw new TypeError("The listener must be a function");var p=new i(f,d||l,h),v=n?n+u:u;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],p]:l._events[v].push(p):(l._events[v]=p,l._eventsCount++),l}function s(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],f,d;if(this._eventsCount===0)return u;for(d in f=this._events)e.call(f,d)&&u.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},o.prototype.listeners=function(u){var f=n?n+u:u,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,p=d.length,v=new Array(p);h<p;h++)v[h]=d[h].fn;return v},o.prototype.listenerCount=function(u){var f=n?n+u:u,d=this._events[f];return d?d.fn?1:d.length:0},o.prototype.emit=function(u,f,d,h,p,v){var y=n?n+u:u;if(!this._events[y])return!1;var b=this._events[y],x=arguments.length,_,E;if(b.fn){switch(b.once&&this.removeListener(u,b.fn,void 0,!0),x){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,f),!0;case 3:return b.fn.call(b.context,f,d),!0;case 4:return b.fn.call(b.context,f,d,h),!0;case 5:return b.fn.call(b.context,f,d,h,p),!0;case 6:return b.fn.call(b.context,f,d,h,p,v),!0}for(E=1,_=new Array(x-1);E<x;E++)_[E-1]=arguments[E];b.fn.apply(b.context,_)}else{var P=b.length,A;for(E=0;E<P;E++)switch(b[E].once&&this.removeListener(u,b[E].fn,void 0,!0),x){case 1:b[E].fn.call(b[E].context);break;case 2:b[E].fn.call(b[E].context,f);break;case 3:b[E].fn.call(b[E].context,f,d);break;case 4:b[E].fn.call(b[E].context,f,d,h);break;default:if(!_)for(A=1,_=new Array(x-1);A<x;A++)_[A-1]=arguments[A];b[E].fn.apply(b[E].context,_)}}return!0},o.prototype.on=function(u,f,d){return a(this,u,f,d,!1)},o.prototype.once=function(u,f,d){return a(this,u,f,d,!0)},o.prototype.removeListener=function(u,f,d,h){var p=n?n+u:u;if(!this._events[p])return this;if(!f)return s(this,p),this;var v=this._events[p];if(v.fn)v.fn===f&&(!h||v.once)&&(!d||v.context===d)&&s(this,p);else{for(var y=0,b=[],x=v.length;y<x;y++)(v[y].fn!==f||h&&!v[y].once||d&&v[y].context!==d)&&b.push(v[y]);b.length?this._events[p]=b.length===1?b[0]:b:s(this,p)}return this},o.prototype.removeAllListeners=function(u){var f;return u?(f=n?n+u:u,this._events[f]&&s(this,f)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(W8);var fke=W8.exports;const hke=Vt(fke);var l1=new hke,c1="recharts.syncMouseEvents";function jm(t){"@babel/helpers - typeof";return jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jm(t)}function pke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,K8(r.key),r)}}function gke(t,e,n){return e&&mke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function u1(t,e,n){return e=K8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K8(t){var e=yke(t,"string");return jm(e)=="symbol"?e:e+""}function yke(t,e){if(jm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var vke=function(){function t(){pke(this,t),u1(this,"activeIndex",0),u1(this,"coordinateList",[]),u1(this,"layout","horizontal")}return gke(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,a=i===void 0?null:i,s=n.container,o=s===void 0?null:s,l=n.layout,u=l===void 0?null:l,f=n.offset,d=f===void 0?null:f,h=n.mouseHandlerCallback,p=h===void 0?null:h;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=o??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,s=i.y,o=i.height,l=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,f=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=a+l+u,h=s+this.offset.top+o/2+f;this.mouseHandlerCallback({pageX:d,pageY:h})}}}])}();function xke(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&je(r)&&je(i))return!0}return!1}function bke(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function q8(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,a=t.endAngle,s=an(e,n,r,i),o=an(e,n,r,a);return{points:[s,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}function wke(t,e,n){var r,i,a,s;if(t==="horizontal")r=e.x,a=r,i=n.top,s=n.top+n.height;else if(t==="vertical")i=e.y,s=i,r=n.left,a=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var o=e.cx,l=e.cy,u=e.innerRadius,f=e.outerRadius,d=e.angle,h=an(o,l,u,d),p=an(o,l,f,d);r=h.x,i=h.y,a=p.x,s=p.y}else return q8(e);return[{x:r,y:i},{x:a,y:s}]}function Tm(t){"@babel/helpers - typeof";return Tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tm(t)}function BM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BM(Object(n),!0).forEach(function(r){_ke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _ke(t,e,n){return e=Ske(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ske(t){var e=Eke(t,"string");return Tm(e)=="symbol"?e:e+""}function Eke(t,e){if(Tm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ake(t){var e,n,r=t.element,i=t.tooltipEventType,a=t.isActive,s=t.activeCoordinate,o=t.activePayload,l=t.offset,u=t.activeTooltipIndex,f=t.tooltipAxisBandSize,d=t.layout,h=t.chartName,p=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!p||!a||!s||h!=="ScatterChart"&&i!=="axis")return null;var v,y=Mc;if(h==="ScatterChart")v=s,y=IEe;else if(h==="BarChart")v=bke(d,s,l,f),y=cT;else if(d==="radial"){var b=q8(s),x=b.cx,_=b.cy,E=b.radius,P=b.startAngle,A=b.endAngle;v={cx:x,cy:_,startAngle:P,endAngle:A,innerRadius:E,outerRadius:E},y=zF}else v={points:wke(d,s,l)},y=Mc;var j=fy(fy(fy(fy({stroke:"#ccc",pointerEvents:"none"},l),v),qe(p,!1)),{},{payload:o,payloadIndex:u,className:ht("recharts-tooltip-cursor",p.className)});return O.isValidElement(p)?O.cloneElement(p,j):O.createElement(y,j)}var jke=["item"],Tke=["children","className","width","height","style","compact","title","desc"];function gf(t){"@babel/helpers - typeof";return gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gf(t)}function ld(){return ld=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ld.apply(this,arguments)}function UM(t,e){return kke(t)||Cke(t,e)||G8(t,e)||Pke()}function Pke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cke(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);l=!0);}catch(f){u=!0,i=f}finally{try{if(!l&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function kke(t){if(Array.isArray(t))return t}function WM(t,e){if(t==null)return{};var n=Nke(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Nke(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Oke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ike(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Y8(r.key),r)}}function Dke(t,e,n){return e&&Ike(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mke(t,e,n){return e=z0(e),Rke(t,H8()?Reflect.construct(e,n||[],z0(t).constructor):e.apply(t,n))}function Rke(t,e){if(e&&(gf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $ke(t)}function $ke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function H8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(H8=function(){return!!t})()}function z0(t){return z0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},z0(t)}function Lke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T2(t,e)}function T2(t,e){return T2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},T2(t,e)}function yf(t){return Fke(t)||Vke(t)||G8(t)||zke()}function zke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G8(t,e){if(t){if(typeof t=="string")return P2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P2(t,e)}}function Vke(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Fke(t){if(Array.isArray(t))return P2(t)}function P2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function KM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ge(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KM(Object(n),!0).forEach(function(r){et(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function et(t,e,n){return e=Y8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y8(t){var e=Bke(t,"string");return gf(e)=="symbol"?e:e+""}function Bke(t,e){if(gf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Uke={xAxis:["bottom","top"],yAxis:["left","right"]},Wke={width:"100%",height:"100%"},X8={x:0,y:0};function hy(t){return t}var Kke=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},qke=function(e,n,r,i){var a=n.find(function(f){return f&&f.index===r});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,o=i.radius;return ge(ge(ge({},i),an(i.cx,i.cy,o,s)),{},{angle:s,radius:o})}var l=a.coordinate,u=i.angle;return ge(ge(ge({},i),an(i.cx,i.cy,l,u)),{},{angle:u,radius:l})}return X8},Eb=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,a=n.dataEndIndex,s=(r??[]).reduce(function(o,l){var u=l.props.data;return u&&u.length?[].concat(yf(o),yf(u)):o},[]);return s.length>0?s:e&&e.length&&je(i)&&je(a)?e.slice(i,a+1):[]};function Q8(t){return t==="number"?[0,"auto"]:void 0}var C2=function(e,n,r,i){var a=e.graphicalItems,s=e.tooltipAxis,o=Eb(n,e);return r<0||!a||!a.length||r>=o.length?null:a.reduce(function(l,u){var f,d=(f=u.props.data)!==null&&f!==void 0?f:n;d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1));var h;if(s.dataKey&&!s.allowDuplicatedCategory){var p=d===void 0?o:d;h=Lv(p,s.dataKey,i)}else h=d&&d[r]||o[r];return h?[].concat(yf(l),[IF(u,h)]):l},[])},qM=function(e,n,r,i){var a=i||{x:e.chartX,y:e.chartY},s=Kke(a,r),o=e.orderedTooltipTicks,l=e.tooltipAxis,u=e.tooltipTicks,f=n_e(s,o,u,l);if(f>=0&&u){var d=u[f]&&u[f].value,h=C2(e,n,f,d),p=qke(r,o,f,a);return{activeTooltipIndex:f,activeLabel:d,activePayload:h,activeCoordinate:p}}return null},Hke=function(e,n){var r=n.axes,i=n.graphicalItems,a=n.axisType,s=n.axisIdKey,o=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,f=e.layout,d=e.children,h=e.stackOffset,p=TF(f,a);return r.reduce(function(v,y){var b,x=y.type.defaultProps!==void 0?ge(ge({},y.type.defaultProps),y.props):y.props,_=x.type,E=x.dataKey,P=x.allowDataOverflow,A=x.allowDuplicatedCategory,j=x.scale,S=x.ticks,T=x.includeHidden,N=x[s];if(v[N])return v;var D=Eb(e.data,{graphicalItems:i.filter(function(ye){var Ee,He=s in ye.props?ye.props[s]:(Ee=ye.type.defaultProps)===null||Ee===void 0?void 0:Ee[s];return He===N}),dataStartIndex:l,dataEndIndex:u}),M=D.length,$,z,H;xke(x.domain,P,_)&&($=BS(x.domain,null,P),p&&(_==="number"||j!=="auto")&&(H=lp(D,E,"category")));var ee=Q8(_);if(!$||$.length===0){var U,Z=(U=x.domain)!==null&&U!==void 0?U:ee;if(E){if($=lp(D,E,_),_==="category"&&p){var q=qle($);A&&q?(z=$,$=A0(0,M)):A||($=fD(Z,$,y).reduce(function(ye,Ee){return ye.indexOf(Ee)>=0?ye:[].concat(yf(ye),[Ee])},[]))}else if(_==="category")A?$=$.filter(function(ye){return ye!==""&&!st(ye)}):$=fD(Z,$,y).reduce(function(ye,Ee){return ye.indexOf(Ee)>=0||Ee===""||st(Ee)?ye:[].concat(yf(ye),[Ee])},[]);else if(_==="number"){var Y=o_e(D,i.filter(function(ye){var Ee,He,ct=s in ye.props?ye.props[s]:(Ee=ye.type.defaultProps)===null||Ee===void 0?void 0:Ee[s],ft="hide"in ye.props?ye.props.hide:(He=ye.type.defaultProps)===null||He===void 0?void 0:He.hide;return ct===N&&(T||!ft)}),E,a,f);Y&&($=Y)}p&&(_==="number"||j!=="auto")&&(H=lp(D,E,"category"))}else p?$=A0(0,M):o&&o[N]&&o[N].hasStack&&_==="number"?$=h==="expand"?[0,1]:OF(o[N].stackGroups,l,u):$=jF(D,i.filter(function(ye){var Ee=s in ye.props?ye.props[s]:ye.type.defaultProps[s],He="hide"in ye.props?ye.props.hide:ye.type.defaultProps.hide;return Ee===N&&(T||!He)}),_,f,!0);if(_==="number")$=j2(d,$,N,a,S),Z&&($=BS(Z,$,P));else if(_==="category"&&Z){var le=Z,ce=$.every(function(ye){return le.indexOf(ye)>=0});ce&&($=le)}}return ge(ge({},v),{},et({},N,ge(ge({},x),{},{axisType:a,domain:$,categoricalDomain:H,duplicateDomain:z,originalDomain:(b=x.domain)!==null&&b!==void 0?b:ee,isCategorical:p,layout:f})))},{})},Gke=function(e,n){var r=n.graphicalItems,i=n.Axis,a=n.axisType,s=n.axisIdKey,o=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,f=e.layout,d=e.children,h=Eb(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:u}),p=h.length,v=TF(f,a),y=-1;return r.reduce(function(b,x){var _=x.type.defaultProps!==void 0?ge(ge({},x.type.defaultProps),x.props):x.props,E=_[s],P=Q8("number");if(!b[E]){y++;var A;return v?A=A0(0,p):o&&o[E]&&o[E].hasStack?(A=OF(o[E].stackGroups,l,u),A=j2(d,A,E,a)):(A=BS(P,jF(h,r.filter(function(j){var S,T,N=s in j.props?j.props[s]:(S=j.type.defaultProps)===null||S===void 0?void 0:S[s],D="hide"in j.props?j.props.hide:(T=j.type.defaultProps)===null||T===void 0?void 0:T.hide;return N===E&&!D}),"number",f),i.defaultProps.allowDataOverflow),A=j2(d,A,E,a)),ge(ge({},b),{},et({},E,ge(ge({axisType:a},i.defaultProps),{},{hide:!0,orientation:Bi(Uke,"".concat(a,".").concat(y%2),null),domain:A,originalDomain:P,isCategorical:v,layout:f})))}return b},{})},Yke=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,a=n.AxisComp,s=n.graphicalItems,o=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,f=e.children,d="".concat(i,"Id"),h=Ui(f,a),p={};return h&&h.length?p=Hke(e,{axes:h,graphicalItems:s,axisType:i,axisIdKey:d,stackGroups:o,dataStartIndex:l,dataEndIndex:u}):s&&s.length&&(p=Gke(e,{Axis:a,graphicalItems:s,axisType:i,axisIdKey:d,stackGroups:o,dataStartIndex:l,dataEndIndex:u})),p},Xke=function(e){var n=Go(e),r=Xs(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:Rj(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:h0(n,r)}},HM=function(e){var n=e.children,r=e.defaultShowTooltip,i=Ri(n,sf),a=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!r}},Qke=function(e){return!e||!e.length?!1:e.some(function(n){var r=to(n&&n.type);return r&&r.indexOf("Bar")>=0})},GM=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Zke=function(e,n){var r=e.props,i=e.graphicalItems,a=e.xAxisMap,s=a===void 0?{}:a,o=e.yAxisMap,l=o===void 0?{}:o,u=r.width,f=r.height,d=r.children,h=r.margin||{},p=Ri(d,sf),v=Ri(d,no),y=Object.keys(l).reduce(function(A,j){var S=l[j],T=S.orientation;return!S.mirror&&!S.hide?ge(ge({},A),{},et({},T,A[T]+S.width)):A},{left:h.left||0,right:h.right||0}),b=Object.keys(s).reduce(function(A,j){var S=s[j],T=S.orientation;return!S.mirror&&!S.hide?ge(ge({},A),{},et({},T,Bi(A,"".concat(T))+S.height)):A},{top:h.top||0,bottom:h.bottom||0}),x=ge(ge({},b),y),_=x.bottom;p&&(x.bottom+=p.props.height||sf.defaultProps.height),v&&n&&(x=a_e(x,i,r,n));var E=u-x.left-x.right,P=f-x.top-x.bottom;return ge(ge({brushBottom:_},x),{},{width:Math.max(E,0),height:Math.max(P,0)})},Jke=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},Ab=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,s=e.validateTooltipEventTypes,o=s===void 0?["axis"]:s,l=e.axisComponents,u=e.legendContent,f=e.formatAxisMap,d=e.defaultProps,h=function(x,_){var E=_.graphicalItems,P=_.stackGroups,A=_.offset,j=_.updateId,S=_.dataStartIndex,T=_.dataEndIndex,N=x.barSize,D=x.layout,M=x.barGap,$=x.barCategoryGap,z=x.maxBarSize,H=GM(D),ee=H.numericAxisName,U=H.cateAxisName,Z=Qke(E),q=[];return E.forEach(function(Y,le){var ce=Eb(x.data,{graphicalItems:[Y],dataStartIndex:S,dataEndIndex:T}),ye=Y.type.defaultProps!==void 0?ge(ge({},Y.type.defaultProps),Y.props):Y.props,Ee=ye.dataKey,He=ye.maxBarSize,ct=ye["".concat(ee,"Id")],ft=ye["".concat(U,"Id")],It={},Dt=l.reduce(function(Rt,In){var Vn=_["".concat(In.axisType,"Map")],Wr=ye["".concat(In.axisType,"Id")];Vn&&Vn[Wr]||In.axisType==="zAxis"||Yc();var Fn=Vn[Wr];return ge(ge({},Rt),{},et(et({},In.axisType,Fn),"".concat(In.axisType,"Ticks"),Xs(Fn)))},It),fe=Dt[U],Qe=Dt["".concat(U,"Ticks")],Ye=P&&P[ct]&&P[ct].hasStack&&g_e(Y,P[ct].stackGroups),he=to(Y.type).indexOf("Bar")>=0,Se=h0(fe,Qe),Le=[],_e=Z&&r_e({barSize:N,stackGroups:P,totalSize:Jke(Dt,U)});if(he){var Ze,qt,Ht=st(He)?z:He,kt=(Ze=(qt=h0(fe,Qe,!0))!==null&&qt!==void 0?qt:Ht)!==null&&Ze!==void 0?Ze:0;Le=i_e({barGap:M,barCategoryGap:$,bandSize:kt!==Se?kt:Se,sizeList:_e[ft],maxBarSize:Ht}),kt!==Se&&(Le=Le.map(function(Rt){return ge(ge({},Rt),{},{position:ge(ge({},Rt.position),{},{offset:Rt.position.offset-kt/2})})}))}var Mt=Y&&Y.type&&Y.type.getComposedData;Mt&&q.push({props:ge(ge({},Mt(ge(ge({},Dt),{},{displayedData:ce,props:x,dataKey:Ee,item:Y,bandSize:Se,barPosition:Le,offset:A,stackedData:Ye,layout:D,dataStartIndex:S,dataEndIndex:T}))),{},et(et(et({key:Y.key||"item-".concat(le)},ee,Dt[ee]),U,Dt[U]),"animationId",j)),childIndex:ice(Y,x.children),item:Y})}),q},p=function(x,_){var E=x.props,P=x.dataStartIndex,A=x.dataEndIndex,j=x.updateId;if(!sO({props:E}))return null;var S=E.children,T=E.layout,N=E.stackOffset,D=E.data,M=E.reverseStackOrder,$=GM(T),z=$.numericAxisName,H=$.cateAxisName,ee=Ui(S,r),U=p_e(D,ee,"".concat(z,"Id"),"".concat(H,"Id"),N,M),Z=l.reduce(function(ye,Ee){var He="".concat(Ee.axisType,"Map");return ge(ge({},ye),{},et({},He,Yke(E,ge(ge({},Ee),{},{graphicalItems:ee,stackGroups:Ee.axisType===z&&U,dataStartIndex:P,dataEndIndex:A}))))},{}),q=Zke(ge(ge({},Z),{},{props:E,graphicalItems:ee}),_==null?void 0:_.legendBBox);Object.keys(Z).forEach(function(ye){Z[ye]=f(E,Z[ye],q,ye.replace("Map",""),n)});var Y=Z["".concat(H,"Map")],le=Xke(Y),ce=h(E,ge(ge({},Z),{},{dataStartIndex:P,dataEndIndex:A,updateId:j,graphicalItems:ee,stackGroups:U,offset:q}));return ge(ge({formattedGraphicalItems:ce,graphicalItems:ee,offset:q,stackGroups:U},le),Z)},v=function(b){function x(_){var E,P,A;return Oke(this,x),A=Mke(this,x,[_]),et(A,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),et(A,"accessibilityManager",new vke),et(A,"handleLegendBBoxUpdate",function(j){if(j){var S=A.state,T=S.dataStartIndex,N=S.dataEndIndex,D=S.updateId;A.setState(ge({legendBBox:j},p({props:A.props,dataStartIndex:T,dataEndIndex:N,updateId:D},ge(ge({},A.state),{},{legendBBox:j}))))}}),et(A,"handleReceiveSyncEvent",function(j,S,T){if(A.props.syncId===j){if(T===A.eventEmitterSymbol&&typeof A.props.syncMethod!="function")return;A.applySyncEvent(S)}}),et(A,"handleBrushChange",function(j){var S=j.startIndex,T=j.endIndex;if(S!==A.state.dataStartIndex||T!==A.state.dataEndIndex){var N=A.state.updateId;A.setState(function(){return ge({dataStartIndex:S,dataEndIndex:T},p({props:A.props,dataStartIndex:S,dataEndIndex:T,updateId:N},A.state))}),A.triggerSyncEvent({dataStartIndex:S,dataEndIndex:T})}}),et(A,"handleMouseEnter",function(j){var S=A.getMouseInfo(j);if(S){var T=ge(ge({},S),{},{isTooltipActive:!0});A.setState(T),A.triggerSyncEvent(T);var N=A.props.onMouseEnter;nt(N)&&N(T,j)}}),et(A,"triggeredAfterMouseMove",function(j){var S=A.getMouseInfo(j),T=S?ge(ge({},S),{},{isTooltipActive:!0}):{isTooltipActive:!1};A.setState(T),A.triggerSyncEvent(T);var N=A.props.onMouseMove;nt(N)&&N(T,j)}),et(A,"handleItemMouseEnter",function(j){A.setState(function(){return{isTooltipActive:!0,activeItem:j,activePayload:j.tooltipPayload,activeCoordinate:j.tooltipPosition||{x:j.cx,y:j.cy}}})}),et(A,"handleItemMouseLeave",function(){A.setState(function(){return{isTooltipActive:!1}})}),et(A,"handleMouseMove",function(j){j.persist(),A.throttleTriggeredAfterMouseMove(j)}),et(A,"handleMouseLeave",function(j){A.throttleTriggeredAfterMouseMove.cancel();var S={isTooltipActive:!1};A.setState(S),A.triggerSyncEvent(S);var T=A.props.onMouseLeave;nt(T)&&T(S,j)}),et(A,"handleOuterEvent",function(j){var S=rce(j),T=Bi(A.props,"".concat(S));if(S&&nt(T)){var N,D;/.*touch.*/i.test(S)?D=A.getMouseInfo(j.changedTouches[0]):D=A.getMouseInfo(j),T((N=D)!==null&&N!==void 0?N:{},j)}}),et(A,"handleClick",function(j){var S=A.getMouseInfo(j);if(S){var T=ge(ge({},S),{},{isTooltipActive:!0});A.setState(T),A.triggerSyncEvent(T);var N=A.props.onClick;nt(N)&&N(T,j)}}),et(A,"handleMouseDown",function(j){var S=A.props.onMouseDown;if(nt(S)){var T=A.getMouseInfo(j);S(T,j)}}),et(A,"handleMouseUp",function(j){var S=A.props.onMouseUp;if(nt(S)){var T=A.getMouseInfo(j);S(T,j)}}),et(A,"handleTouchMove",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&A.throttleTriggeredAfterMouseMove(j.changedTouches[0])}),et(A,"handleTouchStart",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&A.handleMouseDown(j.changedTouches[0])}),et(A,"handleTouchEnd",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&A.handleMouseUp(j.changedTouches[0])}),et(A,"handleDoubleClick",function(j){var S=A.props.onDoubleClick;if(nt(S)){var T=A.getMouseInfo(j);S(T,j)}}),et(A,"handleContextMenu",function(j){var S=A.props.onContextMenu;if(nt(S)){var T=A.getMouseInfo(j);S(T,j)}}),et(A,"triggerSyncEvent",function(j){A.props.syncId!==void 0&&l1.emit(c1,A.props.syncId,j,A.eventEmitterSymbol)}),et(A,"applySyncEvent",function(j){var S=A.props,T=S.layout,N=S.syncMethod,D=A.state.updateId,M=j.dataStartIndex,$=j.dataEndIndex;if(j.dataStartIndex!==void 0||j.dataEndIndex!==void 0)A.setState(ge({dataStartIndex:M,dataEndIndex:$},p({props:A.props,dataStartIndex:M,dataEndIndex:$,updateId:D},A.state)));else if(j.activeTooltipIndex!==void 0){var z=j.chartX,H=j.chartY,ee=j.activeTooltipIndex,U=A.state,Z=U.offset,q=U.tooltipTicks;if(!Z)return;if(typeof N=="function")ee=N(q,j);else if(N==="value"){ee=-1;for(var Y=0;Y<q.length;Y++)if(q[Y].value===j.activeLabel){ee=Y;break}}var le=ge(ge({},Z),{},{x:Z.left,y:Z.top}),ce=Math.min(z,le.x+le.width),ye=Math.min(H,le.y+le.height),Ee=q[ee]&&q[ee].value,He=C2(A.state,A.props.data,ee),ct=q[ee]?{x:T==="horizontal"?q[ee].coordinate:ce,y:T==="horizontal"?ye:q[ee].coordinate}:X8;A.setState(ge(ge({},j),{},{activeLabel:Ee,activeCoordinate:ct,activePayload:He,activeTooltipIndex:ee}))}else A.setState(j)}),et(A,"renderCursor",function(j){var S,T=A.state,N=T.isTooltipActive,D=T.activeCoordinate,M=T.activePayload,$=T.offset,z=T.activeTooltipIndex,H=T.tooltipAxisBandSize,ee=A.getTooltipEventType(),U=(S=j.props.active)!==null&&S!==void 0?S:N,Z=A.props.layout,q=j.key||"_recharts-cursor";return F.createElement(Ake,{key:q,activeCoordinate:D,activePayload:M,activeTooltipIndex:z,chartName:n,element:j,isActive:U,layout:Z,offset:$,tooltipAxisBandSize:H,tooltipEventType:ee})}),et(A,"renderPolarAxis",function(j,S,T){var N=Bi(j,"type.axisType"),D=Bi(A.state,"".concat(N,"Map")),M=j.type.defaultProps,$=M!==void 0?ge(ge({},M),j.props):j.props,z=D&&D[$["".concat(N,"Id")]];return O.cloneElement(j,ge(ge({},z),{},{className:ht(N,z.className),key:j.key||"".concat(S,"-").concat(T),ticks:Xs(z,!0)}))}),et(A,"renderPolarGrid",function(j){var S=j.props,T=S.radialLines,N=S.polarAngles,D=S.polarRadius,M=A.state,$=M.radiusAxisMap,z=M.angleAxisMap,H=Go($),ee=Go(z),U=ee.cx,Z=ee.cy,q=ee.innerRadius,Y=ee.outerRadius;return O.cloneElement(j,{polarAngles:Array.isArray(N)?N:Xs(ee,!0).map(function(le){return le.coordinate}),polarRadius:Array.isArray(D)?D:Xs(H,!0).map(function(le){return le.coordinate}),cx:U,cy:Z,innerRadius:q,outerRadius:Y,key:j.key||"polar-grid",radialLines:T})}),et(A,"renderLegend",function(){var j=A.state.formattedGraphicalItems,S=A.props,T=S.children,N=S.width,D=S.height,M=A.props.margin||{},$=N-(M.left||0)-(M.right||0),z=EF({children:T,formattedGraphicalItems:j,legendWidth:$,legendContent:u});if(!z)return null;var H=z.item,ee=WM(z,jke);return O.cloneElement(H,ge(ge({},ee),{},{chartWidth:N,chartHeight:D,margin:M,onBBoxUpdate:A.handleLegendBBoxUpdate}))}),et(A,"renderTooltip",function(){var j,S=A.props,T=S.children,N=S.accessibilityLayer,D=Ri(T,Qt);if(!D)return null;var M=A.state,$=M.isTooltipActive,z=M.activeCoordinate,H=M.activePayload,ee=M.activeLabel,U=M.offset,Z=(j=D.props.active)!==null&&j!==void 0?j:$;return O.cloneElement(D,{viewBox:ge(ge({},U),{},{x:U.left,y:U.top}),active:Z,label:ee,payload:Z?H:[],coordinate:z,accessibilityLayer:N})}),et(A,"renderBrush",function(j){var S=A.props,T=S.margin,N=S.data,D=A.state,M=D.offset,$=D.dataStartIndex,z=D.dataEndIndex,H=D.updateId;return O.cloneElement(j,{key:j.key||"_recharts-brush",onChange:ly(A.handleBrushChange,j.props.onChange),data:N,x:je(j.props.x)?j.props.x:M.left,y:je(j.props.y)?j.props.y:M.top+M.height+M.brushBottom-(T.bottom||0),width:je(j.props.width)?j.props.width:M.width,startIndex:$,endIndex:z,updateId:"brush-".concat(H)})}),et(A,"renderReferenceElement",function(j,S,T){if(!j)return null;var N=A,D=N.clipPathId,M=A.state,$=M.xAxisMap,z=M.yAxisMap,H=M.offset,ee=j.type.defaultProps||{},U=j.props,Z=U.xAxisId,q=Z===void 0?ee.xAxisId:Z,Y=U.yAxisId,le=Y===void 0?ee.yAxisId:Y;return O.cloneElement(j,{key:j.key||"".concat(S,"-").concat(T),xAxis:$[q],yAxis:z[le],viewBox:{x:H.left,y:H.top,width:H.width,height:H.height},clipPathId:D})}),et(A,"renderActivePoints",function(j){var S=j.item,T=j.activePoint,N=j.basePoint,D=j.childIndex,M=j.isRange,$=[],z=S.props.key,H=S.item.type.defaultProps!==void 0?ge(ge({},S.item.type.defaultProps),S.item.props):S.item.props,ee=H.activeDot,U=H.dataKey,Z=ge(ge({index:D,dataKey:U,cx:T.x,cy:T.y,r:4,fill:lT(S.item),strokeWidth:2,stroke:"#fff",payload:T.payload,value:T.value},qe(ee,!1)),zv(ee));return $.push(x.renderActiveDot(ee,Z,"".concat(z,"-activePoint-").concat(D))),N?$.push(x.renderActiveDot(ee,ge(ge({},Z),{},{cx:N.x,cy:N.y}),"".concat(z,"-basePoint-").concat(D))):M&&$.push(null),$}),et(A,"renderGraphicChild",function(j,S,T){var N=A.filterFormatItem(j,S,T);if(!N)return null;var D=A.getTooltipEventType(),M=A.state,$=M.isTooltipActive,z=M.tooltipAxis,H=M.activeTooltipIndex,ee=M.activeLabel,U=A.props.children,Z=Ri(U,Qt),q=N.props,Y=q.points,le=q.isRange,ce=q.baseLine,ye=N.item.type.defaultProps!==void 0?ge(ge({},N.item.type.defaultProps),N.item.props):N.item.props,Ee=ye.activeDot,He=ye.hide,ct=ye.activeBar,ft=ye.activeShape,It=!!(!He&&$&&Z&&(Ee||ct||ft)),Dt={};D!=="axis"&&Z&&Z.props.trigger==="click"?Dt={onClick:ly(A.handleItemMouseEnter,j.props.onClick)}:D!=="axis"&&(Dt={onMouseLeave:ly(A.handleItemMouseLeave,j.props.onMouseLeave),onMouseEnter:ly(A.handleItemMouseEnter,j.props.onMouseEnter)});var fe=O.cloneElement(j,ge(ge({},N.props),Dt));function Qe(In){return typeof z.dataKey=="function"?z.dataKey(In.payload):null}if(It)if(H>=0){var Ye,he;if(z.dataKey&&!z.allowDuplicatedCategory){var Se=typeof z.dataKey=="function"?Qe:"payload.".concat(z.dataKey.toString());Ye=Lv(Y,Se,ee),he=le&&ce&&Lv(ce,Se,ee)}else Ye=Y==null?void 0:Y[H],he=le&&ce&&ce[H];if(ft||ct){var Le=j.props.activeIndex!==void 0?j.props.activeIndex:H;return[O.cloneElement(j,ge(ge(ge({},N.props),Dt),{},{activeIndex:Le})),null,null]}if(!st(Ye))return[fe].concat(yf(A.renderActivePoints({item:N,activePoint:Ye,basePoint:he,childIndex:H,isRange:le})))}else{var _e,Ze=(_e=A.getItemByXY(A.state.activeCoordinate))!==null&&_e!==void 0?_e:{graphicalItem:fe},qt=Ze.graphicalItem,Ht=qt.item,kt=Ht===void 0?j:Ht,Mt=qt.childIndex,Rt=ge(ge(ge({},N.props),Dt),{},{activeIndex:Mt});return[O.cloneElement(kt,Rt),null,null]}return le?[fe,null,null]:[fe,null]}),et(A,"renderCustomized",function(j,S,T){return O.cloneElement(j,ge(ge({key:"recharts-customized-".concat(T)},A.props),A.state))}),et(A,"renderMap",{CartesianGrid:{handler:hy,once:!0},ReferenceArea:{handler:A.renderReferenceElement},ReferenceLine:{handler:hy},ReferenceDot:{handler:A.renderReferenceElement},XAxis:{handler:hy},YAxis:{handler:hy},Brush:{handler:A.renderBrush,once:!0},Bar:{handler:A.renderGraphicChild},Line:{handler:A.renderGraphicChild},Area:{handler:A.renderGraphicChild},Radar:{handler:A.renderGraphicChild},RadialBar:{handler:A.renderGraphicChild},Scatter:{handler:A.renderGraphicChild},Pie:{handler:A.renderGraphicChild},Funnel:{handler:A.renderGraphicChild},Tooltip:{handler:A.renderCursor,once:!0},PolarGrid:{handler:A.renderPolarGrid,once:!0},PolarAngleAxis:{handler:A.renderPolarAxis},PolarRadiusAxis:{handler:A.renderPolarAxis},Customized:{handler:A.renderCustomized}}),A.clipPathId="".concat((E=_.id)!==null&&E!==void 0?E:lu("recharts"),"-clip"),A.throttleTriggeredAfterMouseMove=SV(A.triggeredAfterMouseMove,(P=_.throttleDelay)!==null&&P!==void 0?P:1e3/60),A.state={},A}return Lke(x,b),Dke(x,[{key:"componentDidMount",value:function(){var E,P;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(E=this.props.margin.left)!==null&&E!==void 0?E:0,top:(P=this.props.margin.top)!==null&&P!==void 0?P:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var E=this.props,P=E.children,A=E.data,j=E.height,S=E.layout,T=Ri(P,Qt);if(T){var N=T.props.defaultIndex;if(!(typeof N!="number"||N<0||N>this.state.tooltipTicks.length-1)){var D=this.state.tooltipTicks[N]&&this.state.tooltipTicks[N].value,M=C2(this.state,A,N,D),$=this.state.tooltipTicks[N].coordinate,z=(this.state.offset.top+j)/2,H=S==="horizontal",ee=H?{x:$,y:z}:{y:$,x:z},U=this.state.formattedGraphicalItems.find(function(q){var Y=q.item;return Y.type.name==="Scatter"});U&&(ee=ge(ge({},ee),U.props.points[N].tooltipPosition),M=U.props.points[N].tooltipPayload);var Z={activeTooltipIndex:N,isTooltipActive:!0,activeLabel:D,activePayload:M,activeCoordinate:ee};this.setState(Z),this.renderCursor(T),this.accessibilityManager.setIndex(N)}}}},{key:"getSnapshotBeforeUpdate",value:function(E,P){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==P.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==E.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==E.margin){var A,j;this.accessibilityManager.setDetails({offset:{left:(A=this.props.margin.left)!==null&&A!==void 0?A:0,top:(j=this.props.margin.top)!==null&&j!==void 0?j:0}})}return null}},{key:"componentDidUpdate",value:function(E){rS([Ri(E.children,Qt)],[Ri(this.props.children,Qt)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var E=Ri(this.props.children,Qt);if(E&&typeof E.props.shared=="boolean"){var P=E.props.shared?"axis":"item";return o.indexOf(P)>=0?P:a}return a}},{key:"getMouseInfo",value:function(E){if(!this.container)return null;var P=this.container,A=P.getBoundingClientRect(),j=k0e(A),S={chartX:Math.round(E.pageX-j.left),chartY:Math.round(E.pageY-j.top)},T=A.width/P.offsetWidth||1,N=this.inRange(S.chartX,S.chartY,T);if(!N)return null;var D=this.state,M=D.xAxisMap,$=D.yAxisMap,z=this.getTooltipEventType(),H=qM(this.state,this.props.data,this.props.layout,N);if(z!=="axis"&&M&&$){var ee=Go(M).scale,U=Go($).scale,Z=ee&&ee.invert?ee.invert(S.chartX):null,q=U&&U.invert?U.invert(S.chartY):null;return ge(ge({},S),{},{xValue:Z,yValue:q},H)}return H?ge(ge({},S),H):null}},{key:"inRange",value:function(E,P){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,j=this.props.layout,S=E/A,T=P/A;if(j==="horizontal"||j==="vertical"){var N=this.state.offset,D=S>=N.left&&S<=N.left+N.width&&T>=N.top&&T<=N.top+N.height;return D?{x:S,y:T}:null}var M=this.state,$=M.angleAxisMap,z=M.radiusAxisMap;if($&&z){var H=Go($);return mD({x:S,y:T},H)}return null}},{key:"parseEventsOfWrapper",value:function(){var E=this.props.children,P=this.getTooltipEventType(),A=Ri(E,Qt),j={};A&&P==="axis"&&(A.props.trigger==="click"?j={onClick:this.handleClick}:j={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var S=zv(this.props,this.handleOuterEvent);return ge(ge({},S),j)}},{key:"addListener",value:function(){l1.on(c1,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){l1.removeListener(c1,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(E,P,A){for(var j=this.state.formattedGraphicalItems,S=0,T=j.length;S<T;S++){var N=j[S];if(N.item===E||N.props.key===E.key||P===to(N.item.type)&&A===N.childIndex)return N}return null}},{key:"renderClipPath",value:function(){var E=this.clipPathId,P=this.state.offset,A=P.left,j=P.top,S=P.height,T=P.width;return F.createElement("defs",null,F.createElement("clipPath",{id:E},F.createElement("rect",{x:A,y:j,height:S,width:T})))}},{key:"getXScales",value:function(){var E=this.state.xAxisMap;return E?Object.entries(E).reduce(function(P,A){var j=UM(A,2),S=j[0],T=j[1];return ge(ge({},P),{},et({},S,T.scale))},{}):null}},{key:"getYScales",value:function(){var E=this.state.yAxisMap;return E?Object.entries(E).reduce(function(P,A){var j=UM(A,2),S=j[0],T=j[1];return ge(ge({},P),{},et({},S,T.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(E){var P;return(P=this.state.xAxisMap)===null||P===void 0||(P=P[E])===null||P===void 0?void 0:P.scale}},{key:"getYScaleByAxisId",value:function(E){var P;return(P=this.state.yAxisMap)===null||P===void 0||(P=P[E])===null||P===void 0?void 0:P.scale}},{key:"getItemByXY",value:function(E){var P=this.state,A=P.formattedGraphicalItems,j=P.activeItem;if(A&&A.length)for(var S=0,T=A.length;S<T;S++){var N=A[S],D=N.props,M=N.item,$=M.type.defaultProps!==void 0?ge(ge({},M.type.defaultProps),M.props):M.props,z=to(M.type);if(z==="Bar"){var H=(D.data||[]).find(function(q){return hEe(E,q)});if(H)return{graphicalItem:N,payload:H}}else if(z==="RadialBar"){var ee=(D.data||[]).find(function(q){return mD(E,q)});if(ee)return{graphicalItem:N,payload:ee}}else if(gb(N,j)||yb(N,j)||wm(N,j)){var U=tje({graphicalItem:N,activeTooltipItem:j,itemData:$.data}),Z=$.activeIndex===void 0?U:$.activeIndex;return{graphicalItem:ge(ge({},N),{},{childIndex:Z}),payload:wm(N,j)?$.data[U]:N.props.data[U]}}}return null}},{key:"render",value:function(){var E=this;if(!sO(this))return null;var P=this.props,A=P.children,j=P.className,S=P.width,T=P.height,N=P.style,D=P.compact,M=P.title,$=P.desc,z=WM(P,Tke),H=qe(z,!1);if(D)return F.createElement(SM,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},F.createElement(aS,ld({},H,{width:S,height:T,title:M,desc:$}),this.renderClipPath(),lO(A,this.renderMap)));if(this.props.accessibilityLayer){var ee,U;H.tabIndex=(ee=this.props.tabIndex)!==null&&ee!==void 0?ee:0,H.role=(U=this.props.role)!==null&&U!==void 0?U:"application",H.onKeyDown=function(q){E.accessibilityManager.keyboardEvent(q)},H.onFocus=function(){E.accessibilityManager.focus()}}var Z=this.parseEventsOfWrapper();return F.createElement(SM,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},F.createElement("div",ld({className:ht("recharts-wrapper",j),style:ge({position:"relative",cursor:"default",width:S,height:T},N)},Z,{ref:function(Y){E.container=Y}}),F.createElement(aS,ld({},H,{width:S,height:T,title:M,desc:$,style:Wke}),this.renderClipPath(),lO(A,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(O.Component);et(v,"displayName",n),et(v,"defaultProps",ge({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),et(v,"getDerivedStateFromProps",function(b,x){var _=b.dataKey,E=b.data,P=b.children,A=b.width,j=b.height,S=b.layout,T=b.stackOffset,N=b.margin,D=x.dataStartIndex,M=x.dataEndIndex;if(x.updateId===void 0){var $=HM(b);return ge(ge(ge({},$),{},{updateId:0},p(ge(ge({props:b},$),{},{updateId:0}),x)),{},{prevDataKey:_,prevData:E,prevWidth:A,prevHeight:j,prevLayout:S,prevStackOffset:T,prevMargin:N,prevChildren:P})}if(_!==x.prevDataKey||E!==x.prevData||A!==x.prevWidth||j!==x.prevHeight||S!==x.prevLayout||T!==x.prevStackOffset||!bd(N,x.prevMargin)){var z=HM(b),H={chartX:x.chartX,chartY:x.chartY,isTooltipActive:x.isTooltipActive},ee=ge(ge({},qM(x,E,S)),{},{updateId:x.updateId+1}),U=ge(ge(ge({},z),H),ee);return ge(ge(ge({},U),p(ge({props:b},U),x)),{},{prevDataKey:_,prevData:E,prevWidth:A,prevHeight:j,prevLayout:S,prevStackOffset:T,prevMargin:N,prevChildren:P})}if(!rS(P,x.prevChildren)){var Z,q,Y,le,ce=Ri(P,sf),ye=ce&&(Z=(q=ce.props)===null||q===void 0?void 0:q.startIndex)!==null&&Z!==void 0?Z:D,Ee=ce&&(Y=(le=ce.props)===null||le===void 0?void 0:le.endIndex)!==null&&Y!==void 0?Y:M,He=ye!==D||Ee!==M,ct=!st(E),ft=ct&&!He?x.updateId:x.updateId+1;return ge(ge({updateId:ft},p(ge(ge({props:b},x),{},{updateId:ft,dataStartIndex:ye,dataEndIndex:Ee}),x)),{},{prevChildren:P,dataStartIndex:ye,dataEndIndex:Ee})}return null}),et(v,"renderActiveDot",function(b,x,_){var E;return O.isValidElement(b)?E=O.cloneElement(b,x):nt(b)?E=b(x):E=F.createElement(ug,x),F.createElement(xt,{className:"recharts-active-dot",key:_},E)});var y=O.forwardRef(function(x,_){return F.createElement(v,ld({},x,{ref:_}))});return y.displayName=v.displayName,y},Z8=Ab({chartName:"LineChart",GraphicalChild:Qc,axisComponents:[{axisType:"xAxis",AxisComp:kn},{axisType:"yAxis",AxisComp:Nn}],formatAxisMap:uT}),xi=Ab({chartName:"BarChart",GraphicalChild:Yn,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:kn},{axisType:"yAxis",AxisComp:Nn}],formatAxisMap:uT}),eNe=Ab({chartName:"PieChart",GraphicalChild:jo,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:mb},{axisType:"radiusAxis",AxisComp:hb}],formatAxisMap:j_e,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),tNe=Ab({chartName:"AreaChart",GraphicalChild:Vl,axisComponents:[{axisType:"xAxis",AxisComp:kn},{axisType:"yAxis",AxisComp:Nn}],formatAxisMap:uT});const nNe=t=>{const[e,n]=O.useState([]),[r,i]=O.useState([]),[a,s]=O.useState(!0);return O.useEffect(()=>{if(!t)return;(async()=>{s(!0);try{const u=T$(),[f,d]=await Promise.all([u.weighings.where("goatId").equals(t).toArray(),u.parturitions.where("goatId").equals(t).toArray()]);n(f),i(d.sort((h,p)=>new Date(h.parturitionDate).getTime()-new Date(p.parturitionDate).getTime()))}catch(u){console.error(`Error al cargar datos para ${t}:`,u)}finally{s(!1)}})()},[t]),{...O.useMemo(()=>{if(r.length===0)return{allLactations:[],parturitionIntervals:[],lastWeighingDate:null};const l=r.map((d,h)=>{const p=new Date(d.parturitionDate),v=h<r.length-1?new Date(r[h+1].parturitionDate):new Date(9999,11,31),y=e.filter(j=>{const S=new Date(j.date);return S>=p&&S<v}),b=y.map(j=>({del:Jm(d.parturitionDate,j.date),kg:j.kg})).sort((j,S)=>j.del-S.del),x=y.reduce((j,S)=>j+S.kg,0),_=y.length>0?x/y.length:0,E=b.reduce((j,S)=>S.kg>j.kg?S:j,{kg:0,del:0}),P=b[b.length-1],A=P?P.del:0;return{parturitionDate:d.parturitionDate,weighings:y,lactationCurve:b,averageProduction:_,peakProduction:E,totalDays:A}}),u=r.slice(1).map((d,h)=>{const p=r[h],v=new Date(d.parturitionDate).getTime()-new Date(p.parturitionDate).getTime();return{period:`${p.parturitionDate.substring(0,4)} - ${d.parturitionDate.substring(0,4)}`,days:Math.round(v/(1e3*60*60*24))}}),f=e.sort((d,h)=>new Date(h.date).getTime()-new Date(d.date).getTime())[0];return{allLactations:l,parturitionIntervals:u,lastWeighingDate:(f==null?void 0:f.date)||null}},[e,r]),isLoading:a}},rNe=(t,e,n,r)=>{const[i,a]=O.useState([]),[s,o]=O.useState(!1);return O.useEffect(()=>{if(!t||!e.length){a([]);return}(()=>{o(!0);let u=[];if(t==="PRIMIPARAS_HISTORICAL"){const p=n.reduce((v,y)=>(v[y.goatId]=(v[y.goatId]||0)+1,v),{});u=e.filter(v=>p[v.id]===1).map(v=>v.id)}else if(t==="MULTIPARAS_HISTORICAL"){const p=n.reduce((v,y)=>(v[y.goatId]=(v[y.goatId]||0)+1,v),{});u=e.filter(v=>p[v.id]>1).map(v=>v.id)}const f=r.filter(p=>u.includes(p.goatId)),d={};f.forEach(p=>{const v=n.filter(b=>b.goatId===p.goatId&&new Date(p.date)>=new Date(b.parturitionDate)).sort((b,x)=>new Date(x.parturitionDate).getTime()-new Date(b.parturitionDate).getTime())[0];if(!v)return;const y=Jm(v.parturitionDate,p.date);d[y]||(d[y]={totalKg:0,count:0}),d[y].totalKg+=p.kg,d[y].count++});const h=Object.entries(d).map(([p,v])=>({del:parseInt(p),kg:v.totalKg/v.count})).sort((p,v)=>p.del-v.del);a(h),o(!1)})()},[t,e,n,r]),{comparativeCurve:i,isLoading:s}},vf=({active:t,payload:e,label:n})=>{if(t&&e&&e.length){const r=e[0].payload.name==="Promedio Rebao";return"range"in e[0].payload?c.jsxs("div",{className:"bg-black/50 backdrop-blur-xl p-3 rounded-lg border border-brand-border text-white",children:[c.jsxs("p",{className:"label text-brand-light-gray text-sm",children:["Rango: ",e[0].payload.range," Kg"]}),c.jsxs("p",{className:"font-bold text-base",children:["N de Cabras: ",e[0].value]})]}):c.jsxs("div",{className:"bg-black/50 backdrop-blur-xl p-3 rounded-lg border border-brand-border text-white",children:[c.jsx("p",{className:"label text-brand-light-gray text-sm",children:r?`Das en Leche (DEL): ${n}`:`DEL: ${n}`}),c.jsx("p",{className:"font-bold text-base",children:r?`Promedio: ${e[0].value.toFixed(2)} Kg`:`Produccin: ${e[0].value.toFixed(2)} Kg`})]})}return null},py=({active:t,payload:e,label:n,context:r})=>{if(t&&e&&e.length){let i="",a="";switch(r){case"average":i=`Lactancia del ${n}`,a=`Promedio: ${e[0].value.toFixed(2)} Kg`;break;case"peak":i=`Lactancia del ${n}`,a=`Pico: ${e[0].value.toFixed(2)} Kg`;break;case"del":i=`Lactancia del ${n}`,a=`Duracin: ${e[0].value} das`;break;case"interval":i=`Perodo ${n}`,a=`Intervalo: ${e[0].value} das`;break}return c.jsxs("div",{className:"bg-black/60 backdrop-blur-xl p-3 rounded-lg border border-zinc-700 text-white",children:[c.jsx("p",{className:"label text-zinc-400 text-sm font-medium",children:i}),c.jsx("p",{className:"font-semibold text-base",children:a})]})}return null};function iNe({animalId:t,onBack:e,navigateTo:n}){const{animals:r,parturitions:i,weighings:a,startDryingProcess:s,setLactationAsDry:o}=at(),{allLactations:l,parturitionIntervals:u,lastWeighingDate:f,isLoading:d}=nNe(t),[h,p]=O.useState(null),[v,y]=O.useState(null),[b,x]=O.useState(!1),{comparativeCurve:_,isLoading:E}=rNe(v,r,i,a),P=O.useMemo(()=>{if(l.length===0)return null;const $=l[l.length-1],z=i.find(H=>H.parturitionDate===$.parturitionDate&&H.goatId===t);return{...$,id:z==null?void 0:z.id,status:z==null?void 0:z.status}},[l,i,t]),A=O.useMemo(()=>P?Jm(P.parturitionDate,new Date().toISOString().split("T")[0]):"N/A",[P]),j=O.useMemo(()=>({average:l.map($=>({name:new Date($.parturitionDate).getFullYear().toString(),value:$.averageProduction})),peak:l.map($=>({name:new Date($.parturitionDate).getFullYear().toString(),value:$.peakProduction.kg})),del:l.map($=>({name:new Date($.parturitionDate).getFullYear().toString(),value:$.totalDays})),interval:u.map($=>({name:$.period,value:$.days}))}),[l,u]);if(d)return c.jsx("div",{className:"text-center p-10",children:c.jsxs("h1",{className:"text-2xl text-zinc-400",children:["Cargando perfil de lactancia de ",t,"..."]})});const S=l.length>0?l[l.length-1]:null,T=u.length>0?u[u.length-1].days:0,N=l.length===1,D=()=>{const $=!b;x($),$||y(null)},M=$=>{y(z=>z===$?null:$)};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-4xl mx-auto space-y-4 animate-fade-in",children:[c.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[c.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(or,{size:24})}),c.jsxs("div",{className:"text-center flex-grow",children:[c.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white",children:t}),c.jsx("p",{className:"text-xl text-zinc-400",children:"Perfil de Lactancia"})]}),c.jsx("button",{onClick:()=>n({name:"rebano-profile",animalId:t}),className:"p-2 -mr-2 text-zinc-400 hover:text-white transition-colors",title:"Ir a la ficha general del animal",children:c.jsx(AY,{size:24})})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[c.jsxs("button",{onClick:()=>p("average"),className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-amber transition-colors",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[c.jsx(qm,{size:14}),c.jsx("span",{children:"Promedio"})]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[(S==null?void 0:S.averageProduction.toFixed(2))||"N/A"," ",c.jsx("span",{className:"text-lg text-zinc-400",children:"Kg"})]})]}),c.jsxs("button",{onClick:()=>p("peak"),className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-amber transition-colors",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[c.jsx(kl,{size:14}),c.jsx("span",{children:"Pico Prod."})]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[(S==null?void 0:S.peakProduction.kg.toFixed(2))||"N/A"," ",c.jsx("span",{className:"text-lg text-zinc-400",children:"Kg"})]})]}),c.jsxs("button",{onClick:()=>p("del"),className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-amber transition-colors",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[c.jsx(O$,{size:14}),c.jsx("span",{children:"DEL"})]}),c.jsx("p",{className:"text-2xl font-bold text-white",children:A})]}),c.jsxs("button",{onClick:()=>p("interval"),className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-amber transition-colors",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[c.jsx(yY,{size:14}),c.jsx("span",{children:"Int. Partos"})]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[T," ",c.jsx("span",{className:"text-lg text-zinc-400",children:"das"})]})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[c.jsx(JG,{size:14}),c.jsx("span",{children:"lt. Pesaje"})]}),c.jsx("p",{className:"text-xl font-bold text-white",children:f?new Date(f+"T00:00:00").toLocaleDateString():"N/A"})]})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border relative",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center border-b border-brand-border pb-2 mb-4 gap-2",children:[c.jsxs("h3",{className:"text-zinc-400 font-semibold text-xs uppercase",children:["Curva de Lactancia Actual (Parto: ",(S==null?void 0:S.parturitionDate)||"N/A",")"]}),c.jsxs("div",{className:"flex items-center space-x-2 self-end sm:self-center",children:[c.jsx("span",{className:"text-xs font-semibold text-zinc-300",children:"Comparar:"}),c.jsx("button",{onClick:D,className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${b?"bg-amber-500":"bg-zinc-700"}`,children:c.jsx("span",{"aria-hidden":"true",className:`inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${b?"translate-x-5":"translate-x-0"}`})}),b&&c.jsxs("div",{className:"flex items-center space-x-2 animate-fade-in",children:[c.jsx("button",{onClick:()=>M("PRIMIPARAS_HISTORICAL"),className:`px-2 py-1 text-xs rounded-md transition-colors ${v==="PRIMIPARAS_HISTORICAL"?"bg-amber-500 text-black font-semibold":"bg-zinc-700/50 text-zinc-300 hover:bg-zinc-600/50"} ${N?"ring-2 ring-amber-400":""}`,children:"vs Primparas"}),c.jsx("button",{onClick:()=>M("MULTIPARAS_HISTORICAL"),className:`px-2 py-1 text-xs rounded-md transition-colors ${v==="MULTIPARAS_HISTORICAL"?"bg-amber-500 text-black font-semibold":"bg-zinc-700/50 text-zinc-300 hover:bg-zinc-600/50"} ${N?"":"ring-2 ring-amber-400"}`,children:"vs Multparas"})]})]})]}),c.jsxs("div",{className:"w-full h-56 -ml-4",children:[c.jsx(mr,{children:c.jsxs(Z8,{margin:{top:5,right:20,left:-10,bottom:5},children:[c.jsx(Gf,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),c.jsx(kn,{dataKey:"del",type:"number",domain:["dataMin","dataMax"],tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(Nn,{orientation:"right",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(Qt,{content:c.jsx(vf,{})}),c.jsx(no,{verticalAlign:"top",height:36,iconType:"plainline"}),c.jsx(Qc,{type:"monotone",data:S==null?void 0:S.lactationCurve,dataKey:"kg",name:t,stroke:"#FBBF24",strokeWidth:2.5,dot:!1}),v&&!E&&c.jsx(Qc,{type:"monotone",data:_,dataKey:"kg",name:"Promedio del Grupo",stroke:"#34d399",strokeWidth:2,strokeDasharray:"5 5",dot:!1})]})}),E&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 backdrop-blur-sm rounded-xl text-white",children:"Calculando comparacin..."})]})]}),(P==null?void 0:P.id)&&c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("h3",{className:"text-zinc-400 font-semibold text-xs uppercase mb-3",children:"Gestin de Lactancia Actual"}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[P.status==="activa"&&c.jsxs("button",{onClick:()=>s(P.id),className:"w-full flex items-center justify-center space-x-2 bg-blue-600/80 hover:bg-blue-500/80 text-white font-semibold py-3 px-4 rounded-xl transition-colors",children:[c.jsx(_A,{size:20}),c.jsx("span",{children:"Iniciar Proceso de Secado"})]}),P.status==="en-secado"&&c.jsxs("button",{onClick:()=>o(P.id),className:"w-full flex items-center justify-center space-x-2 bg-gray-600/80 hover:bg-gray-500/80 text-white font-semibold py-3 px-4 rounded-xl transition-colors",children:[c.jsx(dA,{size:20}),c.jsx("span",{children:"Declarar Lactancia como Seca"})]}),P.status==="seca"&&c.jsx("div",{className:"w-full text-center p-3 bg-black/20 rounded-xl",children:c.jsx("p",{className:"font-semibold text-green-400",children:"Esta lactancia ha finalizado."})})]}),P.status==="en-secado"&&c.jsx("p",{className:"text-center text-xs text-zinc-400 mt-2",children:"El animal est en su perodo de secado."})]})]}),c.jsx(yt,{isOpen:h==="average",onClose:()=>p(null),title:"Historial de Promedios",children:c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"w-full h-48 -ml-4",children:c.jsx(mr,{children:c.jsxs(xi,{data:j.average,margin:{top:5,right:20,left:-20,bottom:0},children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:"modalBarGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[c.jsx("stop",{offset:"0%",stopColor:"#FBBF24",stopOpacity:.8}),c.jsx("stop",{offset:"100%",stopColor:"#FBBF24",stopOpacity:.2})]})}),c.jsx(kn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1}),c.jsx(Nn,{orientation:"right",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1,width:40}),c.jsx(Qt,{content:c.jsx(py,{context:"average"}),cursor:{fill:"rgba(255, 255, 255, 0.1)"}}),c.jsx(Yn,{dataKey:"value",radius:[4,4,0,0],fill:"url(#modalBarGradient)"})]})})}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Detalles por Lactancia"}),c.jsx("ul",{className:"space-y-1",children:l.slice().reverse().map($=>c.jsxs("li",{className:"flex justify-between items-center p-2 rounded-md hover:bg-white/5",children:[c.jsxs("span",{className:"text-base font-medium text-zinc-200",children:["Parto del ",$.parturitionDate]}),c.jsxs("span",{className:"text-base font-semibold text-white",children:[$.averageProduction.toFixed(2)," Kg"]})]},$.parturitionDate))})]})]})}),c.jsx(yt,{isOpen:h==="peak",onClose:()=>p(null),title:"Historial de Picos de Produccin",children:c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"w-full h-48 -ml-4",children:c.jsx(mr,{children:c.jsxs(xi,{data:j.peak,margin:{top:5,right:20,left:-20,bottom:0},children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:"modalBarGradientPeak",x1:"0",y1:"0",x2:"0",y2:"1",children:[c.jsx("stop",{offset:"0%",stopColor:"#10B981",stopOpacity:.8}),c.jsx("stop",{offset:"100%",stopColor:"#10B981",stopOpacity:.2})]})}),c.jsx(kn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1}),c.jsx(Nn,{orientation:"right",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1,width:40}),c.jsx(Qt,{content:c.jsx(py,{context:"peak"}),cursor:{fill:"rgba(255, 255, 255, 0.1)"}}),c.jsx(Yn,{dataKey:"value",radius:[4,4,0,0],fill:"url(#modalBarGradientPeak)"})]})})}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Detalles por Lactancia"}),c.jsx("ul",{className:"space-y-1",children:l.slice().reverse().map($=>c.jsxs("li",{className:"flex justify-between items-center p-2 rounded-md hover:bg-white/5",children:[c.jsxs("span",{className:"text-base font-medium text-zinc-200",children:["Parto del ",$.parturitionDate]}),c.jsxs("span",{className:"text-base font-semibold text-white",children:[$.peakProduction.kg.toFixed(2)," Kg ",c.jsxs("span",{className:"font-normal text-zinc-400",children:["(Da ",$.peakProduction.del,")"]})]})]},$.parturitionDate))})]})]})}),c.jsx(yt,{isOpen:h==="del",onClose:()=>p(null),title:"Historial de Duracin de Lactancias",children:c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"w-full h-48 -ml-4",children:c.jsx(mr,{children:c.jsxs(xi,{data:j.del,margin:{top:5,right:20,left:-20,bottom:0},children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:"modalBarGradientDel",x1:"0",y1:"0",x2:"0",y2:"1",children:[c.jsx("stop",{offset:"0%",stopColor:"#3B82F6",stopOpacity:.8}),c.jsx("stop",{offset:"100%",stopColor:"#3B82F6",stopOpacity:.2})]})}),c.jsx(kn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1}),c.jsx(Nn,{orientation:"right",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1,width:40}),c.jsx(Qt,{content:c.jsx(py,{context:"del"}),cursor:{fill:"rgba(255, 255, 255, 0.1)"}}),c.jsx(Yn,{dataKey:"value",radius:[4,4,0,0],fill:"url(#modalBarGradientDel)"})]})})}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Detalles por Lactancia"}),c.jsx("ul",{className:"space-y-1",children:l.slice().reverse().map($=>c.jsxs("li",{className:"flex justify-between items-center p-2 rounded-md hover:bg-white/5",children:[c.jsxs("span",{className:"text-base font-medium text-zinc-200",children:["Parto del ",$.parturitionDate]}),c.jsxs("span",{className:"text-base font-semibold text-white",children:[$.totalDays," das"]})]},$.parturitionDate))})]})]})}),c.jsx(yt,{isOpen:h==="interval",onClose:()=>p(null),title:"Historial de Intervalos entre Partos",children:c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"w-full h-48 -ml-4",children:c.jsx(mr,{children:c.jsxs(xi,{data:j.interval,margin:{top:5,right:20,left:-20,bottom:0},children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:"modalBarGradientInt",x1:"0",y1:"0",x2:"0",y2:"1",children:[c.jsx("stop",{offset:"0%",stopColor:"#8B5CF6",stopOpacity:.8}),c.jsx("stop",{offset:"100%",stopColor:"#8B5CF6",stopOpacity:.2})]})}),c.jsx(kn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1}),c.jsx(Nn,{orientation:"right",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1,width:40}),c.jsx(Qt,{content:c.jsx(py,{context:"interval"}),cursor:{fill:"rgba(255, 255, 255, 0.1)"}}),c.jsx(Yn,{dataKey:"value",radius:[4,4,0,0],fill:"url(#modalBarGradientInt)"})]})})}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Detalles de Intervalos"}),c.jsx("ul",{className:"space-y-1",children:u.slice().reverse().map($=>c.jsxs("li",{className:"flex justify-between items-center p-2 rounded-md hover:bg-white/5",children:[c.jsxs("span",{className:"text-base font-medium text-zinc-200",children:["Perodo ",$.period]}),c.jsxs("span",{className:"text-base font-semibold text-white",children:[$.days," das"]})]},$.period))})]})]})})]})}const aNe=({plan:t})=>c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("p",{className:"font-semibold text-white",children:t.details}),c.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:["Iniciado el: ",new Date(t.startDate+"T00:00:00").toLocaleDateString("es-VE")]})]});function sNe({lotName:t,onBack:e}){const{feedingPlans:n,addFeedingPlan:r}=at(),[i,a]=O.useState(""),[s,o]=O.useState(new Date().toISOString().split("T")[0]),[l,u]=O.useState(null),f=O.useMemo(()=>n.filter(h=>h.lotName===t).sort((h,p)=>new Date(p.startDate).getTime()-new Date(h.startDate).getTime()),[n,t]),d=async h=>{if(h.preventDefault(),!i.trim()){u({type:"error",text:"Los detalles del plan no pueden estar vacos."});return}try{await r({lotName:t,details:i,startDate:s}),u({type:"success",text:"Plan de alimentacin guardado con xito."}),a("")}catch(p){u({type:"error",text:"No se pudo guardar el plan."}),console.error(p)}};return c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 pb-12 animate-fade-in",children:[c.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[c.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(or,{size:24})}),c.jsxs("div",{className:"text-center flex-grow",children:[c.jsxs("h1",{className:"text-3xl font-bold tracking-tight text-white",children:["Alimentacin: ",t]}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Planes de Nutricin del Lote"})]}),c.jsx("div",{className:"w-8"})]}),c.jsxs("form",{onSubmit:d,className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[c.jsx(ni,{size:20})," Asignar Nuevo Plan"]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"planDetails",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Detalles del Plan (Ej: 2kg de concentrado/da)"}),c.jsx("textarea",{id:"planDetails",rows:3,value:i,onChange:h=>a(h.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"planStartDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Inicio"}),c.jsx("input",{id:"planStartDate",type:"date",value:s,onChange:h=>o(h.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),c.jsx("button",{type:"submit",className:"w-full bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 rounded-xl text-lg transition-colors",children:"Guardar Plan"}),l&&c.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${l.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[l.type==="success"?c.jsx(ma,{size:18}):c.jsx(yn,{size:18}),c.jsx("span",{children:l.text})]})]}),c.jsxs("div",{className:"space-y-4 pt-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 px-2 flex items-center gap-2",children:[c.jsx(Sx,{size:20})," Historial de Planes"]}),f.length>0?c.jsx("div",{className:"space-y-2",children:f.map(h=>c.jsx(aNe,{plan:h},h.id))}):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:c.jsx("p",{className:"text-zinc-500",children:"No hay planes de alimentacin registrados para este lote."})})]})]})}const oNe=({event:t})=>c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("p",{className:"font-semibold text-white",children:t.details}),c.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:["Aplicado el: ",new Date(t.date+"T00:00:00").toLocaleDateString("es-VE")]})]});function lNe({lotName:t,onBack:e}){const{events:n,addBatchEvent:r}=at(),[i,a]=O.useState(""),[s,o]=O.useState(new Date().toISOString().split("T")[0]),[l,u]=O.useState(null),f=O.useMemo(()=>{const h=n.filter(p=>p.lotName===t&&p.type==="Tratamiento").reduce((p,v)=>{const y=`${v.date}-${v.details}`;return p[y]||(p[y]=v),p},{});return Object.values(h).sort((p,v)=>new Date(v.date).getTime()-new Date(p.date).getTime())},[n,t]),d=async h=>{if(h.preventDefault(),u(null),!i.trim()){u({type:"error",text:"Los detalles del tratamiento no pueden estar vacos."});return}try{await r({lotName:t,details:i,date:s,type:"Tratamiento"}),u({type:"success",text:"Tratamiento registrado con xito para todo el lote."}),a("")}catch(p){u({type:"error",text:"No se pudo registrar el tratamiento."}),console.error(p)}};return c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 pb-12 animate-fade-in",children:[c.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[c.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(or,{size:24})}),c.jsxs("div",{className:"text-center flex-grow",children:[c.jsxs("h1",{className:"text-3xl font-bold tracking-tight text-white",children:["Tratamientos: ",t]}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Sanidad Colectiva del Lote"})]}),c.jsx("div",{className:"w-8"})]}),c.jsxs("form",{onSubmit:d,className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[c.jsx(ni,{size:20})," Registrar Tratamiento al Lote"]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"treatmentDetails",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Detalles del Tratamiento (Ej: Vacuna Triple)"}),c.jsx("textarea",{id:"treatmentDetails",rows:3,value:i,onChange:h=>a(h.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"treatmentDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Aplicacin"}),c.jsx("input",{id:"treatmentDate",type:"date",value:s,onChange:h=>o(h.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),c.jsx("button",{type:"submit",className:"w-full bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 rounded-xl text-lg transition-colors",children:"Guardar Tratamiento"}),l&&c.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${l.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[l.type==="success"?c.jsx(ma,{size:18}):c.jsx(yn,{size:18}),c.jsx("span",{children:l.text})]})]}),c.jsxs("div",{className:"space-y-4 pt-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 px-2 flex items-center gap-2",children:[c.jsx(W$,{size:20})," Historial de Tratamientos del Lote"]}),f.length>0?c.jsx("div",{className:"space-y-2",children:f.map(h=>c.jsx(oNe,{event:h},h.id))}):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:c.jsx("p",{className:"text-zinc-500",children:"No hay tratamientos registrados para este lote."})})]})]})}const Mu=({icon:t,label:e,value:n,unit:r,colorClass:i})=>c.jsxs("div",{className:`bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border ${i||""}`,children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[c.jsx(t,{size:14}),c.jsx("span",{children:e})]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[n," ",c.jsx("span",{className:"text-lg text-zinc-400",children:r})]})]}),cNe=({active:t,payload:e,label:n})=>t&&e&&e.length?c.jsxs("div",{className:"bg-black/50 backdrop-blur-xl p-3 rounded-lg border border-brand-border text-white",children:[c.jsxs("p",{className:"label text-brand-light-gray text-sm",children:["Edad: ",n," das"]}),e.map(r=>c.jsxs("p",{style:{color:r.color},className:"font-bold text-base",children:[r.name,": ",r.value.toFixed(2)," Kg"]},r.name))]}):null;function uNe({animalId:t,onBack:e}){const{animals:n,bodyWeighings:r}=at(),i=O.useMemo(()=>{const p=n.find(S=>S.id===t);if(!p)return null;const v=r.filter(S=>S.animalId===p.id).sort((S,T)=>new Date(S.date).getTime()-new Date(T.date).getTime()),y=oj(p.birthWeight,v),b=Ya(p.birthDate),x=v.length>0?v[v.length-1].kg:p.birthWeight||0,_=Eee(p),E=Aee(p,v),P=v.map(S=>({age:(new Date(S.date).getTime()-new Date(p.birthDate).getTime())/(1e3*60*60*24),[p.id]:S.kg}));p.birthWeight&&P.unshift({age:0,[p.id]:p.birthWeight});const j=[60,90,180,270].map(S=>({days:S,weight:Az(v,p.birthDate,S)}));return{animal:p,gdp:y,formattedAge:b,latestWeight:x,chartData:P,interpolatedWeights:j,weaningIndex:_,precocityIndex:E}},[t,n,r]);if(!i)return c.jsx("div",{className:"text-center p-10",children:c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Animal no encontrado."})});const{animal:a,gdp:s,formattedAge:o,latestWeight:l,chartData:u,interpolatedWeights:f,weaningIndex:d,precocityIndex:h}=i;return c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in pb-12",children:[c.jsxs("header",{className:"flex items-center pt-8 pb-4 px-4",children:[c.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(or,{size:24})}),c.jsxs("div",{className:"text-center flex-grow",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:a.id}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Perfil de Crecimiento"})]}),c.jsx("div",{className:"w-8"})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 px-4",children:[c.jsx(Mu,{icon:Hm,label:"Peso Actual",value:l.toFixed(2),unit:"Kg"}),c.jsx(Mu,{icon:kl,label:"GDP General",value:s.overall?(s.overall*1e3).toFixed(0):"N/A",unit:"g/da"}),c.jsx(Mu,{icon:ho,label:"Edad Actual",value:o}),c.jsx(Mu,{icon:lY,label:"N Pesajes",value:u.length})]}),(d||h)&&c.jsxs("div",{className:"grid grid-cols-2 gap-4 px-4",children:[d&&c.jsx(Mu,{icon:$ee,label:"ndice Destete (60d)",value:d.toFixed(2),unit:"Kg",colorClass:"border-amber-400/50"}),h&&c.jsx(Mu,{icon:Mee,label:"ndice Precocidad (7m)",value:h.toFixed(2),unit:"Kg",colorClass:"border-amber-400/50"})]}),c.jsx("div",{className:"px-4",children:c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Curva de Crecimiento"}),c.jsx("div",{className:"w-full h-64",children:c.jsx(mr,{children:c.jsxs(Z8,{data:u,margin:{top:5,right:20,left:-10,bottom:5},children:[c.jsx(Gf,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),c.jsx(kn,{dataKey:"age",type:"number",domain:["dataMin","dataMax"],tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},label:{value:"Edad (das)",position:"insideBottom",offset:-5,fill:"rgba(255,255,255,0.5)"}}),c.jsx(Nn,{orientation:"right",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},label:{value:"Peso (Kg)",angle:-90,position:"insideRight",fill:"rgba(255,255,255,0.5)"}}),c.jsx(Qt,{content:c.jsx(cNe,{})}),c.jsx(no,{verticalAlign:"top",height:36}),c.jsx(Qc,{type:"monotone",dataKey:a.id,stroke:"#34C759",strokeWidth:2.5,dot:{r:4},activeDot:{r:6}})]})})})]})}),c.jsx("div",{className:"px-4",children:c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Hitos de Crecimiento (Pesos Estimados)"}),c.jsx("div",{className:"grid grid-cols-2 gap-4",children:f.map(({days:p,weight:v})=>c.jsxs("div",{className:"bg-black/20 p-3 rounded-lg text-center",children:[c.jsxs("p",{className:"text-sm text-zinc-400",children:["Peso a los ",p," das"]}),c.jsx("p",{className:"text-xl font-bold text-white",children:v?`${v.toFixed(2)} Kg`:"---"})]},p))})]})})]})}const dNe=t=>new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(r.result.split(",")[1]),r.onerror=i=>n(i)}),fNe=({onImageSelect:t})=>{const e=O.useRef(null),n=r=>{var i;(i=r.target.files)!=null&&i[0]&&t(r.target.files[0])};return c.jsxs("div",{className:"space-y-4 animate-fade-in",children:[c.jsx("input",{type:"file",ref:e,accept:"image/*",onChange:n,className:"hidden"}),c.jsxs("button",{onClick:()=>{var r,i;(r=e.current)==null||r.setAttribute("capture","environment"),(i=e.current)==null||i.click()},className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-blue-400 text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[c.jsx(eY,{className:"w-12 h-12 mb-2 text-blue-400"}),c.jsx("span",{className:"text-lg font-semibold",children:"Tomar Foto"}),c.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Usa la cmara para escanear"})]}),c.jsxs("button",{onClick:()=>{var r,i;(r=e.current)==null||r.removeAttribute("capture"),(i=e.current)==null||i.click()},className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-green-400 text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[c.jsx(oY,{className:"w-12 h-12 mb-2 text-green-400"}),c.jsx("span",{className:"text-lg font-semibold",children:"Seleccionar Archivo"}),c.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Elige una foto de tu galera"})]})]})};function hNe({onBack:t}){const[e,n]=O.useState("capture"),[r,i]=O.useState(""),[a,s]=O.useState(""),o=async l=>{var u,f;n("loading"),i(""),s("");try{const d=await dNe(l),y=await fetch("https://vision.googleapis.com/v1/images:annotate?key=AIzaSyAsHrxI8e8prsvYNvx992YyC26n592GfWk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({requests:[{image:{content:d},features:[{type:"TEXT_DETECTION"}]}]})});if(!y.ok){const _=await y.json();throw new Error(_.error.message||"Error en la API de Google Vision.")}const x=(f=(u=(await y.json()).responses[0])==null?void 0:u.fullTextAnnotation)==null?void 0:f.text;if(x)s(x),n("verification");else throw new Error("No se pudo detectar texto en la imagen. Intenta con una foto ms clara.")}catch(d){i(d.message||"Ocurri un error inesperado."),n("error")}};return c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4",children:[c.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[c.jsx("button",{onClick:t,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(or,{size:24})}),c.jsxs("div",{className:"text-center flex-grow",children:[c.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white",children:"Escanear Cuaderno"}),c.jsx("p",{className:"text-xl text-zinc-400",children:"Digitalizacin Asistida"})]}),c.jsx("div",{className:"w-8"})]}),e==="capture"&&c.jsx(fNe,{onImageSelect:o}),e==="loading"&&c.jsxs("div",{className:"text-center py-20 animate-fade-in",children:[c.jsx($$,{className:"w-12 h-12 text-amber-400 mx-auto animate-spin"}),c.jsx("p",{className:"mt-4 text-zinc-400",children:"Analizando imagen con IA..."})]}),e==="verification"&&c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border animate-fade-in space-y-4",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase tracking-wider border-b border-brand-border pb-2",children:[c.jsx(D$,{}),c.jsx("span",{children:"Texto Reconocido"})]}),c.jsx("textarea",{readOnly:!0,value:a,className:"w-full h-48 bg-black/20 text-white p-3 rounded-lg border border-zinc-700"}),c.jsx("p",{className:"text-xs text-zinc-500 text-center",children:"Funcionalidad de autocompletado de pesajes prximamente."}),c.jsx("button",{onClick:()=>n("capture"),className:"w-full bg-zinc-700 hover:bg-zinc-600 text-white font-semibold py-2 px-4 rounded-lg",children:"Escanear Otra Imagen"})]}),e==="error"&&c.jsxs("div",{className:"bg-red-900/40 border border-red-500/50 rounded-2xl p-6 text-center animate-fade-in",children:[c.jsx(yn,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),c.jsx("h2",{className:"text-lg font-semibold text-white mb-2",children:"Ocurri un Error"}),c.jsx("p",{className:"text-red-300",children:r}),c.jsx("button",{onClick:()=>n("capture"),className:"mt-6 bg-zinc-700 hover:bg-zinc-600 text-white font-semibold py-2 px-4 rounded-lg",children:"Intentar de Nuevo"})]})]})}const YM=152,xT=()=>{const{animals:t,breedingSeasons:e,sireLots:n,serviceRecords:r,fathers:i}=at();return{forecastBySeason:O.useMemo(()=>{var f;const s=[],o=e.filter(d=>d.status==="Activo");for(const d of o){const h=n.filter(y=>y.seasonId===d.id);if(h.length===0)continue;const p=new Set(h.map(y=>y.id)),v=t.filter(y=>y.sireLotId&&p.has(y.sireLotId));for(const y of v){const b=r.filter(E=>E.femaleId===y.id&&E.sireLotId===y.sireLotId&&new Date(E.serviceDate)>=new Date(d.startDate)&&new Date(E.serviceDate)<=new Date(d.endDate)).sort((E,P)=>new Date(P.serviceDate).getTime()-new Date(E.serviceDate).getTime())[0],x=n.find(E=>E.id===y.sireLotId);if(!x)continue;const _=((f=i.find(E=>E.id===x.sireId))==null?void 0:f.name)||x.sireId;if(b){const E=new Date(b.serviceDate);E.setDate(E.getDate()+YM),s.push({animal:y,dueDate:E,type:"Confirmada",sireId:x.sireId,sireName:_,seasonId:d.id})}else{const P=new Date(d.startDate);P.setDate(P.getDate()+10+YM),s.push({animal:y,dueDate:P,type:"Probable",sireId:x.sireId,sireName:_,seasonId:d.id})}}}const l=s.reduce((d,h)=>{const{seasonId:p}=h;return d[p]||(d[p]=[]),d[p].push(h),d},{});let u=Object.entries(l).map(([d,h])=>{const p=e.find(x=>x.id===d),v=h.map(x=>x.dueDate.getTime()),y=new Date(Math.min(...v)),b=new Date(Math.max(...v));return{seasonId:d,seasonName:p.name,projectedStartDate:h.length>0?y:null,projectedEndDate:h.length>0?b:null,events:h.sort((x,_)=>x.dueDate.getTime()-_.dueDate.getTime()),totalEvents:h.length,confirmedEvents:h.filter(x=>x.type==="Confirmada").length,probableEvents:h.filter(x=>x.type==="Probable").length,daysSinceLastSeason:null}}).sort((d,h)=>d.projectedStartDate.getTime()-h.projectedStartDate.getTime());if(u.length>1)for(let d=1;d<u.length;d++){const h=u[d].projectedStartDate,p=u[d-1].projectedEndDate,v=h.getTime()-p.getTime(),y=Math.ceil(v/(1e3*60*60*24));u[d].daysSinceLastSeason=y}return u},[t,e,n,r,i])}},pNe=`
  .rdp { --rdp-cell-size: 45px; --rdp-accent-color: #FF9500; --rdp-background-color: #2C2C2E; --rdp-accent-color-dark: #FF9500; --rdp-background-color-dark: #2C2C2E; --rdp-outline: 2px solid var(--rdp-accent-color); --rdp-border-radius: 12px; color: #FFF; width: 100%; }
  .rdp-caption_label, .rdp-nav_button { color: #FF9500; }
  .rdp-head_cell { color: #8e8e93; font-size: 0.8em; }
  .rdp-day_selected { background-color: var(--rdp-accent-color); color: #000; font-weight: bold; }
  .day-confirmed { position: relative; }
  .day-confirmed::after { content: ''; position: absolute; bottom: 6px; left: 50%; transform: translateX(-50%); width: 6px; height: 6px; border-radius: 50%; background-color: #34C759; }
  .day-probable { position: relative; }
  .day-probable::after { content: ''; position: absolute; bottom: 6px; left: 50%; transform: translateX(-50%); width: 6px; height: 6px; border-radius: 50%; background-color: #FF9500; opacity: 0.7; }
`,mNe=({seasonForecast:t,onClick:e})=>{var n,r;return c.jsxs("button",{onClick:e,className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border hover:border-brand-blue transition-colors",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-lg text-white",children:t.seasonName}),c.jsxs("p",{className:"text-sm text-zinc-400",children:[(n=t.projectedStartDate)==null?void 0:n.toLocaleDateString("es-VE",{month:"long",day:"numeric"})," - ",(r=t.projectedEndDate)==null?void 0:r.toLocaleDateString("es-VE",{month:"long",day:"numeric",year:"numeric"})]})]}),t.daysSinceLastSeason!==null&&c.jsxs("div",{className:"text-right flex-shrink-0 ml-4",children:[c.jsx("p",{className:"text-xs text-zinc-500",children:"Separacin"}),c.jsxs("p",{className:"font-semibold text-white",children:[t.daysSinceLastSeason," das"]})]})]}),c.jsxs("div",{className:"mt-3 pt-3 border-t border-zinc-700/50 flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"font-bold text-2xl text-white",children:t.totalEvents}),c.jsx("p",{className:"text-xs text-zinc-400",children:"Partos"})]}),c.jsxs("div",{className:"text-left text-xs",children:[c.jsxs("p",{className:"flex items-center gap-1 text-brand-green",children:[c.jsx(ma,{size:12})," Confirmados: ",t.confirmedEvents]}),c.jsxs("p",{className:"flex items-center gap-1 text-brand-orange",children:[c.jsx(Ex,{size:12})," Probables: ",t.probableEvents]})]})]}),c.jsx(Ai,{className:"text-zinc-600"})]})]})},gNe=({forecastItem:t,onClick:e})=>c.jsxs("button",{onClick:e,className:"w-full text-left bg-black/20 rounded-lg p-3 flex justify-between items-center hover:bg-zinc-800/60 transition-colors",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-white",children:t.animal.id}),c.jsxs("p",{className:"text-xs text-zinc-400",children:["Semental: ",t.sireId]})]}),c.jsxs("div",{className:`flex items-center gap-2 text-sm font-semibold ${t.type==="Confirmada"?"text-brand-green":"text-brand-orange"}`,children:[t.type==="Confirmada"?c.jsx(ma,{size:16}):c.jsx(Ex,{size:16}),c.jsx("span",{children:t.type})]})]});function yNe({navigateTo:t}){const{forecastBySeason:e}=xT(),[n,r]=O.useState("cards"),[i,a]=O.useState(void 0),[s,o]=O.useState(new Date),l=O.useMemo(()=>e.flatMap(d=>d.events),[e]),u=O.useMemo(()=>({confirmed:l.filter(d=>d.type==="Confirmada").map(d=>d.dueDate),probable:l.filter(d=>d.type==="Probable").map(d=>d.dueDate)}),[l]),f=O.useMemo(()=>i?l.filter(d=>d.dueDate.getFullYear()===i.getFullYear()&&d.dueDate.getMonth()===i.getMonth()&&d.dueDate.getDate()===i.getDate()):[],[l,i]);return c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4",children:[c.jsx("style",{children:pNe}),c.jsxs("header",{className:"text-center",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Calendario de Partos"}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Proyecciones del Rebao"})]}),c.jsxs("div",{className:"flex justify-center p-1 bg-zinc-800 rounded-xl",children:[c.jsxs("button",{onClick:()=>r("cards"),className:`w-1/2 py-2 text-sm font-semibold rounded-lg flex items-center justify-center gap-2 transition-colors ${n==="cards"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:[c.jsx(R$,{size:16})," Tarjetas"]}),c.jsxs("button",{onClick:()=>r("calendar"),className:`w-1/2 py-2 text-sm font-semibold rounded-lg flex items-center justify-center gap-2 transition-colors ${n==="calendar"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:[c.jsx(ho,{size:16})," Calendario"]})]}),n==="cards"&&c.jsx("div",{className:"space-y-3",children:e.length>0?e.map(d=>c.jsx(mNe,{seasonForecast:d,onClick:()=>t({name:"birthing-season-detail",seasonId:d.seasonId})},d.seasonId)):c.jsxs("div",{className:"text-center py-10 bg-brand-glass rounded-2xl flex flex-col items-center gap-2",children:[c.jsx(k$,{size:32,className:"text-zinc-600"}),c.jsx("p",{className:"text-zinc-400",children:"No hay temporadas de parto activas o proyectadas."})]})}),n==="calendar"&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-2 border border-brand-border",children:c.jsx(Df,{mode:"single",selected:i,onSelect:a,month:s,onMonthChange:o,locale:fj,modifiers:{confirmed:u.confirmed,probable:u.probable},modifiersClassNames:{confirmed:"day-confirmed",probable:"day-probable"},showOutsideDays:!0})}),i&&c.jsxs("div",{className:"space-y-3 pt-2",children:[c.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Proyecciones para el ",i.toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"})]}),f.length>0?c.jsx("div",{className:"space-y-2",children:f.map(d=>c.jsx(gNe,{forecastItem:d,onClick:()=>t({name:"rebano-profile",animalId:d.animal.id})},d.animal.id))}):c.jsx("div",{className:"text-center py-6 bg-brand-glass rounded-2xl",children:c.jsx("p",{className:"text-zinc-500",children:"No hay partos proyectados para este da."})})]})]})]})}const vNe=({forecastItem:t,onClick:e})=>c.jsxs("button",{onClick:e,className:"w-full text-left bg-black/20 rounded-lg p-3 flex justify-between items-center hover:bg-zinc-800/60 transition-colors",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-white",children:t.animal.id}),c.jsxs("p",{className:"text-xs text-zinc-400",children:["Reproductor: ",t.sireName]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:`flex items-center gap-2 text-sm font-semibold ${t.type==="Confirmada"?"text-brand-green":"text-brand-orange"}`,children:[t.type==="Confirmada"?c.jsx(ma,{size:16}):c.jsx(Ex,{size:16}),c.jsx("span",{children:t.type})]}),c.jsx(Ai,{className:"text-zinc-600"})]})]}),xNe=t=>{const e=new Date(t.getFullYear(),t.getMonth(),1),n=e.getDay()===0?6:e.getDay()-1,r=t.getDate();return`Sem ${Math.ceil((r+n)/7)}`};function bNe({seasonId:t,onBack:e,navigateTo:n}){const{forecastBySeason:r}=xT(),i=O.useMemo(()=>r.find(s=>s.seasonId===t),[r,t]),a=O.useMemo(()=>{if(!i)return[];const s={};return i.events.forEach(o=>{const l=o.dueDate,u=l.toLocaleString("es-VE",{month:"short"}),f=xNe(l),d=`${u.charAt(0).toUpperCase()+u.slice(1)} - ${f}`;if(!s[d]){const h=l.getDate(),p=new Date(l);p.setDate(h-l.getDay()),s[d]={count:0,startDate:p}}s[d].count++}),Object.entries(s).map(([o,l])=>({name:o,partos:l.count,startDate:l.startDate})).sort((o,l)=>o.startDate.getTime()-l.startDate.getTime())},[i]);return i?c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4",children:[c.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[c.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(or,{size:24})}),c.jsxs("div",{className:"text-center flex-grow",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:i.seasonName}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Detalle de Proyeccin de Partos"})]}),c.jsx("div",{className:"w-8"})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-white mb-4",children:[c.jsx(Pf,{size:20})," Proyeccin Semanal de Partos"]}),c.jsx("div",{className:"w-full h-56",children:c.jsx(mr,{children:c.jsxs(xi,{data:a,margin:{top:5,right:10,left:-20,bottom:5},children:[c.jsx(Gf,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),c.jsx(kn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(Nn,{allowDecimals:!1,tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(Qt,{cursor:{fill:"rgba(255, 255, 255, 0.1)"},contentStyle:{backgroundColor:"rgba(44, 44, 46, 0.8)",border:"1px solid #444",borderRadius:"12px"}}),c.jsx(Yn,{dataKey:"partos",name:"N de Partos",fill:"#007AFF",radius:[4,4,0,0]})]})})})]}),c.jsxs("div",{className:"space-y-3 pt-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Lista de Animales (",i.totalEvents,")"]}),c.jsx("div",{className:"space-y-2",children:i.events.map(s=>c.jsx(vNe,{forecastItem:s,onClick:()=>n({name:"rebano-profile",animalId:s.animal.id})},s.animal.id))})]})]}):c.jsxs("div",{className:"text-center p-10",children:[c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Temporada de Partos no encontrada."}),c.jsx("button",{onClick:e,className:"mt-4 text-brand-amber",children:"Volver"})]})}const wNe=[{id:"lactokeeper",name:"LactoKeeper",icon:mA,color:"bg-brand-blue"},{id:"kilos",name:"Kilos",icon:Hm,color:"bg-brand-green"},{id:"salud",name:"StockCare",icon:vA,color:"bg-teal-500"}],_Ne=({onSwitchModule:t})=>{const[e,n]=O.useState(!1),r=i=>{n(!1),t(i)};return c.jsxs("div",{className:"fixed bottom-24 right-4 z-40 flex flex-col items-end gap-4 pointer-events-none",children:[c.jsx("div",{className:`flex flex-col items-end gap-4 transition-all duration-300 ease-in-out ${e?"opacity-100":"opacity-0 translate-y-4"}`,children:wNe.map(i=>c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"bg-black/60 backdrop-blur-md text-white text-sm font-semibold px-3 py-1 rounded-md shadow-lg",children:i.name}),c.jsx("button",{onClick:()=>r(i.id),className:`w-14 h-14 rounded-full flex items-center justify-center text-white shadow-lg ${i.color} transform transition-transform hover:scale-110 pointer-events-auto`,"aria-label":`Cambiar al mdulo ${i.name}`,children:c.jsx(i.icon,{size:28})})]},i.id))}),c.jsx("button",{onClick:()=>n(!e),className:"w-16 h-16 rounded-full flex items-center justify-center text-black bg-brand-amber shadow-2xl shadow-black/50 transform transition-transform duration-200 hover:scale-110 pointer-events-auto","aria-label":"Seleccionar mdulo",children:c.jsx("div",{className:`transform transition-transform duration-300 ${e?"rotate-180 scale-75":"rotate-0"}`,children:e?c.jsx(Nl,{size:32}):c.jsx(dY,{size:32})})})]})};function SNe(t){return Dl({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224l0 32 0 160c0 17.7 14.3 32 32 32l32 0c17.7 0 32-14.3 32-32l0-88.2c9.9 6.6 20.6 12 32 16.1l0 24.2c0 8.8 7.2 16 16 16s16-7.2 16-16l0-16.9c5.3 .6 10.6 .9 16 .9s10.7-.3 16-.9l0 16.9c0 8.8 7.2 16 16 16s16-7.2 16-16l0-24.2c11.4-4 22.1-9.4 32-16.1l0 88.2c0 17.7 14.3 32 32 32l32 0c17.7 0 32-14.3 32-32l0-160 32 32 0 49.5c0 9.5 2.8 18.7 8.1 26.6L530 427c8.8 13.1 23.5 21 39.3 21c22.5 0 41.9-15.9 46.3-38l20.3-101.6c2.6-13-.3-26.5-8-37.3l-3.9-5.5 0-81.6c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 14.4-52.9-74.1C496 86.5 452.4 64 405.9 64L272 64l-16 0-64 0-48 0C77.7 64 24 117.7 24 184l0 54C9.4 249.8 0 267.8 0 288l0 17.6c0 8 6.4 14.4 14.4 14.4C46.2 320 72 294.2 72 262.4l0-6.4 0-32 0-40c0-24.3 12.1-45.8 30.5-58.9C98.3 135.9 96 147.7 96 160l0 64zM560 336a16 16 0 1 1 32 0 16 16 0 1 1 -32 0zM166.6 166.6c-4.2-4.2-6.6-10-6.6-16c0-12.5 10.1-22.6 22.6-22.6l178.7 0c12.5 0 22.6 10.1 22.6 22.6c0 6-2.4 11.8-6.6 16l-23.4 23.4C332.2 211.8 302.7 224 272 224s-60.2-12.2-81.9-33.9l-23.4-23.4z"},child:[]}]})(t)}const ENe={idle:{Icon:aY,color:"text-green-500",label:"Datos sincronizados"},syncing:{Icon:rY,color:"text-amber-500 animate-spin-slow",label:"Sincronizando datos..."},offline:{Icon:iY,color:"text-red-500",label:"Sin conexin"}},jb=({status:t})=>{const{Icon:e,color:n,label:r}=ENe[t];return c.jsx("div",{className:"flex items-center gap-2",title:r,children:c.jsx(e,{className:`w-5 h-5 ${n}`})})},ANe=({initialPage:t,onSwitchModule:e})=>{const{syncStatus:n}=at(),[r,i]=O.useState({name:"lots-dashboard"}),[a,s]=O.useState([]);O.useEffect(()=>{t&&i(t)},[t]);const o=[{page:{name:"lots-dashboard"},label:"Lotes",icon:Iee},{page:{name:"herd"},label:"Rebao",icon:SNe},{page:{name:"farm-calendar"},label:"Calendario",icon:O$},{page:{name:"add-animal"},label:"Aadir",icon:Pl}],l=d=>{s(h=>[...h,r]),i(d)},u=()=>{const d=a[a.length-1];d?(s(h=>h.slice(0,-1)),i(d)):i({name:"lots-dashboard"})},f=()=>{switch(r.name){case"lots-dashboard":return c.jsx(_N,{navigateTo:l});case"lot-detail":return c.jsx(ete,{lotName:r.lotName,onBack:u,navigateTo:l});case"breeding-season-detail":return c.jsx(cae,{seasonId:r.seasonId,onBack:u,navigateTo:l});case"sire-lot-detail":return c.jsx(hae,{lotId:r.lotId,onBack:u,navigateTo:l});case"herd":return c.jsx(uie,{navigateTo:l,locationFilter:r.locationFilter});case"manage-lots":return c.jsx(rae,{onBack:()=>i({name:"herd"})});case"management":return c.jsx(s6,{onSelectAnimal:d=>l({name:"rebano-profile",animalId:d})});case"add-animal":return c.jsx(aie,{onBack:()=>i({name:"herd"})});case"rebano-profile":return c.jsx(tae,{animalId:r.animalId,onBack:u,navigateTo:l});case"lactation-profile":return c.jsx(iNe,{animalId:r.animalId,onBack:u,navigateTo:l});case"growth-profile":return c.jsx(uNe,{animalId:r.animalId,onBack:u});case"ocr":return c.jsx(hNe,{onBack:u});case"feeding-plan":return c.jsx(sNe,{lotName:r.lotName,onBack:u});case"batch-treatment":return c.jsx(lNe,{lotName:r.lotName,onBack:u});case"farm-calendar":return c.jsx(yNe,{navigateTo:l});case"birthing-season-detail":return c.jsx(bNe,{seasonId:r.seasonId,onBack:u,navigateTo:l});default:return c.jsx(_N,{navigateTo:l})}};return c.jsxs("div",{className:"font-sans text-gray-200 min-h-screen animate-fade-in",children:[c.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-gray-900/80 backdrop-blur-lg border-b border-brand-border",children:c.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(lj,{className:"text-brand-orange",size:28}),c.jsx("h1",{className:"text-xl font-bold text-white",children:"Rebao"})]}),c.jsx("div",{className:"flex items-center gap-4",children:c.jsx(jb,{status:n})})]})}),c.jsx("main",{className:"pt-16 pb-24",children:f()}),c.jsx(_Ne,{onSwitchModule:e}),c.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 bg-black/30 backdrop-blur-xl border-t border-white/20 flex justify-around",children:[o.map(d=>{let h=!1;return d.label==="Lotes"?h=["lots-dashboard","lot-detail","breeding-season-detail","sire-lot-detail"].includes(r.name):d.label==="Rebao"?h=["herd","rebano-profile","manage-lots","lactation-profile","growth-profile"].includes(r.name):d.label==="Calendario"?h=["farm-calendar","birthing-season-detail"].includes(r.name):d.label==="Aadir"&&(h=["add-animal","ocr"].includes(r.name)),c.jsxs("button",{onClick:()=>{s([]),i(d.page)},className:`relative flex flex-col items-center justify-center pt-3 pb-2 w-full transition-colors ${h?"text-amber-400":"text-gray-500 hover:text-white"}`,children:[c.jsx(d.icon,{className:"w-6 h-6"}),c.jsx("span",{className:"text-xs font-semibold mt-1",children:d.label})]},d.label)}),c.jsxs("button",{onClick:()=>$d.signOut(),className:"relative flex flex-col items-center justify-center pt-3 pb-2 w-full text-gray-500 hover:text-red-400 transition-colors",children:[c.jsx(L$,{className:"w-6 h-6"}),c.jsx("span",{className:"text-xs font-semibold mt-1",children:"Salir"})]})]})]})};function XM({onNavigateToAnalysis:t}){const{animals:e,weighings:n,parturitions:r,isLoading:i}=at(),[a,s]=O.useState("current"),[o,l]=O.useState(!1),[u,f]=O.useState(!1),d=O.useMemo(()=>{if(i||!n.length||!e.length)return{herdAverage:0,activeGoats:0,herdLactationCurve:[],gaussData:{distribution:[],mean:0,stdDev:0}};let h=0;if(n.length>0){const j=n.reduce((S,T)=>T.date>S?T.date:S,n[0].date);h=new Set(n.filter(S=>S.date===j).map(S=>S.goatId)).size}let p=n;if(a==="current"){const j=new Set(r.filter(S=>S.status==="activa").map(S=>S.goatId));p=n.filter(S=>j.has(S.goatId))}const v={};p.forEach(j=>{const S=r.filter(N=>N.goatId===j.goatId&&new Date(j.date)>=new Date(N.parturitionDate)).sort((N,D)=>new Date(D.parturitionDate).getTime()-new Date(N.parturitionDate).getTime())[0];if(!S)return;const T=Jm(S.parturitionDate,j.date);v[T]||(v[T]={totalKg:0,count:0}),v[T].totalKg+=j.kg,v[T].count++});const y=Object.entries(v).map(([j,S])=>({del:parseInt(j),kg:S.totalKg/S.count,name:"Promedio Rebao"})).sort((j,S)=>j.del-S.del),b=e.map(j=>{const S=n.filter(N=>N.goatId===j.id);return S.length===0?null:{avg:S.reduce((N,D)=>N+D.kg,0)/S.length}}).filter(Boolean),x=b.length>0?b.reduce((j,S)=>j+S.avg,0)/b.length:0,_=b.length>0?Math.sqrt(b.reduce((j,S)=>j+Math.pow(S.avg-x,2),0)/b.length):0,E=[];if(b.length>0){const j=Math.floor(Math.min(...b.map(T=>T.avg))*4)/4,S=Math.ceil(Math.max(...b.map(T=>T.avg))*4)/4;for(let T=j;T<=S;T+=.25){const N=T,D=T+.25,M=b.filter($=>$.avg>=N&&$.avg<D).length;M>0&&E.push({range:`${N.toFixed(2)}`,count:M})}}const P={distribution:E,mean:x,stdDev:_};return{herdAverage:n.length>0?n.reduce((j,S)=>j+S.kg,0)/n.length:0,activeGoats:h,herdLactationCurve:y,gaussData:P}},[e,n,r,i,a]);return i?c.jsx("div",{className:"text-center p-10",children:c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando datos del rebao..."})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4",children:[c.jsxs("header",{className:"text-center pt-8 pb-4",children:[c.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white",children:"Dashboard"}),c.jsx("p",{className:"text-xl text-zinc-400",children:"Anlisis de LactoKeeper"})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-2 text-xs uppercase tracking-wider",children:[c.jsx(qm,{size:14})," ",c.jsx("span",{children:"Promedio Global"})]}),c.jsxs("p",{className:"text-4xl font-bold tracking-tight text-white",children:[d.herdAverage.toFixed(2)," ",c.jsx("span",{className:"text-2xl font-medium text-zinc-400",children:"Kg"})]})]}),c.jsxs("button",{onClick:t,className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border text-left hover:border-brand-orange transition-colors",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-2 text-xs uppercase tracking-wider",children:[c.jsx(bY,{}),c.jsx("span",{children:"Animales en Ordeo"})]}),c.jsx("p",{className:"text-4xl font-bold tracking-tight text-white",children:d.activeGoats})]})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsxs("div",{className:"flex justify-between items-center border-b border-brand-border pb-2 mb-4",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase tracking-wider",children:[c.jsx(ak,{size:16}),c.jsx("span",{children:"Curva de Lactancia"}),c.jsx("button",{onClick:()=>l(!0),className:"text-zinc-500 hover:text-white transition-colors",children:c.jsx(Pv,{size:14})})]}),c.jsxs("div",{className:"flex bg-zinc-900/80 rounded-lg p-0.5",children:[c.jsx("button",{onClick:()=>s("current"),className:`px-2 py-0.5 text-xs font-semibold rounded-md transition-colors ${a==="current"?"bg-brand-orange text-white":"text-zinc-400 hover:bg-zinc-700/50"}`,children:"Actual"}),c.jsx("button",{onClick:()=>s("historical"),className:`px-2 py-0.5 text-xs font-semibold rounded-md transition-colors ${a==="historical"?"bg-brand-orange text-white":"text-zinc-400 hover:bg-zinc-700/50"}`,children:"Histrico"})]})]}),c.jsx("div",{className:"w-full h-48",children:c.jsx(mr,{children:c.jsxs(tNe,{data:d.herdLactationCurve,margin:{top:5,right:10,left:0,bottom:5},children:[c.jsx("defs",{children:c.jsxs("linearGradient",{id:"lactationGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[c.jsx("stop",{offset:"0%",stopColor:"#FF9500",stopOpacity:.7}),c.jsx("stop",{offset:"80%",stopColor:"#34C759",stopOpacity:.1})]})}),c.jsx(kn,{dataKey:"del",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1}),c.jsx(Nn,{orientation:"right",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1,domain:["dataMin - 0.5","dataMax + 0.5"],width:30}),c.jsx(Qt,{content:c.jsx(vf,{})}),c.jsx(Vl,{type:"monotone",dataKey:"kg",stroke:"#FF9500",strokeWidth:2.5,fill:"url(#lactationGradient)"})]})})})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("div",{className:"flex justify-between items-center border-b border-brand-border pb-2 mb-4",children:c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase tracking-wider",children:[c.jsx(ak,{size:16}),c.jsx("span",{children:"Distribucin del Rebao"}),c.jsx("button",{onClick:()=>f(!0),className:"text-zinc-500 hover:text-white transition-colors",children:c.jsx(Pv,{size:14})})]})}),c.jsx("div",{className:"w-full h-48",children:c.jsx(mr,{children:c.jsxs(xi,{data:d.gaussData.distribution,margin:{top:10,right:10,left:0,bottom:0},children:[c.jsx(Gf,{strokeDasharray:"3 3",stroke:"rgba(255, 255, 255, 0.1)"}),c.jsx(kn,{dataKey:"range",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1}),c.jsx(Nn,{orientation:"right",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1,allowDecimals:!1,width:30}),c.jsx(Qt,{content:c.jsx(vf,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),c.jsx(Yn,{dataKey:"count",fill:"rgba(255, 255, 255, 0.4)",name:"N de Cabras"}),c.jsx(xb,{x:d.gaussData.mean.toFixed(2),stroke:"#34C759",strokeWidth:2,label:{value:"",fill:"#34C759",position:"insideTopLeft"}})]})})})]})]}),c.jsx(yt,{isOpen:o,onClose:()=>l(!1),title:"Qu es la Curva de Lactancia del Rebao?",children:c.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[c.jsx("p",{children:'Este grfico revela la **"personalidad productiva"** de tu rebao. No es un promedio simple, sino una lnea de tiempo del rendimiento promedio.'}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-white mb-1",children:"Cmo se Calcula?"}),c.jsx("p",{className:"text-sm",children:'Para cada "Da en Leche" (DEL) en el eje horizontal, el sistema agrupa los pesajes de **todos los animales** que han pasado por ese da de su ciclo y calcula el promedio.'}),c.jsxs("p",{className:"text-sm mt-2 bg-black/20 p-2 rounded-md",children:[c.jsx("strong",{children:"Ejemplo:"}),' El punto en "DEL 50" es el promedio de todos los pesajes que se hicieron a cualquier animal cuando estaba exactamente en su da 50 de lactancia.']})]}),c.jsx("p",{className:"pt-2 border-t border-zinc-700/80",children:"Te permite responder visualmente a preguntas clave como: Cundo ocurre el pico de produccin del rebao? y Qu tan persistente es la lactancia despus del pico?"})]})}),c.jsx(yt,{isOpen:u,onClose:()=>f(!1),title:"Qu es la Distribucin del Rebao?",children:c.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[c.jsx("p",{children:"Este grfico, conocido como Campana de Gauss o distribucin normal, clasifica el rendimiento promedio de cada animal en el rebao."}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-white mb-1",children:"Media ()"}),c.jsx("p",{className:"text-sm",children:"La lnea verde marcada como **** representa el **promedio de produccin de todo el rebao**. Es el punto de referencia central."})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-white mb-1",children:"Las Barras"}),c.jsx("p",{className:"text-sm",children:"Cada barra muestra cuntos animales caen dentro de un rango especfico de produccin. Una barra alta en el centro (cerca de ) indica que la mayora de tu rebao tiene un rendimiento promedio y consistente."})]}),c.jsx("p",{className:"pt-2 border-t border-zinc-700/80",children:"Esta herramienta es clave para identificar rpidamente a los animales de lite (extremo derecho) y a los que podran necesitar atencin (extremo izquierdo)."})]})})]})}const V0=(t,e,n,r,i)=>O.useMemo(()=>{if(!t.length||!e.length)return{classifiedAnimals:[],distribution:[],mean:0,stdDev:0,weightedMean:0};const a=t.reduce((y,b)=>{const x=e.find(N=>N.id===b.goatId);if(!x)return y;const _=r.filter(N=>N.goatId===x.id&&new Date(N.parturitionDate)<=new Date(b.date)).sort((N,D)=>new Date(D.parturitionDate).getTime()-new Date(N.parturitionDate).getTime())[0];if(!_)return y;const E=n.filter(N=>N.goatId===x.id).sort((N,D)=>new Date(D.date).getTime()-new Date(N.date).getTime()),P=Jm(_.parturitionDate,b.date),A=i?_ee(b.kg,P):b.kg;let j="single";const S=.15,T=E.findIndex(N=>N.id===b.id);if(T>0){const N=E[T-1],D=b.kg-N.kg;D>S?j="up":D<-S?j="down":j="stable"}return y.push({...x,latestWeighing:b.kg,weighingId:b.id,del:P,score:A,trend:j,date:b.date}),y},[]);if(!a.length)return{classifiedAnimals:[],distribution:[],mean:0,stdDev:0,weightedMean:0};const s=i?"score":"latestWeighing",o=a.reduce((y,b)=>y+b[s],0)/a.length,l=Math.sqrt(a.reduce((y,b)=>y+Math.pow(b[s]-o,2),0)/a.length),u=o-.4*l,f=o+.4*l,d=a.map(y=>{const b=y[s];let x="Promedio";return l>.1&&(b<u?x="Pobre":b>f&&(x="Sobresaliente")),{...y,classification:x}}),h=[{name:"Pobre",count:d.filter(y=>y.classification==="Pobre").length,fill:"#FF3B30"},{name:"Promedio",count:d.filter(y=>y.classification==="Promedio").length,fill:"#6B7280"},{name:"Sobresaliente",count:d.filter(y=>y.classification==="Sobresaliente").length,fill:"#34C759"}],p=a.length>0?a.reduce((y,b)=>y+b.latestWeighing,0)/a.length:0,v=a.length>0?a.reduce((y,b)=>y+b.score,0)/a.length:0;return{classifiedAnimals:d,distribution:h,mean:p,stdDev:l,weightedMean:v}},[t,e,n,r,i]),jNe=({trend:t,isLongTrend:e})=>{if(!t||t==="single")return null;const n={up:{Icon:hA,color:"text-brand-green"},down:{Icon:fA,color:"text-brand-red"},stable:{Icon:z$,color:"text-zinc-400"}},{Icon:r,color:i}=n[t];return c.jsxs("div",{className:`flex items-center font-semibold text-sm ${i}`,children:[c.jsx(r,{size:18,strokeWidth:3}),e&&c.jsx("span",{className:"ml-0.5 font-bold",children:"+"})]})},bT=(t,e)=>O.useMemo(()=>{if(!t||!e)return{trend:null,difference:0,isLongTrend:!1,lastTwoWeighings:[]};const r=e.filter(f=>f.goatId===t).sort((f,d)=>new Date(d.date).getTime()-new Date(f.date).getTime());if(r.length<1)return{trend:null,difference:0,isLongTrend:!1,lastTwoWeighings:[]};if(r.length===1)return{trend:"single",difference:0,isLongTrend:!1,lastTwoWeighings:[r[0]]};const i=r[0],a=r[1],s=i.kg-a.kg,o=.15;let l;s>o?l="up":s<-o?l="down":l="stable";let u=!1;if(r.length>=3){const f=r[2],d=a.kg-f.kg,h=s>o&&d>o,p=s<-o&&d<-o;(h||p)&&(u=!0)}return{trend:l,difference:s,isLongTrend:u,lastTwoWeighings:[i,a]}},[t,e]),TNe=t=>{const{x:e,y:n,width:r,height:i,value:a,total:s}=t;if(s===0||a===0)return null;const o=(a/s*100).toFixed(0);return c.jsx("text",{x:e+r/2,y:n+i/2,fill:"#fff",textAnchor:"middle",dominantBaseline:"middle",fontSize:"14px",fontWeight:"bold",opacity:.8,children:`${o}%`})},d1=({animal:t,onSelectAnimal:e,onTrendClick:n})=>{const{weighings:r}=at(),{trend:i,isLongTrend:a}=bT(t.id,r),s=l=>{l.stopPropagation(),i&&i!=="single"&&n(t)},o=Ya(t.birthDate);return c.jsxs("div",{onClick:()=>e(t.id),className:"w-full cursor-pointer text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-brand-orange transition-colors",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),c.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:[t.sex," | ",o," | Lote: ",t.location||"Sin Asignar"]})]}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:"font-semibold text-brand-orange",children:[t.latestWeighing.toFixed(2)," Kg"]}),c.jsxs("p",{className:"text-xs text-zinc-400",children:["DEL: ",t.del]})]}),c.jsx("button",{onClick:s,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-white/10 transition-colors disabled:cursor-not-allowed",disabled:!i||i==="single",children:c.jsx(jNe,{trend:i,isLongTrend:a})}),c.jsx("span",{className:`hidden sm:block px-2 py-0.5 text-xs font-semibold rounded-full text-white ${t.classification==="Pobre"?"bg-brand-red/80":t.classification==="Sobresaliente"?"bg-brand-green/80":"bg-gray-500/80"}`,children:t.classification}),c.jsx(Ai,{className:"text-zinc-600"})]})]})},PNe=({isOpen:t,onClose:e,animalIds:n,onSelectAnimal:r})=>t?c.jsx(yt,{isOpen:t,onClose:e,title:"Animales que Salieron del Ordeo",children:c.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto pr-2",children:n.length>0?n.map(i=>c.jsxs("button",{onClick:()=>{r(i),e()},className:"w-full text-left p-3 bg-zinc-800 hover:bg-zinc-700 rounded-lg transition-colors flex justify-between items-center",children:[c.jsx("span",{className:"font-semibold text-white",children:i}),c.jsx(Ai,{className:"text-zinc-500"})]},i)):c.jsx("p",{className:"text-center text-zinc-500 py-4",children:"No hay animales que hayan salido en este perodo."})})}):null,CNe=({animalId:t})=>{var i,a;const{weighings:e}=at(),{lastTwoWeighings:n,difference:r}=bT(t,e);return n.length<2?c.jsx("p",{children:"No hay suficientes datos para comparar."}):c.jsxs("div",{className:"text-center text-white space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm text-zinc-400",children:["Pesaje Anterior (",new Date(n[1].date+"T00:00:00").toLocaleDateString(),")"]}),c.jsxs("p",{className:"text-2xl font-semibold",children:[((i=n[1])==null?void 0:i.kg.toFixed(2))||"N/A"," Kg"]})]}),c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm text-zinc-400",children:["ltimo Pesaje (",new Date(n[0].date+"T00:00:00").toLocaleDateString(),")"]}),c.jsxs("p",{className:"text-2xl font-semibold",children:[((a=n[0])==null?void 0:a.kg.toFixed(2))||"N/A"," Kg"]})]})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-zinc-400 text-base mb-1",children:"Diferencia"}),c.jsxs("p",{className:`text-3xl font-bold ${r>.15?"text-brand-green":r<-.15?"text-brand-red":"text-zinc-400"}`,children:[r>0?"+":"",r.toFixed(2)," Kg"]})]})]})};function kNe({onSelectAnimal:t,selectedDate:e}){const{animals:n,parturitions:r,weighings:i,isLoading:a}=at(),[s,o]=O.useState(!1),[l,u]=O.useState("all"),[f,d]=O.useState("all"),[h,p]=O.useState("all"),[v,y]=O.useState(null),[b,x]=O.useState("all"),[_,E]=O.useState(!1),[P,A]=O.useState(!1),[j,S]=O.useState(!1),[T,N]=O.useState(null),{weighingsByDate:D,availableDates:M}=O.useMemo(()=>{const Se={};i.forEach(_e=>{Se[_e.date]||(Se[_e.date]=[]),Se[_e.date].push(_e)});const Le=Object.keys(Se).sort((_e,Ze)=>new Date(Ze).getTime()-new Date(_e).getTime());return{weighingsByDate:Se,availableDates:Le}},[i]),[$,z]=O.useState(0);O.useEffect(()=>{if(e&&M.length>0){const Se=M.indexOf(e);Se!==-1&&z(Se)}},[e,M]);const H=M[$],ee=O.useMemo(()=>{const Se=D[H]||[],Le=new Map;return Se.forEach(_e=>{Le.set(_e.goatId,_e)}),Array.from(Le.values())},[H,D]),{classifiedAnimals:U,distribution:Z,mean:q,stdDev:Y,weightedMean:le}=V0(ee,n,i,r,s),ce=O.useMemo(()=>{if($+1<M.length){const Se=M[$+1];return D[Se]||[]}return[]},[$,M,D]),ye=V0(ce,n,i,r,!1),Ee=O.useMemo(()=>{const Se=new Set(U.map(Tt=>Tt.id));let Le=new Set,_e=new Set;const Ze=new Set(ye.classifiedAnimals.map(Tt=>Tt.id));$===M.length-1&&M.length>0?Le=Se:(Le=new Set([...Se].filter(Tt=>!Ze.has(Tt))),_e=new Set([...Ze].filter(Tt=>!Se.has(Tt))));const qt=M.slice(0,3).map(Tt=>{const vn=D[Tt]||[];if(vn.length===0)return{date:Tt,avg:0};const Kr=vn.reduce((va,Ti)=>va+Ti.kg,0);return{date:new Date(Tt).toLocaleDateString("es-VE",{month:"short",day:"numeric"}),avg:Kr/vn.length}}).reverse();let Ht=null,kt=null,Mt=0,Rt=0,In=0;if(U.length>0){const Tt=U.map(vn=>vn.latestWeighing);Mt=Tt.reduce((vn,Kr)=>vn+Kr,0),Rt=Math.max(...Tt),In=Math.min(...Tt),Ht=U.find(vn=>vn.latestWeighing===Rt)||null,kt=U.find(vn=>vn.latestWeighing===In)||null}const Vn=q-Y,Wr=q+Y,Fn=U.filter(Tt=>Tt.latestWeighing>=Vn&&Tt.latestWeighing<=Wr).length,Cr=U.length>0?Fn/U.length*100:0;return{trendData:qt,kpi:{total:Mt,max:Rt,min:In},topPerformer:Ht,bottomPerformer:kt,consistency:{percentage:Cr},newAnimalIds:Le,exitingAnimalIds:_e}},[U,ye.classifiedAnimals,M,$,D,q,Y]),He=O.useMemo(()=>{let Se=[...U];if(l!=="all"&&(Se=Se.filter(Le=>Le.classification===l)),b==="new"&&(Se=Se.filter(Le=>Ee.newAnimalIds.has(Le.id))),f!=="all"){const Le=new Set(i.filter(_e=>{const{trend:Ze}=bT(_e.goatId,i);return Ze===f}).map(_e=>_e.goatId));Se=Se.filter(_e=>Le.has(_e.id))}return h!=="all"&&(Se=Se.filter(Le=>{const _e=Le.del;return h==="first"?_e>0&&_e<=100:h==="second"?_e>100&&_e<=200:h==="third"?_e>200&&_e<270:h==="drying"?_e>=270:!0})),Se.sort((Le,_e)=>Le.id.localeCompare(_e.id))},[U,l,f,h,b,Ee.newAnimalIds,i]),{searchTerm:ct,setSearchTerm:ft,filteredItems:It}=n6(He,["id"]),Dt=O.useMemo(()=>{const Se=U.length;if(Se===0)return{up:0,down:0,new:0,stable:0,total:0};const Le=U.filter(Ht=>Ht.trend==="up").length,_e=U.filter(Ht=>Ht.trend==="down").length,Ze=U.filter(Ht=>Ht.trend==="stable").length,qt=U.filter(Ht=>Ht.trend==="single").length;return{up:Le/Se*100,down:_e/Se*100,stable:Ze/Se*100,new:qt/Se*100,total:Se}},[U]),fe=()=>{u("all"),d("all"),p("all"),x("all")},Qe=Se=>{if(Se!=null&&Se.name){const Le=Se.name;u(_e=>_e===Le?"all":Le)}},Ye=O.useRef(null),he=cj({count:It.length,getScrollElement:()=>Ye.current,estimateSize:()=>104,overscan:5});return a?c.jsx("div",{className:"text-center p-10",children:c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando animales..."})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[c.jsx(r6,{title:"Anlisis de Rebao",subtitle:"Animales en Ordeo",searchTerm:ct,setSearchTerm:ft}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border flex justify-between items-center",children:[c.jsx("button",{onClick:()=>z(Se=>Math.min(Se+1,M.length-1)),disabled:$>=M.length-1,className:"p-2 rounded-full hover:bg-zinc-700/50 disabled:opacity-30",children:c.jsx(tY,{})}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-lg font-semibold text-white",children:H?new Date(H+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"}):"Sin Datos"}),c.jsxs("p",{className:"text-sm text-zinc-400",children:[ee.length," animales pesados"]})]}),c.jsx("button",{onClick:()=>z(Se=>Math.max(Se-1,0)),disabled:$===0,className:"p-2 rounded-full hover:bg-zinc-700/50 disabled:opacity-30",children:c.jsx(Ai,{})})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("button",{onClick:()=>y("media"),className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-orange transition-colors",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[c.jsx(mA,{size:14}),c.jsx("span",{children:s?"Media Ponderada":"Media de Prod."})]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[(s?le:q).toFixed(2)," ",c.jsx("span",{className:"text-lg text-zinc-400",children:"Kg"})]})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[c.jsx(U$,{size:14}),c.jsx("span",{children:"Prod. Total"})]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[Ee.kpi.total.toFixed(2)," ",c.jsx("span",{className:"text-lg text-zinc-400",children:"Kg"})]})]}),c.jsxs("button",{onClick:()=>y("stdDev"),className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-orange transition-colors",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[c.jsx(SY,{size:14}),c.jsx("span",{children:"Consistencia"})]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[Y.toFixed(2)," ",c.jsx("span",{className:"text-lg text-zinc-400",children:""})]})]}),c.jsxs("button",{onClick:()=>y("rango"),className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-orange transition-colors",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[c.jsx(kl,{size:14}),c.jsx("span",{children:"Rango Prod."})]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[Ee.kpi.min.toFixed(2)," - ",Ee.kpi.max.toFixed(2)," ",c.jsx("span",{className:"text-lg text-zinc-400",children:"Kg"})]})]})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border animate-fade-in",children:[c.jsxs("div",{className:"flex justify-between items-center border-b border-brand-border pb-2 mb-4",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(Pf,{className:"text-brand-orange",size:18}),c.jsx("h3",{className:"text-lg font-semibold text-white",children:"Anlisis del Da"}),c.jsx("button",{onClick:()=>E(!0),className:"text-zinc-500 hover:text-white",children:c.jsx(Pv,{size:14})})]}),c.jsxs("label",{className:"flex items-center space-x-2 text-sm text-zinc-300 cursor-pointer",children:[c.jsx(vw,{size:14,className:s?"text-brand-orange":"text-zinc-500"}),c.jsx("span",{children:"Ponderado a DEL"}),c.jsx("button",{type:"button",onClick:Se=>{Se.preventDefault(),Se.stopPropagation(),A(!0)},className:"text-zinc-500 hover:text-white -ml-1",children:c.jsx(Pv,{size:14})}),c.jsx("input",{type:"checkbox",checked:s,onChange:Se=>o(Se.target.checked),className:"form-checkbox h-4 w-4 bg-zinc-700 border-zinc-600 rounded text-brand-orange focus:ring-brand-orange focus:ring-offset-0"})]})]}),c.jsx("div",{className:"w-full h-48",children:c.jsx(mr,{children:c.jsxs(xi,{data:Z,margin:{top:20,right:10,left:-20,bottom:0},children:[c.jsx(kn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(Nn,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(Qt,{cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),c.jsxs(Yn,{dataKey:"count",onClick:Qe,cursor:"pointer",children:[Z.map(Se=>c.jsx(Eo,{fill:Se.fill,className:`${l!=="all"&&l!==Se.name?"opacity-30":"opacity-100"} transition-opacity`},Se.name)),c.jsx(Si,{dataKey:"count",content:c.jsx(TNe,{total:U.length})})]})]})})}),c.jsxs("div",{className:"text-center text-xs text-zinc-400 mt-2",children:[c.jsxs("span",{children:[" = ",q.toFixed(2)]})," | ",c.jsxs("span",{children:[" = ",Y.toFixed(2)]})]})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-2 border border-brand-border space-y-2",children:[c.jsxs("div",{className:"flex justify-between items-center px-2 pt-2",children:[c.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[c.jsx("button",{onClick:()=>d("all"),className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors ${f==="all"?"bg-zinc-600 text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"Todos"}),c.jsxs("button",{onClick:()=>d("up"),className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors flex items-center space-x-1 ${f==="up"?"bg-brand-green/80 text-white":"bg-zinc-800/50 text-brand-green"}`,children:[c.jsx(hA,{size:14})," ",c.jsxs("span",{children:[Dt.up.toFixed(0),"%"]})]}),c.jsxs("button",{onClick:()=>d("down"),className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors flex items-center space-x-1 ${f==="down"?"bg-brand-red/80 text-white":"bg-zinc-800/50 text-brand-red"}`,children:[c.jsx(fA,{size:14})," ",c.jsxs("span",{children:[Dt.down.toFixed(0),"%"]})]}),c.jsxs("button",{onClick:()=>d("single"),className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors flex items-center space-x-1 ${f==="single"?"bg-brand-blue/80 text-white":"bg-zinc-800/50 text-brand-blue"}`,children:[c.jsx(vw,{size:14})," ",c.jsxs("span",{children:[Dt.new.toFixed(0),"%"]})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("div",{className:"text-sm font-medium text-zinc-500",children:[It.length," / ",U.length]}),c.jsx("button",{onClick:fe,title:"Limpiar todos los filtros",className:"text-zinc-500 hover:text-white",children:c.jsx(gA,{size:16})})]})]}),c.jsxs("div",{className:"flex justify-between items-center p-2 border-t border-brand-border",children:[c.jsx("div",{className:"text-xs font-semibold text-zinc-400",children:"Fase Lactancia:"}),c.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[c.jsx("button",{onClick:()=>p("all"),className:`px-2 py-1 text-xs font-semibold rounded-md ${h==="all"?"bg-zinc-600 text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"Todos"}),c.jsx("button",{onClick:()=>p("first"),className:`px-2 py-1 text-xs font-semibold rounded-md ${h==="first"?"bg-brand-blue text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"1er T"}),c.jsx("button",{onClick:()=>p("second"),className:`px-2 py-1 text-xs font-semibold rounded-md ${h==="second"?"bg-brand-blue text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"2do T"}),c.jsx("button",{onClick:()=>p("third"),className:`px-2 py-1 text-xs font-semibold rounded-md ${h==="third"?"bg-brand-blue text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"3er T"}),c.jsx("button",{onClick:()=>p("drying"),className:`px-2 py-1 text-xs font-semibold rounded-md ${h==="drying"?"bg-brand-red/80 text-white":"bg-zinc-800/50 text-brand-red"}`,children:"A Secado"})]})]}),c.jsxs("div",{className:"flex justify-between items-center p-2 border-t border-brand-border",children:[c.jsx("div",{className:"text-xs font-semibold text-zinc-400",children:"Movimientos:"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("button",{onClick:()=>x(Se=>Se==="new"?"all":"new"),disabled:Ee.newAnimalIds.size===0,className:`px-3 py-1 text-xs font-semibold rounded-md flex items-center gap-1.5 transition-all ${b==="new"?"bg-brand-green text-white shadow-lg shadow-green-500/20":"bg-zinc-800/50 text-zinc-300"} ${Ee.newAnimalIds.size>0&&b!=="new"&&"animate-pulse"} disabled:opacity-40 disabled:cursor-not-allowed`,children:[c.jsx(fY,{size:14})," ",c.jsxs("span",{children:["Ingresos (",Ee.newAnimalIds.size,")"]})]}),c.jsxs("button",{onClick:()=>S(!0),disabled:Ee.exitingAnimalIds.size===0,className:`px-3 py-1 text-xs font-semibold rounded-md flex items-center gap-1.5 transition-all bg-zinc-800/50 text-zinc-300 ${Ee.exitingAnimalIds.size>0&&"animate-pulse"} disabled:opacity-40 disabled:cursor-not-allowed`,children:[c.jsx(L$,{size:14})," ",c.jsxs("span",{children:["Salidas (",Ee.exitingAnimalIds.size,")"]})]})]})]})]}),c.jsx("div",{ref:Ye,className:"pt-4",style:{height:"600px",overflowY:"auto"},children:It.length>0?c.jsx("div",{style:{height:`${he.getTotalSize()}px`,width:"100%",position:"relative"},children:he.getVirtualItems().map(Se=>{const Le=It[Se.index];return c.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${Se.size}px`,transform:`translateY(${Se.start}px)`,padding:"0 1rem 0.5rem 1rem"},children:c.jsx(d1,{animal:Le,onSelectAnimal:t,onTrendClick:N})},Se.key)})}):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl mx-4",children:c.jsx("p",{className:"text-zinc-400",children:ct?`No se encontraron resultados para "${ct}"`:"No hay animales con los filtros."})})})]}),T&&c.jsx(yt,{isOpen:!!T,onClose:()=>N(null),title:`Tendencia de ${T.id}`,children:c.jsx(CNe,{animalId:T.id})}),c.jsx(PNe,{isOpen:j,onClose:()=>S(!1),animalIds:Array.from(Ee.exitingAnimalIds),onSelectAnimal:t}),c.jsx(yt,{isOpen:v==="media",onClose:()=>y(null),title:"Tendencia de Produccin Promedio",children:c.jsx("div",{className:"w-full h-56 -ml-4",children:c.jsx(mr,{width:"100%",height:"100%",children:c.jsxs(xi,{data:Ee.trendData,margin:{top:20,right:20,left:-20,bottom:5},children:[c.jsx(Gf,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),c.jsx(kn,{dataKey:"date",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(Nn,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(Qt,{cursor:{fill:"rgba(255, 255, 255, 0.05)"},contentStyle:{backgroundColor:"rgba(0,0,0,0.5)",border:"1px solid rgba(255,255,255,0.2)"}}),c.jsx(Yn,{dataKey:"avg",name:"Promedio Kg",fill:"#FF9500",radius:[4,4,0,0],children:c.jsx(Si,{dataKey:"avg",position:"top",formatter:Se=>Se.toFixed(2),fill:"#FFF",fontSize:12})})]})})})}),c.jsx(yt,{isOpen:v==="rango",onClose:()=>y(null),title:"Extremos de Produccin del Da",children:c.jsxs("div",{className:"space-y-4",children:[Ee.topPerformer&&c.jsxs("div",{className:"bg-green-900/40 border border-green-500/50 rounded-2xl p-4",children:[c.jsx("h3",{className:"font-semibold text-brand-green mb-2",children:"Animal Estrella (Produccin Mxima)"}),c.jsx(d1,{animal:Ee.topPerformer,onSelectAnimal:()=>{y(null),t(Ee.topPerformer.id)},onTrendClick:N})]}),Ee.bottomPerformer&&c.jsxs("div",{className:"bg-red-900/40 border border-red-500/50 rounded-2xl p-4",children:[c.jsx("h3",{className:"font-semibold text-brand-red mb-2",children:"Animal a Observar (Produccin Mnima)"}),c.jsx(d1,{animal:Ee.bottomPerformer,onSelectAnimal:()=>{y(null),t(Ee.bottomPerformer.id)},onTrendClick:N})]})]})}),c.jsx(yt,{isOpen:v==="stdDev",onClose:()=>y(null),title:"Anlisis de Consistencia ()",children:c.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[c.jsx("p",{children:"La Desviacin Estndar () mide qu tan dispersa est la produccin de tu rebao. Un valor **bajo** es ideal, ya que indica un rebao consistente y predecible."}),c.jsxs("div",{className:"bg-black/30 p-4 rounded-lg text-center",children:[c.jsx("p",{className:"text-sm uppercase text-zinc-400",children:"Rebao dentro de 1 de la media"}),c.jsxs("p",{className:"text-4xl font-bold text-brand-orange my-1",children:[Ee.consistency.percentage.toFixed(0),"%"]}),c.jsxs("p",{className:"text-sm text-zinc-400",children:["Esto significa que la mayora de tu rebao tiene un rendimiento muy cercano al promedio de ",c.jsxs("span",{className:"font-bold text-white",children:[q.toFixed(2)," Kg"]}),"."]})]}),c.jsx("p",{className:"text-xs text-zinc-500 pt-2 border-t border-zinc-700",children:"En una distribucin normal perfecta, este valor es del 68%. Un valor superior indica una consistencia excepcional."})]})}),c.jsx(yt,{isOpen:_,onClose:()=>E(!1),title:"Qu es el Anlisis del Ordeo?",children:c.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[c.jsx("p",{children:"Este panel clasifica a los animales en ordeo segn su rendimiento, permitindote identificar rpidamente a los individuos de mayor y menor produccin."}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-white mb-1",children:"Clasificacin (Pobre, Promedio, Sobresaliente)"}),c.jsx("p",{className:"text-sm",children:"Se calcula usando la media () y la desviacin estndar () de la produccin. Los animales que se desvan significativamente del promedio se marcan como pobres o sobresalientes."})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-white mb-1",children:"Ponderado a DEL"}),c.jsxs("p",{className:"text-sm",children:["Al activar este interruptor (",c.jsx(vw,{size:12,className:"inline-block mb-0.5"}),'), el anlisis se vuelve ms inteligente. Otorga un mayor "score" a los animales que producen bien al inicio de su lactancia, ya que es ms valioso que la misma produccin en una etapa tarda.']})]})]})}),c.jsx(yt,{isOpen:P,onClose:()=>A(!1),title:"Qu es el Score Ponderado?",children:c.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[c.jsx("p",{children:"El Score Ponderado ajusta la produccin de un animal para premiar la **persistencia lechera**, un indicador clave de la calidad gentica y la eficiencia."}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-white mb-1",children:"Frmula Aplicada"}),c.jsx("div",{className:"bg-black/30 p-3 rounded-lg text-sm font-mono text-center text-orange-300",children:"Score = Kg  (1 + ((DEL - 50) / (DEL + 50)))"})]}),c.jsx("p",{className:"pt-2 border-t border-zinc-700/80 text-sm",children:"Esto significa que 2 Kg en el da **200** de lactancia obtendrn un score **mucho ms alto** que 2 Kg en el da 40, ayudndote a identificar a tus animales ms eficientes y persistentes."})]})})]})}const NNe=t=>O.useMemo(()=>{if(t.length===0)return{monthlyData:[]};const n=t.reduce((i,a)=>{const s=a.date.substring(0,7);return i[s]||(i[s]=[]),i[s].push(a),i},{});let r=Object.entries(n).map(([i,a])=>{const s=new Date(`${i}-02T12:00:00Z`),o=s.toLocaleString("es-VE",{month:"long",timeZone:"UTC"}),l=s.getUTCFullYear(),u=a.length,f=a.reduce((d,h)=>d+h.kg,0);return{periodLabel:`${o.charAt(0).toUpperCase()+o.slice(1)} ${l}`,periodId:i,totalKg:f,averageKg:u>0?f/u:0,weighingCount:u,animalCount:new Set(a.map(d=>d.goatId)).size,weighingEvents:new Set(a.map(d=>d.date)).size,weighings:a,newAnimalsWeighings:[]}}).sort((i,a)=>a.periodId.localeCompare(i.periodId));return r=r.map((i,a,s)=>{const o=s[a+1];if(o){const l=o.averageKg?(i.averageKg-o.averageKg)/o.averageKg*100:void 0,u=o.animalCount?(i.animalCount-o.animalCount)/o.animalCount*100:void 0,f=new Set(o.weighings.map(y=>y.goatId)),d=new Set(i.weighings.map(y=>y.goatId)),h=new Set([...d].filter(y=>!f.has(y))),p=i.weighings.filter(y=>h.has(y.goatId)),v=[...f].filter(y=>!d.has(y)).length;return{...i,avgKgChange:l,animalCountChange:u,newAnimalsWeighings:p,previousAnimalCount:o.animalCount,exitingAnimalCount:v}}return{...i,newAnimalsWeighings:i.weighings,previousAnimalCount:0,exitingAnimalCount:0}}),{monthlyData:r,quarterlyData:[],yearlyData:[]}},[t]),Ly=({value:t})=>{if(t===void 0||isNaN(t))return null;const e=t>0,n=e?"text-brand-green":"text-brand-red",r=e?hA:fA;return c.jsxs("span",{className:`flex items-center text-sm font-bold ${n}`,children:[c.jsx(r,{size:16,className:"mr-0.5"}),t.toFixed(1),"%"]})},ONe=({stats:t,onClick:e})=>c.jsxs("button",{onClick:e,className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-brand-orange transition-colors",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-lg text-white",children:t.periodLabel}),c.jsxs("p",{className:"text-sm text-zinc-400",children:["Prom: ",t.averageKg.toFixed(2)," Kg | ",t.animalCount," animales"]})]}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx(Ly,{value:t.avgKgChange}),c.jsx(Ai,{className:"text-zinc-600"})]})]}),J8=({weighing:t,onSelectAnimal:e})=>c.jsxs("button",{onClick:()=>e(t.id),className:"w-full text-left bg-black/20 rounded-lg p-3 border border-zinc-700/50 flex justify-between items-center hover:border-orange-400/50",children:[c.jsx("div",{className:"flex items-center gap-4",children:c.jsx("div",{children:c.jsxs("p",{className:"font-bold text-base text-white flex items-center gap-2",children:[t.id,c.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full text-white ${t.classification==="Pobre"?"bg-brand-red/80":t.classification==="Sobresaliente"?"bg-brand-green/80":"bg-gray-500/80"}`,children:t.classification})]})})}),c.jsxs("p",{className:"font-semibold text-lg text-white",children:[t.latestWeighing.toFixed(2)," ",c.jsx("span",{className:"text-base font-medium text-zinc-400",children:"Kg"})]})]}),e9=t=>{const{x:e,y:n,width:r,value:i,total:a}=t;if(a===0||i===0)return null;const s=(i/a*100).toFixed(0);return c.jsx("text",{x:e+r/2,y:n+20,fill:"#fff",textAnchor:"middle",fontSize:"12px",fontWeight:"bold",children:`${s}%`})},INe=({isOpen:t,onClose:e,data:n,periodLabel:r,onSelectAnimal:i})=>{const{animals:a,weighings:s,parturitions:o}=at(),[l,u]=O.useState("all"),f=V0((n==null?void 0:n.weighings)||[],a,s,o,!1),d=O.useMemo(()=>l==="all"?f.classifiedAnimals:f.classifiedAnimals.filter(p=>p.classification===l),[f.classifiedAnimals,l]),h=p=>{if(p!=null&&p.name){const v=p.name;u(y=>y===v?"all":v)}};return!t||!n?null:c.jsx(yt,{isOpen:t,onClose:e,title:`Anlisis de Nuevos Ingresos - ${r}`,children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-black/20 p-3 rounded-2xl",children:[c.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[c.jsx(qm,{size:14}),"Promedio"]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[f.mean.toFixed(2),c.jsx("span",{className:"text-lg ml-1 text-zinc-400",children:"Kg"})]})]}),c.jsxs("div",{className:"bg-black/20 p-3 rounded-2xl",children:[c.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[c.jsx(iu,{size:14}),"Animales"]}),c.jsx("p",{className:"text-2xl font-bold text-white",children:f.classifiedAnimals.length})]})]}),c.jsx("div",{className:"bg-black/20 backdrop-blur-xl rounded-2xl p-4 border border-zinc-800/50",children:c.jsx("div",{className:"w-full h-48",children:c.jsx(mr,{children:c.jsxs(xi,{data:f.distribution,margin:{top:20,right:10,left:-20,bottom:0},children:[c.jsx(kn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(Nn,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(Qt,{cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),c.jsxs(Yn,{dataKey:"count",onClick:h,cursor:"pointer",children:[f.distribution.map(p=>c.jsx(Eo,{fill:p.fill,className:`${l!=="all"&&l!==p.name?"opacity-30":"opacity-100"}`},p.name)),c.jsx(Si,{dataKey:"count",content:c.jsx(e9,{total:f.classifiedAnimals.length})})]})]})})})}),c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:d.sort((p,v)=>v.latestWeighing-p.latestWeighing).map(p=>c.jsx(J8,{weighing:p,onSelectAnimal:i},p.weighingId||p.id))})]})})};function DNe({onSelectAnimal:t,selectedPeriod:e,setSelectedPeriod:n}){const{animals:r,weighings:i,parturitions:a,isLoading:s}=at(),[o,l]=O.useState("monthly"),[u,f]=O.useState(!1),[d,h]=O.useState(null),[p,v]=O.useState("all"),{monthlyData:y}=NNe(i),b=V0((e==null?void 0:e.weighings)||[],r,i,a,!1),x=O.useMemo(()=>p==="all"?b.classifiedAnimals:b.classifiedAnimals.filter(A=>A.classification===p),[b.classifiedAnimals,p]),_=A=>{if(A!=null&&A.name){const j=A.name;v(S=>S===j?"all":j)}},P={monthly:y,quarterly:[],yearly:[]}[o];return s?c.jsx("div",{className:"text-center p-10",children:c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando historial..."})}):e?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12 animate-fade-in",children:[c.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[c.jsx("button",{onClick:()=>{n(null),v("all")},className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(or,{size:24})}),c.jsxs("div",{className:"text-center flex-grow",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:e.periodLabel}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Anlisis del Perodo"})]}),c.jsx("div",{className:"w-8"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-brand-glass p-3 rounded-2xl",children:[c.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[c.jsx(qm,{size:14}),"Promedio / Animal"]}),c.jsxs("div",{className:"flex items-baseline gap-2",children:[c.jsxs("p",{className:"text-2xl font-bold text-white",children:[e.averageKg.toFixed(2),c.jsx("span",{className:"text-lg ml-1 text-zinc-400",children:"Kg"})]}),c.jsx(Ly,{value:e.avgKgChange})]})]}),c.jsxs("div",{className:"bg-brand-glass p-3 rounded-2xl",children:[c.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[c.jsx(ho,{size:14}),"Eventos de Pesaje"]}),c.jsx("p",{className:"text-2xl font-bold text-white",children:e.weighingEvents})]}),c.jsxs("div",{className:"bg-brand-glass p-3 rounded-2xl",children:[c.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[c.jsx(iu,{size:14}),"Animales Ordeados"]}),c.jsxs("button",{onClick:()=>f(!0),className:"flex items-baseline gap-2 w-full text-left",children:[c.jsx("p",{className:"text-2xl font-bold text-white",children:e.animalCount}),c.jsx(Ly,{value:e.animalCountChange})]})]}),c.jsxs("div",{className:"bg-brand-glass p-3 rounded-2xl",children:[c.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[c.jsx(kl,{size:14}),"Total Registrado"]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[e.totalKg.toFixed(0),c.jsx("span",{className:"text-lg ml-1 text-zinc-400",children:"Kg"})]})]})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsxs("div",{className:"flex items-center space-x-2 border-b border-brand-border pb-2 mb-4",children:[c.jsx(Pf,{className:"text-brand-orange",size:18}),c.jsx("h3",{className:"text-lg font-semibold text-white",children:"Distribucin del Perodo"})]}),c.jsx("div",{className:"w-full h-48",children:c.jsx(mr,{children:c.jsxs(xi,{data:b.distribution,margin:{top:20,right:10,left:-20,bottom:0},children:[c.jsx(kn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(Nn,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(Qt,{cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),c.jsxs(Yn,{dataKey:"count",onClick:_,cursor:"pointer",children:[b.distribution.map(A=>c.jsx(Eo,{fill:A.fill,className:`${p!=="all"&&p!==A.name?"opacity-30":"opacity-100"} transition-opacity`},A.name)),c.jsx(Si,{dataKey:"count",content:c.jsx(e9,{total:b.classifiedAnimals.length})})]})]})})}),c.jsxs("div",{className:"text-center text-xs text-zinc-400 mt-2",children:[c.jsxs("span",{children:[" = ",b.mean.toFixed(2)," Kg"]})," | ",c.jsxs("span",{children:[" = ",b.stdDev.toFixed(2)]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 ml-1 mt-4",children:["Pesajes del Perodo (",x.length,")"]}),x.sort((A,j)=>j.latestWeighing-A.latestWeighing).map(A=>c.jsx(J8,{weighing:A,onSelectAnimal:t},A.weighingId||A.id))]})]}),c.jsx(yt,{isOpen:u,onClose:()=>f(!1),title:"Variacin de Animales en Ordeo",children:c.jsxs("div",{className:"text-zinc-300 space-y-4",children:[c.jsxs("div",{children:[c.jsxs("h4",{className:"font-semibold text-white mb-1",children:[e.periodLabel," vs Mes Anterior"]}),c.jsxs("p",{className:"text-sm text-zinc-400",children:["El mes anterior tenas ",c.jsx("span",{className:"font-bold text-white",children:e.previousAnimalCount})," animales en ordeo. Este mes tienes ",c.jsx("span",{className:"font-bold text-white",children:e.animalCount}),"."]}),c.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[c.jsxs("p",{children:["El cambio neto es de ",c.jsx("span",{className:"font-bold text-white",children:e.animalCount-e.previousAnimalCount})," animales"]}),c.jsx(Ly,{value:e.animalCountChange})]})]}),c.jsxs("div",{className:"pt-4 border-t border-zinc-700/80",children:[e.exitingAnimalCount>0&&c.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:["Salieron del ordeo: ",c.jsx("span",{className:"font-bold text-brand-red",children:e.exitingAnimalCount})," animales."]}),e.newAnimalsWeighings.length>0&&c.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:["Nuevos ingresos: ",c.jsx("span",{className:"font-bold text-brand-green",children:new Set(e.newAnimalsWeighings.map(A=>A.goatId)).size})," animales."]}),e.newAnimalsWeighings.length>0&&c.jsxs("button",{onClick:()=>{h({...e,weighings:e.newAnimalsWeighings}),f(!1)},className:"w-full mt-4 bg-brand-orange text-white font-semibold py-2 rounded-lg hover:bg-orange-600 transition-colors",children:["Analizar los ",new Set(e.newAnimalsWeighings.map(A=>A.goatId)).size," Nuevos Ingresos"]})]})]})}),c.jsx(INe,{isOpen:!!d,onClose:()=>h(null),data:d,periodLabel:e.periodLabel,onSelectAnimal:t})]}):c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[c.jsxs("header",{className:"text-center pt-8 pb-4",children:[c.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white",children:"Historial de Produccin"}),c.jsx("p",{className:"text-xl text-zinc-400",children:"La pelcula de tu rebao"})]}),c.jsx("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-2 border border-brand-border",children:c.jsxs("div",{className:"flex bg-zinc-900/80 rounded-xl p-1 w-full",children:[c.jsx("button",{onClick:()=>l("monthly"),className:`w-1/3 px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors ${o==="monthly"?"bg-brand-orange text-white":"text-zinc-300 hover:bg-zinc-700/50"}`,children:"Mensual"}),c.jsx("button",{disabled:!0,className:"w-1/3 px-4 py-1.5 text-sm font-semibold rounded-lg opacity-50 cursor-not-allowed",children:"Trimestral"}),c.jsx("button",{disabled:!0,className:"w-1/3 px-4 py-1.5 text-sm font-semibold rounded-lg opacity-50 cursor-not-allowed",children:"Anual"})]})}),c.jsx("div",{className:"space-y-2",children:(P||[]).map(A=>c.jsx(ONe,{stats:A,onClick:()=>n(A)},A.periodId))})]})}const MNe=({selectedDate:t,onDateChange:e,onOpenCalendar:n})=>{const r=O.useMemo(()=>{const a=new Date;return a.setHours(0,0,0,0),Array.from({length:7},(s,o)=>{const l=new Date(a);return l.setDate(a.getDate()-o),l})},[]),i=(a,s)=>{if(a.getTime()===s.getTime())return"Hoy";const o=new Date(s);return o.setDate(s.getDate()-1),a.getTime()===o.getTime()?"Ayer":a.toLocaleDateString("es-VE",{weekday:"short"}).replace(".","")};return c.jsxs("div",{className:"px-4",children:[c.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-zinc-400 mb-2",children:[c.jsx(ho,{size:16}),"Fecha del Pesaje"]}),c.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",style:{scrollbarWidth:"none",WebkitOverflowScrolling:"touch"},children:[c.jsxs("button",{type:"button",onClick:n,className:"flex flex-col items-center justify-center bg-zinc-800/80 rounded-lg p-2 w-16 h-16 flex-shrink-0 text-zinc-300 hover:bg-zinc-700 transition-colors",children:[c.jsx(ho,{size:20}),c.jsx("span",{className:"text-xs mt-1",children:"Calendario"})]}),r.map(a=>{const s=a.getTime()===t.getTime();return c.jsxs("button",{type:"button",onClick:()=>e(a),className:`flex flex-col items-center justify-center rounded-lg p-2 w-16 h-16 flex-shrink-0 transition-colors ${s?"bg-brand-orange text-white":"bg-zinc-800/80 text-zinc-300 hover:bg-zinc-700"}`,children:[c.jsx("span",{className:"text-xs capitalize",children:i(a,r[0])}),c.jsx("span",{className:"font-bold text-2xl",children:a.getDate()}),c.jsx("span",{className:"text-xs",children:a.toLocaleDateString("es-VE",{month:"short"}).replace(".","")})]},a.toISOString())})]})]})},RNe=({entry:t,onDelete:e,onRegister:n})=>{const r=!t.isRecognized;return c.jsxs("div",{className:`p-3 rounded-lg flex justify-between items-center animate-fade-in group ${r?"bg-amber-900/40 border border-amber-500/50":"bg-zinc-800/50"}`,children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[r&&c.jsx(yn,{className:"text-amber-400 flex-shrink-0",size:18}),c.jsx("span",{className:"font-semibold text-white",children:t.animalId})]}),c.jsxs("div",{className:"flex items-center space-x-3",children:[r?c.jsx("button",{onClick:()=>n(t.animalId),className:"text-xs font-semibold bg-brand-orange text-white px-2 py-1 rounded-md hover:bg-orange-600",children:"Registrar Parto"}):c.jsxs("span",{className:"text-zinc-300 font-semibold",children:[t.kg.toFixed(2)," Kg"]}),c.jsx("button",{onClick:()=>e(t.tempId),className:"p-1 text-zinc-400 hover:text-brand-red opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(Nl,{size:16})})]})]})},$Ne=({onBack:t,onSaveSuccess:e})=>{const{animals:n,weighings:r,fetchData:i}=at(),[a,s]=O.useState(""),[o,l]=O.useState(""),[u,f]=O.useState([]),[d,h]=O.useState(null),[p,v]=O.useState(()=>{const $=new Date;return $.setHours(0,0,0,0),$}),[y,b]=O.useState(!1),[x,_]=O.useState({isOpen:!1,motherId:""}),E=O.useRef(null),P=O.useRef(null),A=()=>{var Z;if(h(null),!a||!o)return;const $=a.toUpperCase().trim(),z=parseFloat(o),H=p.toISOString().split("T")[0];if(z>8.5){h({type:"error",text:`Produccin de ${z} Kg es muy alta. Lmite: 8.5 Kg.`}),l("");return}if(u.some(q=>q.animalId===$)){h({type:"error",text:`${$} ya tiene un pesaje en esta sesin.`});return}if(r.some(q=>q.goatId===$&&q.date===H)){h({type:"error",text:`${$} ya tiene un pesaje guardado para esta fecha.`});return}const ee=n.find(q=>q.id===$);if(ee&&ee.isReference){h({type:"error",text:`${$} es un animal de Referencia. No se pueden aadir pesajes.`});return}const U={tempId:Date.now(),animalId:$,kg:z,date:H,isRecognized:!!ee};f(q=>[U,...q]),s(""),l(""),(Z=E.current)==null||Z.focus()},j=async()=>{h(null);const{currentUser:$}=$d;if(!$){h({type:"error",text:"Error de autenticacin."});return}const z=u.filter(H=>!H.isRecognized).length;if(z>0){h({type:"error",text:`No se puede guardar. Tienes ${z} animal(es) sin registrar.`});return}if(u.length===0){h({type:"error",text:"No hay pesajes para guardar."});return}try{const H=Tv(gt),ee=er(gt,"weighings");u.forEach(U=>{const Z=hn(ee),q={goatId:U.animalId,kg:U.kg,date:U.date,userId:$.uid};H.set(Z,q)}),await H.commit(),h({type:"success",text:`${u.length} pesajes guardados con xito.`}),f([]),setTimeout(()=>e(p.toISOString().split("T")[0]),1500)}catch(H){h({type:"error",text:"Ocurri un error al guardar en la nube."}),console.error("Error en escritura por lote:",H)}},S=$=>{var z;$.key==="Enter"&&a&&($.preventDefault(),(z=P.current)==null||z.focus())},T=$=>{$.key==="Enter"&&o&&($.preventDefault(),A())},N=$=>{f(z=>z.filter(H=>H.tempId!==$))},D=$=>{$&&($.setHours(0,0,0,0),v($)),b(!1)},M=()=>{i(),f($=>$.map(z=>z.animalId===x.motherId?{...z,isRecognized:!0}:z)),_({isOpen:!1,motherId:""})};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-col h-full",children:[c.jsxs("div",{className:"flex-shrink-0 space-y-4",children:[c.jsxs("header",{className:"text-center px-4 flex items-center",children:[c.jsx("button",{onClick:t,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(or,{size:24})}),c.jsxs("div",{className:"flex-grow",children:[c.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Carga Rpida de Leche"}),c.jsx("p",{className:"text-md text-zinc-400",children:"Sesin de Ordeo"})]}),c.jsx("div",{className:"w-8"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(MNe,{selectedDate:p,onDateChange:v,onOpenCalendar:()=>b(!0)}),c.jsxs("div",{className:"flex items-center gap-2 px-4",children:[c.jsx("input",{ref:E,type:"text",value:a,onChange:$=>s($.target.value),onKeyDown:S,placeholder:"ID Animal",className:"w-full bg-brand-glass p-4 rounded-xl text-lg placeholder-zinc-500 border-2 border-transparent focus:border-brand-orange focus:ring-0"}),c.jsx("input",{ref:P,type:"number",step:"0.01",value:o,onChange:$=>l($.target.value),onKeyDown:T,placeholder:"Kg",className:"w-32 flex-shrink-0 bg-brand-glass p-4 rounded-xl text-lg placeholder-zinc-500 border-2 border-transparent focus:border-brand-orange focus:ring-0"}),c.jsx("button",{onClick:A,disabled:!a||!o,"aria-label":"Aadir a la lista",className:"aspect-square h-full bg-brand-orange text-white rounded-xl flex items-center justify-center transition-all hover:bg-orange-600 disabled:opacity-40",children:c.jsx(Pl,{size:24})})]})]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto px-4 space-y-2 py-4",children:[u.length===0&&c.jsx("p",{className:"text-center text-zinc-500 text-sm pt-8",children:"Los pesajes aadidos aparecern aqu."}),u.map($=>c.jsx(RNe,{entry:$,onDelete:N,onRegister:z=>_({isOpen:!0,motherId:z})},$.tempId))]}),c.jsxs("div",{className:"flex-shrink-0 p-4 border-t border-brand-border bg-gray-900/80 backdrop-blur-sm",children:[d&&c.jsxs("div",{className:`mb-3 flex items-center space-x-2 p-3 rounded-lg text-sm ${d.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[" ",d.type==="success"?c.jsx(ma,{size:18}):c.jsx(yn,{size:18})," ",c.jsx("span",{children:d.text})," "]}),c.jsxs("button",{onClick:j,className:"w-full flex items-center justify-center gap-2 bg-brand-orange/20 border border-brand-orange text-brand-orange hover:bg-brand-orange/30 font-bold py-4 px-4 rounded-xl transition-colors text-lg",children:[c.jsx(xA,{size:20})," Guardar ",u.length>0?`(${u.length})`:""," Pesajes"]})]})]}),c.jsx(yt,{isOpen:y,onClose:()=>b(!1),title:"Seleccionar Fecha",children:c.jsx("div",{className:"flex justify-center",children:c.jsx(Df,{mode:"single",selected:p,onSelect:D})})}),c.jsx(a6,{isOpen:x.isOpen,onClose:M,motherId:x.motherId})]})};function LNe({onNavigate:t}){const[e,n]=O.useState("options");return e==="rapid"?c.jsx($Ne,{onBack:()=>n("options"),onSaveSuccess:()=>{t&&t("dashboard",{})}}):c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in",children:[c.jsxs("header",{className:"text-center pt-8 pb-4",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Aadir Datos de Leche"}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Selecciona un mtodo de carga"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("button",{onClick:()=>n("rapid"),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-brand-orange text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[c.jsx(Gm,{className:"w-12 h-12 mb-2 text-brand-orange"}),c.jsx("span",{className:"text-lg font-semibold",children:"Carga Rpida"}),c.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Para carga masiva con teclado"})]}),c.jsxs("button",{onClick:()=>t("ocr",{}),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-brand-blue text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[c.jsx(B$,{className:"w-12 h-12 mb-2 text-brand-blue"}),c.jsx("span",{className:"text-lg font-semibold",children:"Escanear Cuaderno"}),c.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Digitalizacin asistida por IA"})]})]})]})}function zNe({navigateToRebano:t,onExitModule:e}){const{syncStatus:n}=at(),[r,i]=O.useState("dashboard"),[a,s]=O.useState(null),o=[{id:"dashboard",label:"Dashboard",icon:Pf},{id:"analysis",label:"Anlisis",icon:R$},{id:"history",label:"Historial",icon:N$},{id:"add-data",label:"Aadir",icon:Pl},{id:"drying",label:"Secado",icon:_A}],l=()=>{r==="dashboard"?e():i("dashboard")},u=d=>{t({name:"lactation-profile",animalId:d})},f=()=>{switch(r){case"dashboard":return c.jsx(XM,{onNavigateToAnalysis:()=>i("analysis")});case"analysis":return c.jsx(kNe,{onSelectAnimal:u});case"history":return c.jsx(DNe,{onSelectAnimal:u,selectedPeriod:a,setSelectedPeriod:s});case"add-data":return c.jsx(LNe,{onNavigate:(d,h)=>t({name:d,...h})});case"drying":return c.jsx(s6,{onSelectAnimal:u});default:return c.jsx(XM,{onNavigateToAnalysis:()=>i("analysis")})}};return c.jsxs("div",{className:"min-h-screen animate-fade-in text-white flex flex-col",children:[c.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-gray-900/80 backdrop-blur-lg border-b border-brand-border",children:c.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[c.jsx("button",{onClick:l,className:"p-2 -ml-2 text-zinc-400 hover:text-white","aria-label":"Atrs",children:c.jsx(or,{size:24})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Ree,{className:"text-brand-orange",size:28}),c.jsx("h1",{className:"text-xl font-bold",children:"LactoKeeper"})]}),c.jsx("div",{className:"w-8 flex justify-end",children:c.jsx(jb,{status:n})})]})}),c.jsx("main",{className:"flex-grow pt-16 pb-24",children:f()}),c.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-black/30 backdrop-blur-xl border-t border-white/20 flex justify-around",children:o.map(d=>c.jsxs("button",{onClick:()=>i(d.id),className:`flex flex-col items-center justify-center p-3 w-full transition-colors ${r===d.id?"text-brand-orange":"text-gray-400 hover:text-brand-orange"}`,children:[c.jsx(d.icon,{className:"w-6 h-6 mb-1"}),c.jsx("span",{className:"text-xs font-semibold",children:d.label})]},d.id))})]})}const VNe=({selectedDate:t,onDateChange:e,onOpenCalendar:n})=>{const r=O.useMemo(()=>{const a=new Date;return a.setHours(0,0,0,0),Array.from({length:7},(s,o)=>{const l=new Date(a);return l.setDate(a.getDate()-o),l})},[]),i=(a,s)=>{if(a.getTime()===s.getTime())return"Hoy";const o=new Date(s);return o.setDate(s.getDate()-1),a.getTime()===o.getTime()?"Ayer":a.toLocaleDateString("es-VE",{weekday:"short"}).replace(".","")};return c.jsxs("div",{className:"px-4",children:[c.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-zinc-400 mb-2",children:[c.jsx(ho,{size:16}),"Fecha del Pesaje"]}),c.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",style:{scrollbarWidth:"none",WebkitOverflowScrolling:"touch"},children:[c.jsxs("button",{type:"button",onClick:n,className:"flex flex-col items-center justify-center bg-zinc-800/80 rounded-lg p-2 w-16 h-16 flex-shrink-0 text-zinc-300 hover:bg-zinc-700 transition-colors",children:[c.jsx(ho,{size:20}),c.jsx("span",{className:"text-xs mt-1",children:"Calendario"})]}),r.map(a=>{const s=a.getTime()===t.getTime();return c.jsxs("button",{type:"button",onClick:()=>e(a),className:`flex flex-col items-center justify-center rounded-lg p-2 w-16 h-16 flex-shrink-0 transition-colors ${s?"bg-brand-green text-white":"bg-zinc-800/80 text-zinc-300 hover:bg-zinc-700"}`,children:[c.jsx("span",{className:"text-xs capitalize",children:i(a,r[0])}),c.jsx("span",{className:"font-bold text-2xl",children:a.getDate()}),c.jsx("span",{className:"text-xs",children:a.toLocaleDateString("es-VE",{month:"short"}).replace(".","")})]},a.toISOString())})]})]})},FNe=({entry:t,onDelete:e})=>{const n=!t.isRecognized;return c.jsxs("div",{className:`p-3 rounded-lg flex justify-between items-center animate-fade-in group ${n?"bg-amber-900/40 border border-amber-500/50":"bg-zinc-800/50"}`,children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[n&&c.jsx(yn,{className:"text-amber-400 flex-shrink-0",size:18}),c.jsx("span",{className:"font-semibold text-white",children:t.animalId})]}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsxs("span",{className:"text-zinc-300 font-semibold",children:[t.kg.toFixed(2)," Kg"]}),c.jsx("button",{onClick:()=>e(t.tempId),className:"p-1 text-zinc-400 hover:text-brand-red opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(Nl,{size:16})})]})]})},BNe=({onBack:t,onSaveSuccess:e})=>{const{animals:n}=at(),[r,i]=O.useState(""),[a,s]=O.useState(""),[o,l]=O.useState([]),[u,f]=O.useState(null),[d,h]=O.useState(()=>{const S=new Date;return S.setHours(0,0,0,0),S}),[p,v]=O.useState(!1),y=O.useRef(null),b=O.useRef(null),x=()=>{var D;if(!r||!a)return;const S=r.toUpperCase().trim(),T=n.find(M=>M.id===S);if(T&&T.isReference){f({type:"error",text:`${S} es un animal de Referencia y no se le pueden aadir pesajes.`});return}const N={tempId:Date.now(),animalId:S,kg:parseFloat(a),date:d.toISOString().split("T")[0],isRecognized:!!T};l(M=>[N,...M]),i(""),s(""),(D=y.current)==null||D.focus()},_=async()=>{f(null);const{currentUser:S}=$d;if(!S){f({type:"error",text:"Error de autenticacin."});return}if(o.length===0){f({type:"error",text:"No hay pesajes para guardar."});return}try{const T=Tv(gt),N=er(gt,"bodyWeighings");o.forEach(D=>{const M=hn(N),$={animalId:D.animalId,kg:D.kg,date:D.date,userId:S.uid};T.set(M,$)}),await T.commit(),f({type:"success",text:`${o.length} pesajes guardados con xito.`}),l([]),setTimeout(()=>e(d.toISOString().split("T")[0]),1500)}catch(T){f({type:"error",text:"Ocurri un error al guardar en la nube."}),console.error("Error en escritura por lote:",T)}},E=S=>{var T;S.key==="Enter"&&r&&(S.preventDefault(),(T=b.current)==null||T.focus())},P=S=>{S.key==="Enter"&&a&&(S.preventDefault(),x())},A=S=>{l(T=>T.filter(N=>N.tempId!==S))},j=S=>{S&&(S.setHours(0,0,0,0),h(S)),v(!1)};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-col h-full animate-fade-in",children:[c.jsxs("div",{className:"flex-shrink-0 space-y-4",children:[c.jsxs("header",{className:"text-center px-4 flex items-center",children:[c.jsx("button",{onClick:t,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(or,{size:24})}),c.jsxs("div",{className:"flex-grow",children:[c.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Carga Rpida de Peso"}),c.jsx("p",{className:"text-md text-zinc-400",children:"Sesin de Pesaje"})]}),c.jsx("div",{className:"w-8"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(VNe,{selectedDate:d,onDateChange:h,onOpenCalendar:()=>v(!0)}),c.jsxs("div",{className:"flex items-center gap-2 px-4",children:[c.jsx("input",{ref:y,type:"text",value:r,onChange:S=>i(S.target.value),onKeyDown:E,placeholder:"ID Animal",className:"w-full bg-brand-glass p-4 rounded-xl text-lg placeholder-zinc-500 border-2 border-transparent focus:border-brand-green focus:ring-0"}),c.jsx("input",{ref:b,type:"number",step:"0.01",value:a,onChange:S=>s(S.target.value),onKeyDown:P,placeholder:"Kg",className:"w-32 flex-shrink-0 bg-brand-glass p-4 rounded-xl text-lg placeholder-zinc-500 border-2 border-transparent focus:border-brand-green focus:ring-0"}),c.jsx("button",{onClick:x,disabled:!r||!a,"aria-label":"Aadir a la lista",className:"aspect-square h-full bg-brand-orange text-white rounded-xl flex items-center justify-center transition-all hover:bg-orange-600 disabled:opacity-40",children:c.jsx(Pl,{size:24})})]})]})]}),c.jsxs("div",{className:"flex-grow overflow-y-auto px-4 space-y-2 py-4",children:[o.length===0&&c.jsx("p",{className:"text-center text-zinc-500 text-sm pt-8",children:"Los pesajes aadidos aparecern aqu."}),o.map(S=>c.jsx(FNe,{entry:S,onDelete:A},S.tempId))]}),c.jsxs("div",{className:"flex-shrink-0 p-4 border-t border-brand-border bg-gray-900/80 backdrop-blur-sm",children:[u&&c.jsxs("div",{className:`mb-3 flex items-center space-x-2 p-3 rounded-lg text-sm ${u.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[" ",u.type==="success"?c.jsx(ma,{size:18}):c.jsx(yn,{size:18})," ",c.jsx("span",{children:u.text})," "]}),c.jsxs("button",{onClick:_,className:"w-full flex items-center justify-center gap-2 bg-brand-green/20 border border-brand-green text-brand-green hover:bg-brand-green/30 font-bold py-4 px-4 rounded-xl transition-colors text-lg",children:[c.jsx(xA,{size:20})," Guardar ",o.length>0?`(${o.length})`:""," Pesajes"]})]})]}),c.jsx(yt,{isOpen:p,onClose:()=>v(!1),title:"Seleccionar Fecha",children:c.jsx("div",{className:"flex justify-center",children:c.jsx(Df,{mode:"single",selected:d,onSelect:j})})})]})};function UNe({onNavigate:t,onSaveSuccess:e}){const[n,r]=O.useState("options");return n==="rapid"?c.jsx(BNe,{onBack:()=>r("options"),onSaveSuccess:e}):c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4",children:[c.jsxs("header",{className:"text-center",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Aadir Pesaje Corporal"}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Carga de Datos de Crecimiento"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("button",{onClick:()=>r("rapid"),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-brand-green text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[c.jsx(Gm,{className:"w-12 h-12 mb-2 text-brand-green"}),c.jsx("span",{className:"text-lg font-semibold",children:"Carga Rpida"}),c.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Para carga masiva con teclado"})]}),c.jsxs("button",{onClick:()=>t("ocr",{}),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-brand-blue text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[c.jsx(B$,{className:"w-12 h-12 mb-2 text-brand-blue"}),c.jsx("span",{className:"text-lg font-semibold",children:"Escanear Cuaderno"}),c.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Digitalizacin asistida por IA"})]})]})]})}const WNe=({gdp:t,averageGdp:e})=>{if(!t||!e||e===0)return null;const n=t/e;return n>1.1?c.jsx(kl,{size:18,className:"text-brand-green"}):n<.9?c.jsx(EY,{size:18,className:"text-brand-red"}):c.jsx(z$,{size:18,className:"text-zinc-500"})},KNe=({animal:t,onSelect:e,averageGdp:n})=>c.jsxs("button",{onClick:()=>e(t.id),className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-brand-green transition-colors",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),c.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:[t.sex," | ",t.formattedAge," | Lote: ",t.location||"N/A"]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:"font-semibold text-white",children:[t.gdp.overall?`${(t.gdp.overall*1e3).toFixed(0)}`:"--",c.jsx("span",{className:"text-sm text-zinc-400",children:" g/da"})]}),c.jsx("p",{className:`font-bold text-sm ${t.classification==="Sobresaliente"?"text-brand-green":t.classification==="Pobre"?"text-brand-red":"text-zinc-400"}`,children:t.classification})]}),c.jsx(WNe,{gdp:t.gdp.overall,averageGdp:n}),c.jsx(Ai,{className:"text-zinc-600"})]})]});function QM({onSelectAnimal:t}){const{animals:e,bodyWeighings:n,parturitions:r}=at(),i=O.useMemo(()=>{const a=e.filter(_=>{const E=Of(_,r);return["Cabrita","Cabritona","Cabrito","Macho de Levante"].includes(E)});if(a.length===0)return{analyzedAnimals:[],distribution:[],averageGdp:0};let s=0,o=0;const l=a.map(_=>{const E=n.filter(A=>A.animalId===_.id),P=oj(_.birthWeight,E);return P.overall&&P.overall>0&&(s+=P.overall,o++),{..._,formattedAge:Ya(_.birthDate),gdp:P}}),u=o>0?s/o:0,f=l.map(_=>({..._,score:_.gdp.overall?See(_.gdp.overall,u,eo(_.birthDate)):0})),d=f.filter(_=>_.score>0).map(_=>_.score),h=d.length>0?d.reduce((_,E)=>_+E,0)/d.length:0,p=d.length>0?Math.sqrt(d.reduce((_,E)=>_+Math.pow(E-h,2),0)/d.length):0,v=h-.4*p,y=h+.4*p,b=f.map(_=>{let E="Promedio";return _.score>0&&p>1&&(_.score<v?E="Pobre":_.score>y&&(E="Sobresaliente")),{..._,classification:E}}),x=[{name:"Pobre",count:b.filter(_=>_.classification==="Pobre").length,fill:"#FF3B30"},{name:"Promedio",count:b.filter(_=>_.classification==="Promedio").length,fill:"#6B7280"},{name:"Sobresaliente",count:b.filter(_=>_.classification==="Sobresaliente").length,fill:"#34C759"}];return{analyzedAnimals:b.sort((_,E)=>E.score-_.score),distribution:x,averageGdp:u}},[e,n,r]);return c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in",children:[c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-2 text-xs uppercase tracking-wider",children:[c.jsx(kl,{}),c.jsx("span",{children:"GDP Promedio del Levante"})]}),c.jsxs("p",{className:"text-4xl font-bold tracking-tight text-white",children:[(i.averageGdp*1e3).toFixed(0)," ",c.jsx("span",{className:"text-2xl font-medium text-zinc-400",children:"g/da"})]})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Distribucin del Crecimiento"}),c.jsx("div",{className:"w-full h-48",children:c.jsx(mr,{children:c.jsxs(xi,{data:i.distribution,margin:{top:20,right:10,left:-20,bottom:0},children:[c.jsx(kn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(Nn,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(Qt,{content:c.jsx(vf,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),c.jsx(Yn,{dataKey:"count",children:i.distribution.map(a=>c.jsx(Eo,{fill:a.fill},a.name))})]})})})]}),c.jsxs("div",{className:"space-y-2 pt-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 ml-1",children:["Animales en Levante (",i.analyzedAnimals.length,")"]}),i.analyzedAnimals.length>0?i.analyzedAnimals.map(a=>c.jsx(KNe,{animal:a,onSelect:()=>t(a.id),averageGdp:i.averageGdp},a.id)):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:c.jsx("p",{className:"text-zinc-500",children:"No hay animales en fase de levante o no se han registrado pesajes."})})]})]})}const qNe=()=>{const{animals:t,bodyWeighings:e,parturitions:n}=at();return O.useMemo(()=>{const a=t.filter(E=>{const P=eo(E.birthDate);return P>0&&P<=365&&!E.isReference}).map(E=>{const P=e.filter(j=>j.animalId===E.id),A=oj(E.birthWeight,P);return{...E,gdp:A.overall,ageInDays:eo(E.birthDate)}}).filter(E=>E.gdp!==null&&E.gdp>0);if(a.length<2)return{classifiedAnimals:[],distribution:[],gaussChartData:[],meanGdp:0,stdDev:0};const o=a.reduce((E,P)=>E+P.gdp,0)/a.length,l=Math.sqrt(a.reduce((E,P)=>E+Math.pow(P.gdp-o,2),0)/a.length),u=o-.4*l,f=o+.4*l,d=a.map(E=>{let P="Promedio";return l>.005&&(E.gdp<u?P="Pobre":E.gdp>f&&(P="Sobresaliente")),{...E,classification:P}}),h=[{name:"Pobre",count:d.filter(E=>E.classification==="Pobre").length,fill:"#FF3B30"},{name:"Promedio",count:d.filter(E=>E.classification==="Promedio").length,fill:"#6B7280"},{name:"Sobresaliente",count:d.filter(E=>E.classification==="Sobresaliente").length,fill:"#34C759"}],p=d.map(E=>E.gdp),v=Math.min(...p),y=Math.max(...p),b=10,x=(y-v)/b,_=Array.from({length:b},(E,P)=>{const A=v+P*x,j=A+x,S=d.filter(T=>T.gdp>=A&&T.gdp<j).length;return{name:`${(A*1e3).toFixed(0)}`,count:S}});return{classifiedAnimals:d.sort((E,P)=>P.gdp-E.gdp),distribution:h,gaussChartData:_,meanGdp:o,stdDev:l}},[t,e,n])},HNe=({animal:t,onSelect:e})=>{const n={Sobresaliente:"bg-brand-green/80",Promedio:"bg-gray-500/80",Pobre:"bg-brand-red/80"},r=Ya(t.birthDate);return c.jsxs("button",{onClick:()=>e(t.id),className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-brand-green transition-colors",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),c.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:[t.sex," | ",r," | Lote: ",t.location||"Sin Asignar"]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("p",{className:"font-semibold text-white text-right",children:[(t.gdp*1e3).toFixed(0),c.jsx("span",{className:"text-sm text-zinc-400",children:" g/da"})]}),c.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full text-white ${n[t.classification]}`,children:t.classification}),c.jsx(Ai,{className:"text-zinc-600"})]})]})};function GNe({onSelectAnimal:t}){const{classifiedAnimals:e,distribution:n,gaussChartData:r,meanGdp:i,stdDev:a}=qNe(),[s,o]=O.useState("all"),l=F.useMemo(()=>s==="all"?e:e.filter(f=>f.classification===s),[e,s]),u=f=>{if(f!=null&&f.name){const d=f.name;o(h=>h===d?"all":d)}};return c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4",children:[c.jsxs("header",{className:"text-center",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Anlisis de GDP"}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Ganancia Diaria de Peso"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[c.jsx(kl,{size:14}),c.jsx("span",{children:"GDP Media"})]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[(i*1e3).toFixed(0)," ",c.jsx("span",{className:"text-lg text-zinc-400",children:"g/da"})]})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[c.jsx(U$,{size:14}),c.jsx("span",{children:"Desv. Estndar"})]}),c.jsxs("p",{className:"text-2xl font-bold text-white",children:[(a*1e3).toFixed(0)," ",c.jsx("span",{className:"text-lg text-zinc-400",children:"g/da"})]})]})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Distribucin del Crecimiento"}),c.jsx("div",{className:"w-full h-48",children:c.jsx(mr,{children:c.jsxs(xi,{data:n,margin:{top:20,right:10,left:-20,bottom:0},children:[c.jsx(kn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(Nn,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(Qt,{content:c.jsx(vf,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),c.jsx(Yn,{dataKey:"count",onClick:u,cursor:"pointer",children:n.map(f=>c.jsx(Eo,{fill:f.fill,className:`${s!=="all"&&s!==f.name?"opacity-30":"opacity-100"} transition-opacity`},f.name))})]})})})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Campana de Gauss (g/da)"}),c.jsx("div",{className:"w-full h-48",children:c.jsx(mr,{children:c.jsxs(xi,{data:r,margin:{top:20,right:10,left:-20,bottom:0},children:[c.jsx(kn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(Nn,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},allowDecimals:!1}),c.jsx(Qt,{content:c.jsx(vf,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),c.jsx(Yn,{dataKey:"count",fill:"rgba(52, 199, 89, 0.6)"})]})})})]}),c.jsxs("div",{className:"space-y-2 pt-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 ml-1",children:[s==="all"?"Todos los Animales":`Animales (${s})`," (",l.length,")"]}),l.length>0?l.map(f=>c.jsx(HNe,{animal:f,onSelect:t},f.id)):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:c.jsx("p",{className:"text-zinc-500",children:"No hay animales que coincidan con los filtros."})})]})]})}function YNe({navigateToRebano:t,onExitModule:e}){const{syncStatus:n}=at(),[r,i]=O.useState("dashboard"),a=[{id:"dashboard",label:"Dashboard",icon:Pf},{id:"analysis",label:"Anlisis",icon:Dee},{id:"add-data",label:"Aadir",icon:Pl}],s=()=>{r==="dashboard"?e():i("dashboard")},o=()=>{switch(r){case"dashboard":return c.jsx(QM,{onSelectAnimal:l=>t({name:"rebano-profile",animalId:l})});case"analysis":return c.jsx(GNe,{onSelectAnimal:l=>t({name:"rebano-profile",animalId:l})});case"add-data":return c.jsx(UNe,{onNavigate:t,onSaveSuccess:()=>i("dashboard")});default:return c.jsx(QM,{onSelectAnimal:l=>t({name:"rebano-profile",animalId:l})})}};return c.jsxs("div",{className:"min-h-screen animate-fade-in text-white flex flex-col",children:[c.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-gray-900/80 backdrop-blur-lg border-b border-brand-border",children:c.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[c.jsx("button",{onClick:s,className:"p-2 -ml-2 text-zinc-400 hover:text-white","aria-label":"Atrs",children:c.jsx(or,{size:24})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Hm,{className:"text-brand-green"}),c.jsx("h1",{className:"text-xl font-bold",children:"Kilos"})]}),c.jsx("div",{className:"w-8 flex justify-end",children:c.jsx(jb,{status:n})})]})}),c.jsx("main",{className:"flex-grow pt-16 pb-24",children:o()}),c.jsx("nav",{className:"flex-shrink-0 fixed bottom-0 left-0 right-0 bg-black/30 backdrop-blur-xl border-t border-white/20 flex justify-around",children:a.map(l=>c.jsxs("button",{onClick:()=>i(l.id),className:`flex flex-col items-center justify-center p-3 w-full transition-colors ${r===l.id?"text-brand-green":"text-gray-400 hover:text-brand-green"}`,children:[c.jsx(l.icon,{className:"w-6 h-6 mb-1"}),c.jsx("span",{className:"text-xs font-semibold",children:l.label})]},l.id))})]})}const XNe=({onSave:t,onCancel:e,existingProduct:n})=>{const[r,i]=O.useState(""),[a,s]=O.useState(""),[o,l]=O.useState(""),[u,f]=O.useState(""),[d,h]=O.useState("ml"),[p,v]=O.useState(""),[y,b]=O.useState(null),[x,_]=O.useState(!1);O.useEffect(()=>{n&&(i(n.name),s(n.presentation),l(String(n.totalCost)),f(String(n.totalVolume)),h(n.unit),v(String(n.dosagePer10Kg)))},[n]);const E=async P=>{P.preventDefault(),b(null),_(!0);const A=parseFloat(o),j=parseFloat(u),S=parseFloat(p);if(!r||!a||isNaN(A)||isNaN(j)||isNaN(S)){b("Por favor, completa todos los campos con valores vlidos."),_(!1);return}const T={name:r,presentation:a,totalCost:A,totalVolume:j,unit:d,dosagePer10Kg:S};try{await t(T)}catch(N){b("No se pudo guardar el producto."),console.error(N),_(!1)}};return c.jsxs("form",{onSubmit:E,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"sm:col-span-2",children:[c.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Nombre del Producto"}),c.jsx("input",{id:"name",type:"text",value:r,onChange:P=>i(P.target.value),placeholder:"Ej: Ivermectina al 1%",className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"presentation",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Presentacin"}),c.jsx("input",{id:"presentation",type:"text",value:a,onChange:P=>s(P.target.value),placeholder:"Ej: Frasco 500ml",className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"totalCost",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Costo Total del Envase"}),c.jsx("input",{id:"totalCost",type:"number",step:"0.01",value:o,onChange:P=>l(P.target.value),placeholder:"20.00",className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"totalVolume",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Volumen/Cantidad Total"}),c.jsx("input",{id:"totalVolume",type:"number",step:"1",value:u,onChange:P=>f(P.target.value),placeholder:"500",className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"unit",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Unidad"}),c.jsxs("select",{id:"unit",value:d,onChange:P=>h(P.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",children:[c.jsx("option",{value:"ml",children:"ml (lquido)"}),c.jsx("option",{value:"g",children:"g (polvo/slido)"}),c.jsx("option",{value:"unidad",children:"unidad (pastilla/bolo)"})]})]}),c.jsxs("div",{className:"sm:col-span-2",children:[c.jsx("label",{htmlFor:"dosage",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Dosis por cada 10 Kg de peso"}),c.jsx("input",{id:"dosage",type:"number",step:"0.1",value:p,onChange:P=>v(P.target.value),placeholder:"0.2",className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]})]}),y&&c.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[c.jsx(yn,{size:18}),c.jsx("span",{children:y})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:x,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:x?"Guardando...":"Guardar Producto"})]})]})};function QNe(){const{products:t,addProduct:e,updateProduct:n,deleteProduct:r}=at(),[i,a]=O.useState(!1),[s,o]=O.useState(void 0),[l,u]=O.useState(null),f=y=>{o(y),a(!0)},d=()=>{a(!1),o(void 0)},h=async y=>{s!=null&&s.id?await n(s.id,y):await e(y),d()},p=()=>{l!=null&&l.id&&r(l.id),u(null)},v=y=>!y.totalVolume||y.totalVolume===0?"N/A":`$${(y.totalCost/y.totalVolume).toFixed(3)} / ${y.unit}`;return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4",children:[c.jsxs("header",{className:"text-center",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Inventario de Productos"}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Gestin de Insumos Sanitarios"})]}),c.jsxs("button",{onClick:()=>f(),className:"w-full flex items-center justify-center gap-2 bg-brand-green hover:bg-green-600 text-white font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[c.jsx(ni,{size:18})," Aadir Nuevo Producto"]}),c.jsx("div",{className:"space-y-3 pt-4",children:t.length>0?t.map(y=>c.jsx("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-lg text-white",children:y.name}),c.jsx("p",{className:"text-sm text-zinc-400",children:y.presentation}),c.jsxs("div",{className:"mt-2 flex items-center gap-4 text-xs",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(Ax,{size:14})," ",y.dosagePer10Kg," ",y.unit,"/10kg"]}),c.jsx("span",{className:"font-semibold text-amber-400",children:v(y)})]})]}),c.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[c.jsx("button",{onClick:()=>f(y),className:"p-2 text-zinc-400 hover:text-brand-orange transition-colors",children:c.jsx(Cl,{size:18})}),c.jsx("button",{onClick:()=>u(y),className:"p-2 text-zinc-400 hover:text-brand-red transition-colors",children:c.jsx(wo,{size:18})})]})]})},y.id)):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:c.jsx("p",{className:"text-zinc-500",children:"An no has aadido ningn producto."})})})]}),c.jsx(yt,{isOpen:i,onClose:d,title:s?"Editar Producto":"Aadir Producto",children:c.jsx(XNe,{onSave:h,onCancel:d,existingProduct:s})}),c.jsx(Ix,{isOpen:!!l,onClose:()=>u(null),onConfirm:p,title:"Eliminar Producto",message:`Ests seguro de que quieres eliminar "${l==null?void 0:l.name}"? Esta accin no se puede deshacer.`})]})}const ZNe=["Cabrita","Cabritona","Cabra Primpara","Cabra Multpara","Cabrito","Macho de Levante","Macho Cabro"],JNe=["Vaca","En Servicio","Preada","Post-Parto"],eOe=({onSave:t,onCancel:e,existingPlan:n})=>{const[r,i]=O.useState(""),[a,s]=O.useState(""),[o,l]=O.useState(""),[u,f]=O.useState(""),[d,h]=O.useState(new Set),[p,v]=O.useState(new Set),[y,b]=O.useState(null),[x,_]=O.useState(!1);O.useEffect(()=>{var j,S;n&&(i(n.name),s(n.description),l(((j=n.targetCriteria.minAgeDays)==null?void 0:j.toString())||""),f(((S=n.targetCriteria.maxAgeDays)==null?void 0:S.toString())||""),h(new Set(n.targetCriteria.categories||[])),v(new Set(n.targetCriteria.targetStatus||[])))},[n]);const E=j=>{h(S=>{const T=new Set(S);return T.has(j)?T.delete(j):T.add(j),T})},P=j=>{v(S=>{const T=new Set(S);return T.has(j)?T.delete(j):T.add(j),T})},A=async j=>{if(j.preventDefault(),b(null),!r.trim()){b("El nombre del plan es obligatorio.");return}_(!0);const S={name:r,description:a,targetCriteria:{minAgeDays:o?parseInt(o,10):void 0,maxAgeDays:u?parseInt(u,10):void 0,categories:Array.from(d),targetStatus:Array.from(p)}};try{await t(S)}catch(T){b("No se pudo guardar el plan."),console.error(T),_(!1)}};return c.jsxs("form",{onSubmit:A,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Nombre del Plan"}),c.jsx("input",{id:"name",type:"text",value:r,onChange:j=>i(j.target.value),placeholder:"Ej: Protocolo Pre-parto",className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Descripcin (Opcional)"}),c.jsx("input",{id:"description",type:"text",value:a,onChange:j=>s(j.target.value),placeholder:"Ej: Vacunacin 30 das antes del parto",className:"w-full bg-zinc-800 p-3 rounded-xl"})]})]}),c.jsxs("fieldset",{className:"bg-black/20 rounded-xl p-4 border border-zinc-700",children:[c.jsx("legend",{className:"px-2 text-sm font-semibold text-zinc-300",children:"Criterios de Aplicacin (Opcional)"}),c.jsxs("div",{className:"space-y-4 pt-2",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"minAge",className:"block text-xs font-medium text-zinc-400 mb-1",children:"Edad Mnima (das)"}),c.jsx("input",{id:"minAge",type:"number",value:o,onChange:j=>l(j.target.value),placeholder:"Ej: 90",className:"w-full bg-zinc-800 p-2 rounded-lg"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"maxAge",className:"block text-xs font-medium text-zinc-400 mb-1",children:"Edad Mxima (das)"}),c.jsx("input",{id:"maxAge",type:"number",value:u,onChange:j=>f(j.target.value),placeholder:"Ej: 210",className:"w-full bg-zinc-800 p-2 rounded-lg"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-zinc-400 mb-2",children:"Estado Reproductivo"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:JNe.map(j=>c.jsx("button",{type:"button",onClick:()=>P(j),className:`px-3 py-1 text-sm font-semibold rounded-full transition-colors ${p.has(j)?"bg-pink-500 text-white":"bg-zinc-700 text-zinc-300"}`,children:j},j))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-zinc-400 mb-2",children:"Categoras Zootcnicas"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:ZNe.map(j=>c.jsx("button",{type:"button",onClick:()=>E(j),className:`px-3 py-1 text-sm font-semibold rounded-full transition-colors ${d.has(j)?"bg-teal-500 text-white":"bg-zinc-700 text-zinc-300"}`,children:j},j))})]})]})]}),y&&c.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[c.jsx(yn,{size:18}),c.jsx("span",{children:y})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:x,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:x?"Guardando...":"Guardar Plan"})]})]})},tOe=({plan:t,onClick:e,onEdit:n,onDelete:r})=>{const i=Nf(),a=O.useRef(!1),s=(o,l)=>{const u=l.offset.x,f=l.velocity.x;if(Math.abs(u)<5){e();return}u<-160/2||f<-500?i.start({x:-160}):i.start({x:0}),setTimeout(()=>{a.current=!1},100)};return c.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-brand-glass border border-brand-border",children:[c.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:[c.jsxs("button",{onClick:n,onPointerDown:o=>o.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[c.jsx(Cl,{size:22}),c.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Editar"})]}),c.jsxs("button",{onClick:r,onPointerDown:o=>o.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-red text-white",children:[c.jsx(wo,{size:22}),c.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Eliminar"})]})]}),c.jsx(Il.div,{drag:"x",dragConstraints:{left:-160,right:0},dragElastic:.1,onDragStart:()=>{a.current=!0},onDragEnd:s,onTap:()=>{a.current||e()},animate:i,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg p-4",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-lg text-white",children:t.name}),c.jsx("p",{className:"text-sm text-zinc-400 mt-1",children:t.description})]}),c.jsx(Ai,{className:"text-zinc-600"})]})})]})};function nOe({navigateTo:t}){const{healthPlans:e,addHealthPlan:n,updateHealthPlan:r,deleteHealthPlan:i}=at(),[a,s]=O.useState(!1),[o,l]=O.useState(void 0),[u,f]=O.useState(null),d=y=>{l(y),s(!0)},h=()=>{s(!1),l(void 0)},p=async y=>{o!=null&&o.id?await r(o.id,y):await n(y),h()},v=async()=>{u!=null&&u.id&&await i(u.id),f(null)};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4",children:[c.jsxs("header",{className:"text-center",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Planificador Sanitario"}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Define tus Protocolos y Planes"})]}),c.jsxs("button",{onClick:()=>d(),className:"w-full flex items-center justify-center gap-2 bg-teal-600 hover:bg-teal-500 text-white font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[c.jsx(ni,{size:18})," Crear Nuevo Plan Sanitario"]}),c.jsx("div",{className:"space-y-3 pt-4",children:e.length>0?e.map(y=>c.jsx(tOe,{plan:y,onClick:()=>t({name:"plan-detail",planId:y.id}),onEdit:()=>d(y),onDelete:()=>f(y)},y.id)):c.jsxs("div",{className:"text-center py-10 bg-brand-glass rounded-2xl flex flex-col items-center gap-4",children:[c.jsx(Sx,{size:48,className:"text-zinc-600"}),c.jsx("p",{className:"text-zinc-500",children:"An no has creado ningn plan sanitario."}),c.jsx("p",{className:"text-zinc-500 text-sm",children:"Usa el botn de arriba para empezar a definir tus protocolos."})]})})]}),c.jsx(yt,{isOpen:a,onClose:h,title:o?"Editar Plan Sanitario":"Crear Nuevo Plan Sanitario",children:c.jsx(eOe,{onSave:p,onCancel:h,existingPlan:o})}),c.jsx(Ix,{isOpen:!!u,onClose:()=>f(null),onConfirm:v,title:`Eliminar Plan "${u==null?void 0:u.name}"`,message:"Ests seguro? Al eliminar el plan, tambin se eliminarn todas sus tareas asociadas. Esta accin no se puede deshacer."})]})}const ZM=(t,e,n)=>{const r=(n-1)*7+1;return new Date(Date.UTC(t,e-1,r))},rOe=()=>{const{animals:t,healthPlans:e,healthPlanTasks:n,healthEvents:r,parturitions:i}=at(),{forecastBySeason:a}=xT(),s=O.useMemo(()=>{const l=new Date;l.setUTCHours(0,0,0,0);const u=l.getUTCFullYear(),f=[],d=t.filter(h=>h.status==="Activo"&&!h.isReference);for(const h of d){const p=eo(h.birthDate);if(p<0)continue;const v=e.filter(y=>{const{minAgeDays:b,maxAgeDays:x,categories:_,targetStatus:E}=y.targetCriteria,P=Of(h,i),A=(!b||p>=b)&&(!x||p<=x),j=!_||_.length===0||_.includes(P),S=!E||E.length===0||E.includes(h.reproductiveStatus);return A&&j&&S});for(const y of v){const b=n.filter(x=>x.healthPlanId===y.id);for(const x of b){let _=null,E=null;if(x.trigger.type==="age"&&x.trigger.days){const j=new Date(h.birthDate+"T00:00:00Z");j.setUTCDate(j.getUTCDate()+x.trigger.days),_=j,E=`${h.id}-${x.id}`}else if(x.trigger.type==="fixed_date_period"&&x.trigger.month&&x.trigger.week){const j=ZM(u,x.trigger.month,x.trigger.week);if(_=j,E=`${h.id}-${x.id}-${u}`,(j.getTime()-l.getTime())/(1e3*60*60*24)>90){const S=ZM(u-1,x.trigger.month,x.trigger.week),T=`${h.id}-${x.id}-${u-1}`;r.some(D=>D.animalId===h.id&&D.taskId===x.id&&new Date(D.date).getUTCFullYear()===u-1)||(_=S,E=T)}}else if(x.trigger.type==="birthing_season_event"&&x.trigger.offsetDays!==void 0){const j=a.find(S=>S.events.some(T=>T.animal.id===h.id));if(j&&j.projectedStartDate){const S=new Date(j.projectedStartDate);S.setUTCDate(S.getUTCDate()+x.trigger.offsetDays),_=S,E=`${h.id}-${x.id}-${j.seasonId}`}}if(!_||!E)continue;_.setUTCHours(0,0,0,0);const P=r.some(j=>j.animalId!==h.id||j.taskId!==x.id?!1:x.trigger.type==="age"?!0:x.trigger.type==="fixed_date_period"||x.trigger.type==="birthing_season_event"?new Date(j.date).getUTCFullYear()===_.getUTCFullYear():!1),A=Math.ceil((_.getTime()-l.getTime())/(1e3*60*60*24));if(!P&&A<90){let j="Prxima";A<0?j="Atrasada":A===0&&(j="Para Hoy"),f.push({key:E,animal:h,plan:y,task:x,dueDate:_,status:j})}}}}return f.sort((h,p)=>h.dueDate.getTime()-p.dueDate.getTime())},[t,e,n,r,i,a]);return{...O.useMemo(()=>({overdue:s.filter(l=>l.status==="Atrasada"),today:s.filter(l=>l.status==="Para Hoy"),upcoming:s.filter(l=>l.status==="Prxima")}),[s]),allTasks:s}},iOe=({task:t,onSave:e,onCancel:n})=>{const{products:r,bodyWeighings:i,addHealthEvent:a}=at(),[s,o]=O.useState(new Date().toISOString().split("T")[0]),[l,u]=O.useState(t.task.productId),[f,d]=O.useState(""),[h,p]=O.useState(0),[v,y]=O.useState(""),[b,x]=O.useState(null),[_,E]=O.useState(!1),P=O.useMemo(()=>r.find(j=>j.id===l),[r,l]);O.useEffect(()=>{if(P){const j=i.filter(M=>M.animalId===t.animal.id).sort((M,$)=>new Date($.date).getTime()-new Date(M.date).getTime())[0],T=((j==null?void 0:j.kg)||50)/10*P.dosagePer10Kg;d(T.toFixed(2));const N=P.totalCost/P.totalVolume,D=T*N;p(parseFloat(D.toFixed(3)))}},[P,t.animal.id,i]);const A=async j=>{if(j.preventDefault(),x(null),!P){x("Por favor, selecciona un producto.");return}E(!0);const S=parseFloat(f);if(isNaN(S)||S<=0){x("La dosis aplicada debe ser un nmero vlido."),E(!1);return}try{await a({animalId:t.animal.id,date:s,taskId:t.task.id,type:t.task.type,productUsed:P.name,doseApplied:S,unit:P.unit,calculatedCost:h,notes:v||void 0}),e()}catch(T){x("No se pudo guardar el evento."),console.error(T)}finally{E(!1)}};return c.jsxs("form",{onSubmit:A,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-white",children:t.animal.id}),c.jsx("p",{className:"text-zinc-400",children:t.task.name})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Aplicacin"}),c.jsx("input",{id:"date",type:"date",value:s,onChange:j=>o(j.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"product",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Producto Utilizado"}),c.jsx("select",{id:"product",value:l,onChange:j=>u(j.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0,children:r.map(j=>c.jsx("option",{value:j.id,children:j.name},j.id))})]}),c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"dose",className:"block text-sm font-medium text-zinc-400 mb-1",children:["Dosis Sugerida (",P==null?void 0:P.unit,")"]}),c.jsx("input",{id:"dose",type:"number",step:"0.1",value:f,onChange:j=>d(j.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Costo Estimado"}),c.jsxs("div",{className:"w-full bg-zinc-800 p-3 rounded-xl text-zinc-300",children:["$",h.toFixed(2)]})]}),c.jsxs("div",{className:"sm:col-span-2",children:[c.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Notas (Opcional)"}),c.jsx("textarea",{id:"notes",value:v,onChange:j=>y(j.target.value),rows:2,placeholder:"Ej: El animal present fiebre...",className:"w-full bg-zinc-800 p-3 rounded-xl"})]})]}),b&&c.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[c.jsx(yn,{size:18}),c.jsx("span",{children:b})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:n,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:_,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:_?"Guardando...":"Confirmar Registro"})]})]})},aOe=["Tratamiento Especfico","Desparasitacin","Vacunacin","Vitaminas","Minerales","Control"],sOe=({onSaveSuccess:t,onCancel:e})=>{const{animals:n,products:r,addHealthEvent:i,parturitions:a,serviceRecords:s,breedingSeasons:o,sireLots:l}=at(),[u,f]=O.useState([]),[d,h]=O.useState(new Date().toISOString().split("T")[0]),[p,v]=O.useState("Tratamiento Especfico"),[y,b]=O.useState(""),[x,_]=O.useState(""),[E,P]=O.useState(""),[A,j]=O.useState(!1),[S,T]=O.useState(!1),[N,D]=O.useState(null),[M,$]=O.useState(null),z=O.useMemo(()=>r.find(U=>U.id===y),[r,y]),H=U=>{f(U),j(!1)},ee=async U=>{if(U.preventDefault(),D(null),$(null),u.length===0){D("Debes seleccionar al menos un animal.");return}if(!y||!z){D("Debes seleccionar un producto.");return}const Z=parseFloat(x);if(isNaN(Z)||Z<=0){D("La dosis debe ser un nmero vlido y mayor que cero.");return}T(!0);const q=z.totalCost/z.totalVolume,Y=Z*q;try{const le=u.map(ce=>i({animalId:ce,date:d,type:p,productUsed:z.name,doseApplied:Z,unit:z.unit,calculatedCost:Y,notes:E||void 0}));await Promise.all(le),$(`${u.length} evento(s) de salud registrados con xito.`),setTimeout(()=>{t()},1500)}catch(le){D("No se pudo guardar el evento de salud."),console.error(le)}finally{T(!1)}};return c.jsxs(c.Fragment,{children:[c.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[c.jsxs("button",{type:"button",onClick:()=>j(!0),className:"w-full bg-zinc-800 p-4 rounded-xl text-lg flex justify-between items-center text-left",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(iu,{size:20,className:"text-zinc-400"}),c.jsx("span",{className:u.length>0?"text-white":"text-zinc-500",children:u.length>0?`${u.length} animales seleccionados`:"Seleccionar Animal(es)..."})]}),c.jsx(Pl,{className:"text-brand-orange"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha"}),c.jsx("input",{id:"date",type:"date",value:d,onChange:U=>h(U.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"taskType",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Tipo"}),c.jsx("select",{id:"taskType",value:p,onChange:U=>v(U.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0,children:aOe.map(U=>c.jsx("option",{value:U,children:U},U))})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"product",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Producto Utilizado"}),c.jsxs("select",{id:"product",value:y,onChange:U=>b(U.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0,children:[c.jsx("option",{value:"",children:"Seleccionar producto..."}),r.map(U=>c.jsx("option",{value:U.id,children:U.name},U.id))]})]}),c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"dose",className:"block text-sm font-medium text-zinc-400 mb-1",children:["Dosis Aplicada (",(z==null?void 0:z.unit)||"unidad",")"]}),c.jsx("input",{id:"dose",type:"number",step:"0.1",value:x,onChange:U=>_(U.target.value),placeholder:"Ej: 2.5",className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0}),c.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"La misma dosis se aplicar a todos los animales seleccionados."})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Notas (Opcional)"}),c.jsx("textarea",{id:"notes",value:E,onChange:U=>P(U.target.value),rows:2,placeholder:"Ej: Tratamiento por herida en la pata delantera.",className:"w-full bg-zinc-800 p-3 rounded-xl"})]}),N&&c.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[c.jsx(yn,{size:18})," ",c.jsx("span",{children:N})]}),M&&c.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-green-500/20 text-brand-green",children:[c.jsx(ma,{size:18})," ",c.jsx("span",{children:M})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:S,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:S?"Guardando...":"Guardar Registro"})]})]}),c.jsx(Nx,{isOpen:A,onClose:()=>j(!1),onSelect:H,animals:n,parturitions:a,serviceRecords:s,breedingSeasons:o,sireLots:l,title:"Seleccionar Animales"})]})},oOe=({task:t,onRegisterClick:e})=>{const{animal:n,task:r,dueDate:i}=t;return c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("p",{className:"font-bold text-lg text-white",children:n.id}),c.jsx("p",{className:"text-sm text-zinc-300",children:r.name}),c.jsxs("p",{className:"text-xs text-zinc-500 mt-1",children:["Plan: ",t.plan.name]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"text-sm font-semibold text-white",children:i.toLocaleDateString("es-VE",{day:"2-digit",month:"2-digit"})}),c.jsx("p",{className:"text-xs text-zinc-400",children:i.toLocaleDateString("es-VE",{weekday:"short"})})]}),c.jsx("button",{onClick:()=>e(t),className:"bg-brand-green hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors text-sm",children:"Registrar"})]})]})},f1=({title:t,tasks:e,icon:n,colorClass:r,onRegisterClick:i})=>e.length===0?null:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("h3",{className:`flex items-center gap-2 text-lg font-semibold ${r}`,children:[c.jsx(n,{size:20}),t," (",e.length,")"]}),c.jsx("div",{className:"space-y-2",children:e.map(a=>c.jsx(oOe,{task:a,onRegisterClick:i},a.key))})]});function JM(){const{overdue:t,today:e,upcoming:n,allTasks:r}=rOe(),[i,a]=O.useState(null),[s,o]=O.useState(!1),l=()=>{a(null)};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 animate-fade-in px-4",children:[c.jsxs("header",{className:"text-center",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Agenda Sanitaria"}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Tareas de salud pendientes"})]}),c.jsxs("button",{onClick:()=>o(!0),className:"w-full flex items-center justify-center gap-2 bg-brand-blue/20 border border-brand-blue text-brand-blue hover:bg-brand-blue/30 font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[c.jsx(ni,{size:18})," Registrar Tratamiento No Planificado"]}),r.length===0?c.jsxs("div",{className:"text-center py-10 bg-brand-glass rounded-2xl flex flex-col items-center gap-4",children:[c.jsx(I_,{size:48,className:"text-zinc-600"}),c.jsx("p",{className:"text-zinc-400 font-semibold text-lg",children:"Todo al da!"}),c.jsx("p",{className:"text-zinc-500 text-sm",children:"No hay tareas sanitarias programadas en tu agenda."})]}):c.jsxs("div",{className:"space-y-6",children:[c.jsx(f1,{title:"Atrasadas",tasks:t,icon:yn,colorClass:"text-brand-red",onRegisterClick:a}),c.jsx(f1,{title:"Para Hoy",tasks:e,icon:I_,colorClass:"text-brand-green",onRegisterClick:a}),c.jsx(f1,{title:"Prximas",tasks:n,icon:N$,colorClass:"text-zinc-300",onRegisterClick:a})]})]}),i&&c.jsx(yt,{isOpen:!!i,onClose:()=>a(null),title:`Registrar: ${i.task.name}`,children:c.jsx(iOe,{task:i,onSave:l,onCancel:()=>a(null)})}),c.jsx(yt,{isOpen:s,onClose:()=>o(!1),title:"Registrar Tratamiento No Planificado",children:c.jsx(sOe,{onSaveSuccess:()=>o(!1),onCancel:()=>o(!1)})})]})}const lOe=["Desparasitacin","Vacunacin","Vitaminas","Minerales","Control"],cOe=[{value:1,label:"Enero"},{value:2,label:"Febrero"},{value:3,label:"Marzo"},{value:4,label:"Abril"},{value:5,label:"Mayo"},{value:6,label:"Junio"},{value:7,label:"Julio"},{value:8,label:"Agosto"},{value:9,label:"Septiembre"},{value:10,label:"Octubre"},{value:11,label:"Noviembre"},{value:12,label:"Diciembre"}],uOe=[{value:1,label:"1ra Semana"},{value:2,label:"2da Semana"},{value:3,label:"3ra Semana"},{value:4,label:"4ta Semana"}],dOe=({planId:t,onSave:e,onCancel:n,existingTask:r})=>{const{products:i}=at(),[a,s]=O.useState(""),[o,l]=O.useState("Control"),[u,f]=O.useState(""),[d,h]=O.useState("age"),[p,v]=O.useState(""),[y,b]=O.useState("1"),[x,_]=O.useState("1"),[E,P]=O.useState(""),[A,j]=O.useState(null),[S,T]=O.useState(!1);O.useEffect(()=>{r&&(s(r.name),l(r.type),f(r.productId),h(r.trigger.type),r.trigger.type==="age"&&v(String(r.trigger.days||"")),r.trigger.type==="fixed_date_period"&&(b(String(r.trigger.month||"1")),_(String(r.trigger.week||"1"))),r.trigger.type==="birthing_season_event"&&P(String(r.trigger.offsetDays||"")))},[r]);const N=async D=>{if(D.preventDefault(),j(null),T(!0),!a.trim()||!u){j("El nombre y el producto son obligatorios."),T(!1);return}let M;if(d==="age"){if(!p||parseInt(p,10)<=0){j("Para el disparador por edad, los das deben ser un nmero vlido."),T(!1);return}M={type:"age",days:parseInt(p,10)}}else if(d==="fixed_date_period")M={type:"fixed_date_period",month:parseInt(y,10),week:parseInt(x,10)};else{const z=parseInt(E,10);if(isNaN(z)){j("Debe introducir un nmero vlido de das (positivo o negativo)."),T(!1);return}M={type:"birthing_season_event",offsetDays:z}}const $={healthPlanId:t,name:a,type:o,productId:u,trigger:M};try{await e($)}catch(z){j("No se pudo guardar la tarea."),console.error(z)}finally{T(!1)}};return c.jsxs("form",{onSubmit:N,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"taskName",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Nombre de la Tarea"}),c.jsx("input",{id:"taskName",type:"text",value:a,onChange:D=>s(D.target.value),placeholder:"Ej: Vacuna Pre-parto Clostridial",className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"taskType",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Tipo de Tarea"}),c.jsx("select",{id:"taskType",value:o,onChange:D=>l(D.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0,children:lOe.map(D=>c.jsx("option",{value:D,children:D},D))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"product",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Producto a Utilizar"}),c.jsxs("select",{id:"product",value:u,onChange:D=>f(D.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0,children:[c.jsx("option",{value:"",children:"Seleccionar producto..."}),i.map(D=>c.jsx("option",{value:D.id,children:D.name},D.id))]})]})]}),c.jsxs("fieldset",{className:"bg-black/20 rounded-xl p-4 border border-zinc-700",children:[c.jsx("legend",{className:"px-2 text-sm font-semibold text-zinc-300",children:"Disparador (Trigger)"}),c.jsxs("div",{className:"pt-2 space-y-4",children:[c.jsxs("select",{value:d,onChange:D=>h(D.target.value),className:"w-full bg-zinc-800 p-2 rounded-lg",children:[c.jsx("option",{value:"age",children:"Por Edad del Animal"}),c.jsx("option",{value:"fixed_date_period",children:"Por Fecha Fija Anual"}),c.jsx("option",{value:"birthing_season_event",children:"Relativo a Temporada de Partos"})]}),d==="age"&&c.jsxs("div",{className:"animate-fade-in",children:[c.jsx("label",{htmlFor:"triggerDays",className:"block text-xs font-medium text-zinc-400 mb-1",children:"Aplicar a los (das de edad)"}),c.jsx("input",{id:"triggerDays",type:"number",value:p,onChange:D=>v(D.target.value),placeholder:"Ej: 60",className:"w-full bg-zinc-800 p-2 rounded-lg",required:!0})]}),d==="fixed_date_period"&&c.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-fade-in",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"triggerMonth",className:"block text-xs font-medium text-zinc-400 mb-1",children:"Mes"}),c.jsx("select",{id:"triggerMonth",value:y,onChange:D=>b(D.target.value),className:"w-full bg-zinc-800 p-2 rounded-lg",children:cOe.map(D=>c.jsx("option",{value:D.value,children:D.label},D.value))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"triggerWeek",className:"block text-xs font-medium text-zinc-400 mb-1",children:"Semana"}),c.jsx("select",{id:"triggerWeek",value:x,onChange:D=>_(D.target.value),className:"w-full bg-zinc-800 p-2 rounded-lg",children:uOe.map(D=>c.jsx("option",{value:D.value,children:D.label},D.value))})]})]}),d==="birthing_season_event"&&c.jsxs("div",{className:"animate-fade-in",children:[c.jsx("label",{htmlFor:"triggerOffsetDays",className:"block text-xs font-medium text-zinc-400 mb-1",children:"Das antes (-) / despus (+) del inicio de la temporada"}),c.jsx("input",{id:"triggerOffsetDays",type:"number",value:E,onChange:D=>P(D.target.value),placeholder:"Ej: -30 (para 30 das antes)",className:"w-full bg-zinc-800 p-2 rounded-lg",required:!0})]})]})]}),A&&c.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[c.jsx(yn,{size:18})," ",c.jsx("span",{children:A})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[c.jsx("button",{type:"button",onClick:n,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:S,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:S?"Guardando...":"Guardar Tarea"})]})]})},fOe=({task:t,onEdit:e,onDelete:n})=>{const{products:r}=at(),i=r.find(l=>l.id===t.productId),a=Nf(),s=O.useRef(!1),o=(l,u)=>{const f=u.offset.x,d=u.velocity.x;f<-160/2||d<-500?a.start({x:-160}):a.start({x:0}),setTimeout(()=>{s.current=!1},100)};return c.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-black/20 border border-zinc-700",children:[c.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:[c.jsxs("button",{onClick:e,onPointerDown:l=>l.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[c.jsx(Cl,{size:20}),c.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Editar"})]}),c.jsxs("button",{onClick:n,onPointerDown:l=>l.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-red text-white",children:[c.jsx(wo,{size:20}),c.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Eliminar"})]})]}),c.jsx(Il.div,{drag:"x",dragConstraints:{left:-160,right:0},dragElastic:.1,onDragStart:()=>{s.current=!0},onDragEnd:o,animate:a,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-grab bg-ios-modal-bg/50",children:c.jsxs("div",{className:"p-4",children:[c.jsx("div",{className:"flex justify-between items-start",children:c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-lg text-white",children:t.name}),c.jsx("p",{className:"text-sm text-teal-300",children:t.type}),c.jsxs("p",{className:"text-xs text-zinc-400 mt-1",children:["Producto: ",(i==null?void 0:i.name)||"No especificado"]})]})}),c.jsxs("div",{className:"mt-3 pt-3 border-t border-zinc-700 flex items-center text-zinc-300",children:[c.jsx(Ex,{size:16,className:"mr-2"}),c.jsxs("span",{className:"text-sm",children:["Se activa a los ",c.jsx("span",{className:"font-bold text-white",children:t.trigger.days})," das de edad"]})]})]})})]})};function hOe({planId:t,onBack:e}){var E;const{healthPlans:n,healthPlanTasks:r,addHealthPlanTask:i,updateHealthPlanTask:a,deleteHealthPlanTask:s}=at(),[o,l]=O.useState(!1),[u,f]=O.useState(void 0),[d,h]=O.useState(null),p=O.useMemo(()=>n.find(P=>P.id===t),[n,t]),v=O.useMemo(()=>r.filter(P=>P.healthPlanId===t).sort((P,A)=>(P.trigger.days||0)-(A.trigger.days||0)),[r,t]),y=P=>{f(P),l(!0)},b=()=>{l(!1),f(void 0)},x=async P=>{u!=null&&u.id?await a(u.id,P):await i(P),b()},_=async()=>{d!=null&&d.id&&await s(d.id),h(null)};return p?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 pb-12 animate-fade-in",children:[c.jsxs("header",{className:"flex items-center pt-8 pb-4 px-4",children:[c.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:c.jsx(or,{size:24})}),c.jsxs("div",{className:"text-center flex-grow",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:p.name}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Detalles del Plan Sanitario"})]}),c.jsx("div",{className:"w-8"})]}),c.jsx("div",{className:"px-4",children:c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-2",children:[c.jsx("h3",{className:"text-sm font-semibold text-zinc-400",children:"Descripcin"}),c.jsx("p",{className:"text-white",children:p.description||"Sin descripcin."}),c.jsx("h3",{className:"text-sm font-semibold text-zinc-400 pt-2",children:"Criterios de Aplicacin"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[p.targetCriteria.minAgeDays&&c.jsxs("span",{className:"bg-zinc-700 text-xs font-semibold px-2 py-1 rounded-full",children:["Desde ",p.targetCriteria.minAgeDays," das"]}),p.targetCriteria.maxAgeDays&&c.jsxs("span",{className:"bg-zinc-700 text-xs font-semibold px-2 py-1 rounded-full",children:["Hasta ",p.targetCriteria.maxAgeDays," das"]}),(E=p.targetCriteria.categories)==null?void 0:E.map(P=>c.jsx("span",{className:"bg-zinc-700 text-xs font-semibold px-2 py-1 rounded-full",children:P},P))]})]})}),c.jsxs("div",{className:"space-y-4 px-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-xl font-semibold text-zinc-300",children:"Tareas del Plan"}),c.jsxs("button",{onClick:()=>y(),className:"flex items-center gap-2 bg-teal-600 hover:bg-teal-500 text-white font-bold py-2 px-3 rounded-lg transition-colors text-sm",children:[c.jsx(ni,{size:16})," Aadir Tarea"]})]}),v.length>0?c.jsx("div",{className:"space-y-3",children:v.map(P=>c.jsx(fOe,{task:P,onEdit:()=>y(P),onDelete:()=>h(P)},P.id))}):c.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:c.jsx("p",{className:"text-zinc-500",children:"Este plan an no tiene tareas."})})]})]}),c.jsx(yt,{isOpen:o,onClose:b,title:u?"Editar Tarea":"Aadir Tarea al Plan",children:c.jsx(dOe,{planId:p.id,onSave:x,onCancel:b,existingTask:u})}),c.jsx(Ix,{isOpen:!!d,onClose:()=>h(null),onConfirm:_,title:`Eliminar Tarea "${d==null?void 0:d.name}"`,message:"Ests seguro de que quieres eliminar esta tarea del plan? Esta accin no se puede deshacer."})]}):c.jsxs("div",{className:"text-center p-10",children:[c.jsx("h1",{className:"text-2xl text-zinc-400",children:"Plan no encontrado."}),c.jsx("button",{onClick:e,className:"mt-4 text-brand-amber",children:"Volver al Planificador"})]})}const pOe=()=>{const{healthEvents:t,animals:e}=at();return O.useMemo(()=>{if(t.length===0)return{totalCostLast30Days:0,avgCostPerAnimal:0,monthlyCosts:[],costsByCategory:[],topCostAnimals:[]};const r=new Date,i=new Date(r.getFullYear(),r.getMonth(),r.getDate()-30),s=t.filter(b=>new Date(b.date)>=i).reduce((b,x)=>b+x.calculatedCost,0),o=e.filter(b=>b.status==="Activo").length,l=t.reduce((b,x)=>b+x.calculatedCost,0),u=o>0?l/o:0,f=t.reduce((b,x)=>{const _=x.date.substring(0,7);return b[_]||(b[_]=0),b[_]+=x.calculatedCost,b},{}),d=Object.entries(f).map(([b,x])=>({name:b,total:x})).sort((b,x)=>b.name.localeCompare(x.name)),h=t.reduce((b,x)=>{const _=x.type;return b[_]||(b[_]=0),b[_]+=x.calculatedCost,b},{}),p=Object.entries(h).map(([b,x])=>({name:b,total:x})).sort((b,x)=>x.total-b.total),v=t.reduce((b,x)=>{const _=x.animalId;return b[_]||(b[_]=0),b[_]+=x.calculatedCost,b},{}),y=Object.entries(v).sort((b,x)=>x[1]-b[1]).slice(0,5).map(([b,x])=>({animalId:b,total:x}));return{totalCostLast30Days:s,avgCostPerAnimal:u,monthlyCosts:d,costsByCategory:p,topCostAnimals:y}},[t,e])},e4=({title:t,value:e,unit:n,icon:r})=>c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[c.jsx(r,{size:14}),c.jsx("span",{children:t})]}),c.jsxs("p",{className:"text-3xl font-bold text-white mt-1",children:[e," ",c.jsx("span",{className:"text-xl text-zinc-400",children:n})]})]}),t4=["#34C759","#FF9500","#007AFF","#AF52DE","#FF3B30","#5E5CE6"];function mOe(){const{totalCostLast30Days:t,avgCostPerAnimal:e,monthlyCosts:n,costsByCategory:r,topCostAnimals:i}=pOe(),a=s=>new Date(s+"-02").toLocaleString("es-VE",{month:"short"});return c.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4",children:[c.jsxs("header",{className:"text-center",children:[c.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Anlisis de Costos"}),c.jsx("p",{className:"text-lg text-zinc-400",children:"Mdulo StockCare"})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[c.jsx(e4,{title:"Costo (ltimos 30 das)",value:`$${t.toFixed(2)}`,icon:pA}),c.jsx(e4,{title:"Costo Prom./Animal",value:`$${e.toFixed(2)}`,icon:kl})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-white mb-4",children:[c.jsx(Pf,{size:20})," Costo Mensual"]}),c.jsx("div",{className:"w-full h-56",children:c.jsx(mr,{children:c.jsxs(xi,{data:n,margin:{top:5,right:10,left:-20,bottom:5},children:[c.jsx(kn,{dataKey:"name",tickFormatter:a,tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(Nn,{tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),c.jsx(Qt,{cursor:{fill:"rgba(255, 255, 255, 0.1)"},contentStyle:{backgroundColor:"rgba(44, 44, 46, 0.8)",border:"1px solid #444",borderRadius:"12px"}}),c.jsx(Yn,{dataKey:"total",name:"Costo Total",fill:"#2dd4bf",radius:[4,4,0,0]})]})})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-white mb-4",children:[c.jsx(mY,{size:20})," Costos por Categora"]}),c.jsx("div",{className:"w-full h-48",children:c.jsx(mr,{children:c.jsxs(eNe,{children:[c.jsx(jo,{data:r,dataKey:"total",nameKey:"name",cx:"50%",cy:"50%",outerRadius:60,fill:"#8884d8",children:r.map((s,o)=>c.jsx(Eo,{fill:t4[o%t4.length]},`cell-${o}`))}),c.jsx(Qt,{contentStyle:{backgroundColor:"rgba(44, 44, 46, 0.8)",border:"1px solid #444",borderRadius:"12px"}}),c.jsx(no,{iconSize:10,wrapperStyle:{fontSize:"12px"}})]})})})]}),c.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Top 5 Animales (Costo)"}),c.jsx("div",{className:"space-y-2",children:i.length>0?i.map((s,o)=>c.jsxs("div",{className:"flex justify-between items-center text-sm bg-black/20 p-2 rounded-md",children:[c.jsxs("span",{className:"font-semibold text-white",children:[o+1,". ",s.animalId]}),c.jsxs("span",{className:"font-bold text-teal-300",children:["$",s.total.toFixed(2)]})]},s.animalId)):c.jsx("p",{className:"text-sm text-zinc-500 text-center pt-8",children:"No hay datos suficientes."})})]})]})]})}function gOe({onExitModule:t}){const{syncStatus:e}=at(),[n,r]=O.useState({name:"costos"}),[i,a]=O.useState([]),s=[{id:"agenda",label:"Agenda",icon:I_},{id:"planes",label:"Planes",icon:Sx},{id:"inventario",label:"Inventario",icon:Ax},{id:"costos",label:"Costos",icon:pA}],o=d=>{a(h=>[...h,n]),r(d)},l=()=>{const d=i[i.length-1];d?(a(h=>h.slice(0,-1)),r(d)):r({name:"agenda"})},u=d=>{a([]),r({name:d})},f=()=>{switch(n.name){case"inventario":return c.jsx(QNe,{});case"agenda":return c.jsx(JM,{});case"planes":return c.jsx(nOe,{navigateTo:o});case"plan-detail":return c.jsx(hOe,{planId:n.planId,onBack:l});case"costos":return c.jsx(mOe,{});default:return c.jsx(JM,{})}};return c.jsxs("div",{className:"min-h-screen animate-fade-in text-white flex flex-col",children:[c.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-gray-900/80 backdrop-blur-lg border-b border-brand-border",children:c.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[c.jsx("button",{onClick:t,className:"p-2 -ml-2 text-zinc-400 hover:text-white","aria-label":"Salir del mdulo",children:c.jsx(or,{size:24})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(vA,{className:"text-teal-400"}),c.jsx("h1",{className:"text-xl font-bold",children:"StockCare"})]}),c.jsx("div",{className:"w-8 flex justify-end",children:c.jsx(jb,{status:e})})]})}),c.jsx("main",{className:"flex-grow pt-16 pb-24",children:f()}),c.jsx("nav",{className:"flex-shrink-0 fixed bottom-0 left-0 right-0 bg-black/30 backdrop-blur-xl border-t border-white/20 flex justify-around",children:s.map(d=>c.jsxs("button",{onClick:()=>u(d.id),className:`flex flex-col items-center justify-center p-3 w-full transition-colors ${n.name===d.id?"text-teal-400":"text-gray-400 hover:text-teal-400"}`,children:[c.jsx(d.icon,{className:"w-6 h-6 mb-1"}),c.jsx("span",{className:"text-xs font-semibold",children:d.label})]},d.id))})]})}const yOe=()=>c.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-[#1C1C1E] animate-fade-in",children:[c.jsxs("div",{className:"relative flex items-center justify-center w-24 h-24",children:[c.jsx(lj,{className:"text-brand-orange w-12 h-12"}),c.jsx("div",{className:"absolute inset-0",children:c.jsx($$,{className:"w-24 h-24 text-zinc-700 animate-spin-slow"})})]}),c.jsx("p",{className:"mt-4 text-lg font-medium text-zinc-400 tracking-wider",children:"Cargando datos..."})]});function vOe(){const{currentUser:t,isLoading:e}=E$(),{isLoading:n}=at(),[r,i]=O.useState("rebano"),[a,s]=O.useState(null),o=f=>{s(null),i(f)},l=()=>{i("rebano")},u=f=>{s(f),i("rebano")};if(e||t&&n)return c.jsx(yOe,{});if(!t)return c.jsx(TY,{});switch(r){case"lactokeeper":return c.jsx(zNe,{onExitModule:l,navigateToRebano:u});case"kilos":return c.jsx(YNe,{onExitModule:l,navigateToRebano:u});case"salud":return c.jsx(gOe,{onExitModule:l});case"rebano":default:return c.jsx(ANe,{initialPage:a,onSwitchModule:o})}}h1.createRoot(document.getElementById("root")).render(c.jsx(F.StrictMode,{children:c.jsx(BG,{children:c.jsx(HG,{children:c.jsx(vOe,{})})})}));
