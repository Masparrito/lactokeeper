var SL=Object.defineProperty;var EL=(t,e,n)=>e in t?SL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Sa=(t,e,n)=>EL(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Cu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var OC={exports:{}},Vy={},kC={exports:{}},ht={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wh=Symbol.for("react.element"),AL=Symbol.for("react.portal"),TL=Symbol.for("react.fragment"),PL=Symbol.for("react.strict_mode"),OL=Symbol.for("react.profiler"),kL=Symbol.for("react.provider"),CL=Symbol.for("react.context"),IL=Symbol.for("react.forward_ref"),jL=Symbol.for("react.suspense"),NL=Symbol.for("react.memo"),DL=Symbol.for("react.lazy"),LE=Symbol.iterator;function ML(t){return t===null||typeof t!="object"?null:(t=LE&&t[LE]||t["@@iterator"],typeof t=="function"?t:null)}var CC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},IC=Object.assign,jC={};function Gc(t,e,n){this.props=t,this.context=e,this.refs=jC,this.updater=n||CC}Gc.prototype.isReactComponent={};Gc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Gc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function NC(){}NC.prototype=Gc.prototype;function D_(t,e,n){this.props=t,this.context=e,this.refs=jC,this.updater=n||CC}var M_=D_.prototype=new NC;M_.constructor=D_;IC(M_,Gc.prototype);M_.isPureReactComponent=!0;var FE=Array.isArray,DC=Object.prototype.hasOwnProperty,R_={current:null},MC={key:!0,ref:!0,__self:!0,__source:!0};function RC(t,e,n){var r,i={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)DC.call(e,r)&&!MC.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:Wh,type:t,key:a,ref:o,props:i,_owner:R_.current}}function RL(t,e){return{$$typeof:Wh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $_(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wh}function $L(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var zE=/\/+/g;function b0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$L(""+t.key):e.toString(36)}function Pm(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Wh:case AL:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+b0(o,0):r,FE(i)?(n="",t!=null&&(n=t.replace(zE,"$&/")+"/"),Pm(i,e,n,"",function(u){return u})):i!=null&&($_(i)&&(i=RL(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(zE,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",FE(t))for(var s=0;s<t.length;s++){a=t[s];var l=r+b0(a,s);o+=Pm(a,e,n,l,i)}else if(l=ML(t),typeof l=="function")for(t=l.call(t),s=0;!(a=t.next()).done;)a=a.value,l=r+b0(a,s++),o+=Pm(a,e,n,l,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Fp(t,e,n){if(t==null)return t;var r=[],i=0;return Pm(t,r,"","",function(a){return e.call(n,a,i++)}),r}function LL(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Cr={current:null},Om={transition:null},FL={ReactCurrentDispatcher:Cr,ReactCurrentBatchConfig:Om,ReactCurrentOwner:R_};function $C(){throw Error("act(...) is not supported in production builds of React.")}ht.Children={map:Fp,forEach:function(t,e,n){Fp(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Fp(t,function(){e++}),e},toArray:function(t){return Fp(t,function(e){return e})||[]},only:function(t){if(!$_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ht.Component=Gc;ht.Fragment=TL;ht.Profiler=OL;ht.PureComponent=D_;ht.StrictMode=PL;ht.Suspense=jL;ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FL;ht.act=$C;ht.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=IC({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=R_.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(l in e)DC.call(e,l)&&!MC.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:Wh,type:t.type,key:i,ref:a,props:r,_owner:o}};ht.createContext=function(t){return t={$$typeof:CL,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:kL,_context:t},t.Consumer=t};ht.createElement=RC;ht.createFactory=function(t){var e=RC.bind(null,t);return e.type=t,e};ht.createRef=function(){return{current:null}};ht.forwardRef=function(t){return{$$typeof:IL,render:t}};ht.isValidElement=$_;ht.lazy=function(t){return{$$typeof:DL,_payload:{_status:-1,_result:t},_init:LL}};ht.memo=function(t,e){return{$$typeof:NL,type:t,compare:e===void 0?null:e}};ht.startTransition=function(t){var e=Om.transition;Om.transition={};try{t()}finally{Om.transition=e}};ht.unstable_act=$C;ht.useCallback=function(t,e){return Cr.current.useCallback(t,e)};ht.useContext=function(t){return Cr.current.useContext(t)};ht.useDebugValue=function(){};ht.useDeferredValue=function(t){return Cr.current.useDeferredValue(t)};ht.useEffect=function(t,e){return Cr.current.useEffect(t,e)};ht.useId=function(){return Cr.current.useId()};ht.useImperativeHandle=function(t,e,n){return Cr.current.useImperativeHandle(t,e,n)};ht.useInsertionEffect=function(t,e){return Cr.current.useInsertionEffect(t,e)};ht.useLayoutEffect=function(t,e){return Cr.current.useLayoutEffect(t,e)};ht.useMemo=function(t,e){return Cr.current.useMemo(t,e)};ht.useReducer=function(t,e,n){return Cr.current.useReducer(t,e,n)};ht.useRef=function(t){return Cr.current.useRef(t)};ht.useState=function(t){return Cr.current.useState(t)};ht.useSyncExternalStore=function(t,e,n){return Cr.current.useSyncExternalStore(t,e,n)};ht.useTransition=function(){return Cr.current.useTransition()};ht.version="18.3.1";kC.exports=ht;var z=kC.exports;const U=Lt(z);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zL=z,VL=Symbol.for("react.element"),BL=Symbol.for("react.fragment"),UL=Object.prototype.hasOwnProperty,WL=zL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qL={key:!0,ref:!0,__self:!0,__source:!0};function LC(t,e,n){var r,i={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)UL.call(e,r)&&!qL.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:VL,type:t,key:a,ref:o,props:i,_owner:WL.current}}Vy.Fragment=BL;Vy.jsx=LC;Vy.jsxs=LC;OC.exports=Vy;var d=OC.exports,Fb={},FC={exports:{}},hi={},zC={exports:{}},VC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(X,ie){var ge=X.length;X.push(ie);e:for(;0<ge;){var Te=ge-1>>>1,be=X[Te];if(0<i(be,ie))X[Te]=ie,X[ge]=be,ge=Te;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var ie=X[0],ge=X.pop();if(ge!==ie){X[0]=ge;e:for(var Te=0,be=X.length,he=be>>>1;Te<he;){var Se=2*(Te+1)-1,Ve=X[Se],We=Se+1,we=X[We];if(0>i(Ve,ge))We<be&&0>i(we,Ve)?(X[Te]=we,X[We]=ge,Te=We):(X[Te]=Ve,X[Se]=ge,Te=Se);else if(We<be&&0>i(we,ge))X[Te]=we,X[We]=ge,Te=We;else break e}}return ie}function i(X,ie){var ge=X.sortIndex-ie.sortIndex;return ge!==0?ge:X.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}var l=[],u=[],c=1,f=null,m=3,g=!1,b=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(X){for(var ie=n(u);ie!==null;){if(ie.callback===null)r(u);else if(ie.startTime<=X)r(u),ie.sortIndex=ie.expirationTime,e(l,ie);else break;ie=n(u)}}function j(X){if(v=!1,T(X),!b)if(n(l)!==null)b=!0,ce(_);else{var ie=n(u);ie!==null&&me(j,ie.startTime-X)}}function _(X,ie){b=!1,v&&(v=!1,S(O),O=-1),g=!0;var ge=m;try{for(T(ie),f=n(l);f!==null&&(!(f.expirationTime>ie)||X&&!D());){var Te=f.callback;if(typeof Te=="function"){f.callback=null,m=f.priorityLevel;var be=Te(f.expirationTime<=ie);ie=t.unstable_now(),typeof be=="function"?f.callback=be:f===n(l)&&r(l),T(ie)}else r(l);f=n(l)}if(f!==null)var he=!0;else{var Se=n(u);Se!==null&&me(j,Se.startTime-ie),he=!1}return he}finally{f=null,m=ge,g=!1}}var P=!1,w=null,O=-1,I=5,R=-1;function D(){return!(t.unstable_now()-R<I)}function $(){if(w!==null){var X=t.unstable_now();R=X;var ie=!0;try{ie=w(!0,X)}finally{ie?L():(P=!1,w=null)}}else P=!1}var L;if(typeof E=="function")L=function(){E($)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,ae=ne.port2;ne.port1.onmessage=$,L=function(){ae.postMessage(null)}}else L=function(){x($,0)};function ce(X){w=X,P||(P=!0,L())}function me(X,ie){O=x(function(){X(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){b||g||(b=!0,ce(_))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(X){switch(m){case 1:case 2:case 3:var ie=3;break;default:ie=m}var ge=m;m=ie;try{return X()}finally{m=ge}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,ie){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ge=m;m=X;try{return ie()}finally{m=ge}},t.unstable_scheduleCallback=function(X,ie,ge){var Te=t.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Te+ge:Te):ge=Te,X){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=ge+be,X={id:c++,callback:ie,priorityLevel:X,startTime:ge,expirationTime:be,sortIndex:-1},ge>Te?(X.sortIndex=ge,e(u,X),n(l)===null&&X===n(u)&&(v?(S(O),O=-1):v=!0,me(j,ge-Te))):(X.sortIndex=be,e(l,X),b||g||(b=!0,ce(_))),X},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(X){var ie=m;return function(){var ge=m;m=ie;try{return X.apply(this,arguments)}finally{m=ge}}}})(VC);zC.exports=VC;var KL=zC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HL=z,fi=KL;function Ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var BC=new Set,Nd={};function Kl(t,e){oc(t,e),oc(t+"Capture",e)}function oc(t,e){for(Nd[t]=e,t=0;t<e.length;t++)BC.add(e[t])}var xo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zb=Object.prototype.hasOwnProperty,GL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,VE={},BE={};function YL(t){return zb.call(BE,t)?!0:zb.call(VE,t)?!1:GL.test(t)?BE[t]=!0:(VE[t]=!0,!1)}function XL(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function QL(t,e,n,r){if(e===null||typeof e>"u"||XL(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ir(t,e,n,r,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var rr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){rr[t]=new Ir(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];rr[e]=new Ir(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){rr[t]=new Ir(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){rr[t]=new Ir(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){rr[t]=new Ir(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){rr[t]=new Ir(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){rr[t]=new Ir(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){rr[t]=new Ir(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){rr[t]=new Ir(t,5,!1,t.toLowerCase(),null,!1,!1)});var L_=/[\-:]([a-z])/g;function F_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(L_,F_);rr[e]=new Ir(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(L_,F_);rr[e]=new Ir(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(L_,F_);rr[e]=new Ir(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){rr[t]=new Ir(t,1,!1,t.toLowerCase(),null,!1,!1)});rr.xlinkHref=new Ir("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){rr[t]=new Ir(t,1,!1,t.toLowerCase(),null,!0,!0)});function z_(t,e,n,r){var i=rr.hasOwnProperty(e)?rr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(QL(e,n,i,r)&&(n=null),r||i===null?YL(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var jo=HL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zp=Symbol.for("react.element"),Iu=Symbol.for("react.portal"),ju=Symbol.for("react.fragment"),V_=Symbol.for("react.strict_mode"),Vb=Symbol.for("react.profiler"),UC=Symbol.for("react.provider"),WC=Symbol.for("react.context"),B_=Symbol.for("react.forward_ref"),Bb=Symbol.for("react.suspense"),Ub=Symbol.for("react.suspense_list"),U_=Symbol.for("react.memo"),Xo=Symbol.for("react.lazy"),qC=Symbol.for("react.offscreen"),UE=Symbol.iterator;function Mf(t){return t===null||typeof t!="object"?null:(t=UE&&t[UE]||t["@@iterator"],typeof t=="function"?t:null)}var un=Object.assign,x0;function td(t){if(x0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);x0=e&&e[1]||""}return`
`+x0+t}var w0=!1;function _0(t,e){if(!t||w0)return"";w0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(o!==1||s!==1)do if(o--,s--,0>s||i[o]!==a[s]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=s);break}}}finally{w0=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?td(t):""}function JL(t){switch(t.tag){case 5:return td(t.type);case 16:return td("Lazy");case 13:return td("Suspense");case 19:return td("SuspenseList");case 0:case 2:case 15:return t=_0(t.type,!1),t;case 11:return t=_0(t.type.render,!1),t;case 1:return t=_0(t.type,!0),t;default:return""}}function Wb(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ju:return"Fragment";case Iu:return"Portal";case Vb:return"Profiler";case V_:return"StrictMode";case Bb:return"Suspense";case Ub:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case WC:return(t.displayName||"Context")+".Consumer";case UC:return(t._context.displayName||"Context")+".Provider";case B_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case U_:return e=t.displayName||null,e!==null?e:Wb(t.type)||"Memo";case Xo:e=t._payload,t=t._init;try{return Wb(t(e))}catch{}}return null}function ZL(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Wb(e);case 8:return e===V_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function _s(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function KC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function e5(t){var e=KC(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Vp(t){t._valueTracker||(t._valueTracker=e5(t))}function HC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=KC(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Hm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function qb(t,e){var n=e.checked;return un({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function WE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=_s(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function GC(t,e){e=e.checked,e!=null&&z_(t,"checked",e,!1)}function Kb(t,e){GC(t,e);var n=_s(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hb(t,e.type,n):e.hasOwnProperty("defaultValue")&&Hb(t,e.type,_s(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function qE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Hb(t,e,n){(e!=="number"||Hm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var nd=Array.isArray;function Ku(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+_s(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Gb(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ae(91));return un({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function KE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ae(92));if(nd(n)){if(1<n.length)throw Error(Ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:_s(n)}}function YC(t,e){var n=_s(e.value),r=_s(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function HE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function XC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yb(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?XC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Bp,QC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Bp=Bp||document.createElement("div"),Bp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Dd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var hd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},t5=["Webkit","ms","Moz","O"];Object.keys(hd).forEach(function(t){t5.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),hd[e]=hd[t]})});function JC(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||hd.hasOwnProperty(t)&&hd[t]?(""+e).trim():e+"px"}function ZC(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=JC(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var n5=un({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xb(t,e){if(e){if(n5[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ae(62))}}function Qb(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jb=null;function W_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zb=null,Hu=null,Gu=null;function GE(t){if(t=Hh(t)){if(typeof Zb!="function")throw Error(Ae(280));var e=t.stateNode;e&&(e=Ky(e),Zb(t.stateNode,t.type,e))}}function eI(t){Hu?Gu?Gu.push(t):Gu=[t]:Hu=t}function tI(){if(Hu){var t=Hu,e=Gu;if(Gu=Hu=null,GE(t),e)for(t=0;t<e.length;t++)GE(e[t])}}function nI(t,e){return t(e)}function rI(){}var S0=!1;function iI(t,e,n){if(S0)return t(e,n);S0=!0;try{return nI(t,e,n)}finally{S0=!1,(Hu!==null||Gu!==null)&&(rI(),tI())}}function Md(t,e){var n=t.stateNode;if(n===null)return null;var r=Ky(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ae(231,e,typeof n));return n}var ex=!1;if(xo)try{var Rf={};Object.defineProperty(Rf,"passive",{get:function(){ex=!0}}),window.addEventListener("test",Rf,Rf),window.removeEventListener("test",Rf,Rf)}catch{ex=!1}function r5(t,e,n,r,i,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var pd=!1,Gm=null,Ym=!1,tx=null,i5={onError:function(t){pd=!0,Gm=t}};function a5(t,e,n,r,i,a,o,s,l){pd=!1,Gm=null,r5.apply(i5,arguments)}function o5(t,e,n,r,i,a,o,s,l){if(a5.apply(this,arguments),pd){if(pd){var u=Gm;pd=!1,Gm=null}else throw Error(Ae(198));Ym||(Ym=!0,tx=u)}}function Hl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function aI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function YE(t){if(Hl(t)!==t)throw Error(Ae(188))}function s5(t){var e=t.alternate;if(!e){if(e=Hl(t),e===null)throw Error(Ae(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return YE(i),t;if(a===r)return YE(i),e;a=a.sibling}throw Error(Ae(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,s=i.child;s;){if(s===n){o=!0,n=i,r=a;break}if(s===r){o=!0,r=i,n=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===n){o=!0,n=a,r=i;break}if(s===r){o=!0,r=a,n=i;break}s=s.sibling}if(!o)throw Error(Ae(189))}}if(n.alternate!==r)throw Error(Ae(190))}if(n.tag!==3)throw Error(Ae(188));return n.stateNode.current===n?t:e}function oI(t){return t=s5(t),t!==null?sI(t):null}function sI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=sI(t);if(e!==null)return e;t=t.sibling}return null}var lI=fi.unstable_scheduleCallback,XE=fi.unstable_cancelCallback,l5=fi.unstable_shouldYield,u5=fi.unstable_requestPaint,vn=fi.unstable_now,c5=fi.unstable_getCurrentPriorityLevel,q_=fi.unstable_ImmediatePriority,uI=fi.unstable_UserBlockingPriority,Xm=fi.unstable_NormalPriority,f5=fi.unstable_LowPriority,cI=fi.unstable_IdlePriority,By=null,Na=null;function d5(t){if(Na&&typeof Na.onCommitFiberRoot=="function")try{Na.onCommitFiberRoot(By,t,void 0,(t.current.flags&128)===128)}catch{}}var ua=Math.clz32?Math.clz32:m5,h5=Math.log,p5=Math.LN2;function m5(t){return t>>>=0,t===0?32:31-(h5(t)/p5|0)|0}var Up=64,Wp=4194304;function rd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Qm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var s=o&~i;s!==0?r=rd(s):(a&=o,a!==0&&(r=rd(a)))}else o=n&~i,o!==0?r=rd(o):a!==0&&(r=rd(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ua(e),i=1<<n,r|=t[n],e&=~i;return r}function g5(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function y5(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-ua(a),s=1<<o,l=i[o];l===-1?(!(s&n)||s&r)&&(i[o]=g5(s,e)):l<=e&&(t.expiredLanes|=s),a&=~s}}function nx(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function fI(){var t=Up;return Up<<=1,!(Up&4194240)&&(Up=64),t}function E0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function qh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ua(e),t[e]=n}function v5(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ua(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}function K_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ua(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Nt=0;function dI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var hI,H_,pI,mI,gI,rx=!1,qp=[],ss=null,ls=null,us=null,Rd=new Map,$d=new Map,Zo=[],b5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function QE(t,e){switch(t){case"focusin":case"focusout":ss=null;break;case"dragenter":case"dragleave":ls=null;break;case"mouseover":case"mouseout":us=null;break;case"pointerover":case"pointerout":Rd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$d.delete(e.pointerId)}}function $f(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Hh(e),e!==null&&H_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function x5(t,e,n,r,i){switch(e){case"focusin":return ss=$f(ss,t,e,n,r,i),!0;case"dragenter":return ls=$f(ls,t,e,n,r,i),!0;case"mouseover":return us=$f(us,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rd.set(a,$f(Rd.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,$d.set(a,$f($d.get(a)||null,t,e,n,r,i)),!0}return!1}function yI(t){var e=ml(t.target);if(e!==null){var n=Hl(e);if(n!==null){if(e=n.tag,e===13){if(e=aI(n),e!==null){t.blockedOn=e,gI(t.priority,function(){pI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function km(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ix(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Jb=r,n.target.dispatchEvent(r),Jb=null}else return e=Hh(n),e!==null&&H_(e),t.blockedOn=n,!1;e.shift()}return!0}function JE(t,e,n){km(t)&&n.delete(e)}function w5(){rx=!1,ss!==null&&km(ss)&&(ss=null),ls!==null&&km(ls)&&(ls=null),us!==null&&km(us)&&(us=null),Rd.forEach(JE),$d.forEach(JE)}function Lf(t,e){t.blockedOn===e&&(t.blockedOn=null,rx||(rx=!0,fi.unstable_scheduleCallback(fi.unstable_NormalPriority,w5)))}function Ld(t){function e(i){return Lf(i,t)}if(0<qp.length){Lf(qp[0],t);for(var n=1;n<qp.length;n++){var r=qp[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ss!==null&&Lf(ss,t),ls!==null&&Lf(ls,t),us!==null&&Lf(us,t),Rd.forEach(e),$d.forEach(e),n=0;n<Zo.length;n++)r=Zo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Zo.length&&(n=Zo[0],n.blockedOn===null);)yI(n),n.blockedOn===null&&Zo.shift()}var Yu=jo.ReactCurrentBatchConfig,Jm=!0;function _5(t,e,n,r){var i=Nt,a=Yu.transition;Yu.transition=null;try{Nt=1,G_(t,e,n,r)}finally{Nt=i,Yu.transition=a}}function S5(t,e,n,r){var i=Nt,a=Yu.transition;Yu.transition=null;try{Nt=4,G_(t,e,n,r)}finally{Nt=i,Yu.transition=a}}function G_(t,e,n,r){if(Jm){var i=ix(t,e,n,r);if(i===null)D0(t,e,r,Zm,n),QE(t,r);else if(x5(i,t,e,n,r))r.stopPropagation();else if(QE(t,r),e&4&&-1<b5.indexOf(t)){for(;i!==null;){var a=Hh(i);if(a!==null&&hI(a),a=ix(t,e,n,r),a===null&&D0(t,e,r,Zm,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else D0(t,e,r,null,n)}}var Zm=null;function ix(t,e,n,r){if(Zm=null,t=W_(r),t=ml(t),t!==null)if(e=Hl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=aI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Zm=t,null}function vI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(c5()){case q_:return 1;case uI:return 4;case Xm:case f5:return 16;case cI:return 536870912;default:return 16}default:return 16}}var ns=null,Y_=null,Cm=null;function bI(){if(Cm)return Cm;var t,e=Y_,n=e.length,r,i="value"in ns?ns.value:ns.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[a-r];r++);return Cm=i.slice(t,1<r?1-r:void 0)}function Im(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Kp(){return!0}function ZE(){return!1}function pi(t){function e(n,r,i,a,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(n=t[s],this[s]=n?n(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Kp:ZE,this.isPropagationStopped=ZE,this}return un(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Kp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Kp)},persist:function(){},isPersistent:Kp}),e}var Yc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},X_=pi(Yc),Kh=un({},Yc,{view:0,detail:0}),E5=pi(Kh),A0,T0,Ff,Uy=un({},Kh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Q_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ff&&(Ff&&t.type==="mousemove"?(A0=t.screenX-Ff.screenX,T0=t.screenY-Ff.screenY):T0=A0=0,Ff=t),A0)},movementY:function(t){return"movementY"in t?t.movementY:T0}}),eA=pi(Uy),A5=un({},Uy,{dataTransfer:0}),T5=pi(A5),P5=un({},Kh,{relatedTarget:0}),P0=pi(P5),O5=un({},Yc,{animationName:0,elapsedTime:0,pseudoElement:0}),k5=pi(O5),C5=un({},Yc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),I5=pi(C5),j5=un({},Yc,{data:0}),tA=pi(j5),N5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},D5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},M5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function R5(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=M5[t])?!!e[t]:!1}function Q_(){return R5}var $5=un({},Kh,{key:function(t){if(t.key){var e=N5[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Im(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?D5[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Q_,charCode:function(t){return t.type==="keypress"?Im(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Im(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),L5=pi($5),F5=un({},Uy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nA=pi(F5),z5=un({},Kh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Q_}),V5=pi(z5),B5=un({},Yc,{propertyName:0,elapsedTime:0,pseudoElement:0}),U5=pi(B5),W5=un({},Uy,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),q5=pi(W5),K5=[9,13,27,32],J_=xo&&"CompositionEvent"in window,md=null;xo&&"documentMode"in document&&(md=document.documentMode);var H5=xo&&"TextEvent"in window&&!md,xI=xo&&(!J_||md&&8<md&&11>=md),rA=" ",iA=!1;function wI(t,e){switch(t){case"keyup":return K5.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _I(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Nu=!1;function G5(t,e){switch(t){case"compositionend":return _I(e);case"keypress":return e.which!==32?null:(iA=!0,rA);case"textInput":return t=e.data,t===rA&&iA?null:t;default:return null}}function Y5(t,e){if(Nu)return t==="compositionend"||!J_&&wI(t,e)?(t=bI(),Cm=Y_=ns=null,Nu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return xI&&e.locale!=="ko"?null:e.data;default:return null}}var X5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function aA(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!X5[t.type]:e==="textarea"}function SI(t,e,n,r){eI(r),e=eg(e,"onChange"),0<e.length&&(n=new X_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var gd=null,Fd=null;function Q5(t){DI(t,0)}function Wy(t){var e=Ru(t);if(HC(e))return t}function J5(t,e){if(t==="change")return e}var EI=!1;if(xo){var O0;if(xo){var k0="oninput"in document;if(!k0){var oA=document.createElement("div");oA.setAttribute("oninput","return;"),k0=typeof oA.oninput=="function"}O0=k0}else O0=!1;EI=O0&&(!document.documentMode||9<document.documentMode)}function sA(){gd&&(gd.detachEvent("onpropertychange",AI),Fd=gd=null)}function AI(t){if(t.propertyName==="value"&&Wy(Fd)){var e=[];SI(e,Fd,t,W_(t)),iI(Q5,e)}}function Z5(t,e,n){t==="focusin"?(sA(),gd=e,Fd=n,gd.attachEvent("onpropertychange",AI)):t==="focusout"&&sA()}function e3(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Wy(Fd)}function t3(t,e){if(t==="click")return Wy(e)}function n3(t,e){if(t==="input"||t==="change")return Wy(e)}function r3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fa=typeof Object.is=="function"?Object.is:r3;function zd(t,e){if(fa(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!zb.call(e,i)||!fa(t[i],e[i]))return!1}return!0}function lA(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function uA(t,e){var n=lA(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=lA(n)}}function TI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?TI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function PI(){for(var t=window,e=Hm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Hm(t.document)}return e}function Z_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function i3(t){var e=PI(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&TI(n.ownerDocument.documentElement,n)){if(r!==null&&Z_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=uA(n,a);var o=uA(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var a3=xo&&"documentMode"in document&&11>=document.documentMode,Du=null,ax=null,yd=null,ox=!1;function cA(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ox||Du==null||Du!==Hm(r)||(r=Du,"selectionStart"in r&&Z_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),yd&&zd(yd,r)||(yd=r,r=eg(ax,"onSelect"),0<r.length&&(e=new X_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Du)))}function Hp(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Mu={animationend:Hp("Animation","AnimationEnd"),animationiteration:Hp("Animation","AnimationIteration"),animationstart:Hp("Animation","AnimationStart"),transitionend:Hp("Transition","TransitionEnd")},C0={},OI={};xo&&(OI=document.createElement("div").style,"AnimationEvent"in window||(delete Mu.animationend.animation,delete Mu.animationiteration.animation,delete Mu.animationstart.animation),"TransitionEvent"in window||delete Mu.transitionend.transition);function qy(t){if(C0[t])return C0[t];if(!Mu[t])return t;var e=Mu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in OI)return C0[t]=e[n];return t}var kI=qy("animationend"),CI=qy("animationiteration"),II=qy("animationstart"),jI=qy("transitionend"),NI=new Map,fA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cs(t,e){NI.set(t,e),Kl(e,[t])}for(var I0=0;I0<fA.length;I0++){var j0=fA[I0],o3=j0.toLowerCase(),s3=j0[0].toUpperCase()+j0.slice(1);Cs(o3,"on"+s3)}Cs(kI,"onAnimationEnd");Cs(CI,"onAnimationIteration");Cs(II,"onAnimationStart");Cs("dblclick","onDoubleClick");Cs("focusin","onFocus");Cs("focusout","onBlur");Cs(jI,"onTransitionEnd");oc("onMouseEnter",["mouseout","mouseover"]);oc("onMouseLeave",["mouseout","mouseover"]);oc("onPointerEnter",["pointerout","pointerover"]);oc("onPointerLeave",["pointerout","pointerover"]);Kl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Kl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Kl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Kl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Kl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Kl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var id="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),l3=new Set("cancel close invalid load scroll toggle".split(" ").concat(id));function dA(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,o5(r,e,void 0,t),t.currentTarget=null}function DI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;dA(i,s,u),a=l}else for(o=0;o<r.length;o++){if(s=r[o],l=s.instance,u=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;dA(i,s,u),a=l}}}if(Ym)throw t=tx,Ym=!1,tx=null,t}function Xt(t,e){var n=e[fx];n===void 0&&(n=e[fx]=new Set);var r=t+"__bubble";n.has(r)||(MI(e,t,2,!1),n.add(r))}function N0(t,e,n){var r=0;e&&(r|=4),MI(n,t,r,e)}var Gp="_reactListening"+Math.random().toString(36).slice(2);function Vd(t){if(!t[Gp]){t[Gp]=!0,BC.forEach(function(n){n!=="selectionchange"&&(l3.has(n)||N0(n,!1,t),N0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Gp]||(e[Gp]=!0,N0("selectionchange",!1,e))}}function MI(t,e,n,r){switch(vI(e)){case 1:var i=_5;break;case 4:i=S5;break;default:i=G_}n=i.bind(null,e,n,t),i=void 0,!ex||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function D0(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;s!==null;){if(o=ml(s),o===null)return;if(l=o.tag,l===5||l===6){r=a=o;continue e}s=s.parentNode}}r=r.return}iI(function(){var u=a,c=W_(n),f=[];e:{var m=NI.get(t);if(m!==void 0){var g=X_,b=t;switch(t){case"keypress":if(Im(n)===0)break e;case"keydown":case"keyup":g=L5;break;case"focusin":b="focus",g=P0;break;case"focusout":b="blur",g=P0;break;case"beforeblur":case"afterblur":g=P0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=eA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=T5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=V5;break;case kI:case CI:case II:g=k5;break;case jI:g=U5;break;case"scroll":g=E5;break;case"wheel":g=q5;break;case"copy":case"cut":case"paste":g=I5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=nA}var v=(e&4)!==0,x=!v&&t==="scroll",S=v?m!==null?m+"Capture":null:m;v=[];for(var E=u,T;E!==null;){T=E;var j=T.stateNode;if(T.tag===5&&j!==null&&(T=j,S!==null&&(j=Md(E,S),j!=null&&v.push(Bd(E,j,T)))),x)break;E=E.return}0<v.length&&(m=new g(m,b,null,n,c),f.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==Jb&&(b=n.relatedTarget||n.fromElement)&&(ml(b)||b[wo]))break e;if((g||m)&&(m=c.window===c?c:(m=c.ownerDocument)?m.defaultView||m.parentWindow:window,g?(b=n.relatedTarget||n.toElement,g=u,b=b?ml(b):null,b!==null&&(x=Hl(b),b!==x||b.tag!==5&&b.tag!==6)&&(b=null)):(g=null,b=u),g!==b)){if(v=eA,j="onMouseLeave",S="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(v=nA,j="onPointerLeave",S="onPointerEnter",E="pointer"),x=g==null?m:Ru(g),T=b==null?m:Ru(b),m=new v(j,E+"leave",g,n,c),m.target=x,m.relatedTarget=T,j=null,ml(c)===u&&(v=new v(S,E+"enter",b,n,c),v.target=T,v.relatedTarget=x,j=v),x=j,g&&b)t:{for(v=g,S=b,E=0,T=v;T;T=xu(T))E++;for(T=0,j=S;j;j=xu(j))T++;for(;0<E-T;)v=xu(v),E--;for(;0<T-E;)S=xu(S),T--;for(;E--;){if(v===S||S!==null&&v===S.alternate)break t;v=xu(v),S=xu(S)}v=null}else v=null;g!==null&&hA(f,m,g,v,!1),b!==null&&x!==null&&hA(f,x,b,v,!0)}}e:{if(m=u?Ru(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var _=J5;else if(aA(m))if(EI)_=n3;else{_=e3;var P=Z5}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(_=t3);if(_&&(_=_(t,u))){SI(f,_,n,c);break e}P&&P(t,m,u),t==="focusout"&&(P=m._wrapperState)&&P.controlled&&m.type==="number"&&Hb(m,"number",m.value)}switch(P=u?Ru(u):window,t){case"focusin":(aA(P)||P.contentEditable==="true")&&(Du=P,ax=u,yd=null);break;case"focusout":yd=ax=Du=null;break;case"mousedown":ox=!0;break;case"contextmenu":case"mouseup":case"dragend":ox=!1,cA(f,n,c);break;case"selectionchange":if(a3)break;case"keydown":case"keyup":cA(f,n,c)}var w;if(J_)e:{switch(t){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Nu?wI(t,n)&&(O="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(xI&&n.locale!=="ko"&&(Nu||O!=="onCompositionStart"?O==="onCompositionEnd"&&Nu&&(w=bI()):(ns=c,Y_="value"in ns?ns.value:ns.textContent,Nu=!0)),P=eg(u,O),0<P.length&&(O=new tA(O,t,null,n,c),f.push({event:O,listeners:P}),w?O.data=w:(w=_I(n),w!==null&&(O.data=w)))),(w=H5?G5(t,n):Y5(t,n))&&(u=eg(u,"onBeforeInput"),0<u.length&&(c=new tA("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=w))}DI(f,e)})}function Bd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function eg(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Md(t,n),a!=null&&r.unshift(Bd(t,a,i)),a=Md(t,e),a!=null&&r.push(Bd(t,a,i))),t=t.return}return r}function xu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function hA(t,e,n,r,i){for(var a=e._reactName,o=[];n!==null&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&u!==null&&(s=u,i?(l=Md(n,a),l!=null&&o.unshift(Bd(n,l,s))):i||(l=Md(n,a),l!=null&&o.push(Bd(n,l,s)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var u3=/\r\n?/g,c3=/\u0000|\uFFFD/g;function pA(t){return(typeof t=="string"?t:""+t).replace(u3,`
`).replace(c3,"")}function Yp(t,e,n){if(e=pA(e),pA(t)!==e&&n)throw Error(Ae(425))}function tg(){}var sx=null,lx=null;function ux(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var cx=typeof setTimeout=="function"?setTimeout:void 0,f3=typeof clearTimeout=="function"?clearTimeout:void 0,mA=typeof Promise=="function"?Promise:void 0,d3=typeof queueMicrotask=="function"?queueMicrotask:typeof mA<"u"?function(t){return mA.resolve(null).then(t).catch(h3)}:cx;function h3(t){setTimeout(function(){throw t})}function M0(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ld(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ld(e)}function cs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function gA(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Xc=Math.random().toString(36).slice(2),Oa="__reactFiber$"+Xc,Ud="__reactProps$"+Xc,wo="__reactContainer$"+Xc,fx="__reactEvents$"+Xc,p3="__reactListeners$"+Xc,m3="__reactHandles$"+Xc;function ml(t){var e=t[Oa];if(e)return e;for(var n=t.parentNode;n;){if(e=n[wo]||n[Oa]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=gA(t);t!==null;){if(n=t[Oa])return n;t=gA(t)}return e}t=n,n=t.parentNode}return null}function Hh(t){return t=t[Oa]||t[wo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ru(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ae(33))}function Ky(t){return t[Ud]||null}var dx=[],$u=-1;function Is(t){return{current:t}}function en(t){0>$u||(t.current=dx[$u],dx[$u]=null,$u--)}function Ht(t,e){$u++,dx[$u]=t.current,t.current=e}var Ss={},xr=Is(Ss),Wr=Is(!1),Nl=Ss;function sc(t,e){var n=t.type.contextTypes;if(!n)return Ss;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function qr(t){return t=t.childContextTypes,t!=null}function ng(){en(Wr),en(xr)}function yA(t,e,n){if(xr.current!==Ss)throw Error(Ae(168));Ht(xr,e),Ht(Wr,n)}function RI(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ae(108,ZL(t)||"Unknown",i));return un({},n,r)}function rg(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ss,Nl=xr.current,Ht(xr,t),Ht(Wr,Wr.current),!0}function vA(t,e,n){var r=t.stateNode;if(!r)throw Error(Ae(169));n?(t=RI(t,e,Nl),r.__reactInternalMemoizedMergedChildContext=t,en(Wr),en(xr),Ht(xr,t)):en(Wr),Ht(Wr,n)}var ao=null,Hy=!1,R0=!1;function $I(t){ao===null?ao=[t]:ao.push(t)}function g3(t){Hy=!0,$I(t)}function js(){if(!R0&&ao!==null){R0=!0;var t=0,e=Nt;try{var n=ao;for(Nt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ao=null,Hy=!1}catch(i){throw ao!==null&&(ao=ao.slice(t+1)),lI(q_,js),i}finally{Nt=e,R0=!1}}return null}var Lu=[],Fu=0,ig=null,ag=0,Pi=[],Oi=0,Dl=null,oo=1,so="";function sl(t,e){Lu[Fu++]=ag,Lu[Fu++]=ig,ig=t,ag=e}function LI(t,e,n){Pi[Oi++]=oo,Pi[Oi++]=so,Pi[Oi++]=Dl,Dl=t;var r=oo;t=so;var i=32-ua(r)-1;r&=~(1<<i),n+=1;var a=32-ua(e)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,oo=1<<32-ua(e)+i|n<<i|r,so=a+t}else oo=1<<a|n<<i|r,so=t}function e1(t){t.return!==null&&(sl(t,1),LI(t,1,0))}function t1(t){for(;t===ig;)ig=Lu[--Fu],Lu[Fu]=null,ag=Lu[--Fu],Lu[Fu]=null;for(;t===Dl;)Dl=Pi[--Oi],Pi[Oi]=null,so=Pi[--Oi],Pi[Oi]=null,oo=Pi[--Oi],Pi[Oi]=null}var li=null,oi=null,nn=!1,ra=null;function FI(t,e){var n=Ci(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function bA(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,li=t,oi=cs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,li=t,oi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Dl!==null?{id:oo,overflow:so}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ci(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,li=t,oi=null,!0):!1;default:return!1}}function hx(t){return(t.mode&1)!==0&&(t.flags&128)===0}function px(t){if(nn){var e=oi;if(e){var n=e;if(!bA(t,e)){if(hx(t))throw Error(Ae(418));e=cs(n.nextSibling);var r=li;e&&bA(t,e)?FI(r,n):(t.flags=t.flags&-4097|2,nn=!1,li=t)}}else{if(hx(t))throw Error(Ae(418));t.flags=t.flags&-4097|2,nn=!1,li=t}}}function xA(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;li=t}function Xp(t){if(t!==li)return!1;if(!nn)return xA(t),nn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ux(t.type,t.memoizedProps)),e&&(e=oi)){if(hx(t))throw zI(),Error(Ae(418));for(;e;)FI(t,e),e=cs(e.nextSibling)}if(xA(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){oi=cs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}oi=null}}else oi=li?cs(t.stateNode.nextSibling):null;return!0}function zI(){for(var t=oi;t;)t=cs(t.nextSibling)}function lc(){oi=li=null,nn=!1}function n1(t){ra===null?ra=[t]:ra.push(t)}var y3=jo.ReactCurrentBatchConfig;function zf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ae(309));var r=n.stateNode}if(!r)throw Error(Ae(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var s=i.refs;o===null?delete s[a]:s[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(Ae(284));if(!n._owner)throw Error(Ae(290,t))}return t}function Qp(t,e){throw t=Object.prototype.toString.call(e),Error(Ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function wA(t){var e=t._init;return e(t._payload)}function VI(t){function e(S,E){if(t){var T=S.deletions;T===null?(S.deletions=[E],S.flags|=16):T.push(E)}}function n(S,E){if(!t)return null;for(;E!==null;)e(S,E),E=E.sibling;return null}function r(S,E){for(S=new Map;E!==null;)E.key!==null?S.set(E.key,E):S.set(E.index,E),E=E.sibling;return S}function i(S,E){return S=ps(S,E),S.index=0,S.sibling=null,S}function a(S,E,T){return S.index=T,t?(T=S.alternate,T!==null?(T=T.index,T<E?(S.flags|=2,E):T):(S.flags|=2,E)):(S.flags|=1048576,E)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function s(S,E,T,j){return E===null||E.tag!==6?(E=U0(T,S.mode,j),E.return=S,E):(E=i(E,T),E.return=S,E)}function l(S,E,T,j){var _=T.type;return _===ju?c(S,E,T.props.children,j,T.key):E!==null&&(E.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Xo&&wA(_)===E.type)?(j=i(E,T.props),j.ref=zf(S,E,T),j.return=S,j):(j=Lm(T.type,T.key,T.props,null,S.mode,j),j.ref=zf(S,E,T),j.return=S,j)}function u(S,E,T,j){return E===null||E.tag!==4||E.stateNode.containerInfo!==T.containerInfo||E.stateNode.implementation!==T.implementation?(E=W0(T,S.mode,j),E.return=S,E):(E=i(E,T.children||[]),E.return=S,E)}function c(S,E,T,j,_){return E===null||E.tag!==7?(E=Pl(T,S.mode,j,_),E.return=S,E):(E=i(E,T),E.return=S,E)}function f(S,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return E=U0(""+E,S.mode,T),E.return=S,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case zp:return T=Lm(E.type,E.key,E.props,null,S.mode,T),T.ref=zf(S,null,E),T.return=S,T;case Iu:return E=W0(E,S.mode,T),E.return=S,E;case Xo:var j=E._init;return f(S,j(E._payload),T)}if(nd(E)||Mf(E))return E=Pl(E,S.mode,T,null),E.return=S,E;Qp(S,E)}return null}function m(S,E,T,j){var _=E!==null?E.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return _!==null?null:s(S,E,""+T,j);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case zp:return T.key===_?l(S,E,T,j):null;case Iu:return T.key===_?u(S,E,T,j):null;case Xo:return _=T._init,m(S,E,_(T._payload),j)}if(nd(T)||Mf(T))return _!==null?null:c(S,E,T,j,null);Qp(S,T)}return null}function g(S,E,T,j,_){if(typeof j=="string"&&j!==""||typeof j=="number")return S=S.get(T)||null,s(E,S,""+j,_);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case zp:return S=S.get(j.key===null?T:j.key)||null,l(E,S,j,_);case Iu:return S=S.get(j.key===null?T:j.key)||null,u(E,S,j,_);case Xo:var P=j._init;return g(S,E,T,P(j._payload),_)}if(nd(j)||Mf(j))return S=S.get(T)||null,c(E,S,j,_,null);Qp(E,j)}return null}function b(S,E,T,j){for(var _=null,P=null,w=E,O=E=0,I=null;w!==null&&O<T.length;O++){w.index>O?(I=w,w=null):I=w.sibling;var R=m(S,w,T[O],j);if(R===null){w===null&&(w=I);break}t&&w&&R.alternate===null&&e(S,w),E=a(R,E,O),P===null?_=R:P.sibling=R,P=R,w=I}if(O===T.length)return n(S,w),nn&&sl(S,O),_;if(w===null){for(;O<T.length;O++)w=f(S,T[O],j),w!==null&&(E=a(w,E,O),P===null?_=w:P.sibling=w,P=w);return nn&&sl(S,O),_}for(w=r(S,w);O<T.length;O++)I=g(w,S,O,T[O],j),I!==null&&(t&&I.alternate!==null&&w.delete(I.key===null?O:I.key),E=a(I,E,O),P===null?_=I:P.sibling=I,P=I);return t&&w.forEach(function(D){return e(S,D)}),nn&&sl(S,O),_}function v(S,E,T,j){var _=Mf(T);if(typeof _!="function")throw Error(Ae(150));if(T=_.call(T),T==null)throw Error(Ae(151));for(var P=_=null,w=E,O=E=0,I=null,R=T.next();w!==null&&!R.done;O++,R=T.next()){w.index>O?(I=w,w=null):I=w.sibling;var D=m(S,w,R.value,j);if(D===null){w===null&&(w=I);break}t&&w&&D.alternate===null&&e(S,w),E=a(D,E,O),P===null?_=D:P.sibling=D,P=D,w=I}if(R.done)return n(S,w),nn&&sl(S,O),_;if(w===null){for(;!R.done;O++,R=T.next())R=f(S,R.value,j),R!==null&&(E=a(R,E,O),P===null?_=R:P.sibling=R,P=R);return nn&&sl(S,O),_}for(w=r(S,w);!R.done;O++,R=T.next())R=g(w,S,O,R.value,j),R!==null&&(t&&R.alternate!==null&&w.delete(R.key===null?O:R.key),E=a(R,E,O),P===null?_=R:P.sibling=R,P=R);return t&&w.forEach(function($){return e(S,$)}),nn&&sl(S,O),_}function x(S,E,T,j){if(typeof T=="object"&&T!==null&&T.type===ju&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case zp:e:{for(var _=T.key,P=E;P!==null;){if(P.key===_){if(_=T.type,_===ju){if(P.tag===7){n(S,P.sibling),E=i(P,T.props.children),E.return=S,S=E;break e}}else if(P.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Xo&&wA(_)===P.type){n(S,P.sibling),E=i(P,T.props),E.ref=zf(S,P,T),E.return=S,S=E;break e}n(S,P);break}else e(S,P);P=P.sibling}T.type===ju?(E=Pl(T.props.children,S.mode,j,T.key),E.return=S,S=E):(j=Lm(T.type,T.key,T.props,null,S.mode,j),j.ref=zf(S,E,T),j.return=S,S=j)}return o(S);case Iu:e:{for(P=T.key;E!==null;){if(E.key===P)if(E.tag===4&&E.stateNode.containerInfo===T.containerInfo&&E.stateNode.implementation===T.implementation){n(S,E.sibling),E=i(E,T.children||[]),E.return=S,S=E;break e}else{n(S,E);break}else e(S,E);E=E.sibling}E=W0(T,S.mode,j),E.return=S,S=E}return o(S);case Xo:return P=T._init,x(S,E,P(T._payload),j)}if(nd(T))return b(S,E,T,j);if(Mf(T))return v(S,E,T,j);Qp(S,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,E!==null&&E.tag===6?(n(S,E.sibling),E=i(E,T),E.return=S,S=E):(n(S,E),E=U0(T,S.mode,j),E.return=S,S=E),o(S)):n(S,E)}return x}var uc=VI(!0),BI=VI(!1),og=Is(null),sg=null,zu=null,r1=null;function i1(){r1=zu=sg=null}function a1(t){var e=og.current;en(og),t._currentValue=e}function mx(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Xu(t,e){sg=t,r1=zu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Br=!0),t.firstContext=null)}function Mi(t){var e=t._currentValue;if(r1!==t)if(t={context:t,memoizedValue:e,next:null},zu===null){if(sg===null)throw Error(Ae(308));zu=t,sg.dependencies={lanes:0,firstContext:t}}else zu=zu.next=t;return e}var gl=null;function o1(t){gl===null?gl=[t]:gl.push(t)}function UI(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,o1(e)):(n.next=i.next,i.next=n),e.interleaved=n,_o(t,r)}function _o(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Qo=!1;function s1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function WI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function go(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,St&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,_o(t,n)}return i=r.interleaved,i===null?(e.next=e,o1(r)):(e.next=i.next,i.next=e),r.interleaved=e,_o(t,n)}function jm(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,K_(t,n)}}function _A(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function lg(t,e,n,r){var i=t.updateQueue;Qo=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,u=l.next;l.next=null,o===null?a=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==o&&(s===null?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(a!==null){var f=i.baseState;o=0,c=u=l=null,s=a;do{var m=s.lane,g=s.eventTime;if((r&m)===m){c!==null&&(c=c.next={eventTime:g,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var b=t,v=s;switch(m=e,g=n,v.tag){case 1:if(b=v.payload,typeof b=="function"){f=b.call(g,f,m);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=v.payload,m=typeof b=="function"?b.call(g,f,m):b,m==null)break e;f=un({},f,m);break e;case 2:Qo=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[s]:m.push(s))}else g={eventTime:g,lane:m,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(u=c=g,l=f):c=c.next=g,o|=m;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;m=s,s=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Rl|=o,t.lanes=o,t.memoizedState=f}}function SA(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ae(191,i));i.call(r)}}}var Gh={},Da=Is(Gh),Wd=Is(Gh),qd=Is(Gh);function yl(t){if(t===Gh)throw Error(Ae(174));return t}function l1(t,e){switch(Ht(qd,e),Ht(Wd,t),Ht(Da,Gh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Yb(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Yb(e,t)}en(Da),Ht(Da,e)}function cc(){en(Da),en(Wd),en(qd)}function qI(t){yl(qd.current);var e=yl(Da.current),n=Yb(e,t.type);e!==n&&(Ht(Wd,t),Ht(Da,n))}function u1(t){Wd.current===t&&(en(Da),en(Wd))}var sn=Is(0);function ug(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $0=[];function c1(){for(var t=0;t<$0.length;t++)$0[t]._workInProgressVersionPrimary=null;$0.length=0}var Nm=jo.ReactCurrentDispatcher,L0=jo.ReactCurrentBatchConfig,Ml=0,ln=null,Dn=null,Wn=null,cg=!1,vd=!1,Kd=0,v3=0;function lr(){throw Error(Ae(321))}function f1(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!fa(t[n],e[n]))return!1;return!0}function d1(t,e,n,r,i,a){if(Ml=a,ln=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Nm.current=t===null||t.memoizedState===null?_3:S3,t=n(r,i),vd){a=0;do{if(vd=!1,Kd=0,25<=a)throw Error(Ae(301));a+=1,Wn=Dn=null,e.updateQueue=null,Nm.current=E3,t=n(r,i)}while(vd)}if(Nm.current=fg,e=Dn!==null&&Dn.next!==null,Ml=0,Wn=Dn=ln=null,cg=!1,e)throw Error(Ae(300));return t}function h1(){var t=Kd!==0;return Kd=0,t}function Aa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wn===null?ln.memoizedState=Wn=t:Wn=Wn.next=t,Wn}function Ri(){if(Dn===null){var t=ln.alternate;t=t!==null?t.memoizedState:null}else t=Dn.next;var e=Wn===null?ln.memoizedState:Wn.next;if(e!==null)Wn=e,Dn=t;else{if(t===null)throw Error(Ae(310));Dn=t,t={memoizedState:Dn.memoizedState,baseState:Dn.baseState,baseQueue:Dn.baseQueue,queue:Dn.queue,next:null},Wn===null?ln.memoizedState=Wn=t:Wn=Wn.next=t}return Wn}function Hd(t,e){return typeof e=="function"?e(t):e}function F0(t){var e=Ri(),n=e.queue;if(n===null)throw Error(Ae(311));n.lastRenderedReducer=t;var r=Dn,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var s=o=null,l=null,u=a;do{var c=u.lane;if((Ml&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=f,o=r):l=l.next=f,ln.lanes|=c,Rl|=c}u=u.next}while(u!==null&&u!==a);l===null?o=r:l.next=s,fa(r,e.memoizedState)||(Br=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do a=i.lane,ln.lanes|=a,Rl|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function z0(t){var e=Ri(),n=e.queue;if(n===null)throw Error(Ae(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);fa(a,e.memoizedState)||(Br=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function KI(){}function HI(t,e){var n=ln,r=Ri(),i=e(),a=!fa(r.memoizedState,i);if(a&&(r.memoizedState=i,Br=!0),r=r.queue,p1(XI.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||Wn!==null&&Wn.memoizedState.tag&1){if(n.flags|=2048,Gd(9,YI.bind(null,n,r,i,e),void 0,null),qn===null)throw Error(Ae(349));Ml&30||GI(n,e,i)}return i}function GI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ln.updateQueue,e===null?(e={lastEffect:null,stores:null},ln.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function YI(t,e,n,r){e.value=n,e.getSnapshot=r,QI(e)&&JI(t)}function XI(t,e,n){return n(function(){QI(e)&&JI(t)})}function QI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!fa(t,n)}catch{return!0}}function JI(t){var e=_o(t,1);e!==null&&ca(e,t,1,-1)}function EA(t){var e=Aa();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hd,lastRenderedState:t},e.queue=t,t=t.dispatch=w3.bind(null,ln,t),[e.memoizedState,t]}function Gd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ln.updateQueue,e===null?(e={lastEffect:null,stores:null},ln.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ZI(){return Ri().memoizedState}function Dm(t,e,n,r){var i=Aa();ln.flags|=t,i.memoizedState=Gd(1|e,n,void 0,r===void 0?null:r)}function Gy(t,e,n,r){var i=Ri();r=r===void 0?null:r;var a=void 0;if(Dn!==null){var o=Dn.memoizedState;if(a=o.destroy,r!==null&&f1(r,o.deps)){i.memoizedState=Gd(e,n,a,r);return}}ln.flags|=t,i.memoizedState=Gd(1|e,n,a,r)}function AA(t,e){return Dm(8390656,8,t,e)}function p1(t,e){return Gy(2048,8,t,e)}function ej(t,e){return Gy(4,2,t,e)}function tj(t,e){return Gy(4,4,t,e)}function nj(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rj(t,e,n){return n=n!=null?n.concat([t]):null,Gy(4,4,nj.bind(null,e,t),n)}function m1(){}function ij(t,e){var n=Ri();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&f1(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function aj(t,e){var n=Ri();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&f1(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function oj(t,e,n){return Ml&21?(fa(n,e)||(n=fI(),ln.lanes|=n,Rl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Br=!0),t.memoizedState=n)}function b3(t,e){var n=Nt;Nt=n!==0&&4>n?n:4,t(!0);var r=L0.transition;L0.transition={};try{t(!1),e()}finally{Nt=n,L0.transition=r}}function sj(){return Ri().memoizedState}function x3(t,e,n){var r=hs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},lj(t))uj(e,n);else if(n=UI(t,e,n,r),n!==null){var i=Pr();ca(n,t,r,i),cj(n,e,r)}}function w3(t,e,n){var r=hs(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(lj(t))uj(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,fa(s,o)){var l=e.interleaved;l===null?(i.next=i,o1(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=UI(t,e,i,r),n!==null&&(i=Pr(),ca(n,t,r,i),cj(n,e,r))}}function lj(t){var e=t.alternate;return t===ln||e!==null&&e===ln}function uj(t,e){vd=cg=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function cj(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,K_(t,n)}}var fg={readContext:Mi,useCallback:lr,useContext:lr,useEffect:lr,useImperativeHandle:lr,useInsertionEffect:lr,useLayoutEffect:lr,useMemo:lr,useReducer:lr,useRef:lr,useState:lr,useDebugValue:lr,useDeferredValue:lr,useTransition:lr,useMutableSource:lr,useSyncExternalStore:lr,useId:lr,unstable_isNewReconciler:!1},_3={readContext:Mi,useCallback:function(t,e){return Aa().memoizedState=[t,e===void 0?null:e],t},useContext:Mi,useEffect:AA,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Dm(4194308,4,nj.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Dm(4194308,4,t,e)},useInsertionEffect:function(t,e){return Dm(4,2,t,e)},useMemo:function(t,e){var n=Aa();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Aa();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=x3.bind(null,ln,t),[r.memoizedState,t]},useRef:function(t){var e=Aa();return t={current:t},e.memoizedState=t},useState:EA,useDebugValue:m1,useDeferredValue:function(t){return Aa().memoizedState=t},useTransition:function(){var t=EA(!1),e=t[0];return t=b3.bind(null,t[1]),Aa().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ln,i=Aa();if(nn){if(n===void 0)throw Error(Ae(407));n=n()}else{if(n=e(),qn===null)throw Error(Ae(349));Ml&30||GI(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,AA(XI.bind(null,r,a,t),[t]),r.flags|=2048,Gd(9,YI.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Aa(),e=qn.identifierPrefix;if(nn){var n=so,r=oo;n=(r&~(1<<32-ua(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Kd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=v3++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},S3={readContext:Mi,useCallback:ij,useContext:Mi,useEffect:p1,useImperativeHandle:rj,useInsertionEffect:ej,useLayoutEffect:tj,useMemo:aj,useReducer:F0,useRef:ZI,useState:function(){return F0(Hd)},useDebugValue:m1,useDeferredValue:function(t){var e=Ri();return oj(e,Dn.memoizedState,t)},useTransition:function(){var t=F0(Hd)[0],e=Ri().memoizedState;return[t,e]},useMutableSource:KI,useSyncExternalStore:HI,useId:sj,unstable_isNewReconciler:!1},E3={readContext:Mi,useCallback:ij,useContext:Mi,useEffect:p1,useImperativeHandle:rj,useInsertionEffect:ej,useLayoutEffect:tj,useMemo:aj,useReducer:z0,useRef:ZI,useState:function(){return z0(Hd)},useDebugValue:m1,useDeferredValue:function(t){var e=Ri();return Dn===null?e.memoizedState=t:oj(e,Dn.memoizedState,t)},useTransition:function(){var t=z0(Hd)[0],e=Ri().memoizedState;return[t,e]},useMutableSource:KI,useSyncExternalStore:HI,useId:sj,unstable_isNewReconciler:!1};function Zi(t,e){if(t&&t.defaultProps){e=un({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function gx(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:un({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Yy={isMounted:function(t){return(t=t._reactInternals)?Hl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Pr(),i=hs(t),a=go(r,i);a.payload=e,n!=null&&(a.callback=n),e=fs(t,a,i),e!==null&&(ca(e,t,i,r),jm(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Pr(),i=hs(t),a=go(r,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=fs(t,a,i),e!==null&&(ca(e,t,i,r),jm(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Pr(),r=hs(t),i=go(n,r);i.tag=2,e!=null&&(i.callback=e),e=fs(t,i,r),e!==null&&(ca(e,t,r,n),jm(e,t,r))}};function TA(t,e,n,r,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!zd(n,r)||!zd(i,a):!0}function fj(t,e,n){var r=!1,i=Ss,a=e.contextType;return typeof a=="object"&&a!==null?a=Mi(a):(i=qr(e)?Nl:xr.current,r=e.contextTypes,a=(r=r!=null)?sc(t,i):Ss),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Yy,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function PA(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Yy.enqueueReplaceState(e,e.state,null)}function yx(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},s1(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Mi(a):(a=qr(e)?Nl:xr.current,i.context=sc(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(gx(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Yy.enqueueReplaceState(i,i.state,null),lg(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function fc(t,e){try{var n="",r=e;do n+=JL(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function V0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function vx(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var A3=typeof WeakMap=="function"?WeakMap:Map;function dj(t,e,n){n=go(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){hg||(hg=!0,Ox=r),vx(t,e)},n}function hj(t,e,n){n=go(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){vx(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){vx(t,e),typeof r!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function OA(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new A3;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=F3.bind(null,t,e,n),e.then(t,t))}function kA(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function CA(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=go(-1,1),e.tag=2,fs(n,e,1))),n.lanes|=1),t)}var T3=jo.ReactCurrentOwner,Br=!1;function Er(t,e,n,r){e.child=t===null?BI(e,null,n,r):uc(e,t.child,n,r)}function IA(t,e,n,r,i){n=n.render;var a=e.ref;return Xu(e,i),r=d1(t,e,n,r,a,i),n=h1(),t!==null&&!Br?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,So(t,e,i)):(nn&&n&&e1(e),e.flags|=1,Er(t,e,r,i),e.child)}function jA(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!S1(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,pj(t,e,a,r,i)):(t=Lm(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:zd,n(o,r)&&t.ref===e.ref)return So(t,e,i)}return e.flags|=1,t=ps(a,r),t.ref=e.ref,t.return=e,e.child=t}function pj(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(zd(a,r)&&t.ref===e.ref)if(Br=!1,e.pendingProps=r=a,(t.lanes&i)!==0)t.flags&131072&&(Br=!0);else return e.lanes=t.lanes,So(t,e,i)}return bx(t,e,n,r,i)}function mj(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ht(Bu,ni),ni|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ht(Bu,ni),ni|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Ht(Bu,ni),ni|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,Ht(Bu,ni),ni|=r;return Er(t,e,i,n),e.child}function gj(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function bx(t,e,n,r,i){var a=qr(n)?Nl:xr.current;return a=sc(e,a),Xu(e,i),n=d1(t,e,n,r,a,i),r=h1(),t!==null&&!Br?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,So(t,e,i)):(nn&&r&&e1(e),e.flags|=1,Er(t,e,n,i),e.child)}function NA(t,e,n,r,i){if(qr(n)){var a=!0;rg(e)}else a=!1;if(Xu(e,i),e.stateNode===null)Mm(t,e),fj(e,n,r),yx(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,s=e.memoizedProps;o.props=s;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Mi(u):(u=qr(n)?Nl:xr.current,u=sc(e,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==r||l!==u)&&PA(e,o,r,u),Qo=!1;var m=e.memoizedState;o.state=m,lg(e,r,o,i),l=e.memoizedState,s!==r||m!==l||Wr.current||Qo?(typeof c=="function"&&(gx(e,n,c,r),l=e.memoizedState),(s=Qo||TA(e,n,s,r,m,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,WI(t,e),s=e.memoizedProps,u=e.type===e.elementType?s:Zi(e.type,s),o.props=u,f=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Mi(l):(l=qr(n)?Nl:xr.current,l=sc(e,l));var g=n.getDerivedStateFromProps;(c=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==f||m!==l)&&PA(e,o,r,l),Qo=!1,m=e.memoizedState,o.state=m,lg(e,r,o,i);var b=e.memoizedState;s!==f||m!==b||Wr.current||Qo?(typeof g=="function"&&(gx(e,n,g,r),b=e.memoizedState),(u=Qo||TA(e,n,u,r,m,b,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||s===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return xx(t,e,n,r,a,i)}function xx(t,e,n,r,i,a){gj(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&vA(e,n,!1),So(t,e,a);r=e.stateNode,T3.current=e;var s=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=uc(e,t.child,null,a),e.child=uc(e,null,s,a)):Er(t,e,s,a),e.memoizedState=r.state,i&&vA(e,n,!0),e.child}function yj(t){var e=t.stateNode;e.pendingContext?yA(t,e.pendingContext,e.pendingContext!==e.context):e.context&&yA(t,e.context,!1),l1(t,e.containerInfo)}function DA(t,e,n,r,i){return lc(),n1(i),e.flags|=256,Er(t,e,n,r),e.child}var wx={dehydrated:null,treeContext:null,retryLane:0};function _x(t){return{baseLanes:t,cachePool:null,transitions:null}}function vj(t,e,n){var r=e.pendingProps,i=sn.current,a=!1,o=(e.flags&128)!==0,s;if((s=o)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ht(sn,i&1),t===null)return px(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Jy(o,r,0,null),t=Pl(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=_x(n),e.memoizedState=wx,t):g1(e,o));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return P3(t,e,o,r,s,i,n);if(a){a=r.fallback,o=e.mode,i=t.child,s=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ps(i,l),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?a=ps(s,a):(a=Pl(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?_x(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=wx,r}return a=t.child,t=a.sibling,r=ps(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function g1(t,e){return e=Jy({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Jp(t,e,n,r){return r!==null&&n1(r),uc(e,t.child,null,n),t=g1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function P3(t,e,n,r,i,a,o){if(n)return e.flags&256?(e.flags&=-257,r=V0(Error(Ae(422))),Jp(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=Jy({mode:"visible",children:r.children},i,0,null),a=Pl(a,i,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&uc(e,t.child,null,o),e.child.memoizedState=_x(o),e.memoizedState=wx,a);if(!(e.mode&1))return Jp(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,a=Error(Ae(419)),r=V0(a,r,void 0),Jp(t,e,o,r)}if(s=(o&t.childLanes)!==0,Br||s){if(r=qn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,_o(t,i),ca(r,t,i,-1))}return _1(),r=V0(Error(Ae(421))),Jp(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=z3.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,oi=cs(i.nextSibling),li=e,nn=!0,ra=null,t!==null&&(Pi[Oi++]=oo,Pi[Oi++]=so,Pi[Oi++]=Dl,oo=t.id,so=t.overflow,Dl=e),e=g1(e,r.children),e.flags|=4096,e)}function MA(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),mx(t.return,e,n)}function B0(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function bj(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(Er(t,e,r.children,n),r=sn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&MA(t,n,e);else if(t.tag===19)MA(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ht(sn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ug(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),B0(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ug(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}B0(e,!0,n,null,a);break;case"together":B0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Mm(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function So(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Rl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ae(153));if(e.child!==null){for(t=e.child,n=ps(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ps(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function O3(t,e,n){switch(e.tag){case 3:yj(e),lc();break;case 5:qI(e);break;case 1:qr(e.type)&&rg(e);break;case 4:l1(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ht(og,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ht(sn,sn.current&1),e.flags|=128,null):n&e.child.childLanes?vj(t,e,n):(Ht(sn,sn.current&1),t=So(t,e,n),t!==null?t.sibling:null);Ht(sn,sn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return bj(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ht(sn,sn.current),r)break;return null;case 22:case 23:return e.lanes=0,mj(t,e,n)}return So(t,e,n)}var xj,Sx,wj,_j;xj=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Sx=function(){};wj=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,yl(Da.current);var a=null;switch(n){case"input":i=qb(t,i),r=qb(t,r),a=[];break;case"select":i=un({},i,{value:void 0}),r=un({},r,{value:void 0}),a=[];break;case"textarea":i=Gb(t,i),r=Gb(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=tg)}Xb(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var s=i[u];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Nd.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var l=r[u];if(s=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(a||(a=[]),a.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Nd.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Xt("scroll",t),a||s===l||(a=[])):(a=a||[]).push(u,l))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};_j=function(t,e,n,r){n!==r&&(e.flags|=4)};function Vf(t,e){if(!nn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ur(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function k3(t,e,n){var r=e.pendingProps;switch(t1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ur(e),null;case 1:return qr(e.type)&&ng(),ur(e),null;case 3:return r=e.stateNode,cc(),en(Wr),en(xr),c1(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Xp(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ra!==null&&(Ix(ra),ra=null))),Sx(t,e),ur(e),null;case 5:u1(e);var i=yl(qd.current);if(n=e.type,t!==null&&e.stateNode!=null)wj(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ae(166));return ur(e),null}if(t=yl(Da.current),Xp(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[Oa]=e,r[Ud]=a,t=(e.mode&1)!==0,n){case"dialog":Xt("cancel",r),Xt("close",r);break;case"iframe":case"object":case"embed":Xt("load",r);break;case"video":case"audio":for(i=0;i<id.length;i++)Xt(id[i],r);break;case"source":Xt("error",r);break;case"img":case"image":case"link":Xt("error",r),Xt("load",r);break;case"details":Xt("toggle",r);break;case"input":WE(r,a),Xt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Xt("invalid",r);break;case"textarea":KE(r,a),Xt("invalid",r)}Xb(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var s=a[o];o==="children"?typeof s=="string"?r.textContent!==s&&(a.suppressHydrationWarning!==!0&&Yp(r.textContent,s,t),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&Yp(r.textContent,s,t),i=["children",""+s]):Nd.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&Xt("scroll",r)}switch(n){case"input":Vp(r),qE(r,a,!0);break;case"textarea":Vp(r),HE(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=tg)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=XC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Oa]=e,t[Ud]=r,xj(t,e,!1,!1),e.stateNode=t;e:{switch(o=Qb(n,r),n){case"dialog":Xt("cancel",t),Xt("close",t),i=r;break;case"iframe":case"object":case"embed":Xt("load",t),i=r;break;case"video":case"audio":for(i=0;i<id.length;i++)Xt(id[i],t);i=r;break;case"source":Xt("error",t),i=r;break;case"img":case"image":case"link":Xt("error",t),Xt("load",t),i=r;break;case"details":Xt("toggle",t),i=r;break;case"input":WE(t,r),i=qb(t,r),Xt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=un({},r,{value:void 0}),Xt("invalid",t);break;case"textarea":KE(t,r),i=Gb(t,r),Xt("invalid",t);break;default:i=r}Xb(n,i),s=i;for(a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="style"?ZC(t,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&QC(t,l)):a==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Dd(t,l):typeof l=="number"&&Dd(t,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Nd.hasOwnProperty(a)?l!=null&&a==="onScroll"&&Xt("scroll",t):l!=null&&z_(t,a,l,o))}switch(n){case"input":Vp(t),qE(t,r,!1);break;case"textarea":Vp(t),HE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+_s(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Ku(t,!!r.multiple,a,!1):r.defaultValue!=null&&Ku(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=tg)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ur(e),null;case 6:if(t&&e.stateNode!=null)_j(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ae(166));if(n=yl(qd.current),yl(Da.current),Xp(e)){if(r=e.stateNode,n=e.memoizedProps,r[Oa]=e,(a=r.nodeValue!==n)&&(t=li,t!==null))switch(t.tag){case 3:Yp(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Yp(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Oa]=e,e.stateNode=r}return ur(e),null;case 13:if(en(sn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(nn&&oi!==null&&e.mode&1&&!(e.flags&128))zI(),lc(),e.flags|=98560,a=!1;else if(a=Xp(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(Ae(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Ae(317));a[Oa]=e}else lc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ur(e),a=!1}else ra!==null&&(Ix(ra),ra=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||sn.current&1?Mn===0&&(Mn=3):_1())),e.updateQueue!==null&&(e.flags|=4),ur(e),null);case 4:return cc(),Sx(t,e),t===null&&Vd(e.stateNode.containerInfo),ur(e),null;case 10:return a1(e.type._context),ur(e),null;case 17:return qr(e.type)&&ng(),ur(e),null;case 19:if(en(sn),a=e.memoizedState,a===null)return ur(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)Vf(a,!1);else{if(Mn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ug(t),o!==null){for(e.flags|=128,Vf(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ht(sn,sn.current&1|2),e.child}t=t.sibling}a.tail!==null&&vn()>dc&&(e.flags|=128,r=!0,Vf(a,!1),e.lanes=4194304)}else{if(!r)if(t=ug(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Vf(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!nn)return ur(e),null}else 2*vn()-a.renderingStartTime>dc&&n!==1073741824&&(e.flags|=128,r=!0,Vf(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=vn(),e.sibling=null,n=sn.current,Ht(sn,r?n&1|2:n&1),e):(ur(e),null);case 22:case 23:return w1(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ni&1073741824&&(ur(e),e.subtreeFlags&6&&(e.flags|=8192)):ur(e),null;case 24:return null;case 25:return null}throw Error(Ae(156,e.tag))}function C3(t,e){switch(t1(e),e.tag){case 1:return qr(e.type)&&ng(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return cc(),en(Wr),en(xr),c1(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return u1(e),null;case 13:if(en(sn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ae(340));lc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return en(sn),null;case 4:return cc(),null;case 10:return a1(e.type._context),null;case 22:case 23:return w1(),null;case 24:return null;default:return null}}var Zp=!1,pr=!1,I3=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function Vu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){dn(t,e,r)}else n.current=null}function Ex(t,e,n){try{n()}catch(r){dn(t,e,r)}}var RA=!1;function j3(t,e){if(sx=Jm,t=PI(),Z_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,s=-1,l=-1,u=0,c=0,f=t,m=null;t:for(;;){for(var g;f!==n||i!==0&&f.nodeType!==3||(s=o+i),f!==a||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)m=f,f=g;for(;;){if(f===t)break t;if(m===n&&++u===i&&(s=o),m===a&&++c===r&&(l=o),(g=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=g}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(lx={focusedElem:t,selectionRange:n},Jm=!1,Fe=e;Fe!==null;)if(e=Fe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Fe=t;else for(;Fe!==null;){e=Fe;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var v=b.memoizedProps,x=b.memoizedState,S=e.stateNode,E=S.getSnapshotBeforeUpdate(e.elementType===e.type?v:Zi(e.type,v),x);S.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ae(163))}}catch(j){dn(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,Fe=t;break}Fe=e.return}return b=RA,RA=!1,b}function bd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&Ex(e,n,a)}i=i.next}while(i!==r)}}function Xy(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ax(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Sj(t){var e=t.alternate;e!==null&&(t.alternate=null,Sj(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Oa],delete e[Ud],delete e[fx],delete e[p3],delete e[m3])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ej(t){return t.tag===5||t.tag===3||t.tag===4}function $A(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ej(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Tx(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=tg));else if(r!==4&&(t=t.child,t!==null))for(Tx(t,e,n),t=t.sibling;t!==null;)Tx(t,e,n),t=t.sibling}function Px(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Px(t,e,n),t=t.sibling;t!==null;)Px(t,e,n),t=t.sibling}var Qn=null,ea=!1;function Ko(t,e,n){for(n=n.child;n!==null;)Aj(t,e,n),n=n.sibling}function Aj(t,e,n){if(Na&&typeof Na.onCommitFiberUnmount=="function")try{Na.onCommitFiberUnmount(By,n)}catch{}switch(n.tag){case 5:pr||Vu(n,e);case 6:var r=Qn,i=ea;Qn=null,Ko(t,e,n),Qn=r,ea=i,Qn!==null&&(ea?(t=Qn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Qn.removeChild(n.stateNode));break;case 18:Qn!==null&&(ea?(t=Qn,n=n.stateNode,t.nodeType===8?M0(t.parentNode,n):t.nodeType===1&&M0(t,n),Ld(t)):M0(Qn,n.stateNode));break;case 4:r=Qn,i=ea,Qn=n.stateNode.containerInfo,ea=!0,Ko(t,e,n),Qn=r,ea=i;break;case 0:case 11:case 14:case 15:if(!pr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Ex(n,e,o),i=i.next}while(i!==r)}Ko(t,e,n);break;case 1:if(!pr&&(Vu(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){dn(n,e,s)}Ko(t,e,n);break;case 21:Ko(t,e,n);break;case 22:n.mode&1?(pr=(r=pr)||n.memoizedState!==null,Ko(t,e,n),pr=r):Ko(t,e,n);break;default:Ko(t,e,n)}}function LA(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new I3),e.forEach(function(r){var i=V3.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Qi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,o=e,s=o;e:for(;s!==null;){switch(s.tag){case 5:Qn=s.stateNode,ea=!1;break e;case 3:Qn=s.stateNode.containerInfo,ea=!0;break e;case 4:Qn=s.stateNode.containerInfo,ea=!0;break e}s=s.return}if(Qn===null)throw Error(Ae(160));Aj(a,o,i),Qn=null,ea=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){dn(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Tj(e,t),e=e.sibling}function Tj(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qi(e,t),Ea(t),r&4){try{bd(3,t,t.return),Xy(3,t)}catch(v){dn(t,t.return,v)}try{bd(5,t,t.return)}catch(v){dn(t,t.return,v)}}break;case 1:Qi(e,t),Ea(t),r&512&&n!==null&&Vu(n,n.return);break;case 5:if(Qi(e,t),Ea(t),r&512&&n!==null&&Vu(n,n.return),t.flags&32){var i=t.stateNode;try{Dd(i,"")}catch(v){dn(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,s=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&GC(i,a),Qb(s,o);var u=Qb(s,a);for(o=0;o<l.length;o+=2){var c=l[o],f=l[o+1];c==="style"?ZC(i,f):c==="dangerouslySetInnerHTML"?QC(i,f):c==="children"?Dd(i,f):z_(i,c,f,u)}switch(s){case"input":Kb(i,a);break;case"textarea":YC(i,a);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var g=a.value;g!=null?Ku(i,!!a.multiple,g,!1):m!==!!a.multiple&&(a.defaultValue!=null?Ku(i,!!a.multiple,a.defaultValue,!0):Ku(i,!!a.multiple,a.multiple?[]:"",!1))}i[Ud]=a}catch(v){dn(t,t.return,v)}}break;case 6:if(Qi(e,t),Ea(t),r&4){if(t.stateNode===null)throw Error(Ae(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(v){dn(t,t.return,v)}}break;case 3:if(Qi(e,t),Ea(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ld(e.containerInfo)}catch(v){dn(t,t.return,v)}break;case 4:Qi(e,t),Ea(t);break;case 13:Qi(e,t),Ea(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(b1=vn())),r&4&&LA(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(pr=(u=pr)||c,Qi(e,t),pr=u):Qi(e,t),Ea(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(Fe=t,c=t.child;c!==null;){for(f=Fe=c;Fe!==null;){switch(m=Fe,g=m.child,m.tag){case 0:case 11:case 14:case 15:bd(4,m,m.return);break;case 1:Vu(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(v){dn(r,n,v)}}break;case 5:Vu(m,m.return);break;case 22:if(m.memoizedState!==null){zA(f);continue}}g!==null?(g.return=m,Fe=g):zA(f)}c=c.sibling}e:for(c=null,f=t;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=JC("display",o))}catch(v){dn(t,t.return,v)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){dn(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Qi(e,t),Ea(t),r&4&&LA(t);break;case 21:break;default:Qi(e,t),Ea(t)}}function Ea(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ej(n)){var r=n;break e}n=n.return}throw Error(Ae(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Dd(i,""),r.flags&=-33);var a=$A(t);Px(t,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,s=$A(t);Tx(t,s,o);break;default:throw Error(Ae(161))}}catch(l){dn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function N3(t,e,n){Fe=t,Pj(t)}function Pj(t,e,n){for(var r=(t.mode&1)!==0;Fe!==null;){var i=Fe,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Zp;if(!o){var s=i.alternate,l=s!==null&&s.memoizedState!==null||pr;s=Zp;var u=pr;if(Zp=o,(pr=l)&&!u)for(Fe=i;Fe!==null;)o=Fe,l=o.child,o.tag===22&&o.memoizedState!==null?VA(i):l!==null?(l.return=o,Fe=l):VA(i);for(;a!==null;)Fe=a,Pj(a),a=a.sibling;Fe=i,Zp=s,pr=u}FA(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Fe=a):FA(t)}}function FA(t){for(;Fe!==null;){var e=Fe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pr||Xy(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!pr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Zi(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&SA(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}SA(e,o,n)}break;case 5:var s=e.stateNode;if(n===null&&e.flags&4){n=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Ld(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ae(163))}pr||e.flags&512&&Ax(e)}catch(m){dn(e,e.return,m)}}if(e===t){Fe=null;break}if(n=e.sibling,n!==null){n.return=e.return,Fe=n;break}Fe=e.return}}function zA(t){for(;Fe!==null;){var e=Fe;if(e===t){Fe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Fe=n;break}Fe=e.return}}function VA(t){for(;Fe!==null;){var e=Fe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Xy(4,e)}catch(l){dn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){dn(e,i,l)}}var a=e.return;try{Ax(e)}catch(l){dn(e,a,l)}break;case 5:var o=e.return;try{Ax(e)}catch(l){dn(e,o,l)}}}catch(l){dn(e,e.return,l)}if(e===t){Fe=null;break}var s=e.sibling;if(s!==null){s.return=e.return,Fe=s;break}Fe=e.return}}var D3=Math.ceil,dg=jo.ReactCurrentDispatcher,y1=jo.ReactCurrentOwner,ji=jo.ReactCurrentBatchConfig,St=0,qn=null,Pn=null,nr=0,ni=0,Bu=Is(0),Mn=0,Yd=null,Rl=0,Qy=0,v1=0,xd=null,zr=null,b1=0,dc=1/0,io=null,hg=!1,Ox=null,ds=null,em=!1,rs=null,pg=0,wd=0,kx=null,Rm=-1,$m=0;function Pr(){return St&6?vn():Rm!==-1?Rm:Rm=vn()}function hs(t){return t.mode&1?St&2&&nr!==0?nr&-nr:y3.transition!==null?($m===0&&($m=fI()),$m):(t=Nt,t!==0||(t=window.event,t=t===void 0?16:vI(t.type)),t):1}function ca(t,e,n,r){if(50<wd)throw wd=0,kx=null,Error(Ae(185));qh(t,n,r),(!(St&2)||t!==qn)&&(t===qn&&(!(St&2)&&(Qy|=n),Mn===4&&es(t,nr)),Kr(t,r),n===1&&St===0&&!(e.mode&1)&&(dc=vn()+500,Hy&&js()))}function Kr(t,e){var n=t.callbackNode;y5(t,e);var r=Qm(t,t===qn?nr:0);if(r===0)n!==null&&XE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&XE(n),e===1)t.tag===0?g3(BA.bind(null,t)):$I(BA.bind(null,t)),d3(function(){!(St&6)&&js()}),n=null;else{switch(dI(r)){case 1:n=q_;break;case 4:n=uI;break;case 16:n=Xm;break;case 536870912:n=cI;break;default:n=Xm}n=Mj(n,Oj.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Oj(t,e){if(Rm=-1,$m=0,St&6)throw Error(Ae(327));var n=t.callbackNode;if(Qu()&&t.callbackNode!==n)return null;var r=Qm(t,t===qn?nr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=mg(t,r);else{e=r;var i=St;St|=2;var a=Cj();(qn!==t||nr!==e)&&(io=null,dc=vn()+500,Tl(t,e));do try{$3();break}catch(s){kj(t,s)}while(!0);i1(),dg.current=a,St=i,Pn!==null?e=0:(qn=null,nr=0,e=Mn)}if(e!==0){if(e===2&&(i=nx(t),i!==0&&(r=i,e=Cx(t,i))),e===1)throw n=Yd,Tl(t,0),es(t,r),Kr(t,vn()),n;if(e===6)es(t,r);else{if(i=t.current.alternate,!(r&30)&&!M3(i)&&(e=mg(t,r),e===2&&(a=nx(t),a!==0&&(r=a,e=Cx(t,a))),e===1))throw n=Yd,Tl(t,0),es(t,r),Kr(t,vn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Ae(345));case 2:ll(t,zr,io);break;case 3:if(es(t,r),(r&130023424)===r&&(e=b1+500-vn(),10<e)){if(Qm(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Pr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=cx(ll.bind(null,t,zr,io),e);break}ll(t,zr,io);break;case 4:if(es(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-ua(r);a=1<<o,o=e[o],o>i&&(i=o),r&=~a}if(r=i,r=vn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*D3(r/1960))-r,10<r){t.timeoutHandle=cx(ll.bind(null,t,zr,io),r);break}ll(t,zr,io);break;case 5:ll(t,zr,io);break;default:throw Error(Ae(329))}}}return Kr(t,vn()),t.callbackNode===n?Oj.bind(null,t):null}function Cx(t,e){var n=xd;return t.current.memoizedState.isDehydrated&&(Tl(t,e).flags|=256),t=mg(t,e),t!==2&&(e=zr,zr=n,e!==null&&Ix(e)),t}function Ix(t){zr===null?zr=t:zr.push.apply(zr,t)}function M3(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!fa(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function es(t,e){for(e&=~v1,e&=~Qy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ua(e),r=1<<n;t[n]=-1,e&=~r}}function BA(t){if(St&6)throw Error(Ae(327));Qu();var e=Qm(t,0);if(!(e&1))return Kr(t,vn()),null;var n=mg(t,e);if(t.tag!==0&&n===2){var r=nx(t);r!==0&&(e=r,n=Cx(t,r))}if(n===1)throw n=Yd,Tl(t,0),es(t,e),Kr(t,vn()),n;if(n===6)throw Error(Ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ll(t,zr,io),Kr(t,vn()),null}function x1(t,e){var n=St;St|=1;try{return t(e)}finally{St=n,St===0&&(dc=vn()+500,Hy&&js())}}function $l(t){rs!==null&&rs.tag===0&&!(St&6)&&Qu();var e=St;St|=1;var n=ji.transition,r=Nt;try{if(ji.transition=null,Nt=1,t)return t()}finally{Nt=r,ji.transition=n,St=e,!(St&6)&&js()}}function w1(){ni=Bu.current,en(Bu)}function Tl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,f3(n)),Pn!==null)for(n=Pn.return;n!==null;){var r=n;switch(t1(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ng();break;case 3:cc(),en(Wr),en(xr),c1();break;case 5:u1(r);break;case 4:cc();break;case 13:en(sn);break;case 19:en(sn);break;case 10:a1(r.type._context);break;case 22:case 23:w1()}n=n.return}if(qn=t,Pn=t=ps(t.current,null),nr=ni=e,Mn=0,Yd=null,v1=Qy=Rl=0,zr=xd=null,gl!==null){for(e=0;e<gl.length;e++)if(n=gl[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}n.pending=r}gl=null}return t}function kj(t,e){do{var n=Pn;try{if(i1(),Nm.current=fg,cg){for(var r=ln.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}cg=!1}if(Ml=0,Wn=Dn=ln=null,vd=!1,Kd=0,y1.current=null,n===null||n.return===null){Mn=1,Yd=e,Pn=null;break}e:{var a=t,o=n.return,s=n,l=e;if(e=nr,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=s,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var m=c.alternate;m?(c.updateQueue=m.updateQueue,c.memoizedState=m.memoizedState,c.lanes=m.lanes):(c.updateQueue=null,c.memoizedState=null)}var g=kA(o);if(g!==null){g.flags&=-257,CA(g,o,s,a,e),g.mode&1&&OA(a,u,e),e=g,l=u;var b=e.updateQueue;if(b===null){var v=new Set;v.add(l),e.updateQueue=v}else b.add(l);break e}else{if(!(e&1)){OA(a,u,e),_1();break e}l=Error(Ae(426))}}else if(nn&&s.mode&1){var x=kA(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),CA(x,o,s,a,e),n1(fc(l,s));break e}}a=l=fc(l,s),Mn!==4&&(Mn=2),xd===null?xd=[a]:xd.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var S=dj(a,l,e);_A(a,S);break e;case 1:s=l;var E=a.type,T=a.stateNode;if(!(a.flags&128)&&(typeof E.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(ds===null||!ds.has(T)))){a.flags|=65536,e&=-e,a.lanes|=e;var j=hj(a,s,e);_A(a,j);break e}}a=a.return}while(a!==null)}jj(n)}catch(_){e=_,Pn===n&&n!==null&&(Pn=n=n.return);continue}break}while(!0)}function Cj(){var t=dg.current;return dg.current=fg,t===null?fg:t}function _1(){(Mn===0||Mn===3||Mn===2)&&(Mn=4),qn===null||!(Rl&268435455)&&!(Qy&268435455)||es(qn,nr)}function mg(t,e){var n=St;St|=2;var r=Cj();(qn!==t||nr!==e)&&(io=null,Tl(t,e));do try{R3();break}catch(i){kj(t,i)}while(!0);if(i1(),St=n,dg.current=r,Pn!==null)throw Error(Ae(261));return qn=null,nr=0,Mn}function R3(){for(;Pn!==null;)Ij(Pn)}function $3(){for(;Pn!==null&&!l5();)Ij(Pn)}function Ij(t){var e=Dj(t.alternate,t,ni);t.memoizedProps=t.pendingProps,e===null?jj(t):Pn=e,y1.current=null}function jj(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=C3(n,e),n!==null){n.flags&=32767,Pn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Mn=6,Pn=null;return}}else if(n=k3(n,e,ni),n!==null){Pn=n;return}if(e=e.sibling,e!==null){Pn=e;return}Pn=e=t}while(e!==null);Mn===0&&(Mn=5)}function ll(t,e,n){var r=Nt,i=ji.transition;try{ji.transition=null,Nt=1,L3(t,e,n,r)}finally{ji.transition=i,Nt=r}return null}function L3(t,e,n,r){do Qu();while(rs!==null);if(St&6)throw Error(Ae(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ae(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(v5(t,a),t===qn&&(Pn=qn=null,nr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||em||(em=!0,Mj(Xm,function(){return Qu(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=ji.transition,ji.transition=null;var o=Nt;Nt=1;var s=St;St|=4,y1.current=null,j3(t,n),Tj(n,t),i3(lx),Jm=!!sx,lx=sx=null,t.current=n,N3(n),u5(),St=s,Nt=o,ji.transition=a}else t.current=n;if(em&&(em=!1,rs=t,pg=i),a=t.pendingLanes,a===0&&(ds=null),d5(n.stateNode),Kr(t,vn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(hg)throw hg=!1,t=Ox,Ox=null,t;return pg&1&&t.tag!==0&&Qu(),a=t.pendingLanes,a&1?t===kx?wd++:(wd=0,kx=t):wd=0,js(),null}function Qu(){if(rs!==null){var t=dI(pg),e=ji.transition,n=Nt;try{if(ji.transition=null,Nt=16>t?16:t,rs===null)var r=!1;else{if(t=rs,rs=null,pg=0,St&6)throw Error(Ae(331));var i=St;for(St|=4,Fe=t.current;Fe!==null;){var a=Fe,o=a.child;if(Fe.flags&16){var s=a.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(Fe=u;Fe!==null;){var c=Fe;switch(c.tag){case 0:case 11:case 15:bd(8,c,a)}var f=c.child;if(f!==null)f.return=c,Fe=f;else for(;Fe!==null;){c=Fe;var m=c.sibling,g=c.return;if(Sj(c),c===u){Fe=null;break}if(m!==null){m.return=g,Fe=m;break}Fe=g}}}var b=a.alternate;if(b!==null){var v=b.child;if(v!==null){b.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}Fe=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Fe=o;else e:for(;Fe!==null;){if(a=Fe,a.flags&2048)switch(a.tag){case 0:case 11:case 15:bd(9,a,a.return)}var S=a.sibling;if(S!==null){S.return=a.return,Fe=S;break e}Fe=a.return}}var E=t.current;for(Fe=E;Fe!==null;){o=Fe;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,Fe=T;else e:for(o=E;Fe!==null;){if(s=Fe,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Xy(9,s)}}catch(_){dn(s,s.return,_)}if(s===o){Fe=null;break e}var j=s.sibling;if(j!==null){j.return=s.return,Fe=j;break e}Fe=s.return}}if(St=i,js(),Na&&typeof Na.onPostCommitFiberRoot=="function")try{Na.onPostCommitFiberRoot(By,t)}catch{}r=!0}return r}finally{Nt=n,ji.transition=e}}return!1}function UA(t,e,n){e=fc(n,e),e=dj(t,e,1),t=fs(t,e,1),e=Pr(),t!==null&&(qh(t,1,e),Kr(t,e))}function dn(t,e,n){if(t.tag===3)UA(t,t,n);else for(;e!==null;){if(e.tag===3){UA(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ds===null||!ds.has(r))){t=fc(n,t),t=hj(e,t,1),e=fs(e,t,1),t=Pr(),e!==null&&(qh(e,1,t),Kr(e,t));break}}e=e.return}}function F3(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Pr(),t.pingedLanes|=t.suspendedLanes&n,qn===t&&(nr&n)===n&&(Mn===4||Mn===3&&(nr&130023424)===nr&&500>vn()-b1?Tl(t,0):v1|=n),Kr(t,e)}function Nj(t,e){e===0&&(t.mode&1?(e=Wp,Wp<<=1,!(Wp&130023424)&&(Wp=4194304)):e=1);var n=Pr();t=_o(t,e),t!==null&&(qh(t,e,n),Kr(t,n))}function z3(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Nj(t,n)}function V3(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ae(314))}r!==null&&r.delete(e),Nj(t,n)}var Dj;Dj=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Wr.current)Br=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Br=!1,O3(t,e,n);Br=!!(t.flags&131072)}else Br=!1,nn&&e.flags&1048576&&LI(e,ag,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Mm(t,e),t=e.pendingProps;var i=sc(e,xr.current);Xu(e,n),i=d1(null,e,r,t,i,n);var a=h1();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qr(r)?(a=!0,rg(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,s1(e),i.updater=Yy,e.stateNode=i,i._reactInternals=e,yx(e,r,t,n),e=xx(null,e,r,!0,a,n)):(e.tag=0,nn&&a&&e1(e),Er(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Mm(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=U3(r),t=Zi(r,t),i){case 0:e=bx(null,e,r,t,n);break e;case 1:e=NA(null,e,r,t,n);break e;case 11:e=IA(null,e,r,t,n);break e;case 14:e=jA(null,e,r,Zi(r.type,t),n);break e}throw Error(Ae(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zi(r,i),bx(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zi(r,i),NA(t,e,r,i,n);case 3:e:{if(yj(e),t===null)throw Error(Ae(387));r=e.pendingProps,a=e.memoizedState,i=a.element,WI(t,e),lg(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=fc(Error(Ae(423)),e),e=DA(t,e,r,n,i);break e}else if(r!==i){i=fc(Error(Ae(424)),e),e=DA(t,e,r,n,i);break e}else for(oi=cs(e.stateNode.containerInfo.firstChild),li=e,nn=!0,ra=null,n=BI(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(lc(),r===i){e=So(t,e,n);break e}Er(t,e,r,n)}e=e.child}return e;case 5:return qI(e),t===null&&px(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,ux(r,i)?o=null:a!==null&&ux(r,a)&&(e.flags|=32),gj(t,e),Er(t,e,o,n),e.child;case 6:return t===null&&px(e),null;case 13:return vj(t,e,n);case 4:return l1(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=uc(e,null,r,n):Er(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zi(r,i),IA(t,e,r,i,n);case 7:return Er(t,e,e.pendingProps,n),e.child;case 8:return Er(t,e,e.pendingProps.children,n),e.child;case 12:return Er(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,Ht(og,r._currentValue),r._currentValue=o,a!==null)if(fa(a.value,o)){if(a.children===i.children&&!Wr.current){e=So(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var s=a.dependencies;if(s!==null){o=a.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(a.tag===1){l=go(-1,n&-n),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),mx(a.return,n,e),s.lanes|=n;break}l=l.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Ae(341));o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),mx(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Er(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Xu(e,n),i=Mi(i),r=r(i),e.flags|=1,Er(t,e,r,n),e.child;case 14:return r=e.type,i=Zi(r,e.pendingProps),i=Zi(r.type,i),jA(t,e,r,i,n);case 15:return pj(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zi(r,i),Mm(t,e),e.tag=1,qr(r)?(t=!0,rg(e)):t=!1,Xu(e,n),fj(e,r,i),yx(e,r,i,n),xx(null,e,r,!0,t,n);case 19:return bj(t,e,n);case 22:return mj(t,e,n)}throw Error(Ae(156,e.tag))};function Mj(t,e){return lI(t,e)}function B3(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ci(t,e,n,r){return new B3(t,e,n,r)}function S1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function U3(t){if(typeof t=="function")return S1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===B_)return 11;if(t===U_)return 14}return 2}function ps(t,e){var n=t.alternate;return n===null?(n=Ci(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Lm(t,e,n,r,i,a){var o=2;if(r=t,typeof t=="function")S1(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ju:return Pl(n.children,i,a,e);case V_:o=8,i|=8;break;case Vb:return t=Ci(12,n,e,i|2),t.elementType=Vb,t.lanes=a,t;case Bb:return t=Ci(13,n,e,i),t.elementType=Bb,t.lanes=a,t;case Ub:return t=Ci(19,n,e,i),t.elementType=Ub,t.lanes=a,t;case qC:return Jy(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case UC:o=10;break e;case WC:o=9;break e;case B_:o=11;break e;case U_:o=14;break e;case Xo:o=16,r=null;break e}throw Error(Ae(130,t==null?t:typeof t,""))}return e=Ci(o,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function Pl(t,e,n,r){return t=Ci(7,t,r,e),t.lanes=n,t}function Jy(t,e,n,r){return t=Ci(22,t,r,e),t.elementType=qC,t.lanes=n,t.stateNode={isHidden:!1},t}function U0(t,e,n){return t=Ci(6,t,null,e),t.lanes=n,t}function W0(t,e,n){return e=Ci(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function W3(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=E0(0),this.expirationTimes=E0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=E0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function E1(t,e,n,r,i,a,o,s,l){return t=new W3(t,e,n,s,l),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Ci(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},s1(a),t}function q3(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Iu,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Rj(t){if(!t)return Ss;t=t._reactInternals;e:{if(Hl(t)!==t||t.tag!==1)throw Error(Ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ae(171))}if(t.tag===1){var n=t.type;if(qr(n))return RI(t,n,e)}return e}function $j(t,e,n,r,i,a,o,s,l){return t=E1(n,r,!0,t,i,a,o,s,l),t.context=Rj(null),n=t.current,r=Pr(),i=hs(n),a=go(r,i),a.callback=e??null,fs(n,a,i),t.current.lanes=i,qh(t,i,r),Kr(t,r),t}function Zy(t,e,n,r){var i=e.current,a=Pr(),o=hs(i);return n=Rj(n),e.context===null?e.context=n:e.pendingContext=n,e=go(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=fs(i,e,o),t!==null&&(ca(t,i,o,a),jm(t,i,o)),o}function gg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function WA(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function A1(t,e){WA(t,e),(t=t.alternate)&&WA(t,e)}function K3(){return null}var Lj=typeof reportError=="function"?reportError:function(t){console.error(t)};function T1(t){this._internalRoot=t}ev.prototype.render=T1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ae(409));Zy(t,e,null,null)};ev.prototype.unmount=T1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$l(function(){Zy(null,t,null,null)}),e[wo]=null}};function ev(t){this._internalRoot=t}ev.prototype.unstable_scheduleHydration=function(t){if(t){var e=mI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zo.length&&e!==0&&e<Zo[n].priority;n++);Zo.splice(n,0,t),n===0&&yI(t)}};function P1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function tv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function qA(){}function H3(t,e,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var u=gg(o);a.call(u)}}var o=$j(e,r,t,0,null,!1,!1,"",qA);return t._reactRootContainer=o,t[wo]=o.current,Vd(t.nodeType===8?t.parentNode:t),$l(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var u=gg(l);s.call(u)}}var l=E1(t,0,!1,null,null,!1,!1,"",qA);return t._reactRootContainer=l,t[wo]=l.current,Vd(t.nodeType===8?t.parentNode:t),$l(function(){Zy(e,l,n,r)}),l}function nv(t,e,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var s=i;i=function(){var l=gg(o);s.call(l)}}Zy(e,o,t,i)}else o=H3(n,e,t,i,r);return gg(o)}hI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=rd(e.pendingLanes);n!==0&&(K_(e,n|1),Kr(e,vn()),!(St&6)&&(dc=vn()+500,js()))}break;case 13:$l(function(){var r=_o(t,1);if(r!==null){var i=Pr();ca(r,t,1,i)}}),A1(t,1)}};H_=function(t){if(t.tag===13){var e=_o(t,134217728);if(e!==null){var n=Pr();ca(e,t,134217728,n)}A1(t,134217728)}};pI=function(t){if(t.tag===13){var e=hs(t),n=_o(t,e);if(n!==null){var r=Pr();ca(n,t,e,r)}A1(t,e)}};mI=function(){return Nt};gI=function(t,e){var n=Nt;try{return Nt=t,e()}finally{Nt=n}};Zb=function(t,e,n){switch(e){case"input":if(Kb(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ky(r);if(!i)throw Error(Ae(90));HC(r),Kb(r,i)}}}break;case"textarea":YC(t,n);break;case"select":e=n.value,e!=null&&Ku(t,!!n.multiple,e,!1)}};nI=x1;rI=$l;var G3={usingClientEntryPoint:!1,Events:[Hh,Ru,Ky,eI,tI,x1]},Bf={findFiberByHostInstance:ml,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Y3={bundleType:Bf.bundleType,version:Bf.version,rendererPackageName:Bf.rendererPackageName,rendererConfig:Bf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=oI(t),t===null?null:t.stateNode},findFiberByHostInstance:Bf.findFiberByHostInstance||K3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tm.isDisabled&&tm.supportsFiber)try{By=tm.inject(Y3),Na=tm}catch{}}hi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G3;hi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!P1(e))throw Error(Ae(200));return q3(t,e,null,n)};hi.createRoot=function(t,e){if(!P1(t))throw Error(Ae(299));var n=!1,r="",i=Lj;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=E1(t,1,!1,null,null,n,!1,r,i),t[wo]=e.current,Vd(t.nodeType===8?t.parentNode:t),new T1(e)};hi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ae(188)):(t=Object.keys(t).join(","),Error(Ae(268,t)));return t=oI(e),t=t===null?null:t.stateNode,t};hi.flushSync=function(t){return $l(t)};hi.hydrate=function(t,e,n){if(!tv(e))throw Error(Ae(200));return nv(null,t,e,!0,n)};hi.hydrateRoot=function(t,e,n){if(!P1(t))throw Error(Ae(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",o=Lj;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=$j(e,null,t,1,n??null,i,!1,a,o),t[wo]=e.current,Vd(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ev(e)};hi.render=function(t,e,n){if(!tv(e))throw Error(Ae(200));return nv(null,t,e,!1,n)};hi.unmountComponentAtNode=function(t){if(!tv(t))throw Error(Ae(40));return t._reactRootContainer?($l(function(){nv(null,null,t,!1,function(){t._reactRootContainer=null,t[wo]=null})}),!0):!1};hi.unstable_batchedUpdates=x1;hi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!tv(n))throw Error(Ae(200));if(t==null||t._reactInternals===void 0)throw Error(Ae(38));return nv(t,e,n,!1,r)};hi.version="18.3.1-next-f1338f8080-20240426";function Fj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Fj)}catch(t){console.error(t)}}Fj(),FC.exports=hi;var X3=FC.exports,KA=X3;Fb.createRoot=KA.createRoot,Fb.hydrateRoot=KA.hydrateRoot;const Q3=()=>{};var HA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zj=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},J3=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],o=t[n++],s=t[n++],l=((i&7)<<18|(a&63)<<12|(o&63)<<6|s&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},Vj={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,s=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=a>>2,f=(a&3)<<4|s>>4;let m=(s&15)<<2|u>>6,g=u&63;l||(g=64,o||(m=64)),r.push(n[c],n[f],n[m],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(zj(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):J3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||s==null||u==null||f==null)throw new Z3;const m=a<<2|s>>4;if(r.push(m),u!==64){const g=s<<4&240|u>>2;if(r.push(g),f!==64){const b=u<<6&192|f;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Z3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eF=function(t){const e=zj(t);return Vj.encodeByteArray(e,!0)},yg=function(t){return eF(t).replace(/\./g,"")},Bj=function(t){try{return Vj.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nF=()=>tF().__FIREBASE_DEFAULTS__,rF=()=>{if(typeof process>"u"||typeof HA>"u")return;const t=HA.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},iF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Bj(t[1]);return e&&JSON.parse(e)},rv=()=>{try{return Q3()||nF()||rF()||iF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},aF=t=>{var e,n;return(n=(e=rv())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},oF=t=>{const e=aF(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Uj=()=>{var t;return(t=rv())==null?void 0:t.config},sF=t=>{var e;return(e=rv())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function uF(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cF(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[yg(JSON.stringify(n)),yg(JSON.stringify(o)),""].join(".")}const _d={};function fF(){const t={prod:[],emulator:[]};for(const e of Object.keys(_d))_d[e]?t.emulator.push(e):t.prod.push(e);return t}function dF(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let GA=!1;function hF(t,e){if(typeof window>"u"||typeof document>"u"||!Yh(window.location.host)||_d[t]===e||_d[t]||GA)return;_d[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",a=fF().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function s(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,g){m.setAttribute("width","24"),m.setAttribute("id",g),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{GA=!0,o()},m}function c(m,g){m.setAttribute("id",g),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=dF(r),g=n("text"),b=document.getElementById(g)||document.createElement("span"),v=n("learnmore"),x=document.getElementById(v)||document.createElement("a"),S=n("preprendIcon"),E=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const T=m.element;s(T),c(x,v);const j=u();l(E,S),T.append(E,b,x,j),document.body.appendChild(T)}a?(b.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Hr())}function mF(){var e;const t=(e=rv())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yF(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bF(){const t=Hr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function xF(){return!mF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wF(){try{return typeof indexedDB=="object"}catch{return!1}}function _F(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF="FirebaseError";class No extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=SF,Object.setPrototypeOf(this,No.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xh.prototype.create)}}class Xh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?EF(a,r):"Error",s=`${this.serviceName}: ${o} (${i}).`;return new No(i,s,r)}}function EF(t,e){return t.replace(AF,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const AF=/\{\$([^}]+)}/g;function Xd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],o=e[i];if(YA(a)&&YA(o)){if(!Xd(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function YA(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wj(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ad(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function od(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function TF(t,e){const n=new PF(t,e);return n.subscribe.bind(n)}class PF{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");OF(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=q0),i.error===void 0&&(i.error=q0),i.complete===void 0&&(i.complete=q0);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function OF(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function q0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(t){return t&&t._delegate?t._delegate:t}class Ll{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new lF;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IF(e))try{this.getOrInitializeService({instanceIdentifier:ul})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=ul){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ul){return this.instances.has(e)}getOptions(e=ul){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(a);r===s&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:CF(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ul){return this.component?this.component.multipleInstances?e:ul:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CF(t){return t===ul?void 0:t}function IF(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new kF(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pt||(pt={}));const NF={debug:pt.DEBUG,verbose:pt.VERBOSE,info:pt.INFO,warn:pt.WARN,error:pt.ERROR,silent:pt.SILENT},DF=pt.INFO,MF={[pt.DEBUG]:"log",[pt.VERBOSE]:"log",[pt.INFO]:"info",[pt.WARN]:"warn",[pt.ERROR]:"error"},RF=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=MF[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class O1{constructor(e){this.name=e,this._logLevel=DF,this._logHandler=RF,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pt.DEBUG,...e),this._logHandler(this,pt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pt.VERBOSE,...e),this._logHandler(this,pt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pt.INFO,...e),this._logHandler(this,pt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pt.WARN,...e),this._logHandler(this,pt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pt.ERROR,...e),this._logHandler(this,pt.ERROR,...e)}}const $F=(t,e)=>e.some(n=>t instanceof n);let XA,QA;function LF(){return XA||(XA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FF(){return QA||(QA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qj=new WeakMap,jx=new WeakMap,Kj=new WeakMap,K0=new WeakMap,k1=new WeakMap;function zF(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(ms(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&qj.set(n,t)}).catch(()=>{}),k1.set(e,t),e}function VF(t){if(jx.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});jx.set(t,e)}let Nx={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return jx.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Kj.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ms(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function BF(t){Nx=t(Nx)}function UF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(H0(this),e,...n);return Kj.set(r,e.sort?e.sort():[e]),ms(r)}:FF().includes(t)?function(...e){return t.apply(H0(this),e),ms(qj.get(this))}:function(...e){return ms(t.apply(H0(this),e))}}function WF(t){return typeof t=="function"?UF(t):(t instanceof IDBTransaction&&VF(t),$F(t,LF())?new Proxy(t,Nx):t)}function ms(t){if(t instanceof IDBRequest)return zF(t);if(K0.has(t))return K0.get(t);const e=WF(t);return e!==t&&(K0.set(t,e),k1.set(e,t)),e}const H0=t=>k1.get(t);function qF(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),s=ms(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ms(o.result),l.oldVersion,l.newVersion,ms(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),s.then(l=>{a&&l.addEventListener("close",()=>a()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),s}const KF=["get","getKey","getAll","getAllKeys","count"],HF=["put","add","delete","clear"],G0=new Map;function JA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(G0.get(e))return G0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=HF.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||KF.includes(n)))return;const a=async function(o,...s){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(s.shift())),(await Promise.all([u[n](...s),i&&l.done]))[0]};return G0.set(e,a),a}BF(t=>({...t,get:(e,n,r)=>JA(e,n)||t.get(e,n,r),has:(e,n)=>!!JA(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GF{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(YF(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function YF(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Dx="@firebase/app",ZA="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo=new O1("@firebase/app"),XF="@firebase/app-compat",QF="@firebase/analytics-compat",JF="@firebase/analytics",ZF="@firebase/app-check-compat",ez="@firebase/app-check",tz="@firebase/auth",nz="@firebase/auth-compat",rz="@firebase/database",iz="@firebase/data-connect",az="@firebase/database-compat",oz="@firebase/functions",sz="@firebase/functions-compat",lz="@firebase/installations",uz="@firebase/installations-compat",cz="@firebase/messaging",fz="@firebase/messaging-compat",dz="@firebase/performance",hz="@firebase/performance-compat",pz="@firebase/remote-config",mz="@firebase/remote-config-compat",gz="@firebase/storage",yz="@firebase/storage-compat",vz="@firebase/firestore",bz="@firebase/ai",xz="@firebase/firestore-compat",wz="firebase",_z="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx="[DEFAULT]",Sz={[Dx]:"fire-core",[XF]:"fire-core-compat",[JF]:"fire-analytics",[QF]:"fire-analytics-compat",[ez]:"fire-app-check",[ZF]:"fire-app-check-compat",[tz]:"fire-auth",[nz]:"fire-auth-compat",[rz]:"fire-rtdb",[iz]:"fire-data-connect",[az]:"fire-rtdb-compat",[oz]:"fire-fn",[sz]:"fire-fn-compat",[lz]:"fire-iid",[uz]:"fire-iid-compat",[cz]:"fire-fcm",[fz]:"fire-fcm-compat",[dz]:"fire-perf",[hz]:"fire-perf-compat",[pz]:"fire-rc",[mz]:"fire-rc-compat",[gz]:"fire-gcs",[yz]:"fire-gcs-compat",[vz]:"fire-fst",[xz]:"fire-fst-compat",[bz]:"fire-vertex","fire-js":"fire-js",[wz]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg=new Map,Ez=new Map,Rx=new Map;function eT(t,e){try{t.container.addComponent(e)}catch(n){Eo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function hc(t){const e=t.name;if(Rx.has(e))return Eo.debug(`There were multiple attempts to register component ${e}.`),!1;Rx.set(e,t);for(const n of vg.values())eT(n,t);for(const n of Ez.values())eT(n,t);return!0}function Hj(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ka(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Az={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gs=new Xh("app","Firebase",Az);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tz{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ll("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv=_z;function Gj(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Mx,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw gs.create("bad-app-name",{appName:String(i)});if(n||(n=Uj()),!n)throw gs.create("no-options");const a=vg.get(i);if(a){if(Xd(n,a.options)&&Xd(r,a.config))return a;throw gs.create("duplicate-app",{appName:i})}const o=new jF(i);for(const l of Rx.values())o.addComponent(l);const s=new Tz(n,r,o);return vg.set(i,s),s}function Pz(t=Mx){const e=vg.get(t);if(!e&&t===Mx&&Uj())return Gj();if(!e)throw gs.create("no-app",{appName:t});return e}function ys(t,e,n){let r=Sz[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Eo.warn(o.join(" "));return}hc(new Ll(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oz="firebase-heartbeat-database",kz=1,Qd="firebase-heartbeat-store";let Y0=null;function Yj(){return Y0||(Y0=qF(Oz,kz,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Qd)}catch(n){console.warn(n)}}}}).catch(t=>{throw gs.create("idb-open",{originalErrorMessage:t.message})})),Y0}async function Cz(t){try{const n=(await Yj()).transaction(Qd),r=await n.objectStore(Qd).get(Xj(t));return await n.done,r}catch(e){if(e instanceof No)Eo.warn(e.message);else{const n=gs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Eo.warn(n.message)}}}async function tT(t,e){try{const r=(await Yj()).transaction(Qd,"readwrite");await r.objectStore(Qd).put(e,Xj(t)),await r.done}catch(n){if(n instanceof No)Eo.warn(n.message);else{const r=gs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Eo.warn(r.message)}}}function Xj(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iz=1024,jz=30;class Nz{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Mz(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=nT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>jz){const o=Rz(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Eo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=nT(),{heartbeatsToSend:r,unsentEntries:i}=Dz(this._heartbeatsCache.heartbeats),a=yg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Eo.warn(n),""}}}function nT(){return new Date().toISOString().substring(0,10)}function Dz(t,e=Iz){const n=[];let r=t.slice();for(const i of t){const a=n.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),rT(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),rT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Mz{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wF()?_F().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Cz(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return tT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return tT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function rT(t){return yg(JSON.stringify({version:2,heartbeats:t})).length}function Rz(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $z(t){hc(new Ll("platform-logger",e=>new GF(e),"PRIVATE")),hc(new Ll("heartbeat",e=>new Nz(e),"PRIVATE")),ys(Dx,ZA,t),ys(Dx,ZA,"esm2020"),ys("fire-js","")}$z("");function Qj(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Lz=Qj,Jj=new Xh("auth","Firebase",Qj());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg=new O1("@firebase/auth");function Fz(t,...e){bg.logLevel<=pt.WARN&&bg.warn(`Auth (${iv}): ${t}`,...e)}function Fm(t,...e){bg.logLevel<=pt.ERROR&&bg.error(`Auth (${iv}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(t,...e){throw I1(t,...e)}function C1(t,...e){return I1(t,...e)}function Zj(t,e,n){const r={...Lz(),[e]:n};return new Xh("auth","Firebase",r).create(e,{appName:t.name})}function Ol(t){return Zj(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function I1(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Jj.create(t,...e)}function _t(t,e,...n){if(!t)throw I1(e,...n)}function lo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Fm(e),new Error(e)}function xg(t,e){t||lo(e)}function zz(){return iT()==="http:"||iT()==="https:"}function iT(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zz()||yF()||"connection"in navigator)?navigator.onLine:!0}function Bz(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,n){this.shortDelay=e,this.longDelay=n,xg(n>e,"Short delay should be less than long delay!"),this.isMobile=pF()||vF()}get(){return Vz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uz(t,e){xg(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;lo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;lo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;lo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Kz=new Qh(3e4,6e4);function Gl(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Yl(t,e,n,r,i={}){return tN(t,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const s=Wj({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...a};return gF()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Yh(t.emulatorConfig.host)&&(u.credentials="include"),eN.fetch()(await nN(t,t.config.apiHost,n,s),u)})}async function tN(t,e,n){t._canInitEmulator=!1;const r={...Wz,...e};try{const i=new Gz(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw nm(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const s=a.ok?o.errorMessage:o.error.message,[l,u]=s.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw nm(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw nm(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw nm(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Zj(t,c,u);pc(t,c)}}catch(i){if(i instanceof No)throw i;pc(t,"network-request-failed",{message:String(i)})}}async function av(t,e,n,r,i={}){const a=await Yl(t,e,n,r,i);return"mfaPendingCredential"in a&&pc(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function nN(t,e,n,r){const i=`${e}${n}?${r}`,a=t,o=a.config.emulator?Uz(t.config,i):`${t.config.apiScheme}://${i}`;return qz.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function Hz(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Gz{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(C1(this.auth,"network-request-failed")),Kz.get())})}}function nm(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=C1(t,e,r);return i.customData._tokenResponse=n,i}function aT(t){return t!==void 0&&t.enterprise!==void 0}class Yz{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Hz(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Xz(t,e){return Yl(t,"GET","/v2/recaptchaConfig",Gl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qz(t,e){return Yl(t,"POST","/v1/accounts:delete",e)}async function wg(t,e){return Yl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Jz(t,e=!1){const n=Kn(t),r=await n.getIdToken(e),i=rN(r);_t(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Sd(X0(i.auth_time)),issuedAtTime:Sd(X0(i.iat)),expirationTime:Sd(X0(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function X0(t){return Number(t)*1e3}function rN(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Fm("JWT malformed, contained fewer than 3 sections"),null;try{const i=Bj(n);return i?JSON.parse(i):(Fm("Failed to decode base64 JWT payload"),null)}catch(i){return Fm("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function oT(t){const e=rN(t);return _t(e,"internal-error"),_t(typeof e.exp<"u","internal-error"),_t(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $x(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof No&&Zz(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Zz({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sd(this.lastLoginAt),this.creationTime=Sd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _g(t){var f;const e=t.auth,n=await t.getIdToken(),r=await $x(t,wg(e,{idToken:n}));_t(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=(f=i.providerUserInfo)!=null&&f.length?iN(i.providerUserInfo):[],o=nV(t.providerData,a),s=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=s?l:!1,c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Lx(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,c)}async function tV(t){const e=Kn(t);await _g(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nV(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function iN(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rV(t,e){const n=await tN(t,{},async()=>{const r=Wj({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=await nN(t,i,"/v1/token",`key=${a}`),s=await t._getAdditionalHeaders();s["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:s,body:r};return t.emulatorConfig&&Yh(t.emulatorConfig.host)&&(l.credentials="include"),eN.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function iV(t,e){return Yl(t,"POST","/v2/accounts:revokeToken",Gl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_t(e.idToken,"internal-error"),_t(typeof e.idToken<"u","internal-error"),_t(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):oT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){_t(e.length!==0,"internal-error");const n=oT(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(_t(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await rV(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new Ju;return r&&(_t(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(_t(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(_t(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ju,this.toJSON())}_performRefresh(){return lo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ho(t,e){_t(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class oa{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new eV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Lx(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await $x(this,this.stsTokenManager.getToken(this.auth,e));return _t(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Jz(this,e)}reload(){return tV(this)}_assign(e){this!==e&&(_t(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new oa({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){_t(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await _g(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ka(this.auth.app))return Promise.reject(Ol(this.auth));const e=await this.getIdToken();return await $x(this,Qz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,s=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,c=n.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:g,providerData:b,stsTokenManager:v}=n;_t(f&&v,e,"internal-error");const x=Ju.fromJSON(this.name,v);_t(typeof f=="string",e,"internal-error"),Ho(r,e.name),Ho(i,e.name),_t(typeof m=="boolean",e,"internal-error"),_t(typeof g=="boolean",e,"internal-error"),Ho(a,e.name),Ho(o,e.name),Ho(s,e.name),Ho(l,e.name),Ho(u,e.name),Ho(c,e.name);const S=new oa({uid:f,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:a,tenantId:s,stsTokenManager:x,createdAt:u,lastLoginAt:c});return b&&Array.isArray(b)&&(S.providerData=b.map(E=>({...E}))),l&&(S._redirectEventId=l),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ju;i.updateFromServerResponse(n);const a=new oa({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await _g(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];_t(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?iN(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),s=new Ju;s.updateFromIdToken(r);const l=new oa({uid:i.localId,auth:e,stsTokenManager:s,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Lx(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT=new Map;function vl(t){xg(t instanceof Function,"Expected a class definition");let e=sT.get(t);return e?(xg(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,sT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}aN.type="NONE";const lT=aN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(t,e,n){return`firebase:${t}:${e}:${n}`}class Zu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Q0(this.userKey,i.apiKey,a),this.fullPersistenceKey=Q0("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await wg(this.auth,{idToken:e}).catch(()=>{});return n?oa._fromGetAccountInfoResponse(this.auth,n,e):null}return oa._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Zu(vl(lT),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=i[0]||vl(lT);const o=Q0(r,e.config.apiKey,e.name);let s=null;for(const u of n)try{const c=await u._get(o);if(c){let f;if(typeof c=="string"){const m=await wg(e,{idToken:c}).catch(()=>{});if(!m)break;f=await oa._fromGetAccountInfoResponse(e,m,c)}else f=oa._fromJSON(e,c);u!==a&&(s=f),a=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!l.length?new Zu(a,e,r):(a=l[0],s&&await a._set(o,s.toJSON()),await Promise.all(n.map(async u=>{if(u!==a)try{await u._remove(o)}catch{}})),new Zu(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(oN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lN(e))return"Blackberry";if(uN(e))return"Webos";if(oV(e))return"Safari";if((e.includes("chrome/")||sV(e))&&!e.includes("edge/"))return"Chrome";if(sN(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function aV(t=Hr()){return/firefox\//i.test(t)}function oV(t=Hr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sV(t=Hr()){return/crios\//i.test(t)}function oN(t=Hr()){return/iemobile/i.test(t)}function sN(t=Hr()){return/android/i.test(t)}function lN(t=Hr()){return/blackberry/i.test(t)}function uN(t=Hr()){return/webos/i.test(t)}function lV(t=Hr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function uV(){return bF()&&document.documentMode===10}function cV(t=Hr()){return lV(t)||sN(t)||uN(t)||lN(t)||/windows phone/i.test(t)||oN(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(t,e=[]){let n;switch(t){case"Browser":n=uT(Hr());break;case"Worker":n=`${uT(Hr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${iv}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,s)=>{try{const l=e(a);o(l)}catch(l){s(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dV(t,e={}){return Yl(t,"GET","/v2/passwordPolicy",Gl(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV=6;class pV{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??hV,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cT(this),this.idTokenSubscription=new cT(this),this.beforeStateQueue=new fV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jj,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=vl(n)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await Zu.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await wg(this,{idToken:e}),r=await oa._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(ka(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(a=this.redirectUser)==null?void 0:a._redirectEventId,s=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===s)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return _t(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await _g(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Bz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ka(this.app))return Promise.reject(Ol(this));const n=e?Kn(e):null;return n&&_t(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&_t(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ka(this.app)?Promise.reject(Ol(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ka(this.app)?Promise.reject(Ol(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dV(this),n=new pV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await iV(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&vl(e)||this._popupRedirectResolver;_t(n,this,"argument-error"),this.redirectPersistenceManager=await Zu.create(this,[vl(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(_t(s,this,"internal-error"),s.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _t(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(ka(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Fz(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Jh(t){return Kn(t)}class cT{constructor(e){this.auth=e,this.observer=null,this.addObserver=TF(n=>this.observer=n)}get next(){return _t(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let j1={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gV(t){j1=t}function yV(t){return j1.loadJS(t)}function vV(){return j1.recaptchaEnterpriseScript}class bV{constructor(){this.enterprise=new xV}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class xV{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const wV="recaptcha-enterprise",fN="NO_RECAPTCHA";class _V{constructor(e){this.type=wV,this.auth=Jh(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,s)=>{Xz(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)s(new Error("recaptcha Enterprise site key undefined"));else{const u=new Yz(l);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,o(u.siteKey)}}).catch(l=>{s(l)})})}function i(a,o,s){const l=window.grecaptcha;aT(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:e}).then(u=>{o(u)}).catch(()=>{o(fN)})}):s(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new bV().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(s=>{if(!n&&aT(window.grecaptcha))i(s,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=vV();l.length!==0&&(l+=s),yV(l).then(()=>{i(s,a,o)}).catch(u=>{o(u)})}}).catch(s=>{o(s)})})}}async function fT(t,e,n,r=!1,i=!1){const a=new _V(t);let o;if(i)o=fN;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}const s={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in s){const l=s.phoneEnrollmentInfo.phoneNumber,u=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in s){const l=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return s}return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function Fx(t,e,n,r,i){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await fT(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await fT(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SV(t,e){const n=Hj(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Xd(a,e??{}))return i;pc(i,"already-initialized")}return n.initialize({options:e})}function EV(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vl);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return lo("not implemented")}_getIdTokenResponse(e){return lo("not implemented")}_linkToIdToken(e,n){return lo("not implemented")}_getReauthenticationResolver(e){return lo("not implemented")}}async function TV(t,e){return Yl(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PV(t,e){return av(t,"POST","/v1/accounts:signInWithPassword",Gl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OV(t,e){return av(t,"POST","/v1/accounts:signInWithEmailLink",Gl(t,e))}async function kV(t,e){return av(t,"POST","/v1/accounts:signInWithEmailLink",Gl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd extends AV{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Jd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Jd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fx(e,n,"signInWithPassword",PV);case"emailLink":return OV(e,{email:this._email,oobCode:this._password});default:pc(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fx(e,r,"signUpPassword",TV);case"emailLink":return kV(e,{idToken:n,email:this._email,oobCode:this._password});default:pc(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CV(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function IV(t){const e=ad(od(t)).link,n=e?ad(od(e)).deep_link_id:null,r=ad(od(t)).deep_link_id;return(r?ad(od(r)).link:null)||r||n||e||t}class N1{constructor(e){const n=ad(od(e)),r=n.apiKey??null,i=n.oobCode??null,a=CV(n.mode??null);_t(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=IV(e);try{return new N1(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(){this.providerId=Qc.PROVIDER_ID}static credential(e,n){return Jd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=N1.parseLink(n);return _t(r,"argument-error"),Jd._fromEmailAndCode(e,r.code,r.tenantId)}}Qc.PROVIDER_ID="password";Qc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Qc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jV(t,e){return av(t,"POST","/v1/accounts:signUp",Gl(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await oa._fromIdTokenResponse(e,r,i),o=dT(r);return new Zd({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=dT(r);return new Zd({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function dT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg extends No{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Sg.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Sg(e,n,r,i)}}function NV(t,e,n,r){return n._getIdTokenResponse(t).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Sg._fromErrorAndOperation(t,a,e,r):a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DV(t,e,n=!1){if(ka(t.app))return Promise.reject(Ol(t));const r="signIn",i=await NV(t,r,e),a=await Zd._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function MV(t,e){return DV(Jh(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(t){const e=Jh(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function RV(t,e,n){if(ka(t.app))return Promise.reject(Ol(t));const r=Jh(t),o=await Fx(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",jV).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&dN(t),l}),s=await Zd._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}function $V(t,e,n){return ka(t.app)?Promise.reject(Ol(t)):MV(Kn(t),Qc.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&dN(t),r})}function LV(t,e,n,r){return Kn(t).onAuthStateChanged(e,n,r)}const hT="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(hT,"1"),this.storage.removeItem(hT),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV=1e3,zV=10;class pN extends hN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cV(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,s,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);uV()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,zV):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},FV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}pN.type="LOCAL";const VV=pN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV extends hN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}BV.type="SESSION";new Qh(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Qh(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Qh(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Qh(5e3,15e3);var pT="@firebase/auth",mT="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){_t(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qV(t){hc(new Ll("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:s}=r.options;_t(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:s,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cN(t)},u=new mV(r,i,a,l);return EV(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),hc(new Ll("auth-internal",e=>{const n=Jh(e.getProvider("auth").getImmediate());return(r=>new UV(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ys(pT,mT,WV(t)),ys(pT,mT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KV=5*60;sF("authIdTokenMaxAge");function HV(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}gV({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=C1("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",HV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qV("Browser");var GV="firebase",YV="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ys(GV,YV,"app");var gT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vs,mN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,O){function I(){}I.prototype=O.prototype,w.F=O.prototype,w.prototype=new I,w.prototype.constructor=w,w.D=function(R,D,$){for(var L=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)L[ne-2]=arguments[ne];return O.prototype[D].apply(R,L)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,O,I){I||(I=0);const R=Array(16);if(typeof O=="string")for(var D=0;D<16;++D)R[D]=O.charCodeAt(I++)|O.charCodeAt(I++)<<8|O.charCodeAt(I++)<<16|O.charCodeAt(I++)<<24;else for(D=0;D<16;++D)R[D]=O[I++]|O[I++]<<8|O[I++]<<16|O[I++]<<24;O=w.g[0],I=w.g[1],D=w.g[2];let $=w.g[3],L;L=O+($^I&(D^$))+R[0]+3614090360&4294967295,O=I+(L<<7&4294967295|L>>>25),L=$+(D^O&(I^D))+R[1]+3905402710&4294967295,$=O+(L<<12&4294967295|L>>>20),L=D+(I^$&(O^I))+R[2]+606105819&4294967295,D=$+(L<<17&4294967295|L>>>15),L=I+(O^D&($^O))+R[3]+3250441966&4294967295,I=D+(L<<22&4294967295|L>>>10),L=O+($^I&(D^$))+R[4]+4118548399&4294967295,O=I+(L<<7&4294967295|L>>>25),L=$+(D^O&(I^D))+R[5]+1200080426&4294967295,$=O+(L<<12&4294967295|L>>>20),L=D+(I^$&(O^I))+R[6]+2821735955&4294967295,D=$+(L<<17&4294967295|L>>>15),L=I+(O^D&($^O))+R[7]+4249261313&4294967295,I=D+(L<<22&4294967295|L>>>10),L=O+($^I&(D^$))+R[8]+1770035416&4294967295,O=I+(L<<7&4294967295|L>>>25),L=$+(D^O&(I^D))+R[9]+2336552879&4294967295,$=O+(L<<12&4294967295|L>>>20),L=D+(I^$&(O^I))+R[10]+4294925233&4294967295,D=$+(L<<17&4294967295|L>>>15),L=I+(O^D&($^O))+R[11]+2304563134&4294967295,I=D+(L<<22&4294967295|L>>>10),L=O+($^I&(D^$))+R[12]+1804603682&4294967295,O=I+(L<<7&4294967295|L>>>25),L=$+(D^O&(I^D))+R[13]+4254626195&4294967295,$=O+(L<<12&4294967295|L>>>20),L=D+(I^$&(O^I))+R[14]+2792965006&4294967295,D=$+(L<<17&4294967295|L>>>15),L=I+(O^D&($^O))+R[15]+1236535329&4294967295,I=D+(L<<22&4294967295|L>>>10),L=O+(D^$&(I^D))+R[1]+4129170786&4294967295,O=I+(L<<5&4294967295|L>>>27),L=$+(I^D&(O^I))+R[6]+3225465664&4294967295,$=O+(L<<9&4294967295|L>>>23),L=D+(O^I&($^O))+R[11]+643717713&4294967295,D=$+(L<<14&4294967295|L>>>18),L=I+($^O&(D^$))+R[0]+3921069994&4294967295,I=D+(L<<20&4294967295|L>>>12),L=O+(D^$&(I^D))+R[5]+3593408605&4294967295,O=I+(L<<5&4294967295|L>>>27),L=$+(I^D&(O^I))+R[10]+38016083&4294967295,$=O+(L<<9&4294967295|L>>>23),L=D+(O^I&($^O))+R[15]+3634488961&4294967295,D=$+(L<<14&4294967295|L>>>18),L=I+($^O&(D^$))+R[4]+3889429448&4294967295,I=D+(L<<20&4294967295|L>>>12),L=O+(D^$&(I^D))+R[9]+568446438&4294967295,O=I+(L<<5&4294967295|L>>>27),L=$+(I^D&(O^I))+R[14]+3275163606&4294967295,$=O+(L<<9&4294967295|L>>>23),L=D+(O^I&($^O))+R[3]+4107603335&4294967295,D=$+(L<<14&4294967295|L>>>18),L=I+($^O&(D^$))+R[8]+1163531501&4294967295,I=D+(L<<20&4294967295|L>>>12),L=O+(D^$&(I^D))+R[13]+2850285829&4294967295,O=I+(L<<5&4294967295|L>>>27),L=$+(I^D&(O^I))+R[2]+4243563512&4294967295,$=O+(L<<9&4294967295|L>>>23),L=D+(O^I&($^O))+R[7]+1735328473&4294967295,D=$+(L<<14&4294967295|L>>>18),L=I+($^O&(D^$))+R[12]+2368359562&4294967295,I=D+(L<<20&4294967295|L>>>12),L=O+(I^D^$)+R[5]+4294588738&4294967295,O=I+(L<<4&4294967295|L>>>28),L=$+(O^I^D)+R[8]+2272392833&4294967295,$=O+(L<<11&4294967295|L>>>21),L=D+($^O^I)+R[11]+1839030562&4294967295,D=$+(L<<16&4294967295|L>>>16),L=I+(D^$^O)+R[14]+4259657740&4294967295,I=D+(L<<23&4294967295|L>>>9),L=O+(I^D^$)+R[1]+2763975236&4294967295,O=I+(L<<4&4294967295|L>>>28),L=$+(O^I^D)+R[4]+1272893353&4294967295,$=O+(L<<11&4294967295|L>>>21),L=D+($^O^I)+R[7]+4139469664&4294967295,D=$+(L<<16&4294967295|L>>>16),L=I+(D^$^O)+R[10]+3200236656&4294967295,I=D+(L<<23&4294967295|L>>>9),L=O+(I^D^$)+R[13]+681279174&4294967295,O=I+(L<<4&4294967295|L>>>28),L=$+(O^I^D)+R[0]+3936430074&4294967295,$=O+(L<<11&4294967295|L>>>21),L=D+($^O^I)+R[3]+3572445317&4294967295,D=$+(L<<16&4294967295|L>>>16),L=I+(D^$^O)+R[6]+76029189&4294967295,I=D+(L<<23&4294967295|L>>>9),L=O+(I^D^$)+R[9]+3654602809&4294967295,O=I+(L<<4&4294967295|L>>>28),L=$+(O^I^D)+R[12]+3873151461&4294967295,$=O+(L<<11&4294967295|L>>>21),L=D+($^O^I)+R[15]+530742520&4294967295,D=$+(L<<16&4294967295|L>>>16),L=I+(D^$^O)+R[2]+3299628645&4294967295,I=D+(L<<23&4294967295|L>>>9),L=O+(D^(I|~$))+R[0]+4096336452&4294967295,O=I+(L<<6&4294967295|L>>>26),L=$+(I^(O|~D))+R[7]+1126891415&4294967295,$=O+(L<<10&4294967295|L>>>22),L=D+(O^($|~I))+R[14]+2878612391&4294967295,D=$+(L<<15&4294967295|L>>>17),L=I+($^(D|~O))+R[5]+4237533241&4294967295,I=D+(L<<21&4294967295|L>>>11),L=O+(D^(I|~$))+R[12]+1700485571&4294967295,O=I+(L<<6&4294967295|L>>>26),L=$+(I^(O|~D))+R[3]+2399980690&4294967295,$=O+(L<<10&4294967295|L>>>22),L=D+(O^($|~I))+R[10]+4293915773&4294967295,D=$+(L<<15&4294967295|L>>>17),L=I+($^(D|~O))+R[1]+2240044497&4294967295,I=D+(L<<21&4294967295|L>>>11),L=O+(D^(I|~$))+R[8]+1873313359&4294967295,O=I+(L<<6&4294967295|L>>>26),L=$+(I^(O|~D))+R[15]+4264355552&4294967295,$=O+(L<<10&4294967295|L>>>22),L=D+(O^($|~I))+R[6]+2734768916&4294967295,D=$+(L<<15&4294967295|L>>>17),L=I+($^(D|~O))+R[13]+1309151649&4294967295,I=D+(L<<21&4294967295|L>>>11),L=O+(D^(I|~$))+R[4]+4149444226&4294967295,O=I+(L<<6&4294967295|L>>>26),L=$+(I^(O|~D))+R[11]+3174756917&4294967295,$=O+(L<<10&4294967295|L>>>22),L=D+(O^($|~I))+R[2]+718787259&4294967295,D=$+(L<<15&4294967295|L>>>17),L=I+($^(D|~O))+R[9]+3951481745&4294967295,w.g[0]=w.g[0]+O&4294967295,w.g[1]=w.g[1]+(D+(L<<21&4294967295|L>>>11))&4294967295,w.g[2]=w.g[2]+D&4294967295,w.g[3]=w.g[3]+$&4294967295}r.prototype.v=function(w,O){O===void 0&&(O=w.length);const I=O-this.blockSize,R=this.C;let D=this.h,$=0;for(;$<O;){if(D==0)for(;$<=I;)i(this,w,$),$+=this.blockSize;if(typeof w=="string"){for(;$<O;)if(R[D++]=w.charCodeAt($++),D==this.blockSize){i(this,R),D=0;break}}else for(;$<O;)if(R[D++]=w[$++],D==this.blockSize){i(this,R),D=0;break}}this.h=D,this.o+=O},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var O=1;O<w.length-8;++O)w[O]=0;O=this.o*8;for(var I=w.length-8;I<w.length;++I)w[I]=O&255,O/=256;for(this.v(w),w=Array(16),O=0,I=0;I<4;++I)for(let R=0;R<32;R+=8)w[O++]=this.g[I]>>>R&255;return w};function a(w,O){var I=s;return Object.prototype.hasOwnProperty.call(I,w)?I[w]:I[w]=O(w)}function o(w,O){this.h=O;const I=[];let R=!0;for(let D=w.length-1;D>=0;D--){const $=w[D]|0;R&&$==O||(I[D]=$,R=!1)}this.g=I}var s={};function l(w){return-128<=w&&w<128?a(w,function(O){return new o([O|0],O<0?-1:0)}):new o([w|0],w<0?-1:0)}function u(w){if(isNaN(w)||!isFinite(w))return f;if(w<0)return x(u(-w));const O=[];let I=1;for(let R=0;w>=I;R++)O[R]=w/I|0,I*=4294967296;return new o(O,0)}function c(w,O){if(w.length==0)throw Error("number format error: empty string");if(O=O||10,O<2||36<O)throw Error("radix out of range: "+O);if(w.charAt(0)=="-")return x(c(w.substring(1),O));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=u(Math.pow(O,8));let R=f;for(let $=0;$<w.length;$+=8){var D=Math.min(8,w.length-$);const L=parseInt(w.substring($,$+D),O);D<8?(D=u(Math.pow(O,D)),R=R.j(D).add(u(L))):(R=R.j(I),R=R.add(u(L)))}return R}var f=l(0),m=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-x(this).m();let w=0,O=1;for(let I=0;I<this.g.length;I++){const R=this.i(I);w+=(R>=0?R:4294967296+R)*O,O*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(b(this))return"0";if(v(this))return"-"+x(this).toString(w);const O=u(Math.pow(w,6));var I=this;let R="";for(;;){const D=j(I,O).g;I=S(I,D.j(O));let $=((I.g.length>0?I.g[0]:I.h)>>>0).toString(w);if(I=D,b(I))return $+R;for(;$.length<6;)$="0"+$;R=$+R}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function b(w){if(w.h!=0)return!1;for(let O=0;O<w.g.length;O++)if(w.g[O]!=0)return!1;return!0}function v(w){return w.h==-1}t.l=function(w){return w=S(this,w),v(w)?-1:b(w)?0:1};function x(w){const O=w.g.length,I=[];for(let R=0;R<O;R++)I[R]=~w.g[R];return new o(I,~w.h).add(m)}t.abs=function(){return v(this)?x(this):this},t.add=function(w){const O=Math.max(this.g.length,w.g.length),I=[];let R=0;for(let D=0;D<=O;D++){let $=R+(this.i(D)&65535)+(w.i(D)&65535),L=($>>>16)+(this.i(D)>>>16)+(w.i(D)>>>16);R=L>>>16,$&=65535,L&=65535,I[D]=L<<16|$}return new o(I,I[I.length-1]&-2147483648?-1:0)};function S(w,O){return w.add(x(O))}t.j=function(w){if(b(this)||b(w))return f;if(v(this))return v(w)?x(this).j(x(w)):x(x(this).j(w));if(v(w))return x(this.j(x(w)));if(this.l(g)<0&&w.l(g)<0)return u(this.m()*w.m());const O=this.g.length+w.g.length,I=[];for(var R=0;R<2*O;R++)I[R]=0;for(R=0;R<this.g.length;R++)for(let D=0;D<w.g.length;D++){const $=this.i(R)>>>16,L=this.i(R)&65535,ne=w.i(D)>>>16,ae=w.i(D)&65535;I[2*R+2*D]+=L*ae,E(I,2*R+2*D),I[2*R+2*D+1]+=$*ae,E(I,2*R+2*D+1),I[2*R+2*D+1]+=L*ne,E(I,2*R+2*D+1),I[2*R+2*D+2]+=$*ne,E(I,2*R+2*D+2)}for(w=0;w<O;w++)I[w]=I[2*w+1]<<16|I[2*w];for(w=O;w<2*O;w++)I[w]=0;return new o(I,0)};function E(w,O){for(;(w[O]&65535)!=w[O];)w[O+1]+=w[O]>>>16,w[O]&=65535,O++}function T(w,O){this.g=w,this.h=O}function j(w,O){if(b(O))throw Error("division by zero");if(b(w))return new T(f,f);if(v(w))return O=j(x(w),O),new T(x(O.g),x(O.h));if(v(O))return O=j(w,x(O)),new T(x(O.g),O.h);if(w.g.length>30){if(v(w)||v(O))throw Error("slowDivide_ only works with positive integers.");for(var I=m,R=O;R.l(w)<=0;)I=_(I),R=_(R);var D=P(I,1),$=P(R,1);for(R=P(R,2),I=P(I,2);!b(R);){var L=$.add(R);L.l(w)<=0&&(D=D.add(I),$=L),R=P(R,1),I=P(I,1)}return O=S(w,D.j(O)),new T(D,O)}for(D=f;w.l(O)>=0;){for(I=Math.max(1,Math.floor(w.m()/O.m())),R=Math.ceil(Math.log(I)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),$=u(I),L=$.j(O);v(L)||L.l(w)>0;)I-=R,$=u(I),L=$.j(O);b($)&&($=m),D=D.add($),w=S(w,L)}return new T(D,w)}t.B=function(w){return j(this,w).h},t.and=function(w){const O=Math.max(this.g.length,w.g.length),I=[];for(let R=0;R<O;R++)I[R]=this.i(R)&w.i(R);return new o(I,this.h&w.h)},t.or=function(w){const O=Math.max(this.g.length,w.g.length),I=[];for(let R=0;R<O;R++)I[R]=this.i(R)|w.i(R);return new o(I,this.h|w.h)},t.xor=function(w){const O=Math.max(this.g.length,w.g.length),I=[];for(let R=0;R<O;R++)I[R]=this.i(R)^w.i(R);return new o(I,this.h^w.h)};function _(w){const O=w.g.length+1,I=[];for(let R=0;R<O;R++)I[R]=w.i(R)<<1|w.i(R-1)>>>31;return new o(I,w.h)}function P(w,O){const I=O>>5;O%=32;const R=w.g.length-I,D=[];for(let $=0;$<R;$++)D[$]=O>0?w.i($+I)>>>O|w.i($+I+1)<<32-O:w.i($+I);return new o(D,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,mN=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=c,vs=o}).apply(typeof gT<"u"?gT:typeof self<"u"?self:typeof window<"u"?window:{});var rm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gN,sd,yN,zm,zx,vN,bN,xN;(function(){var t,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof rm=="object"&&rm];for(var k=0;k<h.length;++k){var N=h[k];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var r=n(this);function i(h,k){if(k)e:{var N=r;h=h.split(".");for(var V=0;V<h.length-1;V++){var oe=h[V];if(!(oe in N))break e;N=N[oe]}h=h[h.length-1],V=N[h],k=k(V),k!=V&&k!=null&&e(N,h,{configurable:!0,writable:!0,value:k})}}i("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(h){return h||function(k){var N=[],V;for(V in k)Object.prototype.hasOwnProperty.call(k,V)&&N.push([V,k[V]]);return N}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function s(h){var k=typeof h;return k=="object"&&h!=null||k=="function"}function l(h,k,N){return h.call.apply(h.bind,arguments)}function u(h,k,N){return u=l,u.apply(null,arguments)}function c(h,k){var N=Array.prototype.slice.call(arguments,1);return function(){var V=N.slice();return V.push.apply(V,arguments),h.apply(this,V)}}function f(h,k){function N(){}N.prototype=k.prototype,h.Z=k.prototype,h.prototype=new N,h.prototype.constructor=h,h.Ob=function(V,oe,le){for(var Ce=Array(arguments.length-2),it=2;it<arguments.length;it++)Ce[it-2]=arguments[it];return k.prototype[oe].apply(V,Ce)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function g(h){const k=h.length;if(k>0){const N=Array(k);for(let V=0;V<k;V++)N[V]=h[V];return N}return[]}function b(h,k){for(let V=1;V<arguments.length;V++){const oe=arguments[V];var N=typeof oe;if(N=N!="object"?N:oe?Array.isArray(oe)?"array":N:"null",N=="array"||N=="object"&&typeof oe.length=="number"){N=h.length||0;const le=oe.length||0;h.length=N+le;for(let Ce=0;Ce<le;Ce++)h[N+Ce]=oe[Ce]}else h.push(oe)}}class v{constructor(k,N){this.i=k,this.j=N,this.h=0,this.g=null}get(){let k;return this.h>0?(this.h--,k=this.g,this.g=k.next,k.next=null):k=this.i(),k}}function x(h){o.setTimeout(()=>{throw h},0)}function S(){var h=w;let k=null;return h.g&&(k=h.g,h.g=h.g.next,h.g||(h.h=null),k.next=null),k}class E{constructor(){this.h=this.g=null}add(k,N){const V=T.get();V.set(k,N),this.h?this.h.next=V:this.g=V,this.h=V}}var T=new v(()=>new j,h=>h.reset());class j{constructor(){this.next=this.g=this.h=null}set(k,N){this.h=k,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let _,P=!1,w=new E,O=()=>{const h=Promise.resolve(void 0);_=()=>{h.then(I)}};function I(){for(var h;h=S();){try{h.h.call(h.g)}catch(N){x(N)}var k=T;k.j(h),k.h<100&&(k.h++,h.next=k.g,k.g=h)}P=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(h,k){this.type=h,this.g=this.target=k,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var $=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var h=!1,k=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const N=()=>{};o.addEventListener("test",N,k),o.removeEventListener("test",N,k)}catch{}return h}();function L(h){return/^[\s\xa0]*$/.test(h)}function ne(h,k){D.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,k)}f(ne,D),ne.prototype.init=function(h,k){const N=this.type=h.type,V=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=k,k=h.relatedTarget,k||(N=="mouseover"?k=h.fromElement:N=="mouseout"&&(k=h.toElement)),this.relatedTarget=k,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ne.Z.h.call(this)},ne.prototype.h=function(){ne.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ae="closure_listenable_"+(Math.random()*1e6|0),ce=0;function me(h,k,N,V,oe){this.listener=h,this.proxy=null,this.src=k,this.type=N,this.capture=!!V,this.ha=oe,this.key=++ce,this.da=this.fa=!1}function X(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ie(h,k,N){for(const V in h)k.call(N,h[V],V,h)}function ge(h,k){for(const N in h)k.call(void 0,h[N],N,h)}function Te(h){const k={};for(const N in h)k[N]=h[N];return k}const be="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(h,k){let N,V;for(let oe=1;oe<arguments.length;oe++){V=arguments[oe];for(N in V)h[N]=V[N];for(let le=0;le<be.length;le++)N=be[le],Object.prototype.hasOwnProperty.call(V,N)&&(h[N]=V[N])}}function Se(h){this.src=h,this.g={},this.h=0}Se.prototype.add=function(h,k,N,V,oe){const le=h.toString();h=this.g[le],h||(h=this.g[le]=[],this.h++);const Ce=We(h,k,V,oe);return Ce>-1?(k=h[Ce],N||(k.fa=!1)):(k=new me(k,this.src,le,!!V,oe),k.fa=N,h.push(k)),k};function Ve(h,k){const N=k.type;if(N in h.g){var V=h.g[N],oe=Array.prototype.indexOf.call(V,k,void 0),le;(le=oe>=0)&&Array.prototype.splice.call(V,oe,1),le&&(X(k),h.g[N].length==0&&(delete h.g[N],h.h--))}}function We(h,k,N,V){for(let oe=0;oe<h.length;++oe){const le=h[oe];if(!le.da&&le.listener==k&&le.capture==!!N&&le.ha==V)return oe}return-1}var we="closure_lm_"+(Math.random()*1e6|0),Be={};function te(h,k,N,V,oe){if(Array.isArray(k)){for(let le=0;le<k.length;le++)te(h,k[le],N,V,oe);return null}return N=Gn(N),h&&h[ae]?h.J(k,N,s(V)?!!V.capture:!1,oe):$e(h,k,N,!1,V,oe)}function $e(h,k,N,V,oe,le){if(!k)throw Error("Invalid event type");const Ce=s(oe)?!!oe.capture:!!oe;let it=yt(h);if(it||(h[we]=it=new Se(h)),N=it.add(k,N,V,Ce,le),N.proxy)return N;if(V=Ue(),N.proxy=V,V.src=h,V.listener=N,h.addEventListener)$||(oe=Ce),oe===void 0&&(oe=!1),h.addEventListener(k.toString(),V,oe);else if(h.attachEvent)h.attachEvent(Ee(k.toString()),V);else if(h.addListener&&h.removeListener)h.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return N}function Ue(){function h(N){return k.call(h.src,h.listener,N)}const k=ct;return h}function se(h,k,N,V,oe){if(Array.isArray(k))for(var le=0;le<k.length;le++)se(h,k[le],N,V,oe);else V=s(V)?!!V.capture:!!V,N=Gn(N),h&&h[ae]?(h=h.i,le=String(k).toString(),le in h.g&&(k=h.g[le],N=We(k,N,V,oe),N>-1&&(X(k[N]),Array.prototype.splice.call(k,N,1),k.length==0&&(delete h.g[le],h.h--)))):h&&(h=yt(h))&&(k=h.g[k.toString()],h=-1,k&&(h=We(k,N,V,oe)),(N=h>-1?k[h]:null)&&ut(N))}function ut(h){if(typeof h!="number"&&h&&!h.da){var k=h.src;if(k&&k[ae])Ve(k.i,h);else{var N=h.type,V=h.proxy;k.removeEventListener?k.removeEventListener(N,V,h.capture):k.detachEvent?k.detachEvent(Ee(N),V):k.addListener&&k.removeListener&&k.removeListener(V),(N=yt(k))?(Ve(N,h),N.h==0&&(N.src=null,k[we]=null)):X(h)}}}function Ee(h){return h in Be?Be[h]:Be[h]="on"+h}function ct(h,k){if(h.da)h=!0;else{k=new ne(k,this);const N=h.listener,V=h.ha||h.src;h.fa&&ut(h),h=N.call(V,k)}return h}function yt(h){return h=h[we],h instanceof Se?h:null}var Ut="__closure_events_fn_"+(Math.random()*1e9>>>0);function Gn(h){return typeof h=="function"?h:(h[Ut]||(h[Ut]=function(k){return h.handleEvent(k)}),h[Ut])}function Ct(){R.call(this),this.i=new Se(this),this.M=this,this.G=null}f(Ct,R),Ct.prototype[ae]=!0,Ct.prototype.removeEventListener=function(h,k,N,V){se(this,h,k,N,V)};function Mt(h,k){var N,V=h.G;if(V)for(N=[];V;V=V.G)N.push(V);if(h=h.M,V=k.type||k,typeof k=="string")k=new D(k,h);else if(k instanceof D)k.target=k.target||h;else{var oe=k;k=new D(V,h),he(k,oe)}oe=!0;let le,Ce;if(N)for(Ce=N.length-1;Ce>=0;Ce--)le=k.g=N[Ce],oe=tt(le,V,!0,k)&&oe;if(le=k.g=h,oe=tt(le,V,!0,k)&&oe,oe=tt(le,V,!1,k)&&oe,N)for(Ce=0;Ce<N.length;Ce++)le=k.g=N[Ce],oe=tt(le,V,!1,k)&&oe}Ct.prototype.N=function(){if(Ct.Z.N.call(this),this.i){var h=this.i;for(const k in h.g){const N=h.g[k];for(let V=0;V<N.length;V++)X(N[V]);delete h.g[k],h.h--}}this.G=null},Ct.prototype.J=function(h,k,N,V){return this.i.add(String(h),k,!1,N,V)},Ct.prototype.K=function(h,k,N,V){return this.i.add(String(h),k,!0,N,V)};function tt(h,k,N,V){if(k=h.i.g[String(k)],!k)return!0;k=k.concat();let oe=!0;for(let le=0;le<k.length;++le){const Ce=k[le];if(Ce&&!Ce.da&&Ce.capture==N){const it=Ce.listener,an=Ce.ha||Ce.src;Ce.fa&&Ve(h.i,Ce),oe=it.call(an,V)!==!1&&oe}}return oe&&!V.defaultPrevented}function Ft(h,k){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=u(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(k)>2147483647?-1:o.setTimeout(h,k||0)}function bn(h){h.g=Ft(()=>{h.g=null,h.i&&(h.i=!1,bn(h))},h.l);const k=h.h;h.h=null,h.m.apply(null,k)}class Yr extends R{constructor(k,N){super(),this.m=k,this.l=N,this.h=null,this.i=!1,this.g=null}j(k){this.h=arguments,this.g?this.i=!0:bn(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zn(h){R.call(this),this.h=h,this.g={}}f(zn,R);var mi=[];function gi(h){ie(h.g,function(k,N){this.g.hasOwnProperty(N)&&ut(k)},h),h.g={}}zn.prototype.N=function(){zn.Z.N.call(this),gi(this)},zn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ha=o.JSON.stringify,Ga=o.JSON.parse,Us=class{stringify(h){return o.JSON.stringify(h,void 0)}parse(h){return o.JSON.parse(h,void 0)}};function Ya(){}function yi(){}var vi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Xa(){D.call(this,"d")}f(Xa,D);function jr(){D.call(this,"c")}f(jr,D);var Re={},pa=null;function wr(){return pa=pa||new Ct}Re.Ia="serverreachability";function Qe(h){D.call(this,Re.Ia,h)}f(Qe,D);function xe(h){const k=wr();Mt(k,new Qe(k))}Re.STAT_EVENT="statevent";function Ye(h,k){D.call(this,Re.STAT_EVENT,h),this.stat=k}f(Ye,D);function Je(h){const k=wr();Mt(k,new Ye(k,h))}Re.Ja="timingevent";function xn(h,k){D.call(this,Re.Ja,h),this.size=k}f(xn,D);function lt(h,k){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){h()},k)}function zi(){this.g=!0}zi.prototype.ua=function(){this.g=!1};function wf(h,k,N,V,oe,le){h.info(function(){if(h.g)if(le){var Ce="",it=le.split("&");for(let Et=0;Et<it.length;Et++){var an=it[Et].split("=");if(an.length>1){const _n=an[0];an=an[1];const $r=_n.split("_");Ce=$r.length>=2&&$r[1]=="type"?Ce+(_n+"="+an+"&"):Ce+(_n+"=redacted&")}}}else Ce=null;else Ce=le;return"XMLHTTP REQ ("+V+") [attempt "+oe+"]: "+k+`
`+N+`
`+Ce})}function _f(h,k,N,V,oe,le,Ce){h.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+oe+"]: "+k+`
`+N+`
`+le+" "+Ce})}function Yn(h,k,N,V){h.info(function(){return"XMLHTTP TEXT ("+k+"): "+Sf(h,N)+(V?" "+V:"")})}function bi(h,k){h.info(function(){return"TIMEOUT: "+k})}zi.prototype.info=function(){};function Sf(h,k){if(!h.g)return k;if(!k)return null;try{const le=JSON.parse(k);if(le){for(h=0;h<le.length;h++)if(Array.isArray(le[h])){var N=le[h];if(!(N.length<2)){var V=N[1];if(Array.isArray(V)&&!(V.length<1)){var oe=V[0];if(oe!="noop"&&oe!="stop"&&oe!="close")for(let Ce=1;Ce<V.length;Ce++)V[Ce]=""}}}}return Ha(le)}catch{return k}}var Qa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},zt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},mn;function Ef(){}f(Ef,Ya),Ef.prototype.g=function(){return new XMLHttpRequest},mn=new Ef;function ma(h){return encodeURIComponent(String(h))}function iu(h){var k=1;h=h.split(":");const N=[];for(;k>0&&h.length;)N.push(h.shift()),k--;return h.length&&N.push(h.join(":")),N}function Xr(h,k,N,V){this.j=h,this.i=k,this.l=N,this.S=V||1,this.V=new zn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Sp}function Sp(){this.i=null,this.g="",this.h=!1}var Vi={},ga={};function xi(h,k,N){h.M=1,h.A=va(Jr(k)),h.u=N,h.R=!0,Ws(h,null)}function Ws(h,k){h.F=Date.now(),wi(h),h.B=Jr(h.A);var N=h.B,V=h.S;Array.isArray(V)||(V=[String(V)]),kp(N.i,"t",V),h.C=0,N=h.j.L,h.h=new Sp,h.g=Uo(h.j,N?k:null,!h.u),h.P>0&&(h.O=new Yr(u(h.Y,h,h.g),h.P)),k=h.V,N=h.g,V=h.ba;var oe="readystatechange";Array.isArray(oe)||(oe&&(mi[0]=oe.toString()),oe=mi);for(let le=0;le<oe.length;le++){const Ce=te(N,oe[le],V||k.handleEvent,!1,k.h||k);if(!Ce)break;k.g[Ce.key]=Ce}k=h.J?Te(h.J):{},h.u?(h.v||(h.v="POST"),k["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,k)):(h.v="GET",h.g.ea(h.B,h.v,null,k)),xe(),wf(h.i,h.v,h.B,h.l,h.S,h.u)}Xr.prototype.ba=function(h){h=h.target;const k=this.O;k&&Rr(h)==3?k.j():this.Y(h)},Xr.prototype.Y=function(h){try{if(h==this.g)e:{const it=Rr(this.g),an=this.g.ya(),Et=this.g.ca();if(!(it<3)&&(it!=3||this.g&&(this.h.h||this.g.la()||Np(this.g)))){this.K||it!=4||an==7||(an==8||Et<=0?xe(3):xe(2)),qs(this);var k=this.g.ca();this.X=k;var N=h0(this);if(this.o=k==200,_f(this.i,this.v,this.B,this.l,this.S,it,k),this.o){if(this.U&&!this.L){t:{if(this.g){var V,oe=this.g;if((V=oe.g?oe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(V)){var le=V;break t}}le=null}if(h=le)Yn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Qr(this,h);else{this.o=!1,this.m=3,Je(12),_r(this),Vt(this);break e}}if(this.R){h=!0;let _n;for(;!this.K&&this.C<N.length;)if(_n=Ep(this,N),_n==ga){it==4&&(this.m=4,Je(14),h=!1),Yn(this.i,this.l,null,"[Incomplete Response]");break}else if(_n==Vi){this.m=4,Je(15),Yn(this.i,this.l,N,"[Invalid Chunk]"),h=!1;break}else Yn(this.i,this.l,_n,null),Qr(this,_n);if(Bi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),it!=4||N.length!=0||this.h.h||(this.m=1,Je(16),h=!1),this.o=this.o&&h,!h)Yn(this.i,this.l,N,"[Invalid Chunked Response]"),_r(this),Vt(this);else if(N.length>0&&!this.W){this.W=!0;var Ce=this.j;Ce.g==this&&Ce.aa&&!Ce.P&&(Ce.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),hu(Ce),Ce.P=!0,Je(11))}}else Yn(this.i,this.l,N,null),Qr(this,N);it==4&&_r(this),this.o&&!this.K&&(it==4?pu(this.j,this):(this.o=!1,wi(this)))}else p0(this.g),k==400&&N.indexOf("Unknown SID")>0?(this.m=3,Je(12)):(this.m=0,Je(13)),_r(this),Vt(this)}}}catch{}finally{}};function h0(h){if(!Bi(h))return h.g.la();const k=Np(h.g);if(k==="")return"";let N="";const V=k.length,oe=Rr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return _r(h),Vt(h),"";h.h.i=new o.TextDecoder}for(let le=0;le<V;le++)h.h.h=!0,N+=h.h.i.decode(k[le],{stream:!(oe&&le==V-1)});return k.length=0,h.h.g+=N,h.C=0,h.h.g}function Bi(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ep(h,k){var N=h.C,V=k.indexOf(`
`,N);return V==-1?ga:(N=Number(k.substring(N,V)),isNaN(N)?Vi:(V+=1,V+N>k.length?ga:(k=k.slice(V,V+N),h.C=V+N,k)))}Xr.prototype.cancel=function(){this.K=!0,_r(this)};function wi(h){h.T=Date.now()+h.H,Af(h,h.H)}function Af(h,k){if(h.D!=null)throw Error("WatchDog timer not null");h.D=lt(u(h.aa,h),k)}function qs(h){h.D&&(o.clearTimeout(h.D),h.D=null)}Xr.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(bi(this.i,this.B),this.M!=2&&(xe(),Je(17)),_r(this),this.m=2,Vt(this)):Af(this,this.T-h)};function Vt(h){h.j.I==0||h.K||pu(h.j,h)}function _r(h){qs(h);var k=h.O;k&&typeof k.dispose=="function"&&k.dispose(),h.O=null,gi(h.V),h.g&&(k=h.g,h.g=null,k.abort(),k.dispose())}function Qr(h,k){try{var N=h.j;if(N.I!=0&&(N.g==h||Hs(N.h,h))){if(!h.L&&Hs(N.h,h)&&N.I==3){try{var V=N.Ba.g.parse(k)}catch{V=null}if(Array.isArray(V)&&V.length==3){var oe=V;if(oe[0]==0){e:if(!N.v){if(N.g)if(N.g.F+3e3<h.F)Ki(N),cu(N);else break e;Bo(N),Je(18)}}else N.xa=oe[1],0<N.xa-N.K&&oe[2]<37500&&N.F&&N.A==0&&!N.C&&(N.C=lt(u(N.Va,N),6e3));au(N.h)<=1&&N.ta&&(N.ta=void 0)}else Hi(N,11)}else if((h.L||N.g==h)&&Ki(N),!L(k))for(oe=N.Ba.g.parse(k),k=0;k<oe.length;k++){let Et=oe[k];const _n=Et[0];if(!(_n<=N.K))if(N.K=_n,Et=Et[1],N.I==2)if(Et[0]=="c"){N.M=Et[1],N.ba=Et[2];const $r=Et[3];$r!=null&&(N.ka=$r,N.j.info("VER="+N.ka));const Yi=Et[4];Yi!=null&&(N.za=Yi,N.j.info("SVER="+N.za));const _a=Et[5];_a!=null&&typeof _a=="number"&&_a>0&&(V=1.5*_a,N.O=V,N.j.info("backChannelRequestTimeoutMs_="+V)),V=N;const Xi=h.g;if(Xi){const yu=Xi.g?Xi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yu){var le=V.h;le.g||yu.indexOf("spdy")==-1&&yu.indexOf("quic")==-1&&yu.indexOf("h2")==-1||(le.j=le.l,le.g=new Set,le.h&&(Ui(le,le.h),le.h=null))}if(V.G){const vu=Xi.g?Xi.g.getResponseHeader("X-HTTP-Session-Id"):null;vu&&(V.wa=vu,Tt(V.J,V.G,vu))}}N.I=3,N.l&&N.l.ra(),N.aa&&(N.T=Date.now()-h.F,N.j.info("Handshake RTT: "+N.T+"ms")),V=N;var Ce=h;if(V.na=In(V,V.L?V.ba:null,V.W),Ce.L){Tf(V.h,Ce);var it=Ce,an=V.O;an&&(it.H=an),it.D&&(qs(it),wi(it)),V.g=Ce}else el(V);N.i.length>0&&fu(N)}else Et[0]!="stop"&&Et[0]!="close"||Hi(N,7);else N.I==3&&(Et[0]=="stop"||Et[0]=="close"?Et[0]=="stop"?Hi(N,7):Js(N):Et[0]!="noop"&&N.l&&N.l.qa(Et),N.A=0)}}xe(4)}catch{}}var Ap=class{constructor(h,k){this.g=h,this.map=k}};function Ja(h){this.l=h||10,o.PerformanceNavigationTiming?(h=o.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ks(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function au(h){return h.h?1:h.g?h.g.size:0}function Hs(h,k){return h.h?h.h==k:h.g?h.g.has(k):!1}function Ui(h,k){h.g?h.g.add(k):h.h=k}function Tf(h,k){h.h&&h.h==k?h.h=null:h.g&&h.g.has(k)&&h.g.delete(k)}Ja.prototype.cancel=function(){if(this.i=Gs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Gs(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let k=h.i;for(const N of h.g.values())k=k.concat(N.G);return k}return g(h.i)}var Pf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dt(h,k){if(h){h=h.split("&");for(let N=0;N<h.length;N++){const V=h[N].indexOf("=");let oe,le=null;V>=0?(oe=h[N].substring(0,V),le=h[N].substring(V+1)):oe=h[N],k(oe,le?decodeURIComponent(le.replace(/\+/g," ")):"")}}}function Wi(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let k;h instanceof Wi?(this.l=h.l,ya(this,h.j),this.o=h.o,this.g=h.g,$o(this,h.u),this.h=h.h,It(this,ar(h.i)),this.m=h.m):h&&(k=String(h).match(Pf))?(this.l=!1,ya(this,k[1]||"",!0),this.o=_i(k[2]||""),this.g=_i(k[3]||"",!0),$o(this,k[4]),this.h=_i(k[5]||"",!0),It(this,k[6]||"",!0),this.m=_i(k[7]||"")):(this.l=!1,this.i=new Lo(null,this.l))}Wi.prototype.toString=function(){const h=[];var k=this.j;k&&h.push(Za(k,Ys,!0),":");var N=this.g;return(N||k=="file")&&(h.push("//"),(k=this.o)&&h.push(Za(k,Ys,!0),"@"),h.push(ma(N).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.u,N!=null&&h.push(":",String(N))),(N=this.h)&&(this.g&&N.charAt(0)!="/"&&h.push("/"),h.push(Za(N,N.charAt(0)=="/"?ou:Tp,!0))),(N=this.i.toString())&&h.push("?",N),(N=this.m)&&h.push("#",Za(N,Xs)),h.join("")},Wi.prototype.resolve=function(h){const k=Jr(this);let N=!!h.j;N?ya(k,h.j):N=!!h.o,N?k.o=h.o:N=!!h.g,N?k.g=h.g:N=h.u!=null;var V=h.h;if(N)$o(k,h.u);else if(N=!!h.h){if(V.charAt(0)!="/")if(this.g&&!this.h)V="/"+V;else{var oe=k.h.lastIndexOf("/");oe!=-1&&(V=k.h.slice(0,oe+1)+V)}if(oe=V,oe==".."||oe==".")V="";else if(oe.indexOf("./")!=-1||oe.indexOf("/.")!=-1){V=oe.lastIndexOf("/",0)==0,oe=oe.split("/");const le=[];for(let Ce=0;Ce<oe.length;){const it=oe[Ce++];it=="."?V&&Ce==oe.length&&le.push(""):it==".."?((le.length>1||le.length==1&&le[0]!="")&&le.pop(),V&&Ce==oe.length&&le.push("")):(le.push(it),V=!0)}V=le.join("/")}else V=oe}return N?k.h=V:N=h.i.toString()!=="",N?It(k,ar(h.i)):N=!!h.m,N&&(k.m=h.m),k};function Jr(h){return new Wi(h)}function ya(h,k,N){h.j=N?_i(k,!0):k,h.j&&(h.j=h.j.replace(/:$/,""))}function $o(h,k){if(k){if(k=Number(k),isNaN(k)||k<0)throw Error("Bad port number "+k);h.u=k}else h.u=null}function It(h,k,N){k instanceof Lo?(h.i=k,su(h.i,h.l)):(N||(k=Za(k,Pp)),h.i=new Lo(k,h.l))}function Tt(h,k,N){h.i.set(k,N)}function va(h){return Tt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function _i(h,k){return h?k?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Za(h,k,N){return typeof h=="string"?(h=encodeURI(h).replace(k,Of),N&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Of(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ys=/[#\/\?@]/g,Tp=/[#\?:]/g,ou=/[#\?]/g,Pp=/[#\?@]/g,Xs=/#/g;function Lo(h,k){this.h=this.g=null,this.i=h||null,this.j=!!k}function eo(h){h.g||(h.g=new Map,h.h=0,h.i&&dt(h.i,function(k,N){h.add(decodeURIComponent(k.replace(/\+/g," ")),N)}))}t=Lo.prototype,t.add=function(h,k){eo(this),this.i=null,h=Zr(this,h);let N=this.g.get(h);return N||this.g.set(h,N=[]),N.push(k),this.h+=1,this};function vt(h,k){eo(h),k=Zr(h,k),h.g.has(k)&&(h.i=null,h.h-=h.g.get(k).length,h.g.delete(k))}function kf(h,k){return eo(h),k=Zr(h,k),h.g.has(k)}t.forEach=function(h,k){eo(this),this.g.forEach(function(N,V){N.forEach(function(oe){h.call(k,oe,V,this)},this)},this)};function Op(h,k){eo(h);let N=[];if(typeof k=="string")kf(h,k)&&(N=N.concat(h.g.get(Zr(h,k))));else for(h=Array.from(h.g.values()),k=0;k<h.length;k++)N=N.concat(h[k]);return N}t.set=function(h,k){return eo(this),this.i=null,h=Zr(this,h),kf(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[k]),this.h+=1,this},t.get=function(h,k){return h?(h=Op(this,h),h.length>0?String(h[0]):k):k};function kp(h,k,N){vt(h,k),N.length>0&&(h.i=null,h.g.set(Zr(h,k),g(N)),h.h+=N.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],k=Array.from(this.g.keys());for(let V=0;V<k.length;V++){var N=k[V];const oe=ma(N);N=Op(this,N);for(let le=0;le<N.length;le++){let Ce=oe;N[le]!==""&&(Ce+="="+ma(N[le])),h.push(Ce)}}return this.i=h.join("&")};function ar(h){const k=new Lo;return k.i=h.i,h.g&&(k.g=new Map(h.g),k.h=h.h),k}function Zr(h,k){return k=String(k),h.j&&(k=k.toLowerCase()),k}function su(h,k){k&&!h.j&&(eo(h),h.i=null,h.g.forEach(function(N,V){const oe=V.toLowerCase();V!=oe&&(vt(this,V),kp(this,oe,N))},h)),h.j=k}function ba(h,k){const N=new zi;if(o.Image){const V=new Image;V.onload=c(qi,N,"TestLoadImage: loaded",!0,k,V),V.onerror=c(qi,N,"TestLoadImage: error",!1,k,V),V.onabort=c(qi,N,"TestLoadImage: abort",!1,k,V),V.ontimeout=c(qi,N,"TestLoadImage: timeout",!1,k,V),o.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=h}else k(!1)}function Cp(h,k){const N=new zi,V=new AbortController,oe=setTimeout(()=>{V.abort(),qi(N,"TestPingServer: timeout",!1,k)},1e4);fetch(h,{signal:V.signal}).then(le=>{clearTimeout(oe),le.ok?qi(N,"TestPingServer: ok",!0,k):qi(N,"TestPingServer: server error",!1,k)}).catch(()=>{clearTimeout(oe),qi(N,"TestPingServer: error",!1,k)})}function qi(h,k,N,V,oe){try{oe&&(oe.onload=null,oe.onerror=null,oe.onabort=null,oe.ontimeout=null),V(N)}catch{}}function wn(){this.g=new Us}function Nr(h){this.i=h.Sb||null,this.h=h.ab||!1}f(Nr,Ya),Nr.prototype.g=function(){return new xa(this.i,this.h)};function xa(h,k){Ct.call(this),this.H=h,this.o=k,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(xa,Ct),t=xa.prototype,t.open=function(h,k){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=k,this.readyState=1,Dr(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const k={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(k.body=h),(this.H||o).fetch(new Request(this.D,k)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,to(this)),this.readyState=0},t.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Dr(this)),this.g&&(this.readyState=3,Dr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Fo(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Fo(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}t.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var k=h.value?h.value:new Uint8Array(0);(k=this.B.decode(k,{stream:!h.done}))&&(this.response=this.responseText+=k)}h.done?to(this):Dr(this),this.readyState==3&&Fo(this)}},t.Oa=function(h){this.g&&(this.response=this.responseText=h,to(this))},t.Na=function(h){this.g&&(this.response=h,to(this))},t.ga=function(){this.g&&to(this)};function to(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Dr(h)}t.setRequestHeader=function(h,k){this.A.append(h,k)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],k=this.h.entries();for(var N=k.next();!N.done;)N=N.value,h.push(N[0]+": "+N[1]),N=k.next();return h.join(`\r
`)};function Dr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(xa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ip(h){let k="";return ie(h,function(N,V){k+=V,k+=":",k+=N,k+=`\r
`}),k}function Mr(h,k,N){e:{for(V in N){var V=!1;break e}V=!0}V||(N=Ip(N),typeof h=="string"?N!=null&&ma(N):Tt(h,k,N))}function Wt(h){Ct.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Wt,Ct);var jp=/^https?$/i,Cf=["POST","PUT"];t=Wt.prototype,t.Fa=function(h){this.H=h},t.ea=function(h,k,N,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);k=k?k.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():mn.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(k,String(h),!0),this.B=!1}catch(le){zo(this,le);return}if(h=N||"",N=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var oe in V)N.set(oe,V[oe]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const le of V.keys())N.set(le,V.get(le));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(N.keys()).find(le=>le.toLowerCase()=="content-type"),oe=o.FormData&&h instanceof o.FormData,!(Array.prototype.indexOf.call(Cf,k,void 0)>=0)||V||oe||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[le,Ce]of N)this.g.setRequestHeader(le,Ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(le){zo(this,le)}};function zo(h,k){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=k,h.o=5,lu(h),uu(h)}function lu(h){h.A||(h.A=!0,Mt(h,"complete"),Mt(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Mt(this,"complete"),Mt(this,"abort"),uu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),uu(this,!0)),Wt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?If(this):this.Xa())},t.Xa=function(){If(this)};function If(h){if(h.h&&typeof a<"u"){if(h.v&&Rr(h)==4)setTimeout(h.Ca.bind(h),0);else if(Mt(h,"readystatechange"),Rr(h)==4){h.h=!1;try{const le=h.ca();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var k=!0;break e;default:k=!1}var N;if(!(N=k)){var V;if(V=le===0){let Ce=String(h.D).match(Pf)[1]||null;!Ce&&o.self&&o.self.location&&(Ce=o.self.location.protocol.slice(0,-1)),V=!jp.test(Ce?Ce.toLowerCase():"")}N=V}if(N)Mt(h,"complete"),Mt(h,"success");else{h.o=6;try{var oe=Rr(h)>2?h.g.statusText:""}catch{oe=""}h.l=oe+" ["+h.ca()+"]",lu(h)}}finally{uu(h)}}}}function uu(h,k){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const N=h.g;h.g=null,k||Mt(h,"ready");try{N.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Rr(h){return h.g?h.g.readyState:0}t.ca=function(){try{return Rr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(h){if(this.g){var k=this.g.responseText;return h&&k.indexOf(h)==0&&(k=k.substring(h.length)),Ga(k)}};function Np(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function p0(h){const k={};h=(h.g&&Rr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<h.length;V++){if(L(h[V]))continue;var N=iu(h[V]);const oe=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const le=k[oe]||[];k[oe]=le,le.push(N)}ge(k,function(V){return V.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wa(h,k,N){return N&&N.internalChannelParams&&N.internalChannelParams[h]||k}function Qs(h){this.za=0,this.i=[],this.j=new zi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wa("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wa("baseRetryDelayMs",5e3,h),this.Za=wa("retryDelaySeedMs",1e4,h),this.Ta=wa("forwardChannelMaxRetries",2,h),this.va=wa("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Ja(h&&h.concurrentRequestLimit),this.Ba=new wn,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Qs.prototype,t.ka=8,t.I=1,t.connect=function(h,k,N,V){Je(0),this.W=h,this.H=k||{},N&&V!==void 0&&(this.H.OSID=N,this.H.OAID=V),this.F=this.X,this.J=In(this,null,this.W),fu(this)};function Js(h){if(Dp(h),h.I==3){var k=h.V++,N=Jr(h.J);if(Tt(N,"SID",h.M),Tt(N,"RID",k),Tt(N,"TYPE","terminate"),Vo(h,N),k=new Xr(h,h.j,k),k.M=2,k.A=va(Jr(N)),N=!1,o.navigator&&o.navigator.sendBeacon)try{N=o.navigator.sendBeacon(k.A.toString(),"")}catch{}!N&&o.Image&&(new Image().src=k.A,N=!0),N||(k.g=Uo(k.j,null),k.g.ea(k.A)),k.F=Date.now(),wi(k)}gu(h)}function cu(h){h.g&&(hu(h),h.g.cancel(),h.g=null)}function Dp(h){cu(h),h.v&&(o.clearTimeout(h.v),h.v=null),Ki(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&o.clearTimeout(h.m),h.m=null)}function fu(h){if(!Ks(h.h)&&!h.m){h.m=!0;var k=h.Ea;_||O(),P||(_(),P=!0),w.add(k,h),h.D=0}}function jf(h,k){return au(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=k.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=lt(u(h.Ea,h,k),mu(h,h.D)),h.D++,!0)}t.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const oe=new Xr(this,this.j,h);let le=this.o;if(this.U&&(le?(le=Te(le),he(le,this.U)):le=this.U),this.u!==null||this.R||(oe.J=le,le=null),this.S)e:{for(var k=0,N=0;N<this.i.length;N++){t:{var V=this.i[N];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(k+=V,k>4096){k=N;break e}if(k===4096||N===this.i.length-1){k=N+1;break e}}k=1e3}else k=1e3;k=Zs(this,oe,k),N=Jr(this.J),Tt(N,"RID",h),Tt(N,"CVER",22),this.G&&Tt(N,"X-HTTP-Session-Id",this.G),Vo(this,N),le&&(this.R?k="headers="+ma(Ip(le))+"&"+k:this.u&&Mr(N,this.u,le)),Ui(this.h,oe),this.Ra&&Tt(N,"TYPE","init"),this.S?(Tt(N,"$req",k),Tt(N,"SID","null"),oe.U=!0,xi(oe,N,null)):xi(oe,N,k),this.I=2}}else this.I==3&&(h?du(this,h):this.i.length==0||Ks(this.h)||du(this))};function du(h,k){var N;k?N=k.l:N=h.V++;const V=Jr(h.J);Tt(V,"SID",h.M),Tt(V,"RID",N),Tt(V,"AID",h.K),Vo(h,V),h.u&&h.o&&Mr(V,h.u,h.o),N=new Xr(h,h.j,N,h.D+1),h.u===null&&(N.J=h.o),k&&(h.i=k.G.concat(h.i)),k=Zs(h,N,1e3),N.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Ui(h.h,N),xi(N,V,k)}function Vo(h,k){h.H&&ie(h.H,function(N,V){Tt(k,V,N)}),h.l&&ie({},function(N,V){Tt(k,V,N)})}function Zs(h,k,N){N=Math.min(h.i.length,N);const V=h.l?u(h.l.Ka,h.l,h):null;e:{var oe=h.i;let it=-1;for(;;){const an=["count="+N];it==-1?N>0?(it=oe[0].g,an.push("ofs="+it)):it=0:an.push("ofs="+it);let Et=!0;for(let _n=0;_n<N;_n++){var le=oe[_n].g;const $r=oe[_n].map;if(le-=it,le<0)it=Math.max(0,oe[_n].g-100),Et=!1;else try{le="req"+le+"_"||"";try{var Ce=$r instanceof Map?$r:Object.entries($r);for(const[Yi,_a]of Ce){let Xi=_a;s(_a)&&(Xi=Ha(_a)),an.push(le+Yi+"="+encodeURIComponent(Xi))}}catch(Yi){throw an.push(le+"type="+encodeURIComponent("_badmap")),Yi}}catch{V&&V($r)}}if(Et){Ce=an.join("&");break e}}Ce=void 0}return h=h.i.splice(0,N),k.G=h,Ce}function el(h){if(!h.g&&!h.v){h.Y=1;var k=h.Da;_||O(),P||(_(),P=!0),w.add(k,h),h.A=0}}function Bo(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=lt(u(h.Da,h),mu(h,h.A)),h.A++,!0)}t.Da=function(){if(this.v=null,Mp(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=lt(u(this.Wa,this),h)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Je(10),cu(this),Mp(this))};function hu(h){h.B!=null&&(o.clearTimeout(h.B),h.B=null)}function Mp(h){h.g=new Xr(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var k=Jr(h.na);Tt(k,"RID","rpc"),Tt(k,"SID",h.M),Tt(k,"AID",h.K),Tt(k,"CI",h.F?"0":"1"),!h.F&&h.ia&&Tt(k,"TO",h.ia),Tt(k,"TYPE","xmlhttp"),Vo(h,k),h.u&&h.o&&Mr(k,h.u,h.o),h.O&&(h.g.H=h.O);var N=h.g;h=h.ba,N.M=1,N.A=va(Jr(k)),N.u=null,N.R=!0,Ws(N,h)}t.Va=function(){this.C!=null&&(this.C=null,cu(this),Bo(this),Je(19))};function Ki(h){h.C!=null&&(o.clearTimeout(h.C),h.C=null)}function pu(h,k){var N=null;if(h.g==k){Ki(h),hu(h),h.g=null;var V=2}else if(Hs(h.h,k))N=k.G,Tf(h.h,k),V=1;else return;if(h.I!=0){if(k.o)if(V==1){N=k.u?k.u.length:0,k=Date.now()-k.F;var oe=h.D;V=wr(),Mt(V,new xn(V,N)),fu(h)}else el(h);else if(oe=k.m,oe==3||oe==0&&k.X>0||!(V==1&&jf(h,k)||V==2&&Bo(h)))switch(N&&N.length>0&&(k=h.h,k.i=k.i.concat(N)),oe){case 1:Hi(h,5);break;case 4:Hi(h,10);break;case 3:Hi(h,6);break;default:Hi(h,2)}}}function mu(h,k){let N=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(N*=2),N*k}function Hi(h,k){if(h.j.info("Error code "+k),k==2){var N=u(h.bb,h),V=h.Ua;const oe=!V;V=new Wi(V||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ya(V,"https"),va(V),oe?ba(V.toString(),N):Cp(V.toString(),N)}else Je(2);h.I=0,h.l&&h.l.pa(k),gu(h),Dp(h)}t.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Je(2)):(this.j.info("Failed to ping google.com"),Je(1))};function gu(h){if(h.I=0,h.ja=[],h.l){const k=Gs(h.h);(k.length!=0||h.i.length!=0)&&(b(h.ja,k),b(h.ja,h.i),h.h.i.length=0,g(h.i),h.i.length=0),h.l.oa()}}function In(h,k,N){var V=N instanceof Wi?Jr(N):new Wi(N);if(V.g!="")k&&(V.g=k+"."+V.g),$o(V,V.u);else{var oe=o.location;V=oe.protocol,k=k?k+"."+oe.hostname:oe.hostname,oe=+oe.port;const le=new Wi(null);V&&ya(le,V),k&&(le.g=k),oe&&$o(le,oe),N&&(le.h=N),V=le}return N=h.G,k=h.wa,N&&k&&Tt(V,N,k),Tt(V,"VER",h.ka),Vo(h,V),V}function Uo(h,k,N){if(k&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return k=h.Aa&&!h.ma?new Wt(new Nr({ab:N})):new Wt(h.ma),k.Fa(h.L),k}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wo(){}t=Wo.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function tl(){}tl.prototype.g=function(h,k){return new Vn(h,k)};function Vn(h,k){Ct.call(this),this.g=new Qs(k),this.l=h,this.h=k&&k.messageUrlParams||null,h=k&&k.messageHeaders||null,k&&k.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=k&&k.initMessageHeaders||null,k&&k.messageContentType&&(h?h["X-WebChannel-Content-Type"]=k.messageContentType:h={"X-WebChannel-Content-Type":k.messageContentType}),k&&k.sa&&(h?h["X-WebChannel-Client-Profile"]=k.sa:h={"X-WebChannel-Client-Profile":k.sa}),this.g.U=h,(h=k&&k.Qb)&&!L(h)&&(this.g.u=h),this.A=k&&k.supportsCrossDomainXhr||!1,this.v=k&&k.sendRawJson||!1,(k=k&&k.httpSessionIdParam)&&!L(k)&&(this.g.G=k,h=this.h,h!==null&&k in h&&(h=this.h,k in h&&delete h[k])),this.j=new Gi(this)}f(Vn,Ct),Vn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Vn.prototype.close=function(){Js(this.g)},Vn.prototype.o=function(h){var k=this.g;if(typeof h=="string"){var N={};N.__data__=h,h=N}else this.v&&(N={},N.__data__=Ha(h),h=N);k.i.push(new Ap(k.Ya++,h)),k.I==3&&fu(k)},Vn.prototype.N=function(){this.g.l=null,delete this.j,Js(this.g),delete this.g,Vn.Z.N.call(this)};function Nf(h){Xa.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var k=h.__sm__;if(k){e:{for(const N in k){h=N;break e}h=void 0}(this.i=h)&&(h=this.i,k=k!==null&&h in k?k[h]:void 0),this.data=k}else this.data=h}f(Nf,Xa);function Df(){jr.call(this),this.status=1}f(Df,jr);function Gi(h){this.g=h}f(Gi,Wo),Gi.prototype.ra=function(){Mt(this.g,"a")},Gi.prototype.qa=function(h){Mt(this.g,new Nf(h))},Gi.prototype.pa=function(h){Mt(this.g,new Df)},Gi.prototype.oa=function(){Mt(this.g,"b")},tl.prototype.createWebChannel=tl.prototype.g,Vn.prototype.send=Vn.prototype.o,Vn.prototype.open=Vn.prototype.m,Vn.prototype.close=Vn.prototype.close,xN=function(){return new tl},bN=function(){return wr()},vN=Re,zx={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Qa.NO_ERROR=0,Qa.TIMEOUT=8,Qa.HTTP_ERROR=6,zm=Qa,zt.COMPLETE="complete",yN=zt,yi.EventType=vi,vi.OPEN="a",vi.CLOSE="b",vi.ERROR="c",vi.MESSAGE="d",Ct.prototype.listen=Ct.prototype.J,sd=yi,Wt.prototype.listenOnce=Wt.prototype.K,Wt.prototype.getLastError=Wt.prototype.Ha,Wt.prototype.getLastErrorCode=Wt.prototype.ya,Wt.prototype.getStatus=Wt.prototype.ca,Wt.prototype.getResponseJson=Wt.prototype.La,Wt.prototype.getResponseText=Wt.prototype.la,Wt.prototype.send=Wt.prototype.ea,Wt.prototype.setWithCredentials=Wt.prototype.Fa,gN=Wt}).apply(typeof rm<"u"?rm:typeof self<"u"?self:typeof window<"u"?window:{});const yT="@firebase/firestore",vT="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hr=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};hr.UNAUTHENTICATED=new hr(null),hr.GOOGLE_CREDENTIALS=new hr("google-credentials-uid"),hr.FIRST_PARTY=new hr("first-party-uid"),hr.MOCK_USER=new hr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl=new O1("@firebase/firestore");function Tu(){return Fl.logLevel}function Le(t,...e){if(Fl.logLevel<=pt.DEBUG){const n=e.map(D1);Fl.debug(`Firestore (${Jc}): ${t}`,...n)}}function Ao(t,...e){if(Fl.logLevel<=pt.ERROR){const n=e.map(D1);Fl.error(`Firestore (${Jc}): ${t}`,...n)}}function mc(t,...e){if(Fl.logLevel<=pt.WARN){const n=e.map(D1);Fl.warn(`Firestore (${Jc}): ${t}`,...n)}}function D1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,wN(t,r,n)}function wN(t,e,n){let r=`FIRESTORE (${Jc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ao(r),new Error(r)}function kt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||wN(e,i,r)}function rt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends No{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(hr.UNAUTHENTICATED))}shutdown(){}}class QV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class JV{constructor(e){this.t=e,this.currentUser=hr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){kt(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let a=new bs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new bs,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=a;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},s=l=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>s(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?s(l):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new bs)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(kt(typeof r.accessToken=="string",31837,{l:r}),new _N(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return kt(e===null||typeof e=="string",2055,{h:e}),new hr(e)}}class ZV{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=hr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class e6{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new ZV(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(hr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class t6{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ka(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){kt(this.o===void 0,3512);const r=a=>{a.error!=null&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,Le("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new bT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(kt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new bT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=n6(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function mt(t,e){return t<e?-1:t>e?1:0}function Vx(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),a=e.charAt(r);if(i!==a)return J0(i)===J0(a)?mt(i,a):J0(i)?1:-1}return mt(t.length,e.length)}const r6=55296,i6=57343;function J0(t){const e=t.charCodeAt(0);return e>=r6&&e<=i6}function gc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT="__name__";class Pa{constructor(e,n,r){n===void 0?n=0:n>e.length&&Xe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Xe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Pa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Pa?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=Pa.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return mt(e.length,n.length)}static compareSegments(e,n){const r=Pa.isNumericId(e),i=Pa.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Pa.extractNumericId(e).compare(Pa.extractNumericId(n)):Vx(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vs.fromString(e.substring(4,e.length-2))}}class Kt extends Pa{construct(e,n,r){return new Kt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(ye.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Kt(n)}static emptyPath(){return new Kt([])}}const a6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class er extends Pa{construct(e,n,r){return new er(e,n,r)}static isValidIdentifier(e){return a6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),er.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xT}static keyField(){return new er([xT])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Me(ye.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const s=e[i];if(s==="\\"){if(i+1===e.length)throw new Me(ye.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Me(ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else s==="`"?(o=!o,i++):s!=="."||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new Me(ye.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new er(n)}static emptyPath(){return new er([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e){this.path=e}static fromPath(e){return new He(Kt.fromString(e))}static fromName(e){return new He(Kt.fromString(e).popFirst(5))}static empty(){return new He(Kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Kt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new He(new Kt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(t,e,n){if(!n)throw new Me(ye.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function o6(t,e,n,r){if(e===!0&&r===!0)throw new Me(ye.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function wT(t){if(!He.isDocumentKey(t))throw new Me(ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function _T(t){if(He.isDocumentKey(t))throw new Me(ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function EN(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ov(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Xe(12329,{type:typeof t})}function ui(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Me(ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ov(t);throw new Me(ye.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Zh(t,e){if(!EN(t))throw new Me(ye.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Me(ye.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST=-62135596800,ET=1e6;class Zt{static now(){return Zt.fromMillis(Date.now())}static fromDate(e){return Zt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*ET);return new Zt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Me(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Me(ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<ST)throw new Me(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ET}_compareTo(e){return this.seconds===e.seconds?mt(this.nanoseconds,e.nanoseconds):mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Zt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zh(e,Zt._jsonSchema))return new Zt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ST;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Zt._jsonSchemaVersion="firestore/timestamp/1.0",Zt._jsonSchema={type:kn("string",Zt._jsonSchemaVersion),seconds:kn("number"),nanoseconds:kn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{static fromTimestamp(e){return new et(e)}static min(){return new et(new Zt(0,0))}static max(){return new et(new Zt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh=-1;function s6(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=et.fromTimestamp(r===1e9?new Zt(n+1,0):new Zt(n,r));return new Es(i,He.empty(),e)}function l6(t){return new Es(t.readTime,t.key,eh)}class Es{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Es(et.min(),He.empty(),eh)}static max(){return new Es(et.max(),He.empty(),eh)}}function u6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=He.comparator(t.documentKey,e.documentKey),n!==0?n:mt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class f6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zc(t){if(t.code!==ye.FAILED_PRECONDITION||t.message!==c6)throw t;Le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ve((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ve?n:ve.resolve(n)}catch(n){return ve.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ve.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ve.reject(n)}static resolve(e){return new ve((n,r)=>{n(e)})}static reject(e){return new ve((n,r)=>{r(e)})}static waitFor(e){return new ve((n,r)=>{let i=0,a=0,o=!1;e.forEach(s=>{++i,s.next(()=>{++a,o&&a===i&&n()},l=>r(l))}),o=!0,a===i&&n()})}static or(e){let n=ve.resolve(!1);for(const r of e)n=n.next(i=>i?ve.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,a)=>{r.push(n.call(this,i,a))}),this.waitFor(r)}static mapArray(e,n){return new ve((r,i)=>{const a=e.length,o=new Array(a);let s=0;for(let l=0;l<a;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++s,s===a&&r(o)},c=>i(c))}})}static doWhile(e,n){return new ve((r,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):r()};a()})}}function d6(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ef(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}sv.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1=-1;function lv(t){return t==null}function Eg(t){return t===0&&1/t==-1/0}function h6(t){return typeof t=="number"&&Number.isInteger(t)&&!Eg(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN="";function p6(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=AT(e)),e=m6(t.get(n),e);return AT(e)}function m6(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case AN:n+="";break;default:n+=a}}return n}function AT(t){return t+AN+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ns(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function TN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,n){this.comparator=e,this.root=n||Jn.EMPTY}insert(e,n){return new cn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Jn.BLACK,null,null))}remove(e){return new cn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new im(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new im(this.root,e,this.comparator,!1)}getReverseIterator(){return new im(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new im(this.root,e,this.comparator,!0)}}class im{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jn{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??Jn.RED,this.left=i??Jn.EMPTY,this.right=a??Jn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new Jn(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Jn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Jn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Xe(27949);return e+(this.isRed()?0:1)}}Jn.EMPTY=null,Jn.RED=!0,Jn.BLACK=!1;Jn.EMPTY=new class{constructor(){this.size=0}get key(){throw Xe(57766)}get value(){throw Xe(16141)}get color(){throw Xe(16727)}get left(){throw Xe(29726)}get right(){throw Xe(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new Jn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.comparator=e,this.data=new cn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new PT(this.data.getIterator())}getIteratorFrom(e){return new PT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof $n)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new $n(this.comparator);return n.data=e,n}}class PT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this.fields=e,e.sort(er.comparator)}static empty(){return new si([])}unionWith(e){let n=new $n(er.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new si(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return gc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new PN("Invalid base64 string: "+a):a}}(e);return new ir(n)}static fromUint8Array(e){const n=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new ir(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ir.EMPTY_BYTE_STRING=new ir("");const g6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function As(t){if(kt(!!t,39018),typeof t=="string"){let e=0;const n=g6.exec(t);if(kt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yn(t.seconds),nanos:yn(t.nanos)}}function yn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ts(t){return typeof t=="string"?ir.fromBase64String(t):ir.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON="server_timestamp",kN="__type__",CN="__previous_value__",IN="__local_write_time__";function $1(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[kN])==null?void 0:r.stringValue)===ON}function uv(t){const e=t.mapValue.fields[CN];return $1(e)?uv(e):e}function th(t){const e=As(t.mapValue.fields[IN].timestampValue);return new Zt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e,n,r,i,a,o,s,l,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=c}}const Ag="(default)";class nh{constructor(e,n){this.projectId=e,this.database=n||Ag}static empty(){return new nh("","")}get isDefaultDatabase(){return this.database===Ag}isEqual(e){return e instanceof nh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN="__type__",v6="__max__",am={mapValue:{}},NN="__vector__",Tg="value";function Ps(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$1(t)?4:x6(t)?9007199254740991:b6(t)?10:11:Xe(28295,{value:t})}function Va(t,e){if(t===e)return!0;const n=Ps(t);if(n!==Ps(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return th(t).isEqual(th(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=As(i.timestampValue),s=As(a.timestampValue);return o.seconds===s.seconds&&o.nanos===s.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return Ts(i.bytesValue).isEqual(Ts(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return yn(i.geoPointValue.latitude)===yn(a.geoPointValue.latitude)&&yn(i.geoPointValue.longitude)===yn(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return yn(i.integerValue)===yn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=yn(i.doubleValue),s=yn(a.doubleValue);return o===s?Eg(o)===Eg(s):isNaN(o)&&isNaN(s)}return!1}(t,e);case 9:return gc(t.arrayValue.values||[],e.arrayValue.values||[],Va);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},s=a.mapValue.fields||{};if(TT(o)!==TT(s))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(s[l]===void 0||!Va(o[l],s[l])))return!1;return!0}(t,e);default:return Xe(52216,{left:t})}}function rh(t,e){return(t.values||[]).find(n=>Va(n,e))!==void 0}function yc(t,e){if(t===e)return 0;const n=Ps(t),r=Ps(e);if(n!==r)return mt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return mt(t.booleanValue,e.booleanValue);case 2:return function(a,o){const s=yn(a.integerValue||a.doubleValue),l=yn(o.integerValue||o.doubleValue);return s<l?-1:s>l?1:s===l?0:isNaN(s)?isNaN(l)?0:-1:1}(t,e);case 3:return OT(t.timestampValue,e.timestampValue);case 4:return OT(th(t),th(e));case 5:return Vx(t.stringValue,e.stringValue);case 6:return function(a,o){const s=Ts(a),l=Ts(o);return s.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const s=a.split("/"),l=o.split("/");for(let u=0;u<s.length&&u<l.length;u++){const c=mt(s[u],l[u]);if(c!==0)return c}return mt(s.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const s=mt(yn(a.latitude),yn(o.latitude));return s!==0?s:mt(yn(a.longitude),yn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return kT(t.arrayValue,e.arrayValue);case 10:return function(a,o){var m,g,b,v;const s=a.fields||{},l=o.fields||{},u=(m=s[Tg])==null?void 0:m.arrayValue,c=(g=l[Tg])==null?void 0:g.arrayValue,f=mt(((b=u==null?void 0:u.values)==null?void 0:b.length)||0,((v=c==null?void 0:c.values)==null?void 0:v.length)||0);return f!==0?f:kT(u,c)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===am.mapValue&&o===am.mapValue)return 0;if(a===am.mapValue)return 1;if(o===am.mapValue)return-1;const s=a.fields||{},l=Object.keys(s),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let f=0;f<l.length&&f<c.length;++f){const m=Vx(l[f],c[f]);if(m!==0)return m;const g=yc(s[l[f]],u[c[f]]);if(g!==0)return g}return mt(l.length,c.length)}(t.mapValue,e.mapValue);default:throw Xe(23264,{he:n})}}function OT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return mt(t,e);const n=As(t),r=As(e),i=mt(n.seconds,r.seconds);return i!==0?i:mt(n.nanos,r.nanos)}function kT(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=yc(n[i],r[i]);if(a)return a}return mt(n.length,r.length)}function vc(t){return Bx(t)}function Bx(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=As(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ts(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return He.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=Bx(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${Bx(n.fields[o])}`;return i+"}"}(t.mapValue):Xe(61005,{value:t})}function Vm(t){switch(Ps(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=uv(t);return e?16+Vm(e):16;case 5:return 2*t.stringValue.length;case 6:return Ts(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+Vm(a),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Ns(r.fields,(a,o)=>{i+=a.length+Vm(o)}),i}(t.mapValue);default:throw Xe(13486,{value:t})}}function CT(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ux(t){return!!t&&"integerValue"in t}function L1(t){return!!t&&"arrayValue"in t}function IT(t){return!!t&&"nullValue"in t}function jT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Bm(t){return!!t&&"mapValue"in t}function b6(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[jN])==null?void 0:r.stringValue)===NN}function Ed(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ns(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ed(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ed(t.arrayValue.values[n]);return e}return{...t}}function x6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===v6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this.value=e}static empty(){return new Vr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Bm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ed(n)}setAll(e){let n=er.emptyPath(),r={},i=[];e.forEach((o,s)=>{if(!n.isImmediateParentOf(s)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=s.popLast()}o?r[s.lastSegment()]=Ed(o):i.push(s.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());Bm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Va(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Bm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ns(n,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Vr(Ed(this.value))}}function DN(t){const e=[];return Ns(t.fields,(n,r)=>{const i=new er([n]);if(Bm(r)){const a=DN(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new si(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,n,r,i,a,o,s){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=s}static newInvalidDocument(e){return new mr(e,0,et.min(),et.min(),et.min(),Vr.empty(),0)}static newFoundDocument(e,n,r,i){return new mr(e,1,n,et.min(),r,i,0)}static newNoDocument(e,n){return new mr(e,2,n,et.min(),et.min(),Vr.empty(),0)}static newUnknownDocument(e,n){return new mr(e,3,n,et.min(),et.min(),Vr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,n){this.position=e,this.inclusive=n}}function NT(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?r=He.comparator(He.fromName(o.referenceValue),n.key):r=yc(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function DT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Va(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e,n="asc"){this.field=e,this.dir=n}}function w6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{}class On extends MN{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new S6(e,n,r):n==="array-contains"?new T6(e,r):n==="in"?new P6(e,r):n==="not-in"?new O6(e,r):n==="array-contains-any"?new k6(e,r):new On(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new E6(e,r):new A6(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(yc(n,this.value)):n!==null&&Ps(this.value)===Ps(n)&&this.matchesComparison(yc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class da extends MN{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new da(e,n)}matches(e){return RN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function RN(t){return t.op==="and"}function $N(t){return _6(t)&&RN(t)}function _6(t){for(const e of t.filters)if(e instanceof da)return!1;return!0}function Wx(t){if(t instanceof On)return t.field.canonicalString()+t.op.toString()+vc(t.value);if($N(t))return t.filters.map(e=>Wx(e)).join(",");{const e=t.filters.map(n=>Wx(n)).join(",");return`${t.op}(${e})`}}function LN(t,e){return t instanceof On?function(r,i){return i instanceof On&&r.op===i.op&&r.field.isEqual(i.field)&&Va(r.value,i.value)}(t,e):t instanceof da?function(r,i){return i instanceof da&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,o,s)=>a&&LN(o,i.filters[s]),!0):!1}(t,e):void Xe(19439)}function FN(t){return t instanceof On?function(n){return`${n.field.canonicalString()} ${n.op} ${vc(n.value)}`}(t):t instanceof da?function(n){return n.op.toString()+" {"+n.getFilters().map(FN).join(" ,")+"}"}(t):"Filter"}class S6 extends On{constructor(e,n,r){super(e,n,r),this.key=He.fromName(r.referenceValue)}matches(e){const n=He.comparator(e.key,this.key);return this.matchesComparison(n)}}class E6 extends On{constructor(e,n){super(e,"in",n),this.keys=zN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class A6 extends On{constructor(e,n){super(e,"not-in",n),this.keys=zN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function zN(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>He.fromName(r.referenceValue))}class T6 extends On{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return L1(n)&&rh(n.arrayValue,this.value)}}class P6 extends On{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&rh(this.value.arrayValue,n)}}class O6 extends On{constructor(e,n){super(e,"not-in",n)}matches(e){if(rh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!rh(this.value.arrayValue,n)}}class k6 extends On{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!L1(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>rh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(e,n=null,r=[],i=[],a=null,o=null,s=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.Te=null}}function MT(t,e=null,n=[],r=[],i=null,a=null,o=null){return new C6(t,e,n,r,i,a,o)}function F1(t){const e=rt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Wx(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),lv(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>vc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>vc(r)).join(",")),e.Te=n}return e.Te}function z1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!w6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!LN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!DT(t.startAt,e.startAt)&&DT(t.endAt,e.endAt)}function qx(t){return He.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,n=null,r=[],i=[],a=null,o="F",s=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function I6(t,e,n,r,i,a,o,s){return new ep(t,e,n,r,i,a,o,s)}function cv(t){return new ep(t)}function RT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function VN(t){return t.collectionGroup!==null}function Ad(t){const e=rt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let s=new $n(er.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(s=s.add(u.field))})}),s})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Og(a,r))}),n.has(er.keyField().canonicalString())||e.Ie.push(new Og(er.keyField(),r))}return e.Ie}function Ma(t){const e=rt(t);return e.Ee||(e.Ee=j6(e,Ad(t))),e.Ee}function j6(t,e){if(t.limitType==="F")return MT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new Og(i.field,a)});const n=t.endAt?new Pg(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Pg(t.startAt.position,t.startAt.inclusive):null;return MT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Kx(t,e){const n=t.filters.concat([e]);return new ep(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Hx(t,e,n){return new ep(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function fv(t,e){return z1(Ma(t),Ma(e))&&t.limitType===e.limitType}function BN(t){return`${F1(Ma(t))}|lt:${t.limitType}`}function Pu(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>FN(i)).join(", ")}]`),lv(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>vc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>vc(i)).join(",")),`Target(${r})`}(Ma(t))}; limitType=${t.limitType})`}function dv(t,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):He.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,i){for(const a of Ad(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,s,l){const u=NT(o,s,l);return o.inclusive?u<=0:u<0}(r.startAt,Ad(r),i)||r.endAt&&!function(o,s,l){const u=NT(o,s,l);return o.inclusive?u>=0:u>0}(r.endAt,Ad(r),i))}(t,e)}function N6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function UN(t){return(e,n)=>{let r=!1;for(const i of Ad(t)){const a=D6(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function D6(t,e,n){const r=t.field.isKeyField()?He.comparator(e.key,n.key):function(a,o,s){const l=o.data.field(a),u=s.data.field(a);return l!==null&&u!==null?yc(l,u):Xe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Xe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ns(this.inner,(n,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return TN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M6=new cn(He.comparator);function To(){return M6}const WN=new cn(He.comparator);function ld(...t){let e=WN;for(const n of t)e=e.insert(n.key,n);return e}function qN(t){let e=WN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function bl(){return Td()}function KN(){return Td()}function Td(){return new Xl(t=>t.toString(),(t,e)=>t.isEqual(e))}const R6=new cn(He.comparator),$6=new $n(He.comparator);function gt(...t){let e=$6;for(const n of t)e=e.add(n);return e}const L6=new $n(mt);function F6(){return L6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eg(e)?"-0":e}}function HN(t){return{integerValue:""+t}}function z6(t,e){return h6(e)?HN(e):V1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(){this._=void 0}}function V6(t,e,n){return t instanceof kg?function(i,a){const o={fields:{[kN]:{stringValue:ON},[IN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&$1(a)&&(a=uv(a)),a&&(o.fields[CN]=a),{mapValue:o}}(n,e):t instanceof ih?YN(t,e):t instanceof ah?XN(t,e):function(i,a){const o=GN(i,a),s=$T(o)+$T(i.Ae);return Ux(o)&&Ux(i.Ae)?HN(s):V1(i.serializer,s)}(t,e)}function B6(t,e,n){return t instanceof ih?YN(t,e):t instanceof ah?XN(t,e):n}function GN(t,e){return t instanceof Cg?function(r){return Ux(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class kg extends hv{}class ih extends hv{constructor(e){super(),this.elements=e}}function YN(t,e){const n=QN(e);for(const r of t.elements)n.some(i=>Va(i,r))||n.push(r);return{arrayValue:{values:n}}}class ah extends hv{constructor(e){super(),this.elements=e}}function XN(t,e){let n=QN(e);for(const r of t.elements)n=n.filter(i=>!Va(i,r));return{arrayValue:{values:n}}}class Cg extends hv{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function $T(t){return yn(t.integerValue||t.doubleValue)}function QN(t){return L1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function U6(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ih&&i instanceof ih||r instanceof ah&&i instanceof ah?gc(r.elements,i.elements,Va):r instanceof Cg&&i instanceof Cg?Va(r.Ae,i.Ae):r instanceof kg&&i instanceof kg}(t.transform,e.transform)}class W6{constructor(e,n){this.version=e,this.transformResults=n}}class Or{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Or}static exists(e){return new Or(void 0,e)}static updateTime(e){return new Or(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Um(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class pv{}function JN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new mv(t.key,Or.none()):new tp(t.key,t.data,Or.none());{const n=t.data,r=Vr.empty();let i=new $n(er.comparator);for(let a of e.fields)if(!i.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new Ds(t.key,r,new si(i.toArray()),Or.none())}}function q6(t,e,n){t instanceof tp?function(i,a,o){const s=i.value.clone(),l=FT(i.fieldTransforms,a,o.transformResults);s.setAll(l),a.convertToFoundDocument(o.version,s).setHasCommittedMutations()}(t,e,n):t instanceof Ds?function(i,a,o){if(!Um(i.precondition,a))return void a.convertToUnknownDocument(o.version);const s=FT(i.fieldTransforms,a,o.transformResults),l=a.data;l.setAll(ZN(i)),l.setAll(s),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Pd(t,e,n,r){return t instanceof tp?function(a,o,s,l){if(!Um(a.precondition,o))return s;const u=a.value.clone(),c=zT(a.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ds?function(a,o,s,l){if(!Um(a.precondition,o))return s;const u=zT(a.fieldTransforms,l,o),c=o.data;return c.setAll(ZN(a)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),s===null?null:s.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(a,o,s){return Um(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):s}(t,e,n)}function K6(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=GN(r.transform,i||null);a!=null&&(n===null&&(n=Vr.empty()),n.set(r.field,a))}return n||null}function LT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&gc(r,i,(a,o)=>U6(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class tp extends pv{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ds extends pv{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function ZN(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function FT(t,e,n){const r=new Map;kt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const a=t[i],o=a.transform,s=e.data.field(a.field);r.set(a.field,B6(o,s,n[i]))}return r}function zT(t,e,n){const r=new Map;for(const i of t){const a=i.transform,o=n.data.field(i.field);r.set(i.field,V6(a,o,e))}return r}class mv extends pv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class H6 extends pv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&q6(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Pd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Pd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=KN();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let s=this.applyToLocalView(o,a.mutatedFields);s=n.has(i.key)?null:s;const l=JN(o,s);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(et.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),gt())}isEqual(e){return this.batchId===e.batchId&&gc(this.mutations,e.mutations,(n,r)=>LT(n,r))&&gc(this.baseMutations,e.baseMutations,(n,r)=>LT(n,r))}}class B1{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){kt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return R6}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new B1(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var En,wt;function Q6(t){switch(t){case ye.OK:return Xe(64938);case ye.CANCELLED:case ye.UNKNOWN:case ye.DEADLINE_EXCEEDED:case ye.RESOURCE_EXHAUSTED:case ye.INTERNAL:case ye.UNAVAILABLE:case ye.UNAUTHENTICATED:return!1;case ye.INVALID_ARGUMENT:case ye.NOT_FOUND:case ye.ALREADY_EXISTS:case ye.PERMISSION_DENIED:case ye.FAILED_PRECONDITION:case ye.ABORTED:case ye.OUT_OF_RANGE:case ye.UNIMPLEMENTED:case ye.DATA_LOSS:return!0;default:return Xe(15467,{code:t})}}function eD(t){if(t===void 0)return Ao("GRPC error has no .code"),ye.UNKNOWN;switch(t){case En.OK:return ye.OK;case En.CANCELLED:return ye.CANCELLED;case En.UNKNOWN:return ye.UNKNOWN;case En.DEADLINE_EXCEEDED:return ye.DEADLINE_EXCEEDED;case En.RESOURCE_EXHAUSTED:return ye.RESOURCE_EXHAUSTED;case En.INTERNAL:return ye.INTERNAL;case En.UNAVAILABLE:return ye.UNAVAILABLE;case En.UNAUTHENTICATED:return ye.UNAUTHENTICATED;case En.INVALID_ARGUMENT:return ye.INVALID_ARGUMENT;case En.NOT_FOUND:return ye.NOT_FOUND;case En.ALREADY_EXISTS:return ye.ALREADY_EXISTS;case En.PERMISSION_DENIED:return ye.PERMISSION_DENIED;case En.FAILED_PRECONDITION:return ye.FAILED_PRECONDITION;case En.ABORTED:return ye.ABORTED;case En.OUT_OF_RANGE:return ye.OUT_OF_RANGE;case En.UNIMPLEMENTED:return ye.UNIMPLEMENTED;case En.DATA_LOSS:return ye.DATA_LOSS;default:return Xe(39323,{code:t})}}(wt=En||(En={}))[wt.OK=0]="OK",wt[wt.CANCELLED=1]="CANCELLED",wt[wt.UNKNOWN=2]="UNKNOWN",wt[wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wt[wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wt[wt.NOT_FOUND=5]="NOT_FOUND",wt[wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",wt[wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",wt[wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",wt[wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wt[wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wt[wt.ABORTED=10]="ABORTED",wt[wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",wt[wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",wt[wt.INTERNAL=13]="INTERNAL",wt[wt.UNAVAILABLE=14]="UNAVAILABLE",wt[wt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6=new vs([4294967295,4294967295],0);function VT(t){const e=J6().encode(t),n=new mN;return n.update(e),new Uint8Array(n.digest())}function BT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new vs([n,r],0),new vs([i,a],0)]}class U1{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ud(`Invalid padding: ${n}`);if(r<0)throw new ud(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ud(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ud(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=vs.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(vs.fromNumber(r)));return i.compare(Z6)===1&&(i=new vs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=VT(e),[r,i]=BT(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new U1(a,i,n);return r.forEach(s=>o.insert(s)),o}insert(e){if(this.ge===0)return;const n=VT(e),[r,i]=BT(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ud extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,np.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new gv(et.min(),i,new cn(mt),To(),gt())}}class np{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new np(r,n,gt(),gt(),gt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class tD{constructor(e,n){this.targetId=e,this.Ce=n}}class nD{constructor(e,n,r=ir.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class UT{constructor(){this.ve=0,this.Fe=WT(),this.Me=ir.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=gt(),n=gt(),r=gt();return this.Fe.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Xe(38017,{changeType:a})}}),new np(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=WT()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,kt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class eB{constructor(e){this.Ge=e,this.ze=new Map,this.je=To(),this.Je=om(),this.He=om(),this.Ye=new cn(mt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Xe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const a=i.target;if(qx(a))if(r===0){const o=new He(a.path);this.et(n,o,mr.newNoDocument(o,et.min()))}else kt(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const s=this.ut(e),l=s?this.ct(s,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let o,s;try{o=Ts(r).toUint8Array()}catch(l){if(l instanceof PN)return mc("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{s=new U1(o,i,a)}catch(l){return mc(l instanceof ud?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return s.ge===0?null:s}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(a=>{const o=this.Ge.ht(),s=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(s)||(this.et(n,a,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((a,o)=>{const s=this.ot(o);if(s){if(a.current&&qx(s.target)){const l=new He(s.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,mr.newNoDocument(l,e))}a.Be&&(n.set(o,a.ke()),a.qe())}});let r=gt();this.He.forEach((a,o)=>{let s=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(s=!1,!1)}),s&&(r=r.add(a))}),this.je.forEach((a,o)=>o.setReadTime(e));const i=new gv(e,n,this.Ye,this.je,r);return this.je=To(),this.Je=om(),this.He=om(),this.Ye=new cn(mt),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new UT,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new $n(mt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new $n(mt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Le("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new UT),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function om(){return new cn(He.comparator)}function WT(){return new cn(He.comparator)}const tB={asc:"ASCENDING",desc:"DESCENDING"},nB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rB={and:"AND",or:"OR"};class iB{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Gx(t,e){return t.useProto3Json||lv(e)?e:{value:e}}function Ig(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rD(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function aB(t,e){return Ig(t,e.toTimestamp())}function Ra(t){return kt(!!t,49232),et.fromTimestamp(function(n){const r=As(n);return new Zt(r.seconds,r.nanos)}(t))}function W1(t,e){return Yx(t,e).canonicalString()}function Yx(t,e){const n=function(i){return new Kt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function iD(t){const e=Kt.fromString(t);return kt(uD(e),10190,{key:e.toString()}),e}function Xx(t,e){return W1(t.databaseId,e.path)}function Z0(t,e){const n=iD(e);if(n.get(1)!==t.databaseId.projectId)throw new Me(ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Me(ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new He(oD(n))}function aD(t,e){return W1(t.databaseId,e)}function oB(t){const e=iD(t);return e.length===4?Kt.emptyPath():oD(e)}function Qx(t){return new Kt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function oD(t){return kt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function qT(t,e,n){return{name:Xx(t,e),fields:n.value.mapValue.fields}}function sB(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Xe(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(u,c){return u.useProto3Json?(kt(c===void 0||typeof c=="string",58123),ir.fromBase64String(c||"")):(kt(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),ir.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,s=o&&function(u){const c=u.code===void 0?ye.UNKNOWN:eD(u.code);return new Me(c,u.message||"")}(o);n=new nD(r,i,a,s||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Z0(t,r.document.name),a=Ra(r.document.updateTime),o=r.document.createTime?Ra(r.document.createTime):et.min(),s=new Vr({mapValue:{fields:r.document.fields}}),l=mr.newFoundDocument(i,a,o,s),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Wm(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Z0(t,r.document),a=r.readTime?Ra(r.readTime):et.min(),o=mr.newNoDocument(i,a),s=r.removedTargetIds||[];n=new Wm([],s,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Z0(t,r.document),a=r.removedTargetIds||[];n=new Wm([],a,i,null)}else{if(!("filter"in e))return Xe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new X6(i,a),s=r.targetId;n=new tD(s,o)}}return n}function lB(t,e){let n;if(e instanceof tp)n={update:qT(t,e.key,e.value)};else if(e instanceof mv)n={delete:Xx(t,e.key)};else if(e instanceof Ds)n={update:qT(t,e.key,e.data),updateMask:yB(e.fieldMask)};else{if(!(e instanceof H6))return Xe(16599,{Vt:e.type});n={verify:Xx(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const s=o.transform;if(s instanceof kg)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(s instanceof ih)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:s.elements}};if(s instanceof ah)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:s.elements}};if(s instanceof Cg)return{fieldPath:o.field.canonicalString(),increment:s.Ae};throw Xe(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:aB(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Xe(27497)}(t,e.precondition)),n}function uB(t,e){return t&&t.length>0?(kt(e!==void 0,14353),t.map(n=>function(i,a){let o=i.updateTime?Ra(i.updateTime):Ra(a);return o.isEqual(et.min())&&(o=Ra(a)),new W6(o,i.transformResults||[])}(n,e))):[]}function cB(t,e){return{documents:[aD(t,e.path)]}}function fB(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=aD(t,i);const a=function(u){if(u.length!==0)return lD(da.create(u,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(u){if(u.length!==0)return u.map(c=>function(m){return{field:Ou(m.field),direction:pB(m.dir)}}(c))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const s=Gx(t,e.limit);return s!==null&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:i}}function dB(t){let e=oB(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){kt(r===1,65062);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let a=[];n.where&&(a=function(f){const m=sD(f);return m instanceof da&&$N(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(b){return new Og(ku(b.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(n.orderBy));let s=null;n.limit&&(s=function(f){let m;return m=typeof f=="object"?f.value:f,lv(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(f){const m=!!f.before,g=f.values||[];return new Pg(g,m)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const m=!f.before,g=f.values||[];return new Pg(g,m)}(n.endAt)),I6(e,i,o,a,s,"F",l,u)}function hB(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xe(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function sD(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ku(n.unaryFilter.field);return On.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ku(n.unaryFilter.field);return On.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ku(n.unaryFilter.field);return On.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ku(n.unaryFilter.field);return On.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Xe(61313);default:return Xe(60726)}}(t):t.fieldFilter!==void 0?function(n){return On.create(ku(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Xe(58110);default:return Xe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return da.create(n.compositeFilter.filters.map(r=>sD(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Xe(1026)}}(n.compositeFilter.op))}(t):Xe(30097,{filter:t})}function pB(t){return tB[t]}function mB(t){return nB[t]}function gB(t){return rB[t]}function Ou(t){return{fieldPath:t.canonicalString()}}function ku(t){return er.fromServerFormat(t.fieldPath)}function lD(t){return t instanceof On?function(n){if(n.op==="=="){if(jT(n.value))return{unaryFilter:{field:Ou(n.field),op:"IS_NAN"}};if(IT(n.value))return{unaryFilter:{field:Ou(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(jT(n.value))return{unaryFilter:{field:Ou(n.field),op:"IS_NOT_NAN"}};if(IT(n.value))return{unaryFilter:{field:Ou(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ou(n.field),op:mB(n.op),value:n.value}}}(t):t instanceof da?function(n){const r=n.getFilters().map(i=>lD(i));return r.length===1?r[0]:{compositeFilter:{op:gB(n.op),filters:r}}}(t):Xe(54877,{filter:t})}function yB(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function uD(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n,r,i,a=et.min(),o=et.min(),s=ir.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=l}withSequenceNumber(e){return new is(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vB{constructor(e){this.yt=e}}function bB(t){const e=dB({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Hx(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB{constructor(){this.Cn=new wB}addToCollectionParentIndex(e,n){return this.Cn.add(n),ve.resolve()}getCollectionParents(e,n){return ve.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ve.resolve()}deleteFieldIndex(e,n){return ve.resolve()}deleteAllFieldIndexes(e){return ve.resolve()}createTargetIndexes(e,n){return ve.resolve()}getDocumentsMatchingTarget(e,n){return ve.resolve(null)}getIndexType(e,n){return ve.resolve(0)}getFieldIndexes(e,n){return ve.resolve([])}getNextCollectionGroupToUpdate(e){return ve.resolve(null)}getMinOffset(e,n){return ve.resolve(Es.min())}getMinOffsetFromCollectionGroup(e,n){return ve.resolve(Es.min())}updateCollectionGroup(e,n,r){return ve.resolve()}updateIndexEntries(e,n){return ve.resolve()}}class wB{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new $n(Kt.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new $n(Kt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cD=41943040;class Fr{static withCacheSize(e){return new Fr(e,Fr.DEFAULT_COLLECTION_PERCENTILE,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fr.DEFAULT_COLLECTION_PERCENTILE=10,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fr.DEFAULT=new Fr(cD,Fr.DEFAULT_COLLECTION_PERCENTILE,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fr.DISABLED=new Fr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new bc(0)}static cr(){return new bc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT="LruGarbageCollector",_B=1048576;function GT([t,e],[n,r]){const i=mt(t,n);return i===0?mt(e,r):i}class SB{constructor(e){this.Ir=e,this.buffer=new $n(GT),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();GT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class EB{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Le(HT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ef(n)?Le(HT,"Ignoring IndexedDB error during garbage collection: ",n):await Zc(n)}await this.Vr(3e5)})}}class AB{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return ve.resolve(sv.ce);const r=new SB(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),ve.resolve(KT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),KT):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,a,o,s,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,s=Date.now(),this.removeTargets(e,r,n))).next(f=>(a=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Tu()<=pt.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(s-o)+`ms
	Removed ${a} targets in `+(l-s)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),ve.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:f})))}}function TB(t,e){return new AB(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB{constructor(){this.changes=new Xl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ve.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OB{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Pd(r.mutation,i,si.empty(),Zt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,gt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=gt()){const i=bl();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(a=>{let o=ld();return a.forEach((s,l)=>{o=o.insert(s,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=bl();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,gt()))}populateOverlays(e,n,r){const i=[];return r.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,s)=>{n.set(o,s)})})}computeViews(e,n,r,i){let a=To();const o=Td(),s=function(){return Td()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof Ds)?a=a.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),Pd(c.mutation,u,c.mutation.getFieldMask(),Zt.now())):o.set(u.key,si.empty())}),this.recalculateAndSaveOverlays(e,a).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>s.set(u,new OB(c,o.get(u)??null))),s))}recalculateAndSaveOverlays(e,n){const r=Td();let i=new cn((o,s)=>o-s),a=gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const s of o)s.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||si.empty();c=s.applyToLocalView(u,c),r.set(l,c);const f=(i.get(s.batchId)||gt()).add(l);i=i.insert(s.batchId,f)})}).next(()=>{const o=[],s=i.getReverseIterator();for(;s.hasNext();){const l=s.getNext(),u=l.key,c=l.value,f=KN();c.forEach(m=>{if(!a.has(m)){const g=JN(n.get(m),r.get(m));g!==null&&f.set(m,g),a=a.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return ve.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return He.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):VN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):ve.resolve(bl());let s=eh,l=a;return o.next(u=>ve.forEach(u,(c,f)=>(s<f.largestBatchId&&(s=f.largestBatchId),a.get(c)?ve.resolve():this.remoteDocumentCache.getEntry(e,c).next(m=>{l=l.insert(c,m)}))).next(()=>this.populateOverlays(e,u,a)).next(()=>this.computeViews(e,l,u,gt())).next(c=>({batchId:s,changes:qN(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new He(n)).next(r=>{let i=ld();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let o=ld();return this.indexManager.getCollectionParents(e,a).next(s=>ve.forEach(s,l=>{const u=function(f,m){return new ep(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(c=>{c.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i))).next(o=>{a.forEach((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,mr.newInvalidDocument(c)))});let s=ld();return o.forEach((l,u)=>{const c=a.get(l);c!==void 0&&Pd(c.mutation,u,si.empty(),Zt.now()),dv(n,u)&&(s=s.insert(l,u))}),s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CB{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ve.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ra(i.createTime)}}(n)),ve.resolve()}getNamedQuery(e,n){return ve.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:bB(i.bundledQuery),readTime:Ra(i.readTime)}}(n)),ve.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IB{constructor(){this.overlays=new cn(He.comparator),this.qr=new Map}getOverlay(e,n){return ve.resolve(this.overlays.get(n))}getOverlays(e,n){const r=bl();return ve.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,a)=>{this.St(e,n,a)}),ve.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(r)),ve.resolve()}getOverlaysForCollection(e,n,r){const i=bl(),a=n.length+1,o=new He(n.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const l=s.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===a&&l.largestBatchId>r&&i.set(l.getKey(),l)}return ve.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new cn((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=a.get(u.largestBatchId);c===null&&(c=bl(),a=a.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const s=bl(),l=a.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>s.set(u,c)),!(s.size()>=i)););return ve.resolve(s)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Y6(n,r));let a=this.qr.get(n);a===void 0&&(a=gt(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jB{constructor(){this.sessionToken=ir.EMPTY_BYTE_STRING}getSessionToken(e){return ve.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ve.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(){this.Qr=new $n(Bn.$r),this.Ur=new $n(Bn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Bn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Bn(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new He(new Kt([])),r=new Bn(n,e),i=new Bn(n,e+1),a=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),a.push(o.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new He(new Kt([])),r=new Bn(n,e),i=new Bn(n,e+1);let a=gt();return this.Ur.forEachInRange([r,i],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new Bn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Bn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return He.comparator(e.key,n.key)||mt(e.Yr,n.Yr)}static Kr(e,n){return mt(e.Yr,n.Yr)||He.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new $n(Bn.$r)}checkEmpty(e){return ve.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new G6(a,n,r,i);this.mutationQueue.push(o);for(const s of i)this.Zr=this.Zr.add(new Bn(s.key,a)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return ve.resolve(o)}lookupMutationBatch(e,n){return ve.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),a=i<0?0:i;return ve.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ve.resolve(this.mutationQueue.length===0?R1:this.tr-1)}getAllMutationBatches(e){return ve.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Bn(n,0),i=new Bn(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],o=>{const s=this.Xr(o.Yr);a.push(s)}),ve.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new $n(mt);return n.forEach(i=>{const a=new Bn(i,0),o=new Bn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],s=>{r=r.add(s.Yr)})}),ve.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;He.isDocumentKey(a)||(a=a.child(""));const o=new Bn(new He(a),0);let s=new $n(mt);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(s=s.add(l.Yr)),!0)},o),ve.resolve(this.ti(s))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){kt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ve.forEach(n.mutations,i=>{const a=new Bn(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Bn(n,0),i=this.Zr.firstAfterOrEqual(r);return ve.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ve.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(e){this.ri=e,this.docs=function(){return new cn(He.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ve.resolve(r?r.document.mutableCopy():mr.newInvalidDocument(n))}getEntries(e,n){let r=To();return n.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():mr.newInvalidDocument(i))}),ve.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=To();const o=n.path,s=new He(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(s);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||u6(l6(c),r)<=0||(i.has(c.key)||dv(n,c))&&(a=a.insert(c.key,c.mutableCopy()))}return ve.resolve(a)}getAllFromCollectionGroup(e,n,r,i){Xe(9500)}ii(e,n){return ve.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new MB(this)}getSize(e){return ve.resolve(this.size)}}class MB extends PB{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),ve.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(e){this.persistence=e,this.si=new Xl(n=>F1(n),z1),this.lastRemoteSnapshotVersion=et.min(),this.highestTargetId=0,this.oi=0,this._i=new q1,this.targetCount=0,this.ai=bc.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),ve.resolve()}getLastRemoteSnapshotVersion(e){return ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ve.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ve.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),ve.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new bc(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ve.resolve()}updateTargetData(e,n){return this.Pr(n),ve.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ve.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.si.forEach((o,s)=>{s.sequenceNumber<=n&&r.get(s.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,s.targetId)),i++)}),ve.waitFor(a).next(()=>i)}getTargetCount(e){return ve.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return ve.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),ve.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),ve.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ve.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return ve.resolve(r)}containsKey(e,n){return ve.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,n){this.ui={},this.overlays={},this.ci=new sv(0),this.li=!1,this.li=!0,this.hi=new jB,this.referenceDelegate=e(this),this.Pi=new RB(this),this.indexManager=new xB,this.remoteDocumentCache=function(i){return new DB(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new vB(n),this.Ii=new CB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new IB,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new NB(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Le("MemoryPersistence","Starting transaction:",e);const i=new $B(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ai(e,n){return ve.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class $B extends f6{constructor(e){super(),this.currentSequenceNumber=e}}class K1{constructor(e){this.persistence=e,this.Ri=new q1,this.Vi=null}static mi(e){return new K1(e)}get fi(){if(this.Vi)return this.Vi;throw Xe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),ve.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),ve.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ve.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.fi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ve.forEach(this.fi,r=>{const i=He.fromPath(r);return this.gi(e,i).next(a=>{a||n.removeEntry(i,et.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return ve.or([()=>ve.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class jg{constructor(e,n){this.persistence=e,this.pi=new Xl(r=>p6(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=TB(this,n)}static mi(e,n){return new jg(e,n)}Ei(){}di(e){return ve.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return ve.forEach(this.pi,(r,i)=>this.br(e,r,i).next(a=>a?ve.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(s=>{s||(r++,a.removeEntry(o,et.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ve.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ve.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ve.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ve.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Vm(e.data.value)),n}br(e,n,r){return ve.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return ve.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=gt(),i=gt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new H1(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FB{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return xF()?8:d6(Hr())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.ys(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.ws(e,n,i,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new LB;return this.Ss(e,n,o).next(s=>{if(a.result=s,this.Vs)return this.bs(e,n,o,s.size)})}).next(()=>a.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Tu()<=pt.DEBUG&&Le("QueryEngine","SDK will not create cache indexes for query:",Pu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ve.resolve()):(Tu()<=pt.DEBUG&&Le("QueryEngine","Query:",Pu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Tu()<=pt.DEBUG&&Le("QueryEngine","The SDK decides to create cache indexes for query:",Pu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ma(n))):ve.resolve())}ys(e,n){if(RT(n))return ve.resolve(null);let r=Ma(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Hx(n,null,"F"),r=Ma(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=gt(...a);return this.ps.getDocuments(e,o).next(s=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Ds(n,s);return this.Cs(n,u,o,l.readTime)?this.ys(e,Hx(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,r,i){return RT(n)||i.isEqual(et.min())?ve.resolve(null):this.ps.getDocuments(e,r).next(a=>{const o=this.Ds(n,a);return this.Cs(n,o,r,i)?ve.resolve(null):(Tu()<=pt.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Pu(n)),this.vs(e,o,n,s6(i,eh)).next(s=>s))})}Ds(e,n){let r=new $n(UN(e));return n.forEach((i,a)=>{dv(e,a)&&(r=r.add(a))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,n,r){return Tu()<=pt.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",Pu(n)),this.ps.getDocumentsMatchingQuery(e,n,Es.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="LocalStore",zB=3e8;class VB{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new cn(mt),this.xs=new Xl(a=>F1(a),z1),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kB(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function BB(t,e,n,r){return new VB(t,e,n,r)}async function dD(t,e){const n=rt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],s=[];let l=gt();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of a){s.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:s}))})})}function UB(t,e){const n=rt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return function(s,l,u,c){const f=u.batch,m=f.keys();let g=ve.resolve();return m.forEach(b=>{g=g.next(()=>c.getEntry(l,b)).next(v=>{const x=u.docVersions.get(b);kt(x!==null,48541),v.version.compareTo(x)<0&&(f.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),c.addEntry(v)))})}),g.next(()=>s.mutationQueue.removeMutationBatch(l,f))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(s){let l=gt();for(let u=0;u<s.mutationResults.length;++u)s.mutationResults[u].transformResults.length>0&&(l=l.add(s.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function hD(t){const e=rt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function WB(t,e){const n=rt(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const s=[];e.targetChanges.forEach((c,f)=>{const m=i.get(f);if(!m)return;s.push(n.Pi.removeMatchingKeys(a,c.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(a,c.addedDocuments,f)));let g=m.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(ir.EMPTY_BYTE_STRING,et.min()).withLastLimboFreeSnapshotVersion(et.min()):c.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(c.resumeToken,r)),i=i.insert(f,g),function(v,x,S){return v.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=zB?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(m,g,c)&&s.push(n.Pi.updateTargetData(a,g))});let l=To(),u=gt();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(a,c))}),s.push(qB(a,o,e.documentUpdates).next(c=>{l=c.ks,u=c.qs})),!r.isEqual(et.min())){const c=n.Pi.getLastRemoteSnapshotVersion(a).next(f=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r));s.push(c)}return ve.waitFor(s).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,l,u)).next(()=>l)}).then(a=>(n.Ms=i,a))}function qB(t,e,n){let r=gt(),i=gt();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let o=To();return n.forEach((s,l)=>{const u=a.get(s);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(s)),l.isNoDocument()&&l.version.isEqual(et.min())?(e.removeEntry(s,l.readTime),o=o.insert(s,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(s,l)):Le(G1,"Ignoring outdated watch update for ",s,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:i}})}function KB(t,e){const n=rt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=R1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function HB(t,e){const n=rt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(a=>a?(i=a,ve.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new is(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Jx(t,e,n){const r=rt(t),i=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ef(o))throw o;Le(G1,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function YT(t,e,n){const r=rt(t);let i=et.min(),a=gt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,c){const f=rt(l),m=f.xs.get(c);return m!==void 0?ve.resolve(f.Ms.get(m)):f.Pi.getTargetData(u,c)}(r,o,Ma(e)).next(s=>{if(s)return i=s.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,s.targetId).next(l=>{a=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:et.min(),n?a:gt())).next(s=>(GB(r,N6(e),s),{documents:s,Qs:a})))}function GB(t,e,n){let r=t.Os.get(e)||et.min();n.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.Os.set(e,r)}class XT{constructor(){this.activeTargetIds=F6()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class YB{constructor(){this.Mo=new XT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new XT,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT="ConnectivityMonitor";class JT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Le(QT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Le(QT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sm=null;function Zx(){return sm===null?sm=function(){return 268435456+Math.round(2147483648*Math.random())}():sm++,"0x"+sm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb="RestConnection",QB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class JB{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Ag?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,a){const o=Zx(),s=this.zo(e,n.toUriEncodedString());Le(eb,`Sending RPC '${e}' ${o}:`,s,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,a);const{host:u}=new URL(s),c=Yh(u);return this.Jo(e,s,l,r,c).then(f=>(Le(eb,`Received RPC '${e}' ${o}: `,f),f),f=>{throw mc(eb,`RPC '${e}' ${o} failed with error: `,f,"url: ",s,"request:",r),f})}Ho(e,n,r,i,a,o){return this.Go(e,n,r,i,a)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Jc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}zo(e,n){const r=QB[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZB{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr="WebChannelConnection";class e8 extends JB{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,a){const o=Zx();return new Promise((s,l)=>{const u=new gN;u.setWithCredentials(!0),u.listenOnce(yN.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case zm.NO_ERROR:const f=u.getResponseJson();Le(cr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),s(f);break;case zm.TIMEOUT:Le(cr,`RPC '${e}' ${o} timed out`),l(new Me(ye.DEADLINE_EXCEEDED,"Request time out"));break;case zm.HTTP_ERROR:const m=u.getStatus();if(Le(cr,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const b=g==null?void 0:g.error;if(b&&b.status&&b.message){const v=function(S){const E=S.toLowerCase().replace(/_/g,"-");return Object.values(ye).indexOf(E)>=0?E:ye.UNKNOWN}(b.status);l(new Me(v,b.message))}else l(new Me(ye.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Me(ye.UNAVAILABLE,"Connection failed."));break;default:Xe(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Le(cr,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);Le(cr,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",c,r,15)})}T_(e,n,r){const i=Zx(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=xN(),s=bN(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=a.join("");Le(cr,`Creating RPC '${e}' stream ${i}: ${c}`,l);const f=o.createWebChannel(c,l);this.I_(f);let m=!1,g=!1;const b=new ZB({Yo:x=>{g?Le(cr,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(m||(Le(cr,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),Le(cr,`RPC '${e}' stream ${i} sending:`,x),f.send(x))},Zo:()=>f.close()}),v=(x,S,E)=>{x.listen(S,T=>{try{E(T)}catch(j){setTimeout(()=>{throw j},0)}})};return v(f,sd.EventType.OPEN,()=>{g||(Le(cr,`RPC '${e}' stream ${i} transport opened.`),b.o_())}),v(f,sd.EventType.CLOSE,()=>{g||(g=!0,Le(cr,`RPC '${e}' stream ${i} transport closed`),b.a_(),this.E_(f))}),v(f,sd.EventType.ERROR,x=>{g||(g=!0,mc(cr,`RPC '${e}' stream ${i} transport errored. Name:`,x.name,"Message:",x.message),b.a_(new Me(ye.UNAVAILABLE,"The operation could not be completed")))}),v(f,sd.EventType.MESSAGE,x=>{var S;if(!g){const E=x.data[0];kt(!!E,16349);const T=E,j=(T==null?void 0:T.error)||((S=T[0])==null?void 0:S.error);if(j){Le(cr,`RPC '${e}' stream ${i} received error:`,j);const _=j.status;let P=function(I){const R=En[I];if(R!==void 0)return eD(R)}(_),w=j.message;P===void 0&&(P=ye.INTERNAL,w="Unknown error status: "+_+" with message "+j.message),g=!0,b.a_(new Me(P,w)),f.close()}else Le(cr,`RPC '${e}' stream ${i} received:`,E),b.u_(E)}}),v(s,vN.STAT_EVENT,x=>{x.stat===zx.PROXY?Le(cr,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===zx.NOPROXY&&Le(cr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function tb(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(t){return new iB(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT="PersistentStream";class mD{constructor(e,n,r,i,a,o,s,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new pD(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ye.RESOURCE_EXHAUSTED?(Ao(n.toString()),Ao("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ye.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new Me(ye.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Le(ZT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Le(ZT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class t8 extends mD{constructor(e,n,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=sB(this.serializer,e),r=function(a){if(!("targetChange"in a))return et.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?et.min():o.readTime?Ra(o.readTime):et.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Qx(this.serializer),n.addTarget=function(a,o){let s;const l=o.target;if(s=qx(l)?{documents:cB(a,l)}:{query:fB(a,l).ft},s.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){s.resumeToken=rD(a,o.resumeToken);const u=Gx(a,o.expectedCount);u!==null&&(s.expectedCount=u)}else if(o.snapshotVersion.compareTo(et.min())>0){s.readTime=Ig(a,o.snapshotVersion.toTimestamp());const u=Gx(a,o.expectedCount);u!==null&&(s.expectedCount=u)}return s}(this.serializer,e);const r=hB(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Qx(this.serializer),n.removeTarget=e,this.q_(n)}}class n8 extends mD{constructor(e,n,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return kt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,kt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){kt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=uB(e.writeResults,e.commitTime),r=Ra(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Qx(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>lB(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{}class i8 extends r8{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Me(ye.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Go(e,Yx(n,r),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Me(ye.UNKNOWN,a.toString())})}Ho(e,n,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Ho(e,Yx(n,r),i,o,s,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Me(ye.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class a8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ao(n),this.aa=!1):Le("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl="RemoteStore";class o8{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Ql(this)&&(Le(zl,"Restarting streams for network reachability change."),await async function(l){const u=rt(l);u.Ea.add(4),await rp(u),u.Ra.set("Unknown"),u.Ea.delete(4),await vv(u)}(this))})}),this.Ra=new a8(r,i)}}async function vv(t){if(Ql(t))for(const e of t.da)await e(!0)}async function rp(t){for(const e of t.da)await e(!1)}function gD(t,e){const n=rt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),J1(n)?Q1(n):tf(n).O_()&&X1(n,e))}function Y1(t,e){const n=rt(t),r=tf(n);n.Ia.delete(e),r.O_()&&yD(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ql(n)&&n.Ra.set("Unknown"))}function X1(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(et.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}tf(t).Y_(e)}function yD(t,e){t.Va.Ue(e),tf(t).Z_(e)}function Q1(t){t.Va=new eB({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),tf(t).start(),t.Ra.ua()}function J1(t){return Ql(t)&&!tf(t).x_()&&t.Ia.size>0}function Ql(t){return rt(t).Ea.size===0}function vD(t){t.Va=void 0}async function s8(t){t.Ra.set("Online")}async function l8(t){t.Ia.forEach((e,n)=>{X1(t,e)})}async function u8(t,e){vD(t),J1(t)?(t.Ra.ha(e),Q1(t)):t.Ra.set("Unknown")}async function c8(t,e,n){if(t.Ra.set("Online"),e instanceof nD&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const s of a.targetIds)i.Ia.has(s)&&(await i.remoteSyncer.rejectListen(s,o),i.Ia.delete(s),i.Va.removeTarget(s))}(t,e)}catch(r){Le(zl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ng(t,r)}else if(e instanceof Wm?t.Va.Ze(e):e instanceof tD?t.Va.st(e):t.Va.tt(e),!n.isEqual(et.min()))try{const r=await hD(t.localStore);n.compareTo(r)>=0&&await function(a,o){const s=a.Va.Tt(o);return s.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=a.Ia.get(u);c&&a.Ia.set(u,c.withResumeToken(l.resumeToken,o))}}),s.targetMismatches.forEach((l,u)=>{const c=a.Ia.get(l);if(!c)return;a.Ia.set(l,c.withResumeToken(ir.EMPTY_BYTE_STRING,c.snapshotVersion)),yD(a,l);const f=new is(c.target,l,u,c.sequenceNumber);X1(a,f)}),a.remoteSyncer.applyRemoteEvent(s)}(t,n)}catch(r){Le(zl,"Failed to raise snapshot:",r),await Ng(t,r)}}async function Ng(t,e,n){if(!ef(e))throw e;t.Ea.add(1),await rp(t),t.Ra.set("Offline"),n||(n=()=>hD(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Le(zl,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await vv(t)})}function bD(t,e){return e().catch(n=>Ng(t,n,e))}async function bv(t){const e=rt(t),n=Os(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:R1;for(;f8(e);)try{const i=await KB(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,d8(e,i)}catch(i){await Ng(e,i)}xD(e)&&wD(e)}function f8(t){return Ql(t)&&t.Ta.length<10}function d8(t,e){t.Ta.push(e);const n=Os(t);n.O_()&&n.X_&&n.ea(e.mutations)}function xD(t){return Ql(t)&&!Os(t).x_()&&t.Ta.length>0}function wD(t){Os(t).start()}async function h8(t){Os(t).ra()}async function p8(t){const e=Os(t);for(const n of t.Ta)e.ea(n.mutations)}async function m8(t,e,n){const r=t.Ta.shift(),i=B1.from(r,e,n);await bD(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await bv(t)}async function g8(t,e){e&&Os(t).X_&&await async function(r,i){if(function(o){return Q6(o)&&o!==ye.ABORTED}(i.code)){const a=r.Ta.shift();Os(r).B_(),await bD(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await bv(r)}}(t,e),xD(t)&&wD(t)}async function eP(t,e){const n=rt(t);n.asyncQueue.verifyOperationInProgress(),Le(zl,"RemoteStore received new credentials");const r=Ql(n);n.Ea.add(3),await rp(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await vv(n)}async function y8(t,e){const n=rt(t);e?(n.Ea.delete(2),await vv(n)):e||(n.Ea.add(2),await rp(n),n.Ra.set("Unknown"))}function tf(t){return t.ma||(t.ma=function(n,r,i){const a=rt(n);return a.sa(),new t8(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Xo:s8.bind(null,t),t_:l8.bind(null,t),r_:u8.bind(null,t),H_:c8.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),J1(t)?Q1(t):t.Ra.set("Unknown")):(await t.ma.stop(),vD(t))})),t.ma}function Os(t){return t.fa||(t.fa=function(n,r,i){const a=rt(n);return a.sa(),new n8(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:h8.bind(null,t),r_:g8.bind(null,t),ta:p8.bind(null,t),na:m8.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await bv(t)):(await t.fa.stop(),t.Ta.length>0&&(Le(zl,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new bs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const o=Date.now()+r,s=new Z1(e,n,o,i,a);return s.start(r),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Me(ye.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function eS(t,e){if(Ao("AsyncQueue",`${e}: ${t}`),ef(t))return new Me(ye.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{static emptySet(e){return new ec(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||He.comparator(n.key,r.key):(n,r)=>He.comparator(n.key,r.key),this.keyedMap=ld(),this.sortedSet=new cn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ec)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ec;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(){this.ga=new cn(He.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Xe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class xc{constructor(e,n,r,i,a,o,s,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,a){const o=[];return n.forEach(s=>{o.push({type:0,doc:s})}),new xc(e,n,ec.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class b8{constructor(){this.queries=nP(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=rt(n),a=i.queries;i.queries=nP(),a.forEach((o,s)=>{for(const l of s.Sa)l.onError(r)})})(this,new Me(ye.ABORTED,"Firestore shutting down"))}}function nP(){return new Xl(t=>BN(t),fv)}async function _D(t,e){const n=rt(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new v8,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const s=eS(o,`Initialization of query '${Pu(e.query)}' failed`);return void e.onError(s)}n.queries.set(i,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&tS(n)}async function SD(t,e){const n=rt(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function x8(t,e){const n=rt(t);let r=!1;for(const i of e){const a=i.query,o=n.queries.get(a);if(o){for(const s of o.Sa)s.Fa(i)&&(r=!0);o.wa=i}}r&&tS(n)}function w8(t,e,n){const r=rt(t),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(n);r.queries.delete(e)}function tS(t){t.Ca.forEach(e=>{e.next()})}var ew,rP;(rP=ew||(ew={})).Ma="default",rP.Cache="cache";class ED{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new xc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=xc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ew.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e){this.key=e}}class TD{constructor(e){this.key=e}}class _8{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=gt(),this.mutatedKeys=gt(),this.eu=UN(e),this.tu=new ec(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new tP,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,o=i,s=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,f)=>{const m=i.get(c),g=dv(this.query,f)?f:null,b=!!m&&this.mutatedKeys.has(m.key),v=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let x=!1;m&&g?m.data.isEqual(g.data)?b!==v&&(r.track({type:3,doc:g}),x=!0):this.su(m,g)||(r.track({type:2,doc:g}),x=!0,(l&&this.eu(g,l)>0||u&&this.eu(g,u)<0)&&(s=!0)):!m&&g?(r.track({type:0,doc:g}),x=!0):m&&!g&&(r.track({type:1,doc:m}),x=!0,(l||u)&&(s=!0)),x&&(g?(o=o.add(g),a=v?a.add(c):a.delete(c)):(o=o.delete(c),a=a.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),a=a.delete(c.key),r.track({type:1,doc:c})}return{tu:o,iu:r,Cs:s,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((c,f)=>function(g,b){const v=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xe(20277,{Rt:x})}};return v(g)-v(b)}(c.type,f.type)||this.eu(c.doc,f.doc)),this.ou(r),i=i??!1;const s=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new xc(this.query,e.tu,a,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:s}:{au:s}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new tP,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=gt(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new TD(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new AD(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=gt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return xc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const nS="SyncEngine";class S8{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class E8{constructor(e){this.key=e,this.hu=!1}}class A8{constructor(e,n,r,i,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Xl(s=>BN(s),fv),this.Iu=new Map,this.Eu=new Set,this.du=new cn(He.comparator),this.Au=new Map,this.Ru=new q1,this.Vu={},this.mu=new Map,this.fu=bc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function T8(t,e,n=!0){const r=jD(t);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await PD(r,e,n,!0),i}async function P8(t,e){const n=jD(t);await PD(n,e,!0,!1)}async function PD(t,e,n,r){const i=await HB(t.localStore,Ma(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let s;return r&&(s=await O8(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&gD(t.remoteStore,i),s}async function O8(t,e,n,r,i){t.pu=(f,m,g)=>async function(v,x,S,E){let T=x.view.ru(S);T.Cs&&(T=await YT(v.localStore,x.query,!1).then(({documents:w})=>x.view.ru(w,T)));const j=E&&E.targetChanges.get(x.targetId),_=E&&E.targetMismatches.get(x.targetId)!=null,P=x.view.applyChanges(T,v.isPrimaryClient,j,_);return aP(v,x.targetId,P.au),P.snapshot}(t,f,m,g);const a=await YT(t.localStore,e,!0),o=new _8(e,a.Qs),s=o.ru(a.documents),l=np.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(s,t.isPrimaryClient,l);aP(t,n,u.au);const c=new S8(e,n,o);return t.Tu.set(e,c),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function k8(t,e,n){const r=rt(t),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter(o=>!fv(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Jx(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Y1(r.remoteStore,i.targetId),tw(r,i.targetId)}).catch(Zc)):(tw(r,i.targetId),await Jx(r.localStore,i.targetId,!0))}async function C8(t,e){const n=rt(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Y1(n.remoteStore,r.targetId))}async function I8(t,e,n){const r=L8(t);try{const i=await function(o,s){const l=rt(o),u=Zt.now(),c=s.reduce((g,b)=>g.add(b.key),gt());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let b=To(),v=gt();return l.Ns.getEntries(g,c).next(x=>{b=x,b.forEach((S,E)=>{E.isValidDocument()||(v=v.add(S))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,b)).next(x=>{f=x;const S=[];for(const E of s){const T=K6(E,f.get(E.key).overlayedDocument);T!=null&&S.push(new Ds(E.key,T,DN(T.value.mapValue),Or.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,S,s)}).next(x=>{m=x;const S=x.applyToLocalDocumentSet(f,v);return l.documentOverlayCache.saveOverlays(g,x.batchId,S)})}).then(()=>({batchId:m.batchId,changes:qN(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,s,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new cn(mt)),u=u.insert(s,l),o.Vu[o.currentUser.toKey()]=u}(r,i.batchId,n),await ip(r,i.changes),await bv(r.remoteStore)}catch(i){const a=eS(i,"Failed to persist write");n.reject(a)}}async function OD(t,e){const n=rt(t);try{const r=await WB(n.localStore,e);e.targetChanges.forEach((i,a)=>{const o=n.Au.get(a);o&&(kt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?kt(o.hu,14607):i.removedDocuments.size>0&&(kt(o.hu,42227),o.hu=!1))}),await ip(n,r,e)}catch(r){await Zc(r)}}function iP(t,e,n){const r=rt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((a,o)=>{const s=o.view.va(e);s.snapshot&&i.push(s.snapshot)}),function(o,s){const l=rt(o);l.onlineState=s;let u=!1;l.queries.forEach((c,f)=>{for(const m of f.Sa)m.va(s)&&(u=!0)}),u&&tS(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function j8(t,e,n){const r=rt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),a=i&&i.key;if(a){let o=new cn(He.comparator);o=o.insert(a,mr.newNoDocument(a,et.min()));const s=gt().add(a),l=new gv(et.min(),new Map,new cn(mt),o,s);await OD(r,l),r.du=r.du.remove(a),r.Au.delete(e),rS(r)}else await Jx(r.localStore,e,!1).then(()=>tw(r,e,n)).catch(Zc)}async function N8(t,e){const n=rt(t),r=e.batch.batchId;try{const i=await UB(n.localStore,e);CD(n,r,null),kD(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ip(n,i)}catch(i){await Zc(i)}}async function D8(t,e,n){const r=rt(t);try{const i=await function(o,s){const l=rt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,s).next(f=>(kt(f!==null,37113),c=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,s)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,e);CD(r,e,n),kD(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ip(r,i)}catch(i){await Zc(i)}}function kD(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function CD(t,e,n){const r=rt(t);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function tw(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||ID(t,r)})}function ID(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Y1(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),rS(t))}function aP(t,e,n){for(const r of n)r instanceof AD?(t.Ru.addReference(r.key,e),M8(t,r)):r instanceof TD?(Le(nS,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||ID(t,r.key)):Xe(19791,{wu:r})}function M8(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Le(nS,"New document in limbo: "+n),t.Eu.add(r),rS(t))}function rS(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new He(Kt.fromString(e)),r=t.fu.next();t.Au.set(r,new E8(n)),t.du=t.du.insert(n,r),gD(t.remoteStore,new is(Ma(cv(n.path)),r,"TargetPurposeLimboResolution",sv.ce))}}async function ip(t,e,n){const r=rt(t),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((s,l)=>{o.push(r.pu(l,e,n).then(u=>{var c;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(c=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:c.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){i.push(u);const f=H1.As(l.targetId,u);a.push(f)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(l,u){const c=rt(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>ve.forEach(u,m=>ve.forEach(m.Es,g=>c.persistence.referenceDelegate.addReference(f,m.targetId,g)).next(()=>ve.forEach(m.ds,g=>c.persistence.referenceDelegate.removeReference(f,m.targetId,g)))))}catch(f){if(!ef(f))throw f;Le(G1,"Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const g=c.Ms.get(m),b=g.snapshotVersion,v=g.withLastLimboFreeSnapshotVersion(b);c.Ms=c.Ms.insert(m,v)}}}(r.localStore,a))}async function R8(t,e){const n=rt(t);if(!n.currentUser.isEqual(e)){Le(nS,"User change. New user:",e.toKey());const r=await dD(n.localStore,e);n.currentUser=e,function(a,o){a.mu.forEach(s=>{s.forEach(l=>{l.reject(new Me(ye.CANCELLED,o))})}),a.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ip(n,r.Ls)}}function $8(t,e){const n=rt(t),r=n.Au.get(e);if(r&&r.hu)return gt().add(r.key);{let i=gt();const a=n.Iu.get(e);if(!a)return i;for(const o of a){const s=n.Tu.get(o);i=i.unionWith(s.view.nu)}return i}}function jD(t){const e=rt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=OD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=j8.bind(null,e),e.Pu.H_=x8.bind(null,e.eventManager),e.Pu.yu=w8.bind(null,e.eventManager),e}function L8(t){const e=rt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=N8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=D8.bind(null,e),e}class Dg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yv(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return BB(this.persistence,new FB,e.initialUser,this.serializer)}Cu(e){return new fD(K1.mi,this.serializer)}Du(e){return new YB}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Dg.provider={build:()=>new Dg};class F8 extends Dg{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){kt(this.persistence.referenceDelegate instanceof jg,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new EB(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Fr.withCacheSize(this.cacheSizeBytes):Fr.DEFAULT;return new fD(r=>jg.mi(r,n),this.serializer)}}class nw{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>iP(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=R8.bind(null,this.syncEngine),await y8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new b8}()}createDatastore(e){const n=yv(e.databaseInfo.databaseId),r=function(a){return new e8(a)}(e.databaseInfo);return function(a,o,s,l){return new i8(a,o,s,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,a,o,s){return new o8(r,i,a,o,s)}(this.localStore,this.datastore,e.asyncQueue,n=>iP(this.syncEngine,n,0),function(){return JT.v()?new JT:new XB}())}createSyncEngine(e,n){return function(i,a,o,s,l,u,c){const f=new A8(i,a,o,s,l,u);return c&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const a=rt(i);Le(zl,"RemoteStore shutting down."),a.Ea.add(5),await rp(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}nw.provider={build:()=>new nw};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ao("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks="FirestoreClient";class z8{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=hr.UNAUTHENTICATED,this.clientId=M1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{Le(ks,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Le(ks,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=eS(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function nb(t,e){t.asyncQueue.verifyOperationInProgress(),Le(ks,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await dD(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function oP(t,e){t.asyncQueue.verifyOperationInProgress();const n=await V8(t);Le(ks,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>eP(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>eP(e.remoteStore,i)),t._onlineComponents=e}async function V8(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Le(ks,"Using user provided OfflineComponentProvider");try{await nb(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===ye.FAILED_PRECONDITION||i.code===ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;mc("Error using user provided cache. Falling back to memory cache: "+n),await nb(t,new Dg)}}else Le(ks,"Using default OfflineComponentProvider"),await nb(t,new F8(void 0));return t._offlineComponents}async function DD(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Le(ks,"Using user provided OnlineComponentProvider"),await oP(t,t._uninitializedComponentsProvider._online)):(Le(ks,"Using default OnlineComponentProvider"),await oP(t,new nw))),t._onlineComponents}function B8(t){return DD(t).then(e=>e.syncEngine)}async function rw(t){const e=await DD(t),n=e.eventManager;return n.onListen=T8.bind(null,e.syncEngine),n.onUnlisten=k8.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=P8.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=C8.bind(null,e.syncEngine),n}function U8(t,e,n={}){const r=new bs;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,s,l,u){const c=new ND({next:m=>{c.Nu(),o.enqueueAndForget(()=>SD(a,f));const g=m.docs.has(s);!g&&m.fromCache?u.reject(new Me(ye.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&l&&l.source==="server"?u.reject(new Me(ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new ED(cv(s.path),c,{includeMetadataChanges:!0,qa:!0});return _D(a,f)}(await rw(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD="firestore.googleapis.com",lP=!0;class uP{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Me(ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=RD,this.ssl=lP}else this.host=e.host,this.ssl=e.ssl??lP;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cD;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_B)throw new Me(ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}o6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=MD(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Me(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Me(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Me(ye.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xv{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uP({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Me(ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Me(ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uP(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new XV;switch(r.type){case"firstParty":return new e6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Me(ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=sP.get(n);r&&(Le("ComponentProvider","Removing Datastore"),sP.delete(n),r.terminate())}(this),Promise.resolve()}}function W8(t,e,n,r={}){var u;t=ui(t,xv);const i=Yh(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},s=`${e}:${n}`;i&&(uF(`https://${s}`),hF("Firestore",!0)),a.host!==RD&&a.host!==s&&mc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...a,host:s,ssl:i,emulatorOptions:r};if(!Xd(l,o)&&(t._setSettings(l),r.mockUserToken)){let c,f;if(typeof r.mockUserToken=="string")c=r.mockUserToken,f=hr.MOCK_USER;else{c=cF(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Me(ye.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new hr(m)}t._authCredentials=new QV(new _N(c,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new nf(this.firestore,e,this._query)}}class pn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pn(this.firestore,e,this._key)}toJSON(){return{type:pn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Zh(n,pn._jsonSchema))return new pn(e,r||null,new He(Kt.fromString(n.referencePath)))}}pn._jsonSchemaVersion="firestore/documentReference/1.0",pn._jsonSchema={type:kn("string",pn._jsonSchemaVersion),referencePath:kn("string")};class xs extends nf{constructor(e,n,r){super(e,n,cv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pn(this.firestore,null,new He(e))}withConverter(e){return new xs(this.firestore,e,this._path)}}function cl(t,e,...n){if(t=Kn(t),SN("collection","path",e),t instanceof xv){const r=Kt.fromString(e,...n);return _T(r),new xs(t,null,r)}{if(!(t instanceof pn||t instanceof xs))throw new Me(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Kt.fromString(e,...n));return _T(r),new xs(t.firestore,null,r)}}function Lr(t,e,...n){if(t=Kn(t),arguments.length===1&&(e=M1.newId()),SN("doc","path",e),t instanceof xv){const r=Kt.fromString(e,...n);return wT(r),new pn(t,null,new He(r))}{if(!(t instanceof pn||t instanceof xs))throw new Me(ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Kt.fromString(e,...n));return wT(r),new pn(t.firestore,t instanceof xs?t.converter:null,new He(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP="AsyncQueue";class fP{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new pD(this,"async_queue_retry"),this._c=()=>{const r=tb();r&&Le(cP,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=tb();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=tb();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new bs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ef(e))throw e;Le(cP,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Ao("INTERNAL UNHANDLED ERROR: ",dP(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Z1.createAndSchedule(this,e,n,r,a=>this.hc(a));return this.tc.push(i),i}uc(){this.nc&&Xe(47125,{Pc:dP(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function dP(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class Po extends xv{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new fP,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fP(e),this._firestoreClient=void 0,await e}}}function q8(t,e){const n=typeof t=="object"?t:Pz(),r=typeof t=="string"?t:Ag,i=Hj(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=oF("firestore");a&&W8(i,...a)}return i}function wv(t){if(t._terminated)throw new Me(ye.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||K8(t),t._firestoreClient}function K8(t){var r,i,a;const e=t._freezeSettings(),n=function(s,l,u,c){return new y6(s,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,MD(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new z8(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(s){const l=s==null?void 0:s._online.build();return{_offline:s==null?void 0:s._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ki(ir.fromBase64String(e))}catch(n){throw new Me(ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ki(ir.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ki._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zh(e,ki._jsonSchema))return ki.fromBase64String(e.bytes)}}ki._jsonSchemaVersion="firestore/bytes/1.0",ki._jsonSchema={type:kn("string",ki._jsonSchemaVersion),bytes:kn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Me(ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Me(ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Me(ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return mt(this._lat,e._lat)||mt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:$a._jsonSchemaVersion}}static fromJSON(e){if(Zh(e,$a._jsonSchema))return new $a(e.latitude,e.longitude)}}$a._jsonSchemaVersion="firestore/geoPoint/1.0",$a._jsonSchema={type:kn("string",$a._jsonSchemaVersion),latitude:kn("number"),longitude:kn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:La._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zh(e,La._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new La(e.vectorValues);throw new Me(ye.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}La._jsonSchemaVersion="firestore/vectorValue/1.0",La._jsonSchema={type:kn("string",La._jsonSchemaVersion),vectorValues:kn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H8=/^__.*__$/;class G8{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ds(e,this.data,this.fieldMask,n,this.fieldTransforms):new tp(e,this.data,n,this.fieldTransforms)}}class $D{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ds(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function LD(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xe(40011,{Ac:t})}}class aS{constructor(e,n,r,i,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new aS({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Mg(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(LD(this.Ac)&&H8.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Y8{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||yv(e)}Cc(e,n,r,i=!1){return new aS({Ac:e,methodName:n,Dc:r,path:er.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function op(t){const e=t._freezeSettings(),n=yv(t._databaseId);return new Y8(t._databaseId,!!e.ignoreUndefinedProperties,n)}function oS(t,e,n,r,i,a={}){const o=t.Cc(a.merge||a.mergeFields?2:0,e,n,i);sS("Data must be an object, but it was:",o,r);const s=VD(r,o);let l,u;if(a.merge)l=new si(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){const c=[];for(const f of a.mergeFields){const m=iw(e,f,n);if(!o.contains(m))throw new Me(ye.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);UD(c,m)||c.push(m)}l=new si(c),u=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=o.fieldTransforms;return new G8(new Vr(s),l,u)}class _v extends iS{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _v}}function FD(t,e,n,r){const i=t.Cc(1,e,n);sS("Data must be an object, but it was:",i,r);const a=[],o=Vr.empty();Ns(r,(l,u)=>{const c=lS(e,l,n);u=Kn(u);const f=i.yc(c);if(u instanceof _v)a.push(c);else{const m=sp(u,f);m!=null&&(a.push(c),o.set(c,m))}});const s=new si(a);return new $D(o,s,i.fieldTransforms)}function zD(t,e,n,r,i,a){const o=t.Cc(1,e,n),s=[iw(e,r,n)],l=[i];if(a.length%2!=0)throw new Me(ye.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<a.length;m+=2)s.push(iw(e,a[m])),l.push(a[m+1]);const u=[],c=Vr.empty();for(let m=s.length-1;m>=0;--m)if(!UD(u,s[m])){const g=s[m];let b=l[m];b=Kn(b);const v=o.yc(g);if(b instanceof _v)u.push(g);else{const x=sp(b,v);x!=null&&(u.push(g),c.set(g,x))}}const f=new si(u);return new $D(c,f,o.fieldTransforms)}function X8(t,e,n,r=!1){return sp(n,t.Cc(r?4:3,e))}function sp(t,e){if(BD(t=Kn(t)))return sS("Unsupported field value:",e,t),VD(t,e);if(t instanceof iS)return function(r,i){if(!LD(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const a=[];let o=0;for(const s of r){let l=sp(s,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),a.push(l),o++}return{arrayValue:{values:a}}}(t,e)}return function(r,i){if((r=Kn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return z6(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Zt.fromDate(r);return{timestampValue:Ig(i.serializer,a)}}if(r instanceof Zt){const a=new Zt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ig(i.serializer,a)}}if(r instanceof $a)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ki)return{bytesValue:rD(i.serializer,r._byteString)};if(r instanceof pn){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:W1(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof La)return function(o,s){return{mapValue:{fields:{[jN]:{stringValue:NN},[Tg]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw s.Sc("VectorValues must only contain numeric values.");return V1(s.serializer,u)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${ov(r)}`)}(t,e)}function VD(t,e){const n={};return TN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ns(t,(r,i)=>{const a=sp(i,e.mc(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function BD(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Zt||t instanceof $a||t instanceof ki||t instanceof pn||t instanceof iS||t instanceof La)}function sS(t,e,n){if(!BD(n)||!EN(n)){const r=ov(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function iw(t,e,n){if((e=Kn(e))instanceof ap)return e._internalPath;if(typeof e=="string")return lS(t,e);throw Mg("Field path arguments must be of type string or ",t,!1,void 0,n)}const Q8=new RegExp("[~\\*/\\[\\]]");function lS(t,e,n){if(e.search(Q8)>=0)throw Mg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ap(...e.split("."))._internalPath}catch{throw Mg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Mg(t,e,n,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let s=`Function ${e}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=". ";let l="";return(a||o)&&(l+=" (found",a&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Me(ye.INVALID_ARGUMENT,s+t+l)}function UD(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new J8(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(uS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class J8 extends WD{data(){return super.data()}}function uS(t,e){return typeof e=="string"?lS(t,e):e instanceof ap?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z8(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Me(ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cS{}class e9 extends cS{}function t9(t,e,...n){let r=[];e instanceof cS&&r.push(e),r=r.concat(n),function(a){const o=a.filter(l=>l instanceof fS).length,s=a.filter(l=>l instanceof Sv).length;if(o>1||o>0&&s>0)throw new Me(ye.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Sv extends e9{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Sv(e,n,r)}_apply(e){const n=this._parse(e);return qD(e._query,n),new nf(e.firestore,e.converter,Kx(e._query,n))}_parse(e){const n=op(e.firestore);return function(a,o,s,l,u,c,f){let m;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Me(ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){mP(f,c);const b=[];for(const v of f)b.push(pP(l,a,v));m={arrayValue:{values:b}}}else m=pP(l,a,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||mP(f,c),m=X8(s,o,f,c==="in"||c==="not-in");return On.create(u,c,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function n9(t,e,n){const r=e,i=uS("where",t);return Sv._create(i,r,n)}class fS extends cS{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new fS(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:da.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,a){let o=i;const s=a.getFlattenedFilters();for(const l of s)qD(o,l),o=Kx(o,l)}(e._query,n),new nf(e.firestore,e.converter,Kx(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function pP(t,e,n){if(typeof(n=Kn(n))=="string"){if(n==="")throw new Me(ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VN(e)&&n.indexOf("/")!==-1)throw new Me(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Kt.fromString(n));if(!He.isDocumentKey(r))throw new Me(ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return CT(t,new He(r))}if(n instanceof pn)return CT(t,n._key);throw new Me(ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ov(n)}.`)}function mP(t,e){if(!Array.isArray(t)||t.length===0)throw new Me(ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qD(t,e){const n=function(i,a){for(const o of i)for(const s of o.getFlattenedFilters())if(a.indexOf(s.op)>=0)return s.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Me(ye.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Me(ye.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class r9{convertValue(e,n="none"){switch(Ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Xe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ns(e,(i,a)=>{r[i]=this.convertValue(a,n)}),r}convertVectorValue(e){var r,i,a;const n=(a=(i=(r=e.fields)==null?void 0:r[Tg].arrayValue)==null?void 0:i.values)==null?void 0:a.map(o=>yn(o.doubleValue));return new La(n)}convertGeoPoint(e){return new $a(yn(e.latitude),yn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=uv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(th(e));default:return null}}convertTimestamp(e){const n=As(e);return new Zt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Kt.fromString(e);kt(uD(r),9688,{name:e});const i=new nh(r.get(1),r.get(3)),a=new He(r.popFirst(5));return i.isEqual(n)||Ao(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class cd{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kl extends WD{constructor(e,n,r,i,a,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(uS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Me(ye.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=kl._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}kl._jsonSchemaVersion="firestore/documentSnapshot/1.0",kl._jsonSchema={type:kn("string",kl._jsonSchemaVersion),bundleSource:kn("string","DocumentSnapshot"),bundleName:kn("string"),bundle:kn("string")};class qm extends kl{data(e={}){return super.data(e)}}class tc{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new cd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new qm(this._firestore,this._userDataWriter,r.key,r,new cd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Me(ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(s=>{const l=new qm(i._firestore,i._userDataWriter,s.doc.key,s.doc,new cd(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);return s.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(s=>a||s.type!==3).map(s=>{const l=new qm(i._firestore,i._userDataWriter,s.doc.key,s.doc,new cd(i._snapshot.mutatedKeys.has(s.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return s.type!==0&&(u=o.indexOf(s.doc.key),o=o.delete(s.doc.key)),s.type!==1&&(o=o.add(s.doc),c=o.indexOf(s.doc.key)),{type:i9(s.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Me(ye.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=tc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=M1.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function i9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a9(t){t=ui(t,pn);const e=ui(t.firestore,Po);return U8(wv(e),t._key).then(n=>HD(e,t,n))}tc._jsonSchemaVersion="firestore/querySnapshot/1.0",tc._jsonSchema={type:kn("string",tc._jsonSchemaVersion),bundleSource:kn("string","QuerySnapshot"),bundleName:kn("string"),bundle:kn("string")};class KD extends r9{constructor(e){super(),this.firestore=e}convertBytes(e){return new ki(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,n)}}function rb(t,e,n){t=ui(t,pn);const r=ui(t.firestore,Po),i=dS(t.converter,e,n);return lp(r,[oS(op(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Or.none())])}function lm(t,e,n,...r){t=ui(t,pn);const i=ui(t.firestore,Po),a=op(i);let o;return o=typeof(e=Kn(e))=="string"||e instanceof ap?zD(a,"updateDoc",t._key,e,n,r):FD(a,"updateDoc",t._key,e),lp(i,[o.toMutation(t._key,Or.exists(!0))])}function gP(t){return lp(ui(t.firestore,Po),[new mv(t._key,Or.none())])}function um(t,e){const n=ui(t.firestore,Po),r=Lr(t),i=dS(t.converter,e);return lp(n,[oS(op(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Or.exists(!1))]).then(()=>r)}function o9(t,...e){var l,u,c;t=Kn(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||hP(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(hP(e[r])){const f=e[r];e[r]=(l=f.next)==null?void 0:l.bind(f),e[r+1]=(u=f.error)==null?void 0:u.bind(f),e[r+2]=(c=f.complete)==null?void 0:c.bind(f)}let a,o,s;if(t instanceof pn)o=ui(t.firestore,Po),s=cv(t._key.path),a={next:f=>{e[r]&&e[r](HD(o,t,f))},error:e[r+1],complete:e[r+2]};else{const f=ui(t,nf);o=ui(f.firestore,Po),s=f._query;const m=new KD(o);a={next:g=>{e[r]&&e[r](new tc(o,m,f,g))},error:e[r+1],complete:e[r+2]},Z8(t._query)}return function(m,g,b,v){const x=new ND(v),S=new ED(g,x,b);return m.asyncQueue.enqueueAndForget(async()=>_D(await rw(m),S)),()=>{x.Nu(),m.asyncQueue.enqueueAndForget(async()=>SD(await rw(m),S))}}(wv(o),s,i,a)}function lp(t,e){return function(r,i){const a=new bs;return r.asyncQueue.enqueueAndForget(async()=>I8(await B8(r),i,a)),a.promise}(wv(t),e)}function HD(t,e,n){const r=n.docs.get(e._key),i=new KD(t);return new kl(t,i,e._key,r,new cd(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=op(e)}set(e,n,r){this._verifyNotCommitted();const i=ib(e,this._firestore),a=dS(i.converter,n,r),o=oS(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Or.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=ib(e,this._firestore);let o;return o=typeof(n=Kn(n))=="string"||n instanceof ap?zD(this._dataReader,"WriteBatch.update",a._key,n,r,i):FD(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(o.toMutation(a._key,Or.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=ib(e,this._firestore);return this._mutations=this._mutations.concat(new mv(n._key,Or.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(ye.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ib(t,e){if((t=Kn(t)).firestore!==e)throw new Me(ye.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(t){return wv(t=ui(t,Po)),new s9(t,e=>lp(t,e))}(function(e,n=!0){(function(i){Jc=i})(iv),hc(new Ll("firestore",(r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),s=new Po(new JV(r.getProvider("auth-internal")),new t6(o,r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Me(ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nh(u.options.projectId,c)}(o,i),o);return a={useFetchStreams:n,...a},s._setSettings(a),s},"PUBLIC").setMultipleInstances(!0)),ys(yT,vT,e),ys(yT,vT,"esm2020")})();const l9={apiKey:"AIzaSyCq3MZURc1tNUbpK7BDzKZKQoh8C3twzmA",authDomain:"lactokeeper.firebaseapp.com",projectId:"lactokeeper",storageBucket:"https://www.google.com/search?q=lactokeeper.appspot.com",messagingSenderId:"437430613715",appId:"1:437430613715:web:b4e56c7a0698c719ae8626"},YD=Gj(l9),oh=SV(YD,{persistence:VV}),Sn=q8(YD),XD=z.createContext({currentUser:null,isLoading:!0}),QD=()=>z.useContext(XD),u9=({children:t})=>{const[e,n]=z.useState(null),[r,i]=z.useState(!0);z.useEffect(()=>LV(oh,s=>{n(s),i(!1)}),[]);const a={currentUser:e,isLoading:r};return r?d.jsx("div",{className:"bg-gray-900 min-h-screen flex items-center justify-center",children:d.jsx("p",{className:"text-white text-xl",children:"Cargando LactoKeeper..."})}):d.jsx(XD.Provider,{value:a,children:t})};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c9=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),JD=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var f9={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d9=z.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...s},l)=>z.createElement("svg",{ref:l,...f9,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:JD("lucide",i),...s},[...o.map(([u,c])=>z.createElement(u,c)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=(t,e)=>{const n=z.forwardRef(({className:r,...i},a)=>z.createElement(d9,{ref:a,iconNode:e,className:JD(`lucide-${c9(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h9=qe("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hS=qe("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=qe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pS=qe("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mS=qe("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p9=qe("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m9=qe("CalendarCheck2",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 14V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"bce9hv"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m16 20 2 2 4-4",key:"13tcca"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g9=qe("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y9=qe("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=qe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v9=qe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=qe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=qe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b9=qe("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rf=qe("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=qe("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=qe("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=qe("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=qe("Feather",[["path",{d:"M12.67 19a2 2 0 0 0 1.416-.588l6.154-6.172a6 6 0 0 0-8.49-8.49L5.586 9.914A2 2 0 0 0 5 11.328V18a1 1 0 0 0 1 1z",key:"18jl4k"}],["path",{d:"M16 8 2 22",key:"vp34q"}],["path",{d:"M17.5 15H9",key:"1oz8nu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eM=qe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x9=qe("FilterX",[["path",{d:"M13.013 3H2l8 9.46V19l4 2v-8.54l.9-1.055",key:"1fi1da"}],["path",{d:"m22 3-5 5",key:"12jva0"}],["path",{d:"m17 3 5 5",key:"k36vhe"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w9=qe("HeartPulse",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _9=qe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rg=qe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S9=qe("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E9=qe("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A9=qe("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T9=qe("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tM=qe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P9=qe("Milk",[["path",{d:"M8 2h8",key:"1ssgc1"}],["path",{d:"M9 2v2.789a4 4 0 0 1-.672 2.219l-.656.984A4 4 0 0 0 7 10.212V20a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-9.789a4 4 0 0 0-.672-2.219l-.656-.984A4 4 0 0 1 15 4.788V2",key:"qtp12x"}],["path",{d:"M7 15a6.472 6.472 0 0 1 5 0 6.47 6.47 0 0 0 5 0",key:"ygeh44"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O9=qe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k9=qe("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl=qe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C9=qe("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I9=qe("Replace",[["path",{d:"M14 4c0-1.1.9-2 2-2",key:"1mvvbw"}],["path",{d:"M20 2c1.1 0 2 .9 2 2",key:"1mj6oe"}],["path",{d:"M22 8c0 1.1-.9 2-2 2",key:"v1wql3"}],["path",{d:"M16 10c-1.1 0-2-.9-2-2",key:"821ux0"}],["path",{d:"m3 7 3 3 3-3",key:"x25e72"}],["path",{d:"M6 10V5c0-1.7 1.3-3 3-3h1",key:"13af7h"}],["rect",{width:"8",height:"8",x:"2",y:"14",rx:"2",key:"17ihk4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nM=qe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=qe("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j9=qe("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=qe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rM=qe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N9=qe("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D9=qe("Sigma",[["path",{d:"M18 7V4H6l6 8-6 8h12v-3",key:"zis8ev"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M9=qe("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R9=qe("SquareActivity",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M17 12h-2l-2 5-2-10-2 5H7",key:"15hlnc"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $9=qe("SquareCheckBig",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L9=qe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F9=qe("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iM=qe("Syringe",[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z9=qe("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V9=qe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B9=qe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xS=qe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=qe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U9=qe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=qe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W9=qe("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=qe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=qe("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),q9=()=>{const[t,e]=z.useState(!0),[n,r]=z.useState(""),[i,a]=z.useState(""),[o,s]=z.useState(null),[l,u]=z.useState(!1),c=m=>{switch(m.code){case"auth/invalid-email":return"El formato del correo electrónico no es válido.";case"auth/user-not-found":case"auth/wrong-password":return"Correo electrónico o contraseña incorrectos.";case"auth/email-already-in-use":return"Este correo electrónico ya está registrado.";case"auth/weak-password":return"La contraseña debe tener al menos 6 caracteres.";default:return"Ocurrió un error. Por favor, intenta de nuevo."}},f=async m=>{m.preventDefault(),s(null),u(!0);try{t?await $V(oh,n,i):await RV(oh,n,i)}catch(g){s(c(g))}finally{u(!1)}};return d.jsx("div",{className:"bg-gray-900 min-h-screen flex flex-col items-center justify-center p-4 font-sans",children:d.jsxs("div",{className:"w-full max-w-sm",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[d.jsx(up,{className:"w-10 h-10 text-indigo-400"}),d.jsx("h1",{className:"text-4xl font-bold text-white",children:"LactoKeeper"})]}),d.jsx("p",{className:"text-zinc-400",children:"Tu gestión de rebaño, en la nube."})]}),d.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-6 border border-brand-border",children:[d.jsxs("div",{className:"flex bg-zinc-900/80 rounded-xl p-1 w-full mb-6",children:[d.jsx("button",{onClick:()=>e(!0),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t?"bg-zinc-700 text-white":"text-zinc-400 hover:bg-zinc-800/50"}`,children:"Iniciar Sesión"}),d.jsx("button",{onClick:()=>e(!1),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t?"text-zinc-400 hover:bg-zinc-800/50":"bg-zinc-700 text-white"}`,children:"Registrarse"})]}),d.jsxs("form",{onSubmit:f,className:"space-y-4",children:[d.jsx("input",{type:"email",value:n,onChange:m=>r(m.target.value),placeholder:"Correo electrónico",required:!0,className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl border border-transparent focus:border-brand-amber focus:ring-0 focus:outline-none placeholder-zinc-400"}),d.jsx("input",{type:"password",value:i,onChange:m=>a(m.target.value),placeholder:"Contraseña",required:!0,className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl border border-transparent focus:border-brand-amber focus:ring-0 focus:outline-none placeholder-zinc-400"}),o&&d.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-red-300",children:[d.jsx(Rs,{size:18}),d.jsx("span",{children:o})]}),d.jsx("button",{type:"submit",disabled:l,className:"w-full bg-brand-amber text-black font-bold py-3 rounded-xl transition-colors hover:bg-yellow-500 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Procesando...":t?"Iniciar Sesión":"Crear Cuenta"})]})]})]})})};var aM={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Cu,function(){var n=function(p,y){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,C){A.__proto__=C}||function(A,C){for(var M in C)Object.prototype.hasOwnProperty.call(C,M)&&(A[M]=C[M])})(p,y)},r=function(){return(r=Object.assign||function(p){for(var y,A=1,C=arguments.length;A<C;A++)for(var M in y=arguments[A])Object.prototype.hasOwnProperty.call(y,M)&&(p[M]=y[M]);return p}).apply(this,arguments)};function i(p,y,A){for(var C,M=0,F=y.length;M<F;M++)!C&&M in y||((C=C||Array.prototype.slice.call(y,0,M))[M]=y[M]);return p.concat(C||Array.prototype.slice.call(y))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Cu,o=Object.keys,s=Array.isArray;function l(p,y){return typeof y!="object"||o(y).forEach(function(A){p[A]=y[A]}),p}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var u=Object.getPrototypeOf,c={}.hasOwnProperty;function f(p,y){return c.call(p,y)}function m(p,y){typeof y=="function"&&(y=y(u(p))),(typeof Reflect>"u"?o:Reflect.ownKeys)(y).forEach(function(A){b(p,A,y[A])})}var g=Object.defineProperty;function b(p,y,A,C){g(p,y,l(A&&f(A,"get")&&typeof A.get=="function"?{get:A.get,set:A.set,configurable:!0}:{value:A,configurable:!0,writable:!0},C))}function v(p){return{from:function(y){return p.prototype=Object.create(y.prototype),b(p.prototype,"constructor",p),{extend:m.bind(null,p.prototype)}}}}var x=Object.getOwnPropertyDescriptor,S=[].slice;function E(p,y,A){return S.call(p,y,A)}function T(p,y){return y(p)}function j(p){if(!p)throw new Error("Assertion Failed")}function _(p){a.setImmediate?setImmediate(p):setTimeout(p,0)}function P(p,y){if(typeof y=="string"&&f(p,y))return p[y];if(!y)return p;if(typeof y!="string"){for(var A=[],C=0,M=y.length;C<M;++C){var F=P(p,y[C]);A.push(F)}return A}var B=y.indexOf(".");if(B!==-1){var W=p[y.substr(0,B)];return W==null?void 0:P(W,y.substr(B+1))}}function w(p,y,A){if(p&&y!==void 0&&!("isFrozen"in Object&&Object.isFrozen(p)))if(typeof y!="string"&&"length"in y){j(typeof A!="string"&&"length"in A);for(var C=0,M=y.length;C<M;++C)w(p,y[C],A[C])}else{var F,B,W=y.indexOf(".");W!==-1?(F=y.substr(0,W),(B=y.substr(W+1))===""?A===void 0?s(p)&&!isNaN(parseInt(F))?p.splice(F,1):delete p[F]:p[F]=A:w(W=!(W=p[F])||!f(p,F)?p[F]={}:W,B,A)):A===void 0?s(p)&&!isNaN(parseInt(y))?p.splice(y,1):delete p[y]:p[y]=A}}function O(p){var y,A={};for(y in p)f(p,y)&&(A[y]=p[y]);return A}var I=[].concat;function R(p){return I.apply([],p)}var mi="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(R([8,16,32,64].map(function(p){return["Int","Uint","Float"].map(function(y){return y+p+"Array"})}))).filter(function(p){return a[p]}),D=new Set(mi.map(function(p){return a[p]})),$=null;function L(p){return $=new WeakMap,p=function y(A){if(!A||typeof A!="object")return A;var C=$.get(A);if(C)return C;if(s(A)){C=[],$.set(A,C);for(var M=0,F=A.length;M<F;++M)C.push(y(A[M]))}else if(D.has(A.constructor))C=A;else{var B,W=u(A);for(B in C=W===Object.prototype?{}:Object.create(W),$.set(A,C),A)f(A,B)&&(C[B]=y(A[B]))}return C}(p),$=null,p}var ne={}.toString;function ae(p){return ne.call(p).slice(8,-1)}var ce=typeof Symbol<"u"?Symbol.iterator:"@@iterator",me=typeof ce=="symbol"?function(p){var y;return p!=null&&(y=p[ce])&&y.apply(p)}:function(){return null};function X(p,y){return y=p.indexOf(y),0<=y&&p.splice(y,1),0<=y}var ie={};function ge(p){var y,A,C,M;if(arguments.length===1){if(s(p))return p.slice();if(this===ie&&typeof p=="string")return[p];if(M=me(p)){for(A=[];!(C=M.next()).done;)A.push(C.value);return A}if(p==null)return[p];if(typeof(y=p.length)!="number")return[p];for(A=new Array(y);y--;)A[y]=p[y];return A}for(y=arguments.length,A=new Array(y);y--;)A[y]=arguments[y];return A}var Te=typeof Symbol<"u"?function(p){return p[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},zn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Si=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(zn),be={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function he(p,y){this.name=p,this.message=y}function Se(p,y){return p+". Errors: "+Object.keys(y).map(function(A){return y[A].toString()}).filter(function(A,C,M){return M.indexOf(A)===C}).join(`
`)}function Ve(p,y,A,C){this.failures=y,this.failedKeys=C,this.successCount=A,this.message=Se(p,y)}function We(p,y){this.name="BulkError",this.failures=Object.keys(y).map(function(A){return y[A]}),this.failuresByPos=y,this.message=Se(p,this.failures)}v(he).from(Error).extend({toString:function(){return this.name+": "+this.message}}),v(Ve).from(he),v(We).from(he);var we=Si.reduce(function(p,y){return p[y]=y+"Error",p},{}),Be=he,te=Si.reduce(function(p,y){var A=y+"Error";function C(M,F){this.name=A,M?typeof M=="string"?(this.message="".concat(M).concat(F?`
 `+F:""),this.inner=F||null):typeof M=="object"&&(this.message="".concat(M.name," ").concat(M.message),this.inner=M):(this.message=be[y]||A,this.inner=null)}return v(C).from(Be),p[y]=C,p},{});te.Syntax=SyntaxError,te.Type=TypeError,te.Range=RangeError;var $e=zn.reduce(function(p,y){return p[y+"Error"]=te[y],p},{}),Ue=Si.reduce(function(p,y){return["Syntax","Type","Range"].indexOf(y)===-1&&(p[y+"Error"]=te[y]),p},{});function se(){}function ut(p){return p}function Ee(p,y){return p==null||p===ut?y:function(A){return y(p(A))}}function ct(p,y){return function(){p.apply(this,arguments),y.apply(this,arguments)}}function yt(p,y){return p===se?y:function(){var A=p.apply(this,arguments);A!==void 0&&(arguments[0]=A);var C=this.onsuccess,M=this.onerror;this.onsuccess=null,this.onerror=null;var F=y.apply(this,arguments);return C&&(this.onsuccess=this.onsuccess?ct(C,this.onsuccess):C),M&&(this.onerror=this.onerror?ct(M,this.onerror):M),F!==void 0?F:A}}function Ut(p,y){return p===se?y:function(){p.apply(this,arguments);var A=this.onsuccess,C=this.onerror;this.onsuccess=this.onerror=null,y.apply(this,arguments),A&&(this.onsuccess=this.onsuccess?ct(A,this.onsuccess):A),C&&(this.onerror=this.onerror?ct(C,this.onerror):C)}}function Gn(p,y){return p===se?y:function(A){var C=p.apply(this,arguments);l(A,C);var M=this.onsuccess,F=this.onerror;return this.onsuccess=null,this.onerror=null,A=y.apply(this,arguments),M&&(this.onsuccess=this.onsuccess?ct(M,this.onsuccess):M),F&&(this.onerror=this.onerror?ct(F,this.onerror):F),C===void 0?A===void 0?void 0:A:l(C,A)}}function Ct(p,y){return p===se?y:function(){return y.apply(this,arguments)!==!1&&p.apply(this,arguments)}}function Mt(p,y){return p===se?y:function(){var A=p.apply(this,arguments);if(A&&typeof A.then=="function"){for(var C=this,M=arguments.length,F=new Array(M);M--;)F[M]=arguments[M];return A.then(function(){return y.apply(C,F)})}return y.apply(this,arguments)}}Ue.ModifyError=Ve,Ue.DexieError=he,Ue.BulkError=We;var tt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ft(p){tt=p}var bn={},Yr=100,mi=typeof Promise>"u"?[]:function(){var p=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[p,u(p),p];var y=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[y,u(y),p]}(),zn=mi[0],Si=mi[1],mi=mi[2],Si=Si&&Si.then,gi=zn&&zn.constructor,Ha=!!mi,Ga=function(p,y){pa.push([p,y]),Ya&&(queueMicrotask(_f),Ya=!1)},Us=!0,Ya=!0,yi=[],vi=[],Xa=ut,jr={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:se,pgp:!1,env:{},finalize:se},Re=jr,pa=[],wr=0,Qe=[];function xe(p){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var y=this._PSD=Re;if(typeof p!="function"){if(p!==bn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&xn(this,this._value))}this._state=null,this._value=null,++y.ref,function A(C,M){try{M(function(F){if(C._state===null){if(F===C)throw new TypeError("A promise cannot be resolved with itself.");var B=C._lib&&Yn();F&&typeof F.then=="function"?A(C,function(W,K){F instanceof xe?F._then(W,K):F.then(W,K)}):(C._state=!0,C._value=F,lt(C)),B&&bi()}},xn.bind(null,C))}catch(F){xn(C,F)}}(this,p)}var Ye={get:function(){var p=Re,y=Xr;function A(C,M){var F=this,B=!p.global&&(p!==Re||y!==Xr),W=B&&!xi(),K=new xe(function(G,Q){zi(F,new Je(Af(C,p,B,W),Af(M,p,B,W),G,Q,p))});return this._consoleTask&&(K._consoleTask=this._consoleTask),K}return A.prototype=bn,A},set:function(p){b(this,"then",p&&p.prototype===bn?Ye:{get:function(){return p},set:Ye.set})}};function Je(p,y,A,C,M){this.onFulfilled=typeof p=="function"?p:null,this.onRejected=typeof y=="function"?y:null,this.resolve=A,this.reject=C,this.psd=M}function xn(p,y){var A,C;vi.push(y),p._state===null&&(A=p._lib&&Yn(),y=Xa(y),p._state=!1,p._value=y,C=p,yi.some(function(M){return M._value===C._value})||yi.push(C),lt(p),A&&bi())}function lt(p){var y=p._listeners;p._listeners=[];for(var A=0,C=y.length;A<C;++A)zi(p,y[A]);var M=p._PSD;--M.ref||M.finalize(),wr===0&&(++wr,Ga(function(){--wr==0&&Sf()},[]))}function zi(p,y){if(p._state!==null){var A=p._state?y.onFulfilled:y.onRejected;if(A===null)return(p._state?y.resolve:y.reject)(p._value);++y.psd.ref,++wr,Ga(wf,[A,p,y])}else p._listeners.push(y)}function wf(p,y,A){try{var C,M=y._value;!y._state&&vi.length&&(vi=[]),C=tt&&y._consoleTask?y._consoleTask.run(function(){return p(M)}):p(M),y._state||vi.indexOf(M)!==-1||function(F){for(var B=yi.length;B;)if(yi[--B]._value===F._value)return yi.splice(B,1)}(y),A.resolve(C)}catch(F){A.reject(F)}finally{--wr==0&&Sf(),--A.psd.ref||A.psd.finalize()}}function _f(){wi(jr,function(){Yn()&&bi()})}function Yn(){var p=Us;return Ya=Us=!1,p}function bi(){var p,y,A;do for(;0<pa.length;)for(p=pa,pa=[],A=p.length,y=0;y<A;++y){var C=p[y];C[0].apply(null,C[1])}while(0<pa.length);Ya=Us=!0}function Sf(){var p=yi;yi=[],p.forEach(function(C){C._PSD.onunhandled.call(null,C._value,C)});for(var y=Qe.slice(0),A=y.length;A;)y[--A]()}function Qa(p){return new xe(bn,!1,p)}function zt(p,y){var A=Re;return function(){var C=Yn(),M=Re;try{return Bi(A,!0),p.apply(this,arguments)}catch(F){y&&y(F)}finally{Bi(M,!1),C&&bi()}}}m(xe.prototype,{then:Ye,_then:function(p,y){zi(this,new Je(null,null,p,y,Re))},catch:function(p){if(arguments.length===1)return this.then(null,p);var y=p,A=arguments[1];return typeof y=="function"?this.then(null,function(C){return(C instanceof y?A:Qa)(C)}):this.then(null,function(C){return(C&&C.name===y?A:Qa)(C)})},finally:function(p){return this.then(function(y){return xe.resolve(p()).then(function(){return y})},function(y){return xe.resolve(p()).then(function(){return Qa(y)})})},timeout:function(p,y){var A=this;return p<1/0?new xe(function(C,M){var F=setTimeout(function(){return M(new te.Timeout(y))},p);A.then(C,M).finally(clearTimeout.bind(null,F))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&b(xe.prototype,Symbol.toStringTag,"Dexie.Promise"),jr.env=Ep(),m(xe,{all:function(){var p=ge.apply(null,arguments).map(Ws);return new xe(function(y,A){p.length===0&&y([]);var C=p.length;p.forEach(function(M,F){return xe.resolve(M).then(function(B){p[F]=B,--C||y(p)},A)})})},resolve:function(p){return p instanceof xe?p:p&&typeof p.then=="function"?new xe(function(y,A){p.then(y,A)}):new xe(bn,!0,p)},reject:Qa,race:function(){var p=ge.apply(null,arguments).map(Ws);return new xe(function(y,A){p.map(function(C){return xe.resolve(C).then(y,A)})})},PSD:{get:function(){return Re},set:function(p){return Re=p}},totalEchoes:{get:function(){return Xr}},newPSD:Vi,usePSD:wi,scheduler:{get:function(){return Ga},set:function(p){Ga=p}},rejectionMapper:{get:function(){return Xa},set:function(p){Xa=p}},follow:function(p,y){return new xe(function(A,C){return Vi(function(M,F){var B=Re;B.unhandleds=[],B.onunhandled=F,B.finalize=ct(function(){var W,K=this;W=function(){K.unhandleds.length===0?M():F(K.unhandleds[0])},Qe.push(function G(){W(),Qe.splice(Qe.indexOf(G),1)}),++wr,Ga(function(){--wr==0&&Sf()},[])},B.finalize),p()},y,A,C)})}}),gi&&(gi.allSettled&&b(xe,"allSettled",function(){var p=ge.apply(null,arguments).map(Ws);return new xe(function(y){p.length===0&&y([]);var A=p.length,C=new Array(A);p.forEach(function(M,F){return xe.resolve(M).then(function(B){return C[F]={status:"fulfilled",value:B}},function(B){return C[F]={status:"rejected",reason:B}}).then(function(){return--A||y(C)})})})}),gi.any&&typeof AggregateError<"u"&&b(xe,"any",function(){var p=ge.apply(null,arguments).map(Ws);return new xe(function(y,A){p.length===0&&A(new AggregateError([]));var C=p.length,M=new Array(C);p.forEach(function(F,B){return xe.resolve(F).then(function(W){return y(W)},function(W){M[B]=W,--C||A(new AggregateError(M))})})})}),gi.withResolvers&&(xe.withResolvers=gi.withResolvers));var mn={awaits:0,echoes:0,id:0},Ef=0,ma=[],iu=0,Xr=0,Sp=0;function Vi(p,y,A,C){var M=Re,F=Object.create(M);return F.parent=M,F.ref=0,F.global=!1,F.id=++Sp,jr.env,F.env=Ha?{Promise:xe,PromiseProp:{value:xe,configurable:!0,writable:!0},all:xe.all,race:xe.race,allSettled:xe.allSettled,any:xe.any,resolve:xe.resolve,reject:xe.reject}:{},y&&l(F,y),++M.ref,F.finalize=function(){--this.parent.ref||this.parent.finalize()},C=wi(F,p,A,C),F.ref===0&&F.finalize(),C}function ga(){return mn.id||(mn.id=++Ef),++mn.awaits,mn.echoes+=Yr,mn.id}function xi(){return!!mn.awaits&&(--mn.awaits==0&&(mn.id=0),mn.echoes=mn.awaits*Yr,!0)}function Ws(p){return mn.echoes&&p&&p.constructor===gi?(ga(),p.then(function(y){return xi(),y},function(y){return xi(),Vt(y)})):p}function h0(){var p=ma[ma.length-1];ma.pop(),Bi(p,!1)}function Bi(p,y){var A,C=Re;(y?!mn.echoes||iu++&&p===Re:!iu||--iu&&p===Re)||queueMicrotask(y?(function(M){++Xr,mn.echoes&&--mn.echoes!=0||(mn.echoes=mn.awaits=mn.id=0),ma.push(Re),Bi(M,!0)}).bind(null,p):h0),p!==Re&&(Re=p,C===jr&&(jr.env=Ep()),Ha&&(A=jr.env.Promise,y=p.env,(C.global||p.global)&&(Object.defineProperty(a,"Promise",y.PromiseProp),A.all=y.all,A.race=y.race,A.resolve=y.resolve,A.reject=y.reject,y.allSettled&&(A.allSettled=y.allSettled),y.any&&(A.any=y.any))))}function Ep(){var p=a.Promise;return Ha?{Promise:p,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:p.all,race:p.race,allSettled:p.allSettled,any:p.any,resolve:p.resolve,reject:p.reject}:{}}function wi(p,y,A,C,M){var F=Re;try{return Bi(p,!0),y(A,C,M)}finally{Bi(F,!1)}}function Af(p,y,A,C){return typeof p!="function"?p:function(){var M=Re;A&&ga(),Bi(y,!0);try{return p.apply(this,arguments)}finally{Bi(M,!1),C&&queueMicrotask(xi)}}}function qs(p){Promise===gi&&mn.echoes===0?iu===0?p():enqueueNativeMicroTask(p):setTimeout(p,0)}(""+Si).indexOf("[native code]")===-1&&(ga=xi=se);var Vt=xe.reject,_r="￿",Qr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ap="String expected.",Ja=[],Ks="__dbnames",au="readonly",Hs="readwrite";function Ui(p,y){return p?y?function(){return p.apply(this,arguments)&&y.apply(this,arguments)}:p:y}var Tf={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Gs(p){return typeof p!="string"||/\./.test(p)?function(y){return y}:function(y){return y[p]===void 0&&p in y&&delete(y=L(y))[p],y}}function Pf(){throw te.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function dt(p,y){try{var A=Wi(p),C=Wi(y);if(A!==C)return A==="Array"?1:C==="Array"?-1:A==="binary"?1:C==="binary"?-1:A==="string"?1:C==="string"?-1:A==="Date"?1:C!=="Date"?NaN:-1;switch(A){case"number":case"Date":case"string":return y<p?1:p<y?-1:0;case"binary":return function(M,F){for(var B=M.length,W=F.length,K=B<W?B:W,G=0;G<K;++G)if(M[G]!==F[G])return M[G]<F[G]?-1:1;return B===W?0:B<W?-1:1}(Jr(p),Jr(y));case"Array":return function(M,F){for(var B=M.length,W=F.length,K=B<W?B:W,G=0;G<K;++G){var Q=dt(M[G],F[G]);if(Q!==0)return Q}return B===W?0:B<W?-1:1}(p,y)}}catch{}return NaN}function Wi(p){var y=typeof p;return y!="object"?y:ArrayBuffer.isView(p)?"binary":(p=ae(p),p==="ArrayBuffer"?"binary":p)}function Jr(p){return p instanceof Uint8Array?p:ArrayBuffer.isView(p)?new Uint8Array(p.buffer,p.byteOffset,p.byteLength):new Uint8Array(p)}function ya(p,y,A){var C=p.schema.yProps;return C?(y&&0<A.numFailures&&(y=y.filter(function(M,F){return!A.failures[F]})),Promise.all(C.map(function(M){return M=M.updatesTable,y?p.db.table(M).where("k").anyOf(y).delete():p.db.table(M).clear()})).then(function(){return A})):A}var $o=(It.prototype._trans=function(p,y,A){var C=this._tx||Re.trans,M=this.name,F=tt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(p==="readonly"?"read":"write"," ").concat(this.name));function B(G,Q,q){if(!q.schema[M])throw new te.NotFound("Table "+M+" not part of transaction");return y(q.idbtrans,q)}var W=Yn();try{var K=C&&C.db._novip===this.db._novip?C===Re.trans?C._promise(p,B,A):Vi(function(){return C._promise(p,B,A)},{trans:C,transless:Re.transless||Re}):function G(Q,q,ee,H){if(Q.idbdb&&(Q._state.openComplete||Re.letThrough||Q._vip)){var Y=Q._createTransaction(q,ee,Q._dbSchema);try{Y.create(),Q._state.PR1398_maxLoop=3}catch(Z){return Z.name===we.InvalidState&&Q.isOpen()&&0<--Q._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),Q.close({disableAutoOpen:!1}),Q.open().then(function(){return G(Q,q,ee,H)})):Vt(Z)}return Y._promise(q,function(Z,J){return Vi(function(){return Re.trans=Y,H(Z,J,Y)})}).then(function(Z){if(q==="readwrite")try{Y.idbtrans.commit()}catch{}return q==="readonly"?Z:Y._completion.then(function(){return Z})})}if(Q._state.openComplete)return Vt(new te.DatabaseClosed(Q._state.dbOpenError));if(!Q._state.isBeingOpened){if(!Q._state.autoOpen)return Vt(new te.DatabaseClosed);Q.open().catch(se)}return Q._state.dbReadyPromise.then(function(){return G(Q,q,ee,H)})}(this.db,p,[this.name],B);return F&&(K._consoleTask=F,K=K.catch(function(G){return console.trace(G),Vt(G)})),K}finally{W&&bi()}},It.prototype.get=function(p,y){var A=this;return p&&p.constructor===Object?this.where(p).first(y):p==null?Vt(new te.Type("Invalid argument to Table.get()")):this._trans("readonly",function(C){return A.core.get({trans:C,key:p}).then(function(M){return A.hook.reading.fire(M)})}).then(y)},It.prototype.where=function(p){if(typeof p=="string")return new this.db.WhereClause(this,p);if(s(p))return new this.db.WhereClause(this,"[".concat(p.join("+"),"]"));var y=o(p);if(y.length===1)return this.where(y[0]).equals(p[y[0]]);var A=this.schema.indexes.concat(this.schema.primKey).filter(function(W){if(W.compound&&y.every(function(G){return 0<=W.keyPath.indexOf(G)})){for(var K=0;K<y.length;++K)if(y.indexOf(W.keyPath[K])===-1)return!1;return!0}return!1}).sort(function(W,K){return W.keyPath.length-K.keyPath.length})[0];if(A&&this.db._maxKey!==_r){var F=A.keyPath.slice(0,y.length);return this.where(F).equals(F.map(function(K){return p[K]}))}!A&&tt&&console.warn("The query ".concat(JSON.stringify(p)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(y.join("+"),"]"));var C=this.schema.idxByName;function M(W,K){return dt(W,K)===0}var B=y.reduce(function(q,K){var G=q[0],Q=q[1],q=C[K],ee=p[K];return[G||q,G||!q?Ui(Q,q&&q.multi?function(H){return H=P(H,K),s(H)&&H.some(function(Y){return M(ee,Y)})}:function(H){return M(ee,P(H,K))}):Q]},[null,null]),F=B[0],B=B[1];return F?this.where(F.name).equals(p[F.keyPath]).filter(B):A?this.filter(B):this.where(y).equals("")},It.prototype.filter=function(p){return this.toCollection().and(p)},It.prototype.count=function(p){return this.toCollection().count(p)},It.prototype.offset=function(p){return this.toCollection().offset(p)},It.prototype.limit=function(p){return this.toCollection().limit(p)},It.prototype.each=function(p){return this.toCollection().each(p)},It.prototype.toArray=function(p){return this.toCollection().toArray(p)},It.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},It.prototype.orderBy=function(p){return new this.db.Collection(new this.db.WhereClause(this,s(p)?"[".concat(p.join("+"),"]"):p))},It.prototype.reverse=function(){return this.toCollection().reverse()},It.prototype.mapToClass=function(p){var y,A=this.db,C=this.name;function M(){return y!==null&&y.apply(this,arguments)||this}(this.schema.mappedClass=p).prototype instanceof Pf&&(function(K,G){if(typeof G!="function"&&G!==null)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");function Q(){this.constructor=K}n(K,G),K.prototype=G===null?Object.create(G):(Q.prototype=G.prototype,new Q)}(M,y=p),Object.defineProperty(M.prototype,"db",{get:function(){return A},enumerable:!1,configurable:!0}),M.prototype.table=function(){return C},p=M);for(var F=new Set,B=p.prototype;B;B=u(B))Object.getOwnPropertyNames(B).forEach(function(K){return F.add(K)});function W(K){if(!K)return K;var G,Q=Object.create(p.prototype);for(G in K)if(!F.has(G))try{Q[G]=K[G]}catch{}return Q}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=W,this.hook("reading",W),p},It.prototype.defineClass=function(){return this.mapToClass(function(p){l(this,p)})},It.prototype.add=function(p,y){var A=this,C=this.schema.primKey,M=C.auto,F=C.keyPath,B=p;return F&&M&&(B=Gs(F)(p)),this._trans("readwrite",function(W){return A.core.mutate({trans:W,type:"add",keys:y!=null?[y]:null,values:[B]})}).then(function(W){return W.numFailures?xe.reject(W.failures[0]):W.lastResult}).then(function(W){if(F)try{w(p,F,W)}catch{}return W})},It.prototype.update=function(p,y){return typeof p!="object"||s(p)?this.where(":id").equals(p).modify(y):(p=P(p,this.schema.primKey.keyPath),p===void 0?Vt(new te.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(p).modify(y))},It.prototype.put=function(p,y){var A=this,C=this.schema.primKey,M=C.auto,F=C.keyPath,B=p;return F&&M&&(B=Gs(F)(p)),this._trans("readwrite",function(W){return A.core.mutate({trans:W,type:"put",values:[B],keys:y!=null?[y]:null})}).then(function(W){return W.numFailures?xe.reject(W.failures[0]):W.lastResult}).then(function(W){if(F)try{w(p,F,W)}catch{}return W})},It.prototype.delete=function(p){var y=this;return this._trans("readwrite",function(A){return y.core.mutate({trans:A,type:"delete",keys:[p]}).then(function(C){return ya(y,[p],C)}).then(function(C){return C.numFailures?xe.reject(C.failures[0]):void 0})})},It.prototype.clear=function(){var p=this;return this._trans("readwrite",function(y){return p.core.mutate({trans:y,type:"deleteRange",range:Tf}).then(function(A){return ya(p,null,A)})}).then(function(y){return y.numFailures?xe.reject(y.failures[0]):void 0})},It.prototype.bulkGet=function(p){var y=this;return this._trans("readonly",function(A){return y.core.getMany({keys:p,trans:A}).then(function(C){return C.map(function(M){return y.hook.reading.fire(M)})})})},It.prototype.bulkAdd=function(p,y,A){var C=this,M=Array.isArray(y)?y:void 0,F=(A=A||(M?void 0:y))?A.allKeys:void 0;return this._trans("readwrite",function(B){var G=C.schema.primKey,W=G.auto,G=G.keyPath;if(G&&M)throw new te.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(M&&M.length!==p.length)throw new te.InvalidArgument("Arguments objects and keys must have the same length");var K=p.length,G=G&&W?p.map(Gs(G)):p;return C.core.mutate({trans:B,type:"add",keys:M,values:G,wantResults:F}).then(function(Y){var q=Y.numFailures,ee=Y.results,H=Y.lastResult,Y=Y.failures;if(q===0)return F?ee:H;throw new We("".concat(C.name,".bulkAdd(): ").concat(q," of ").concat(K," operations failed"),Y)})})},It.prototype.bulkPut=function(p,y,A){var C=this,M=Array.isArray(y)?y:void 0,F=(A=A||(M?void 0:y))?A.allKeys:void 0;return this._trans("readwrite",function(B){var G=C.schema.primKey,W=G.auto,G=G.keyPath;if(G&&M)throw new te.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(M&&M.length!==p.length)throw new te.InvalidArgument("Arguments objects and keys must have the same length");var K=p.length,G=G&&W?p.map(Gs(G)):p;return C.core.mutate({trans:B,type:"put",keys:M,values:G,wantResults:F}).then(function(Y){var q=Y.numFailures,ee=Y.results,H=Y.lastResult,Y=Y.failures;if(q===0)return F?ee:H;throw new We("".concat(C.name,".bulkPut(): ").concat(q," of ").concat(K," operations failed"),Y)})})},It.prototype.bulkUpdate=function(p){var y=this,A=this.core,C=p.map(function(B){return B.key}),M=p.map(function(B){return B.changes}),F=[];return this._trans("readwrite",function(B){return A.getMany({trans:B,keys:C,cache:"clone"}).then(function(W){var K=[],G=[];p.forEach(function(q,ee){var H=q.key,Y=q.changes,Z=W[ee];if(Z){for(var J=0,re=Object.keys(Y);J<re.length;J++){var ue=re[J],fe=Y[ue];if(ue===y.schema.primKey.keyPath){if(dt(fe,H)!==0)throw new te.Constraint("Cannot update primary key in bulkUpdate()")}else w(Z,ue,fe)}F.push(ee),K.push(H),G.push(Z)}});var Q=K.length;return A.mutate({trans:B,type:"put",keys:K,values:G,updates:{keys:C,changeSpecs:M}}).then(function(q){var ee=q.numFailures,H=q.failures;if(ee===0)return Q;for(var Y=0,Z=Object.keys(H);Y<Z.length;Y++){var J,re=Z[Y],ue=F[Number(re)];ue!=null&&(J=H[re],delete H[re],H[ue]=J)}throw new We("".concat(y.name,".bulkUpdate(): ").concat(ee," of ").concat(Q," operations failed"),H)})})})},It.prototype.bulkDelete=function(p){var y=this,A=p.length;return this._trans("readwrite",function(C){return y.core.mutate({trans:C,type:"delete",keys:p}).then(function(M){return ya(y,p,M)})}).then(function(B){var M=B.numFailures,F=B.lastResult,B=B.failures;if(M===0)return F;throw new We("".concat(y.name,".bulkDelete(): ").concat(M," of ").concat(A," operations failed"),B)})},It);function It(){}function Tt(p){function y(B,W){if(W){for(var K=arguments.length,G=new Array(K-1);--K;)G[K-1]=arguments[K];return A[B].subscribe.apply(null,G),p}if(typeof B=="string")return A[B]}var A={};y.addEventType=F;for(var C=1,M=arguments.length;C<M;++C)F(arguments[C]);return y;function F(B,W,K){if(typeof B!="object"){var G;W=W||Ct;var Q={subscribers:[],fire:K=K||se,subscribe:function(q){Q.subscribers.indexOf(q)===-1&&(Q.subscribers.push(q),Q.fire=W(Q.fire,q))},unsubscribe:function(q){Q.subscribers=Q.subscribers.filter(function(ee){return ee!==q}),Q.fire=Q.subscribers.reduce(W,K)}};return A[B]=y[B]=Q}o(G=B).forEach(function(q){var ee=G[q];if(s(ee))F(q,G[q][0],G[q][1]);else{if(ee!=="asap")throw new te.InvalidArgument("Invalid event config");var H=F(q,ut,function(){for(var Y=arguments.length,Z=new Array(Y);Y--;)Z[Y]=arguments[Y];H.subscribers.forEach(function(J){_(function(){J.apply(null,Z)})})})}})}}function va(p,y){return v(y).from({prototype:p}),y}function _i(p,y){return!(p.filter||p.algorithm||p.or)&&(y?p.justLimit:!p.replayFilter)}function Za(p,y){p.filter=Ui(p.filter,y)}function Of(p,y,A){var C=p.replayFilter;p.replayFilter=C?function(){return Ui(C(),y())}:y,p.justLimit=A&&!C}function Ys(p,y){if(p.isPrimKey)return y.primaryKey;var A=y.getIndexByKeyPath(p.index);if(!A)throw new te.Schema("KeyPath "+p.index+" on object store "+y.name+" is not indexed");return A}function Tp(p,y,A){var C=Ys(p,y.schema);return y.openCursor({trans:A,values:!p.keysOnly,reverse:p.dir==="prev",unique:!!p.unique,query:{index:C,range:p.range}})}function ou(p,y,A,C){var M=p.replayFilter?Ui(p.filter,p.replayFilter()):p.filter;if(p.or){var F={},B=function(W,K,G){var Q,q;M&&!M(K,G,function(ee){return K.stop(ee)},function(ee){return K.fail(ee)})||((q=""+(Q=K.primaryKey))=="[object ArrayBuffer]"&&(q=""+new Uint8Array(Q)),f(F,q)||(F[q]=!0,y(W,K,G)))};return Promise.all([p.or._iterate(B,A),Pp(Tp(p,C,A),p.algorithm,B,!p.keysOnly&&p.valueMapper)])}return Pp(Tp(p,C,A),Ui(p.algorithm,M),y,!p.keysOnly&&p.valueMapper)}function Pp(p,y,A,C){var M=zt(C?function(F,B,W){return A(C(F),B,W)}:A);return p.then(function(F){if(F)return F.start(function(){var B=function(){return F.continue()};y&&!y(F,function(W){return B=W},function(W){F.stop(W),B=se},function(W){F.fail(W),B=se})||M(F.value,F,function(W){return B=W}),B()})})}var Xs=(Lo.prototype.execute=function(p){var y=this["@@propmod"];if(y.add!==void 0){var A=y.add;if(s(A))return i(i([],s(p)?p:[],!0),A).sort();if(typeof A=="number")return(Number(p)||0)+A;if(typeof A=="bigint")try{return BigInt(p)+A}catch{return BigInt(0)+A}throw new TypeError("Invalid term ".concat(A))}if(y.remove!==void 0){var C=y.remove;if(s(C))return s(p)?p.filter(function(M){return!C.includes(M)}).sort():[];if(typeof C=="number")return Number(p)-C;if(typeof C=="bigint")try{return BigInt(p)-C}catch{return BigInt(0)-C}throw new TypeError("Invalid subtrahend ".concat(C))}return A=(A=y.replacePrefix)===null||A===void 0?void 0:A[0],A&&typeof p=="string"&&p.startsWith(A)?y.replacePrefix[1]+p.substring(A.length):p},Lo);function Lo(p){this["@@propmod"]=p}var eo=(vt.prototype._read=function(p,y){var A=this._ctx;return A.error?A.table._trans(null,Vt.bind(null,A.error)):A.table._trans("readonly",p).then(y)},vt.prototype._write=function(p){var y=this._ctx;return y.error?y.table._trans(null,Vt.bind(null,y.error)):y.table._trans("readwrite",p,"locked")},vt.prototype._addAlgorithm=function(p){var y=this._ctx;y.algorithm=Ui(y.algorithm,p)},vt.prototype._iterate=function(p,y){return ou(this._ctx,p,y,this._ctx.table.core)},vt.prototype.clone=function(p){var y=Object.create(this.constructor.prototype),A=Object.create(this._ctx);return p&&l(A,p),y._ctx=A,y},vt.prototype.raw=function(){return this._ctx.valueMapper=null,this},vt.prototype.each=function(p){var y=this._ctx;return this._read(function(A){return ou(y,p,A,y.table.core)})},vt.prototype.count=function(p){var y=this;return this._read(function(A){var C=y._ctx,M=C.table.core;if(_i(C,!0))return M.count({trans:A,query:{index:Ys(C,M.schema),range:C.range}}).then(function(B){return Math.min(B,C.limit)});var F=0;return ou(C,function(){return++F,!1},A,M).then(function(){return F})}).then(p)},vt.prototype.sortBy=function(p,y){var A=p.split(".").reverse(),C=A[0],M=A.length-1;function F(K,G){return G?F(K[A[G]],G-1):K[C]}var B=this._ctx.dir==="next"?1:-1;function W(K,G){return dt(F(K,M),F(G,M))*B}return this.toArray(function(K){return K.sort(W)}).then(y)},vt.prototype.toArray=function(p){var y=this;return this._read(function(A){var C=y._ctx;if(C.dir==="next"&&_i(C,!0)&&0<C.limit){var M=C.valueMapper,F=Ys(C,C.table.core.schema);return C.table.core.query({trans:A,limit:C.limit,values:!0,query:{index:F,range:C.range}}).then(function(W){return W=W.result,M?W.map(M):W})}var B=[];return ou(C,function(W){return B.push(W)},A,C.table.core).then(function(){return B})},p)},vt.prototype.offset=function(p){var y=this._ctx;return p<=0||(y.offset+=p,_i(y)?Of(y,function(){var A=p;return function(C,M){return A===0||(A===1?--A:M(function(){C.advance(A),A=0}),!1)}}):Of(y,function(){var A=p;return function(){return--A<0}})),this},vt.prototype.limit=function(p){return this._ctx.limit=Math.min(this._ctx.limit,p),Of(this._ctx,function(){var y=p;return function(A,C,M){return--y<=0&&C(M),0<=y}},!0),this},vt.prototype.until=function(p,y){return Za(this._ctx,function(A,C,M){return!p(A.value)||(C(M),y)}),this},vt.prototype.first=function(p){return this.limit(1).toArray(function(y){return y[0]}).then(p)},vt.prototype.last=function(p){return this.reverse().first(p)},vt.prototype.filter=function(p){var y;return Za(this._ctx,function(A){return p(A.value)}),(y=this._ctx).isMatch=Ui(y.isMatch,p),this},vt.prototype.and=function(p){return this.filter(p)},vt.prototype.or=function(p){return new this.db.WhereClause(this._ctx.table,p,this)},vt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},vt.prototype.desc=function(){return this.reverse()},vt.prototype.eachKey=function(p){var y=this._ctx;return y.keysOnly=!y.isMatch,this.each(function(A,C){p(C.key,C)})},vt.prototype.eachUniqueKey=function(p){return this._ctx.unique="unique",this.eachKey(p)},vt.prototype.eachPrimaryKey=function(p){var y=this._ctx;return y.keysOnly=!y.isMatch,this.each(function(A,C){p(C.primaryKey,C)})},vt.prototype.keys=function(p){var y=this._ctx;y.keysOnly=!y.isMatch;var A=[];return this.each(function(C,M){A.push(M.key)}).then(function(){return A}).then(p)},vt.prototype.primaryKeys=function(p){var y=this._ctx;if(y.dir==="next"&&_i(y,!0)&&0<y.limit)return this._read(function(C){var M=Ys(y,y.table.core.schema);return y.table.core.query({trans:C,values:!1,limit:y.limit,query:{index:M,range:y.range}})}).then(function(C){return C.result}).then(p);y.keysOnly=!y.isMatch;var A=[];return this.each(function(C,M){A.push(M.primaryKey)}).then(function(){return A}).then(p)},vt.prototype.uniqueKeys=function(p){return this._ctx.unique="unique",this.keys(p)},vt.prototype.firstKey=function(p){return this.limit(1).keys(function(y){return y[0]}).then(p)},vt.prototype.lastKey=function(p){return this.reverse().firstKey(p)},vt.prototype.distinct=function(){var p=this._ctx,p=p.index&&p.table.schema.idxByName[p.index];if(!p||!p.multi)return this;var y={};return Za(this._ctx,function(M){var C=M.primaryKey.toString(),M=f(y,C);return y[C]=!0,!M}),this},vt.prototype.modify=function(p){var y=this,A=this._ctx;return this._write(function(C){var M,F,B;B=typeof p=="function"?p:(M=o(p),F=M.length,function(re){for(var ue=!1,fe=0;fe<F;++fe){var de=M[fe],_e=p[de],Ie=P(re,de);_e instanceof Xs?(w(re,de,_e.execute(Ie)),ue=!0):Ie!==_e&&(w(re,de,_e),ue=!0)}return ue});var W=A.table.core,q=W.schema.primaryKey,K=q.outbound,G=q.extractKey,Q=200,q=y.db._options.modifyChunkSize;q&&(Q=typeof q=="object"?q[W.name]||q["*"]||200:q);function ee(re,de){var fe=de.failures,de=de.numFailures;Y+=re-de;for(var _e=0,Ie=o(fe);_e<Ie.length;_e++){var Pe=Ie[_e];H.push(fe[Pe])}}var H=[],Y=0,Z=[],J=p===kf;return y.clone().primaryKeys().then(function(re){function ue(de){var _e=Math.min(Q,re.length-de),Ie=re.slice(de,de+_e);return(J?Promise.resolve([]):W.getMany({trans:C,keys:Ie,cache:"immutable"})).then(function(Pe){var Oe=[],Ne=[],je=K?[]:null,De=J?Ie:[];if(!J)for(var at=0;at<_e;++at){var xt=Pe[at],nt={value:L(xt),primKey:re[de+at]};B.call(nt,nt.value,nt)!==!1&&(nt.value==null?De.push(re[de+at]):K||dt(G(xt),G(nt.value))===0?(Ne.push(nt.value),K&&je.push(re[de+at])):(De.push(re[de+at]),Oe.push(nt.value)))}return Promise.resolve(0<Oe.length&&W.mutate({trans:C,type:"add",values:Oe}).then(function(fn){for(var Ze in fn.failures)De.splice(parseInt(Ze),1);ee(Oe.length,fn)})).then(function(){return(0<Ne.length||fe&&typeof p=="object")&&W.mutate({trans:C,type:"put",keys:je,values:Ne,criteria:fe,changeSpec:typeof p!="function"&&p,isAdditionalChunk:0<de}).then(function(fn){return ee(Ne.length,fn)})}).then(function(){return(0<De.length||fe&&J)&&W.mutate({trans:C,type:"delete",keys:De,criteria:fe,isAdditionalChunk:0<de}).then(function(fn){return ya(A.table,De,fn)}).then(function(fn){return ee(De.length,fn)})}).then(function(){return re.length>de+_e&&ue(de+Q)})})}var fe=_i(A)&&A.limit===1/0&&(typeof p!="function"||J)&&{index:A.index,range:A.range};return ue(0).then(function(){if(0<H.length)throw new Ve("Error modifying one or more objects",H,Y,Z);return re.length})})})},vt.prototype.delete=function(){var p=this._ctx,y=p.range;return!_i(p)||p.table.schema.yProps||!p.isPrimKey&&y.type!==3?this.modify(kf):this._write(function(A){var C=p.table.core.schema.primaryKey,M=y;return p.table.core.count({trans:A,query:{index:C,range:M}}).then(function(F){return p.table.core.mutate({trans:A,type:"deleteRange",range:M}).then(function(K){var W=K.failures,K=K.numFailures;if(K)throw new Ve("Could not delete some values",Object.keys(W).map(function(G){return W[G]}),F-K);return F-K})})})},vt);function vt(){}var kf=function(p,y){return y.value=null};function Op(p,y){return p<y?-1:p===y?0:1}function kp(p,y){return y<p?-1:p===y?0:1}function ar(p,y,A){return p=p instanceof qi?new p.Collection(p):p,p._ctx.error=new(A||TypeError)(y),p}function Zr(p){return new p.Collection(p,function(){return Cp("")}).limit(0)}function su(p,y,A,C){var M,F,B,W,K,G,Q,q=A.length;if(!A.every(function(Y){return typeof Y=="string"}))return ar(p,Ap);function ee(Y){M=Y==="next"?function(J){return J.toUpperCase()}:function(J){return J.toLowerCase()},F=Y==="next"?function(J){return J.toLowerCase()}:function(J){return J.toUpperCase()},B=Y==="next"?Op:kp;var Z=A.map(function(J){return{lower:F(J),upper:M(J)}}).sort(function(J,re){return B(J.lower,re.lower)});W=Z.map(function(J){return J.upper}),K=Z.map(function(J){return J.lower}),Q=(G=Y)==="next"?"":C}ee("next"),p=new p.Collection(p,function(){return ba(W[0],K[q-1]+C)}),p._ondirectionchange=function(Y){ee(Y)};var H=0;return p._addAlgorithm(function(Y,Z,J){var re=Y.key;if(typeof re!="string")return!1;var ue=F(re);if(y(ue,K,H))return!0;for(var fe=null,de=H;de<q;++de){var _e=function(Ie,Pe,Oe,Ne,je,De){for(var at=Math.min(Ie.length,Ne.length),xt=-1,nt=0;nt<at;++nt){var fn=Pe[nt];if(fn!==Ne[nt])return je(Ie[nt],Oe[nt])<0?Ie.substr(0,nt)+Oe[nt]+Oe.substr(nt+1):je(Ie[nt],Ne[nt])<0?Ie.substr(0,nt)+Ne[nt]+Oe.substr(nt+1):0<=xt?Ie.substr(0,xt)+Pe[xt]+Oe.substr(xt+1):null;je(Ie[nt],fn)<0&&(xt=nt)}return at<Ne.length&&De==="next"?Ie+Oe.substr(Ie.length):at<Ie.length&&De==="prev"?Ie.substr(0,Oe.length):xt<0?null:Ie.substr(0,xt)+Ne[xt]+Oe.substr(xt+1)}(re,ue,W[de],K[de],B,G);_e===null&&fe===null?H=de+1:(fe===null||0<B(fe,_e))&&(fe=_e)}return Z(fe!==null?function(){Y.continue(fe+Q)}:J),!1}),p}function ba(p,y,A,C){return{type:2,lower:p,upper:y,lowerOpen:A,upperOpen:C}}function Cp(p){return{type:1,lower:p,upper:p}}var qi=(Object.defineProperty(wn.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),wn.prototype.between=function(p,y,A,C){A=A!==!1,C=C===!0;try{return 0<this._cmp(p,y)||this._cmp(p,y)===0&&(A||C)&&(!A||!C)?Zr(this):new this.Collection(this,function(){return ba(p,y,!A,!C)})}catch{return ar(this,Qr)}},wn.prototype.equals=function(p){return p==null?ar(this,Qr):new this.Collection(this,function(){return Cp(p)})},wn.prototype.above=function(p){return p==null?ar(this,Qr):new this.Collection(this,function(){return ba(p,void 0,!0)})},wn.prototype.aboveOrEqual=function(p){return p==null?ar(this,Qr):new this.Collection(this,function(){return ba(p,void 0,!1)})},wn.prototype.below=function(p){return p==null?ar(this,Qr):new this.Collection(this,function(){return ba(void 0,p,!1,!0)})},wn.prototype.belowOrEqual=function(p){return p==null?ar(this,Qr):new this.Collection(this,function(){return ba(void 0,p)})},wn.prototype.startsWith=function(p){return typeof p!="string"?ar(this,Ap):this.between(p,p+_r,!0,!0)},wn.prototype.startsWithIgnoreCase=function(p){return p===""?this.startsWith(p):su(this,function(y,A){return y.indexOf(A[0])===0},[p],_r)},wn.prototype.equalsIgnoreCase=function(p){return su(this,function(y,A){return y===A[0]},[p],"")},wn.prototype.anyOfIgnoreCase=function(){var p=ge.apply(ie,arguments);return p.length===0?Zr(this):su(this,function(y,A){return A.indexOf(y)!==-1},p,"")},wn.prototype.startsWithAnyOfIgnoreCase=function(){var p=ge.apply(ie,arguments);return p.length===0?Zr(this):su(this,function(y,A){return A.some(function(C){return y.indexOf(C)===0})},p,_r)},wn.prototype.anyOf=function(){var p=this,y=ge.apply(ie,arguments),A=this._cmp;try{y.sort(A)}catch{return ar(this,Qr)}if(y.length===0)return Zr(this);var C=new this.Collection(this,function(){return ba(y[0],y[y.length-1])});C._ondirectionchange=function(F){A=F==="next"?p._ascending:p._descending,y.sort(A)};var M=0;return C._addAlgorithm(function(F,B,W){for(var K=F.key;0<A(K,y[M]);)if(++M===y.length)return B(W),!1;return A(K,y[M])===0||(B(function(){F.continue(y[M])}),!1)}),C},wn.prototype.notEqual=function(p){return this.inAnyRange([[-1/0,p],[p,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},wn.prototype.noneOf=function(){var p=ge.apply(ie,arguments);if(p.length===0)return new this.Collection(this);try{p.sort(this._ascending)}catch{return ar(this,Qr)}var y=p.reduce(function(A,C){return A?A.concat([[A[A.length-1][1],C]]):[[-1/0,C]]},null);return y.push([p[p.length-1],this.db._maxKey]),this.inAnyRange(y,{includeLowers:!1,includeUppers:!1})},wn.prototype.inAnyRange=function(re,y){var A=this,C=this._cmp,M=this._ascending,F=this._descending,B=this._min,W=this._max;if(re.length===0)return Zr(this);if(!re.every(function(ue){return ue[0]!==void 0&&ue[1]!==void 0&&M(ue[0],ue[1])<=0}))return ar(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",te.InvalidArgument);var K=!y||y.includeLowers!==!1,G=y&&y.includeUppers===!0,Q,q=M;function ee(ue,fe){return q(ue[0],fe[0])}try{(Q=re.reduce(function(ue,fe){for(var de=0,_e=ue.length;de<_e;++de){var Ie=ue[de];if(C(fe[0],Ie[1])<0&&0<C(fe[1],Ie[0])){Ie[0]=B(Ie[0],fe[0]),Ie[1]=W(Ie[1],fe[1]);break}}return de===_e&&ue.push(fe),ue},[])).sort(ee)}catch{return ar(this,Qr)}var H=0,Y=G?function(ue){return 0<M(ue,Q[H][1])}:function(ue){return 0<=M(ue,Q[H][1])},Z=K?function(ue){return 0<F(ue,Q[H][0])}:function(ue){return 0<=F(ue,Q[H][0])},J=Y,re=new this.Collection(this,function(){return ba(Q[0][0],Q[Q.length-1][1],!K,!G)});return re._ondirectionchange=function(ue){q=ue==="next"?(J=Y,M):(J=Z,F),Q.sort(ee)},re._addAlgorithm(function(ue,fe,de){for(var _e,Ie=ue.key;J(Ie);)if(++H===Q.length)return fe(de),!1;return!Y(_e=Ie)&&!Z(_e)||(A._cmp(Ie,Q[H][1])===0||A._cmp(Ie,Q[H][0])===0||fe(function(){q===M?ue.continue(Q[H][0]):ue.continue(Q[H][1])}),!1)}),re},wn.prototype.startsWithAnyOf=function(){var p=ge.apply(ie,arguments);return p.every(function(y){return typeof y=="string"})?p.length===0?Zr(this):this.inAnyRange(p.map(function(y){return[y,y+_r]})):ar(this,"startsWithAnyOf() only works with strings")},wn);function wn(){}function Nr(p){return zt(function(y){return xa(y),p(y.target.error),!1})}function xa(p){p.stopPropagation&&p.stopPropagation(),p.preventDefault&&p.preventDefault()}var Fo="storagemutated",to="x-storagemutated-1",Dr=Tt(null,Fo),Ip=(Mr.prototype._lock=function(){return j(!Re.global),++this._reculock,this._reculock!==1||Re.global||(Re.lockOwnerFor=this),this},Mr.prototype._unlock=function(){if(j(!Re.global),--this._reculock==0)for(Re.global||(Re.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var p=this._blockedFuncs.shift();try{wi(p[1],p[0])}catch{}}return this},Mr.prototype._locked=function(){return this._reculock&&Re.lockOwnerFor!==this},Mr.prototype.create=function(p){var y=this;if(!this.mode)return this;var A=this.db.idbdb,C=this.db._state.dbOpenError;if(j(!this.idbtrans),!p&&!A)switch(C&&C.name){case"DatabaseClosedError":throw new te.DatabaseClosed(C);case"MissingAPIError":throw new te.MissingAPI(C.message,C);default:throw new te.OpenFailed(C)}if(!this.active)throw new te.TransactionInactive;return j(this._completion._state===null),(p=this.idbtrans=p||(this.db.core||A).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=zt(function(M){xa(M),y._reject(p.error)}),p.onabort=zt(function(M){xa(M),y.active&&y._reject(new te.Abort(p.error)),y.active=!1,y.on("abort").fire(M)}),p.oncomplete=zt(function(){y.active=!1,y._resolve(),"mutatedParts"in p&&Dr.storagemutated.fire(p.mutatedParts)}),this},Mr.prototype._promise=function(p,y,A){var C=this;if(p==="readwrite"&&this.mode!=="readwrite")return Vt(new te.ReadOnly("Transaction is readonly"));if(!this.active)return Vt(new te.TransactionInactive);if(this._locked())return new xe(function(F,B){C._blockedFuncs.push([function(){C._promise(p,y,A).then(F,B)},Re])});if(A)return Vi(function(){var F=new xe(function(B,W){C._lock();var K=y(B,W,C);K&&K.then&&K.then(B,W)});return F.finally(function(){return C._unlock()}),F._lib=!0,F});var M=new xe(function(F,B){var W=y(F,B,C);W&&W.then&&W.then(F,B)});return M._lib=!0,M},Mr.prototype._root=function(){return this.parent?this.parent._root():this},Mr.prototype.waitFor=function(p){var y,A=this._root(),C=xe.resolve(p);A._waitingFor?A._waitingFor=A._waitingFor.then(function(){return C}):(A._waitingFor=C,A._waitingQueue=[],y=A.idbtrans.objectStore(A.storeNames[0]),function F(){for(++A._spinCount;A._waitingQueue.length;)A._waitingQueue.shift()();A._waitingFor&&(y.get(-1/0).onsuccess=F)}());var M=A._waitingFor;return new xe(function(F,B){C.then(function(W){return A._waitingQueue.push(zt(F.bind(null,W)))},function(W){return A._waitingQueue.push(zt(B.bind(null,W)))}).finally(function(){A._waitingFor===M&&(A._waitingFor=null)})})},Mr.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new te.Abort))},Mr.prototype.table=function(p){var y=this._memoizedTables||(this._memoizedTables={});if(f(y,p))return y[p];var A=this.schema[p];if(!A)throw new te.NotFound("Table "+p+" not part of transaction");return A=new this.db.Table(p,A,this),A.core=this.db.core.table(p),y[p]=A},Mr);function Mr(){}function Wt(p,y,A,C,M,F,B,W){return{name:p,keyPath:y,unique:A,multi:C,auto:M,compound:F,src:(A&&!B?"&":"")+(C?"*":"")+(M?"++":"")+jp(y),type:W}}function jp(p){return typeof p=="string"?p:p?"["+[].join.call(p,"+")+"]":""}function Cf(p,y,A){return{name:p,primKey:y,indexes:A,mappedClass:null,idxByName:(C=function(M){return[M.name,M]},A.reduce(function(M,F,B){return B=C(F,B),B&&(M[B[0]]=B[1]),M},{}))};var C}var zo=function(p){try{return p.only([[]]),zo=function(){return[[]]},[[]]}catch{return zo=function(){return _r},_r}};function lu(p){return p==null?function(){}:typeof p=="string"?(y=p).split(".").length===1?function(A){return A[y]}:function(A){return P(A,y)}:function(A){return P(A,p)};var y}function If(p){return[].slice.call(p)}var uu=0;function Rr(p){return p==null?":id":typeof p=="string"?p:"[".concat(p.join("+"),"]")}function Np(p,y,K){function C(J){if(J.type===3)return null;if(J.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var H=J.lower,Y=J.upper,Z=J.lowerOpen,J=J.upperOpen;return H===void 0?Y===void 0?null:y.upperBound(Y,!!J):Y===void 0?y.lowerBound(H,!!Z):y.bound(H,Y,!!Z,!!J)}function M(ee){var H,Y=ee.name;return{name:Y,schema:ee,mutate:function(Z){var J=Z.trans,re=Z.type,ue=Z.keys,fe=Z.values,de=Z.range;return new Promise(function(_e,Ie){_e=zt(_e);var Pe=J.objectStore(Y),Oe=Pe.keyPath==null,Ne=re==="put"||re==="add";if(!Ne&&re!=="delete"&&re!=="deleteRange")throw new Error("Invalid operation type: "+re);var je,De=(ue||fe||{length:1}).length;if(ue&&fe&&ue.length!==fe.length)throw new Error("Given keys array must have same length as given values array.");if(De===0)return _e({numFailures:0,failures:{},results:[],lastResult:void 0});function at(Sr){++fn,xa(Sr)}var xt=[],nt=[],fn=0;if(re==="deleteRange"){if(de.type===4)return _e({numFailures:fn,failures:nt,results:[],lastResult:void 0});de.type===3?xt.push(je=Pe.clear()):xt.push(je=Pe.delete(C(de)))}else{var Oe=Ne?Oe?[fe,ue]:[fe,null]:[ue,null],Ze=Oe[0],or=Oe[1];if(Ne)for(var sr=0;sr<De;++sr)xt.push(je=or&&or[sr]!==void 0?Pe[re](Ze[sr],or[sr]):Pe[re](Ze[sr])),je.onerror=at;else for(sr=0;sr<De;++sr)xt.push(je=Pe[re](Ze[sr])),je.onerror=at}function Lp(Sr){Sr=Sr.target.result,xt.forEach(function(rl,v0){return rl.error!=null&&(nt[v0]=rl.error)}),_e({numFailures:fn,failures:nt,results:re==="delete"?ue:xt.map(function(rl){return rl.result}),lastResult:Sr})}je.onerror=function(Sr){at(Sr),Lp(Sr)},je.onsuccess=Lp})},getMany:function(Z){var J=Z.trans,re=Z.keys;return new Promise(function(ue,fe){ue=zt(ue);for(var de,_e=J.objectStore(Y),Ie=re.length,Pe=new Array(Ie),Oe=0,Ne=0,je=function(xt){xt=xt.target,Pe[xt._pos]=xt.result,++Ne===Oe&&ue(Pe)},De=Nr(fe),at=0;at<Ie;++at)re[at]!=null&&((de=_e.get(re[at]))._pos=at,de.onsuccess=je,de.onerror=De,++Oe);Oe===0&&ue(Pe)})},get:function(Z){var J=Z.trans,re=Z.key;return new Promise(function(ue,fe){ue=zt(ue);var de=J.objectStore(Y).get(re);de.onsuccess=function(_e){return ue(_e.target.result)},de.onerror=Nr(fe)})},query:(H=G,function(Z){return new Promise(function(J,re){J=zt(J);var ue,fe,de,Oe=Z.trans,_e=Z.values,Ie=Z.limit,je=Z.query,Pe=Ie===1/0?void 0:Ie,Ne=je.index,je=je.range,Oe=Oe.objectStore(Y),Ne=Ne.isPrimaryKey?Oe:Oe.index(Ne.name),je=C(je);if(Ie===0)return J({result:[]});H?((Pe=_e?Ne.getAll(je,Pe):Ne.getAllKeys(je,Pe)).onsuccess=function(De){return J({result:De.target.result})},Pe.onerror=Nr(re)):(ue=0,fe=!_e&&"openKeyCursor"in Ne?Ne.openKeyCursor(je):Ne.openCursor(je),de=[],fe.onsuccess=function(De){var at=fe.result;return at?(de.push(_e?at.value:at.primaryKey),++ue===Ie?J({result:de}):void at.continue()):J({result:de})},fe.onerror=Nr(re))})}),openCursor:function(Z){var J=Z.trans,re=Z.values,ue=Z.query,fe=Z.reverse,de=Z.unique;return new Promise(function(_e,Ie){_e=zt(_e);var Ne=ue.index,Pe=ue.range,Oe=J.objectStore(Y),Oe=Ne.isPrimaryKey?Oe:Oe.index(Ne.name),Ne=fe?de?"prevunique":"prev":de?"nextunique":"next",je=!re&&"openKeyCursor"in Oe?Oe.openKeyCursor(C(Pe),Ne):Oe.openCursor(C(Pe),Ne);je.onerror=Nr(Ie),je.onsuccess=zt(function(De){var at,xt,nt,fn,Ze=je.result;Ze?(Ze.___id=++uu,Ze.done=!1,at=Ze.continue.bind(Ze),xt=(xt=Ze.continuePrimaryKey)&&xt.bind(Ze),nt=Ze.advance.bind(Ze),fn=function(){throw new Error("Cursor not stopped")},Ze.trans=J,Ze.stop=Ze.continue=Ze.continuePrimaryKey=Ze.advance=function(){throw new Error("Cursor not started")},Ze.fail=zt(Ie),Ze.next=function(){var or=this,sr=1;return this.start(function(){return sr--?or.continue():or.stop()}).then(function(){return or})},Ze.start=function(or){function sr(){if(je.result)try{or()}catch(Sr){Ze.fail(Sr)}else Ze.done=!0,Ze.start=function(){throw new Error("Cursor behind last entry")},Ze.stop()}var Lp=new Promise(function(Sr,rl){Sr=zt(Sr),je.onerror=Nr(rl),Ze.fail=rl,Ze.stop=function(v0){Ze.stop=Ze.continue=Ze.continuePrimaryKey=Ze.advance=fn,Sr(v0)}});return je.onsuccess=zt(function(Sr){je.onsuccess=sr,sr()}),Ze.continue=at,Ze.continuePrimaryKey=xt,Ze.advance=nt,sr(),Lp},_e(Ze)):_e(null)},Ie)})},count:function(Z){var J=Z.query,re=Z.trans,ue=J.index,fe=J.range;return new Promise(function(de,_e){var Ie=re.objectStore(Y),Pe=ue.isPrimaryKey?Ie:Ie.index(ue.name),Ie=C(fe),Pe=Ie?Pe.count(Ie):Pe.count();Pe.onsuccess=zt(function(Oe){return de(Oe.target.result)}),Pe.onerror=Nr(_e)})}}}var F,B,W,Q=(B=K,W=If((F=p).objectStoreNames),{schema:{name:F.name,tables:W.map(function(ee){return B.objectStore(ee)}).map(function(ee){var H=ee.keyPath,J=ee.autoIncrement,Y=s(H),Z={},J={name:ee.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:H==null,compound:Y,keyPath:H,autoIncrement:J,unique:!0,extractKey:lu(H)},indexes:If(ee.indexNames).map(function(re){return ee.index(re)}).map(function(de){var ue=de.name,fe=de.unique,_e=de.multiEntry,de=de.keyPath,_e={name:ue,compound:s(de),keyPath:de,unique:fe,multiEntry:_e,extractKey:lu(de)};return Z[Rr(de)]=_e}),getIndexByKeyPath:function(re){return Z[Rr(re)]}};return Z[":id"]=J.primaryKey,H!=null&&(Z[Rr(H)]=J.primaryKey),J})},hasGetAll:0<W.length&&"getAll"in B.objectStore(W[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),K=Q.schema,G=Q.hasGetAll,Q=K.tables.map(M),q={};return Q.forEach(function(ee){return q[ee.name]=ee}),{stack:"dbcore",transaction:p.transaction.bind(p),table:function(ee){if(!q[ee])throw new Error("Table '".concat(ee,"' not found"));return q[ee]},MIN_KEY:-1/0,MAX_KEY:zo(y),schema:K}}function p0(p,y,A,C){var M=A.IDBKeyRange;return A.indexedDB,{dbcore:(C=Np(y,M,C),p.dbcore.reduce(function(F,B){return B=B.create,r(r({},F),B(F))},C))}}function wa(p,C){var A=C.db,C=p0(p._middlewares,A,p._deps,C);p.core=C.dbcore,p.tables.forEach(function(M){var F=M.name;p.core.schema.tables.some(function(B){return B.name===F})&&(M.core=p.core.table(F),p[F]instanceof p.Table&&(p[F].core=M.core))})}function Qs(p,y,A,C){A.forEach(function(M){var F=C[M];y.forEach(function(B){var W=function K(G,Q){return x(G,Q)||(G=u(G))&&K(G,Q)}(B,M);(!W||"value"in W&&W.value===void 0)&&(B===p.Transaction.prototype||B instanceof p.Transaction?b(B,M,{get:function(){return this.table(M)},set:function(K){g(this,M,{value:K,writable:!0,configurable:!0,enumerable:!0})}}):B[M]=new p.Table(M,F))})})}function Js(p,y){y.forEach(function(A){for(var C in A)A[C]instanceof p.Table&&delete A[C]})}function cu(p,y){return p._cfg.version-y._cfg.version}function Dp(p,y,A,C){var M=p._dbSchema;A.objectStoreNames.contains("$meta")&&!M.$meta&&(M.$meta=Cf("$meta",hu("")[0],[]),p._storeNames.push("$meta"));var F=p._createTransaction("readwrite",p._storeNames,M);F.create(A),F._completion.catch(C);var B=F._reject.bind(F),W=Re.transless||Re;Vi(function(){return Re.trans=F,Re.transless=W,y!==0?(wa(p,A),G=y,((K=F).storeNames.includes("$meta")?K.table("$meta").get("version").then(function(Q){return Q??G}):xe.resolve(G)).then(function(Q){return ee=Q,H=F,Y=A,Z=[],Q=(q=p)._versions,J=q._dbSchema=el(0,q.idbdb,Y),(Q=Q.filter(function(re){return re._cfg.version>=ee})).length!==0?(Q.forEach(function(re){Z.push(function(){var ue=J,fe=re._cfg.dbschema;Bo(q,ue,Y),Bo(q,fe,Y),J=q._dbSchema=fe;var de=jf(ue,fe);de.add.forEach(function(Ne){du(Y,Ne[0],Ne[1].primKey,Ne[1].indexes)}),de.change.forEach(function(Ne){if(Ne.recreate)throw new te.Upgrade("Not yet support for changing primary key");var je=Y.objectStore(Ne.name);Ne.add.forEach(function(De){return Zs(je,De)}),Ne.change.forEach(function(De){je.deleteIndex(De.name),Zs(je,De)}),Ne.del.forEach(function(De){return je.deleteIndex(De)})});var _e=re._cfg.contentUpgrade;if(_e&&re._cfg.version>ee){wa(q,Y),H._memoizedTables={};var Ie=O(fe);de.del.forEach(function(Ne){Ie[Ne]=ue[Ne]}),Js(q,[q.Transaction.prototype]),Qs(q,[q.Transaction.prototype],o(Ie),Ie),H.schema=Ie;var Pe,Oe=Te(_e);return Oe&&ga(),de=xe.follow(function(){var Ne;(Pe=_e(H))&&Oe&&(Ne=xi.bind(null,null),Pe.then(Ne,Ne))}),Pe&&typeof Pe.then=="function"?xe.resolve(Pe):de.then(function(){return Pe})}}),Z.push(function(ue){var fe,de,_e=re._cfg.dbschema;fe=_e,de=ue,[].slice.call(de.db.objectStoreNames).forEach(function(Ie){return fe[Ie]==null&&de.db.deleteObjectStore(Ie)}),Js(q,[q.Transaction.prototype]),Qs(q,[q.Transaction.prototype],q._storeNames,q._dbSchema),H.schema=q._dbSchema}),Z.push(function(ue){q.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(q.idbdb.version/10)===re._cfg.version?(q.idbdb.deleteObjectStore("$meta"),delete q._dbSchema.$meta,q._storeNames=q._storeNames.filter(function(fe){return fe!=="$meta"})):ue.objectStore("$meta").put(re._cfg.version,"version"))})}),function re(){return Z.length?xe.resolve(Z.shift()(H.idbtrans)).then(re):xe.resolve()}().then(function(){Vo(J,Y)})):xe.resolve();var q,ee,H,Y,Z,J}).catch(B)):(o(M).forEach(function(Q){du(A,Q,M[Q].primKey,M[Q].indexes)}),wa(p,A),void xe.follow(function(){return p.on.populate.fire(F)}).catch(B));var K,G})}function fu(p,y){Vo(p._dbSchema,y),y.db.version%10!=0||y.objectStoreNames.contains("$meta")||y.db.createObjectStore("$meta").add(Math.ceil(y.db.version/10-1),"version");var A=el(0,p.idbdb,y);Bo(p,p._dbSchema,y);for(var C=0,M=jf(A,p._dbSchema).change;C<M.length;C++){var F=function(B){if(B.change.length||B.recreate)return console.warn("Unable to patch indexes of table ".concat(B.name," because it has changes on the type of index or primary key.")),{value:void 0};var W=y.objectStore(B.name);B.add.forEach(function(K){tt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(B.name,".").concat(K.src)),Zs(W,K)})}(M[C]);if(typeof F=="object")return F.value}}function jf(p,y){var A,C={del:[],add:[],change:[]};for(A in p)y[A]||C.del.push(A);for(A in y){var M=p[A],F=y[A];if(M){var B={name:A,def:F,recreate:!1,del:[],add:[],change:[]};if(""+(M.primKey.keyPath||"")!=""+(F.primKey.keyPath||"")||M.primKey.auto!==F.primKey.auto)B.recreate=!0,C.change.push(B);else{var W=M.idxByName,K=F.idxByName,G=void 0;for(G in W)K[G]||B.del.push(G);for(G in K){var Q=W[G],q=K[G];Q?Q.src!==q.src&&B.change.push(q):B.add.push(q)}(0<B.del.length||0<B.add.length||0<B.change.length)&&C.change.push(B)}}else C.add.push([A,F])}return C}function du(p,y,A,C){var M=p.db.createObjectStore(y,A.keyPath?{keyPath:A.keyPath,autoIncrement:A.auto}:{autoIncrement:A.auto});return C.forEach(function(F){return Zs(M,F)}),M}function Vo(p,y){o(p).forEach(function(A){y.db.objectStoreNames.contains(A)||(tt&&console.debug("Dexie: Creating missing table",A),du(y,A,p[A].primKey,p[A].indexes))})}function Zs(p,y){p.createIndex(y.name,y.keyPath,{unique:y.unique,multiEntry:y.multi})}function el(p,y,A){var C={};return E(y.objectStoreNames,0).forEach(function(M){for(var F=A.objectStore(M),B=Wt(jp(G=F.keyPath),G||"",!0,!1,!!F.autoIncrement,G&&typeof G!="string",!0),W=[],K=0;K<F.indexNames.length;++K){var Q=F.index(F.indexNames[K]),G=Q.keyPath,Q=Wt(Q.name,G,!!Q.unique,!!Q.multiEntry,!1,G&&typeof G!="string",!1);W.push(Q)}C[M]=Cf(M,B,W)}),C}function Bo(p,y,A){for(var C=A.db.objectStoreNames,M=0;M<C.length;++M){var F=C[M],B=A.objectStore(F);p._hasGetAll="getAll"in B;for(var W=0;W<B.indexNames.length;++W){var K=B.indexNames[W],G=B.index(K).keyPath,Q=typeof G=="string"?G:"["+E(G).join("+")+"]";!y[F]||(G=y[F].idxByName[Q])&&(G.name=K,delete y[F].idxByName[Q],y[F].idxByName[K]=G)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(p._hasGetAll=!1)}function hu(p){return p.split(",").map(function(y,A){var F=y.split(":"),C=(M=F[1])===null||M===void 0?void 0:M.trim(),M=(y=F[0].trim()).replace(/([&*]|\+\+)/g,""),F=/^\[/.test(M)?M.match(/^\[(.*)\]$/)[1].split("+"):M;return Wt(M,F||null,/\&/.test(y),/\*/.test(y),/\+\+/.test(y),s(F),A===0,C)})}var Mp=(Ki.prototype._createTableSchema=Cf,Ki.prototype._parseIndexSyntax=hu,Ki.prototype._parseStoresSpec=function(p,y){var A=this;o(p).forEach(function(C){if(p[C]!==null){var M=A._parseIndexSyntax(p[C]),F=M.shift();if(!F)throw new te.Schema("Invalid schema for table "+C+": "+p[C]);if(F.unique=!0,F.multi)throw new te.Schema("Primary key cannot be multiEntry*");M.forEach(function(B){if(B.auto)throw new te.Schema("Only primary key can be marked as autoIncrement (++)");if(!B.keyPath)throw new te.Schema("Index must have a name and cannot be an empty string")}),M=A._createTableSchema(C,F,M),y[C]=M}})},Ki.prototype.stores=function(A){var y=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,A):A;var A=y._versions,C={},M={};return A.forEach(function(F){l(C,F._cfg.storesSource),M=F._cfg.dbschema={},F._parseStoresSpec(C,M)}),y._dbSchema=M,Js(y,[y._allTables,y,y.Transaction.prototype]),Qs(y,[y._allTables,y,y.Transaction.prototype,this._cfg.tables],o(M),M),y._storeNames=o(M),this},Ki.prototype.upgrade=function(p){return this._cfg.contentUpgrade=Mt(this._cfg.contentUpgrade||se,p),this},Ki);function Ki(){}function pu(p,y){var A=p._dbNamesDB;return A||(A=p._dbNamesDB=new no(Ks,{addons:[],indexedDB:p,IDBKeyRange:y})).version(1).stores({dbnames:"name"}),A.table("dbnames")}function mu(p){return p&&typeof p.databases=="function"}function Hi(p){return Vi(function(){return Re.letThrough=!0,p()})}function gu(p){return!("from"in p)}var In=function(p,y){if(!this){var A=new In;return p&&"d"in p&&l(A,p),A}l(this,arguments.length?{d:1,from:p,to:1<arguments.length?y:p}:{d:0})};function Uo(p,y,A){var C=dt(y,A);if(!isNaN(C)){if(0<C)throw RangeError();if(gu(p))return l(p,{from:y,to:A,d:1});var M=p.l,C=p.r;if(dt(A,p.from)<0)return M?Uo(M,y,A):p.l={from:y,to:A,d:1,l:null,r:null},Nf(p);if(0<dt(y,p.to))return C?Uo(C,y,A):p.r={from:y,to:A,d:1,l:null,r:null},Nf(p);dt(y,p.from)<0&&(p.from=y,p.l=null,p.d=C?C.d+1:1),0<dt(A,p.to)&&(p.to=A,p.r=null,p.d=p.l?p.l.d+1:1),A=!p.r,M&&!p.l&&Wo(p,M),C&&A&&Wo(p,C)}}function Wo(p,y){gu(y)||function A(C,K){var F=K.from,B=K.to,W=K.l,K=K.r;Uo(C,F,B),W&&A(C,W),K&&A(C,K)}(p,y)}function tl(p,y){var A=Vn(y),C=A.next();if(C.done)return!1;for(var M=C.value,F=Vn(p),B=F.next(M.from),W=B.value;!C.done&&!B.done;){if(dt(W.from,M.to)<=0&&0<=dt(W.to,M.from))return!0;dt(M.from,W.from)<0?M=(C=A.next(W.from)).value:W=(B=F.next(M.from)).value}return!1}function Vn(p){var y=gu(p)?null:{s:0,n:p};return{next:function(A){for(var C=0<arguments.length;y;)switch(y.s){case 0:if(y.s=1,C)for(;y.n.l&&dt(A,y.n.from)<0;)y={up:y,n:y.n.l,s:1};else for(;y.n.l;)y={up:y,n:y.n.l,s:1};case 1:if(y.s=2,!C||dt(A,y.n.to)<=0)return{value:y.n,done:!1};case 2:if(y.n.r){y.s=3,y={up:y,n:y.n.r,s:0};continue}case 3:y=y.up}return{done:!0}}}}function Nf(p){var y,A,C=(((y=p.r)===null||y===void 0?void 0:y.d)||0)-(((A=p.l)===null||A===void 0?void 0:A.d)||0),M=1<C?"r":C<-1?"l":"";M&&(y=M=="r"?"l":"r",A=r({},p),C=p[M],p.from=C.from,p.to=C.to,p[M]=C[M],A[M]=C[y],(p[y]=A).d=Df(A)),p.d=Df(p)}function Df(A){var y=A.r,A=A.l;return(y?A?Math.max(y.d,A.d):y.d:A?A.d:0)+1}function Gi(p,y){return o(y).forEach(function(A){p[A]?Wo(p[A],y[A]):p[A]=function C(M){var F,B,W={};for(F in M)f(M,F)&&(B=M[F],W[F]=!B||typeof B!="object"||D.has(B.constructor)?B:C(B));return W}(y[A])}),p}function h(p,y){return p.all||y.all||Object.keys(p).some(function(A){return y[A]&&tl(y[A],p[A])})}m(In.prototype,((Si={add:function(p){return Wo(this,p),this},addKey:function(p){return Uo(this,p,p),this},addKeys:function(p){var y=this;return p.forEach(function(A){return Uo(y,A,A)}),this},hasKey:function(p){var y=Vn(this).next(p).value;return y&&dt(y.from,p)<=0&&0<=dt(y.to,p)}})[ce]=function(){return Vn(this)},Si));var k={},N={},V=!1;function oe(p){Gi(N,p),V||(V=!0,setTimeout(function(){V=!1,le(N,!(N={}))},0))}function le(p,y){y===void 0&&(y=!1);var A=new Set;if(p.all)for(var C=0,M=Object.values(k);C<M.length;C++)Ce(B=M[C],p,A,y);else for(var F in p){var B,W=/^idb\:\/\/(.*)\/(.*)\//.exec(F);W&&(F=W[1],W=W[2],(B=k["idb://".concat(F,"/").concat(W)])&&Ce(B,p,A,y))}A.forEach(function(K){return K()})}function Ce(p,y,A,C){for(var M=[],F=0,B=Object.entries(p.queries.query);F<B.length;F++){for(var W=B[F],K=W[0],G=[],Q=0,q=W[1];Q<q.length;Q++){var ee=q[Q];h(y,ee.obsSet)?ee.subscribers.forEach(function(J){return A.add(J)}):C&&G.push(ee)}C&&M.push([K,G])}if(C)for(var H=0,Y=M;H<Y.length;H++){var Z=Y[H],K=Z[0],G=Z[1];p.queries.query[K]=G}}function it(p){var y=p._state,A=p._deps.indexedDB;if(y.isBeingOpened||p.idbdb)return y.dbReadyPromise.then(function(){return y.dbOpenError?Vt(y.dbOpenError):p});y.isBeingOpened=!0,y.dbOpenError=null,y.openComplete=!1;var C=y.openCanceller,M=Math.round(10*p.verno),F=!1;function B(){if(y.openCanceller!==C)throw new te.DatabaseClosed("db.open() was cancelled")}function W(){return new xe(function(ee,H){if(B(),!A)throw new te.MissingAPI;var Y=p.name,Z=y.autoSchema||!M?A.open(Y):A.open(Y,M);if(!Z)throw new te.MissingAPI;Z.onerror=Nr(H),Z.onblocked=zt(p._fireOnBlocked),Z.onupgradeneeded=zt(function(J){var re;Q=Z.transaction,y.autoSchema&&!p._options.allowEmptyDB?(Z.onerror=xa,Q.abort(),Z.result.close(),(re=A.deleteDatabase(Y)).onsuccess=re.onerror=zt(function(){H(new te.NoSuchDatabase("Database ".concat(Y," doesnt exist")))})):(Q.onerror=Nr(H),J=J.oldVersion>Math.pow(2,62)?0:J.oldVersion,q=J<1,p.idbdb=Z.result,F&&fu(p,Q),Dp(p,J/10,Q,H))},H),Z.onsuccess=zt(function(){Q=null;var J,re,ue,fe,de,_e=p.idbdb=Z.result,Ie=E(_e.objectStoreNames);if(0<Ie.length)try{var Pe=_e.transaction((fe=Ie).length===1?fe[0]:fe,"readonly");if(y.autoSchema)re=_e,ue=Pe,(J=p).verno=re.version/10,ue=J._dbSchema=el(0,re,ue),J._storeNames=E(re.objectStoreNames,0),Qs(J,[J._allTables],o(ue),ue);else if(Bo(p,p._dbSchema,Pe),((de=jf(el(0,(de=p).idbdb,Pe),de._dbSchema)).add.length||de.change.some(function(Oe){return Oe.add.length||Oe.change.length}))&&!F)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),_e.close(),M=_e.version+1,F=!0,ee(W());wa(p,Pe)}catch{}Ja.push(p),_e.onversionchange=zt(function(Oe){y.vcFired=!0,p.on("versionchange").fire(Oe)}),_e.onclose=zt(function(Oe){p.on("close").fire(Oe)}),q&&(de=p._deps,Pe=Y,_e=de.indexedDB,de=de.IDBKeyRange,mu(_e)||Pe===Ks||pu(_e,de).put({name:Pe}).catch(se)),ee()},H)}).catch(function(ee){switch(ee==null?void 0:ee.name){case"UnknownError":if(0<y.PR1398_maxLoop)return y.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),W();break;case"VersionError":if(0<M)return M=0,W()}return xe.reject(ee)})}var K,G=y.dbReadyResolve,Q=null,q=!1;return xe.race([C,(typeof navigator>"u"?xe.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(ee){function H(){return indexedDB.databases().finally(ee)}K=setInterval(H,100),H()}).finally(function(){return clearInterval(K)}):Promise.resolve()).then(W)]).then(function(){return B(),y.onReadyBeingFired=[],xe.resolve(Hi(function(){return p.on.ready.fire(p.vip)})).then(function ee(){if(0<y.onReadyBeingFired.length){var H=y.onReadyBeingFired.reduce(Mt,se);return y.onReadyBeingFired=[],xe.resolve(Hi(function(){return H(p.vip)})).then(ee)}})}).finally(function(){y.openCanceller===C&&(y.onReadyBeingFired=null,y.isBeingOpened=!1)}).catch(function(ee){y.dbOpenError=ee;try{Q&&Q.abort()}catch{}return C===y.openCanceller&&p._close(),Vt(ee)}).finally(function(){y.openComplete=!0,G()}).then(function(){var ee;return q&&(ee={},p.tables.forEach(function(H){H.schema.indexes.forEach(function(Y){Y.name&&(ee["idb://".concat(p.name,"/").concat(H.name,"/").concat(Y.name)]=new In(-1/0,[[[]]]))}),ee["idb://".concat(p.name,"/").concat(H.name,"/")]=ee["idb://".concat(p.name,"/").concat(H.name,"/:dels")]=new In(-1/0,[[[]]])}),Dr(Fo).fire(ee),le(ee,!0)),p})}function an(p){function y(F){return p.next(F)}var A=M(y),C=M(function(F){return p.throw(F)});function M(F){return function(K){var W=F(K),K=W.value;return W.done?K:K&&typeof K.then=="function"?K.then(A,C):s(K)?Promise.all(K).then(A,C):A(K)}}return M(y)()}function Et(p,y,A){for(var C=s(p)?p.slice():[p],M=0;M<A;++M)C.push(y);return C}var _n={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(p){return r(r({},p),{table:function(y){var A=p.table(y),C=A.schema,M={},F=[];function B(q,ee,H){var Y=Rr(q),Z=M[Y]=M[Y]||[],J=q==null?0:typeof q=="string"?1:q.length,re=0<ee,re=r(r({},H),{name:re?"".concat(Y,"(virtual-from:").concat(H.name,")"):H.name,lowLevelIndex:H,isVirtual:re,keyTail:ee,keyLength:J,extractKey:lu(q),unique:!re&&H.unique});return Z.push(re),re.isPrimaryKey||F.push(re),1<J&&B(J===2?q[0]:q.slice(0,J-1),ee+1,H),Z.sort(function(ue,fe){return ue.keyTail-fe.keyTail}),re}y=B(C.primaryKey.keyPath,0,C.primaryKey),M[":id"]=[y];for(var W=0,K=C.indexes;W<K.length;W++){var G=K[W];B(G.keyPath,0,G)}function Q(q){var ee,H=q.query.index;return H.isVirtual?r(r({},q),{query:{index:H.lowLevelIndex,range:(ee=q.query.range,H=H.keyTail,{type:ee.type===1?2:ee.type,lower:Et(ee.lower,ee.lowerOpen?p.MAX_KEY:p.MIN_KEY,H),lowerOpen:!0,upper:Et(ee.upper,ee.upperOpen?p.MIN_KEY:p.MAX_KEY,H),upperOpen:!0})}}):q}return r(r({},A),{schema:r(r({},C),{primaryKey:y,indexes:F,getIndexByKeyPath:function(q){return(q=M[Rr(q)])&&q[0]}}),count:function(q){return A.count(Q(q))},query:function(q){return A.query(Q(q))},openCursor:function(q){var ee=q.query.index,H=ee.keyTail,Y=ee.isVirtual,Z=ee.keyLength;return Y?A.openCursor(Q(q)).then(function(re){return re&&J(re)}):A.openCursor(q);function J(re){return Object.create(re,{continue:{value:function(ue){ue!=null?re.continue(Et(ue,q.reverse?p.MAX_KEY:p.MIN_KEY,H)):q.unique?re.continue(re.key.slice(0,Z).concat(q.reverse?p.MIN_KEY:p.MAX_KEY,H)):re.continue()}},continuePrimaryKey:{value:function(ue,fe){re.continuePrimaryKey(Et(ue,p.MAX_KEY,H),fe)}},primaryKey:{get:function(){return re.primaryKey}},key:{get:function(){var ue=re.key;return Z===1?ue[0]:ue.slice(0,Z)}},value:{get:function(){return re.value}}})}}})}})}};function $r(p,y,A,C){return A=A||{},C=C||"",o(p).forEach(function(M){var F,B,W;f(y,M)?(F=p[M],B=y[M],typeof F=="object"&&typeof B=="object"&&F&&B?(W=ae(F))!==ae(B)?A[C+M]=y[M]:W==="Object"?$r(F,B,A,C+M+"."):F!==B&&(A[C+M]=y[M]):F!==B&&(A[C+M]=y[M])):A[C+M]=void 0}),o(y).forEach(function(M){f(p,M)||(A[C+M]=y[M])}),A}function Yi(p,y){return y.type==="delete"?y.keys:y.keys||y.values.map(p.extractKey)}var _a={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(p){return r(r({},p),{table:function(y){var A=p.table(y),C=A.schema.primaryKey;return r(r({},A),{mutate:function(M){var F=Re.trans,B=F.table(y).hook,W=B.deleting,K=B.creating,G=B.updating;switch(M.type){case"add":if(K.fire===se)break;return F._promise("readwrite",function(){return Q(M)},!0);case"put":if(K.fire===se&&G.fire===se)break;return F._promise("readwrite",function(){return Q(M)},!0);case"delete":if(W.fire===se)break;return F._promise("readwrite",function(){return Q(M)},!0);case"deleteRange":if(W.fire===se)break;return F._promise("readwrite",function(){return function q(ee,H,Y){return A.query({trans:ee,values:!1,query:{index:C,range:H},limit:Y}).then(function(Z){var J=Z.result;return Q({type:"delete",keys:J,trans:ee}).then(function(re){return 0<re.numFailures?Promise.reject(re.failures[0]):J.length<Y?{failures:[],numFailures:0,lastResult:void 0}:q(ee,r(r({},H),{lower:J[J.length-1],lowerOpen:!0}),Y)})})}(M.trans,M.range,1e4)},!0)}return A.mutate(M);function Q(q){var ee,H,Y,Z=Re.trans,J=q.keys||Yi(C,q);if(!J)throw new Error("Keys missing");return(q=q.type==="add"||q.type==="put"?r(r({},q),{keys:J}):r({},q)).type!=="delete"&&(q.values=i([],q.values)),q.keys&&(q.keys=i([],q.keys)),ee=A,Y=J,((H=q).type==="add"?Promise.resolve([]):ee.getMany({trans:H.trans,keys:Y,cache:"immutable"})).then(function(re){var ue=J.map(function(fe,de){var _e,Ie,Pe,Oe=re[de],Ne={onerror:null,onsuccess:null};return q.type==="delete"?W.fire.call(Ne,fe,Oe,Z):q.type==="add"||Oe===void 0?(_e=K.fire.call(Ne,fe,q.values[de],Z),fe==null&&_e!=null&&(q.keys[de]=fe=_e,C.outbound||w(q.values[de],C.keyPath,fe))):(_e=$r(Oe,q.values[de]),(Ie=G.fire.call(Ne,_e,fe,Oe,Z))&&(Pe=q.values[de],Object.keys(Ie).forEach(function(je){f(Pe,je)?Pe[je]=Ie[je]:w(Pe,je,Ie[je])}))),Ne});return A.mutate(q).then(function(fe){for(var de=fe.failures,_e=fe.results,Ie=fe.numFailures,fe=fe.lastResult,Pe=0;Pe<J.length;++Pe){var Oe=(_e||J)[Pe],Ne=ue[Pe];Oe==null?Ne.onerror&&Ne.onerror(de[Pe]):Ne.onsuccess&&Ne.onsuccess(q.type==="put"&&re[Pe]?q.values[Pe]:Oe)}return{failures:de,results:_e,numFailures:Ie,lastResult:fe}}).catch(function(fe){return ue.forEach(function(de){return de.onerror&&de.onerror(fe)}),Promise.reject(fe)})})}}})}})}};function Xi(p,y,A){try{if(!y||y.keys.length<p.length)return null;for(var C=[],M=0,F=0;M<y.keys.length&&F<p.length;++M)dt(y.keys[M],p[F])===0&&(C.push(A?L(y.values[M]):y.values[M]),++F);return C.length===p.length?C:null}catch{return null}}var yu={stack:"dbcore",level:-1,create:function(p){return{table:function(y){var A=p.table(y);return r(r({},A),{getMany:function(C){if(!C.cache)return A.getMany(C);var M=Xi(C.keys,C.trans._cache,C.cache==="clone");return M?xe.resolve(M):A.getMany(C).then(function(F){return C.trans._cache={keys:C.keys,values:C.cache==="clone"?L(F):F},F})},mutate:function(C){return C.type!=="add"&&(C.trans._cache=null),A.mutate(C)}})}}}};function vu(p,y){return p.trans.mode==="readonly"&&!!p.subscr&&!p.trans.explicit&&p.trans.db._options.cache!=="disabled"&&!y.schema.primaryKey.outbound}function jE(p,y){switch(p){case"query":return y.values&&!y.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var vL={stack:"dbcore",level:0,name:"Observability",create:function(p){var y=p.schema.name,A=new In(p.MIN_KEY,p.MAX_KEY);return r(r({},p),{transaction:function(C,M,F){if(Re.subscr&&M!=="readonly")throw new te.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Re.querier));return p.transaction(C,M,F)},table:function(C){var M=p.table(C),F=M.schema,B=F.primaryKey,q=F.indexes,W=B.extractKey,K=B.outbound,G=B.autoIncrement&&q.filter(function(H){return H.compound&&H.keyPath.includes(B.keyPath)}),Q=r(r({},M),{mutate:function(H){function Y(je){return je="idb://".concat(y,"/").concat(C,"/").concat(je),fe[je]||(fe[je]=new In)}var Z,J,re,ue=H.trans,fe=H.mutatedParts||(H.mutatedParts={}),de=Y(""),_e=Y(":dels"),Ie=H.type,Ne=H.type==="deleteRange"?[H.range]:H.type==="delete"?[H.keys]:H.values.length<50?[Yi(B,H).filter(function(je){return je}),H.values]:[],Pe=Ne[0],Oe=Ne[1],Ne=H.trans._cache;return s(Pe)?(de.addKeys(Pe),(Ne=Ie==="delete"||Pe.length===Oe.length?Xi(Pe,Ne):null)||_e.addKeys(Pe),(Ne||Oe)&&(Z=Y,J=Ne,re=Oe,F.indexes.forEach(function(je){var De=Z(je.name||"");function at(nt){return nt!=null?je.extractKey(nt):null}function xt(nt){return je.multiEntry&&s(nt)?nt.forEach(function(fn){return De.addKey(fn)}):De.addKey(nt)}(J||re).forEach(function(nt,or){var Ze=J&&at(J[or]),or=re&&at(re[or]);dt(Ze,or)!==0&&(Ze!=null&&xt(Ze),or!=null&&xt(or))})}))):Pe?(Oe={from:(Oe=Pe.lower)!==null&&Oe!==void 0?Oe:p.MIN_KEY,to:(Oe=Pe.upper)!==null&&Oe!==void 0?Oe:p.MAX_KEY},_e.add(Oe),de.add(Oe)):(de.add(A),_e.add(A),F.indexes.forEach(function(je){return Y(je.name).add(A)})),M.mutate(H).then(function(je){return!Pe||H.type!=="add"&&H.type!=="put"||(de.addKeys(je.results),G&&G.forEach(function(De){for(var at=H.values.map(function(Ze){return De.extractKey(Ze)}),xt=De.keyPath.findIndex(function(Ze){return Ze===B.keyPath}),nt=0,fn=je.results.length;nt<fn;++nt)at[nt][xt]=je.results[nt];Y(De.name).addKeys(at)})),ue.mutatedParts=Gi(ue.mutatedParts||{},fe),je})}}),q=function(Y){var Z=Y.query,Y=Z.index,Z=Z.range;return[Y,new In((Y=Z.lower)!==null&&Y!==void 0?Y:p.MIN_KEY,(Z=Z.upper)!==null&&Z!==void 0?Z:p.MAX_KEY)]},ee={get:function(H){return[B,new In(H.key)]},getMany:function(H){return[B,new In().addKeys(H.keys)]},count:q,query:q,openCursor:q};return o(ee).forEach(function(H){Q[H]=function(Y){var Z=Re.subscr,J=!!Z,re=vu(Re,M)&&jE(H,Y)?Y.obsSet={}:Z;if(J){var ue=function(Oe){return Oe="idb://".concat(y,"/").concat(C,"/").concat(Oe),re[Oe]||(re[Oe]=new In)},fe=ue(""),de=ue(":dels"),Z=ee[H](Y),J=Z[0],Z=Z[1];if((H==="query"&&J.isPrimaryKey&&!Y.values?de:ue(J.name||"")).add(Z),!J.isPrimaryKey){if(H!=="count"){var _e=H==="query"&&K&&Y.values&&M.query(r(r({},Y),{values:!1}));return M[H].apply(this,arguments).then(function(Oe){if(H==="query"){if(K&&Y.values)return _e.then(function(at){return at=at.result,fe.addKeys(at),Oe});var Ne=Y.values?Oe.result.map(W):Oe.result;(Y.values?fe:de).addKeys(Ne)}else if(H==="openCursor"){var je=Oe,De=Y.values;return je&&Object.create(je,{key:{get:function(){return de.addKey(je.primaryKey),je.key}},primaryKey:{get:function(){var at=je.primaryKey;return de.addKey(at),at}},value:{get:function(){return De&&fe.addKey(je.primaryKey),je.value}}})}return Oe})}de.add(A)}}return M[H].apply(this,arguments)}}),Q}})}};function NE(p,y,A){if(A.numFailures===0)return y;if(y.type==="deleteRange")return null;var C=y.keys?y.keys.length:"values"in y&&y.values?y.values.length:1;return A.numFailures===C?null:(y=r({},y),s(y.keys)&&(y.keys=y.keys.filter(function(M,F){return!(F in A.failures)})),"values"in y&&s(y.values)&&(y.values=y.values.filter(function(M,F){return!(F in A.failures)})),y)}function m0(p,y){return A=p,((C=y).lower===void 0||(C.lowerOpen?0<dt(A,C.lower):0<=dt(A,C.lower)))&&(p=p,(y=y).upper===void 0||(y.upperOpen?dt(p,y.upper)<0:dt(p,y.upper)<=0));var A,C}function DE(p,y,ee,C,M,F){if(!ee||ee.length===0)return p;var B=y.query.index,W=B.multiEntry,K=y.query.range,G=C.schema.primaryKey.extractKey,Q=B.extractKey,q=(B.lowLevelIndex||B).extractKey,ee=ee.reduce(function(H,Y){var Z=H,J=[];if(Y.type==="add"||Y.type==="put")for(var re=new In,ue=Y.values.length-1;0<=ue;--ue){var fe,de=Y.values[ue],_e=G(de);re.hasKey(_e)||(fe=Q(de),(W&&s(fe)?fe.some(function(je){return m0(je,K)}):m0(fe,K))&&(re.addKey(_e),J.push(de)))}switch(Y.type){case"add":var Ie=new In().addKeys(y.values?H.map(function(De){return G(De)}):H),Z=H.concat(y.values?J.filter(function(De){return De=G(De),!Ie.hasKey(De)&&(Ie.addKey(De),!0)}):J.map(function(De){return G(De)}).filter(function(De){return!Ie.hasKey(De)&&(Ie.addKey(De),!0)}));break;case"put":var Pe=new In().addKeys(Y.values.map(function(De){return G(De)}));Z=H.filter(function(De){return!Pe.hasKey(y.values?G(De):De)}).concat(y.values?J:J.map(function(De){return G(De)}));break;case"delete":var Oe=new In().addKeys(Y.keys);Z=H.filter(function(De){return!Oe.hasKey(y.values?G(De):De)});break;case"deleteRange":var Ne=Y.range;Z=H.filter(function(De){return!m0(G(De),Ne)})}return Z},p);return ee===p?p:(ee.sort(function(H,Y){return dt(q(H),q(Y))||dt(G(H),G(Y))}),y.limit&&y.limit<1/0&&(ee.length>y.limit?ee.length=y.limit:p.length===y.limit&&ee.length<y.limit&&(M.dirty=!0)),F?Object.freeze(ee):ee)}function ME(p,y){return dt(p.lower,y.lower)===0&&dt(p.upper,y.upper)===0&&!!p.lowerOpen==!!y.lowerOpen&&!!p.upperOpen==!!y.upperOpen}function bL(p,y){return function(A,C,M,F){if(A===void 0)return C!==void 0?-1:0;if(C===void 0)return 1;if((C=dt(A,C))===0){if(M&&F)return 0;if(M)return 1;if(F)return-1}return C}(p.lower,y.lower,p.lowerOpen,y.lowerOpen)<=0&&0<=function(A,C,M,F){if(A===void 0)return C!==void 0?1:0;if(C===void 0)return-1;if((C=dt(A,C))===0){if(M&&F)return 0;if(M)return-1;if(F)return 1}return C}(p.upper,y.upper,p.upperOpen,y.upperOpen)}function xL(p,y,A,C){p.subscribers.add(A),C.addEventListener("abort",function(){var M,F;p.subscribers.delete(A),p.subscribers.size===0&&(M=p,F=y,setTimeout(function(){M.subscribers.size===0&&X(F,M)},3e3))})}var wL={stack:"dbcore",level:0,name:"Cache",create:function(p){var y=p.schema.name;return r(r({},p),{transaction:function(A,C,M){var F,B,W=p.transaction(A,C,M);return C==="readwrite"&&(B=(F=new AbortController).signal,M=function(K){return function(){if(F.abort(),C==="readwrite"){for(var G=new Set,Q=0,q=A;Q<q.length;Q++){var ee=q[Q],H=k["idb://".concat(y,"/").concat(ee)];if(H){var Y=p.table(ee),Z=H.optimisticOps.filter(function(De){return De.trans===W});if(W._explicit&&K&&W.mutatedParts)for(var J=0,re=Object.values(H.queries.query);J<re.length;J++)for(var ue=0,fe=(Ie=re[J]).slice();ue<fe.length;ue++)h((Pe=fe[ue]).obsSet,W.mutatedParts)&&(X(Ie,Pe),Pe.subscribers.forEach(function(De){return G.add(De)}));else if(0<Z.length){H.optimisticOps=H.optimisticOps.filter(function(De){return De.trans!==W});for(var de=0,_e=Object.values(H.queries.query);de<_e.length;de++)for(var Ie,Pe,Oe,Ne=0,je=(Ie=_e[de]).slice();Ne<je.length;Ne++)(Pe=je[Ne]).res!=null&&W.mutatedParts&&(K&&!Pe.dirty?(Oe=Object.isFrozen(Pe.res),Oe=DE(Pe.res,Pe.req,Z,Y,Pe,Oe),Pe.dirty?(X(Ie,Pe),Pe.subscribers.forEach(function(De){return G.add(De)})):Oe!==Pe.res&&(Pe.res=Oe,Pe.promise=xe.resolve({result:Oe}))):(Pe.dirty&&X(Ie,Pe),Pe.subscribers.forEach(function(De){return G.add(De)})))}}}G.forEach(function(De){return De()})}}},W.addEventListener("abort",M(!1),{signal:B}),W.addEventListener("error",M(!1),{signal:B}),W.addEventListener("complete",M(!0),{signal:B})),W},table:function(A){var C=p.table(A),M=C.schema.primaryKey;return r(r({},C),{mutate:function(F){var B=Re.trans;if(M.outbound||B.db._options.cache==="disabled"||B.explicit||B.idbtrans.mode!=="readwrite")return C.mutate(F);var W=k["idb://".concat(y,"/").concat(A)];return W?(B=C.mutate(F),F.type!=="add"&&F.type!=="put"||!(50<=F.values.length||Yi(M,F).some(function(K){return K==null}))?(W.optimisticOps.push(F),F.mutatedParts&&oe(F.mutatedParts),B.then(function(K){0<K.numFailures&&(X(W.optimisticOps,F),(K=NE(0,F,K))&&W.optimisticOps.push(K),F.mutatedParts&&oe(F.mutatedParts))}),B.catch(function(){X(W.optimisticOps,F),F.mutatedParts&&oe(F.mutatedParts)})):B.then(function(K){var G=NE(0,r(r({},F),{values:F.values.map(function(Q,q){var ee;return K.failures[q]?Q:(Q=(ee=M.keyPath)!==null&&ee!==void 0&&ee.includes(".")?L(Q):r({},Q),w(Q,M.keyPath,K.results[q]),Q)})}),K);W.optimisticOps.push(G),queueMicrotask(function(){return F.mutatedParts&&oe(F.mutatedParts)})}),B):C.mutate(F)},query:function(F){if(!vu(Re,C)||!jE("query",F))return C.query(F);var B=((G=Re.trans)===null||G===void 0?void 0:G.db._options.cache)==="immutable",q=Re,W=q.requery,K=q.signal,G=function(Y,Z,J,re){var ue=k["idb://".concat(Y,"/").concat(Z)];if(!ue)return[];if(!(Z=ue.queries[J]))return[null,!1,ue,null];var fe=Z[(re.query?re.query.index.name:null)||""];if(!fe)return[null,!1,ue,null];switch(J){case"query":var de=fe.find(function(_e){return _e.req.limit===re.limit&&_e.req.values===re.values&&ME(_e.req.query.range,re.query.range)});return de?[de,!0,ue,fe]:[fe.find(function(_e){return("limit"in _e.req?_e.req.limit:1/0)>=re.limit&&(!re.values||_e.req.values)&&bL(_e.req.query.range,re.query.range)}),!1,ue,fe];case"count":return de=fe.find(function(_e){return ME(_e.req.query.range,re.query.range)}),[de,!!de,ue,fe]}}(y,A,"query",F),Q=G[0],q=G[1],ee=G[2],H=G[3];return Q&&q?Q.obsSet=F.obsSet:(q=C.query(F).then(function(Y){var Z=Y.result;if(Q&&(Q.res=Z),B){for(var J=0,re=Z.length;J<re;++J)Object.freeze(Z[J]);Object.freeze(Z)}else Y.result=L(Z);return Y}).catch(function(Y){return H&&Q&&X(H,Q),Promise.reject(Y)}),Q={obsSet:F.obsSet,promise:q,subscribers:new Set,type:"query",req:F,dirty:!1},H?H.push(Q):(H=[Q],(ee=ee||(k["idb://".concat(y,"/").concat(A)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[F.query.index.name||""]=H)),xL(Q,H,W,K),Q.promise.then(function(Y){return{result:DE(Y.result,F,ee==null?void 0:ee.optimisticOps,C,Q,B)}})}})}})}};function Rp(p,y){return new Proxy(p,{get:function(A,C,M){return C==="db"?y:Reflect.get(A,C,M)}})}var no=(gn.prototype.version=function(p){if(isNaN(p)||p<.1)throw new te.Type("Given version is not a positive number");if(p=Math.round(10*p)/10,this.idbdb||this._state.isBeingOpened)throw new te.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,p);var y=this._versions,A=y.filter(function(C){return C._cfg.version===p})[0];return A||(A=new this.Version(p),y.push(A),y.sort(cu),A.stores({}),this._state.autoSchema=!1,A)},gn.prototype._whenReady=function(p){var y=this;return this.idbdb&&(this._state.openComplete||Re.letThrough||this._vip)?p():new xe(function(A,C){if(y._state.openComplete)return C(new te.DatabaseClosed(y._state.dbOpenError));if(!y._state.isBeingOpened){if(!y._state.autoOpen)return void C(new te.DatabaseClosed);y.open().catch(se)}y._state.dbReadyPromise.then(A,C)}).then(p)},gn.prototype.use=function(p){var y=p.stack,A=p.create,C=p.level,M=p.name;return M&&this.unuse({stack:y,name:M}),p=this._middlewares[y]||(this._middlewares[y]=[]),p.push({stack:y,create:A,level:C??10,name:M}),p.sort(function(F,B){return F.level-B.level}),this},gn.prototype.unuse=function(p){var y=p.stack,A=p.name,C=p.create;return y&&this._middlewares[y]&&(this._middlewares[y]=this._middlewares[y].filter(function(M){return C?M.create!==C:!!A&&M.name!==A})),this},gn.prototype.open=function(){var p=this;return wi(jr,function(){return it(p)})},gn.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var p=this._state,y=Ja.indexOf(this);if(0<=y&&Ja.splice(y,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}p.isBeingOpened||(p.dbReadyPromise=new xe(function(A){p.dbReadyResolve=A}),p.openCanceller=new xe(function(A,C){p.cancelOpen=C}))},gn.prototype.close=function(A){var y=(A===void 0?{disableAutoOpen:!0}:A).disableAutoOpen,A=this._state;y?(A.isBeingOpened&&A.cancelOpen(new te.DatabaseClosed),this._close(),A.autoOpen=!1,A.dbOpenError=new te.DatabaseClosed):(this._close(),A.autoOpen=this._options.autoOpen||A.isBeingOpened,A.openComplete=!1,A.dbOpenError=null)},gn.prototype.delete=function(p){var y=this;p===void 0&&(p={disableAutoOpen:!0});var A=0<arguments.length&&typeof arguments[0]!="object",C=this._state;return new xe(function(M,F){function B(){y.close(p);var W=y._deps.indexedDB.deleteDatabase(y.name);W.onsuccess=zt(function(){var K,G,Q;K=y._deps,G=y.name,Q=K.indexedDB,K=K.IDBKeyRange,mu(Q)||G===Ks||pu(Q,K).delete(G).catch(se),M()}),W.onerror=Nr(F),W.onblocked=y._fireOnBlocked}if(A)throw new te.InvalidArgument("Invalid closeOptions argument to db.delete()");C.isBeingOpened?C.dbReadyPromise.then(B):B()})},gn.prototype.backendDB=function(){return this.idbdb},gn.prototype.isOpen=function(){return this.idbdb!==null},gn.prototype.hasBeenClosed=function(){var p=this._state.dbOpenError;return p&&p.name==="DatabaseClosed"},gn.prototype.hasFailed=function(){return this._state.dbOpenError!==null},gn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(gn.prototype,"tables",{get:function(){var p=this;return o(this._allTables).map(function(y){return p._allTables[y]})},enumerable:!1,configurable:!0}),gn.prototype.transaction=function(){var p=(function(y,A,C){var M=arguments.length;if(M<2)throw new te.InvalidArgument("Too few arguments");for(var F=new Array(M-1);--M;)F[M-1]=arguments[M];return C=F.pop(),[y,R(F),C]}).apply(this,arguments);return this._transaction.apply(this,p)},gn.prototype._transaction=function(p,y,A){var C=this,M=Re.trans;M&&M.db===this&&p.indexOf("!")===-1||(M=null);var F,B,W=p.indexOf("?")!==-1;p=p.replace("!","").replace("?","");try{if(B=y.map(function(G){if(G=G instanceof C.Table?G.name:G,typeof G!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return G}),p=="r"||p===au)F=au;else{if(p!="rw"&&p!=Hs)throw new te.InvalidArgument("Invalid transaction mode: "+p);F=Hs}if(M){if(M.mode===au&&F===Hs){if(!W)throw new te.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");M=null}M&&B.forEach(function(G){if(M&&M.storeNames.indexOf(G)===-1){if(!W)throw new te.SubTransaction("Table "+G+" not included in parent transaction.");M=null}}),W&&M&&!M.active&&(M=null)}}catch(G){return M?M._promise(null,function(Q,q){q(G)}):Vt(G)}var K=(function G(Q,q,ee,H,Y){return xe.resolve().then(function(){var Z=Re.transless||Re,J=Q._createTransaction(q,ee,Q._dbSchema,H);if(J.explicit=!0,Z={trans:J,transless:Z},H)J.idbtrans=H.idbtrans;else try{J.create(),J.idbtrans._explicit=!0,Q._state.PR1398_maxLoop=3}catch(fe){return fe.name===we.InvalidState&&Q.isOpen()&&0<--Q._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),Q.close({disableAutoOpen:!1}),Q.open().then(function(){return G(Q,q,ee,null,Y)})):Vt(fe)}var re,ue=Te(Y);return ue&&ga(),Z=xe.follow(function(){var fe;(re=Y.call(J,J))&&(ue?(fe=xi.bind(null,null),re.then(fe,fe)):typeof re.next=="function"&&typeof re.throw=="function"&&(re=an(re)))},Z),(re&&typeof re.then=="function"?xe.resolve(re).then(function(fe){return J.active?fe:Vt(new te.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Z.then(function(){return re})).then(function(fe){return H&&J._resolve(),J._completion.then(function(){return fe})}).catch(function(fe){return J._reject(fe),Vt(fe)})})}).bind(null,this,F,B,M,A);return M?M._promise(F,K,"lock"):Re.trans?wi(Re.transless,function(){return C._whenReady(K)}):this._whenReady(K)},gn.prototype.table=function(p){if(!f(this._allTables,p))throw new te.InvalidTable("Table ".concat(p," does not exist"));return this._allTables[p]},gn);function gn(p,y){var A=this;this._middlewares={},this.verno=0;var C=gn.dependencies;this._options=y=r({addons:gn.addons,autoOpen:!0,indexedDB:C.indexedDB,IDBKeyRange:C.IDBKeyRange,cache:"cloned"},y),this._deps={indexedDB:y.indexedDB,IDBKeyRange:y.IDBKeyRange},C=y.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var M,F,B,W,K,G={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:se,dbReadyPromise:null,cancelOpen:se,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:y.autoOpen};G.dbReadyPromise=new xe(function(q){G.dbReadyResolve=q}),G.openCanceller=new xe(function(q,ee){G.cancelOpen=ee}),this._state=G,this.name=p,this.on=Tt(this,"populate","blocked","versionchange","close",{ready:[Mt,se]}),this.once=function(q,ee){var H=function(){for(var Y=[],Z=0;Z<arguments.length;Z++)Y[Z]=arguments[Z];A.on(q).unsubscribe(H),ee.apply(A,Y)};return A.on(q,H)},this.on.ready.subscribe=T(this.on.ready.subscribe,function(q){return function(ee,H){gn.vip(function(){var Y,Z=A._state;Z.openComplete?(Z.dbOpenError||xe.resolve().then(ee),H&&q(ee)):Z.onReadyBeingFired?(Z.onReadyBeingFired.push(ee),H&&q(ee)):(q(ee),Y=A,H||q(function J(){Y.on.ready.unsubscribe(ee),Y.on.ready.unsubscribe(J)}))})}}),this.Collection=(M=this,va(eo.prototype,function(re,J){this.db=M;var H=Tf,Y=null;if(J)try{H=J()}catch(ue){Y=ue}var Z=re._ctx,J=Z.table,re=J.hook.reading.fire;this._ctx={table:J,index:Z.index,isPrimKey:!Z.index||J.schema.primKey.keyPath&&Z.index===J.schema.primKey.name,range:H,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Y,or:Z.or,valueMapper:re!==ut?re:null}})),this.Table=(F=this,va($o.prototype,function(q,ee,H){this.db=F,this._tx=H,this.name=q,this.schema=ee,this.hook=F._allTables[q]?F._allTables[q].hook:Tt(null,{creating:[yt,se],reading:[Ee,ut],updating:[Gn,se],deleting:[Ut,se]})})),this.Transaction=(B=this,va(Ip.prototype,function(q,ee,H,Y,Z){var J=this;q!=="readonly"&&ee.forEach(function(re){re=(re=H[re])===null||re===void 0?void 0:re.yProps,re&&(ee=ee.concat(re.map(function(ue){return ue.updatesTable})))}),this.db=B,this.mode=q,this.storeNames=ee,this.schema=H,this.chromeTransactionDurability=Y,this.idbtrans=null,this.on=Tt(this,"complete","error","abort"),this.parent=Z||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new xe(function(re,ue){J._resolve=re,J._reject=ue}),this._completion.then(function(){J.active=!1,J.on.complete.fire()},function(re){var ue=J.active;return J.active=!1,J.on.error.fire(re),J.parent?J.parent._reject(re):ue&&J.idbtrans&&J.idbtrans.abort(),Vt(re)})})),this.Version=(W=this,va(Mp.prototype,function(q){this.db=W,this._cfg={version:q,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(K=this,va(qi.prototype,function(q,ee,H){if(this.db=K,this._ctx={table:q,index:ee===":id"?null:ee,or:H},this._cmp=this._ascending=dt,this._descending=function(Y,Z){return dt(Z,Y)},this._max=function(Y,Z){return 0<dt(Y,Z)?Y:Z},this._min=function(Y,Z){return dt(Y,Z)<0?Y:Z},this._IDBKeyRange=K._deps.IDBKeyRange,!this._IDBKeyRange)throw new te.MissingAPI})),this.on("versionchange",function(q){0<q.newVersion?console.warn("Another connection wants to upgrade database '".concat(A.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(A.name,"'. Closing db now to resume the delete request.")),A.close({disableAutoOpen:!1})}),this.on("blocked",function(q){!q.newVersion||q.newVersion<q.oldVersion?console.warn("Dexie.delete('".concat(A.name,"') was blocked")):console.warn("Upgrade '".concat(A.name,"' blocked by other connection holding version ").concat(q.oldVersion/10))}),this._maxKey=zo(y.IDBKeyRange),this._createTransaction=function(q,ee,H,Y){return new A.Transaction(q,ee,H,A._options.chromeTransactionDurability,Y)},this._fireOnBlocked=function(q){A.on("blocked").fire(q),Ja.filter(function(ee){return ee.name===A.name&&ee!==A&&!ee._state.vcFired}).map(function(ee){return ee.on("versionchange").fire(q)})},this.use(yu),this.use(wL),this.use(vL),this.use(_n),this.use(_a);var Q=new Proxy(this,{get:function(q,ee,H){if(ee==="_vip")return!0;if(ee==="table")return function(Z){return Rp(A.table(Z),Q)};var Y=Reflect.get(q,ee,H);return Y instanceof $o?Rp(Y,Q):ee==="tables"?Y.map(function(Z){return Rp(Z,Q)}):ee==="_createTransaction"?function(){return Rp(Y.apply(this,arguments),Q)}:Y}});this.vip=Q,C.forEach(function(q){return q(A)})}var $p,Si=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",_L=(g0.prototype.subscribe=function(p,y,A){return this._subscribe(p&&typeof p!="function"?p:{next:p,error:y,complete:A})},g0.prototype[Si]=function(){return this},g0);function g0(p){this._subscribe=p}try{$p={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{$p={indexedDB:null,IDBKeyRange:null}}function RE(p){var y,A=!1,C=new _L(function(M){var F=Te(p),B,W=!1,K={},G={},Q={get closed(){return W},unsubscribe:function(){W||(W=!0,B&&B.abort(),q&&Dr.storagemutated.unsubscribe(H))}};M.start&&M.start(Q);var q=!1,ee=function(){return qs(Y)},H=function(Z){Gi(K,Z),h(G,K)&&ee()},Y=function(){var Z,J,re;!W&&$p.indexedDB&&(K={},Z={},B&&B.abort(),B=new AbortController,re=function(ue){var fe=Yn();try{F&&ga();var de=Vi(p,ue);return de=F?de.finally(xi):de}finally{fe&&bi()}}(J={subscr:Z,signal:B.signal,requery:ee,querier:p,trans:null}),Promise.resolve(re).then(function(ue){A=!0,y=ue,W||J.signal.aborted||(K={},function(fe){for(var de in fe)if(f(fe,de))return;return 1}(G=Z)||q||(Dr(Fo,H),q=!0),qs(function(){return!W&&M.next&&M.next(ue)}))},function(ue){A=!1,["DatabaseClosedError","AbortError"].includes(ue==null?void 0:ue.name)||W||qs(function(){W||M.error&&M.error(ue)})}))};return setTimeout(ee,0),Q});return C.hasValue=function(){return A},C.getValue=function(){return y},C}var nl=no;function y0(p){var y=qo;try{qo=!0,Dr.storagemutated.fire(p),le(p,!0)}finally{qo=y}}m(nl,r(r({},Ue),{delete:function(p){return new nl(p,{addons:[]}).delete()},exists:function(p){return new nl(p,{addons:[]}).open().then(function(y){return y.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(p){try{return y=nl.dependencies,A=y.indexedDB,y=y.IDBKeyRange,(mu(A)?Promise.resolve(A.databases()).then(function(C){return C.map(function(M){return M.name}).filter(function(M){return M!==Ks})}):pu(A,y).toCollection().primaryKeys()).then(p)}catch{return Vt(new te.MissingAPI)}var y,A},defineClass:function(){return function(p){l(this,p)}},ignoreTransaction:function(p){return Re.trans?wi(Re.transless,p):p()},vip:Hi,async:function(p){return function(){try{var y=an(p.apply(this,arguments));return y&&typeof y.then=="function"?y:xe.resolve(y)}catch(A){return Vt(A)}}},spawn:function(p,y,A){try{var C=an(p.apply(A,y||[]));return C&&typeof C.then=="function"?C:xe.resolve(C)}catch(M){return Vt(M)}},currentTransaction:{get:function(){return Re.trans||null}},waitFor:function(p,y){return y=xe.resolve(typeof p=="function"?nl.ignoreTransaction(p):p).timeout(y||6e4),Re.trans?Re.trans.waitFor(y):y},Promise:xe,debug:{get:function(){return tt},set:function(p){Ft(p)}},derive:v,extend:l,props:m,override:T,Events:Tt,on:Dr,liveQuery:RE,extendObservabilitySet:Gi,getByKeyPath:P,setByKeyPath:w,delByKeyPath:function(p,y){typeof y=="string"?w(p,y,void 0):"length"in y&&[].map.call(y,function(A){w(p,A,void 0)})},shallowClone:O,deepClone:L,getObjectDiff:$r,cmp:dt,asap:_,minKey:-1/0,addons:[],connections:Ja,errnames:we,dependencies:$p,cache:k,semVer:"4.2.0",version:"4.2.0".split(".").map(function(p){return parseInt(p)}).reduce(function(p,y,A){return p+y/Math.pow(10,2*A)})})),nl.maxKey=zo(nl.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Dr(Fo,function(p){qo||(p=new CustomEvent(to,{detail:p}),qo=!0,dispatchEvent(p),qo=!1)}),addEventListener(to,function(p){p=p.detail,qo||y0(p)}));var bu,qo=!1,$E=function(){};return typeof BroadcastChannel<"u"&&(($E=function(){(bu=new BroadcastChannel(to)).onmessage=function(p){return p.data&&y0(p.data)}})(),typeof bu.unref=="function"&&bu.unref(),Dr(Fo,function(p){qo||bu.postMessage(p)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(p){if(!no.disableBfCache&&p.persisted){tt&&console.debug("Dexie: handling persisted pagehide"),bu!=null&&bu.close();for(var y=0,A=Ja;y<A.length;y++)A[y].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(p){!no.disableBfCache&&p.persisted&&(tt&&console.debug("Dexie: handling persisted pageshow"),$E(),y0({all:new In(-1/0,[[]])}))})),xe.rejectionMapper=function(p,y){return!p||p instanceof he||p instanceof TypeError||p instanceof SyntaxError||!p.name||!$e[p.name]?p:(y=new $e[p.name](y||p.message,p),"stack"in p&&b(y,"stack",{get:function(){return this.inner.stack}}),y)},Ft(tt),r(no,Object.freeze({__proto__:null,Dexie:no,liveQuery:RE,Entity:Pf,cmp:dt,PropModification:Xs,replacePrefix:function(p,y){return new Xs({replacePrefix:[p,y]})},add:function(p){return new Xs({add:p})},remove:function(p){return new Xs({remove:p})},default:no,RangeSet:In,mergeRanges:Wo,rangesOverlap:tl}),{default:no}),no})})(aM);var K9=aM.exports;const aw=Lt(K9),yP=Symbol.for("Dexie"),Lg=globalThis[yP]||(globalThis[yP]=aw);if(aw.semVer!==Lg.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${aw.semVer} and ${Lg.semVer}`);const{liveQuery:Q0e,mergeRanges:J0e,rangesOverlap:Z0e,RangeSet:ebe,cmp:tbe,Entity:nbe,PropModification:rbe,replacePrefix:ibe,add:abe,remove:obe,DexieYProvider:sbe}=Lg;class H9 extends Lg{constructor(){super("LactoKeeperDB_v5");Sa(this,"animals");Sa(this,"fathers");Sa(this,"parturitions");Sa(this,"weighings");Sa(this,"lots");Sa(this,"origins");Sa(this,"breedingGroups");Sa(this,"serviceRecords");Sa(this,"events");this.version(1).stores({animals:"&id, motherId, fatherId, status, lifecycleStage, location, isReference, reproductiveStatus, breedingGroupId",fathers:"&id",parturitions:"&id, goatId, sireId, status",weighings:"&id, goatId, date",lots:"&id, name",origins:"&id, name",breedingGroups:"&id, sireId, status",serviceRecords:"++id, breedingGroupId, femaleId, serviceDate",events:"&id, animalId, date, type"})}}const Pt=new H9,oM=z.createContext({animals:[],fathers:[],weighings:[],parturitions:[],lots:[],origins:[],breedingGroups:[],serviceRecords:[],events:[],isLoading:!0,addAnimal:async()=>{},updateAnimal:async()=>{},addLot:async()=>{},deleteLot:async()=>{},addOrigin:async()=>{},deleteOrigin:async()=>{},addBreedingGroup:async()=>"",updateBreedingGroup:async()=>{},addServiceRecord:async()=>{},addWeighing:async()=>{},addParturition:async()=>{},fetchData:async()=>{},addFather:async()=>{},startDryingProcess:async()=>{},setLactationAsDry:async()=>{}}),tn=()=>z.useContext(oM),G9=({children:t})=>{const{currentUser:e}=QD(),[n,r]=z.useState([]),[i,a]=z.useState([]),[o,s]=z.useState([]),[l,u]=z.useState([]),[c,f]=z.useState([]),[m,g]=z.useState([]),[b,v]=z.useState([]),[x,S]=z.useState([]),[E,T]=z.useState([]),[j,_]=z.useState(!0),P=z.useCallback(async()=>{try{const[he,Se,Ve,We,we,Be,te,$e,Ue]=await Promise.all([Pt.animals.toArray(),Pt.fathers.toArray(),Pt.weighings.toArray(),Pt.parturitions.toArray(),Pt.lots.toArray(),Pt.origins.toArray(),Pt.breedingGroups.toArray(),Pt.serviceRecords.toArray(),Pt.events.toArray()]);r(he),a(Se),s(Ve),u(We),f(we),g(Be),v(te),S($e),T(Ue)}catch(he){console.error("Error al cargar datos locales:",he)}finally{_(!1)}},[]);z.useEffect(()=>{if(!e){_(!1),Promise.all([Pt.animals.clear(),Pt.fathers.clear(),Pt.weighings.clear(),Pt.parturitions.clear(),Pt.lots.clear(),Pt.origins.clear(),Pt.breedingGroups.clear(),Pt.serviceRecords.clear(),Pt.events.clear()]).then(()=>{r([]),a([]),s([]),u([]),f([]),g([]),v([]),S([]),T([])});return}let he=[];return(async()=>{try{Pt.isOpen()||await Pt.open();const Ve=we=>t9(cl(Sn,we),n9("userId","==",e.uid)),We=(we,Be)=>{const te=o9(Ve(we),async $e=>{const Ue=$e.docs.map(se=>({...se.data(),id:se.id}));await Be.bulkPut(Ue),P()},$e=>console.error(`Error sincronizando ${we}:`,$e));he.push(te)};We("animals",Pt.animals),We("fathers",Pt.fathers),We("parturitions",Pt.parturitions),We("weighings",Pt.weighings),We("lots",Pt.lots),We("origins",Pt.origins),We("breedingGroups",Pt.breedingGroups),We("serviceRecords",Pt.serviceRecords),We("events",Pt.events)}catch(Ve){console.error("Fallo al abrir o sincronizar la base de datos local:",Ve)}})(),()=>{he.forEach(Ve=>Ve())}},[e,P]);const w=async he=>{if(!e)throw new Error("Usuario no autenticado");await um(cl(Sn,"events"),{...he,userId:e.uid})},O=async he=>{if(!e)throw new Error("Usuario no autenticado");const Se=Lr(Sn,"animals",he.id);await rb(Se,{...he,userId:e.uid})},I=async(he,Se)=>{if(!e)throw new Error("Usuario no autenticado");const Ve=Lr(Sn,"animals",he),We=await a9(Ve);if(!We.exists())throw new Error("El animal no existe.");const we=We.data(),Be=new Date().toISOString().split("T")[0];if(Se.location&&Se.location!==we.location&&await w({animalId:he,date:Be,type:"Movimiento",details:`Movido del lote '${we.location||"N/A"}' al lote '${Se.location}'`}),Se.status&&Se.status!==we.status){let te=`Estado cambiado de '${we.status}' a '${Se.status}'`;Se.status==="Venta"&&Se.salePrice&&(te=`Vendido por $${Se.salePrice}`),Se.status==="Muerte"&&Se.deathReason&&(te=`Muerte. Causa: ${Se.deathReason}`),await w({animalId:he,date:Be,type:"Cambio de Estado",details:te})}await lm(Ve,Se)},R=async he=>{if(!e)throw new Error("Usuario no autenticado");const Se=he.toUpperCase().replace(/\s+/g,"_"),Ve=Lr(Sn,"lots",Se);await rb(Ve,{name:he,userId:e.uid})},D=async he=>{if(!e)throw new Error("Usuario no autenticado");const Se=Lr(Sn,"lots",he);await gP(Se)},$=async he=>{if(!e)throw new Error("Usuario no autenticado");const Se=he.toUpperCase().replace(/\s+/g,"_"),Ve=Lr(Sn,"origins",Se);await rb(Ve,{name:he,userId:e.uid})},L=async he=>{if(!e)throw new Error("Usuario no autenticado");const Se=Lr(Sn,"origins",he);await gP(Se)},ne=async(he,Se)=>{if(!e)throw new Error("Usuario no autenticado");await um(cl(Sn,he),{...Se,userId:e.uid})},ae=async he=>ne("weighings",he),ce=async he=>ne("fathers",he),me=async he=>{if(!e)throw new Error("Usuario no autenticado");const Se=GD(Sn),Ve=he.motherId.toUpperCase(),We=Lr(Sn,"animals",Ve);Se.set(We,{id:Ve,sex:"Hembra",status:"Activo",birthDate:"N/A",userId:e.uid},{merge:!0});const we=Lr(cl(Sn,"parturitions"));Se.set(we,{goatId:Ve,parturitionDate:he.parturitionDate,sireId:he.sireId,offspringCount:he.offspring.length,parturitionType:he.parturitionType,status:"activa",userId:e.uid}),he.offspring.forEach(Be=>{const te=Be.id.toUpperCase(),$e=Lr(Sn,"animals",te);Se.set($e,{id:te,sex:Be.sex,status:Be.sex==="Macho"?"Descartado":"Activo",birthDate:he.parturitionDate,motherId:Ve,fatherId:he.sireId,birthWeight:parseFloat(Be.birthWeight),userId:e.uid},{merge:!0})}),await Se.commit()},X=async he=>{if(!e)throw new Error("Usuario no autenticado");return(await um(cl(Sn,"breedingGroups"),{...he,userId:e.uid})).id},ie=async(he,Se)=>{if(!e)throw new Error("Usuario no autenticado");const Ve=Lr(Sn,"breedingGroups",he);await lm(Ve,Se)},ge=async he=>{if(!e)throw new Error("Usuario no autenticado");await um(cl(Sn,"serviceRecords"),{...he,userId:e.uid})},Te=async he=>{if(!e)throw new Error("Usuario no autenticado");const Se=Lr(Sn,"parturitions",he);await lm(Se,{status:"en-secado",dryingStartDate:new Date().toISOString().split("T")[0]})},be=async he=>{if(!e)throw new Error("Usuario no autenticado");const Se=Lr(Sn,"parturitions",he);await lm(Se,{status:"seca"})};return d.jsx(oM.Provider,{value:{animals:n,fathers:i,weighings:o,parturitions:l,lots:c,origins:m,breedingGroups:b,serviceRecords:x,events:E,isLoading:j,addAnimal:O,updateAnimal:I,addLot:R,deleteLot:D,addOrigin:$,deleteOrigin:L,addBreedingGroup:X,updateBreedingGroup:ie,addServiceRecord:ge,addWeighing:ae,addParturition:me,fetchData:P,addFather:ce,startDryingProcess:Te,setLactationAsDry:be},children:t})},Gt=({isOpen:t,onClose:e,title:n,children:r})=>t?d.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex justify-center items-center z-50 animate-fade-in",onClick:e,children:d.jsxs("div",{className:"bg-zinc-900/50 border border-zinc-700/80 rounded-2xl shadow-2xl w-full max-w-md m-4 text-white transform transition-all animate-slide-up",onClick:i=>i.stopPropagation(),children:[d.jsxs("header",{className:"flex justify-between items-center p-4 border-b border-zinc-800/80",children:[d.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:n}),d.jsx("button",{onClick:e,className:"p-1 rounded-full text-zinc-500 hover:text-white hover:bg-zinc-700/50 transition-colors",children:d.jsx(cp,{size:20})})]}),d.jsx("div",{className:"p-4 max-h-[70vh] overflow-y-auto",children:r})]})}):null,vP=t=>{if(!t||t==="N/A")return 0;const e=new Date,n=new Date(t);let r=(e.getFullYear()-n.getFullYear())*12;return r-=n.getMonth(),r+=e.getMonth(),e.getDate()<n.getDate()&&r--,r<=0?0:r},ow=({isOpen:t,onClose:e,onSelect:n,animals:r,title:i,filterSex:a,minAgeMonths:o,maxAgeMonths:s})=>{const[l,u]=z.useState(""),[c,f]=z.useState("Activo"),m=z.useMemo(()=>r.filter(b=>!(a&&b.sex!==a)).filter(b=>{const v=b.isReference||!1;return c==="Referencia"?v:!v}).filter(b=>{const v=vP(b.birthDate);return!(o&&v<o||s&&v>s)}).filter(b=>l?b.id.toLowerCase().includes(l.toLowerCase()):!0),[r,l,c,a,o,s]),g=b=>{n(b),u("")};return d.jsx(Gt,{isOpen:t,onClose:e,title:i,children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("div",{className:"relative flex-grow",children:[d.jsx(wc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500"}),d.jsx("input",{type:"search",placeholder:"Buscar por ID...",value:l,onChange:b=>u(b.target.value),className:"w-full bg-zinc-800 border border-zinc-700 rounded-xl pl-10 pr-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-amber"})]}),d.jsx("button",{onClick:()=>alert("Próximamente: Añadir nuevo animal de genealogía"),className:"p-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl","aria-label":"Añadir nuevo animal",children:d.jsx(Oo,{size:24})})]}),d.jsxs("div",{className:"flex bg-zinc-800 rounded-xl p-1 w-full",children:[d.jsx("button",{onClick:()=>f("Activo"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${c==="Activo"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"Animales Activos"}),d.jsx("button",{onClick:()=>f("Referencia"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${c==="Referencia"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"De Referencia"})]}),d.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2 pr-2",children:m.length>0?m.map(b=>d.jsxs("button",{onClick:()=>g(b.id),className:"w-full text-left p-3 bg-zinc-800/50 hover:bg-zinc-700 rounded-lg",children:[d.jsx("p",{className:"font-bold text-white",children:b.id}),d.jsxs("p",{className:"text-xs text-zinc-400",children:["Edad: ",vP(b.birthDate)," meses"]})]},b.id)):d.jsx("p",{className:"text-center text-zinc-500 py-8",children:"No se encontraron animales con estos filtros."})})]})})};function Y9(t,e,n="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:t,timeZoneName:n}).format(e).split(/\s/g).slice(2).join(" ")}const ab={},fd={};function xl(t,e){try{const r=(ab[t]||(ab[t]=new Intl.DateTimeFormat("en-US",{timeZone:t,timeZoneName:"longOffset"}).format))(e).split("GMT")[1];return r in fd?fd[r]:bP(r,r.split(":"))}catch{if(t in fd)return fd[t];const n=t==null?void 0:t.match(X9);return n?bP(t,n.slice(1)):NaN}}const X9=/([+-]\d\d):?(\d\d)?/;function bP(t,e){const n=+(e[0]||0),r=+(e[1]||0),i=+(e[2]||0)/60;return fd[t]=n*60+r>0?n*60+r+i:n*60-r-i}class Ca extends Date{constructor(...e){super(),e.length>1&&typeof e[e.length-1]=="string"&&(this.timeZone=e.pop()),this.internal=new Date,isNaN(xl(this.timeZone,this))?this.setTime(NaN):e.length?typeof e[0]=="number"&&(e.length===1||e.length===2&&typeof e[1]!="number")?this.setTime(e[0]):typeof e[0]=="string"?this.setTime(+new Date(e[0])):e[0]instanceof Date?this.setTime(+e[0]):(this.setTime(+new Date(...e)),sM(this),sw(this)):this.setTime(Date.now())}static tz(e,...n){return n.length?new Ca(...n,e):new Ca(Date.now(),e)}withTimeZone(e){return new Ca(+this,e)}getTimezoneOffset(){const e=-xl(this.timeZone,this);return e>0?Math.floor(e):Math.ceil(e)}setTime(e){return Date.prototype.setTime.apply(this,arguments),sw(this),+this}[Symbol.for("constructDateFrom")](e){return new Ca(+new Date(e),this.timeZone)}}const xP=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(t=>{if(!xP.test(t))return;const e=t.replace(xP,"$1UTC");Ca.prototype[e]&&(t.startsWith("get")?Ca.prototype[t]=function(){return this.internal[e]()}:(Ca.prototype[t]=function(){return Date.prototype[e].apply(this.internal,arguments),Q9(this),+this},Ca.prototype[e]=function(){return Date.prototype[e].apply(this,arguments),sw(this),+this}))});function sw(t){t.internal.setTime(+t),t.internal.setUTCSeconds(t.internal.getUTCSeconds()-Math.round(-xl(t.timeZone,t)*60))}function Q9(t){Date.prototype.setFullYear.call(t,t.internal.getUTCFullYear(),t.internal.getUTCMonth(),t.internal.getUTCDate()),Date.prototype.setHours.call(t,t.internal.getUTCHours(),t.internal.getUTCMinutes(),t.internal.getUTCSeconds(),t.internal.getUTCMilliseconds()),sM(t)}function sM(t){const e=xl(t.timeZone,t),n=e>0?Math.floor(e):Math.ceil(e),r=new Date(+t);r.setUTCHours(r.getUTCHours()-1);const i=-new Date(+t).getTimezoneOffset(),a=-new Date(+r).getTimezoneOffset(),o=i-a,s=Date.prototype.getHours.apply(t)!==t.internal.getUTCHours();o&&s&&t.internal.setUTCMinutes(t.internal.getUTCMinutes()+o);const l=i-n;l&&Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+l);const u=new Date(+t);u.setUTCSeconds(0);const c=i>0?u.getSeconds():(u.getSeconds()-60)%60,f=Math.round(-(xl(t.timeZone,t)*60))%60;(f||c)&&(t.internal.setUTCSeconds(t.internal.getUTCSeconds()+f),Date.prototype.setUTCSeconds.call(t,Date.prototype.getUTCSeconds.call(t)+f+c));const m=xl(t.timeZone,t),g=m>0?Math.floor(m):Math.ceil(m),v=-new Date(+t).getTimezoneOffset()-g,x=g!==n,S=v-l;if(x&&S){Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+S);const E=xl(t.timeZone,t),T=E>0?Math.floor(E):Math.ceil(E),j=g-T;j&&(t.internal.setUTCMinutes(t.internal.getUTCMinutes()+j),Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+j))}}class dr extends Ca{static tz(e,...n){return n.length?new dr(...n,e):new dr(Date.now(),e)}toISOString(){const[e,n,r]=this.tzComponents(),i=`${e}${n}:${r}`;return this.internal.toISOString().slice(0,-1)+i}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[e,n,r,i]=this.internal.toUTCString().split(" ");return`${e==null?void 0:e.slice(0,-1)} ${r} ${n} ${i}`}toTimeString(){const e=this.internal.toUTCString().split(" ")[4],[n,r,i]=this.tzComponents();return`${e} GMT${n}${r}${i} (${Y9(this.timeZone,this)})`}toLocaleString(e,n){return Date.prototype.toLocaleString.call(this,e,{...n,timeZone:(n==null?void 0:n.timeZone)||this.timeZone})}toLocaleDateString(e,n){return Date.prototype.toLocaleDateString.call(this,e,{...n,timeZone:(n==null?void 0:n.timeZone)||this.timeZone})}toLocaleTimeString(e,n){return Date.prototype.toLocaleTimeString.call(this,e,{...n,timeZone:(n==null?void 0:n.timeZone)||this.timeZone})}tzComponents(){const e=this.getTimezoneOffset(),n=e>0?"-":"+",r=String(Math.floor(Math.abs(e)/60)).padStart(2,"0"),i=String(Math.abs(e)%60).padStart(2,"0");return[n,r,i]}withTimeZone(e){return new dr(+this,e)}[Symbol.for("constructDateFrom")](e){return new dr(+new Date(e),this.timeZone)}}const lM=6048e5,J9=864e5,wP=Symbol.for("constructDateFrom");function Ln(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&wP in t?t[wP](e):t instanceof Date?new t.constructor(e):new Date(e)}function $t(t,e){return Ln(e||t,t)}function uM(t,e,n){const r=$t(t,n==null?void 0:n.in);return isNaN(e)?Ln(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function cM(t,e,n){const r=$t(t,n==null?void 0:n.in);if(isNaN(e))return Ln(t,NaN);if(!e)return r;const i=r.getDate(),a=Ln(t,r.getTime());a.setMonth(r.getMonth()+e+1,0);const o=a.getDate();return i>=o?a:(r.setFullYear(a.getFullYear(),a.getMonth(),i),r)}let Z9={};function fp(){return Z9}function _c(t,e){var s,l,u,c;const n=fp(),r=(e==null?void 0:e.weekStartsOn)??((l=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((c=(u=n.locale)==null?void 0:u.options)==null?void 0:c.weekStartsOn)??0,i=$t(t,e==null?void 0:e.in),a=i.getDay(),o=(a<r?7:0)+a-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function sh(t,e){return _c(t,{...e,weekStartsOn:1})}function fM(t,e){const n=$t(t,e==null?void 0:e.in),r=n.getFullYear(),i=Ln(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const a=sh(i),o=Ln(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const s=sh(o);return n.getTime()>=a.getTime()?r+1:n.getTime()>=s.getTime()?r:r-1}function _P(t){const e=$t(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function of(t,...e){const n=Ln.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function lh(t,e){const n=$t(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function dM(t,e,n){const[r,i]=of(n==null?void 0:n.in,t,e),a=lh(r),o=lh(i),s=+a-_P(a),l=+o-_P(o);return Math.round((s-l)/J9)}function eU(t,e){const n=fM(t,e),r=Ln(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),sh(r)}function tU(t,e,n){return uM(t,e*7,n)}function nU(t,e,n){return cM(t,e*12,n)}function rU(t,e){let n,r=e==null?void 0:e.in;return t.forEach(i=>{!r&&typeof i=="object"&&(r=Ln.bind(null,i));const a=$t(i,r);(!n||n<a||isNaN(+a))&&(n=a)}),Ln(r,n||NaN)}function iU(t,e){let n,r=e==null?void 0:e.in;return t.forEach(i=>{!r&&typeof i=="object"&&(r=Ln.bind(null,i));const a=$t(i,r);(!n||n>a||isNaN(+a))&&(n=a)}),Ln(r,n||NaN)}function aU(t,e,n){const[r,i]=of(n==null?void 0:n.in,t,e);return+lh(r)==+lh(i)}function hM(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function oU(t){return!(!hM(t)&&typeof t!="number"||isNaN(+$t(t)))}function sU(t,e,n){const[r,i]=of(n==null?void 0:n.in,t,e),a=r.getFullYear()-i.getFullYear(),o=r.getMonth()-i.getMonth();return a*12+o}function lU(t,e){const n=$t(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function uU(t,e){const[n,r]=of(t,e.start,e.end);return{start:n,end:r}}function cU(t,e){const{start:n,end:r}=uU(e==null?void 0:e.in,t);let i=+n>+r;const a=i?+n:+r,o=i?r:n;o.setHours(0,0,0,0),o.setDate(1);let s=1;const l=[];for(;+o<=a;)l.push(Ln(n,o)),o.setMonth(o.getMonth()+s);return i?l.reverse():l}function fU(t,e){const n=$t(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function dU(t,e){const n=$t(t,e==null?void 0:e.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function pM(t,e){const n=$t(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function mM(t,e){var s,l,u,c;const n=fp(),r=(e==null?void 0:e.weekStartsOn)??((l=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((c=(u=n.locale)==null?void 0:u.options)==null?void 0:c.weekStartsOn)??0,i=$t(t,e==null?void 0:e.in),a=i.getDay(),o=(a<r?-7:0)+6-(a-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function hU(t,e){return mM(t,{...e,weekStartsOn:1})}const pU={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},mU=(t,e,n)=>{let r;const i=pU[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function ob(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const gU={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},yU={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},vU={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},bU={date:ob({formats:gU,defaultWidth:"full"}),time:ob({formats:yU,defaultWidth:"full"}),dateTime:ob({formats:vU,defaultWidth:"full"})},xU={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},wU=(t,e,n,r)=>xU[t];function Uf(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,s=n!=null&&n.width?String(n.width):o;i=t.formattingValues[s]||t.formattingValues[o]}else{const o=t.defaultWidth,s=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[s]||t.values[o]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const _U={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},SU={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},EU={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},AU={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},TU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},PU={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},OU=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},kU={ordinalNumber:OU,era:Uf({values:_U,defaultWidth:"wide"}),quarter:Uf({values:SU,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Uf({values:EU,defaultWidth:"wide"}),day:Uf({values:AU,defaultWidth:"wide"}),dayPeriod:Uf({values:TU,defaultWidth:"wide",formattingValues:PU,defaultFormattingWidth:"wide"})};function Wf(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const o=a[0],s=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(s)?IU(s,f=>f.test(o)):CU(s,f=>f.test(o));let u;u=t.valueCallback?t.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;const c=e.slice(o.length);return{value:u,rest:c}}}function CU(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function IU(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function jU(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let o=t.valueCallback?t.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const s=e.slice(i.length);return{value:o,rest:s}}}const NU=/^(\d+)(th|st|nd|rd)?/i,DU=/\d+/i,MU={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},RU={any:[/^b/i,/^(a|c)/i]},$U={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},LU={any:[/1/i,/2/i,/3/i,/4/i]},FU={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},zU={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},VU={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},BU={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},UU={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},WU={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},qU={ordinalNumber:jU({matchPattern:NU,parsePattern:DU,valueCallback:t=>parseInt(t,10)}),era:Wf({matchPatterns:MU,defaultMatchWidth:"wide",parsePatterns:RU,defaultParseWidth:"any"}),quarter:Wf({matchPatterns:$U,defaultMatchWidth:"wide",parsePatterns:LU,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Wf({matchPatterns:FU,defaultMatchWidth:"wide",parsePatterns:zU,defaultParseWidth:"any"}),day:Wf({matchPatterns:VU,defaultMatchWidth:"wide",parsePatterns:BU,defaultParseWidth:"any"}),dayPeriod:Wf({matchPatterns:UU,defaultMatchWidth:"any",parsePatterns:WU,defaultParseWidth:"any"})},wS={code:"en-US",formatDistance:mU,formatLong:bU,formatRelative:wU,localize:kU,match:qU,options:{weekStartsOn:0,firstWeekContainsDate:1}};function KU(t,e){const n=$t(t,e==null?void 0:e.in);return dM(n,pM(n))+1}function gM(t,e){const n=$t(t,e==null?void 0:e.in),r=+sh(n)-+eU(n);return Math.round(r/lM)+1}function yM(t,e){var c,f,m,g;const n=$t(t,e==null?void 0:e.in),r=n.getFullYear(),i=fp(),a=(e==null?void 0:e.firstWeekContainsDate)??((f=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((g=(m=i.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,o=Ln((e==null?void 0:e.in)||t,0);o.setFullYear(r+1,0,a),o.setHours(0,0,0,0);const s=_c(o,e),l=Ln((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,a),l.setHours(0,0,0,0);const u=_c(l,e);return+n>=+s?r+1:+n>=+u?r:r-1}function HU(t,e){var s,l,u,c;const n=fp(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(s=e==null?void 0:e.locale)==null?void 0:s.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((c=(u=n.locale)==null?void 0:u.options)==null?void 0:c.firstWeekContainsDate)??1,i=yM(t,e),a=Ln((e==null?void 0:e.in)||t,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),_c(a,e)}function vM(t,e){const n=$t(t,e==null?void 0:e.in),r=+_c(n,e)-+HU(n,e);return Math.round(r/lM)+1}function jt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Go={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return jt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):jt(n+1,2)},d(t,e){return jt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return jt(t.getHours()%12||12,e.length)},H(t,e){return jt(t.getHours(),e.length)},m(t,e){return jt(t.getMinutes(),e.length)},s(t,e){return jt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return jt(i,e.length)}},wu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},SP={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Go.y(t,e)},Y:function(t,e,n,r){const i=yM(t,r),a=i>0?i:1-i;if(e==="YY"){const o=a%100;return jt(o,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):jt(a,e.length)},R:function(t,e){const n=fM(t);return jt(n,e.length)},u:function(t,e){const n=t.getFullYear();return jt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return jt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return jt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Go.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return jt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=vM(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):jt(i,e.length)},I:function(t,e,n){const r=gM(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):jt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Go.d(t,e)},D:function(t,e,n){const r=KU(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):jt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return jt(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return jt(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return jt(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=wu.noon:r===0?i=wu.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=wu.evening:r>=12?i=wu.afternoon:r>=4?i=wu.morning:i=wu.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Go.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Go.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):jt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):jt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Go.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Go.s(t,e)},S:function(t,e){return Go.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return AP(r);case"XXXX":case"XX":return fl(r);case"XXXXX":case"XXX":default:return fl(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return AP(r);case"xxxx":case"xx":return fl(r);case"xxxxx":case"xxx":default:return fl(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+EP(r,":");case"OOOO":default:return"GMT"+fl(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+EP(r,":");case"zzzz":default:return"GMT"+fl(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return jt(r,e.length)},T:function(t,e,n){return jt(+t,e.length)}};function EP(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+e+jt(a,2)}function AP(t,e){return t%60===0?(t>0?"-":"+")+jt(Math.abs(t)/60,2):fl(t,e)}function fl(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=jt(Math.trunc(r/60),2),a=jt(r%60,2);return n+i+e+a}const TP=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},bM=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},GU=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return TP(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",TP(r,e)).replace("{{time}}",bM(i,e))},YU={p:bM,P:GU},XU=/^D+$/,QU=/^Y+$/,JU=["D","DD","YY","YYYY"];function ZU(t){return XU.test(t)}function e7(t){return QU.test(t)}function t7(t,e,n){const r=n7(t,e,n);if(console.warn(r),JU.includes(t))throw new RangeError(r)}function n7(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const r7=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,i7=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,a7=/^'([^]*?)'?$/,o7=/''/g,s7=/[a-zA-Z]/;function l7(t,e,n){var c,f,m,g,b,v,x,S;const r=fp(),i=(n==null?void 0:n.locale)??r.locale??wS,a=(n==null?void 0:n.firstWeekContainsDate)??((f=(c=n==null?void 0:n.locale)==null?void 0:c.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(m=r.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((v=(b=n==null?void 0:n.locale)==null?void 0:b.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((S=(x=r.locale)==null?void 0:x.options)==null?void 0:S.weekStartsOn)??0,s=$t(t,n==null?void 0:n.in);if(!oU(s))throw new RangeError("Invalid time value");let l=e.match(i7).map(E=>{const T=E[0];if(T==="p"||T==="P"){const j=YU[T];return j(E,i.formatLong)}return E}).join("").match(r7).map(E=>{if(E==="''")return{isToken:!1,value:"'"};const T=E[0];if(T==="'")return{isToken:!1,value:u7(E)};if(SP[T])return{isToken:!0,value:E};if(T.match(s7))throw new RangeError("Format string contains an unescaped latin alphabet character `"+T+"`");return{isToken:!1,value:E}});i.localize.preprocessor&&(l=i.localize.preprocessor(s,l));const u={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return l.map(E=>{if(!E.isToken)return E.value;const T=E.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&e7(T)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&ZU(T))&&t7(T,e,String(t));const j=SP[T[0]];return j(s,T,i.localize,u)}).join("")}function u7(t){const e=t.match(a7);return e?e[1].replace(o7,"'"):t}function c7(t,e){const n=$t(t,e==null?void 0:e.in),r=n.getFullYear(),i=n.getMonth(),a=Ln(n,0);return a.setFullYear(r,i+1,0),a.setHours(0,0,0,0),a.getDate()}function f7(t,e){return $t(t,e==null?void 0:e.in).getMonth()}function d7(t,e){return $t(t,e==null?void 0:e.in).getFullYear()}function h7(t,e){return+$t(t)>+$t(e)}function p7(t,e){return+$t(t)<+$t(e)}function m7(t,e,n){const[r,i]=of(n==null?void 0:n.in,t,e);return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()}function g7(t,e,n){const[r,i]=of(n==null?void 0:n.in,t,e);return r.getFullYear()===i.getFullYear()}function y7(t,e,n){const r=$t(t,n==null?void 0:n.in),i=r.getFullYear(),a=r.getDate(),o=Ln(t,0);o.setFullYear(i,e,15),o.setHours(0,0,0,0);const s=c7(o);return r.setMonth(e,Math.min(a,s)),r}function v7(t,e,n){const r=$t(t,n==null?void 0:n.in);return isNaN(+r)?Ln(t,NaN):(r.setFullYear(e),r)}const PP=5,b7=4;function x7(t,e){const n=e.startOfMonth(t),r=n.getDay()>0?n.getDay():7,i=e.addDays(t,-r+1),a=e.addDays(i,PP*7-1);return e.getMonth(t)===e.getMonth(a)?PP:b7}function xM(t,e){const n=e.startOfMonth(t),r=n.getDay();return r===1?n:r===0?e.addDays(n,-1*6):e.addDays(n,-1*(r-1))}function w7(t,e){const n=xM(t,e),r=x7(t,e);return e.addDays(n,r*7-1)}class di{constructor(e,n){this.Date=Date,this.today=()=>{var r;return(r=this.overrides)!=null&&r.today?this.overrides.today():this.options.timeZone?dr.tz(this.options.timeZone):new this.Date},this.newDate=(r,i,a)=>{var o;return(o=this.overrides)!=null&&o.newDate?this.overrides.newDate(r,i,a):this.options.timeZone?new dr(r,i,a,this.options.timeZone):new Date(r,i,a)},this.addDays=(r,i)=>{var a;return(a=this.overrides)!=null&&a.addDays?this.overrides.addDays(r,i):uM(r,i)},this.addMonths=(r,i)=>{var a;return(a=this.overrides)!=null&&a.addMonths?this.overrides.addMonths(r,i):cM(r,i)},this.addWeeks=(r,i)=>{var a;return(a=this.overrides)!=null&&a.addWeeks?this.overrides.addWeeks(r,i):tU(r,i)},this.addYears=(r,i)=>{var a;return(a=this.overrides)!=null&&a.addYears?this.overrides.addYears(r,i):nU(r,i)},this.differenceInCalendarDays=(r,i)=>{var a;return(a=this.overrides)!=null&&a.differenceInCalendarDays?this.overrides.differenceInCalendarDays(r,i):dM(r,i)},this.differenceInCalendarMonths=(r,i)=>{var a;return(a=this.overrides)!=null&&a.differenceInCalendarMonths?this.overrides.differenceInCalendarMonths(r,i):sU(r,i)},this.eachMonthOfInterval=r=>{var i;return(i=this.overrides)!=null&&i.eachMonthOfInterval?this.overrides.eachMonthOfInterval(r):cU(r)},this.endOfBroadcastWeek=r=>{var i;return(i=this.overrides)!=null&&i.endOfBroadcastWeek?this.overrides.endOfBroadcastWeek(r):w7(r,this)},this.endOfISOWeek=r=>{var i;return(i=this.overrides)!=null&&i.endOfISOWeek?this.overrides.endOfISOWeek(r):hU(r)},this.endOfMonth=r=>{var i;return(i=this.overrides)!=null&&i.endOfMonth?this.overrides.endOfMonth(r):lU(r)},this.endOfWeek=(r,i)=>{var a;return(a=this.overrides)!=null&&a.endOfWeek?this.overrides.endOfWeek(r,i):mM(r,this.options)},this.endOfYear=r=>{var i;return(i=this.overrides)!=null&&i.endOfYear?this.overrides.endOfYear(r):dU(r)},this.format=(r,i,a)=>{var s;const o=(s=this.overrides)!=null&&s.format?this.overrides.format(r,i,this.options):l7(r,i,this.options);return this.options.numerals&&this.options.numerals!=="latn"?this.replaceDigits(o):o},this.getISOWeek=r=>{var i;return(i=this.overrides)!=null&&i.getISOWeek?this.overrides.getISOWeek(r):gM(r)},this.getMonth=(r,i)=>{var a;return(a=this.overrides)!=null&&a.getMonth?this.overrides.getMonth(r,this.options):f7(r,this.options)},this.getYear=(r,i)=>{var a;return(a=this.overrides)!=null&&a.getYear?this.overrides.getYear(r,this.options):d7(r,this.options)},this.getWeek=(r,i)=>{var a;return(a=this.overrides)!=null&&a.getWeek?this.overrides.getWeek(r,this.options):vM(r,this.options)},this.isAfter=(r,i)=>{var a;return(a=this.overrides)!=null&&a.isAfter?this.overrides.isAfter(r,i):h7(r,i)},this.isBefore=(r,i)=>{var a;return(a=this.overrides)!=null&&a.isBefore?this.overrides.isBefore(r,i):p7(r,i)},this.isDate=r=>{var i;return(i=this.overrides)!=null&&i.isDate?this.overrides.isDate(r):hM(r)},this.isSameDay=(r,i)=>{var a;return(a=this.overrides)!=null&&a.isSameDay?this.overrides.isSameDay(r,i):aU(r,i)},this.isSameMonth=(r,i)=>{var a;return(a=this.overrides)!=null&&a.isSameMonth?this.overrides.isSameMonth(r,i):m7(r,i)},this.isSameYear=(r,i)=>{var a;return(a=this.overrides)!=null&&a.isSameYear?this.overrides.isSameYear(r,i):g7(r,i)},this.max=r=>{var i;return(i=this.overrides)!=null&&i.max?this.overrides.max(r):rU(r)},this.min=r=>{var i;return(i=this.overrides)!=null&&i.min?this.overrides.min(r):iU(r)},this.setMonth=(r,i)=>{var a;return(a=this.overrides)!=null&&a.setMonth?this.overrides.setMonth(r,i):y7(r,i)},this.setYear=(r,i)=>{var a;return(a=this.overrides)!=null&&a.setYear?this.overrides.setYear(r,i):v7(r,i)},this.startOfBroadcastWeek=(r,i)=>{var a;return(a=this.overrides)!=null&&a.startOfBroadcastWeek?this.overrides.startOfBroadcastWeek(r,this):xM(r,this)},this.startOfDay=r=>{var i;return(i=this.overrides)!=null&&i.startOfDay?this.overrides.startOfDay(r):lh(r)},this.startOfISOWeek=r=>{var i;return(i=this.overrides)!=null&&i.startOfISOWeek?this.overrides.startOfISOWeek(r):sh(r)},this.startOfMonth=r=>{var i;return(i=this.overrides)!=null&&i.startOfMonth?this.overrides.startOfMonth(r):fU(r)},this.startOfWeek=(r,i)=>{var a;return(a=this.overrides)!=null&&a.startOfWeek?this.overrides.startOfWeek(r,this.options):_c(r,this.options)},this.startOfYear=r=>{var i;return(i=this.overrides)!=null&&i.startOfYear?this.overrides.startOfYear(r):pM(r)},this.options={locale:wS,...e},this.overrides=n}getDigitMap(){const{numerals:e="latn"}=this.options,n=new Intl.NumberFormat("en-US",{numberingSystem:e}),r={};for(let i=0;i<10;i++)r[i.toString()]=n.format(i);return r}replaceDigits(e){const n=this.getDigitMap();return e.replace(/\d/g,r=>n[r]||r)}formatNumber(e){return this.replaceDigits(e.toString())}getMonthYearOrder(){var n;const e=(n=this.options.locale)==null?void 0:n.code;return e&&di.yearFirstLocales.has(e)?"year-first":"month-first"}formatMonthYear(e){const{locale:n,timeZone:r,numerals:i}=this.options,a=n==null?void 0:n.code;if(a&&di.yearFirstLocales.has(a))try{return new Intl.DateTimeFormat(a,{month:"long",year:"numeric",timeZone:r,numberingSystem:i}).format(e)}catch{}const o=this.getMonthYearOrder()==="year-first"?"y LLLL":"LLLL y";return this.format(e,o)}}di.yearFirstLocales=new Set(["eu","hu","ja","ja-Hira","ja-JP","ko","ko-KR","lt","lt-LT","lv","lv-LV","mn","mn-MN","zh","zh-CN","zh-HK","zh-TW"]);const qa=new di;class wM{constructor(e,n,r=qa){this.date=e,this.displayMonth=n,this.outside=!!(n&&!r.isSameMonth(e,n)),this.dateLib=r}isEqualTo(e){return this.dateLib.isSameDay(e.date,this.date)&&this.dateLib.isSameMonth(e.displayMonth,this.displayMonth)}}class _7{constructor(e,n){this.date=e,this.weeks=n}}class S7{constructor(e,n){this.days=n,this.weekNumber=e}}function E7(t){return U.createElement("button",{...t})}function A7(t){return U.createElement("span",{...t})}function T7(t){const{size:e=24,orientation:n="left",className:r}=t;return U.createElement("svg",{className:r,width:e,height:e,viewBox:"0 0 24 24"},n==="up"&&U.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),n==="down"&&U.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),n==="left"&&U.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),n==="right"&&U.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}function P7(t){const{day:e,modifiers:n,...r}=t;return U.createElement("td",{...r})}function O7(t){const{day:e,modifiers:n,...r}=t,i=U.useRef(null);return U.useEffect(()=>{var a;n.focused&&((a=i.current)==null||a.focus())},[n.focused]),U.createElement("button",{ref:i,...r})}var Ke;(function(t){t.Root="root",t.Chevron="chevron",t.Day="day",t.DayButton="day_button",t.CaptionLabel="caption_label",t.Dropdowns="dropdowns",t.Dropdown="dropdown",t.DropdownRoot="dropdown_root",t.Footer="footer",t.MonthGrid="month_grid",t.MonthCaption="month_caption",t.MonthsDropdown="months_dropdown",t.Month="month",t.Months="months",t.Nav="nav",t.NextMonthButton="button_next",t.PreviousMonthButton="button_previous",t.Week="week",t.Weeks="weeks",t.Weekday="weekday",t.Weekdays="weekdays",t.WeekNumber="week_number",t.WeekNumberHeader="week_number_header",t.YearsDropdown="years_dropdown"})(Ke||(Ke={}));var on;(function(t){t.disabled="disabled",t.hidden="hidden",t.outside="outside",t.focused="focused",t.today="today"})(on||(on={}));var sa;(function(t){t.range_end="range_end",t.range_middle="range_middle",t.range_start="range_start",t.selected="selected"})(sa||(sa={}));var ri;(function(t){t.weeks_before_enter="weeks_before_enter",t.weeks_before_exit="weeks_before_exit",t.weeks_after_enter="weeks_after_enter",t.weeks_after_exit="weeks_after_exit",t.caption_after_enter="caption_after_enter",t.caption_after_exit="caption_after_exit",t.caption_before_enter="caption_before_enter",t.caption_before_exit="caption_before_exit"})(ri||(ri={}));function k7(t){const{options:e,className:n,components:r,classNames:i,...a}=t,o=[i[Ke.Dropdown],n].join(" "),s=e==null?void 0:e.find(({value:l})=>l===a.value);return U.createElement("span",{"data-disabled":a.disabled,className:i[Ke.DropdownRoot]},U.createElement(r.Select,{className:o,...a},e==null?void 0:e.map(({value:l,label:u,disabled:c})=>U.createElement(r.Option,{key:l,value:l,disabled:c},u))),U.createElement("span",{className:i[Ke.CaptionLabel],"aria-hidden":!0},s==null?void 0:s.label,U.createElement(r.Chevron,{orientation:"down",size:18,className:i[Ke.Chevron]})))}function C7(t){return U.createElement("div",{...t})}function I7(t){return U.createElement("div",{...t})}function j7(t){const{calendarMonth:e,displayIndex:n,...r}=t;return U.createElement("div",{...r},t.children)}function N7(t){const{calendarMonth:e,displayIndex:n,...r}=t;return U.createElement("div",{...r})}function D7(t){return U.createElement("table",{...t})}function M7(t){return U.createElement("div",{...t})}const _M=z.createContext(void 0);function dp(){const t=z.useContext(_M);if(t===void 0)throw new Error("useDayPicker() must be used within a custom component.");return t}function R7(t){const{components:e}=dp();return U.createElement(e.Dropdown,{...t})}function $7(t){const{onPreviousClick:e,onNextClick:n,previousMonth:r,nextMonth:i,...a}=t,{components:o,classNames:s,labels:{labelPrevious:l,labelNext:u}}=dp(),c=z.useCallback(m=>{i&&(n==null||n(m))},[i,n]),f=z.useCallback(m=>{r&&(e==null||e(m))},[r,e]);return U.createElement("nav",{...a},U.createElement(o.PreviousMonthButton,{type:"button",className:s[Ke.PreviousMonthButton],tabIndex:r?void 0:-1,"aria-disabled":r?void 0:!0,"aria-label":l(r),onClick:f},U.createElement(o.Chevron,{disabled:r?void 0:!0,className:s[Ke.Chevron],orientation:"left"})),U.createElement(o.NextMonthButton,{type:"button",className:s[Ke.NextMonthButton],tabIndex:i?void 0:-1,"aria-disabled":i?void 0:!0,"aria-label":u(i),onClick:c},U.createElement(o.Chevron,{disabled:i?void 0:!0,orientation:"right",className:s[Ke.Chevron]})))}function L7(t){const{components:e}=dp();return U.createElement(e.Button,{...t})}function F7(t){return U.createElement("option",{...t})}function z7(t){const{components:e}=dp();return U.createElement(e.Button,{...t})}function V7(t){const{rootRef:e,...n}=t;return U.createElement("div",{...n,ref:e})}function B7(t){return U.createElement("select",{...t})}function U7(t){const{week:e,...n}=t;return U.createElement("tr",{...n})}function W7(t){return U.createElement("th",{...t})}function q7(t){return U.createElement("thead",{"aria-hidden":!0},U.createElement("tr",{...t}))}function K7(t){const{week:e,...n}=t;return U.createElement("th",{...n})}function H7(t){return U.createElement("th",{...t})}function G7(t){return U.createElement("tbody",{...t})}function Y7(t){const{components:e}=dp();return U.createElement(e.Dropdown,{...t})}const X7=Object.freeze(Object.defineProperty({__proto__:null,Button:E7,CaptionLabel:A7,Chevron:T7,Day:P7,DayButton:O7,Dropdown:k7,DropdownNav:C7,Footer:I7,Month:j7,MonthCaption:N7,MonthGrid:D7,Months:M7,MonthsDropdown:R7,Nav:$7,NextMonthButton:L7,Option:F7,PreviousMonthButton:z7,Root:V7,Select:B7,Week:U7,WeekNumber:K7,WeekNumberHeader:H7,Weekday:W7,Weekdays:q7,Weeks:G7,YearsDropdown:Y7},Symbol.toStringTag,{value:"Module"}));function uo(t,e,n=!1,r=qa){let{from:i,to:a}=t;const{differenceInCalendarDays:o,isSameDay:s}=r;return i&&a?(o(a,i)<0&&([i,a]=[a,i]),o(e,i)>=(n?1:0)&&o(a,e)>=(n?1:0)):!n&&a?s(a,e):!n&&i?s(i,e):!1}function SM(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function _S(t){return!!(t&&typeof t=="object"&&"from"in t)}function EM(t){return!!(t&&typeof t=="object"&&"after"in t)}function AM(t){return!!(t&&typeof t=="object"&&"before"in t)}function TM(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function PM(t,e){return Array.isArray(t)&&t.every(e.isDate)}function co(t,e,n=qa){const r=Array.isArray(e)?e:[e],{isSameDay:i,differenceInCalendarDays:a,isAfter:o}=n;return r.some(s=>{if(typeof s=="boolean")return s;if(n.isDate(s))return i(t,s);if(PM(s,n))return s.includes(t);if(_S(s))return uo(s,t,!1,n);if(TM(s))return Array.isArray(s.dayOfWeek)?s.dayOfWeek.includes(t.getDay()):s.dayOfWeek===t.getDay();if(SM(s)){const l=a(s.before,t),u=a(s.after,t),c=l>0,f=u<0;return o(s.before,s.after)?f&&c:c||f}return EM(s)?a(t,s.after)>0:AM(s)?a(s.before,t)>0:typeof s=="function"?s(t):!1})}function Q7(t,e,n,r,i){const{disabled:a,hidden:o,modifiers:s,showOutsideDays:l,broadcastCalendar:u,today:c}=e,{isSameDay:f,isSameMonth:m,startOfMonth:g,isBefore:b,endOfMonth:v,isAfter:x}=i,S=n&&g(n),E=r&&v(r),T={[on.focused]:[],[on.outside]:[],[on.disabled]:[],[on.hidden]:[],[on.today]:[]},j={};for(const _ of t){const{date:P,displayMonth:w}=_,O=!!(w&&!m(P,w)),I=!!(S&&b(P,S)),R=!!(E&&x(P,E)),D=!!(a&&co(P,a,i)),$=!!(o&&co(P,o,i))||I||R||!u&&!l&&O||u&&l===!1&&O,L=f(P,c??i.today());O&&T.outside.push(_),D&&T.disabled.push(_),$&&T.hidden.push(_),L&&T.today.push(_),s&&Object.keys(s).forEach(ne=>{const ae=s==null?void 0:s[ne];ae&&co(P,ae,i)&&(j[ne]?j[ne].push(_):j[ne]=[_])})}return _=>{const P={[on.focused]:!1,[on.disabled]:!1,[on.hidden]:!1,[on.outside]:!1,[on.today]:!1},w={};for(const O in T){const I=T[O];P[O]=I.some(R=>R===_)}for(const O in j)w[O]=j[O].some(I=>I===_);return{...P,...w}}}function J7(t,e,n={}){return Object.entries(t).filter(([,i])=>i===!0).reduce((i,[a])=>(n[a]?i.push(n[a]):e[on[a]]?i.push(e[on[a]]):e[sa[a]]&&i.push(e[sa[a]]),i),[e[Ke.Day]])}function Z7(t){return{...X7,...t}}function eW(t){const e={"data-mode":t.mode??void 0,"data-required":"required"in t?t.required:void 0,"data-multiple-months":t.numberOfMonths&&t.numberOfMonths>1||void 0,"data-week-numbers":t.showWeekNumber||void 0,"data-broadcast-calendar":t.broadcastCalendar||void 0,"data-nav-layout":t.navLayout||void 0};return Object.entries(t).forEach(([n,r])=>{n.startsWith("data-")&&(e[n]=r)}),e}function tW(){const t={};for(const e in Ke)t[Ke[e]]=`rdp-${Ke[e]}`;for(const e in on)t[on[e]]=`rdp-${on[e]}`;for(const e in sa)t[sa[e]]=`rdp-${sa[e]}`;for(const e in ri)t[ri[e]]=`rdp-${ri[e]}`;return t}function OM(t,e,n){return(n??new di(e)).formatMonthYear(t)}const nW=OM;function rW(t,e,n){return(n??new di(e)).format(t,"d")}function iW(t,e=qa){return e.format(t,"LLLL")}function aW(t,e,n){return(n??new di(e)).format(t,"cccccc")}function oW(t,e=qa){return t<10?e.formatNumber(`0${t.toLocaleString()}`):e.formatNumber(`${t.toLocaleString()}`)}function sW(){return""}function kM(t,e=qa){return e.format(t,"yyyy")}const lW=kM,uW=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:OM,formatDay:rW,formatMonthCaption:nW,formatMonthDropdown:iW,formatWeekNumber:oW,formatWeekNumberHeader:sW,formatWeekdayName:aW,formatYearCaption:lW,formatYearDropdown:kM},Symbol.toStringTag,{value:"Module"}));function cW(t){return t!=null&&t.formatMonthCaption&&!t.formatCaption&&(t.formatCaption=t.formatMonthCaption),t!=null&&t.formatYearCaption&&!t.formatYearDropdown&&(t.formatYearDropdown=t.formatYearCaption),{...uW,...t}}function fW(t,e,n,r,i){const{startOfMonth:a,startOfYear:o,endOfYear:s,eachMonthOfInterval:l,getMonth:u}=i;return l({start:o(t),end:s(t)}).map(m=>{const g=r.formatMonthDropdown(m,i),b=u(m),v=e&&m<a(e)||n&&m>a(n)||!1;return{value:b,label:g,disabled:v}})}function dW(t,e={},n={}){let r={...e==null?void 0:e[Ke.Day]};return Object.entries(t).filter(([,i])=>i===!0).forEach(([i])=>{r={...r,...n==null?void 0:n[i]}}),r}function hW(t,e,n){const r=t.today(),i=e?t.startOfISOWeek(r):t.startOfWeek(r),a=[];for(let o=0;o<7;o++){const s=t.addDays(i,o);a.push(s)}return a}function pW(t,e,n,r,i=!1){if(!t||!e)return;const{startOfYear:a,endOfYear:o,addYears:s,getYear:l,isBefore:u,isSameYear:c}=r,f=a(t),m=o(e),g=[];let b=f;for(;u(b,m)||c(b,m);)g.push(b),b=s(b,1);return i&&g.reverse(),g.map(v=>{const x=n.formatYearDropdown(v,r);return{value:l(v),label:x,disabled:!1}})}function CM(t,e,n,r){let i=(r??new di(n)).format(t,"PPPP");return e.today&&(i=`Today, ${i}`),e.selected&&(i=`${i}, selected`),i}const mW=CM;function IM(t,e,n){return(n??new di(e)).formatMonthYear(t)}const gW=IM;function yW(t,e,n,r){let i=(r??new di(n)).format(t,"PPPP");return e!=null&&e.today&&(i=`Today, ${i}`),i}function vW(t){return"Choose the Month"}function bW(){return""}function xW(t){return"Go to the Next Month"}function wW(t){return"Go to the Previous Month"}function _W(t,e,n){return(n??new di(e)).format(t,"cccc")}function SW(t,e){return`Week ${t}`}function EW(t){return"Week Number"}function AW(t){return"Choose the Year"}const TW=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:gW,labelDay:mW,labelDayButton:CM,labelGrid:IM,labelGridcell:yW,labelMonthDropdown:vW,labelNav:bW,labelNext:xW,labelPrevious:wW,labelWeekNumber:SW,labelWeekNumberHeader:EW,labelWeekday:_W,labelYearDropdown:AW},Symbol.toStringTag,{value:"Module"})),hp=t=>t instanceof HTMLElement?t:null,sb=t=>[...t.querySelectorAll("[data-animated-month]")??[]],PW=t=>hp(t.querySelector("[data-animated-month]")),lb=t=>hp(t.querySelector("[data-animated-caption]")),ub=t=>hp(t.querySelector("[data-animated-weeks]")),OW=t=>hp(t.querySelector("[data-animated-nav]")),kW=t=>hp(t.querySelector("[data-animated-weekdays]"));function CW(t,e,{classNames:n,months:r,focused:i,dateLib:a}){const o=z.useRef(null),s=z.useRef(r),l=z.useRef(!1);z.useLayoutEffect(()=>{const u=s.current;if(s.current=r,!e||!t.current||!(t.current instanceof HTMLElement)||r.length===0||u.length===0||r.length!==u.length)return;const c=a.isSameMonth(r[0].date,u[0].date),f=a.isAfter(r[0].date,u[0].date),m=f?n[ri.caption_after_enter]:n[ri.caption_before_enter],g=f?n[ri.weeks_after_enter]:n[ri.weeks_before_enter],b=o.current,v=t.current.cloneNode(!0);if(v instanceof HTMLElement?(sb(v).forEach(T=>{if(!(T instanceof HTMLElement))return;const j=PW(T);j&&T.contains(j)&&T.removeChild(j);const _=lb(T);_&&_.classList.remove(m);const P=ub(T);P&&P.classList.remove(g)}),o.current=v):o.current=null,l.current||c||i)return;const x=b instanceof HTMLElement?sb(b):[],S=sb(t.current);if(S!=null&&S.every(E=>E instanceof HTMLElement)&&x&&x.every(E=>E instanceof HTMLElement)){l.current=!0,t.current.style.isolation="isolate";const E=OW(t.current);E&&(E.style.zIndex="1"),S.forEach((T,j)=>{const _=x[j];if(!_)return;T.style.position="relative",T.style.overflow="hidden";const P=lb(T);P&&P.classList.add(m);const w=ub(T);w&&w.classList.add(g);const O=()=>{l.current=!1,t.current&&(t.current.style.isolation=""),E&&(E.style.zIndex=""),P&&P.classList.remove(m),w&&w.classList.remove(g),T.style.position="",T.style.overflow="",T.contains(_)&&T.removeChild(_)};_.style.pointerEvents="none",_.style.position="absolute",_.style.overflow="hidden",_.setAttribute("aria-hidden","true");const I=kW(_);I&&(I.style.opacity="0");const R=lb(_);R&&(R.classList.add(f?n[ri.caption_before_exit]:n[ri.caption_after_exit]),R.addEventListener("animationend",O));const D=ub(_);D&&D.classList.add(f?n[ri.weeks_before_exit]:n[ri.weeks_after_exit]),T.insertBefore(_,T.firstChild)})}})}function IW(t,e,n,r){const i=t[0],a=t[t.length-1],{ISOWeek:o,fixedWeeks:s,broadcastCalendar:l}=n??{},{addDays:u,differenceInCalendarDays:c,differenceInCalendarMonths:f,endOfBroadcastWeek:m,endOfISOWeek:g,endOfMonth:b,endOfWeek:v,isAfter:x,startOfBroadcastWeek:S,startOfISOWeek:E,startOfWeek:T}=r,j=l?S(i,r):o?E(i):T(i),_=l?m(a):o?g(b(a)):v(b(a)),P=c(_,j),w=f(a,i)+1,O=[];for(let D=0;D<=P;D++){const $=u(j,D);if(e&&x($,e))break;O.push($)}const R=(l?35:42)*w;if(s&&O.length<R){const D=R-O.length;for(let $=0;$<D;$++){const L=u(O[O.length-1],1);O.push(L)}}return O}function jW(t){const e=[];return t.reduce((n,r)=>{const i=r.weeks.reduce((a,o)=>a.concat(o.days.slice()),e.slice());return n.concat(i.slice())},e.slice())}function NW(t,e,n,r){const{numberOfMonths:i=1}=n,a=[];for(let o=0;o<i;o++){const s=r.addMonths(t,o);if(e&&s>e)break;a.push(s)}return a}function OP(t,e,n,r){const{month:i,defaultMonth:a,today:o=r.today(),numberOfMonths:s=1}=t;let l=i||a||o;const{differenceInCalendarMonths:u,addMonths:c,startOfMonth:f}=r;if(n&&u(n,l)<s-1){const m=-1*(s-1);l=c(n,m)}return e&&u(l,e)<0&&(l=e),f(l)}function DW(t,e,n,r){const{addDays:i,endOfBroadcastWeek:a,endOfISOWeek:o,endOfMonth:s,endOfWeek:l,getISOWeek:u,getWeek:c,startOfBroadcastWeek:f,startOfISOWeek:m,startOfWeek:g}=r,b=t.reduce((v,x)=>{const S=n.broadcastCalendar?f(x,r):n.ISOWeek?m(x):g(x),E=n.broadcastCalendar?a(x):n.ISOWeek?o(s(x)):l(s(x)),T=e.filter(w=>w>=S&&w<=E),j=n.broadcastCalendar?35:42;if(n.fixedWeeks&&T.length<j){const w=e.filter(O=>{const I=j-T.length;return O>E&&O<=i(E,I)});T.push(...w)}const _=T.reduce((w,O)=>{const I=n.ISOWeek?u(O):c(O),R=w.find($=>$.weekNumber===I),D=new wM(O,x,r);return R?R.days.push(D):w.push(new S7(I,[D])),w},[]),P=new _7(x,_);return v.push(P),v},[]);return n.reverseMonths?b.reverse():b}function MW(t,e){let{startMonth:n,endMonth:r}=t;const{startOfYear:i,startOfDay:a,startOfMonth:o,endOfMonth:s,addYears:l,endOfYear:u,newDate:c,today:f}=e,{fromYear:m,toYear:g,fromMonth:b,toMonth:v}=t;!n&&b&&(n=b),!n&&m&&(n=e.newDate(m,0,1)),!r&&v&&(r=v),!r&&g&&(r=c(g,11,31));const x=t.captionLayout==="dropdown"||t.captionLayout==="dropdown-years";return n?n=o(n):m?n=c(m,0,1):!n&&x&&(n=i(l(t.today??f(),-100))),r?r=s(r):g?r=c(g,11,31):!r&&x&&(r=u(t.today??f())),[n&&a(n),r&&a(r)]}function RW(t,e,n,r){if(n.disableNavigation)return;const{pagedNavigation:i,numberOfMonths:a=1}=n,{startOfMonth:o,addMonths:s,differenceInCalendarMonths:l}=r,u=i?a:1,c=o(t);if(!e)return s(c,u);if(!(l(e,t)<a))return s(c,u)}function $W(t,e,n,r){if(n.disableNavigation)return;const{pagedNavigation:i,numberOfMonths:a}=n,{startOfMonth:o,addMonths:s,differenceInCalendarMonths:l}=r,u=i?a??1:1,c=o(t);if(!e)return s(c,-u);if(!(l(c,e)<=0))return s(c,-u)}function LW(t){const e=[];return t.reduce((n,r)=>n.concat(r.weeks.slice()),e.slice())}function Ev(t,e){const[n,r]=z.useState(t);return[e===void 0?n:e,r]}function FW(t,e){const[n,r]=MW(t,e),{startOfMonth:i,endOfMonth:a}=e,o=OP(t,n,r,e),[s,l]=Ev(o,t.month?o:void 0);z.useEffect(()=>{const P=OP(t,n,r,e);l(P)},[t.timeZone]);const u=NW(s,r,t,e),c=IW(u,t.endMonth?a(t.endMonth):void 0,t,e),f=DW(u,c,t,e),m=LW(f),g=jW(f),b=$W(s,n,t,e),v=RW(s,r,t,e),{disableNavigation:x,onMonthChange:S}=t,E=P=>m.some(w=>w.days.some(O=>O.isEqualTo(P))),T=P=>{if(x)return;let w=i(P);n&&w<i(n)&&(w=i(n)),r&&w>i(r)&&(w=i(r)),l(w),S==null||S(w)};return{months:f,weeks:m,days:g,navStart:n,navEnd:r,previousMonth:b,nextMonth:v,goToMonth:T,goToDay:P=>{E(P)||T(P.date)}}}var Ta;(function(t){t[t.Today=0]="Today",t[t.Selected=1]="Selected",t[t.LastFocused=2]="LastFocused",t[t.FocusedModifier=3]="FocusedModifier"})(Ta||(Ta={}));function kP(t){return!t[on.disabled]&&!t[on.hidden]&&!t[on.outside]}function zW(t,e,n,r){let i,a=-1;for(const o of t){const s=e(o);kP(s)&&(s[on.focused]&&a<Ta.FocusedModifier?(i=o,a=Ta.FocusedModifier):r!=null&&r.isEqualTo(o)&&a<Ta.LastFocused?(i=o,a=Ta.LastFocused):n(o.date)&&a<Ta.Selected?(i=o,a=Ta.Selected):s[on.today]&&a<Ta.Today&&(i=o,a=Ta.Today))}return i||(i=t.find(o=>kP(e(o)))),i}function VW(t,e,n,r,i,a,o){const{ISOWeek:s,broadcastCalendar:l}=a,{addDays:u,addMonths:c,addWeeks:f,addYears:m,endOfBroadcastWeek:g,endOfISOWeek:b,endOfWeek:v,max:x,min:S,startOfBroadcastWeek:E,startOfISOWeek:T,startOfWeek:j}=o;let P={day:u,week:f,month:c,year:m,startOfWeek:w=>l?E(w,o):s?T(w):j(w),endOfWeek:w=>l?g(w):s?b(w):v(w)}[t](n,e==="after"?1:-1);return e==="before"&&r?P=x([r,P]):e==="after"&&i&&(P=S([i,P])),P}function jM(t,e,n,r,i,a,o,s=0){if(s>365)return;const l=VW(t,e,n.date,r,i,a,o),u=!!(a.disabled&&co(l,a.disabled,o)),c=!!(a.hidden&&co(l,a.hidden,o)),f=l,m=new wM(l,f,o);return!u&&!c?m:jM(t,e,m,r,i,a,o,s+1)}function BW(t,e,n,r,i){const{autoFocus:a}=t,[o,s]=z.useState(),l=zW(e.days,n,r||(()=>!1),o),[u,c]=z.useState(a?l:void 0);return{isFocusTarget:v=>!!(l!=null&&l.isEqualTo(v)),setFocused:c,focused:u,blur:()=>{s(u),c(void 0)},moveFocus:(v,x)=>{if(!u)return;const S=jM(v,x,u,e.navStart,e.navEnd,t,i);S&&(e.goToDay(S),c(S))}}}function UW(t,e){const{selected:n,required:r,onSelect:i}=t,[a,o]=Ev(n,i?n:void 0),s=i?n:a,{isSameDay:l}=e,u=g=>(s==null?void 0:s.some(b=>l(b,g)))??!1,{min:c,max:f}=t;return{selected:s,select:(g,b,v)=>{let x=[...s??[]];if(u(g)){if((s==null?void 0:s.length)===c||r&&(s==null?void 0:s.length)===1)return;x=s==null?void 0:s.filter(S=>!l(S,g))}else(s==null?void 0:s.length)===f?x=[g]:x=[...x,g];return i||o(x),i==null||i(x,g,b,v),x},isSelected:u}}function WW(t,e,n=0,r=0,i=!1,a=qa){const{from:o,to:s}=e||{},{isSameDay:l,isAfter:u,isBefore:c}=a;let f;if(!o&&!s)f={from:t,to:n>0?void 0:t};else if(o&&!s)l(o,t)?n===0?f={from:o,to:t}:i?f={from:o,to:void 0}:f=void 0:c(t,o)?f={from:t,to:o}:f={from:o,to:t};else if(o&&s)if(l(o,t)&&l(s,t))i?f={from:o,to:s}:f=void 0;else if(l(o,t))f={from:o,to:n>0?void 0:t};else if(l(s,t))f={from:t,to:n>0?void 0:t};else if(c(t,o))f={from:t,to:s};else if(u(t,o))f={from:o,to:t};else if(u(t,s))f={from:o,to:t};else throw new Error("Invalid range");if(f!=null&&f.from&&(f!=null&&f.to)){const m=a.differenceInCalendarDays(f.to,f.from);r>0&&m>r?f={from:t,to:void 0}:n>1&&m<n&&(f={from:t,to:void 0})}return f}function qW(t,e,n=qa){const r=Array.isArray(e)?e:[e];let i=t.from;const a=n.differenceInCalendarDays(t.to,t.from),o=Math.min(a,6);for(let s=0;s<=o;s++){if(r.includes(i.getDay()))return!0;i=n.addDays(i,1)}return!1}function CP(t,e,n=qa){return uo(t,e.from,!1,n)||uo(t,e.to,!1,n)||uo(e,t.from,!1,n)||uo(e,t.to,!1,n)}function KW(t,e,n=qa){const r=Array.isArray(e)?e:[e];if(r.filter(s=>typeof s!="function").some(s=>typeof s=="boolean"?s:n.isDate(s)?uo(t,s,!1,n):PM(s,n)?s.some(l=>uo(t,l,!1,n)):_S(s)?s.from&&s.to?CP(t,{from:s.from,to:s.to},n):!1:TM(s)?qW(t,s.dayOfWeek,n):SM(s)?n.isAfter(s.before,s.after)?CP(t,{from:n.addDays(s.after,1),to:n.addDays(s.before,-1)},n):co(t.from,s,n)||co(t.to,s,n):EM(s)||AM(s)?co(t.from,s,n)||co(t.to,s,n):!1))return!0;const o=r.filter(s=>typeof s=="function");if(o.length){let s=t.from;const l=n.differenceInCalendarDays(t.to,t.from);for(let u=0;u<=l;u++){if(o.some(c=>c(s)))return!0;s=n.addDays(s,1)}}return!1}function HW(t,e){const{disabled:n,excludeDisabled:r,selected:i,required:a,onSelect:o}=t,[s,l]=Ev(i,o?i:void 0),u=o?i:s;return{selected:u,select:(m,g,b)=>{const{min:v,max:x}=t,S=m?WW(m,u,v,x,a,e):void 0;return r&&n&&(S!=null&&S.from)&&S.to&&KW({from:S.from,to:S.to},n,e)&&(S.from=m,S.to=void 0),o||l(S),o==null||o(S,m,g,b),S},isSelected:m=>u&&uo(u,m,!1,e)}}function GW(t,e){const{selected:n,required:r,onSelect:i}=t,[a,o]=Ev(n,i?n:void 0),s=i?n:a,{isSameDay:l}=e;return{selected:s,select:(f,m,g)=>{let b=f;return!r&&s&&s&&l(f,s)&&(b=void 0),i||o(b),i==null||i(b,f,m,g),b},isSelected:f=>s?l(s,f):!1}}function YW(t,e){const n=GW(t,e),r=UW(t,e),i=HW(t,e);switch(t.mode){case"single":return n;case"multiple":return r;case"range":return i;default:return}}function NM(t){var wr;let e=t;e.timeZone&&(e={...t},e.today&&(e.today=new dr(e.today,e.timeZone)),e.month&&(e.month=new dr(e.month,e.timeZone)),e.defaultMonth&&(e.defaultMonth=new dr(e.defaultMonth,e.timeZone)),e.startMonth&&(e.startMonth=new dr(e.startMonth,e.timeZone)),e.endMonth&&(e.endMonth=new dr(e.endMonth,e.timeZone)),e.mode==="single"&&e.selected?e.selected=new dr(e.selected,e.timeZone):e.mode==="multiple"&&e.selected?e.selected=(wr=e.selected)==null?void 0:wr.map(Qe=>new dr(Qe,e.timeZone)):e.mode==="range"&&e.selected&&(e.selected={from:e.selected.from?new dr(e.selected.from,e.timeZone):void 0,to:e.selected.to?new dr(e.selected.to,e.timeZone):void 0}));const{components:n,formatters:r,labels:i,dateLib:a,locale:o,classNames:s}=z.useMemo(()=>{const Qe={...wS,...e.locale};return{dateLib:new di({locale:Qe,weekStartsOn:e.broadcastCalendar?1:e.weekStartsOn,firstWeekContainsDate:e.firstWeekContainsDate,useAdditionalWeekYearTokens:e.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:e.useAdditionalDayOfYearTokens,timeZone:e.timeZone,numerals:e.numerals},e.dateLib),components:Z7(e.components),formatters:cW(e.formatters),labels:{...TW,...e.labels},locale:Qe,classNames:{...tW(),...e.classNames}}},[e.locale,e.broadcastCalendar,e.weekStartsOn,e.firstWeekContainsDate,e.useAdditionalWeekYearTokens,e.useAdditionalDayOfYearTokens,e.timeZone,e.numerals,e.dateLib,e.components,e.formatters,e.labels,e.classNames]),{captionLayout:l,mode:u,navLayout:c,numberOfMonths:f=1,onDayBlur:m,onDayClick:g,onDayFocus:b,onDayKeyDown:v,onDayMouseEnter:x,onDayMouseLeave:S,onNextClick:E,onPrevClick:T,showWeekNumber:j,styles:_}=e,{formatCaption:P,formatDay:w,formatMonthDropdown:O,formatWeekNumber:I,formatWeekNumberHeader:R,formatWeekdayName:D,formatYearDropdown:$}=r,L=FW(e,a),{days:ne,months:ae,navStart:ce,navEnd:me,previousMonth:X,nextMonth:ie,goToMonth:ge}=L,Te=Q7(ne,e,ce,me,a),{isSelected:be,select:he,selected:Se}=YW(e,a)??{},{blur:Ve,focused:We,isFocusTarget:we,moveFocus:Be,setFocused:te}=BW(e,L,Te,be??(()=>!1),a),{labelDayButton:$e,labelGridcell:Ue,labelGrid:se,labelMonthDropdown:ut,labelNav:Ee,labelPrevious:ct,labelNext:yt,labelWeekday:Ut,labelWeekNumber:Gn,labelWeekNumberHeader:Ct,labelYearDropdown:Mt}=i,tt=z.useMemo(()=>hW(a,e.ISOWeek),[a,e.ISOWeek]),Ft=u!==void 0||g!==void 0,bn=z.useCallback(()=>{X&&(ge(X),T==null||T(X))},[X,ge,T]),Yr=z.useCallback(()=>{ie&&(ge(ie),E==null||E(ie))},[ge,ie,E]),zn=z.useCallback((Qe,xe)=>Ye=>{Ye.preventDefault(),Ye.stopPropagation(),te(Qe),he==null||he(Qe.date,xe,Ye),g==null||g(Qe.date,xe,Ye)},[he,g,te]),mi=z.useCallback((Qe,xe)=>Ye=>{te(Qe),b==null||b(Qe.date,xe,Ye)},[b,te]),gi=z.useCallback((Qe,xe)=>Ye=>{Ve(),m==null||m(Qe.date,xe,Ye)},[Ve,m]),Ha=z.useCallback((Qe,xe)=>Ye=>{const Je={ArrowLeft:[Ye.shiftKey?"month":"day",e.dir==="rtl"?"after":"before"],ArrowRight:[Ye.shiftKey?"month":"day",e.dir==="rtl"?"before":"after"],ArrowDown:[Ye.shiftKey?"year":"week","after"],ArrowUp:[Ye.shiftKey?"year":"week","before"],PageUp:[Ye.shiftKey?"year":"month","before"],PageDown:[Ye.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(Je[Ye.key]){Ye.preventDefault(),Ye.stopPropagation();const[xn,lt]=Je[Ye.key];Be(xn,lt)}v==null||v(Qe.date,xe,Ye)},[Be,v,e.dir]),Ga=z.useCallback((Qe,xe)=>Ye=>{x==null||x(Qe.date,xe,Ye)},[x]),Us=z.useCallback((Qe,xe)=>Ye=>{S==null||S(Qe.date,xe,Ye)},[S]),Ya=z.useCallback(Qe=>xe=>{const Ye=Number(xe.target.value),Je=a.setMonth(a.startOfMonth(Qe),Ye);ge(Je)},[a,ge]),yi=z.useCallback(Qe=>xe=>{const Ye=Number(xe.target.value),Je=a.setYear(a.startOfMonth(Qe),Ye);ge(Je)},[a,ge]),{className:vi,style:Xa}=z.useMemo(()=>({className:[s[Ke.Root],e.className].filter(Boolean).join(" "),style:{..._==null?void 0:_[Ke.Root],...e.style}}),[s,e.className,e.style,_]),jr=eW(e),Re=z.useRef(null);CW(Re,!!e.animate,{classNames:s,months:ae,focused:We,dateLib:a});const pa={dayPickerProps:e,selected:Se,select:he,isSelected:be,months:ae,nextMonth:ie,previousMonth:X,goToMonth:ge,getModifiers:Te,components:n,classNames:s,styles:_,labels:i,formatters:r};return U.createElement(_M.Provider,{value:pa},U.createElement(n.Root,{rootRef:e.animate?Re:void 0,className:vi,style:Xa,dir:e.dir,id:e.id,lang:e.lang,nonce:e.nonce,title:e.title,role:e.role,"aria-label":e["aria-label"],"aria-labelledby":e["aria-labelledby"],...jr},U.createElement(n.Months,{className:s[Ke.Months],style:_==null?void 0:_[Ke.Months]},!e.hideNavigation&&!c&&U.createElement(n.Nav,{"data-animated-nav":e.animate?"true":void 0,className:s[Ke.Nav],style:_==null?void 0:_[Ke.Nav],"aria-label":Ee(),onPreviousClick:bn,onNextClick:Yr,previousMonth:X,nextMonth:ie}),ae.map((Qe,xe)=>U.createElement(n.Month,{"data-animated-month":e.animate?"true":void 0,className:s[Ke.Month],style:_==null?void 0:_[Ke.Month],key:xe,displayIndex:xe,calendarMonth:Qe},c==="around"&&!e.hideNavigation&&xe===0&&U.createElement(n.PreviousMonthButton,{type:"button",className:s[Ke.PreviousMonthButton],tabIndex:X?void 0:-1,"aria-disabled":X?void 0:!0,"aria-label":ct(X),onClick:bn,"data-animated-button":e.animate?"true":void 0},U.createElement(n.Chevron,{disabled:X?void 0:!0,className:s[Ke.Chevron],orientation:e.dir==="rtl"?"right":"left"})),U.createElement(n.MonthCaption,{"data-animated-caption":e.animate?"true":void 0,className:s[Ke.MonthCaption],style:_==null?void 0:_[Ke.MonthCaption],calendarMonth:Qe,displayIndex:xe},l!=null&&l.startsWith("dropdown")?U.createElement(n.DropdownNav,{className:s[Ke.Dropdowns],style:_==null?void 0:_[Ke.Dropdowns]},(()=>{const Ye=l==="dropdown"||l==="dropdown-months"?U.createElement(n.MonthsDropdown,{key:"month",className:s[Ke.MonthsDropdown],"aria-label":ut(),classNames:s,components:n,disabled:!!e.disableNavigation,onChange:Ya(Qe.date),options:fW(Qe.date,ce,me,r,a),style:_==null?void 0:_[Ke.Dropdown],value:a.getMonth(Qe.date)}):U.createElement("span",{key:"month"},O(Qe.date,a)),Je=l==="dropdown"||l==="dropdown-years"?U.createElement(n.YearsDropdown,{key:"year",className:s[Ke.YearsDropdown],"aria-label":Mt(a.options),classNames:s,components:n,disabled:!!e.disableNavigation,onChange:yi(Qe.date),options:pW(ce,me,r,a,!!e.reverseYears),style:_==null?void 0:_[Ke.Dropdown],value:a.getYear(Qe.date)}):U.createElement("span",{key:"year"},$(Qe.date,a));return a.getMonthYearOrder()==="year-first"?[Je,Ye]:[Ye,Je]})(),U.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},P(Qe.date,a.options,a))):U.createElement(n.CaptionLabel,{className:s[Ke.CaptionLabel],role:"status","aria-live":"polite"},P(Qe.date,a.options,a))),c==="around"&&!e.hideNavigation&&xe===f-1&&U.createElement(n.NextMonthButton,{type:"button",className:s[Ke.NextMonthButton],tabIndex:ie?void 0:-1,"aria-disabled":ie?void 0:!0,"aria-label":yt(ie),onClick:Yr,"data-animated-button":e.animate?"true":void 0},U.createElement(n.Chevron,{disabled:ie?void 0:!0,className:s[Ke.Chevron],orientation:e.dir==="rtl"?"left":"right"})),xe===f-1&&c==="after"&&!e.hideNavigation&&U.createElement(n.Nav,{"data-animated-nav":e.animate?"true":void 0,className:s[Ke.Nav],style:_==null?void 0:_[Ke.Nav],"aria-label":Ee(),onPreviousClick:bn,onNextClick:Yr,previousMonth:X,nextMonth:ie}),U.createElement(n.MonthGrid,{role:"grid","aria-multiselectable":u==="multiple"||u==="range","aria-label":se(Qe.date,a.options,a)||void 0,className:s[Ke.MonthGrid],style:_==null?void 0:_[Ke.MonthGrid]},!e.hideWeekdays&&U.createElement(n.Weekdays,{"data-animated-weekdays":e.animate?"true":void 0,className:s[Ke.Weekdays],style:_==null?void 0:_[Ke.Weekdays]},j&&U.createElement(n.WeekNumberHeader,{"aria-label":Ct(a.options),className:s[Ke.WeekNumberHeader],style:_==null?void 0:_[Ke.WeekNumberHeader],scope:"col"},R()),tt.map(Ye=>U.createElement(n.Weekday,{"aria-label":Ut(Ye,a.options,a),className:s[Ke.Weekday],key:String(Ye),style:_==null?void 0:_[Ke.Weekday],scope:"col"},D(Ye,a.options,a)))),U.createElement(n.Weeks,{"data-animated-weeks":e.animate?"true":void 0,className:s[Ke.Weeks],style:_==null?void 0:_[Ke.Weeks]},Qe.weeks.map(Ye=>U.createElement(n.Week,{className:s[Ke.Week],key:Ye.weekNumber,style:_==null?void 0:_[Ke.Week],week:Ye},j&&U.createElement(n.WeekNumber,{week:Ye,style:_==null?void 0:_[Ke.WeekNumber],"aria-label":Gn(Ye.weekNumber,{locale:o}),className:s[Ke.WeekNumber],scope:"row",role:"rowheader"},I(Ye.weekNumber,a)),Ye.days.map(Je=>{const{date:xn}=Je,lt=Te(Je);if(lt[on.focused]=!lt.hidden&&!!(We!=null&&We.isEqualTo(Je)),lt[sa.selected]=(be==null?void 0:be(xn))||lt.selected,_S(Se)){const{from:Yn,to:bi}=Se;lt[sa.range_start]=!!(Yn&&bi&&a.isSameDay(xn,Yn)),lt[sa.range_end]=!!(Yn&&bi&&a.isSameDay(xn,bi)),lt[sa.range_middle]=uo(Se,xn,!0,a)}const zi=dW(lt,_,e.modifiersStyles),wf=J7(lt,s,e.modifiersClassNames),_f=!Ft&&!lt.hidden?Ue(xn,lt,a.options,a):void 0;return U.createElement(n.Day,{key:`${a.format(xn,"yyyy-MM-dd")}_${a.format(Je.displayMonth,"yyyy-MM")}`,day:Je,modifiers:lt,className:wf.join(" "),style:zi,role:"gridcell","aria-selected":lt.selected||void 0,"aria-label":_f,"data-day":a.format(xn,"yyyy-MM-dd"),"data-month":Je.outside?a.format(xn,"yyyy-MM"):void 0,"data-selected":lt.selected||void 0,"data-disabled":lt.disabled||void 0,"data-hidden":lt.hidden||void 0,"data-outside":Je.outside||void 0,"data-focused":lt.focused||void 0,"data-today":lt.today||void 0},!lt.hidden&&Ft?U.createElement(n.DayButton,{className:s[Ke.DayButton],style:_==null?void 0:_[Ke.DayButton],type:"button",day:Je,modifiers:lt,disabled:lt.disabled||void 0,tabIndex:we(Je)?0:-1,"aria-label":$e(xn,lt,a.options,a),onClick:zn(Je,lt),onBlur:gi(Je,lt),onFocus:mi(Je,lt),onKeyDown:Ha(Je,lt),onMouseEnter:Ga(Je,lt),onMouseLeave:Us(Je,lt)},w(xn,a.options,a)):!lt.hidden&&w(Je.date,a.options,a))})))))))),e.footer&&U.createElement(n.Footer,{className:s[Ke.Footer],style:_==null?void 0:_[Ke.Footer],role:"status","aria-live":"polite"},e.footer)))}const DM=({isOpen:t,onClose:e})=>{const{addLot:n}=tn(),[r,i]=z.useState(""),[a,o]=z.useState(""),s=async()=>{if(r.trim()===""){o("El nombre del lote no puede estar vacío.");return}try{await n(r),i(""),o(""),e()}catch(u){o("No se pudo guardar el lote."),console.error(u)}},l=()=>{i(""),o(""),e()};return d.jsx(Gt,{isOpen:t,onClose:l,title:"Crear Nuevo Lote",children:d.jsxs("div",{className:"space-y-4",children:[d.jsx("p",{className:"text-sm text-zinc-400",children:"Introduce el nombre de la nueva ubicación o lote en tu finca."}),d.jsx("div",{children:d.jsx("input",{type:"text",value:r,onChange:u=>i(u.target.value),placeholder:"Ej: Cabritonas Servicio",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-amber focus:ring-0"})}),a&&d.jsx("p",{className:"text-sm text-red-400",children:a}),d.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[d.jsx("button",{onClick:l,className:"px-4 py-2 bg-zinc-600 rounded-lg hover:bg-zinc-500",children:"Cancelar"}),d.jsx("button",{onClick:s,className:"px-4 py-2 bg-brand-amber text-black font-bold rounded-lg hover:bg-yellow-500",children:"Guardar Lote"})]})]})})},MM=({isOpen:t,onClose:e})=>{const{addOrigin:n}=tn(),[r,i]=z.useState(""),[a,o]=z.useState(""),s=async()=>{if(r.trim()===""){o("El nombre del origen no puede estar vacío.");return}try{await n(r),i(""),o(""),e()}catch(u){o("No se pudo guardar el origen."),console.error(u)}},l=()=>{i(""),o(""),e()};return d.jsx(Gt,{isOpen:t,onClose:l,title:"Crear Nuevo Origen",children:d.jsxs("div",{className:"space-y-4",children:[d.jsx("p",{className:"text-sm text-zinc-400",children:"Introduce el nombre de la ganadería o finca de origen."}),d.jsx("div",{children:d.jsx("input",{type:"text",value:r,onChange:u=>i(u.target.value),placeholder:"Ej: Agropecuaria La Bendición",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-amber focus:ring-0"})}),a&&d.jsx("p",{className:"text-sm text-red-400",children:a}),d.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[d.jsx("button",{onClick:l,className:"px-4 py-2 bg-zinc-600 rounded-lg hover:bg-zinc-500",children:"Cancelar"}),d.jsx("button",{onClick:s,className:"px-4 py-2 bg-brand-amber text-black font-bold rounded-lg hover:bg-yellow-500",children:"Guardar Origen"})]})]})})},XW=[{name:"Alpina",acronym:"A"},{name:"Saanen",acronym:"S"},{name:"Canaria",acronym:"AGC"},{name:"Anglo Nubian",acronym:"AN"},{name:"Toggenburger",acronym:"T"},{name:"Criolla",acronym:"C"}],QW={Hembra:["Cabrita","Cabritona","Cabra Primípara","Cabra Multípara"],Macho:["Cabrito","Cabriton","Macho Cabrío"]},JW=({step:t})=>d.jsx("div",{className:"flex items-center gap-2 px-4",children:[1,2,3].map(e=>d.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${e<=t?"bg-brand-amber":"bg-zinc-700"}`,style:{width:`${100/3}%`}},e))}),ZW=`
  .rdp { --rdp-cell-size: 40px; --rdp-accent-color: #FBBF24; --rdp-background-color: #3a3a3c; --rdp-accent-color-dark: #FBBF24; --rdp-background-color-dark: #3a3a3c; --rdp-outline: 2px solid var(--rdp-accent-color); --rdp-outline-selected: 3px solid var(--rdp-accent-color); --rdp-border-radius: 6px; color: #FFF; margin: 1em; }
  .rdp-caption_label, .rdp-nav_button { color: #FBBF24; }
  .rdp-caption_dropdowns { color: #000; }
  .rdp-head_cell { color: #8e8e93; }
  .rdp-day_selected { background-color: var(--rdp-accent-color); color: #000; font-weight: bold; }
`,RM=({onSaveSuccess:t,onCancel:e})=>{const{animals:n,lots:r,origins:i,addAnimal:a}=tn(),[o,s]=z.useState(1),[l,u]=z.useState(!1),[c,f]=z.useState(!1),[m,g]=z.useState(!1),[b,v]=z.useState(!1),[x,S]=z.useState(!1),[E,T]=z.useState(""),[j,_]=z.useState(""),[P,w]=z.useState(""),[O,I]=z.useState(""),[R,D]=z.useState(""),[$,L]=z.useState(""),[ne,ae]=z.useState(""),[ce,me]=z.useState("Finca Masparrito"),[X,ie]=z.useState(""),[ge,Te]=z.useState(""),[be,he]=z.useState(""),[Se,Ve]=z.useState(""),[We,we]=z.useState(!1),[Be,te]=z.useState(""),[$e,Ue]=z.useState(null),se=Ee=>{if(Ee){const ct=Ee.getFullYear(),yt=(Ee.getMonth()+1).toString().padStart(2,"0"),Ut=Ee.getDate().toString().padStart(2,"0");_(`${ct}-${yt}-${Ut}`)}u(!1)},ut=async Ee=>{if(Ee.preventDefault(),Ue(null),!E||!j||!P){Ue({type:"error",text:"Los campos del Paso 1 (ID, Fecha de Nacimiento y Sexo) son obligatorios."}),s(1);return}const ct={id:E.toUpperCase(),sex:P,birthDate:j,status:"Activo",lifecycleStage:Se||(P==="Hembra"?"Cabrita":"Cabrito"),location:be||"N/A",origin:ce,birthWeight:X?parseFloat(X):void 0,parturitionType:ge,fatherId:O,motherId:R,race:$,racialComposition:ne,isReference:We,observations:Be,reproductiveStatus:"No Aplica"};try{await a(ct),Ue({type:"success",text:`Animal ${E} agregado con éxito.`}),setTimeout(()=>{t()},1500)}catch(yt){Ue({type:"error",text:"No se pudo guardar el animal."}),console.error("Error al guardar animal:",yt)}};return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"space-y-6",children:[d.jsx(JW,{step:o}),d.jsxs("form",{onSubmit:ut,className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 sm:p-6 border border-brand-border space-y-6",children:[o===1&&d.jsxs("div",{className:"space-y-4 animate-fade-in",children:[d.jsx("h2",{className:"text-lg font-semibold text-white",children:"Identidad del Animal"}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"animalId",className:"block text-sm font-medium text-zinc-400 mb-1",children:"ID (*)"}),d.jsx("input",{autoFocus:!0,id:"animalId",type:"text",value:E,onChange:Ee=>T(Ee.target.value.toUpperCase()),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha Nacimiento (*)"}),d.jsxs("button",{type:"button",onClick:()=>u(!0),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-left flex justify-between items-center",children:[d.jsx("span",{className:j?"text-white":"text-zinc-500",children:j?new Date(j+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"}):"Seleccionar fecha..."}),d.jsx(gS,{className:"text-zinc-400",size:20})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"sex",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Sexo (*)"}),d.jsxs("select",{id:"sex",value:P,onChange:Ee=>{w(Ee.target.value),Ve("")},className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg",required:!0,children:[d.jsx("option",{value:"",children:"Seleccione..."}),d.jsx("option",{value:"Hembra",children:"Hembra"}),d.jsx("option",{value:"Macho",children:"Macho"})]})]})]}),o===2&&d.jsxs("div",{className:"space-y-4 animate-fade-in",children:[d.jsx("h2",{className:"text-lg font-semibold text-white",children:"Genealogía y Raza"}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Madre"}),d.jsxs("button",{type:"button",onClick:()=>f(!0),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-left flex justify-between items-center",children:[d.jsx("span",{className:R?"text-white":"text-zinc-500",children:R||"Seleccionar..."}),d.jsx(wc,{className:"text-zinc-400",size:20})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Padre (Reproductor)"}),d.jsxs("button",{type:"button",onClick:()=>g(!0),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-left flex justify-between items-center",children:[d.jsx("span",{className:O?"text-white":"text-zinc-500",children:O||"Seleccionar..."}),d.jsx(wc,{className:"text-zinc-400",size:20})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"race",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Raza (si es puro)"}),d.jsxs("select",{id:"race",value:$,onChange:Ee=>L(Ee.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg",children:[d.jsx("option",{value:"",children:"Mestizo / No aplica"}),XW.map(Ee=>d.jsx("option",{value:Ee.name,children:Ee.name},Ee.name))]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"racialComposition",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Composición Racial (mestizo)"}),d.jsx("input",{id:"racialComposition",type:"text",placeholder:"Ej: 50%A / 50%S",value:ne,onChange:Ee=>ae(Ee.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]})]}),o===3&&d.jsxs("div",{className:"space-y-4 animate-fade-in",children:[d.jsx("h2",{className:"text-lg font-semibold text-white",children:"Manejo y Detalles"}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Ubicación / Lote"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("select",{id:"location",value:be,onChange:Ee=>he(Ee.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg",children:[d.jsx("option",{value:"",children:"Seleccione..."}),r.map(Ee=>d.jsx("option",{value:Ee.name,children:Ee.name},Ee.id))]}),d.jsx("button",{type:"button",onClick:()=>v(!0),className:"p-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl",children:d.jsx(Oo,{size:24})})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"origin",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Origen"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("select",{id:"origin",value:ce,onChange:Ee=>me(Ee.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg",children:[d.jsx("option",{value:"Finca Masparrito",children:"Finca Masparrito"}),i.map(Ee=>d.jsx("option",{value:Ee.name,children:Ee.name},Ee.id))]}),d.jsx("button",{type:"button",onClick:()=>S(!0),className:"p-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl",children:d.jsx(Oo,{size:24})})]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"lifecycleStage",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Estado de Crecimiento"}),d.jsxs("select",{id:"lifecycleStage",value:Se,onChange:Ee=>Ve(Ee.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg",disabled:!P,children:[d.jsx("option",{value:"",children:"Seleccione..."}),P&&QW[P].map(Ee=>d.jsx("option",{value:Ee,children:Ee},Ee))]})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"birthWeight",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Peso al nacer (Kg)"}),d.jsx("input",{id:"birthWeight",type:"number",step:"0.1",placeholder:"Ej: 4.3",value:X,onChange:Ee=>ie(Ee.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"parturitionType",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Tipo de Parto (origen)"}),d.jsxs("select",{id:"parturitionType",value:ge,onChange:Ee=>Te(Ee.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg",children:[d.jsx("option",{value:"",children:"Seleccione..."}),d.jsx("option",{children:"Simple"}),d.jsx("option",{children:"Doble"}),d.jsx("option",{children:"Triple"})]})]}),d.jsxs("div",{className:"flex items-center gap-3 bg-zinc-800/80 p-3 rounded-xl",children:[d.jsx("input",{id:"isReference",type:"checkbox",checked:We,onChange:Ee=>we(Ee.target.checked),className:"h-5 w-5 rounded text-brand-amber focus:ring-brand-amber"}),d.jsx("label",{htmlFor:"isReference",className:"text-lg text-zinc-300",children:"¿Es un animal de Referencia?"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"observations",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Observaciones"}),d.jsx("textarea",{id:"observations",value:Be,onChange:Ee=>te(Ee.target.value),rows:3,className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]})]}),d.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-zinc-700",children:[d.jsxs("button",{type:"button",onClick:()=>e?e():s(o-1),disabled:o===1&&!e,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-3 px-6 rounded-lg disabled:opacity-40 flex items-center gap-2",children:[d.jsx(ZD,{size:18})," ",o>1?"Anterior":"Cancelar"]}),o<3&&d.jsxs("button",{type:"button",onClick:()=>s(o+1),className:"bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 px-6 rounded-lg flex items-center gap-2",children:[" Siguiente ",d.jsx(b9,{size:18})," "]}),o===3&&d.jsx("button",{type:"submit",className:"bg-brand-amber hover:bg-yellow-500 text-black font-bold py-3 px-6 rounded-lg",children:" Agregar Animal "})]}),$e&&d.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${$e.type==="success"?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"}`,children:[" ",$e.type==="success"?d.jsx(rf,{size:18}):d.jsx(Rs,{size:18})," ",d.jsx("span",{children:$e.text})," "]})]})]}),d.jsxs(Gt,{isOpen:l,onClose:()=>u(!1),title:"Seleccionar Fecha de Nacimiento",children:[d.jsx("style",{children:ZW}),d.jsx("div",{className:"flex justify-center",children:d.jsx(NM,{mode:"single",selected:j?new Date(j+"T00:00:00"):void 0,onSelect:se,captionLayout:"dropdown",fromYear:new Date().getFullYear()-20,toYear:new Date().getFullYear(),showOutsideDays:!0})})]}),d.jsx(ow,{isOpen:c,onClose:()=>f(!1),onSelect:Ee=>{D(Ee),f(!1)},animals:n,title:"Seleccionar Madre",filterSex:"Hembra"}),d.jsx(ow,{isOpen:m,onClose:()=>g(!1),onSelect:Ee=>{I(Ee),g(!1)},animals:n,title:"Seleccionar Reproductor",filterSex:"Macho"}),d.jsx(DM,{isOpen:b,onClose:()=>v(!1)}),d.jsx(MM,{isOpen:x,onClose:()=>S(!1)})]})},eq=({isOpen:t,onClose:e})=>{const{addBreedingGroup:n,animals:r}=tn(),[i,a]=z.useState(""),[o,s]=z.useState(""),[l,u]=z.useState(new Date().toISOString().split("T")[0]),[c,f]=z.useState("45"),[m,g]=z.useState(!1),[b,v]=z.useState(!1),[x,S]=z.useState(""),E=async()=>{if(!i||!o||!l||!c){S("Todos los campos son obligatorios.");return}try{const _=new Date(l+"T00:00:00");_.setDate(_.getDate()+parseInt(c,10));const P=_.toISOString().split("T")[0];await n({name:i,sireId:o,startDate:l,endDate:P,status:"Activo"}),T()}catch(_){S("No se pudo guardar el lote de monta."),console.error(_)}},T=()=>{a(""),s(""),u(new Date().toISOString().split("T")[0]),f("45"),S(""),e()},j=z.useMemo(()=>{const _=r.find(P=>P.id===o);return _?`${o} (${_.race||"Mestizo"})`:o},[o,r]);return d.jsxs(d.Fragment,{children:[d.jsx(Gt,{isOpen:t,onClose:T,title:"Activar Nuevo Lote de Monta",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Nombre del Lote de Monta"}),d.jsx("input",{type:"text",value:i,onChange:_=>a(_.target.value),placeholder:"Ej: Monta Otoño 2025",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Reproductor"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("button",{type:"button",onClick:()=>g(!0),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg text-left flex justify-between items-center",children:[d.jsx("span",{className:o?"text-white":"text-zinc-500",children:j||"Seleccionar..."}),d.jsx(wc,{className:"text-zinc-400",size:20})]}),d.jsx("button",{type:"button",onClick:()=>v(!0),className:"flex-shrink-0 p-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl",children:d.jsx(Jl,{size:24})})]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Inicio"}),d.jsx("input",{type:"date",value:l,onChange:_=>u(_.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Duración (días)"}),d.jsx("input",{type:"number",value:c,onChange:_=>f(_.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg"})]})]}),x&&d.jsx("p",{className:"text-sm text-red-400",children:x}),d.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[d.jsx("button",{onClick:T,className:"px-4 py-2 bg-zinc-600 rounded-lg",children:"Cancelar"}),d.jsx("button",{onClick:E,className:"px-4 py-2 bg-brand-amber text-black font-bold rounded-lg",children:"Guardar"})]})]})}),d.jsx(ow,{isOpen:m,onClose:()=>g(!1),onSelect:_=>{s(_),g(!1)},animals:r,title:"Seleccionar Reproductor",filterSex:"Macho"}),d.jsx(Gt,{isOpen:b,onClose:()=>v(!1),title:"Registrar Nuevo Reproductor",children:d.jsx(RM,{onSaveSuccess:()=>{v(!1)},onCancel:()=>v(!1)})})]})},tq=152,nq=21,rq=tq+nq,iq=()=>{const{breedingGroups:t,serviceRecords:e,parturitions:n,animals:r,updateAnimal:i}=tn(),a=z.useMemo(()=>{const o=new Date;o.setHours(0,0,0,0);const s=t.filter(f=>f.status==="Activo"),l=[],u=new Set,c=[];for(const f of s){const m=new Date(f.startDate),g=new Set(e.filter(v=>v.breedingGroupId===f.id).map(v=>v.femaleId));if(g.size===0)continue;let b=!0;for(const v of g){if(n.some(E=>E.goatId===v&&new Date(E.parturitionDate)>=m))continue;b=!1;const S=e.filter(E=>E.femaleId===v&&E.breedingGroupId===f.id).sort((E,T)=>new Date(T.serviceDate).getTime()-new Date(E.serviceDate).getTime())[0];if(S){const E=new Date(S.serviceDate);E.setDate(E.getDate()+rq),o>E&&(u.add(f.id),c.push({femaleId:v,groupId:f.id}))}}b&&l.push(f)}return{concludedGroups:l,groupsWithAlerts:u,femalesToFlag:c}},[t,e,n]);return z.useEffect(()=>{a.femalesToFlag.length>0&&console.log("Detectadas hembras con posible fallo reproductivo:",a.femalesToFlag)},[a.femalesToFlag,r,i]),{concludedGroups:a.concludedGroups,groupsWithAlerts:a.groupsWithAlerts}},aq=({lotName:t,count:e,onClick:n})=>d.jsxs("button",{onClick:n,className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-brand-amber transition-colors",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-bold text-lg text-white",children:t}),d.jsxs("p",{className:"text-sm text-zinc-400",children:[e," ",e===1?"animal":"animales"]})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("span",{className:"bg-blue-600/80 text-white font-bold text-lg rounded-lg px-3 py-1",children:e}),d.jsx(Ms,{className:"text-zinc-600"})]})]}),IP=({group:t,animalCount:e,hasAlert:n,onClick:r})=>{const i=n?"border-red-500/80 ring-2 ring-red-500/60 shadow-lg shadow-red-900/50":"border-brand-border";return d.jsxs("button",{onClick:r,className:`w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border flex justify-between items-center hover:border-brand-amber transition-all ${i}`,children:[d.jsxs("div",{children:[d.jsxs("p",{className:"font-bold text-lg text-white flex items-center gap-2",children:[t.name,n&&d.jsx(Rs,{className:"text-red-400",size:16})]}),d.jsxs("p",{className:"text-sm text-zinc-400",children:["Semental: ",t.sireId," | ",e," ",e===1?"hembra":"hembras"]})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${t.status==="Activo"?"bg-green-500/80 text-white":"bg-zinc-600 text-zinc-300"}`,children:t.status}),d.jsx(Ms,{className:"text-zinc-600"})]})]})},oq=({navigateTo:t})=>{const{animals:e,lots:n}=tn(),r=z.useMemo(()=>{const i=e.reduce((o,s)=>{const l=s.location||"Sin Asignar";return o[l]=(o[l]||0)+1,o},{}),a=new Set([...n.map(o=>o.name),...Object.keys(i)]);return Array.from(a).map(o=>({name:o,count:i[o]||0})).sort((o,s)=>s.count-o.count)},[e,n]);return d.jsx("div",{className:"space-y-2 animate-fade-in",children:r.map(({name:i,count:a})=>d.jsx(aq,{lotName:i,count:a,onClick:()=>t({name:"lot-detail",lotName:i})},i))})},sq=({navigateTo:t})=>{const{breedingGroups:e,animals:n}=tn(),[r,i]=z.useState(!1),{concludedGroups:a,groupsWithAlerts:o}=iq(),s=z.useMemo(()=>{const l=new Set(a.map(f=>f.id)),u=e.filter(f=>f.status==="Activo"&&!l.has(f.id)).sort((f,m)=>new Date(m.startDate).getTime()-new Date(f.startDate).getTime()),c=f=>{const m=n.filter(g=>g.breedingGroupId===f.id).length;return{...f,animalCount:m}};return{active:u.map(c),concluded:a.map(c)}},[e,n,a]);return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"space-y-4 animate-fade-in",children:[d.jsxs("button",{onClick:()=>i(!0),className:"w-full flex items-center justify-center gap-2 bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 px-4 rounded-xl transition-colors text-lg",children:[d.jsx(Jl,{size:20})," Activar Temporada de Monta"]}),d.jsxs("div",{className:"space-y-2 pt-2",children:[d.jsx("h3",{className:"text-lg font-semibold text-zinc-300 px-2",children:"Temporadas Activas"}),s.active.length>0?s.active.map(l=>d.jsx(IP,{group:l,animalCount:l.animalCount,hasAlert:o.has(l.id),onClick:()=>t({name:"breeding-group-detail",groupId:l.id})},l.id)):d.jsx("div",{className:"text-center py-6 bg-brand-glass rounded-2xl",children:d.jsx("p",{className:"text-zinc-500",children:"No hay temporadas de monta activas."})})]}),d.jsxs("div",{className:"space-y-2 pt-4",children:[d.jsx("h3",{className:"text-lg font-semibold text-zinc-300 px-2",children:"Temporadas Concluidas"}),s.concluded.length>0?s.concluded.map(l=>d.jsx(IP,{group:l,animalCount:l.animalCount,hasAlert:!1,onClick:()=>t({name:"breeding-group-detail",groupId:l.id})},l.id)):d.jsx("div",{className:"text-center py-6 bg-brand-glass rounded-2xl",children:d.jsx("p",{className:"text-zinc-500",children:"Aún no hay temporadas concluidas."})})]})]}),d.jsx(eq,{isOpen:r,onClose:()=>i(!1)})]})};function jP({navigateTo:t}){const[e,n]=z.useState("physical");return d.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[d.jsxs("header",{className:"text-center pt-8 pb-4",children:[d.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white",children:"Lotes"}),d.jsx("p",{className:"text-xl text-zinc-400",children:"Gestión de Grupos"})]}),d.jsxs("div",{className:"flex bg-brand-glass rounded-xl p-1 border border-brand-border",children:[d.jsxs("button",{onClick:()=>n("physical"),className:`w-1/2 py-2 text-sm font-semibold rounded-lg transition-colors flex items-center justify-center gap-2 ${e==="physical"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:[d.jsx(af,{size:16})," Lotes Físicos"]}),d.jsxs("button",{onClick:()=>n("breeding"),className:`w-1/2 py-2 text-sm font-semibold rounded-lg transition-colors flex items-center justify-center gap-2 ${e==="breeding"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:[d.jsx($g,{size:16})," Lotes de Monta"]})]}),d.jsx("div",{className:"pt-4",children:e==="physical"?d.jsx(oq,{navigateTo:t}):d.jsx(sq,{navigateTo:t})})]})}const lq=()=>({isRelated:z.useCallback((e,n,r)=>{if(!e||!n)return!1;const i=r.find(a=>a.id===e);if(!i)return!1;if(i.fatherId===n)return!0;if(i.motherId){const a=r.find(o=>o.id===i.motherId);if(a&&a.fatherId===n)return!0}return!1},[])}),cm={"Hembras Activas":t=>t.sex==="Hembra"&&t.status==="Activo","Machos Activos":t=>t.sex==="Macho"&&t.status==="Activo",Cabritas:t=>t.lifecycleStage==="Cabrita",Cabritonas:t=>t.lifecycleStage==="Cabritona","Macho Cabrío":t=>t.lifecycleStage==="Macho Cabrío"},NP={"En Ordeño":(t,e)=>e.has(t.id),Gestantes:t=>t.reproductiveStatus==="Preñada","Último Destete":t=>t.reproductiveStatus==="Post-Parto","Cabras Secas":t=>t.reproductiveStatus==="Vacía","En Servicio":t=>t.reproductiveStatus==="En Servicio"},SS=({isOpen:t,onClose:e,onSelect:n,animals:r,parturitions:i,title:a,sireIdForInbreedingCheck:o})=>{const[s,l]=z.useState(""),[u,c]=z.useState(Object.keys(cm)[0]),[f,m]=z.useState(new Set),[g,b]=z.useState(new Set),{isRelated:v}=lq(),x=w=>{m(O=>{const I=new Set(O);return I.has(w)?I.delete(w):I.add(w),I})},S=w=>{b(O=>{const I=new Set(O);return I.has(w)?I.delete(w):I.add(w),I})},E=z.useMemo(()=>{const w=new Set(i.filter(O=>O.status==="activa").map(O=>O.goatId));return r.filter(O=>{const I=cm[u];return I?I(O):!0}).filter(O=>f.size===0?!0:Array.from(f).some(I=>{const R=NP[I];return R?R(O,w):!1})).filter(O=>s?O.id.toLowerCase().includes(s.toLowerCase()):!0)},[r,i,s,u,f]),T=z.useMemo(()=>E.length===0?!1:E.every(w=>g.has(w.id)),[E,g]),j=()=>{if(T)b(new Set);else{const w=new Set(E.map(O=>O.id));b(w)}},_=()=>{n(Array.from(g)),P()},P=()=>{l(""),b(new Set),m(new Set),c(Object.keys(cm)[0]),e()};return d.jsx(Gt,{isOpen:t,onClose:P,title:a,children:d.jsxs("div",{className:"space-y-4",children:[d.jsx("input",{type:"search",placeholder:"Buscar por ID...",value:s,onChange:w=>l(w.target.value),className:"w-full bg-zinc-800 border border-zinc-700 rounded-xl pl-4 pr-4 py-3 text-white"}),d.jsx("select",{value:u,onChange:w=>c(w.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",children:Object.keys(cm).map(w=>d.jsx("option",{value:w,children:w},w))}),d.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(NP).map(w=>d.jsx("button",{onClick:()=>x(w),className:`px-3 py-1 text-sm font-semibold rounded-full transition-colors ${f.has(w)?"bg-indigo-600 text-white":"bg-zinc-700 text-zinc-300"}`,children:w},w))}),d.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2 pr-2 border-t border-b border-zinc-700 py-2",children:E.map(w=>{const O=o?v(w.id,o,r):!1;return d.jsxs("div",{onClick:()=>S(w.id),className:`w-full text-left p-3 flex items-center gap-4 rounded-lg cursor-pointer transition-colors ${O?"bg-yellow-900/50 border border-yellow-500/60 hover:bg-yellow-800/50":"bg-zinc-800/50 hover:bg-zinc-700"}`,children:[g.has(w.id)?d.jsx($9,{className:"text-brand-amber flex-shrink-0"}):d.jsx(F9,{className:"text-zinc-500 flex-shrink-0"}),d.jsxs("div",{className:"flex-grow",children:[d.jsxs("p",{className:"font-bold text-white flex items-center gap-2",children:[w.id,O&&d.jsx(Rs,{className:"text-yellow-400",size:16})]}),d.jsxs("p",{className:"text-xs text-zinc-400",children:[w.lifecycleStage," | Lote: ",w.location]})]})]},w.id)})}),d.jsxs("div",{className:"flex justify-between items-center pt-2",children:[d.jsx("button",{type:"button",onClick:j,disabled:E.length===0,className:"bg-zinc-700 hover:bg-zinc-600 text-white font-bold py-2 px-4 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:T?"Deseleccionar":"Seleccionar Todos"}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("button",{onClick:P,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-6 rounded-lg",children:"Cancelar"}),d.jsxs("button",{onClick:_,className:"bg-brand-amber hover:bg-yellow-500 text-black font-bold py-2 px-6 rounded-lg",children:["Seleccionar (",g.size,")"]})]})]})]})})},uq=({animal:t,onSelect:e})=>d.jsxs("button",{onClick:()=>e(t.id),className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-brand-amber transition-colors",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),d.jsxs("p",{className:"text-sm text-zinc-400",children:[t.sex," | ",t.lifecycleStage]})]}),d.jsx(Ms,{className:"text-zinc-600"})]});function cq({lotName:t,onBack:e,navigateTo:n}){const{animals:r,parturitions:i,updateAnimal:a}=tn(),[o,s]=z.useState(!1),l=z.useMemo(()=>r.filter(c=>(c.location||"Sin Asignar")===t).sort((c,f)=>c.id.localeCompare(f.id)),[r,t]),u=async c=>{const f=c.map(m=>a(m,{location:t}));try{await Promise.all(f)}catch(m){console.error(`Error al asignar animales al lote ${t}:`,m)}};return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12 animate-fade-in",children:[d.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[d.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:d.jsx(Wa,{size:24})}),d.jsxs("div",{className:"text-center flex-grow",children:[d.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:t}),d.jsxs("p",{className:"text-lg text-zinc-400",children:[l.length," ",l.length===1?"animal":"animales"]})]}),d.jsx("div",{className:"w-8"})]}),d.jsxs("button",{onClick:()=>s(!0),className:"w-full flex items-center justify-center gap-2 bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-4 px-4 rounded-xl transition-colors text-lg",children:[d.jsx(Jl,{size:20})," Añadir Animales a este Lote"]}),d.jsx("div",{className:"space-y-2 pt-4",children:l.length>0?l.map(c=>d.jsx(uq,{animal:c,onSelect:f=>n({name:"rebano-profile",animalId:f})},c.id)):d.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:d.jsx("p",{className:"text-zinc-500",children:"No hay animales en este lote."})})})]}),d.jsx(SS,{isOpen:o,onClose:()=>s(!1),onSelect:u,animals:r,parturitions:i,title:`Añadir animales a: ${t}`})]})}function fq({onBack:t}){return d.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 animate-fade-in pb-12",children:[d.jsxs("header",{className:"flex items-center pt-8 pb-4 px-4",children:[d.jsx("button",{onClick:t,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:d.jsx(Wa,{size:24})}),d.jsx("div",{className:"text-center flex-grow",children:d.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Ingresar Animal"})}),d.jsx("div",{className:"w-8"})]}),d.jsx(RM,{onSaveSuccess:t,onCancel:t})]})}const $M=(t,e)=>{const[n,r]=z.useState(""),i=z.useMemo(()=>n?t.filter(a=>e.some(o=>{const s=a[o];return typeof s=="string"||typeof s=="number"?s.toString().toLowerCase().includes(n.toLowerCase()):!1})):t,[t,n,e]);return{searchTerm:n,setSearchTerm:r,filteredItems:i}},LM=({title:t,subtitle:e,searchTerm:n,setSearchTerm:r})=>{const[i,a]=z.useState(!1),o=z.useRef(null);z.useEffect(()=>{var l;i&&((l=o.current)==null||l.focus())},[i]);const s=()=>{r(""),a(!1)};return d.jsxs("header",{className:"text-center pt-4 pb-4 relative overflow-hidden",children:[d.jsxs("div",{className:`transition-transform duration-300 ${i?"-translate-y-20":"translate-y-0"}`,children:[d.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:t}),d.jsx("p",{className:"text-md text-zinc-400",children:e})]}),d.jsx("div",{className:`absolute inset-0 transition-transform duration-300 flex items-center pt-2 ${i?"translate-y-0":"translate-y-20"}`,children:d.jsx("input",{ref:o,type:"text",value:n,onChange:l=>r(l.target.value),placeholder:"Buscar por ID...",className:"w-full bg-zinc-800 text-white text-lg placeholder-zinc-500 p-3 rounded-xl border-2 border-transparent focus:border-amber-500 focus:ring-0 focus:outline-none"})}),d.jsx("div",{className:"absolute top-4 right-0 pt-1",children:d.jsx("button",{onClick:i?s:()=>a(!0),className:"p-2 text-zinc-400 hover:text-white transition-colors",children:i?d.jsx(cp,{size:22}):d.jsx(wc,{size:22})})})]})},dq=({animal:t,onSelect:e})=>d.jsxs("button",{onClick:()=>e(t.id),className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-brand-amber transition-colors",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),d.jsxs("p",{className:"text-sm text-zinc-400",children:[t.sex," | ",t.lifecycleStage," | Lote: ",t.location]})]}),d.jsx(Ms,{className:"text-zinc-600"})]});function hq({navigateTo:t,locationFilter:e}){const{animals:n,isLoading:r}=tn(),[i,a]=z.useState("all"),o=z.useMemo(()=>n.filter(c=>e?(c.location||"Sin Asignar")===e:!0).filter(c=>i==="all"?!0:c.sex===i),[n,i,e]),{searchTerm:s,setSearchTerm:l,filteredItems:u}=$M(o,["id"]);return r?d.jsx("div",{className:"text-center p-10",children:d.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando rebaño..."})}):d.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[d.jsx(LM,{title:e||"Mi Rebaño",subtitle:`${u.length} de ${n.length} animales registrados`,searchTerm:s,setSearchTerm:l}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("button",{onClick:()=>t({name:"add-animal"}),className:"w-full flex items-center justify-center gap-2 bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-4 px-4 rounded-xl transition-colors text-lg",children:[d.jsx(Jl,{size:20})," Ingresar Nuevo Animal"]}),d.jsx("div",{className:"flex items-center justify-center gap-4",children:d.jsxs("button",{onClick:()=>t({name:"manage-lots"}),className:"flex items-center gap-2 text-zinc-400 hover:text-brand-amber text-sm font-semibold py-1 px-3",children:[d.jsx(rM,{size:14})," Gestionar Lotes"]})}),d.jsxs("div",{className:"flex bg-brand-glass rounded-xl p-1 border border-brand-border",children:[d.jsx("button",{onClick:()=>a("all"),className:`w-1/3 py-2 text-sm font-semibold rounded-lg transition-colors ${i==="all"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Todos"}),d.jsx("button",{onClick:()=>a("Hembra"),className:`w-1/3 py-2 text-sm font-semibold rounded-lg transition-colors ${i==="Hembra"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Hembras"}),d.jsx("button",{onClick:()=>a("Macho"),className:`w-1/3 py-2 text-sm font-semibold rounded-lg transition-colors ${i==="Macho"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Machos"})]})]}),d.jsx("div",{className:"space-y-2 pt-4",children:u.length>0?u.map(c=>d.jsx(dq,{animal:c,onSelect:()=>t({name:"rebano-profile",animalId:c.id})},c.id)):d.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:d.jsx("p",{className:"text-zinc-400",children:s?`No se encontraron resultados para "${s}"`:"No hay animales que coincidan con los filtros."})})})]})}const pq=({isOpen:t,onClose:e,onSave:n})=>{const[r,i]=z.useState(""),[a,o]=z.useState(""),[s,l]=z.useState(""),{fathers:u}=tn(),c=()=>{l("");const f=r.trim().toUpperCase(),m=a.trim();if(!f||!m){l("Ambos campos son obligatorios.");return}if(u.some(g=>g.id===f)){l("Este ID ya está en uso. Por favor, elige otro.");return}n({id:f,name:m}),i(""),o("")};return d.jsx(Gt,{isOpen:t,onClose:e,title:"Añadir Nuevo Padre",children:d.jsxs("div",{className:"space-y-4",children:[d.jsx("p",{className:"text-sm text-zinc-400",children:"Introduce un ID único y el nombre del nuevo semental."}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("input",{type:"text",value:r,onChange:f=>i(f.target.value),placeholder:"ID del Padre (ej. P002)",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-amber focus:ring-0"}),d.jsx("input",{type:"text",value:a,onChange:f=>o(f.target.value),placeholder:"Nombre del Padre (ej. Sansón)",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-amber focus:ring-0"})]}),s&&d.jsx("p",{className:"text-sm text-red-400",children:s}),d.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[d.jsx("button",{onClick:e,className:"px-4 py-2 bg-zinc-600 rounded-lg hover:bg-zinc-500",children:"Cancelar"}),d.jsx("button",{onClick:c,className:"px-4 py-2 bg-brand-amber text-black font-bold rounded-lg hover:bg-yellow-500",children:"Guardar Padre"})]})]})})},DP=[{count:1,name:"Simple"},{count:2,name:"Doble"},{count:3,name:"Triple"},{count:4,name:"Cuádruple"},{count:5,name:"Quíntuple"}],mq=({value:t,onChange:e})=>d.jsxs("div",{className:"flex bg-zinc-800/80 rounded-xl p-1 w-full",children:[d.jsx("button",{type:"button",onClick:()=>e("Hembra"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t==="Hembra"?"bg-zinc-600 text-white":"text-zinc-400 hover:bg-zinc-700/50"}`,children:"Hembra"}),d.jsx("button",{type:"button",onClick:()=>e("Macho"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t==="Macho"?"bg-zinc-600 text-white":"text-zinc-400 hover:bg-zinc-700/50"}`,children:"Macho"})]}),fm=t=>d.jsx("input",{...t,className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl border border-transparent focus:border-brand-amber focus:ring-0 focus:outline-none placeholder-zinc-400"}),gq=t=>d.jsx("select",{...t,className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl border border-transparent focus:border-brand-amber focus:ring-0 focus:outline-none"}),ES=({motherId:t,onSaveSuccess:e,onCancel:n})=>{const{fathers:r,addParturition:i,addFather:a}=tn(),[o,s]=z.useState(t||""),[l,u]=z.useState(new Date().toISOString().split("T")[0]),[c,f]=z.useState(""),[m,g]=z.useState(1),[b,v]=z.useState([]),[x,S]=z.useState(null),[E,T]=z.useState(!1),[j,_]=z.useState(!1);z.useEffect(()=>{v($=>{const L=[...$];for(;L.length<m;)L.push({sex:"Hembra",correlative:"",birthWeight:""});return L.slice(0,m)})},[m]);const P=($,L,ne)=>{const ae=[...b];ae[$]={...ae[$],[L]:ne},v(ae)},w=async $=>{var ne;$.preventDefault(),S(null);const L=b.every(ae=>ae.correlative&&ae.birthWeight);if(!o||!l||!c||!L){S({type:"error",text:"Por favor, completa todos los campos requeridos."});return}try{const ae=r.find(me=>me.id===c),ce=b.map(me=>{const X=me.sex==="Macho"?"X":ae.name.charAt(0).toUpperCase();return{...me,id:`${X}${me.correlative}`}});await i({motherId:o.toUpperCase(),parturitionDate:l,sireId:c,parturitionType:(ne=DP.find(me=>me.count===m))==null?void 0:ne.name,offspring:ce}),S({type:"success",text:"Parto y crías registrados con éxito."}),setTimeout(()=>{e()},1500)}catch(ae){S({type:"error",text:"Error al registrar el parto."}),console.error(ae)}},O=$=>{const L=r.find(ae=>ae.id===c);return!$.correlative||!L?"ID se genera aquí":`${$.sex==="Macho"?"X":L.name.charAt(0).toUpperCase()}${$.correlative}`},I=async $=>{await a($),f($.id),T(!1)},R=z.useMemo(()=>{var $;return($=r.find(L=>L.id===c))==null?void 0:$.name},[c,r]),D=$=>{f($),_(!1)};return d.jsxs(d.Fragment,{children:[d.jsxs("form",{onSubmit:w,className:"space-y-6",children:[d.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-4",children:[d.jsxs("h2",{className:"text-lg font-semibold text-zinc-300 tracking-tight flex items-center gap-2",children:[d.jsx(U9,{size:20})," Datos del Parto"]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsx(fm,{type:"text",value:o,onChange:$=>s($.target.value),placeholder:"ID de la Madre",required:!0,disabled:!0}),d.jsx(fm,{type:"date",value:l,onChange:$=>u($.target.value),required:!0}),d.jsxs("div",{className:"relative md:col-span-1",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("button",{type:"button",onClick:()=>_(!j),className:"w-full flex justify-between items-center text-left bg-zinc-800/80 text-white p-3 rounded-xl",children:[d.jsx("span",{className:R?"text-white":"text-zinc-400",children:R||"Seleccione el Padre"}),d.jsx(v9,{className:`transition-transform ${j?"rotate-180":""}`,size:20})]}),d.jsx("button",{type:"button",onClick:()=>T(!0),className:"h-full aspect-square flex-shrink-0 bg-indigo-600/80 text-white rounded-xl flex items-center justify-center hover:bg-indigo-500","aria-label":"Añadir nuevo padre",children:d.jsx(Jl,{size:20})})]}),j&&d.jsx("div",{className:"absolute z-20 top-full mt-2 w-full bg-zinc-800 border border-zinc-700 rounded-xl max-h-48 overflow-y-auto",children:r.map($=>d.jsx("button",{type:"button",onClick:()=>D($.id),className:"w-full text-left p-3 hover:bg-zinc-700",children:$.name},$.id))})]}),d.jsx(gq,{value:m,onChange:$=>g(Number($.target.value)),required:!0,children:DP.map($=>d.jsxs("option",{value:$.count,children:["Parto ",$.name," (",$.count,")"]},$.count))})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("h2",{className:"text-lg font-semibold text-zinc-300 tracking-tight flex items-center gap-2 ml-1",children:[d.jsx(af,{size:20})," Registro de Crías"]}),b.map(($,L)=>d.jsxs("div",{className:"bg-black/20 rounded-2xl p-4 border border-zinc-800/50 space-y-4",children:[d.jsxs("p",{className:"font-semibold text-brand-amber",children:["Cría ",L+1]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-center",children:[d.jsx(mq,{value:$.sex,onChange:ne=>P(L,"sex",ne)}),d.jsx(fm,{type:"text",value:$.correlative,onChange:ne=>P(L,"correlative",ne.target.value),placeholder:"Nº Correlativo",required:!0}),d.jsxs("div",{className:"bg-zinc-800/80 p-3 rounded-xl h-full flex items-center",children:[d.jsx("span",{className:"text-sm font-semibold text-zinc-400 mr-2",children:"ID:"}),d.jsx("span",{className:"font-mono text-indigo-300 font-bold",children:O($)})]}),d.jsx(fm,{type:"number",step:"0.1",value:$.birthWeight,onChange:ne=>P(L,"birthWeight",ne.target.value),placeholder:"Peso al Nacer (Kg)",required:!0})]})]},L))]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("button",{type:"submit",className:"w-full bg-brand-amber text-black font-bold py-3 rounded-xl text-lg",children:"Guardar Registro"}),n&&d.jsx("button",{type:"button",onClick:n,className:"w-full bg-zinc-600 text-white font-bold py-3 rounded-xl text-lg",children:"Cancelar"}),x&&d.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${x.type==="success"?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"}`,children:[x.type==="success"?d.jsx(rf,{size:18}):d.jsx(Rs,{size:18}),d.jsx("span",{children:x.text})]})]})]}),d.jsx(pq,{isOpen:E,onClose:()=>T(!1),onSave:I})]})},yq=t=>{const{events:e}=tn();return z.useMemo(()=>t?e.filter(a=>a.animalId===t).sort((a,o)=>new Date(o.date).getTime()-new Date(a.date).getTime()):[],[e,t])},vq=t=>{const{animals:e}=tn(),n=z.useMemo(()=>{const i=new Map;return e.forEach(a=>i.set(a.id,a)),i},[e]);return z.useMemo(()=>{const i=(o,s)=>{if(!o||s>2)return;const l=n.get(o);if(!l)return;const u=i(l.fatherId,s+1),c=i(l.motherId,s+1);return{animal:l,sire:u,dam:c}};return i(t,0)||null},[t,n])},il=({animal:t})=>{const e="bg-zinc-800/80 p-3 rounded-lg border border-zinc-700/80 w-36 text-center shadow-md";if(!t)return d.jsx("div",{className:`${e} bg-zinc-900/50 border-dashed`,children:d.jsx("p",{className:"font-semibold text-sm text-zinc-500",children:"Desconocido"})});const n=t.sex==="Hembra"?"text-pink-400":"text-blue-400";return d.jsxs("div",{className:e,children:[d.jsx("p",{className:`font-bold text-base truncate ${n}`,children:t.id}),d.jsx("p",{className:"text-xs text-zinc-400",children:t.sex})]})},bq=({rootNode:t})=>{var e,n,r,i,a,o,s,l,u,c;return t?d.jsxs("div",{className:"flex items-center justify-center space-x-4 overflow-x-auto p-2",children:[d.jsx("div",{className:"flex items-center",children:d.jsx(il,{animal:t.animal})}),d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"w-6 border-t-2 border-b-2 border-l-2 border-zinc-600 h-16 rounded-l-md"}),d.jsxs("div",{className:"flex flex-col space-y-8",children:[d.jsx(il,{animal:(e=t.sire)==null?void 0:e.animal}),d.jsx(il,{animal:(n=t.dam)==null?void 0:n.animal})]})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsxs("div",{className:"flex flex-col space-y-2",children:[d.jsx("div",{className:"w-6 border-t-2 border-b-2 border-l-2 border-zinc-600 h-12 rounded-l-md"}),d.jsx("div",{className:"w-6 border-t-2 border-b-2 border-l-2 border-zinc-600 h-12 rounded-l-md mt-6"})]}),d.jsxs("div",{className:"flex flex-col space-y-2",children:[d.jsx(il,{animal:(i=(r=t.sire)==null?void 0:r.sire)==null?void 0:i.animal}),d.jsx(il,{animal:(o=(a=t.sire)==null?void 0:a.dam)==null?void 0:o.animal}),d.jsx(il,{animal:(l=(s=t.dam)==null?void 0:s.sire)==null?void 0:l.animal}),d.jsx(il,{animal:(c=(u=t.dam)==null?void 0:u.dam)==null?void 0:c.animal})]})]})]}):d.jsx("div",{className:"text-center p-8 text-zinc-500",children:"No hay datos de genealogía suficientes para mostrar el pedigrí."})},al=({label:t,value:e,isEditing:n,children:r})=>d.jsxs("div",{children:[d.jsx("dt",{className:"text-sm font-medium text-zinc-400",children:t}),n?r:d.jsx("dd",{className:"mt-1 text-lg font-semibold text-white",children:e||"N/A"})]}),xq=({animal:t,isEditing:e,editedData:n,setEditedData:r,lots:i,onAddLotClick:a,origins:o,onAddOriginClick:s})=>{const l=(c,f)=>{r(m=>({...m,[c]:f}))},u=z.useMemo(()=>{if(!t.birthDate||t.birthDate==="N/A")return"N/A";const c=new Date(t.birthDate),f=new Date;let m=f.getFullYear()-c.getFullYear(),g=f.getMonth()-c.getMonth();return(g<0||g===0&&f.getDate()<c.getDate())&&(m--,g+=12),`${m} años, ${g} meses`},[t.birthDate]);return d.jsxs("dl",{className:"grid grid-cols-2 gap-x-4 gap-y-6",children:[d.jsx(al,{label:"ID",value:t.id}),d.jsx(al,{label:"Sexo",value:t.sex}),d.jsx(al,{label:"Fecha Nacimiento",value:t.birthDate,isEditing:e,children:d.jsx("input",{type:"date",value:n.birthDate||"",onChange:c=>l("birthDate",c.target.value),className:"w-full bg-zinc-700 p-2 rounded-md mt-1"})}),d.jsx(al,{label:"Edad",value:u}),d.jsx(al,{label:"Ubicación / Lote",value:t.location,isEditing:e,children:d.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[d.jsxs("select",{value:n.location||"",onChange:c=>l("location",c.target.value),className:"w-full bg-zinc-700 p-2 rounded-md",children:[d.jsx("option",{value:"",children:"Seleccione..."}),i.map(c=>d.jsx("option",{value:c.name,children:c.name},c.id))]}),d.jsx("button",{type:"button",onClick:a,className:"p-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-md",children:d.jsx(Oo,{size:20})})]})}),d.jsx(al,{label:"Estado Crecimiento",value:t.lifecycleStage}),d.jsx(al,{label:"Origen",value:t.origin,isEditing:e,children:d.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[d.jsxs("select",{value:n.origin||"",onChange:c=>l("origin",c.target.value),className:"w-full bg-zinc-700 p-2 rounded-md",children:[d.jsx("option",{value:"Finca Masparrito",children:"Finca Masparrito"}),o.map(c=>d.jsx("option",{value:c.name,children:c.name},c.id))]}),d.jsx("button",{type:"button",onClick:s,className:"p-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-md",children:d.jsx(Oo,{size:20})})]})})]})},wq=({animalId:t})=>{const e=vq(t);return d.jsx(bq,{rootNode:e})},_q={Nacimiento:{icon:eM,color:"bg-green-500/20 text-green-300"},Movimiento:{icon:k9,color:"bg-blue-500/20 text-blue-300"},"Cambio de Estado":{icon:z9,color:"bg-yellow-500/20 text-yellow-300"},"Pesaje Lechero":{icon:P9,color:"bg-gray-500/20 text-gray-300"},"Pesaje Corporal":{icon:bS,color:"bg-purple-500/20 text-purple-300"},Servicio:{icon:w9,color:"bg-pink-500/20 text-pink-300"},Tratamiento:{icon:iM,color:"bg-red-500/20 text-red-300"},Diagnóstico:{icon:rf,color:"bg-teal-500/20 text-teal-300"}},Sq=({animalId:t})=>{const e=yq(t);return e.length===0?d.jsx("div",{className:"text-center p-8 text-zinc-500",children:"No hay eventos registrados para este animal."}):d.jsx("div",{className:"space-y-3",children:e.map(n=>{const r=_q[n.type]||{icon:eM,color:"bg-gray-500/20 text-gray-300"},i=r.icon;return d.jsxs("div",{className:"flex items-start gap-4 p-3 bg-black/20 rounded-lg",children:[d.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${r.color}`,children:d.jsx(i,{size:20})}),d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold text-white",children:n.type}),d.jsx("p",{className:"text-sm text-zinc-300",children:n.details}),d.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:new Date(n.date+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"})})]})]},n.id)})})};function Eq({animalId:t,onBack:e,navigateTo:n}){const{animals:r,lots:i,origins:a,updateAnimal:o}=tn(),[s,l]=z.useState("main"),[u,c]=z.useState(!1),[f,m]=z.useState({}),[g,b]=z.useState("idle"),[v,x]=z.useState(!1),[S,E]=z.useState(!1),[T,j]=z.useState(!1),_=z.useMemo(()=>r.find(R=>R.id===t),[r,t]),P=(_==null?void 0:_.breedingFailures)||0,w=P>=2?"border-red-500/80 ring-2 ring-red-500/60":"border-brand-border";z.useEffect(()=>{_&&u&&m({birthDate:_.birthDate,location:_.location,origin:_.origin})},[_,u]);const O=async()=>{if(_){b("saving");try{await o(_.id,f),b("success"),setTimeout(()=>{c(!1),b("idle")},1500)}catch(R){console.error("Error al actualizar el animal:",R),b("idle")}}},I=()=>{c(!1)};return _?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in pb-12",children:[d.jsxs("header",{className:`bg-brand-glass backdrop-blur-xl rounded-b-2xl p-4 border-b border-x sticky top-0 z-10 transition-all ${w}`,children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:d.jsx(Wa,{size:24})}),d.jsxs("h1",{className:"text-2xl font-bold tracking-tight text-white flex items-center gap-2",children:[_.id,P===1&&d.jsx("span",{title:"1 fallo reproductivo reportado",children:d.jsx(Rs,{className:"text-yellow-400",size:20})})]}),d.jsx("div",{className:"w-8"})]}),d.jsxs("div",{className:"flex justify-around bg-black/20 rounded-xl p-1",children:[_.sex==="Hembra"&&d.jsxs(d.Fragment,{children:[d.jsxs("button",{onClick:()=>n({name:"lactation-profile",animalId:_.id}),className:"flex flex-col items-center p-2 text-zinc-400 hover:text-brand-amber w-full rounded-lg",children:[d.jsx(yS,{size:22}),d.jsx("span",{className:"text-xs mt-1",children:"Leche"})]}),d.jsxs("button",{onClick:()=>j(!0),className:"flex flex-col items-center p-2 text-zinc-400 hover:text-brand-amber w-full rounded-lg",children:[d.jsx(vS,{size:22}),d.jsx("span",{className:"text-xs mt-1",children:"Parto"})]})]}),d.jsxs("button",{onClick:()=>alert("Función en desarrollo"),className:"flex flex-col items-center p-2 text-zinc-400 hover:text-brand-amber w-full rounded-lg",children:[d.jsx(bS,{size:22}),d.jsx("span",{className:"text-xs mt-1",children:"Peso"})]}),d.jsxs("button",{onClick:()=>alert("Función en desarrollo"),className:"flex flex-col items-center p-2 text-zinc-400 hover:text-brand-amber w-full rounded-lg",children:[d.jsx(iM,{size:22}),d.jsx("span",{className:"text-xs mt-1",children:"Sanidad"})]}),d.jsxs("button",{onClick:()=>alert("Función en desarrollo"),className:"flex flex-col items-center p-2 text-zinc-400 hover:text-brand-amber w-full rounded-lg",children:[d.jsx(I9,{size:22}),d.jsx("span",{className:"text-xs mt-1",children:"Mover"})]}),d.jsxs("button",{onClick:()=>c(!u),className:`flex flex-col items-center p-2 w-full rounded-lg ${u?"text-green-400":"text-zinc-400 hover:text-brand-amber"}`,children:[d.jsx(L9,{size:22}),d.jsx("span",{className:"text-xs mt-1",children:"Editar"})]})]})]}),d.jsxs("main",{className:"p-4 space-y-4",children:[d.jsxs("div",{className:"flex bg-brand-glass rounded-xl p-1 border border-brand-border",children:[d.jsx("button",{onClick:()=>l("main"),className:`w-1/3 py-2 text-sm font-semibold rounded-lg transition-colors ${s==="main"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Ficha"}),d.jsx("button",{onClick:()=>l("genetics"),className:`w-1/3 py-2 text-sm font-semibold rounded-lg transition-colors ${s==="genetics"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Genealogía"}),d.jsx("button",{onClick:()=>l("events"),className:`w-1/3 py-2 text-sm font-semibold rounded-lg transition-colors ${s==="events"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Eventos"})]}),d.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[s==="main"&&d.jsxs("div",{className:"space-y-6",children:[d.jsx(xq,{animal:_,isEditing:u,editedData:f,setEditedData:m,lots:i,onAddLotClick:()=>x(!0),origins:a,onAddOriginClick:()=>E(!0)}),u&&d.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-zinc-700",children:[d.jsxs("button",{onClick:I,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-6 rounded-lg flex items-center gap-2",children:[d.jsx(cp,{size:18})," Cancelar"]}),d.jsxs("button",{onClick:O,disabled:g!=="idle",className:"bg-brand-amber hover:bg-yellow-500 text-black font-bold py-2 px-6 rounded-lg flex items-center gap-2 disabled:opacity-50 min-w-[130px] justify-center",children:[g==="saving"&&d.jsx("span",{className:"animate-spin h-5 w-5 border-2 border-black border-t-transparent rounded-full"}),g==="success"&&d.jsx(rf,{size:18}),g==="idle"&&d.jsx(nM,{size:18}),d.jsx("span",{className:"ml-2",children:g==="success"?"Guardado":"Guardar"})]})]})]}),s==="genetics"&&d.jsx(wq,{animalId:_.id}),s==="events"&&d.jsx(Sq,{animalId:_.id})]})]})]}),d.jsx(DM,{isOpen:v,onClose:()=>x(!1)}),d.jsx(MM,{isOpen:S,onClose:()=>E(!1)}),d.jsx(Gt,{isOpen:T,onClose:()=>j(!1),title:`Registrar Parto para ${_.id}`,children:d.jsx(ES,{motherId:_.id,onSaveSuccess:()=>j(!1),onCancel:()=>j(!1)})})]}):d.jsxs("div",{className:"text-center p-10",children:[d.jsx("h1",{className:"text-2xl text-zinc-400",children:"Animal no encontrado."}),d.jsx("button",{onClick:e,className:"mt-4 text-brand-amber",children:"Volver"})]})}const Aq=({animal:t,parturition:e,onSelectAnimal:n})=>d.jsxs("div",{onClick:()=>n(t.id),className:"w-full cursor-pointer text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-amber-400 transition-colors",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),d.jsxs("p",{className:"text-sm text-zinc-400",children:[e.status==="en-secado"&&`Secado desde: ${new Date(e.dryingStartDate).toLocaleDateString()}`,e.status==="seca"&&"Lactancia finalizada"]})]}),d.jsx(Ms,{className:"text-zinc-600"})]});function Tq({onSelectAnimal:t,defaultView:e="drying"}){const{animals:n,parturitions:r,isLoading:i}=tn(),[a,o]=z.useState(e);z.useEffect(()=>{o(e)},[e]);const s=z.useMemo(()=>{const u=m=>n.find(g=>g.id===m),c=r.filter(m=>m.status==="en-secado").map(m=>({animal:u(m.goatId),parturition:m})).filter(m=>m.animal),f=r.filter(m=>m.status==="seca").map(m=>({animal:u(m.goatId),parturition:m})).filter(m=>m.animal);return{drying:c,dry:f}},[n,r]),l=s[a]||[];return i?d.jsx("div",{className:"text-center p-10",children:d.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando datos..."})}):d.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[d.jsxs("header",{className:"text-center pt-8 pb-4",children:[d.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white",children:"Gestión de Rebaño"}),d.jsx("p",{className:"text-xl text-zinc-400",children:"Animales por Estado de Lactancia"})]}),d.jsx("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-2 border border-brand-border flex justify-between items-center",children:d.jsxs("div",{className:"flex bg-zinc-900/80 rounded-xl p-1 w-full",children:[d.jsxs("button",{onClick:()=>o("drying"),className:`w-1/2 px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors ${a==="drying"?"bg-blue-500 text-white":"text-zinc-300 hover:bg-zinc-700/50"}`,children:["En Secado (",s.drying.length,")"]}),d.jsxs("button",{onClick:()=>o("dry"),className:`w-1/2 px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors ${a==="dry"?"bg-gray-600 text-white":"text-zinc-300 hover:bg-zinc-700/50"}`,children:["Secas (",s.dry.length,")"]})]})}),d.jsx("div",{className:"space-y-2",children:l.length>0?l.map(({animal:u,parturition:c})=>d.jsx(Aq,{animal:u,parturition:c,onSelectAnimal:t},c.id)):d.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:d.jsx("p",{className:"text-zinc-400",children:"No hay animales en este estado."})})})]})}function Pq({onBack:t}){const{lots:e,animals:n,parturitions:r,addLot:i,deleteLot:a,updateAnimal:o}=tn(),[s,l]=z.useState(""),[u,c]=z.useState(!1),[f,m]=z.useState(null),g=async()=>{if(s.trim()!=="")try{await i(s),l("")}catch(x){console.error("Error al añadir el lote:",x)}},b=x=>{m(x),c(!0)},v=async x=>{if(!f)return;const S=x.map(E=>o(E,{location:f}));try{await Promise.all(S),console.log(`${x.length} animales asignados al lote ${f}.`)}catch(E){console.error("Error al asignar animales:",E)}c(!1),m(null)};return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[d.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[d.jsx("button",{onClick:t,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:d.jsx(Wa,{size:24})}),d.jsxs("div",{className:"text-center flex-grow",children:[d.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Gestionar Lotes"}),d.jsx("p",{className:"text-md text-zinc-400",children:"Asigna animales a las ubicaciones de tu finca"})]}),d.jsx("div",{className:"w-8"})]}),d.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-4",children:[d.jsx("h3",{className:"text-lg font-semibold text-white",children:"Añadir Nuevo Lote"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"text",value:s,onChange:x=>l(x.target.value),placeholder:"Nombre del lote...",className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"}),d.jsx("button",{onClick:g,className:"p-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl",children:d.jsx(Jl,{size:24})})]})]}),d.jsxs("div",{className:"space-y-2 pt-4",children:[d.jsx("h3",{className:"text-lg font-semibold text-zinc-300 px-2",children:"Lotes Existentes"}),e.length>0?e.map(x=>d.jsxs("div",{className:"w-full text-left bg-brand-glass rounded-2xl p-4 flex justify-between items-center",children:[d.jsx("p",{className:"font-semibold text-white",children:x.name}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("button",{onClick:()=>b(x.name),className:"flex items-center gap-2 bg-zinc-700/80 text-white font-semibold py-2 px-3 rounded-lg hover:bg-zinc-600/80 transition-colors",children:[d.jsx(af,{size:16}),"Asignar"]}),d.jsx("button",{onClick:()=>a(x.id),className:"p-2 text-zinc-500 hover:text-red-500 transition-colors",children:d.jsx(B9,{size:18})})]})]},x.id)):d.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:d.jsx("p",{className:"text-zinc-500",children:"Aún no has creado ningún lote."})})]})]}),d.jsx(SS,{isOpen:u,onClose:()=>c(!1),onSelect:v,animals:n,parturitions:r,title:`Asignar animales a: ${f}`})]})}const Oq=`
  .rdp { --rdp-cell-size: 40px; --rdp-accent-color: #FBBF24; --rdp-background-color: #3a3a3c; --rdp-accent-color-dark: #FBBF24; --rdp-background-color-dark: #3a3a3c; --rdp-outline: 2px solid var(--rdp-accent-color); --rdp-outline-selected: 3px solid var(--rdp-accent-color); --rdp-border-radius: 6px; color: #FFF; margin: 1em; }
  .rdp-caption_label, .rdp-nav_button { color: #FBBF24; } .rdp-head_cell { color: #8e8e93; }
  .rdp-day_selected { background-color: var(--rdp-accent-color); color: #000; font-weight: bold; }
`,kq=({animal:t,services:e,onDeclareService:n,onDeclareParturition:r,onSelect:i})=>{const a=e.length,o=a>0?new Date(e[e.length-1].serviceDate+"T00:00:00").toLocaleDateString("es-VE"):null;return d.jsxs("div",{className:"w-full text-left bg-zinc-800/50 rounded-2xl p-4 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[d.jsxs("button",{onClick:()=>i(t.id),className:"w-full sm:w-auto text-left",children:[d.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),d.jsx("div",{className:"flex items-center gap-2 text-sm text-zinc-400",children:a>0?d.jsxs("div",{className:"flex items-center gap-1 text-pink-400 font-semibold",children:[d.jsx(_9,{size:14,fill:"currentColor"}),d.jsxs("span",{children:[a," ",a>1?"Servicios":"Servicio"," (",o,")"]})]}):d.jsx("span",{children:"Sin servicios reportados"})})]}),d.jsxs("div",{className:"w-full sm:w-auto flex flex-shrink-0 gap-2",children:[d.jsx("button",{onClick:()=>n(t.id),className:"flex-1 sm:flex-initial bg-indigo-600/80 hover:bg-indigo-500/100 text-white font-semibold py-2 px-3 rounded-lg transition-colors text-sm",children:"Servicio"}),d.jsxs("button",{onClick:()=>r(t.id),className:"flex-1 sm:flex-initial flex items-center justify-center gap-2 bg-green-600/80 hover:bg-green-500/100 text-white font-semibold py-2 px-3 rounded-lg transition-colors text-sm",children:[d.jsx(vS,{size:14})," Parto"]})]})]})};function Cq({groupId:t,navigateTo:e,onBack:n}){const{breedingGroups:r,animals:i,parturitions:a,serviceRecords:o,updateAnimal:s,addServiceRecord:l}=tn(),[u,c]=z.useState(!1),[f,m]=z.useState(""),[g,b]=z.useState({isOpen:!1,femaleId:null}),[v,x]=z.useState({isOpen:!1,femaleId:null}),S=z.useMemo(()=>r.find(P=>P.id===t),[r,t]),E=z.useMemo(()=>S?i.filter(P=>P.breedingGroupId===S.id).sort((P,w)=>P.id.localeCompare(w.id)):[],[i,S]),T=z.useMemo(()=>f?E.filter(P=>P.id.toLowerCase().includes(f.toLowerCase())):E,[E,f]),j=async P=>{if(!S)return;const w=P.map(O=>s(O,{breedingGroupId:S.id,reproductiveStatus:"En Servicio"}));try{await Promise.all(w)}catch(O){console.error("Error al asignar hembras:",O)}},_=async P=>{if(!(!P||!g.femaleId||!S))try{await l({breedingGroupId:S.id,femaleId:g.femaleId,serviceDate:P.toISOString().split("T")[0]})}catch(w){console.error("Error al guardar el servicio:",w)}finally{b({isOpen:!1,femaleId:null})}};return S?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[d.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[d.jsx("button",{onClick:n,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:d.jsx(Wa,{size:24})}),d.jsxs("div",{className:"text-center flex-grow",children:[d.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:S.name}),d.jsxs("p",{className:"text-md text-zinc-400",children:["Reproductor: ",S.sireId]})]}),d.jsx("div",{className:"w-8"})]}),d.jsxs("button",{onClick:()=>c(!0),className:"w-full flex items-center justify-center gap-2 bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-4 px-4 rounded-xl transition-colors text-lg",children:[d.jsx(Jl,{size:20})," Asignar Hembras"]}),d.jsxs("div",{className:"space-y-4 pt-4",children:[d.jsxs("div",{className:"flex justify-between items-center px-2",children:[d.jsxs("h3",{className:"text-lg font-semibold text-zinc-300",children:["Hembras Asignadas (",T.length,")"]}),d.jsxs("div",{className:"relative",children:[d.jsx(wc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500"}),d.jsx("input",{type:"search",value:f,onChange:P=>m(P.target.value),placeholder:"Buscar...",className:"w-full bg-zinc-800/80 rounded-lg pl-10 pr-4 py-2 text-white border-transparent focus:border-brand-amber focus:ring-0"})]})]}),d.jsx("div",{className:"space-y-2",children:T.length>0?T.map(P=>{const w=o.filter(O=>O.femaleId===P.id&&O.breedingGroupId===S.id).sort((O,I)=>new Date(O.serviceDate).getTime()-new Date(I.serviceDate).getTime());return d.jsx(kq,{animal:P,services:w,onDeclareService:O=>b({isOpen:!0,femaleId:O}),onDeclareParturition:O=>x({isOpen:!0,femaleId:O}),onSelect:O=>e({name:"rebano-profile",animalId:O})},P.id)}):d.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:d.jsx("p",{className:"text-zinc-500",children:f?"No se encontraron coincidencias.":"Aún no has asignado hembras a este lote."})})})]})]}),d.jsx(SS,{isOpen:u,onClose:()=>c(!1),onSelect:j,animals:i,parturitions:a,title:`Asignar Hembras a: ${S.name}`,sireIdForInbreedingCheck:S.sireId}),d.jsxs(Gt,{isOpen:g.isOpen,onClose:()=>b({isOpen:!1,femaleId:null}),title:`Declarar Servicio para ${g.femaleId}`,children:[d.jsx("style",{children:Oq}),d.jsx("div",{className:"flex justify-center",children:d.jsx(NM,{mode:"single",onSelect:_})})]}),d.jsx(Gt,{isOpen:v.isOpen,onClose:()=>x({isOpen:!1,femaleId:null}),title:`Registrar Parto para ${v.femaleId}`,children:d.jsx(ES,{motherId:v.femaleId||"",onSaveSuccess:()=>x({isOpen:!1,femaleId:null}),onCancel:()=>x({isOpen:!1,femaleId:null})})})]}):d.jsxs("div",{className:"text-center p-10",children:[d.jsx("h1",{className:"text-2xl text-zinc-400",children:"Lote de Monta no encontrado."}),d.jsx("button",{onClick:n,className:"mt-4 text-brand-amber",children:"Volver"})]})}function FM(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=FM(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function bt(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=FM(t))&&(r&&(r+=" "),r+=e);return r}var Iq=Array.isArray,Gr=Iq,jq=typeof Cu=="object"&&Cu&&Cu.Object===Object&&Cu,zM=jq,Nq=zM,Dq=typeof self=="object"&&self&&self.Object===Object&&self,Mq=Nq||Dq||Function("return this")(),Ka=Mq,Rq=Ka,$q=Rq.Symbol,pp=$q,MP=pp,VM=Object.prototype,Lq=VM.hasOwnProperty,Fq=VM.toString,qf=MP?MP.toStringTag:void 0;function zq(t){var e=Lq.call(t,qf),n=t[qf];try{t[qf]=void 0;var r=!0}catch{}var i=Fq.call(t);return r&&(e?t[qf]=n:delete t[qf]),i}var Vq=zq,Bq=Object.prototype,Uq=Bq.toString;function Wq(t){return Uq.call(t)}var qq=Wq,RP=pp,Kq=Vq,Hq=qq,Gq="[object Null]",Yq="[object Undefined]",$P=RP?RP.toStringTag:void 0;function Xq(t){return t==null?t===void 0?Yq:Gq:$P&&$P in Object(t)?Kq(t):Hq(t)}var Do=Xq;function Qq(t){return t!=null&&typeof t=="object"}var Mo=Qq,Jq=Do,Zq=Mo,eK="[object Symbol]";function tK(t){return typeof t=="symbol"||Zq(t)&&Jq(t)==eK}var sf=tK,nK=Gr,rK=sf,iK=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,aK=/^\w*$/;function oK(t,e){if(nK(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||rK(t)?!0:aK.test(t)||!iK.test(t)||e!=null&&t in Object(e)}var AS=oK;function sK(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var $s=sK;const lf=Lt($s);var lK=Do,uK=$s,cK="[object AsyncFunction]",fK="[object Function]",dK="[object GeneratorFunction]",hK="[object Proxy]";function pK(t){if(!uK(t))return!1;var e=lK(t);return e==fK||e==dK||e==cK||e==hK}var TS=pK;const ot=Lt(TS);var mK=Ka,gK=mK["__core-js_shared__"],yK=gK,cb=yK,LP=function(){var t=/[^.]+$/.exec(cb&&cb.keys&&cb.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function vK(t){return!!LP&&LP in t}var bK=vK,xK=Function.prototype,wK=xK.toString;function _K(t){if(t!=null){try{return wK.call(t)}catch{}try{return t+""}catch{}}return""}var BM=_K,SK=TS,EK=bK,AK=$s,TK=BM,PK=/[\\^$.*+?()[\]{}|]/g,OK=/^\[object .+?Constructor\]$/,kK=Function.prototype,CK=Object.prototype,IK=kK.toString,jK=CK.hasOwnProperty,NK=RegExp("^"+IK.call(jK).replace(PK,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function DK(t){if(!AK(t)||EK(t))return!1;var e=SK(t)?NK:OK;return e.test(TK(t))}var MK=DK;function RK(t,e){return t==null?void 0:t[e]}var $K=RK,LK=MK,FK=$K;function zK(t,e){var n=FK(t,e);return LK(n)?n:void 0}var Zl=zK,VK=Zl,BK=VK(Object,"create"),Av=BK,FP=Av;function UK(){this.__data__=FP?FP(null):{},this.size=0}var WK=UK;function qK(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var KK=qK,HK=Av,GK="__lodash_hash_undefined__",YK=Object.prototype,XK=YK.hasOwnProperty;function QK(t){var e=this.__data__;if(HK){var n=e[t];return n===GK?void 0:n}return XK.call(e,t)?e[t]:void 0}var JK=QK,ZK=Av,eH=Object.prototype,tH=eH.hasOwnProperty;function nH(t){var e=this.__data__;return ZK?e[t]!==void 0:tH.call(e,t)}var rH=nH,iH=Av,aH="__lodash_hash_undefined__";function oH(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=iH&&e===void 0?aH:e,this}var sH=oH,lH=WK,uH=KK,cH=JK,fH=rH,dH=sH;function uf(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}uf.prototype.clear=lH;uf.prototype.delete=uH;uf.prototype.get=cH;uf.prototype.has=fH;uf.prototype.set=dH;var hH=uf;function pH(){this.__data__=[],this.size=0}var mH=pH;function gH(t,e){return t===e||t!==t&&e!==e}var PS=gH,yH=PS;function vH(t,e){for(var n=t.length;n--;)if(yH(t[n][0],e))return n;return-1}var Tv=vH,bH=Tv,xH=Array.prototype,wH=xH.splice;function _H(t){var e=this.__data__,n=bH(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():wH.call(e,n,1),--this.size,!0}var SH=_H,EH=Tv;function AH(t){var e=this.__data__,n=EH(e,t);return n<0?void 0:e[n][1]}var TH=AH,PH=Tv;function OH(t){return PH(this.__data__,t)>-1}var kH=OH,CH=Tv;function IH(t,e){var n=this.__data__,r=CH(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var jH=IH,NH=mH,DH=SH,MH=TH,RH=kH,$H=jH;function cf(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}cf.prototype.clear=NH;cf.prototype.delete=DH;cf.prototype.get=MH;cf.prototype.has=RH;cf.prototype.set=$H;var Pv=cf,LH=Zl,FH=Ka,zH=LH(FH,"Map"),OS=zH,zP=hH,VH=Pv,BH=OS;function UH(){this.size=0,this.__data__={hash:new zP,map:new(BH||VH),string:new zP}}var WH=UH;function qH(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var KH=qH,HH=KH;function GH(t,e){var n=t.__data__;return HH(e)?n[typeof e=="string"?"string":"hash"]:n.map}var Ov=GH,YH=Ov;function XH(t){var e=YH(this,t).delete(t);return this.size-=e?1:0,e}var QH=XH,JH=Ov;function ZH(t){return JH(this,t).get(t)}var eG=ZH,tG=Ov;function nG(t){return tG(this,t).has(t)}var rG=nG,iG=Ov;function aG(t,e){var n=iG(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var oG=aG,sG=WH,lG=QH,uG=eG,cG=rG,fG=oG;function ff(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ff.prototype.clear=sG;ff.prototype.delete=lG;ff.prototype.get=uG;ff.prototype.has=cG;ff.prototype.set=fG;var kS=ff,UM=kS,dG="Expected a function";function CS(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(dG);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(CS.Cache||UM),n}CS.Cache=UM;var WM=CS;const hG=Lt(WM);var pG=WM,mG=500;function gG(t){var e=pG(t,function(r){return n.size===mG&&n.clear(),r}),n=e.cache;return e}var yG=gG,vG=yG,bG=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xG=/\\(\\)?/g,wG=vG(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(bG,function(n,r,i,a){e.push(i?a.replace(xG,"$1"):r||n)}),e}),_G=wG;function SG(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var IS=SG,VP=pp,EG=IS,AG=Gr,TG=sf,BP=VP?VP.prototype:void 0,UP=BP?BP.toString:void 0;function qM(t){if(typeof t=="string")return t;if(AG(t))return EG(t,qM)+"";if(TG(t))return UP?UP.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var PG=qM,OG=PG;function kG(t){return t==null?"":OG(t)}var KM=kG,CG=Gr,IG=AS,jG=_G,NG=KM;function DG(t,e){return CG(t)?t:IG(t,e)?[t]:jG(NG(t))}var HM=DG,MG=sf;function RG(t){if(typeof t=="string"||MG(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var kv=RG,$G=HM,LG=kv;function FG(t,e){e=$G(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[LG(e[n++])];return n&&n==r?t:void 0}var jS=FG,zG=jS;function VG(t,e,n){var r=t==null?void 0:zG(t,e);return r===void 0?n:r}var GM=VG;const Ni=Lt(GM);function BG(t){return t==null}var UG=BG;const ft=Lt(UG);var WG=Do,qG=Gr,KG=Mo,HG="[object String]";function GG(t){return typeof t=="string"||!qG(t)&&KG(t)&&WG(t)==HG}var YG=GG;const Vl=Lt(YG);var YM={exports:{}},Dt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NS=Symbol.for("react.element"),DS=Symbol.for("react.portal"),Cv=Symbol.for("react.fragment"),Iv=Symbol.for("react.strict_mode"),jv=Symbol.for("react.profiler"),Nv=Symbol.for("react.provider"),Dv=Symbol.for("react.context"),XG=Symbol.for("react.server_context"),Mv=Symbol.for("react.forward_ref"),Rv=Symbol.for("react.suspense"),$v=Symbol.for("react.suspense_list"),Lv=Symbol.for("react.memo"),Fv=Symbol.for("react.lazy"),QG=Symbol.for("react.offscreen"),XM;XM=Symbol.for("react.module.reference");function Li(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case NS:switch(t=t.type,t){case Cv:case jv:case Iv:case Rv:case $v:return t;default:switch(t=t&&t.$$typeof,t){case XG:case Dv:case Mv:case Fv:case Lv:case Nv:return t;default:return e}}case DS:return e}}}Dt.ContextConsumer=Dv;Dt.ContextProvider=Nv;Dt.Element=NS;Dt.ForwardRef=Mv;Dt.Fragment=Cv;Dt.Lazy=Fv;Dt.Memo=Lv;Dt.Portal=DS;Dt.Profiler=jv;Dt.StrictMode=Iv;Dt.Suspense=Rv;Dt.SuspenseList=$v;Dt.isAsyncMode=function(){return!1};Dt.isConcurrentMode=function(){return!1};Dt.isContextConsumer=function(t){return Li(t)===Dv};Dt.isContextProvider=function(t){return Li(t)===Nv};Dt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===NS};Dt.isForwardRef=function(t){return Li(t)===Mv};Dt.isFragment=function(t){return Li(t)===Cv};Dt.isLazy=function(t){return Li(t)===Fv};Dt.isMemo=function(t){return Li(t)===Lv};Dt.isPortal=function(t){return Li(t)===DS};Dt.isProfiler=function(t){return Li(t)===jv};Dt.isStrictMode=function(t){return Li(t)===Iv};Dt.isSuspense=function(t){return Li(t)===Rv};Dt.isSuspenseList=function(t){return Li(t)===$v};Dt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Cv||t===jv||t===Iv||t===Rv||t===$v||t===QG||typeof t=="object"&&t!==null&&(t.$$typeof===Fv||t.$$typeof===Lv||t.$$typeof===Nv||t.$$typeof===Dv||t.$$typeof===Mv||t.$$typeof===XM||t.getModuleId!==void 0)};Dt.typeOf=Li;YM.exports=Dt;var JG=YM.exports,ZG=Do,eY=Mo,tY="[object Number]";function nY(t){return typeof t=="number"||eY(t)&&ZG(t)==tY}var QM=nY;const rY=Lt(QM);var iY=QM;function aY(t){return iY(t)&&t!=+t}var oY=aY;const df=Lt(oY);var la=function(e){return e===0?0:e>0?1:-1},wl=function(e){return Vl(e)&&e.indexOf("%")===e.length-1},ke=function(e){return rY(e)&&!df(e)},sY=function(e){return ft(e)},Rn=function(e){return ke(e)||Vl(e)},lY=0,hf=function(e){var n=++lY;return"".concat(e||"").concat(n)},Bl=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ke(e)&&!Vl(e))return r;var a;if(wl(e)){var o=e.indexOf("%");a=n*parseFloat(e.slice(0,o))/100}else a=+e;return df(a)&&(a=r),i&&a>n&&(a=n),a},ts=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},uY=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},Zn=function(e,n){return ke(e)&&ke(n)?function(r){return e+r*(n-e)}:function(){return n}};function Fg(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Ni(r,e))===n})}var cY=function(e,n){return ke(e)&&ke(n)?e-n:Vl(e)&&Vl(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function nc(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function lw(t){"@babel/helpers - typeof";return lw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lw(t)}var fY=["viewBox","children"],dY=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],WP=["points","pathLength"],fb={svg:fY,polygon:WP,polyline:WP},MS=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],zg=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(z.isValidElement(e)&&(r=e.props),!lf(r))return null;var i={};return Object.keys(r).forEach(function(a){MS.includes(a)&&(i[a]=n||function(o){return r[a](r,o)})}),i},hY=function(e,n,r){return function(i){return e(n,r,i),null}},Vg=function(e,n,r){if(!lf(e)||lw(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var o=e[a];MS.includes(a)&&typeof o=="function"&&(i||(i={}),i[a]=hY(o,n,r))}),i},pY=["children"],mY=["children"];function qP(t,e){if(t==null)return{};var n=gY(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function gY(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function uw(t){"@babel/helpers - typeof";return uw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uw(t)}var KP={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},yo=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},HP=null,db=null,RS=function t(e){if(e===HP&&Array.isArray(db))return db;var n=[];return z.Children.forEach(e,function(r){ft(r)||(JG.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),db=n,HP=e,n};function Di(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return yo(i)}):r=[yo(e)],RS(t).forEach(function(i){var a=Ni(i,"type.displayName")||Ni(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}function ii(t,e){var n=Di(t,e);return n&&n[0]}var GP=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!ke(r)||r<=0||!ke(i)||i<=0)},yY=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],vY=function(e){return e&&e.type&&Vl(e.type)&&yY.indexOf(e.type)>=0},JM=function(e){return e&&uw(e)==="object"&&"clipDot"in e},bY=function(e,n,r,i){var a,o=(a=fb==null?void 0:fb[i])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!ot(e)&&(i&&o.includes(n)||dY.includes(n))||r&&MS.includes(n)},st=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(z.isValidElement(e)&&(i=e.props),!lf(i))return null;var a={};return Object.keys(i).forEach(function(o){var s;bY((s=i)===null||s===void 0?void 0:s[o],o,n,r)&&(a[o]=i[o])}),a},cw=function t(e,n){if(e===n)return!0;var r=z.Children.count(e);if(r!==z.Children.count(n))return!1;if(r===0)return!0;if(r===1)return YP(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var a=e[i],o=n[i];if(Array.isArray(a)||Array.isArray(o)){if(!t(a,o))return!1}else if(!YP(a,o))return!1}return!0},YP=function(e,n){if(ft(e)&&ft(n))return!0;if(!ft(e)&&!ft(n)){var r=e.props||{},i=r.children,a=qP(r,pY),o=n.props||{},s=o.children,l=qP(o,mY);return i&&s?nc(a,l)&&cw(i,s):!i&&!s?nc(a,l):!1}return!1},XP=function(e,n){var r=[],i={};return RS(e).forEach(function(a,o){if(vY(a))r.push(a);else if(a){var s=yo(a.type),l=n[s]||{},u=l.handler,c=l.once;if(u&&(!c||!i[s])){var f=u(a,s,o);r.push(f),i[s]=!0}}}),r},xY=function(e){var n=e&&e.type;return n&&KP[n]?KP[n]:null},wY=function(e,n){return RS(n).indexOf(e)},_Y=["children","width","height","viewBox","className","style","title","desc"];function fw(){return fw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fw.apply(this,arguments)}function SY(t,e){if(t==null)return{};var n=EY(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function EY(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function dw(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,a=t.className,o=t.style,s=t.title,l=t.desc,u=SY(t,_Y),c=i||{width:n,height:r,x:0,y:0},f=bt("recharts-surface",a);return U.createElement("svg",fw({},st(u,!0,"svg"),{className:f,width:n,height:r,style:o,viewBox:"".concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height)}),U.createElement("title",null,s),U.createElement("desc",null,l),e)}var AY=["children","className"];function hw(){return hw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hw.apply(this,arguments)}function TY(t,e){if(t==null)return{};var n=PY(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function PY(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Yt=U.forwardRef(function(t,e){var n=t.children,r=t.className,i=TY(t,AY),a=bt("recharts-layer",r);return U.createElement("g",hw({className:a},st(i,!0),{ref:e}),n)}),vo=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]};function OY(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var a=Array(i);++r<i;)a[r]=t[r+e];return a}var kY=OY,CY=kY;function IY(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:CY(t,e,n)}var jY=IY,NY="\\ud800-\\udfff",DY="\\u0300-\\u036f",MY="\\ufe20-\\ufe2f",RY="\\u20d0-\\u20ff",$Y=DY+MY+RY,LY="\\ufe0e\\ufe0f",FY="\\u200d",zY=RegExp("["+FY+NY+$Y+LY+"]");function VY(t){return zY.test(t)}var ZM=VY;function BY(t){return t.split("")}var UY=BY,eR="\\ud800-\\udfff",WY="\\u0300-\\u036f",qY="\\ufe20-\\ufe2f",KY="\\u20d0-\\u20ff",HY=WY+qY+KY,GY="\\ufe0e\\ufe0f",YY="["+eR+"]",pw="["+HY+"]",mw="\\ud83c[\\udffb-\\udfff]",XY="(?:"+pw+"|"+mw+")",tR="[^"+eR+"]",nR="(?:\\ud83c[\\udde6-\\uddff]){2}",rR="[\\ud800-\\udbff][\\udc00-\\udfff]",QY="\\u200d",iR=XY+"?",aR="["+GY+"]?",JY="(?:"+QY+"(?:"+[tR,nR,rR].join("|")+")"+aR+iR+")*",ZY=aR+iR+JY,eX="(?:"+[tR+pw+"?",pw,nR,rR,YY].join("|")+")",tX=RegExp(mw+"(?="+mw+")|"+eX+ZY,"g");function nX(t){return t.match(tX)||[]}var rX=nX,iX=UY,aX=ZM,oX=rX;function sX(t){return aX(t)?oX(t):iX(t)}var lX=sX,uX=jY,cX=ZM,fX=lX,dX=KM;function hX(t){return function(e){e=dX(e);var n=cX(e)?fX(e):void 0,r=n?n[0]:e.charAt(0),i=n?uX(n,1).join(""):e.slice(1);return r[t]()+i}}var pX=hX,mX=pX,gX=mX("toUpperCase"),yX=gX;const zv=Lt(yX);function qt(t){return function(){return t}}const oR=Math.cos,Bg=Math.sin,ha=Math.sqrt,Ug=Math.PI,Vv=2*Ug,gw=Math.PI,yw=2*gw,dl=1e-6,vX=yw-dl;function sR(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function bX(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return sR;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class xX{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?sR:bX(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,s=this._y1,l=r-e,u=i-n,c=o-e,f=s-n,m=c*c+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(m>dl)if(!(Math.abs(f*l-u*c)>dl)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-o,b=i-s,v=l*l+u*u,x=g*g+b*b,S=Math.sqrt(v),E=Math.sqrt(m),T=a*Math.tan((gw-Math.acos((v+m-x)/(2*S*E)))/2),j=T/E,_=T/S;Math.abs(j-1)>dl&&this._append`L${e+j*c},${n+j*f}`,this._append`A${a},${a},0,0,${+(f*g>c*b)},${this._x1=e+_*l},${this._y1=n+_*u}`}}arc(e,n,r,i,a,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),l=r*Math.sin(i),u=e+s,c=n+l,f=1^o,m=o?i-a:a-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>dl||Math.abs(this._y1-c)>dl)&&this._append`L${u},${c}`,r&&(m<0&&(m=m%yw+yw),m>vX?this._append`A${r},${r},0,1,${f},${e-s},${n-l}A${r},${r},0,1,${f},${this._x1=u},${this._y1=c}`:m>dl&&this._append`A${r},${r},0,${+(m>=gw)},${f},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function $S(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new xX(e)}function LS(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function lR(t){this._context=t}lR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Bv(t){return new lR(t)}function uR(t){return t[0]}function cR(t){return t[1]}function fR(t,e){var n=qt(!0),r=null,i=Bv,a=null,o=$S(s);t=typeof t=="function"?t:t===void 0?uR:qt(t),e=typeof e=="function"?e:e===void 0?cR:qt(e);function s(l){var u,c=(l=LS(l)).length,f,m=!1,g;for(r==null&&(a=i(g=o())),u=0;u<=c;++u)!(u<c&&n(f=l[u],u,l))===m&&((m=!m)?a.lineStart():a.lineEnd()),m&&a.point(+t(f,u,l),+e(f,u,l));if(g)return a=null,g+""||null}return s.x=function(l){return arguments.length?(t=typeof l=="function"?l:qt(+l),s):t},s.y=function(l){return arguments.length?(e=typeof l=="function"?l:qt(+l),s):e},s.defined=function(l){return arguments.length?(n=typeof l=="function"?l:qt(!!l),s):n},s.curve=function(l){return arguments.length?(i=l,r!=null&&(a=i(r)),s):i},s.context=function(l){return arguments.length?(l==null?r=a=null:a=i(r=l),s):r},s}function dm(t,e,n){var r=null,i=qt(!0),a=null,o=Bv,s=null,l=$S(u);t=typeof t=="function"?t:t===void 0?uR:qt(+t),e=typeof e=="function"?e:qt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?cR:qt(+n);function u(f){var m,g,b,v=(f=LS(f)).length,x,S=!1,E,T=new Array(v),j=new Array(v);for(a==null&&(s=o(E=l())),m=0;m<=v;++m){if(!(m<v&&i(x=f[m],m,f))===S)if(S=!S)g=m,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),b=m-1;b>=g;--b)s.point(T[b],j[b]);s.lineEnd(),s.areaEnd()}S&&(T[m]=+t(x,m,f),j[m]=+e(x,m,f),s.point(r?+r(x,m,f):T[m],n?+n(x,m,f):j[m]))}if(E)return s=null,E+""||null}function c(){return fR().defined(i).curve(o).context(a)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:qt(+f),r=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:qt(+f),u):t},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:qt(+f),u):r},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:qt(+f),n=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:qt(+f),u):e},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:qt(+f),u):n},u.lineX0=u.lineY0=function(){return c().x(t).y(e)},u.lineY1=function(){return c().x(t).y(n)},u.lineX1=function(){return c().x(r).y(e)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:qt(!!f),u):i},u.curve=function(f){return arguments.length?(o=f,a!=null&&(s=o(a)),u):o},u.context=function(f){return arguments.length?(f==null?a=s=null:s=o(a=f),u):a},u}class dR{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function wX(t){return new dR(t,!0)}function _X(t){return new dR(t,!1)}const FS={draw(t,e){const n=ha(e/Ug);t.moveTo(n,0),t.arc(0,0,n,0,Vv)}},SX={draw(t,e){const n=ha(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},hR=ha(1/3),EX=hR*2,AX={draw(t,e){const n=ha(e/EX),r=n*hR;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},TX={draw(t,e){const n=ha(e),r=-n/2;t.rect(r,r,n,n)}},PX=.8908130915292852,pR=Bg(Ug/10)/Bg(7*Ug/10),OX=Bg(Vv/10)*pR,kX=-oR(Vv/10)*pR,CX={draw(t,e){const n=ha(e*PX),r=OX*n,i=kX*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const o=Vv*a/5,s=oR(o),l=Bg(o);t.lineTo(l*n,-s*n),t.lineTo(s*r-l*i,l*r+s*i)}t.closePath()}},hb=ha(3),IX={draw(t,e){const n=-ha(e/(hb*3));t.moveTo(0,n*2),t.lineTo(-hb*n,-n),t.lineTo(hb*n,-n),t.closePath()}},Ei=-.5,Ai=ha(3)/2,vw=1/ha(12),jX=(vw/2+1)*3,NX={draw(t,e){const n=ha(e/jX),r=n/2,i=n*vw,a=r,o=n*vw+n,s=-a,l=o;t.moveTo(r,i),t.lineTo(a,o),t.lineTo(s,l),t.lineTo(Ei*r-Ai*i,Ai*r+Ei*i),t.lineTo(Ei*a-Ai*o,Ai*a+Ei*o),t.lineTo(Ei*s-Ai*l,Ai*s+Ei*l),t.lineTo(Ei*r+Ai*i,Ei*i-Ai*r),t.lineTo(Ei*a+Ai*o,Ei*o-Ai*a),t.lineTo(Ei*s+Ai*l,Ei*l-Ai*s),t.closePath()}};function DX(t,e){let n=null,r=$S(i);t=typeof t=="function"?t:qt(t||FS),e=typeof e=="function"?e:qt(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:qt(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:qt(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function Wg(){}function qg(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function mR(t){this._context=t}mR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:qg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:qg(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function MX(t){return new mR(t)}function gR(t){this._context=t}gR.prototype={areaStart:Wg,areaEnd:Wg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:qg(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function RX(t){return new gR(t)}function yR(t){this._context=t}yR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:qg(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function $X(t){return new yR(t)}function vR(t){this._context=t}vR.prototype={areaStart:Wg,areaEnd:Wg,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function LX(t){return new vR(t)}function QP(t){return t<0?-1:1}function JP(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(QP(a)+QP(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function ZP(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function pb(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-r)/3;t._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*n,a,o)}function Kg(t){this._context=t}Kg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:pb(this,this._t0,ZP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,pb(this,ZP(this,n=JP(this,t,e)),n);break;default:pb(this,this._t0,n=JP(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function bR(t){this._context=new xR(t)}(bR.prototype=Object.create(Kg.prototype)).point=function(t,e){Kg.prototype.point.call(this,e,t)};function xR(t){this._context=t}xR.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function FX(t){return new Kg(t)}function zX(t){return new bR(t)}function wR(t){this._context=t}wR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=e2(t),i=e2(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function e2(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function VX(t){return new wR(t)}function Uv(t,e){this._context=t,this._t=e}Uv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function BX(t){return new Uv(t,.5)}function UX(t){return new Uv(t,0)}function WX(t){return new Uv(t,1)}function Sc(t,e){if((o=t.length)>1)for(var n=1,r,i,a=t[e[0]],o,s=a.length;n<o;++n)for(i=a,a=t[e[n]],r=0;r<s;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function bw(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function qX(t,e){return t[e]}function KX(t){const e=[];return e.key=t,e}function HX(){var t=qt([]),e=bw,n=Sc,r=qX;function i(a){var o=Array.from(t.apply(this,arguments),KX),s,l=o.length,u=-1,c;for(const f of a)for(s=0,++u;s<l;++s)(o[s][u]=[0,+r(f,o[s].key,u,a)]).data=f;for(s=0,c=LS(e(o));s<l;++s)o[c[s]].index=s;return n(o,c),o}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:qt(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:qt(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?bw:typeof a=="function"?a:qt(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??Sc,i):n},i}function GX(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,o;i<a;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}Sc(t,e)}}function YX(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var o=0,s=0;o<i;++o)s+=t[o][n][1]||0;r[n][1]+=r[n][0]=-s/2}Sc(t,e)}}function XX(t,e){if(!(!((o=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,o;r<a;++r){for(var s=0,l=0,u=0;s<o;++s){for(var c=t[e[s]],f=c[r][1]||0,m=c[r-1][1]||0,g=(f-m)/2,b=0;b<s;++b){var v=t[e[b]],x=v[r][1]||0,S=v[r-1][1]||0;g+=x-S}l+=f,u+=g*f}i[r-1][1]+=i[r-1][0]=n,l&&(n-=u/l)}i[r-1][1]+=i[r-1][0]=n,Sc(t,e)}}function uh(t){"@babel/helpers - typeof";return uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uh(t)}var QX=["type","size","sizeType"];function xw(){return xw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xw.apply(this,arguments)}function t2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function n2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t2(Object(n),!0).forEach(function(r){JX(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function JX(t,e,n){return e=ZX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZX(t){var e=eQ(t,"string");return uh(e)=="symbol"?e:e+""}function eQ(t,e){if(uh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(uh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tQ(t,e){if(t==null)return{};var n=nQ(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function nQ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var _R={symbolCircle:FS,symbolCross:SX,symbolDiamond:AX,symbolSquare:TX,symbolStar:CX,symbolTriangle:IX,symbolWye:NX},rQ=Math.PI/180,iQ=function(e){var n="symbol".concat(zv(e));return _R[n]||FS},aQ=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*rQ;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},oQ=function(e,n){_R["symbol".concat(zv(e))]=n},zS=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,a=i===void 0?64:i,o=e.sizeType,s=o===void 0?"area":o,l=tQ(e,QX),u=n2(n2({},l),{},{type:r,size:a,sizeType:s}),c=function(){var x=iQ(r),S=DX().type(x).size(aQ(a,s,r));return S()},f=u.className,m=u.cx,g=u.cy,b=st(u,!0);return m===+m&&g===+g&&a===+a?U.createElement("path",xw({},b,{className:bt("recharts-symbols",f),transform:"translate(".concat(m,", ").concat(g,")"),d:c()})):null};zS.registerSymbol=oQ;function Ec(t){"@babel/helpers - typeof";return Ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ec(t)}function ww(){return ww=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ww.apply(this,arguments)}function r2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sQ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r2(Object(n),!0).forEach(function(r){ch(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lQ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uQ(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ER(r.key),r)}}function cQ(t,e,n){return e&&uQ(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function fQ(t,e,n){return e=Hg(e),dQ(t,SR()?Reflect.construct(e,n||[],Hg(t).constructor):e.apply(t,n))}function dQ(t,e){if(e&&(Ec(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hQ(t)}function hQ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function SR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SR=function(){return!!t})()}function Hg(t){return Hg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Hg(t)}function pQ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_w(t,e)}function _w(t,e){return _w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_w(t,e)}function ch(t,e,n){return e=ER(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ER(t){var e=mQ(t,"string");return Ec(e)=="symbol"?e:e+""}function mQ(t,e){if(Ec(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ec(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ti=32,VS=function(t){function e(){return lQ(this,e),fQ(this,e,arguments)}return pQ(e,t),cQ(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,a=Ti/2,o=Ti/6,s=Ti/3,l=r.inactive?i:r.color;if(r.type==="plainline")return U.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:Ti,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return U.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*s,",").concat(a,`
            H`).concat(Ti,"M").concat(2*s,",").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(s,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return U.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Ti/8,"h").concat(Ti,"v").concat(Ti*3/4,"h").concat(-Ti,"z"),className:"recharts-legend-icon"});if(U.isValidElement(r.legendIcon)){var u=sQ({},r);return delete u.legendIcon,U.cloneElement(r.legendIcon,u)}return U.createElement(zS,{fill:l,cx:a,cy:a,size:Ti,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,a=i.payload,o=i.iconSize,s=i.layout,l=i.formatter,u=i.inactiveColor,c={x:0,y:0,width:Ti,height:Ti},f={display:s==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(g,b){var v=g.formatter||l,x=bt(ch(ch({"recharts-legend-item":!0},"legend-item-".concat(b),!0),"inactive",g.inactive));if(g.type==="none")return null;var S=ot(g.value)?null:g.value;vo(!ot(g.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var E=g.inactive?u:g.color;return U.createElement("li",ww({className:x,style:f,key:"legend-item-".concat(b)},Vg(r.props,g,b)),U.createElement(dw,{width:o,height:o,viewBox:c,style:m},r.renderIcon(g)),U.createElement("span",{className:"recharts-legend-item-text",style:{color:E}},v?v(S,g,b):S))})}},{key:"render",value:function(){var r=this.props,i=r.payload,a=r.layout,o=r.align;if(!i||!i.length)return null;var s={padding:0,margin:0,textAlign:a==="horizontal"?o:"left"};return U.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(z.PureComponent);ch(VS,"displayName","Legend");ch(VS,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var gQ=Pv;function yQ(){this.__data__=new gQ,this.size=0}var vQ=yQ;function bQ(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var xQ=bQ;function wQ(t){return this.__data__.get(t)}var _Q=wQ;function SQ(t){return this.__data__.has(t)}var EQ=SQ,AQ=Pv,TQ=OS,PQ=kS,OQ=200;function kQ(t,e){var n=this.__data__;if(n instanceof AQ){var r=n.__data__;if(!TQ||r.length<OQ-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new PQ(r)}return n.set(t,e),this.size=n.size,this}var CQ=kQ,IQ=Pv,jQ=vQ,NQ=xQ,DQ=_Q,MQ=EQ,RQ=CQ;function pf(t){var e=this.__data__=new IQ(t);this.size=e.size}pf.prototype.clear=jQ;pf.prototype.delete=NQ;pf.prototype.get=DQ;pf.prototype.has=MQ;pf.prototype.set=RQ;var AR=pf,$Q="__lodash_hash_undefined__";function LQ(t){return this.__data__.set(t,$Q),this}var FQ=LQ;function zQ(t){return this.__data__.has(t)}var VQ=zQ,BQ=kS,UQ=FQ,WQ=VQ;function Gg(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new BQ;++e<n;)this.add(t[e])}Gg.prototype.add=Gg.prototype.push=UQ;Gg.prototype.has=WQ;var TR=Gg;function qQ(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var PR=qQ;function KQ(t,e){return t.has(e)}var OR=KQ,HQ=TR,GQ=PR,YQ=OR,XQ=1,QQ=2;function JQ(t,e,n,r,i,a){var o=n&XQ,s=t.length,l=e.length;if(s!=l&&!(o&&l>s))return!1;var u=a.get(t),c=a.get(e);if(u&&c)return u==e&&c==t;var f=-1,m=!0,g=n&QQ?new HQ:void 0;for(a.set(t,e),a.set(e,t);++f<s;){var b=t[f],v=e[f];if(r)var x=o?r(v,b,f,e,t,a):r(b,v,f,t,e,a);if(x!==void 0){if(x)continue;m=!1;break}if(g){if(!GQ(e,function(S,E){if(!YQ(g,E)&&(b===S||i(b,S,n,r,a)))return g.push(E)})){m=!1;break}}else if(!(b===v||i(b,v,n,r,a))){m=!1;break}}return a.delete(t),a.delete(e),m}var kR=JQ,ZQ=Ka,eJ=ZQ.Uint8Array,tJ=eJ;function nJ(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var rJ=nJ;function iJ(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var BS=iJ,i2=pp,a2=tJ,aJ=PS,oJ=kR,sJ=rJ,lJ=BS,uJ=1,cJ=2,fJ="[object Boolean]",dJ="[object Date]",hJ="[object Error]",pJ="[object Map]",mJ="[object Number]",gJ="[object RegExp]",yJ="[object Set]",vJ="[object String]",bJ="[object Symbol]",xJ="[object ArrayBuffer]",wJ="[object DataView]",o2=i2?i2.prototype:void 0,mb=o2?o2.valueOf:void 0;function _J(t,e,n,r,i,a,o){switch(n){case wJ:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case xJ:return!(t.byteLength!=e.byteLength||!a(new a2(t),new a2(e)));case fJ:case dJ:case mJ:return aJ(+t,+e);case hJ:return t.name==e.name&&t.message==e.message;case gJ:case vJ:return t==e+"";case pJ:var s=sJ;case yJ:var l=r&uJ;if(s||(s=lJ),t.size!=e.size&&!l)return!1;var u=o.get(t);if(u)return u==e;r|=cJ,o.set(t,e);var c=oJ(s(t),s(e),r,i,a,o);return o.delete(t),c;case bJ:if(mb)return mb.call(t)==mb.call(e)}return!1}var SJ=_J;function EJ(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var CR=EJ,AJ=CR,TJ=Gr;function PJ(t,e,n){var r=e(t);return TJ(t)?r:AJ(r,n(t))}var OJ=PJ;function kJ(t,e){for(var n=-1,r=t==null?0:t.length,i=0,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[i++]=o)}return a}var CJ=kJ;function IJ(){return[]}var jJ=IJ,NJ=CJ,DJ=jJ,MJ=Object.prototype,RJ=MJ.propertyIsEnumerable,s2=Object.getOwnPropertySymbols,$J=s2?function(t){return t==null?[]:(t=Object(t),NJ(s2(t),function(e){return RJ.call(t,e)}))}:DJ,LJ=$J;function FJ(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var zJ=FJ,VJ=Do,BJ=Mo,UJ="[object Arguments]";function WJ(t){return BJ(t)&&VJ(t)==UJ}var qJ=WJ,l2=qJ,KJ=Mo,IR=Object.prototype,HJ=IR.hasOwnProperty,GJ=IR.propertyIsEnumerable,YJ=l2(function(){return arguments}())?l2:function(t){return KJ(t)&&HJ.call(t,"callee")&&!GJ.call(t,"callee")},US=YJ,Yg={exports:{}};function XJ(){return!1}var QJ=XJ;Yg.exports;(function(t,e){var n=Ka,r=QJ,i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===i,s=o?n.Buffer:void 0,l=s?s.isBuffer:void 0,u=l||r;t.exports=u})(Yg,Yg.exports);var jR=Yg.exports,JJ=9007199254740991,ZJ=/^(?:0|[1-9]\d*)$/;function eZ(t,e){var n=typeof t;return e=e??JJ,!!e&&(n=="number"||n!="symbol"&&ZJ.test(t))&&t>-1&&t%1==0&&t<e}var WS=eZ,tZ=9007199254740991;function nZ(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=tZ}var qS=nZ,rZ=Do,iZ=qS,aZ=Mo,oZ="[object Arguments]",sZ="[object Array]",lZ="[object Boolean]",uZ="[object Date]",cZ="[object Error]",fZ="[object Function]",dZ="[object Map]",hZ="[object Number]",pZ="[object Object]",mZ="[object RegExp]",gZ="[object Set]",yZ="[object String]",vZ="[object WeakMap]",bZ="[object ArrayBuffer]",xZ="[object DataView]",wZ="[object Float32Array]",_Z="[object Float64Array]",SZ="[object Int8Array]",EZ="[object Int16Array]",AZ="[object Int32Array]",TZ="[object Uint8Array]",PZ="[object Uint8ClampedArray]",OZ="[object Uint16Array]",kZ="[object Uint32Array]",Qt={};Qt[wZ]=Qt[_Z]=Qt[SZ]=Qt[EZ]=Qt[AZ]=Qt[TZ]=Qt[PZ]=Qt[OZ]=Qt[kZ]=!0;Qt[oZ]=Qt[sZ]=Qt[bZ]=Qt[lZ]=Qt[xZ]=Qt[uZ]=Qt[cZ]=Qt[fZ]=Qt[dZ]=Qt[hZ]=Qt[pZ]=Qt[mZ]=Qt[gZ]=Qt[yZ]=Qt[vZ]=!1;function CZ(t){return aZ(t)&&iZ(t.length)&&!!Qt[rZ(t)]}var IZ=CZ;function jZ(t){return function(e){return t(e)}}var NR=jZ,Xg={exports:{}};Xg.exports;(function(t,e){var n=zM,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,o=a&&n.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=s})(Xg,Xg.exports);var NZ=Xg.exports,DZ=IZ,MZ=NR,u2=NZ,c2=u2&&u2.isTypedArray,RZ=c2?MZ(c2):DZ,DR=RZ,$Z=zJ,LZ=US,FZ=Gr,zZ=jR,VZ=WS,BZ=DR,UZ=Object.prototype,WZ=UZ.hasOwnProperty;function qZ(t,e){var n=FZ(t),r=!n&&LZ(t),i=!n&&!r&&zZ(t),a=!n&&!r&&!i&&BZ(t),o=n||r||i||a,s=o?$Z(t.length,String):[],l=s.length;for(var u in t)(e||WZ.call(t,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||VZ(u,l)))&&s.push(u);return s}var KZ=qZ,HZ=Object.prototype;function GZ(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||HZ;return t===n}var YZ=GZ;function XZ(t,e){return function(n){return t(e(n))}}var MR=XZ,QZ=MR,JZ=QZ(Object.keys,Object),ZZ=JZ,eee=YZ,tee=ZZ,nee=Object.prototype,ree=nee.hasOwnProperty;function iee(t){if(!eee(t))return tee(t);var e=[];for(var n in Object(t))ree.call(t,n)&&n!="constructor"&&e.push(n);return e}var aee=iee,oee=TS,see=qS;function lee(t){return t!=null&&see(t.length)&&!oee(t)}var mp=lee,uee=KZ,cee=aee,fee=mp;function dee(t){return fee(t)?uee(t):cee(t)}var Wv=dee,hee=OJ,pee=LJ,mee=Wv;function gee(t){return hee(t,mee,pee)}var yee=gee,f2=yee,vee=1,bee=Object.prototype,xee=bee.hasOwnProperty;function wee(t,e,n,r,i,a){var o=n&vee,s=f2(t),l=s.length,u=f2(e),c=u.length;if(l!=c&&!o)return!1;for(var f=l;f--;){var m=s[f];if(!(o?m in e:xee.call(e,m)))return!1}var g=a.get(t),b=a.get(e);if(g&&b)return g==e&&b==t;var v=!0;a.set(t,e),a.set(e,t);for(var x=o;++f<l;){m=s[f];var S=t[m],E=e[m];if(r)var T=o?r(E,S,m,e,t,a):r(S,E,m,t,e,a);if(!(T===void 0?S===E||i(S,E,n,r,a):T)){v=!1;break}x||(x=m=="constructor")}if(v&&!x){var j=t.constructor,_=e.constructor;j!=_&&"constructor"in t&&"constructor"in e&&!(typeof j=="function"&&j instanceof j&&typeof _=="function"&&_ instanceof _)&&(v=!1)}return a.delete(t),a.delete(e),v}var _ee=wee,See=Zl,Eee=Ka,Aee=See(Eee,"DataView"),Tee=Aee,Pee=Zl,Oee=Ka,kee=Pee(Oee,"Promise"),Cee=kee,Iee=Zl,jee=Ka,Nee=Iee(jee,"Set"),RR=Nee,Dee=Zl,Mee=Ka,Ree=Dee(Mee,"WeakMap"),$ee=Ree,Sw=Tee,Ew=OS,Aw=Cee,Tw=RR,Pw=$ee,$R=Do,mf=BM,d2="[object Map]",Lee="[object Object]",h2="[object Promise]",p2="[object Set]",m2="[object WeakMap]",g2="[object DataView]",Fee=mf(Sw),zee=mf(Ew),Vee=mf(Aw),Bee=mf(Tw),Uee=mf(Pw),hl=$R;(Sw&&hl(new Sw(new ArrayBuffer(1)))!=g2||Ew&&hl(new Ew)!=d2||Aw&&hl(Aw.resolve())!=h2||Tw&&hl(new Tw)!=p2||Pw&&hl(new Pw)!=m2)&&(hl=function(t){var e=$R(t),n=e==Lee?t.constructor:void 0,r=n?mf(n):"";if(r)switch(r){case Fee:return g2;case zee:return d2;case Vee:return h2;case Bee:return p2;case Uee:return m2}return e});var Wee=hl,gb=AR,qee=kR,Kee=SJ,Hee=_ee,y2=Wee,v2=Gr,b2=jR,Gee=DR,Yee=1,x2="[object Arguments]",w2="[object Array]",hm="[object Object]",Xee=Object.prototype,_2=Xee.hasOwnProperty;function Qee(t,e,n,r,i,a){var o=v2(t),s=v2(e),l=o?w2:y2(t),u=s?w2:y2(e);l=l==x2?hm:l,u=u==x2?hm:u;var c=l==hm,f=u==hm,m=l==u;if(m&&b2(t)){if(!b2(e))return!1;o=!0,c=!1}if(m&&!c)return a||(a=new gb),o||Gee(t)?qee(t,e,n,r,i,a):Kee(t,e,l,n,r,i,a);if(!(n&Yee)){var g=c&&_2.call(t,"__wrapped__"),b=f&&_2.call(e,"__wrapped__");if(g||b){var v=g?t.value():t,x=b?e.value():e;return a||(a=new gb),i(v,x,n,r,a)}}return m?(a||(a=new gb),Hee(t,e,n,r,i,a)):!1}var Jee=Qee,Zee=Jee,S2=Mo;function LR(t,e,n,r,i){return t===e?!0:t==null||e==null||!S2(t)&&!S2(e)?t!==t&&e!==e:Zee(t,e,n,r,LR,i)}var KS=LR,ete=AR,tte=KS,nte=1,rte=2;function ite(t,e,n,r){var i=n.length,a=i,o=!r;if(t==null)return!a;for(t=Object(t);i--;){var s=n[i];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<a;){s=n[i];var l=s[0],u=t[l],c=s[1];if(o&&s[2]){if(u===void 0&&!(l in t))return!1}else{var f=new ete;if(r)var m=r(u,c,l,t,e,f);if(!(m===void 0?tte(c,u,nte|rte,r,f):m))return!1}}return!0}var ate=ite,ote=$s;function ste(t){return t===t&&!ote(t)}var FR=ste,lte=FR,ute=Wv;function cte(t){for(var e=ute(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,lte(i)]}return e}var fte=cte;function dte(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var zR=dte,hte=ate,pte=fte,mte=zR;function gte(t){var e=pte(t);return e.length==1&&e[0][2]?mte(e[0][0],e[0][1]):function(n){return n===t||hte(n,t,e)}}var yte=gte;function vte(t,e){return t!=null&&e in Object(t)}var bte=vte,xte=HM,wte=US,_te=Gr,Ste=WS,Ete=qS,Ate=kv;function Tte(t,e,n){e=xte(e,t);for(var r=-1,i=e.length,a=!1;++r<i;){var o=Ate(e[r]);if(!(a=t!=null&&n(t,o)))break;t=t[o]}return a||++r!=i?a:(i=t==null?0:t.length,!!i&&Ete(i)&&Ste(o,i)&&(_te(t)||wte(t)))}var Pte=Tte,Ote=bte,kte=Pte;function Cte(t,e){return t!=null&&kte(t,e,Ote)}var Ite=Cte,jte=KS,Nte=GM,Dte=Ite,Mte=AS,Rte=FR,$te=zR,Lte=kv,Fte=1,zte=2;function Vte(t,e){return Mte(t)&&Rte(e)?$te(Lte(t),e):function(n){var r=Nte(n,t);return r===void 0&&r===e?Dte(n,t):jte(e,r,Fte|zte)}}var Bte=Vte;function Ute(t){return t}var gf=Ute;function Wte(t){return function(e){return e==null?void 0:e[t]}}var qte=Wte,Kte=jS;function Hte(t){return function(e){return Kte(e,t)}}var Gte=Hte,Yte=qte,Xte=Gte,Qte=AS,Jte=kv;function Zte(t){return Qte(t)?Yte(Jte(t)):Xte(t)}var ene=Zte,tne=yte,nne=Bte,rne=gf,ine=Gr,ane=ene;function one(t){return typeof t=="function"?t:t==null?rne:typeof t=="object"?ine(t)?nne(t[0],t[1]):tne(t):ane(t)}var Ls=one;function sne(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}var VR=sne;function lne(t){return t!==t}var une=lne;function cne(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var fne=cne,dne=VR,hne=une,pne=fne;function mne(t,e,n){return e===e?pne(t,e,n):dne(t,hne,n)}var gne=mne,yne=gne;function vne(t,e){var n=t==null?0:t.length;return!!n&&yne(t,e,0)>-1}var bne=vne;function xne(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var wne=xne;function _ne(){}var Sne=_ne,yb=RR,Ene=Sne,Ane=BS,Tne=1/0,Pne=yb&&1/Ane(new yb([,-0]))[1]==Tne?function(t){return new yb(t)}:Ene,One=Pne,kne=TR,Cne=bne,Ine=wne,jne=OR,Nne=One,Dne=BS,Mne=200;function Rne(t,e,n){var r=-1,i=Cne,a=t.length,o=!0,s=[],l=s;if(n)o=!1,i=Ine;else if(a>=Mne){var u=e?null:Nne(t);if(u)return Dne(u);o=!1,i=jne,l=new kne}else l=e?[]:s;e:for(;++r<a;){var c=t[r],f=e?e(c):c;if(c=n||c!==0?c:0,o&&f===f){for(var m=l.length;m--;)if(l[m]===f)continue e;e&&l.push(f),s.push(c)}else i(l,f,n)||(l!==s&&l.push(f),s.push(c))}return s}var $ne=Rne,Lne=Ls,Fne=$ne;function zne(t,e){return t&&t.length?Fne(t,Lne(e)):[]}var Vne=zne;const E2=Lt(Vne);function BR(t,e,n){return e===!0?E2(t,n):ot(e)?E2(t,e):t}function Ac(t){"@babel/helpers - typeof";return Ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ac(t)}var Bne=["ref"];function A2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ro(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A2(Object(n),!0).forEach(function(r){qv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Une(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,WR(r.key),r)}}function Wne(t,e,n){return e&&T2(t.prototype,e),n&&T2(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function qne(t,e,n){return e=Qg(e),Kne(t,UR()?Reflect.construct(e,n||[],Qg(t).constructor):e.apply(t,n))}function Kne(t,e){if(e&&(Ac(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hne(t)}function Hne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function UR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UR=function(){return!!t})()}function Qg(t){return Qg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qg(t)}function Gne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ow(t,e)}function Ow(t,e){return Ow=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Ow(t,e)}function qv(t,e,n){return e=WR(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WR(t){var e=Yne(t,"string");return Ac(e)=="symbol"?e:e+""}function Yne(t,e){if(Ac(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ac(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Xne(t,e){if(t==null)return{};var n=Qne(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Qne(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Jne(t){return t.value}function Zne(t,e){if(U.isValidElement(t))return U.cloneElement(t,e);if(typeof t=="function")return U.createElement(t,e);e.ref;var n=Xne(e,Bne);return U.createElement(VS,n)}var P2=1,Cl=function(t){function e(){var n;Une(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=qne(this,e,[].concat(i)),qv(n,"lastBoundingBox",{width:-1,height:-1}),n}return Gne(e,t),Wne(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>P2||Math.abs(i.height-this.lastBoundingBox.height)>P2)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ro({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,a=i.layout,o=i.align,s=i.verticalAlign,l=i.margin,u=i.chartWidth,c=i.chartHeight,f,m;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&a==="vertical"){var g=this.getBBoxSnapshot();f={left:((u||0)-g.width)/2}}else f=o==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(s==="middle"){var b=this.getBBoxSnapshot();m={top:((c||0)-b.height)/2}}else m=s==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return ro(ro({},f),m)}},{key:"render",value:function(){var r=this,i=this.props,a=i.content,o=i.width,s=i.height,l=i.wrapperStyle,u=i.payloadUniqBy,c=i.payload,f=ro(ro({position:"absolute",width:o||"auto",height:s||"auto"},this.getDefaultPosition(l)),l);return U.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(g){r.wrapperNode=g}},Zne(a,ro(ro({},this.props),{},{payload:BR(c,u,Jne)})))}}],[{key:"getWithHeight",value:function(r,i){var a=ro(ro({},this.defaultProps),r.props),o=a.layout;return o==="vertical"&&ke(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||i}:null}}])}(z.PureComponent);qv(Cl,"displayName","Legend");qv(Cl,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var O2=pp,ere=US,tre=Gr,k2=O2?O2.isConcatSpreadable:void 0;function nre(t){return tre(t)||ere(t)||!!(k2&&t&&t[k2])}var rre=nre,ire=CR,are=rre;function qR(t,e,n,r,i){var a=-1,o=t.length;for(n||(n=are),i||(i=[]);++a<o;){var s=t[a];e>0&&n(s)?e>1?qR(s,e-1,n,r,i):ire(i,s):r||(i[i.length]=s)}return i}var KR=qR;function ore(t){return function(e,n,r){for(var i=-1,a=Object(e),o=r(e),s=o.length;s--;){var l=o[t?s:++i];if(n(a[l],l,a)===!1)break}return e}}var sre=ore,lre=sre,ure=lre(),cre=ure,fre=cre,dre=Wv;function hre(t,e){return t&&fre(t,e,dre)}var HR=hre,pre=mp;function mre(t,e){return function(n,r){if(n==null)return n;if(!pre(n))return t(n,r);for(var i=n.length,a=e?i:-1,o=Object(n);(e?a--:++a<i)&&r(o[a],a,o)!==!1;);return n}}var gre=mre,yre=HR,vre=gre,bre=vre(yre),HS=bre,xre=HS,wre=mp;function _re(t,e){var n=-1,r=wre(t)?Array(t.length):[];return xre(t,function(i,a,o){r[++n]=e(i,a,o)}),r}var GR=_re;function Sre(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var Ere=Sre,C2=sf;function Are(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,a=C2(t),o=e!==void 0,s=e===null,l=e===e,u=C2(e);if(!s&&!u&&!a&&t>e||a&&o&&l&&!s&&!u||r&&o&&l||!n&&l||!i)return 1;if(!r&&!a&&!u&&t<e||u&&n&&i&&!r&&!a||s&&n&&i||!o&&i||!l)return-1}return 0}var Tre=Are,Pre=Tre;function Ore(t,e,n){for(var r=-1,i=t.criteria,a=e.criteria,o=i.length,s=n.length;++r<o;){var l=Pre(i[r],a[r]);if(l){if(r>=s)return l;var u=n[r];return l*(u=="desc"?-1:1)}}return t.index-e.index}var kre=Ore,vb=IS,Cre=jS,Ire=Ls,jre=GR,Nre=Ere,Dre=NR,Mre=kre,Rre=gf,$re=Gr;function Lre(t,e,n){e.length?e=vb(e,function(a){return $re(a)?function(o){return Cre(o,a.length===1?a[0]:a)}:a}):e=[Rre];var r=-1;e=vb(e,Dre(Ire));var i=jre(t,function(a,o,s){var l=vb(e,function(u){return u(a)});return{criteria:l,index:++r,value:a}});return Nre(i,function(a,o){return Mre(a,o,n)})}var Fre=Lre;function zre(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var Vre=zre,Bre=Vre,I2=Math.max;function Ure(t,e,n){return e=I2(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=I2(r.length-e,0),o=Array(a);++i<a;)o[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(o),Bre(t,this,s)}}var Wre=Ure;function qre(t){return function(){return t}}var Kre=qre,Hre=Zl,Gre=function(){try{var t=Hre(Object,"defineProperty");return t({},"",{}),t}catch{}}(),YR=Gre,Yre=Kre,j2=YR,Xre=gf,Qre=j2?function(t,e){return j2(t,"toString",{configurable:!0,enumerable:!1,value:Yre(e),writable:!0})}:Xre,Jre=Qre,Zre=800,eie=16,tie=Date.now;function nie(t){var e=0,n=0;return function(){var r=tie(),i=eie-(r-n);if(n=r,i>0){if(++e>=Zre)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var rie=nie,iie=Jre,aie=rie,oie=aie(iie),sie=oie,lie=gf,uie=Wre,cie=sie;function fie(t,e){return cie(uie(t,e,lie),t+"")}var die=fie,hie=PS,pie=mp,mie=WS,gie=$s;function yie(t,e,n){if(!gie(n))return!1;var r=typeof e;return(r=="number"?pie(n)&&mie(e,n.length):r=="string"&&e in n)?hie(n[e],t):!1}var Kv=yie,vie=KR,bie=Fre,xie=die,N2=Kv,wie=xie(function(t,e){if(t==null)return[];var n=e.length;return n>1&&N2(t,e[0],e[1])?e=[]:n>2&&N2(e[0],e[1],e[2])&&(e=[e[0]]),bie(t,vie(e,1),[])}),_ie=wie;const GS=Lt(_ie);function fh(t){"@babel/helpers - typeof";return fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fh(t)}function kw(){return kw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kw.apply(this,arguments)}function Sie(t,e){return Pie(t)||Tie(t,e)||Aie(t,e)||Eie()}function Eie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Aie(t,e){if(t){if(typeof t=="string")return D2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D2(t,e)}}function D2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Tie(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function Pie(t){if(Array.isArray(t))return t}function M2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M2(Object(n),!0).forEach(function(r){Oie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Oie(t,e,n){return e=kie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kie(t){var e=Cie(t,"string");return fh(e)=="symbol"?e:e+""}function Cie(t,e){if(fh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(fh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Iie(t){return Array.isArray(t)&&Rn(t[0])&&Rn(t[1])?t.join(" ~ "):t}var jie=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,a=i===void 0?{}:i,o=e.itemStyle,s=o===void 0?{}:o,l=e.labelStyle,u=l===void 0?{}:l,c=e.payload,f=e.formatter,m=e.itemSorter,g=e.wrapperClassName,b=e.labelClassName,v=e.label,x=e.labelFormatter,S=e.accessibilityLayer,E=S===void 0?!1:S,T=function(){if(c&&c.length){var $={padding:0,margin:0},L=(m?GS(c,m):c).map(function(ne,ae){if(ne.type==="none")return null;var ce=bb({display:"block",paddingTop:4,paddingBottom:4,color:ne.color||"#000"},s),me=ne.formatter||f||Iie,X=ne.value,ie=ne.name,ge=X,Te=ie;if(me&&ge!=null&&Te!=null){var be=me(X,ie,ne,ae,c);if(Array.isArray(be)){var he=Sie(be,2);ge=he[0],Te=he[1]}else ge=be}return U.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(ae),style:ce},Rn(Te)?U.createElement("span",{className:"recharts-tooltip-item-name"},Te):null,Rn(Te)?U.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,U.createElement("span",{className:"recharts-tooltip-item-value"},ge),U.createElement("span",{className:"recharts-tooltip-item-unit"},ne.unit||""))});return U.createElement("ul",{className:"recharts-tooltip-item-list",style:$},L)}return null},j=bb({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),_=bb({margin:0},u),P=!ft(v),w=P?v:"",O=bt("recharts-default-tooltip",g),I=bt("recharts-tooltip-label",b);P&&x&&c!==void 0&&c!==null&&(w=x(v,c));var R=E?{role:"status","aria-live":"assertive"}:{};return U.createElement("div",kw({className:O,style:j},R),U.createElement("p",{className:I,style:_},U.isValidElement(w)?w:"".concat(w)),T())};function dh(t){"@babel/helpers - typeof";return dh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dh(t)}function pm(t,e,n){return e=Nie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nie(t){var e=Die(t,"string");return dh(e)=="symbol"?e:e+""}function Die(t,e){if(dh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(dh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kf="recharts-tooltip-wrapper",Mie={visibility:"hidden"};function Rie(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return bt(Kf,pm(pm(pm(pm({},"".concat(Kf,"-right"),ke(n)&&e&&ke(e.x)&&n>=e.x),"".concat(Kf,"-left"),ke(n)&&e&&ke(e.x)&&n<e.x),"".concat(Kf,"-bottom"),ke(r)&&e&&ke(e.y)&&r>=e.y),"".concat(Kf,"-top"),ke(r)&&e&&ke(e.y)&&r<e.y))}function R2(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,a=t.position,o=t.reverseDirection,s=t.tooltipDimension,l=t.viewBox,u=t.viewBoxDimension;if(a&&ke(a[r]))return a[r];var c=n[r]-s-i,f=n[r]+i;if(e[r])return o[r]?c:f;if(o[r]){var m=c,g=l[r];return m<g?Math.max(f,l[r]):Math.max(c,l[r])}var b=f+s,v=l[r]+u;return b>v?Math.max(c,l[r]):Math.max(f,l[r])}function $ie(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Lie(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,a=t.reverseDirection,o=t.tooltipBox,s=t.useTranslate3d,l=t.viewBox,u,c,f;return o.height>0&&o.width>0&&n?(c=R2({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:l,viewBoxDimension:l.width}),f=R2({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:l,viewBoxDimension:l.height}),u=$ie({translateX:c,translateY:f,useTranslate3d:s})):u=Mie,{cssProperties:u,cssClasses:Rie({translateX:c,translateY:f,coordinate:n})}}function Tc(t){"@babel/helpers - typeof";return Tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tc(t)}function $2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function L2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$2(Object(n),!0).forEach(function(r){Iw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zie(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,QR(r.key),r)}}function Vie(t,e,n){return e&&zie(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bie(t,e,n){return e=Jg(e),Uie(t,XR()?Reflect.construct(e,n||[],Jg(t).constructor):e.apply(t,n))}function Uie(t,e){if(e&&(Tc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wie(t)}function Wie(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XR=function(){return!!t})()}function Jg(t){return Jg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Jg(t)}function qie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cw(t,e)}function Cw(t,e){return Cw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Cw(t,e)}function Iw(t,e,n){return e=QR(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QR(t){var e=Kie(t,"string");return Tc(e)=="symbol"?e:e+""}function Kie(t,e){if(Tc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var F2=1,Hie=function(t){function e(){var n;Fie(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Bie(this,e,[].concat(i)),Iw(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Iw(n,"handleKeyDown",function(o){if(o.key==="Escape"){var s,l,u,c;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,y:(u=(c=n.props.coordinate)===null||c===void 0?void 0:c.y)!==null&&u!==void 0?u:0}})}}),n}return qie(e,t),Vie(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>F2||Math.abs(r.height-this.state.lastBoundingBox.height)>F2)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,u=i.children,c=i.coordinate,f=i.hasPayload,m=i.isAnimationActive,g=i.offset,b=i.position,v=i.reverseDirection,x=i.useTranslate3d,S=i.viewBox,E=i.wrapperStyle,T=Lie({allowEscapeViewBox:o,coordinate:c,offsetTopLeft:g,position:b,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:S}),j=T.cssClasses,_=T.cssProperties,P=L2(L2({transition:m&&a?"transform ".concat(s,"ms ").concat(l):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&f?"visible":"hidden",position:"absolute",top:0,left:0},E);return U.createElement("div",{tabIndex:-1,className:j,style:P,ref:function(O){r.wrapperNode=O}},u)}}])}(z.PureComponent),Gie=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},eu={isSsr:Gie()};function Pc(t){"@babel/helpers - typeof";return Pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pc(t)}function z2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function V2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z2(Object(n),!0).forEach(function(r){YS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xie(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ZR(r.key),r)}}function Qie(t,e,n){return e&&Xie(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Jie(t,e,n){return e=Zg(e),Zie(t,JR()?Reflect.construct(e,n||[],Zg(t).constructor):e.apply(t,n))}function Zie(t,e){if(e&&(Pc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eae(t)}function eae(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JR=function(){return!!t})()}function Zg(t){return Zg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zg(t)}function tae(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jw(t,e)}function jw(t,e){return jw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},jw(t,e)}function YS(t,e,n){return e=ZR(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZR(t){var e=nae(t,"string");return Pc(e)=="symbol"?e:e+""}function nae(t,e){if(Pc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Pc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function rae(t){return t.dataKey}function iae(t,e){return U.isValidElement(t)?U.cloneElement(t,e):typeof t=="function"?U.createElement(t,e):U.createElement(jie,e)}var Tn=function(t){function e(){return Yie(this,e),Jie(this,e,arguments)}return tae(e,t),Qie(e,[{key:"render",value:function(){var r=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,u=i.content,c=i.coordinate,f=i.filterNull,m=i.isAnimationActive,g=i.offset,b=i.payload,v=i.payloadUniqBy,x=i.position,S=i.reverseDirection,E=i.useTranslate3d,T=i.viewBox,j=i.wrapperStyle,_=b??[];f&&_.length&&(_=BR(b.filter(function(w){return w.value!=null&&(w.hide!==!0||r.props.includeHidden)}),v,rae));var P=_.length>0;return U.createElement(Hie,{allowEscapeViewBox:o,animationDuration:s,animationEasing:l,isAnimationActive:m,active:a,coordinate:c,hasPayload:P,offset:g,position:x,reverseDirection:S,useTranslate3d:E,viewBox:T,wrapperStyle:j},iae(u,V2(V2({},this.props),{},{payload:_})))}}])}(z.PureComponent);YS(Tn,"displayName","Tooltip");YS(Tn,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!eu.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var aae=Ka,oae=function(){return aae.Date.now()},sae=oae,lae=/\s/;function uae(t){for(var e=t.length;e--&&lae.test(t.charAt(e)););return e}var cae=uae,fae=cae,dae=/^\s+/;function hae(t){return t&&t.slice(0,fae(t)+1).replace(dae,"")}var pae=hae,mae=pae,B2=$s,gae=sf,U2=NaN,yae=/^[-+]0x[0-9a-f]+$/i,vae=/^0b[01]+$/i,bae=/^0o[0-7]+$/i,xae=parseInt;function wae(t){if(typeof t=="number")return t;if(gae(t))return U2;if(B2(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=B2(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=mae(t);var n=vae.test(t);return n||bae.test(t)?xae(t.slice(2),n?2:8):yae.test(t)?U2:+t}var e$=wae,_ae=$s,xb=sae,W2=e$,Sae="Expected a function",Eae=Math.max,Aae=Math.min;function Tae(t,e,n){var r,i,a,o,s,l,u=0,c=!1,f=!1,m=!0;if(typeof t!="function")throw new TypeError(Sae);e=W2(e)||0,_ae(n)&&(c=!!n.leading,f="maxWait"in n,a=f?Eae(W2(n.maxWait)||0,e):a,m="trailing"in n?!!n.trailing:m);function g(P){var w=r,O=i;return r=i=void 0,u=P,o=t.apply(O,w),o}function b(P){return u=P,s=setTimeout(S,e),c?g(P):o}function v(P){var w=P-l,O=P-u,I=e-w;return f?Aae(I,a-O):I}function x(P){var w=P-l,O=P-u;return l===void 0||w>=e||w<0||f&&O>=a}function S(){var P=xb();if(x(P))return E(P);s=setTimeout(S,v(P))}function E(P){return s=void 0,m&&r?g(P):(r=i=void 0,o)}function T(){s!==void 0&&clearTimeout(s),u=0,r=l=i=s=void 0}function j(){return s===void 0?o:E(xb())}function _(){var P=xb(),w=x(P);if(r=arguments,i=this,l=P,w){if(s===void 0)return b(l);if(f)return clearTimeout(s),s=setTimeout(S,e),g(l)}return s===void 0&&(s=setTimeout(S,e)),o}return _.cancel=T,_.flush=j,_}var Pae=Tae,Oae=Pae,kae=$s,Cae="Expected a function";function Iae(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(Cae);return kae(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Oae(t,e,{leading:r,maxWait:e,trailing:i})}var jae=Iae;const t$=Lt(jae);function hh(t){"@babel/helpers - typeof";return hh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hh(t)}function q2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q2(Object(n),!0).forEach(function(r){Nae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nae(t,e,n){return e=Dae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dae(t){var e=Mae(t,"string");return hh(e)=="symbol"?e:e+""}function Mae(t,e){if(hh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rae(t,e){return zae(t)||Fae(t,e)||Lae(t,e)||$ae()}function $ae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lae(t,e){if(t){if(typeof t=="string")return K2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K2(t,e)}}function K2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Fae(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function zae(t){if(Array.isArray(t))return t}var ia=z.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,a=t.width,o=a===void 0?"100%":a,s=t.height,l=s===void 0?"100%":s,u=t.minWidth,c=u===void 0?0:u,f=t.minHeight,m=t.maxHeight,g=t.children,b=t.debounce,v=b===void 0?0:b,x=t.id,S=t.className,E=t.onResize,T=t.style,j=T===void 0?{}:T,_=z.useRef(null),P=z.useRef();P.current=E,z.useImperativeHandle(e,function(){return Object.defineProperty(_.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),_.current},configurable:!0})});var w=z.useState({containerWidth:i.width,containerHeight:i.height}),O=Rae(w,2),I=O[0],R=O[1],D=z.useCallback(function(L,ne){R(function(ae){var ce=Math.round(L),me=Math.round(ne);return ae.containerWidth===ce&&ae.containerHeight===me?ae:{containerWidth:ce,containerHeight:me}})},[]);z.useEffect(function(){var L=function(ie){var ge,Te=ie[0].contentRect,be=Te.width,he=Te.height;D(be,he),(ge=P.current)===null||ge===void 0||ge.call(P,be,he)};v>0&&(L=t$(L,v,{trailing:!0,leading:!1}));var ne=new ResizeObserver(L),ae=_.current.getBoundingClientRect(),ce=ae.width,me=ae.height;return D(ce,me),ne.observe(_.current),function(){ne.disconnect()}},[D,v]);var $=z.useMemo(function(){var L=I.containerWidth,ne=I.containerHeight;if(L<0||ne<0)return null;vo(wl(o)||wl(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,l),vo(!n||n>0,"The aspect(%s) must be greater than zero.",n);var ae=wl(o)?L:o,ce=wl(l)?ne:l;n&&n>0&&(ae?ce=ae/n:ce&&(ae=ce*n),m&&ce>m&&(ce=m)),vo(ae>0||ce>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,ae,ce,o,l,c,f,n);var me=!Array.isArray(g)&&yo(g.type).endsWith("Chart");return U.Children.map(g,function(X){return U.isValidElement(X)?z.cloneElement(X,mm({width:ae,height:ce},me?{style:mm({height:"100%",width:"100%",maxHeight:ce,maxWidth:ae},X.props.style)}:{})):X})},[n,g,l,m,f,c,I,o]);return U.createElement("div",{id:x?"".concat(x):void 0,className:bt("recharts-responsive-container",S),style:mm(mm({},j),{},{width:o,height:l,minWidth:c,minHeight:f,maxHeight:m}),ref:_},$)}),gp=function(e){return null};gp.displayName="Cell";function ph(t){"@babel/helpers - typeof";return ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ph(t)}function H2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H2(Object(n),!0).forEach(function(r){Vae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vae(t,e,n){return e=Bae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bae(t){var e=Uae(t,"string");return ph(e)=="symbol"?e:e+""}function Uae(t,e){if(ph(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ph(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _u={widthCache:{},cacheCount:0},Wae=2e3,qae={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},G2="recharts_measurement_span";function Kae(t){var e=Nw({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var Od=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||eu.isSsr)return{width:0,height:0};var r=Kae(n),i=JSON.stringify({text:e,copyStyle:r});if(_u.widthCache[i])return _u.widthCache[i];try{var a=document.getElementById(G2);a||(a=document.createElement("span"),a.setAttribute("id",G2),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var o=Nw(Nw({},qae),r);Object.assign(a.style,o),a.textContent="".concat(e);var s=a.getBoundingClientRect(),l={width:s.width,height:s.height};return _u.widthCache[i]=l,++_u.cacheCount>Wae&&(_u.cacheCount=0,_u.widthCache={}),l}catch{return{width:0,height:0}}},Hae=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function mh(t){"@babel/helpers - typeof";return mh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mh(t)}function ey(t,e){return Qae(t)||Xae(t,e)||Yae(t,e)||Gae()}function Gae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yae(t,e){if(t){if(typeof t=="string")return Y2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y2(t,e)}}function Y2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Xae(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function Qae(t){if(Array.isArray(t))return t}function Jae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function X2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,eoe(r.key),r)}}function Zae(t,e,n){return e&&X2(t.prototype,e),n&&X2(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function eoe(t){var e=toe(t,"string");return mh(e)=="symbol"?e:e+""}function toe(t,e){if(mh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(mh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Q2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,J2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,noe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,roe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,n$={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},ioe=Object.keys(n$),Uu="NaN";function aoe(t,e){return t*n$[e]}var gm=function(){function t(e,n){Jae(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!noe.test(n)&&(this.num=NaN,this.unit=""),ioe.includes(n)&&(this.num=aoe(e,n),this.unit="px")}return Zae(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=roe.exec(n))!==null&&r!==void 0?r:[],a=ey(i,3),o=a[1],s=a[2];return new t(parseFloat(o),s??"")}}])}();function r$(t){if(t.includes(Uu))return Uu;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=Q2.exec(e))!==null&&n!==void 0?n:[],i=ey(r,4),a=i[1],o=i[2],s=i[3],l=gm.parse(a??""),u=gm.parse(s??""),c=o==="*"?l.multiply(u):l.divide(u);if(c.isNaN())return Uu;e=e.replace(Q2,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,m=(f=J2.exec(e))!==null&&f!==void 0?f:[],g=ey(m,4),b=g[1],v=g[2],x=g[3],S=gm.parse(b??""),E=gm.parse(x??""),T=v==="+"?S.add(E):S.subtract(E);if(T.isNaN())return Uu;e=e.replace(J2,T.toString())}return e}var Z2=/\(([^()]*)\)/;function ooe(t){for(var e=t;e.includes("(");){var n=Z2.exec(e),r=ey(n,2),i=r[1];e=e.replace(Z2,r$(i))}return e}function soe(t){var e=t.replace(/\s+/g,"");return e=ooe(e),e=r$(e),e}function loe(t){try{return soe(t)}catch{return Uu}}function wb(t){var e=loe(t.slice(5,-1));return e===Uu?"":e}var uoe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],coe=["dx","dy","angle","className","breakAll"];function Dw(){return Dw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dw.apply(this,arguments)}function eO(t,e){if(t==null)return{};var n=foe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function foe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function tO(t,e){return moe(t)||poe(t,e)||hoe(t,e)||doe()}function doe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hoe(t,e){if(t){if(typeof t=="string")return nO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nO(t,e)}}function nO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function poe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function moe(t){if(Array.isArray(t))return t}var i$=/[ \f\n\r\t\v\u2028\u2029]+/,a$=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var a=[];ft(n)||(r?a=n.toString().split(""):a=n.toString().split(i$));var o=a.map(function(l){return{word:l,width:Od(l,i).width}}),s=r?0:Od(" ",i).width;return{wordsWithComputedWidth:o,spaceWidth:s}}catch{return null}},goe=function(e,n,r,i,a){var o=e.maxLines,s=e.children,l=e.style,u=e.breakAll,c=ke(o),f=s,m=function(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return ae.reduce(function(ce,me){var X=me.word,ie=me.width,ge=ce[ce.length-1];if(ge&&(i==null||a||ge.width+ie+r<Number(i)))ge.words.push(X),ge.width+=ie+r;else{var Te={words:[X],width:ie};ce.push(Te)}return ce},[])},g=m(n),b=function(ae){return ae.reduce(function(ce,me){return ce.width>me.width?ce:me})};if(!c)return g;for(var v="…",x=function(ae){var ce=f.slice(0,ae),me=a$({breakAll:u,style:l,children:ce+v}).wordsWithComputedWidth,X=m(me),ie=X.length>o||b(X).width>Number(i);return[ie,X]},S=0,E=f.length-1,T=0,j;S<=E&&T<=f.length-1;){var _=Math.floor((S+E)/2),P=_-1,w=x(P),O=tO(w,2),I=O[0],R=O[1],D=x(_),$=tO(D,1),L=$[0];if(!I&&!L&&(S=_+1),I&&L&&(E=_-1),!I&&L){j=R;break}T++}return j||g},rO=function(e){var n=ft(e)?[]:e.toString().split(i$);return[{words:n}]},yoe=function(e){var n=e.width,r=e.scaleToFit,i=e.children,a=e.style,o=e.breakAll,s=e.maxLines;if((n||r)&&!eu.isSsr){var l,u,c=a$({breakAll:o,children:i,style:a});if(c){var f=c.wordsWithComputedWidth,m=c.spaceWidth;l=f,u=m}else return rO(i);return goe({breakAll:o,children:i,maxLines:s,style:a},l,u,n,r)}return rO(i)},iO="#808080",ty=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,o=e.lineHeight,s=o===void 0?"1em":o,l=e.capHeight,u=l===void 0?"0.71em":l,c=e.scaleToFit,f=c===void 0?!1:c,m=e.textAnchor,g=m===void 0?"start":m,b=e.verticalAnchor,v=b===void 0?"end":b,x=e.fill,S=x===void 0?iO:x,E=eO(e,uoe),T=z.useMemo(function(){return yoe({breakAll:E.breakAll,children:E.children,maxLines:E.maxLines,scaleToFit:f,style:E.style,width:E.width})},[E.breakAll,E.children,E.maxLines,f,E.style,E.width]),j=E.dx,_=E.dy,P=E.angle,w=E.className,O=E.breakAll,I=eO(E,coe);if(!Rn(r)||!Rn(a))return null;var R=r+(ke(j)?j:0),D=a+(ke(_)?_:0),$;switch(v){case"start":$=wb("calc(".concat(u,")"));break;case"middle":$=wb("calc(".concat((T.length-1)/2," * -").concat(s," + (").concat(u," / 2))"));break;default:$=wb("calc(".concat(T.length-1," * -").concat(s,")"));break}var L=[];if(f){var ne=T[0].width,ae=E.width;L.push("scale(".concat((ke(ae)?ae/ne:1)/ne,")"))}return P&&L.push("rotate(".concat(P,", ").concat(R,", ").concat(D,")")),L.length&&(I.transform=L.join(" ")),U.createElement("text",Dw({},st(I,!0),{x:R,y:D,className:bt("recharts-text",w),textAnchor:g,fill:S.includes("url")?iO:S}),T.map(function(ce,me){var X=ce.words.join(O?"":" ");return U.createElement("tspan",{x:R,dy:me===0?$:s,key:"".concat(X,"-").concat(me)},X)}))};function ws(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function voe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function XS(t){let e,n,r;t.length!==2?(e=ws,n=(s,l)=>ws(t(s),l),r=(s,l)=>t(s)-l):(e=t===ws||t===voe?t:boe,n=t,r=t);function i(s,l,u=0,c=s.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;n(s[f],l)<0?u=f+1:c=f}while(u<c)}return u}function a(s,l,u=0,c=s.length){if(u<c){if(e(l,l)!==0)return c;do{const f=u+c>>>1;n(s[f],l)<=0?u=f+1:c=f}while(u<c)}return u}function o(s,l,u=0,c=s.length){const f=i(s,l,u,c-1);return f>u&&r(s[f-1],l)>-r(s[f],l)?f-1:f}return{left:i,center:o,right:a}}function boe(){return 0}function o$(t){return t===null?NaN:+t}function*xoe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const woe=XS(ws),yp=woe.right;XS(o$).center;class aO extends Map{constructor(e,n=Eoe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(oO(this,e))}has(e){return super.has(oO(this,e))}set(e,n){return super.set(_oe(this,e),n)}delete(e){return super.delete(Soe(this,e))}}function oO({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function _oe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Soe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Eoe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Aoe(t=ws){if(t===ws)return s$;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function s$(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Toe=Math.sqrt(50),Poe=Math.sqrt(10),Ooe=Math.sqrt(2);function ny(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=Toe?10:a>=Poe?5:a>=Ooe?2:1;let s,l,u;return i<0?(u=Math.pow(10,-i)/o,s=Math.round(t*u),l=Math.round(e*u),s/u<t&&++s,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*o,s=Math.round(t/u),l=Math.round(e/u),s*u<t&&++s,l*u>e&&--l),l<s&&.5<=n&&n<2?ny(t,e,n*2):[s,l,u]}function Mw(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,o]=r?ny(e,t,n):ny(t,e,n);if(!(a>=i))return[];const s=a-i+1,l=new Array(s);if(r)if(o<0)for(let u=0;u<s;++u)l[u]=(a-u)/-o;else for(let u=0;u<s;++u)l[u]=(a-u)*o;else if(o<0)for(let u=0;u<s;++u)l[u]=(i+u)/-o;else for(let u=0;u<s;++u)l[u]=(i+u)*o;return l}function Rw(t,e,n){return e=+e,t=+t,n=+n,ny(t,e,n)[2]}function $w(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Rw(e,t,n):Rw(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function sO(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function lO(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function l$(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?s$:Aoe(i);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,c=Math.log(l),f=.5*Math.exp(2*c/3),m=.5*Math.sqrt(c*f*(l-f)/l)*(u-l/2<0?-1:1),g=Math.max(n,Math.floor(e-u*f/l+m)),b=Math.min(r,Math.floor(e+(l-u)*f/l+m));l$(t,e,g,b,i)}const a=t[e];let o=n,s=r;for(Hf(t,n,e),i(t[r],a)>0&&Hf(t,n,r);o<s;){for(Hf(t,o,s),++o,--s;i(t[o],a)<0;)++o;for(;i(t[s],a)>0;)--s}i(t[n],a)===0?Hf(t,n,s):(++s,Hf(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function Hf(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function koe(t,e,n){if(t=Float64Array.from(xoe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return lO(t);if(e>=1)return sO(t);var r,i=(r-1)*e,a=Math.floor(i),o=sO(l$(t,a).subarray(0,a+1)),s=lO(t.subarray(a+1));return o+(s-o)*(i-a)}}function Coe(t,e,n=o$){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t),s=+n(t[a+1],a+1,t);return o+(s-o)*(i-a)}}function Ioe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Fi(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ro(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Lw=Symbol("implicit");function QS(){var t=new aO,e=[],n=[],r=Lw;function i(a){let o=t.get(a);if(o===void 0){if(r!==Lw)return r;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new aO;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return QS(e,n).unknown(r)},Fi.apply(i,arguments),i}function gh(){var t=QS().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,o,s=!1,l=0,u=0,c=.5;delete t.unknown;function f(){var m=e().length,g=i<r,b=g?i:r,v=g?r:i;a=(v-b)/Math.max(1,m-l+u*2),s&&(a=Math.floor(a)),b+=(v-b-a*(m-l))*c,o=a*(1-l),s&&(b=Math.round(b),o=Math.round(o));var x=Ioe(m).map(function(S){return b+a*S});return n(g?x.reverse():x)}return t.domain=function(m){return arguments.length?(e(m),f()):e()},t.range=function(m){return arguments.length?([r,i]=m,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(m){return[r,i]=m,r=+r,i=+i,s=!0,f()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(m){return arguments.length?(s=!!m,f()):s},t.padding=function(m){return arguments.length?(l=Math.min(1,u=+m),f()):l},t.paddingInner=function(m){return arguments.length?(l=Math.min(1,m),f()):l},t.paddingOuter=function(m){return arguments.length?(u=+m,f()):u},t.align=function(m){return arguments.length?(c=Math.max(0,Math.min(1,m)),f()):c},t.copy=function(){return gh(e(),[r,i]).round(s).paddingInner(l).paddingOuter(u).align(c)},Fi.apply(f(),arguments)}function u$(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return u$(e())},t}function kd(){return u$(gh.apply(null,arguments).paddingInner(1))}function JS(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function c$(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function vp(){}var yh=.7,ry=1/yh,rc="\\s*([+-]?\\d+)\\s*",vh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",joe=/^#([0-9a-f]{3,8})$/,Noe=new RegExp(`^rgb\\(${rc},${rc},${rc}\\)$`),Doe=new RegExp(`^rgb\\(${Fa},${Fa},${Fa}\\)$`),Moe=new RegExp(`^rgba\\(${rc},${rc},${rc},${vh}\\)$`),Roe=new RegExp(`^rgba\\(${Fa},${Fa},${Fa},${vh}\\)$`),$oe=new RegExp(`^hsl\\(${vh},${Fa},${Fa}\\)$`),Loe=new RegExp(`^hsla\\(${vh},${Fa},${Fa},${vh}\\)$`),uO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};JS(vp,bh,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:cO,formatHex:cO,formatHex8:Foe,formatHsl:zoe,formatRgb:fO,toString:fO});function cO(){return this.rgb().formatHex()}function Foe(){return this.rgb().formatHex8()}function zoe(){return f$(this).formatHsl()}function fO(){return this.rgb().formatRgb()}function bh(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=joe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?dO(e):n===3?new Ur(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ym(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ym(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Noe.exec(t))?new Ur(e[1],e[2],e[3],1):(e=Doe.exec(t))?new Ur(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Moe.exec(t))?ym(e[1],e[2],e[3],e[4]):(e=Roe.exec(t))?ym(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=$oe.exec(t))?mO(e[1],e[2]/100,e[3]/100,1):(e=Loe.exec(t))?mO(e[1],e[2]/100,e[3]/100,e[4]):uO.hasOwnProperty(t)?dO(uO[t]):t==="transparent"?new Ur(NaN,NaN,NaN,0):null}function dO(t){return new Ur(t>>16&255,t>>8&255,t&255,1)}function ym(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ur(t,e,n,r)}function Voe(t){return t instanceof vp||(t=bh(t)),t?(t=t.rgb(),new Ur(t.r,t.g,t.b,t.opacity)):new Ur}function Fw(t,e,n,r){return arguments.length===1?Voe(t):new Ur(t,e,n,r??1)}function Ur(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}JS(Ur,Fw,c$(vp,{brighter(t){return t=t==null?ry:Math.pow(ry,t),new Ur(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?yh:Math.pow(yh,t),new Ur(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ur(Il(this.r),Il(this.g),Il(this.b),iy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:hO,formatHex:hO,formatHex8:Boe,formatRgb:pO,toString:pO}));function hO(){return`#${_l(this.r)}${_l(this.g)}${_l(this.b)}`}function Boe(){return`#${_l(this.r)}${_l(this.g)}${_l(this.b)}${_l((isNaN(this.opacity)?1:this.opacity)*255)}`}function pO(){const t=iy(this.opacity);return`${t===1?"rgb(":"rgba("}${Il(this.r)}, ${Il(this.g)}, ${Il(this.b)}${t===1?")":`, ${t})`}`}function iy(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Il(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function _l(t){return t=Il(t),(t<16?"0":"")+t.toString(16)}function mO(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new aa(t,e,n,r)}function f$(t){if(t instanceof aa)return new aa(t.h,t.s,t.l,t.opacity);if(t instanceof vp||(t=bh(t)),!t)return new aa;if(t instanceof aa)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(e===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-e)/s+2:o=(e-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new aa(o,s,l,t.opacity)}function Uoe(t,e,n,r){return arguments.length===1?f$(t):new aa(t,e,n,r??1)}function aa(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}JS(aa,Uoe,c$(vp,{brighter(t){return t=t==null?ry:Math.pow(ry,t),new aa(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?yh:Math.pow(yh,t),new aa(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ur(_b(t>=240?t-240:t+120,i,r),_b(t,i,r),_b(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new aa(gO(this.h),vm(this.s),vm(this.l),iy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=iy(this.opacity);return`${t===1?"hsl(":"hsla("}${gO(this.h)}, ${vm(this.s)*100}%, ${vm(this.l)*100}%${t===1?")":`, ${t})`}`}}));function gO(t){return t=(t||0)%360,t<0?t+360:t}function vm(t){return Math.max(0,Math.min(1,t||0))}function _b(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const ZS=t=>()=>t;function Woe(t,e){return function(n){return t+n*e}}function qoe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Koe(t){return(t=+t)==1?d$:function(e,n){return n-e?qoe(e,n,t):ZS(isNaN(e)?n:e)}}function d$(t,e){var n=e-t;return n?Woe(t,n):ZS(isNaN(t)?e:t)}const yO=function t(e){var n=Koe(e);function r(i,a){var o=n((i=Fw(i)).r,(a=Fw(a)).r),s=n(i.g,a.g),l=n(i.b,a.b),u=d$(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=s(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=t,r}(1);function Hoe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function Goe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Yoe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=yf(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function Xoe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function ay(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Qoe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=yf(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var zw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Sb=new RegExp(zw.source,"g");function Joe(t){return function(){return t}}function Zoe(t){return function(e){return t(e)+""}}function ese(t,e){var n=zw.lastIndex=Sb.lastIndex=0,r,i,a,o=-1,s=[],l=[];for(t=t+"",e=e+"";(r=zw.exec(t))&&(i=Sb.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:ay(r,i)})),n=Sb.lastIndex;return n<e.length&&(a=e.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?Zoe(l[0].x):Joe(e):(e=l.length,function(u){for(var c=0,f;c<e;++c)s[(f=l[c]).i]=f.x(u);return s.join("")})}function yf(t,e){var n=typeof e,r;return e==null||n==="boolean"?ZS(e):(n==="number"?ay:n==="string"?(r=bh(e))?(e=r,yO):ese:e instanceof bh?yO:e instanceof Date?Xoe:Goe(e)?Hoe:Array.isArray(e)?Yoe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Qoe:ay)(t,e)}function eE(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function tse(t,e){e===void 0&&(e=t,t=yf);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(o){var s=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[s](o-s)}}function nse(t){return function(){return t}}function oy(t){return+t}var vO=[0,1];function Ar(t){return t}function Vw(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:nse(isNaN(e)?NaN:.5)}function rse(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function ise(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=Vw(i,r),a=n(o,a)):(r=Vw(r,i),a=n(a,o)),function(s){return a(r(s))}}function ase(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=Vw(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(s){var l=yp(t,s,1,r)-1;return a[l](i[l](s))}}function bp(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Hv(){var t=vO,e=vO,n=yf,r,i,a,o=Ar,s,l,u;function c(){var m=Math.min(t.length,e.length);return o!==Ar&&(o=rse(t[0],t[m-1])),s=m>2?ase:ise,l=u=null,f}function f(m){return m==null||isNaN(m=+m)?a:(l||(l=s(t.map(r),e,n)))(r(o(m)))}return f.invert=function(m){return o(i((u||(u=s(e,t.map(r),ay)))(m)))},f.domain=function(m){return arguments.length?(t=Array.from(m,oy),c()):t.slice()},f.range=function(m){return arguments.length?(e=Array.from(m),c()):e.slice()},f.rangeRound=function(m){return e=Array.from(m),n=eE,c()},f.clamp=function(m){return arguments.length?(o=m?!0:Ar,c()):o!==Ar},f.interpolate=function(m){return arguments.length?(n=m,c()):n},f.unknown=function(m){return arguments.length?(a=m,f):a},function(m,g){return r=m,i=g,c()}}function tE(){return Hv()(Ar,Ar)}function ose(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function sy(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Oc(t){return t=sy(Math.abs(t)),t?t[1]:NaN}function sse(t,e){return function(n,r){for(var i=n.length,a=[],o=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function lse(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var use=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function xh(t){if(!(e=use.exec(t)))throw new Error("invalid format: "+t);var e;return new nE({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}xh.prototype=nE.prototype;function nE(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}nE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function cse(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var h$;function fse(t,e){var n=sy(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(h$=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+sy(t,Math.max(0,e+a-1))[0]}function bO(t,e){var n=sy(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const xO={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:ose,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>bO(t*100,e),r:bO,s:fse,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function wO(t){return t}var _O=Array.prototype.map,SO=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function dse(t){var e=t.grouping===void 0||t.thousands===void 0?wO:sse(_O.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?wO:lse(_O.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(f){f=xh(f);var m=f.fill,g=f.align,b=f.sign,v=f.symbol,x=f.zero,S=f.width,E=f.comma,T=f.precision,j=f.trim,_=f.type;_==="n"?(E=!0,_="g"):xO[_]||(T===void 0&&(T=12),j=!0,_="g"),(x||m==="0"&&g==="=")&&(x=!0,m="0",g="=");var P=v==="$"?n:v==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",w=v==="$"?r:/[%p]/.test(_)?o:"",O=xO[_],I=/[defgprs%]/.test(_);T=T===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function R(D){var $=P,L=w,ne,ae,ce;if(_==="c")L=O(D)+L,D="";else{D=+D;var me=D<0||1/D<0;if(D=isNaN(D)?l:O(Math.abs(D),T),j&&(D=cse(D)),me&&+D==0&&b!=="+"&&(me=!1),$=(me?b==="("?b:s:b==="-"||b==="("?"":b)+$,L=(_==="s"?SO[8+h$/3]:"")+L+(me&&b==="("?")":""),I){for(ne=-1,ae=D.length;++ne<ae;)if(ce=D.charCodeAt(ne),48>ce||ce>57){L=(ce===46?i+D.slice(ne+1):D.slice(ne))+L,D=D.slice(0,ne);break}}}E&&!x&&(D=e(D,1/0));var X=$.length+D.length+L.length,ie=X<S?new Array(S-X+1).join(m):"";switch(E&&x&&(D=e(ie+D,ie.length?S-L.length:1/0),ie=""),g){case"<":D=$+D+L+ie;break;case"=":D=$+ie+D+L;break;case"^":D=ie.slice(0,X=ie.length>>1)+$+D+L+ie.slice(X);break;default:D=ie+$+D+L;break}return a(D)}return R.toString=function(){return f+""},R}function c(f,m){var g=u((f=xh(f),f.type="f",f)),b=Math.max(-8,Math.min(8,Math.floor(Oc(m)/3)))*3,v=Math.pow(10,-b),x=SO[8+b/3];return function(S){return g(v*S)+x}}return{format:u,formatPrefix:c}}var bm,rE,p$;hse({thousands:",",grouping:[3],currency:["$",""]});function hse(t){return bm=dse(t),rE=bm.format,p$=bm.formatPrefix,bm}function pse(t){return Math.max(0,-Oc(Math.abs(t)))}function mse(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Oc(e)/3)))*3-Oc(Math.abs(t)))}function gse(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Oc(e)-Oc(t))+1}function m$(t,e,n,r){var i=$w(t,e,n),a;switch(r=xh(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=mse(i,o))&&(r.precision=a),p$(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=gse(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=pse(i))&&(r.precision=a-(r.type==="%")*2);break}}return rE(r)}function Fs(t){var e=t.domain;return t.ticks=function(n){var r=e();return Mw(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return m$(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,o=r[i],s=r[a],l,u,c=10;for(s<o&&(u=o,o=s,s=u,u=i,i=a,a=u);c-- >0;){if(u=Rw(o,s,n),u===l)return r[i]=o,r[a]=s,e(r);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;l=u}return t},t}function ly(){var t=tE();return t.copy=function(){return bp(t,ly())},Fi.apply(t,arguments),Fs(t)}function g$(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,oy),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return g$(t).unknown(e)},t=arguments.length?Array.from(t,oy):[0,1],Fs(n)}function y$(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),t[n]=e.floor(i),t[r]=e.ceil(a),t}function EO(t){return Math.log(t)}function AO(t){return Math.exp(t)}function yse(t){return-Math.log(-t)}function vse(t){return-Math.exp(-t)}function bse(t){return isFinite(t)?+("1e"+t):t<0?0:t}function xse(t){return t===10?bse:t===Math.E?Math.exp:e=>Math.pow(t,e)}function wse(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function TO(t){return(e,n)=>-t(-e,n)}function iE(t){const e=t(EO,AO),n=e.domain;let r=10,i,a;function o(){return i=wse(r),a=xse(r),n()[0]<0?(i=TO(i),a=TO(a),t(yse,vse)):t(EO,AO),e}return e.base=function(s){return arguments.length?(r=+s,o()):r},e.domain=function(s){return arguments.length?(n(s),o()):n()},e.ticks=s=>{const l=n();let u=l[0],c=l[l.length-1];const f=c<u;f&&([u,c]=[c,u]);let m=i(u),g=i(c),b,v;const x=s==null?10:+s;let S=[];if(!(r%1)&&g-m<x){if(m=Math.floor(m),g=Math.ceil(g),u>0){for(;m<=g;++m)for(b=1;b<r;++b)if(v=m<0?b/a(-m):b*a(m),!(v<u)){if(v>c)break;S.push(v)}}else for(;m<=g;++m)for(b=r-1;b>=1;--b)if(v=m>0?b/a(-m):b*a(m),!(v<u)){if(v>c)break;S.push(v)}S.length*2<x&&(S=Mw(u,c,x))}else S=Mw(m,g,Math.min(g-m,x)).map(a);return f?S.reverse():S},e.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=xh(l)).precision==null&&(l.trim=!0),l=rE(l)),s===1/0)return l;const u=Math.max(1,r*s/e.ticks().length);return c=>{let f=c/a(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=u?l(c):""}},e.nice=()=>n(y$(n(),{floor:s=>a(Math.floor(i(s))),ceil:s=>a(Math.ceil(i(s)))})),e}function v$(){const t=iE(Hv()).domain([1,10]);return t.copy=()=>bp(t,v$()).base(t.base()),Fi.apply(t,arguments),t}function PO(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function OO(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function aE(t){var e=1,n=t(PO(e),OO(e));return n.constant=function(r){return arguments.length?t(PO(e=+r),OO(e)):e},Fs(n)}function b$(){var t=aE(Hv());return t.copy=function(){return bp(t,b$()).constant(t.constant())},Fi.apply(t,arguments)}function kO(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function _se(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Sse(t){return t<0?-t*t:t*t}function oE(t){var e=t(Ar,Ar),n=1;function r(){return n===1?t(Ar,Ar):n===.5?t(_se,Sse):t(kO(n),kO(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Fs(e)}function sE(){var t=oE(Hv());return t.copy=function(){return bp(t,sE()).exponent(t.exponent())},Fi.apply(t,arguments),t}function Ese(){return sE.apply(null,arguments).exponent(.5)}function CO(t){return Math.sign(t)*t*t}function Ase(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function x$(){var t=tE(),e=[0,1],n=!1,r;function i(a){var o=Ase(t(a));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(a){return t.invert(CO(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,oy)).map(CO)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return x$(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Fi.apply(i,arguments),Fs(i)}function w$(){var t=[],e=[],n=[],r;function i(){var o=0,s=Math.max(1,e.length);for(n=new Array(s-1);++o<s;)n[o-1]=Coe(t,o/s);return a}function a(o){return o==null||isNaN(o=+o)?r:e[yp(n,o)]}return a.invertExtent=function(o){var s=e.indexOf(o);return s<0?[NaN,NaN]:[s>0?n[s-1]:t[0],s<n.length?n[s]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let s of o)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(ws),i()},a.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return w$().domain(t).range(e).unknown(r)},Fi.apply(a,arguments)}function _$(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function o(l){return l!=null&&l<=l?i[yp(r,l,0,n)]:a}function s(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,s()):[t,e]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,s()):i.slice()},o.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},o.unknown=function(l){return arguments.length&&(a=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return _$().domain([t,e]).range(i).unknown(a)},Fi.apply(Fs(o),arguments)}function S$(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[yp(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return S$().domain(t).range(e).unknown(n)},Fi.apply(i,arguments)}const Eb=new Date,Ab=new Date;function Fn(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,s)=>{const l=[];if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return l;let u;do l.push(u=new Date(+a)),e(a,s),t(a);while(u<a&&a<o);return l},i.filter=a=>Fn(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;e(o,-1),!a(o););else for(;--s>=0;)for(;e(o,1),!a(o););}),n&&(i.count=(a,o)=>(Eb.setTime(+a),Ab.setTime(+o),t(Eb),t(Ab),Math.floor(n(Eb,Ab))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const uy=Fn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);uy.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Fn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):uy);uy.range;const fo=1e3,Ii=fo*60,ho=Ii*60,ko=ho*24,lE=ko*7,IO=ko*30,Tb=ko*365,Sl=Fn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*fo)},(t,e)=>(e-t)/fo,t=>t.getUTCSeconds());Sl.range;const uE=Fn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*fo)},(t,e)=>{t.setTime(+t+e*Ii)},(t,e)=>(e-t)/Ii,t=>t.getMinutes());uE.range;const cE=Fn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ii)},(t,e)=>(e-t)/Ii,t=>t.getUTCMinutes());cE.range;const fE=Fn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*fo-t.getMinutes()*Ii)},(t,e)=>{t.setTime(+t+e*ho)},(t,e)=>(e-t)/ho,t=>t.getHours());fE.range;const dE=Fn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*ho)},(t,e)=>(e-t)/ho,t=>t.getUTCHours());dE.range;const xp=Fn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ii)/ko,t=>t.getDate()-1);xp.range;const Gv=Fn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ko,t=>t.getUTCDate()-1);Gv.range;const E$=Fn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ko,t=>Math.floor(t/ko));E$.range;function tu(t){return Fn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ii)/lE)}const Yv=tu(0),cy=tu(1),Tse=tu(2),Pse=tu(3),kc=tu(4),Ose=tu(5),kse=tu(6);Yv.range;cy.range;Tse.range;Pse.range;kc.range;Ose.range;kse.range;function nu(t){return Fn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/lE)}const Xv=nu(0),fy=nu(1),Cse=nu(2),Ise=nu(3),Cc=nu(4),jse=nu(5),Nse=nu(6);Xv.range;fy.range;Cse.range;Ise.range;Cc.range;jse.range;Nse.range;const hE=Fn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());hE.range;const pE=Fn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());pE.range;const Co=Fn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Co.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Fn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Co.range;const Io=Fn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Io.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Fn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Io.range;function A$(t,e,n,r,i,a){const o=[[Sl,1,fo],[Sl,5,5*fo],[Sl,15,15*fo],[Sl,30,30*fo],[a,1,Ii],[a,5,5*Ii],[a,15,15*Ii],[a,30,30*Ii],[i,1,ho],[i,3,3*ho],[i,6,6*ho],[i,12,12*ho],[r,1,ko],[r,2,2*ko],[n,1,lE],[e,1,IO],[e,3,3*IO],[t,1,Tb]];function s(u,c,f){const m=c<u;m&&([u,c]=[c,u]);const g=f&&typeof f.range=="function"?f:l(u,c,f),b=g?g.range(u,+c+1):[];return m?b.reverse():b}function l(u,c,f){const m=Math.abs(c-u)/f,g=XS(([,,x])=>x).right(o,m);if(g===o.length)return t.every($w(u/Tb,c/Tb,f));if(g===0)return uy.every(Math.max($w(u,c,f),1));const[b,v]=o[m/o[g-1][2]<o[g][2]/m?g-1:g];return b.every(v)}return[s,l]}const[Dse,Mse]=A$(Io,pE,Xv,E$,dE,cE),[Rse,$se]=A$(Co,hE,Yv,xp,fE,uE);function Pb(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Ob(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Gf(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Lse(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,l=t.shortMonths,u=Yf(i),c=Xf(i),f=Yf(a),m=Xf(a),g=Yf(o),b=Xf(o),v=Yf(s),x=Xf(s),S=Yf(l),E=Xf(l),T={a:me,A:X,b:ie,B:ge,c:null,d:$O,e:$O,f:sle,g:yle,G:ble,H:ile,I:ale,j:ole,L:T$,m:lle,M:ule,p:Te,q:be,Q:zO,s:VO,S:cle,u:fle,U:dle,V:hle,w:ple,W:mle,x:null,X:null,y:gle,Y:vle,Z:xle,"%":FO},j={a:he,A:Se,b:Ve,B:We,c:null,d:LO,e:LO,f:Ele,g:Dle,G:Rle,H:wle,I:_le,j:Sle,L:O$,m:Ale,M:Tle,p:we,q:Be,Q:zO,s:VO,S:Ple,u:Ole,U:kle,V:Cle,w:Ile,W:jle,x:null,X:null,y:Nle,Y:Mle,Z:$le,"%":FO},_={a:R,A:D,b:$,B:L,c:ne,d:MO,e:MO,f:ele,g:DO,G:NO,H:RO,I:RO,j:Xse,L:Zse,m:Yse,M:Qse,p:I,q:Gse,Q:nle,s:rle,S:Jse,u:Use,U:Wse,V:qse,w:Bse,W:Kse,x:ae,X:ce,y:DO,Y:NO,Z:Hse,"%":tle};T.x=P(n,T),T.X=P(r,T),T.c=P(e,T),j.x=P(n,j),j.X=P(r,j),j.c=P(e,j);function P(te,$e){return function(Ue){var se=[],ut=-1,Ee=0,ct=te.length,yt,Ut,Gn;for(Ue instanceof Date||(Ue=new Date(+Ue));++ut<ct;)te.charCodeAt(ut)===37&&(se.push(te.slice(Ee,ut)),(Ut=jO[yt=te.charAt(++ut)])!=null?yt=te.charAt(++ut):Ut=yt==="e"?" ":"0",(Gn=$e[yt])&&(yt=Gn(Ue,Ut)),se.push(yt),Ee=ut+1);return se.push(te.slice(Ee,ut)),se.join("")}}function w(te,$e){return function(Ue){var se=Gf(1900,void 0,1),ut=O(se,te,Ue+="",0),Ee,ct;if(ut!=Ue.length)return null;if("Q"in se)return new Date(se.Q);if("s"in se)return new Date(se.s*1e3+("L"in se?se.L:0));if($e&&!("Z"in se)&&(se.Z=0),"p"in se&&(se.H=se.H%12+se.p*12),se.m===void 0&&(se.m="q"in se?se.q:0),"V"in se){if(se.V<1||se.V>53)return null;"w"in se||(se.w=1),"Z"in se?(Ee=Ob(Gf(se.y,0,1)),ct=Ee.getUTCDay(),Ee=ct>4||ct===0?fy.ceil(Ee):fy(Ee),Ee=Gv.offset(Ee,(se.V-1)*7),se.y=Ee.getUTCFullYear(),se.m=Ee.getUTCMonth(),se.d=Ee.getUTCDate()+(se.w+6)%7):(Ee=Pb(Gf(se.y,0,1)),ct=Ee.getDay(),Ee=ct>4||ct===0?cy.ceil(Ee):cy(Ee),Ee=xp.offset(Ee,(se.V-1)*7),se.y=Ee.getFullYear(),se.m=Ee.getMonth(),se.d=Ee.getDate()+(se.w+6)%7)}else("W"in se||"U"in se)&&("w"in se||(se.w="u"in se?se.u%7:"W"in se?1:0),ct="Z"in se?Ob(Gf(se.y,0,1)).getUTCDay():Pb(Gf(se.y,0,1)).getDay(),se.m=0,se.d="W"in se?(se.w+6)%7+se.W*7-(ct+5)%7:se.w+se.U*7-(ct+6)%7);return"Z"in se?(se.H+=se.Z/100|0,se.M+=se.Z%100,Ob(se)):Pb(se)}}function O(te,$e,Ue,se){for(var ut=0,Ee=$e.length,ct=Ue.length,yt,Ut;ut<Ee;){if(se>=ct)return-1;if(yt=$e.charCodeAt(ut++),yt===37){if(yt=$e.charAt(ut++),Ut=_[yt in jO?$e.charAt(ut++):yt],!Ut||(se=Ut(te,Ue,se))<0)return-1}else if(yt!=Ue.charCodeAt(se++))return-1}return se}function I(te,$e,Ue){var se=u.exec($e.slice(Ue));return se?(te.p=c.get(se[0].toLowerCase()),Ue+se[0].length):-1}function R(te,$e,Ue){var se=g.exec($e.slice(Ue));return se?(te.w=b.get(se[0].toLowerCase()),Ue+se[0].length):-1}function D(te,$e,Ue){var se=f.exec($e.slice(Ue));return se?(te.w=m.get(se[0].toLowerCase()),Ue+se[0].length):-1}function $(te,$e,Ue){var se=S.exec($e.slice(Ue));return se?(te.m=E.get(se[0].toLowerCase()),Ue+se[0].length):-1}function L(te,$e,Ue){var se=v.exec($e.slice(Ue));return se?(te.m=x.get(se[0].toLowerCase()),Ue+se[0].length):-1}function ne(te,$e,Ue){return O(te,e,$e,Ue)}function ae(te,$e,Ue){return O(te,n,$e,Ue)}function ce(te,$e,Ue){return O(te,r,$e,Ue)}function me(te){return o[te.getDay()]}function X(te){return a[te.getDay()]}function ie(te){return l[te.getMonth()]}function ge(te){return s[te.getMonth()]}function Te(te){return i[+(te.getHours()>=12)]}function be(te){return 1+~~(te.getMonth()/3)}function he(te){return o[te.getUTCDay()]}function Se(te){return a[te.getUTCDay()]}function Ve(te){return l[te.getUTCMonth()]}function We(te){return s[te.getUTCMonth()]}function we(te){return i[+(te.getUTCHours()>=12)]}function Be(te){return 1+~~(te.getUTCMonth()/3)}return{format:function(te){var $e=P(te+="",T);return $e.toString=function(){return te},$e},parse:function(te){var $e=w(te+="",!1);return $e.toString=function(){return te},$e},utcFormat:function(te){var $e=P(te+="",j);return $e.toString=function(){return te},$e},utcParse:function(te){var $e=w(te+="",!0);return $e.toString=function(){return te},$e}}}var jO={"-":"",_:" ",0:"0"},Hn=/^\s*\d+/,Fse=/^%/,zse=/[\\^$*+?|[\]().{}]/g;function At(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Vse(t){return t.replace(zse,"\\$&")}function Yf(t){return new RegExp("^(?:"+t.map(Vse).join("|")+")","i")}function Xf(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Bse(t,e,n){var r=Hn.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Use(t,e,n){var r=Hn.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Wse(t,e,n){var r=Hn.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function qse(t,e,n){var r=Hn.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Kse(t,e,n){var r=Hn.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function NO(t,e,n){var r=Hn.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function DO(t,e,n){var r=Hn.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Hse(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Gse(t,e,n){var r=Hn.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Yse(t,e,n){var r=Hn.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function MO(t,e,n){var r=Hn.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Xse(t,e,n){var r=Hn.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function RO(t,e,n){var r=Hn.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Qse(t,e,n){var r=Hn.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Jse(t,e,n){var r=Hn.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Zse(t,e,n){var r=Hn.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function ele(t,e,n){var r=Hn.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function tle(t,e,n){var r=Fse.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function nle(t,e,n){var r=Hn.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function rle(t,e,n){var r=Hn.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function $O(t,e){return At(t.getDate(),e,2)}function ile(t,e){return At(t.getHours(),e,2)}function ale(t,e){return At(t.getHours()%12||12,e,2)}function ole(t,e){return At(1+xp.count(Co(t),t),e,3)}function T$(t,e){return At(t.getMilliseconds(),e,3)}function sle(t,e){return T$(t,e)+"000"}function lle(t,e){return At(t.getMonth()+1,e,2)}function ule(t,e){return At(t.getMinutes(),e,2)}function cle(t,e){return At(t.getSeconds(),e,2)}function fle(t){var e=t.getDay();return e===0?7:e}function dle(t,e){return At(Yv.count(Co(t)-1,t),e,2)}function P$(t){var e=t.getDay();return e>=4||e===0?kc(t):kc.ceil(t)}function hle(t,e){return t=P$(t),At(kc.count(Co(t),t)+(Co(t).getDay()===4),e,2)}function ple(t){return t.getDay()}function mle(t,e){return At(cy.count(Co(t)-1,t),e,2)}function gle(t,e){return At(t.getFullYear()%100,e,2)}function yle(t,e){return t=P$(t),At(t.getFullYear()%100,e,2)}function vle(t,e){return At(t.getFullYear()%1e4,e,4)}function ble(t,e){var n=t.getDay();return t=n>=4||n===0?kc(t):kc.ceil(t),At(t.getFullYear()%1e4,e,4)}function xle(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+At(e/60|0,"0",2)+At(e%60,"0",2)}function LO(t,e){return At(t.getUTCDate(),e,2)}function wle(t,e){return At(t.getUTCHours(),e,2)}function _le(t,e){return At(t.getUTCHours()%12||12,e,2)}function Sle(t,e){return At(1+Gv.count(Io(t),t),e,3)}function O$(t,e){return At(t.getUTCMilliseconds(),e,3)}function Ele(t,e){return O$(t,e)+"000"}function Ale(t,e){return At(t.getUTCMonth()+1,e,2)}function Tle(t,e){return At(t.getUTCMinutes(),e,2)}function Ple(t,e){return At(t.getUTCSeconds(),e,2)}function Ole(t){var e=t.getUTCDay();return e===0?7:e}function kle(t,e){return At(Xv.count(Io(t)-1,t),e,2)}function k$(t){var e=t.getUTCDay();return e>=4||e===0?Cc(t):Cc.ceil(t)}function Cle(t,e){return t=k$(t),At(Cc.count(Io(t),t)+(Io(t).getUTCDay()===4),e,2)}function Ile(t){return t.getUTCDay()}function jle(t,e){return At(fy.count(Io(t)-1,t),e,2)}function Nle(t,e){return At(t.getUTCFullYear()%100,e,2)}function Dle(t,e){return t=k$(t),At(t.getUTCFullYear()%100,e,2)}function Mle(t,e){return At(t.getUTCFullYear()%1e4,e,4)}function Rle(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Cc(t):Cc.ceil(t),At(t.getUTCFullYear()%1e4,e,4)}function $le(){return"+0000"}function FO(){return"%"}function zO(t){return+t}function VO(t){return Math.floor(+t/1e3)}var Su,C$,I$;Lle({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Lle(t){return Su=Lse(t),C$=Su.format,Su.parse,I$=Su.utcFormat,Su.utcParse,Su}function Fle(t){return new Date(t)}function zle(t){return t instanceof Date?+t:+new Date(+t)}function mE(t,e,n,r,i,a,o,s,l,u){var c=tE(),f=c.invert,m=c.domain,g=u(".%L"),b=u(":%S"),v=u("%I:%M"),x=u("%I %p"),S=u("%a %d"),E=u("%b %d"),T=u("%B"),j=u("%Y");function _(P){return(l(P)<P?g:s(P)<P?b:o(P)<P?v:a(P)<P?x:r(P)<P?i(P)<P?S:E:n(P)<P?T:j)(P)}return c.invert=function(P){return new Date(f(P))},c.domain=function(P){return arguments.length?m(Array.from(P,zle)):m().map(Fle)},c.ticks=function(P){var w=m();return t(w[0],w[w.length-1],P??10)},c.tickFormat=function(P,w){return w==null?_:u(w)},c.nice=function(P){var w=m();return(!P||typeof P.range!="function")&&(P=e(w[0],w[w.length-1],P??10)),P?m(y$(w,P)):c},c.copy=function(){return bp(c,mE(t,e,n,r,i,a,o,s,l,u))},c}function Vle(){return Fi.apply(mE(Rse,$se,Co,hE,Yv,xp,fE,uE,Sl,C$).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Ble(){return Fi.apply(mE(Dse,Mse,Io,pE,Xv,Gv,dE,cE,Sl,I$).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Qv(){var t=0,e=1,n,r,i,a,o=Ar,s=!1,l;function u(f){return f==null||isNaN(f=+f)?l:o(i===0?.5:(f=(a(f)-n)*i,s?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(f){return arguments.length?(s=!!f,u):s},u.interpolator=function(f){return arguments.length?(o=f,u):o};function c(f){return function(m){var g,b;return arguments.length?([g,b]=m,o=f(g,b),u):[o(0),o(1)]}}return u.range=c(yf),u.rangeRound=c(eE),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return a=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),u}}function zs(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function j$(){var t=Fs(Qv()(Ar));return t.copy=function(){return zs(t,j$())},Ro.apply(t,arguments)}function N$(){var t=iE(Qv()).domain([1,10]);return t.copy=function(){return zs(t,N$()).base(t.base())},Ro.apply(t,arguments)}function D$(){var t=aE(Qv());return t.copy=function(){return zs(t,D$()).constant(t.constant())},Ro.apply(t,arguments)}function gE(){var t=oE(Qv());return t.copy=function(){return zs(t,gE()).exponent(t.exponent())},Ro.apply(t,arguments)}function Ule(){return gE.apply(null,arguments).exponent(.5)}function M$(){var t=[],e=Ar;function n(r){if(r!=null&&!isNaN(r=+r))return e((yp(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(ws),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>koe(t,a/r))},n.copy=function(){return M$(e).domain(t)},Ro.apply(n,arguments)}function Jv(){var t=0,e=.5,n=1,r=1,i,a,o,s,l,u=Ar,c,f=!1,m;function g(v){return isNaN(v=+v)?m:(v=.5+((v=+c(v))-a)*(r*v<r*a?s:l),u(f?Math.max(0,Math.min(1,v)):v))}g.domain=function(v){return arguments.length?([t,e,n]=v,i=c(t=+t),a=c(e=+e),o=c(n=+n),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,g):[t,e,n]},g.clamp=function(v){return arguments.length?(f=!!v,g):f},g.interpolator=function(v){return arguments.length?(u=v,g):u};function b(v){return function(x){var S,E,T;return arguments.length?([S,E,T]=x,u=tse(v,[S,E,T]),g):[u(0),u(.5),u(1)]}}return g.range=b(yf),g.rangeRound=b(eE),g.unknown=function(v){return arguments.length?(m=v,g):m},function(v){return c=v,i=v(t),a=v(e),o=v(n),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,g}}function R$(){var t=Fs(Jv()(Ar));return t.copy=function(){return zs(t,R$())},Ro.apply(t,arguments)}function $$(){var t=iE(Jv()).domain([.1,1,10]);return t.copy=function(){return zs(t,$$()).base(t.base())},Ro.apply(t,arguments)}function L$(){var t=aE(Jv());return t.copy=function(){return zs(t,L$()).constant(t.constant())},Ro.apply(t,arguments)}function yE(){var t=oE(Jv());return t.copy=function(){return zs(t,yE()).exponent(t.exponent())},Ro.apply(t,arguments)}function Wle(){return yE.apply(null,arguments).exponent(.5)}const BO=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:gh,scaleDiverging:R$,scaleDivergingLog:$$,scaleDivergingPow:yE,scaleDivergingSqrt:Wle,scaleDivergingSymlog:L$,scaleIdentity:g$,scaleImplicit:Lw,scaleLinear:ly,scaleLog:v$,scaleOrdinal:QS,scalePoint:kd,scalePow:sE,scaleQuantile:w$,scaleQuantize:_$,scaleRadial:x$,scaleSequential:j$,scaleSequentialLog:N$,scaleSequentialPow:gE,scaleSequentialQuantile:M$,scaleSequentialSqrt:Ule,scaleSequentialSymlog:D$,scaleSqrt:Ese,scaleSymlog:b$,scaleThreshold:S$,scaleTime:Vle,scaleUtc:Ble,tickFormat:m$},Symbol.toStringTag,{value:"Module"}));var qle=sf;function Kle(t,e,n){for(var r=-1,i=t.length;++r<i;){var a=t[r],o=e(a);if(o!=null&&(s===void 0?o===o&&!qle(o):n(o,s)))var s=o,l=a}return l}var F$=Kle;function Hle(t,e){return t>e}var Gle=Hle,Yle=F$,Xle=Gle,Qle=gf;function Jle(t){return t&&t.length?Yle(t,Qle,Xle):void 0}var Zle=Jle;const as=Lt(Zle);function eue(t,e){return t<e}var tue=eue,nue=F$,rue=tue,iue=gf;function aue(t){return t&&t.length?nue(t,iue,rue):void 0}var oue=aue;const Zv=Lt(oue);var sue=IS,lue=Ls,uue=GR,cue=Gr;function fue(t,e){var n=cue(t)?sue:uue;return n(t,lue(e))}var due=fue,hue=KR,pue=due;function mue(t,e){return hue(pue(t,e),1)}var gue=mue;const yue=Lt(gue);var vue=KS;function bue(t,e){return vue(t,e)}var xue=bue;const Ic=Lt(xue);var vf=1e9,wue={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},bE,rn=!0,$i="[DecimalError] ",jl=$i+"Invalid argument: ",vE=$i+"Exponent out of range: ",bf=Math.floor,pl=Math.pow,_ue=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ai,Un=1e7,Jt=7,z$=9007199254740991,dy=bf(z$/Jt),ze={};ze.absoluteValue=ze.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};ze.comparedTo=ze.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};ze.decimalPlaces=ze.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Jt;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};ze.dividedBy=ze.div=function(t){return bo(this,new this.constructor(t))};ze.dividedToIntegerBy=ze.idiv=function(t){var e=this,n=e.constructor;return Bt(bo(e,new n(t),0,1),n.precision)};ze.equals=ze.eq=function(t){return!this.cmp(t)};ze.exponent=function(){return Cn(this)};ze.greaterThan=ze.gt=function(t){return this.cmp(t)>0};ze.greaterThanOrEqualTo=ze.gte=function(t){return this.cmp(t)>=0};ze.isInteger=ze.isint=function(){return this.e>this.d.length-2};ze.isNegative=ze.isneg=function(){return this.s<0};ze.isPositive=ze.ispos=function(){return this.s>0};ze.isZero=function(){return this.s===0};ze.lessThan=ze.lt=function(t){return this.cmp(t)<0};ze.lessThanOrEqualTo=ze.lte=function(t){return this.cmp(t)<1};ze.logarithm=ze.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(ai))throw Error($i+"NaN");if(n.s<1)throw Error($i+(n.s?"NaN":"-Infinity"));return n.eq(ai)?new r(0):(rn=!1,e=bo(wh(n,a),wh(t,a),a),rn=!0,Bt(e,i))};ze.minus=ze.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?U$(e,t):V$(e,(t.s=-t.s,t))};ze.modulo=ze.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error($i+"NaN");return n.s?(rn=!1,e=bo(n,t,0,1).times(t),rn=!0,n.minus(e)):Bt(new r(n),i)};ze.naturalExponential=ze.exp=function(){return B$(this)};ze.naturalLogarithm=ze.ln=function(){return wh(this)};ze.negated=ze.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};ze.plus=ze.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?V$(e,t):U$(e,(t.s=-t.s,t))};ze.precision=ze.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(jl+t);if(e=Cn(i)+1,r=i.d.length-1,n=r*Jt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};ze.squareRoot=ze.sqrt=function(){var t,e,n,r,i,a,o,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error($i+"NaN")}for(t=Cn(s),rn=!1,i=Math.sqrt(+s),i==0||i==1/0?(e=Ia(s.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=bf((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=o=n+3;;)if(a=r,r=a.plus(bo(s,a,o+2)).times(.5),Ia(a.d).slice(0,o)===(e=Ia(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(Bt(a,n+1,0),a.times(a).eq(s)){r=a;break}}else if(e!="9999")break;o+=4}return rn=!0,Bt(r,n)};ze.times=ze.mul=function(t){var e,n,r,i,a,o,s,l,u,c=this,f=c.constructor,m=c.d,g=(t=new f(t)).d;if(!c.s||!t.s)return new f(0);for(t.s*=c.s,n=c.e+t.e,l=m.length,u=g.length,l<u&&(a=m,m=g,g=a,o=l,l=u,u=o),a=[],o=l+u,r=o;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,i=l+r;i>r;)s=a[i]+g[r]*m[i-r-1]+e,a[i--]=s%Un|0,e=s/Un|0;a[i]=(a[i]+e)%Un|0}for(;!a[--o];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,rn?Bt(t,f.precision):t};ze.toDecimalPlaces=ze.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Ba(t,0,vf),e===void 0?e=r.rounding:Ba(e,0,8),Bt(n,t+Cn(n)+1,e))};ze.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Ul(r,!0):(Ba(t,0,vf),e===void 0?e=i.rounding:Ba(e,0,8),r=Bt(new i(r),t+1,e),n=Ul(r,!0,t+1)),n};ze.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?Ul(i):(Ba(t,0,vf),e===void 0?e=a.rounding:Ba(e,0,8),r=Bt(new a(i),t+Cn(i)+1,e),n=Ul(r.abs(),!1,t+Cn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};ze.toInteger=ze.toint=function(){var t=this,e=t.constructor;return Bt(new e(t),Cn(t)+1,e.rounding)};ze.toNumber=function(){return+this};ze.toPower=ze.pow=function(t){var e,n,r,i,a,o,s=this,l=s.constructor,u=12,c=+(t=new l(t));if(!t.s)return new l(ai);if(s=new l(s),!s.s){if(t.s<1)throw Error($i+"Infinity");return s}if(s.eq(ai))return s;if(r=l.precision,t.eq(ai))return Bt(s,r);if(e=t.e,n=t.d.length-1,o=e>=n,a=s.s,o){if((n=c<0?-c:c)<=z$){for(i=new l(ai),e=Math.ceil(r/Jt+4),rn=!1;n%2&&(i=i.times(s),WO(i.d,e)),n=bf(n/2),n!==0;)s=s.times(s),WO(s.d,e);return rn=!0,t.s<0?new l(ai).div(i):Bt(i,r)}}else if(a<0)throw Error($i+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,s.s=1,rn=!1,i=t.times(wh(s,r+u)),rn=!0,i=B$(i),i.s=a,i};ze.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=Cn(i),r=Ul(i,n<=a.toExpNeg||n>=a.toExpPos)):(Ba(t,1,vf),e===void 0?e=a.rounding:Ba(e,0,8),i=Bt(new a(i),t,e),n=Cn(i),r=Ul(i,t<=n||n<=a.toExpNeg,t)),r};ze.toSignificantDigits=ze.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Ba(t,1,vf),e===void 0?e=r.rounding:Ba(e,0,8)),Bt(new r(n),t,e)};ze.toString=ze.valueOf=ze.val=ze.toJSON=ze[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Cn(t),n=t.constructor;return Ul(t,e<=n.toExpNeg||e>=n.toExpPos)};function V$(t,e){var n,r,i,a,o,s,l,u,c=t.constructor,f=c.precision;if(!t.s||!e.s)return e.s||(e=new c(t)),rn?Bt(e,f):e;if(l=t.d,u=e.d,o=t.e,i=e.e,l=l.slice(),a=o-i,a){for(a<0?(r=l,a=-a,s=u.length):(r=u,i=o,s=l.length),o=Math.ceil(f/Jt),s=o>s?o+1:s+1,a>s&&(a=s,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(s=l.length,a=u.length,s-a<0&&(a=s,r=u,u=l,l=r),n=0;a;)n=(l[--a]=l[a]+u[a]+n)/Un|0,l[a]%=Un;for(n&&(l.unshift(n),++i),s=l.length;l[--s]==0;)l.pop();return e.d=l,e.e=i,rn?Bt(e,f):e}function Ba(t,e,n){if(t!==~~t||t<e||t>n)throw Error(jl+t)}function Ia(t){var e,n,r,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)r=t[e]+"",n=Jt-r.length,n&&(a+=Jo(n)),a+=r;o=t[e],r=o+"",n=Jt-r.length,n&&(a+=Jo(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var bo=function(){function t(r,i){var a,o=0,s=r.length;for(r=r.slice();s--;)a=r[s]*i+o,r[s]=a%Un|0,o=a/Un|0;return o&&r.unshift(o),r}function e(r,i,a,o){var s,l;if(a!=o)l=a>o?1:-1;else for(s=l=0;s<a;s++)if(r[s]!=i[s]){l=r[s]>i[s]?1:-1;break}return l}function n(r,i,a){for(var o=0;a--;)r[a]-=o,o=r[a]<i[a]?1:0,r[a]=o*Un+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o){var s,l,u,c,f,m,g,b,v,x,S,E,T,j,_,P,w,O,I=r.constructor,R=r.s==i.s?1:-1,D=r.d,$=i.d;if(!r.s)return new I(r);if(!i.s)throw Error($i+"Division by zero");for(l=r.e-i.e,w=$.length,_=D.length,g=new I(R),b=g.d=[],u=0;$[u]==(D[u]||0);)++u;if($[u]>(D[u]||0)&&--l,a==null?E=a=I.precision:o?E=a+(Cn(r)-Cn(i))+1:E=a,E<0)return new I(0);if(E=E/Jt+2|0,u=0,w==1)for(c=0,$=$[0],E++;(u<_||c)&&E--;u++)T=c*Un+(D[u]||0),b[u]=T/$|0,c=T%$|0;else{for(c=Un/($[0]+1)|0,c>1&&($=t($,c),D=t(D,c),w=$.length,_=D.length),j=w,v=D.slice(0,w),x=v.length;x<w;)v[x++]=0;O=$.slice(),O.unshift(0),P=$[0],$[1]>=Un/2&&++P;do c=0,s=e($,v,w,x),s<0?(S=v[0],w!=x&&(S=S*Un+(v[1]||0)),c=S/P|0,c>1?(c>=Un&&(c=Un-1),f=t($,c),m=f.length,x=v.length,s=e(f,v,m,x),s==1&&(c--,n(f,w<m?O:$,m))):(c==0&&(s=c=1),f=$.slice()),m=f.length,m<x&&f.unshift(0),n(v,f,x),s==-1&&(x=v.length,s=e($,v,w,x),s<1&&(c++,n(v,w<x?O:$,x))),x=v.length):s===0&&(c++,v=[0]),b[u++]=c,s&&v[0]?v[x++]=D[j]||0:(v=[D[j]],x=1);while((j++<_||v[0]!==void 0)&&E--)}return b[0]||b.shift(),g.e=l,Bt(g,o?a+Cn(g)+1:a)}}();function B$(t,e){var n,r,i,a,o,s,l=0,u=0,c=t.constructor,f=c.precision;if(Cn(t)>16)throw Error(vE+Cn(t));if(!t.s)return new c(ai);for(rn=!1,s=f,o=new c(.03125);t.abs().gte(.1);)t=t.times(o),u+=5;for(r=Math.log(pl(2,u))/Math.LN10*2+5|0,s+=r,n=i=a=new c(ai),c.precision=s;;){if(i=Bt(i.times(t),s),n=n.times(++l),o=a.plus(bo(i,n,s)),Ia(o.d).slice(0,s)===Ia(a.d).slice(0,s)){for(;u--;)a=Bt(a.times(a),s);return c.precision=f,e==null?(rn=!0,Bt(a,f)):a}a=o}}function Cn(t){for(var e=t.e*Jt,n=t.d[0];n>=10;n/=10)e++;return e}function kb(t,e,n){if(e>t.LN10.sd())throw rn=!0,n&&(t.precision=n),Error($i+"LN10 precision limit exceeded");return Bt(new t(t.LN10),e)}function Jo(t){for(var e="";t--;)e+="0";return e}function wh(t,e){var n,r,i,a,o,s,l,u,c,f=1,m=10,g=t,b=g.d,v=g.constructor,x=v.precision;if(g.s<1)throw Error($i+(g.s?"NaN":"-Infinity"));if(g.eq(ai))return new v(0);if(e==null?(rn=!1,u=x):u=e,g.eq(10))return e==null&&(rn=!0),kb(v,u);if(u+=m,v.precision=u,n=Ia(b),r=n.charAt(0),a=Cn(g),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)g=g.times(t),n=Ia(g.d),r=n.charAt(0),f++;a=Cn(g),r>1?(g=new v("0."+n),a++):g=new v(r+"."+n.slice(1))}else return l=kb(v,u+2,x).times(a+""),g=wh(new v(r+"."+n.slice(1)),u-m).plus(l),v.precision=x,e==null?(rn=!0,Bt(g,x)):g;for(s=o=g=bo(g.minus(ai),g.plus(ai),u),c=Bt(g.times(g),u),i=3;;){if(o=Bt(o.times(c),u),l=s.plus(bo(o,new v(i),u)),Ia(l.d).slice(0,u)===Ia(s.d).slice(0,u))return s=s.times(2),a!==0&&(s=s.plus(kb(v,u+2,x).times(a+""))),s=bo(s,new v(f),u),v.precision=x,e==null?(rn=!0,Bt(s,x)):s;s=l,i+=2}}function UO(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=bf(n/Jt),t.d=[],r=(n+1)%Jt,n<0&&(r+=Jt),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Jt;r<i;)t.d.push(+e.slice(r,r+=Jt));e=e.slice(r),r=Jt-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),rn&&(t.e>dy||t.e<-dy))throw Error(vE+n)}else t.s=0,t.e=0,t.d=[0];return t}function Bt(t,e,n){var r,i,a,o,s,l,u,c,f=t.d;for(o=1,a=f[0];a>=10;a/=10)o++;if(r=e-o,r<0)r+=Jt,i=e,u=f[c=0];else{if(c=Math.ceil((r+1)/Jt),a=f.length,c>=a)return t;for(u=a=f[c],o=1;a>=10;a/=10)o++;r%=Jt,i=r-Jt+o}if(n!==void 0&&(a=pl(10,o-i-1),s=u/a%10|0,l=e<0||f[c+1]!==void 0||u%a,l=n<4?(s||l)&&(n==0||n==(t.s<0?3:2)):s>5||s==5&&(n==4||l||n==6&&(r>0?i>0?u/pl(10,o-i):0:f[c-1])%10&1||n==(t.s<0?8:7))),e<1||!f[0])return l?(a=Cn(t),f.length=1,e=e-a-1,f[0]=pl(10,(Jt-e%Jt)%Jt),t.e=bf(-e/Jt)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(r==0?(f.length=c,a=1,c--):(f.length=c+1,a=pl(10,Jt-r),f[c]=i>0?(u/pl(10,o-i)%pl(10,i)|0)*a:0),l)for(;;)if(c==0){(f[0]+=a)==Un&&(f[0]=1,++t.e);break}else{if(f[c]+=a,f[c]!=Un)break;f[c--]=0,a=1}for(r=f.length;f[--r]===0;)f.pop();if(rn&&(t.e>dy||t.e<-dy))throw Error(vE+Cn(t));return t}function U$(t,e){var n,r,i,a,o,s,l,u,c,f,m=t.constructor,g=m.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new m(t),rn?Bt(e,g):e;if(l=t.d,f=e.d,r=e.e,u=t.e,l=l.slice(),o=u-r,o){for(c=o<0,c?(n=l,o=-o,s=f.length):(n=f,r=u,s=l.length),i=Math.max(Math.ceil(g/Jt),s)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=l.length,s=f.length,c=i<s,c&&(s=i),i=0;i<s;i++)if(l[i]!=f[i]){c=l[i]<f[i];break}o=0}for(c&&(n=l,l=f,f=n,e.s=-e.s),s=l.length,i=f.length-s;i>0;--i)l[s++]=0;for(i=f.length;i>o;){if(l[--i]<f[i]){for(a=i;a&&l[--a]===0;)l[a]=Un-1;--l[a],l[i]+=Un}l[i]-=f[i]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,rn?Bt(e,g):e):new m(0)}function Ul(t,e,n){var r,i=Cn(t),a=Ia(t.d),o=a.length;return e?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+Jo(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Jo(-i-1)+a,n&&(r=n-o)>0&&(a+=Jo(r))):i>=o?(a+=Jo(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+Jo(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=Jo(r))),t.s<0?"-"+a:a}function WO(t,e){if(t.length>e)return t.length=e,!0}function W$(t){var e,n,r;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(jl+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return UO(o,a.toString())}else if(typeof a!="string")throw Error(jl+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,_ue.test(a))UO(o,a);else throw Error(jl+a)}if(i.prototype=ze,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=W$,i.config=i.set=Sue,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Sue(t){if(!t||typeof t!="object")throw Error($i+"Object expected");var e,n,r,i=["precision",1,vf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(bf(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(jl+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(jl+n+": "+r);return this}var bE=W$(wue);ai=new bE(1);const Rt=bE;function Eue(t){return Oue(t)||Pue(t)||Tue(t)||Aue()}function Aue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tue(t,e){if(t){if(typeof t=="string")return Bw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bw(t,e)}}function Pue(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Oue(t){if(Array.isArray(t))return Bw(t)}function Bw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var kue=function(e){return e},q$={},K$=function(e){return e===q$},qO=function(e){return function n(){return arguments.length===0||arguments.length===1&&K$(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},Cue=function t(e,n){return e===1?n:qO(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=i.filter(function(s){return s!==q$}).length;return o>=e?n.apply(void 0,i):t(e-o,qO(function(){for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];var c=i.map(function(f){return K$(f)?l.shift():f});return n.apply(void 0,Eue(c).concat(l))}))})},e0=function(e){return Cue(e.length,e)},Uw=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},Iue=e0(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),jue=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return kue;var i=n.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce(function(s,l){return l(s)},a.apply(void 0,arguments))}},Ww=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},H$=function(e){var n=null,r=null;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n&&a.every(function(s,l){return s===n[l]})||(n=a,r=e.apply(void 0,a)),r}};function Nue(t){var e;return t===0?e=1:e=Math.floor(new Rt(t).abs().log(10).toNumber())+1,e}function Due(t,e,n){for(var r=new Rt(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var Mue=e0(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),Rue=e0(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),$ue=e0(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const t0={rangeStep:Due,getDigitCount:Nue,interpolateNumber:Mue,uninterpolateNumber:Rue,uninterpolateTruncation:$ue};function qw(t){return zue(t)||Fue(t)||G$(t)||Lue()}function Lue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fue(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function zue(t){if(Array.isArray(t))return Kw(t)}function _h(t,e){return Uue(t)||Bue(t,e)||G$(t,e)||Vue()}function Vue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G$(t,e){if(t){if(typeof t=="string")return Kw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kw(t,e)}}function Kw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Bue(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,a=void 0;try{for(var o=t[Symbol.iterator](),s;!(r=(s=o.next()).done)&&(n.push(s.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,a=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(i)throw a}}return n}}function Uue(t){if(Array.isArray(t))return t}function Y$(t){var e=_h(t,2),n=e[0],r=e[1],i=n,a=r;return n>r&&(i=r,a=n),[i,a]}function X$(t,e,n){if(t.lte(0))return new Rt(0);var r=t0.getDigitCount(t.toNumber()),i=new Rt(10).pow(r),a=t.div(i),o=r!==1?.05:.1,s=new Rt(Math.ceil(a.div(o).toNumber())).add(n).mul(o),l=s.mul(i);return e?l:new Rt(Math.ceil(l))}function Wue(t,e,n){var r=1,i=new Rt(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new Rt(10).pow(t0.getDigitCount(t)-1),i=new Rt(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new Rt(Math.floor(t)))}else t===0?i=new Rt(Math.floor((e-1)/2)):n||(i=new Rt(Math.floor(t)));var o=Math.floor((e-1)/2),s=jue(Iue(function(l){return i.add(new Rt(l-o).mul(r)).toNumber()}),Uw);return s(0,e)}function Q$(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new Rt(0),tickMin:new Rt(0),tickMax:new Rt(0)};var a=X$(new Rt(e).sub(t).div(n-1),r,i),o;t<=0&&e>=0?o=new Rt(0):(o=new Rt(t).add(e).div(2),o=o.sub(new Rt(o).mod(a)));var s=Math.ceil(o.sub(t).div(a).toNumber()),l=Math.ceil(new Rt(e).sub(o).div(a).toNumber()),u=s+l+1;return u>n?Q$(t,e,n,r,i+1):(u<n&&(l=e>0?l+(n-u):l,s=e>0?s:s+(n-u)),{step:a,tickMin:o.sub(new Rt(s).mul(a)),tickMax:o.add(new Rt(l).mul(a))})}function que(t){var e=_h(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),s=Y$([n,r]),l=_h(s,2),u=l[0],c=l[1];if(u===-1/0||c===1/0){var f=c===1/0?[u].concat(qw(Uw(0,i-1).map(function(){return 1/0}))):[].concat(qw(Uw(0,i-1).map(function(){return-1/0})),[c]);return n>r?Ww(f):f}if(u===c)return Wue(u,i,a);var m=Q$(u,c,o,a),g=m.step,b=m.tickMin,v=m.tickMax,x=t0.rangeStep(b,v.add(new Rt(.1).mul(g)),g);return n>r?Ww(x):x}function Kue(t,e){var n=_h(t,2),r=n[0],i=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Y$([r,i]),s=_h(o,2),l=s[0],u=s[1];if(l===-1/0||u===1/0)return[r,i];if(l===u)return[l];var c=Math.max(e,2),f=X$(new Rt(u).sub(l).div(c-1),a,0),m=[].concat(qw(t0.rangeStep(new Rt(l),new Rt(u).sub(new Rt(.99).mul(f)),f)),[u]);return r>i?Ww(m):m}var Hue=H$(que),Gue=H$(Kue),Yue="Invariant failed";function Wl(t,e){throw new Error(Yue)}var Xue=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function jc(t){"@babel/helpers - typeof";return jc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jc(t)}function hy(){return hy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hy.apply(this,arguments)}function Que(t,e){return tce(t)||ece(t,e)||Zue(t,e)||Jue()}function Jue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zue(t,e){if(t){if(typeof t=="string")return KO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KO(t,e)}}function KO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ece(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function tce(t){if(Array.isArray(t))return t}function nce(t,e){if(t==null)return{};var n=rce(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rce(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ice(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ace(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,e4(r.key),r)}}function oce(t,e,n){return e&&ace(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function sce(t,e,n){return e=py(e),lce(t,J$()?Reflect.construct(e,n||[],py(t).constructor):e.apply(t,n))}function lce(t,e){if(e&&(jc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uce(t)}function uce(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function J$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(J$=function(){return!!t})()}function py(t){return py=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},py(t)}function cce(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hw(t,e)}function Hw(t,e){return Hw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Hw(t,e)}function Z$(t,e,n){return e=e4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e4(t){var e=fce(t,"string");return jc(e)=="symbol"?e:e+""}function fce(t,e){if(jc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var wp=function(t){function e(){return ice(this,e),sce(this,e,arguments)}return cce(e,t),oce(e,[{key:"render",value:function(){var r=this.props,i=r.offset,a=r.layout,o=r.width,s=r.dataKey,l=r.data,u=r.dataPointFormatter,c=r.xAxis,f=r.yAxis,m=nce(r,Xue),g=st(m,!1);this.props.direction==="x"&&c.type!=="number"&&Wl();var b=l.map(function(v){var x=u(v,s),S=x.x,E=x.y,T=x.value,j=x.errorVal;if(!j)return null;var _=[],P,w;if(Array.isArray(j)){var O=Que(j,2);P=O[0],w=O[1]}else P=w=j;if(a==="vertical"){var I=c.scale,R=E+i,D=R+o,$=R-o,L=I(T-P),ne=I(T+w);_.push({x1:ne,y1:D,x2:ne,y2:$}),_.push({x1:L,y1:R,x2:ne,y2:R}),_.push({x1:L,y1:D,x2:L,y2:$})}else if(a==="horizontal"){var ae=f.scale,ce=S+i,me=ce-o,X=ce+o,ie=ae(T-P),ge=ae(T+w);_.push({x1:me,y1:ge,x2:X,y2:ge}),_.push({x1:ce,y1:ie,x2:ce,y2:ge}),_.push({x1:me,y1:ie,x2:X,y2:ie})}return U.createElement(Yt,hy({className:"recharts-errorBar",key:"bar-".concat(_.map(function(Te){return"".concat(Te.x1,"-").concat(Te.x2,"-").concat(Te.y1,"-").concat(Te.y2)}))},g),_.map(function(Te){return U.createElement("line",hy({},Te,{key:"line-".concat(Te.x1,"-").concat(Te.x2,"-").concat(Te.y1,"-").concat(Te.y2)}))}))});return U.createElement(Yt,{className:"recharts-errorBars"},b)}}])}(U.Component);Z$(wp,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});Z$(wp,"displayName","ErrorBar");function Sh(t){"@babel/helpers - typeof";return Sh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sh(t)}function HO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ol(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HO(Object(n),!0).forEach(function(r){dce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dce(t,e,n){return e=hce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hce(t){var e=pce(t,"string");return Sh(e)=="symbol"?e:e+""}function pce(t,e){if(Sh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var t4=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,o=ii(n,Cl);if(!o)return null;var s=Cl.defaultProps,l=s!==void 0?ol(ol({},s),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:a==="children"?u=(r||[]).reduce(function(c,f){var m=f.item,g=f.props,b=g.sectors||g.data||[];return c.concat(b.map(function(v){return{type:o.props.iconType||m.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):u=(r||[]).map(function(c){var f=c.item,m=f.type.defaultProps,g=m!==void 0?ol(ol({},m),f.props):{},b=g.dataKey,v=g.name,x=g.legendType,S=g.hide;return{inactive:S,dataKey:b,type:l.iconType||x||"square",color:xE(f),value:v||b,payload:g}}),ol(ol(ol({},l),Cl.getWithHeight(o,i)),{},{payload:u,item:o})};function Eh(t){"@babel/helpers - typeof";return Eh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eh(t)}function GO(t){return vce(t)||yce(t)||gce(t)||mce()}function mce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gce(t,e){if(t){if(typeof t=="string")return Gw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gw(t,e)}}function yce(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function vce(t){if(Array.isArray(t))return Gw(t)}function Gw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function YO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YO(Object(n),!0).forEach(function(r){ic(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ic(t,e,n){return e=bce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bce(t){var e=xce(t,"string");return Eh(e)=="symbol"?e:e+""}function xce(t,e){if(Eh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Eh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kr(t,e,n){return ft(t)||ft(e)?n:Rn(e)?Ni(t,e,n):ot(e)?e(t):n}function Cd(t,e,n,r){var i=yue(t,function(s){return kr(s,e)});if(n==="number"){var a=i.filter(function(s){return ke(s)||parseFloat(s)});return a.length?[Zv(a),as(a)]:[1/0,-1/0]}var o=r?i.filter(function(s){return!ft(s)}):i;return o.map(function(s){return Rn(s)||s instanceof Date?s:""})}var wce=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=-1,s=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(s<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var l=a.range,u=0;u<s;u++){var c=u>0?i[u-1].coordinate:i[s-1].coordinate,f=i[u].coordinate,m=u>=s-1?i[0].coordinate:i[u+1].coordinate,g=void 0;if(la(f-c)!==la(m-f)){var b=[];if(la(m-f)===la(l[1]-l[0])){g=m;var v=f+l[1]-l[0];b[0]=Math.min(v,(v+c)/2),b[1]=Math.max(v,(v+c)/2)}else{g=c;var x=m+l[1]-l[0];b[0]=Math.min(f,(x+f)/2),b[1]=Math.max(f,(x+f)/2)}var S=[Math.min(f,(g+f)/2),Math.max(f,(g+f)/2)];if(e>S[0]&&e<=S[1]||e>=b[0]&&e<=b[1]){o=i[u].index;break}}else{var E=Math.min(c,m),T=Math.max(c,m);if(e>(E+f)/2&&e<=(T+f)/2){o=i[u].index;break}}}else for(var j=0;j<s;j++)if(j===0&&e<=(r[j].coordinate+r[j+1].coordinate)/2||j>0&&j<s-1&&e>(r[j].coordinate+r[j-1].coordinate)/2&&e<=(r[j].coordinate+r[j+1].coordinate)/2||j===s-1&&e>(r[j].coordinate+r[j-1].coordinate)/2){o=r[j].index;break}return o},xE=function(e){var n,r=e,i=r.type.displayName,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?hn(hn({},e.type.defaultProps),e.props):e.props,o=a.stroke,s=a.fill,l;switch(i){case"Line":l=o;break;case"Area":case"Radar":l=o&&o!=="none"?o:s;break;default:l=s;break}return l},_ce=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var o={},s=Object.keys(a),l=0,u=s.length;l<u;l++)for(var c=a[s[l]].stackGroups,f=Object.keys(c),m=0,g=f.length;m<g;m++){var b=c[f[m]],v=b.items,x=b.cateAxisId,S=v.filter(function(w){return yo(w.type).indexOf("Bar")>=0});if(S&&S.length){var E=S[0].type.defaultProps,T=E!==void 0?hn(hn({},E),S[0].props):S[0].props,j=T.barSize,_=T[x];o[_]||(o[_]=[]);var P=ft(j)?n:j;o[_].push({item:S[0],stackList:S.slice(1),barSize:ft(P)?void 0:Bl(P,r,0)})}}return o},Sce=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,a=e.sizeList,o=a===void 0?[]:a,s=e.maxBarSize,l=o.length;if(l<1)return null;var u=Bl(n,i,0,!0),c,f=[];if(o[0].barSize===+o[0].barSize){var m=!1,g=i/l,b=o.reduce(function(j,_){return j+_.barSize||0},0);b+=(l-1)*u,b>=i&&(b-=(l-1)*u,u=0),b>=i&&g>0&&(m=!0,g*=.9,b=l*g);var v=(i-b)/2>>0,x={offset:v-u,size:0};c=o.reduce(function(j,_){var P={item:_.item,position:{offset:x.offset+x.size+u,size:m?g:_.barSize}},w=[].concat(GO(j),[P]);return x=w[w.length-1].position,_.stackList&&_.stackList.length&&_.stackList.forEach(function(O){w.push({item:O,position:x})}),w},f)}else{var S=Bl(r,i,0,!0);i-2*S-(l-1)*u<=0&&(u=0);var E=(i-2*S-(l-1)*u)/l;E>1&&(E>>=0);var T=s===+s?Math.min(E,s):E;c=o.reduce(function(j,_,P){var w=[].concat(GO(j),[{item:_.item,position:{offset:S+(E+u)*P+(E-T)/2,size:T}}]);return _.stackList&&_.stackList.length&&_.stackList.forEach(function(O){w.push({item:O,position:w[w.length-1].position})}),w},f)}return c},Ece=function(e,n,r,i){var a=r.children,o=r.width,s=r.margin,l=o-(s.left||0)-(s.right||0),u=t4({children:a,legendWidth:l});if(u){var c=i||{},f=c.width,m=c.height,g=u.align,b=u.verticalAlign,v=u.layout;if((v==="vertical"||v==="horizontal"&&b==="middle")&&g!=="center"&&ke(e[g]))return hn(hn({},e),{},ic({},g,e[g]+(f||0)));if((v==="horizontal"||v==="vertical"&&g==="center")&&b!=="middle"&&ke(e[b]))return hn(hn({},e),{},ic({},b,e[b]+(m||0)))}return e},Ace=function(e,n,r){return ft(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},n4=function(e,n,r,i,a){var o=n.props.children,s=Di(o,wp).filter(function(u){return Ace(i,a,u.props.direction)});if(s&&s.length){var l=s.map(function(u){return u.props.dataKey});return e.reduce(function(u,c){var f=kr(c,r);if(ft(f))return u;var m=Array.isArray(f)?[Zv(f),as(f)]:[f,f],g=l.reduce(function(b,v){var x=kr(c,v,0),S=m[0]-Math.abs(Array.isArray(x)?x[0]:x),E=m[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(S,b[0]),Math.max(E,b[1])]},[1/0,-1/0]);return[Math.min(g[0],u[0]),Math.max(g[1],u[1])]},[1/0,-1/0])}return null},Tce=function(e,n,r,i,a){var o=n.map(function(s){return n4(e,s,r,a,i)}).filter(function(s){return!ft(s)});return o&&o.length?o.reduce(function(s,l){return[Math.min(s[0],l[0]),Math.max(s[1],l[1])]},[1/0,-1/0]):null},r4=function(e,n,r,i,a){var o=n.map(function(l){var u=l.props.dataKey;return r==="number"&&u&&n4(e,l,u,i)||Cd(e,u,r,a)});if(r==="number")return o.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var s={};return o.reduce(function(l,u){for(var c=0,f=u.length;c<f;c++)s[u[c]]||(s[u[c]]=!0,l.push(u[c]));return l},[])},i4=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},a4=function(e,n,r,i){if(i)return e.map(function(l){return l.coordinate});var a,o,s=e.map(function(l){return l.coordinate===n&&(a=!0),l.coordinate===r&&(o=!0),l.coordinate});return a||s.push(n),o||s.push(r),s},po=function(e,n,r){if(!e)return null;var i=e.scale,a=e.duplicateDomain,o=e.type,s=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||r)&&o==="category"&&i.bandwidth?i.bandwidth()/l:0;if(u=e.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?la(s[0]-s[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var c=(e.ticks||e.niceTicks).map(function(f){var m=a?a.indexOf(f):f;return{coordinate:i(m)+u,value:f,offset:u}});return c.filter(function(f){return!df(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,m){return{coordinate:i(f)+u,value:f,index:m,offset:u}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(f){return{coordinate:i(f)+u,value:f,offset:u}}):i.domain().map(function(f,m){return{coordinate:i(f)+u,value:a?a[f]:f,index:m,offset:u}})},Cb=new WeakMap,xm=function(e,n){if(typeof n!="function")return e;Cb.has(e)||Cb.set(e,new WeakMap);var r=Cb.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},Pce=function(e,n,r){var i=e.scale,a=e.type,o=e.layout,s=e.axisType;if(i==="auto")return o==="radial"&&s==="radiusAxis"?{scale:gh(),realScaleType:"band"}:o==="radial"&&s==="angleAxis"?{scale:ly(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:kd(),realScaleType:"point"}:a==="category"?{scale:gh(),realScaleType:"band"}:{scale:ly(),realScaleType:"linear"};if(Vl(i)){var l="scale".concat(zv(i));return{scale:(BO[l]||kd)(),realScaleType:BO[l]?l:"point"}}return ot(i)?{scale:i}:{scale:kd(),realScaleType:"point"}},XO=1e-4,Oce=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),a=Math.min(i[0],i[1])-XO,o=Math.max(i[0],i[1])+XO,s=e(n[0]),l=e(n[r-1]);(s<a||s>o||l<a||l>o)&&e.domain([n[0],n[r-1]])}},kce=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},Cce=function(e,n){if(!n||n.length!==2||!ke(n[0])||!ke(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a=[e[0],e[1]];return(!ke(e[0])||e[0]<r)&&(a[0]=r),(!ke(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<r&&(a[1]=r),a},Ice=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,o=0,s=0;s<n;++s){var l=df(e[s][r][1])?e[s][r][0]:e[s][r][1];l>=0?(e[s][r][0]=a,e[s][r][1]=a+l,a=e[s][r][1]):(e[s][r][0]=o,e[s][r][1]=o+l,o=e[s][r][1])}},jce=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,o=0;o<n;++o){var s=df(e[o][r][1])?e[o][r][0]:e[o][r][1];s>=0?(e[o][r][0]=a,e[o][r][1]=a+s,a=e[o][r][1]):(e[o][r][0]=0,e[o][r][1]=0)}},Nce={sign:Ice,expand:GX,none:Sc,silhouette:YX,wiggle:XX,positive:jce},Dce=function(e,n,r){var i=n.map(function(s){return s.props.dataKey}),a=Nce[r],o=HX().keys(i).value(function(s,l){return+kr(s,l,0)}).order(bw).offset(a);return o(e)},Mce=function(e,n,r,i,a,o){if(!e)return null;var s=o?n.reverse():n,l={},u=s.reduce(function(f,m){var g,b=(g=m.type)!==null&&g!==void 0&&g.defaultProps?hn(hn({},m.type.defaultProps),m.props):m.props,v=b.stackId,x=b.hide;if(x)return f;var S=b[r],E=f[S]||{hasStack:!1,stackGroups:{}};if(Rn(v)){var T=E.stackGroups[v]||{numericAxisId:r,cateAxisId:i,items:[]};T.items.push(m),E.hasStack=!0,E.stackGroups[v]=T}else E.stackGroups[hf("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[m]};return hn(hn({},f),{},ic({},S,E))},l),c={};return Object.keys(u).reduce(function(f,m){var g=u[m];if(g.hasStack){var b={};g.stackGroups=Object.keys(g.stackGroups).reduce(function(v,x){var S=g.stackGroups[x];return hn(hn({},v),{},ic({},x,{numericAxisId:r,cateAxisId:i,items:S.items,stackedData:Dce(e,S.items,a)}))},b)}return hn(hn({},f),{},ic({},m,g))},c)},Rce=function(e,n){var r=n.realScaleType,i=n.type,a=n.tickCount,o=n.originalDomain,s=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(a&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=e.domain();if(!u.length)return null;var c=Hue(u,a,s);return e.domain([Zv(c),as(c)]),{niceTicks:c}}if(a&&i==="number"){var f=e.domain(),m=Gue(f,a,s);return{niceTicks:m}}return null};function my(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,a=t.index,o=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!ft(i[e.dataKey])){var s=Fg(n,"value",i[e.dataKey]);if(s)return s.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var l=kr(i,ft(o)?e.dataKey:o);return ft(l)?null:e.scale(l)}var QO=function(e){var n=e.axis,r=e.ticks,i=e.offset,a=e.bandSize,o=e.entry,s=e.index;if(n.type==="category")return r[s]?r[s].coordinate+i:null;var l=kr(o,n.dataKey,n.domain[s]);return ft(l)?null:n.scale(l)-a/2+i},$ce=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return i<=0&&a>=0?0:a<0?a:i}return r[0]},Lce=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?hn(hn({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(Rn(a)){var o=n[a];if(o){var s=o.items.indexOf(e);return s>=0?o.stackedData[s]:null}}return null},Fce=function(e){return e.reduce(function(n,r){return[Zv(r.concat([n[0]]).filter(ke)),as(r.concat([n[1]]).filter(ke))]},[1/0,-1/0])},o4=function(e,n,r){return Object.keys(e).reduce(function(i,a){var o=e[a],s=o.stackedData,l=s.reduce(function(u,c){var f=Fce(c.slice(n,r+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},JO=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ZO=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Yw=function(e,n,r){if(ot(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(ke(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(JO.test(e[0])){var a=+JO.exec(e[0])[1];i[0]=n[0]-a}else ot(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(ke(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(ZO.test(e[1])){var o=+ZO.exec(e[1])[1];i[1]=n[1]+o}else ot(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},gy=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var a=GS(n,function(f){return f.coordinate}),o=1/0,s=1,l=a.length;s<l;s++){var u=a[s],c=a[s-1];o=Math.min((u.coordinate||0)-(c.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},ek=function(e,n,r){return!e||!e.length||Ic(e,Ni(r,"type.defaultProps.domain"))?n:e},s4=function(e,n){var r=e.type.defaultProps?hn(hn({},e.type.defaultProps),e.props):e.props,i=r.dataKey,a=r.name,o=r.unit,s=r.formatter,l=r.tooltipType,u=r.chartType,c=r.hide;return hn(hn({},st(e,!1)),{},{dataKey:i,unit:o,formatter:s,name:a||i,color:xE(e),value:kr(n,i),type:l,payload:n,chartType:u,hide:c})};function Ah(t){"@babel/helpers - typeof";return Ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ah(t)}function tk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tk(Object(n),!0).forEach(function(r){zce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zce(t,e,n){return e=Vce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vce(t){var e=Bce(t,"string");return Ah(e)=="symbol"?e:e+""}function Bce(t,e){if(Ah(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ah(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yy=Math.PI/180,Uce=function(e){return e*180/Math.PI},tr=function(e,n,r,i){return{x:e+Math.cos(-yy*i)*r,y:n+Math.sin(-yy*i)*r}},Wce=function(e,n){var r=e.x,i=e.y,a=n.x,o=n.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-o,2))},qce=function(e,n){var r=e.x,i=e.y,a=n.cx,o=n.cy,s=Wce({x:r,y:i},{x:a,y:o});if(s<=0)return{radius:s};var l=(r-a)/s,u=Math.acos(l);return i>o&&(u=2*Math.PI-u),{radius:s,angle:Uce(u),angleInRadian:u}},Kce=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),a=Math.floor(r/360),o=Math.min(i,a);return{startAngle:n-o*360,endAngle:r-o*360}},Hce=function(e,n){var r=n.startAngle,i=n.endAngle,a=Math.floor(r/360),o=Math.floor(i/360),s=Math.min(a,o);return e+s*360},rk=function(e,n){var r=e.x,i=e.y,a=qce({x:r,y:i},n),o=a.radius,s=a.angle,l=n.innerRadius,u=n.outerRadius;if(o<l||o>u)return!1;if(o===0)return!0;var c=Kce(n),f=c.startAngle,m=c.endAngle,g=s,b;if(f<=m){for(;g>m;)g-=360;for(;g<f;)g+=360;b=g>=f&&g<=m}else{for(;g>f;)g-=360;for(;g<m;)g+=360;b=g>=m&&g<=f}return b?nk(nk({},n),{},{radius:o,angle:Hce(g,n)}):null};function Th(t){"@babel/helpers - typeof";return Th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Th(t)}var Gce=["offset"];function Yce(t){return Zce(t)||Jce(t)||Qce(t)||Xce()}function Xce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qce(t,e){if(t){if(typeof t=="string")return Xw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xw(t,e)}}function Jce(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Zce(t){if(Array.isArray(t))return Xw(t)}function Xw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function efe(t,e){if(t==null)return{};var n=tfe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function tfe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ik(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ik(Object(n),!0).forEach(function(r){nfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ik(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nfe(t,e,n){return e=rfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rfe(t){var e=ife(t,"string");return Th(e)=="symbol"?e:e+""}function ife(t,e){if(Th(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Th(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ph(){return Ph=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ph.apply(this,arguments)}var afe=function(e){var n=e.value,r=e.formatter,i=ft(e.children)?n:e.children;return ot(r)?r(i):i},ofe=function(e,n){var r=la(n-e),i=Math.min(Math.abs(n-e),360);return r*i},sfe=function(e,n,r){var i=e.position,a=e.viewBox,o=e.offset,s=e.className,l=a,u=l.cx,c=l.cy,f=l.innerRadius,m=l.outerRadius,g=l.startAngle,b=l.endAngle,v=l.clockWise,x=(f+m)/2,S=ofe(g,b),E=S>=0?1:-1,T,j;i==="insideStart"?(T=g+E*o,j=v):i==="insideEnd"?(T=b-E*o,j=!v):i==="end"&&(T=b+E*o,j=v),j=S<=0?j:!j;var _=tr(u,c,x,T),P=tr(u,c,x,T+(j?1:-1)*359),w="M".concat(_.x,",").concat(_.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(j?0:1,`,
    `).concat(P.x,",").concat(P.y),O=ft(e.id)?hf("recharts-radial-line-"):e.id;return U.createElement("text",Ph({},r,{dominantBaseline:"central",className:bt("recharts-radial-bar-label",s)}),U.createElement("defs",null,U.createElement("path",{id:O,d:w})),U.createElement("textPath",{xlinkHref:"#".concat(O)},n))},lfe=function(e){var n=e.viewBox,r=e.offset,i=e.position,a=n,o=a.cx,s=a.cy,l=a.innerRadius,u=a.outerRadius,c=a.startAngle,f=a.endAngle,m=(c+f)/2;if(i==="outside"){var g=tr(o,s,u+r,m),b=g.x,v=g.y;return{x:b,y:v,textAnchor:b>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:s,textAnchor:"middle",verticalAnchor:"end"};var x=(l+u)/2,S=tr(o,s,x,m),E=S.x,T=S.y;return{x:E,y:T,textAnchor:"middle",verticalAnchor:"middle"}},ufe=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,a=e.position,o=n,s=o.x,l=o.y,u=o.width,c=o.height,f=c>=0?1:-1,m=f*i,g=f>0?"end":"start",b=f>0?"start":"end",v=u>=0?1:-1,x=v*i,S=v>0?"end":"start",E=v>0?"start":"end";if(a==="top"){var T={x:s+u/2,y:l-f*i,textAnchor:"middle",verticalAnchor:g};return Nn(Nn({},T),r?{height:Math.max(l-r.y,0),width:u}:{})}if(a==="bottom"){var j={x:s+u/2,y:l+c+m,textAnchor:"middle",verticalAnchor:b};return Nn(Nn({},j),r?{height:Math.max(r.y+r.height-(l+c),0),width:u}:{})}if(a==="left"){var _={x:s-x,y:l+c/2,textAnchor:S,verticalAnchor:"middle"};return Nn(Nn({},_),r?{width:Math.max(_.x-r.x,0),height:c}:{})}if(a==="right"){var P={x:s+u+x,y:l+c/2,textAnchor:E,verticalAnchor:"middle"};return Nn(Nn({},P),r?{width:Math.max(r.x+r.width-P.x,0),height:c}:{})}var w=r?{width:u,height:c}:{};return a==="insideLeft"?Nn({x:s+x,y:l+c/2,textAnchor:E,verticalAnchor:"middle"},w):a==="insideRight"?Nn({x:s+u-x,y:l+c/2,textAnchor:S,verticalAnchor:"middle"},w):a==="insideTop"?Nn({x:s+u/2,y:l+m,textAnchor:"middle",verticalAnchor:b},w):a==="insideBottom"?Nn({x:s+u/2,y:l+c-m,textAnchor:"middle",verticalAnchor:g},w):a==="insideTopLeft"?Nn({x:s+x,y:l+m,textAnchor:E,verticalAnchor:b},w):a==="insideTopRight"?Nn({x:s+u-x,y:l+m,textAnchor:S,verticalAnchor:b},w):a==="insideBottomLeft"?Nn({x:s+x,y:l+c-m,textAnchor:E,verticalAnchor:g},w):a==="insideBottomRight"?Nn({x:s+u-x,y:l+c-m,textAnchor:S,verticalAnchor:g},w):lf(a)&&(ke(a.x)||wl(a.x))&&(ke(a.y)||wl(a.y))?Nn({x:s+Bl(a.x,u),y:l+Bl(a.y,c),textAnchor:"end",verticalAnchor:"end"},w):Nn({x:s+u/2,y:l+c/2,textAnchor:"middle",verticalAnchor:"middle"},w)},cfe=function(e){return"cx"in e&&ke(e.cx)};function gr(t){var e=t.offset,n=e===void 0?5:e,r=efe(t,Gce),i=Nn({offset:n},r),a=i.viewBox,o=i.position,s=i.value,l=i.children,u=i.content,c=i.className,f=c===void 0?"":c,m=i.textBreakAll;if(!a||ft(s)&&ft(l)&&!z.isValidElement(u)&&!ot(u))return null;if(z.isValidElement(u))return z.cloneElement(u,i);var g;if(ot(u)){if(g=z.createElement(u,i),z.isValidElement(g))return g}else g=afe(i);var b=cfe(a),v=st(i,!0);if(b&&(o==="insideStart"||o==="insideEnd"||o==="end"))return sfe(i,g,v);var x=b?lfe(i):ufe(i);return U.createElement(ty,Ph({className:bt("recharts-label",f)},v,x,{breakAll:m}),g)}gr.displayName="Label";var l4=function(e){var n=e.cx,r=e.cy,i=e.angle,a=e.startAngle,o=e.endAngle,s=e.r,l=e.radius,u=e.innerRadius,c=e.outerRadius,f=e.x,m=e.y,g=e.top,b=e.left,v=e.width,x=e.height,S=e.clockWise,E=e.labelViewBox;if(E)return E;if(ke(v)&&ke(x)){if(ke(f)&&ke(m))return{x:f,y:m,width:v,height:x};if(ke(g)&&ke(b))return{x:g,y:b,width:v,height:x}}return ke(f)&&ke(m)?{x:f,y:m,width:0,height:0}:ke(n)&&ke(r)?{cx:n,cy:r,startAngle:a||i||0,endAngle:o||i||0,innerRadius:u||0,outerRadius:c||l||s||0,clockWise:S}:e.viewBox?e.viewBox:{}},ffe=function(e,n){return e?e===!0?U.createElement(gr,{key:"label-implicit",viewBox:n}):Rn(e)?U.createElement(gr,{key:"label-implicit",viewBox:n,value:e}):z.isValidElement(e)?e.type===gr?z.cloneElement(e,{key:"label-implicit",viewBox:n}):U.createElement(gr,{key:"label-implicit",content:e,viewBox:n}):ot(e)?U.createElement(gr,{key:"label-implicit",content:e,viewBox:n}):lf(e)?U.createElement(gr,Ph({viewBox:n},e,{key:"label-implicit"})):null:null},dfe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,a=l4(e),o=Di(i,gr).map(function(l,u){return z.cloneElement(l,{viewBox:n||a,key:"label-".concat(u)})});if(!r)return o;var s=ffe(e.label,n||a);return[s].concat(Yce(o))};gr.parseViewBox=l4;gr.renderCallByParent=dfe;function hfe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var pfe=hfe;const mfe=Lt(pfe);function Oh(t){"@babel/helpers - typeof";return Oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oh(t)}var gfe=["valueAccessor"],yfe=["data","dataKey","clockWise","id","textBreakAll"];function vfe(t){return _fe(t)||wfe(t)||xfe(t)||bfe()}function bfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xfe(t,e){if(t){if(typeof t=="string")return Qw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qw(t,e)}}function wfe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _fe(t){if(Array.isArray(t))return Qw(t)}function Qw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vy(){return vy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vy.apply(this,arguments)}function ak(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ok(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ak(Object(n),!0).forEach(function(r){Sfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ak(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sfe(t,e,n){return e=Efe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Efe(t){var e=Afe(t,"string");return Oh(e)=="symbol"?e:e+""}function Afe(t,e){if(Oh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Oh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sk(t,e){if(t==null)return{};var n=Tfe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Tfe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Pfe=function(e){return Array.isArray(e.value)?mfe(e.value):e.value};function ci(t){var e=t.valueAccessor,n=e===void 0?Pfe:e,r=sk(t,gfe),i=r.data,a=r.dataKey,o=r.clockWise,s=r.id,l=r.textBreakAll,u=sk(r,yfe);return!i||!i.length?null:U.createElement(Yt,{className:"recharts-label-list"},i.map(function(c,f){var m=ft(a)?n(c,f):kr(c&&c.payload,a),g=ft(s)?{}:{id:"".concat(s,"-").concat(f)};return U.createElement(gr,vy({},st(c,!0),u,g,{parentViewBox:c.parentViewBox,value:m,textBreakAll:l,viewBox:gr.parseViewBox(ft(o)?c:ok(ok({},c),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}ci.displayName="LabelList";function Ofe(t,e){return t?t===!0?U.createElement(ci,{key:"labelList-implicit",data:e}):U.isValidElement(t)||ot(t)?U.createElement(ci,{key:"labelList-implicit",data:e,content:t}):lf(t)?U.createElement(ci,vy({data:e},t,{key:"labelList-implicit"})):null:null}function kfe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=Di(r,ci).map(function(o,s){return z.cloneElement(o,{data:e,key:"labelList-".concat(s)})});if(!n)return i;var a=Ofe(t.label,e);return[a].concat(vfe(i))}ci.renderCallByParent=kfe;function kh(t){"@babel/helpers - typeof";return kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kh(t)}function Jw(){return Jw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jw.apply(this,arguments)}function lk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lk(Object(n),!0).forEach(function(r){Cfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cfe(t,e,n){return e=Ife(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ife(t){var e=jfe(t,"string");return kh(e)=="symbol"?e:e+""}function jfe(t,e){if(kh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(kh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Nfe=function(e,n){var r=la(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},wm=function(e){var n=e.cx,r=e.cy,i=e.radius,a=e.angle,o=e.sign,s=e.isExternal,l=e.cornerRadius,u=e.cornerIsExternal,c=l*(s?1:-1)+i,f=Math.asin(l/c)/yy,m=u?a:a+o*f,g=tr(n,r,c,m),b=tr(n,r,i,m),v=u?a-o*f:a,x=tr(n,r,c*Math.cos(f*yy),v);return{center:g,circleTangency:b,lineTangency:x,theta:f}},u4=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,o=e.startAngle,s=e.endAngle,l=Nfe(o,s),u=o+l,c=tr(n,r,a,o),f=tr(n,r,a,u),m="M ".concat(c.x,",").concat(c.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(o>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var g=tr(n,r,i,o),b=tr(n,r,i,u);m+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(o<=u),`,
            `).concat(g.x,",").concat(g.y," Z")}else m+="L ".concat(n,",").concat(r," Z");return m},Dfe=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,o=e.cornerRadius,s=e.forceCornerRadius,l=e.cornerIsExternal,u=e.startAngle,c=e.endAngle,f=la(c-u),m=wm({cx:n,cy:r,radius:a,angle:u,sign:f,cornerRadius:o,cornerIsExternal:l}),g=m.circleTangency,b=m.lineTangency,v=m.theta,x=wm({cx:n,cy:r,radius:a,angle:c,sign:-f,cornerRadius:o,cornerIsExternal:l}),S=x.circleTangency,E=x.lineTangency,T=x.theta,j=l?Math.abs(u-c):Math.abs(u-c)-v-T;if(j<0)return s?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):u4({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:u,endAngle:c});var _="M ".concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(j>180),",").concat(+(f<0),",").concat(S.x,",").concat(S.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(E.x,",").concat(E.y,`
  `);if(i>0){var P=wm({cx:n,cy:r,radius:i,angle:u,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),w=P.circleTangency,O=P.lineTangency,I=P.theta,R=wm({cx:n,cy:r,radius:i,angle:c,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:l}),D=R.circleTangency,$=R.lineTangency,L=R.theta,ne=l?Math.abs(u-c):Math.abs(u-c)-I-L;if(ne<0&&o===0)return"".concat(_,"L").concat(n,",").concat(r,"Z");_+="L".concat($.x,",").concat($.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(ne>180),",").concat(+(f>0),",").concat(w.x,",").concat(w.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(O.x,",").concat(O.y,"Z")}else _+="L".concat(n,",").concat(r,"Z");return _},Mfe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},c4=function(e){var n=uk(uk({},Mfe),e),r=n.cx,i=n.cy,a=n.innerRadius,o=n.outerRadius,s=n.cornerRadius,l=n.forceCornerRadius,u=n.cornerIsExternal,c=n.startAngle,f=n.endAngle,m=n.className;if(o<a||c===f)return null;var g=bt("recharts-sector",m),b=o-a,v=Bl(s,b,0,!0),x;return v>0&&Math.abs(c-f)<360?x=Dfe({cx:r,cy:i,innerRadius:a,outerRadius:o,cornerRadius:Math.min(v,b/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:c,endAngle:f}):x=u4({cx:r,cy:i,innerRadius:a,outerRadius:o,startAngle:c,endAngle:f}),U.createElement("path",Jw({},st(n,!0),{className:g,d:x,role:"img"}))};function Ch(t){"@babel/helpers - typeof";return Ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ch(t)}function Zw(){return Zw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zw.apply(this,arguments)}function ck(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ck(Object(n),!0).forEach(function(r){Rfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ck(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rfe(t,e,n){return e=$fe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $fe(t){var e=Lfe(t,"string");return Ch(e)=="symbol"?e:e+""}function Lfe(t,e){if(Ch(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ch(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dk={curveBasisClosed:RX,curveBasisOpen:$X,curveBasis:MX,curveBumpX:wX,curveBumpY:_X,curveLinearClosed:LX,curveLinear:Bv,curveMonotoneX:FX,curveMonotoneY:zX,curveNatural:VX,curveStep:BX,curveStepAfter:WX,curveStepBefore:UX},_m=function(e){return e.x===+e.x&&e.y===+e.y},Qf=function(e){return e.x},Jf=function(e){return e.y},Ffe=function(e,n){if(ot(e))return e;var r="curve".concat(zv(e));return(r==="curveMonotone"||r==="curveBump")&&n?dk["".concat(r).concat(n==="vertical"?"Y":"X")]:dk[r]||Bv},zfe=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,a=i===void 0?[]:i,o=e.baseLine,s=e.layout,l=e.connectNulls,u=l===void 0?!1:l,c=Ffe(r,s),f=u?a.filter(function(v){return _m(v)}):a,m;if(Array.isArray(o)){var g=u?o.filter(function(v){return _m(v)}):o,b=f.map(function(v,x){return fk(fk({},v),{},{base:g[x]})});return s==="vertical"?m=dm().y(Jf).x1(Qf).x0(function(v){return v.base.x}):m=dm().x(Qf).y1(Jf).y0(function(v){return v.base.y}),m.defined(_m).curve(c),m(b)}return s==="vertical"&&ke(o)?m=dm().y(Jf).x1(Qf).x0(o):ke(o)?m=dm().x(Qf).y1(Jf).y0(o):m=fR().x(Qf).y(Jf),m.defined(_m).curve(c),m(f)},ac=function(e){var n=e.className,r=e.points,i=e.path,a=e.pathRef;if((!r||!r.length)&&!i)return null;var o=r&&r.length?zfe(e):i;return z.createElement("path",Zw({},st(e,!1),zg(e),{className:bt("recharts-curve",n),d:o,ref:a}))},f4={exports:{}},Vfe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Bfe=Vfe,Ufe=Bfe;function d4(){}function h4(){}h4.resetWarningCache=d4;var Wfe=function(){function t(r,i,a,o,s,l){if(l!==Ufe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:h4,resetWarningCache:d4};return n.PropTypes=n,n};f4.exports=Wfe();var qfe=f4.exports;const Ot=Lt(qfe);var Kfe=Object.getOwnPropertyNames,Hfe=Object.getOwnPropertySymbols,Gfe=Object.prototype.hasOwnProperty;function hk(t,e){return function(r,i,a){return t(r,i,a)&&e(r,i,a)}}function Sm(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var a=i.cache,o=a.get(n),s=a.get(r);if(o&&s)return o===r&&s===n;a.set(n,r),a.set(r,n);var l=t(n,r,i);return a.delete(n),a.delete(r),l}}function Yfe(t){return t!=null?t[Symbol.toStringTag]:void 0}function pk(t){return Kfe(t).concat(Hfe(t))}var Xfe=Object.hasOwn||function(t,e){return Gfe.call(t,e)};function ru(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var Qfe="__v",Jfe="__o",Zfe="_owner",mk=Object.getOwnPropertyDescriptor,gk=Object.keys;function ede(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function tde(t,e){return ru(t.getTime(),e.getTime())}function nde(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function rde(t,e){return t===e}function yk(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=t.entries(),o,s,l=0;(o=a.next())&&!o.done;){for(var u=e.entries(),c=!1,f=0;(s=u.next())&&!s.done;){if(i[f]){f++;continue}var m=o.value,g=s.value;if(n.equals(m[0],g[0],l,f,t,e,n)&&n.equals(m[1],g[1],m[0],g[0],t,e,n)){c=i[f]=!0;break}f++}if(!c)return!1;l++}return!0}var ide=ru;function ade(t,e,n){var r=gk(t),i=r.length;if(gk(e).length!==i)return!1;for(;i-- >0;)if(!p4(t,e,n,r[i]))return!1;return!0}function Zf(t,e,n){var r=pk(t),i=r.length;if(pk(e).length!==i)return!1;for(var a,o,s;i-- >0;)if(a=r[i],!p4(t,e,n,a)||(o=mk(t,a),s=mk(e,a),(o||s)&&(!o||!s||o.configurable!==s.configurable||o.enumerable!==s.enumerable||o.writable!==s.writable)))return!1;return!0}function ode(t,e){return ru(t.valueOf(),e.valueOf())}function sde(t,e){return t.source===e.source&&t.flags===e.flags}function vk(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=t.values(),o,s;(o=a.next())&&!o.done;){for(var l=e.values(),u=!1,c=0;(s=l.next())&&!s.done;){if(!i[c]&&n.equals(o.value,s.value,o.value,s.value,t,e,n)){u=i[c]=!0;break}c++}if(!u)return!1}return!0}function lde(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function ude(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function p4(t,e,n,r){return(r===Zfe||r===Jfe||r===Qfe)&&(t.$$typeof||e.$$typeof)?!0:Xfe(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var cde="[object Arguments]",fde="[object Boolean]",dde="[object Date]",hde="[object Error]",pde="[object Map]",mde="[object Number]",gde="[object Object]",yde="[object RegExp]",vde="[object Set]",bde="[object String]",xde="[object URL]",wde=Array.isArray,bk=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,xk=Object.assign,_de=Object.prototype.toString.call.bind(Object.prototype.toString);function Sde(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,a=t.areMapsEqual,o=t.areNumbersEqual,s=t.areObjectsEqual,l=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,c=t.areSetsEqual,f=t.areTypedArraysEqual,m=t.areUrlsEqual,g=t.unknownTagComparators;return function(v,x,S){if(v===x)return!0;if(v==null||x==null)return!1;var E=typeof v;if(E!==typeof x)return!1;if(E!=="object")return E==="number"?o(v,x,S):E==="function"?i(v,x,S):!1;var T=v.constructor;if(T!==x.constructor)return!1;if(T===Object)return s(v,x,S);if(wde(v))return e(v,x,S);if(bk!=null&&bk(v))return f(v,x,S);if(T===Date)return n(v,x,S);if(T===RegExp)return u(v,x,S);if(T===Map)return a(v,x,S);if(T===Set)return c(v,x,S);var j=_de(v);if(j===dde)return n(v,x,S);if(j===yde)return u(v,x,S);if(j===pde)return a(v,x,S);if(j===vde)return c(v,x,S);if(j===gde)return typeof v.then!="function"&&typeof x.then!="function"&&s(v,x,S);if(j===xde)return m(v,x,S);if(j===hde)return r(v,x,S);if(j===cde)return s(v,x,S);if(j===fde||j===mde||j===bde)return l(v,x,S);if(g){var _=g[j];if(!_){var P=Yfe(v);P&&(_=g[P])}if(_)return _(v,x,S)}return!1}}function Ede(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?Zf:ede,areDatesEqual:tde,areErrorsEqual:nde,areFunctionsEqual:rde,areMapsEqual:r?hk(yk,Zf):yk,areNumbersEqual:ide,areObjectsEqual:r?Zf:ade,arePrimitiveWrappersEqual:ode,areRegExpsEqual:sde,areSetsEqual:r?hk(vk,Zf):vk,areTypedArraysEqual:r?Zf:lde,areUrlsEqual:ude,unknownTagComparators:void 0};if(n&&(i=xk({},i,n(i))),e){var a=Sm(i.areArraysEqual),o=Sm(i.areMapsEqual),s=Sm(i.areObjectsEqual),l=Sm(i.areSetsEqual);i=xk({},i,{areArraysEqual:a,areMapsEqual:o,areObjectsEqual:s,areSetsEqual:l})}return i}function Ade(t){return function(e,n,r,i,a,o,s){return t(e,n,s)}}function Tde(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,a=t.strict;if(r)return function(l,u){var c=r(),f=c.cache,m=f===void 0?e?new WeakMap:void 0:f,g=c.meta;return n(l,u,{cache:m,equals:i,meta:g,strict:a})};if(e)return function(l,u){return n(l,u,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var o={cache:void 0,equals:i,meta:void 0,strict:a};return function(l,u){return n(l,u,o)}}var Pde=Vs();Vs({strict:!0});Vs({circular:!0});Vs({circular:!0,strict:!0});Vs({createInternalComparator:function(){return ru}});Vs({strict:!0,createInternalComparator:function(){return ru}});Vs({circular:!0,createInternalComparator:function(){return ru}});Vs({circular:!0,createInternalComparator:function(){return ru},strict:!0});function Vs(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,a=t.strict,o=a===void 0?!1:a,s=Ede(t),l=Sde(s),u=r?r(l):Ade(l);return Tde({circular:n,comparator:l,createState:i,equals:u,strict:o})}function Ode(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function wk(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(a){n<0&&(n=a),a-n>e?(t(a),n=-1):Ode(i)};requestAnimationFrame(r)}function e_(t){"@babel/helpers - typeof";return e_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e_(t)}function kde(t){return Nde(t)||jde(t)||Ide(t)||Cde()}function Cde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ide(t,e){if(t){if(typeof t=="string")return _k(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _k(t,e)}}function _k(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function jde(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Nde(t){if(Array.isArray(t))return t}function Dde(){var t={},e=function(){return null},n=!1,r=function i(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var o=a,s=kde(o),l=s[0],u=s.slice(1);if(typeof l=="number"){wk(i.bind(null,u),l);return}i(l),wk(i.bind(null,u));return}e_(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,r(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function Ih(t){"@babel/helpers - typeof";return Ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ih(t)}function Sk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ek(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Sk(Object(n),!0).forEach(function(r){m4(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function m4(t,e,n){return e=Mde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mde(t){var e=Rde(t,"string");return Ih(e)==="symbol"?e:String(e)}function Rde(t,e){if(Ih(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ih(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $de=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(a){return i.includes(a)})})},Lde=function(e){return e},Fde=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Id=function(e,n){return Object.keys(n).reduce(function(r,i){return Ek(Ek({},r),{},m4({},i,e(i,n[i])))},{})},Ak=function(e,n,r){return e.map(function(i){return"".concat(Fde(i)," ").concat(n,"ms ").concat(r)}).join(",")};function zde(t,e){return Ude(t)||Bde(t,e)||g4(t,e)||Vde()}function Vde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bde(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function Ude(t){if(Array.isArray(t))return t}function Wde(t){return Hde(t)||Kde(t)||g4(t)||qde()}function qde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g4(t,e){if(t){if(typeof t=="string")return t_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t_(t,e)}}function Kde(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Hde(t){if(Array.isArray(t))return t_(t)}function t_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var by=1e-4,y4=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},v4=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},Tk=function(e,n){return function(r){var i=y4(e,n);return v4(i,r)}},Gde=function(e,n){return function(r){var i=y4(e,n),a=[].concat(Wde(i.map(function(o,s){return o*s}).slice(1)),[0]);return v4(a,r)}},Pk=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],a=n[1],o=n[2],s=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,a=0,o=1,s=1;break;case"ease":i=.25,a=.1,o=.25,s=1;break;case"ease-in":i=.42,a=0,o=1,s=1;break;case"ease-out":i=.42,a=0,o=.58,s=1;break;case"ease-in-out":i=0,a=0,o=.58,s=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),c=zde(u,4);i=c[0],a=c[1],o=c[2],s=c[3]}}}var f=Tk(i,o),m=Tk(a,s),g=Gde(i,o),b=function(S){return S>1?1:S<0?0:S},v=function(S){for(var E=S>1?1:S,T=E,j=0;j<8;++j){var _=f(T)-E,P=g(T);if(Math.abs(_-E)<by||P<by)return m(T);T=b(T-_/P)}return m(T)};return v.isStepper=!1,v},Yde=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,a=i===void 0?8:i,o=e.dt,s=o===void 0?17:o,l=function(c,f,m){var g=-(c-f)*r,b=m*a,v=m+(g-b)*s/1e3,x=m*s/1e3+c;return Math.abs(x-f)<by&&Math.abs(v)<by?[f,0]:[x,v]};return l.isStepper=!0,l.dt=s,l},Xde=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Pk(i);case"spring":return Yde();default:if(i.split("(")[0]==="cubic-bezier")return Pk(i)}return typeof i=="function"?i:null};function jh(t){"@babel/helpers - typeof";return jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jh(t)}function Ok(t){return Zde(t)||Jde(t)||b4(t)||Qde()}function Qde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jde(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Zde(t){if(Array.isArray(t))return r_(t)}function kk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kk(Object(n),!0).forEach(function(r){n_(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function n_(t,e,n){return e=ehe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ehe(t){var e=the(t,"string");return jh(e)==="symbol"?e:String(e)}function the(t,e){if(jh(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jh(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nhe(t,e){return ahe(t)||ihe(t,e)||b4(t,e)||rhe()}function rhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b4(t,e){if(t){if(typeof t=="string")return r_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r_(t,e)}}function r_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ihe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function ahe(t){if(Array.isArray(t))return t}var xy=function(e,n,r){return e+(n-e)*r},i_=function(e){var n=e.from,r=e.to;return n!==r},ohe=function t(e,n,r){var i=Id(function(a,o){if(i_(o)){var s=e(o.from,o.to,o.velocity),l=nhe(s,2),u=l[0],c=l[1];return Xn(Xn({},o),{},{from:u,velocity:c})}return o},n);return r<1?Id(function(a,o){return i_(o)?Xn(Xn({},o),{},{velocity:xy(o.velocity,i[a].velocity,r),from:xy(o.from,i[a].from,r)}):o},n):t(e,i,r-1)};const she=function(t,e,n,r,i){var a=$de(t,e),o=a.reduce(function(x,S){return Xn(Xn({},x),{},n_({},S,[t[S],e[S]]))},{}),s=a.reduce(function(x,S){return Xn(Xn({},x),{},n_({},S,{from:t[S],velocity:0,to:e[S]}))},{}),l=-1,u,c,f=function(){return null},m=function(){return Id(function(S,E){return E.from},s)},g=function(){return!Object.values(s).filter(i_).length},b=function(S){u||(u=S);var E=S-u,T=E/n.dt;s=ohe(n,s,T),i(Xn(Xn(Xn({},t),e),m())),u=S,g()||(l=requestAnimationFrame(f))},v=function(S){c||(c=S);var E=(S-c)/r,T=Id(function(_,P){return xy.apply(void 0,Ok(P).concat([n(E)]))},o);if(i(Xn(Xn(Xn({},t),e),T)),E<1)l=requestAnimationFrame(f);else{var j=Id(function(_,P){return xy.apply(void 0,Ok(P).concat([n(1)]))},o);i(Xn(Xn(Xn({},t),e),j))}};return f=n.isStepper?b:v,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(l)}}};function Nc(t){"@babel/helpers - typeof";return Nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nc(t)}var lhe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function uhe(t,e){if(t==null)return{};var n=che(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function che(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Ib(t){return phe(t)||hhe(t)||dhe(t)||fhe()}function fhe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dhe(t,e){if(t){if(typeof t=="string")return a_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a_(t,e)}}function hhe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function phe(t){if(Array.isArray(t))return a_(t)}function a_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ck(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ji(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ck(Object(n),!0).forEach(function(r){dd(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ck(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dd(t,e,n){return e=x4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ghe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,x4(r.key),r)}}function yhe(t,e,n){return e&&ghe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function x4(t){var e=vhe(t,"string");return Nc(e)==="symbol"?e:String(e)}function vhe(t,e){if(Nc(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Nc(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bhe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o_(t,e)}function o_(t,e){return o_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},o_(t,e)}function xhe(t){var e=whe();return function(){var r=wy(t),i;if(e){var a=wy(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return s_(this,i)}}function s_(t,e){if(e&&(Nc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l_(t)}function l_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function whe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function wy(t){return wy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wy(t)}var Ua=function(t){bhe(n,t);var e=xhe(n);function n(r,i){var a;mhe(this,n),a=e.call(this,r,i);var o=a.props,s=o.isActive,l=o.attributeName,u=o.from,c=o.to,f=o.steps,m=o.children,g=o.duration;if(a.handleStyleChange=a.handleStyleChange.bind(l_(a)),a.changeStyle=a.changeStyle.bind(l_(a)),!s||g<=0)return a.state={style:{}},typeof m=="function"&&(a.state={style:c}),s_(a);if(f&&f.length)a.state={style:f[0].style};else if(u){if(typeof m=="function")return a.state={style:u},s_(a);a.state={style:l?dd({},l,u):u}}else a.state={style:{}};return a}return yhe(n,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,o=i.canBegin;this.mounted=!0,!(!a||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,o=a.isActive,s=a.canBegin,l=a.attributeName,u=a.shouldReAnimate,c=a.to,f=a.from,m=this.state.style;if(s){if(!o){var g={style:l?dd({},l,c):c};this.state&&m&&(l&&m[l]!==c||!l&&m!==c)&&this.setState(g);return}if(!(Pde(i.to,c)&&i.canBegin&&i.isActive)){var b=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=b||u?f:i.to;if(this.state&&m){var x={style:l?dd({},l,v):v};(l&&m[l]!==v||!l&&m!==v)&&this.setState(x)}this.runAnimation(Ji(Ji({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,o=i.from,s=i.to,l=i.duration,u=i.easing,c=i.begin,f=i.onAnimationEnd,m=i.onAnimationStart,g=she(o,s,Xde(u),l,this.changeStyle),b=function(){a.stopJSAnimation=g()};this.manager.start([m,c,b,l,f])}},{key:"runStepAnimation",value:function(i){var a=this,o=i.steps,s=i.begin,l=i.onAnimationStart,u=o[0],c=u.style,f=u.duration,m=f===void 0?0:f,g=function(v,x,S){if(S===0)return v;var E=x.duration,T=x.easing,j=T===void 0?"ease":T,_=x.style,P=x.properties,w=x.onAnimationEnd,O=S>0?o[S-1]:x,I=P||Object.keys(_);if(typeof j=="function"||j==="spring")return[].concat(Ib(v),[a.runJSAnimation.bind(a,{from:O.style,to:_,duration:E,easing:j}),E]);var R=Ak(I,E,j),D=Ji(Ji(Ji({},O.style),_),{},{transition:R});return[].concat(Ib(v),[D,E,w]).filter(Lde)};return this.manager.start([l].concat(Ib(o.reduce(g,[c,Math.max(m,s)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=Dde());var a=i.begin,o=i.duration,s=i.attributeName,l=i.to,u=i.easing,c=i.onAnimationStart,f=i.onAnimationEnd,m=i.steps,g=i.children,b=this.manager;if(this.unSubscribe=b.subscribe(this.handleStyleChange),typeof u=="function"||typeof g=="function"||u==="spring"){this.runJSAnimation(i);return}if(m.length>1){this.runStepAnimation(i);return}var v=s?dd({},s,l):l,x=Ak(Object.keys(v),o,u);b.start([c,a,Ji(Ji({},v),{},{transition:x}),o,f])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var s=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=uhe(i,lhe),u=z.Children.count(a),c=this.state.style;if(typeof a=="function")return a(c);if(!s||u===0||o<=0)return a;var f=function(g){var b=g.props,v=b.style,x=v===void 0?{}:v,S=b.className,E=z.cloneElement(g,Ji(Ji({},l),{},{style:Ji(Ji({},x),c),className:S}));return E};return u===1?f(z.Children.only(a)):U.createElement("div",null,z.Children.map(a,function(m){return f(m)}))}}]),n}(z.PureComponent);Ua.displayName="Animate";Ua.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ua.propTypes={from:Ot.oneOfType([Ot.object,Ot.string]),to:Ot.oneOfType([Ot.object,Ot.string]),attributeName:Ot.string,duration:Ot.number,begin:Ot.number,easing:Ot.oneOfType([Ot.string,Ot.func]),steps:Ot.arrayOf(Ot.shape({duration:Ot.number.isRequired,style:Ot.object.isRequired,easing:Ot.oneOfType([Ot.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Ot.func]),properties:Ot.arrayOf("string"),onAnimationEnd:Ot.func})),children:Ot.oneOfType([Ot.node,Ot.func]),isActive:Ot.bool,canBegin:Ot.bool,onAnimationEnd:Ot.func,shouldReAnimate:Ot.bool,onAnimationStart:Ot.func,onAnimationReStart:Ot.func};function Nh(t){"@babel/helpers - typeof";return Nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nh(t)}function _y(){return _y=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_y.apply(this,arguments)}function _he(t,e){return The(t)||Ahe(t,e)||Ehe(t,e)||She()}function She(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ehe(t,e){if(t){if(typeof t=="string")return Ik(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ik(t,e)}}function Ik(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ahe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function The(t){if(Array.isArray(t))return t}function jk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jk(Object(n),!0).forEach(function(r){Phe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Phe(t,e,n){return e=Ohe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ohe(t){var e=khe(t,"string");return Nh(e)=="symbol"?e:e+""}function khe(t,e){if(Nh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Nh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Dk=function(e,n,r,i,a){var o=Math.min(Math.abs(r)/2,Math.abs(i)/2),s=i>=0?1:-1,l=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,c;if(o>0&&a instanceof Array){for(var f=[0,0,0,0],m=0,g=4;m<g;m++)f[m]=a[m]>o?o:a[m];c="M".concat(e,",").concat(n+s*f[0]),f[0]>0&&(c+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(e+l*f[0],",").concat(n)),c+="L ".concat(e+r-l*f[1],",").concat(n),f[1]>0&&(c+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+s*f[1])),c+="L ".concat(e+r,",").concat(n+i-s*f[2]),f[2]>0&&(c+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(e+r-l*f[2],",").concat(n+i)),c+="L ".concat(e+l*f[3],",").concat(n+i),f[3]>0&&(c+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+i-s*f[3])),c+="Z"}else if(o>0&&a===+a&&a>0){var b=Math.min(o,a);c="M ".concat(e,",").concat(n+s*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e+l*b,",").concat(n,`
            L `).concat(e+r-l*b,",").concat(n,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e+r,",").concat(n+s*b,`
            L `).concat(e+r,",").concat(n+i-s*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e+r-l*b,",").concat(n+i,`
            L `).concat(e+l*b,",").concat(n+i,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e,",").concat(n+i-s*b," Z")}else c="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return c},Che=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,a=n.x,o=n.y,s=n.width,l=n.height;if(Math.abs(s)>0&&Math.abs(l)>0){var u=Math.min(a,a+s),c=Math.max(a,a+s),f=Math.min(o,o+l),m=Math.max(o,o+l);return r>=u&&r<=c&&i>=f&&i<=m}return!1},Ihe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},wE=function(e){var n=Nk(Nk({},Ihe),e),r=z.useRef(),i=z.useState(-1),a=_he(i,2),o=a[0],s=a[1];z.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var j=r.current.getTotalLength();j&&s(j)}catch{}},[]);var l=n.x,u=n.y,c=n.width,f=n.height,m=n.radius,g=n.className,b=n.animationEasing,v=n.animationDuration,x=n.animationBegin,S=n.isAnimationActive,E=n.isUpdateAnimationActive;if(l!==+l||u!==+u||c!==+c||f!==+f||c===0||f===0)return null;var T=bt("recharts-rectangle",g);return E?U.createElement(Ua,{canBegin:o>0,from:{width:c,height:f,x:l,y:u},to:{width:c,height:f,x:l,y:u},duration:v,animationEasing:b,isActive:E},function(j){var _=j.width,P=j.height,w=j.x,O=j.y;return U.createElement(Ua,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:v,isActive:S,easing:b},U.createElement("path",_y({},st(n,!0),{className:T,d:Dk(w,O,_,P,m),ref:r})))}):U.createElement("path",_y({},st(n,!0),{className:T,d:Dk(l,u,c,f,m)}))};function u_(){return u_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u_.apply(this,arguments)}var n0=function(e){var n=e.cx,r=e.cy,i=e.r,a=e.className,o=bt("recharts-dot",a);return n===+n&&r===+r&&i===+i?z.createElement("circle",u_({},st(e,!1),zg(e),{className:o,cx:n,cy:r,r:i})):null};function Dh(t){"@babel/helpers - typeof";return Dh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dh(t)}var jhe=["x","y","top","left","width","height","className"];function c_(){return c_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c_.apply(this,arguments)}function Mk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nhe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Mk(Object(n),!0).forEach(function(r){Dhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dhe(t,e,n){return e=Mhe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mhe(t){var e=Rhe(t,"string");return Dh(e)=="symbol"?e:e+""}function Rhe(t,e){if(Dh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Dh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $he(t,e){if(t==null)return{};var n=Lhe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Lhe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Fhe=function(e,n,r,i,a,o){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(o,",").concat(n,"h").concat(r)},zhe=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,o=e.top,s=o===void 0?0:o,l=e.left,u=l===void 0?0:l,c=e.width,f=c===void 0?0:c,m=e.height,g=m===void 0?0:m,b=e.className,v=$he(e,jhe),x=Nhe({x:r,y:a,top:s,left:u,width:f,height:g},v);return!ke(r)||!ke(a)||!ke(f)||!ke(g)||!ke(s)||!ke(u)?null:U.createElement("path",c_({},st(x,!0),{className:bt("recharts-cross",b),d:Fhe(r,a,f,g,s,u)}))},Vhe=MR,Bhe=Vhe(Object.getPrototypeOf,Object),Uhe=Bhe,Whe=Do,qhe=Uhe,Khe=Mo,Hhe="[object Object]",Ghe=Function.prototype,Yhe=Object.prototype,w4=Ghe.toString,Xhe=Yhe.hasOwnProperty,Qhe=w4.call(Object);function Jhe(t){if(!Khe(t)||Whe(t)!=Hhe)return!1;var e=qhe(t);if(e===null)return!0;var n=Xhe.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&w4.call(n)==Qhe}var Zhe=Jhe;const epe=Lt(Zhe);var tpe=Do,npe=Mo,rpe="[object Boolean]";function ipe(t){return t===!0||t===!1||npe(t)&&tpe(t)==rpe}var ape=ipe;const ope=Lt(ape);function Mh(t){"@babel/helpers - typeof";return Mh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mh(t)}function Sy(){return Sy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sy.apply(this,arguments)}function spe(t,e){return fpe(t)||cpe(t,e)||upe(t,e)||lpe()}function lpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function upe(t,e){if(t){if(typeof t=="string")return Rk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rk(t,e)}}function Rk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cpe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function fpe(t){if(Array.isArray(t))return t}function $k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Lk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$k(Object(n),!0).forEach(function(r){dpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$k(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dpe(t,e,n){return e=hpe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hpe(t){var e=ppe(t,"string");return Mh(e)=="symbol"?e:e+""}function ppe(t,e){if(Mh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Mh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Fk=function(e,n,r,i,a){var o=r-i,s;return s="M ".concat(e,",").concat(n),s+="L ".concat(e+r,",").concat(n),s+="L ".concat(e+r-o/2,",").concat(n+a),s+="L ".concat(e+r-o/2-i,",").concat(n+a),s+="L ".concat(e,",").concat(n," Z"),s},mpe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},gpe=function(e){var n=Lk(Lk({},mpe),e),r=z.useRef(),i=z.useState(-1),a=spe(i,2),o=a[0],s=a[1];z.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var T=r.current.getTotalLength();T&&s(T)}catch{}},[]);var l=n.x,u=n.y,c=n.upperWidth,f=n.lowerWidth,m=n.height,g=n.className,b=n.animationEasing,v=n.animationDuration,x=n.animationBegin,S=n.isUpdateAnimationActive;if(l!==+l||u!==+u||c!==+c||f!==+f||m!==+m||c===0&&f===0||m===0)return null;var E=bt("recharts-trapezoid",g);return S?U.createElement(Ua,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:m,x:l,y:u},to:{upperWidth:c,lowerWidth:f,height:m,x:l,y:u},duration:v,animationEasing:b,isActive:S},function(T){var j=T.upperWidth,_=T.lowerWidth,P=T.height,w=T.x,O=T.y;return U.createElement(Ua,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:v,easing:b},U.createElement("path",Sy({},st(n,!0),{className:E,d:Fk(w,O,j,_,P),ref:r})))}):U.createElement("g",null,U.createElement("path",Sy({},st(n,!0),{className:E,d:Fk(l,u,c,f,m)})))},ype=["option","shapeType","propTransformer","activeClassName","isActive"];function Rh(t){"@babel/helpers - typeof";return Rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rh(t)}function vpe(t,e){if(t==null)return{};var n=bpe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function bpe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function zk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ey(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zk(Object(n),!0).forEach(function(r){xpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xpe(t,e,n){return e=wpe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wpe(t){var e=_pe(t,"string");return Rh(e)=="symbol"?e:e+""}function _pe(t,e){if(Rh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Spe(t,e){return Ey(Ey({},e),t)}function Epe(t,e){return t==="symbols"}function Vk(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return U.createElement(wE,n);case"trapezoid":return U.createElement(gpe,n);case"sector":return U.createElement(c4,n);case"symbols":if(Epe(e))return U.createElement(zS,n);break;default:return null}}function Ape(t){return z.isValidElement(t)?t.props:t}function Tpe(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?Spe:r,a=t.activeClassName,o=a===void 0?"recharts-active-shape":a,s=t.isActive,l=vpe(t,ype),u;if(z.isValidElement(e))u=z.cloneElement(e,Ey(Ey({},l),Ape(e)));else if(ot(e))u=e(l);else if(epe(e)&&!ope(e)){var c=i(e,l);u=U.createElement(Vk,{shapeType:n,elementProps:c})}else{var f=l;u=U.createElement(Vk,{shapeType:n,elementProps:f})}return s?U.createElement(Yt,{className:o},u):u}function r0(t,e){return e!=null&&"trapezoids"in t.props}function i0(t,e){return e!=null&&"sectors"in t.props}function $h(t,e){return e!=null&&"points"in t.props}function Ppe(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,a=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&a}function Ope(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function kpe(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function Cpe(t,e){var n;return r0(t,e)?n=Ppe:i0(t,e)?n=Ope:$h(t,e)&&(n=kpe),n}function Ipe(t,e){var n;return r0(t,e)?n="trapezoids":i0(t,e)?n="sectors":$h(t,e)&&(n="points"),n}function jpe(t,e){if(r0(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(i0(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return $h(t,e)?e.payload:{}}function Npe(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=Ipe(n,e),a=jpe(n,e),o=r.filter(function(l,u){var c=Ic(a,l),f=n.props[i].filter(function(b){var v=Cpe(n,e);return v(b,e)}),m=n.props[i].indexOf(f[f.length-1]),g=u===m;return c&&g}),s=r.indexOf(o[o.length-1]);return s}var Dpe=Math.ceil,Mpe=Math.max;function Rpe(t,e,n,r){for(var i=-1,a=Mpe(Dpe((e-t)/(n||1)),0),o=Array(a);a--;)o[r?a:++i]=t,t+=n;return o}var $pe=Rpe,Lpe=e$,Bk=1/0,Fpe=17976931348623157e292;function zpe(t){if(!t)return t===0?t:0;if(t=Lpe(t),t===Bk||t===-Bk){var e=t<0?-1:1;return e*Fpe}return t===t?t:0}var _4=zpe,Vpe=$pe,Bpe=Kv,jb=_4;function Upe(t){return function(e,n,r){return r&&typeof r!="number"&&Bpe(e,n,r)&&(n=r=void 0),e=jb(e),n===void 0?(n=e,e=0):n=jb(n),r=r===void 0?e<n?1:-1:jb(r),Vpe(e,n,r,t)}}var Wpe=Upe,qpe=Wpe,Kpe=qpe(),Hpe=Kpe;const Ay=Lt(Hpe);function Lh(t){"@babel/helpers - typeof";return Lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lh(t)}function Uk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Wk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Uk(Object(n),!0).forEach(function(r){S4(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Uk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function S4(t,e,n){return e=Gpe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gpe(t){var e=Ype(t,"string");return Lh(e)=="symbol"?e:e+""}function Ype(t,e){if(Lh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xpe=["Webkit","Moz","O","ms"],Qpe=function(e,n){var r=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=Xpe.reduce(function(a,o){return Wk(Wk({},a),{},S4({},o+r,n))},{});return i[e]=n,i};function Dc(t){"@babel/helpers - typeof";return Dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dc(t)}function Ty(){return Ty=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ty.apply(this,arguments)}function qk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qk(Object(n),!0).forEach(function(r){ti(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kk(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A4(r.key),r)}}function Zpe(t,e,n){return e&&Kk(t.prototype,e),n&&Kk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function eme(t,e,n){return e=Py(e),tme(t,E4()?Reflect.construct(e,n||[],Py(t).constructor):e.apply(t,n))}function tme(t,e){if(e&&(Dc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nme(t)}function nme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E4=function(){return!!t})()}function Py(t){return Py=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Py(t)}function rme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f_(t,e)}function f_(t,e){return f_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},f_(t,e)}function ti(t,e,n){return e=A4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A4(t){var e=ime(t,"string");return Dc(e)=="symbol"?e:e+""}function ime(t,e){if(Dc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Dc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ame=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,a=e.x,o=e.width,s=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,u=kd().domain(Ay(0,l)).range([a,a+o-s]),c=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:c}},Hk=function(e){return e.changedTouches&&!!e.changedTouches.length},Mc=function(t){function e(n){var r;return Jpe(this,e),r=eme(this,e,[n]),ti(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),ti(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),ti(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,a=i.endIndex,o=i.onDragEnd,s=i.startIndex;o==null||o({endIndex:a,startIndex:s})}),r.detachDragEndListener()}),ti(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),ti(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),ti(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),ti(r,"handleSlideDragStart",function(i){var a=Hk(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return rme(e,t),Zpe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,a=r.endX,o=this.state.scaleValues,s=this.props,l=s.gap,u=s.data,c=u.length-1,f=Math.min(i,a),m=Math.max(i,a),g=e.getIndexInRange(o,f),b=e.getIndexInRange(o,m);return{startIndex:g-g%l,endIndex:b===c?c:b-b%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,a=i.data,o=i.tickFormatter,s=i.dataKey,l=kr(a[r],s,r);return ot(o)?o(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,a=i.slideMoveStartX,o=i.startX,s=i.endX,l=this.props,u=l.x,c=l.width,f=l.travellerWidth,m=l.startIndex,g=l.endIndex,b=l.onChange,v=r.pageX-a;v>0?v=Math.min(v,u+c-f-s,u+c-f-o):v<0&&(v=Math.max(v,u-o,u-s));var x=this.getIndex({startX:o+v,endX:s+v});(x.startIndex!==m||x.endIndex!==g)&&b&&b(x),this.setState({startX:o+v,endX:s+v,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var a=Hk(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,a=i.brushMoveStartX,o=i.movingTravellerId,s=i.endX,l=i.startX,u=this.state[o],c=this.props,f=c.x,m=c.width,g=c.travellerWidth,b=c.onChange,v=c.gap,x=c.data,S={startX:this.state.startX,endX:this.state.endX},E=r.pageX-a;E>0?E=Math.min(E,f+m-g-u):E<0&&(E=Math.max(E,f-u)),S[o]=u+E;var T=this.getIndex(S),j=T.startIndex,_=T.endIndex,P=function(){var O=x.length-1;return o==="startX"&&(s>l?j%v===0:_%v===0)||s<l&&_===O||o==="endX"&&(s>l?_%v===0:j%v===0)||s>l&&_===O};this.setState(ti(ti({},o,u+E),"brushMoveStartX",r.pageX),function(){b&&P()&&b(T)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var a=this,o=this.state,s=o.scaleValues,l=o.startX,u=o.endX,c=this.state[i],f=s.indexOf(c);if(f!==-1){var m=f+r;if(!(m===-1||m>=s.length)){var g=s[m];i==="startX"&&g>=u||i==="endX"&&g<=l||this.setState(ti({},i,g),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,s=r.height,l=r.fill,u=r.stroke;return U.createElement("rect",{stroke:u,fill:l,x:i,y:a,width:o,height:s})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,s=r.height,l=r.data,u=r.children,c=r.padding,f=z.Children.only(u);return f?U.cloneElement(f,{x:i,y:a,width:o,height:s,margin:c,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var a,o,s=this,l=this.props,u=l.y,c=l.travellerWidth,f=l.height,m=l.traveller,g=l.ariaLabel,b=l.data,v=l.startIndex,x=l.endIndex,S=Math.max(r,this.props.x),E=Nb(Nb({},st(this.props,!1)),{},{x:S,y:u,width:c,height:f}),T=g||"Min value: ".concat((a=b[v])===null||a===void 0?void 0:a.name,", Max value: ").concat((o=b[x])===null||o===void 0?void 0:o.name);return U.createElement(Yt,{tabIndex:0,role:"slider","aria-label":T,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(_){["ArrowLeft","ArrowRight"].includes(_.key)&&(_.preventDefault(),_.stopPropagation(),s.handleTravellerMoveKeyboard(_.key==="ArrowRight"?1:-1,i))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(m,E))}},{key:"renderSlide",value:function(r,i){var a=this.props,o=a.y,s=a.height,l=a.stroke,u=a.travellerWidth,c=Math.min(r,i)+u,f=Math.max(Math.abs(i-r)-u,0);return U.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:c,y:o,width:f,height:s})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,a=r.endIndex,o=r.y,s=r.height,l=r.travellerWidth,u=r.stroke,c=this.state,f=c.startX,m=c.endX,g=5,b={pointerEvents:"none",fill:u};return U.createElement(Yt,{className:"recharts-brush-texts"},U.createElement(ty,Ty({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,m)-g,y:o+s/2},b),this.getTextOfTick(i)),U.createElement(ty,Ty({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,m)+l+g,y:o+s/2},b),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,i=r.data,a=r.className,o=r.children,s=r.x,l=r.y,u=r.width,c=r.height,f=r.alwaysShowText,m=this.state,g=m.startX,b=m.endX,v=m.isTextActive,x=m.isSlideMoving,S=m.isTravellerMoving,E=m.isTravellerFocused;if(!i||!i.length||!ke(s)||!ke(l)||!ke(u)||!ke(c)||u<=0||c<=0)return null;var T=bt("recharts-brush",a),j=U.Children.count(o)===1,_=Qpe("userSelect","none");return U.createElement(Yt,{className:T,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:_},this.renderBackground(),j&&this.renderPanorama(),this.renderSlide(g,b),this.renderTravellerLayer(g,"startX"),this.renderTravellerLayer(b,"endX"),(v||x||S||E||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,a=r.y,o=r.width,s=r.height,l=r.stroke,u=Math.floor(a+s/2)-1;return U.createElement(U.Fragment,null,U.createElement("rect",{x:i,y:a,width:o,height:s,fill:l,stroke:"none"}),U.createElement("line",{x1:i+1,y1:u,x2:i+o-1,y2:u,fill:"none",stroke:"#fff"}),U.createElement("line",{x1:i+1,y1:u+2,x2:i+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var a;return U.isValidElement(r)?a=U.cloneElement(r,i):ot(r)?a=r(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(r,i){var a=r.data,o=r.width,s=r.x,l=r.travellerWidth,u=r.updateId,c=r.startIndex,f=r.endIndex;if(a!==i.prevData||u!==i.prevUpdateId)return Nb({prevData:a,prevTravellerWidth:l,prevUpdateId:u,prevX:s,prevWidth:o},a&&a.length?ame({data:a,width:o,x:s,travellerWidth:l,startIndex:c,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||s!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([s,s+o-l]);var m=i.scale.domain().map(function(g){return i.scale(g)});return{prevData:a,prevTravellerWidth:l,prevUpdateId:u,prevX:s,prevWidth:o,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:m}}return null}},{key:"getIndexInRange",value:function(r,i){for(var a=r.length,o=0,s=a-1;s-o>1;){var l=Math.floor((o+s)/2);r[l]>i?s=l:o=l}return i>=r[s]?s:o}}])}(z.PureComponent);ti(Mc,"displayName","Brush");ti(Mc,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var ome=HS;function sme(t,e){var n;return ome(t,function(r,i,a){return n=e(r,i,a),!n}),!!n}var lme=sme,ume=PR,cme=Ls,fme=lme,dme=Gr,hme=Kv;function pme(t,e,n){var r=dme(t)?ume:fme;return n&&hme(t,e,n)&&(e=void 0),r(t,cme(e))}var mme=pme;const gme=Lt(mme);var za=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},Gk=YR;function yme(t,e,n){e=="__proto__"&&Gk?Gk(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var vme=yme,bme=vme,xme=HR,wme=Ls;function _me(t,e){var n={};return e=wme(e),xme(t,function(r,i,a){bme(n,i,e(r,i,a))}),n}var Sme=_me;const Eme=Lt(Sme);function Ame(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var Tme=Ame,Pme=HS;function Ome(t,e){var n=!0;return Pme(t,function(r,i,a){return n=!!e(r,i,a),n}),n}var kme=Ome,Cme=Tme,Ime=kme,jme=Ls,Nme=Gr,Dme=Kv;function Mme(t,e,n){var r=Nme(t)?Cme:Ime;return n&&Dme(t,e,n)&&(e=void 0),r(t,jme(e))}var Rme=Mme;const T4=Lt(Rme);var $me=["x","y"];function Fh(t){"@babel/helpers - typeof";return Fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fh(t)}function d_(){return d_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},d_.apply(this,arguments)}function Yk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ed(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Yk(Object(n),!0).forEach(function(r){Lme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lme(t,e,n){return e=Fme(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fme(t){var e=zme(t,"string");return Fh(e)=="symbol"?e:e+""}function zme(t,e){if(Fh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Fh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vme(t,e){if(t==null)return{};var n=Bme(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Bme(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ume(t,e){var n=t.x,r=t.y,i=Vme(t,$me),a="".concat(n),o=parseInt(a,10),s="".concat(r),l=parseInt(s,10),u="".concat(e.height||i.height),c=parseInt(u,10),f="".concat(e.width||i.width),m=parseInt(f,10);return ed(ed(ed(ed(ed({},e),i),o?{x:o}:{}),l?{y:l}:{}),{},{height:c,width:m,name:e.name,radius:e.radius})}function Xk(t){return U.createElement(Tpe,d_({shapeType:"rectangle",propTransformer:Ume,activeClassName:"recharts-active-bar"},t))}var Wme=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var a=ke(r)||sY(r);return a?e(r,i):(a||Wl(),n)}},qme=["value","background"],P4;function Rc(t){"@babel/helpers - typeof";return Rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rc(t)}function Kme(t,e){if(t==null)return{};var n=Hme(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Hme(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Oy(){return Oy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oy.apply(this,arguments)}function Qk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function An(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Qk(Object(n),!0).forEach(function(r){os(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jk(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,k4(r.key),r)}}function Yme(t,e,n){return e&&Jk(t.prototype,e),n&&Jk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Xme(t,e,n){return e=ky(e),Qme(t,O4()?Reflect.construct(e,n||[],ky(t).constructor):e.apply(t,n))}function Qme(t,e){if(e&&(Rc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jme(t)}function Jme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(O4=function(){return!!t})()}function ky(t){return ky=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ky(t)}function Zme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h_(t,e)}function h_(t,e){return h_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},h_(t,e)}function os(t,e,n){return e=k4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k4(t){var e=ege(t,"string");return Rc(e)=="symbol"?e:e+""}function ege(t,e){if(Rc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Tr=function(t){function e(){var n;Gme(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Xme(this,e,[].concat(i)),os(n,"state",{isAnimationFinished:!1}),os(n,"id",hf("recharts-bar-")),os(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),os(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return Zme(e,t),Yme(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,a=this.props,o=a.shape,s=a.dataKey,l=a.activeIndex,u=a.activeBar,c=st(this.props,!1);return r&&r.map(function(f,m){var g=m===l,b=g?u:o,v=An(An(An({},c),f),{},{isActive:g,option:b,index:m,dataKey:s,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return U.createElement(Yt,Oy({className:"recharts-bar-rectangle"},Vg(i.props,f,m),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(m)}),U.createElement(Xk,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,a=i.data,o=i.layout,s=i.isAnimationActive,l=i.animationBegin,u=i.animationDuration,c=i.animationEasing,f=i.animationId,m=this.state.prevData;return U.createElement(Ua,{begin:l,duration:u,isActive:s,easing:c,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var b=g.t,v=a.map(function(x,S){var E=m&&m[S];if(E){var T=Zn(E.x,x.x),j=Zn(E.y,x.y),_=Zn(E.width,x.width),P=Zn(E.height,x.height);return An(An({},x),{},{x:T(b),y:j(b),width:_(b),height:P(b)})}if(o==="horizontal"){var w=Zn(0,x.height),O=w(b);return An(An({},x),{},{y:x.y+x.height-O,height:O})}var I=Zn(0,x.width),R=I(b);return An(An({},x),{},{width:R})});return U.createElement(Yt,null,r.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,a=r.isAnimationActive,o=this.state.prevData;return a&&i&&i.length&&(!o||!Ic(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,a=i.data,o=i.dataKey,s=i.activeIndex,l=st(this.props.background,!1);return a.map(function(u,c){u.value;var f=u.background,m=Kme(u,qme);if(!f)return null;var g=An(An(An(An(An({},m),{},{fill:"#eee"},f),l),Vg(r.props,u,c)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:c,className:"recharts-bar-background-rectangle"});return U.createElement(Xk,Oy({key:"background-bar-".concat(c),option:r.props.background,isActive:c===s},g))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.data,s=a.xAxis,l=a.yAxis,u=a.layout,c=a.children,f=Di(c,wp);if(!f)return null;var m=u==="vertical"?o[0].height/2:o[0].width/2,g=function(x,S){var E=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:E,errorVal:kr(x,S)}},b={clipPath:r?"url(#clipPath-".concat(i,")"):null};return U.createElement(Yt,b,f.map(function(v){return U.cloneElement(v,{key:"error-bar-".concat(i,"-").concat(v.props.dataKey),data:o,xAxis:s,yAxis:l,layout:u,offset:m,dataPointFormatter:g})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.data,o=r.className,s=r.xAxis,l=r.yAxis,u=r.left,c=r.top,f=r.width,m=r.height,g=r.isAnimationActive,b=r.background,v=r.id;if(i||!a||!a.length)return null;var x=this.state.isAnimationFinished,S=bt("recharts-bar",o),E=s&&s.allowDataOverflow,T=l&&l.allowDataOverflow,j=E||T,_=ft(v)?this.id:v;return U.createElement(Yt,{className:S},E||T?U.createElement("defs",null,U.createElement("clipPath",{id:"clipPath-".concat(_)},U.createElement("rect",{x:E?u:u-f/2,y:T?c:c-m/2,width:E?f:f*2,height:T?m:m*2}))):null,U.createElement(Yt,{className:"recharts-bar-rectangles",clipPath:j?"url(#clipPath-".concat(_,")"):null},b?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(j,_),(!g||x)&&ci.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(z.PureComponent);P4=Tr;os(Tr,"displayName","Bar");os(Tr,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!eu.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});os(Tr,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,a=t.xAxis,o=t.yAxis,s=t.xAxisTicks,l=t.yAxisTicks,u=t.stackedData,c=t.dataStartIndex,f=t.displayedData,m=t.offset,g=kce(r,n);if(!g)return null;var b=e.layout,v=n.type.defaultProps,x=v!==void 0?An(An({},v),n.props):n.props,S=x.dataKey,E=x.children,T=x.minPointSize,j=b==="horizontal"?o:a,_=u?j.scale.domain():null,P=$ce({numericAxis:j}),w=Di(E,gp),O=f.map(function(I,R){var D,$,L,ne,ae,ce;u?D=Cce(u[c+R],_):(D=kr(I,S),Array.isArray(D)||(D=[P,D]));var me=Wme(T,P4.defaultProps.minPointSize)(D[1],R);if(b==="horizontal"){var X,ie=[o.scale(D[0]),o.scale(D[1])],ge=ie[0],Te=ie[1];$=QO({axis:a,ticks:s,bandSize:i,offset:g.offset,entry:I,index:R}),L=(X=Te??ge)!==null&&X!==void 0?X:void 0,ne=g.size;var be=ge-Te;if(ae=Number.isNaN(be)?0:be,ce={x:$,y:o.y,width:ne,height:o.height},Math.abs(me)>0&&Math.abs(ae)<Math.abs(me)){var he=la(ae||me)*(Math.abs(me)-Math.abs(ae));L-=he,ae+=he}}else{var Se=[a.scale(D[0]),a.scale(D[1])],Ve=Se[0],We=Se[1];if($=Ve,L=QO({axis:o,ticks:l,bandSize:i,offset:g.offset,entry:I,index:R}),ne=We-Ve,ae=g.size,ce={x:a.x,y:L,width:a.width,height:ae},Math.abs(me)>0&&Math.abs(ne)<Math.abs(me)){var we=la(ne||me)*(Math.abs(me)-Math.abs(ne));ne+=we}}return An(An(An({},I),{},{x:$,y:L,width:ne,height:ae,value:u?D:D[1],payload:I,background:ce},w&&w[R]&&w[R].props),{},{tooltipPayload:[s4(n,I)],tooltipPosition:{x:$+ne/2,y:L+ae/2}})});return An({data:O,layout:b},m)});function zh(t){"@babel/helpers - typeof";return zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zh(t)}function tge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zk(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,C4(r.key),r)}}function nge(t,e,n){return e&&Zk(t.prototype,e),n&&Zk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function eC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ta(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eC(Object(n),!0).forEach(function(r){a0(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function a0(t,e,n){return e=C4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C4(t){var e=rge(t,"string");return zh(e)=="symbol"?e:e+""}function rge(t,e){if(zh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _E=function(e,n,r,i,a){var o=e.width,s=e.height,l=e.layout,u=e.children,c=Object.keys(n),f={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:s-r.bottom,bottomMirror:s-r.bottom},m=!!ii(u,Tr);return c.reduce(function(g,b){var v=n[b],x=v.orientation,S=v.domain,E=v.padding,T=E===void 0?{}:E,j=v.mirror,_=v.reversed,P="".concat(x).concat(j?"Mirror":""),w,O,I,R,D;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var $=S[1]-S[0],L=1/0,ne=v.categoricalDomain.sort(cY);if(ne.forEach(function(Se,Ve){Ve>0&&(L=Math.min((Se||0)-(ne[Ve-1]||0),L))}),Number.isFinite(L)){var ae=L/$,ce=v.layout==="vertical"?r.height:r.width;if(v.padding==="gap"&&(w=ae*ce/2),v.padding==="no-gap"){var me=Bl(e.barCategoryGap,ae*ce),X=ae*ce/2;w=X-me-(X-me)/ce*me}}}i==="xAxis"?O=[r.left+(T.left||0)+(w||0),r.left+r.width-(T.right||0)-(w||0)]:i==="yAxis"?O=l==="horizontal"?[r.top+r.height-(T.bottom||0),r.top+(T.top||0)]:[r.top+(T.top||0)+(w||0),r.top+r.height-(T.bottom||0)-(w||0)]:O=v.range,_&&(O=[O[1],O[0]]);var ie=Pce(v,a,m),ge=ie.scale,Te=ie.realScaleType;ge.domain(S).range(O),Oce(ge);var be=Rce(ge,ta(ta({},v),{},{realScaleType:Te}));i==="xAxis"?(D=x==="top"&&!j||x==="bottom"&&j,I=r.left,R=f[P]-D*v.height):i==="yAxis"&&(D=x==="left"&&!j||x==="right"&&j,I=f[P]-D*v.width,R=r.top);var he=ta(ta(ta({},v),be),{},{realScaleType:Te,x:I,y:R,scale:ge,width:i==="xAxis"?r.width:v.width,height:i==="yAxis"?r.height:v.height});return he.bandSize=gy(he,be),!v.hide&&i==="xAxis"?f[P]+=(D?-1:1)*he.height:v.hide||(f[P]+=(D?-1:1)*he.width),ta(ta({},g),{},a0({},b,he))},{})},I4=function(e,n){var r=e.x,i=e.y,a=n.x,o=n.y;return{x:Math.min(r,a),y:Math.min(i,o),width:Math.abs(a-r),height:Math.abs(o-i)}},ige=function(e){var n=e.x1,r=e.y1,i=e.x2,a=e.y2;return I4({x:n,y:r},{x:i,y:a})},j4=function(){function t(e){tge(this,t),this.scale=e}return nge(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,a=r.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(n)+s}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],a=r[r.length-1];return i<=a?n>=i&&n<=a:n>=a&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();a0(j4,"EPS",1e-4);var SE=function(e){var n=Object.keys(e).reduce(function(r,i){return ta(ta({},r),{},a0({},i,j4.create(e[i])))},{});return ta(ta({},n),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.bandAware,s=a.position;return Eme(i,function(l,u){return n[u].apply(l,{bandAware:o,position:s})})},isInRange:function(i){return T4(i,function(a,o){return n[o].isInRange(a)})}})};function age(t){return(t%180+180)%180}var oge=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=age(i),o=a*Math.PI/180,s=Math.atan(r/n),l=o>s&&o<Math.PI-s?r/Math.sin(o):n/Math.cos(o);return Math.abs(l)},sge=Ls,lge=mp,uge=Wv;function cge(t){return function(e,n,r){var i=Object(e);if(!lge(e)){var a=sge(n);e=uge(e),n=function(s){return a(i[s],s,i)}}var o=t(e,n,r);return o>-1?i[a?e[o]:o]:void 0}}var fge=cge,dge=_4;function hge(t){var e=dge(t),n=e%1;return e===e?n?e-n:e:0}var pge=hge,mge=VR,gge=Ls,yge=pge,vge=Math.max;function bge(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:yge(n);return i<0&&(i=vge(r+i,0)),mge(t,gge(e),i)}var xge=bge,wge=fge,_ge=xge,Sge=wge(_ge),Ege=Sge;const Age=Lt(Ege);var Tge=hG(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),EE=z.createContext(void 0),AE=z.createContext(void 0),N4=z.createContext(void 0),D4=z.createContext({}),M4=z.createContext(void 0),R4=z.createContext(0),$4=z.createContext(0),tC=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,a=n.offset,o=e.clipPathId,s=e.children,l=e.width,u=e.height,c=Tge(a);return U.createElement(EE.Provider,{value:r},U.createElement(AE.Provider,{value:i},U.createElement(D4.Provider,{value:a},U.createElement(N4.Provider,{value:c},U.createElement(M4.Provider,{value:o},U.createElement(R4.Provider,{value:u},U.createElement($4.Provider,{value:l},s)))))))},Pge=function(){return z.useContext(M4)},L4=function(e){var n=z.useContext(EE);n==null&&Wl();var r=n[e];return r==null&&Wl(),r},Oge=function(){var e=z.useContext(EE);return ts(e)},kge=function(){var e=z.useContext(AE),n=Age(e,function(r){return T4(r.domain,Number.isFinite)});return n||ts(e)},F4=function(e){var n=z.useContext(AE);n==null&&Wl();var r=n[e];return r==null&&Wl(),r},Cge=function(){var e=z.useContext(N4);return e},Ige=function(){return z.useContext(D4)},TE=function(){return z.useContext($4)},PE=function(){return z.useContext(R4)};function $c(t){"@babel/helpers - typeof";return $c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$c(t)}function jge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,V4(r.key),r)}}function Dge(t,e,n){return e&&Nge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mge(t,e,n){return e=Cy(e),Rge(t,z4()?Reflect.construct(e,n||[],Cy(t).constructor):e.apply(t,n))}function Rge(t,e){if(e&&($c(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $ge(t)}function $ge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function z4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(z4=function(){return!!t})()}function Cy(t){return Cy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Cy(t)}function Lge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p_(t,e)}function p_(t,e){return p_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},p_(t,e)}function nC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nC(Object(n),!0).forEach(function(r){OE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function OE(t,e,n){return e=V4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function V4(t){var e=Fge(t,"string");return $c(e)=="symbol"?e:e+""}function Fge(t,e){if($c(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($c(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function zge(t,e){return Wge(t)||Uge(t,e)||Bge(t,e)||Vge()}function Vge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bge(t,e){if(t){if(typeof t=="string")return iC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iC(t,e)}}function iC(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Uge(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function Wge(t){if(Array.isArray(t))return t}function m_(){return m_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m_.apply(this,arguments)}var qge=function(e,n){var r;return U.isValidElement(e)?r=U.cloneElement(e,n):ot(e)?r=e(n):r=U.createElement("line",m_({},n,{className:"recharts-reference-line-line"})),r},Kge=function(e,n,r,i,a,o,s,l,u){var c=a.x,f=a.y,m=a.width,g=a.height;if(r){var b=u.y,v=e.y.apply(b,{position:o});if(za(u,"discard")&&!e.y.isInRange(v))return null;var x=[{x:c+m,y:v},{x:c,y:v}];return l==="left"?x.reverse():x}if(n){var S=u.x,E=e.x.apply(S,{position:o});if(za(u,"discard")&&!e.x.isInRange(E))return null;var T=[{x:E,y:f+g},{x:E,y:f}];return s==="top"?T.reverse():T}if(i){var j=u.segment,_=j.map(function(P){return e.apply(P,{position:o})});return za(u,"discard")&&gme(_,function(P){return!e.isInRange(P)})?null:_}return null};function Hge(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,a=t.yAxisId,o=t.shape,s=t.className,l=t.alwaysShow,u=Pge(),c=L4(i),f=F4(a),m=Cge();if(!u||!m)return null;vo(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var g=SE({x:c.scale,y:f.scale}),b=Rn(e),v=Rn(n),x=r&&r.length===2,S=Kge(g,b,v,x,m,t.position,c.orientation,f.orientation,t);if(!S)return null;var E=zge(S,2),T=E[0],j=T.x,_=T.y,P=E[1],w=P.x,O=P.y,I=za(t,"hidden")?"url(#".concat(u,")"):void 0,R=rC(rC({clipPath:I},st(t,!0)),{},{x1:j,y1:_,x2:w,y2:O});return U.createElement(Yt,{className:bt("recharts-reference-line",s)},qge(o,R),gr.renderCallByParent(t,ige({x1:j,y1:_,x2:w,y2:O})))}var o0=function(t){function e(){return jge(this,e),Mge(this,e,arguments)}return Lge(e,t),Dge(e,[{key:"render",value:function(){return U.createElement(Hge,this.props)}}])}(U.Component);OE(o0,"displayName","ReferenceLine");OE(o0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function g_(){return g_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},g_.apply(this,arguments)}function Lc(t){"@babel/helpers - typeof";return Lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lc(t)}function aC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aC(Object(n),!0).forEach(function(r){s0(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,U4(r.key),r)}}function Xge(t,e,n){return e&&Yge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Qge(t,e,n){return e=Iy(e),Jge(t,B4()?Reflect.construct(e,n||[],Iy(t).constructor):e.apply(t,n))}function Jge(t,e){if(e&&(Lc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zge(t)}function Zge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function B4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(B4=function(){return!!t})()}function Iy(t){return Iy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Iy(t)}function eye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y_(t,e)}function y_(t,e){return y_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},y_(t,e)}function s0(t,e,n){return e=U4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function U4(t){var e=tye(t,"string");return Lc(e)=="symbol"?e:e+""}function tye(t,e){if(Lc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var nye=function(e){var n=e.x,r=e.y,i=e.xAxis,a=e.yAxis,o=SE({x:i.scale,y:a.scale}),s=o.apply({x:n,y:r},{bandAware:!0});return za(e,"discard")&&!o.isInRange(s)?null:s},l0=function(t){function e(){return Gge(this,e),Qge(this,e,arguments)}return eye(e,t),Xge(e,[{key:"render",value:function(){var r=this.props,i=r.x,a=r.y,o=r.r,s=r.alwaysShow,l=r.clipPathId,u=Rn(i),c=Rn(a);if(vo(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!c)return null;var f=nye(this.props);if(!f)return null;var m=f.x,g=f.y,b=this.props,v=b.shape,x=b.className,S=za(this.props,"hidden")?"url(#".concat(l,")"):void 0,E=oC(oC({clipPath:S},st(this.props,!0)),{},{cx:m,cy:g});return U.createElement(Yt,{className:bt("recharts-reference-dot",x)},e.renderDot(v,E),gr.renderCallByParent(this.props,{x:m-o,y:g-o,width:2*o,height:2*o}))}}])}(U.Component);s0(l0,"displayName","ReferenceDot");s0(l0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});s0(l0,"renderDot",function(t,e){var n;return U.isValidElement(t)?n=U.cloneElement(t,e):ot(t)?n=t(e):n=U.createElement(n0,g_({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function v_(){return v_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},v_.apply(this,arguments)}function Fc(t){"@babel/helpers - typeof";return Fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fc(t)}function sC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sC(Object(n),!0).forEach(function(r){u0(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iye(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,q4(r.key),r)}}function aye(t,e,n){return e&&iye(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function oye(t,e,n){return e=jy(e),sye(t,W4()?Reflect.construct(e,n||[],jy(t).constructor):e.apply(t,n))}function sye(t,e){if(e&&(Fc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lye(t)}function lye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function W4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(W4=function(){return!!t})()}function jy(t){return jy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jy(t)}function uye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b_(t,e)}function b_(t,e){return b_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},b_(t,e)}function u0(t,e,n){return e=q4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q4(t){var e=cye(t,"string");return Fc(e)=="symbol"?e:e+""}function cye(t,e){if(Fc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Fc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var fye=function(e,n,r,i,a){var o=a.x1,s=a.x2,l=a.y1,u=a.y2,c=a.xAxis,f=a.yAxis;if(!c||!f)return null;var m=SE({x:c.scale,y:f.scale}),g={x:e?m.x.apply(o,{position:"start"}):m.x.rangeMin,y:r?m.y.apply(l,{position:"start"}):m.y.rangeMin},b={x:n?m.x.apply(s,{position:"end"}):m.x.rangeMax,y:i?m.y.apply(u,{position:"end"}):m.y.rangeMax};return za(a,"discard")&&(!m.isInRange(g)||!m.isInRange(b))?null:I4(g,b)},c0=function(t){function e(){return rye(this,e),oye(this,e,arguments)}return uye(e,t),aye(e,[{key:"render",value:function(){var r=this.props,i=r.x1,a=r.x2,o=r.y1,s=r.y2,l=r.className,u=r.alwaysShow,c=r.clipPathId;vo(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=Rn(i),m=Rn(a),g=Rn(o),b=Rn(s),v=this.props.shape;if(!f&&!m&&!g&&!b&&!v)return null;var x=fye(f,m,g,b,this.props);if(!x&&!v)return null;var S=za(this.props,"hidden")?"url(#".concat(c,")"):void 0;return U.createElement(Yt,{className:bt("recharts-reference-area",l)},e.renderRect(v,lC(lC({clipPath:S},st(this.props,!0)),x)),gr.renderCallByParent(this.props,x))}}])}(U.Component);u0(c0,"displayName","ReferenceArea");u0(c0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});u0(c0,"renderRect",function(t,e){var n;return U.isValidElement(t)?n=U.cloneElement(t,e):ot(t)?n=t(e):n=U.createElement(wE,v_({},e,{className:"recharts-reference-area-rect"})),n});function K4(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function dye(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return oge(r,n)}function hye(t,e,n){var r=n==="width",i=t.x,a=t.y,o=t.width,s=t.height;return e===1?{start:r?i:a,end:r?i+o:a+s}:{start:r?i+o:a+s,end:r?i:a}}function Ny(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function pye(t,e){return K4(t,e+1)}function mye(t,e,n,r,i){for(var a=(r||[]).slice(),o=e.start,s=e.end,l=0,u=1,c=o,f=function(){var b=r==null?void 0:r[l];if(b===void 0)return{v:K4(r,u)};var v=l,x,S=function(){return x===void 0&&(x=n(b,v)),x},E=b.coordinate,T=l===0||Ny(t,E,S,c,s);T||(l=0,c=o,u+=1),T&&(c=E+t*(S()/2+i),l+=u)},m;u<=a.length;)if(m=f(),m)return m.v;return[]}function Vh(t){"@babel/helpers - typeof";return Vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vh(t)}function uC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uC(Object(n),!0).forEach(function(r){gye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gye(t,e,n){return e=yye(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yye(t){var e=vye(t,"string");return Vh(e)=="symbol"?e:e+""}function vye(t,e){if(Vh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bye(t,e,n,r,i){for(var a=(r||[]).slice(),o=a.length,s=e.start,l=e.end,u=function(m){var g=a[m],b,v=function(){return b===void 0&&(b=n(g,m)),b};if(m===o-1){var x=t*(g.coordinate+t*v()/2-l);a[m]=g=fr(fr({},g),{},{tickCoord:x>0?g.coordinate-x*t:g.coordinate})}else a[m]=g=fr(fr({},g),{},{tickCoord:g.coordinate});var S=Ny(t,g.tickCoord,v,s,l);S&&(l=g.tickCoord-t*(v()/2+i),a[m]=fr(fr({},g),{},{isShow:!0}))},c=o-1;c>=0;c--)u(c);return a}function xye(t,e,n,r,i,a){var o=(r||[]).slice(),s=o.length,l=e.start,u=e.end;if(a){var c=r[s-1],f=n(c,s-1),m=t*(c.coordinate+t*f/2-u);o[s-1]=c=fr(fr({},c),{},{tickCoord:m>0?c.coordinate-m*t:c.coordinate});var g=Ny(t,c.tickCoord,function(){return f},l,u);g&&(u=c.tickCoord-t*(f/2+i),o[s-1]=fr(fr({},c),{},{isShow:!0}))}for(var b=a?s-1:s,v=function(E){var T=o[E],j,_=function(){return j===void 0&&(j=n(T,E)),j};if(E===0){var P=t*(T.coordinate-t*_()/2-l);o[E]=T=fr(fr({},T),{},{tickCoord:P<0?T.coordinate-P*t:T.coordinate})}else o[E]=T=fr(fr({},T),{},{tickCoord:T.coordinate});var w=Ny(t,T.tickCoord,_,l,u);w&&(l=T.tickCoord+t*(_()/2+i),o[E]=fr(fr({},T),{},{isShow:!0}))},x=0;x<b;x++)v(x);return o}function kE(t,e,n){var r=t.tick,i=t.ticks,a=t.viewBox,o=t.minTickGap,s=t.orientation,l=t.interval,u=t.tickFormatter,c=t.unit,f=t.angle;if(!i||!i.length||!r)return[];if(ke(l)||eu.isSsr)return pye(i,typeof l=="number"&&ke(l)?l:0);var m=[],g=s==="top"||s==="bottom"?"width":"height",b=c&&g==="width"?Od(c,{fontSize:e,letterSpacing:n}):{width:0,height:0},v=function(T,j){var _=ot(u)?u(T.value,j):T.value;return g==="width"?dye(Od(_,{fontSize:e,letterSpacing:n}),b,f):Od(_,{fontSize:e,letterSpacing:n})[g]},x=i.length>=2?la(i[1].coordinate-i[0].coordinate):1,S=hye(a,x,g);return l==="equidistantPreserveStart"?mye(x,S,v,i,o):(l==="preserveStart"||l==="preserveStartEnd"?m=xye(x,S,v,i,o,l==="preserveStartEnd"):m=bye(x,S,v,i,o),m.filter(function(E){return E.isShow}))}var wye=["viewBox"],_ye=["viewBox"],Sye=["ticks"];function zc(t){"@babel/helpers - typeof";return zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zc(t)}function Wu(){return Wu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wu.apply(this,arguments)}function cC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cC(Object(n),!0).forEach(function(r){CE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Db(t,e){if(t==null)return{};var n=Eye(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Eye(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Aye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,G4(r.key),r)}}function Tye(t,e,n){return e&&fC(t.prototype,e),n&&fC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pye(t,e,n){return e=Dy(e),Oye(t,H4()?Reflect.construct(e,n||[],Dy(t).constructor):e.apply(t,n))}function Oye(t,e){if(e&&(zc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kye(t)}function kye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function H4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(H4=function(){return!!t})()}function Dy(t){return Dy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Dy(t)}function Cye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x_(t,e)}function x_(t,e){return x_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},x_(t,e)}function CE(t,e,n){return e=G4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G4(t){var e=Iye(t,"string");return zc(e)=="symbol"?e:e+""}function Iye(t,e){if(zc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var xf=function(t){function e(n){var r;return Aye(this,e),r=Pye(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return Cye(e,t),Tye(e,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,o=Db(r,wye),s=this.props,l=s.viewBox,u=Db(s,_ye);return!nc(a,l)||!nc(o,u)||!nc(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,o=i.y,s=i.width,l=i.height,u=i.orientation,c=i.tickSize,f=i.mirror,m=i.tickMargin,g,b,v,x,S,E,T=f?-1:1,j=r.tickSize||c,_=ke(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":g=b=r.coordinate,x=o+ +!f*l,v=x-T*j,E=v-T*m,S=_;break;case"left":v=x=r.coordinate,b=a+ +!f*s,g=b-T*j,S=g-T*m,E=_;break;case"right":v=x=r.coordinate,b=a+ +f*s,g=b+T*j,S=g+T*m,E=_;break;default:g=b=r.coordinate,x=o+ +f*l,v=x+T*j,E=v+T*m,S=_;break}return{line:{x1:g,y1:v,x2:b,y2:x},tick:{x:S,y:E}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,o;switch(i){case"left":o=a?"start":"end";break;case"right":o=a?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=a?"start":"end";break;default:o=a?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,o=r.width,s=r.height,l=r.orientation,u=r.mirror,c=r.axisLine,f=jn(jn(jn({},st(this.props,!1)),st(c,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var m=+(l==="top"&&!u||l==="bottom"&&u);f=jn(jn({},f),{},{x1:i,y1:a+m*s,x2:i+o,y2:a+m*s})}else{var g=+(l==="left"&&!u||l==="right"&&u);f=jn(jn({},f),{},{x1:i+g*o,y1:a,x2:i+g*o,y2:a+s})}return U.createElement("line",Wu({},f,{className:bt("recharts-cartesian-axis-line",Ni(c,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var o=this,s=this.props,l=s.tickLine,u=s.stroke,c=s.tick,f=s.tickFormatter,m=s.unit,g=kE(jn(jn({},this.props),{},{ticks:r}),i,a),b=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),x=st(this.props,!1),S=st(c,!1),E=jn(jn({},x),{},{fill:"none"},st(l,!1)),T=g.map(function(j,_){var P=o.getTickLineCoord(j),w=P.line,O=P.tick,I=jn(jn(jn(jn({textAnchor:b,verticalAnchor:v},x),{},{stroke:"none",fill:u},S),O),{},{index:_,payload:j,visibleTicksCount:g.length,tickFormatter:f});return U.createElement(Yt,Wu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(j.value,"-").concat(j.coordinate,"-").concat(j.tickCoord)},Vg(o.props,j,_)),l&&U.createElement("line",Wu({},E,w,{className:bt("recharts-cartesian-axis-tick-line",Ni(l,"className"))})),c&&e.renderTickItem(c,I,"".concat(ot(f)?f(j.value,_):j.value).concat(m||"")))});return U.createElement("g",{className:"recharts-cartesian-axis-ticks"},T)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,o=i.width,s=i.height,l=i.ticksGenerator,u=i.className,c=i.hide;if(c)return null;var f=this.props,m=f.ticks,g=Db(f,Sye),b=m;return ot(l)&&(b=m&&m.length>0?l(this.props):l(g)),o<=0||s<=0||!b||!b.length?null:U.createElement(Yt,{className:bt("recharts-cartesian-axis",u),ref:function(x){r.layerReference=x}},a&&this.renderAxisLine(),this.renderTicks(b,this.state.fontSize,this.state.letterSpacing),gr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var o,s=bt(i.className,"recharts-cartesian-axis-tick-value");return U.isValidElement(r)?o=U.cloneElement(r,jn(jn({},i),{},{className:s})):ot(r)?o=r(jn(jn({},i),{},{className:s})):o=U.createElement(ty,Wu({},i,{className:"recharts-cartesian-axis-tick-value"}),a),o}}])}(z.Component);CE(xf,"displayName","CartesianAxis");CE(xf,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var jye=["x1","y1","x2","y2","key"],Nye=["offset"];function ql(t){"@babel/helpers - typeof";return ql=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ql(t)}function dC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dC(Object(n),!0).forEach(function(r){Dye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dye(t,e,n){return e=Mye(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mye(t){var e=Rye(t,"string");return ql(e)=="symbol"?e:e+""}function Rye(t,e){if(ql(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ql(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function El(){return El=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},El.apply(this,arguments)}function hC(t,e){if(t==null)return{};var n=$ye(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function $ye(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Lye=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,a=e.y,o=e.width,s=e.height,l=e.ry;return U.createElement("rect",{x:i,y:a,ry:l,width:o,height:s,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Y4(t,e){var n;if(U.isValidElement(t))n=U.cloneElement(t,e);else if(ot(t))n=t(e);else{var r=e.x1,i=e.y1,a=e.x2,o=e.y2,s=e.key,l=hC(e,jye),u=st(l,!1);u.offset;var c=hC(u,Nye);n=U.createElement("line",El({},c,{x1:r,y1:i,x2:a,y2:o,fill:"none",key:s}))}return n}function Fye(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,a=t.horizontalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(s,l){var u=yr(yr({},t),{},{x1:e,y1:s,x2:e+n,y2:s,key:"line-".concat(l),index:l});return Y4(i,u)});return U.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function zye(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,a=t.verticalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(s,l){var u=yr(yr({},t),{},{x1:s,y1:e,x2:s,y2:e+n,key:"line-".concat(l),index:l});return Y4(i,u)});return U.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function Vye(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,a=t.width,o=t.height,s=t.horizontalPoints,l=t.horizontal,u=l===void 0?!0:l;if(!u||!e||!e.length)return null;var c=s.map(function(m){return Math.round(m+i-i)}).sort(function(m,g){return m-g});i!==c[0]&&c.unshift(0);var f=c.map(function(m,g){var b=!c[g+1],v=b?i+o-m:c[g+1]-m;if(v<=0)return null;var x=g%e.length;return U.createElement("rect",{key:"react-".concat(g),y:m,x:r,height:v,width:a,stroke:"none",fill:e[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return U.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function Bye(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,a=t.x,o=t.y,s=t.width,l=t.height,u=t.verticalPoints;if(!n||!r||!r.length)return null;var c=u.map(function(m){return Math.round(m+a-a)}).sort(function(m,g){return m-g});a!==c[0]&&c.unshift(0);var f=c.map(function(m,g){var b=!c[g+1],v=b?a+s-m:c[g+1]-m;if(v<=0)return null;var x=g%r.length;return U.createElement("rect",{key:"react-".concat(g),x:m,y:o,width:v,height:l,stroke:"none",fill:r[x],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return U.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var Uye=function(e,n){var r=e.xAxis,i=e.width,a=e.height,o=e.offset;return a4(kE(yr(yr(yr({},xf.defaultProps),r),{},{ticks:po(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.left,o.left+o.width,n)},Wye=function(e,n){var r=e.yAxis,i=e.width,a=e.height,o=e.offset;return a4(kE(yr(yr(yr({},xf.defaultProps),r),{},{ticks:po(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.top,o.top+o.height,n)},Eu={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function f0(t){var e,n,r,i,a,o,s=TE(),l=PE(),u=Ige(),c=yr(yr({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Eu.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Eu.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:Eu.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Eu.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:Eu.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:Eu.verticalFill,x:ke(t.x)?t.x:u.left,y:ke(t.y)?t.y:u.top,width:ke(t.width)?t.width:u.width,height:ke(t.height)?t.height:u.height}),f=c.x,m=c.y,g=c.width,b=c.height,v=c.syncWithTicks,x=c.horizontalValues,S=c.verticalValues,E=Oge(),T=kge();if(!ke(g)||g<=0||!ke(b)||b<=0||!ke(f)||f!==+f||!ke(m)||m!==+m)return null;var j=c.verticalCoordinatesGenerator||Uye,_=c.horizontalCoordinatesGenerator||Wye,P=c.horizontalPoints,w=c.verticalPoints;if((!P||!P.length)&&ot(_)){var O=x&&x.length,I=_({yAxis:T?yr(yr({},T),{},{ticks:O?x:T.ticks}):void 0,width:s,height:l,offset:u},O?!0:v);vo(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(ql(I),"]")),Array.isArray(I)&&(P=I)}if((!w||!w.length)&&ot(j)){var R=S&&S.length,D=j({xAxis:E?yr(yr({},E),{},{ticks:R?S:E.ticks}):void 0,width:s,height:l,offset:u},R?!0:v);vo(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(ql(D),"]")),Array.isArray(D)&&(w=D)}return U.createElement("g",{className:"recharts-cartesian-grid"},U.createElement(Lye,{fill:c.fill,fillOpacity:c.fillOpacity,x:c.x,y:c.y,width:c.width,height:c.height,ry:c.ry}),U.createElement(Fye,El({},c,{offset:u,horizontalPoints:P,xAxis:E,yAxis:T})),U.createElement(zye,El({},c,{offset:u,verticalPoints:w,xAxis:E,yAxis:T})),U.createElement(Vye,El({},c,{horizontalPoints:P})),U.createElement(Bye,El({},c,{verticalPoints:w})))}f0.displayName="CartesianGrid";var qye=["type","layout","connectNulls","ref"],Kye=["key"];function Vc(t){"@babel/helpers - typeof";return Vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vc(t)}function pC(t,e){if(t==null)return{};var n=Hye(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Hye(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function jd(){return jd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jd.apply(this,arguments)}function mC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ei(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mC(Object(n),!0).forEach(function(r){na(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Au(t){return Qye(t)||Xye(t)||Yye(t)||Gye()}function Gye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yye(t,e){if(t){if(typeof t=="string")return w_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w_(t,e)}}function Xye(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Qye(t){if(Array.isArray(t))return w_(t)}function w_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Jye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Q4(r.key),r)}}function Zye(t,e,n){return e&&gC(t.prototype,e),n&&gC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function eve(t,e,n){return e=My(e),tve(t,X4()?Reflect.construct(e,n||[],My(t).constructor):e.apply(t,n))}function tve(t,e){if(e&&(Vc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nve(t)}function nve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function X4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(X4=function(){return!!t})()}function My(t){return My=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},My(t)}function rve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&__(t,e)}function __(t,e){return __=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},__(t,e)}function na(t,e,n){return e=Q4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Q4(t){var e=ive(t,"string");return Vc(e)=="symbol"?e:e+""}function ive(t,e){if(Vc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Bc=function(t){function e(){var n;Jye(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=eve(this,e,[].concat(i)),na(n,"state",{isAnimationFinished:!0,totalLength:0}),na(n,"generateSimpleStrokeDasharray",function(o,s){return"".concat(s,"px ").concat(o-s,"px")}),na(n,"getStrokeDasharray",function(o,s,l){var u=l.reduce(function(S,E){return S+E});if(!u)return n.generateSimpleStrokeDasharray(s,o);for(var c=Math.floor(o/u),f=o%u,m=s-o,g=[],b=0,v=0;b<l.length;v+=l[b],++b)if(v+l[b]>f){g=[].concat(Au(l.slice(0,b)),[f-v]);break}var x=g.length%2===0?[0,m]:[m];return[].concat(Au(e.repeat(l,c)),Au(g),x).map(function(S){return"".concat(S,"px")}).join(", ")}),na(n,"id",hf("recharts-line-")),na(n,"pathRef",function(o){n.mainCurve=o}),na(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),na(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return rve(e,t),Zye(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.points,s=a.xAxis,l=a.yAxis,u=a.layout,c=a.children,f=Di(c,wp);if(!f)return null;var m=function(v,x){return{x:v.x,y:v.y,value:v.value,errorVal:kr(v.payload,x)}},g={clipPath:r?"url(#clipPath-".concat(i,")"):null};return U.createElement(Yt,g,f.map(function(b){return U.cloneElement(b,{key:"bar-".concat(b.props.dataKey),data:o,xAxis:s,yAxis:l,layout:u,dataPointFormatter:m})}))}},{key:"renderDots",value:function(r,i,a){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var s=this.props,l=s.dot,u=s.points,c=s.dataKey,f=st(this.props,!1),m=st(l,!0),g=u.map(function(v,x){var S=ei(ei(ei({key:"dot-".concat(x),r:3},f),m),{},{index:x,cx:v.x,cy:v.y,value:v.value,dataKey:c,payload:v.payload,points:u});return e.renderDotItem(l,S)}),b={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return U.createElement(Yt,jd({className:"recharts-line-dots",key:"dots"},b),g)}},{key:"renderCurveStatically",value:function(r,i,a,o){var s=this.props,l=s.type,u=s.layout,c=s.connectNulls;s.ref;var f=pC(s,qye),m=ei(ei(ei({},st(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:r},o),{},{type:l,layout:u,connectNulls:c});return U.createElement(ac,jd({},m,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var a=this,o=this.props,s=o.points,l=o.strokeDasharray,u=o.isAnimationActive,c=o.animationBegin,f=o.animationDuration,m=o.animationEasing,g=o.animationId,b=o.animateNewValues,v=o.width,x=o.height,S=this.state,E=S.prevPoints,T=S.totalLength;return U.createElement(Ua,{begin:c,duration:f,isActive:u,easing:m,from:{t:0},to:{t:1},key:"line-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(j){var _=j.t;if(E){var P=E.length/s.length,w=s.map(function($,L){var ne=Math.floor(L*P);if(E[ne]){var ae=E[ne],ce=Zn(ae.x,$.x),me=Zn(ae.y,$.y);return ei(ei({},$),{},{x:ce(_),y:me(_)})}if(b){var X=Zn(v*2,$.x),ie=Zn(x/2,$.y);return ei(ei({},$),{},{x:X(_),y:ie(_)})}return ei(ei({},$),{},{x:$.x,y:$.y})});return a.renderCurveStatically(w,r,i)}var O=Zn(0,T),I=O(_),R;if(l){var D="".concat(l).split(/[,\s]+/gim).map(function($){return parseFloat($)});R=a.getStrokeDasharray(I,T,D)}else R=a.generateSimpleStrokeDasharray(T,I);return a.renderCurveStatically(s,r,i,{strokeDasharray:R})})}},{key:"renderCurve",value:function(r,i){var a=this.props,o=a.points,s=a.isAnimationActive,l=this.state,u=l.prevPoints,c=l.totalLength;return s&&o&&o.length&&(!u&&c>0||!Ic(u,o))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(o,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,o=i.dot,s=i.points,l=i.className,u=i.xAxis,c=i.yAxis,f=i.top,m=i.left,g=i.width,b=i.height,v=i.isAnimationActive,x=i.id;if(a||!s||!s.length)return null;var S=this.state.isAnimationFinished,E=s.length===1,T=bt("recharts-line",l),j=u&&u.allowDataOverflow,_=c&&c.allowDataOverflow,P=j||_,w=ft(x)?this.id:x,O=(r=st(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},I=O.r,R=I===void 0?3:I,D=O.strokeWidth,$=D===void 0?2:D,L=JM(o)?o:{},ne=L.clipDot,ae=ne===void 0?!0:ne,ce=R*2+$;return U.createElement(Yt,{className:T},j||_?U.createElement("defs",null,U.createElement("clipPath",{id:"clipPath-".concat(w)},U.createElement("rect",{x:j?m:m-g/2,y:_?f:f-b/2,width:j?g:g*2,height:_?b:b*2})),!ae&&U.createElement("clipPath",{id:"clipPath-dots-".concat(w)},U.createElement("rect",{x:m-ce/2,y:f-ce/2,width:g+ce,height:b+ce}))):null,!E&&this.renderCurve(P,w),this.renderErrorBar(P,w),(E||o)&&this.renderDots(P,ae,w),(!v||S)&&ci.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var a=r.length%2!==0?[].concat(Au(r),[0]):r,o=[],s=0;s<i;++s)o=[].concat(Au(o),Au(a));return o}},{key:"renderDotItem",value:function(r,i){var a;if(U.isValidElement(r))a=U.cloneElement(r,i);else if(ot(r))a=r(i);else{var o=i.key,s=pC(i,Kye),l=bt("recharts-line-dot",typeof r!="boolean"?r.className:"");a=U.createElement(n0,jd({key:o},s,{className:l}))}return a}}])}(z.PureComponent);na(Bc,"displayName","Line");na(Bc,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!eu.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});na(Bc,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,a=t.yAxisTicks,o=t.dataKey,s=t.bandSize,l=t.displayedData,u=t.offset,c=e.layout,f=l.map(function(m,g){var b=kr(m,o);return c==="horizontal"?{x:my({axis:n,ticks:i,bandSize:s,entry:m,index:g}),y:ft(b)?null:r.scale(b),value:b,payload:m}:{x:ft(b)?null:n.scale(b),y:my({axis:r,ticks:a,bandSize:s,entry:m,index:g}),value:b,payload:m}});return ei({points:f,layout:c},u)});var ave=["layout","type","stroke","connectNulls","isRange","ref"],ove=["key"],J4;function Uc(t){"@babel/helpers - typeof";return Uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uc(t)}function Z4(t,e){if(t==null)return{};var n=sve(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function sve(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Al(){return Al=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Al.apply(this,arguments)}function yC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yC(Object(n),!0).forEach(function(r){ja(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tL(r.key),r)}}function uve(t,e,n){return e&&vC(t.prototype,e),n&&vC(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function cve(t,e,n){return e=Ry(e),fve(t,eL()?Reflect.construct(e,n||[],Ry(t).constructor):e.apply(t,n))}function fve(t,e){if(e&&(Uc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dve(t)}function dve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eL=function(){return!!t})()}function Ry(t){return Ry=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ry(t)}function hve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S_(t,e)}function S_(t,e){return S_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},S_(t,e)}function ja(t,e,n){return e=tL(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tL(t){var e=pve(t,"string");return Uc(e)=="symbol"?e:e+""}function pve(t,e){if(Uc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Uc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Bs=function(t){function e(){var n;lve(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=cve(this,e,[].concat(i)),ja(n,"state",{isAnimationFinished:!0}),ja(n,"id",hf("recharts-area-")),ja(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),ot(o)&&o()}),ja(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),ot(o)&&o()}),n}return hve(e,t),uve(e,[{key:"renderDots",value:function(r,i,a){var o=this.props.isAnimationActive,s=this.state.isAnimationFinished;if(o&&!s)return null;var l=this.props,u=l.dot,c=l.points,f=l.dataKey,m=st(this.props,!1),g=st(u,!0),b=c.map(function(x,S){var E=Yo(Yo(Yo({key:"dot-".concat(S),r:3},m),g),{},{index:S,cx:x.x,cy:x.y,dataKey:f,value:x.value,payload:x.payload,points:c});return e.renderDotItem(u,E)}),v={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return U.createElement(Yt,Al({className:"recharts-area-dots"},v),b)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,a=i.baseLine,o=i.points,s=i.strokeWidth,l=o[0].x,u=o[o.length-1].x,c=r*Math.abs(l-u),f=as(o.map(function(m){return m.y||0}));return ke(a)&&typeof a=="number"?f=Math.max(a,f):a&&Array.isArray(a)&&a.length&&(f=Math.max(as(a.map(function(m){return m.y||0})),f)),ke(f)?U.createElement("rect",{x:l<u?l:l-c,y:0,width:c,height:Math.floor(f+(s?parseInt("".concat(s),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,a=i.baseLine,o=i.points,s=i.strokeWidth,l=o[0].y,u=o[o.length-1].y,c=r*Math.abs(l-u),f=as(o.map(function(m){return m.x||0}));return ke(a)&&typeof a=="number"?f=Math.max(a,f):a&&Array.isArray(a)&&a.length&&(f=Math.max(as(a.map(function(m){return m.x||0})),f)),ke(f)?U.createElement("rect",{x:0,y:l<u?l:l-c,width:f+(s?parseInt("".concat(s),10):1),height:Math.floor(c)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,a,o){var s=this.props,l=s.layout,u=s.type,c=s.stroke,f=s.connectNulls,m=s.isRange;s.ref;var g=Z4(s,ave);return U.createElement(Yt,{clipPath:a?"url(#clipPath-".concat(o,")"):null},U.createElement(ac,Al({},st(g,!0),{points:r,connectNulls:f,type:u,baseLine:i,layout:l,stroke:"none",className:"recharts-area-area"})),c!=="none"&&U.createElement(ac,Al({},st(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:f,fill:"none",points:r})),c!=="none"&&m&&U.createElement(ac,Al({},st(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:f,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var a=this,o=this.props,s=o.points,l=o.baseLine,u=o.isAnimationActive,c=o.animationBegin,f=o.animationDuration,m=o.animationEasing,g=o.animationId,b=this.state,v=b.prevPoints,x=b.prevBaseLine;return U.createElement(Ua,{begin:c,duration:f,isActive:u,easing:m,from:{t:0},to:{t:1},key:"area-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var E=S.t;if(v){var T=v.length/s.length,j=s.map(function(O,I){var R=Math.floor(I*T);if(v[R]){var D=v[R],$=Zn(D.x,O.x),L=Zn(D.y,O.y);return Yo(Yo({},O),{},{x:$(E),y:L(E)})}return O}),_;if(ke(l)&&typeof l=="number"){var P=Zn(x,l);_=P(E)}else if(ft(l)||df(l)){var w=Zn(x,0);_=w(E)}else _=l.map(function(O,I){var R=Math.floor(I*T);if(x[R]){var D=x[R],$=Zn(D.x,O.x),L=Zn(D.y,O.y);return Yo(Yo({},O),{},{x:$(E),y:L(E)})}return O});return a.renderAreaStatically(j,_,r,i)}return U.createElement(Yt,null,U.createElement("defs",null,U.createElement("clipPath",{id:"animationClipPath-".concat(i)},a.renderClipRect(E))),U.createElement(Yt,{clipPath:"url(#animationClipPath-".concat(i,")")},a.renderAreaStatically(s,l,r,i)))})}},{key:"renderArea",value:function(r,i){var a=this.props,o=a.points,s=a.baseLine,l=a.isAnimationActive,u=this.state,c=u.prevPoints,f=u.prevBaseLine,m=u.totalLength;return l&&o&&o.length&&(!c&&m>0||!Ic(c,o)||!Ic(f,s))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(o,s,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,o=i.dot,s=i.points,l=i.className,u=i.top,c=i.left,f=i.xAxis,m=i.yAxis,g=i.width,b=i.height,v=i.isAnimationActive,x=i.id;if(a||!s||!s.length)return null;var S=this.state.isAnimationFinished,E=s.length===1,T=bt("recharts-area",l),j=f&&f.allowDataOverflow,_=m&&m.allowDataOverflow,P=j||_,w=ft(x)?this.id:x,O=(r=st(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},I=O.r,R=I===void 0?3:I,D=O.strokeWidth,$=D===void 0?2:D,L=JM(o)?o:{},ne=L.clipDot,ae=ne===void 0?!0:ne,ce=R*2+$;return U.createElement(Yt,{className:T},j||_?U.createElement("defs",null,U.createElement("clipPath",{id:"clipPath-".concat(w)},U.createElement("rect",{x:j?c:c-g/2,y:_?u:u-b/2,width:j?g:g*2,height:_?b:b*2})),!ae&&U.createElement("clipPath",{id:"clipPath-dots-".concat(w)},U.createElement("rect",{x:c-ce/2,y:u-ce/2,width:g+ce,height:b+ce}))):null,E?null:this.renderArea(P,w),(o||E)&&this.renderDots(P,ae,w),(!v||S)&&ci.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(z.PureComponent);J4=Bs;ja(Bs,"displayName","Area");ja(Bs,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!eu.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});ja(Bs,"getBaseValue",function(t,e,n,r){var i=t.layout,a=t.baseValue,o=e.props.baseValue,s=o??a;if(ke(s)&&typeof s=="number")return s;var l=i==="horizontal"?r:n,u=l.scale.domain();if(l.type==="number"){var c=Math.max(u[0],u[1]),f=Math.min(u[0],u[1]);return s==="dataMin"?f:s==="dataMax"||c<0?c:Math.max(Math.min(u[0],u[1]),0)}return s==="dataMin"?u[0]:s==="dataMax"?u[1]:u[0]});ja(Bs,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,i=t.yAxis,a=t.xAxisTicks,o=t.yAxisTicks,s=t.bandSize,l=t.dataKey,u=t.stackedData,c=t.dataStartIndex,f=t.displayedData,m=t.offset,g=e.layout,b=u&&u.length,v=J4.getBaseValue(e,n,r,i),x=g==="horizontal",S=!1,E=f.map(function(j,_){var P;b?P=u[c+_]:(P=kr(j,l),Array.isArray(P)?S=!0:P=[v,P]);var w=P[1]==null||b&&kr(j,l)==null;return x?{x:my({axis:r,ticks:a,bandSize:s,entry:j,index:_}),y:w?null:i.scale(P[1]),value:P,payload:j}:{x:w?null:r.scale(P[1]),y:my({axis:i,ticks:o,bandSize:s,entry:j,index:_}),value:P,payload:j}}),T;return b||S?T=E.map(function(j){var _=Array.isArray(j.value)?j.value[0]:null;return x?{x:j.x,y:_!=null&&j.y!=null?i.scale(_):null}:{x:_!=null?r.scale(_):null,y:j.y}}):T=x?i.scale(v):r.scale(v),Yo({points:E,baseLine:T,layout:g,isRange:S},m)});ja(Bs,"renderDotItem",function(t,e){var n;if(U.isValidElement(t))n=U.cloneElement(t,e);else if(ot(t))n=t(e);else{var r=bt("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,a=Z4(e,ove);n=U.createElement(n0,Al({},a,{key:i,className:r}))}return n});function Wc(t){"@babel/helpers - typeof";return Wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wc(t)}function mve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,iL(r.key),r)}}function yve(t,e,n){return e&&gve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function vve(t,e,n){return e=$y(e),bve(t,nL()?Reflect.construct(e,n||[],$y(t).constructor):e.apply(t,n))}function bve(t,e){if(e&&(Wc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xve(t)}function xve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nL=function(){return!!t})()}function $y(t){return $y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$y(t)}function wve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E_(t,e)}function E_(t,e){return E_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},E_(t,e)}function rL(t,e,n){return e=iL(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iL(t){var e=_ve(t,"string");return Wc(e)=="symbol"?e:e+""}function _ve(t,e){if(Wc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Wc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function A_(){return A_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},A_.apply(this,arguments)}function Sve(t){var e=t.xAxisId,n=TE(),r=PE(),i=L4(e);return i==null?null:z.createElement(xf,A_({},i,{className:bt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return po(o,!0)}}))}var vr=function(t){function e(){return mve(this,e),vve(this,e,arguments)}return wve(e,t),yve(e,[{key:"render",value:function(){return z.createElement(Sve,this.props)}}])}(z.Component);rL(vr,"displayName","XAxis");rL(vr,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function qc(t){"@babel/helpers - typeof";return qc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qc(t)}function Eve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ave(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sL(r.key),r)}}function Tve(t,e,n){return e&&Ave(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pve(t,e,n){return e=Ly(e),Ove(t,aL()?Reflect.construct(e,n||[],Ly(t).constructor):e.apply(t,n))}function Ove(t,e){if(e&&(qc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kve(t)}function kve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aL=function(){return!!t})()}function Ly(t){return Ly=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ly(t)}function Cve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T_(t,e)}function T_(t,e){return T_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},T_(t,e)}function oL(t,e,n){return e=sL(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sL(t){var e=Ive(t,"string");return qc(e)=="symbol"?e:e+""}function Ive(t,e){if(qc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(qc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function P_(){return P_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},P_.apply(this,arguments)}var jve=function(e){var n=e.yAxisId,r=TE(),i=PE(),a=F4(n);return a==null?null:z.createElement(xf,P_({},a,{className:bt("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(s){return po(s,!0)}}))},br=function(t){function e(){return Eve(this,e),Pve(this,e,arguments)}return Cve(e,t),Tve(e,[{key:"render",value:function(){return z.createElement(jve,this.props)}}])}(z.Component);oL(br,"displayName","YAxis");oL(br,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function bC(t){return Rve(t)||Mve(t)||Dve(t)||Nve()}function Nve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dve(t,e){if(t){if(typeof t=="string")return O_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O_(t,e)}}function Mve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Rve(t){if(Array.isArray(t))return O_(t)}function O_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var k_=function(e,n,r,i,a){var o=Di(e,o0),s=Di(e,l0),l=[].concat(bC(o),bC(s)),u=Di(e,c0),c="".concat(i,"Id"),f=i[0],m=n;if(l.length&&(m=l.reduce(function(v,x){if(x.props[c]===r&&za(x.props,"extendDomain")&&ke(x.props[f])){var S=x.props[f];return[Math.min(v[0],S),Math.max(v[1],S)]}return v},m)),u.length){var g="".concat(f,"1"),b="".concat(f,"2");m=u.reduce(function(v,x){if(x.props[c]===r&&za(x.props,"extendDomain")&&ke(x.props[g])&&ke(x.props[b])){var S=x.props[g],E=x.props[b];return[Math.min(v[0],S,E),Math.max(v[1],S,E)]}return v},m)}return a&&a.length&&(m=a.reduce(function(v,x){return ke(x)?[Math.min(v[0],x),Math.max(v[1],x)]:v},m)),m},lL={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function a(l,u,c,f,m){if(typeof c!="function")throw new TypeError("The listener must be a function");var g=new i(c,f||l,m),b=n?n+u:u;return l._events[b]?l._events[b].fn?l._events[b]=[l._events[b],g]:l._events[b].push(g):(l._events[b]=g,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],c,f;if(this._eventsCount===0)return u;for(f in c=this._events)e.call(c,f)&&u.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},s.prototype.listeners=function(u){var c=n?n+u:u,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var m=0,g=f.length,b=new Array(g);m<g;m++)b[m]=f[m].fn;return b},s.prototype.listenerCount=function(u){var c=n?n+u:u,f=this._events[c];return f?f.fn?1:f.length:0},s.prototype.emit=function(u,c,f,m,g,b){var v=n?n+u:u;if(!this._events[v])return!1;var x=this._events[v],S=arguments.length,E,T;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),S){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,c),!0;case 3:return x.fn.call(x.context,c,f),!0;case 4:return x.fn.call(x.context,c,f,m),!0;case 5:return x.fn.call(x.context,c,f,m,g),!0;case 6:return x.fn.call(x.context,c,f,m,g,b),!0}for(T=1,E=new Array(S-1);T<S;T++)E[T-1]=arguments[T];x.fn.apply(x.context,E)}else{var j=x.length,_;for(T=0;T<j;T++)switch(x[T].once&&this.removeListener(u,x[T].fn,void 0,!0),S){case 1:x[T].fn.call(x[T].context);break;case 2:x[T].fn.call(x[T].context,c);break;case 3:x[T].fn.call(x[T].context,c,f);break;case 4:x[T].fn.call(x[T].context,c,f,m);break;default:if(!E)for(_=1,E=new Array(S-1);_<S;_++)E[_-1]=arguments[_];x[T].fn.apply(x[T].context,E)}}return!0},s.prototype.on=function(u,c,f){return a(this,u,c,f,!1)},s.prototype.once=function(u,c,f){return a(this,u,c,f,!0)},s.prototype.removeListener=function(u,c,f,m){var g=n?n+u:u;if(!this._events[g])return this;if(!c)return o(this,g),this;var b=this._events[g];if(b.fn)b.fn===c&&(!m||b.once)&&(!f||b.context===f)&&o(this,g);else{for(var v=0,x=[],S=b.length;v<S;v++)(b[v].fn!==c||m&&!b[v].once||f&&b[v].context!==f)&&x.push(b[v]);x.length?this._events[g]=x.length===1?x[0]:x:o(this,g)}return this},s.prototype.removeAllListeners=function(u){var c;return u?(c=n?n+u:u,this._events[c]&&o(this,c)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s})(lL);var $ve=lL.exports;const Lve=Lt($ve);var Mb=new Lve,Rb="recharts.syncMouseEvents";function Bh(t){"@babel/helpers - typeof";return Bh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bh(t)}function Fve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,uL(r.key),r)}}function Vve(t,e,n){return e&&zve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $b(t,e,n){return e=uL(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uL(t){var e=Bve(t,"string");return Bh(e)=="symbol"?e:e+""}function Bve(t,e){if(Bh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Uve=function(){function t(){Fve(this,t),$b(this,"activeIndex",0),$b(this,"coordinateList",[]),$b(this,"layout","horizontal")}return Vve(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,a=i===void 0?null:i,o=n.container,s=o===void 0?null:o,l=n.layout,u=l===void 0?null:l,c=n.offset,f=c===void 0?null:c,m=n.mouseHandlerCallback,g=m===void 0?null:m;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=s??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=g??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,o=i.y,s=i.height,l=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,c=((r=window)===null||r===void 0?void 0:r.scrollY)||0,f=a+l+u,m=o+this.offset.top+s/2+c;this.mouseHandlerCallback({pageX:f,pageY:m})}}}])}();function Wve(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&ke(r)&&ke(i))return!0}return!1}function qve(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function cL(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,a=t.endAngle,o=tr(e,n,r,i),s=tr(e,n,r,a);return{points:[o,s],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}function Kve(t,e,n){var r,i,a,o;if(t==="horizontal")r=e.x,a=r,i=n.top,o=n.top+n.height;else if(t==="vertical")i=e.y,o=i,r=n.left,a=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var s=e.cx,l=e.cy,u=e.innerRadius,c=e.outerRadius,f=e.angle,m=tr(s,l,u,f),g=tr(s,l,c,f);r=m.x,i=m.y,a=g.x,o=g.y}else return cL(e);return[{x:r,y:i},{x:a,y:o}]}function Uh(t){"@babel/helpers - typeof";return Uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uh(t)}function xC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Em(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xC(Object(n),!0).forEach(function(r){Hve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hve(t,e,n){return e=Gve(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gve(t){var e=Yve(t,"string");return Uh(e)=="symbol"?e:e+""}function Yve(t,e){if(Uh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Uh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xve(t){var e,n,r=t.element,i=t.tooltipEventType,a=t.isActive,o=t.activeCoordinate,s=t.activePayload,l=t.offset,u=t.activeTooltipIndex,c=t.tooltipAxisBandSize,f=t.layout,m=t.chartName,g=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!g||!a||!o||m!=="ScatterChart"&&i!=="axis")return null;var b,v=ac;if(m==="ScatterChart")b=o,v=zhe;else if(m==="BarChart")b=qve(f,o,l,c),v=wE;else if(f==="radial"){var x=cL(o),S=x.cx,E=x.cy,T=x.radius,j=x.startAngle,_=x.endAngle;b={cx:S,cy:E,startAngle:j,endAngle:_,innerRadius:T,outerRadius:T},v=c4}else b={points:Kve(f,o,l)},v=ac;var P=Em(Em(Em(Em({stroke:"#ccc",pointerEvents:"none"},l),b),st(g,!1)),{},{payload:s,payloadIndex:u,className:bt("recharts-tooltip-cursor",g.className)});return z.isValidElement(g)?z.cloneElement(g,P):z.createElement(v,P)}var Qve=["item"],Jve=["children","className","width","height","style","compact","title","desc"];function Kc(t){"@babel/helpers - typeof";return Kc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kc(t)}function qu(){return qu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qu.apply(this,arguments)}function wC(t,e){return t0e(t)||e0e(t,e)||dL(t,e)||Zve()}function Zve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}function t0e(t){if(Array.isArray(t))return t}function _C(t,e){if(t==null)return{};var n=n0e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function n0e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function r0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i0e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hL(r.key),r)}}function a0e(t,e,n){return e&&i0e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function o0e(t,e,n){return e=Fy(e),s0e(t,fL()?Reflect.construct(e,n||[],Fy(t).constructor):e.apply(t,n))}function s0e(t,e){if(e&&(Kc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l0e(t)}function l0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fL=function(){return!!t})()}function Fy(t){return Fy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Fy(t)}function u0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C_(t,e)}function C_(t,e){return C_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},C_(t,e)}function Hc(t){return d0e(t)||f0e(t)||dL(t)||c0e()}function c0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dL(t,e){if(t){if(typeof t=="string")return I_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I_(t,e)}}function f0e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function d0e(t){if(Array.isArray(t))return I_(t)}function I_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function SC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SC(Object(n),!0).forEach(function(r){Ge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SC(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ge(t,e,n){return e=hL(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hL(t){var e=h0e(t,"string");return Kc(e)=="symbol"?e:e+""}function h0e(t,e){if(Kc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Kc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var p0e={xAxis:["bottom","top"],yAxis:["left","right"]},m0e={width:"100%",height:"100%"},pL={x:0,y:0};function Am(t){return t}var g0e=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},y0e=function(e,n,r,i){var a=n.find(function(c){return c&&c.index===r});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var o=a.coordinate,s=i.radius;return pe(pe(pe({},i),tr(i.cx,i.cy,s,o)),{},{angle:o,radius:s})}var l=a.coordinate,u=i.angle;return pe(pe(pe({},i),tr(i.cx,i.cy,l,u)),{},{angle:u,radius:l})}return pL},d0=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,a=n.dataEndIndex,o=(r??[]).reduce(function(s,l){var u=l.props.data;return u&&u.length?[].concat(Hc(s),Hc(u)):s},[]);return o.length>0?o:e&&e.length&&ke(i)&&ke(a)?e.slice(i,a+1):[]};function mL(t){return t==="number"?[0,"auto"]:void 0}var j_=function(e,n,r,i){var a=e.graphicalItems,o=e.tooltipAxis,s=d0(n,e);return r<0||!a||!a.length||r>=s.length?null:a.reduce(function(l,u){var c,f=(c=u.props.data)!==null&&c!==void 0?c:n;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var m;if(o.dataKey&&!o.allowDuplicatedCategory){var g=f===void 0?s:f;m=Fg(g,o.dataKey,i)}else m=f&&f[r]||s[r];return m?[].concat(Hc(l),[s4(u,m)]):l},[])},EC=function(e,n,r,i){var a=i||{x:e.chartX,y:e.chartY},o=g0e(a,r),s=e.orderedTooltipTicks,l=e.tooltipAxis,u=e.tooltipTicks,c=wce(o,s,u,l);if(c>=0&&u){var f=u[c]&&u[c].value,m=j_(e,n,c,f),g=y0e(r,s,c,a);return{activeTooltipIndex:c,activeLabel:f,activePayload:m,activeCoordinate:g}}return null},v0e=function(e,n){var r=n.axes,i=n.graphicalItems,a=n.axisType,o=n.axisIdKey,s=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.layout,f=e.children,m=e.stackOffset,g=i4(c,a);return r.reduce(function(b,v){var x,S=v.type.defaultProps!==void 0?pe(pe({},v.type.defaultProps),v.props):v.props,E=S.type,T=S.dataKey,j=S.allowDataOverflow,_=S.allowDuplicatedCategory,P=S.scale,w=S.ticks,O=S.includeHidden,I=S[o];if(b[I])return b;var R=d0(e.data,{graphicalItems:i.filter(function(be){var he,Se=o in be.props?be.props[o]:(he=be.type.defaultProps)===null||he===void 0?void 0:he[o];return Se===I}),dataStartIndex:l,dataEndIndex:u}),D=R.length,$,L,ne;Wve(S.domain,j,E)&&($=Yw(S.domain,null,j),g&&(E==="number"||P!=="auto")&&(ne=Cd(R,T,"category")));var ae=mL(E);if(!$||$.length===0){var ce,me=(ce=S.domain)!==null&&ce!==void 0?ce:ae;if(T){if($=Cd(R,T,E),E==="category"&&g){var X=uY($);_&&X?(L=$,$=Ay(0,D)):_||($=ek(me,$,v).reduce(function(be,he){return be.indexOf(he)>=0?be:[].concat(Hc(be),[he])},[]))}else if(E==="category")_?$=$.filter(function(be){return be!==""&&!ft(be)}):$=ek(me,$,v).reduce(function(be,he){return be.indexOf(he)>=0||he===""||ft(he)?be:[].concat(Hc(be),[he])},[]);else if(E==="number"){var ie=Tce(R,i.filter(function(be){var he,Se,Ve=o in be.props?be.props[o]:(he=be.type.defaultProps)===null||he===void 0?void 0:he[o],We="hide"in be.props?be.props.hide:(Se=be.type.defaultProps)===null||Se===void 0?void 0:Se.hide;return Ve===I&&(O||!We)}),T,a,c);ie&&($=ie)}g&&(E==="number"||P!=="auto")&&(ne=Cd(R,T,"category"))}else g?$=Ay(0,D):s&&s[I]&&s[I].hasStack&&E==="number"?$=m==="expand"?[0,1]:o4(s[I].stackGroups,l,u):$=r4(R,i.filter(function(be){var he=o in be.props?be.props[o]:be.type.defaultProps[o],Se="hide"in be.props?be.props.hide:be.type.defaultProps.hide;return he===I&&(O||!Se)}),E,c,!0);if(E==="number")$=k_(f,$,I,a,w),me&&($=Yw(me,$,j));else if(E==="category"&&me){var ge=me,Te=$.every(function(be){return ge.indexOf(be)>=0});Te&&($=ge)}}return pe(pe({},b),{},Ge({},I,pe(pe({},S),{},{axisType:a,domain:$,categoricalDomain:ne,duplicateDomain:L,originalDomain:(x=S.domain)!==null&&x!==void 0?x:ae,isCategorical:g,layout:c})))},{})},b0e=function(e,n){var r=n.graphicalItems,i=n.Axis,a=n.axisType,o=n.axisIdKey,s=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.layout,f=e.children,m=d0(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:u}),g=m.length,b=i4(c,a),v=-1;return r.reduce(function(x,S){var E=S.type.defaultProps!==void 0?pe(pe({},S.type.defaultProps),S.props):S.props,T=E[o],j=mL("number");if(!x[T]){v++;var _;return b?_=Ay(0,g):s&&s[T]&&s[T].hasStack?(_=o4(s[T].stackGroups,l,u),_=k_(f,_,T,a)):(_=Yw(j,r4(m,r.filter(function(P){var w,O,I=o in P.props?P.props[o]:(w=P.type.defaultProps)===null||w===void 0?void 0:w[o],R="hide"in P.props?P.props.hide:(O=P.type.defaultProps)===null||O===void 0?void 0:O.hide;return I===T&&!R}),"number",c),i.defaultProps.allowDataOverflow),_=k_(f,_,T,a)),pe(pe({},x),{},Ge({},T,pe(pe({axisType:a},i.defaultProps),{},{hide:!0,orientation:Ni(p0e,"".concat(a,".").concat(v%2),null),domain:_,originalDomain:j,isCategorical:b,layout:c})))}return x},{})},x0e=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,a=n.AxisComp,o=n.graphicalItems,s=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.children,f="".concat(i,"Id"),m=Di(c,a),g={};return m&&m.length?g=v0e(e,{axes:m,graphicalItems:o,axisType:i,axisIdKey:f,stackGroups:s,dataStartIndex:l,dataEndIndex:u}):o&&o.length&&(g=b0e(e,{Axis:a,graphicalItems:o,axisType:i,axisIdKey:f,stackGroups:s,dataStartIndex:l,dataEndIndex:u})),g},w0e=function(e){var n=ts(e),r=po(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:GS(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:gy(n,r)}},AC=function(e){var n=e.children,r=e.defaultShowTooltip,i=ii(n,Mc),a=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},_0e=function(e){return!e||!e.length?!1:e.some(function(n){var r=yo(n&&n.type);return r&&r.indexOf("Bar")>=0})},TC=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},S0e=function(e,n){var r=e.props,i=e.graphicalItems,a=e.xAxisMap,o=a===void 0?{}:a,s=e.yAxisMap,l=s===void 0?{}:s,u=r.width,c=r.height,f=r.children,m=r.margin||{},g=ii(f,Mc),b=ii(f,Cl),v=Object.keys(l).reduce(function(_,P){var w=l[P],O=w.orientation;return!w.mirror&&!w.hide?pe(pe({},_),{},Ge({},O,_[O]+w.width)):_},{left:m.left||0,right:m.right||0}),x=Object.keys(o).reduce(function(_,P){var w=o[P],O=w.orientation;return!w.mirror&&!w.hide?pe(pe({},_),{},Ge({},O,Ni(_,"".concat(O))+w.height)):_},{top:m.top||0,bottom:m.bottom||0}),S=pe(pe({},x),v),E=S.bottom;g&&(S.bottom+=g.props.height||Mc.defaultProps.height),b&&n&&(S=Ece(S,i,r,n));var T=u-S.left-S.right,j=c-S.top-S.bottom;return pe(pe({brushBottom:E},S),{},{width:Math.max(T,0),height:Math.max(j,0)})},E0e=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},IE=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,o=e.validateTooltipEventTypes,s=o===void 0?["axis"]:o,l=e.axisComponents,u=e.legendContent,c=e.formatAxisMap,f=e.defaultProps,m=function(S,E){var T=E.graphicalItems,j=E.stackGroups,_=E.offset,P=E.updateId,w=E.dataStartIndex,O=E.dataEndIndex,I=S.barSize,R=S.layout,D=S.barGap,$=S.barCategoryGap,L=S.maxBarSize,ne=TC(R),ae=ne.numericAxisName,ce=ne.cateAxisName,me=_0e(T),X=[];return T.forEach(function(ie,ge){var Te=d0(S.data,{graphicalItems:[ie],dataStartIndex:w,dataEndIndex:O}),be=ie.type.defaultProps!==void 0?pe(pe({},ie.type.defaultProps),ie.props):ie.props,he=be.dataKey,Se=be.maxBarSize,Ve=be["".concat(ae,"Id")],We=be["".concat(ce,"Id")],we={},Be=l.reduce(function(tt,Ft){var bn=E["".concat(Ft.axisType,"Map")],Yr=be["".concat(Ft.axisType,"Id")];bn&&bn[Yr]||Ft.axisType==="zAxis"||Wl();var zn=bn[Yr];return pe(pe({},tt),{},Ge(Ge({},Ft.axisType,zn),"".concat(Ft.axisType,"Ticks"),po(zn)))},we),te=Be[ce],$e=Be["".concat(ce,"Ticks")],Ue=j&&j[Ve]&&j[Ve].hasStack&&Lce(ie,j[Ve].stackGroups),se=yo(ie.type).indexOf("Bar")>=0,ut=gy(te,$e),Ee=[],ct=me&&_ce({barSize:I,stackGroups:j,totalSize:E0e(Be,ce)});if(se){var yt,Ut,Gn=ft(Se)?L:Se,Ct=(yt=(Ut=gy(te,$e,!0))!==null&&Ut!==void 0?Ut:Gn)!==null&&yt!==void 0?yt:0;Ee=Sce({barGap:D,barCategoryGap:$,bandSize:Ct!==ut?Ct:ut,sizeList:ct[We],maxBarSize:Gn}),Ct!==ut&&(Ee=Ee.map(function(tt){return pe(pe({},tt),{},{position:pe(pe({},tt.position),{},{offset:tt.position.offset-Ct/2})})}))}var Mt=ie&&ie.type&&ie.type.getComposedData;Mt&&X.push({props:pe(pe({},Mt(pe(pe({},Be),{},{displayedData:Te,props:S,dataKey:he,item:ie,bandSize:ut,barPosition:Ee,offset:_,stackedData:Ue,layout:R,dataStartIndex:w,dataEndIndex:O}))),{},Ge(Ge(Ge({key:ie.key||"item-".concat(ge)},ae,Be[ae]),ce,Be[ce]),"animationId",P)),childIndex:wY(ie,S.children),item:ie})}),X},g=function(S,E){var T=S.props,j=S.dataStartIndex,_=S.dataEndIndex,P=S.updateId;if(!GP({props:T}))return null;var w=T.children,O=T.layout,I=T.stackOffset,R=T.data,D=T.reverseStackOrder,$=TC(O),L=$.numericAxisName,ne=$.cateAxisName,ae=Di(w,r),ce=Mce(R,ae,"".concat(L,"Id"),"".concat(ne,"Id"),I,D),me=l.reduce(function(be,he){var Se="".concat(he.axisType,"Map");return pe(pe({},be),{},Ge({},Se,x0e(T,pe(pe({},he),{},{graphicalItems:ae,stackGroups:he.axisType===L&&ce,dataStartIndex:j,dataEndIndex:_}))))},{}),X=S0e(pe(pe({},me),{},{props:T,graphicalItems:ae}),E==null?void 0:E.legendBBox);Object.keys(me).forEach(function(be){me[be]=c(T,me[be],X,be.replace("Map",""),n)});var ie=me["".concat(ne,"Map")],ge=w0e(ie),Te=m(T,pe(pe({},me),{},{dataStartIndex:j,dataEndIndex:_,updateId:P,graphicalItems:ae,stackGroups:ce,offset:X}));return pe(pe({formattedGraphicalItems:Te,graphicalItems:ae,offset:X,stackGroups:ce},ge),me)},b=function(x){function S(E){var T,j,_;return r0e(this,S),_=o0e(this,S,[E]),Ge(_,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ge(_,"accessibilityManager",new Uve),Ge(_,"handleLegendBBoxUpdate",function(P){if(P){var w=_.state,O=w.dataStartIndex,I=w.dataEndIndex,R=w.updateId;_.setState(pe({legendBBox:P},g({props:_.props,dataStartIndex:O,dataEndIndex:I,updateId:R},pe(pe({},_.state),{},{legendBBox:P}))))}}),Ge(_,"handleReceiveSyncEvent",function(P,w,O){if(_.props.syncId===P){if(O===_.eventEmitterSymbol&&typeof _.props.syncMethod!="function")return;_.applySyncEvent(w)}}),Ge(_,"handleBrushChange",function(P){var w=P.startIndex,O=P.endIndex;if(w!==_.state.dataStartIndex||O!==_.state.dataEndIndex){var I=_.state.updateId;_.setState(function(){return pe({dataStartIndex:w,dataEndIndex:O},g({props:_.props,dataStartIndex:w,dataEndIndex:O,updateId:I},_.state))}),_.triggerSyncEvent({dataStartIndex:w,dataEndIndex:O})}}),Ge(_,"handleMouseEnter",function(P){var w=_.getMouseInfo(P);if(w){var O=pe(pe({},w),{},{isTooltipActive:!0});_.setState(O),_.triggerSyncEvent(O);var I=_.props.onMouseEnter;ot(I)&&I(O,P)}}),Ge(_,"triggeredAfterMouseMove",function(P){var w=_.getMouseInfo(P),O=w?pe(pe({},w),{},{isTooltipActive:!0}):{isTooltipActive:!1};_.setState(O),_.triggerSyncEvent(O);var I=_.props.onMouseMove;ot(I)&&I(O,P)}),Ge(_,"handleItemMouseEnter",function(P){_.setState(function(){return{isTooltipActive:!0,activeItem:P,activePayload:P.tooltipPayload,activeCoordinate:P.tooltipPosition||{x:P.cx,y:P.cy}}})}),Ge(_,"handleItemMouseLeave",function(){_.setState(function(){return{isTooltipActive:!1}})}),Ge(_,"handleMouseMove",function(P){P.persist(),_.throttleTriggeredAfterMouseMove(P)}),Ge(_,"handleMouseLeave",function(P){_.throttleTriggeredAfterMouseMove.cancel();var w={isTooltipActive:!1};_.setState(w),_.triggerSyncEvent(w);var O=_.props.onMouseLeave;ot(O)&&O(w,P)}),Ge(_,"handleOuterEvent",function(P){var w=xY(P),O=Ni(_.props,"".concat(w));if(w&&ot(O)){var I,R;/.*touch.*/i.test(w)?R=_.getMouseInfo(P.changedTouches[0]):R=_.getMouseInfo(P),O((I=R)!==null&&I!==void 0?I:{},P)}}),Ge(_,"handleClick",function(P){var w=_.getMouseInfo(P);if(w){var O=pe(pe({},w),{},{isTooltipActive:!0});_.setState(O),_.triggerSyncEvent(O);var I=_.props.onClick;ot(I)&&I(O,P)}}),Ge(_,"handleMouseDown",function(P){var w=_.props.onMouseDown;if(ot(w)){var O=_.getMouseInfo(P);w(O,P)}}),Ge(_,"handleMouseUp",function(P){var w=_.props.onMouseUp;if(ot(w)){var O=_.getMouseInfo(P);w(O,P)}}),Ge(_,"handleTouchMove",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&_.throttleTriggeredAfterMouseMove(P.changedTouches[0])}),Ge(_,"handleTouchStart",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&_.handleMouseDown(P.changedTouches[0])}),Ge(_,"handleTouchEnd",function(P){P.changedTouches!=null&&P.changedTouches.length>0&&_.handleMouseUp(P.changedTouches[0])}),Ge(_,"handleDoubleClick",function(P){var w=_.props.onDoubleClick;if(ot(w)){var O=_.getMouseInfo(P);w(O,P)}}),Ge(_,"handleContextMenu",function(P){var w=_.props.onContextMenu;if(ot(w)){var O=_.getMouseInfo(P);w(O,P)}}),Ge(_,"triggerSyncEvent",function(P){_.props.syncId!==void 0&&Mb.emit(Rb,_.props.syncId,P,_.eventEmitterSymbol)}),Ge(_,"applySyncEvent",function(P){var w=_.props,O=w.layout,I=w.syncMethod,R=_.state.updateId,D=P.dataStartIndex,$=P.dataEndIndex;if(P.dataStartIndex!==void 0||P.dataEndIndex!==void 0)_.setState(pe({dataStartIndex:D,dataEndIndex:$},g({props:_.props,dataStartIndex:D,dataEndIndex:$,updateId:R},_.state)));else if(P.activeTooltipIndex!==void 0){var L=P.chartX,ne=P.chartY,ae=P.activeTooltipIndex,ce=_.state,me=ce.offset,X=ce.tooltipTicks;if(!me)return;if(typeof I=="function")ae=I(X,P);else if(I==="value"){ae=-1;for(var ie=0;ie<X.length;ie++)if(X[ie].value===P.activeLabel){ae=ie;break}}var ge=pe(pe({},me),{},{x:me.left,y:me.top}),Te=Math.min(L,ge.x+ge.width),be=Math.min(ne,ge.y+ge.height),he=X[ae]&&X[ae].value,Se=j_(_.state,_.props.data,ae),Ve=X[ae]?{x:O==="horizontal"?X[ae].coordinate:Te,y:O==="horizontal"?be:X[ae].coordinate}:pL;_.setState(pe(pe({},P),{},{activeLabel:he,activeCoordinate:Ve,activePayload:Se,activeTooltipIndex:ae}))}else _.setState(P)}),Ge(_,"renderCursor",function(P){var w,O=_.state,I=O.isTooltipActive,R=O.activeCoordinate,D=O.activePayload,$=O.offset,L=O.activeTooltipIndex,ne=O.tooltipAxisBandSize,ae=_.getTooltipEventType(),ce=(w=P.props.active)!==null&&w!==void 0?w:I,me=_.props.layout,X=P.key||"_recharts-cursor";return U.createElement(Xve,{key:X,activeCoordinate:R,activePayload:D,activeTooltipIndex:L,chartName:n,element:P,isActive:ce,layout:me,offset:$,tooltipAxisBandSize:ne,tooltipEventType:ae})}),Ge(_,"renderPolarAxis",function(P,w,O){var I=Ni(P,"type.axisType"),R=Ni(_.state,"".concat(I,"Map")),D=P.type.defaultProps,$=D!==void 0?pe(pe({},D),P.props):P.props,L=R&&R[$["".concat(I,"Id")]];return z.cloneElement(P,pe(pe({},L),{},{className:bt(I,L.className),key:P.key||"".concat(w,"-").concat(O),ticks:po(L,!0)}))}),Ge(_,"renderPolarGrid",function(P){var w=P.props,O=w.radialLines,I=w.polarAngles,R=w.polarRadius,D=_.state,$=D.radiusAxisMap,L=D.angleAxisMap,ne=ts($),ae=ts(L),ce=ae.cx,me=ae.cy,X=ae.innerRadius,ie=ae.outerRadius;return z.cloneElement(P,{polarAngles:Array.isArray(I)?I:po(ae,!0).map(function(ge){return ge.coordinate}),polarRadius:Array.isArray(R)?R:po(ne,!0).map(function(ge){return ge.coordinate}),cx:ce,cy:me,innerRadius:X,outerRadius:ie,key:P.key||"polar-grid",radialLines:O})}),Ge(_,"renderLegend",function(){var P=_.state.formattedGraphicalItems,w=_.props,O=w.children,I=w.width,R=w.height,D=_.props.margin||{},$=I-(D.left||0)-(D.right||0),L=t4({children:O,formattedGraphicalItems:P,legendWidth:$,legendContent:u});if(!L)return null;var ne=L.item,ae=_C(L,Qve);return z.cloneElement(ne,pe(pe({},ae),{},{chartWidth:I,chartHeight:R,margin:D,onBBoxUpdate:_.handleLegendBBoxUpdate}))}),Ge(_,"renderTooltip",function(){var P,w=_.props,O=w.children,I=w.accessibilityLayer,R=ii(O,Tn);if(!R)return null;var D=_.state,$=D.isTooltipActive,L=D.activeCoordinate,ne=D.activePayload,ae=D.activeLabel,ce=D.offset,me=(P=R.props.active)!==null&&P!==void 0?P:$;return z.cloneElement(R,{viewBox:pe(pe({},ce),{},{x:ce.left,y:ce.top}),active:me,label:ae,payload:me?ne:[],coordinate:L,accessibilityLayer:I})}),Ge(_,"renderBrush",function(P){var w=_.props,O=w.margin,I=w.data,R=_.state,D=R.offset,$=R.dataStartIndex,L=R.dataEndIndex,ne=R.updateId;return z.cloneElement(P,{key:P.key||"_recharts-brush",onChange:xm(_.handleBrushChange,P.props.onChange),data:I,x:ke(P.props.x)?P.props.x:D.left,y:ke(P.props.y)?P.props.y:D.top+D.height+D.brushBottom-(O.bottom||0),width:ke(P.props.width)?P.props.width:D.width,startIndex:$,endIndex:L,updateId:"brush-".concat(ne)})}),Ge(_,"renderReferenceElement",function(P,w,O){if(!P)return null;var I=_,R=I.clipPathId,D=_.state,$=D.xAxisMap,L=D.yAxisMap,ne=D.offset,ae=P.type.defaultProps||{},ce=P.props,me=ce.xAxisId,X=me===void 0?ae.xAxisId:me,ie=ce.yAxisId,ge=ie===void 0?ae.yAxisId:ie;return z.cloneElement(P,{key:P.key||"".concat(w,"-").concat(O),xAxis:$[X],yAxis:L[ge],viewBox:{x:ne.left,y:ne.top,width:ne.width,height:ne.height},clipPathId:R})}),Ge(_,"renderActivePoints",function(P){var w=P.item,O=P.activePoint,I=P.basePoint,R=P.childIndex,D=P.isRange,$=[],L=w.props.key,ne=w.item.type.defaultProps!==void 0?pe(pe({},w.item.type.defaultProps),w.item.props):w.item.props,ae=ne.activeDot,ce=ne.dataKey,me=pe(pe({index:R,dataKey:ce,cx:O.x,cy:O.y,r:4,fill:xE(w.item),strokeWidth:2,stroke:"#fff",payload:O.payload,value:O.value},st(ae,!1)),zg(ae));return $.push(S.renderActiveDot(ae,me,"".concat(L,"-activePoint-").concat(R))),I?$.push(S.renderActiveDot(ae,pe(pe({},me),{},{cx:I.x,cy:I.y}),"".concat(L,"-basePoint-").concat(R))):D&&$.push(null),$}),Ge(_,"renderGraphicChild",function(P,w,O){var I=_.filterFormatItem(P,w,O);if(!I)return null;var R=_.getTooltipEventType(),D=_.state,$=D.isTooltipActive,L=D.tooltipAxis,ne=D.activeTooltipIndex,ae=D.activeLabel,ce=_.props.children,me=ii(ce,Tn),X=I.props,ie=X.points,ge=X.isRange,Te=X.baseLine,be=I.item.type.defaultProps!==void 0?pe(pe({},I.item.type.defaultProps),I.item.props):I.item.props,he=be.activeDot,Se=be.hide,Ve=be.activeBar,We=be.activeShape,we=!!(!Se&&$&&me&&(he||Ve||We)),Be={};R!=="axis"&&me&&me.props.trigger==="click"?Be={onClick:xm(_.handleItemMouseEnter,P.props.onClick)}:R!=="axis"&&(Be={onMouseLeave:xm(_.handleItemMouseLeave,P.props.onMouseLeave),onMouseEnter:xm(_.handleItemMouseEnter,P.props.onMouseEnter)});var te=z.cloneElement(P,pe(pe({},I.props),Be));function $e(Ft){return typeof L.dataKey=="function"?L.dataKey(Ft.payload):null}if(we)if(ne>=0){var Ue,se;if(L.dataKey&&!L.allowDuplicatedCategory){var ut=typeof L.dataKey=="function"?$e:"payload.".concat(L.dataKey.toString());Ue=Fg(ie,ut,ae),se=ge&&Te&&Fg(Te,ut,ae)}else Ue=ie==null?void 0:ie[ne],se=ge&&Te&&Te[ne];if(We||Ve){var Ee=P.props.activeIndex!==void 0?P.props.activeIndex:ne;return[z.cloneElement(P,pe(pe(pe({},I.props),Be),{},{activeIndex:Ee})),null,null]}if(!ft(Ue))return[te].concat(Hc(_.renderActivePoints({item:I,activePoint:Ue,basePoint:se,childIndex:ne,isRange:ge})))}else{var ct,yt=(ct=_.getItemByXY(_.state.activeCoordinate))!==null&&ct!==void 0?ct:{graphicalItem:te},Ut=yt.graphicalItem,Gn=Ut.item,Ct=Gn===void 0?P:Gn,Mt=Ut.childIndex,tt=pe(pe(pe({},I.props),Be),{},{activeIndex:Mt});return[z.cloneElement(Ct,tt),null,null]}return ge?[te,null,null]:[te,null]}),Ge(_,"renderCustomized",function(P,w,O){return z.cloneElement(P,pe(pe({key:"recharts-customized-".concat(O)},_.props),_.state))}),Ge(_,"renderMap",{CartesianGrid:{handler:Am,once:!0},ReferenceArea:{handler:_.renderReferenceElement},ReferenceLine:{handler:Am},ReferenceDot:{handler:_.renderReferenceElement},XAxis:{handler:Am},YAxis:{handler:Am},Brush:{handler:_.renderBrush,once:!0},Bar:{handler:_.renderGraphicChild},Line:{handler:_.renderGraphicChild},Area:{handler:_.renderGraphicChild},Radar:{handler:_.renderGraphicChild},RadialBar:{handler:_.renderGraphicChild},Scatter:{handler:_.renderGraphicChild},Pie:{handler:_.renderGraphicChild},Funnel:{handler:_.renderGraphicChild},Tooltip:{handler:_.renderCursor,once:!0},PolarGrid:{handler:_.renderPolarGrid,once:!0},PolarAngleAxis:{handler:_.renderPolarAxis},PolarRadiusAxis:{handler:_.renderPolarAxis},Customized:{handler:_.renderCustomized}}),_.clipPathId="".concat((T=E.id)!==null&&T!==void 0?T:hf("recharts"),"-clip"),_.throttleTriggeredAfterMouseMove=t$(_.triggeredAfterMouseMove,(j=E.throttleDelay)!==null&&j!==void 0?j:1e3/60),_.state={},_}return u0e(S,x),a0e(S,[{key:"componentDidMount",value:function(){var T,j;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(T=this.props.margin.left)!==null&&T!==void 0?T:0,top:(j=this.props.margin.top)!==null&&j!==void 0?j:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var T=this.props,j=T.children,_=T.data,P=T.height,w=T.layout,O=ii(j,Tn);if(O){var I=O.props.defaultIndex;if(!(typeof I!="number"||I<0||I>this.state.tooltipTicks.length-1)){var R=this.state.tooltipTicks[I]&&this.state.tooltipTicks[I].value,D=j_(this.state,_,I,R),$=this.state.tooltipTicks[I].coordinate,L=(this.state.offset.top+P)/2,ne=w==="horizontal",ae=ne?{x:$,y:L}:{y:$,x:L},ce=this.state.formattedGraphicalItems.find(function(X){var ie=X.item;return ie.type.name==="Scatter"});ce&&(ae=pe(pe({},ae),ce.props.points[I].tooltipPosition),D=ce.props.points[I].tooltipPayload);var me={activeTooltipIndex:I,isTooltipActive:!0,activeLabel:R,activePayload:D,activeCoordinate:ae};this.setState(me),this.renderCursor(O),this.accessibilityManager.setIndex(I)}}}},{key:"getSnapshotBeforeUpdate",value:function(T,j){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==j.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==T.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==T.margin){var _,P;this.accessibilityManager.setDetails({offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(P=this.props.margin.top)!==null&&P!==void 0?P:0}})}return null}},{key:"componentDidUpdate",value:function(T){cw([ii(T.children,Tn)],[ii(this.props.children,Tn)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var T=ii(this.props.children,Tn);if(T&&typeof T.props.shared=="boolean"){var j=T.props.shared?"axis":"item";return s.indexOf(j)>=0?j:a}return a}},{key:"getMouseInfo",value:function(T){if(!this.container)return null;var j=this.container,_=j.getBoundingClientRect(),P=Hae(_),w={chartX:Math.round(T.pageX-P.left),chartY:Math.round(T.pageY-P.top)},O=_.width/j.offsetWidth||1,I=this.inRange(w.chartX,w.chartY,O);if(!I)return null;var R=this.state,D=R.xAxisMap,$=R.yAxisMap,L=this.getTooltipEventType(),ne=EC(this.state,this.props.data,this.props.layout,I);if(L!=="axis"&&D&&$){var ae=ts(D).scale,ce=ts($).scale,me=ae&&ae.invert?ae.invert(w.chartX):null,X=ce&&ce.invert?ce.invert(w.chartY):null;return pe(pe({},w),{},{xValue:me,yValue:X},ne)}return ne?pe(pe({},w),ne):null}},{key:"inRange",value:function(T,j){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,P=this.props.layout,w=T/_,O=j/_;if(P==="horizontal"||P==="vertical"){var I=this.state.offset,R=w>=I.left&&w<=I.left+I.width&&O>=I.top&&O<=I.top+I.height;return R?{x:w,y:O}:null}var D=this.state,$=D.angleAxisMap,L=D.radiusAxisMap;if($&&L){var ne=ts($);return rk({x:w,y:O},ne)}return null}},{key:"parseEventsOfWrapper",value:function(){var T=this.props.children,j=this.getTooltipEventType(),_=ii(T,Tn),P={};_&&j==="axis"&&(_.props.trigger==="click"?P={onClick:this.handleClick}:P={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var w=zg(this.props,this.handleOuterEvent);return pe(pe({},w),P)}},{key:"addListener",value:function(){Mb.on(Rb,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Mb.removeListener(Rb,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(T,j,_){for(var P=this.state.formattedGraphicalItems,w=0,O=P.length;w<O;w++){var I=P[w];if(I.item===T||I.props.key===T.key||j===yo(I.item.type)&&_===I.childIndex)return I}return null}},{key:"renderClipPath",value:function(){var T=this.clipPathId,j=this.state.offset,_=j.left,P=j.top,w=j.height,O=j.width;return U.createElement("defs",null,U.createElement("clipPath",{id:T},U.createElement("rect",{x:_,y:P,height:w,width:O})))}},{key:"getXScales",value:function(){var T=this.state.xAxisMap;return T?Object.entries(T).reduce(function(j,_){var P=wC(_,2),w=P[0],O=P[1];return pe(pe({},j),{},Ge({},w,O.scale))},{}):null}},{key:"getYScales",value:function(){var T=this.state.yAxisMap;return T?Object.entries(T).reduce(function(j,_){var P=wC(_,2),w=P[0],O=P[1];return pe(pe({},j),{},Ge({},w,O.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(T){var j;return(j=this.state.xAxisMap)===null||j===void 0||(j=j[T])===null||j===void 0?void 0:j.scale}},{key:"getYScaleByAxisId",value:function(T){var j;return(j=this.state.yAxisMap)===null||j===void 0||(j=j[T])===null||j===void 0?void 0:j.scale}},{key:"getItemByXY",value:function(T){var j=this.state,_=j.formattedGraphicalItems,P=j.activeItem;if(_&&_.length)for(var w=0,O=_.length;w<O;w++){var I=_[w],R=I.props,D=I.item,$=D.type.defaultProps!==void 0?pe(pe({},D.type.defaultProps),D.props):D.props,L=yo(D.type);if(L==="Bar"){var ne=(R.data||[]).find(function(X){return Che(T,X)});if(ne)return{graphicalItem:I,payload:ne}}else if(L==="RadialBar"){var ae=(R.data||[]).find(function(X){return rk(T,X)});if(ae)return{graphicalItem:I,payload:ae}}else if(r0(I,P)||i0(I,P)||$h(I,P)){var ce=Npe({graphicalItem:I,activeTooltipItem:P,itemData:$.data}),me=$.activeIndex===void 0?ce:$.activeIndex;return{graphicalItem:pe(pe({},I),{},{childIndex:me}),payload:$h(I,P)?$.data[ce]:I.props.data[ce]}}}return null}},{key:"render",value:function(){var T=this;if(!GP(this))return null;var j=this.props,_=j.children,P=j.className,w=j.width,O=j.height,I=j.style,R=j.compact,D=j.title,$=j.desc,L=_C(j,Jve),ne=st(L,!1);if(R)return U.createElement(tC,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},U.createElement(dw,qu({},ne,{width:w,height:O,title:D,desc:$}),this.renderClipPath(),XP(_,this.renderMap)));if(this.props.accessibilityLayer){var ae,ce;ne.tabIndex=(ae=this.props.tabIndex)!==null&&ae!==void 0?ae:0,ne.role=(ce=this.props.role)!==null&&ce!==void 0?ce:"application",ne.onKeyDown=function(X){T.accessibilityManager.keyboardEvent(X)},ne.onFocus=function(){T.accessibilityManager.focus()}}var me=this.parseEventsOfWrapper();return U.createElement(tC,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},U.createElement("div",qu({className:bt("recharts-wrapper",P),style:pe({position:"relative",cursor:"default",width:w,height:O},I)},me,{ref:function(ie){T.container=ie}}),U.createElement(dw,qu({},ne,{width:w,height:O,title:D,desc:$,style:m0e}),this.renderClipPath(),XP(_,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(z.Component);Ge(b,"displayName",n),Ge(b,"defaultProps",pe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Ge(b,"getDerivedStateFromProps",function(x,S){var E=x.dataKey,T=x.data,j=x.children,_=x.width,P=x.height,w=x.layout,O=x.stackOffset,I=x.margin,R=S.dataStartIndex,D=S.dataEndIndex;if(S.updateId===void 0){var $=AC(x);return pe(pe(pe({},$),{},{updateId:0},g(pe(pe({props:x},$),{},{updateId:0}),S)),{},{prevDataKey:E,prevData:T,prevWidth:_,prevHeight:P,prevLayout:w,prevStackOffset:O,prevMargin:I,prevChildren:j})}if(E!==S.prevDataKey||T!==S.prevData||_!==S.prevWidth||P!==S.prevHeight||w!==S.prevLayout||O!==S.prevStackOffset||!nc(I,S.prevMargin)){var L=AC(x),ne={chartX:S.chartX,chartY:S.chartY,isTooltipActive:S.isTooltipActive},ae=pe(pe({},EC(S,T,w)),{},{updateId:S.updateId+1}),ce=pe(pe(pe({},L),ne),ae);return pe(pe(pe({},ce),g(pe({props:x},ce),S)),{},{prevDataKey:E,prevData:T,prevWidth:_,prevHeight:P,prevLayout:w,prevStackOffset:O,prevMargin:I,prevChildren:j})}if(!cw(j,S.prevChildren)){var me,X,ie,ge,Te=ii(j,Mc),be=Te&&(me=(X=Te.props)===null||X===void 0?void 0:X.startIndex)!==null&&me!==void 0?me:R,he=Te&&(ie=(ge=Te.props)===null||ge===void 0?void 0:ge.endIndex)!==null&&ie!==void 0?ie:D,Se=be!==R||he!==D,Ve=!ft(T),We=Ve&&!Se?S.updateId:S.updateId+1;return pe(pe({updateId:We},g(pe(pe({props:x},S),{},{updateId:We,dataStartIndex:be,dataEndIndex:he}),S)),{},{prevChildren:j,dataStartIndex:be,dataEndIndex:he})}return null}),Ge(b,"renderActiveDot",function(x,S,E){var T;return z.isValidElement(x)?T=z.cloneElement(x,S):ot(x)?T=x(S):T=U.createElement(n0,S),U.createElement(Yt,{className:"recharts-active-dot",key:E},T)});var v=z.forwardRef(function(S,E){return U.createElement(b,qu({},S,{ref:E}))});return v.displayName=b.displayName,v},A0e=IE({chartName:"LineChart",GraphicalChild:Bc,axisComponents:[{axisType:"xAxis",AxisComp:vr},{axisType:"yAxis",AxisComp:br}],formatAxisMap:_E}),mo=IE({chartName:"BarChart",GraphicalChild:Tr,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:vr},{axisType:"yAxis",AxisComp:br}],formatAxisMap:_E}),T0e=IE({chartName:"AreaChart",GraphicalChild:Bs,axisComponents:[{axisType:"xAxis",AxisComp:vr},{axisType:"yAxis",AxisComp:br}],formatAxisMap:_E});const _p=(t,e)=>{const n=new Date(t),r=new Date(e);if(isNaN(n.getTime())||isNaN(r.getTime()))return 0;const i=r.getTime()-n.getTime(),a=Math.ceil(i/(1e3*60*60*24));return Math.max(0,a)},P0e=(t,e)=>{const r=1+(e-50)/(e+50),i=t*Math.max(.5,r);return parseFloat(i.toFixed(2))},O0e=t=>{const[e,n]=z.useState([]),[r,i]=z.useState([]),[a,o]=z.useState(!0);return z.useEffect(()=>{if(!t)return;(async()=>{o(!0);try{const[u,c]=await Promise.all([Pt.weighings.where("goatId").equals(t).toArray(),Pt.parturitions.where("goatId").equals(t).toArray()]);n(u),i(c.sort((f,m)=>new Date(f.parturitionDate).getTime()-new Date(m.parturitionDate).getTime()))}catch(u){console.error(`Error al cargar datos para ${t}:`,u)}finally{o(!1)}})()},[t]),{...z.useMemo(()=>{if(r.length===0)return{allLactations:[],parturitionIntervals:[],lastWeighingDate:null};const l=r.map((f,m)=>{const g=new Date(f.parturitionDate),b=m<r.length-1?new Date(r[m+1].parturitionDate):new Date,v=e.filter(P=>{const w=new Date(P.date);return w>=g&&w<b}),x=v.map(P=>({del:_p(f.parturitionDate,P.date),kg:P.kg})).sort((P,w)=>P.del-w.del),S=v.reduce((P,w)=>P+w.kg,0),E=v.length>0?S/v.length:0,T=x.reduce((P,w)=>w.kg>P.kg?w:P,{kg:0,del:0}),j=x[x.length-1],_=j?j.del:0;return{parturitionDate:f.parturitionDate,weighings:v,lactationCurve:x,averageProduction:E,peakProduction:T,totalDays:_}}),u=r.slice(1).map((f,m)=>{const g=r[m],b=new Date(f.parturitionDate).getTime()-new Date(g.parturitionDate).getTime();return{period:`${g.parturitionDate.substring(0,4)} - ${f.parturitionDate.substring(0,4)}`,days:Math.round(b/(1e3*60*60*24))}}),c=e.sort((f,m)=>new Date(m.date).getTime()-new Date(f.date).getTime())[0];return{allLactations:l,parturitionIntervals:u,lastWeighingDate:(c==null?void 0:c.date)||null}},[e,r]),isLoading:a}},k0e=(t,e,n,r)=>{const[i,a]=z.useState([]),[o,s]=z.useState(!1);return z.useEffect(()=>{if(!t||!e.length){a([]);return}(()=>{s(!0);let u=[];if(t==="PRIMIPARAS_HISTORICAL"){const g=n.reduce((b,v)=>(b[v.goatId]=(b[v.goatId]||0)+1,b),{});u=e.filter(b=>g[b.id]===1).map(b=>b.id)}else if(t==="MULTIPARAS_HISTORICAL"){const g=n.reduce((b,v)=>(b[v.goatId]=(b[v.goatId]||0)+1,b),{});u=e.filter(b=>g[b.id]>1).map(b=>b.id)}const c=r.filter(g=>u.includes(g.goatId)),f={};c.forEach(g=>{const b=n.filter(x=>x.goatId===g.goatId&&new Date(g.date)>=new Date(x.parturitionDate)).sort((x,S)=>new Date(S.parturitionDate).getTime()-new Date(x.parturitionDate).getTime())[0];if(!b)return;const v=_p(b.parturitionDate,g.date);f[v]||(f[v]={totalKg:0,count:0}),f[v].totalKg+=g.kg,f[v].count++});const m=Object.entries(f).map(([g,b])=>({del:parseInt(g),kg:b.totalKg/b.count})).sort((g,b)=>g.del-b.del);a(m),s(!1)})()},[t,e,n,r]),{comparativeCurve:i,isLoading:o}},N_=({active:t,payload:e,label:n})=>{if(t&&e&&e.length){const r=e[0].payload.name==="Promedio Rebaño";return"range"in e[0].payload?d.jsxs("div",{className:"bg-black/50 backdrop-blur-xl p-3 rounded-lg border border-brand-border text-white",children:[d.jsxs("p",{className:"label text-brand-light-gray text-sm",children:["Rango: ",e[0].payload.range," Kg"]}),d.jsxs("p",{className:"font-bold text-base",children:["Nº de Cabras: ",e[0].value]})]}):d.jsxs("div",{className:"bg-black/50 backdrop-blur-xl p-3 rounded-lg border border-brand-border text-white",children:[d.jsx("p",{className:"label text-brand-light-gray text-sm",children:r?`Días en Leche (DEL): ${n}`:`DEL: ${n}`}),d.jsx("p",{className:"font-bold text-base",children:r?`Promedio: ${e[0].value.toFixed(2)} Kg`:`Producción: ${e[0].value.toFixed(2)} Kg`})]})}return null},Tm=({active:t,payload:e,label:n,context:r})=>{if(t&&e&&e.length){let i="",a="";switch(r){case"average":i=`Lactancia del ${n}`,a=`Promedio: ${e[0].value.toFixed(2)} Kg`;break;case"peak":i=`Lactancia del ${n}`,a=`Pico: ${e[0].value.toFixed(2)} Kg`;break;case"del":i=`Lactancia del ${n}`,a=`Duración: ${e[0].value} días`;break;case"interval":i=`Período ${n}`,a=`Intervalo: ${e[0].value} días`;break}return d.jsxs("div",{className:"bg-black/60 backdrop-blur-xl p-3 rounded-lg border border-zinc-700 text-white",children:[d.jsx("p",{className:"label text-zinc-400 text-sm font-medium",children:i}),d.jsx("p",{className:"font-semibold text-base",children:a})]})}return null};function C0e({animalId:t,onBack:e}){const{animals:n,parturitions:r,weighings:i,startDryingProcess:a,setLactationAsDry:o}=tn(),{allLactations:s,parturitionIntervals:l,lastWeighingDate:u,isLoading:c}=O0e(t),[f,m]=z.useState(null),[g,b]=z.useState(null),[v,x]=z.useState(!1),{comparativeCurve:S,isLoading:E}=k0e(g,n,r,i),T=z.useMemo(()=>{if(s.length===0)return null;const D=s[s.length-1],$=r.find(L=>L.parturitionDate===D.parturitionDate&&L.goatId===t);return{...D,id:$==null?void 0:$.id,status:$==null?void 0:$.status}},[s,r,t]),j=z.useMemo(()=>T?_p(T.parturitionDate,new Date().toISOString().split("T")[0]):"N/A",[T]),_=z.useMemo(()=>({average:s.map(D=>({name:new Date(D.parturitionDate).getFullYear().toString(),value:D.averageProduction})),peak:s.map(D=>({name:new Date(D.parturitionDate).getFullYear().toString(),value:D.peakProduction.kg})),del:s.map(D=>({name:new Date(D.parturitionDate).getFullYear().toString(),value:D.totalDays})),interval:l.map(D=>({name:D.period,value:D.days}))}),[s,l]);if(c)return d.jsx("div",{className:"text-center p-10",children:d.jsxs("h1",{className:"text-2xl text-zinc-400",children:["Cargando perfil de lactancia de ",t,"..."]})});const P=s.length>0?s[s.length-1]:null,w=l.length>0?l[l.length-1].days:0,O=s.length===1,I=()=>{const D=!v;x(D),D||b(null)},R=D=>{b($=>$===D?null:D)};return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"w-full max-w-4xl mx-auto space-y-4 animate-fade-in",children:[d.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[d.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:d.jsx(Wa,{size:24})}),d.jsxs("div",{className:"text-center flex-grow",children:[d.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white",children:t}),d.jsx("p",{className:"text-xl text-zinc-400",children:"Perfil de Lactancia"})]}),d.jsx("div",{className:"w-8"})]}),d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[d.jsxs("button",{onClick:()=>m("average"),className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-amber transition-colors",children:[d.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[d.jsx(up,{size:14}),d.jsx("span",{children:"Promedio"})]}),d.jsxs("p",{className:"text-2xl font-bold text-white",children:[(P==null?void 0:P.averageProduction.toFixed(2))||"N/A"," ",d.jsx("span",{className:"text-lg text-zinc-400",children:"Kg"})]})]}),d.jsxs("button",{onClick:()=>m("peak"),className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-amber transition-colors",children:[d.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[d.jsx(xS,{size:14}),d.jsx("span",{children:"Pico Prod."})]}),d.jsxs("p",{className:"text-2xl font-bold text-white",children:[(P==null?void 0:P.peakProduction.kg.toFixed(2))||"N/A"," ",d.jsx("span",{className:"text-lg text-zinc-400",children:"Kg"})]})]}),d.jsxs("button",{onClick:()=>m("del"),className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-amber transition-colors",children:[d.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[d.jsx(y9,{size:14}),d.jsx("span",{children:"DEL"})]}),d.jsx("p",{className:"text-2xl font-bold text-white",children:j})]}),d.jsxs("button",{onClick:()=>m("interval"),className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-amber transition-colors",children:[d.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[d.jsx(C9,{size:14}),d.jsx("span",{children:"Int. Partos"})]}),d.jsxs("p",{className:"text-2xl font-bold text-white",children:[w," ",d.jsx("span",{className:"text-lg text-zinc-400",children:"días"})]})]}),d.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left",children:[d.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[d.jsx(m9,{size:14}),d.jsx("span",{children:"Últ. Pesaje"})]}),d.jsx("p",{className:"text-xl font-bold text-white",children:u?new Date(u).toLocaleDateString():"N/A"})]})]}),d.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border relative",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center border-b border-brand-border pb-2 mb-4 gap-2",children:[d.jsxs("h3",{className:"text-zinc-400 font-semibold text-xs uppercase",children:["Curva de Lactancia Actual (Parto: ",(P==null?void 0:P.parturitionDate)||"N/A",")"]}),d.jsxs("div",{className:"flex items-center space-x-2 self-end sm:self-center",children:[d.jsx("span",{className:"text-xs font-semibold text-zinc-300",children:"Comparar:"}),d.jsx("button",{onClick:I,className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${v?"bg-amber-500":"bg-zinc-700"}`,children:d.jsx("span",{"aria-hidden":"true",className:`inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${v?"translate-x-5":"translate-x-0"}`})}),v&&d.jsxs("div",{className:"flex items-center space-x-2 animate-fade-in",children:[d.jsx("button",{onClick:()=>R("PRIMIPARAS_HISTORICAL"),className:`px-2 py-1 text-xs rounded-md transition-colors ${g==="PRIMIPARAS_HISTORICAL"?"bg-amber-500 text-black font-semibold":"bg-zinc-700/50 text-zinc-300 hover:bg-zinc-600/50"} ${O?"ring-2 ring-amber-400":""}`,children:"vs Primíparas"}),d.jsx("button",{onClick:()=>R("MULTIPARAS_HISTORICAL"),className:`px-2 py-1 text-xs rounded-md transition-colors ${g==="MULTIPARAS_HISTORICAL"?"bg-amber-500 text-black font-semibold":"bg-zinc-700/50 text-zinc-300 hover:bg-zinc-600/50"} ${O?"":"ring-2 ring-amber-400"}`,children:"vs Multíparas"})]})]})]}),d.jsxs("div",{className:"w-full h-56 -ml-4",children:[d.jsx(ia,{children:d.jsxs(A0e,{margin:{top:5,right:20,left:-10,bottom:5},children:[d.jsx(f0,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),d.jsx(vr,{dataKey:"del",type:"number",domain:["dataMin","dataMax"],tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),d.jsx(br,{orientation:"right",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),d.jsx(Tn,{content:d.jsx(N_,{})}),d.jsx(Cl,{verticalAlign:"top",height:36,iconType:"plainline"}),d.jsx(Bc,{type:"monotone",data:P==null?void 0:P.lactationCurve,dataKey:"kg",name:t,stroke:"#FBBF24",strokeWidth:2.5,dot:!1}),g&&!E&&d.jsx(Bc,{type:"monotone",data:S,dataKey:"kg",name:"Promedio del Grupo",stroke:"#34d399",strokeWidth:2,strokeDasharray:"5 5",dot:!1})]})}),E&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 backdrop-blur-sm rounded-xl text-white",children:"Calculando comparación..."})]})]}),(T==null?void 0:T.id)&&d.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[d.jsx("h3",{className:"text-zinc-400 font-semibold text-xs uppercase mb-3",children:"Gestión de Lactancia Actual"}),d.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[T.status==="activa"&&d.jsxs("button",{onClick:()=>a(T.id),className:"w-full flex items-center justify-center space-x-2 bg-blue-600/80 hover:bg-blue-500/80 text-white font-semibold py-3 px-4 rounded-xl transition-colors",children:[d.jsx(W9,{size:20}),d.jsx("span",{children:"Iniciar Proceso de Secado"})]}),T.status==="en-secado"&&d.jsxs("button",{onClick:()=>o(T.id),className:"w-full flex items-center justify-center space-x-2 bg-gray-600/80 hover:bg-gray-500/80 text-white font-semibold py-3 px-4 rounded-xl transition-colors",children:[d.jsx(h9,{size:20}),d.jsx("span",{children:"Declarar Lactancia como Seca"})]}),T.status==="seca"&&d.jsx("div",{className:"w-full text-center p-3 bg-black/20 rounded-xl",children:d.jsx("p",{className:"font-semibold text-green-400",children:"Esta lactancia ha finalizado."})})]}),T.status==="en-secado"&&d.jsx("p",{className:"text-center text-xs text-zinc-400 mt-2",children:"El animal está en su período de secado."})]})]}),d.jsx(Gt,{isOpen:f==="average",onClose:()=>m(null),title:"Historial de Promedios",children:d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"w-full h-48 -ml-4",children:d.jsx(ia,{children:d.jsxs(mo,{data:_.average,margin:{top:5,right:20,left:-20,bottom:0},children:[d.jsx("defs",{children:d.jsxs("linearGradient",{id:"modalBarGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[d.jsx("stop",{offset:"0%",stopColor:"#FBBF24",stopOpacity:.8}),d.jsx("stop",{offset:"100%",stopColor:"#FBBF24",stopOpacity:.2})]})}),d.jsx(vr,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1}),d.jsx(br,{orientation:"right",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1,width:40}),d.jsx(Tn,{content:d.jsx(Tm,{context:"average"}),cursor:{fill:"rgba(255, 255, 255, 0.1)"}}),d.jsx(Tr,{dataKey:"value",radius:[4,4,0,0],fill:"url(#modalBarGradient)"})]})})}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Detalles por Lactancia"}),d.jsx("ul",{className:"space-y-1",children:s.slice().reverse().map(D=>d.jsxs("li",{className:"flex justify-between items-center p-2 rounded-md hover:bg-white/5",children:[d.jsxs("span",{className:"text-base font-medium text-zinc-200",children:["Parto del ",D.parturitionDate]}),d.jsxs("span",{className:"text-base font-semibold text-white",children:[D.averageProduction.toFixed(2)," Kg"]})]},D.parturitionDate))})]})]})}),d.jsx(Gt,{isOpen:f==="peak",onClose:()=>m(null),title:"Historial de Picos de Producción",children:d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"w-full h-48 -ml-4",children:d.jsx(ia,{children:d.jsxs(mo,{data:_.peak,margin:{top:5,right:20,left:-20,bottom:0},children:[d.jsx("defs",{children:d.jsxs("linearGradient",{id:"modalBarGradientPeak",x1:"0",y1:"0",x2:"0",y2:"1",children:[d.jsx("stop",{offset:"0%",stopColor:"#10B981",stopOpacity:.8}),d.jsx("stop",{offset:"100%",stopColor:"#10B981",stopOpacity:.2})]})}),d.jsx(vr,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1}),d.jsx(br,{orientation:"right",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1,width:40}),d.jsx(Tn,{content:d.jsx(Tm,{context:"peak"}),cursor:{fill:"rgba(255, 255, 255, 0.1)"}}),d.jsx(Tr,{dataKey:"value",radius:[4,4,0,0],fill:"url(#modalBarGradientPeak)"})]})})}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Detalles por Lactancia"}),d.jsx("ul",{className:"space-y-1",children:s.slice().reverse().map(D=>d.jsxs("li",{className:"flex justify-between items-center p-2 rounded-md hover:bg-white/5",children:[d.jsxs("span",{className:"text-base font-medium text-zinc-200",children:["Parto del ",D.parturitionDate]}),d.jsxs("span",{className:"text-base font-semibold text-white",children:[D.peakProduction.kg.toFixed(2)," Kg ",d.jsxs("span",{className:"font-normal text-zinc-400",children:["(Día ",D.peakProduction.del,")"]})]})]},D.parturitionDate))})]})]})}),d.jsx(Gt,{isOpen:f==="del",onClose:()=>m(null),title:"Historial de Duración de Lactancias",children:d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"w-full h-48 -ml-4",children:d.jsx(ia,{children:d.jsxs(mo,{data:_.del,margin:{top:5,right:20,left:-20,bottom:0},children:[d.jsx("defs",{children:d.jsxs("linearGradient",{id:"modalBarGradientDel",x1:"0",y1:"0",x2:"0",y2:"1",children:[d.jsx("stop",{offset:"0%",stopColor:"#3B82F6",stopOpacity:.8}),d.jsx("stop",{offset:"100%",stopColor:"#3B82F6",stopOpacity:.2})]})}),d.jsx(vr,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1}),d.jsx(br,{orientation:"right",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1,width:40}),d.jsx(Tn,{content:d.jsx(Tm,{context:"del"}),cursor:{fill:"rgba(255, 255, 255, 0.1)"}}),d.jsx(Tr,{dataKey:"value",radius:[4,4,0,0],fill:"url(#modalBarGradientDel)"})]})})}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Detalles por Lactancia"}),d.jsx("ul",{className:"space-y-1",children:s.slice().reverse().map(D=>d.jsxs("li",{className:"flex justify-between items-center p-2 rounded-md hover:bg-white/5",children:[d.jsxs("span",{className:"text-base font-medium text-zinc-200",children:["Parto del ",D.parturitionDate]}),d.jsxs("span",{className:"text-base font-semibold text-white",children:[D.totalDays," días"]})]},D.parturitionDate))})]})]})}),d.jsx(Gt,{isOpen:f==="interval",onClose:()=>m(null),title:"Historial de Intervalos entre Partos",children:d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"w-full h-48 -ml-4",children:d.jsx(ia,{children:d.jsxs(mo,{data:_.interval,margin:{top:5,right:20,left:-20,bottom:0},children:[d.jsx("defs",{children:d.jsxs("linearGradient",{id:"modalBarGradientInt",x1:"0",y1:"0",x2:"0",y2:"1",children:[d.jsx("stop",{offset:"0%",stopColor:"#8B5CF6",stopOpacity:.8}),d.jsx("stop",{offset:"100%",stopColor:"#8B5CF6",stopOpacity:.2})]})}),d.jsx(vr,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1}),d.jsx(br,{orientation:"right",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1,width:40}),d.jsx(Tn,{content:d.jsx(Tm,{context:"interval"}),cursor:{fill:"rgba(255, 255, 255, 0.1)"}}),d.jsx(Tr,{dataKey:"value",radius:[4,4,0,0],fill:"url(#modalBarGradientInt)"})]})})}),d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Detalles de Intervalos"}),d.jsx("ul",{className:"space-y-1",children:l.slice().reverse().map(D=>d.jsxs("li",{className:"flex justify-between items-center p-2 rounded-md hover:bg-white/5",children:[d.jsxs("span",{className:"text-base font-medium text-zinc-200",children:["Período ",D.period]}),d.jsxs("span",{className:"text-base font-semibold text-white",children:[D.days," días"]})]},D.period))})]})]})})]})}const I0e=[{id:"lactokeeper",name:"LactoKeeper",icon:yS,color:"bg-indigo-500",description:"Control Lechero"},{id:"kilos",name:"Kilos",icon:bS,color:"bg-green-500",description:"Control de Peso"}],j0e=({onSwitchModule:t})=>{const[e,n]=z.useState(!1),r=i=>{n(!1),t(i)};return d.jsxs("div",{className:"fixed bottom-24 right-4 z-40 flex flex-col items-end gap-4",children:[d.jsx("div",{className:`flex flex-col items-end gap-4 transition-all duration-300 ease-in-out ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-4 pointer-events-none"}`,children:I0e.map(i=>d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"bg-black/60 backdrop-blur-md text-white text-sm font-semibold px-3 py-1 rounded-md shadow-lg",children:i.name}),d.jsx("button",{onClick:()=>r(i.id),className:`w-14 h-14 rounded-full flex items-center justify-center text-white shadow-lg ${i.color} transform transition-transform hover:scale-110`,"aria-label":`Cambiar al módulo ${i.name}`,children:d.jsx(i.icon,{size:28})})]},i.id))}),d.jsx("button",{onClick:()=>n(!e),className:"w-16 h-16 rounded-full flex items-center justify-center text-black bg-brand-amber shadow-2xl shadow-black/50 transform transition-transform duration-200 hover:scale-110","aria-label":"Seleccionar módulo",children:d.jsx("div",{className:`transform transition-transform duration-300 ${e?"rotate-180 scale-75":"rotate-0"}`,children:e?d.jsx(cp,{size:32}):d.jsx(S9,{size:32})})})]})},N0e=({initialPage:t,onSwitchModule:e})=>{const[n,r]=z.useState({name:"lots-dashboard"}),[i,a]=z.useState([]);z.useEffect(()=>{t&&r(t)},[t]);const o=[{page:{name:"lots-dashboard"},label:"Lotes",icon:E9},{page:{name:"herd"},label:"Rebaño",icon:af},{page:{name:"add-animal"},label:"Añadir",icon:Oo},{page:{name:"management"},label:"Manejo",icon:rM}],s=c=>{a(f=>[...f,n]),r(c)},l=()=>{const c=i[i.length-1];c?(a(f=>f.slice(0,-1)),r(c)):r({name:"lots-dashboard"})},u=()=>{switch(n.name){case"lots-dashboard":return d.jsx(jP,{navigateTo:s});case"lot-detail":return d.jsx(cq,{lotName:n.lotName,onBack:l,navigateTo:s});case"breeding-group-detail":return d.jsx(Cq,{groupId:n.groupId,onBack:l,navigateTo:s});case"herd":return d.jsx(hq,{navigateTo:s,locationFilter:n.locationFilter});case"manage-lots":return d.jsx(Pq,{onBack:()=>r({name:"herd"})});case"management":return d.jsx(Tq,{onSelectAnimal:c=>s({name:"rebano-profile",animalId:c})});case"add-animal":return d.jsx(fq,{onBack:()=>r({name:"herd"})});case"rebano-profile":return d.jsx(Eq,{animalId:n.animalId,onBack:l,navigateTo:s});case"lactation-profile":return d.jsx(C0e,{animalId:n.animalId,onBack:l});default:return d.jsx(jP,{navigateTo:s})}};return d.jsxs("div",{className:"font-sans bg-gray-900 text-gray-200 min-h-screen animate-fade-in",children:[d.jsx("div",{className:"p-4 pt-0 pb-24",children:u()}),d.jsx(j0e,{onSwitchModule:e}),d.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 bg-black/30 backdrop-blur-xl border-t border-white/20 flex justify-around",children:[o.map(c=>{let f=!1;return c.label==="Lotes"?f=["lots-dashboard","lot-detail","breeding-group-detail"].includes(n.name):c.label==="Rebaño"?f=["herd","rebano-profile","manage-lots"].includes(n.name):f=n.name===c.page.name,d.jsxs("button",{onClick:()=>{a([]),r(c.page)},className:`relative flex flex-col items-center justify-center pt-3 pb-2 w-full transition-colors ${f?"text-amber-400":"text-gray-500 hover:text-white"}`,children:[d.jsx(c.icon,{}),d.jsx("span",{className:"text-xs font-semibold mt-1",children:c.label})]},c.label)}),d.jsxs("button",{onClick:()=>oh.signOut(),className:"relative flex flex-col items-center justify-center pt-3 pb-2 w-full text-gray-500 hover:text-red-400 transition-colors",children:[d.jsx(tM,{}),d.jsx("span",{className:"text-xs font-semibold mt-1",children:"Salir"})]})]})]})};function PC({onNavigateToAnalysis:t}){const{animals:e,weighings:n,parturitions:r,isLoading:i}=tn(),[a,o]=z.useState("current"),[s,l]=z.useState(!1),[u,c]=z.useState(!1),f=z.useMemo(()=>{if(i||!n.length||!e.length)return{herdAverage:0,activeGoats:0,herdLactationCurve:[],gaussData:{distribution:[],mean:0,stdDev:0}};let m=0;if(n.length>0){const P=n.reduce((w,O)=>O.date>w?O.date:w,n[0].date);m=new Set(n.filter(w=>w.date===P).map(w=>w.goatId)).size}let g=n;if(a==="current"){const P=new Set(r.filter(w=>w.status==="activa").map(w=>w.goatId));g=n.filter(w=>P.has(w.goatId))}const b={};g.forEach(P=>{const w=r.filter(I=>I.goatId===P.goatId&&new Date(P.date)>=new Date(I.parturitionDate)).sort((I,R)=>new Date(R.parturitionDate).getTime()-new Date(I.parturitionDate).getTime())[0];if(!w)return;const O=_p(w.parturitionDate,P.date);b[O]||(b[O]={totalKg:0,count:0}),b[O].totalKg+=P.kg,b[O].count++});const v=Object.entries(b).map(([P,w])=>({del:parseInt(P),kg:w.totalKg/w.count,name:"Promedio Rebaño"})).sort((P,w)=>P.del-w.del),x=e.map(P=>{const w=n.filter(I=>I.goatId===P.id);return w.length===0?null:{avg:w.reduce((I,R)=>I+R.kg,0)/w.length}}).filter(Boolean),S=x.length>0?x.reduce((P,w)=>P+w.avg,0)/x.length:0,E=x.length>0?Math.sqrt(x.reduce((P,w)=>P+Math.pow(w.avg-S,2),0)/x.length):0,T=[];if(x.length>0){const P=Math.floor(Math.min(...x.map(O=>O.avg))*4)/4,w=Math.ceil(Math.max(...x.map(O=>O.avg))*4)/4;for(let O=P;O<=w;O+=.25){const I=O,R=O+.25,D=x.filter($=>$.avg>=I&&$.avg<R).length;D>0&&T.push({range:`${I.toFixed(2)}`,count:D})}}const j={distribution:T,mean:S,stdDev:E};return{herdAverage:n.length>0?n.reduce((P,w)=>P+w.kg,0)/n.length:0,activeGoats:m,herdLactationCurve:v,gaussData:j}},[e,n,r,i,a]);return i?d.jsx("div",{className:"text-center p-10",children:d.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando datos del rebaño..."})}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4",children:[d.jsxs("header",{className:"text-center pt-8 pb-4",children:[d.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white",children:"Dashboard"}),d.jsx("p",{className:"text-xl text-zinc-400",children:"Rebaño Masparrito"})]}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[d.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[d.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-2 text-xs uppercase tracking-wider",children:[d.jsx(up,{}),d.jsx("span",{children:"Promedio Global"})]}),d.jsxs("p",{className:"text-4xl font-bold tracking-tight text-white",children:[f.herdAverage.toFixed(2)," ",d.jsx("span",{className:"text-2xl font-medium text-zinc-400",children:"Kg"})]})]}),d.jsxs("button",{onClick:t,className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border text-left hover:border-brand-amber transition-colors",children:[d.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-2 text-xs uppercase tracking-wider",children:[d.jsx(R9,{}),d.jsx("span",{children:"Animales en Ordeño"})]}),d.jsx("p",{className:"text-4xl font-bold tracking-tight text-white",children:f.activeGoats})]})]}),d.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[d.jsxs("div",{className:"flex justify-between items-center border-b border-brand-border pb-2 mb-4",children:[d.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase tracking-wider",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[d.jsx("path",{d:"M12 2v4"}),d.jsx("path",{d:"m16.2 7.8 2.9-2.9"}),d.jsx("path",{d:"M20 12h4"}),d.jsx("path",{d:"m16.2 16.2 2.9 2.9"}),d.jsx("path",{d:"M12 20v4"}),d.jsx("path",{d:"m7.8 16.2-2.9 2.9"}),d.jsx("path",{d:"M4 12H0"}),d.jsx("path",{d:"m7.8 7.8-2.9-2.9"}),d.jsx("circle",{cx:"12",cy:"12",r:"4"})]}),d.jsx("span",{children:"Producción Promedio"}),d.jsx("button",{onClick:()=>l(!0),className:"text-zinc-500 hover:text-white transition-colors",children:d.jsx(Rg,{size:14})})]}),d.jsxs("div",{className:"flex bg-zinc-900/80 rounded-lg p-0.5",children:[d.jsx("button",{onClick:()=>o("current"),className:`px-2 py-0.5 text-xs font-semibold rounded-md transition-colors ${a==="current"?"bg-zinc-600 text-white":"text-zinc-400 hover:bg-zinc-700/50"}`,children:"Actual"}),d.jsx("button",{onClick:()=>o("historical"),className:`px-2 py-0.5 text-xs font-semibold rounded-md transition-colors ${a==="historical"?"bg-zinc-600 text-white":"text-zinc-400 hover:bg-zinc-700/50"}`,children:"Histórico"})]})]}),d.jsx("div",{className:"w-full h-48",children:d.jsx(ia,{children:d.jsxs(T0e,{data:f.herdLactationCurve,margin:{top:5,right:10,left:0,bottom:5},children:[d.jsx("defs",{children:d.jsxs("linearGradient",{id:"weatherGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[d.jsx("stop",{offset:"0%",stopColor:"#F59E0B",stopOpacity:.7}),d.jsx("stop",{offset:"60%",stopColor:"#10B981",stopOpacity:.2}),d.jsx("stop",{offset:"100%",stopColor:"#3B82F6",stopOpacity:.1})]})}),d.jsx(vr,{dataKey:"del",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1}),d.jsx(br,{orientation:"right",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1,domain:["dataMin - 0.5","dataMax + 0.5"],width:30}),d.jsx(Tn,{content:d.jsx(N_,{})}),d.jsx(Bs,{type:"monotone",dataKey:"kg",stroke:"#FBBF24",strokeWidth:2.5,fill:"url(#weatherGradient)"})]})})})]}),d.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[d.jsx("div",{className:"flex justify-between items-center border-b border-brand-border pb-2 mb-4",children:d.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase tracking-wider",children:[d.jsx(p9,{}),d.jsx("span",{children:"Distribución del Rebaño"}),d.jsx("button",{onClick:()=>c(!0),className:"text-zinc-500 hover:text-white transition-colors",children:d.jsx(Rg,{size:14})})]})}),d.jsx("div",{className:"w-full h-48",children:d.jsx(ia,{children:d.jsxs(mo,{data:f.gaussData.distribution,margin:{top:10,right:10,left:0,bottom:0},children:[d.jsx(f0,{strokeDasharray:"3 3",stroke:"rgba(255, 255, 255, 0.1)"}),d.jsx(vr,{dataKey:"range",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1}),d.jsx(br,{orientation:"right",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1,allowDecimals:!1,width:30}),d.jsx(Tn,{content:d.jsx(N_,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),d.jsx(Tr,{dataKey:"count",fill:"rgba(255, 255, 255, 0.4)",name:"Nº de Cabras"}),d.jsx(o0,{x:f.gaussData.mean.toFixed(2),stroke:"#34d399",strokeWidth:2,label:{value:"μ",fill:"#34d399",position:"insideTopLeft"}})]})})})]})]}),d.jsx(Gt,{isOpen:s,onClose:()=>l(!1),title:"¿Qué es la Curva de Lactancia del Rebaño?",children:d.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[d.jsx("p",{children:'Este gráfico revela la **"personalidad productiva"** de tu rebaño. No es un promedio simple, sino una línea de tiempo del rendimiento promedio.'}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-white mb-1",children:"¿Cómo se Calcula?"}),d.jsx("p",{className:"text-sm",children:'Para cada "Día en Leche" (DEL) en el eje horizontal, el sistema agrupa los pesajes de **todos los animales** que han pasado por ese día de su ciclo y calcula el promedio.'}),d.jsxs("p",{className:"text-sm mt-2 bg-black/20 p-2 rounded-md",children:[d.jsx("strong",{children:"Ejemplo:"}),' El punto en "DEL 50" es el promedio de todos los pesajes que se hicieron a cualquier animal cuando estaba exactamente en su día 50 de lactancia.']})]}),d.jsx("p",{className:"pt-2 border-t border-zinc-700/80",children:"Te permite responder visualmente a preguntas clave como: ¿Cuándo ocurre el pico de producción del rebaño? y ¿Qué tan persistente es la lactancia después del pico?"})]})}),d.jsx(Gt,{isOpen:u,onClose:()=>c(!1),title:"¿Qué es la Distribución del Rebaño?",children:d.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[d.jsx("p",{children:"Este gráfico, conocido como Campana de Gauss o distribución normal, clasifica el rendimiento promedio de cada animal en el rebaño."}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-white mb-1",children:"Media (μ)"}),d.jsx("p",{className:"text-sm",children:"La línea verde marcada como **μ** representa el **promedio de producción de todo el rebaño**. Es el punto de referencia central."})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-white mb-1",children:"Las Barras"}),d.jsx("p",{className:"text-sm",children:"Cada barra muestra cuántos animales caen dentro de un rango específico de producción. Una barra alta en el centro (cerca de μ) indica que la mayoría de tu rebaño tiene un rendimiento promedio y consistente."})]}),d.jsx("p",{className:"pt-2 border-t border-zinc-700/80",children:"Esta herramienta es clave para identificar rápidamente a los animales de élite (extremo derecho) y a los que podrían necesitar atención (extremo izquierdo)."})]})})]})}const zy=(t,e,n,r,i)=>z.useMemo(()=>{if(!t.length||!e.length)return{classifiedAnimals:[],distribution:[],mean:0,stdDev:0,weightedMean:0};const a=t.reduce((v,x)=>{const S=e.find(I=>I.id===x.goatId);if(!S)return v;const E=r.filter(I=>I.goatId===S.id&&new Date(I.parturitionDate)<=new Date(x.date)).sort((I,R)=>new Date(R.parturitionDate).getTime()-new Date(I.parturitionDate).getTime())[0];if(!E)return v;const T=n.filter(I=>I.goatId===S.id).sort((I,R)=>new Date(R.date).getTime()-new Date(I.date).getTime()),j=_p(E.parturitionDate,x.date),_=i?P0e(x.kg,j):x.kg;let P="single";const w=.15,O=T.findIndex(I=>I.id===x.id);if(O>0){const I=T[O-1],R=x.kg-I.kg;R>w?P="up":R<-w?P="down":P="stable"}return v.push({...S,latestWeighing:x.kg,weighingId:x.id,del:j,score:_,trend:P,date:x.date}),v},[]);if(!a.length)return{classifiedAnimals:[],distribution:[],mean:0,stdDev:0,weightedMean:0};const o=i?"score":"latestWeighing",s=a.reduce((v,x)=>v+x[o],0)/a.length,l=Math.sqrt(a.reduce((v,x)=>v+Math.pow(x[o]-s,2),0)/a.length),u=s-.4*l,c=s+.4*l,f=a.map(v=>{const x=v[o];let S="Promedio";return l>.1&&(x<u?S="Pobre":x>c&&(S="Sobresaliente")),{...v,classification:S}}),m=[{name:"Pobre",count:f.filter(v=>v.classification==="Pobre").length,fill:"#EF4444"},{name:"Promedio",count:f.filter(v=>v.classification==="Promedio").length,fill:"#6B7280"},{name:"Sobresaliente",count:f.filter(v=>v.classification==="Sobresaliente").length,fill:"#22C55E"}],g=a.length>0?a.reduce((v,x)=>v+x.latestWeighing,0)/a.length:0,b=a.length>0?a.reduce((v,x)=>v+x.score,0)/a.length:0;return{classifiedAnimals:f,distribution:m,mean:g,stdDev:l,weightedMean:b}},[t,e,n,r,i]),D0e=({trend:t,isLongTrend:e})=>{if(!t||t==="single")return null;const n={up:"text-green-400",down:"text-red-400",stable:"text-zinc-500"};return d.jsxs("div",{className:`flex items-center font-semibold text-sm ${n[t]}`,children:[t==="up"&&d.jsx(pS,{size:16}),t==="down"&&d.jsx(hS,{size:16}),t==="stable"&&d.jsx(O9,{size:16}),e&&d.jsx("span",{className:"ml-0.5 font-bold",children:"+"})]})},M0e=(t,e)=>{const[n,r]=z.useState(null),[i,a]=z.useState(0),[o,s]=z.useState(!1),[l,u]=z.useState([]);return z.useEffect(()=>{const c=e.filter(x=>x.goatId===t).sort((x,S)=>new Date(S.date).getTime()-new Date(x.date).getTime());if(c.length<2){r(c.length===1?"single":null),u(c),a(0),s(!1);return}const f=c[0].kg,m=c[1].kg,g=f-m,b=.15;a(g),u([c[0],c[1]]);let v="stable";if(g>b&&(v="up"),g<-b&&(v="down"),r(v),c.length>=3){const x=c[2].kg,S=m-x;g>b&&S>b||g<-b&&S<-b?s(!0):s(!1)}else s(!1)},[t,e]),{trend:n,difference:i,isLongTrend:o,lastTwoWeighings:l}},R0e=t=>{const{x:e,y:n,width:r,height:i,value:a,total:o}=t;if(o===0||a===0)return null;const s=(a/o*100).toFixed(0);return d.jsx("text",{x:e+r/2,y:n+i/2,fill:"#fff",textAnchor:"middle",dominantBaseline:"middle",fontSize:"14px",fontWeight:"bold",opacity:.8,children:`${s}%`})},Lb=({animal:t,onSelectAnimal:e})=>{var u,c;const{weighings:n}=tn(),{isLongTrend:r,lastTwoWeighings:i,difference:a}=M0e(t.id,n),[o,s]=z.useState(!1),l=f=>{f.stopPropagation(),t.trend&&t.trend!=="single"&&s(!0)};return d.jsxs(d.Fragment,{children:[d.jsxs("div",{onClick:()=>e(t.id),className:"w-full cursor-pointer text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-brand-amber transition-colors",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),d.jsxs("p",{className:"text-sm text-zinc-400",children:["DEL: ",t.del," | Score: ",t.score.toFixed(2)," | ",d.jsxs("span",{className:"font-semibold text-amber-400",children:[" Pesaje: ",t.latestWeighing.toFixed(2)," Kg"]})]})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("button",{onClick:l,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-white/10 transition-colors disabled:cursor-not-allowed",disabled:!t.trend||t.trend==="single",children:d.jsx(D0e,{trend:t.trend,isLongTrend:r})}),d.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full text-white ${t.classification==="Pobre"?"bg-red-500/80":t.classification==="Sobresaliente"?"bg-green-500/80":"bg-gray-500/80"}`,children:t.classification}),d.jsx(Ms,{className:"text-zinc-600"})]})]}),d.jsx(Gt,{isOpen:o,onClose:()=>s(!1),title:`Tendencia de ${t.id}`,children:d.jsxs("div",{className:"text-center text-white space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[d.jsxs("div",{children:[d.jsxs("p",{className:"text-sm text-zinc-400",children:["Pesaje Anterior (",i[1]?new Date(i[1].date).toLocaleDateString():"N/A",")"]}),d.jsxs("p",{className:"text-2xl font-semibold",children:[((u=i[1])==null?void 0:u.kg.toFixed(2))||"N/A"," Kg"]})]}),d.jsxs("div",{children:[d.jsxs("p",{className:"text-sm text-zinc-400",children:["Último Pesaje (",i[0]?new Date(i[0].date).toLocaleDateString():"N/A",")"]}),d.jsxs("p",{className:"text-2xl font-semibold",children:[((c=i[0])==null?void 0:c.kg.toFixed(2))||"N/A"," Kg"]})]})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-zinc-400 text-base mb-1",children:"Diferencia"}),d.jsxs("p",{className:`text-3xl font-bold ${a>0?"text-green-400":a<0?"text-red-400":"text-zinc-400"}`,children:[a>0?"+":"",a.toFixed(2)," Kg"]})]})]})})]})};function $0e({onSelectAnimal:t,selectedDate:e}){const{animals:n,parturitions:r,weighings:i,isLoading:a}=tn(),[o,s]=z.useState(!1),[l,u]=z.useState("all"),[c,f]=z.useState("all"),[m,g]=z.useState("all"),[b,v]=z.useState(null),[x,S]=z.useState("all"),[E,T]=z.useState(!1),[j,_]=z.useState(!1),{weighingsByDate:P,availableDates:w}=z.useMemo(()=>{const we={};i.forEach(te=>{we[te.date]||(we[te.date]=[]),we[te.date].push(te)});const Be=Object.keys(we).sort((te,$e)=>new Date($e).getTime()-new Date(te).getTime());return{weighingsByDate:we,availableDates:Be}},[i]),[O,I]=z.useState(0);z.useEffect(()=>{if(e&&w.length>0){const we=w.indexOf(e);we!==-1&&I(we)}},[e,w]);const R=w[O],D=z.useMemo(()=>{const we=P[R]||[],Be=new Map;return we.forEach(te=>{Be.set(te.goatId,te)}),Array.from(Be.values())},[R,P]),{classifiedAnimals:$,distribution:L,mean:ne,stdDev:ae,weightedMean:ce}=zy(D,n,i,r,o),me=z.useMemo(()=>{if(O+1<w.length){const we=w[O+1];return P[we]||[]}return[]},[O,w,P]),X=zy(me,n,i,r,!1),ie=z.useMemo(()=>{const we=new Set($.map(tt=>tt.id));let Be=new Set,te=new Set;const $e=new Set(X.classifiedAnimals.map(tt=>tt.id));O===w.length-1&&w.length>0?Be=we:(Be=new Set([...we].filter(tt=>!$e.has(tt))),te=new Set([...$e].filter(tt=>!we.has(tt))));const Ue=w.slice(0,3).map(tt=>{const Ft=P[tt]||[];if(Ft.length===0)return{date:tt,avg:0};const bn=Ft.reduce((Yr,zn)=>Yr+zn.kg,0);return{date:new Date(tt).toLocaleDateString("es-VE",{month:"short",day:"numeric"}),avg:bn/Ft.length}}).reverse();let se=null,ut=null,Ee=0,ct=0,yt=0;if($.length>0){const tt=$.map(Ft=>Ft.latestWeighing);Ee=tt.reduce((Ft,bn)=>Ft+bn,0),ct=Math.max(...tt),yt=Math.min(...tt),se=$.find(Ft=>Ft.latestWeighing===ct)||null,ut=$.find(Ft=>Ft.latestWeighing===yt)||null}const Ut=ne-ae,Gn=ne+ae,Ct=$.filter(tt=>tt.latestWeighing>=Ut&&tt.latestWeighing<=Gn).length,Mt=$.length>0?Ct/$.length*100:0;return{trendData:Ue,kpi:{total:Ee,max:ct,min:yt},topPerformer:se,bottomPerformer:ut,consistency:{percentage:Mt},newAnimalIds:Be,exitingAnimalIds:te}},[$,X.classifiedAnimals,w,O,P,ne,ae]),ge=z.useMemo(()=>{let we=[...$];return l!=="all"&&(we=we.filter(Be=>Be.classification===l)),x==="new"&&(we=we.filter(Be=>ie.newAnimalIds.has(Be.id))),c!=="all"&&(we=we.filter(Be=>Be.trend===c)),m!=="all"&&(we=we.filter(Be=>{const te=Be.del;return m==="first"?te>0&&te<=100:m==="second"?te>100&&te<=200:m==="third"?te>200&&te<270:m==="drying"?te>=270:!0})),we.sort((Be,te)=>Be.id.localeCompare(te.id))},[$,l,c,m,x,ie.newAnimalIds]),{searchTerm:Te,setSearchTerm:be,filteredItems:he}=$M(ge,["id"]),Se=z.useMemo(()=>{const we=$.length;if(we===0)return{up:0,down:0,new:0,stable:0,total:0};const Be=$.filter(se=>se.trend==="up").length,te=$.filter(se=>se.trend==="down").length,$e=$.filter(se=>se.trend==="stable").length,Ue=$.filter(se=>se.trend==="single").length;return{up:Be/we*100,down:te/we*100,stable:$e/we*100,new:Ue/we*100,total:we}},[$]),Ve=()=>{u("all"),f("all"),g("all"),S("all")},We=we=>{if(we!=null&&we.name){const Be=we.name;u(te=>te===Be?"all":Be)}};return a?d.jsx("div",{className:"text-center p-10",children:d.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando animales..."})}):d.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[d.jsx(LM,{title:"Análisis de Rebaño",subtitle:"Animales en Ordeño",searchTerm:Te,setSearchTerm:be}),d.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border flex justify-between items-center",children:[d.jsx("button",{onClick:()=>I(we=>Math.min(we+1,w.length-1)),disabled:O>=w.length-1,className:"p-2 rounded-full hover:bg-zinc-700/50 disabled:opacity-30",children:d.jsx(ZD,{})}),d.jsxs("div",{className:"text-center",children:[d.jsx("p",{className:"text-lg font-semibold text-white",children:R?new Date(R).toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"}):"Sin Datos"}),d.jsxs("p",{className:"text-sm text-zinc-400",children:[D.length," animales pesados"]})]}),d.jsx("button",{onClick:()=>I(we=>Math.max(we-1,0)),disabled:O===0,className:"p-2 rounded-full hover:bg-zinc-700/50 disabled:opacity-30",children:d.jsx(Ms,{})})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("button",{onClick:()=>v("media"),className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-amber transition-colors",children:[d.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[d.jsx(yS,{size:14}),d.jsx("span",{children:o?"Media Ponderada":"Media de Prod."})]}),d.jsxs("p",{className:"text-2xl font-bold text-white",children:[(o?ce:ne).toFixed(2)," ",d.jsx("span",{className:"text-lg text-zinc-400",children:"Kg"})]})]}),d.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border",children:[d.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[d.jsx(D9,{size:14}),d.jsx("span",{children:"Prod. Total"})]}),d.jsxs("p",{className:"text-2xl font-bold text-white",children:[ie.kpi.total.toFixed(2)," ",d.jsx("span",{className:"text-lg text-zinc-400",children:"Kg"})]})]}),d.jsxs("button",{onClick:()=>v("stdDev"),className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-amber transition-colors",children:[d.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[d.jsx(V9,{size:14}),d.jsx("span",{children:"Consistencia"})]}),d.jsxs("p",{className:"text-2xl font-bold text-white",children:[ae.toFixed(2)," ",d.jsx("span",{className:"text-lg text-zinc-400",children:"σ"})]})]}),d.jsxs("button",{onClick:()=>v("rango"),className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-amber transition-colors",children:[d.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[d.jsx(xS,{size:14}),d.jsx("span",{children:"Rango Prod."})]}),d.jsxs("p",{className:"text-2xl font-bold text-white",children:[ie.kpi.min.toFixed(2)," - ",ie.kpi.max.toFixed(2)," ",d.jsx("span",{className:"text-lg text-zinc-400",children:"Kg"})]})]})]}),d.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border animate-fade-in",children:[d.jsxs("div",{className:"flex justify-between items-center border-b border-brand-border pb-2 mb-4",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(mS,{className:"text-amber-400",size:18}),d.jsx("h3",{className:"text-lg font-semibold text-white",children:"Análisis del Día"}),d.jsx("button",{onClick:()=>T(!0),className:"text-zinc-500 hover:text-white",children:d.jsx(Rg,{size:14})})]}),d.jsxs("label",{className:"flex items-center space-x-2 text-sm text-zinc-300 cursor-pointer",children:[d.jsx($g,{size:14,className:o?"text-amber-400":"text-zinc-500"}),d.jsx("span",{children:"Ponderado a DEL"}),d.jsx("button",{type:"button",onClick:we=>{we.preventDefault(),we.stopPropagation(),_(!0)},className:"text-zinc-500 hover:text-white -ml-1",children:d.jsx(Rg,{size:14})}),d.jsx("input",{type:"checkbox",checked:o,onChange:we=>s(we.target.checked),className:"form-checkbox h-4 w-4 bg-zinc-700 border-zinc-600 rounded text-amber-500 focus:ring-offset-0"})]})]}),d.jsx("div",{className:"w-full h-48",children:d.jsx(ia,{children:d.jsxs(mo,{data:L,margin:{top:20,right:10,left:-20,bottom:0},children:[d.jsx(vr,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),d.jsx(br,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),d.jsx(Tn,{cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),d.jsxs(Tr,{dataKey:"count",onClick:We,cursor:"pointer",children:[L.map(we=>d.jsx(gp,{fill:we.fill,className:`${l!=="all"&&l!==we.name?"opacity-30":"opacity-100"} transition-opacity`},we.name)),d.jsx(ci,{dataKey:"count",content:d.jsx(R0e,{total:$.length})})]})]})})}),d.jsxs("div",{className:"text-center text-xs text-zinc-400 mt-2",children:[d.jsxs("span",{children:["μ = ",ne.toFixed(2)]})," | ",d.jsxs("span",{children:["σ = ",ae.toFixed(2)]})]})]}),d.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-2 border border-brand-border space-y-2",children:[d.jsxs("div",{className:"flex justify-between items-center px-2 pt-2",children:[d.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[d.jsx("button",{onClick:()=>f("all"),className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors ${c==="all"?"bg-zinc-600 text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"Todos"}),d.jsxs("button",{onClick:()=>f("up"),className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors flex items-center space-x-1 ${c==="up"?"bg-green-700 text-white":"bg-zinc-800/50 text-green-400"}`,children:[d.jsx(pS,{size:14})," ",d.jsxs("span",{children:[Se.up.toFixed(0),"%"]})]}),d.jsxs("button",{onClick:()=>f("down"),className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors flex items-center space-x-1 ${c==="down"?"bg-red-700 text-white":"bg-zinc-800/50 text-red-400"}`,children:[d.jsx(hS,{size:14})," ",d.jsxs("span",{children:[Se.down.toFixed(0),"%"]})]}),d.jsxs("button",{onClick:()=>f("single"),className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors flex items-center space-x-1 ${c==="single"?"bg-blue-700 text-white":"bg-zinc-800/50 text-blue-400"}`,children:[d.jsx(M9,{size:14})," ",d.jsxs("span",{children:[Se.new.toFixed(0),"%"]})]})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsxs("div",{className:"text-sm font-medium text-zinc-500",children:[he.length," / ",$.length]}),d.jsx("button",{onClick:Ve,title:"Limpiar todos los filtros",className:"text-zinc-500 hover:text-white",children:d.jsx(x9,{size:16})})]})]}),d.jsxs("div",{className:"flex justify-between items-center p-2 border-t border-brand-border",children:[d.jsx("div",{className:"text-xs font-semibold text-zinc-400",children:"Fase Lactancia:"}),d.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[d.jsx("button",{onClick:()=>g("all"),className:`px-2 py-1 text-xs font-semibold rounded-md ${m==="all"?"bg-zinc-600 text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"Todos"}),d.jsx("button",{onClick:()=>g("first"),className:`px-2 py-1 text-xs font-semibold rounded-md ${m==="first"?"bg-zinc-600 text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"1er T"}),d.jsx("button",{onClick:()=>g("second"),className:`px-2 py-1 text-xs font-semibold rounded-md ${m==="second"?"bg-zinc-600 text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"2do T"}),d.jsx("button",{onClick:()=>g("third"),className:`px-2 py-1 text-xs font-semibold rounded-md ${m==="third"?"bg-zinc-600 text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"3er T"}),d.jsx("button",{onClick:()=>g("drying"),className:`px-2 py-1 text-xs font-semibold rounded-md ${m==="drying"?"bg-red-700/80 text-white":"bg-zinc-800/50 text-red-300"}`,children:"A Secado"})]})]}),d.jsxs("div",{className:"flex justify-between items-center p-2 border-t border-brand-border",children:[d.jsx("div",{className:"text-xs font-semibold text-zinc-400",children:"Movimientos:"}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsxs("button",{onClick:()=>S(we=>we==="new"?"all":"new"),disabled:ie.newAnimalIds.size===0,className:`px-3 py-1 text-xs font-semibold rounded-md flex items-center gap-1.5 transition-all ${x==="new"?"bg-green-600 text-white shadow-lg shadow-green-500/20":"bg-zinc-800/50 text-zinc-300"} ${ie.newAnimalIds.size>0&&x!=="new"&&"animate-pulse"} disabled:opacity-40 disabled:cursor-not-allowed`,children:[d.jsx(T9,{size:14})," ",d.jsxs("span",{children:["Ingresos (",ie.newAnimalIds.size,")"]})]}),d.jsxs("button",{onClick:()=>alert(`Animales que salieron del ordeño:
${[...ie.exitingAnimalIds].join(`
`)}`),disabled:ie.exitingAnimalIds.size===0,className:`px-3 py-1 text-xs font-semibold rounded-md flex items-center gap-1.5 transition-all ${x==="exiting"?"bg-red-600 text-white shadow-lg shadow-red-500/20":"bg-zinc-800/50 text-zinc-300"} ${ie.exitingAnimalIds.size>0&&x!=="exiting"&&"animate-pulse"} disabled:opacity-40 disabled:cursor-not-allowed`,children:[d.jsx(tM,{size:14})," ",d.jsxs("span",{children:["Salidas (",ie.exitingAnimalIds.size,")"]})]})]})]})]}),d.jsx("div",{className:"space-y-2",children:he.length>0?he.map(we=>d.jsx(Lb,{animal:we,onSelectAnimal:t},we.weighingId||we.id)):d.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:d.jsx("p",{className:"text-zinc-400",children:Te?`No se encontraron resultados para "${Te}"`:"No se encontraron animales con los filtros actuales."})})}),d.jsx(Gt,{isOpen:b==="media",onClose:()=>v(null),title:"Tendencia de Producción Promedio",children:d.jsx("div",{className:"w-full h-56 -ml-4",children:d.jsx(ia,{width:"100%",height:"100%",children:d.jsxs(mo,{data:ie.trendData,margin:{top:20,right:20,left:-20,bottom:5},children:[d.jsx(f0,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),d.jsx(vr,{dataKey:"date",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),d.jsx(br,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),d.jsx(Tn,{cursor:{fill:"rgba(255, 255, 255, 0.05)"},contentStyle:{backgroundColor:"rgba(0,0,0,0.5)",border:"1px solid rgba(255,255,255,0.2)"}}),d.jsx(Tr,{dataKey:"avg",name:"Promedio Kg",fill:"#FBBF24",radius:[4,4,0,0],children:d.jsx(ci,{dataKey:"avg",position:"top",formatter:we=>we.toFixed(2),fill:"#FFF",fontSize:12})})]})})})}),d.jsx(Gt,{isOpen:b==="rango",onClose:()=>v(null),title:"Extremos de Producción del Día",children:d.jsxs("div",{className:"space-y-4",children:[ie.topPerformer&&d.jsxs("div",{className:"bg-green-900/40 border border-green-500/50 rounded-2xl p-4",children:[d.jsx("h3",{className:"font-semibold text-green-300 mb-2",children:"Animal Estrella (Producción Máxima)"}),d.jsx(Lb,{animal:ie.topPerformer,onSelectAnimal:()=>{v(null),t(ie.topPerformer.id)}})]}),ie.bottomPerformer&&d.jsxs("div",{className:"bg-red-900/40 border border-red-500/50 rounded-2xl p-4",children:[d.jsx("h3",{className:"font-semibold text-red-300 mb-2",children:"Animal a Observar (Producción Mínima)"}),d.jsx(Lb,{animal:ie.bottomPerformer,onSelectAnimal:()=>{v(null),t(ie.bottomPerformer.id)}})]})]})}),d.jsx(Gt,{isOpen:b==="stdDev",onClose:()=>v(null),title:"Análisis de Consistencia (σ)",children:d.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[d.jsx("p",{children:"La Desviación Estándar (σ) mide qué tan dispersa está la producción de tu rebaño. Un valor **bajo** es ideal, ya que indica un rebaño consistente y predecible."}),d.jsxs("div",{className:"bg-black/30 p-4 rounded-lg text-center",children:[d.jsx("p",{className:"text-sm uppercase text-zinc-400",children:"Rebaño dentro de 1σ de la media"}),d.jsxs("p",{className:"text-4xl font-bold text-amber-400 my-1",children:[ie.consistency.percentage.toFixed(0),"%"]}),d.jsxs("p",{className:"text-sm text-zinc-400",children:["Esto significa que la mayoría de tu rebaño tiene un rendimiento muy cercano al promedio de ",d.jsxs("span",{className:"font-bold text-white",children:[ne.toFixed(2)," Kg"]}),"."]})]}),d.jsx("p",{className:"text-xs text-zinc-500 pt-2 border-t border-zinc-700",children:"En una distribución normal perfecta, este valor es del 68%. Un valor superior indica una consistencia excepcional."})]})}),d.jsx(Gt,{isOpen:E,onClose:()=>T(!1),title:"¿Qué es el Análisis del Ordeño?",children:d.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[d.jsx("p",{children:"Este panel clasifica a los animales en ordeño según su rendimiento, permitiéndote identificar rápidamente a los individuos de mayor y menor producción."}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-white mb-1",children:"Clasificación (Pobre, Promedio, Sobresaliente)"}),d.jsx("p",{className:"text-sm",children:"Se calcula usando la media (μ) y la desviación estándar (σ) de la producción. Los animales que se desvían significativamente del promedio se marcan como pobres o sobresalientes."})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-white mb-1",children:"Ponderado a DEL"}),d.jsxs("p",{className:"text-sm",children:["Al activar este interruptor (",d.jsx($g,{size:12,className:"inline-block mb-0.5"}),'), el análisis se vuelve más inteligente. Otorga un mayor "score" a los animales que producen bien al inicio de su lactancia, ya que es más valioso que la misma producción en una etapa tardía.']})]})]})}),d.jsx(Gt,{isOpen:j,onClose:()=>_(!1),title:"¿Qué es el Score Ponderado?",children:d.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[d.jsx("p",{children:"El Score Ponderado ajusta la producción de un animal para premiar la **persistencia lechera**, un indicador clave de la calidad genética y la eficiencia."}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-white mb-1",children:"Fórmula Aplicada"}),d.jsx("div",{className:"bg-black/30 p-3 rounded-lg text-sm font-mono text-center",children:"Score = Kg × (1 + ((DEL - 50) / (DEL + 50)))"})]}),d.jsx("p",{className:"pt-2 border-t border-zinc-700/80 text-sm",children:"Esto significa que 2 Kg en el día **200** de lactancia obtendrán un score **mucho más alto** que 2 Kg en el día 40, ayudándote a identificar a tus animales más eficientes y persistentes."})]})})]})}const L0e=t=>z.useMemo(()=>{if(t.length===0)return{monthlyData:[]};const n=t.reduce((i,a)=>{const o=a.date.substring(0,7);return i[o]||(i[o]=[]),i[o].push(a),i},{});let r=Object.entries(n).map(([i,a])=>{const o=new Date(`${i}-02T12:00:00Z`),s=o.toLocaleString("es-VE",{month:"long",timeZone:"UTC"}),l=o.getUTCFullYear(),u=a.length,c=a.reduce((f,m)=>f+m.kg,0);return{periodLabel:`${s.charAt(0).toUpperCase()+s.slice(1)} ${l}`,periodId:i,totalKg:c,averageKg:u>0?c/u:0,weighingCount:u,animalCount:new Set(a.map(f=>f.goatId)).size,weighingEvents:new Set(a.map(f=>f.date)).size,weighings:a,newAnimalsWeighings:[]}}).sort((i,a)=>a.periodId.localeCompare(i.periodId));return r=r.map((i,a,o)=>{const s=o[a+1];if(s){const l=s.averageKg?(i.averageKg-s.averageKg)/s.averageKg*100:void 0,u=s.animalCount?(i.animalCount-s.animalCount)/s.animalCount*100:void 0,c=new Set(s.weighings.map(v=>v.goatId)),f=new Set(i.weighings.map(v=>v.goatId)),m=new Set([...f].filter(v=>!c.has(v))),g=i.weighings.filter(v=>m.has(v.goatId)),b=[...c].filter(v=>!f.has(v)).length;return{...i,avgKgChange:l,animalCountChange:u,newAnimalsWeighings:g,previousAnimalCount:s.animalCount,exitingAnimalCount:b}}return{...i,newAnimalsWeighings:i.weighings,previousAnimalCount:0,exitingAnimalCount:0}}),{monthlyData:r,quarterlyData:[],yearlyData:[]}},[t]),Km=({value:t})=>{if(t===void 0||isNaN(t))return null;const e=t>0,n=e?"text-green-400":"text-red-400",r=e?pS:hS;return d.jsxs("span",{className:`flex items-center text-sm font-bold ${n}`,children:[d.jsx(r,{size:16,className:"mr-0.5"}),t.toFixed(1),"%"]})},F0e=({stats:t,onClick:e})=>d.jsxs("button",{onClick:e,className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-brand-amber transition-colors",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-bold text-lg text-white",children:t.periodLabel}),d.jsxs("p",{className:"text-sm text-zinc-400",children:["Prom: ",t.averageKg.toFixed(2)," Kg | ",t.animalCount," animales"]})]}),d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx(Km,{value:t.avgKgChange}),d.jsx(Ms,{className:"text-zinc-600"})]})]}),gL=({weighing:t,onSelectAnimal:e})=>d.jsxs("button",{onClick:()=>e(t.id),className:"w-full text-left bg-black/20 rounded-lg p-3 border border-zinc-700/50 flex justify-between items-center hover:border-amber-400/50",children:[d.jsx("div",{className:"flex items-center gap-4",children:d.jsx("div",{children:d.jsxs("p",{className:"font-bold text-base text-white flex items-center gap-2",children:[t.id,d.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full text-white ${t.classification==="Pobre"?"bg-red-500/80":t.classification==="Sobresaliente"?"bg-green-500/80":"bg-gray-500/80"}`,children:t.classification})]})})}),d.jsxs("p",{className:"font-semibold text-lg text-white",children:[t.latestWeighing.toFixed(2)," ",d.jsx("span",{className:"text-base font-medium text-zinc-400",children:"Kg"})]})]}),yL=t=>{const{x:e,y:n,width:r,value:i,total:a}=t;if(a===0||i===0)return null;const o=(i/a*100).toFixed(0);return d.jsx("text",{x:e+r/2,y:n+20,fill:"#fff",textAnchor:"middle",fontSize:"12px",fontWeight:"bold",children:`${o}%`})},z0e=({isOpen:t,onClose:e,data:n,periodLabel:r,onSelectAnimal:i})=>{const{animals:a,weighings:o,parturitions:s}=tn(),[l,u]=z.useState("all"),c=zy((n==null?void 0:n.weighings)||[],a,o,s,!1),f=z.useMemo(()=>l==="all"?c.classifiedAnimals:c.classifiedAnimals.filter(g=>g.classification===l),[c.classifiedAnimals,l]),m=g=>{if(g!=null&&g.name){const b=g.name;u(v=>v===b?"all":b)}};return!t||!n?null:d.jsx(Gt,{isOpen:t,onClose:e,title:`Análisis de Nuevos Ingresos - ${r}`,children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{className:"bg-black/20 p-3 rounded-2xl",children:[d.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[d.jsx(up,{size:14}),"Promedio"]}),d.jsxs("p",{className:"text-2xl font-bold text-white",children:[c.mean.toFixed(2),d.jsx("span",{className:"text-lg ml-1 text-zinc-400",children:"Kg"})]})]}),d.jsxs("div",{className:"bg-black/20 p-3 rounded-2xl",children:[d.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[d.jsx(af,{size:14}),"Animales"]}),d.jsx("p",{className:"text-2xl font-bold text-white",children:c.classifiedAnimals.length})]})]}),d.jsx("div",{className:"bg-black/20 backdrop-blur-xl rounded-2xl p-4 border border-zinc-800/50",children:d.jsx("div",{className:"w-full h-48",children:d.jsx(ia,{children:d.jsxs(mo,{data:c.distribution,margin:{top:20,right:10,left:-20,bottom:0},children:[d.jsx(vr,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),d.jsx(br,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),d.jsx(Tn,{cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),d.jsxs(Tr,{dataKey:"count",onClick:m,cursor:"pointer",children:[c.distribution.map(g=>d.jsx(gp,{fill:g.fill,className:`${l!=="all"&&l!==g.name?"opacity-30":"opacity-100"}`},g.name)),d.jsx(ci,{dataKey:"count",content:d.jsx(yL,{total:c.classifiedAnimals.length})})]})]})})})}),d.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:f.sort((g,b)=>b.latestWeighing-g.latestWeighing).map(g=>d.jsx(gL,{weighing:g,onSelectAnimal:i},g.weighingId||g.id))})]})})};function V0e({onSelectAnimal:t,selectedPeriod:e,setSelectedPeriod:n}){const{animals:r,weighings:i,parturitions:a,isLoading:o}=tn(),[s,l]=z.useState("monthly"),[u,c]=z.useState(!1),[f,m]=z.useState(null),[g,b]=z.useState("all"),{monthlyData:v}=L0e(i),x=zy((e==null?void 0:e.weighings)||[],r,i,a,!1),S=z.useMemo(()=>g==="all"?x.classifiedAnimals:x.classifiedAnimals.filter(_=>_.classification===g),[x.classifiedAnimals,g]),E=_=>{if(_!=null&&_.name){const P=_.name;b(w=>w===P?"all":P)}},j={monthly:v,quarterly:[],yearly:[]}[s];return o?d.jsx("div",{className:"text-center p-10",children:d.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando historial..."})}):e?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12 animate-fade-in",children:[d.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[d.jsx("button",{onClick:()=>{n(null),b("all")},className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:d.jsx(Wa,{size:24})}),d.jsxs("div",{className:"text-center flex-grow",children:[d.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:e.periodLabel}),d.jsx("p",{className:"text-lg text-zinc-400",children:"Análisis del Período"})]}),d.jsx("div",{className:"w-8"})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{className:"bg-brand-glass p-3 rounded-2xl",children:[d.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[d.jsx(up,{size:14}),"Promedio / Animal"]}),d.jsxs("div",{className:"flex items-baseline gap-2",children:[d.jsxs("p",{className:"text-2xl font-bold text-white",children:[e.averageKg.toFixed(2),d.jsx("span",{className:"text-lg ml-1 text-zinc-400",children:"Kg"})]}),d.jsx(Km,{value:e.avgKgChange})]})]}),d.jsxs("div",{className:"bg-brand-glass p-3 rounded-2xl",children:[d.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[d.jsx(gS,{size:14}),"Eventos de Pesaje"]}),d.jsx("p",{className:"text-2xl font-bold text-white",children:e.weighingEvents})]}),d.jsxs("div",{className:"bg-brand-glass p-3 rounded-2xl",children:[d.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[d.jsx(af,{size:14}),"Animales Ordeñados"]}),d.jsxs("button",{onClick:()=>c(!0),className:"flex items-baseline gap-2 w-full text-left",children:[d.jsx("p",{className:"text-2xl font-bold text-white",children:e.animalCount}),d.jsx(Km,{value:e.animalCountChange})]})]}),d.jsxs("div",{className:"bg-brand-glass p-3 rounded-2xl",children:[d.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[d.jsx(xS,{size:14}),"Total Registrado"]}),d.jsxs("p",{className:"text-2xl font-bold text-white",children:[e.totalKg.toFixed(0),d.jsx("span",{className:"text-lg ml-1 text-zinc-400",children:"Kg"})]})]})]}),d.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[d.jsxs("div",{className:"flex items-center space-x-2 border-b border-brand-border pb-2 mb-4",children:[d.jsx(mS,{className:"text-amber-400",size:18}),d.jsx("h3",{className:"text-lg font-semibold text-white",children:"Distribución del Período"})]}),d.jsx("div",{className:"w-full h-48",children:d.jsx(ia,{children:d.jsxs(mo,{data:x.distribution,margin:{top:20,right:10,left:-20,bottom:0},children:[d.jsx(vr,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),d.jsx(br,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),d.jsx(Tn,{cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),d.jsxs(Tr,{dataKey:"count",onClick:E,cursor:"pointer",children:[x.distribution.map(_=>d.jsx(gp,{fill:_.fill,className:`${g!=="all"&&g!==_.name?"opacity-30":"opacity-100"} transition-opacity`},_.name)),d.jsx(ci,{dataKey:"count",content:d.jsx(yL,{total:x.classifiedAnimals.length})})]})]})})}),d.jsxs("div",{className:"text-center text-xs text-zinc-400 mt-2",children:[d.jsxs("span",{children:["μ = ",x.mean.toFixed(2)," Kg"]})," | ",d.jsxs("span",{children:["σ = ",x.stdDev.toFixed(2)]})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 ml-1 mt-4",children:["Pesajes del Período (",S.length,")"]}),S.sort((_,P)=>P.latestWeighing-_.latestWeighing).map(_=>d.jsx(gL,{weighing:_,onSelectAnimal:t},_.weighingId||_.id))]})]}),d.jsx(Gt,{isOpen:u,onClose:()=>c(!1),title:"Variación de Animales en Ordeño",children:d.jsxs("div",{className:"text-zinc-300 space-y-4",children:[d.jsxs("div",{children:[d.jsxs("h4",{className:"font-semibold text-white mb-1",children:[e.periodLabel," vs Mes Anterior"]}),d.jsxs("p",{className:"text-sm text-zinc-400",children:["El mes anterior tenías ",d.jsx("span",{className:"font-bold text-white",children:e.previousAnimalCount})," animales en ordeño. Este mes tienes ",d.jsx("span",{className:"font-bold text-white",children:e.animalCount}),"."]}),d.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[d.jsxs("p",{children:["El cambio neto es de ",d.jsx("span",{className:"font-bold text-white",children:e.animalCount-e.previousAnimalCount})," animales"]}),d.jsx(Km,{value:e.animalCountChange})]})]}),d.jsxs("div",{className:"pt-4 border-t border-zinc-700/80",children:[e.exitingAnimalCount>0&&d.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:["Salieron del ordeño: ",d.jsx("span",{className:"font-bold text-red-400",children:e.exitingAnimalCount})," animales."]}),e.newAnimalsWeighings.length>0&&d.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:["Nuevos ingresos: ",d.jsx("span",{className:"font-bold text-green-400",children:new Set(e.newAnimalsWeighings.map(_=>_.goatId)).size})," animales."]}),e.newAnimalsWeighings.length>0&&d.jsxs("button",{onClick:()=>{m({...e,weighings:e.newAnimalsWeighings}),c(!1)},className:"w-full mt-4 bg-indigo-600 text-white font-semibold py-2 rounded-lg hover:bg-indigo-500",children:["Analizar los ",new Set(e.newAnimalsWeighings.map(_=>_.goatId)).size," Nuevos Ingresos"]})]})]})}),d.jsx(z0e,{isOpen:!!f,onClose:()=>m(null),data:f,periodLabel:e.periodLabel,onSelectAnimal:t})]}):d.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[d.jsxs("header",{className:"text-center pt-8 pb-4",children:[d.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white",children:"Historial de Producción"}),d.jsx("p",{className:"text-xl text-zinc-400",children:"La película de tu rebaño"})]}),d.jsx("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-2 border border-brand-border",children:d.jsxs("div",{className:"flex bg-zinc-900/80 rounded-xl p-1 w-full",children:[d.jsx("button",{onClick:()=>l("monthly"),className:`w-1/3 px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors ${s==="monthly"?"bg-amber-500 text-black":"text-zinc-300 hover:bg-zinc-700/50"}`,children:"Mensual"}),d.jsx("button",{disabled:!0,className:"w-1/3 px-4 py-1.5 text-sm font-semibold rounded-lg opacity-50 cursor-not-allowed",children:"Trimestral"}),d.jsx("button",{disabled:!0,className:"w-1/3 px-4 py-1.5 text-sm font-semibold rounded-lg opacity-50 cursor-not-allowed",children:"Anual"})]})}),d.jsx("div",{className:"space-y-2",children:(j||[]).map(_=>d.jsx(F0e,{stats:_,onClick:()=>n(_)},_.periodId))})]})}const B0e=({onBack:t})=>{const{addWeighing:e,fetchData:n}=tn(),[r,i]=z.useState(""),[a,o]=z.useState(""),[s,l]=z.useState(null),u=async c=>{if(c.preventDefault(),!r||!a){l({type:"error",text:"El ID y los Kg son obligatorios."});return}const f={goatId:r.toUpperCase().trim(),kg:parseFloat(a),date:new Date().toISOString().split("T")[0]};try{await e(f),l({type:"success",text:`Pesaje para ${r.toUpperCase().trim()} añadido.`}),i(""),o(""),await n()}catch(m){l({type:"error",text:"No se pudo guardar el pesaje."}),console.error(m)}setTimeout(()=>l(null),3e3)};return d.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border animate-fade-in",children:[d.jsxs("div",{className:"flex items-center border-b border-brand-border pb-2 mb-4",children:[d.jsx("button",{onClick:t,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:d.jsx(Wa,{size:20})}),d.jsx("h2",{className:"text-sm font-semibold text-zinc-400 uppercase tracking-wider mx-auto pr-8",children:"Entrada Individual"})]}),d.jsxs("form",{onSubmit:u,className:"space-y-4",children:[d.jsx("input",{type:"text",value:r,onChange:c=>i(c.target.value),placeholder:"ID del Animal",className:"w-full bg-black/20 text-white text-lg placeholder-zinc-500 p-4 rounded-xl border border-transparent focus:border-brand-amber focus:ring-0 focus:outline-none transition-colors"}),d.jsx("input",{type:"number",step:"0.01",value:a,onChange:c=>o(c.target.value),placeholder:"Producción en Kg",className:"w-full bg-black/20 text-white text-lg placeholder-zinc-500 p-4 rounded-xl border border-transparent focus:border-brand-amber focus:ring-0 focus:outline-none transition-colors"}),d.jsx("button",{type:"submit",className:"w-full bg-brand-amber hover:bg-yellow-500 text-black font-bold py-4 px-4 rounded-xl transition-colors text-lg",children:"Guardar Pesaje"}),s&&d.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${s.type==="success"?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"}`,children:[s.type==="success"?d.jsx(rf,{size:18}):d.jsx(Rs,{size:18}),d.jsx("span",{children:s.text})]})]})]})},U0e=({entry:t,onDelete:e,onRegister:n})=>{const r=t.isUnrecognized;return d.jsxs("div",{className:`p-3 rounded-lg flex justify-between items-center animate-fade-in group ${r?"bg-amber-900/40 border border-amber-500/50":"bg-black/20"}`,children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[r&&d.jsx(Rs,{className:"text-amber-400 flex-shrink-0",size:18}),d.jsx("span",{className:"font-semibold text-white",children:t.goatId})]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[r?d.jsx("button",{onClick:()=>n(t.goatId),className:"text-xs font-semibold bg-amber-500 text-black px-2 py-1 rounded-md hover:bg-amber-400",children:"Registrar Parto"}):d.jsxs("span",{className:"text-zinc-300 font-semibold",children:[t.kg.toFixed(2)," Kg"]}),d.jsx("button",{onClick:()=>e(t.tempId),className:"p-1 text-zinc-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:d.jsx(cp,{size:16})})]})]})},W0e=({onBack:t,onNavigate:e})=>{const{animals:n,fetchData:r}=tn(),[i,a]=z.useState(""),[o,s]=z.useState(""),[l,u]=z.useState([]),[c,f]=z.useState(null),[m,g]=z.useState(new Date().toISOString().split("T")[0]),[b,v]=z.useState({isOpen:!1,motherId:""}),x=z.useRef(null),S=z.useRef(null),E=z.useMemo(()=>new Set(n.map(R=>R.id)),[n]);z.useEffect(()=>{var R;(R=x.current)==null||R.focus()},[]);const T=()=>{var $;if(!i||!o)return;const R=i.toUpperCase().trim(),D={tempId:Date.now(),goatId:R,kg:parseFloat(o),date:m,isUnrecognized:!E.has(R)};u(L=>[D,...L]),a(""),s(""),($=x.current)==null||$.focus()},j=async()=>{f(null);const{currentUser:R}=oh;if(!R){f({type:"error",text:"Error de autenticación. No se pueden guardar los datos."});return}const D=l.filter($=>$.isUnrecognized).length;if(D>0){f({type:"error",text:`No se puede guardar. Tienes ${D} animal(es) sin registrar.`});return}if(l.length===0){f({type:"error",text:"No hay pesajes en la lista para guardar."});return}try{const $=GD(Sn),L=cl(Sn,"weighings");l.forEach(ne=>{const ae=Lr(L),ce={goatId:ne.goatId,kg:ne.kg,date:ne.date,userId:R.uid};$.set(ae,ce)}),await $.commit(),f({type:"success",text:`${l.length} pesajes guardados y sincronizados con éxito.`}),u([]),setTimeout(()=>{e("animals",{selectedDate:m})},1e3)}catch($){f({type:"error",text:"Ocurrió un error al guardar en la nube."}),console.error("Error en escritura por lote:",$)}},_=R=>{var D;R.key==="Enter"&&i&&(R.preventDefault(),(D=S.current)==null||D.focus())},P=R=>{R.key==="Enter"&&o&&(R.preventDefault(),T())},w=R=>{u(D=>D.filter($=>$.tempId!==R))},O=R=>{v({isOpen:!0,motherId:R})},I=()=>{u(R=>R.map(D=>D.goatId===b.motherId?{...D,isUnrecognized:!1}:D)),r(),v({isOpen:!1,motherId:""})};return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border animate-fade-in space-y-4",children:[d.jsxs("div",{className:"flex items-center border-b border-brand-border pb-2",children:[d.jsx("button",{onClick:t,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:d.jsx(Wa,{size:20})}),d.jsx("h2",{className:"text-sm font-semibold text-zinc-400 uppercase tracking-wider mx-auto pr-8",children:"Entrada Rápida"})]}),d.jsxs("div",{className:"space-y-2 pt-2",children:[d.jsxs("label",{htmlFor:"session-date",className:"flex items-center gap-2 text-sm font-semibold text-zinc-400",children:[d.jsx(gS,{size:16}),"Fecha del Pesaje"]}),d.jsx("input",{id:"session-date",type:"date",value:m,onChange:R=>g(R.target.value),className:"w-full bg-black/20 text-white text-lg p-3 rounded-xl border border-transparent focus:border-brand-amber focus:ring-0 focus:outline-none"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{ref:x,type:"text",value:i,onChange:R=>a(R.target.value),onKeyDown:_,placeholder:"ID Animal",className:"w-full bg-black/20 text-white text-lg placeholder-zinc-500 p-4 rounded-xl border-2 border-transparent focus:border-amber-500 focus:ring-0 focus:outline-none"}),d.jsx("input",{ref:S,type:"number",step:"0.01",value:o,onChange:R=>s(R.target.value),onKeyDown:P,placeholder:"Kg",className:"w-32 flex-shrink-0 bg-black/20 text-white text-lg placeholder-zinc-500 p-4 rounded-xl border-2 border-transparent focus:border-amber-500 focus:ring-0 focus:outline-none"}),d.jsx("button",{onClick:T,disabled:!i||!o,"aria-label":"Añadir a la lista",className:"aspect-square h-full bg-indigo-600 text-white rounded-xl flex items-center justify-center transition-all hover:bg-indigo-500 disabled:opacity-40 disabled:cursor-not-allowed",children:d.jsx(Oo,{size:24})})]}),d.jsxs("div",{className:"max-h-60 overflow-y-auto space-y-2 pr-2 border-t border-b border-brand-border py-2",children:[l.length===0&&d.jsx("p",{className:"text-center text-zinc-500 text-sm",children:"Los pesajes añadidos aparecerán aquí."}),l.map(R=>d.jsx(U0e,{entry:R,onDelete:w,onRegister:O},R.tempId))]}),d.jsxs("button",{onClick:j,className:"w-full flex items-center justify-center gap-2 bg-brand-amber hover:bg-yellow-500 text-black font-bold py-4 px-4 rounded-xl transition-colors text-lg",children:[d.jsx(nM,{size:20})," Guardar ",l.length>0?`(${l.length})`:""," Pesajes"]}),c&&d.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${c.type==="success"?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"}`,children:[" ",c.type==="success"?d.jsx(rf,{size:18}):d.jsx(N9,{size:18})," ",d.jsx("span",{children:c.text})," "]})]}),d.jsx(Gt,{isOpen:b.isOpen,onClose:()=>v({isOpen:!1,motherId:""}),title:`Registrar Parto para: ${b.motherId}`,children:d.jsx(ES,{motherId:b.motherId,onSaveSuccess:I,onCancel:()=>v({isOpen:!1,motherId:""})})})]})};function q0e({onNavigate:t}){const[e,n]=z.useState("options"),r=e==="options"?"options":"form";return d.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4",children:[d.jsxs("header",{className:"text-center pt-8 pb-4",children:[d.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white",children:"Añadir Datos"}),d.jsx("p",{className:"text-xl text-zinc-400",children:"Captura de Producción"})]}),d.jsxs("div",{children:[e==="options"&&d.jsxs("div",{className:"space-y-4 animate-fade-in",children:[d.jsxs("button",{onClick:()=>n("rapid"),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-amber-400 text-white font-bold p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[d.jsx($g,{className:"w-12 h-12 mb-2 text-amber-400"}),d.jsx("span",{className:"text-lg font-semibold",children:"Entrada Rápida"}),d.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Para carga masiva con teclado"})]}),d.jsxs("button",{onClick:()=>t("add-parturition"),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-green-400 text-white font-bold p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[d.jsx(vS,{className:"w-12 h-12 mb-2 text-green-400"}),d.jsx("span",{className:"text-lg font-semibold",children:"Registrar Parto"}),d.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Inicia una nueva lactancia"})]}),d.jsxs("button",{onClick:()=>t("ocr"),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-blue-400 text-white font-bold p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[d.jsx(j9,{className:"w-12 h-12 mb-2 text-blue-400"}),d.jsx("span",{className:"text-lg font-semibold",children:"Escanear Cuaderno"}),d.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Digitalización asistida por IA"})]}),d.jsxs("button",{onClick:()=>n("manual"),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-gray-500 text-white font-bold p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[d.jsx(Oo,{className:"w-12 h-12 mb-2"}),d.jsx("span",{className:"text-lg font-semibold",children:"Entrada Individual"}),d.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Formulario tradicional"})]})]}),e==="rapid"&&d.jsx(W0e,{onBack:()=>n("options"),onNavigate:t}),e==="manual"&&d.jsx(B0e,{onBack:()=>n("options")})]},r)]})}function K0e({navigateToRebano:t,onExitModule:e}){const[n,r]=z.useState("dashboard"),[i,a]=z.useState(null),o=[{id:"dashboard",label:"Dashboard",icon:mS},{id:"analysis",label:"Análisis",icon:A9},{id:"history",label:"Historial",icon:g9},{id:"add-data",label:"Añadir",icon:Oo}],s=()=>{switch(n){case"dashboard":return d.jsx(PC,{onNavigateToAnalysis:()=>r("analysis")});case"analysis":return d.jsx($0e,{onSelectAnimal:l=>t({name:"rebano-profile",animalId:l})});case"history":return d.jsx(V0e,{onSelectAnimal:l=>t({name:"rebano-profile",animalId:l}),selectedPeriod:i,setSelectedPeriod:a});case"add-data":return d.jsx(q0e,{onNavigate:(l,u)=>t({name:l,...u})});default:return d.jsx(PC,{onNavigateToAnalysis:()=>r("analysis")})}};return d.jsxs("div",{className:"min-h-screen animate-fade-in",children:[d.jsx("button",{onClick:e,className:"fixed top-4 left-4 z-50 w-12 h-12 bg-zinc-800/80 backdrop-blur-md text-white rounded-full flex items-center justify-center shadow-lg hover:bg-zinc-700","aria-label":"Volver a Rebaño",children:d.jsx(Wa,{size:24})}),d.jsx("main",{className:"pb-24",children:s()}),d.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-black/30 backdrop-blur-xl border-t border-white/20 flex justify-around",children:o.map(l=>d.jsxs("button",{onClick:()=>r(l.id),className:`flex flex-col items-center justify-center p-3 w-full transition-colors ${n===l.id?"text-indigo-400":"text-gray-400 hover:text-indigo-400"}`,children:[d.jsx(l.icon,{className:"w-6 h-6 mb-1"}),d.jsx("span",{className:"text-xs font-semibold",children:l.label})]},l.id))})]})}function H0e(){const{currentUser:t}=QD(),[e,n]=z.useState("rebano"),[r,i]=z.useState(null),a=l=>{i(null),n(l)},o=()=>{n("rebano")},s=l=>{i(l),n("rebano")};if(!t)return d.jsx(q9,{});switch(e){case"lactokeeper":return d.jsx(K0e,{onExitModule:o,navigateToRebano:s});case"rebano":default:return d.jsx(N0e,{initialPage:r,onSwitchModule:a})}}Fb.createRoot(document.getElementById("root")).render(d.jsx(U.StrictMode,{children:d.jsx(u9,{children:d.jsx(G9,{children:d.jsx(H0e,{})})})}));
