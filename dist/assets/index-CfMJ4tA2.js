var pH=Object.defineProperty;var mH=(t,e,n)=>e in t?pH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Wr=(t,e,n)=>mH(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var $d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var tL={exports:{}},Sx={},nL={exports:{}},Pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yg=Symbol.for("react.element"),gH=Symbol.for("react.portal"),vH=Symbol.for("react.fragment"),yH=Symbol.for("react.strict_mode"),bH=Symbol.for("react.profiler"),xH=Symbol.for("react.provider"),wH=Symbol.for("react.context"),_H=Symbol.for("react.forward_ref"),SH=Symbol.for("react.suspense"),AH=Symbol.for("react.memo"),EH=Symbol.for("react.lazy"),MN=Symbol.iterator;function jH(t){return t===null||typeof t!="object"?null:(t=MN&&t[MN]||t["@@iterator"],typeof t=="function"?t:null)}var rL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},iL=Object.assign,sL={};function Ah(t,e,n){this.props=t,this.context=e,this.refs=sL,this.updater=n||rL}Ah.prototype.isReactComponent={};Ah.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ah.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function aL(){}aL.prototype=Ah.prototype;function nj(t,e,n){this.props=t,this.context=e,this.refs=sL,this.updater=n||rL}var rj=nj.prototype=new aL;rj.constructor=nj;iL(rj,Ah.prototype);rj.isPureReactComponent=!0;var RN=Array.isArray,oL=Object.prototype.hasOwnProperty,ij={current:null},lL={key:!0,ref:!0,__self:!0,__source:!0};function cL(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)oL.call(e,r)&&!lL.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Yg,type:t,key:s,ref:a,props:i,_owner:ij.current}}function CH(t,e){return{$$typeof:Yg,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function sj(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yg}function TH(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var LN=/\/+/g;function T1(t,e){return typeof t=="object"&&t!==null&&t.key!=null?TH(""+t.key):e.toString(36)}function Ly(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Yg:case gH:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+T1(a,0):r,RN(i)?(n="",t!=null&&(n=t.replace(LN,"$&/")+"/"),Ly(i,e,n,"",function(u){return u})):i!=null&&(sj(i)&&(i=CH(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(LN,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",RN(t))for(var o=0;o<t.length;o++){s=t[o];var c=r+T1(s,o);a+=Ly(s,e,n,c,i)}else if(c=jH(t),typeof c=="function")for(t=c.call(t),o=0;!(s=t.next()).done;)s=s.value,c=r+T1(s,o++),a+=Ly(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function $v(t,e,n){if(t==null)return t;var r=[],i=0;return Ly(t,r,"","",function(s){return e.call(n,s,i++)}),r}function PH(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ei={current:null},zy={transition:null},NH={ReactCurrentDispatcher:Ei,ReactCurrentBatchConfig:zy,ReactCurrentOwner:ij};function uL(){throw Error("act(...) is not supported in production builds of React.")}Pt.Children={map:$v,forEach:function(t,e,n){$v(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $v(t,function(){e++}),e},toArray:function(t){return $v(t,function(e){return e})||[]},only:function(t){if(!sj(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Pt.Component=Ah;Pt.Fragment=vH;Pt.Profiler=bH;Pt.PureComponent=nj;Pt.StrictMode=yH;Pt.Suspense=SH;Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NH;Pt.act=uL;Pt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=iL({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=ij.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)oL.call(e,c)&&!lL.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:Yg,type:t.type,key:i,ref:s,props:r,_owner:a}};Pt.createContext=function(t){return t={$$typeof:wH,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:xH,_context:t},t.Consumer=t};Pt.createElement=cL;Pt.createFactory=function(t){var e=cL.bind(null,t);return e.type=t,e};Pt.createRef=function(){return{current:null}};Pt.forwardRef=function(t){return{$$typeof:_H,render:t}};Pt.isValidElement=sj;Pt.lazy=function(t){return{$$typeof:EH,_payload:{_status:-1,_result:t},_init:PH}};Pt.memo=function(t,e){return{$$typeof:AH,type:t,compare:e===void 0?null:e}};Pt.startTransition=function(t){var e=zy.transition;zy.transition={};try{t()}finally{zy.transition=e}};Pt.unstable_act=uL;Pt.useCallback=function(t,e){return Ei.current.useCallback(t,e)};Pt.useContext=function(t){return Ei.current.useContext(t)};Pt.useDebugValue=function(){};Pt.useDeferredValue=function(t){return Ei.current.useDeferredValue(t)};Pt.useEffect=function(t,e){return Ei.current.useEffect(t,e)};Pt.useId=function(){return Ei.current.useId()};Pt.useImperativeHandle=function(t,e,n){return Ei.current.useImperativeHandle(t,e,n)};Pt.useInsertionEffect=function(t,e){return Ei.current.useInsertionEffect(t,e)};Pt.useLayoutEffect=function(t,e){return Ei.current.useLayoutEffect(t,e)};Pt.useMemo=function(t,e){return Ei.current.useMemo(t,e)};Pt.useReducer=function(t,e,n){return Ei.current.useReducer(t,e,n)};Pt.useRef=function(t){return Ei.current.useRef(t)};Pt.useState=function(t){return Ei.current.useState(t)};Pt.useSyncExternalStore=function(t,e,n){return Ei.current.useSyncExternalStore(t,e,n)};Pt.useTransition=function(){return Ei.current.useTransition()};Pt.version="18.3.1";nL.exports=Pt;var P=nL.exports;const Y=Qt(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kH=P,DH=Symbol.for("react.element"),IH=Symbol.for("react.fragment"),OH=Object.prototype.hasOwnProperty,MH=kH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,RH={key:!0,ref:!0,__self:!0,__source:!0};function dL(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)OH.call(e,r)&&!RH.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:DH,type:t,key:s,ref:a,props:i,_owner:MH.current}}Sx.Fragment=IH;Sx.jsx=dL;Sx.jsxs=dL;tL.exports=Sx;var l=tL.exports,TS={},fL={exports:{}},ds={},hL={exports:{}},pL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,q){var Z=F.length;F.push(q);e:for(;0<Z;){var re=Z-1>>>1,he=F[re];if(0<i(he,q))F[re]=q,F[Z]=he,Z=re;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var q=F[0],Z=F.pop();if(Z!==q){F[0]=Z;e:for(var re=0,he=F.length,ye=he>>>1;re<ye;){var De=2*(re+1)-1,We=F[De],Je=De+1,jt=F[Je];if(0>i(We,Z))Je<he&&0>i(jt,We)?(F[re]=jt,F[Je]=Z,re=Je):(F[re]=We,F[De]=Z,re=De);else if(Je<he&&0>i(jt,Z))F[re]=jt,F[Je]=Z,re=Je;else break e}}return q}function i(F,q){var Z=F.sortIndex-q.sortIndex;return Z!==0?Z:F.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var c=[],u=[],d=1,f=null,h=3,p=!1,m=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(F){for(var q=n(u);q!==null;){if(q.callback===null)r(u);else if(q.startTime<=F)r(u),q.sortIndex=q.expirationTime,e(c,q);else break;q=n(u)}}function E(F){if(g=!1,_(F),!m)if(n(c)!==null)m=!0,B(j);else{var q=n(u);q!==null&&U(E,q.startTime-F)}}function j(F,q){m=!1,g&&(g=!1,x(C),C=-1),p=!0;var Z=h;try{for(_(q),f=n(c);f!==null&&(!(f.expirationTime>q)||F&&!L());){var re=f.callback;if(typeof re=="function"){f.callback=null,h=f.priorityLevel;var he=re(f.expirationTime<=q);q=t.unstable_now(),typeof he=="function"?f.callback=he:f===n(c)&&r(c),_(q)}else r(c);f=n(c)}if(f!==null)var ye=!0;else{var De=n(u);De!==null&&U(E,De.startTime-q),ye=!1}return ye}finally{f=null,h=Z,p=!1}}var T=!1,A=null,C=-1,D=5,O=-1;function L(){return!(t.unstable_now()-O<D)}function z(){if(A!==null){var F=t.unstable_now();O=F;var q=!0;try{q=A(!0,F)}finally{q?M():(T=!1,A=null)}}else T=!1}var M;if(typeof w=="function")M=function(){w(z)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,K=G.port2;G.port1.onmessage=z,M=function(){K.postMessage(null)}}else M=function(){b(z,0)};function B(F){A=F,T||(T=!0,M())}function U(F,q){C=b(function(){F(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,B(j))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(F){switch(h){case 1:case 2:case 3:var q=3;break;default:q=h}var Z=h;h=q;try{return F()}finally{h=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,q){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Z=h;h=F;try{return q()}finally{h=Z}},t.unstable_scheduleCallback=function(F,q,Z){var re=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?re+Z:re):Z=re,F){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=Z+he,F={id:d++,callback:q,priorityLevel:F,startTime:Z,expirationTime:he,sortIndex:-1},Z>re?(F.sortIndex=Z,e(u,F),n(c)===null&&F===n(u)&&(g?(x(C),C=-1):g=!0,U(E,Z-re))):(F.sortIndex=he,e(c,F),m||p||(m=!0,B(j))),F},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(F){var q=h;return function(){var Z=h;h=q;try{return F.apply(this,arguments)}finally{h=Z}}}})(pL);hL.exports=pL;var LH=hL.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zH=P,ls=LH;function Te(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mL=new Set,Cm={};function Uu(t,e){Ef(t,e),Ef(t+"Capture",e)}function Ef(t,e){for(Cm[t]=e,t=0;t<e.length;t++)mL.add(e[t])}var Eo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),PS=Object.prototype.hasOwnProperty,$H=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zN={},$N={};function FH(t){return PS.call($N,t)?!0:PS.call(zN,t)?!1:$H.test(t)?$N[t]=!0:(zN[t]=!0,!1)}function VH(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function BH(t,e,n,r){if(e===null||typeof e>"u"||VH(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ji(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var ei={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ei[t]=new ji(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ei[e]=new ji(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ei[t]=new ji(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ei[t]=new ji(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ei[t]=new ji(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ei[t]=new ji(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ei[t]=new ji(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ei[t]=new ji(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ei[t]=new ji(t,5,!1,t.toLowerCase(),null,!1,!1)});var aj=/[\-:]([a-z])/g;function oj(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(aj,oj);ei[e]=new ji(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(aj,oj);ei[e]=new ji(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(aj,oj);ei[e]=new ji(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ei[t]=new ji(t,1,!1,t.toLowerCase(),null,!1,!1)});ei.xlinkHref=new ji("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ei[t]=new ji(t,1,!1,t.toLowerCase(),null,!0,!0)});function lj(t,e,n,r){var i=ei.hasOwnProperty(e)?ei[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(BH(e,n,i,r)&&(n=null),r||i===null?FH(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var zo=zH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fv=Symbol.for("react.element"),Fd=Symbol.for("react.portal"),Vd=Symbol.for("react.fragment"),cj=Symbol.for("react.strict_mode"),NS=Symbol.for("react.profiler"),gL=Symbol.for("react.provider"),vL=Symbol.for("react.context"),uj=Symbol.for("react.forward_ref"),kS=Symbol.for("react.suspense"),DS=Symbol.for("react.suspense_list"),dj=Symbol.for("react.memo"),fl=Symbol.for("react.lazy"),yL=Symbol.for("react.offscreen"),FN=Symbol.iterator;function mp(t){return t===null||typeof t!="object"?null:(t=FN&&t[FN]||t["@@iterator"],typeof t=="function"?t:null)}var Rn=Object.assign,P1;function Mp(t){if(P1===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);P1=e&&e[1]||""}return`
`+P1+t}var N1=!1;function k1(t,e){if(!t||N1)return"";N1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var c=`
`+i[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=o);break}}}finally{N1=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Mp(t):""}function UH(t){switch(t.tag){case 5:return Mp(t.type);case 16:return Mp("Lazy");case 13:return Mp("Suspense");case 19:return Mp("SuspenseList");case 0:case 2:case 15:return t=k1(t.type,!1),t;case 11:return t=k1(t.type.render,!1),t;case 1:return t=k1(t.type,!0),t;default:return""}}function IS(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Vd:return"Fragment";case Fd:return"Portal";case NS:return"Profiler";case cj:return"StrictMode";case kS:return"Suspense";case DS:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vL:return(t.displayName||"Context")+".Consumer";case gL:return(t._context.displayName||"Context")+".Provider";case uj:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case dj:return e=t.displayName||null,e!==null?e:IS(t.type)||"Memo";case fl:e=t._payload,t=t._init;try{return IS(t(e))}catch{}}return null}function WH(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return IS(e);case 8:return e===cj?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bL(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function HH(t){var e=bL(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Vv(t){t._valueTracker||(t._valueTracker=HH(t))}function xL(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=bL(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function f0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function OS(t,e){var n=e.checked;return Rn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function VN(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Fl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wL(t,e){e=e.checked,e!=null&&lj(t,"checked",e,!1)}function MS(t,e){wL(t,e);var n=Fl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?RS(t,e.type,n):e.hasOwnProperty("defaultValue")&&RS(t,e.type,Fl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function BN(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function RS(t,e,n){(e!=="number"||f0(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Rp=Array.isArray;function uf(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Fl(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function LS(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Te(91));return Rn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function UN(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Te(92));if(Rp(n)){if(1<n.length)throw Error(Te(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Fl(n)}}function _L(t,e){var n=Fl(e.value),r=Fl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function WN(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function SL(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zS(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?SL(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Bv,AL=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Bv=Bv||document.createElement("div"),Bv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bv.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Tm(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Yp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qH=["Webkit","ms","Moz","O"];Object.keys(Yp).forEach(function(t){qH.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Yp[e]=Yp[t]})});function EL(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Yp.hasOwnProperty(t)&&Yp[t]?(""+e).trim():e+"px"}function jL(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=EL(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var KH=Rn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $S(t,e){if(e){if(KH[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Te(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Te(62))}}function FS(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var VS=null;function fj(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var BS=null,df=null,ff=null;function HN(t){if(t=Zg(t)){if(typeof BS!="function")throw Error(Te(280));var e=t.stateNode;e&&(e=Tx(e),BS(t.stateNode,t.type,e))}}function CL(t){df?ff?ff.push(t):ff=[t]:df=t}function TL(){if(df){var t=df,e=ff;if(ff=df=null,HN(t),e)for(t=0;t<e.length;t++)HN(e[t])}}function PL(t,e){return t(e)}function NL(){}var D1=!1;function kL(t,e,n){if(D1)return t(e,n);D1=!0;try{return PL(t,e,n)}finally{D1=!1,(df!==null||ff!==null)&&(NL(),TL())}}function Pm(t,e){var n=t.stateNode;if(n===null)return null;var r=Tx(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Te(231,e,typeof n));return n}var US=!1;if(Eo)try{var gp={};Object.defineProperty(gp,"passive",{get:function(){US=!0}}),window.addEventListener("test",gp,gp),window.removeEventListener("test",gp,gp)}catch{US=!1}function GH(t,e,n,r,i,s,a,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Qp=!1,h0=null,p0=!1,WS=null,YH={onError:function(t){Qp=!0,h0=t}};function QH(t,e,n,r,i,s,a,o,c){Qp=!1,h0=null,GH.apply(YH,arguments)}function XH(t,e,n,r,i,s,a,o,c){if(QH.apply(this,arguments),Qp){if(Qp){var u=h0;Qp=!1,h0=null}else throw Error(Te(198));p0||(p0=!0,WS=u)}}function Wu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function DL(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function qN(t){if(Wu(t)!==t)throw Error(Te(188))}function ZH(t){var e=t.alternate;if(!e){if(e=Wu(t),e===null)throw Error(Te(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return qN(i),t;if(s===r)return qN(i),e;s=s.sibling}throw Error(Te(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=s;break}if(o===r){a=!0,r=i,n=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===n){a=!0,n=s,r=i;break}if(o===r){a=!0,r=s,n=i;break}o=o.sibling}if(!a)throw Error(Te(189))}}if(n.alternate!==r)throw Error(Te(190))}if(n.tag!==3)throw Error(Te(188));return n.stateNode.current===n?t:e}function IL(t){return t=ZH(t),t!==null?OL(t):null}function OL(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=OL(t);if(e!==null)return e;t=t.sibling}return null}var ML=ls.unstable_scheduleCallback,KN=ls.unstable_cancelCallback,JH=ls.unstable_shouldYield,eq=ls.unstable_requestPaint,Zn=ls.unstable_now,tq=ls.unstable_getCurrentPriorityLevel,hj=ls.unstable_ImmediatePriority,RL=ls.unstable_UserBlockingPriority,m0=ls.unstable_NormalPriority,nq=ls.unstable_LowPriority,LL=ls.unstable_IdlePriority,Ax=null,Ia=null;function rq(t){if(Ia&&typeof Ia.onCommitFiberRoot=="function")try{Ia.onCommitFiberRoot(Ax,t,void 0,(t.current.flags&128)===128)}catch{}}var Js=Math.clz32?Math.clz32:aq,iq=Math.log,sq=Math.LN2;function aq(t){return t>>>=0,t===0?32:31-(iq(t)/sq|0)|0}var Uv=64,Wv=4194304;function Lp(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function g0(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=Lp(o):(s&=a,s!==0&&(r=Lp(s)))}else a=n&~i,a!==0?r=Lp(a):s!==0&&(r=Lp(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Js(e),i=1<<n,r|=t[n],e&=~i;return r}function oq(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lq(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Js(s),o=1<<a,c=i[a];c===-1?(!(o&n)||o&r)&&(i[a]=oq(o,e)):c<=e&&(t.expiredLanes|=o),s&=~o}}function HS(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zL(){var t=Uv;return Uv<<=1,!(Uv&4194240)&&(Uv=64),t}function I1(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Qg(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Js(e),t[e]=n}function cq(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Js(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function pj(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Js(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var nn=0;function $L(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var FL,mj,VL,BL,UL,qS=!1,Hv=[],Cl=null,Tl=null,Pl=null,Nm=new Map,km=new Map,ml=[],uq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function GN(t,e){switch(t){case"focusin":case"focusout":Cl=null;break;case"dragenter":case"dragleave":Tl=null;break;case"mouseover":case"mouseout":Pl=null;break;case"pointerover":case"pointerout":Nm.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":km.delete(e.pointerId)}}function vp(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Zg(e),e!==null&&mj(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function dq(t,e,n,r,i){switch(e){case"focusin":return Cl=vp(Cl,t,e,n,r,i),!0;case"dragenter":return Tl=vp(Tl,t,e,n,r,i),!0;case"mouseover":return Pl=vp(Pl,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Nm.set(s,vp(Nm.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,km.set(s,vp(km.get(s)||null,t,e,n,r,i)),!0}return!1}function WL(t){var e=Qc(t.target);if(e!==null){var n=Wu(e);if(n!==null){if(e=n.tag,e===13){if(e=DL(n),e!==null){t.blockedOn=e,UL(t.priority,function(){VL(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $y(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=KS(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);VS=r,n.target.dispatchEvent(r),VS=null}else return e=Zg(n),e!==null&&mj(e),t.blockedOn=n,!1;e.shift()}return!0}function YN(t,e,n){$y(t)&&n.delete(e)}function fq(){qS=!1,Cl!==null&&$y(Cl)&&(Cl=null),Tl!==null&&$y(Tl)&&(Tl=null),Pl!==null&&$y(Pl)&&(Pl=null),Nm.forEach(YN),km.forEach(YN)}function yp(t,e){t.blockedOn===e&&(t.blockedOn=null,qS||(qS=!0,ls.unstable_scheduleCallback(ls.unstable_NormalPriority,fq)))}function Dm(t){function e(i){return yp(i,t)}if(0<Hv.length){yp(Hv[0],t);for(var n=1;n<Hv.length;n++){var r=Hv[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Cl!==null&&yp(Cl,t),Tl!==null&&yp(Tl,t),Pl!==null&&yp(Pl,t),Nm.forEach(e),km.forEach(e),n=0;n<ml.length;n++)r=ml[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ml.length&&(n=ml[0],n.blockedOn===null);)WL(n),n.blockedOn===null&&ml.shift()}var hf=zo.ReactCurrentBatchConfig,v0=!0;function hq(t,e,n,r){var i=nn,s=hf.transition;hf.transition=null;try{nn=1,gj(t,e,n,r)}finally{nn=i,hf.transition=s}}function pq(t,e,n,r){var i=nn,s=hf.transition;hf.transition=null;try{nn=4,gj(t,e,n,r)}finally{nn=i,hf.transition=s}}function gj(t,e,n,r){if(v0){var i=KS(t,e,n,r);if(i===null)U1(t,e,r,y0,n),GN(t,r);else if(dq(i,t,e,n,r))r.stopPropagation();else if(GN(t,r),e&4&&-1<uq.indexOf(t)){for(;i!==null;){var s=Zg(i);if(s!==null&&FL(s),s=KS(t,e,n,r),s===null&&U1(t,e,r,y0,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else U1(t,e,r,null,n)}}var y0=null;function KS(t,e,n,r){if(y0=null,t=fj(r),t=Qc(t),t!==null)if(e=Wu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=DL(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return y0=t,null}function HL(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tq()){case hj:return 1;case RL:return 4;case m0:case nq:return 16;case LL:return 536870912;default:return 16}default:return 16}}var yl=null,vj=null,Fy=null;function qL(){if(Fy)return Fy;var t,e=vj,n=e.length,r,i="value"in yl?yl.value:yl.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return Fy=i.slice(t,1<r?1-r:void 0)}function Vy(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function qv(){return!0}function QN(){return!1}function fs(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?qv:QN,this.isPropagationStopped=QN,this}return Rn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qv)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qv)},persist:function(){},isPersistent:qv}),e}var Eh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yj=fs(Eh),Xg=Rn({},Eh,{view:0,detail:0}),mq=fs(Xg),O1,M1,bp,Ex=Rn({},Xg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bj,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bp&&(bp&&t.type==="mousemove"?(O1=t.screenX-bp.screenX,M1=t.screenY-bp.screenY):M1=O1=0,bp=t),O1)},movementY:function(t){return"movementY"in t?t.movementY:M1}}),XN=fs(Ex),gq=Rn({},Ex,{dataTransfer:0}),vq=fs(gq),yq=Rn({},Xg,{relatedTarget:0}),R1=fs(yq),bq=Rn({},Eh,{animationName:0,elapsedTime:0,pseudoElement:0}),xq=fs(bq),wq=Rn({},Eh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_q=fs(wq),Sq=Rn({},Eh,{data:0}),ZN=fs(Sq),Aq={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Eq={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jq={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cq(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=jq[t])?!!e[t]:!1}function bj(){return Cq}var Tq=Rn({},Xg,{key:function(t){if(t.key){var e=Aq[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vy(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Eq[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bj,charCode:function(t){return t.type==="keypress"?Vy(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vy(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Pq=fs(Tq),Nq=Rn({},Ex,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),JN=fs(Nq),kq=Rn({},Xg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bj}),Dq=fs(kq),Iq=Rn({},Eh,{propertyName:0,elapsedTime:0,pseudoElement:0}),Oq=fs(Iq),Mq=Rn({},Ex,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Rq=fs(Mq),Lq=[9,13,27,32],xj=Eo&&"CompositionEvent"in window,Xp=null;Eo&&"documentMode"in document&&(Xp=document.documentMode);var zq=Eo&&"TextEvent"in window&&!Xp,KL=Eo&&(!xj||Xp&&8<Xp&&11>=Xp),ek=" ",tk=!1;function GL(t,e){switch(t){case"keyup":return Lq.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function YL(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Bd=!1;function $q(t,e){switch(t){case"compositionend":return YL(e);case"keypress":return e.which!==32?null:(tk=!0,ek);case"textInput":return t=e.data,t===ek&&tk?null:t;default:return null}}function Fq(t,e){if(Bd)return t==="compositionend"||!xj&&GL(t,e)?(t=qL(),Fy=vj=yl=null,Bd=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return KL&&e.locale!=="ko"?null:e.data;default:return null}}var Vq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Vq[t.type]:e==="textarea"}function QL(t,e,n,r){CL(r),e=b0(e,"onChange"),0<e.length&&(n=new yj("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Zp=null,Im=null;function Bq(t){oz(t,0)}function jx(t){var e=Hd(t);if(xL(e))return t}function Uq(t,e){if(t==="change")return e}var XL=!1;if(Eo){var L1;if(Eo){var z1="oninput"in document;if(!z1){var rk=document.createElement("div");rk.setAttribute("oninput","return;"),z1=typeof rk.oninput=="function"}L1=z1}else L1=!1;XL=L1&&(!document.documentMode||9<document.documentMode)}function ik(){Zp&&(Zp.detachEvent("onpropertychange",ZL),Im=Zp=null)}function ZL(t){if(t.propertyName==="value"&&jx(Im)){var e=[];QL(e,Im,t,fj(t)),kL(Bq,e)}}function Wq(t,e,n){t==="focusin"?(ik(),Zp=e,Im=n,Zp.attachEvent("onpropertychange",ZL)):t==="focusout"&&ik()}function Hq(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jx(Im)}function qq(t,e){if(t==="click")return jx(e)}function Kq(t,e){if(t==="input"||t==="change")return jx(e)}function Gq(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ia=typeof Object.is=="function"?Object.is:Gq;function Om(t,e){if(ia(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!PS.call(e,i)||!ia(t[i],e[i]))return!1}return!0}function sk(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ak(t,e){var n=sk(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sk(n)}}function JL(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?JL(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ez(){for(var t=window,e=f0();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=f0(t.document)}return e}function wj(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Yq(t){var e=ez(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&JL(n.ownerDocument.documentElement,n)){if(r!==null&&wj(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=ak(n,s);var a=ak(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Qq=Eo&&"documentMode"in document&&11>=document.documentMode,Ud=null,GS=null,Jp=null,YS=!1;function ok(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;YS||Ud==null||Ud!==f0(r)||(r=Ud,"selectionStart"in r&&wj(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Jp&&Om(Jp,r)||(Jp=r,r=b0(GS,"onSelect"),0<r.length&&(e=new yj("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ud)))}function Kv(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wd={animationend:Kv("Animation","AnimationEnd"),animationiteration:Kv("Animation","AnimationIteration"),animationstart:Kv("Animation","AnimationStart"),transitionend:Kv("Transition","TransitionEnd")},$1={},tz={};Eo&&(tz=document.createElement("div").style,"AnimationEvent"in window||(delete Wd.animationend.animation,delete Wd.animationiteration.animation,delete Wd.animationstart.animation),"TransitionEvent"in window||delete Wd.transitionend.transition);function Cx(t){if($1[t])return $1[t];if(!Wd[t])return t;var e=Wd[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in tz)return $1[t]=e[n];return t}var nz=Cx("animationend"),rz=Cx("animationiteration"),iz=Cx("animationstart"),sz=Cx("transitionend"),az=new Map,lk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ql(t,e){az.set(t,e),Uu(e,[t])}for(var F1=0;F1<lk.length;F1++){var V1=lk[F1],Xq=V1.toLowerCase(),Zq=V1[0].toUpperCase()+V1.slice(1);Ql(Xq,"on"+Zq)}Ql(nz,"onAnimationEnd");Ql(rz,"onAnimationIteration");Ql(iz,"onAnimationStart");Ql("dblclick","onDoubleClick");Ql("focusin","onFocus");Ql("focusout","onBlur");Ql(sz,"onTransitionEnd");Ef("onMouseEnter",["mouseout","mouseover"]);Ef("onMouseLeave",["mouseout","mouseover"]);Ef("onPointerEnter",["pointerout","pointerover"]);Ef("onPointerLeave",["pointerout","pointerover"]);Uu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Uu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Uu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Uu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Uu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Uu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jq=new Set("cancel close invalid load scroll toggle".split(" ").concat(zp));function ck(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,XH(r,e,void 0,t),t.currentTarget=null}function oz(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==s&&i.isPropagationStopped())break e;ck(i,o,u),s=c}else for(a=0;a<r.length;a++){if(o=r[a],c=o.instance,u=o.currentTarget,o=o.listener,c!==s&&i.isPropagationStopped())break e;ck(i,o,u),s=c}}}if(p0)throw t=WS,p0=!1,WS=null,t}function _n(t,e){var n=e[eA];n===void 0&&(n=e[eA]=new Set);var r=t+"__bubble";n.has(r)||(lz(e,t,2,!1),n.add(r))}function B1(t,e,n){var r=0;e&&(r|=4),lz(n,t,r,e)}var Gv="_reactListening"+Math.random().toString(36).slice(2);function Mm(t){if(!t[Gv]){t[Gv]=!0,mL.forEach(function(n){n!=="selectionchange"&&(Jq.has(n)||B1(n,!1,t),B1(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Gv]||(e[Gv]=!0,B1("selectionchange",!1,e))}}function lz(t,e,n,r){switch(HL(e)){case 1:var i=hq;break;case 4:i=pq;break;default:i=gj}n=i.bind(null,e,n,t),i=void 0,!US||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function U1(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Qc(o),a===null)return;if(c=a.tag,c===5||c===6){r=s=a;continue e}o=o.parentNode}}r=r.return}kL(function(){var u=s,d=fj(n),f=[];e:{var h=az.get(t);if(h!==void 0){var p=yj,m=t;switch(t){case"keypress":if(Vy(n)===0)break e;case"keydown":case"keyup":p=Pq;break;case"focusin":m="focus",p=R1;break;case"focusout":m="blur",p=R1;break;case"beforeblur":case"afterblur":p=R1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=XN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=vq;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Dq;break;case nz:case rz:case iz:p=xq;break;case sz:p=Oq;break;case"scroll":p=mq;break;case"wheel":p=Rq;break;case"copy":case"cut":case"paste":p=_q;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=JN}var g=(e&4)!==0,b=!g&&t==="scroll",x=g?h!==null?h+"Capture":null:h;g=[];for(var w=u,_;w!==null;){_=w;var E=_.stateNode;if(_.tag===5&&E!==null&&(_=E,x!==null&&(E=Pm(w,x),E!=null&&g.push(Rm(w,E,_)))),b)break;w=w.return}0<g.length&&(h=new p(h,m,null,n,d),f.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&n!==VS&&(m=n.relatedTarget||n.fromElement)&&(Qc(m)||m[jo]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=u,m=m?Qc(m):null,m!==null&&(b=Wu(m),m!==b||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(g=XN,E="onMouseLeave",x="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(g=JN,E="onPointerLeave",x="onPointerEnter",w="pointer"),b=p==null?h:Hd(p),_=m==null?h:Hd(m),h=new g(E,w+"leave",p,n,d),h.target=b,h.relatedTarget=_,E=null,Qc(d)===u&&(g=new g(x,w+"enter",m,n,d),g.target=_,g.relatedTarget=b,E=g),b=E,p&&m)t:{for(g=p,x=m,w=0,_=g;_;_=Cd(_))w++;for(_=0,E=x;E;E=Cd(E))_++;for(;0<w-_;)g=Cd(g),w--;for(;0<_-w;)x=Cd(x),_--;for(;w--;){if(g===x||x!==null&&g===x.alternate)break t;g=Cd(g),x=Cd(x)}g=null}else g=null;p!==null&&uk(f,h,p,g,!1),m!==null&&b!==null&&uk(f,b,m,g,!0)}}e:{if(h=u?Hd(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var j=Uq;else if(nk(h))if(XL)j=Kq;else{j=Hq;var T=Wq}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=qq);if(j&&(j=j(t,u))){QL(f,j,n,d);break e}T&&T(t,h,u),t==="focusout"&&(T=h._wrapperState)&&T.controlled&&h.type==="number"&&RS(h,"number",h.value)}switch(T=u?Hd(u):window,t){case"focusin":(nk(T)||T.contentEditable==="true")&&(Ud=T,GS=u,Jp=null);break;case"focusout":Jp=GS=Ud=null;break;case"mousedown":YS=!0;break;case"contextmenu":case"mouseup":case"dragend":YS=!1,ok(f,n,d);break;case"selectionchange":if(Qq)break;case"keydown":case"keyup":ok(f,n,d)}var A;if(xj)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Bd?GL(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(KL&&n.locale!=="ko"&&(Bd||C!=="onCompositionStart"?C==="onCompositionEnd"&&Bd&&(A=qL()):(yl=d,vj="value"in yl?yl.value:yl.textContent,Bd=!0)),T=b0(u,C),0<T.length&&(C=new ZN(C,t,null,n,d),f.push({event:C,listeners:T}),A?C.data=A:(A=YL(n),A!==null&&(C.data=A)))),(A=zq?$q(t,n):Fq(t,n))&&(u=b0(u,"onBeforeInput"),0<u.length&&(d=new ZN("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=A))}oz(f,e)})}function Rm(t,e,n){return{instance:t,listener:e,currentTarget:n}}function b0(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Pm(t,n),s!=null&&r.unshift(Rm(t,s,i)),s=Pm(t,e),s!=null&&r.push(Rm(t,s,i))),t=t.return}return r}function Cd(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function uk(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var o=n,c=o.alternate,u=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&u!==null&&(o=u,i?(c=Pm(n,s),c!=null&&a.unshift(Rm(n,c,o))):i||(c=Pm(n,s),c!=null&&a.push(Rm(n,c,o)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var eK=/\r\n?/g,tK=/\u0000|\uFFFD/g;function dk(t){return(typeof t=="string"?t:""+t).replace(eK,`
`).replace(tK,"")}function Yv(t,e,n){if(e=dk(e),dk(t)!==e&&n)throw Error(Te(425))}function x0(){}var QS=null,XS=null;function ZS(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var JS=typeof setTimeout=="function"?setTimeout:void 0,nK=typeof clearTimeout=="function"?clearTimeout:void 0,fk=typeof Promise=="function"?Promise:void 0,rK=typeof queueMicrotask=="function"?queueMicrotask:typeof fk<"u"?function(t){return fk.resolve(null).then(t).catch(iK)}:JS;function iK(t){setTimeout(function(){throw t})}function W1(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Dm(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Dm(e)}function Nl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function hk(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var jh=Math.random().toString(36).slice(2),Ca="__reactFiber$"+jh,Lm="__reactProps$"+jh,jo="__reactContainer$"+jh,eA="__reactEvents$"+jh,sK="__reactListeners$"+jh,aK="__reactHandles$"+jh;function Qc(t){var e=t[Ca];if(e)return e;for(var n=t.parentNode;n;){if(e=n[jo]||n[Ca]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=hk(t);t!==null;){if(n=t[Ca])return n;t=hk(t)}return e}t=n,n=t.parentNode}return null}function Zg(t){return t=t[Ca]||t[jo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Hd(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Te(33))}function Tx(t){return t[Lm]||null}var tA=[],qd=-1;function Xl(t){return{current:t}}function jn(t){0>qd||(t.current=tA[qd],tA[qd]=null,qd--)}function vn(t,e){qd++,tA[qd]=t.current,t.current=e}var Vl={},mi=Xl(Vl),zi=Xl(!1),xu=Vl;function jf(t,e){var n=t.type.contextTypes;if(!n)return Vl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function $i(t){return t=t.childContextTypes,t!=null}function w0(){jn(zi),jn(mi)}function pk(t,e,n){if(mi.current!==Vl)throw Error(Te(168));vn(mi,e),vn(zi,n)}function cz(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Te(108,WH(t)||"Unknown",i));return Rn({},n,r)}function _0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Vl,xu=mi.current,vn(mi,t),vn(zi,zi.current),!0}function mk(t,e,n){var r=t.stateNode;if(!r)throw Error(Te(169));n?(t=cz(t,e,xu),r.__reactInternalMemoizedMergedChildContext=t,jn(zi),jn(mi),vn(mi,t)):jn(zi),vn(zi,n)}var fo=null,Px=!1,H1=!1;function uz(t){fo===null?fo=[t]:fo.push(t)}function oK(t){Px=!0,uz(t)}function Zl(){if(!H1&&fo!==null){H1=!0;var t=0,e=nn;try{var n=fo;for(nn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}fo=null,Px=!1}catch(i){throw fo!==null&&(fo=fo.slice(t+1)),ML(hj,Zl),i}finally{nn=e,H1=!1}}return null}var Kd=[],Gd=0,S0=null,A0=0,As=[],Es=0,wu=null,ho=1,po="";function Rc(t,e){Kd[Gd++]=A0,Kd[Gd++]=S0,S0=t,A0=e}function dz(t,e,n){As[Es++]=ho,As[Es++]=po,As[Es++]=wu,wu=t;var r=ho;t=po;var i=32-Js(r)-1;r&=~(1<<i),n+=1;var s=32-Js(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,ho=1<<32-Js(e)+i|n<<i|r,po=s+t}else ho=1<<s|n<<i|r,po=t}function _j(t){t.return!==null&&(Rc(t,1),dz(t,1,0))}function Sj(t){for(;t===S0;)S0=Kd[--Gd],Kd[Gd]=null,A0=Kd[--Gd],Kd[Gd]=null;for(;t===wu;)wu=As[--Es],As[Es]=null,po=As[--Es],As[Es]=null,ho=As[--Es],As[Es]=null}var ts=null,Ji=null,Tn=!1,Xs=null;function fz(t,e){var n=Cs(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function gk(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ts=t,Ji=Nl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ts=t,Ji=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=wu!==null?{id:ho,overflow:po}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Cs(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ts=t,Ji=null,!0):!1;default:return!1}}function nA(t){return(t.mode&1)!==0&&(t.flags&128)===0}function rA(t){if(Tn){var e=Ji;if(e){var n=e;if(!gk(t,e)){if(nA(t))throw Error(Te(418));e=Nl(n.nextSibling);var r=ts;e&&gk(t,e)?fz(r,n):(t.flags=t.flags&-4097|2,Tn=!1,ts=t)}}else{if(nA(t))throw Error(Te(418));t.flags=t.flags&-4097|2,Tn=!1,ts=t}}}function vk(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ts=t}function Qv(t){if(t!==ts)return!1;if(!Tn)return vk(t),Tn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ZS(t.type,t.memoizedProps)),e&&(e=Ji)){if(nA(t))throw hz(),Error(Te(418));for(;e;)fz(t,e),e=Nl(e.nextSibling)}if(vk(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Te(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ji=Nl(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ji=null}}else Ji=ts?Nl(t.stateNode.nextSibling):null;return!0}function hz(){for(var t=Ji;t;)t=Nl(t.nextSibling)}function Cf(){Ji=ts=null,Tn=!1}function Aj(t){Xs===null?Xs=[t]:Xs.push(t)}var lK=zo.ReactCurrentBatchConfig;function xp(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Te(309));var r=n.stateNode}if(!r)throw Error(Te(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(Te(284));if(!n._owner)throw Error(Te(290,t))}return t}function Xv(t,e){throw t=Object.prototype.toString.call(e),Error(Te(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function yk(t){var e=t._init;return e(t._payload)}function pz(t){function e(x,w){if(t){var _=x.deletions;_===null?(x.deletions=[w],x.flags|=16):_.push(w)}}function n(x,w){if(!t)return null;for(;w!==null;)e(x,w),w=w.sibling;return null}function r(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function i(x,w){return x=Ol(x,w),x.index=0,x.sibling=null,x}function s(x,w,_){return x.index=_,t?(_=x.alternate,_!==null?(_=_.index,_<w?(x.flags|=2,w):_):(x.flags|=2,w)):(x.flags|=1048576,w)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function o(x,w,_,E){return w===null||w.tag!==6?(w=Z1(_,x.mode,E),w.return=x,w):(w=i(w,_),w.return=x,w)}function c(x,w,_,E){var j=_.type;return j===Vd?d(x,w,_.props.children,E,_.key):w!==null&&(w.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===fl&&yk(j)===w.type)?(E=i(w,_.props),E.ref=xp(x,w,_),E.return=x,E):(E=Gy(_.type,_.key,_.props,null,x.mode,E),E.ref=xp(x,w,_),E.return=x,E)}function u(x,w,_,E){return w===null||w.tag!==4||w.stateNode.containerInfo!==_.containerInfo||w.stateNode.implementation!==_.implementation?(w=J1(_,x.mode,E),w.return=x,w):(w=i(w,_.children||[]),w.return=x,w)}function d(x,w,_,E,j){return w===null||w.tag!==7?(w=cu(_,x.mode,E,j),w.return=x,w):(w=i(w,_),w.return=x,w)}function f(x,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Z1(""+w,x.mode,_),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Fv:return _=Gy(w.type,w.key,w.props,null,x.mode,_),_.ref=xp(x,null,w),_.return=x,_;case Fd:return w=J1(w,x.mode,_),w.return=x,w;case fl:var E=w._init;return f(x,E(w._payload),_)}if(Rp(w)||mp(w))return w=cu(w,x.mode,_,null),w.return=x,w;Xv(x,w)}return null}function h(x,w,_,E){var j=w!==null?w.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return j!==null?null:o(x,w,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Fv:return _.key===j?c(x,w,_,E):null;case Fd:return _.key===j?u(x,w,_,E):null;case fl:return j=_._init,h(x,w,j(_._payload),E)}if(Rp(_)||mp(_))return j!==null?null:d(x,w,_,E,null);Xv(x,_)}return null}function p(x,w,_,E,j){if(typeof E=="string"&&E!==""||typeof E=="number")return x=x.get(_)||null,o(w,x,""+E,j);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Fv:return x=x.get(E.key===null?_:E.key)||null,c(w,x,E,j);case Fd:return x=x.get(E.key===null?_:E.key)||null,u(w,x,E,j);case fl:var T=E._init;return p(x,w,_,T(E._payload),j)}if(Rp(E)||mp(E))return x=x.get(_)||null,d(w,x,E,j,null);Xv(w,E)}return null}function m(x,w,_,E){for(var j=null,T=null,A=w,C=w=0,D=null;A!==null&&C<_.length;C++){A.index>C?(D=A,A=null):D=A.sibling;var O=h(x,A,_[C],E);if(O===null){A===null&&(A=D);break}t&&A&&O.alternate===null&&e(x,A),w=s(O,w,C),T===null?j=O:T.sibling=O,T=O,A=D}if(C===_.length)return n(x,A),Tn&&Rc(x,C),j;if(A===null){for(;C<_.length;C++)A=f(x,_[C],E),A!==null&&(w=s(A,w,C),T===null?j=A:T.sibling=A,T=A);return Tn&&Rc(x,C),j}for(A=r(x,A);C<_.length;C++)D=p(A,x,C,_[C],E),D!==null&&(t&&D.alternate!==null&&A.delete(D.key===null?C:D.key),w=s(D,w,C),T===null?j=D:T.sibling=D,T=D);return t&&A.forEach(function(L){return e(x,L)}),Tn&&Rc(x,C),j}function g(x,w,_,E){var j=mp(_);if(typeof j!="function")throw Error(Te(150));if(_=j.call(_),_==null)throw Error(Te(151));for(var T=j=null,A=w,C=w=0,D=null,O=_.next();A!==null&&!O.done;C++,O=_.next()){A.index>C?(D=A,A=null):D=A.sibling;var L=h(x,A,O.value,E);if(L===null){A===null&&(A=D);break}t&&A&&L.alternate===null&&e(x,A),w=s(L,w,C),T===null?j=L:T.sibling=L,T=L,A=D}if(O.done)return n(x,A),Tn&&Rc(x,C),j;if(A===null){for(;!O.done;C++,O=_.next())O=f(x,O.value,E),O!==null&&(w=s(O,w,C),T===null?j=O:T.sibling=O,T=O);return Tn&&Rc(x,C),j}for(A=r(x,A);!O.done;C++,O=_.next())O=p(A,x,C,O.value,E),O!==null&&(t&&O.alternate!==null&&A.delete(O.key===null?C:O.key),w=s(O,w,C),T===null?j=O:T.sibling=O,T=O);return t&&A.forEach(function(z){return e(x,z)}),Tn&&Rc(x,C),j}function b(x,w,_,E){if(typeof _=="object"&&_!==null&&_.type===Vd&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Fv:e:{for(var j=_.key,T=w;T!==null;){if(T.key===j){if(j=_.type,j===Vd){if(T.tag===7){n(x,T.sibling),w=i(T,_.props.children),w.return=x,x=w;break e}}else if(T.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===fl&&yk(j)===T.type){n(x,T.sibling),w=i(T,_.props),w.ref=xp(x,T,_),w.return=x,x=w;break e}n(x,T);break}else e(x,T);T=T.sibling}_.type===Vd?(w=cu(_.props.children,x.mode,E,_.key),w.return=x,x=w):(E=Gy(_.type,_.key,_.props,null,x.mode,E),E.ref=xp(x,w,_),E.return=x,x=E)}return a(x);case Fd:e:{for(T=_.key;w!==null;){if(w.key===T)if(w.tag===4&&w.stateNode.containerInfo===_.containerInfo&&w.stateNode.implementation===_.implementation){n(x,w.sibling),w=i(w,_.children||[]),w.return=x,x=w;break e}else{n(x,w);break}else e(x,w);w=w.sibling}w=J1(_,x.mode,E),w.return=x,x=w}return a(x);case fl:return T=_._init,b(x,w,T(_._payload),E)}if(Rp(_))return m(x,w,_,E);if(mp(_))return g(x,w,_,E);Xv(x,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,w!==null&&w.tag===6?(n(x,w.sibling),w=i(w,_),w.return=x,x=w):(n(x,w),w=Z1(_,x.mode,E),w.return=x,x=w),a(x)):n(x,w)}return b}var Tf=pz(!0),mz=pz(!1),E0=Xl(null),j0=null,Yd=null,Ej=null;function jj(){Ej=Yd=j0=null}function Cj(t){var e=E0.current;jn(E0),t._currentValue=e}function iA(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function pf(t,e){j0=t,Ej=Yd=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ii=!0),t.firstContext=null)}function ks(t){var e=t._currentValue;if(Ej!==t)if(t={context:t,memoizedValue:e,next:null},Yd===null){if(j0===null)throw Error(Te(308));Yd=t,j0.dependencies={lanes:0,firstContext:t}}else Yd=Yd.next=t;return e}var Xc=null;function Tj(t){Xc===null?Xc=[t]:Xc.push(t)}function gz(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Tj(e)):(n.next=i.next,i.next=n),e.interleaved=n,Co(t,r)}function Co(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var hl=!1;function Pj(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vz(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function kl(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ft&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Co(t,n)}return i=r.interleaved,i===null?(e.next=e,Tj(r)):(e.next=i.next,i.next=e),r.interleaved=e,Co(t,n)}function By(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,pj(t,n)}}function bk(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function C0(t,e,n,r){var i=t.updateQueue;hl=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,u=c.next;c.next=null,a===null?s=u:a.next=u,a=c;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=i.baseState;a=0,d=u=c=null,o=s;do{var h=o.lane,p=o.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=t,g=o;switch(h=e,p=n,g.tag){case 1:if(m=g.payload,typeof m=="function"){f=m.call(p,f,h);break e}f=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,h=typeof m=="function"?m.call(p,f,h):m,h==null)break e;f=Rn({},f,h);break e;case 2:hl=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,a|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;h=o,o=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(d===null&&(c=f),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Su|=a,t.lanes=a,t.memoizedState=f}}function xk(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Te(191,i));i.call(r)}}}var Jg={},Oa=Xl(Jg),zm=Xl(Jg),$m=Xl(Jg);function Zc(t){if(t===Jg)throw Error(Te(174));return t}function Nj(t,e){switch(vn($m,e),vn(zm,t),vn(Oa,Jg),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zS(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=zS(e,t)}jn(Oa),vn(Oa,e)}function Pf(){jn(Oa),jn(zm),jn($m)}function yz(t){Zc($m.current);var e=Zc(Oa.current),n=zS(e,t.type);e!==n&&(vn(zm,t),vn(Oa,n))}function kj(t){zm.current===t&&(jn(Oa),jn(zm))}var In=Xl(0);function T0(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var q1=[];function Dj(){for(var t=0;t<q1.length;t++)q1[t]._workInProgressVersionPrimary=null;q1.length=0}var Uy=zo.ReactCurrentDispatcher,K1=zo.ReactCurrentBatchConfig,_u=0,Mn=null,wr=null,Or=null,P0=!1,em=!1,Fm=0,cK=0;function ai(){throw Error(Te(321))}function Ij(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ia(t[n],e[n]))return!1;return!0}function Oj(t,e,n,r,i,s){if(_u=s,Mn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Uy.current=t===null||t.memoizedState===null?hK:pK,t=n(r,i),em){s=0;do{if(em=!1,Fm=0,25<=s)throw Error(Te(301));s+=1,Or=wr=null,e.updateQueue=null,Uy.current=mK,t=n(r,i)}while(em)}if(Uy.current=N0,e=wr!==null&&wr.next!==null,_u=0,Or=wr=Mn=null,P0=!1,e)throw Error(Te(300));return t}function Mj(){var t=Fm!==0;return Fm=0,t}function Ea(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Or===null?Mn.memoizedState=Or=t:Or=Or.next=t,Or}function Ds(){if(wr===null){var t=Mn.alternate;t=t!==null?t.memoizedState:null}else t=wr.next;var e=Or===null?Mn.memoizedState:Or.next;if(e!==null)Or=e,wr=t;else{if(t===null)throw Error(Te(310));wr=t,t={memoizedState:wr.memoizedState,baseState:wr.baseState,baseQueue:wr.baseQueue,queue:wr.queue,next:null},Or===null?Mn.memoizedState=Or=t:Or=Or.next=t}return Or}function Vm(t,e){return typeof e=="function"?e(t):e}function G1(t){var e=Ds(),n=e.queue;if(n===null)throw Error(Te(311));n.lastRenderedReducer=t;var r=wr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var o=a=null,c=null,u=s;do{var d=u.lane;if((_u&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=f,a=r):c=c.next=f,Mn.lanes|=d,Su|=d}u=u.next}while(u!==null&&u!==s);c===null?a=r:c.next=o,ia(r,e.memoizedState)||(Ii=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Mn.lanes|=s,Su|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Y1(t){var e=Ds(),n=e.queue;if(n===null)throw Error(Te(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);ia(s,e.memoizedState)||(Ii=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function bz(){}function xz(t,e){var n=Mn,r=Ds(),i=e(),s=!ia(r.memoizedState,i);if(s&&(r.memoizedState=i,Ii=!0),r=r.queue,Rj(Sz.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Or!==null&&Or.memoizedState.tag&1){if(n.flags|=2048,Bm(9,_z.bind(null,n,r,i,e),void 0,null),Lr===null)throw Error(Te(349));_u&30||wz(n,e,i)}return i}function wz(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Mn.updateQueue,e===null?(e={lastEffect:null,stores:null},Mn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function _z(t,e,n,r){e.value=n,e.getSnapshot=r,Az(e)&&Ez(t)}function Sz(t,e,n){return n(function(){Az(e)&&Ez(t)})}function Az(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ia(t,n)}catch{return!0}}function Ez(t){var e=Co(t,1);e!==null&&ea(e,t,1,-1)}function wk(t){var e=Ea();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vm,lastRenderedState:t},e.queue=t,t=t.dispatch=fK.bind(null,Mn,t),[e.memoizedState,t]}function Bm(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Mn.updateQueue,e===null?(e={lastEffect:null,stores:null},Mn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function jz(){return Ds().memoizedState}function Wy(t,e,n,r){var i=Ea();Mn.flags|=t,i.memoizedState=Bm(1|e,n,void 0,r===void 0?null:r)}function Nx(t,e,n,r){var i=Ds();r=r===void 0?null:r;var s=void 0;if(wr!==null){var a=wr.memoizedState;if(s=a.destroy,r!==null&&Ij(r,a.deps)){i.memoizedState=Bm(e,n,s,r);return}}Mn.flags|=t,i.memoizedState=Bm(1|e,n,s,r)}function _k(t,e){return Wy(8390656,8,t,e)}function Rj(t,e){return Nx(2048,8,t,e)}function Cz(t,e){return Nx(4,2,t,e)}function Tz(t,e){return Nx(4,4,t,e)}function Pz(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Nz(t,e,n){return n=n!=null?n.concat([t]):null,Nx(4,4,Pz.bind(null,e,t),n)}function Lj(){}function kz(t,e){var n=Ds();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ij(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Dz(t,e){var n=Ds();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ij(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Iz(t,e,n){return _u&21?(ia(n,e)||(n=zL(),Mn.lanes|=n,Su|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ii=!0),t.memoizedState=n)}function uK(t,e){var n=nn;nn=n!==0&&4>n?n:4,t(!0);var r=K1.transition;K1.transition={};try{t(!1),e()}finally{nn=n,K1.transition=r}}function Oz(){return Ds().memoizedState}function dK(t,e,n){var r=Il(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Mz(t))Rz(e,n);else if(n=gz(t,e,n,r),n!==null){var i=Ai();ea(n,t,r,i),Lz(n,e,r)}}function fK(t,e,n){var r=Il(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Mz(t))Rz(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,ia(o,a)){var c=e.interleaved;c===null?(i.next=i,Tj(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=gz(t,e,i,r),n!==null&&(i=Ai(),ea(n,t,r,i),Lz(n,e,r))}}function Mz(t){var e=t.alternate;return t===Mn||e!==null&&e===Mn}function Rz(t,e){em=P0=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Lz(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,pj(t,n)}}var N0={readContext:ks,useCallback:ai,useContext:ai,useEffect:ai,useImperativeHandle:ai,useInsertionEffect:ai,useLayoutEffect:ai,useMemo:ai,useReducer:ai,useRef:ai,useState:ai,useDebugValue:ai,useDeferredValue:ai,useTransition:ai,useMutableSource:ai,useSyncExternalStore:ai,useId:ai,unstable_isNewReconciler:!1},hK={readContext:ks,useCallback:function(t,e){return Ea().memoizedState=[t,e===void 0?null:e],t},useContext:ks,useEffect:_k,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Wy(4194308,4,Pz.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Wy(4194308,4,t,e)},useInsertionEffect:function(t,e){return Wy(4,2,t,e)},useMemo:function(t,e){var n=Ea();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ea();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=dK.bind(null,Mn,t),[r.memoizedState,t]},useRef:function(t){var e=Ea();return t={current:t},e.memoizedState=t},useState:wk,useDebugValue:Lj,useDeferredValue:function(t){return Ea().memoizedState=t},useTransition:function(){var t=wk(!1),e=t[0];return t=uK.bind(null,t[1]),Ea().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Mn,i=Ea();if(Tn){if(n===void 0)throw Error(Te(407));n=n()}else{if(n=e(),Lr===null)throw Error(Te(349));_u&30||wz(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,_k(Sz.bind(null,r,s,t),[t]),r.flags|=2048,Bm(9,_z.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ea(),e=Lr.identifierPrefix;if(Tn){var n=po,r=ho;n=(r&~(1<<32-Js(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Fm++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=cK++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},pK={readContext:ks,useCallback:kz,useContext:ks,useEffect:Rj,useImperativeHandle:Nz,useInsertionEffect:Cz,useLayoutEffect:Tz,useMemo:Dz,useReducer:G1,useRef:jz,useState:function(){return G1(Vm)},useDebugValue:Lj,useDeferredValue:function(t){var e=Ds();return Iz(e,wr.memoizedState,t)},useTransition:function(){var t=G1(Vm)[0],e=Ds().memoizedState;return[t,e]},useMutableSource:bz,useSyncExternalStore:xz,useId:Oz,unstable_isNewReconciler:!1},mK={readContext:ks,useCallback:kz,useContext:ks,useEffect:Rj,useImperativeHandle:Nz,useInsertionEffect:Cz,useLayoutEffect:Tz,useMemo:Dz,useReducer:Y1,useRef:jz,useState:function(){return Y1(Vm)},useDebugValue:Lj,useDeferredValue:function(t){var e=Ds();return wr===null?e.memoizedState=t:Iz(e,wr.memoizedState,t)},useTransition:function(){var t=Y1(Vm)[0],e=Ds().memoizedState;return[t,e]},useMutableSource:bz,useSyncExternalStore:xz,useId:Oz,unstable_isNewReconciler:!1};function Ks(t,e){if(t&&t.defaultProps){e=Rn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function sA(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Rn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var kx={isMounted:function(t){return(t=t._reactInternals)?Wu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ai(),i=Il(t),s=xo(r,i);s.payload=e,n!=null&&(s.callback=n),e=kl(t,s,i),e!==null&&(ea(e,t,i,r),By(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ai(),i=Il(t),s=xo(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=kl(t,s,i),e!==null&&(ea(e,t,i,r),By(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ai(),r=Il(t),i=xo(n,r);i.tag=2,e!=null&&(i.callback=e),e=kl(t,i,r),e!==null&&(ea(e,t,r,n),By(e,t,r))}};function Sk(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Om(n,r)||!Om(i,s):!0}function zz(t,e,n){var r=!1,i=Vl,s=e.contextType;return typeof s=="object"&&s!==null?s=ks(s):(i=$i(e)?xu:mi.current,r=e.contextTypes,s=(r=r!=null)?jf(t,i):Vl),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=kx,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Ak(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&kx.enqueueReplaceState(e,e.state,null)}function aA(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Pj(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ks(s):(s=$i(e)?xu:mi.current,i.context=jf(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(sA(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&kx.enqueueReplaceState(i,i.state,null),C0(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Nf(t,e){try{var n="",r=e;do n+=UH(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Q1(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function oA(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var gK=typeof WeakMap=="function"?WeakMap:Map;function $z(t,e,n){n=xo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){D0||(D0=!0,vA=r),oA(t,e)},n}function Fz(t,e,n){n=xo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){oA(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){oA(t,e),typeof r!="function"&&(Dl===null?Dl=new Set([this]):Dl.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Ek(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new gK;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=NK.bind(null,t,e,n),e.then(t,t))}function jk(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ck(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xo(-1,1),e.tag=2,kl(n,e,1))),n.lanes|=1),t)}var vK=zo.ReactCurrentOwner,Ii=!1;function bi(t,e,n,r){e.child=t===null?mz(e,null,n,r):Tf(e,t.child,n,r)}function Tk(t,e,n,r,i){n=n.render;var s=e.ref;return pf(e,i),r=Oj(t,e,n,r,s,i),n=Mj(),t!==null&&!Ii?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,To(t,e,i)):(Tn&&n&&_j(e),e.flags|=1,bi(t,e,r,i),e.child)}function Pk(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Hj(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Vz(t,e,s,r,i)):(t=Gy(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Om,n(a,r)&&t.ref===e.ref)return To(t,e,i)}return e.flags|=1,t=Ol(s,r),t.ref=e.ref,t.return=e,e.child=t}function Vz(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Om(s,r)&&t.ref===e.ref)if(Ii=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ii=!0);else return e.lanes=t.lanes,To(t,e,i)}return lA(t,e,n,r,i)}function Bz(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},vn(Xd,Qi),Qi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,vn(Xd,Qi),Qi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,vn(Xd,Qi),Qi|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,vn(Xd,Qi),Qi|=r;return bi(t,e,i,n),e.child}function Uz(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function lA(t,e,n,r,i){var s=$i(n)?xu:mi.current;return s=jf(e,s),pf(e,i),n=Oj(t,e,n,r,s,i),r=Mj(),t!==null&&!Ii?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,To(t,e,i)):(Tn&&r&&_j(e),e.flags|=1,bi(t,e,n,i),e.child)}function Nk(t,e,n,r,i){if($i(n)){var s=!0;_0(e)}else s=!1;if(pf(e,i),e.stateNode===null)Hy(t,e),zz(e,n,r),aA(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=ks(u):(u=$i(n)?xu:mi.current,u=jf(e,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||c!==u)&&Ak(e,a,r,u),hl=!1;var h=e.memoizedState;a.state=h,C0(e,r,a,i),c=e.memoizedState,o!==r||h!==c||zi.current||hl?(typeof d=="function"&&(sA(e,n,d,r),c=e.memoizedState),(o=hl||Sk(e,n,o,r,h,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=u,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,vz(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:Ks(e.type,o),a.props=u,f=e.pendingProps,h=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=ks(c):(c=$i(n)?xu:mi.current,c=jf(e,c));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==f||h!==c)&&Ak(e,a,r,c),hl=!1,h=e.memoizedState,a.state=h,C0(e,r,a,i);var m=e.memoizedState;o!==f||h!==m||zi.current||hl?(typeof p=="function"&&(sA(e,n,p,r),m=e.memoizedState),(u=hl||Sk(e,n,u,r,h,m,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,m,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,m,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),a.props=r,a.state=m,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return cA(t,e,n,r,s,i)}function cA(t,e,n,r,i,s){Uz(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&mk(e,n,!1),To(t,e,s);r=e.stateNode,vK.current=e;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Tf(e,t.child,null,s),e.child=Tf(e,null,o,s)):bi(t,e,o,s),e.memoizedState=r.state,i&&mk(e,n,!0),e.child}function Wz(t){var e=t.stateNode;e.pendingContext?pk(t,e.pendingContext,e.pendingContext!==e.context):e.context&&pk(t,e.context,!1),Nj(t,e.containerInfo)}function kk(t,e,n,r,i){return Cf(),Aj(i),e.flags|=256,bi(t,e,n,r),e.child}var uA={dehydrated:null,treeContext:null,retryLane:0};function dA(t){return{baseLanes:t,cachePool:null,transitions:null}}function Hz(t,e,n){var r=e.pendingProps,i=In.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),vn(In,i&1),t===null)return rA(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Ox(a,r,0,null),t=cu(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=dA(n),e.memoizedState=uA,t):zj(e,a));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return yK(t,e,a,r,o,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,o=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Ol(i,c),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=Ol(o,s):(s=cu(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?dA(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=uA,r}return s=t.child,t=s.sibling,r=Ol(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function zj(t,e){return e=Ox({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Zv(t,e,n,r){return r!==null&&Aj(r),Tf(e,t.child,null,n),t=zj(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function yK(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=Q1(Error(Te(422))),Zv(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Ox({mode:"visible",children:r.children},i,0,null),s=cu(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Tf(e,t.child,null,a),e.child.memoizedState=dA(a),e.memoizedState=uA,s);if(!(e.mode&1))return Zv(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,s=Error(Te(419)),r=Q1(s,r,void 0),Zv(t,e,a,r)}if(o=(a&t.childLanes)!==0,Ii||o){if(r=Lr,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Co(t,i),ea(r,t,i,-1))}return Wj(),r=Q1(Error(Te(421))),Zv(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=kK.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ji=Nl(i.nextSibling),ts=e,Tn=!0,Xs=null,t!==null&&(As[Es++]=ho,As[Es++]=po,As[Es++]=wu,ho=t.id,po=t.overflow,wu=e),e=zj(e,r.children),e.flags|=4096,e)}function Dk(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),iA(t.return,e,n)}function X1(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qz(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(bi(t,e,r.children,n),r=In.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Dk(t,n,e);else if(t.tag===19)Dk(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(vn(In,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&T0(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),X1(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&T0(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}X1(e,!0,n,null,s);break;case"together":X1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Hy(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function To(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Su|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Te(153));if(e.child!==null){for(t=e.child,n=Ol(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ol(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function bK(t,e,n){switch(e.tag){case 3:Wz(e),Cf();break;case 5:yz(e);break;case 1:$i(e.type)&&_0(e);break;case 4:Nj(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;vn(E0,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(vn(In,In.current&1),e.flags|=128,null):n&e.child.childLanes?Hz(t,e,n):(vn(In,In.current&1),t=To(t,e,n),t!==null?t.sibling:null);vn(In,In.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return qz(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),vn(In,In.current),r)break;return null;case 22:case 23:return e.lanes=0,Bz(t,e,n)}return To(t,e,n)}var Kz,fA,Gz,Yz;Kz=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fA=function(){};Gz=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Zc(Oa.current);var s=null;switch(n){case"input":i=OS(t,i),r=OS(t,r),s=[];break;case"select":i=Rn({},i,{value:void 0}),r=Rn({},r,{value:void 0}),s=[];break;case"textarea":i=LS(t,i),r=LS(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=x0)}$S(n,r);var a;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Cm.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Cm.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&_n("scroll",t),s||o===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Yz=function(t,e,n,r){n!==r&&(e.flags|=4)};function wp(t,e){if(!Tn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function oi(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function xK(t,e,n){var r=e.pendingProps;switch(Sj(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oi(e),null;case 1:return $i(e.type)&&w0(),oi(e),null;case 3:return r=e.stateNode,Pf(),jn(zi),jn(mi),Dj(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Qv(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xs!==null&&(xA(Xs),Xs=null))),fA(t,e),oi(e),null;case 5:kj(e);var i=Zc($m.current);if(n=e.type,t!==null&&e.stateNode!=null)Gz(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Te(166));return oi(e),null}if(t=Zc(Oa.current),Qv(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Ca]=e,r[Lm]=s,t=(e.mode&1)!==0,n){case"dialog":_n("cancel",r),_n("close",r);break;case"iframe":case"object":case"embed":_n("load",r);break;case"video":case"audio":for(i=0;i<zp.length;i++)_n(zp[i],r);break;case"source":_n("error",r);break;case"img":case"image":case"link":_n("error",r),_n("load",r);break;case"details":_n("toggle",r);break;case"input":VN(r,s),_n("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},_n("invalid",r);break;case"textarea":UN(r,s),_n("invalid",r)}$S(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?r.textContent!==o&&(s.suppressHydrationWarning!==!0&&Yv(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Yv(r.textContent,o,t),i=["children",""+o]):Cm.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&_n("scroll",r)}switch(n){case"input":Vv(r),BN(r,s,!0);break;case"textarea":Vv(r),WN(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=x0)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=SL(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Ca]=e,t[Lm]=r,Kz(t,e,!1,!1),e.stateNode=t;e:{switch(a=FS(n,r),n){case"dialog":_n("cancel",t),_n("close",t),i=r;break;case"iframe":case"object":case"embed":_n("load",t),i=r;break;case"video":case"audio":for(i=0;i<zp.length;i++)_n(zp[i],t);i=r;break;case"source":_n("error",t),i=r;break;case"img":case"image":case"link":_n("error",t),_n("load",t),i=r;break;case"details":_n("toggle",t),i=r;break;case"input":VN(t,r),i=OS(t,r),_n("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Rn({},r,{value:void 0}),_n("invalid",t);break;case"textarea":UN(t,r),i=LS(t,r),_n("invalid",t);break;default:i=r}$S(n,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var c=o[s];s==="style"?jL(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&AL(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Tm(t,c):typeof c=="number"&&Tm(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Cm.hasOwnProperty(s)?c!=null&&s==="onScroll"&&_n("scroll",t):c!=null&&lj(t,s,c,a))}switch(n){case"input":Vv(t),BN(t,r,!1);break;case"textarea":Vv(t),WN(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Fl(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?uf(t,!!r.multiple,s,!1):r.defaultValue!=null&&uf(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=x0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return oi(e),null;case 6:if(t&&e.stateNode!=null)Yz(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Te(166));if(n=Zc($m.current),Zc(Oa.current),Qv(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ca]=e,(s=r.nodeValue!==n)&&(t=ts,t!==null))switch(t.tag){case 3:Yv(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Yv(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ca]=e,e.stateNode=r}return oi(e),null;case 13:if(jn(In),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Tn&&Ji!==null&&e.mode&1&&!(e.flags&128))hz(),Cf(),e.flags|=98560,s=!1;else if(s=Qv(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Te(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Te(317));s[Ca]=e}else Cf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;oi(e),s=!1}else Xs!==null&&(xA(Xs),Xs=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||In.current&1?Sr===0&&(Sr=3):Wj())),e.updateQueue!==null&&(e.flags|=4),oi(e),null);case 4:return Pf(),fA(t,e),t===null&&Mm(e.stateNode.containerInfo),oi(e),null;case 10:return Cj(e.type._context),oi(e),null;case 17:return $i(e.type)&&w0(),oi(e),null;case 19:if(jn(In),s=e.memoizedState,s===null)return oi(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)wp(s,!1);else{if(Sr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=T0(t),a!==null){for(e.flags|=128,wp(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return vn(In,In.current&1|2),e.child}t=t.sibling}s.tail!==null&&Zn()>kf&&(e.flags|=128,r=!0,wp(s,!1),e.lanes=4194304)}else{if(!r)if(t=T0(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),wp(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Tn)return oi(e),null}else 2*Zn()-s.renderingStartTime>kf&&n!==1073741824&&(e.flags|=128,r=!0,wp(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Zn(),e.sibling=null,n=In.current,vn(In,r?n&1|2:n&1),e):(oi(e),null);case 22:case 23:return Uj(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Qi&1073741824&&(oi(e),e.subtreeFlags&6&&(e.flags|=8192)):oi(e),null;case 24:return null;case 25:return null}throw Error(Te(156,e.tag))}function wK(t,e){switch(Sj(e),e.tag){case 1:return $i(e.type)&&w0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Pf(),jn(zi),jn(mi),Dj(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return kj(e),null;case 13:if(jn(In),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Te(340));Cf()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return jn(In),null;case 4:return Pf(),null;case 10:return Cj(e.type._context),null;case 22:case 23:return Uj(),null;case 24:return null;default:return null}}var Jv=!1,di=!1,_K=typeof WeakSet=="function"?WeakSet:Set,qe=null;function Qd(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Vn(t,e,r)}else n.current=null}function hA(t,e,n){try{n()}catch(r){Vn(t,e,r)}}var Ik=!1;function SK(t,e){if(QS=v0,t=ez(),wj(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,o=-1,c=-1,u=0,d=0,f=t,h=null;t:for(;;){for(var p;f!==n||i!==0&&f.nodeType!==3||(o=a+i),f!==s||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===t)break t;if(h===n&&++u===i&&(o=a),h===s&&++d===r&&(c=a),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(XS={focusedElem:t,selectionRange:n},v0=!1,qe=e;qe!==null;)if(e=qe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,qe=t;else for(;qe!==null;){e=qe;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,b=m.memoizedState,x=e.stateNode,w=x.getSnapshotBeforeUpdate(e.elementType===e.type?g:Ks(e.type,g),b);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Te(163))}}catch(E){Vn(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,qe=t;break}qe=e.return}return m=Ik,Ik=!1,m}function tm(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&hA(e,n,s)}i=i.next}while(i!==r)}}function Dx(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function pA(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Qz(t){var e=t.alternate;e!==null&&(t.alternate=null,Qz(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ca],delete e[Lm],delete e[eA],delete e[sK],delete e[aK])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Xz(t){return t.tag===5||t.tag===3||t.tag===4}function Ok(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Xz(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mA(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=x0));else if(r!==4&&(t=t.child,t!==null))for(mA(t,e,n),t=t.sibling;t!==null;)mA(t,e,n),t=t.sibling}function gA(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(gA(t,e,n),t=t.sibling;t!==null;)gA(t,e,n),t=t.sibling}var Kr=null,Gs=!1;function sl(t,e,n){for(n=n.child;n!==null;)Zz(t,e,n),n=n.sibling}function Zz(t,e,n){if(Ia&&typeof Ia.onCommitFiberUnmount=="function")try{Ia.onCommitFiberUnmount(Ax,n)}catch{}switch(n.tag){case 5:di||Qd(n,e);case 6:var r=Kr,i=Gs;Kr=null,sl(t,e,n),Kr=r,Gs=i,Kr!==null&&(Gs?(t=Kr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Kr.removeChild(n.stateNode));break;case 18:Kr!==null&&(Gs?(t=Kr,n=n.stateNode,t.nodeType===8?W1(t.parentNode,n):t.nodeType===1&&W1(t,n),Dm(t)):W1(Kr,n.stateNode));break;case 4:r=Kr,i=Gs,Kr=n.stateNode.containerInfo,Gs=!0,sl(t,e,n),Kr=r,Gs=i;break;case 0:case 11:case 14:case 15:if(!di&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&hA(n,e,a),i=i.next}while(i!==r)}sl(t,e,n);break;case 1:if(!di&&(Qd(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Vn(n,e,o)}sl(t,e,n);break;case 21:sl(t,e,n);break;case 22:n.mode&1?(di=(r=di)||n.memoizedState!==null,sl(t,e,n),di=r):sl(t,e,n);break;default:sl(t,e,n)}}function Mk(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new _K),e.forEach(function(r){var i=DK.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ws(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Kr=o.stateNode,Gs=!1;break e;case 3:Kr=o.stateNode.containerInfo,Gs=!0;break e;case 4:Kr=o.stateNode.containerInfo,Gs=!0;break e}o=o.return}if(Kr===null)throw Error(Te(160));Zz(s,a,i),Kr=null,Gs=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){Vn(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Jz(e,t),e=e.sibling}function Jz(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ws(e,t),Aa(t),r&4){try{tm(3,t,t.return),Dx(3,t)}catch(g){Vn(t,t.return,g)}try{tm(5,t,t.return)}catch(g){Vn(t,t.return,g)}}break;case 1:Ws(e,t),Aa(t),r&512&&n!==null&&Qd(n,n.return);break;case 5:if(Ws(e,t),Aa(t),r&512&&n!==null&&Qd(n,n.return),t.flags&32){var i=t.stateNode;try{Tm(i,"")}catch(g){Vn(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&wL(i,s),FS(o,a);var u=FS(o,s);for(a=0;a<c.length;a+=2){var d=c[a],f=c[a+1];d==="style"?jL(i,f):d==="dangerouslySetInnerHTML"?AL(i,f):d==="children"?Tm(i,f):lj(i,d,f,u)}switch(o){case"input":MS(i,s);break;case"textarea":_L(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?uf(i,!!s.multiple,p,!1):h!==!!s.multiple&&(s.defaultValue!=null?uf(i,!!s.multiple,s.defaultValue,!0):uf(i,!!s.multiple,s.multiple?[]:"",!1))}i[Lm]=s}catch(g){Vn(t,t.return,g)}}break;case 6:if(Ws(e,t),Aa(t),r&4){if(t.stateNode===null)throw Error(Te(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){Vn(t,t.return,g)}}break;case 3:if(Ws(e,t),Aa(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Dm(e.containerInfo)}catch(g){Vn(t,t.return,g)}break;case 4:Ws(e,t),Aa(t);break;case 13:Ws(e,t),Aa(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Vj=Zn())),r&4&&Mk(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(di=(u=di)||d,Ws(e,t),di=u):Ws(e,t),Aa(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(qe=t,d=t.child;d!==null;){for(f=qe=d;qe!==null;){switch(h=qe,p=h.child,h.tag){case 0:case 11:case 14:case 15:tm(4,h,h.return);break;case 1:Qd(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){Vn(r,n,g)}}break;case 5:Qd(h,h.return);break;case 22:if(h.memoizedState!==null){Lk(f);continue}}p!==null?(p.return=h,qe=p):Lk(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=EL("display",a))}catch(g){Vn(t,t.return,g)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Vn(t,t.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ws(e,t),Aa(t),r&4&&Mk(t);break;case 21:break;default:Ws(e,t),Aa(t)}}function Aa(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Xz(n)){var r=n;break e}n=n.return}throw Error(Te(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Tm(i,""),r.flags&=-33);var s=Ok(t);gA(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=Ok(t);mA(t,o,a);break;default:throw Error(Te(161))}}catch(c){Vn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function AK(t,e,n){qe=t,e$(t)}function e$(t,e,n){for(var r=(t.mode&1)!==0;qe!==null;){var i=qe,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Jv;if(!a){var o=i.alternate,c=o!==null&&o.memoizedState!==null||di;o=Jv;var u=di;if(Jv=a,(di=c)&&!u)for(qe=i;qe!==null;)a=qe,c=a.child,a.tag===22&&a.memoizedState!==null?zk(i):c!==null?(c.return=a,qe=c):zk(i);for(;s!==null;)qe=s,e$(s),s=s.sibling;qe=i,Jv=o,di=u}Rk(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,qe=s):Rk(t)}}function Rk(t){for(;qe!==null;){var e=qe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:di||Dx(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!di)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ks(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&xk(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}xk(e,a,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Dm(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Te(163))}di||e.flags&512&&pA(e)}catch(h){Vn(e,e.return,h)}}if(e===t){qe=null;break}if(n=e.sibling,n!==null){n.return=e.return,qe=n;break}qe=e.return}}function Lk(t){for(;qe!==null;){var e=qe;if(e===t){qe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,qe=n;break}qe=e.return}}function zk(t){for(;qe!==null;){var e=qe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Dx(4,e)}catch(c){Vn(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Vn(e,i,c)}}var s=e.return;try{pA(e)}catch(c){Vn(e,s,c)}break;case 5:var a=e.return;try{pA(e)}catch(c){Vn(e,a,c)}}}catch(c){Vn(e,e.return,c)}if(e===t){qe=null;break}var o=e.sibling;if(o!==null){o.return=e.return,qe=o;break}qe=e.return}}var EK=Math.ceil,k0=zo.ReactCurrentDispatcher,$j=zo.ReactCurrentOwner,Ps=zo.ReactCurrentBatchConfig,Ft=0,Lr=null,ur=null,Zr=0,Qi=0,Xd=Xl(0),Sr=0,Um=null,Su=0,Ix=0,Fj=0,nm=null,ki=null,Vj=0,kf=1/0,co=null,D0=!1,vA=null,Dl=null,ey=!1,bl=null,I0=0,rm=0,yA=null,qy=-1,Ky=0;function Ai(){return Ft&6?Zn():qy!==-1?qy:qy=Zn()}function Il(t){return t.mode&1?Ft&2&&Zr!==0?Zr&-Zr:lK.transition!==null?(Ky===0&&(Ky=zL()),Ky):(t=nn,t!==0||(t=window.event,t=t===void 0?16:HL(t.type)),t):1}function ea(t,e,n,r){if(50<rm)throw rm=0,yA=null,Error(Te(185));Qg(t,n,r),(!(Ft&2)||t!==Lr)&&(t===Lr&&(!(Ft&2)&&(Ix|=n),Sr===4&&gl(t,Zr)),Fi(t,r),n===1&&Ft===0&&!(e.mode&1)&&(kf=Zn()+500,Px&&Zl()))}function Fi(t,e){var n=t.callbackNode;lq(t,e);var r=g0(t,t===Lr?Zr:0);if(r===0)n!==null&&KN(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&KN(n),e===1)t.tag===0?oK($k.bind(null,t)):uz($k.bind(null,t)),rK(function(){!(Ft&6)&&Zl()}),n=null;else{switch($L(r)){case 1:n=hj;break;case 4:n=RL;break;case 16:n=m0;break;case 536870912:n=LL;break;default:n=m0}n=l$(n,t$.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function t$(t,e){if(qy=-1,Ky=0,Ft&6)throw Error(Te(327));var n=t.callbackNode;if(mf()&&t.callbackNode!==n)return null;var r=g0(t,t===Lr?Zr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=O0(t,r);else{e=r;var i=Ft;Ft|=2;var s=r$();(Lr!==t||Zr!==e)&&(co=null,kf=Zn()+500,lu(t,e));do try{TK();break}catch(o){n$(t,o)}while(!0);jj(),k0.current=s,Ft=i,ur!==null?e=0:(Lr=null,Zr=0,e=Sr)}if(e!==0){if(e===2&&(i=HS(t),i!==0&&(r=i,e=bA(t,i))),e===1)throw n=Um,lu(t,0),gl(t,r),Fi(t,Zn()),n;if(e===6)gl(t,r);else{if(i=t.current.alternate,!(r&30)&&!jK(i)&&(e=O0(t,r),e===2&&(s=HS(t),s!==0&&(r=s,e=bA(t,s))),e===1))throw n=Um,lu(t,0),gl(t,r),Fi(t,Zn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Te(345));case 2:Lc(t,ki,co);break;case 3:if(gl(t,r),(r&130023424)===r&&(e=Vj+500-Zn(),10<e)){if(g0(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ai(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=JS(Lc.bind(null,t,ki,co),e);break}Lc(t,ki,co);break;case 4:if(gl(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Js(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=Zn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*EK(r/1960))-r,10<r){t.timeoutHandle=JS(Lc.bind(null,t,ki,co),r);break}Lc(t,ki,co);break;case 5:Lc(t,ki,co);break;default:throw Error(Te(329))}}}return Fi(t,Zn()),t.callbackNode===n?t$.bind(null,t):null}function bA(t,e){var n=nm;return t.current.memoizedState.isDehydrated&&(lu(t,e).flags|=256),t=O0(t,e),t!==2&&(e=ki,ki=n,e!==null&&xA(e)),t}function xA(t){ki===null?ki=t:ki.push.apply(ki,t)}function jK(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ia(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function gl(t,e){for(e&=~Fj,e&=~Ix,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Js(e),r=1<<n;t[n]=-1,e&=~r}}function $k(t){if(Ft&6)throw Error(Te(327));mf();var e=g0(t,0);if(!(e&1))return Fi(t,Zn()),null;var n=O0(t,e);if(t.tag!==0&&n===2){var r=HS(t);r!==0&&(e=r,n=bA(t,r))}if(n===1)throw n=Um,lu(t,0),gl(t,e),Fi(t,Zn()),n;if(n===6)throw Error(Te(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Lc(t,ki,co),Fi(t,Zn()),null}function Bj(t,e){var n=Ft;Ft|=1;try{return t(e)}finally{Ft=n,Ft===0&&(kf=Zn()+500,Px&&Zl())}}function Au(t){bl!==null&&bl.tag===0&&!(Ft&6)&&mf();var e=Ft;Ft|=1;var n=Ps.transition,r=nn;try{if(Ps.transition=null,nn=1,t)return t()}finally{nn=r,Ps.transition=n,Ft=e,!(Ft&6)&&Zl()}}function Uj(){Qi=Xd.current,jn(Xd)}function lu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,nK(n)),ur!==null)for(n=ur.return;n!==null;){var r=n;switch(Sj(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&w0();break;case 3:Pf(),jn(zi),jn(mi),Dj();break;case 5:kj(r);break;case 4:Pf();break;case 13:jn(In);break;case 19:jn(In);break;case 10:Cj(r.type._context);break;case 22:case 23:Uj()}n=n.return}if(Lr=t,ur=t=Ol(t.current,null),Zr=Qi=e,Sr=0,Um=null,Fj=Ix=Su=0,ki=nm=null,Xc!==null){for(e=0;e<Xc.length;e++)if(n=Xc[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Xc=null}return t}function n$(t,e){do{var n=ur;try{if(jj(),Uy.current=N0,P0){for(var r=Mn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}P0=!1}if(_u=0,Or=wr=Mn=null,em=!1,Fm=0,$j.current=null,n===null||n.return===null){Sr=1,Um=e,ur=null;break}e:{var s=t,a=n.return,o=n,c=e;if(e=Zr,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=jk(a);if(p!==null){p.flags&=-257,Ck(p,a,o,s,e),p.mode&1&&Ek(s,u,e),e=p,c=u;var m=e.updateQueue;if(m===null){var g=new Set;g.add(c),e.updateQueue=g}else m.add(c);break e}else{if(!(e&1)){Ek(s,u,e),Wj();break e}c=Error(Te(426))}}else if(Tn&&o.mode&1){var b=jk(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Ck(b,a,o,s,e),Aj(Nf(c,o));break e}}s=c=Nf(c,o),Sr!==4&&(Sr=2),nm===null?nm=[s]:nm.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=$z(s,c,e);bk(s,x);break e;case 1:o=c;var w=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Dl===null||!Dl.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=Fz(s,o,e);bk(s,E);break e}}s=s.return}while(s!==null)}s$(n)}catch(j){e=j,ur===n&&n!==null&&(ur=n=n.return);continue}break}while(!0)}function r$(){var t=k0.current;return k0.current=N0,t===null?N0:t}function Wj(){(Sr===0||Sr===3||Sr===2)&&(Sr=4),Lr===null||!(Su&268435455)&&!(Ix&268435455)||gl(Lr,Zr)}function O0(t,e){var n=Ft;Ft|=2;var r=r$();(Lr!==t||Zr!==e)&&(co=null,lu(t,e));do try{CK();break}catch(i){n$(t,i)}while(!0);if(jj(),Ft=n,k0.current=r,ur!==null)throw Error(Te(261));return Lr=null,Zr=0,Sr}function CK(){for(;ur!==null;)i$(ur)}function TK(){for(;ur!==null&&!JH();)i$(ur)}function i$(t){var e=o$(t.alternate,t,Qi);t.memoizedProps=t.pendingProps,e===null?s$(t):ur=e,$j.current=null}function s$(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=wK(n,e),n!==null){n.flags&=32767,ur=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Sr=6,ur=null;return}}else if(n=xK(n,e,Qi),n!==null){ur=n;return}if(e=e.sibling,e!==null){ur=e;return}ur=e=t}while(e!==null);Sr===0&&(Sr=5)}function Lc(t,e,n){var r=nn,i=Ps.transition;try{Ps.transition=null,nn=1,PK(t,e,n,r)}finally{Ps.transition=i,nn=r}return null}function PK(t,e,n,r){do mf();while(bl!==null);if(Ft&6)throw Error(Te(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Te(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(cq(t,s),t===Lr&&(ur=Lr=null,Zr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ey||(ey=!0,l$(m0,function(){return mf(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ps.transition,Ps.transition=null;var a=nn;nn=1;var o=Ft;Ft|=4,$j.current=null,SK(t,n),Jz(n,t),Yq(XS),v0=!!QS,XS=QS=null,t.current=n,AK(n),eq(),Ft=o,nn=a,Ps.transition=s}else t.current=n;if(ey&&(ey=!1,bl=t,I0=i),s=t.pendingLanes,s===0&&(Dl=null),rq(n.stateNode),Fi(t,Zn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(D0)throw D0=!1,t=vA,vA=null,t;return I0&1&&t.tag!==0&&mf(),s=t.pendingLanes,s&1?t===yA?rm++:(rm=0,yA=t):rm=0,Zl(),null}function mf(){if(bl!==null){var t=$L(I0),e=Ps.transition,n=nn;try{if(Ps.transition=null,nn=16>t?16:t,bl===null)var r=!1;else{if(t=bl,bl=null,I0=0,Ft&6)throw Error(Te(331));var i=Ft;for(Ft|=4,qe=t.current;qe!==null;){var s=qe,a=s.child;if(qe.flags&16){var o=s.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(qe=u;qe!==null;){var d=qe;switch(d.tag){case 0:case 11:case 15:tm(8,d,s)}var f=d.child;if(f!==null)f.return=d,qe=f;else for(;qe!==null;){d=qe;var h=d.sibling,p=d.return;if(Qz(d),d===u){qe=null;break}if(h!==null){h.return=p,qe=h;break}qe=p}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}qe=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,qe=a;else e:for(;qe!==null;){if(s=qe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:tm(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,qe=x;break e}qe=s.return}}var w=t.current;for(qe=w;qe!==null;){a=qe;var _=a.child;if(a.subtreeFlags&2064&&_!==null)_.return=a,qe=_;else e:for(a=w;qe!==null;){if(o=qe,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Dx(9,o)}}catch(j){Vn(o,o.return,j)}if(o===a){qe=null;break e}var E=o.sibling;if(E!==null){E.return=o.return,qe=E;break e}qe=o.return}}if(Ft=i,Zl(),Ia&&typeof Ia.onPostCommitFiberRoot=="function")try{Ia.onPostCommitFiberRoot(Ax,t)}catch{}r=!0}return r}finally{nn=n,Ps.transition=e}}return!1}function Fk(t,e,n){e=Nf(n,e),e=$z(t,e,1),t=kl(t,e,1),e=Ai(),t!==null&&(Qg(t,1,e),Fi(t,e))}function Vn(t,e,n){if(t.tag===3)Fk(t,t,n);else for(;e!==null;){if(e.tag===3){Fk(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Dl===null||!Dl.has(r))){t=Nf(n,t),t=Fz(e,t,1),e=kl(e,t,1),t=Ai(),e!==null&&(Qg(e,1,t),Fi(e,t));break}}e=e.return}}function NK(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ai(),t.pingedLanes|=t.suspendedLanes&n,Lr===t&&(Zr&n)===n&&(Sr===4||Sr===3&&(Zr&130023424)===Zr&&500>Zn()-Vj?lu(t,0):Fj|=n),Fi(t,e)}function a$(t,e){e===0&&(t.mode&1?(e=Wv,Wv<<=1,!(Wv&130023424)&&(Wv=4194304)):e=1);var n=Ai();t=Co(t,e),t!==null&&(Qg(t,e,n),Fi(t,n))}function kK(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),a$(t,n)}function DK(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Te(314))}r!==null&&r.delete(e),a$(t,n)}var o$;o$=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||zi.current)Ii=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ii=!1,bK(t,e,n);Ii=!!(t.flags&131072)}else Ii=!1,Tn&&e.flags&1048576&&dz(e,A0,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Hy(t,e),t=e.pendingProps;var i=jf(e,mi.current);pf(e,n),i=Oj(null,e,r,t,i,n);var s=Mj();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$i(r)?(s=!0,_0(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Pj(e),i.updater=kx,e.stateNode=i,i._reactInternals=e,aA(e,r,t,n),e=cA(null,e,r,!0,s,n)):(e.tag=0,Tn&&s&&_j(e),bi(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Hy(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=OK(r),t=Ks(r,t),i){case 0:e=lA(null,e,r,t,n);break e;case 1:e=Nk(null,e,r,t,n);break e;case 11:e=Tk(null,e,r,t,n);break e;case 14:e=Pk(null,e,r,Ks(r.type,t),n);break e}throw Error(Te(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ks(r,i),lA(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ks(r,i),Nk(t,e,r,i,n);case 3:e:{if(Wz(e),t===null)throw Error(Te(387));r=e.pendingProps,s=e.memoizedState,i=s.element,vz(t,e),C0(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Nf(Error(Te(423)),e),e=kk(t,e,r,n,i);break e}else if(r!==i){i=Nf(Error(Te(424)),e),e=kk(t,e,r,n,i);break e}else for(Ji=Nl(e.stateNode.containerInfo.firstChild),ts=e,Tn=!0,Xs=null,n=mz(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Cf(),r===i){e=To(t,e,n);break e}bi(t,e,r,n)}e=e.child}return e;case 5:return yz(e),t===null&&rA(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,ZS(r,i)?a=null:s!==null&&ZS(r,s)&&(e.flags|=32),Uz(t,e),bi(t,e,a,n),e.child;case 6:return t===null&&rA(e),null;case 13:return Hz(t,e,n);case 4:return Nj(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Tf(e,null,r,n):bi(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ks(r,i),Tk(t,e,r,i,n);case 7:return bi(t,e,e.pendingProps,n),e.child;case 8:return bi(t,e,e.pendingProps.children,n),e.child;case 12:return bi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,vn(E0,r._currentValue),r._currentValue=a,s!==null)if(ia(s.value,a)){if(s.children===i.children&&!zi.current){e=To(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=xo(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),iA(s.return,n,e),o.lanes|=n;break}c=c.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Te(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),iA(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}bi(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,pf(e,n),i=ks(i),r=r(i),e.flags|=1,bi(t,e,r,n),e.child;case 14:return r=e.type,i=Ks(r,e.pendingProps),i=Ks(r.type,i),Pk(t,e,r,i,n);case 15:return Vz(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ks(r,i),Hy(t,e),e.tag=1,$i(r)?(t=!0,_0(e)):t=!1,pf(e,n),zz(e,r,i),aA(e,r,i,n),cA(null,e,r,!0,t,n);case 19:return qz(t,e,n);case 22:return Bz(t,e,n)}throw Error(Te(156,e.tag))};function l$(t,e){return ML(t,e)}function IK(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cs(t,e,n,r){return new IK(t,e,n,r)}function Hj(t){return t=t.prototype,!(!t||!t.isReactComponent)}function OK(t){if(typeof t=="function")return Hj(t)?1:0;if(t!=null){if(t=t.$$typeof,t===uj)return 11;if(t===dj)return 14}return 2}function Ol(t,e){var n=t.alternate;return n===null?(n=Cs(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Gy(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")Hj(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Vd:return cu(n.children,i,s,e);case cj:a=8,i|=8;break;case NS:return t=Cs(12,n,e,i|2),t.elementType=NS,t.lanes=s,t;case kS:return t=Cs(13,n,e,i),t.elementType=kS,t.lanes=s,t;case DS:return t=Cs(19,n,e,i),t.elementType=DS,t.lanes=s,t;case yL:return Ox(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case gL:a=10;break e;case vL:a=9;break e;case uj:a=11;break e;case dj:a=14;break e;case fl:a=16,r=null;break e}throw Error(Te(130,t==null?t:typeof t,""))}return e=Cs(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function cu(t,e,n,r){return t=Cs(7,t,r,e),t.lanes=n,t}function Ox(t,e,n,r){return t=Cs(22,t,r,e),t.elementType=yL,t.lanes=n,t.stateNode={isHidden:!1},t}function Z1(t,e,n){return t=Cs(6,t,null,e),t.lanes=n,t}function J1(t,e,n){return e=Cs(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function MK(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=I1(0),this.expirationTimes=I1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=I1(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function qj(t,e,n,r,i,s,a,o,c){return t=new MK(t,e,n,o,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Cs(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pj(s),t}function RK(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fd,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function c$(t){if(!t)return Vl;t=t._reactInternals;e:{if(Wu(t)!==t||t.tag!==1)throw Error(Te(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($i(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Te(171))}if(t.tag===1){var n=t.type;if($i(n))return cz(t,n,e)}return e}function u$(t,e,n,r,i,s,a,o,c){return t=qj(n,r,!0,t,i,s,a,o,c),t.context=c$(null),n=t.current,r=Ai(),i=Il(n),s=xo(r,i),s.callback=e??null,kl(n,s,i),t.current.lanes=i,Qg(t,i,r),Fi(t,r),t}function Mx(t,e,n,r){var i=e.current,s=Ai(),a=Il(i);return n=c$(n),e.context===null?e.context=n:e.pendingContext=n,e=xo(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=kl(i,e,a),t!==null&&(ea(t,i,a,s),By(t,i,a)),a}function M0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Vk(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Kj(t,e){Vk(t,e),(t=t.alternate)&&Vk(t,e)}function LK(){return null}var d$=typeof reportError=="function"?reportError:function(t){console.error(t)};function Gj(t){this._internalRoot=t}Rx.prototype.render=Gj.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Te(409));Mx(t,e,null,null)};Rx.prototype.unmount=Gj.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Au(function(){Mx(null,t,null,null)}),e[jo]=null}};function Rx(t){this._internalRoot=t}Rx.prototype.unstable_scheduleHydration=function(t){if(t){var e=BL();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ml.length&&e!==0&&e<ml[n].priority;n++);ml.splice(n,0,t),n===0&&WL(t)}};function Yj(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Lx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Bk(){}function zK(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=M0(a);s.call(u)}}var a=u$(e,r,t,0,null,!1,!1,"",Bk);return t._reactRootContainer=a,t[jo]=a.current,Mm(t.nodeType===8?t.parentNode:t),Au(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=M0(c);o.call(u)}}var c=qj(t,0,!1,null,null,!1,!1,"",Bk);return t._reactRootContainer=c,t[jo]=c.current,Mm(t.nodeType===8?t.parentNode:t),Au(function(){Mx(e,c,n,r)}),c}function zx(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var c=M0(a);o.call(c)}}Mx(e,a,t,i)}else a=zK(n,e,t,i,r);return M0(a)}FL=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Lp(e.pendingLanes);n!==0&&(pj(e,n|1),Fi(e,Zn()),!(Ft&6)&&(kf=Zn()+500,Zl()))}break;case 13:Au(function(){var r=Co(t,1);if(r!==null){var i=Ai();ea(r,t,1,i)}}),Kj(t,1)}};mj=function(t){if(t.tag===13){var e=Co(t,134217728);if(e!==null){var n=Ai();ea(e,t,134217728,n)}Kj(t,134217728)}};VL=function(t){if(t.tag===13){var e=Il(t),n=Co(t,e);if(n!==null){var r=Ai();ea(n,t,e,r)}Kj(t,e)}};BL=function(){return nn};UL=function(t,e){var n=nn;try{return nn=t,e()}finally{nn=n}};BS=function(t,e,n){switch(e){case"input":if(MS(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Tx(r);if(!i)throw Error(Te(90));xL(r),MS(r,i)}}}break;case"textarea":_L(t,n);break;case"select":e=n.value,e!=null&&uf(t,!!n.multiple,e,!1)}};PL=Bj;NL=Au;var $K={usingClientEntryPoint:!1,Events:[Zg,Hd,Tx,CL,TL,Bj]},_p={findFiberByHostInstance:Qc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FK={bundleType:_p.bundleType,version:_p.version,rendererPackageName:_p.rendererPackageName,rendererConfig:_p.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=IL(t),t===null?null:t.stateNode},findFiberByHostInstance:_p.findFiberByHostInstance||LK,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ty=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ty.isDisabled&&ty.supportsFiber)try{Ax=ty.inject(FK),Ia=ty}catch{}}ds.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$K;ds.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yj(e))throw Error(Te(200));return RK(t,e,null,n)};ds.createRoot=function(t,e){if(!Yj(t))throw Error(Te(299));var n=!1,r="",i=d$;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=qj(t,1,!1,null,null,n,!1,r,i),t[jo]=e.current,Mm(t.nodeType===8?t.parentNode:t),new Gj(e)};ds.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Te(188)):(t=Object.keys(t).join(","),Error(Te(268,t)));return t=IL(e),t=t===null?null:t.stateNode,t};ds.flushSync=function(t){return Au(t)};ds.hydrate=function(t,e,n){if(!Lx(e))throw Error(Te(200));return zx(null,t,e,!0,n)};ds.hydrateRoot=function(t,e,n){if(!Yj(t))throw Error(Te(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=d$;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=u$(e,null,t,1,n??null,i,!1,s,a),t[jo]=e.current,Mm(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Rx(e)};ds.render=function(t,e,n){if(!Lx(e))throw Error(Te(200));return zx(null,t,e,!1,n)};ds.unmountComponentAtNode=function(t){if(!Lx(t))throw Error(Te(40));return t._reactRootContainer?(Au(function(){zx(null,null,t,!1,function(){t._reactRootContainer=null,t[jo]=null})}),!0):!1};ds.unstable_batchedUpdates=Bj;ds.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Lx(n))throw Error(Te(200));if(t==null||t._reactInternals===void 0)throw Error(Te(38));return zx(t,e,n,!1,r)};ds.version="18.3.1-next-f1338f8080-20240426";function f$(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f$)}catch(t){console.error(t)}}f$(),fL.exports=ds;var Wm=fL.exports,Uk=Wm;TS.createRoot=Uk.createRoot,TS.hydrateRoot=Uk.hydrateRoot;var Wk={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h$=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},VK=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],o=t[n++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},p$={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,o=a?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,d=s>>2,f=(s&3)<<4|o>>4;let h=(o&15)<<2|u>>6,p=u&63;c||(p=64,a||(h=64)),r.push(n[d],n[f],n[h],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(h$(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):VK(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||o==null||u==null||f==null)throw new BK;const h=s<<2|o>>4;if(r.push(h),u!==64){const p=o<<4&240|u>>2;if(r.push(p),f!==64){const m=u<<6&192|f;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class BK extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UK=function(t){const e=h$(t);return p$.encodeByteArray(e,!0)},m$=function(t){return UK(t).replace(/\./g,"")},g$=function(t){try{return p$.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WK(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HK=()=>WK().__FIREBASE_DEFAULTS__,qK=()=>{if(typeof process>"u"||typeof Wk>"u")return;const t=Wk.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},KK=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&g$(t[1]);return e&&JSON.parse(e)},Qj=()=>{try{return HK()||qK()||KK()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},GK=()=>{var t;return(t=Qj())===null||t===void 0?void 0:t.config},YK=t=>{var e;return(e=Qj())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QK{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XK(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ui())}function ZK(){var t;const e=(t=Qj())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JK(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function eG(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function tG(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nG(){const t=Ui();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function rG(){return!ZK()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iG(){try{return typeof indexedDB=="object"}catch{return!1}}function sG(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aG="FirebaseError";class $o extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=aG,Object.setPrototypeOf(this,$o.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ev.prototype.create)}}class ev{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?oG(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new $o(i,o,r)}}function oG(t,e){return t.replace(lG,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const lG=/\{\$([^}]+)}/g;function Hm(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(Hk(s)&&Hk(a)){if(!Hm(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Hk(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v$(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $p(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Fp(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function cG(t,e){const n=new uG(t,e);return n.subscribe.bind(n)}class uG{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");dG(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=e_),i.error===void 0&&(i.error=e_),i.complete===void 0&&(i.complete=e_);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dG(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function e_(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(t){return t&&t._delegate?t._delegate:t}class Eu{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fG{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new QK;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pG(e))try{this.getOrInitializeService({instanceIdentifier:zc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=zc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zc){return this.instances.has(e)}getOptions(e=zc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hG(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zc){return this.component?this.component.multipleInstances?e:zc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hG(t){return t===zc?void 0:t}function pG(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mG{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new fG(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(It||(It={}));const gG={debug:It.DEBUG,verbose:It.VERBOSE,info:It.INFO,warn:It.WARN,error:It.ERROR,silent:It.SILENT},vG=It.INFO,yG={[It.DEBUG]:"log",[It.VERBOSE]:"log",[It.INFO]:"info",[It.WARN]:"warn",[It.ERROR]:"error"},bG=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=yG[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xj{constructor(e){this.name=e,this._logLevel=vG,this._logHandler=bG,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in It))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gG[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,It.DEBUG,...e),this._logHandler(this,It.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,It.VERBOSE,...e),this._logHandler(this,It.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,It.INFO,...e),this._logHandler(this,It.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,It.WARN,...e),this._logHandler(this,It.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,It.ERROR,...e),this._logHandler(this,It.ERROR,...e)}}const xG=(t,e)=>e.some(n=>t instanceof n);let qk,Kk;function wG(){return qk||(qk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _G(){return Kk||(Kk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const y$=new WeakMap,wA=new WeakMap,b$=new WeakMap,t_=new WeakMap,Zj=new WeakMap;function SG(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Ml(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&y$.set(n,t)}).catch(()=>{}),Zj.set(e,t),e}function AG(t){if(wA.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});wA.set(t,e)}let _A={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wA.get(t);if(e==="objectStoreNames")return t.objectStoreNames||b$.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ml(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function EG(t){_A=t(_A)}function jG(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(n_(this),e,...n);return b$.set(r,e.sort?e.sort():[e]),Ml(r)}:_G().includes(t)?function(...e){return t.apply(n_(this),e),Ml(y$.get(this))}:function(...e){return Ml(t.apply(n_(this),e))}}function CG(t){return typeof t=="function"?jG(t):(t instanceof IDBTransaction&&AG(t),xG(t,wG())?new Proxy(t,_A):t)}function Ml(t){if(t instanceof IDBRequest)return SG(t);if(t_.has(t))return t_.get(t);const e=CG(t);return e!==t&&(t_.set(t,e),Zj.set(e,t)),e}const n_=t=>Zj.get(t);function TG(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),o=Ml(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Ml(a.result),c.oldVersion,c.newVersion,Ml(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),o.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const PG=["get","getKey","getAll","getAllKeys","count"],NG=["put","add","delete","clear"],r_=new Map;function Gk(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(r_.get(e))return r_.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=NG.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||PG.includes(n)))return;const s=async function(a,...o){const c=this.transaction(a,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),i&&c.done]))[0]};return r_.set(e,s),s}EG(t=>({...t,get:(e,n,r)=>Gk(e,n)||t.get(e,n,r),has:(e,n)=>!!Gk(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kG{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(DG(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function DG(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const SA="@firebase/app",Yk="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=new Xj("@firebase/app"),IG="@firebase/app-compat",OG="@firebase/analytics-compat",MG="@firebase/analytics",RG="@firebase/app-check-compat",LG="@firebase/app-check",zG="@firebase/auth",$G="@firebase/auth-compat",FG="@firebase/database",VG="@firebase/data-connect",BG="@firebase/database-compat",UG="@firebase/functions",WG="@firebase/functions-compat",HG="@firebase/installations",qG="@firebase/installations-compat",KG="@firebase/messaging",GG="@firebase/messaging-compat",YG="@firebase/performance",QG="@firebase/performance-compat",XG="@firebase/remote-config",ZG="@firebase/remote-config-compat",JG="@firebase/storage",eY="@firebase/storage-compat",tY="@firebase/firestore",nY="@firebase/vertexai-preview",rY="@firebase/firestore-compat",iY="firebase",sY="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aY="[DEFAULT]",oY={[SA]:"fire-core",[IG]:"fire-core-compat",[MG]:"fire-analytics",[OG]:"fire-analytics-compat",[LG]:"fire-app-check",[RG]:"fire-app-check-compat",[zG]:"fire-auth",[$G]:"fire-auth-compat",[FG]:"fire-rtdb",[VG]:"fire-data-connect",[BG]:"fire-rtdb-compat",[UG]:"fire-fn",[WG]:"fire-fn-compat",[HG]:"fire-iid",[qG]:"fire-iid-compat",[KG]:"fire-fcm",[GG]:"fire-fcm-compat",[YG]:"fire-perf",[QG]:"fire-perf-compat",[XG]:"fire-rc",[ZG]:"fire-rc-compat",[JG]:"fire-gcs",[eY]:"fire-gcs-compat",[tY]:"fire-fst",[rY]:"fire-fst-compat",[nY]:"fire-vertex","fire-js":"fire-js",[iY]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA=new Map,lY=new Map,EA=new Map;function Qk(t,e){try{t.container.addComponent(e)}catch(n){Po.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Df(t){const e=t.name;if(EA.has(e))return Po.debug(`There were multiple attempts to register component ${e}.`),!1;EA.set(e,t);for(const n of AA.values())Qk(n,t);for(const n of lY.values())Qk(n,t);return!0}function x$(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function xl(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cY={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},uu=new ev("app","Firebase",cY);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uY{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Eu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw uu.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x=sY;function dY(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:aY,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw uu.create("bad-app-name",{appName:String(i)});if(n||(n=GK()),!n)throw uu.create("no-options");const s=AA.get(i);if(s){if(Hm(n,s.options)&&Hm(r,s.config))return s;throw uu.create("duplicate-app",{appName:i})}const a=new mG(i);for(const c of EA.values())a.addComponent(c);const o=new uY(n,r,a);return AA.set(i,o),o}function Rl(t,e,n){var r;let i=(r=oY[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Po.warn(o.join(" "));return}Df(new Eu(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fY="firebase-heartbeat-database",hY=1,qm="firebase-heartbeat-store";let i_=null;function w$(){return i_||(i_=TG(fY,hY,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(qm)}catch(n){console.warn(n)}}}}).catch(t=>{throw uu.create("idb-open",{originalErrorMessage:t.message})})),i_}async function pY(t){try{const n=(await w$()).transaction(qm),r=await n.objectStore(qm).get(_$(t));return await n.done,r}catch(e){if(e instanceof $o)Po.warn(e.message);else{const n=uu.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Po.warn(n.message)}}}async function Xk(t,e){try{const r=(await w$()).transaction(qm,"readwrite");await r.objectStore(qm).put(e,_$(t)),await r.done}catch(n){if(n instanceof $o)Po.warn(n.message);else{const r=uu.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Po.warn(r.message)}}}function _$(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mY=1024,gY=30*24*60*60*1e3;class vY{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new bY(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Zk();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=gY}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Po.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Zk(),{heartbeatsToSend:r,unsentEntries:i}=yY(this._heartbeatsCache.heartbeats),s=m$(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Po.warn(n),""}}}function Zk(){return new Date().toISOString().substring(0,10)}function yY(t,e=mY){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Jk(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Jk(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class bY{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iG()?sG().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await pY(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Xk(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Xk(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Jk(t){return m$(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xY(t){Df(new Eu("platform-logger",e=>new kG(e),"PRIVATE")),Df(new Eu("heartbeat",e=>new vY(e),"PRIVATE")),Rl(SA,Yk,t),Rl(SA,Yk,"esm2017"),Rl("fire-js","")}xY("");function S$(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function A$(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wY=A$,E$=new ev("auth","Firebase",A$());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0=new Xj("@firebase/auth");function _Y(t,...e){R0.logLevel<=It.WARN&&R0.warn(`Auth (${$x}): ${t}`,...e)}function Yy(t,...e){R0.logLevel<=It.ERROR&&R0.error(`Auth (${$x}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(t,...e){throw eC(t,...e)}function Jj(t,...e){return eC(t,...e)}function j$(t,e,n){const r=Object.assign(Object.assign({},wY()),{[e]:n});return new ev("auth","Firebase",r).create(e,{appName:t.name})}function du(t){return j$(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function eC(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return E$.create(t,...e)}function $t(t,e,...n){if(!t)throw eC(e,...n)}function mo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Yy(e),new Error(e)}function L0(t,e){t||mo(e)}function SY(){return eD()==="http:"||eD()==="https:"}function eD(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AY(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(SY()||eG()||"connection"in navigator)?navigator.onLine:!0}function EY(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e,n){this.shortDelay=e,this.longDelay=n,L0(n>e,"Short delay should be less than long delay!"),this.isMobile=XK()||tG()}get(){return AY()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jY(t,e){L0(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C${static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;mo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;mo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;mo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CY={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TY=new tv(3e4,6e4);function Hu(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function qu(t,e,n,r,i={}){return T$(t,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const o=v$(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},s);return JK()||(u.referrerPolicy="no-referrer"),C$.fetch()(P$(t,t.config.apiHost,n,o),u)})}async function T$(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},CY),e);try{const i=new NY(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw ny(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ny(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw ny(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw ny(t,"user-disabled",a);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw j$(t,d,u);If(t,d)}}catch(i){if(i instanceof $o)throw i;If(t,"network-request-failed",{message:String(i)})}}async function Fx(t,e,n,r,i={}){const s=await qu(t,e,n,r,i);return"mfaPendingCredential"in s&&If(t,"multi-factor-auth-required",{_serverResponse:s}),s}function P$(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?jY(t.config,i):`${t.config.apiScheme}://${i}`}function PY(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NY{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Jj(this.auth,"network-request-failed")),TY.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ny(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Jj(t,e,r);return i.customData._tokenResponse=n,i}function tD(t){return t!==void 0&&t.enterprise!==void 0}class kY{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return PY(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function DY(t,e){return qu(t,"GET","/v2/recaptchaConfig",Hu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IY(t,e){return qu(t,"POST","/v1/accounts:delete",e)}async function N$(t,e){return qu(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function OY(t,e=!1){const n=ti(t),r=await n.getIdToken(e),i=k$(r);$t(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:im(s_(i.auth_time)),issuedAtTime:im(s_(i.iat)),expirationTime:im(s_(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function s_(t){return Number(t)*1e3}function k$(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Yy("JWT malformed, contained fewer than 3 sections"),null;try{const i=g$(n);return i?JSON.parse(i):(Yy("Failed to decode base64 JWT payload"),null)}catch(i){return Yy("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function nD(t){const e=k$(t);return $t(e,"internal-error"),$t(typeof e.exp<"u","internal-error"),$t(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jA(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof $o&&MY(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function MY({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RY{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=im(this.lastLoginAt),this.creationTime=im(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z0(t){var e;const n=t.auth,r=await t.getIdToken(),i=await jA(t,N$(n,{idToken:r}));$t(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?D$(s.providerUserInfo):[],o=zY(t.providerData,a),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=c?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new CA(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function LY(t){const e=ti(t);await z0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zY(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function D$(t){return t.map(e=>{var{providerId:n}=e,r=S$(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $Y(t,e){const n=await T$(t,{},async()=>{const r=v$({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=P$(t,i,"/v1/token",`key=${s}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",C$.fetch()(a,{method:"POST",headers:o,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function FY(t,e){return qu(t,"POST","/v2/accounts:revokeToken",Hu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$t(e.idToken,"internal-error"),$t(typeof e.idToken<"u","internal-error"),$t(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nD(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){$t(e.length!==0,"internal-error");const n=nD(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:($t(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await $Y(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,a=new gf;return r&&($t(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&($t(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&($t(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new gf,this.toJSON())}_performRefresh(){return mo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(t,e){$t(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class go{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=S$(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new RY(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new CA(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await jA(this,this.stsTokenManager.getToken(this.auth,e));return $t(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return OY(this,e)}reload(){return LY(this)}_assign(e){this!==e&&($t(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new go(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){$t(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await z0(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xl(this.auth.app))return Promise.reject(du(this.auth));const e=await this.getIdToken();return await jA(this,IY(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,a,o,c,u,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,m=(a=n.photoURL)!==null&&a!==void 0?a:void 0,g=(o=n.tenantId)!==null&&o!==void 0?o:void 0,b=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,x=(u=n.createdAt)!==null&&u!==void 0?u:void 0,w=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:_,emailVerified:E,isAnonymous:j,providerData:T,stsTokenManager:A}=n;$t(_&&A,e,"internal-error");const C=gf.fromJSON(this.name,A);$t(typeof _=="string",e,"internal-error"),al(f,e.name),al(h,e.name),$t(typeof E=="boolean",e,"internal-error"),$t(typeof j=="boolean",e,"internal-error"),al(p,e.name),al(m,e.name),al(g,e.name),al(b,e.name),al(x,e.name),al(w,e.name);const D=new go({uid:_,auth:e,email:h,emailVerified:E,displayName:f,isAnonymous:j,photoURL:m,phoneNumber:p,tenantId:g,stsTokenManager:C,createdAt:x,lastLoginAt:w});return T&&Array.isArray(T)&&(D.providerData=T.map(O=>Object.assign({},O))),b&&(D._redirectEventId=b),D}static async _fromIdTokenResponse(e,n,r=!1){const i=new gf;i.updateFromServerResponse(n);const s=new go({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await z0(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];$t(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?D$(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new gf;o.updateFromIdToken(r);const c=new go({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new CA(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=new Map;function Jc(t){L0(t instanceof Function,"Expected a class definition");let e=rD.get(t);return e?(L0(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,rD.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I${constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}I$.type="NONE";const iD=I$;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a_(t,e,n){return`firebase:${t}:${e}:${n}`}class vf{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=a_(this.userKey,i.apiKey,s),this.fullPersistenceKey=a_("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?go._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new vf(Jc(iD),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Jc(iD);const a=a_(r,e.config.apiKey,e.name);let o=null;for(const u of n)try{const d=await u._get(a);if(d){const f=go._fromJSON(e,d);u!==s&&(o=f),s=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new vf(s,e,r):(s=c[0],o&&await s._set(a,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new vf(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(O$(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(VY(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(R$(e))return"Blackberry";if(L$(e))return"Webos";if(BY(e))return"Safari";if((e.includes("chrome/")||UY(e))&&!e.includes("edge/"))return"Chrome";if(M$(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function VY(t=Ui()){return/firefox\//i.test(t)}function BY(t=Ui()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function UY(t=Ui()){return/crios\//i.test(t)}function O$(t=Ui()){return/iemobile/i.test(t)}function M$(t=Ui()){return/android/i.test(t)}function R$(t=Ui()){return/blackberry/i.test(t)}function L$(t=Ui()){return/webos/i.test(t)}function WY(t=Ui()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function HY(){return nG()&&document.documentMode===10}function qY(t=Ui()){return WY(t)||M$(t)||L$(t)||R$(t)||/windows phone/i.test(t)||O$(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z$(t,e=[]){let n;switch(t){case"Browser":n=sD(Ui());break;case"Worker":n=`${sD(Ui())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${$x}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KY{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((a,o)=>{try{const c=e(s);a(c)}catch(c){o(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GY(t,e={}){return qu(t,"GET","/v2/passwordPolicy",Hu(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YY=6;class QY{constructor(e){var n,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:YY,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,a,o;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(o=c.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XY{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new aD(this),this.idTokenSubscription=new aD(this),this.beforeStateQueue=new KY(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=E$,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Jc(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await vf.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await N$(this,{idToken:e}),r=await go._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(xl(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return $t(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await z0(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=EY()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xl(this.app))return Promise.reject(du(this));const n=e?ti(e):null;return n&&$t(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&$t(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xl(this.app)?Promise.reject(du(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xl(this.app)?Promise.reject(du(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Jc(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GY(this),n=new QY(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ev("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await FY(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Jc(e)||this._popupRedirectResolver;$t(n,this,"argument-error"),this.redirectPersistenceManager=await vf.create(this,[Jc(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if($t(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $t(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=z$(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&_Y(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function nv(t){return ti(t)}class aD{constructor(e){this.auth=e,this.observer=null,this.addObserver=cG(n=>this.observer=n)}get next(){return $t(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tC={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZY(t){tC=t}function JY(t){return tC.loadJS(t)}function eQ(){return tC.recaptchaEnterpriseScript}const tQ="recaptcha-enterprise",nQ="NO_RECAPTCHA";class rQ{constructor(e){this.type=tQ,this.auth=nv(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{DY(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new kY(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,a(u.siteKey)}}).catch(c=>{o(c)})})}function i(s,a,o){const c=window.grecaptcha;tD(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{a(u)}).catch(()=>{a(nQ)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{r(this.auth).then(o=>{if(!n&&tD(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=eQ();c.length!==0&&(c+=o),JY(c).then(()=>{i(o,s,a)}).catch(u=>{a(u)})}}).catch(o=>{a(o)})})}}async function oD(t,e,n,r=!1){const i=new rQ(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function TA(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await oD(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await oD(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iQ(t,e){const n=x$(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Hm(s,e??{}))return i;If(i,"already-initialized")}return n.initialize({options:e})}function sQ(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Jc);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aQ{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return mo("not implemented")}_getIdTokenResponse(e){return mo("not implemented")}_linkToIdToken(e,n){return mo("not implemented")}_getReauthenticationResolver(e){return mo("not implemented")}}async function oQ(t,e){return qu(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lQ(t,e){return Fx(t,"POST","/v1/accounts:signInWithPassword",Hu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cQ(t,e){return Fx(t,"POST","/v1/accounts:signInWithEmailLink",Hu(t,e))}async function uQ(t,e){return Fx(t,"POST","/v1/accounts:signInWithEmailLink",Hu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km extends aQ{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Km(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Km(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return TA(e,n,"signInWithPassword",lQ);case"emailLink":return cQ(e,{email:this._email,oobCode:this._password});default:If(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return TA(e,r,"signUpPassword",oQ);case"emailLink":return uQ(e,{idToken:n,email:this._email,oobCode:this._password});default:If(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dQ(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function fQ(t){const e=$p(Fp(t)).link,n=e?$p(Fp(e)).deep_link_id:null,r=$p(Fp(t)).deep_link_id;return(r?$p(Fp(r)).link:null)||r||n||e||t}class nC{constructor(e){var n,r,i,s,a,o;const c=$p(Fp(e)),u=(n=c.apiKey)!==null&&n!==void 0?n:null,d=(r=c.oobCode)!==null&&r!==void 0?r:null,f=dQ((i=c.mode)!==null&&i!==void 0?i:null);$t(u&&d&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=d,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=c.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=c.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const n=fQ(e);try{return new nC(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(){this.providerId=Ch.PROVIDER_ID}static credential(e,n){return Km._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=nC.parseLink(n);return $t(r,"argument-error"),Km._fromEmailAndCode(e,r.code,r.tenantId)}}Ch.PROVIDER_ID="password";Ch.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ch.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hQ(t,e){return Fx(t,"POST","/v1/accounts:signUp",Hu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await go._fromIdTokenResponse(e,r,i),a=lD(r);return new Gm({user:s,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=lD(r);return new Gm({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function lD(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0 extends $o{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,$0.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new $0(e,n,r,i)}}function pQ(t,e,n,r){return n._getIdTokenResponse(t).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?$0._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mQ(t,e,n=!1){if(xl(t.app))return Promise.reject(du(t));const r="signIn",i=await pQ(t,r,e),s=await Gm._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function gQ(t,e){return mQ(nv(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $$(t){const e=nv(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function vQ(t,e,n){if(xl(t.app))return Promise.reject(du(t));const r=nv(t),a=await TA(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",hQ).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&$$(t),c}),o=await Gm._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(o.user),o}function yQ(t,e,n){return xl(t.app)?Promise.reject(du(t)):gQ(ti(t),Ch.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&$$(t),r})}function bQ(t,e,n,r){return ti(t).onAuthStateChanged(e,n,r)}const cD="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F${constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(cD,"1"),this.storage.removeItem(cD),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xQ=1e3,wQ=10;class V$ extends F${constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qY(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,o,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);HY()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,wQ):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},xQ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}V$.type="LOCAL";const _Q=V$;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SQ extends F${constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}SQ.type="SESSION";new tv(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new tv(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new tv(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new tv(5e3,15e3);var uD="@firebase/auth",dD="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AQ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){$t(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EQ(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jQ(t){Df(new Eu("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;$t(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:z$(t)},u=new XY(r,i,s,c);return sQ(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Df(new Eu("auth-internal",e=>{const n=nv(e.getProvider("auth").getImmediate());return(r=>new AQ(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rl(uD,dD,EQ(t)),Rl(uD,dD,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CQ=5*60;YK("authIdTokenMaxAge");function TQ(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}ZY({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Jj("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",TQ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jQ("Browser");var PQ="firebase",NQ="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rl(PQ,NQ,"app");var fD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fu,B$;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,C){function D(){}D.prototype=C.prototype,A.D=C.prototype,A.prototype=new D,A.prototype.constructor=A,A.C=function(O,L,z){for(var M=Array(arguments.length-2),G=2;G<arguments.length;G++)M[G-2]=arguments[G];return C.prototype[L].apply(O,M)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,C,D){D||(D=0);var O=Array(16);if(typeof C=="string")for(var L=0;16>L;++L)O[L]=C.charCodeAt(D++)|C.charCodeAt(D++)<<8|C.charCodeAt(D++)<<16|C.charCodeAt(D++)<<24;else for(L=0;16>L;++L)O[L]=C[D++]|C[D++]<<8|C[D++]<<16|C[D++]<<24;C=A.g[0],D=A.g[1],L=A.g[2];var z=A.g[3],M=C+(z^D&(L^z))+O[0]+3614090360&4294967295;C=D+(M<<7&4294967295|M>>>25),M=z+(L^C&(D^L))+O[1]+3905402710&4294967295,z=C+(M<<12&4294967295|M>>>20),M=L+(D^z&(C^D))+O[2]+606105819&4294967295,L=z+(M<<17&4294967295|M>>>15),M=D+(C^L&(z^C))+O[3]+3250441966&4294967295,D=L+(M<<22&4294967295|M>>>10),M=C+(z^D&(L^z))+O[4]+4118548399&4294967295,C=D+(M<<7&4294967295|M>>>25),M=z+(L^C&(D^L))+O[5]+1200080426&4294967295,z=C+(M<<12&4294967295|M>>>20),M=L+(D^z&(C^D))+O[6]+2821735955&4294967295,L=z+(M<<17&4294967295|M>>>15),M=D+(C^L&(z^C))+O[7]+4249261313&4294967295,D=L+(M<<22&4294967295|M>>>10),M=C+(z^D&(L^z))+O[8]+1770035416&4294967295,C=D+(M<<7&4294967295|M>>>25),M=z+(L^C&(D^L))+O[9]+2336552879&4294967295,z=C+(M<<12&4294967295|M>>>20),M=L+(D^z&(C^D))+O[10]+4294925233&4294967295,L=z+(M<<17&4294967295|M>>>15),M=D+(C^L&(z^C))+O[11]+2304563134&4294967295,D=L+(M<<22&4294967295|M>>>10),M=C+(z^D&(L^z))+O[12]+1804603682&4294967295,C=D+(M<<7&4294967295|M>>>25),M=z+(L^C&(D^L))+O[13]+4254626195&4294967295,z=C+(M<<12&4294967295|M>>>20),M=L+(D^z&(C^D))+O[14]+2792965006&4294967295,L=z+(M<<17&4294967295|M>>>15),M=D+(C^L&(z^C))+O[15]+1236535329&4294967295,D=L+(M<<22&4294967295|M>>>10),M=C+(L^z&(D^L))+O[1]+4129170786&4294967295,C=D+(M<<5&4294967295|M>>>27),M=z+(D^L&(C^D))+O[6]+3225465664&4294967295,z=C+(M<<9&4294967295|M>>>23),M=L+(C^D&(z^C))+O[11]+643717713&4294967295,L=z+(M<<14&4294967295|M>>>18),M=D+(z^C&(L^z))+O[0]+3921069994&4294967295,D=L+(M<<20&4294967295|M>>>12),M=C+(L^z&(D^L))+O[5]+3593408605&4294967295,C=D+(M<<5&4294967295|M>>>27),M=z+(D^L&(C^D))+O[10]+38016083&4294967295,z=C+(M<<9&4294967295|M>>>23),M=L+(C^D&(z^C))+O[15]+3634488961&4294967295,L=z+(M<<14&4294967295|M>>>18),M=D+(z^C&(L^z))+O[4]+3889429448&4294967295,D=L+(M<<20&4294967295|M>>>12),M=C+(L^z&(D^L))+O[9]+568446438&4294967295,C=D+(M<<5&4294967295|M>>>27),M=z+(D^L&(C^D))+O[14]+3275163606&4294967295,z=C+(M<<9&4294967295|M>>>23),M=L+(C^D&(z^C))+O[3]+4107603335&4294967295,L=z+(M<<14&4294967295|M>>>18),M=D+(z^C&(L^z))+O[8]+1163531501&4294967295,D=L+(M<<20&4294967295|M>>>12),M=C+(L^z&(D^L))+O[13]+2850285829&4294967295,C=D+(M<<5&4294967295|M>>>27),M=z+(D^L&(C^D))+O[2]+4243563512&4294967295,z=C+(M<<9&4294967295|M>>>23),M=L+(C^D&(z^C))+O[7]+1735328473&4294967295,L=z+(M<<14&4294967295|M>>>18),M=D+(z^C&(L^z))+O[12]+2368359562&4294967295,D=L+(M<<20&4294967295|M>>>12),M=C+(D^L^z)+O[5]+4294588738&4294967295,C=D+(M<<4&4294967295|M>>>28),M=z+(C^D^L)+O[8]+2272392833&4294967295,z=C+(M<<11&4294967295|M>>>21),M=L+(z^C^D)+O[11]+1839030562&4294967295,L=z+(M<<16&4294967295|M>>>16),M=D+(L^z^C)+O[14]+4259657740&4294967295,D=L+(M<<23&4294967295|M>>>9),M=C+(D^L^z)+O[1]+2763975236&4294967295,C=D+(M<<4&4294967295|M>>>28),M=z+(C^D^L)+O[4]+1272893353&4294967295,z=C+(M<<11&4294967295|M>>>21),M=L+(z^C^D)+O[7]+4139469664&4294967295,L=z+(M<<16&4294967295|M>>>16),M=D+(L^z^C)+O[10]+3200236656&4294967295,D=L+(M<<23&4294967295|M>>>9),M=C+(D^L^z)+O[13]+681279174&4294967295,C=D+(M<<4&4294967295|M>>>28),M=z+(C^D^L)+O[0]+3936430074&4294967295,z=C+(M<<11&4294967295|M>>>21),M=L+(z^C^D)+O[3]+3572445317&4294967295,L=z+(M<<16&4294967295|M>>>16),M=D+(L^z^C)+O[6]+76029189&4294967295,D=L+(M<<23&4294967295|M>>>9),M=C+(D^L^z)+O[9]+3654602809&4294967295,C=D+(M<<4&4294967295|M>>>28),M=z+(C^D^L)+O[12]+3873151461&4294967295,z=C+(M<<11&4294967295|M>>>21),M=L+(z^C^D)+O[15]+530742520&4294967295,L=z+(M<<16&4294967295|M>>>16),M=D+(L^z^C)+O[2]+3299628645&4294967295,D=L+(M<<23&4294967295|M>>>9),M=C+(L^(D|~z))+O[0]+4096336452&4294967295,C=D+(M<<6&4294967295|M>>>26),M=z+(D^(C|~L))+O[7]+1126891415&4294967295,z=C+(M<<10&4294967295|M>>>22),M=L+(C^(z|~D))+O[14]+2878612391&4294967295,L=z+(M<<15&4294967295|M>>>17),M=D+(z^(L|~C))+O[5]+4237533241&4294967295,D=L+(M<<21&4294967295|M>>>11),M=C+(L^(D|~z))+O[12]+1700485571&4294967295,C=D+(M<<6&4294967295|M>>>26),M=z+(D^(C|~L))+O[3]+2399980690&4294967295,z=C+(M<<10&4294967295|M>>>22),M=L+(C^(z|~D))+O[10]+4293915773&4294967295,L=z+(M<<15&4294967295|M>>>17),M=D+(z^(L|~C))+O[1]+2240044497&4294967295,D=L+(M<<21&4294967295|M>>>11),M=C+(L^(D|~z))+O[8]+1873313359&4294967295,C=D+(M<<6&4294967295|M>>>26),M=z+(D^(C|~L))+O[15]+4264355552&4294967295,z=C+(M<<10&4294967295|M>>>22),M=L+(C^(z|~D))+O[6]+2734768916&4294967295,L=z+(M<<15&4294967295|M>>>17),M=D+(z^(L|~C))+O[13]+1309151649&4294967295,D=L+(M<<21&4294967295|M>>>11),M=C+(L^(D|~z))+O[4]+4149444226&4294967295,C=D+(M<<6&4294967295|M>>>26),M=z+(D^(C|~L))+O[11]+3174756917&4294967295,z=C+(M<<10&4294967295|M>>>22),M=L+(C^(z|~D))+O[2]+718787259&4294967295,L=z+(M<<15&4294967295|M>>>17),M=D+(z^(L|~C))+O[9]+3951481745&4294967295,A.g[0]=A.g[0]+C&4294967295,A.g[1]=A.g[1]+(L+(M<<21&4294967295|M>>>11))&4294967295,A.g[2]=A.g[2]+L&4294967295,A.g[3]=A.g[3]+z&4294967295}r.prototype.u=function(A,C){C===void 0&&(C=A.length);for(var D=C-this.blockSize,O=this.B,L=this.h,z=0;z<C;){if(L==0)for(;z<=D;)i(this,A,z),z+=this.blockSize;if(typeof A=="string"){for(;z<C;)if(O[L++]=A.charCodeAt(z++),L==this.blockSize){i(this,O),L=0;break}}else for(;z<C;)if(O[L++]=A[z++],L==this.blockSize){i(this,O),L=0;break}}this.h=L,this.o+=C},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var C=1;C<A.length-8;++C)A[C]=0;var D=8*this.o;for(C=A.length-8;C<A.length;++C)A[C]=D&255,D/=256;for(this.u(A),A=Array(16),C=D=0;4>C;++C)for(var O=0;32>O;O+=8)A[D++]=this.g[C]>>>O&255;return A};function s(A,C){var D=o;return Object.prototype.hasOwnProperty.call(D,A)?D[A]:D[A]=C(A)}function a(A,C){this.h=C;for(var D=[],O=!0,L=A.length-1;0<=L;L--){var z=A[L]|0;O&&z==C||(D[L]=z,O=!1)}this.g=D}var o={};function c(A){return-128<=A&&128>A?s(A,function(C){return new a([C|0],0>C?-1:0)}):new a([A|0],0>A?-1:0)}function u(A){if(isNaN(A)||!isFinite(A))return f;if(0>A)return b(u(-A));for(var C=[],D=1,O=0;A>=D;O++)C[O]=A/D|0,D*=4294967296;return new a(C,0)}function d(A,C){if(A.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(A.charAt(0)=="-")return b(d(A.substring(1),C));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=u(Math.pow(C,8)),O=f,L=0;L<A.length;L+=8){var z=Math.min(8,A.length-L),M=parseInt(A.substring(L,L+z),C);8>z?(z=u(Math.pow(C,z)),O=O.j(z).add(u(M))):(O=O.j(D),O=O.add(u(M)))}return O}var f=c(0),h=c(1),p=c(16777216);t=a.prototype,t.m=function(){if(g(this))return-b(this).m();for(var A=0,C=1,D=0;D<this.g.length;D++){var O=this.i(D);A+=(0<=O?O:4294967296+O)*C,C*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(m(this))return"0";if(g(this))return"-"+b(this).toString(A);for(var C=u(Math.pow(A,6)),D=this,O="";;){var L=E(D,C).g;D=x(D,L.j(C));var z=((0<D.g.length?D.g[0]:D.h)>>>0).toString(A);if(D=L,m(D))return z+O;for(;6>z.length;)z="0"+z;O=z+O}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function m(A){if(A.h!=0)return!1;for(var C=0;C<A.g.length;C++)if(A.g[C]!=0)return!1;return!0}function g(A){return A.h==-1}t.l=function(A){return A=x(this,A),g(A)?-1:m(A)?0:1};function b(A){for(var C=A.g.length,D=[],O=0;O<C;O++)D[O]=~A.g[O];return new a(D,~A.h).add(h)}t.abs=function(){return g(this)?b(this):this},t.add=function(A){for(var C=Math.max(this.g.length,A.g.length),D=[],O=0,L=0;L<=C;L++){var z=O+(this.i(L)&65535)+(A.i(L)&65535),M=(z>>>16)+(this.i(L)>>>16)+(A.i(L)>>>16);O=M>>>16,z&=65535,M&=65535,D[L]=M<<16|z}return new a(D,D[D.length-1]&-2147483648?-1:0)};function x(A,C){return A.add(b(C))}t.j=function(A){if(m(this)||m(A))return f;if(g(this))return g(A)?b(this).j(b(A)):b(b(this).j(A));if(g(A))return b(this.j(b(A)));if(0>this.l(p)&&0>A.l(p))return u(this.m()*A.m());for(var C=this.g.length+A.g.length,D=[],O=0;O<2*C;O++)D[O]=0;for(O=0;O<this.g.length;O++)for(var L=0;L<A.g.length;L++){var z=this.i(O)>>>16,M=this.i(O)&65535,G=A.i(L)>>>16,K=A.i(L)&65535;D[2*O+2*L]+=M*K,w(D,2*O+2*L),D[2*O+2*L+1]+=z*K,w(D,2*O+2*L+1),D[2*O+2*L+1]+=M*G,w(D,2*O+2*L+1),D[2*O+2*L+2]+=z*G,w(D,2*O+2*L+2)}for(O=0;O<C;O++)D[O]=D[2*O+1]<<16|D[2*O];for(O=C;O<2*C;O++)D[O]=0;return new a(D,0)};function w(A,C){for(;(A[C]&65535)!=A[C];)A[C+1]+=A[C]>>>16,A[C]&=65535,C++}function _(A,C){this.g=A,this.h=C}function E(A,C){if(m(C))throw Error("division by zero");if(m(A))return new _(f,f);if(g(A))return C=E(b(A),C),new _(b(C.g),b(C.h));if(g(C))return C=E(A,b(C)),new _(b(C.g),C.h);if(30<A.g.length){if(g(A)||g(C))throw Error("slowDivide_ only works with positive integers.");for(var D=h,O=C;0>=O.l(A);)D=j(D),O=j(O);var L=T(D,1),z=T(O,1);for(O=T(O,2),D=T(D,2);!m(O);){var M=z.add(O);0>=M.l(A)&&(L=L.add(D),z=M),O=T(O,1),D=T(D,1)}return C=x(A,L.j(C)),new _(L,C)}for(L=f;0<=A.l(C);){for(D=Math.max(1,Math.floor(A.m()/C.m())),O=Math.ceil(Math.log(D)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),z=u(D),M=z.j(C);g(M)||0<M.l(A);)D-=O,z=u(D),M=z.j(C);m(z)&&(z=h),L=L.add(z),A=x(A,M)}return new _(L,A)}t.A=function(A){return E(this,A).h},t.and=function(A){for(var C=Math.max(this.g.length,A.g.length),D=[],O=0;O<C;O++)D[O]=this.i(O)&A.i(O);return new a(D,this.h&A.h)},t.or=function(A){for(var C=Math.max(this.g.length,A.g.length),D=[],O=0;O<C;O++)D[O]=this.i(O)|A.i(O);return new a(D,this.h|A.h)},t.xor=function(A){for(var C=Math.max(this.g.length,A.g.length),D=[],O=0;O<C;O++)D[O]=this.i(O)^A.i(O);return new a(D,this.h^A.h)};function j(A){for(var C=A.g.length+1,D=[],O=0;O<C;O++)D[O]=A.i(O)<<1|A.i(O-1)>>>31;return new a(D,A.h)}function T(A,C){var D=C>>5;C%=32;for(var O=A.g.length-D,L=[],z=0;z<O;z++)L[z]=0<C?A.i(z+D)>>>C|A.i(z+D+1)<<32-C:A.i(z+D);return new a(L,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,B$=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=d,fu=a}).apply(typeof fD<"u"?fD:typeof self<"u"?self:typeof window<"u"?window:{});var ry=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var U$,Vp,W$,Qy,PA,H$,q$,K$;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(v,k,R){return v==Array.prototype||v==Object.prototype||(v[k]=R.value),v};function n(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof ry=="object"&&ry];for(var k=0;k<v.length;++k){var R=v[k];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var r=n(this);function i(v,k){if(k)e:{var R=r;v=v.split(".");for(var W=0;W<v.length-1;W++){var ue=v[W];if(!(ue in R))break e;R=R[ue]}v=v[v.length-1],W=R[v],k=k(W),k!=W&&k!=null&&e(R,v,{configurable:!0,writable:!0,value:k})}}function s(v,k){v instanceof String&&(v+="");var R=0,W=!1,ue={next:function(){if(!W&&R<v.length){var be=R++;return{value:k(be,v[be]),done:!1}}return W=!0,{done:!0,value:void 0}}};return ue[Symbol.iterator]=function(){return ue},ue}i("Array.prototype.values",function(v){return v||function(){return s(this,function(k,R){return R})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function c(v){var k=typeof v;return k=k!="object"?k:v?Array.isArray(v)?"array":k:"null",k=="array"||k=="object"&&typeof v.length=="number"}function u(v){var k=typeof v;return k=="object"&&v!=null||k=="function"}function d(v,k,R){return v.call.apply(v.bind,arguments)}function f(v,k,R){if(!v)throw Error();if(2<arguments.length){var W=Array.prototype.slice.call(arguments,2);return function(){var ue=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ue,W),v.apply(k,ue)}}return function(){return v.apply(k,arguments)}}function h(v,k,R){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,h.apply(null,arguments)}function p(v,k){var R=Array.prototype.slice.call(arguments,1);return function(){var W=R.slice();return W.push.apply(W,arguments),v.apply(this,W)}}function m(v,k){function R(){}R.prototype=k.prototype,v.aa=k.prototype,v.prototype=new R,v.prototype.constructor=v,v.Qb=function(W,ue,be){for(var Ie=Array(arguments.length-2),Xt=2;Xt<arguments.length;Xt++)Ie[Xt-2]=arguments[Xt];return k.prototype[ue].apply(W,Ie)}}function g(v){const k=v.length;if(0<k){const R=Array(k);for(let W=0;W<k;W++)R[W]=v[W];return R}return[]}function b(v,k){for(let R=1;R<arguments.length;R++){const W=arguments[R];if(c(W)){const ue=v.length||0,be=W.length||0;v.length=ue+be;for(let Ie=0;Ie<be;Ie++)v[ue+Ie]=W[Ie]}else v.push(W)}}class x{constructor(k,R){this.i=k,this.j=R,this.h=0,this.g=null}get(){let k;return 0<this.h?(this.h--,k=this.g,this.g=k.next,k.next=null):k=this.i(),k}}function w(v){return/^[\s\xa0]*$/.test(v)}function _(){var v=o.navigator;return v&&(v=v.userAgent)?v:""}function E(v){return E[" "](v),v}E[" "]=function(){};var j=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function T(v,k,R){for(const W in v)k.call(R,v[W],W,v)}function A(v,k){for(const R in v)k.call(void 0,v[R],R,v)}function C(v){const k={};for(const R in v)k[R]=v[R];return k}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(v,k){let R,W;for(let ue=1;ue<arguments.length;ue++){W=arguments[ue];for(R in W)v[R]=W[R];for(let be=0;be<D.length;be++)R=D[be],Object.prototype.hasOwnProperty.call(W,R)&&(v[R]=W[R])}}function L(v){var k=1;v=v.split(":");const R=[];for(;0<k&&v.length;)R.push(v.shift()),k--;return v.length&&R.push(v.join(":")),R}function z(v){o.setTimeout(()=>{throw v},0)}function M(){var v=q;let k=null;return v.g&&(k=v.g,v.g=v.g.next,v.g||(v.h=null),k.next=null),k}class G{constructor(){this.h=this.g=null}add(k,R){const W=K.get();W.set(k,R),this.h?this.h.next=W:this.g=W,this.h=W}}var K=new x(()=>new B,v=>v.reset());class B{constructor(){this.next=this.g=this.h=null}set(k,R){this.h=k,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let U,F=!1,q=new G,Z=()=>{const v=o.Promise.resolve(void 0);U=()=>{v.then(re)}};var re=()=>{for(var v;v=M();){try{v.h.call(v.g)}catch(R){z(R)}var k=K;k.j(v),100>k.h&&(k.h++,v.next=k.g,k.g=v)}F=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(v,k){this.type=v,this.g=this.target=k,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var De=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var v=!1,k=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const R=()=>{};o.addEventListener("test",R,k),o.removeEventListener("test",R,k)}catch{}return v}();function We(v,k){if(ye.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v){var R=this.type=v.type,W=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;if(this.target=v.target||v.srcElement,this.g=k,k=v.relatedTarget){if(j){e:{try{E(k.nodeName);var ue=!0;break e}catch{}ue=!1}ue||(k=null)}}else R=="mouseover"?k=v.fromElement:R=="mouseout"&&(k=v.toElement);this.relatedTarget=k,W?(this.clientX=W.clientX!==void 0?W.clientX:W.pageX,this.clientY=W.clientY!==void 0?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=typeof v.pointerType=="string"?v.pointerType:Je[v.pointerType]||"",this.state=v.state,this.i=v,v.defaultPrevented&&We.aa.h.call(this)}}m(We,ye);var Je={2:"touch",3:"pen",4:"mouse"};We.prototype.h=function(){We.aa.h.call(this);var v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var jt="closure_listenable_"+(1e6*Math.random()|0),dt=0;function xe(v,k,R,W,ue){this.listener=v,this.proxy=null,this.src=k,this.type=R,this.capture=!!W,this.ha=ue,this.key=++dt,this.da=this.fa=!1}function Ye(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function Qe(v){this.src=v,this.g={},this.h=0}Qe.prototype.add=function(v,k,R,W,ue){var be=v.toString();v=this.g[be],v||(v=this.g[be]=[],this.h++);var Ie=pt(v,k,W,ue);return-1<Ie?(k=v[Ie],R||(k.fa=!1)):(k=new xe(k,this.src,be,!!W,ue),k.fa=R,v.push(k)),k};function fe(v,k){var R=k.type;if(R in v.g){var W=v.g[R],ue=Array.prototype.indexOf.call(W,k,void 0),be;(be=0<=ue)&&Array.prototype.splice.call(W,ue,1),be&&(Ye(k),v.g[R].length==0&&(delete v.g[R],v.h--))}}function pt(v,k,R,W){for(var ue=0;ue<v.length;++ue){var be=v[ue];if(!be.da&&be.listener==k&&be.capture==!!R&&be.ha==W)return ue}return-1}var ft="closure_lm_"+(1e6*Math.random()|0),Le={};function Ve(v,k,R,W,ue){if(Array.isArray(k)){for(var be=0;be<k.length;be++)Ve(v,k[be],R,W,ue);return null}return R=rt(R),v&&v[jt]?v.K(k,R,u(W)?!!W.capture:!1,ue):cn(v,k,R,!1,W,ue)}function cn(v,k,R,W,ue,be){if(!k)throw Error("Invalid event type");var Ie=u(ue)?!!ue.capture:!!ue,Xt=rr(v);if(Xt||(v[ft]=Xt=new Qe(v)),R=Xt.add(k,R,W,Ie,be),R.proxy)return R;if(W=gr(),R.proxy=W,W.src=v,W.listener=R,v.addEventListener)De||(ue=Ie),ue===void 0&&(ue=!1),v.addEventListener(k.toString(),W,ue);else if(v.attachEvent)v.attachEvent(Ut(k.toString()),W);else if(v.addListener&&v.removeListener)v.addListener(W);else throw Error("addEventListener and attachEvent are unavailable.");return R}function gr(){function v(R){return k.call(v.src,v.listener,R)}const k=vr;return v}function Cr(v,k,R,W,ue){if(Array.isArray(k))for(var be=0;be<k.length;be++)Cr(v,k[be],R,W,ue);else W=u(W)?!!W.capture:!!W,R=rt(R),v&&v[jt]?(v=v.i,k=String(k).toString(),k in v.g&&(be=v.g[k],R=pt(be,R,W,ue),-1<R&&(Ye(be[R]),Array.prototype.splice.call(be,R,1),be.length==0&&(delete v.g[k],v.h--)))):v&&(v=rr(v))&&(k=v.g[k.toString()],v=-1,k&&(v=pt(k,R,W,ue)),(R=-1<v?k[v]:null)&&Hn(R))}function Hn(v){if(typeof v!="number"&&v&&!v.da){var k=v.src;if(k&&k[jt])fe(k.i,v);else{var R=v.type,W=v.proxy;k.removeEventListener?k.removeEventListener(R,W,v.capture):k.detachEvent?k.detachEvent(Ut(R),W):k.addListener&&k.removeListener&&k.removeListener(W),(R=rr(k))?(fe(R,v),R.h==0&&(R.src=null,k[ft]=null)):Ye(v)}}}function Ut(v){return v in Le?Le[v]:Le[v]="on"+v}function vr(v,k){if(v.da)v=!0;else{k=new We(k,this);var R=v.listener,W=v.ha||v.src;v.fa&&Hn(v),v=R.call(W,k)}return v}function rr(v){return v=v[ft],v instanceof Qe?v:null}var Me="__closure_events_fn_"+(1e9*Math.random()>>>0);function rt(v){return typeof v=="function"?v:(v[Me]||(v[Me]=function(k){return v.handleEvent(k)}),v[Me])}function Ct(){he.call(this),this.i=new Qe(this),this.M=this,this.F=null}m(Ct,he),Ct.prototype[jt]=!0,Ct.prototype.removeEventListener=function(v,k,R,W){Cr(this,v,k,R,W)};function un(v,k){var R,W=v.F;if(W)for(R=[];W;W=W.F)R.push(W);if(v=v.M,W=k.type||k,typeof k=="string")k=new ye(k,v);else if(k instanceof ye)k.target=k.target||v;else{var ue=k;k=new ye(W,v),O(k,ue)}if(ue=!0,R)for(var be=R.length-1;0<=be;be--){var Ie=k.g=R[be];ue=Hi(Ie,W,!0,k)&&ue}if(Ie=k.g=v,ue=Hi(Ie,W,!0,k)&&ue,ue=Hi(Ie,W,!1,k)&&ue,R)for(be=0;be<R.length;be++)Ie=k.g=R[be],ue=Hi(Ie,W,!1,k)&&ue}Ct.prototype.N=function(){if(Ct.aa.N.call(this),this.i){var v=this.i,k;for(k in v.g){for(var R=v.g[k],W=0;W<R.length;W++)Ye(R[W]);delete v.g[k],v.h--}}this.F=null},Ct.prototype.K=function(v,k,R,W){return this.i.add(String(v),k,!1,R,W)},Ct.prototype.L=function(v,k,R,W){return this.i.add(String(v),k,!0,R,W)};function Hi(v,k,R,W){if(k=v.i.g[String(k)],!k)return!0;k=k.concat();for(var ue=!0,be=0;be<k.length;++be){var Ie=k[be];if(Ie&&!Ie.da&&Ie.capture==R){var Xt=Ie.listener,or=Ie.ha||Ie.src;Ie.fa&&fe(v.i,Ie),ue=Xt.call(or,W)!==!1&&ue}}return ue&&!W.defaultPrevented}function ps(v,k,R){if(typeof v=="function")R&&(v=h(v,R));else if(v&&typeof v.handleEvent=="function")v=h(v.handleEvent,v);else throw Error("Invalid listener argument");return 2147483647<Number(k)?-1:o.setTimeout(v,k||0)}function ze(v){v.g=ps(()=>{v.g=null,v.i&&(v.i=!1,ze(v))},v.l);const k=v.h;v.h=null,v.m.apply(null,k)}class yt extends he{constructor(k,R){super(),this.m=k,this.l=R,this.h=null,this.i=!1,this.g=null}j(k){this.h=arguments,this.g?this.i=!0:ze(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function st(v){he.call(this),this.h=v,this.g={}}m(st,he);var ir=[];function Tr(v){T(v.g,function(k,R){this.g.hasOwnProperty(R)&&Hn(k)},v),v.g={}}st.prototype.N=function(){st.aa.N.call(this),Tr(this)},st.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fr=o.JSON.stringify,Ge=o.JSON.parse,ms=class{stringify(v){return o.JSON.stringify(v,void 0)}parse(v){return o.JSON.parse(v,void 0)}};function de(){}de.prototype.h=null;function pe(v){return v.h||(v.h=v.i())}function ee(){}var Fe={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function tt(){ye.call(this,"d")}m(tt,ye);function bt(){ye.call(this,"c")}m(bt,ye);var Ue={},Lt=null;function zt(){return Lt=Lt||new Ct}Ue.La="serverreachability";function Pr(v){ye.call(this,Ue.La,v)}m(Pr,ye);function hn(v){const k=zt();un(k,new Pr(k))}Ue.STAT_EVENT="statevent";function gi(v,k){ye.call(this,Ue.STAT_EVENT,v),this.stat=k}m(gi,ye);function at(v){const k=zt();un(k,new gi(k,v))}Ue.Ma="timingevent";function sr(v,k){ye.call(this,Ue.Ma,v),this.size=k}m(sr,ye);function Wt(v,k){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){v()},k)}function pn(){this.g=!0}pn.prototype.xa=function(){this.g=!1};function Zh(v,k,R,W,ue,be){v.info(function(){if(v.g)if(be)for(var Ie="",Xt=be.split("&"),or=0;or<Xt.length;or++){var Dt=Xt[or].split("=");if(1<Dt.length){var kr=Dt[0];Dt=Dt[1];var yr=kr.split("_");Ie=2<=yr.length&&yr[1]=="type"?Ie+(kr+"="+Dt+"&"):Ie+(kr+"=redacted&")}}else Ie=null;else Ie=be;return"XMLHTTP REQ ("+W+") [attempt "+ue+"]: "+k+`
`+R+`
`+Ie})}function ud(v,k,R,W,ue,be,Ie){v.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+ue+"]: "+k+`
`+R+`
`+be+" "+Ie})}function Ls(v,k,R,W){v.info(function(){return"XMLHTTP TEXT ("+k+"): "+b1(v,R)+(W?" "+W:"")})}function dd(v,k){v.info(function(){return"TIMEOUT: "+k})}pn.prototype.info=function(){};function b1(v,k){if(!v.g)return k;if(!k)return null;try{var R=JSON.parse(k);if(R){for(v=0;v<R.length;v++)if(Array.isArray(R[v])){var W=R[v];if(!(2>W.length)){var ue=W[1];if(Array.isArray(ue)&&!(1>ue.length)){var be=ue[0];if(be!="noop"&&be!="stop"&&be!="close")for(var Ie=1;Ie<ue.length;Ie++)ue[Ie]=""}}}}return Fr(R)}catch{return k}}var qi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},gs;function Xa(){}m(Xa,de),Xa.prototype.g=function(){return new XMLHttpRequest},Xa.prototype.i=function(){return{}},gs=new Xa;function ga(v,k,R,W){this.j=v,this.i=k,this.l=R,this.R=W||1,this.U=new st(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zs}function zs(){this.i=null,this.g="",this.h=!1}var Jh={},$s={};function fd(v,k,R){v.L=1,v.v=ba(Ki(k)),v.m=R,v.P=!0,hd(v,null)}function hd(v,k){v.F=Date.now(),Ci(v),v.A=Ki(v.v);var R=v.A,W=v.R;Array.isArray(W)||(W=[String(W)]),qn(R.i,"t",W),v.C=0,R=v.j.J,v.h=new zs,v.g=_a(v.j,R?k:null,!v.m),0<v.O&&(v.M=new yt(h(v.Y,v,v.g),v.O)),k=v.U,R=v.g,W=v.ca;var ue="readystatechange";Array.isArray(ue)||(ue&&(ir[0]=ue.toString()),ue=ir);for(var be=0;be<ue.length;be++){var Ie=Ve(R,ue[be],W||k.handleEvent,!1,k.h||k);if(!Ie)break;k.g[Ie.key]=Ie}k=v.H?C(v.H):{},v.m?(v.u||(v.u="POST"),k["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.A,v.u,v.m,k)):(v.u="GET",v.g.ea(v.A,v.u,null,k)),hn(),Zh(v.i,v.u,v.A,v.l,v.R,v.m)}ga.prototype.ca=function(v){v=v.target;const k=this.M;k&&Us(v)==3?k.j():this.Y(v)},ga.prototype.Y=function(v){try{if(v==this.g)e:{const yr=Us(this.g);var k=this.g.Ba();const Sa=this.g.Z();if(!(3>yr)&&(yr!=3||this.g&&(this.h.h||this.g.oa()||yd(this.g)))){this.J||yr!=4||k==7||(k==8||0>=Sa?hn(3):hn(2)),va(this);var R=this.g.Z();this.X=R;t:if(Cn(this)){var W=yd(this.g);v="";var ue=W.length,be=Us(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fs(this),ya(this);var Ie="";break t}this.h.i=new o.TextDecoder}for(k=0;k<ue;k++)this.h.h=!0,v+=this.h.i.decode(W[k],{stream:!(be&&k==ue-1)});W.length=0,this.h.g+=v,this.C=0,Ie=this.h.g}else Ie=this.g.oa();if(this.o=R==200,ud(this.i,this.u,this.A,this.l,this.R,yr,R),this.o){if(this.T&&!this.K){t:{if(this.g){var Xt,or=this.g;if((Xt=or.g?or.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Xt)){var Dt=Xt;break t}}Dt=null}if(R=Dt)Ls(this.i,this.l,R,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hc(this,R);else{this.o=!1,this.s=3,at(12),Fs(this),ya(this);break e}}if(this.P){R=!0;let Ti;for(;!this.J&&this.C<Ie.length;)if(Ti=Za(this,Ie),Ti==$s){yr==4&&(this.s=4,at(14),R=!1),Ls(this.i,this.l,null,"[Incomplete Response]");break}else if(Ti==Jh){this.s=4,at(15),Ls(this.i,this.l,Ie,"[Invalid Chunk]"),R=!1;break}else Ls(this.i,this.l,Ti,null),hc(this,Ti);if(Cn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yr!=4||Ie.length!=0||this.h.h||(this.s=1,at(16),R=!1),this.o=this.o&&R,!R)Ls(this.i,this.l,Ie,"[Invalid Chunked Response]"),Fs(this),ya(this);else if(0<Ie.length&&!this.W){this.W=!0;var kr=this.j;kr.g==this&&kr.ba&&!kr.M&&(kr.j.info("Great, no buffering proxy detected. Bytes received: "+Ie.length),io(kr),kr.M=!0,at(11))}}else Ls(this.i,this.l,Ie,null),hc(this,Ie);yr==4&&Fs(this),this.o&&!this.J&&(yr==4?jc(this.j,this):(this.o=!1,Ci(this)))}else up(this.g),R==400&&0<Ie.indexOf("Unknown SID")?(this.s=3,at(12)):(this.s=0,at(13)),Fs(this),ya(this)}}}catch{}finally{}};function Cn(v){return v.g?v.u=="GET"&&v.L!=2&&v.j.Ca:!1}function Za(v,k){var R=v.C,W=k.indexOf(`
`,R);return W==-1?$s:(R=Number(k.substring(R,W)),isNaN(R)?Jh:(W+=1,W+R>k.length?$s:(k=k.slice(W,W+R),v.C=W+R,k)))}ga.prototype.cancel=function(){this.J=!0,Fs(this)};function Ci(v){v.S=Date.now()+v.I,ep(v,v.I)}function ep(v,k){if(v.B!=null)throw Error("WatchDog timer not null");v.B=Wt(h(v.ba,v),k)}function va(v){v.B&&(o.clearTimeout(v.B),v.B=null)}ga.prototype.ba=function(){this.B=null;const v=Date.now();0<=v-this.S?(dd(this.i,this.A),this.L!=2&&(hn(),at(17)),Fs(this),this.s=2,ya(this)):ep(this,this.S-v)};function ya(v){v.j.G==0||v.J||jc(v.j,v)}function Fs(v){va(v);var k=v.M;k&&typeof k.ma=="function"&&k.ma(),v.M=null,Tr(v.U),v.g&&(k=v.g,v.g=null,k.abort(),k.ma())}function hc(v,k){try{var R=v.j;if(R.G!=0&&(R.g==v||Et(R.h,v))){if(!v.K&&Et(R.h,v)&&R.G==3){try{var W=R.Da.g.parse(k)}catch{W=null}if(Array.isArray(W)&&W.length==3){var ue=W;if(ue[0]==0){e:if(!R.u){if(R.g)if(R.g.F+3e3<v.F)Ec(R),no(R);else break e;ar(R),at(18)}}else R.za=ue[1],0<R.za-R.T&&37500>ue[2]&&R.F&&R.v==0&&!R.C&&(R.C=Wt(h(R.Za,R),6e3));if(1>=np(R.h)&&R.ca){try{R.ca()}catch{}R.ca=void 0}}else wa(R,11)}else if((v.K||R.g==v)&&Ec(R),!w(k))for(ue=R.Da.g.parse(k),k=0;k<ue.length;k++){let Dt=ue[k];if(R.T=Dt[0],Dt=Dt[1],R.G==2)if(Dt[0]=="c"){R.K=Dt[1],R.ia=Dt[2];const kr=Dt[3];kr!=null&&(R.la=kr,R.j.info("VER="+R.la));const yr=Dt[4];yr!=null&&(R.Aa=yr,R.j.info("SVER="+R.Aa));const Sa=Dt[5];Sa!=null&&typeof Sa=="number"&&0<Sa&&(W=1.5*Sa,R.L=W,R.j.info("backChannelRequestTimeoutMs_="+W)),W=R;const Ti=v.g;if(Ti){const Tc=Ti.g?Ti.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Tc){var be=W.h;be.g||Tc.indexOf("spdy")==-1&&Tc.indexOf("quic")==-1&&Tc.indexOf("h2")==-1||(be.j=be.l,be.g=new Set,be.h&&(pd(be,be.h),be.h=null))}if(W.D){const pp=Ti.g?Ti.g.getResponseHeader("X-HTTP-Session-Id"):null;pp&&(W.ya=pp,an(W.I,W.D,pp))}}R.G=3,R.l&&R.l.ua(),R.ba&&(R.R=Date.now()-v.F,R.j.info("Handshake RTT: "+R.R+"ms")),W=R;var Ie=v;if(W.qa=Sd(W,W.J?W.ia:null,W.W),Ie.K){rp(W.h,Ie);var Xt=Ie,or=W.L;or&&(Xt.I=or),Xt.B&&(va(Xt),Ci(Xt)),W.g=Ie}else _d(W);0<R.i.length&&bd(R)}else Dt[0]!="stop"&&Dt[0]!="close"||wa(R,7);else R.G==3&&(Dt[0]=="stop"||Dt[0]=="close"?Dt[0]=="stop"?wa(R,7):Jo(R):Dt[0]!="noop"&&R.l&&R.l.ta(Dt),R.v=0)}}hn(4)}catch{}}var Ja=class{constructor(v,k){this.g=v,this.map=k}};function tp(v){this.l=v||10,o.PerformanceNavigationTiming?(v=o.performance.getEntriesByType("navigation"),v=0<v.length&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pc(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function np(v){return v.h?1:v.g?v.g.size:0}function Et(v,k){return v.h?v.h==k:v.g?v.g.has(k):!1}function pd(v,k){v.g?v.g.add(k):v.h=k}function rp(v,k){v.h&&v.h==k?v.h=null:v.g&&v.g.has(k)&&v.g.delete(k)}tp.prototype.cancel=function(){if(this.i=mc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function mc(v){if(v.h!=null)return v.i.concat(v.h.D);if(v.g!=null&&v.g.size!==0){let k=v.i;for(const R of v.g.values())k=k.concat(R.D);return k}return g(v.i)}function Ov(v){if(v.V&&typeof v.V=="function")return v.V();if(typeof Map<"u"&&v instanceof Map||typeof Set<"u"&&v instanceof Set)return Array.from(v.values());if(typeof v=="string")return v.split("");if(c(v)){for(var k=[],R=v.length,W=0;W<R;W++)k.push(v[W]);return k}k=[],R=0;for(W in v)k[R++]=v[W];return k}function dn(v){if(v.na&&typeof v.na=="function")return v.na();if(!v.V||typeof v.V!="function"){if(typeof Map<"u"&&v instanceof Map)return Array.from(v.keys());if(!(typeof Set<"u"&&v instanceof Set)){if(c(v)||typeof v=="string"){var k=[];v=v.length;for(var R=0;R<v;R++)k.push(R);return k}k=[],R=0;for(const W in v)k[R++]=W;return k}}}function qo(v,k){if(v.forEach&&typeof v.forEach=="function")v.forEach(k,void 0);else if(c(v)||typeof v=="string")Array.prototype.forEach.call(v,k,void 0);else for(var R=dn(v),W=Ov(v),ue=W.length,be=0;be<ue;be++)k.call(void 0,W[be],R&&R[be],v)}var Ko=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Go(v,k){if(v){v=v.split("&");for(var R=0;R<v.length;R++){var W=v[R].indexOf("="),ue=null;if(0<=W){var be=v[R].substring(0,W);ue=v[R].substring(W+1)}else be=v[R];k(be,ue?decodeURIComponent(ue.replace(/\+/g," ")):"")}}}function Vs(v){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,v instanceof Vs){this.h=v.h,eo(this,v.j),this.o=v.o,this.g=v.g,gc(this,v.s),this.l=v.l;var k=v.i,R=new xa;R.i=k.i,k.g&&(R.g=new Map(k.g),R.h=k.h),vc(this,R),this.m=v.m}else v&&(k=String(v).match(Ko))?(this.h=!1,eo(this,k[1]||"",!0),this.o=Yo(k[2]||""),this.g=Yo(k[3]||"",!0),gc(this,k[4]),this.l=Yo(k[5]||"",!0),vc(this,k[6]||"",!0),this.m=Yo(k[7]||"")):(this.h=!1,this.i=new xa(null,this.h))}Vs.prototype.toString=function(){var v=[],k=this.j;k&&v.push(yc(k,ip,!0),":");var R=this.g;return(R||k=="file")&&(v.push("//"),(k=this.o)&&v.push(yc(k,ip,!0),"@"),v.push(encodeURIComponent(String(R)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.s,R!=null&&v.push(":",String(R))),(R=this.l)&&(this.g&&R.charAt(0)!="/"&&v.push("/"),v.push(yc(R,R.charAt(0)=="/"?w1:x1,!0))),(R=this.i.toString())&&v.push("?",R),(R=this.m)&&v.push("#",yc(R,Qo)),v.join("")};function Ki(v){return new Vs(v)}function eo(v,k,R){v.j=R?Yo(k,!0):k,v.j&&(v.j=v.j.replace(/:$/,""))}function gc(v,k){if(k){if(k=Number(k),isNaN(k)||0>k)throw Error("Bad port number "+k);v.s=k}else v.s=null}function vc(v,k,R){k instanceof xa?(v.i=k,bc(v.i,v.h)):(R||(k=yc(k,vi)),v.i=new xa(k,v.h))}function an(v,k,R){v.i.set(k,R)}function ba(v){return an(v,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),v}function Yo(v,k){return v?k?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function yc(v,k,R){return typeof v=="string"?(v=encodeURI(v).replace(k,Ot),R&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function Ot(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var ip=/[#\/\?@]/g,x1=/[#\?:]/g,w1=/[#\?]/g,vi=/[#\?@]/g,Qo=/#/g;function xa(v,k){this.h=this.g=null,this.i=v||null,this.j=!!k}function Vr(v){v.g||(v.g=new Map,v.h=0,v.i&&Go(v.i,function(k,R){v.add(decodeURIComponent(k.replace(/\+/g," ")),R)}))}t=xa.prototype,t.add=function(v,k){Vr(this),this.i=null,v=Br(this,v);var R=this.g.get(v);return R||this.g.set(v,R=[]),R.push(k),this.h+=1,this};function sp(v,k){Vr(v),k=Br(v,k),v.g.has(k)&&(v.i=null,v.h-=v.g.get(k).length,v.g.delete(k))}function ap(v,k){return Vr(v),k=Br(v,k),v.g.has(k)}t.forEach=function(v,k){Vr(this),this.g.forEach(function(R,W){R.forEach(function(ue){v.call(k,ue,W,this)},this)},this)},t.na=function(){Vr(this);const v=Array.from(this.g.values()),k=Array.from(this.g.keys()),R=[];for(let W=0;W<k.length;W++){const ue=v[W];for(let be=0;be<ue.length;be++)R.push(k[W])}return R},t.V=function(v){Vr(this);let k=[];if(typeof v=="string")ap(this,v)&&(k=k.concat(this.g.get(Br(this,v))));else{v=Array.from(this.g.values());for(let R=0;R<v.length;R++)k=k.concat(v[R])}return k},t.set=function(v,k){return Vr(this),this.i=null,v=Br(this,v),ap(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[k]),this.h+=1,this},t.get=function(v,k){return v?(v=this.V(v),0<v.length?String(v[0]):k):k};function qn(v,k,R){sp(v,k),0<R.length&&(v.i=null,v.g.set(Br(v,k),g(R)),v.h+=R.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],k=Array.from(this.g.keys());for(var R=0;R<k.length;R++){var W=k[R];const be=encodeURIComponent(String(W)),Ie=this.V(W);for(W=0;W<Ie.length;W++){var ue=be;Ie[W]!==""&&(ue+="="+encodeURIComponent(String(Ie[W]))),v.push(ue)}}return this.i=v.join("&")};function Br(v,k){return k=String(k),v.j&&(k=k.toLowerCase()),k}function bc(v,k){k&&!v.j&&(Vr(v),v.i=null,v.g.forEach(function(R,W){var ue=W.toLowerCase();W!=ue&&(sp(this,W),qn(this,ue,R))},v)),v.j=k}function xc(v,k){const R=new pn;if(o.Image){const W=new Image;W.onload=p(Ur,R,"TestLoadImage: loaded",!0,k,W),W.onerror=p(Ur,R,"TestLoadImage: error",!1,k,W),W.onabort=p(Ur,R,"TestLoadImage: abort",!1,k,W),W.ontimeout=p(Ur,R,"TestLoadImage: timeout",!1,k,W),o.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=v}else k(!1)}function op(v,k){const R=new pn,W=new AbortController,ue=setTimeout(()=>{W.abort(),Ur(R,"TestPingServer: timeout",!1,k)},1e4);fetch(v,{signal:W.signal}).then(be=>{clearTimeout(ue),be.ok?Ur(R,"TestPingServer: ok",!0,k):Ur(R,"TestPingServer: server error",!1,k)}).catch(()=>{clearTimeout(ue),Ur(R,"TestPingServer: error",!1,k)})}function Ur(v,k,R,W,ue){try{ue&&(ue.onload=null,ue.onerror=null,ue.onabort=null,ue.ontimeout=null),W(R)}catch{}}function _1(){this.g=new ms}function vs(v,k,R){const W=R||"";try{qo(v,function(ue,be){let Ie=ue;u(ue)&&(Ie=Fr(ue)),k.push(W+be+"="+encodeURIComponent(Ie))})}catch(ue){throw k.push(W+"type="+encodeURIComponent("_badmap")),ue}}function Xo(v){this.l=v.Ub||null,this.j=v.eb||!1}m(Xo,de),Xo.prototype.g=function(){return new wc(this.l,this.j)},Xo.prototype.i=function(v){return function(){return v}}({});function wc(v,k){Ct.call(this),this.D=v,this.o=k,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(wc,Ct),t=wc.prototype,t.open=function(v,k){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=v,this.A=k,this.readyState=1,to(this)},t.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const k={headers:this.u,method:this.B,credentials:this.m,cache:void 0};v&&(k.body=v),(this.D||o).fetch(new Request(this.A,k)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Bs(this)),this.readyState=0},t.Sa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,to(this)),this.g&&(this.readyState=3,to(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;md(this)}else v.text().then(this.Ra.bind(this),this.ga.bind(this))};function md(v){v.j.read().then(v.Pa.bind(v)).catch(v.ga.bind(v))}t.Pa=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var k=v.value?v.value:new Uint8Array(0);(k=this.v.decode(k,{stream:!v.done}))&&(this.response=this.responseText+=k)}v.done?Bs(this):to(this),this.readyState==3&&md(this)}},t.Ra=function(v){this.g&&(this.response=this.responseText=v,Bs(this))},t.Qa=function(v){this.g&&(this.response=v,Bs(this))},t.ga=function(){this.g&&Bs(this)};function Bs(v){v.readyState=4,v.l=null,v.j=null,v.v=null,to(v)}t.setRequestHeader=function(v,k){this.u.append(v,k)},t.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],k=this.h.entries();for(var R=k.next();!R.done;)R=R.value,v.push(R[0]+": "+R[1]),R=k.next();return v.join(`\r
`)};function to(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(wc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function lp(v){let k="";return T(v,function(R,W){k+=W,k+=":",k+=R,k+=`\r
`}),k}function cp(v,k,R){e:{for(W in R){var W=!1;break e}W=!0}W||(R=lp(R),typeof v=="string"?R!=null&&encodeURIComponent(String(R)):an(v,k,R))}function on(v){Ct.call(this),this.headers=new Map,this.o=v||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(on,Ct);var S1=/^https?$/i,A1=["POST","PUT"];t=on.prototype,t.Ha=function(v){this.J=v},t.ea=function(v,k,R,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);k=k?k.toUpperCase():"GET",this.D=v,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():gs.g(),this.v=this.o?pe(this.o):pe(gs),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(k,String(v),!0),this.B=!1}catch(be){_c(this,be);return}if(v=R||"",R=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var ue in W)R.set(ue,W[ue]);else if(typeof W.keys=="function"&&typeof W.get=="function")for(const be of W.keys())R.set(be,W.get(be));else throw Error("Unknown input type for opt_headers: "+String(W));W=Array.from(R.keys()).find(be=>be.toLowerCase()=="content-type"),ue=o.FormData&&v instanceof o.FormData,!(0<=Array.prototype.indexOf.call(A1,k,void 0))||W||ue||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[be,Ie]of R)this.g.setRequestHeader(be,Ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Mv(this),this.u=!0,this.g.send(v),this.u=!1}catch(be){_c(this,be)}};function _c(v,k){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=k,v.m=5,Sc(v),vd(v)}function Sc(v){v.A||(v.A=!0,un(v,"complete"),un(v,"error"))}t.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=v||7,un(this,"complete"),un(this,"abort"),vd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vd(this,!0)),on.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?gd(this):this.bb())},t.bb=function(){gd(this)};function gd(v){if(v.h&&typeof a<"u"&&(!v.v[1]||Us(v)!=4||v.Z()!=2)){if(v.u&&Us(v)==4)ps(v.Ea,0,v);else if(un(v,"readystatechange"),Us(v)==4){v.h=!1;try{const Ie=v.Z();e:switch(Ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var k=!0;break e;default:k=!1}var R;if(!(R=k)){var W;if(W=Ie===0){var ue=String(v.D).match(Ko)[1]||null;!ue&&o.self&&o.self.location&&(ue=o.self.location.protocol.slice(0,-1)),W=!S1.test(ue?ue.toLowerCase():"")}R=W}if(R)un(v,"complete"),un(v,"success");else{v.m=6;try{var be=2<Us(v)?v.g.statusText:""}catch{be=""}v.l=be+" ["+v.Z()+"]",Sc(v)}}finally{vd(v)}}}}function vd(v,k){if(v.g){Mv(v);const R=v.g,W=v.v[0]?()=>{}:null;v.g=null,v.v=null,k||un(v,"ready");try{R.onreadystatechange=W}catch{}}}function Mv(v){v.I&&(o.clearTimeout(v.I),v.I=null)}t.isActive=function(){return!!this.g};function Us(v){return v.g?v.g.readyState:0}t.Z=function(){try{return 2<Us(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(v){if(this.g){var k=this.g.responseText;return v&&k.indexOf(v)==0&&(k=k.substring(v.length)),Ge(k)}};function yd(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.H){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function up(v){const k={};v=(v.g&&2<=Us(v)&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let W=0;W<v.length;W++){if(w(v[W]))continue;var R=L(v[W]);const ue=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const be=k[ue]||[];k[ue]=be,be.push(R)}A(k,function(W){return W.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zo(v,k,R){return R&&R.internalChannelParams&&R.internalChannelParams[v]||k}function Ac(v){this.Aa=0,this.i=[],this.j=new pn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Zo("failFast",!1,v),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Zo("baseRetryDelayMs",5e3,v),this.cb=Zo("retryDelaySeedMs",1e4,v),this.Wa=Zo("forwardChannelMaxRetries",2,v),this.wa=Zo("forwardChannelRequestTimeoutMs",2e4,v),this.pa=v&&v.xmlHttpFactory||void 0,this.Xa=v&&v.Tb||void 0,this.Ca=v&&v.useFetchStreams||!1,this.L=void 0,this.J=v&&v.supportsCrossDomainXhr||!1,this.K="",this.h=new tp(v&&v.concurrentRequestLimit),this.Da=new _1,this.P=v&&v.fastHandshake||!1,this.O=v&&v.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=v&&v.Rb||!1,v&&v.xa&&this.j.xa(),v&&v.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&v&&v.detectBufferingProxy||!1,this.ja=void 0,v&&v.longPollingTimeout&&0<v.longPollingTimeout&&(this.ja=v.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ac.prototype,t.la=8,t.G=1,t.connect=function(v,k,R,W){at(0),this.W=v,this.H=k||{},R&&W!==void 0&&(this.H.OSID=R,this.H.OAID=W),this.F=this.X,this.I=Sd(this,null,this.W),bd(this)};function Jo(v){if(dp(v),v.G==3){var k=v.U++,R=Ki(v.I);if(an(R,"SID",v.K),an(R,"RID",k),an(R,"TYPE","terminate"),ro(v,R),k=new ga(v,v.j,k),k.L=2,k.v=ba(Ki(R)),R=!1,o.navigator&&o.navigator.sendBeacon)try{R=o.navigator.sendBeacon(k.v.toString(),"")}catch{}!R&&o.Image&&(new Image().src=k.v,R=!0),R||(k.g=_a(k.j,null),k.g.ea(k.v)),k.F=Date.now(),Ci(k)}Cc(v)}function no(v){v.g&&(io(v),v.g.cancel(),v.g=null)}function dp(v){no(v),v.u&&(o.clearTimeout(v.u),v.u=null),Ec(v),v.h.cancel(),v.s&&(typeof v.s=="number"&&o.clearTimeout(v.s),v.s=null)}function bd(v){if(!pc(v.h)&&!v.s){v.s=!0;var k=v.Ga;U||Z(),F||(U(),F=!0),q.add(k,v),v.B=0}}function el(v,k){return np(v.h)>=v.h.j-(v.s?1:0)?!1:v.s?(v.i=k.D.concat(v.i),!0):v.G==1||v.G==2||v.B>=(v.Va?0:v.Wa)?!1:(v.s=Wt(h(v.Ga,v,k),fp(v,v.B)),v.B++,!0)}t.Ga=function(v){if(this.s)if(this.s=null,this.G==1){if(!v){this.U=Math.floor(1e5*Math.random()),v=this.U++;const ue=new ga(this,this.j,v);let be=this.o;if(this.S&&(be?(be=C(be),O(be,this.S)):be=this.S),this.m!==null||this.O||(ue.H=be,be=null),this.P)e:{for(var k=0,R=0;R<this.i.length;R++){t:{var W=this.i[R];if("__data__"in W.map&&(W=W.map.__data__,typeof W=="string")){W=W.length;break t}W=void 0}if(W===void 0)break;if(k+=W,4096<k){k=R;break e}if(k===4096||R===this.i.length-1){k=R+1;break e}}k=1e3}else k=1e3;k=wd(this,ue,k),R=Ki(this.I),an(R,"RID",v),an(R,"CVER",22),this.D&&an(R,"X-HTTP-Session-Id",this.D),ro(this,R),be&&(this.O?k="headers="+encodeURIComponent(String(lp(be)))+"&"+k:this.m&&cp(R,this.m,be)),pd(this.h,ue),this.Ua&&an(R,"TYPE","init"),this.P?(an(R,"$req",k),an(R,"SID","null"),ue.T=!0,fd(ue,R,null)):fd(ue,R,k),this.G=2}}else this.G==3&&(v?xd(this,v):this.i.length==0||pc(this.h)||xd(this))};function xd(v,k){var R;k?R=k.l:R=v.U++;const W=Ki(v.I);an(W,"SID",v.K),an(W,"RID",R),an(W,"AID",v.T),ro(v,W),v.m&&v.o&&cp(W,v.m,v.o),R=new ga(v,v.j,R,v.B+1),v.m===null&&(R.H=v.o),k&&(v.i=k.D.concat(v.i)),k=wd(v,R,1e3),R.I=Math.round(.5*v.wa)+Math.round(.5*v.wa*Math.random()),pd(v.h,R),fd(R,W,k)}function ro(v,k){v.H&&T(v.H,function(R,W){an(k,W,R)}),v.l&&qo({},function(R,W){an(k,W,R)})}function wd(v,k,R){R=Math.min(v.i.length,R);var W=v.l?h(v.l.Na,v.l,v):null;e:{var ue=v.i;let be=-1;for(;;){const Ie=["count="+R];be==-1?0<R?(be=ue[0].g,Ie.push("ofs="+be)):be=0:Ie.push("ofs="+be);let Xt=!0;for(let or=0;or<R;or++){let Dt=ue[or].g;const kr=ue[or].map;if(Dt-=be,0>Dt)be=Math.max(0,ue[or].g-100),Xt=!1;else try{vs(kr,Ie,"req"+Dt+"_")}catch{W&&W(kr)}}if(Xt){W=Ie.join("&");break e}}}return v=v.i.splice(0,R),k.D=v,W}function _d(v){if(!v.g&&!v.u){v.Y=1;var k=v.Fa;U||Z(),F||(U(),F=!0),q.add(k,v),v.v=0}}function ar(v){return v.g||v.u||3<=v.v?!1:(v.Y++,v.u=Wt(h(v.Fa,v),fp(v,v.v)),v.v++,!0)}t.Fa=function(){if(this.u=null,tl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var v=2*this.R;this.j.info("BP detection timer enabled: "+v),this.A=Wt(h(this.ab,this),v)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,at(10),no(this),tl(this))};function io(v){v.A!=null&&(o.clearTimeout(v.A),v.A=null)}function tl(v){v.g=new ga(v,v.j,"rpc",v.Y),v.m===null&&(v.g.H=v.o),v.g.O=0;var k=Ki(v.qa);an(k,"RID","rpc"),an(k,"SID",v.K),an(k,"AID",v.T),an(k,"CI",v.F?"0":"1"),!v.F&&v.ja&&an(k,"TO",v.ja),an(k,"TYPE","xmlhttp"),ro(v,k),v.m&&v.o&&cp(k,v.m,v.o),v.L&&(v.g.I=v.L);var R=v.g;v=v.ia,R.L=1,R.v=ba(Ki(k)),R.m=null,R.P=!0,hd(R,v)}t.Za=function(){this.C!=null&&(this.C=null,no(this),ar(this),at(19))};function Ec(v){v.C!=null&&(o.clearTimeout(v.C),v.C=null)}function jc(v,k){var R=null;if(v.g==k){Ec(v),io(v),v.g=null;var W=2}else if(Et(v.h,k))R=k.D,rp(v.h,k),W=1;else return;if(v.G!=0){if(k.o)if(W==1){R=k.m?k.m.length:0,k=Date.now()-k.F;var ue=v.B;W=zt(),un(W,new sr(W,R)),bd(v)}else _d(v);else if(ue=k.s,ue==3||ue==0&&0<k.X||!(W==1&&el(v,k)||W==2&&ar(v)))switch(R&&0<R.length&&(k=v.h,k.i=k.i.concat(R)),ue){case 1:wa(v,5);break;case 4:wa(v,10);break;case 3:wa(v,6);break;default:wa(v,2)}}}function fp(v,k){let R=v.Ta+Math.floor(Math.random()*v.cb);return v.isActive()||(R*=2),R*k}function wa(v,k){if(v.j.info("Error code "+k),k==2){var R=h(v.fb,v),W=v.Xa;const ue=!W;W=new Vs(W||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||eo(W,"https"),ba(W),ue?xc(W.toString(),R):op(W.toString(),R)}else at(2);v.G=0,v.l&&v.l.sa(k),Cc(v),dp(v)}t.fb=function(v){v?(this.j.info("Successfully pinged google.com"),at(2)):(this.j.info("Failed to ping google.com"),at(1))};function Cc(v){if(v.G=0,v.ka=[],v.l){const k=mc(v.h);(k.length!=0||v.i.length!=0)&&(b(v.ka,k),b(v.ka,v.i),v.h.i.length=0,g(v.i),v.i.length=0),v.l.ra()}}function Sd(v,k,R){var W=R instanceof Vs?Ki(R):new Vs(R);if(W.g!="")k&&(W.g=k+"."+W.g),gc(W,W.s);else{var ue=o.location;W=ue.protocol,k=k?k+"."+ue.hostname:ue.hostname,ue=+ue.port;var be=new Vs(null);W&&eo(be,W),k&&(be.g=k),ue&&gc(be,ue),R&&(be.l=R),W=be}return R=v.D,k=v.ya,R&&k&&an(W,R,k),an(W,"VER",v.la),ro(v,W),W}function _a(v,k,R){if(k&&!v.J)throw Error("Can't create secondary domain capable XhrIo object.");return k=v.Ca&&!v.pa?new on(new Xo({eb:R})):new on(v.pa),k.Ha(v.J),k}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ad(){}t=Ad.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function nl(){}nl.prototype.g=function(v,k){return new Nr(v,k)};function Nr(v,k){Ct.call(this),this.g=new Ac(k),this.l=v,this.h=k&&k.messageUrlParams||null,v=k&&k.messageHeaders||null,k&&k.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=k&&k.initMessageHeaders||null,k&&k.messageContentType&&(v?v["X-WebChannel-Content-Type"]=k.messageContentType:v={"X-WebChannel-Content-Type":k.messageContentType}),k&&k.va&&(v?v["X-WebChannel-Client-Profile"]=k.va:v={"X-WebChannel-Client-Profile":k.va}),this.g.S=v,(v=k&&k.Sb)&&!w(v)&&(this.g.m=v),this.v=k&&k.supportsCrossDomainXhr||!1,this.u=k&&k.sendRawJson||!1,(k=k&&k.httpSessionIdParam)&&!w(k)&&(this.g.D=k,v=this.h,v!==null&&k in v&&(v=this.h,k in v&&delete v[k])),this.j=new rl(this)}m(Nr,Ct),Nr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nr.prototype.close=function(){Jo(this.g)},Nr.prototype.o=function(v){var k=this.g;if(typeof v=="string"){var R={};R.__data__=v,v=R}else this.u&&(R={},R.__data__=Fr(v),v=R);k.i.push(new Ja(k.Ya++,v)),k.G==3&&bd(k)},Nr.prototype.N=function(){this.g.l=null,delete this.j,Jo(this.g),delete this.g,Nr.aa.N.call(this)};function Ed(v){tt.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var k=v.__sm__;if(k){e:{for(const R in k){v=R;break e}v=void 0}(this.i=v)&&(v=this.i,k=k!==null&&v in k?k[v]:void 0),this.data=k}else this.data=v}m(Ed,tt);function hp(){bt.call(this),this.status=1}m(hp,bt);function rl(v){this.g=v}m(rl,Ad),rl.prototype.ua=function(){un(this.g,"a")},rl.prototype.ta=function(v){un(this.g,new Ed(v))},rl.prototype.sa=function(v){un(this.g,new hp)},rl.prototype.ra=function(){un(this.g,"b")},nl.prototype.createWebChannel=nl.prototype.g,Nr.prototype.send=Nr.prototype.o,Nr.prototype.open=Nr.prototype.m,Nr.prototype.close=Nr.prototype.close,K$=function(){return new nl},q$=function(){return zt()},H$=Ue,PA={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qi.NO_ERROR=0,qi.TIMEOUT=8,qi.HTTP_ERROR=6,Qy=qi,Qa.COMPLETE="complete",W$=Qa,ee.EventType=Fe,Fe.OPEN="a",Fe.CLOSE="b",Fe.ERROR="c",Fe.MESSAGE="d",Ct.prototype.listen=Ct.prototype.K,Vp=ee,on.prototype.listenOnce=on.prototype.L,on.prototype.getLastError=on.prototype.Ka,on.prototype.getLastErrorCode=on.prototype.Ba,on.prototype.getStatus=on.prototype.Z,on.prototype.getResponseJson=on.prototype.Oa,on.prototype.getResponseText=on.prototype.oa,on.prototype.send=on.prototype.ea,on.prototype.setWithCredentials=on.prototype.Ha,U$=on}).apply(typeof ry<"u"?ry:typeof self<"u"?self:typeof window<"u"?window:{});const hD="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ni.UNAUTHENTICATED=new Ni(null),Ni.GOOGLE_CREDENTIALS=new Ni("google-credentials-uid"),Ni.FIRST_PARTY=new Ni("first-party-uid"),Ni.MOCK_USER=new Ni("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Th="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ju=new Xj("@firebase/firestore");function Sp(){return ju.logLevel}function Xe(t,...e){if(ju.logLevel<=It.DEBUG){const n=e.map(rC);ju.debug(`Firestore (${Th}): ${t}`,...n)}}function No(t,...e){if(ju.logLevel<=It.ERROR){const n=e.map(rC);ju.error(`Firestore (${Th}): ${t}`,...n)}}function Ym(t,...e){if(ju.logLevel<=It.WARN){const n=e.map(rC);ju.warn(`Firestore (${Th}): ${t}`,...n)}}function rC(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(t="Unexpected state"){const e=`FIRESTORE (${Th}) INTERNAL ASSERTION FAILED: `+t;throw No(e),new Error(e)}function rn(t,e){t||mt()}function _t(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class He extends $o{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kQ{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class DQ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ni.UNAUTHENTICATED))}shutdown(){}}class IQ{constructor(e){this.t=e,this.currentUser=Ni.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){rn(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new hu;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new hu,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},o=c=>{Xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>o(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(Xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new hu)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rn(typeof r.accessToken=="string"),new kQ(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rn(e===null||typeof e=="string"),new Ni(e)}}class OQ{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ni.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class MQ{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new OQ(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ni.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class RQ{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class LQ{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){rn(this.o===void 0);const r=s=>{s.error!=null&&Xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,Xe("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(rn(typeof n.token=="string"),this.R=n.token,new RQ(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zQ(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G${static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=zQ(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function qt(t,e){return t<e?-1:t>e?1:0}function Of(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new He(Ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new He(Ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new He(Ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new He(Ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pr.fromMillis(Date.now())}static fromDate(e){return pr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new pr(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qt(this.nanoseconds,e.nanoseconds):qt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new wt(e)}static min(){return new wt(new pr(0,0))}static max(){return new wt(new pr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n,r){n===void 0?n=0:n>e.length&&mt(),r===void 0?r=e.length-n:r>e.length-n&&mt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Qm.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Qm?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class En extends Qm{construct(e,n,r){return new En(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new He(Ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new En(n)}static emptyPath(){return new En([])}}const $Q=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qr extends Qm{construct(e,n,r){return new Qr(e,n,r)}static isValidIdentifier(e){return $Q.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Qr(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new He(Ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new He(Ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new He(Ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(r+=o,i++):(s(),i++)}if(s(),a)throw new He(Ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qr(n)}static emptyPath(){return new Qr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.path=e}static fromPath(e){return new it(En.fromString(e))}static fromName(e){return new it(En.fromString(e).popFirst(5))}static empty(){return new it(En.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&En.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return En.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new it(new En(e.slice()))}}function FQ(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=wt.fromTimestamp(r===1e9?new pr(n+1,0):new pr(n,r));return new Bl(i,it.empty(),e)}function VQ(t){return new Bl(t.readTime,t.key,-1)}class Bl{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Bl(wt.min(),it.empty(),-1)}static max(){return new Bl(wt.max(),it.empty(),-1)}}function BQ(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=it.comparator(t.documentKey,e.documentKey),n!==0?n:qt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UQ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WQ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rv(t){if(t.code!==Ae.FAILED_PRECONDITION||t.message!==UQ)throw t;Xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&mt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ee((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Ee?n:Ee.resolve(n)}catch(n){return Ee.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Ee.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Ee.reject(n)}static resolve(e){return new Ee((n,r)=>{n(e)})}static reject(e){return new Ee((n,r)=>{r(e)})}static waitFor(e){return new Ee((n,r)=>{let i=0,s=0,a=!1;e.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&n()},c=>r(c))}),a=!0,s===i&&n()})}static or(e){let n=Ee.resolve(!1);for(const r of e)n=n.next(i=>i?Ee.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new Ee((r,i)=>{const s=e.length,a=new Array(s);let o=0;for(let c=0;c<s;c++){const u=c;n(e[u]).next(d=>{a[u]=d,++o,o===s&&r(a)},d=>i(d))}})}static doWhile(e,n){return new Ee((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function HQ(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function iv(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}iC.oe=-1;function Vx(t){return t==null}function F0(t){return t===0&&1/t==-1/0}function qQ(t){return typeof t=="number"&&Number.isInteger(t)&&!F0(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ku(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Y$(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e,n){this.comparator=e,this.root=n||Yr.EMPTY}insert(e,n){return new Ln(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Yr.BLACK,null,null))}remove(e){return new Ln(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new iy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new iy(this.root,e,this.comparator,!1)}getReverseIterator(){return new iy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new iy(this.root,e,this.comparator,!0)}}class iy{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Yr.RED,this.left=i??Yr.EMPTY,this.right=s??Yr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Yr(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Yr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Yr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw mt();const e=this.left.check();if(e!==this.right.check())throw mt();return e+(this.isRed()?0:1)}}Yr.EMPTY=null,Yr.RED=!0,Yr.BLACK=!1;Yr.EMPTY=new class{constructor(){this.size=0}get key(){throw mt()}get value(){throw mt()}get color(){throw mt()}get left(){throw mt()}get right(){throw mt()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Yr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e){this.comparator=e,this.data=new Ln(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new mD(this.data.getIterator())}getIteratorFrom(e){return new mD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Jr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Jr(this.comparator);return n.data=e,n}}class mD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this.fields=e,e.sort(Qr.comparator)}static empty(){return new es([])}unionWith(e){let n=new Jr(Qr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new es(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Of(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q$ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Q$("Invalid base64 string: "+s):s}}(e);return new ni(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new ni(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ni.EMPTY_BYTE_STRING=new ni("");const KQ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ul(t){if(rn(!!t),typeof t=="string"){let e=0;const n=KQ.exec(t);if(rn(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xn(t.seconds),nanos:Xn(t.nanos)}}function Xn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Cu(t){return typeof t=="string"?ni.fromBase64String(t):ni.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function aC(t){const e=t.mapValue.fields.__previous_value__;return sC(e)?aC(e):e}function Xm(t){const e=Ul(t.mapValue.fields.__local_write_time__.timestampValue);return new pr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GQ{constructor(e,n,r,i,s,a,o,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u}}class Zm{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Zm("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Zm&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy={mapValue:{}};function Tu(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?sC(t)?4:QQ(t)?9007199254740991:YQ(t)?10:11:mt()}function Ba(t,e){if(t===e)return!0;const n=Tu(t);if(n!==Tu(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xm(t).isEqual(Xm(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Ul(i.timestampValue),o=Ul(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Cu(i.bytesValue).isEqual(Cu(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Xn(i.geoPointValue.latitude)===Xn(s.geoPointValue.latitude)&&Xn(i.geoPointValue.longitude)===Xn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Xn(i.integerValue)===Xn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Xn(i.doubleValue),o=Xn(s.doubleValue);return a===o?F0(a)===F0(o):isNaN(a)&&isNaN(o)}return!1}(t,e);case 9:return Of(t.arrayValue.values||[],e.arrayValue.values||[],Ba);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(pD(a)!==pD(o))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(o[c]===void 0||!Ba(a[c],o[c])))return!1;return!0}(t,e);default:return mt()}}function Jm(t,e){return(t.values||[]).find(n=>Ba(n,e))!==void 0}function Mf(t,e){if(t===e)return 0;const n=Tu(t),r=Tu(e);if(n!==r)return qt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return qt(t.booleanValue,e.booleanValue);case 2:return function(s,a){const o=Xn(s.integerValue||s.doubleValue),c=Xn(a.integerValue||a.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1}(t,e);case 3:return gD(t.timestampValue,e.timestampValue);case 4:return gD(Xm(t),Xm(e));case 5:return qt(t.stringValue,e.stringValue);case 6:return function(s,a){const o=Cu(s),c=Cu(a);return o.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),c=a.split("/");for(let u=0;u<o.length&&u<c.length;u++){const d=qt(o[u],c[u]);if(d!==0)return d}return qt(o.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const o=qt(Xn(s.latitude),Xn(a.latitude));return o!==0?o:qt(Xn(s.longitude),Xn(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return vD(t.arrayValue,e.arrayValue);case 10:return function(s,a){var o,c,u,d;const f=s.fields||{},h=a.fields||{},p=(o=f.value)===null||o===void 0?void 0:o.arrayValue,m=(c=h.value)===null||c===void 0?void 0:c.arrayValue,g=qt(((u=p==null?void 0:p.values)===null||u===void 0?void 0:u.length)||0,((d=m==null?void 0:m.values)===null||d===void 0?void 0:d.length)||0);return g!==0?g:vD(p,m)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===sy.mapValue&&a===sy.mapValue)return 0;if(s===sy.mapValue)return 1;if(a===sy.mapValue)return-1;const o=s.fields||{},c=Object.keys(o),u=a.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const h=qt(c[f],d[f]);if(h!==0)return h;const p=Mf(o[c[f]],u[d[f]]);if(p!==0)return p}return qt(c.length,d.length)}(t.mapValue,e.mapValue);default:throw mt()}}function gD(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return qt(t,e);const n=Ul(t),r=Ul(e),i=qt(n.seconds,r.seconds);return i!==0?i:qt(n.nanos,r.nanos)}function vD(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Mf(n[i],r[i]);if(s)return s}return qt(n.length,r.length)}function Rf(t){return NA(t)}function NA(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ul(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Cu(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return it.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=NA(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${NA(n.fields[a])}`;return i+"}"}(t.mapValue):mt()}function yD(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function kA(t){return!!t&&"integerValue"in t}function oC(t){return!!t&&"arrayValue"in t}function bD(t){return!!t&&"nullValue"in t}function xD(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xy(t){return!!t&&"mapValue"in t}function YQ(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function sm(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ku(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=sm(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=sm(t.arrayValue.values[n]);return e}return Object.assign({},t)}function QQ(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this.value=e}static empty(){return new Di({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Xy(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=sm(n)}setAll(e){let n=Qr.emptyPath(),r={},i=[];e.forEach((a,o)=>{if(!n.isImmediateParentOf(o)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=o.popLast()}a?r[o.lastSegment()]=sm(a):i.push(o.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Xy(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ba(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Xy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ku(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Di(sm(this.value))}}function X$(t){const e=[];return Ku(t.fields,(n,r)=>{const i=new Qr([n]);if(Xy(r)){const s=X$(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new es(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,n,r,i,s,a,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new fi(e,0,wt.min(),wt.min(),wt.min(),Di.empty(),0)}static newFoundDocument(e,n,r,i){return new fi(e,1,n,wt.min(),r,i,0)}static newNoDocument(e,n){return new fi(e,2,n,wt.min(),wt.min(),Di.empty(),0)}static newUnknownDocument(e,n){return new fi(e,3,n,wt.min(),wt.min(),Di.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(wt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Di.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Di.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof fi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e,n){this.position=e,this.inclusive=n}}function wD(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=it.comparator(it.fromName(a.referenceValue),n.key):r=Mf(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function _D(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ba(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,n="asc"){this.field=e,this.dir=n}}function XQ(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Z$=class{};class dr extends Z${constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new JQ(e,n,r):n==="array-contains"?new nX(e,r):n==="in"?new rX(e,r):n==="not-in"?new iX(e,r):n==="array-contains-any"?new sX(e,r):new dr(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new eX(e,r):new tX(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Mf(n,this.value)):n!==null&&Tu(this.value)===Tu(n)&&this.matchesComparison(Mf(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return mt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sa extends Z${constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new sa(e,n)}matches(e){return J$(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function J$(t){return t.op==="and"}function e6(t){return ZQ(t)&&J$(t)}function ZQ(t){for(const e of t.filters)if(e instanceof sa)return!1;return!0}function DA(t){if(t instanceof dr)return t.field.canonicalString()+t.op.toString()+Rf(t.value);if(e6(t))return t.filters.map(e=>DA(e)).join(",");{const e=t.filters.map(n=>DA(n)).join(",");return`${t.op}(${e})`}}function t6(t,e){return t instanceof dr?function(r,i){return i instanceof dr&&r.op===i.op&&r.field.isEqual(i.field)&&Ba(r.value,i.value)}(t,e):t instanceof sa?function(r,i){return i instanceof sa&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,o)=>s&&t6(a,i.filters[o]),!0):!1}(t,e):void mt()}function n6(t){return t instanceof dr?function(n){return`${n.field.canonicalString()} ${n.op} ${Rf(n.value)}`}(t):t instanceof sa?function(n){return n.op.toString()+" {"+n.getFilters().map(n6).join(" ,")+"}"}(t):"Filter"}class JQ extends dr{constructor(e,n,r){super(e,n,r),this.key=it.fromName(r.referenceValue)}matches(e){const n=it.comparator(e.key,this.key);return this.matchesComparison(n)}}class eX extends dr{constructor(e,n){super(e,"in",n),this.keys=r6("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class tX extends dr{constructor(e,n){super(e,"not-in",n),this.keys=r6("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function r6(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>it.fromName(r.referenceValue))}class nX extends dr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return oC(n)&&Jm(n.arrayValue,this.value)}}class rX extends dr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Jm(this.value.arrayValue,n)}}class iX extends dr{constructor(e,n){super(e,"not-in",n)}matches(e){if(Jm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Jm(this.value.arrayValue,n)}}class sX extends dr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!oC(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Jm(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aX{constructor(e,n=null,r=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.ue=null}}function SD(t,e=null,n=[],r=[],i=null,s=null,a=null){return new aX(t,e,n,r,i,s,a)}function lC(t){const e=_t(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>DA(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Vx(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Rf(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Rf(r)).join(",")),e.ue=n}return e.ue}function cC(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!XQ(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!t6(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_D(t.startAt,e.startAt)&&_D(t.endAt,e.endAt)}function IA(t){return it.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e,n=null,r=[],i=[],s=null,a="F",o=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function oX(t,e,n,r,i,s,a,o){return new sv(t,e,n,r,i,s,a,o)}function uC(t){return new sv(t)}function AD(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function i6(t){return t.collectionGroup!==null}function am(t){const e=_t(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Jr(Qr.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new B0(s,r))}),n.has(Qr.keyField().canonicalString())||e.ce.push(new B0(Qr.keyField(),r))}return e.ce}function Ma(t){const e=_t(t);return e.le||(e.le=lX(e,am(t))),e.le}function lX(t,e){if(t.limitType==="F")return SD(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new B0(i.field,s)});const n=t.endAt?new V0(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new V0(t.startAt.position,t.startAt.inclusive):null;return SD(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function OA(t,e){const n=t.filters.concat([e]);return new sv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function MA(t,e,n){return new sv(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Bx(t,e){return cC(Ma(t),Ma(e))&&t.limitType===e.limitType}function s6(t){return`${lC(Ma(t))}|lt:${t.limitType}`}function Md(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>n6(i)).join(", ")}]`),Vx(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Rf(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Rf(i)).join(",")),`Target(${r})`}(Ma(t))}; limitType=${t.limitType})`}function Ux(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):it.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of am(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,o,c){const u=wD(a,o,c);return a.inclusive?u<=0:u<0}(r.startAt,am(r),i)||r.endAt&&!function(a,o,c){const u=wD(a,o,c);return a.inclusive?u>=0:u>0}(r.endAt,am(r),i))}(t,e)}function cX(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function a6(t){return(e,n)=>{let r=!1;for(const i of am(t)){const s=uX(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function uX(t,e,n){const r=t.field.isKeyField()?it.comparator(e.key,n.key):function(s,a,o){const c=a.data.field(s),u=o.data.field(s);return c!==null&&u!==null?Mf(c,u):mt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return mt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ku(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Y$(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dX=new Ln(it.comparator);function ko(){return dX}const o6=new Ln(it.comparator);function Bp(...t){let e=o6;for(const n of t)e=e.insert(n.key,n);return e}function l6(t){let e=o6;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function eu(){return om()}function c6(){return om()}function om(){return new Ph(t=>t.toString(),(t,e)=>t.isEqual(e))}const fX=new Ln(it.comparator),hX=new Jr(it.comparator);function kt(...t){let e=hX;for(const n of t)e=e.add(n);return e}const pX=new Jr(qt);function mX(){return pX}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:F0(e)?"-0":e}}function u6(t){return{integerValue:""+t}}function gX(t,e){return qQ(e)?u6(e):dC(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(){this._=void 0}}function vX(t,e,n){return t instanceof eg?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&sC(s)&&(s=aC(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(n,e):t instanceof tg?f6(t,e):t instanceof ng?h6(t,e):function(i,s){const a=d6(i,s),o=ED(a)+ED(i.Pe);return kA(a)&&kA(i.Pe)?u6(o):dC(i.serializer,o)}(t,e)}function yX(t,e,n){return t instanceof tg?f6(t,e):t instanceof ng?h6(t,e):n}function d6(t,e){return t instanceof U0?function(r){return kA(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class eg extends Wx{}class tg extends Wx{constructor(e){super(),this.elements=e}}function f6(t,e){const n=p6(e);for(const r of t.elements)n.some(i=>Ba(i,r))||n.push(r);return{arrayValue:{values:n}}}class ng extends Wx{constructor(e){super(),this.elements=e}}function h6(t,e){let n=p6(e);for(const r of t.elements)n=n.filter(i=>!Ba(i,r));return{arrayValue:{values:n}}}class U0 extends Wx{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function ED(t){return Xn(t.integerValue||t.doubleValue)}function p6(t){return oC(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bX{constructor(e,n){this.field=e,this.transform=n}}function xX(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof tg&&i instanceof tg||r instanceof ng&&i instanceof ng?Of(r.elements,i.elements,Ba):r instanceof U0&&i instanceof U0?Ba(r.Pe,i.Pe):r instanceof eg&&i instanceof eg}(t.transform,e.transform)}class wX{constructor(e,n){this.version=e,this.transformResults=n}}class ns{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ns}static exists(e){return new ns(void 0,e)}static updateTime(e){return new ns(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zy(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hx{}function m6(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new qx(t.key,ns.none()):new av(t.key,t.data,ns.none());{const n=t.data,r=Di.empty();let i=new Jr(Qr.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Jl(t.key,r,new es(i.toArray()),ns.none())}}function _X(t,e,n){t instanceof av?function(i,s,a){const o=i.value.clone(),c=CD(i.fieldTransforms,s,a.transformResults);o.setAll(c),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Jl?function(i,s,a){if(!Zy(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=CD(i.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(g6(i)),c.setAll(o),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function lm(t,e,n,r){return t instanceof av?function(s,a,o,c){if(!Zy(s.precondition,a))return o;const u=s.value.clone(),d=TD(s.fieldTransforms,c,a);return u.setAll(d),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Jl?function(s,a,o,c){if(!Zy(s.precondition,a))return o;const u=TD(s.fieldTransforms,c,a),d=a.data;return d.setAll(g6(s)),d.setAll(u),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,a,o){return Zy(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(t,e,n)}function SX(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=d6(r.transform,i||null);s!=null&&(n===null&&(n=Di.empty()),n.set(r.field,s))}return n||null}function jD(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Of(r,i,(s,a)=>xX(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class av extends Hx{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Jl extends Hx{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function g6(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function CD(t,e,n){const r=new Map;rn(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,o=e.data.field(s.field);r.set(s.field,yX(a,o,n[i]))}return r}function TD(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,vX(s,a,e))}return r}class qx extends Hx{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AX extends Hx{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EX{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&_X(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=lm(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=lm(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=c6();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=n.has(i.key)?null:o;const c=m6(a,o);c!==null&&r.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(wt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),kt())}isEqual(e){return this.batchId===e.batchId&&Of(this.mutations,e.mutations,(n,r)=>jD(n,r))&&Of(this.baseMutations,e.baseMutations,(n,r)=>jD(n,r))}}class fC{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){rn(e.mutations.length===r.length);let i=function(){return fX}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new fC(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jX{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CX{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lr,Rt;function TX(t){switch(t){default:return mt();case Ae.CANCELLED:case Ae.UNKNOWN:case Ae.DEADLINE_EXCEEDED:case Ae.RESOURCE_EXHAUSTED:case Ae.INTERNAL:case Ae.UNAVAILABLE:case Ae.UNAUTHENTICATED:return!1;case Ae.INVALID_ARGUMENT:case Ae.NOT_FOUND:case Ae.ALREADY_EXISTS:case Ae.PERMISSION_DENIED:case Ae.FAILED_PRECONDITION:case Ae.ABORTED:case Ae.OUT_OF_RANGE:case Ae.UNIMPLEMENTED:case Ae.DATA_LOSS:return!0}}function v6(t){if(t===void 0)return No("GRPC error has no .code"),Ae.UNKNOWN;switch(t){case lr.OK:return Ae.OK;case lr.CANCELLED:return Ae.CANCELLED;case lr.UNKNOWN:return Ae.UNKNOWN;case lr.DEADLINE_EXCEEDED:return Ae.DEADLINE_EXCEEDED;case lr.RESOURCE_EXHAUSTED:return Ae.RESOURCE_EXHAUSTED;case lr.INTERNAL:return Ae.INTERNAL;case lr.UNAVAILABLE:return Ae.UNAVAILABLE;case lr.UNAUTHENTICATED:return Ae.UNAUTHENTICATED;case lr.INVALID_ARGUMENT:return Ae.INVALID_ARGUMENT;case lr.NOT_FOUND:return Ae.NOT_FOUND;case lr.ALREADY_EXISTS:return Ae.ALREADY_EXISTS;case lr.PERMISSION_DENIED:return Ae.PERMISSION_DENIED;case lr.FAILED_PRECONDITION:return Ae.FAILED_PRECONDITION;case lr.ABORTED:return Ae.ABORTED;case lr.OUT_OF_RANGE:return Ae.OUT_OF_RANGE;case lr.UNIMPLEMENTED:return Ae.UNIMPLEMENTED;case lr.DATA_LOSS:return Ae.DATA_LOSS;default:return mt()}}(Rt=lr||(lr={}))[Rt.OK=0]="OK",Rt[Rt.CANCELLED=1]="CANCELLED",Rt[Rt.UNKNOWN=2]="UNKNOWN",Rt[Rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rt[Rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rt[Rt.NOT_FOUND=5]="NOT_FOUND",Rt[Rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rt[Rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rt[Rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rt[Rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rt[Rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rt[Rt.ABORTED=10]="ABORTED",Rt[Rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rt[Rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rt[Rt.INTERNAL=13]="INTERNAL",Rt[Rt.UNAVAILABLE=14]="UNAVAILABLE",Rt[Rt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PX(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NX=new fu([4294967295,4294967295],0);function PD(t){const e=PX().encode(t),n=new B$;return n.update(e),new Uint8Array(n.digest())}function ND(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new fu([n,r],0),new fu([i,s],0)]}class hC{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Up(`Invalid padding: ${n}`);if(r<0)throw new Up(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Up(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Up(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=fu.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(fu.fromNumber(r)));return i.compare(NX)===1&&(i=new fu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=PD(e),[r,i]=ND(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new hC(s,i,n);return r.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const n=PD(e),[r,i]=ND(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Up extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ov.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Kx(wt.min(),i,new Ln(qt),ko(),kt())}}class ov{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ov(r,n,kt(),kt(),kt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class y6{constructor(e,n){this.targetId=e,this.me=n}}class b6{constructor(e,n,r=ni.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class kD{constructor(){this.fe=0,this.ge=ID(),this.pe=ni.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=kt(),n=kt(),r=kt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:mt()}}),new ov(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=ID()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,rn(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class kX{constructor(e){this.Le=e,this.Be=new Map,this.ke=ko(),this.qe=DD(),this.Qe=new Ln(qt)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:mt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(IA(s))if(r===0){const a=new it(s.path);this.Ue(n,a,fi.newNoDocument(a,wt.min()))}else rn(r===1);else{const a=this.Ye(n);if(a!==r){const o=this.Ze(e),c=o?this.Xe(o,e,a):1;if(c!==0){this.je(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,o;try{a=Cu(r).toUint8Array()}catch(c){if(c instanceof Q$)return Ym("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new hC(a,i,s)}catch(c){return Ym(c instanceof Up?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.Ie===0?null:o}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,a)=>{const o=this.Je(a);if(o){if(s.current&&IA(o.target)){const c=new it(o.target.path);this.ke.get(c)!==null||this.it(a,c)||this.Ue(a,c,fi.newNoDocument(c,e))}s.be&&(n.set(a,s.ve()),s.Ce())}});let r=kt();this.qe.forEach((s,a)=>{let o=!0;a.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new Kx(e,n,this.Qe,this.ke,r);return this.ke=ko(),this.qe=DD(),this.Qe=new Ln(qt),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new kD,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Jr(qt),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Xe("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new kD),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function DD(){return new Ln(it.comparator)}function ID(){return new Ln(it.comparator)}const DX={asc:"ASCENDING",desc:"DESCENDING"},IX={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OX={and:"AND",or:"OR"};class MX{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function RA(t,e){return t.useProto3Json||Vx(e)?e:{value:e}}function W0(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function x6(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function RX(t,e){return W0(t,e.toTimestamp())}function Ra(t){return rn(!!t),wt.fromTimestamp(function(n){const r=Ul(n);return new pr(r.seconds,r.nanos)}(t))}function pC(t,e){return LA(t,e).canonicalString()}function LA(t,e){const n=function(i){return new En(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function w6(t){const e=En.fromString(t);return rn(j6(e)),e}function zA(t,e){return pC(t.databaseId,e.path)}function o_(t,e){const n=w6(e);if(n.get(1)!==t.databaseId.projectId)throw new He(Ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new He(Ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new it(S6(n))}function _6(t,e){return pC(t.databaseId,e)}function LX(t){const e=w6(t);return e.length===4?En.emptyPath():S6(e)}function $A(t){return new En(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function S6(t){return rn(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function OD(t,e,n){return{name:zA(t,e),fields:n.value.mapValue.fields}}function zX(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:mt()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(rn(d===void 0||typeof d=="string"),ni.fromBase64String(d||"")):(rn(d===void 0||d instanceof Buffer||d instanceof Uint8Array),ni.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(u){const d=u.code===void 0?Ae.UNKNOWN:v6(u.code);return new He(d,u.message||"")}(a);n=new b6(r,i,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=o_(t,r.document.name),s=Ra(r.document.updateTime),a=r.document.createTime?Ra(r.document.createTime):wt.min(),o=new Di({mapValue:{fields:r.document.fields}}),c=fi.newFoundDocument(i,s,a,o),u=r.targetIds||[],d=r.removedTargetIds||[];n=new Jy(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=o_(t,r.document),s=r.readTime?Ra(r.readTime):wt.min(),a=fi.newNoDocument(i,s),o=r.removedTargetIds||[];n=new Jy([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=o_(t,r.document),s=r.removedTargetIds||[];n=new Jy([],s,i,null)}else{if(!("filter"in e))return mt();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new CX(i,s),o=r.targetId;n=new y6(o,a)}}return n}function $X(t,e){let n;if(e instanceof av)n={update:OD(t,e.key,e.value)};else if(e instanceof qx)n={delete:zA(t,e.key)};else if(e instanceof Jl)n={update:OD(t,e.key,e.data),updateMask:GX(e.fieldMask)};else{if(!(e instanceof AX))return mt();n={verify:zA(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const o=a.transform;if(o instanceof eg)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof tg)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof ng)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof U0)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw mt()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:RX(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:mt()}(t,e.precondition)),n}function FX(t,e){return t&&t.length>0?(rn(e!==void 0),t.map(n=>function(i,s){let a=i.updateTime?Ra(i.updateTime):Ra(s);return a.isEqual(wt.min())&&(a=Ra(s)),new wX(a,i.transformResults||[])}(n,e))):[]}function VX(t,e){return{documents:[_6(t,e.path)]}}function BX(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=_6(t,i);const s=function(u){if(u.length!==0)return E6(sa.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(u){if(u.length!==0)return u.map(d=>function(h){return{field:Rd(h.field),direction:HX(h.dir)}}(d))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const o=RA(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function UX(t){let e=LX(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){rn(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(f){const h=A6(f);return h instanceof sa&&e6(h)?h.getFilters():[h]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(h=>function(m){return new B0(Ld(m.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(n.orderBy));let o=null;n.limit&&(o=function(f){let h;return h=typeof f=="object"?f.value:f,Vx(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(f){const h=!!f.before,p=f.values||[];return new V0(p,h)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const h=!f.before,p=f.values||[];return new V0(p,h)}(n.endAt)),oX(e,i,a,s,o,"F",c,u)}function WX(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return mt()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function A6(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ld(n.unaryFilter.field);return dr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ld(n.unaryFilter.field);return dr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ld(n.unaryFilter.field);return dr.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Ld(n.unaryFilter.field);return dr.create(a,"!=",{nullValue:"NULL_VALUE"});default:return mt()}}(t):t.fieldFilter!==void 0?function(n){return dr.create(Ld(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return mt()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return sa.create(n.compositeFilter.filters.map(r=>A6(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return mt()}}(n.compositeFilter.op))}(t):mt()}function HX(t){return DX[t]}function qX(t){return IX[t]}function KX(t){return OX[t]}function Rd(t){return{fieldPath:t.canonicalString()}}function Ld(t){return Qr.fromServerFormat(t.fieldPath)}function E6(t){return t instanceof dr?function(n){if(n.op==="=="){if(xD(n.value))return{unaryFilter:{field:Rd(n.field),op:"IS_NAN"}};if(bD(n.value))return{unaryFilter:{field:Rd(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xD(n.value))return{unaryFilter:{field:Rd(n.field),op:"IS_NOT_NAN"}};if(bD(n.value))return{unaryFilter:{field:Rd(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rd(n.field),op:qX(n.op),value:n.value}}}(t):t instanceof sa?function(n){const r=n.getFilters().map(i=>E6(i));return r.length===1?r[0]:{compositeFilter:{op:KX(n.op),filters:r}}}(t):mt()}function GX(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function j6(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,n,r,i,s=wt.min(),a=wt.min(),o=ni.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new wl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new wl(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YX{constructor(e){this.ct=e}}function QX(t){const e=UX({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?MA(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XX{constructor(){this.un=new ZX}addToCollectionParentIndex(e,n){return this.un.add(n),Ee.resolve()}getCollectionParents(e,n){return Ee.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Ee.resolve()}deleteFieldIndex(e,n){return Ee.resolve()}deleteAllFieldIndexes(e){return Ee.resolve()}createTargetIndexes(e,n){return Ee.resolve()}getDocumentsMatchingTarget(e,n){return Ee.resolve(null)}getIndexType(e,n){return Ee.resolve(0)}getFieldIndexes(e,n){return Ee.resolve([])}getNextCollectionGroupToUpdate(e){return Ee.resolve(null)}getMinOffset(e,n){return Ee.resolve(Bl.min())}getMinOffsetFromCollectionGroup(e,n){return Ee.resolve(Bl.min())}updateCollectionGroup(e,n,r){return Ee.resolve()}updateIndexEntries(e,n){return Ee.resolve()}}class ZX{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Jr(En.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Jr(En.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Lf(0)}static kn(){return new Lf(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JX{constructor(){this.changes=new Ph(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,fi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ee.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eZ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tZ{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&lm(r.mutation,i,es.empty(),pr.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,kt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=kt()){const i=eu();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=Bp();return s.forEach((o,c)=>{a=a.insert(o,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=eu();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,kt()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,o)=>{n.set(a,o)})})}computeViews(e,n,r,i){let s=ko();const a=om(),o=function(){return om()}();return n.forEach((c,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Jl)?s=s.insert(u.key,u):d!==void 0?(a.set(u.key,d.mutation.getFieldMask()),lm(d.mutation,u,d.mutation.getFieldMask(),pr.now())):a.set(u.key,es.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>a.set(u,d)),n.forEach((u,d)=>{var f;return o.set(u,new eZ(d,(f=a.get(u))!==null&&f!==void 0?f:null))}),o))}recalculateAndSaveOverlays(e,n){const r=om();let i=new Ln((a,o)=>a-o),s=kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const o of a)o.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let d=r.get(c)||es.empty();d=o.applyToLocalView(u,d),r.set(c,d);const f=(i.get(o.batchId)||kt()).add(c);i=i.insert(o.batchId,f)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,d=c.value,f=c6();d.forEach(h=>{if(!s.has(h)){const p=m6(n.get(h),r.get(h));p!==null&&f.set(h,p),s=s.add(h)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,f))}return Ee.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return it.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):i6(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Ee.resolve(eu());let o=-1,c=s;return a.next(u=>Ee.forEach(u,(d,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),s.get(d)?Ee.resolve():this.remoteDocumentCache.getEntry(e,d).next(h=>{c=c.insert(d,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,kt())).next(d=>({batchId:o,changes:l6(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new it(n)).next(r=>{let i=Bp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=Bp();return this.indexManager.getCollectionParents(e,s).next(o=>Ee.forEach(o,c=>{const u=function(f,h){return new sv(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,h)=>{a=a.insert(f,h)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((c,u)=>{const d=u.getKey();a.get(d)===null&&(a=a.insert(d,fi.newInvalidDocument(d)))});let o=Bp();return a.forEach((c,u)=>{const d=s.get(c);d!==void 0&&lm(d.mutation,u,es.empty(),pr.now()),Ux(n,u)&&(o=o.insert(c,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nZ{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Ee.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ra(i.createTime)}}(n)),Ee.resolve()}getNamedQuery(e,n){return Ee.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:QX(i.bundledQuery),readTime:Ra(i.readTime)}}(n)),Ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rZ{constructor(){this.overlays=new Ln(it.comparator),this.Ir=new Map}getOverlay(e,n){return Ee.resolve(this.overlays.get(n))}getOverlays(e,n){const r=eu();return Ee.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),Ee.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),Ee.resolve()}getOverlaysForCollection(e,n,r){const i=eu(),s=n.length+1,a=new it(n.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Ee.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ln((u,d)=>u-d);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=eu(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=eu(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>o.set(u,d)),!(o.size()>=i)););return Ee.resolve(o)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new jX(n,r));let s=this.Ir.get(n);s===void 0&&(s=kt(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iZ{constructor(){this.sessionToken=ni.EMPTY_BYTE_STRING}getSessionToken(e){return Ee.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(){this.Tr=new Jr(Dr.Er),this.dr=new Jr(Dr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Dr(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Dr(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new it(new En([])),r=new Dr(n,e),i=new Dr(n,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new it(new En([])),r=new Dr(n,e),i=new Dr(n,e+1);let s=kt();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new Dr(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Dr{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return it.comparator(e.key,n.key)||qt(e.wr,n.wr)}static Ar(e,n){return qt(e.wr,n.wr)||it.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sZ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Jr(Dr.Er)}checkEmpty(e){return Ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new EX(s,n,r,i);this.mutationQueue.push(a);for(const o of i)this.br=this.br.add(new Dr(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ee.resolve(a)}lookupMutationBatch(e,n){return Ee.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return Ee.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ee.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Dr(n,0),i=new Dr(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{const o=this.Dr(a.wr);s.push(o)}),Ee.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Jr(qt);return n.forEach(i=>{const s=new Dr(i,0),a=new Dr(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],o=>{r=r.add(o.wr)})}),Ee.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;it.isDocumentKey(s)||(s=s.child(""));const a=new Dr(new it(s),0);let o=new Jr(qt);return this.br.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(o=o.add(c.wr)),!0)},a),Ee.resolve(this.Cr(o))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){rn(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Ee.forEach(n.mutations,i=>{const s=new Dr(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Dr(n,0),i=this.br.firstAfterOrEqual(r);return Ee.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ee.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aZ{constructor(e){this.Mr=e,this.docs=function(){return new Ln(it.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Ee.resolve(r?r.document.mutableCopy():fi.newInvalidDocument(n))}getEntries(e,n){let r=ko();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():fi.newInvalidDocument(i))}),Ee.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ko();const a=n.path,o=new it(a.child("")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||BQ(VQ(d),r)<=0||(i.has(d.key)||Ux(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Ee.resolve(s)}getAllFromCollectionGroup(e,n,r,i){mt()}Or(e,n){return Ee.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new oZ(this)}getSize(e){return Ee.resolve(this.size)}}class oZ extends JX{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),Ee.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lZ{constructor(e){this.persistence=e,this.Nr=new Ph(n=>lC(n),cC),this.lastRemoteSnapshotVersion=wt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new mC,this.targetCount=0,this.kr=Lf.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),Ee.resolve()}getLastRemoteSnapshotVersion(e){return Ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ee.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ee.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Ee.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Lf(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Ee.resolve()}updateTargetData(e,n){return this.Kn(n),Ee.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Ee.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),Ee.waitFor(s).next(()=>i)}getTargetCount(e){return Ee.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Ee.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Ee.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),Ee.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Ee.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Ee.resolve(r)}containsKey(e,n){return Ee.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cZ{constructor(e,n){this.qr={},this.overlays={},this.Qr=new iC(0),this.Kr=!1,this.Kr=!0,this.$r=new iZ,this.referenceDelegate=e(this),this.Ur=new lZ(this),this.indexManager=new XX,this.remoteDocumentCache=function(i){return new aZ(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new YX(n),this.Gr=new nZ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new rZ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new sZ(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Xe("MemoryPersistence","Starting transaction:",e);const i=new uZ(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return Ee.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class uZ extends WQ{constructor(e){super(),this.currentSequenceNumber=e}}class gC{constructor(e){this.persistence=e,this.Jr=new mC,this.Yr=null}static Zr(e){return new gC(e)}get Xr(){if(this.Yr)return this.Yr;throw mt()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Ee.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Ee.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Ee.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ee.forEach(this.Xr,r=>{const i=it.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,wt.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Ee.or([()=>Ee.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=kt(),i=kt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new vC(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dZ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fZ{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return rG()?8:HQ(Ui())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new dZ;return this.Xi(e,n,a).next(o=>{if(s.result=o,this.zi)return this.es(e,n,a,o.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Sp()<=It.DEBUG&&Xe("QueryEngine","SDK will not create cache indexes for query:",Md(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ee.resolve()):(Sp()<=It.DEBUG&&Xe("QueryEngine","Query:",Md(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Sp()<=It.DEBUG&&Xe("QueryEngine","The SDK decides to create cache indexes for query:",Md(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ma(n))):Ee.resolve())}Yi(e,n){if(AD(n))return Ee.resolve(null);let r=Ma(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=MA(n,null,"F"),r=Ma(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=kt(...s);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ts(n,o);return this.ns(n,u,a,c.readTime)?this.Yi(e,MA(n,null,"F")):this.rs(e,u,n,c)}))})))}Zi(e,n,r,i){return AD(n)||i.isEqual(wt.min())?Ee.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const a=this.ts(n,s);return this.ns(n,a,r,i)?Ee.resolve(null):(Sp()<=It.DEBUG&&Xe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Md(n)),this.rs(e,a,n,FQ(i,-1)).next(o=>o))})}ts(e,n){let r=new Jr(a6(e));return n.forEach((i,s)=>{Ux(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Sp()<=It.DEBUG&&Xe("QueryEngine","Using full collection scan to execute query:",Md(n)),this.Ji.getDocumentsMatchingQuery(e,n,Bl.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hZ{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ln(qt),this._s=new Ph(s=>lC(s),cC),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tZ(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function pZ(t,e,n,r){return new hZ(t,e,n,r)}async function C6(t,e){const n=_t(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],o=[];let c=kt();for(const u of i){a.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({hs:u,removedBatchIds:a,addedBatchIds:o}))})})}function mZ(t,e){const n=_t(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(o,c,u,d){const f=u.batch,h=f.keys();let p=Ee.resolve();return h.forEach(m=>{p=p.next(()=>d.getEntry(c,m)).next(g=>{const b=u.docVersions.get(m);rn(b!==null),g.version.compareTo(b)<0&&(f.applyToRemoteDocument(g,u),g.isValidDocument()&&(g.setReadTime(u.commitVersion),d.addEntry(g)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(c,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let c=kt();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(c=c.add(o.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function T6(t){const e=_t(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function gZ(t,e){const n=_t(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const o=[];e.targetChanges.forEach((d,f)=>{const h=i.get(f);if(!h)return;o.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,f)));let p=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?p=p.withResumeToken(ni.EMPTY_BYTE_STRING,wt.min()).withLastLimboFreeSnapshotVersion(wt.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,r)),i=i.insert(f,p),function(g,b,x){return g.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(h,p,d)&&o.push(n.Ur.updateTargetData(s,p))});let c=ko(),u=kt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push(vZ(s,a,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!r.isEqual(wt.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(f=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(d)}return Ee.waitFor(o).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(n.os=i,s))}function vZ(t,e,n){let r=kt(),i=kt();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=ko();return n.forEach((o,c)=>{const u=s.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),c.isNoDocument()&&c.version.isEqual(wt.min())?(e.removeEntry(o,c.readTime),a=a.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),a=a.insert(o,c)):Xe("LocalStore","Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)}),{Ps:a,Is:i}})}function yZ(t,e){const n=_t(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function bZ(t,e){const n=_t(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,Ee.resolve(i)):n.Ur.allocateTargetId(r).next(a=>(i=new wl(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function FA(t,e,n){const r=_t(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!iv(a))throw a;Xe("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function MD(t,e,n){const r=_t(t);let i=wt.min(),s=kt();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,u,d){const f=_t(c),h=f._s.get(d);return h!==void 0?Ee.resolve(f.os.get(h)):f.Ur.getTargetData(u,d)}(r,a,Ma(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,o.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?i:wt.min(),n?s:kt())).next(o=>(xZ(r,cX(e),o),{documents:o,Ts:s})))}function xZ(t,e,n){let r=t.us.get(e)||wt.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class RD{constructor(){this.activeTargetIds=mX()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wZ{constructor(){this.so=new RD,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new RD,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Z{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Xe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Xe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ay=null;function l_(){return ay===null?ay=function(){return 268435456+Math.round(2147483648*Math.random())}():ay++,"0x"+ay.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SZ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AZ{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li="WebChannelConnection";class EZ extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,a){const o=l_(),c=this.xo(n,r.toUriEncodedString());Xe("RestConnection",`Sending RPC '${n}' ${o}:`,c,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,a),this.No(n,c,u,i).then(d=>(Xe("RestConnection",`Received RPC '${n}' ${o}: `,d),d),d=>{throw Ym("RestConnection",`RPC '${n}' ${o} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(n,r,i,s,a,o){return this.Mo(n,r,i,s,a)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Th}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>n[a]=s),i&&i.headers.forEach((s,a)=>n[a]=s)}xo(n,r){const i=SZ[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=l_();return new Promise((a,o)=>{const c=new U$;c.setWithCredentials(!0),c.listenOnce(W$.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Qy.NO_ERROR:const d=c.getResponseJson();Xe(li,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),a(d);break;case Qy.TIMEOUT:Xe(li,`RPC '${e}' ${s} timed out`),o(new He(Ae.DEADLINE_EXCEEDED,"Request time out"));break;case Qy.HTTP_ERROR:const f=c.getStatus();if(Xe(li,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);const p=h==null?void 0:h.error;if(p&&p.status&&p.message){const m=function(b){const x=b.toLowerCase().replace(/_/g,"-");return Object.values(Ae).indexOf(x)>=0?x:Ae.UNKNOWN}(p.status);o(new He(m,p.message))}else o(new He(Ae.UNKNOWN,"Server responded with status "+c.getStatus()))}else o(new He(Ae.UNAVAILABLE,"Connection failed."));break;default:mt()}}finally{Xe(li,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);Xe(li,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=l_(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=K$(),o=q$(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=s.join("");Xe(li,`Creating RPC '${e}' stream ${i}: ${d}`,c);const f=a.createWebChannel(d,c);let h=!1,p=!1;const m=new AZ({Io:b=>{p?Xe(li,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(h||(Xe(li,`Opening RPC '${e}' stream ${i} transport.`),f.open(),h=!0),Xe(li,`RPC '${e}' stream ${i} sending:`,b),f.send(b))},To:()=>f.close()}),g=(b,x,w)=>{b.listen(x,_=>{try{w(_)}catch(E){setTimeout(()=>{throw E},0)}})};return g(f,Vp.EventType.OPEN,()=>{p||(Xe(li,`RPC '${e}' stream ${i} transport opened.`),m.yo())}),g(f,Vp.EventType.CLOSE,()=>{p||(p=!0,Xe(li,`RPC '${e}' stream ${i} transport closed`),m.So())}),g(f,Vp.EventType.ERROR,b=>{p||(p=!0,Ym(li,`RPC '${e}' stream ${i} transport errored:`,b),m.So(new He(Ae.UNAVAILABLE,"The operation could not be completed")))}),g(f,Vp.EventType.MESSAGE,b=>{var x;if(!p){const w=b.data[0];rn(!!w);const _=w,E=_.error||((x=_[0])===null||x===void 0?void 0:x.error);if(E){Xe(li,`RPC '${e}' stream ${i} received error:`,E);const j=E.status;let T=function(D){const O=lr[D];if(O!==void 0)return v6(O)}(j),A=E.message;T===void 0&&(T=Ae.INTERNAL,A="Unknown error status: "+j+" with message "+E.message),p=!0,m.So(new He(T,A)),f.close()}else Xe(li,`RPC '${e}' stream ${i} received:`,w),m.bo(w)}}),g(o,H$.STAT_EVENT,b=>{b.stat===PA.PROXY?Xe(li,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===PA.NOPROXY&&Xe(li,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}function c_(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(t){return new MX(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Xe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(e,n,r,i,s,a,o,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new P6(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Ae.RESOURCE_EXHAUSTED?(No(n.toString()),No("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new He(Ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Xe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Xe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jZ extends N6{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=zX(this.serializer,e),r=function(s){if(!("targetChange"in s))return wt.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?wt.min():a.readTime?Ra(a.readTime):wt.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=$A(this.serializer),n.addTarget=function(s,a){let o;const c=a.target;if(o=IA(c)?{documents:VX(s,c)}:{query:BX(s,c)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=x6(s,a.resumeToken);const u=RA(s,a.expectedCount);u!==null&&(o.expectedCount=u)}else if(a.snapshotVersion.compareTo(wt.min())>0){o.readTime=W0(s,a.snapshotVersion.toTimestamp());const u=RA(s,a.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const r=WX(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=$A(this.serializer),n.removeTarget=e,this.a_(n)}}class CZ extends N6{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return rn(!!e.streamToken),this.lastStreamToken=e.streamToken,rn(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){rn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=FX(e.writeResults,e.commitTime),r=Ra(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=$A(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>$X(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TZ extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new He(Ae.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,LA(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new He(Ae.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,LA(n,r),i,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new He(Ae.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class PZ{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(No(n),this.D_=!1):Xe("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NZ{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(async()=>{Gu(this)&&(Xe("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=_t(c);u.L_.add(4),await lv(u),u.q_.set("Unknown"),u.L_.delete(4),await Yx(u)}(this))})}),this.q_=new PZ(r,i)}}async function Yx(t){if(Gu(t))for(const e of t.B_)await e(!0)}async function lv(t){for(const e of t.B_)await e(!1)}function k6(t,e){const n=_t(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),wC(n)?xC(n):Nh(n).r_()&&bC(n,e))}function yC(t,e){const n=_t(t),r=Nh(n);n.N_.delete(e),r.r_()&&D6(n,e),n.N_.size===0&&(r.r_()?r.o_():Gu(n)&&n.q_.set("Unknown"))}function bC(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(wt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Nh(t).A_(e)}function D6(t,e){t.Q_.xe(e),Nh(t).R_(e)}function xC(t){t.Q_=new kX({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Nh(t).start(),t.q_.v_()}function wC(t){return Gu(t)&&!Nh(t).n_()&&t.N_.size>0}function Gu(t){return _t(t).L_.size===0}function I6(t){t.Q_=void 0}async function kZ(t){t.q_.set("Online")}async function DZ(t){t.N_.forEach((e,n)=>{bC(t,e)})}async function IZ(t,e){I6(t),wC(t)?(t.q_.M_(e),xC(t)):t.q_.set("Unknown")}async function OZ(t,e,n){if(t.q_.set("Online"),e instanceof b6&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const o of s.targetIds)i.N_.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.N_.delete(o),i.Q_.removeTarget(o))}(t,e)}catch(r){Xe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await H0(t,r)}else if(e instanceof Jy?t.Q_.Ke(e):e instanceof y6?t.Q_.He(e):t.Q_.We(e),!n.isEqual(wt.min()))try{const r=await T6(t.localStore);n.compareTo(r)>=0&&await function(s,a){const o=s.Q_.rt(a);return o.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(c.resumeToken,a))}}),o.targetMismatches.forEach((c,u)=>{const d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(ni.EMPTY_BYTE_STRING,d.snapshotVersion)),D6(s,c);const f=new wl(d.target,c,u,d.sequenceNumber);bC(s,f)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){Xe("RemoteStore","Failed to raise snapshot:",r),await H0(t,r)}}async function H0(t,e,n){if(!iv(e))throw e;t.L_.add(1),await lv(t),t.q_.set("Offline"),n||(n=()=>T6(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Xe("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Yx(t)})}function O6(t,e){return e().catch(n=>H0(t,n,e))}async function Qx(t){const e=_t(t),n=Wl(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;MZ(e);)try{const i=await yZ(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,RZ(e,i)}catch(i){await H0(e,i)}M6(e)&&R6(e)}function MZ(t){return Gu(t)&&t.O_.length<10}function RZ(t,e){t.O_.push(e);const n=Wl(t);n.r_()&&n.V_&&n.m_(e.mutations)}function M6(t){return Gu(t)&&!Wl(t).n_()&&t.O_.length>0}function R6(t){Wl(t).start()}async function LZ(t){Wl(t).p_()}async function zZ(t){const e=Wl(t);for(const n of t.O_)e.m_(n.mutations)}async function $Z(t,e,n){const r=t.O_.shift(),i=fC.from(r,e,n);await O6(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Qx(t)}async function FZ(t,e){e&&Wl(t).V_&&await async function(r,i){if(function(a){return TX(a)&&a!==Ae.ABORTED}(i.code)){const s=r.O_.shift();Wl(r).s_(),await O6(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Qx(r)}}(t,e),M6(t)&&R6(t)}async function zD(t,e){const n=_t(t);n.asyncQueue.verifyOperationInProgress(),Xe("RemoteStore","RemoteStore received new credentials");const r=Gu(n);n.L_.add(3),await lv(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Yx(n)}async function VZ(t,e){const n=_t(t);e?(n.L_.delete(2),await Yx(n)):e||(n.L_.add(2),await lv(n),n.q_.set("Unknown"))}function Nh(t){return t.K_||(t.K_=function(n,r,i){const s=_t(n);return s.w_(),new jZ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:kZ.bind(null,t),Ro:DZ.bind(null,t),mo:IZ.bind(null,t),d_:OZ.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),wC(t)?xC(t):t.q_.set("Unknown")):(await t.K_.stop(),I6(t))})),t.K_}function Wl(t){return t.U_||(t.U_=function(n,r,i){const s=_t(n);return s.w_(),new CZ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:LZ.bind(null,t),mo:FZ.bind(null,t),f_:zZ.bind(null,t),g_:$Z.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Qx(t)):(await t.U_.stop(),t.O_.length>0&&(Xe("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new hu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,o=new _C(e,n,a,i,s);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new He(Ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function SC(t,e){if(No("AsyncQueue",`${e}: ${t}`),iv(t))return new He(Ae.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e){this.comparator=e?(n,r)=>e(n,r)||it.comparator(n.key,r.key):(n,r)=>it.comparator(n.key,r.key),this.keyedMap=Bp(),this.sortedSet=new Ln(this.comparator)}static emptySet(e){return new yf(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof yf)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new yf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(){this.W_=new Ln(it.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):mt():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class zf{constructor(e,n,r,i,s,a,o,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(o=>{a.push({type:0,doc:o})}),new zf(e,n,yf.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bx(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BZ{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class UZ{constructor(){this.queries=FD(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=_t(n),s=i.queries;i.queries=FD(),s.forEach((a,o)=>{for(const c of o.j_)c.onError(r)})})(this,new He(Ae.ABORTED,"Firestore shutting down"))}}function FD(){return new Ph(t=>s6(t),Bx)}async function WZ(t,e){const n=_t(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new BZ,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const o=SC(a,`Initialization of query '${Md(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&AC(n)}async function HZ(t,e){const n=_t(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function qZ(t,e){const n=_t(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const o of a.j_)o.X_(i)&&(r=!0);a.z_=i}}r&&AC(n)}function KZ(t,e,n){const r=_t(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function AC(t){t.Y_.forEach(e=>{e.next()})}var VA,VD;(VD=VA||(VA={})).ea="default",VD.Cache="cache";class GZ{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new zf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=zf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==VA.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e){this.key=e}}class z6{constructor(e){this.key=e}}class YZ{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=kt(),this.mutatedKeys=kt(),this.Aa=a6(e),this.Ra=new yf(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new $D,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,o=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{const h=i.get(d),p=Ux(this.query,f)?f:null,m=!!h&&this.mutatedKeys.has(h.key),g=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let b=!1;h&&p?h.data.isEqual(p.data)?m!==g&&(r.track({type:3,doc:p}),b=!0):this.ga(h,p)||(r.track({type:2,doc:p}),b=!0,(c&&this.Aa(p,c)>0||u&&this.Aa(p,u)<0)&&(o=!0)):!h&&p?(r.track({type:0,doc:p}),b=!0):h&&!p&&(r.track({type:1,doc:h}),b=!0,(c||u)&&(o=!0)),b&&(p?(a=a.add(p),s=g?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:a,fa:r,ns:o,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((d,f)=>function(p,m){const g=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mt()}};return g(p)-g(m)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;const o=n&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,u=c!==this.Ea;return this.Ea=c,a.length!==0||u?{snapshot:new zf(this.query,e.Ra,s,a,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new $D,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=kt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new z6(r))}),this.da.forEach(r=>{e.has(r)||n.push(new L6(r))}),n}ba(e){this.Ta=e.Ts,this.da=kt();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return zf.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class QZ{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class XZ{constructor(e){this.key=e,this.va=!1}}class ZZ{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Ph(o=>s6(o),Bx),this.Ma=new Map,this.xa=new Set,this.Oa=new Ln(it.comparator),this.Na=new Map,this.La=new mC,this.Ba={},this.ka=new Map,this.qa=Lf.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function JZ(t,e,n=!0){const r=W6(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await $6(r,e,n,!0),i}async function eJ(t,e){const n=W6(t);await $6(n,e,!0,!1)}async function $6(t,e,n,r){const i=await bZ(t.localStore,Ma(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await tJ(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&k6(t.remoteStore,i),o}async function tJ(t,e,n,r,i){t.Ka=(f,h,p)=>async function(g,b,x,w){let _=b.view.ma(x);_.ns&&(_=await MD(g.localStore,b.query,!1).then(({documents:A})=>b.view.ma(A,_)));const E=w&&w.targetChanges.get(b.targetId),j=w&&w.targetMismatches.get(b.targetId)!=null,T=b.view.applyChanges(_,g.isPrimaryClient,E,j);return UD(g,b.targetId,T.wa),T.snapshot}(t,f,h,p);const s=await MD(t.localStore,e,!0),a=new YZ(e,s.Ts),o=a.ma(s.documents),c=ov.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=a.applyChanges(o,t.isPrimaryClient,c);UD(t,n,u.wa);const d=new QZ(e,n,a);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function nJ(t,e,n){const r=_t(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!Bx(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await FA(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&yC(r.remoteStore,i.targetId),BA(r,i.targetId)}).catch(rv)):(BA(r,i.targetId),await FA(r.localStore,i.targetId,!0))}async function rJ(t,e){const n=_t(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),yC(n.remoteStore,r.targetId))}async function iJ(t,e,n){const r=dJ(t);try{const i=await function(a,o){const c=_t(a),u=pr.now(),d=o.reduce((p,m)=>p.add(m.key),kt());let f,h;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=ko(),g=kt();return c.cs.getEntries(p,d).next(b=>{m=b,m.forEach((x,w)=>{w.isValidDocument()||(g=g.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,m)).next(b=>{f=b;const x=[];for(const w of o){const _=SX(w,f.get(w.key).overlayedDocument);_!=null&&x.push(new Jl(w.key,_,X$(_.value.mapValue),ns.exists(!0)))}return c.mutationQueue.addMutationBatch(p,u,x,o)}).next(b=>{h=b;const x=b.applyToLocalDocumentSet(f,g);return c.documentOverlayCache.saveOverlays(p,b.batchId,x)})}).then(()=>({batchId:h.batchId,changes:l6(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,o,c){let u=a.Ba[a.currentUser.toKey()];u||(u=new Ln(qt)),u=u.insert(o,c),a.Ba[a.currentUser.toKey()]=u}(r,i.batchId,n),await cv(r,i.changes),await Qx(r.remoteStore)}catch(i){const s=SC(i,"Failed to persist write");n.reject(s)}}async function F6(t,e){const n=_t(t);try{const r=await gZ(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Na.get(s);a&&(rn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?rn(a.va):i.removedDocuments.size>0&&(rn(a.va),a.va=!1))}),await cv(n,r,e)}catch(r){await rv(r)}}function BD(t,e,n){const r=_t(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,a)=>{const o=a.view.Z_(e);o.snapshot&&i.push(o.snapshot)}),function(a,o){const c=_t(a);c.onlineState=o;let u=!1;c.queries.forEach((d,f)=>{for(const h of f.j_)h.Z_(o)&&(u=!0)}),u&&AC(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function sJ(t,e,n){const r=_t(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let a=new Ln(it.comparator);a=a.insert(s,fi.newNoDocument(s,wt.min()));const o=kt().add(s),c=new Kx(wt.min(),new Map,new Ln(qt),a,o);await F6(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),EC(r)}else await FA(r.localStore,e,!1).then(()=>BA(r,e,n)).catch(rv)}async function aJ(t,e){const n=_t(t),r=e.batch.batchId;try{const i=await mZ(n.localStore,e);B6(n,r,null),V6(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await cv(n,i)}catch(i){await rv(i)}}async function oJ(t,e,n){const r=_t(t);try{const i=await function(a,o){const c=_t(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,o).next(f=>(rn(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,o)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);B6(r,e,n),V6(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await cv(r,i)}catch(i){await rv(i)}}function V6(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function B6(t,e,n){const r=_t(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function BA(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||U6(t,r)})}function U6(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(yC(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),EC(t))}function UD(t,e,n){for(const r of n)r instanceof L6?(t.La.addReference(r.key,e),lJ(t,r)):r instanceof z6?(Xe("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||U6(t,r.key)):mt()}function lJ(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Xe("SyncEngine","New document in limbo: "+n),t.xa.add(r),EC(t))}function EC(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new it(En.fromString(e)),r=t.qa.next();t.Na.set(r,new XZ(n)),t.Oa=t.Oa.insert(n,r),k6(t.remoteStore,new wl(Ma(uC(n.path)),r,"TargetPurposeLimboResolution",iC.oe))}}async function cv(t,e,n){const r=_t(t),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((o,c)=>{a.push(r.Ka(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);const f=vC.Wi(c.targetId,u);s.push(f)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(c,u){const d=_t(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ee.forEach(u,h=>Ee.forEach(h.$i,p=>d.persistence.referenceDelegate.addReference(f,h.targetId,p)).next(()=>Ee.forEach(h.Ui,p=>d.persistence.referenceDelegate.removeReference(f,h.targetId,p)))))}catch(f){if(!iv(f))throw f;Xe("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const h=f.targetId;if(!f.fromCache){const p=d.os.get(h),m=p.snapshotVersion,g=p.withLastLimboFreeSnapshotVersion(m);d.os=d.os.insert(h,g)}}}(r.localStore,s))}async function cJ(t,e){const n=_t(t);if(!n.currentUser.isEqual(e)){Xe("SyncEngine","User change. New user:",e.toKey());const r=await C6(n.localStore,e);n.currentUser=e,function(s,a){s.ka.forEach(o=>{o.forEach(c=>{c.reject(new He(Ae.CANCELLED,a))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await cv(n,r.hs)}}function uJ(t,e){const n=_t(t),r=n.Na.get(e);if(r&&r.va)return kt().add(r.key);{let i=kt();const s=n.Ma.get(e);if(!s)return i;for(const a of s){const o=n.Fa.get(a);i=i.unionWith(o.view.Va)}return i}}function W6(t){const e=_t(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=F6.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uJ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sJ.bind(null,e),e.Ca.d_=qZ.bind(null,e.eventManager),e.Ca.$a=KZ.bind(null,e.eventManager),e}function dJ(t){const e=_t(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aJ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oJ.bind(null,e),e}class q0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gx(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return pZ(this.persistence,new fZ,e.initialUser,this.serializer)}Ga(e){return new cZ(gC.Zr,this.serializer)}Wa(e){return new wZ}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}q0.provider={build:()=>new q0};class UA{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>BD(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=cJ.bind(null,this.syncEngine),await VZ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new UZ}()}createDatastore(e){const n=Gx(e.databaseInfo.databaseId),r=function(s){return new EZ(s)}(e.databaseInfo);return function(s,a,o,c){return new TZ(s,a,o,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,o){return new NZ(r,i,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,n=>BD(this.syncEngine,n,0),function(){return LD.D()?new LD:new _Z}())}createSyncEngine(e,n){return function(i,s,a,o,c,u,d){const f=new ZZ(i,s,a,o,c,u);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=_t(i);Xe("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await lv(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}UA.provider={build:()=>new UA};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fJ{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):No("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hJ{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ni.UNAUTHENTICATED,this.clientId=G$.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{Xe("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Xe("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=SC(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function u_(t,e){t.asyncQueue.verifyOperationInProgress(),Xe("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await C6(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function WD(t,e){t.asyncQueue.verifyOperationInProgress();const n=await pJ(t);Xe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>zD(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>zD(e.remoteStore,i)),t._onlineComponents=e}async function pJ(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Xe("FirestoreClient","Using user provided OfflineComponentProvider");try{await u_(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Ae.FAILED_PRECONDITION||i.code===Ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ym("Error using user provided cache. Falling back to memory cache: "+n),await u_(t,new q0)}}else Xe("FirestoreClient","Using default OfflineComponentProvider"),await u_(t,new q0);return t._offlineComponents}async function H6(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Xe("FirestoreClient","Using user provided OnlineComponentProvider"),await WD(t,t._uninitializedComponentsProvider._online)):(Xe("FirestoreClient","Using default OnlineComponentProvider"),await WD(t,new UA))),t._onlineComponents}function mJ(t){return H6(t).then(e=>e.syncEngine)}async function HD(t){const e=await H6(t),n=e.eventManager;return n.onListen=JZ.bind(null,e.syncEngine),n.onUnlisten=nJ.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=eJ.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=rJ.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q6(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K6(t,e,n){if(!n)throw new He(Ae.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function gJ(t,e,n,r){if(e===!0&&r===!0)throw new He(Ae.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function KD(t){if(!it.isDocumentKey(t))throw new He(Ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function GD(t){if(it.isDocumentKey(t))throw new He(Ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Xx(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":mt()}function pu(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new He(Ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xx(t);throw new He(Ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new He(Ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new He(Ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gJ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=q6((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new He(Ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new He(Ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new He(Ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jC{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new YD({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new He(Ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new He(Ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new YD(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new DQ;switch(r.type){case"firstParty":return new MQ(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new He(Ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=qD.get(n);r&&(Xe("ComponentProvider","Removing Datastore"),qD.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new kh(this.firestore,e,this._query)}}class Vi{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ll(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vi(this.firestore,e,this._key)}}class Ll extends kh{constructor(e,n,r){super(e,n,uC(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vi(this.firestore,null,new it(e))}withConverter(e){return new Ll(this.firestore,e,this._path)}}function CC(t,e,...n){if(t=ti(t),K6("collection","path",e),t instanceof jC){const r=En.fromString(e,...n);return GD(r),new Ll(t,null,r)}{if(!(t instanceof Vi||t instanceof Ll))throw new He(Ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(En.fromString(e,...n));return GD(r),new Ll(t.firestore,null,r)}}function Yn(t,e,...n){if(t=ti(t),arguments.length===1&&(e=G$.newId()),K6("doc","path",e),t instanceof jC){const r=En.fromString(e,...n);return KD(r),new Vi(t,null,new it(r))}{if(!(t instanceof Vi||t instanceof Ll))throw new He(Ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(En.fromString(e,...n));return KD(r),new Vi(t.firestore,t instanceof Ll?t.converter:null,new it(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new P6(this,"async_queue_retry"),this.Vu=()=>{const r=c_();r&&Xe("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=c_();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=c_();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new hu;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!iv(e))throw e;Xe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(r);throw No("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=_C.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&mt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function XD(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class $f extends jC{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new QD,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new QD(e),this._firestoreClient=void 0,await e}}}function vJ(t,e,n){n||(n="(default)");const r=x$(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(Hm(s,e))return i;throw new He(Ae.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new He(Ae.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new He(Ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function TC(t){if(t._terminated)throw new He(Ae.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||yJ(t),t._firestoreClient}function yJ(t){var e,n,r;const i=t._freezeSettings(),s=function(o,c,u,d){return new GQ(o,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,q6(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new hJ(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(o){const c=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ff(ni.fromBase64String(e))}catch(n){throw new He(Ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ff(ni.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new He(Ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new He(Ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new He(Ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qt(this._lat,e._lat)||qt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bJ=/^__.*__$/;class xJ{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Jl(e,this.data,this.fieldMask,n,this.fieldTransforms):new av(e,this.data,n,this.fieldTransforms)}}class G6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Jl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Y6(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mt()}}class kC{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new kC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return K0(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Y6(this.Cu)&&bJ.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class wJ{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Gx(e)}Qu(e,n,r,i=!1){return new kC({Cu:e,methodName:n,qu:r,path:Qr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function DC(t){const e=t._freezeSettings(),n=Gx(t._databaseId);return new wJ(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Q6(t,e,n,r,i,s={}){const a=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);OC("Data must be an object, but it was:",a,r);const o=X6(r,a);let c,u;if(s.merge)c=new es(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const h=WA(e,f,n);if(!a.contains(h))throw new He(Ae.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);J6(d,h)||d.push(h)}c=new es(d),u=a.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=a.fieldTransforms;return new xJ(new Di(o),c,u)}class ew extends Jx{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ew}}class IC extends Jx{_toFieldTransform(e){return new bX(e.path,new eg)}isEqual(e){return e instanceof IC}}function _J(t,e,n,r){const i=t.Qu(1,e,n);OC("Data must be an object, but it was:",i,r);const s=[],a=Di.empty();Ku(r,(c,u)=>{const d=MC(e,c,n);u=ti(u);const f=i.Nu(d);if(u instanceof ew)s.push(d);else{const h=uv(u,f);h!=null&&(s.push(d),a.set(d,h))}});const o=new es(s);return new G6(a,o,i.fieldTransforms)}function SJ(t,e,n,r,i,s){const a=t.Qu(1,e,n),o=[WA(e,r,n)],c=[i];if(s.length%2!=0)throw new He(Ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)o.push(WA(e,s[h])),c.push(s[h+1]);const u=[],d=Di.empty();for(let h=o.length-1;h>=0;--h)if(!J6(u,o[h])){const p=o[h];let m=c[h];m=ti(m);const g=a.Nu(p);if(m instanceof ew)u.push(p);else{const b=uv(m,g);b!=null&&(u.push(p),d.set(p,b))}}const f=new es(u);return new G6(d,f,a.fieldTransforms)}function AJ(t,e,n,r=!1){return uv(n,t.Qu(r?4:3,e))}function uv(t,e){if(Z6(t=ti(t)))return OC("Unsupported field value:",e,t),X6(t,e);if(t instanceof Jx)return function(r,i){if(!Y6(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const o of r){let c=uv(o,i.Lu(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ti(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return gX(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=pr.fromDate(r);return{timestampValue:W0(i.serializer,s)}}if(r instanceof pr){const s=new pr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:W0(i.serializer,s)}}if(r instanceof PC)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ff)return{bytesValue:x6(i.serializer,r._byteString)};if(r instanceof Vi){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:pC(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof NC)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw o.Bu("VectorValues must only contain numeric values.");return dC(o.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Xx(r)}`)}(t,e)}function X6(t,e){const n={};return Y$(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ku(t,(r,i)=>{const s=uv(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Z6(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof pr||t instanceof PC||t instanceof Ff||t instanceof Vi||t instanceof Jx||t instanceof NC)}function OC(t,e,n){if(!Z6(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Xx(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function WA(t,e,n){if((e=ti(e))instanceof Zx)return e._internalPath;if(typeof e=="string")return MC(t,e);throw K0("Field path arguments must be of type string or ",t,!1,void 0,n)}const EJ=new RegExp("[~\\*/\\[\\]]");function MC(t,e,n){if(e.search(EJ)>=0)throw K0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Zx(...e.split("."))._internalPath}catch{throw K0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function K0(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${r}`),a&&(c+=` in document ${i}`),c+=")"),new He(Ae.INVALID_ARGUMENT,o+t+c)}function J6(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Vi(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jJ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(RC("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class jJ extends eF{data(){return super.data()}}function RC(t,e){return typeof e=="string"?MC(t,e):e instanceof Zx?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CJ(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new He(Ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class LC{}class TJ extends LC{}function PJ(t,e,...n){let r=[];e instanceof LC&&r.push(e),r=r.concat(n),function(s){const a=s.filter(c=>c instanceof zC).length,o=s.filter(c=>c instanceof tw).length;if(a>1||a>0&&o>0)throw new He(Ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class tw extends TJ{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new tw(e,n,r)}_apply(e){const n=this._parse(e);return tF(e._query,n),new kh(e.firestore,e.converter,OA(e._query,n))}_parse(e){const n=DC(e.firestore);return function(s,a,o,c,u,d,f){let h;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new He(Ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){JD(f,d);const p=[];for(const m of f)p.push(ZD(c,s,m));h={arrayValue:{values:p}}}else h=ZD(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||JD(f,d),h=AJ(o,a,f,d==="in"||d==="not-in");return dr.create(u,d,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function NJ(t,e,n){const r=e,i=RC("where",t);return tw._create(i,r,n)}class zC extends LC{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new zC(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:sa.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let a=i;const o=s.getFlattenedFilters();for(const c of o)tF(a,c),a=OA(a,c)}(e._query,n),new kh(e.firestore,e.converter,OA(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function ZD(t,e,n){if(typeof(n=ti(n))=="string"){if(n==="")throw new He(Ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!i6(e)&&n.indexOf("/")!==-1)throw new He(Ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(En.fromString(n));if(!it.isDocumentKey(r))throw new He(Ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yD(t,new it(r))}if(n instanceof Vi)return yD(t,n._key);throw new He(Ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xx(n)}.`)}function JD(t,e){if(!Array.isArray(t)||t.length===0)throw new He(Ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tF(t,e){const n=function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new He(Ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new He(Ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class kJ{convertValue(e,n="none"){switch(Tu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Cu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw mt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ku(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>Xn(a.doubleValue));return new NC(s)}convertGeoPoint(e){return new PC(Xn(e.latitude),Xn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=aC(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Xm(e));default:return null}}convertTimestamp(e){const n=Ul(e);return new pr(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=En.fromString(e);rn(j6(r));const i=new Zm(r.get(1),r.get(3)),s=new it(r.popFirst(5));return i.isEqual(n)||No(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nF(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rF extends eF{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new e0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(RC("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class e0 extends rF{data(e={}){return super.data(e)}}class DJ{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Wp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new e0(this._firestore,this._userDataWriter,r.key,r,new Wp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new He(Ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(o=>{const c=new e0(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Wp(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const c=new e0(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Wp(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return o.type!==0&&(u=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),d=a.indexOf(o.doc.key)),{type:IJ(o.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function IJ(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mt()}}class iF extends kJ{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ff(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Vi(this.firestore,null,n)}}function OJ(t,e,n){t=pu(t,Vi);const r=pu(t.firestore,$f),i=nF(t.converter,e,n);return $C(r,[Q6(DC(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ns.none())])}function kc(t){return $C(pu(t.firestore,$f),[new qx(t._key,ns.none())])}function MJ(t,...e){var n,r,i;t=ti(t);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||XD(e[a])||(s=e[a],a++);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(XD(e[a])){const f=e[a];e[a]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[a+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[a+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,u,d;if(t instanceof Vi)u=pu(t.firestore,$f),d=uC(t._key.path),c={next:f=>{e[a]&&e[a](RJ(u,t,f))},error:e[a+1],complete:e[a+2]};else{const f=pu(t,kh);u=pu(f.firestore,$f),d=f._query;const h=new iF(u);c={next:p=>{e[a]&&e[a](new DJ(u,h,f,p))},error:e[a+1],complete:e[a+2]},CJ(t._query)}return function(h,p,m,g){const b=new fJ(g),x=new GZ(p,b,m);return h.asyncQueue.enqueueAndForget(async()=>WZ(await HD(h),x)),()=>{b.Za(),h.asyncQueue.enqueueAndForget(async()=>HZ(await HD(h),x))}}(TC(u),d,o,c)}function $C(t,e){return function(r,i){const s=new hu;return r.asyncQueue.enqueueAndForget(async()=>iJ(await mJ(r),i,s)),s.promise}(TC(t),e)}function RJ(t,e,n){const r=n.docs.get(e._key),i=new iF(t);return new rF(t,i,e._key,r,new Wp(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LJ{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=DC(e)}set(e,n,r){this._verifyNotCommitted();const i=d_(e,this._firestore),s=nF(i.converter,n,r),a=Q6(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,ns.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=d_(e,this._firestore);let a;return a=typeof(n=ti(n))=="string"||n instanceof Zx?SJ(this._dataReader,"WriteBatch.update",s._key,n,r,i):_J(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(a.toMutation(s._key,ns.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=d_(e,this._firestore);return this._mutations=this._mutations.concat(new qx(n._key,ns.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new He(Ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function d_(t,e){if((t=ti(t)).firestore!==e)throw new He(Ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function zJ(){return new IC("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(t){return TC(t=pu(t,$f)),new LJ(t,e=>$C(t,e))}(function(e,n=!0){(function(i){Th=i})($x),Df(new Eu("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),o=new $f(new IQ(r.getProvider("auth-internal")),new LQ(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new He(Ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zm(u.options.projectId,d)}(a,i),a);return s=Object.assign({useFetchStreams:n},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Rl(hD,"4.7.3",e),Rl(hD,"4.7.3","esm2017")})();const $J={apiKey:"AIzaSyCq3MZURc1tNUbpK7BDzKZKQoh8C3twzmA",authDomain:"lactokeeper.firebaseapp.com",projectId:"lactokeeper",storageBucket:"https://www.google.com/search?q=lactokeeper.appspot.com",messagingSenderId:"437430613715",appId:"1:437430613715:web:b4e56c7a0698c719ae8626"},sF=dY($J),Vf=iQ(sF,{persistence:_Q}),Zt=vJ(sF,{}),aF=P.createContext({currentUser:null,isLoading:!0}),oF=()=>P.useContext(aF),FJ=({children:t})=>{const[e,n]=P.useState(null),[r,i]=P.useState(!0);P.useEffect(()=>bQ(Vf,o=>{n(o),setTimeout(()=>i(!1),200)}),[]);const s={currentUser:e,isLoading:r};return l.jsx(aF.Provider,{value:s,children:t})};var lF={exports:{}};(function(t,e){(function(n,r){t.exports=r()})($d,function(){var n=function(y,S){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,I){N.__proto__=I}||function(N,I){for(var $ in I)Object.prototype.hasOwnProperty.call(I,$)&&(N[$]=I[$])})(y,S)},r=function(){return(r=Object.assign||function(y){for(var S,N=1,I=arguments.length;N<I;N++)for(var $ in S=arguments[N])Object.prototype.hasOwnProperty.call(S,$)&&(y[$]=S[$]);return y}).apply(this,arguments)};function i(y,S,N){for(var I,$=0,V=S.length;$<V;$++)!I&&$ in S||((I=I||Array.prototype.slice.call(S,0,$))[$]=S[$]);return y.concat(I||Array.prototype.slice.call(S))}var s=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:$d,a=Object.keys,o=Array.isArray;function c(y,S){return typeof S!="object"||a(S).forEach(function(N){y[N]=S[N]}),y}typeof Promise>"u"||s.Promise||(s.Promise=Promise);var u=Object.getPrototypeOf,d={}.hasOwnProperty;function f(y,S){return d.call(y,S)}function h(y,S){typeof S=="function"&&(S=S(u(y))),(typeof Reflect>"u"?a:Reflect.ownKeys)(S).forEach(function(N){m(y,N,S[N])})}var p=Object.defineProperty;function m(y,S,N,I){p(y,S,c(N&&f(N,"get")&&typeof N.get=="function"?{get:N.get,set:N.set,configurable:!0}:{value:N,configurable:!0,writable:!0},I))}function g(y){return{from:function(S){return y.prototype=Object.create(S.prototype),m(y.prototype,"constructor",y),{extend:h.bind(null,y.prototype)}}}}var b=Object.getOwnPropertyDescriptor,x=[].slice;function w(y,S,N){return x.call(y,S,N)}function _(y,S){return S(y)}function E(y){if(!y)throw new Error("Assertion Failed")}function j(y){s.setImmediate?setImmediate(y):setTimeout(y,0)}function T(y,S){if(typeof S=="string"&&f(y,S))return y[S];if(!S)return y;if(typeof S!="string"){for(var N=[],I=0,$=S.length;I<$;++I){var V=T(y,S[I]);N.push(V)}return N}var H=S.indexOf(".");if(H!==-1){var Q=y[S.substr(0,H)];return Q==null?void 0:T(Q,S.substr(H+1))}}function A(y,S,N){if(y&&S!==void 0&&!("isFrozen"in Object&&Object.isFrozen(y)))if(typeof S!="string"&&"length"in S){E(typeof N!="string"&&"length"in N);for(var I=0,$=S.length;I<$;++I)A(y,S[I],N[I])}else{var V,H,Q=S.indexOf(".");Q!==-1?(V=S.substr(0,Q),(H=S.substr(Q+1))===""?N===void 0?o(y)&&!isNaN(parseInt(V))?y.splice(V,1):delete y[V]:y[V]=N:A(Q=!(Q=y[V])||!f(y,V)?y[V]={}:Q,H,N)):N===void 0?o(y)&&!isNaN(parseInt(S))?y.splice(S,1):delete y[S]:y[S]=N}}function C(y){var S,N={};for(S in y)f(y,S)&&(N[S]=y[S]);return N}var D=[].concat;function O(y){return D.apply([],y)}var Ct="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(O([8,16,32,64].map(function(y){return["Int","Uint","Float"].map(function(S){return S+y+"Array"})}))).filter(function(y){return s[y]}),L=new Set(Ct.map(function(y){return s[y]})),z=null;function M(y){return z=new WeakMap,y=function S(N){if(!N||typeof N!="object")return N;var I=z.get(N);if(I)return I;if(o(N)){I=[],z.set(N,I);for(var $=0,V=N.length;$<V;++$)I.push(S(N[$]))}else if(L.has(N.constructor))I=N;else{var H,Q=u(N);for(H in I=Q===Object.prototype?{}:Object.create(Q),z.set(N,I),N)f(N,H)&&(I[H]=S(N[H]))}return I}(y),z=null,y}var G={}.toString;function K(y){return G.call(y).slice(8,-1)}var B=typeof Symbol<"u"?Symbol.iterator:"@@iterator",U=typeof B=="symbol"?function(y){var S;return y!=null&&(S=y[B])&&S.apply(y)}:function(){return null};function F(y,S){return S=y.indexOf(S),0<=S&&y.splice(S,1),0<=S}var q={};function Z(y){var S,N,I,$;if(arguments.length===1){if(o(y))return y.slice();if(this===q&&typeof y=="string")return[y];if($=U(y)){for(N=[];!(I=$.next()).done;)N.push(I.value);return N}if(y==null)return[y];if(typeof(S=y.length)!="number")return[y];for(N=new Array(S);S--;)N[S]=y[S];return N}for(S=arguments.length,N=new Array(S);S--;)N[S]=arguments[S];return N}var re=typeof Symbol<"u"?function(y){return y[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},rt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ys=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(rt),he={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ye(y,S){this.name=y,this.message=S}function De(y,S){return y+". Errors: "+Object.keys(S).map(function(N){return S[N].toString()}).filter(function(N,I,$){return $.indexOf(N)===I}).join(`
`)}function We(y,S,N,I){this.failures=S,this.failedKeys=I,this.successCount=N,this.message=De(y,S)}function Je(y,S){this.name="BulkError",this.failures=Object.keys(S).map(function(N){return S[N]}),this.failuresByPos=S,this.message=De(y,this.failures)}g(ye).from(Error).extend({toString:function(){return this.name+": "+this.message}}),g(We).from(ye),g(Je).from(ye);var jt=ys.reduce(function(y,S){return y[S]=S+"Error",y},{}),dt=ye,xe=ys.reduce(function(y,S){var N=S+"Error";function I($,V){this.name=N,$?typeof $=="string"?(this.message="".concat($).concat(V?`
 `+V:""),this.inner=V||null):typeof $=="object"&&(this.message="".concat($.name," ").concat($.message),this.inner=$):(this.message=he[S]||N,this.inner=null)}return g(I).from(dt),y[S]=I,y},{});xe.Syntax=SyntaxError,xe.Type=TypeError,xe.Range=RangeError;var Ye=rt.reduce(function(y,S){return y[S+"Error"]=xe[S],y},{}),Qe=ys.reduce(function(y,S){return["Syntax","Type","Range"].indexOf(S)===-1&&(y[S+"Error"]=xe[S]),y},{});function fe(){}function pt(y){return y}function ft(y,S){return y==null||y===pt?S:function(N){return S(y(N))}}function Le(y,S){return function(){y.apply(this,arguments),S.apply(this,arguments)}}function Ve(y,S){return y===fe?S:function(){var N=y.apply(this,arguments);N!==void 0&&(arguments[0]=N);var I=this.onsuccess,$=this.onerror;this.onsuccess=null,this.onerror=null;var V=S.apply(this,arguments);return I&&(this.onsuccess=this.onsuccess?Le(I,this.onsuccess):I),$&&(this.onerror=this.onerror?Le($,this.onerror):$),V!==void 0?V:N}}function cn(y,S){return y===fe?S:function(){y.apply(this,arguments);var N=this.onsuccess,I=this.onerror;this.onsuccess=this.onerror=null,S.apply(this,arguments),N&&(this.onsuccess=this.onsuccess?Le(N,this.onsuccess):N),I&&(this.onerror=this.onerror?Le(I,this.onerror):I)}}function gr(y,S){return y===fe?S:function(N){var I=y.apply(this,arguments);c(N,I);var $=this.onsuccess,V=this.onerror;return this.onsuccess=null,this.onerror=null,N=S.apply(this,arguments),$&&(this.onsuccess=this.onsuccess?Le($,this.onsuccess):$),V&&(this.onerror=this.onerror?Le(V,this.onerror):V),I===void 0?N===void 0?void 0:N:c(I,N)}}function Cr(y,S){return y===fe?S:function(){return S.apply(this,arguments)!==!1&&y.apply(this,arguments)}}function Hn(y,S){return y===fe?S:function(){var N=y.apply(this,arguments);if(N&&typeof N.then=="function"){for(var I=this,$=arguments.length,V=new Array($);$--;)V[$]=arguments[$];return N.then(function(){return S.apply(I,V)})}return S.apply(this,arguments)}}Qe.ModifyError=We,Qe.DexieError=ye,Qe.BulkError=Je;var Ut=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function vr(y){Ut=y}var rr={},Me=100,Ct=typeof Promise>"u"?[]:function(){var y=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[y,u(y),y];var S=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[S,u(S),y]}(),rt=Ct[0],ys=Ct[1],Ct=Ct[2],ys=ys&&ys.then,un=rt&&rt.constructor,Hi=!!Ct,ps=function(y,S){ms.push([y,S]),yt&&(queueMicrotask(Pr),yt=!1)},ze=!0,yt=!0,st=[],ir=[],Tr=pt,Fr={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:fe,pgp:!1,env:{},finalize:fe},Ge=Fr,ms=[],de=0,pe=[];function ee(y){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var S=this._PSD=Ge;if(typeof y!="function"){if(y!==rr)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&bt(this,this._value))}this._state=null,this._value=null,++S.ref,function N(I,$){try{$(function(V){if(I._state===null){if(V===I)throw new TypeError("A promise cannot be resolved with itself.");var H=I._lib&&hn();V&&typeof V.then=="function"?N(I,function(Q,J){V instanceof ee?V._then(Q,J):V.then(Q,J)}):(I._state=!0,I._value=V,Ue(I)),H&&gi()}},bt.bind(null,I))}catch(V){bt(I,V)}}(this,y)}var Fe={get:function(){var y=Ge,S=dd;function N(I,$){var V=this,H=!y.global&&(y!==Ge||S!==dd),Q=H&&!gs(),J=new ee(function(ne,se){Lt(V,new tt(fd(I,y,H,Q),fd($,y,H,Q),ne,se,y))});return this._consoleTask&&(J._consoleTask=this._consoleTask),J}return N.prototype=rr,N},set:function(y){m(this,"then",y&&y.prototype===rr?Fe:{get:function(){return y},set:Fe.set})}};function tt(y,S,N,I,$){this.onFulfilled=typeof y=="function"?y:null,this.onRejected=typeof S=="function"?S:null,this.resolve=N,this.reject=I,this.psd=$}function bt(y,S){var N,I;ir.push(S),y._state===null&&(N=y._lib&&hn(),S=Tr(S),y._state=!1,y._value=S,I=y,st.some(function($){return $._value===I._value})||st.push(I),Ue(y),N&&gi())}function Ue(y){var S=y._listeners;y._listeners=[];for(var N=0,I=S.length;N<I;++N)Lt(y,S[N]);var $=y._PSD;--$.ref||$.finalize(),de===0&&(++de,ps(function(){--de==0&&at()},[]))}function Lt(y,S){if(y._state!==null){var N=y._state?S.onFulfilled:S.onRejected;if(N===null)return(y._state?S.resolve:S.reject)(y._value);++S.psd.ref,++de,ps(zt,[N,y,S])}else y._listeners.push(S)}function zt(y,S,N){try{var I,$=S._value;!S._state&&ir.length&&(ir=[]),I=Ut&&S._consoleTask?S._consoleTask.run(function(){return y($)}):y($),S._state||ir.indexOf($)!==-1||function(V){for(var H=st.length;H;)if(st[--H]._value===V._value)return st.splice(H,1)}(S),N.resolve(I)}catch(V){N.reject(V)}finally{--de==0&&at(),--N.psd.ref||N.psd.finalize()}}function Pr(){$s(Fr,function(){hn()&&gi()})}function hn(){var y=ze;return yt=ze=!1,y}function gi(){var y,S,N;do for(;0<ms.length;)for(y=ms,ms=[],N=y.length,S=0;S<N;++S){var I=y[S];I[0].apply(null,I[1])}while(0<ms.length);yt=ze=!0}function at(){var y=st;st=[],y.forEach(function(I){I._PSD.onunhandled.call(null,I._value,I)});for(var S=pe.slice(0),N=S.length;N;)S[--N]()}function sr(y){return new ee(rr,!1,y)}function Wt(y,S){var N=Ge;return function(){var I=hn(),$=Ge;try{return zs(N,!0),y.apply(this,arguments)}catch(V){S&&S(V)}finally{zs($,!1),I&&gi()}}}h(ee.prototype,{then:Fe,_then:function(y,S){Lt(this,new tt(null,null,y,S,Ge))},catch:function(y){if(arguments.length===1)return this.then(null,y);var S=y,N=arguments[1];return typeof S=="function"?this.then(null,function(I){return(I instanceof S?N:sr)(I)}):this.then(null,function(I){return(I&&I.name===S?N:sr)(I)})},finally:function(y){return this.then(function(S){return ee.resolve(y()).then(function(){return S})},function(S){return ee.resolve(y()).then(function(){return sr(S)})})},timeout:function(y,S){var N=this;return y<1/0?new ee(function(I,$){var V=setTimeout(function(){return $(new xe.Timeout(S))},y);N.then(I,$).finally(clearTimeout.bind(null,V))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&m(ee.prototype,Symbol.toStringTag,"Dexie.Promise"),Fr.env=Jh(),h(ee,{all:function(){var y=Z.apply(null,arguments).map(Xa);return new ee(function(S,N){y.length===0&&S([]);var I=y.length;y.forEach(function($,V){return ee.resolve($).then(function(H){y[V]=H,--I||S(y)},N)})})},resolve:function(y){return y instanceof ee?y:y&&typeof y.then=="function"?new ee(function(S,N){y.then(S,N)}):new ee(rr,!0,y)},reject:sr,race:function(){var y=Z.apply(null,arguments).map(Xa);return new ee(function(S,N){y.map(function(I){return ee.resolve(I).then(S,N)})})},PSD:{get:function(){return Ge},set:function(y){return Ge=y}},totalEchoes:{get:function(){return dd}},newPSD:qi,usePSD:$s,scheduler:{get:function(){return ps},set:function(y){ps=y}},rejectionMapper:{get:function(){return Tr},set:function(y){Tr=y}},follow:function(y,S){return new ee(function(N,I){return qi(function($,V){var H=Ge;H.unhandleds=[],H.onunhandled=V,H.finalize=Le(function(){var Q,J=this;Q=function(){J.unhandleds.length===0?$():V(J.unhandleds[0])},pe.push(function ne(){Q(),pe.splice(pe.indexOf(ne),1)}),++de,ps(function(){--de==0&&at()},[])},H.finalize),y()},S,N,I)})}}),un&&(un.allSettled&&m(ee,"allSettled",function(){var y=Z.apply(null,arguments).map(Xa);return new ee(function(S){y.length===0&&S([]);var N=y.length,I=new Array(N);y.forEach(function($,V){return ee.resolve($).then(function(H){return I[V]={status:"fulfilled",value:H}},function(H){return I[V]={status:"rejected",reason:H}}).then(function(){return--N||S(I)})})})}),un.any&&typeof AggregateError<"u"&&m(ee,"any",function(){var y=Z.apply(null,arguments).map(Xa);return new ee(function(S,N){y.length===0&&N(new AggregateError([]));var I=y.length,$=new Array(I);y.forEach(function(V,H){return ee.resolve(V).then(function(Q){return S(Q)},function(Q){$[H]=Q,--I||N(new AggregateError($))})})})}),un.withResolvers&&(ee.withResolvers=un.withResolvers));var pn={awaits:0,echoes:0,id:0},Zh=0,ud=[],Ls=0,dd=0,b1=0;function qi(y,S,N,I){var $=Ge,V=Object.create($);return V.parent=$,V.ref=0,V.global=!1,V.id=++b1,Fr.env,V.env=Hi?{Promise:ee,PromiseProp:{value:ee,configurable:!0,writable:!0},all:ee.all,race:ee.race,allSettled:ee.allSettled,any:ee.any,resolve:ee.resolve,reject:ee.reject}:{},S&&c(V,S),++$.ref,V.finalize=function(){--this.parent.ref||this.parent.finalize()},I=$s(V,y,N,I),V.ref===0&&V.finalize(),I}function Qa(){return pn.id||(pn.id=++Zh),++pn.awaits,pn.echoes+=Me,pn.id}function gs(){return!!pn.awaits&&(--pn.awaits==0&&(pn.id=0),pn.echoes=pn.awaits*Me,!0)}function Xa(y){return pn.echoes&&y&&y.constructor===un?(Qa(),y.then(function(S){return gs(),S},function(S){return gs(),Cn(S)})):y}function ga(){var y=ud[ud.length-1];ud.pop(),zs(y,!1)}function zs(y,S){var N,I=Ge;(S?!pn.echoes||Ls++&&y===Ge:!Ls||--Ls&&y===Ge)||queueMicrotask(S?(function($){++dd,pn.echoes&&--pn.echoes!=0||(pn.echoes=pn.awaits=pn.id=0),ud.push(Ge),zs($,!0)}).bind(null,y):ga),y!==Ge&&(Ge=y,I===Fr&&(Fr.env=Jh()),Hi&&(N=Fr.env.Promise,S=y.env,(I.global||y.global)&&(Object.defineProperty(s,"Promise",S.PromiseProp),N.all=S.all,N.race=S.race,N.resolve=S.resolve,N.reject=S.reject,S.allSettled&&(N.allSettled=S.allSettled),S.any&&(N.any=S.any))))}function Jh(){var y=s.Promise;return Hi?{Promise:y,PromiseProp:Object.getOwnPropertyDescriptor(s,"Promise"),all:y.all,race:y.race,allSettled:y.allSettled,any:y.any,resolve:y.resolve,reject:y.reject}:{}}function $s(y,S,N,I,$){var V=Ge;try{return zs(y,!0),S(N,I,$)}finally{zs(V,!1)}}function fd(y,S,N,I){return typeof y!="function"?y:function(){var $=Ge;N&&Qa(),zs(S,!0);try{return y.apply(this,arguments)}finally{zs($,!1),I&&queueMicrotask(gs)}}}function hd(y){Promise===un&&pn.echoes===0?Ls===0?y():enqueueNativeMicroTask(y):setTimeout(y,0)}(""+ys).indexOf("[native code]")===-1&&(Qa=gs=fe);var Cn=ee.reject,Za="￿",Ci="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ep="String expected.",va=[],ya="__dbnames",Fs="readonly",hc="readwrite";function Ja(y,S){return y?S?function(){return y.apply(this,arguments)&&S.apply(this,arguments)}:y:S}var tp={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function pc(y){return typeof y!="string"||/\./.test(y)?function(S){return S}:function(S){return S[y]===void 0&&y in S&&delete(S=M(S))[y],S}}function np(){throw xe.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Et(y,S){try{var N=pd(y),I=pd(S);if(N!==I)return N==="Array"?1:I==="Array"?-1:N==="binary"?1:I==="binary"?-1:N==="string"?1:I==="string"?-1:N==="Date"?1:I!=="Date"?NaN:-1;switch(N){case"number":case"Date":case"string":return S<y?1:y<S?-1:0;case"binary":return function($,V){for(var H=$.length,Q=V.length,J=H<Q?H:Q,ne=0;ne<J;++ne)if($[ne]!==V[ne])return $[ne]<V[ne]?-1:1;return H===Q?0:H<Q?-1:1}(rp(y),rp(S));case"Array":return function($,V){for(var H=$.length,Q=V.length,J=H<Q?H:Q,ne=0;ne<J;++ne){var se=Et($[ne],V[ne]);if(se!==0)return se}return H===Q?0:H<Q?-1:1}(y,S)}}catch{}return NaN}function pd(y){var S=typeof y;return S!="object"?S:ArrayBuffer.isView(y)?"binary":(y=K(y),y==="ArrayBuffer"?"binary":y)}function rp(y){return y instanceof Uint8Array?y:ArrayBuffer.isView(y)?new Uint8Array(y.buffer,y.byteOffset,y.byteLength):new Uint8Array(y)}function mc(y,S,N){var I=y.schema.yProps;return I?(S&&0<N.numFailures&&(S=S.filter(function($,V){return!N.failures[V]})),Promise.all(I.map(function($){return $=$.updatesTable,S?y.db.table($).where("k").anyOf(S).delete():y.db.table($).clear()})).then(function(){return N})):N}var Ov=(dn.prototype._trans=function(y,S,N){var I=this._tx||Ge.trans,$=this.name,V=Ut&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(y==="readonly"?"read":"write"," ").concat(this.name));function H(ne,se,X){if(!X.schema[$])throw new xe.NotFound("Table "+$+" not part of transaction");return S(X.idbtrans,X)}var Q=hn();try{var J=I&&I.db._novip===this.db._novip?I===Ge.trans?I._promise(y,H,N):qi(function(){return I._promise(y,H,N)},{trans:I,transless:Ge.transless||Ge}):function ne(se,X,le,te){if(se.idbdb&&(se._state.openComplete||Ge.letThrough||se._vip)){var ie=se._createTransaction(X,le,se._dbSchema);try{ie.create(),se._state.PR1398_maxLoop=3}catch(oe){return oe.name===jt.InvalidState&&se.isOpen()&&0<--se._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),se.close({disableAutoOpen:!1}),se.open().then(function(){return ne(se,X,le,te)})):Cn(oe)}return ie._promise(X,function(oe,ae){return qi(function(){return Ge.trans=ie,te(oe,ae,ie)})}).then(function(oe){if(X==="readwrite")try{ie.idbtrans.commit()}catch{}return X==="readonly"?oe:ie._completion.then(function(){return oe})})}if(se._state.openComplete)return Cn(new xe.DatabaseClosed(se._state.dbOpenError));if(!se._state.isBeingOpened){if(!se._state.autoOpen)return Cn(new xe.DatabaseClosed);se.open().catch(fe)}return se._state.dbReadyPromise.then(function(){return ne(se,X,le,te)})}(this.db,y,[this.name],H);return V&&(J._consoleTask=V,J=J.catch(function(ne){return console.trace(ne),Cn(ne)})),J}finally{Q&&gi()}},dn.prototype.get=function(y,S){var N=this;return y&&y.constructor===Object?this.where(y).first(S):y==null?Cn(new xe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(I){return N.core.get({trans:I,key:y}).then(function($){return N.hook.reading.fire($)})}).then(S)},dn.prototype.where=function(y){if(typeof y=="string")return new this.db.WhereClause(this,y);if(o(y))return new this.db.WhereClause(this,"[".concat(y.join("+"),"]"));var S=a(y);if(S.length===1)return this.where(S[0]).equals(y[S[0]]);var N=this.schema.indexes.concat(this.schema.primKey).filter(function(Q){if(Q.compound&&S.every(function(ne){return 0<=Q.keyPath.indexOf(ne)})){for(var J=0;J<S.length;++J)if(S.indexOf(Q.keyPath[J])===-1)return!1;return!0}return!1}).sort(function(Q,J){return Q.keyPath.length-J.keyPath.length})[0];if(N&&this.db._maxKey!==Za){var V=N.keyPath.slice(0,S.length);return this.where(V).equals(V.map(function(J){return y[J]}))}!N&&Ut&&console.warn("The query ".concat(JSON.stringify(y)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(S.join("+"),"]"));var I=this.schema.idxByName;function $(Q,J){return Et(Q,J)===0}var H=S.reduce(function(X,J){var ne=X[0],se=X[1],X=I[J],le=y[J];return[ne||X,ne||!X?Ja(se,X&&X.multi?function(te){return te=T(te,J),o(te)&&te.some(function(ie){return $(le,ie)})}:function(te){return $(le,T(te,J))}):se]},[null,null]),V=H[0],H=H[1];return V?this.where(V.name).equals(y[V.keyPath]).filter(H):N?this.filter(H):this.where(S).equals("")},dn.prototype.filter=function(y){return this.toCollection().and(y)},dn.prototype.count=function(y){return this.toCollection().count(y)},dn.prototype.offset=function(y){return this.toCollection().offset(y)},dn.prototype.limit=function(y){return this.toCollection().limit(y)},dn.prototype.each=function(y){return this.toCollection().each(y)},dn.prototype.toArray=function(y){return this.toCollection().toArray(y)},dn.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},dn.prototype.orderBy=function(y){return new this.db.Collection(new this.db.WhereClause(this,o(y)?"[".concat(y.join("+"),"]"):y))},dn.prototype.reverse=function(){return this.toCollection().reverse()},dn.prototype.mapToClass=function(y){var S,N=this.db,I=this.name;function $(){return S!==null&&S.apply(this,arguments)||this}(this.schema.mappedClass=y).prototype instanceof np&&(function(J,ne){if(typeof ne!="function"&&ne!==null)throw new TypeError("Class extends value "+String(ne)+" is not a constructor or null");function se(){this.constructor=J}n(J,ne),J.prototype=ne===null?Object.create(ne):(se.prototype=ne.prototype,new se)}($,S=y),Object.defineProperty($.prototype,"db",{get:function(){return N},enumerable:!1,configurable:!0}),$.prototype.table=function(){return I},y=$);for(var V=new Set,H=y.prototype;H;H=u(H))Object.getOwnPropertyNames(H).forEach(function(J){return V.add(J)});function Q(J){if(!J)return J;var ne,se=Object.create(y.prototype);for(ne in J)if(!V.has(ne))try{se[ne]=J[ne]}catch{}return se}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=Q,this.hook("reading",Q),y},dn.prototype.defineClass=function(){return this.mapToClass(function(y){c(this,y)})},dn.prototype.add=function(y,S){var N=this,I=this.schema.primKey,$=I.auto,V=I.keyPath,H=y;return V&&$&&(H=pc(V)(y)),this._trans("readwrite",function(Q){return N.core.mutate({trans:Q,type:"add",keys:S!=null?[S]:null,values:[H]})}).then(function(Q){return Q.numFailures?ee.reject(Q.failures[0]):Q.lastResult}).then(function(Q){if(V)try{A(y,V,Q)}catch{}return Q})},dn.prototype.update=function(y,S){return typeof y!="object"||o(y)?this.where(":id").equals(y).modify(S):(y=T(y,this.schema.primKey.keyPath),y===void 0?Cn(new xe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(y).modify(S))},dn.prototype.put=function(y,S){var N=this,I=this.schema.primKey,$=I.auto,V=I.keyPath,H=y;return V&&$&&(H=pc(V)(y)),this._trans("readwrite",function(Q){return N.core.mutate({trans:Q,type:"put",values:[H],keys:S!=null?[S]:null})}).then(function(Q){return Q.numFailures?ee.reject(Q.failures[0]):Q.lastResult}).then(function(Q){if(V)try{A(y,V,Q)}catch{}return Q})},dn.prototype.delete=function(y){var S=this;return this._trans("readwrite",function(N){return S.core.mutate({trans:N,type:"delete",keys:[y]}).then(function(I){return mc(S,[y],I)}).then(function(I){return I.numFailures?ee.reject(I.failures[0]):void 0})})},dn.prototype.clear=function(){var y=this;return this._trans("readwrite",function(S){return y.core.mutate({trans:S,type:"deleteRange",range:tp}).then(function(N){return mc(y,null,N)})}).then(function(S){return S.numFailures?ee.reject(S.failures[0]):void 0})},dn.prototype.bulkGet=function(y){var S=this;return this._trans("readonly",function(N){return S.core.getMany({keys:y,trans:N}).then(function(I){return I.map(function($){return S.hook.reading.fire($)})})})},dn.prototype.bulkAdd=function(y,S,N){var I=this,$=Array.isArray(S)?S:void 0,V=(N=N||($?void 0:S))?N.allKeys:void 0;return this._trans("readwrite",function(H){var ne=I.schema.primKey,Q=ne.auto,ne=ne.keyPath;if(ne&&$)throw new xe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if($&&$.length!==y.length)throw new xe.InvalidArgument("Arguments objects and keys must have the same length");var J=y.length,ne=ne&&Q?y.map(pc(ne)):y;return I.core.mutate({trans:H,type:"add",keys:$,values:ne,wantResults:V}).then(function(ie){var X=ie.numFailures,le=ie.results,te=ie.lastResult,ie=ie.failures;if(X===0)return V?le:te;throw new Je("".concat(I.name,".bulkAdd(): ").concat(X," of ").concat(J," operations failed"),ie)})})},dn.prototype.bulkPut=function(y,S,N){var I=this,$=Array.isArray(S)?S:void 0,V=(N=N||($?void 0:S))?N.allKeys:void 0;return this._trans("readwrite",function(H){var ne=I.schema.primKey,Q=ne.auto,ne=ne.keyPath;if(ne&&$)throw new xe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if($&&$.length!==y.length)throw new xe.InvalidArgument("Arguments objects and keys must have the same length");var J=y.length,ne=ne&&Q?y.map(pc(ne)):y;return I.core.mutate({trans:H,type:"put",keys:$,values:ne,wantResults:V}).then(function(ie){var X=ie.numFailures,le=ie.results,te=ie.lastResult,ie=ie.failures;if(X===0)return V?le:te;throw new Je("".concat(I.name,".bulkPut(): ").concat(X," of ").concat(J," operations failed"),ie)})})},dn.prototype.bulkUpdate=function(y){var S=this,N=this.core,I=y.map(function(H){return H.key}),$=y.map(function(H){return H.changes}),V=[];return this._trans("readwrite",function(H){return N.getMany({trans:H,keys:I,cache:"clone"}).then(function(Q){var J=[],ne=[];y.forEach(function(X,le){var te=X.key,ie=X.changes,oe=Q[le];if(oe){for(var ae=0,ce=Object.keys(ie);ae<ce.length;ae++){var ge=ce[ae],we=ie[ge];if(ge===S.schema.primKey.keyPath){if(Et(we,te)!==0)throw new xe.Constraint("Cannot update primary key in bulkUpdate()")}else A(oe,ge,we)}V.push(le),J.push(te),ne.push(oe)}});var se=J.length;return N.mutate({trans:H,type:"put",keys:J,values:ne,updates:{keys:I,changeSpecs:$}}).then(function(X){var le=X.numFailures,te=X.failures;if(le===0)return se;for(var ie=0,oe=Object.keys(te);ie<oe.length;ie++){var ae,ce=oe[ie],ge=V[Number(ce)];ge!=null&&(ae=te[ce],delete te[ce],te[ge]=ae)}throw new Je("".concat(S.name,".bulkUpdate(): ").concat(le," of ").concat(se," operations failed"),te)})})})},dn.prototype.bulkDelete=function(y){var S=this,N=y.length;return this._trans("readwrite",function(I){return S.core.mutate({trans:I,type:"delete",keys:y}).then(function($){return mc(S,y,$)})}).then(function(H){var $=H.numFailures,V=H.lastResult,H=H.failures;if($===0)return V;throw new Je("".concat(S.name,".bulkDelete(): ").concat($," of ").concat(N," operations failed"),H)})},dn);function dn(){}function qo(y){function S(H,Q){if(Q){for(var J=arguments.length,ne=new Array(J-1);--J;)ne[J-1]=arguments[J];return N[H].subscribe.apply(null,ne),y}if(typeof H=="string")return N[H]}var N={};S.addEventType=V;for(var I=1,$=arguments.length;I<$;++I)V(arguments[I]);return S;function V(H,Q,J){if(typeof H!="object"){var ne;Q=Q||Cr;var se={subscribers:[],fire:J=J||fe,subscribe:function(X){se.subscribers.indexOf(X)===-1&&(se.subscribers.push(X),se.fire=Q(se.fire,X))},unsubscribe:function(X){se.subscribers=se.subscribers.filter(function(le){return le!==X}),se.fire=se.subscribers.reduce(Q,J)}};return N[H]=S[H]=se}a(ne=H).forEach(function(X){var le=ne[X];if(o(le))V(X,ne[X][0],ne[X][1]);else{if(le!=="asap")throw new xe.InvalidArgument("Invalid event config");var te=V(X,pt,function(){for(var ie=arguments.length,oe=new Array(ie);ie--;)oe[ie]=arguments[ie];te.subscribers.forEach(function(ae){j(function(){ae.apply(null,oe)})})})}})}}function Ko(y,S){return g(S).from({prototype:y}),S}function Go(y,S){return!(y.filter||y.algorithm||y.or)&&(S?y.justLimit:!y.replayFilter)}function Vs(y,S){y.filter=Ja(y.filter,S)}function Ki(y,S,N){var I=y.replayFilter;y.replayFilter=I?function(){return Ja(I(),S())}:S,y.justLimit=N&&!I}function eo(y,S){if(y.isPrimKey)return S.primaryKey;var N=S.getIndexByKeyPath(y.index);if(!N)throw new xe.Schema("KeyPath "+y.index+" on object store "+S.name+" is not indexed");return N}function gc(y,S,N){var I=eo(y,S.schema);return S.openCursor({trans:N,values:!y.keysOnly,reverse:y.dir==="prev",unique:!!y.unique,query:{index:I,range:y.range}})}function vc(y,S,N,I){var $=y.replayFilter?Ja(y.filter,y.replayFilter()):y.filter;if(y.or){var V={},H=function(Q,J,ne){var se,X;$&&!$(J,ne,function(le){return J.stop(le)},function(le){return J.fail(le)})||((X=""+(se=J.primaryKey))=="[object ArrayBuffer]"&&(X=""+new Uint8Array(se)),f(V,X)||(V[X]=!0,S(Q,J,ne)))};return Promise.all([y.or._iterate(H,N),an(gc(y,I,N),y.algorithm,H,!y.keysOnly&&y.valueMapper)])}return an(gc(y,I,N),Ja(y.algorithm,$),S,!y.keysOnly&&y.valueMapper)}function an(y,S,N,I){var $=Wt(I?function(V,H,Q){return N(I(V),H,Q)}:N);return y.then(function(V){if(V)return V.start(function(){var H=function(){return V.continue()};S&&!S(V,function(Q){return H=Q},function(Q){V.stop(Q),H=fe},function(Q){V.fail(Q),H=fe})||$(V.value,V,function(Q){return H=Q}),H()})})}var ba=(Yo.prototype.execute=function(y){var S=this["@@propmod"];if(S.add!==void 0){var N=S.add;if(o(N))return i(i([],o(y)?y:[],!0),N).sort();if(typeof N=="number")return(Number(y)||0)+N;if(typeof N=="bigint")try{return BigInt(y)+N}catch{return BigInt(0)+N}throw new TypeError("Invalid term ".concat(N))}if(S.remove!==void 0){var I=S.remove;if(o(I))return o(y)?y.filter(function($){return!I.includes($)}).sort():[];if(typeof I=="number")return Number(y)-I;if(typeof I=="bigint")try{return BigInt(y)-I}catch{return BigInt(0)-I}throw new TypeError("Invalid subtrahend ".concat(I))}return N=(N=S.replacePrefix)===null||N===void 0?void 0:N[0],N&&typeof y=="string"&&y.startsWith(N)?S.replacePrefix[1]+y.substring(N.length):y},Yo);function Yo(y){this["@@propmod"]=y}var yc=(Ot.prototype._read=function(y,S){var N=this._ctx;return N.error?N.table._trans(null,Cn.bind(null,N.error)):N.table._trans("readonly",y).then(S)},Ot.prototype._write=function(y){var S=this._ctx;return S.error?S.table._trans(null,Cn.bind(null,S.error)):S.table._trans("readwrite",y,"locked")},Ot.prototype._addAlgorithm=function(y){var S=this._ctx;S.algorithm=Ja(S.algorithm,y)},Ot.prototype._iterate=function(y,S){return vc(this._ctx,y,S,this._ctx.table.core)},Ot.prototype.clone=function(y){var S=Object.create(this.constructor.prototype),N=Object.create(this._ctx);return y&&c(N,y),S._ctx=N,S},Ot.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ot.prototype.each=function(y){var S=this._ctx;return this._read(function(N){return vc(S,y,N,S.table.core)})},Ot.prototype.count=function(y){var S=this;return this._read(function(N){var I=S._ctx,$=I.table.core;if(Go(I,!0))return $.count({trans:N,query:{index:eo(I,$.schema),range:I.range}}).then(function(H){return Math.min(H,I.limit)});var V=0;return vc(I,function(){return++V,!1},N,$).then(function(){return V})}).then(y)},Ot.prototype.sortBy=function(y,S){var N=y.split(".").reverse(),I=N[0],$=N.length-1;function V(J,ne){return ne?V(J[N[ne]],ne-1):J[I]}var H=this._ctx.dir==="next"?1:-1;function Q(J,ne){return Et(V(J,$),V(ne,$))*H}return this.toArray(function(J){return J.sort(Q)}).then(S)},Ot.prototype.toArray=function(y){var S=this;return this._read(function(N){var I=S._ctx;if(I.dir==="next"&&Go(I,!0)&&0<I.limit){var $=I.valueMapper,V=eo(I,I.table.core.schema);return I.table.core.query({trans:N,limit:I.limit,values:!0,query:{index:V,range:I.range}}).then(function(Q){return Q=Q.result,$?Q.map($):Q})}var H=[];return vc(I,function(Q){return H.push(Q)},N,I.table.core).then(function(){return H})},y)},Ot.prototype.offset=function(y){var S=this._ctx;return y<=0||(S.offset+=y,Go(S)?Ki(S,function(){var N=y;return function(I,$){return N===0||(N===1?--N:$(function(){I.advance(N),N=0}),!1)}}):Ki(S,function(){var N=y;return function(){return--N<0}})),this},Ot.prototype.limit=function(y){return this._ctx.limit=Math.min(this._ctx.limit,y),Ki(this._ctx,function(){var S=y;return function(N,I,$){return--S<=0&&I($),0<=S}},!0),this},Ot.prototype.until=function(y,S){return Vs(this._ctx,function(N,I,$){return!y(N.value)||(I($),S)}),this},Ot.prototype.first=function(y){return this.limit(1).toArray(function(S){return S[0]}).then(y)},Ot.prototype.last=function(y){return this.reverse().first(y)},Ot.prototype.filter=function(y){var S;return Vs(this._ctx,function(N){return y(N.value)}),(S=this._ctx).isMatch=Ja(S.isMatch,y),this},Ot.prototype.and=function(y){return this.filter(y)},Ot.prototype.or=function(y){return new this.db.WhereClause(this._ctx.table,y,this)},Ot.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ot.prototype.desc=function(){return this.reverse()},Ot.prototype.eachKey=function(y){var S=this._ctx;return S.keysOnly=!S.isMatch,this.each(function(N,I){y(I.key,I)})},Ot.prototype.eachUniqueKey=function(y){return this._ctx.unique="unique",this.eachKey(y)},Ot.prototype.eachPrimaryKey=function(y){var S=this._ctx;return S.keysOnly=!S.isMatch,this.each(function(N,I){y(I.primaryKey,I)})},Ot.prototype.keys=function(y){var S=this._ctx;S.keysOnly=!S.isMatch;var N=[];return this.each(function(I,$){N.push($.key)}).then(function(){return N}).then(y)},Ot.prototype.primaryKeys=function(y){var S=this._ctx;if(S.dir==="next"&&Go(S,!0)&&0<S.limit)return this._read(function(I){var $=eo(S,S.table.core.schema);return S.table.core.query({trans:I,values:!1,limit:S.limit,query:{index:$,range:S.range}})}).then(function(I){return I.result}).then(y);S.keysOnly=!S.isMatch;var N=[];return this.each(function(I,$){N.push($.primaryKey)}).then(function(){return N}).then(y)},Ot.prototype.uniqueKeys=function(y){return this._ctx.unique="unique",this.keys(y)},Ot.prototype.firstKey=function(y){return this.limit(1).keys(function(S){return S[0]}).then(y)},Ot.prototype.lastKey=function(y){return this.reverse().firstKey(y)},Ot.prototype.distinct=function(){var y=this._ctx,y=y.index&&y.table.schema.idxByName[y.index];if(!y||!y.multi)return this;var S={};return Vs(this._ctx,function($){var I=$.primaryKey.toString(),$=f(S,I);return S[I]=!0,!$}),this},Ot.prototype.modify=function(y){var S=this,N=this._ctx;return this._write(function(I){var $,V,H;H=typeof y=="function"?y:($=a(y),V=$.length,function(ce){for(var ge=!1,we=0;we<V;++we){var _e=$[we],je=y[_e],Oe=T(ce,_e);je instanceof ba?(A(ce,_e,je.execute(Oe)),ge=!0):Oe!==je&&(A(ce,_e,je),ge=!0)}return ge});var Q=N.table.core,X=Q.schema.primaryKey,J=X.outbound,ne=X.extractKey,se=200,X=S.db._options.modifyChunkSize;X&&(se=typeof X=="object"?X[Q.name]||X["*"]||200:X);function le(ce,_e){var we=_e.failures,_e=_e.numFailures;ie+=ce-_e;for(var je=0,Oe=a(we);je<Oe.length;je++){var Ne=Oe[je];te.push(we[Ne])}}var te=[],ie=0,oe=[],ae=y===ip;return S.clone().primaryKeys().then(function(ce){function ge(_e){var je=Math.min(se,ce.length-_e),Oe=ce.slice(_e,_e+je);return(ae?Promise.resolve([]):Q.getMany({trans:I,keys:Oe,cache:"immutable"})).then(function(Ne){var ke=[],$e=[],Re=J?[]:null,Be=ae?Oe:[];if(!ae)for(var At=0;At<je;++At){var Mt=Ne[At],xt={value:M(Mt),primKey:ce[_e+At]};H.call(xt,xt.value,xt)!==!1&&(xt.value==null?Be.push(ce[_e+At]):J||Et(ne(Mt),ne(xt.value))===0?($e.push(xt.value),J&&Re.push(ce[_e+At])):(Be.push(ce[_e+At]),ke.push(xt.value)))}return Promise.resolve(0<ke.length&&Q.mutate({trans:I,type:"add",values:ke}).then(function($n){for(var vt in $n.failures)Be.splice(parseInt(vt),1);le(ke.length,$n)})).then(function(){return(0<$e.length||we&&typeof y=="object")&&Q.mutate({trans:I,type:"put",keys:Re,values:$e,criteria:we,changeSpec:typeof y!="function"&&y,isAdditionalChunk:0<_e}).then(function($n){return le($e.length,$n)})}).then(function(){return(0<Be.length||we&&ae)&&Q.mutate({trans:I,type:"delete",keys:Be,criteria:we,isAdditionalChunk:0<_e}).then(function($n){return mc(N.table,Be,$n)}).then(function($n){return le(Be.length,$n)})}).then(function(){return ce.length>_e+je&&ge(_e+se)})})}var we=Go(N)&&N.limit===1/0&&(typeof y!="function"||ae)&&{index:N.index,range:N.range};return ge(0).then(function(){if(0<te.length)throw new We("Error modifying one or more objects",te,ie,oe);return ce.length})})})},Ot.prototype.delete=function(){var y=this._ctx,S=y.range;return!Go(y)||y.table.schema.yProps||!y.isPrimKey&&S.type!==3?this.modify(ip):this._write(function(N){var I=y.table.core.schema.primaryKey,$=S;return y.table.core.count({trans:N,query:{index:I,range:$}}).then(function(V){return y.table.core.mutate({trans:N,type:"deleteRange",range:$}).then(function(J){var Q=J.failures,J=J.numFailures;if(J)throw new We("Could not delete some values",Object.keys(Q).map(function(ne){return Q[ne]}),V-J);return V-J})})})},Ot);function Ot(){}var ip=function(y,S){return S.value=null};function x1(y,S){return y<S?-1:y===S?0:1}function w1(y,S){return S<y?-1:y===S?0:1}function vi(y,S,N){return y=y instanceof ap?new y.Collection(y):y,y._ctx.error=new(N||TypeError)(S),y}function Qo(y){return new y.Collection(y,function(){return sp("")}).limit(0)}function xa(y,S,N,I){var $,V,H,Q,J,ne,se,X=N.length;if(!N.every(function(ie){return typeof ie=="string"}))return vi(y,ep);function le(ie){$=ie==="next"?function(ae){return ae.toUpperCase()}:function(ae){return ae.toLowerCase()},V=ie==="next"?function(ae){return ae.toLowerCase()}:function(ae){return ae.toUpperCase()},H=ie==="next"?x1:w1;var oe=N.map(function(ae){return{lower:V(ae),upper:$(ae)}}).sort(function(ae,ce){return H(ae.lower,ce.lower)});Q=oe.map(function(ae){return ae.upper}),J=oe.map(function(ae){return ae.lower}),se=(ne=ie)==="next"?"":I}le("next"),y=new y.Collection(y,function(){return Vr(Q[0],J[X-1]+I)}),y._ondirectionchange=function(ie){le(ie)};var te=0;return y._addAlgorithm(function(ie,oe,ae){var ce=ie.key;if(typeof ce!="string")return!1;var ge=V(ce);if(S(ge,J,te))return!0;for(var we=null,_e=te;_e<X;++_e){var je=function(Oe,Ne,ke,$e,Re,Be){for(var At=Math.min(Oe.length,$e.length),Mt=-1,xt=0;xt<At;++xt){var $n=Ne[xt];if($n!==$e[xt])return Re(Oe[xt],ke[xt])<0?Oe.substr(0,xt)+ke[xt]+ke.substr(xt+1):Re(Oe[xt],$e[xt])<0?Oe.substr(0,xt)+$e[xt]+ke.substr(xt+1):0<=Mt?Oe.substr(0,Mt)+Ne[Mt]+ke.substr(Mt+1):null;Re(Oe[xt],$n)<0&&(Mt=xt)}return At<$e.length&&Be==="next"?Oe+ke.substr(Oe.length):At<Oe.length&&Be==="prev"?Oe.substr(0,ke.length):Mt<0?null:Oe.substr(0,Mt)+$e[Mt]+ke.substr(Mt+1)}(ce,ge,Q[_e],J[_e],H,ne);je===null&&we===null?te=_e+1:(we===null||0<H(we,je))&&(we=je)}return oe(we!==null?function(){ie.continue(we+se)}:ae),!1}),y}function Vr(y,S,N,I){return{type:2,lower:y,upper:S,lowerOpen:N,upperOpen:I}}function sp(y){return{type:1,lower:y,upper:y}}var ap=(Object.defineProperty(qn.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),qn.prototype.between=function(y,S,N,I){N=N!==!1,I=I===!0;try{return 0<this._cmp(y,S)||this._cmp(y,S)===0&&(N||I)&&(!N||!I)?Qo(this):new this.Collection(this,function(){return Vr(y,S,!N,!I)})}catch{return vi(this,Ci)}},qn.prototype.equals=function(y){return y==null?vi(this,Ci):new this.Collection(this,function(){return sp(y)})},qn.prototype.above=function(y){return y==null?vi(this,Ci):new this.Collection(this,function(){return Vr(y,void 0,!0)})},qn.prototype.aboveOrEqual=function(y){return y==null?vi(this,Ci):new this.Collection(this,function(){return Vr(y,void 0,!1)})},qn.prototype.below=function(y){return y==null?vi(this,Ci):new this.Collection(this,function(){return Vr(void 0,y,!1,!0)})},qn.prototype.belowOrEqual=function(y){return y==null?vi(this,Ci):new this.Collection(this,function(){return Vr(void 0,y)})},qn.prototype.startsWith=function(y){return typeof y!="string"?vi(this,ep):this.between(y,y+Za,!0,!0)},qn.prototype.startsWithIgnoreCase=function(y){return y===""?this.startsWith(y):xa(this,function(S,N){return S.indexOf(N[0])===0},[y],Za)},qn.prototype.equalsIgnoreCase=function(y){return xa(this,function(S,N){return S===N[0]},[y],"")},qn.prototype.anyOfIgnoreCase=function(){var y=Z.apply(q,arguments);return y.length===0?Qo(this):xa(this,function(S,N){return N.indexOf(S)!==-1},y,"")},qn.prototype.startsWithAnyOfIgnoreCase=function(){var y=Z.apply(q,arguments);return y.length===0?Qo(this):xa(this,function(S,N){return N.some(function(I){return S.indexOf(I)===0})},y,Za)},qn.prototype.anyOf=function(){var y=this,S=Z.apply(q,arguments),N=this._cmp;try{S.sort(N)}catch{return vi(this,Ci)}if(S.length===0)return Qo(this);var I=new this.Collection(this,function(){return Vr(S[0],S[S.length-1])});I._ondirectionchange=function(V){N=V==="next"?y._ascending:y._descending,S.sort(N)};var $=0;return I._addAlgorithm(function(V,H,Q){for(var J=V.key;0<N(J,S[$]);)if(++$===S.length)return H(Q),!1;return N(J,S[$])===0||(H(function(){V.continue(S[$])}),!1)}),I},qn.prototype.notEqual=function(y){return this.inAnyRange([[-1/0,y],[y,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},qn.prototype.noneOf=function(){var y=Z.apply(q,arguments);if(y.length===0)return new this.Collection(this);try{y.sort(this._ascending)}catch{return vi(this,Ci)}var S=y.reduce(function(N,I){return N?N.concat([[N[N.length-1][1],I]]):[[-1/0,I]]},null);return S.push([y[y.length-1],this.db._maxKey]),this.inAnyRange(S,{includeLowers:!1,includeUppers:!1})},qn.prototype.inAnyRange=function(ce,S){var N=this,I=this._cmp,$=this._ascending,V=this._descending,H=this._min,Q=this._max;if(ce.length===0)return Qo(this);if(!ce.every(function(ge){return ge[0]!==void 0&&ge[1]!==void 0&&$(ge[0],ge[1])<=0}))return vi(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",xe.InvalidArgument);var J=!S||S.includeLowers!==!1,ne=S&&S.includeUppers===!0,se,X=$;function le(ge,we){return X(ge[0],we[0])}try{(se=ce.reduce(function(ge,we){for(var _e=0,je=ge.length;_e<je;++_e){var Oe=ge[_e];if(I(we[0],Oe[1])<0&&0<I(we[1],Oe[0])){Oe[0]=H(Oe[0],we[0]),Oe[1]=Q(Oe[1],we[1]);break}}return _e===je&&ge.push(we),ge},[])).sort(le)}catch{return vi(this,Ci)}var te=0,ie=ne?function(ge){return 0<$(ge,se[te][1])}:function(ge){return 0<=$(ge,se[te][1])},oe=J?function(ge){return 0<V(ge,se[te][0])}:function(ge){return 0<=V(ge,se[te][0])},ae=ie,ce=new this.Collection(this,function(){return Vr(se[0][0],se[se.length-1][1],!J,!ne)});return ce._ondirectionchange=function(ge){X=ge==="next"?(ae=ie,$):(ae=oe,V),se.sort(le)},ce._addAlgorithm(function(ge,we,_e){for(var je,Oe=ge.key;ae(Oe);)if(++te===se.length)return we(_e),!1;return!ie(je=Oe)&&!oe(je)||(N._cmp(Oe,se[te][1])===0||N._cmp(Oe,se[te][0])===0||we(function(){X===$?ge.continue(se[te][0]):ge.continue(se[te][1])}),!1)}),ce},qn.prototype.startsWithAnyOf=function(){var y=Z.apply(q,arguments);return y.every(function(S){return typeof S=="string"})?y.length===0?Qo(this):this.inAnyRange(y.map(function(S){return[S,S+Za]})):vi(this,"startsWithAnyOf() only works with strings")},qn);function qn(){}function Br(y){return Wt(function(S){return bc(S),y(S.target.error),!1})}function bc(y){y.stopPropagation&&y.stopPropagation(),y.preventDefault&&y.preventDefault()}var xc="storagemutated",op="x-storagemutated-1",Ur=qo(null,xc),_1=(vs.prototype._lock=function(){return E(!Ge.global),++this._reculock,this._reculock!==1||Ge.global||(Ge.lockOwnerFor=this),this},vs.prototype._unlock=function(){if(E(!Ge.global),--this._reculock==0)for(Ge.global||(Ge.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var y=this._blockedFuncs.shift();try{$s(y[1],y[0])}catch{}}return this},vs.prototype._locked=function(){return this._reculock&&Ge.lockOwnerFor!==this},vs.prototype.create=function(y){var S=this;if(!this.mode)return this;var N=this.db.idbdb,I=this.db._state.dbOpenError;if(E(!this.idbtrans),!y&&!N)switch(I&&I.name){case"DatabaseClosedError":throw new xe.DatabaseClosed(I);case"MissingAPIError":throw new xe.MissingAPI(I.message,I);default:throw new xe.OpenFailed(I)}if(!this.active)throw new xe.TransactionInactive;return E(this._completion._state===null),(y=this.idbtrans=y||(this.db.core||N).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Wt(function($){bc($),S._reject(y.error)}),y.onabort=Wt(function($){bc($),S.active&&S._reject(new xe.Abort(y.error)),S.active=!1,S.on("abort").fire($)}),y.oncomplete=Wt(function(){S.active=!1,S._resolve(),"mutatedParts"in y&&Ur.storagemutated.fire(y.mutatedParts)}),this},vs.prototype._promise=function(y,S,N){var I=this;if(y==="readwrite"&&this.mode!=="readwrite")return Cn(new xe.ReadOnly("Transaction is readonly"));if(!this.active)return Cn(new xe.TransactionInactive);if(this._locked())return new ee(function(V,H){I._blockedFuncs.push([function(){I._promise(y,S,N).then(V,H)},Ge])});if(N)return qi(function(){var V=new ee(function(H,Q){I._lock();var J=S(H,Q,I);J&&J.then&&J.then(H,Q)});return V.finally(function(){return I._unlock()}),V._lib=!0,V});var $=new ee(function(V,H){var Q=S(V,H,I);Q&&Q.then&&Q.then(V,H)});return $._lib=!0,$},vs.prototype._root=function(){return this.parent?this.parent._root():this},vs.prototype.waitFor=function(y){var S,N=this._root(),I=ee.resolve(y);N._waitingFor?N._waitingFor=N._waitingFor.then(function(){return I}):(N._waitingFor=I,N._waitingQueue=[],S=N.idbtrans.objectStore(N.storeNames[0]),function V(){for(++N._spinCount;N._waitingQueue.length;)N._waitingQueue.shift()();N._waitingFor&&(S.get(-1/0).onsuccess=V)}());var $=N._waitingFor;return new ee(function(V,H){I.then(function(Q){return N._waitingQueue.push(Wt(V.bind(null,Q)))},function(Q){return N._waitingQueue.push(Wt(H.bind(null,Q)))}).finally(function(){N._waitingFor===$&&(N._waitingFor=null)})})},vs.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new xe.Abort))},vs.prototype.table=function(y){var S=this._memoizedTables||(this._memoizedTables={});if(f(S,y))return S[y];var N=this.schema[y];if(!N)throw new xe.NotFound("Table "+y+" not part of transaction");return N=new this.db.Table(y,N,this),N.core=this.db.core.table(y),S[y]=N},vs);function vs(){}function Xo(y,S,N,I,$,V,H,Q){return{name:y,keyPath:S,unique:N,multi:I,auto:$,compound:V,src:(N&&!H?"&":"")+(I?"*":"")+($?"++":"")+wc(S),type:Q}}function wc(y){return typeof y=="string"?y:y?"["+[].join.call(y,"+")+"]":""}function md(y,S,N){return{name:y,primKey:S,indexes:N,mappedClass:null,idxByName:(I=function($){return[$.name,$]},N.reduce(function($,V,H){return H=I(V,H),H&&($[H[0]]=H[1]),$},{}))};var I}var Bs=function(y){try{return y.only([[]]),Bs=function(){return[[]]},[[]]}catch{return Bs=function(){return Za},Za}};function to(y){return y==null?function(){}:typeof y=="string"?(S=y).split(".").length===1?function(N){return N[S]}:function(N){return T(N,S)}:function(N){return T(N,y)};var S}function lp(y){return[].slice.call(y)}var cp=0;function on(y){return y==null?":id":typeof y=="string"?y:"[".concat(y.join("+"),"]")}function S1(y,S,J){function I(ae){if(ae.type===3)return null;if(ae.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var te=ae.lower,ie=ae.upper,oe=ae.lowerOpen,ae=ae.upperOpen;return te===void 0?ie===void 0?null:S.upperBound(ie,!!ae):ie===void 0?S.lowerBound(te,!!oe):S.bound(te,ie,!!oe,!!ae)}function $(le){var te,ie=le.name;return{name:ie,schema:le,mutate:function(oe){var ae=oe.trans,ce=oe.type,ge=oe.keys,we=oe.values,_e=oe.range;return new Promise(function(je,Oe){je=Wt(je);var Ne=ae.objectStore(ie),ke=Ne.keyPath==null,$e=ce==="put"||ce==="add";if(!$e&&ce!=="delete"&&ce!=="deleteRange")throw new Error("Invalid operation type: "+ce);var Re,Be=(ge||we||{length:1}).length;if(ge&&we&&ge.length!==we.length)throw new Error("Given keys array must have same length as given values array.");if(Be===0)return je({numFailures:0,failures:{},results:[],lastResult:void 0});function At(yi){++$n,bc(yi)}var Mt=[],xt=[],$n=0;if(ce==="deleteRange"){if(_e.type===4)return je({numFailures:$n,failures:xt,results:[],lastResult:void 0});_e.type===3?Mt.push(Re=Ne.clear()):Mt.push(Re=Ne.delete(I(_e)))}else{var ke=$e?ke?[we,ge]:[we,null]:[ge,null],vt=ke[0],ii=ke[1];if($e)for(var si=0;si<Be;++si)Mt.push(Re=ii&&ii[si]!==void 0?Ne[ce](vt[si],ii[si]):Ne[ce](vt[si])),Re.onerror=At;else for(si=0;si<Be;++si)Mt.push(Re=Ne[ce](vt[si])),Re.onerror=At}function zv(yi){yi=yi.target.result,Mt.forEach(function(Nc,C1){return Nc.error!=null&&(xt[C1]=Nc.error)}),je({numFailures:$n,failures:xt,results:ce==="delete"?ge:Mt.map(function(Nc){return Nc.result}),lastResult:yi})}Re.onerror=function(yi){At(yi),zv(yi)},Re.onsuccess=zv})},getMany:function(oe){var ae=oe.trans,ce=oe.keys;return new Promise(function(ge,we){ge=Wt(ge);for(var _e,je=ae.objectStore(ie),Oe=ce.length,Ne=new Array(Oe),ke=0,$e=0,Re=function(Mt){Mt=Mt.target,Ne[Mt._pos]=Mt.result,++$e===ke&&ge(Ne)},Be=Br(we),At=0;At<Oe;++At)ce[At]!=null&&((_e=je.get(ce[At]))._pos=At,_e.onsuccess=Re,_e.onerror=Be,++ke);ke===0&&ge(Ne)})},get:function(oe){var ae=oe.trans,ce=oe.key;return new Promise(function(ge,we){ge=Wt(ge);var _e=ae.objectStore(ie).get(ce);_e.onsuccess=function(je){return ge(je.target.result)},_e.onerror=Br(we)})},query:(te=ne,function(oe){return new Promise(function(ae,ce){ae=Wt(ae);var ge,we,_e,ke=oe.trans,je=oe.values,Oe=oe.limit,Re=oe.query,Ne=Oe===1/0?void 0:Oe,$e=Re.index,Re=Re.range,ke=ke.objectStore(ie),$e=$e.isPrimaryKey?ke:ke.index($e.name),Re=I(Re);if(Oe===0)return ae({result:[]});te?((Ne=je?$e.getAll(Re,Ne):$e.getAllKeys(Re,Ne)).onsuccess=function(Be){return ae({result:Be.target.result})},Ne.onerror=Br(ce)):(ge=0,we=!je&&"openKeyCursor"in $e?$e.openKeyCursor(Re):$e.openCursor(Re),_e=[],we.onsuccess=function(Be){var At=we.result;return At?(_e.push(je?At.value:At.primaryKey),++ge===Oe?ae({result:_e}):void At.continue()):ae({result:_e})},we.onerror=Br(ce))})}),openCursor:function(oe){var ae=oe.trans,ce=oe.values,ge=oe.query,we=oe.reverse,_e=oe.unique;return new Promise(function(je,Oe){je=Wt(je);var $e=ge.index,Ne=ge.range,ke=ae.objectStore(ie),ke=$e.isPrimaryKey?ke:ke.index($e.name),$e=we?_e?"prevunique":"prev":_e?"nextunique":"next",Re=!ce&&"openKeyCursor"in ke?ke.openKeyCursor(I(Ne),$e):ke.openCursor(I(Ne),$e);Re.onerror=Br(Oe),Re.onsuccess=Wt(function(Be){var At,Mt,xt,$n,vt=Re.result;vt?(vt.___id=++cp,vt.done=!1,At=vt.continue.bind(vt),Mt=(Mt=vt.continuePrimaryKey)&&Mt.bind(vt),xt=vt.advance.bind(vt),$n=function(){throw new Error("Cursor not stopped")},vt.trans=ae,vt.stop=vt.continue=vt.continuePrimaryKey=vt.advance=function(){throw new Error("Cursor not started")},vt.fail=Wt(Oe),vt.next=function(){var ii=this,si=1;return this.start(function(){return si--?ii.continue():ii.stop()}).then(function(){return ii})},vt.start=function(ii){function si(){if(Re.result)try{ii()}catch(yi){vt.fail(yi)}else vt.done=!0,vt.start=function(){throw new Error("Cursor behind last entry")},vt.stop()}var zv=new Promise(function(yi,Nc){yi=Wt(yi),Re.onerror=Br(Nc),vt.fail=Nc,vt.stop=function(C1){vt.stop=vt.continue=vt.continuePrimaryKey=vt.advance=$n,yi(C1)}});return Re.onsuccess=Wt(function(yi){Re.onsuccess=si,si()}),vt.continue=At,vt.continuePrimaryKey=Mt,vt.advance=xt,si(),zv},je(vt)):je(null)},Oe)})},count:function(oe){var ae=oe.query,ce=oe.trans,ge=ae.index,we=ae.range;return new Promise(function(_e,je){var Oe=ce.objectStore(ie),Ne=ge.isPrimaryKey?Oe:Oe.index(ge.name),Oe=I(we),Ne=Oe?Ne.count(Oe):Ne.count();Ne.onsuccess=Wt(function(ke){return _e(ke.target.result)}),Ne.onerror=Br(je)})}}}var V,H,Q,se=(H=J,Q=lp((V=y).objectStoreNames),{schema:{name:V.name,tables:Q.map(function(le){return H.objectStore(le)}).map(function(le){var te=le.keyPath,ae=le.autoIncrement,ie=o(te),oe={},ae={name:le.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:te==null,compound:ie,keyPath:te,autoIncrement:ae,unique:!0,extractKey:to(te)},indexes:lp(le.indexNames).map(function(ce){return le.index(ce)}).map(function(_e){var ge=_e.name,we=_e.unique,je=_e.multiEntry,_e=_e.keyPath,je={name:ge,compound:o(_e),keyPath:_e,unique:we,multiEntry:je,extractKey:to(_e)};return oe[on(_e)]=je}),getIndexByKeyPath:function(ce){return oe[on(ce)]}};return oe[":id"]=ae.primaryKey,te!=null&&(oe[on(te)]=ae.primaryKey),ae})},hasGetAll:0<Q.length&&"getAll"in H.objectStore(Q[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),J=se.schema,ne=se.hasGetAll,se=J.tables.map($),X={};return se.forEach(function(le){return X[le.name]=le}),{stack:"dbcore",transaction:y.transaction.bind(y),table:function(le){if(!X[le])throw new Error("Table '".concat(le,"' not found"));return X[le]},MIN_KEY:-1/0,MAX_KEY:Bs(S),schema:J}}function A1(y,S,N,I){var $=N.IDBKeyRange;return N.indexedDB,{dbcore:(I=S1(S,$,I),y.dbcore.reduce(function(V,H){return H=H.create,r(r({},V),H(V))},I))}}function _c(y,I){var N=I.db,I=A1(y._middlewares,N,y._deps,I);y.core=I.dbcore,y.tables.forEach(function($){var V=$.name;y.core.schema.tables.some(function(H){return H.name===V})&&($.core=y.core.table(V),y[V]instanceof y.Table&&(y[V].core=$.core))})}function Sc(y,S,N,I){N.forEach(function($){var V=I[$];S.forEach(function(H){var Q=function J(ne,se){return b(ne,se)||(ne=u(ne))&&J(ne,se)}(H,$);(!Q||"value"in Q&&Q.value===void 0)&&(H===y.Transaction.prototype||H instanceof y.Transaction?m(H,$,{get:function(){return this.table($)},set:function(J){p(this,$,{value:J,writable:!0,configurable:!0,enumerable:!0})}}):H[$]=new y.Table($,V))})})}function gd(y,S){S.forEach(function(N){for(var I in N)N[I]instanceof y.Table&&delete N[I]})}function vd(y,S){return y._cfg.version-S._cfg.version}function Mv(y,S,N,I){var $=y._dbSchema;N.objectStoreNames.contains("$meta")&&!$.$meta&&($.$meta=md("$meta",dp("")[0],[]),y._storeNames.push("$meta"));var V=y._createTransaction("readwrite",y._storeNames,$);V.create(N),V._completion.catch(I);var H=V._reject.bind(V),Q=Ge.transless||Ge;qi(function(){return Ge.trans=V,Ge.transless=Q,S!==0?(_c(y,N),ne=S,((J=V).storeNames.includes("$meta")?J.table("$meta").get("version").then(function(se){return se??ne}):ee.resolve(ne)).then(function(se){return le=se,te=V,ie=N,oe=[],se=(X=y)._versions,ae=X._dbSchema=Jo(0,X.idbdb,ie),(se=se.filter(function(ce){return ce._cfg.version>=le})).length!==0?(se.forEach(function(ce){oe.push(function(){var ge=ae,we=ce._cfg.dbschema;no(X,ge,ie),no(X,we,ie),ae=X._dbSchema=we;var _e=yd(ge,we);_e.add.forEach(function($e){up(ie,$e[0],$e[1].primKey,$e[1].indexes)}),_e.change.forEach(function($e){if($e.recreate)throw new xe.Upgrade("Not yet support for changing primary key");var Re=ie.objectStore($e.name);$e.add.forEach(function(Be){return Ac(Re,Be)}),$e.change.forEach(function(Be){Re.deleteIndex(Be.name),Ac(Re,Be)}),$e.del.forEach(function(Be){return Re.deleteIndex(Be)})});var je=ce._cfg.contentUpgrade;if(je&&ce._cfg.version>le){_c(X,ie),te._memoizedTables={};var Oe=C(we);_e.del.forEach(function($e){Oe[$e]=ge[$e]}),gd(X,[X.Transaction.prototype]),Sc(X,[X.Transaction.prototype],a(Oe),Oe),te.schema=Oe;var Ne,ke=re(je);return ke&&Qa(),_e=ee.follow(function(){var $e;(Ne=je(te))&&ke&&($e=gs.bind(null,null),Ne.then($e,$e))}),Ne&&typeof Ne.then=="function"?ee.resolve(Ne):_e.then(function(){return Ne})}}),oe.push(function(ge){var we,_e,je=ce._cfg.dbschema;we=je,_e=ge,[].slice.call(_e.db.objectStoreNames).forEach(function(Oe){return we[Oe]==null&&_e.db.deleteObjectStore(Oe)}),gd(X,[X.Transaction.prototype]),Sc(X,[X.Transaction.prototype],X._storeNames,X._dbSchema),te.schema=X._dbSchema}),oe.push(function(ge){X.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(X.idbdb.version/10)===ce._cfg.version?(X.idbdb.deleteObjectStore("$meta"),delete X._dbSchema.$meta,X._storeNames=X._storeNames.filter(function(we){return we!=="$meta"})):ge.objectStore("$meta").put(ce._cfg.version,"version"))})}),function ce(){return oe.length?ee.resolve(oe.shift()(te.idbtrans)).then(ce):ee.resolve()}().then(function(){Zo(ae,ie)})):ee.resolve();var X,le,te,ie,oe,ae}).catch(H)):(a($).forEach(function(se){up(N,se,$[se].primKey,$[se].indexes)}),_c(y,N),void ee.follow(function(){return y.on.populate.fire(V)}).catch(H));var J,ne})}function Us(y,S){Zo(y._dbSchema,S),S.db.version%10!=0||S.objectStoreNames.contains("$meta")||S.db.createObjectStore("$meta").add(Math.ceil(S.db.version/10-1),"version");var N=Jo(0,y.idbdb,S);no(y,y._dbSchema,S);for(var I=0,$=yd(N,y._dbSchema).change;I<$.length;I++){var V=function(H){if(H.change.length||H.recreate)return console.warn("Unable to patch indexes of table ".concat(H.name," because it has changes on the type of index or primary key.")),{value:void 0};var Q=S.objectStore(H.name);H.add.forEach(function(J){Ut&&console.debug("Dexie upgrade patch: Creating missing index ".concat(H.name,".").concat(J.src)),Ac(Q,J)})}($[I]);if(typeof V=="object")return V.value}}function yd(y,S){var N,I={del:[],add:[],change:[]};for(N in y)S[N]||I.del.push(N);for(N in S){var $=y[N],V=S[N];if($){var H={name:N,def:V,recreate:!1,del:[],add:[],change:[]};if(""+($.primKey.keyPath||"")!=""+(V.primKey.keyPath||"")||$.primKey.auto!==V.primKey.auto)H.recreate=!0,I.change.push(H);else{var Q=$.idxByName,J=V.idxByName,ne=void 0;for(ne in Q)J[ne]||H.del.push(ne);for(ne in J){var se=Q[ne],X=J[ne];se?se.src!==X.src&&H.change.push(X):H.add.push(X)}(0<H.del.length||0<H.add.length||0<H.change.length)&&I.change.push(H)}}else I.add.push([N,V])}return I}function up(y,S,N,I){var $=y.db.createObjectStore(S,N.keyPath?{keyPath:N.keyPath,autoIncrement:N.auto}:{autoIncrement:N.auto});return I.forEach(function(V){return Ac($,V)}),$}function Zo(y,S){a(y).forEach(function(N){S.db.objectStoreNames.contains(N)||(Ut&&console.debug("Dexie: Creating missing table",N),up(S,N,y[N].primKey,y[N].indexes))})}function Ac(y,S){y.createIndex(S.name,S.keyPath,{unique:S.unique,multiEntry:S.multi})}function Jo(y,S,N){var I={};return w(S.objectStoreNames,0).forEach(function($){for(var V=N.objectStore($),H=Xo(wc(ne=V.keyPath),ne||"",!0,!1,!!V.autoIncrement,ne&&typeof ne!="string",!0),Q=[],J=0;J<V.indexNames.length;++J){var se=V.index(V.indexNames[J]),ne=se.keyPath,se=Xo(se.name,ne,!!se.unique,!!se.multiEntry,!1,ne&&typeof ne!="string",!1);Q.push(se)}I[$]=md($,H,Q)}),I}function no(y,S,N){for(var I=N.db.objectStoreNames,$=0;$<I.length;++$){var V=I[$],H=N.objectStore(V);y._hasGetAll="getAll"in H;for(var Q=0;Q<H.indexNames.length;++Q){var J=H.indexNames[Q],ne=H.index(J).keyPath,se=typeof ne=="string"?ne:"["+w(ne).join("+")+"]";!S[V]||(ne=S[V].idxByName[se])&&(ne.name=J,delete S[V].idxByName[se],S[V].idxByName[J]=ne)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&s.WorkerGlobalScope&&s instanceof s.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(y._hasGetAll=!1)}function dp(y){return y.split(",").map(function(S,N){var V=S.split(":"),I=($=V[1])===null||$===void 0?void 0:$.trim(),$=(S=V[0].trim()).replace(/([&*]|\+\+)/g,""),V=/^\[/.test($)?$.match(/^\[(.*)\]$/)[1].split("+"):$;return Xo($,V||null,/\&/.test(S),/\*/.test(S),/\+\+/.test(S),o(V),N===0,I)})}var bd=(el.prototype._createTableSchema=md,el.prototype._parseIndexSyntax=dp,el.prototype._parseStoresSpec=function(y,S){var N=this;a(y).forEach(function(I){if(y[I]!==null){var $=N._parseIndexSyntax(y[I]),V=$.shift();if(!V)throw new xe.Schema("Invalid schema for table "+I+": "+y[I]);if(V.unique=!0,V.multi)throw new xe.Schema("Primary key cannot be multiEntry*");$.forEach(function(H){if(H.auto)throw new xe.Schema("Only primary key can be marked as autoIncrement (++)");if(!H.keyPath)throw new xe.Schema("Index must have a name and cannot be an empty string")}),$=N._createTableSchema(I,V,$),S[I]=$}})},el.prototype.stores=function(N){var S=this.db;this._cfg.storesSource=this._cfg.storesSource?c(this._cfg.storesSource,N):N;var N=S._versions,I={},$={};return N.forEach(function(V){c(I,V._cfg.storesSource),$=V._cfg.dbschema={},V._parseStoresSpec(I,$)}),S._dbSchema=$,gd(S,[S._allTables,S,S.Transaction.prototype]),Sc(S,[S._allTables,S,S.Transaction.prototype,this._cfg.tables],a($),$),S._storeNames=a($),this},el.prototype.upgrade=function(y){return this._cfg.contentUpgrade=Hn(this._cfg.contentUpgrade||fe,y),this},el);function el(){}function xd(y,S){var N=y._dbNamesDB;return N||(N=y._dbNamesDB=new so(ya,{addons:[],indexedDB:y,IDBKeyRange:S})).version(1).stores({dbnames:"name"}),N.table("dbnames")}function ro(y){return y&&typeof y.databases=="function"}function wd(y){return qi(function(){return Ge.letThrough=!0,y()})}function _d(y){return!("from"in y)}var ar=function(y,S){if(!this){var N=new ar;return y&&"d"in y&&c(N,y),N}c(this,arguments.length?{d:1,from:y,to:1<arguments.length?S:y}:{d:0})};function io(y,S,N){var I=Et(S,N);if(!isNaN(I)){if(0<I)throw RangeError();if(_d(y))return c(y,{from:S,to:N,d:1});var $=y.l,I=y.r;if(Et(N,y.from)<0)return $?io($,S,N):y.l={from:S,to:N,d:1,l:null,r:null},fp(y);if(0<Et(S,y.to))return I?io(I,S,N):y.r={from:S,to:N,d:1,l:null,r:null},fp(y);Et(S,y.from)<0&&(y.from=S,y.l=null,y.d=I?I.d+1:1),0<Et(N,y.to)&&(y.to=N,y.r=null,y.d=y.l?y.l.d+1:1),N=!y.r,$&&!y.l&&tl(y,$),I&&N&&tl(y,I)}}function tl(y,S){_d(S)||function N(I,J){var V=J.from,H=J.to,Q=J.l,J=J.r;io(I,V,H),Q&&N(I,Q),J&&N(I,J)}(y,S)}function Ec(y,S){var N=jc(S),I=N.next();if(I.done)return!1;for(var $=I.value,V=jc(y),H=V.next($.from),Q=H.value;!I.done&&!H.done;){if(Et(Q.from,$.to)<=0&&0<=Et(Q.to,$.from))return!0;Et($.from,Q.from)<0?$=(I=N.next(Q.from)).value:Q=(H=V.next($.from)).value}return!1}function jc(y){var S=_d(y)?null:{s:0,n:y};return{next:function(N){for(var I=0<arguments.length;S;)switch(S.s){case 0:if(S.s=1,I)for(;S.n.l&&Et(N,S.n.from)<0;)S={up:S,n:S.n.l,s:1};else for(;S.n.l;)S={up:S,n:S.n.l,s:1};case 1:if(S.s=2,!I||Et(N,S.n.to)<=0)return{value:S.n,done:!1};case 2:if(S.n.r){S.s=3,S={up:S,n:S.n.r,s:0};continue}case 3:S=S.up}return{done:!0}}}}function fp(y){var S,N,I=(((S=y.r)===null||S===void 0?void 0:S.d)||0)-(((N=y.l)===null||N===void 0?void 0:N.d)||0),$=1<I?"r":I<-1?"l":"";$&&(S=$=="r"?"l":"r",N=r({},y),I=y[$],y.from=I.from,y.to=I.to,y[$]=I[$],N[$]=I[S],(y[S]=N).d=wa(N)),y.d=wa(y)}function wa(N){var S=N.r,N=N.l;return(S?N?Math.max(S.d,N.d):S.d:N?N.d:0)+1}function Cc(y,S){return a(S).forEach(function(N){y[N]?tl(y[N],S[N]):y[N]=function I($){var V,H,Q={};for(V in $)f($,V)&&(H=$[V],Q[V]=!H||typeof H!="object"||L.has(H.constructor)?H:I(H));return Q}(S[N])}),y}function Sd(y,S){return y.all||S.all||Object.keys(y).some(function(N){return S[N]&&Ec(S[N],y[N])})}h(ar.prototype,((ys={add:function(y){return tl(this,y),this},addKey:function(y){return io(this,y,y),this},addKeys:function(y){var S=this;return y.forEach(function(N){return io(S,N,N)}),this},hasKey:function(y){var S=jc(this).next(y).value;return S&&Et(S.from,y)<=0&&0<=Et(S.to,y)}})[B]=function(){return jc(this)},ys));var _a={},Ad={},nl=!1;function Nr(y){Cc(Ad,y),nl||(nl=!0,setTimeout(function(){nl=!1,Ed(Ad,!(Ad={}))},0))}function Ed(y,S){S===void 0&&(S=!1);var N=new Set;if(y.all)for(var I=0,$=Object.values(_a);I<$.length;I++)hp(H=$[I],y,N,S);else for(var V in y){var H,Q=/^idb\:\/\/(.*)\/(.*)\//.exec(V);Q&&(V=Q[1],Q=Q[2],(H=_a["idb://".concat(V,"/").concat(Q)])&&hp(H,y,N,S))}N.forEach(function(J){return J()})}function hp(y,S,N,I){for(var $=[],V=0,H=Object.entries(y.queries.query);V<H.length;V++){for(var Q=H[V],J=Q[0],ne=[],se=0,X=Q[1];se<X.length;se++){var le=X[se];Sd(S,le.obsSet)?le.subscribers.forEach(function(ae){return N.add(ae)}):I&&ne.push(le)}I&&$.push([J,ne])}if(I)for(var te=0,ie=$;te<ie.length;te++){var oe=ie[te],J=oe[0],ne=oe[1];y.queries.query[J]=ne}}function rl(y){var S=y._state,N=y._deps.indexedDB;if(S.isBeingOpened||y.idbdb)return S.dbReadyPromise.then(function(){return S.dbOpenError?Cn(S.dbOpenError):y});S.isBeingOpened=!0,S.dbOpenError=null,S.openComplete=!1;var I=S.openCanceller,$=Math.round(10*y.verno),V=!1;function H(){if(S.openCanceller!==I)throw new xe.DatabaseClosed("db.open() was cancelled")}function Q(){return new ee(function(le,te){if(H(),!N)throw new xe.MissingAPI;var ie=y.name,oe=S.autoSchema||!$?N.open(ie):N.open(ie,$);if(!oe)throw new xe.MissingAPI;oe.onerror=Br(te),oe.onblocked=Wt(y._fireOnBlocked),oe.onupgradeneeded=Wt(function(ae){var ce;se=oe.transaction,S.autoSchema&&!y._options.allowEmptyDB?(oe.onerror=bc,se.abort(),oe.result.close(),(ce=N.deleteDatabase(ie)).onsuccess=ce.onerror=Wt(function(){te(new xe.NoSuchDatabase("Database ".concat(ie," doesnt exist")))})):(se.onerror=Br(te),ae=ae.oldVersion>Math.pow(2,62)?0:ae.oldVersion,X=ae<1,y.idbdb=oe.result,V&&Us(y,se),Mv(y,ae/10,se,te))},te),oe.onsuccess=Wt(function(){se=null;var ae,ce,ge,we,_e,je=y.idbdb=oe.result,Oe=w(je.objectStoreNames);if(0<Oe.length)try{var Ne=je.transaction((we=Oe).length===1?we[0]:we,"readonly");if(S.autoSchema)ce=je,ge=Ne,(ae=y).verno=ce.version/10,ge=ae._dbSchema=Jo(0,ce,ge),ae._storeNames=w(ce.objectStoreNames,0),Sc(ae,[ae._allTables],a(ge),ge);else if(no(y,y._dbSchema,Ne),((_e=yd(Jo(0,(_e=y).idbdb,Ne),_e._dbSchema)).add.length||_e.change.some(function(ke){return ke.add.length||ke.change.length}))&&!V)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),je.close(),$=je.version+1,V=!0,le(Q());_c(y,Ne)}catch{}va.push(y),je.onversionchange=Wt(function(ke){S.vcFired=!0,y.on("versionchange").fire(ke)}),je.onclose=Wt(function(ke){y.on("close").fire(ke)}),X&&(_e=y._deps,Ne=ie,je=_e.indexedDB,_e=_e.IDBKeyRange,ro(je)||Ne===ya||xd(je,_e).put({name:Ne}).catch(fe)),le()},te)}).catch(function(le){switch(le==null?void 0:le.name){case"UnknownError":if(0<S.PR1398_maxLoop)return S.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),Q();break;case"VersionError":if(0<$)return $=0,Q()}return ee.reject(le)})}var J,ne=S.dbReadyResolve,se=null,X=!1;return ee.race([I,(typeof navigator>"u"?ee.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(le){function te(){return indexedDB.databases().finally(le)}J=setInterval(te,100),te()}).finally(function(){return clearInterval(J)}):Promise.resolve()).then(Q)]).then(function(){return H(),S.onReadyBeingFired=[],ee.resolve(wd(function(){return y.on.ready.fire(y.vip)})).then(function le(){if(0<S.onReadyBeingFired.length){var te=S.onReadyBeingFired.reduce(Hn,fe);return S.onReadyBeingFired=[],ee.resolve(wd(function(){return te(y.vip)})).then(le)}})}).finally(function(){S.openCanceller===I&&(S.onReadyBeingFired=null,S.isBeingOpened=!1)}).catch(function(le){S.dbOpenError=le;try{se&&se.abort()}catch{}return I===S.openCanceller&&y._close(),Cn(le)}).finally(function(){S.openComplete=!0,ne()}).then(function(){var le;return X&&(le={},y.tables.forEach(function(te){te.schema.indexes.forEach(function(ie){ie.name&&(le["idb://".concat(y.name,"/").concat(te.name,"/").concat(ie.name)]=new ar(-1/0,[[[]]]))}),le["idb://".concat(y.name,"/").concat(te.name,"/")]=le["idb://".concat(y.name,"/").concat(te.name,"/:dels")]=new ar(-1/0,[[[]]])}),Ur(xc).fire(le),Ed(le,!0)),y})}function v(y){function S(V){return y.next(V)}var N=$(S),I=$(function(V){return y.throw(V)});function $(V){return function(J){var Q=V(J),J=Q.value;return Q.done?J:J&&typeof J.then=="function"?J.then(N,I):o(J)?Promise.all(J).then(N,I):N(J)}}return $(S)()}function k(y,S,N){for(var I=o(y)?y.slice():[y],$=0;$<N;++$)I.push(S);return I}var R={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(y){return r(r({},y),{table:function(S){var N=y.table(S),I=N.schema,$={},V=[];function H(X,le,te){var ie=on(X),oe=$[ie]=$[ie]||[],ae=X==null?0:typeof X=="string"?1:X.length,ce=0<le,ce=r(r({},te),{name:ce?"".concat(ie,"(virtual-from:").concat(te.name,")"):te.name,lowLevelIndex:te,isVirtual:ce,keyTail:le,keyLength:ae,extractKey:to(X),unique:!ce&&te.unique});return oe.push(ce),ce.isPrimaryKey||V.push(ce),1<ae&&H(ae===2?X[0]:X.slice(0,ae-1),le+1,te),oe.sort(function(ge,we){return ge.keyTail-we.keyTail}),ce}S=H(I.primaryKey.keyPath,0,I.primaryKey),$[":id"]=[S];for(var Q=0,J=I.indexes;Q<J.length;Q++){var ne=J[Q];H(ne.keyPath,0,ne)}function se(X){var le,te=X.query.index;return te.isVirtual?r(r({},X),{query:{index:te.lowLevelIndex,range:(le=X.query.range,te=te.keyTail,{type:le.type===1?2:le.type,lower:k(le.lower,le.lowerOpen?y.MAX_KEY:y.MIN_KEY,te),lowerOpen:!0,upper:k(le.upper,le.upperOpen?y.MIN_KEY:y.MAX_KEY,te),upperOpen:!0})}}):X}return r(r({},N),{schema:r(r({},I),{primaryKey:S,indexes:V,getIndexByKeyPath:function(X){return(X=$[on(X)])&&X[0]}}),count:function(X){return N.count(se(X))},query:function(X){return N.query(se(X))},openCursor:function(X){var le=X.query.index,te=le.keyTail,ie=le.isVirtual,oe=le.keyLength;return ie?N.openCursor(se(X)).then(function(ce){return ce&&ae(ce)}):N.openCursor(X);function ae(ce){return Object.create(ce,{continue:{value:function(ge){ge!=null?ce.continue(k(ge,X.reverse?y.MAX_KEY:y.MIN_KEY,te)):X.unique?ce.continue(ce.key.slice(0,oe).concat(X.reverse?y.MIN_KEY:y.MAX_KEY,te)):ce.continue()}},continuePrimaryKey:{value:function(ge,we){ce.continuePrimaryKey(k(ge,y.MAX_KEY,te),we)}},primaryKey:{get:function(){return ce.primaryKey}},key:{get:function(){var ge=ce.key;return oe===1?ge[0]:ge.slice(0,oe)}},value:{get:function(){return ce.value}}})}}})}})}};function W(y,S,N,I){return N=N||{},I=I||"",a(y).forEach(function($){var V,H,Q;f(S,$)?(V=y[$],H=S[$],typeof V=="object"&&typeof H=="object"&&V&&H?(Q=K(V))!==K(H)?N[I+$]=S[$]:Q==="Object"?W(V,H,N,I+$+"."):V!==H&&(N[I+$]=S[$]):V!==H&&(N[I+$]=S[$])):N[I+$]=void 0}),a(S).forEach(function($){f(y,$)||(N[I+$]=S[$])}),N}function ue(y,S){return S.type==="delete"?S.keys:S.keys||S.values.map(y.extractKey)}var be={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(y){return r(r({},y),{table:function(S){var N=y.table(S),I=N.schema.primaryKey;return r(r({},N),{mutate:function($){var V=Ge.trans,H=V.table(S).hook,Q=H.deleting,J=H.creating,ne=H.updating;switch($.type){case"add":if(J.fire===fe)break;return V._promise("readwrite",function(){return se($)},!0);case"put":if(J.fire===fe&&ne.fire===fe)break;return V._promise("readwrite",function(){return se($)},!0);case"delete":if(Q.fire===fe)break;return V._promise("readwrite",function(){return se($)},!0);case"deleteRange":if(Q.fire===fe)break;return V._promise("readwrite",function(){return function X(le,te,ie){return N.query({trans:le,values:!1,query:{index:I,range:te},limit:ie}).then(function(oe){var ae=oe.result;return se({type:"delete",keys:ae,trans:le}).then(function(ce){return 0<ce.numFailures?Promise.reject(ce.failures[0]):ae.length<ie?{failures:[],numFailures:0,lastResult:void 0}:X(le,r(r({},te),{lower:ae[ae.length-1],lowerOpen:!0}),ie)})})}($.trans,$.range,1e4)},!0)}return N.mutate($);function se(X){var le,te,ie,oe=Ge.trans,ae=X.keys||ue(I,X);if(!ae)throw new Error("Keys missing");return(X=X.type==="add"||X.type==="put"?r(r({},X),{keys:ae}):r({},X)).type!=="delete"&&(X.values=i([],X.values)),X.keys&&(X.keys=i([],X.keys)),le=N,ie=ae,((te=X).type==="add"?Promise.resolve([]):le.getMany({trans:te.trans,keys:ie,cache:"immutable"})).then(function(ce){var ge=ae.map(function(we,_e){var je,Oe,Ne,ke=ce[_e],$e={onerror:null,onsuccess:null};return X.type==="delete"?Q.fire.call($e,we,ke,oe):X.type==="add"||ke===void 0?(je=J.fire.call($e,we,X.values[_e],oe),we==null&&je!=null&&(X.keys[_e]=we=je,I.outbound||A(X.values[_e],I.keyPath,we))):(je=W(ke,X.values[_e]),(Oe=ne.fire.call($e,je,we,ke,oe))&&(Ne=X.values[_e],Object.keys(Oe).forEach(function(Re){f(Ne,Re)?Ne[Re]=Oe[Re]:A(Ne,Re,Oe[Re])}))),$e});return N.mutate(X).then(function(we){for(var _e=we.failures,je=we.results,Oe=we.numFailures,we=we.lastResult,Ne=0;Ne<ae.length;++Ne){var ke=(je||ae)[Ne],$e=ge[Ne];ke==null?$e.onerror&&$e.onerror(_e[Ne]):$e.onsuccess&&$e.onsuccess(X.type==="put"&&ce[Ne]?X.values[Ne]:ke)}return{failures:_e,results:je,numFailures:Oe,lastResult:we}}).catch(function(we){return ge.forEach(function(_e){return _e.onerror&&_e.onerror(we)}),Promise.reject(we)})})}}})}})}};function Ie(y,S,N){try{if(!S||S.keys.length<y.length)return null;for(var I=[],$=0,V=0;$<S.keys.length&&V<y.length;++$)Et(S.keys[$],y[V])===0&&(I.push(N?M(S.values[$]):S.values[$]),++V);return I.length===y.length?I:null}catch{return null}}var Xt={stack:"dbcore",level:-1,create:function(y){return{table:function(S){var N=y.table(S);return r(r({},N),{getMany:function(I){if(!I.cache)return N.getMany(I);var $=Ie(I.keys,I.trans._cache,I.cache==="clone");return $?ee.resolve($):N.getMany(I).then(function(V){return I.trans._cache={keys:I.keys,values:I.cache==="clone"?M(V):V},V})},mutate:function(I){return I.type!=="add"&&(I.trans._cache=null),N.mutate(I)}})}}}};function or(y,S){return y.trans.mode==="readonly"&&!!y.subscr&&!y.trans.explicit&&y.trans.db._options.cache!=="disabled"&&!S.schema.primaryKey.outbound}function Dt(y,S){switch(y){case"query":return S.values&&!S.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var kr={stack:"dbcore",level:0,name:"Observability",create:function(y){var S=y.schema.name,N=new ar(y.MIN_KEY,y.MAX_KEY);return r(r({},y),{transaction:function(I,$,V){if(Ge.subscr&&$!=="readonly")throw new xe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ge.querier));return y.transaction(I,$,V)},table:function(I){var $=y.table(I),V=$.schema,H=V.primaryKey,X=V.indexes,Q=H.extractKey,J=H.outbound,ne=H.autoIncrement&&X.filter(function(te){return te.compound&&te.keyPath.includes(H.keyPath)}),se=r(r({},$),{mutate:function(te){function ie(Re){return Re="idb://".concat(S,"/").concat(I,"/").concat(Re),we[Re]||(we[Re]=new ar)}var oe,ae,ce,ge=te.trans,we=te.mutatedParts||(te.mutatedParts={}),_e=ie(""),je=ie(":dels"),Oe=te.type,$e=te.type==="deleteRange"?[te.range]:te.type==="delete"?[te.keys]:te.values.length<50?[ue(H,te).filter(function(Re){return Re}),te.values]:[],Ne=$e[0],ke=$e[1],$e=te.trans._cache;return o(Ne)?(_e.addKeys(Ne),($e=Oe==="delete"||Ne.length===ke.length?Ie(Ne,$e):null)||je.addKeys(Ne),($e||ke)&&(oe=ie,ae=$e,ce=ke,V.indexes.forEach(function(Re){var Be=oe(Re.name||"");function At(xt){return xt!=null?Re.extractKey(xt):null}function Mt(xt){return Re.multiEntry&&o(xt)?xt.forEach(function($n){return Be.addKey($n)}):Be.addKey(xt)}(ae||ce).forEach(function(xt,ii){var vt=ae&&At(ae[ii]),ii=ce&&At(ce[ii]);Et(vt,ii)!==0&&(vt!=null&&Mt(vt),ii!=null&&Mt(ii))})}))):Ne?(ke={from:(ke=Ne.lower)!==null&&ke!==void 0?ke:y.MIN_KEY,to:(ke=Ne.upper)!==null&&ke!==void 0?ke:y.MAX_KEY},je.add(ke),_e.add(ke)):(_e.add(N),je.add(N),V.indexes.forEach(function(Re){return ie(Re.name).add(N)})),$.mutate(te).then(function(Re){return!Ne||te.type!=="add"&&te.type!=="put"||(_e.addKeys(Re.results),ne&&ne.forEach(function(Be){for(var At=te.values.map(function(vt){return Be.extractKey(vt)}),Mt=Be.keyPath.findIndex(function(vt){return vt===H.keyPath}),xt=0,$n=Re.results.length;xt<$n;++xt)At[xt][Mt]=Re.results[xt];ie(Be.name).addKeys(At)})),ge.mutatedParts=Cc(ge.mutatedParts||{},we),Re})}}),X=function(ie){var oe=ie.query,ie=oe.index,oe=oe.range;return[ie,new ar((ie=oe.lower)!==null&&ie!==void 0?ie:y.MIN_KEY,(oe=oe.upper)!==null&&oe!==void 0?oe:y.MAX_KEY)]},le={get:function(te){return[H,new ar(te.key)]},getMany:function(te){return[H,new ar().addKeys(te.keys)]},count:X,query:X,openCursor:X};return a(le).forEach(function(te){se[te]=function(ie){var oe=Ge.subscr,ae=!!oe,ce=or(Ge,$)&&Dt(te,ie)?ie.obsSet={}:oe;if(ae){var ge=function(ke){return ke="idb://".concat(S,"/").concat(I,"/").concat(ke),ce[ke]||(ce[ke]=new ar)},we=ge(""),_e=ge(":dels"),oe=le[te](ie),ae=oe[0],oe=oe[1];if((te==="query"&&ae.isPrimaryKey&&!ie.values?_e:ge(ae.name||"")).add(oe),!ae.isPrimaryKey){if(te!=="count"){var je=te==="query"&&J&&ie.values&&$.query(r(r({},ie),{values:!1}));return $[te].apply(this,arguments).then(function(ke){if(te==="query"){if(J&&ie.values)return je.then(function(At){return At=At.result,we.addKeys(At),ke});var $e=ie.values?ke.result.map(Q):ke.result;(ie.values?we:_e).addKeys($e)}else if(te==="openCursor"){var Re=ke,Be=ie.values;return Re&&Object.create(Re,{key:{get:function(){return _e.addKey(Re.primaryKey),Re.key}},primaryKey:{get:function(){var At=Re.primaryKey;return _e.addKey(At),At}},value:{get:function(){return Be&&we.addKey(Re.primaryKey),Re.value}}})}return ke})}_e.add(N)}}return $[te].apply(this,arguments)}}),se}})}};function yr(y,S,N){if(N.numFailures===0)return S;if(S.type==="deleteRange")return null;var I=S.keys?S.keys.length:"values"in S&&S.values?S.values.length:1;return N.numFailures===I?null:(S=r({},S),o(S.keys)&&(S.keys=S.keys.filter(function($,V){return!(V in N.failures)})),"values"in S&&o(S.values)&&(S.values=S.values.filter(function($,V){return!(V in N.failures)})),S)}function Sa(y,S){return N=y,((I=S).lower===void 0||(I.lowerOpen?0<Et(N,I.lower):0<=Et(N,I.lower)))&&(y=y,(S=S).upper===void 0||(S.upperOpen?Et(y,S.upper)<0:Et(y,S.upper)<=0));var N,I}function Ti(y,S,le,I,$,V){if(!le||le.length===0)return y;var H=S.query.index,Q=H.multiEntry,J=S.query.range,ne=I.schema.primaryKey.extractKey,se=H.extractKey,X=(H.lowLevelIndex||H).extractKey,le=le.reduce(function(te,ie){var oe=te,ae=[];if(ie.type==="add"||ie.type==="put")for(var ce=new ar,ge=ie.values.length-1;0<=ge;--ge){var we,_e=ie.values[ge],je=ne(_e);ce.hasKey(je)||(we=se(_e),(Q&&o(we)?we.some(function(Re){return Sa(Re,J)}):Sa(we,J))&&(ce.addKey(je),ae.push(_e)))}switch(ie.type){case"add":var Oe=new ar().addKeys(S.values?te.map(function(Be){return ne(Be)}):te),oe=te.concat(S.values?ae.filter(function(Be){return Be=ne(Be),!Oe.hasKey(Be)&&(Oe.addKey(Be),!0)}):ae.map(function(Be){return ne(Be)}).filter(function(Be){return!Oe.hasKey(Be)&&(Oe.addKey(Be),!0)}));break;case"put":var Ne=new ar().addKeys(ie.values.map(function(Be){return ne(Be)}));oe=te.filter(function(Be){return!Ne.hasKey(S.values?ne(Be):Be)}).concat(S.values?ae:ae.map(function(Be){return ne(Be)}));break;case"delete":var ke=new ar().addKeys(ie.keys);oe=te.filter(function(Be){return!ke.hasKey(S.values?ne(Be):Be)});break;case"deleteRange":var $e=ie.range;oe=te.filter(function(Be){return!Sa(ne(Be),$e)})}return oe},y);return le===y?y:(le.sort(function(te,ie){return Et(X(te),X(ie))||Et(ne(te),ne(ie))}),S.limit&&S.limit<1/0&&(le.length>S.limit?le.length=S.limit:y.length===S.limit&&le.length<S.limit&&($.dirty=!0)),V?Object.freeze(le):le)}function Tc(y,S){return Et(y.lower,S.lower)===0&&Et(y.upper,S.upper)===0&&!!y.lowerOpen==!!S.lowerOpen&&!!y.upperOpen==!!S.upperOpen}function pp(y,S){return function(N,I,$,V){if(N===void 0)return I!==void 0?-1:0;if(I===void 0)return 1;if((I=Et(N,I))===0){if($&&V)return 0;if($)return 1;if(V)return-1}return I}(y.lower,S.lower,y.lowerOpen,S.lowerOpen)<=0&&0<=function(N,I,$,V){if(N===void 0)return I!==void 0?1:0;if(I===void 0)return-1;if((I=Et(N,I))===0){if($&&V)return 0;if($)return-1;if(V)return 1}return I}(y.upper,S.upper,y.upperOpen,S.upperOpen)}function dH(y,S,N,I){y.subscribers.add(N),I.addEventListener("abort",function(){var $,V;y.subscribers.delete(N),y.subscribers.size===0&&($=y,V=S,setTimeout(function(){$.subscribers.size===0&&F(V,$)},3e3))})}var fH={stack:"dbcore",level:0,name:"Cache",create:function(y){var S=y.schema.name;return r(r({},y),{transaction:function(N,I,$){var V,H,Q=y.transaction(N,I,$);return I==="readwrite"&&(H=(V=new AbortController).signal,$=function(J){return function(){if(V.abort(),I==="readwrite"){for(var ne=new Set,se=0,X=N;se<X.length;se++){var le=X[se],te=_a["idb://".concat(S,"/").concat(le)];if(te){var ie=y.table(le),oe=te.optimisticOps.filter(function(Be){return Be.trans===Q});if(Q._explicit&&J&&Q.mutatedParts)for(var ae=0,ce=Object.values(te.queries.query);ae<ce.length;ae++)for(var ge=0,we=(Oe=ce[ae]).slice();ge<we.length;ge++)Sd((Ne=we[ge]).obsSet,Q.mutatedParts)&&(F(Oe,Ne),Ne.subscribers.forEach(function(Be){return ne.add(Be)}));else if(0<oe.length){te.optimisticOps=te.optimisticOps.filter(function(Be){return Be.trans!==Q});for(var _e=0,je=Object.values(te.queries.query);_e<je.length;_e++)for(var Oe,Ne,ke,$e=0,Re=(Oe=je[_e]).slice();$e<Re.length;$e++)(Ne=Re[$e]).res!=null&&Q.mutatedParts&&(J&&!Ne.dirty?(ke=Object.isFrozen(Ne.res),ke=Ti(Ne.res,Ne.req,oe,ie,Ne,ke),Ne.dirty?(F(Oe,Ne),Ne.subscribers.forEach(function(Be){return ne.add(Be)})):ke!==Ne.res&&(Ne.res=ke,Ne.promise=ee.resolve({result:ke}))):(Ne.dirty&&F(Oe,Ne),Ne.subscribers.forEach(function(Be){return ne.add(Be)})))}}}ne.forEach(function(Be){return Be()})}}},Q.addEventListener("abort",$(!1),{signal:H}),Q.addEventListener("error",$(!1),{signal:H}),Q.addEventListener("complete",$(!0),{signal:H})),Q},table:function(N){var I=y.table(N),$=I.schema.primaryKey;return r(r({},I),{mutate:function(V){var H=Ge.trans;if($.outbound||H.db._options.cache==="disabled"||H.explicit||H.idbtrans.mode!=="readwrite")return I.mutate(V);var Q=_a["idb://".concat(S,"/").concat(N)];return Q?(H=I.mutate(V),V.type!=="add"&&V.type!=="put"||!(50<=V.values.length||ue($,V).some(function(J){return J==null}))?(Q.optimisticOps.push(V),V.mutatedParts&&Nr(V.mutatedParts),H.then(function(J){0<J.numFailures&&(F(Q.optimisticOps,V),(J=yr(0,V,J))&&Q.optimisticOps.push(J),V.mutatedParts&&Nr(V.mutatedParts))}),H.catch(function(){F(Q.optimisticOps,V),V.mutatedParts&&Nr(V.mutatedParts)})):H.then(function(J){var ne=yr(0,r(r({},V),{values:V.values.map(function(se,X){var le;return J.failures[X]?se:(se=(le=$.keyPath)!==null&&le!==void 0&&le.includes(".")?M(se):r({},se),A(se,$.keyPath,J.results[X]),se)})}),J);Q.optimisticOps.push(ne),queueMicrotask(function(){return V.mutatedParts&&Nr(V.mutatedParts)})}),H):I.mutate(V)},query:function(V){if(!or(Ge,I)||!Dt("query",V))return I.query(V);var H=((ne=Ge.trans)===null||ne===void 0?void 0:ne.db._options.cache)==="immutable",X=Ge,Q=X.requery,J=X.signal,ne=function(ie,oe,ae,ce){var ge=_a["idb://".concat(ie,"/").concat(oe)];if(!ge)return[];if(!(oe=ge.queries[ae]))return[null,!1,ge,null];var we=oe[(ce.query?ce.query.index.name:null)||""];if(!we)return[null,!1,ge,null];switch(ae){case"query":var _e=we.find(function(je){return je.req.limit===ce.limit&&je.req.values===ce.values&&Tc(je.req.query.range,ce.query.range)});return _e?[_e,!0,ge,we]:[we.find(function(je){return("limit"in je.req?je.req.limit:1/0)>=ce.limit&&(!ce.values||je.req.values)&&pp(je.req.query.range,ce.query.range)}),!1,ge,we];case"count":return _e=we.find(function(je){return Tc(je.req.query.range,ce.query.range)}),[_e,!!_e,ge,we]}}(S,N,"query",V),se=ne[0],X=ne[1],le=ne[2],te=ne[3];return se&&X?se.obsSet=V.obsSet:(X=I.query(V).then(function(ie){var oe=ie.result;if(se&&(se.res=oe),H){for(var ae=0,ce=oe.length;ae<ce;++ae)Object.freeze(oe[ae]);Object.freeze(oe)}else ie.result=M(oe);return ie}).catch(function(ie){return te&&se&&F(te,se),Promise.reject(ie)}),se={obsSet:V.obsSet,promise:X,subscribers:new Set,type:"query",req:V,dirty:!1},te?te.push(se):(te=[se],(le=le||(_a["idb://".concat(S,"/").concat(N)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[V.query.index.name||""]=te)),dH(se,te,Q,J),se.promise.then(function(ie){return{result:Ti(ie.result,V,le==null?void 0:le.optimisticOps,I,se,H)}})}})}})}};function Rv(y,S){return new Proxy(y,{get:function(N,I,$){return I==="db"?S:Reflect.get(N,I,$)}})}var so=(Kn.prototype.version=function(y){if(isNaN(y)||y<.1)throw new xe.Type("Given version is not a positive number");if(y=Math.round(10*y)/10,this.idbdb||this._state.isBeingOpened)throw new xe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,y);var S=this._versions,N=S.filter(function(I){return I._cfg.version===y})[0];return N||(N=new this.Version(y),S.push(N),S.sort(vd),N.stores({}),this._state.autoSchema=!1,N)},Kn.prototype._whenReady=function(y){var S=this;return this.idbdb&&(this._state.openComplete||Ge.letThrough||this._vip)?y():new ee(function(N,I){if(S._state.openComplete)return I(new xe.DatabaseClosed(S._state.dbOpenError));if(!S._state.isBeingOpened){if(!S._state.autoOpen)return void I(new xe.DatabaseClosed);S.open().catch(fe)}S._state.dbReadyPromise.then(N,I)}).then(y)},Kn.prototype.use=function(y){var S=y.stack,N=y.create,I=y.level,$=y.name;return $&&this.unuse({stack:S,name:$}),y=this._middlewares[S]||(this._middlewares[S]=[]),y.push({stack:S,create:N,level:I??10,name:$}),y.sort(function(V,H){return V.level-H.level}),this},Kn.prototype.unuse=function(y){var S=y.stack,N=y.name,I=y.create;return S&&this._middlewares[S]&&(this._middlewares[S]=this._middlewares[S].filter(function($){return I?$.create!==I:!!N&&$.name!==N})),this},Kn.prototype.open=function(){var y=this;return $s(Fr,function(){return rl(y)})},Kn.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var y=this._state,S=va.indexOf(this);if(0<=S&&va.splice(S,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}y.isBeingOpened||(y.dbReadyPromise=new ee(function(N){y.dbReadyResolve=N}),y.openCanceller=new ee(function(N,I){y.cancelOpen=I}))},Kn.prototype.close=function(N){var S=(N===void 0?{disableAutoOpen:!0}:N).disableAutoOpen,N=this._state;S?(N.isBeingOpened&&N.cancelOpen(new xe.DatabaseClosed),this._close(),N.autoOpen=!1,N.dbOpenError=new xe.DatabaseClosed):(this._close(),N.autoOpen=this._options.autoOpen||N.isBeingOpened,N.openComplete=!1,N.dbOpenError=null)},Kn.prototype.delete=function(y){var S=this;y===void 0&&(y={disableAutoOpen:!0});var N=0<arguments.length&&typeof arguments[0]!="object",I=this._state;return new ee(function($,V){function H(){S.close(y);var Q=S._deps.indexedDB.deleteDatabase(S.name);Q.onsuccess=Wt(function(){var J,ne,se;J=S._deps,ne=S.name,se=J.indexedDB,J=J.IDBKeyRange,ro(se)||ne===ya||xd(se,J).delete(ne).catch(fe),$()}),Q.onerror=Br(V),Q.onblocked=S._fireOnBlocked}if(N)throw new xe.InvalidArgument("Invalid closeOptions argument to db.delete()");I.isBeingOpened?I.dbReadyPromise.then(H):H()})},Kn.prototype.backendDB=function(){return this.idbdb},Kn.prototype.isOpen=function(){return this.idbdb!==null},Kn.prototype.hasBeenClosed=function(){var y=this._state.dbOpenError;return y&&y.name==="DatabaseClosed"},Kn.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Kn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Kn.prototype,"tables",{get:function(){var y=this;return a(this._allTables).map(function(S){return y._allTables[S]})},enumerable:!1,configurable:!0}),Kn.prototype.transaction=function(){var y=(function(S,N,I){var $=arguments.length;if($<2)throw new xe.InvalidArgument("Too few arguments");for(var V=new Array($-1);--$;)V[$-1]=arguments[$];return I=V.pop(),[S,O(V),I]}).apply(this,arguments);return this._transaction.apply(this,y)},Kn.prototype._transaction=function(y,S,N){var I=this,$=Ge.trans;$&&$.db===this&&y.indexOf("!")===-1||($=null);var V,H,Q=y.indexOf("?")!==-1;y=y.replace("!","").replace("?","");try{if(H=S.map(function(ne){if(ne=ne instanceof I.Table?ne.name:ne,typeof ne!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return ne}),y=="r"||y===Fs)V=Fs;else{if(y!="rw"&&y!=hc)throw new xe.InvalidArgument("Invalid transaction mode: "+y);V=hc}if($){if($.mode===Fs&&V===hc){if(!Q)throw new xe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");$=null}$&&H.forEach(function(ne){if($&&$.storeNames.indexOf(ne)===-1){if(!Q)throw new xe.SubTransaction("Table "+ne+" not included in parent transaction.");$=null}}),Q&&$&&!$.active&&($=null)}}catch(ne){return $?$._promise(null,function(se,X){X(ne)}):Cn(ne)}var J=(function ne(se,X,le,te,ie){return ee.resolve().then(function(){var oe=Ge.transless||Ge,ae=se._createTransaction(X,le,se._dbSchema,te);if(ae.explicit=!0,oe={trans:ae,transless:oe},te)ae.idbtrans=te.idbtrans;else try{ae.create(),ae.idbtrans._explicit=!0,se._state.PR1398_maxLoop=3}catch(we){return we.name===jt.InvalidState&&se.isOpen()&&0<--se._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),se.close({disableAutoOpen:!1}),se.open().then(function(){return ne(se,X,le,null,ie)})):Cn(we)}var ce,ge=re(ie);return ge&&Qa(),oe=ee.follow(function(){var we;(ce=ie.call(ae,ae))&&(ge?(we=gs.bind(null,null),ce.then(we,we)):typeof ce.next=="function"&&typeof ce.throw=="function"&&(ce=v(ce)))},oe),(ce&&typeof ce.then=="function"?ee.resolve(ce).then(function(we){return ae.active?we:Cn(new xe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):oe.then(function(){return ce})).then(function(we){return te&&ae._resolve(),ae._completion.then(function(){return we})}).catch(function(we){return ae._reject(we),Cn(we)})})}).bind(null,this,V,H,$,N);return $?$._promise(V,J,"lock"):Ge.trans?$s(Ge.transless,function(){return I._whenReady(J)}):this._whenReady(J)},Kn.prototype.table=function(y){if(!f(this._allTables,y))throw new xe.InvalidTable("Table ".concat(y," does not exist"));return this._allTables[y]},Kn);function Kn(y,S){var N=this;this._middlewares={},this.verno=0;var I=Kn.dependencies;this._options=S=r({addons:Kn.addons,autoOpen:!0,indexedDB:I.indexedDB,IDBKeyRange:I.IDBKeyRange,cache:"cloned"},S),this._deps={indexedDB:S.indexedDB,IDBKeyRange:S.IDBKeyRange},I=S.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var $,V,H,Q,J,ne={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:fe,dbReadyPromise:null,cancelOpen:fe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:S.autoOpen};ne.dbReadyPromise=new ee(function(X){ne.dbReadyResolve=X}),ne.openCanceller=new ee(function(X,le){ne.cancelOpen=le}),this._state=ne,this.name=y,this.on=qo(this,"populate","blocked","versionchange","close",{ready:[Hn,fe]}),this.once=function(X,le){var te=function(){for(var ie=[],oe=0;oe<arguments.length;oe++)ie[oe]=arguments[oe];N.on(X).unsubscribe(te),le.apply(N,ie)};return N.on(X,te)},this.on.ready.subscribe=_(this.on.ready.subscribe,function(X){return function(le,te){Kn.vip(function(){var ie,oe=N._state;oe.openComplete?(oe.dbOpenError||ee.resolve().then(le),te&&X(le)):oe.onReadyBeingFired?(oe.onReadyBeingFired.push(le),te&&X(le)):(X(le),ie=N,te||X(function ae(){ie.on.ready.unsubscribe(le),ie.on.ready.unsubscribe(ae)}))})}}),this.Collection=($=this,Ko(yc.prototype,function(ce,ae){this.db=$;var te=tp,ie=null;if(ae)try{te=ae()}catch(ge){ie=ge}var oe=ce._ctx,ae=oe.table,ce=ae.hook.reading.fire;this._ctx={table:ae,index:oe.index,isPrimKey:!oe.index||ae.schema.primKey.keyPath&&oe.index===ae.schema.primKey.name,range:te,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:ie,or:oe.or,valueMapper:ce!==pt?ce:null}})),this.Table=(V=this,Ko(Ov.prototype,function(X,le,te){this.db=V,this._tx=te,this.name=X,this.schema=le,this.hook=V._allTables[X]?V._allTables[X].hook:qo(null,{creating:[Ve,fe],reading:[ft,pt],updating:[gr,fe],deleting:[cn,fe]})})),this.Transaction=(H=this,Ko(_1.prototype,function(X,le,te,ie,oe){var ae=this;X!=="readonly"&&le.forEach(function(ce){ce=(ce=te[ce])===null||ce===void 0?void 0:ce.yProps,ce&&(le=le.concat(ce.map(function(ge){return ge.updatesTable})))}),this.db=H,this.mode=X,this.storeNames=le,this.schema=te,this.chromeTransactionDurability=ie,this.idbtrans=null,this.on=qo(this,"complete","error","abort"),this.parent=oe||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ee(function(ce,ge){ae._resolve=ce,ae._reject=ge}),this._completion.then(function(){ae.active=!1,ae.on.complete.fire()},function(ce){var ge=ae.active;return ae.active=!1,ae.on.error.fire(ce),ae.parent?ae.parent._reject(ce):ge&&ae.idbtrans&&ae.idbtrans.abort(),Cn(ce)})})),this.Version=(Q=this,Ko(bd.prototype,function(X){this.db=Q,this._cfg={version:X,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(J=this,Ko(ap.prototype,function(X,le,te){if(this.db=J,this._ctx={table:X,index:le===":id"?null:le,or:te},this._cmp=this._ascending=Et,this._descending=function(ie,oe){return Et(oe,ie)},this._max=function(ie,oe){return 0<Et(ie,oe)?ie:oe},this._min=function(ie,oe){return Et(ie,oe)<0?ie:oe},this._IDBKeyRange=J._deps.IDBKeyRange,!this._IDBKeyRange)throw new xe.MissingAPI})),this.on("versionchange",function(X){0<X.newVersion?console.warn("Another connection wants to upgrade database '".concat(N.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(N.name,"'. Closing db now to resume the delete request.")),N.close({disableAutoOpen:!1})}),this.on("blocked",function(X){!X.newVersion||X.newVersion<X.oldVersion?console.warn("Dexie.delete('".concat(N.name,"') was blocked")):console.warn("Upgrade '".concat(N.name,"' blocked by other connection holding version ").concat(X.oldVersion/10))}),this._maxKey=Bs(S.IDBKeyRange),this._createTransaction=function(X,le,te,ie){return new N.Transaction(X,le,te,N._options.chromeTransactionDurability,ie)},this._fireOnBlocked=function(X){N.on("blocked").fire(X),va.filter(function(le){return le.name===N.name&&le!==N&&!le._state.vcFired}).map(function(le){return le.on("versionchange").fire(X)})},this.use(Xt),this.use(fH),this.use(kr),this.use(R),this.use(be);var se=new Proxy(this,{get:function(X,le,te){if(le==="_vip")return!0;if(le==="table")return function(oe){return Rv(N.table(oe),se)};var ie=Reflect.get(X,le,te);return ie instanceof Ov?Rv(ie,se):le==="tables"?ie.map(function(oe){return Rv(oe,se)}):le==="_createTransaction"?function(){return Rv(ie.apply(this,arguments),se)}:ie}});this.vip=se,I.forEach(function(X){return X(N)})}var Lv,ys=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",hH=(E1.prototype.subscribe=function(y,S,N){return this._subscribe(y&&typeof y!="function"?y:{next:y,error:S,complete:N})},E1.prototype[ys]=function(){return this},E1);function E1(y){this._subscribe=y}try{Lv={indexedDB:s.indexedDB||s.mozIndexedDB||s.webkitIndexedDB||s.msIndexedDB,IDBKeyRange:s.IDBKeyRange||s.webkitIDBKeyRange}}catch{Lv={indexedDB:null,IDBKeyRange:null}}function IN(y){var S,N=!1,I=new hH(function($){var V=re(y),H,Q=!1,J={},ne={},se={get closed(){return Q},unsubscribe:function(){Q||(Q=!0,H&&H.abort(),X&&Ur.storagemutated.unsubscribe(te))}};$.start&&$.start(se);var X=!1,le=function(){return hd(ie)},te=function(oe){Cc(J,oe),Sd(ne,J)&&le()},ie=function(){var oe,ae,ce;!Q&&Lv.indexedDB&&(J={},oe={},H&&H.abort(),H=new AbortController,ce=function(ge){var we=hn();try{V&&Qa();var _e=qi(y,ge);return _e=V?_e.finally(gs):_e}finally{we&&gi()}}(ae={subscr:oe,signal:H.signal,requery:le,querier:y,trans:null}),Promise.resolve(ce).then(function(ge){N=!0,S=ge,Q||ae.signal.aborted||(J={},function(we){for(var _e in we)if(f(we,_e))return;return 1}(ne=oe)||X||(Ur(xc,te),X=!0),hd(function(){return!Q&&$.next&&$.next(ge)}))},function(ge){N=!1,["DatabaseClosedError","AbortError"].includes(ge==null?void 0:ge.name)||Q||hd(function(){Q||$.error&&$.error(ge)})}))};return setTimeout(le,0),se});return I.hasValue=function(){return N},I.getValue=function(){return S},I}var Pc=so;function j1(y){var S=il;try{il=!0,Ur.storagemutated.fire(y),Ed(y,!0)}finally{il=S}}h(Pc,r(r({},Qe),{delete:function(y){return new Pc(y,{addons:[]}).delete()},exists:function(y){return new Pc(y,{addons:[]}).open().then(function(S){return S.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(y){try{return S=Pc.dependencies,N=S.indexedDB,S=S.IDBKeyRange,(ro(N)?Promise.resolve(N.databases()).then(function(I){return I.map(function($){return $.name}).filter(function($){return $!==ya})}):xd(N,S).toCollection().primaryKeys()).then(y)}catch{return Cn(new xe.MissingAPI)}var S,N},defineClass:function(){return function(y){c(this,y)}},ignoreTransaction:function(y){return Ge.trans?$s(Ge.transless,y):y()},vip:wd,async:function(y){return function(){try{var S=v(y.apply(this,arguments));return S&&typeof S.then=="function"?S:ee.resolve(S)}catch(N){return Cn(N)}}},spawn:function(y,S,N){try{var I=v(y.apply(N,S||[]));return I&&typeof I.then=="function"?I:ee.resolve(I)}catch($){return Cn($)}},currentTransaction:{get:function(){return Ge.trans||null}},waitFor:function(y,S){return S=ee.resolve(typeof y=="function"?Pc.ignoreTransaction(y):y).timeout(S||6e4),Ge.trans?Ge.trans.waitFor(S):S},Promise:ee,debug:{get:function(){return Ut},set:function(y){vr(y)}},derive:g,extend:c,props:h,override:_,Events:qo,on:Ur,liveQuery:IN,extendObservabilitySet:Cc,getByKeyPath:T,setByKeyPath:A,delByKeyPath:function(y,S){typeof S=="string"?A(y,S,void 0):"length"in S&&[].map.call(S,function(N){A(y,N,void 0)})},shallowClone:C,deepClone:M,getObjectDiff:W,cmp:Et,asap:j,minKey:-1/0,addons:[],connections:va,errnames:jt,dependencies:Lv,cache:_a,semVer:"4.2.0",version:"4.2.0".split(".").map(function(y){return parseInt(y)}).reduce(function(y,S,N){return y+S/Math.pow(10,2*N)})})),Pc.maxKey=Bs(Pc.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ur(xc,function(y){il||(y=new CustomEvent(op,{detail:y}),il=!0,dispatchEvent(y),il=!1)}),addEventListener(op,function(y){y=y.detail,il||j1(y)}));var jd,il=!1,ON=function(){};return typeof BroadcastChannel<"u"&&((ON=function(){(jd=new BroadcastChannel(op)).onmessage=function(y){return y.data&&j1(y.data)}})(),typeof jd.unref=="function"&&jd.unref(),Ur(xc,function(y){il||jd.postMessage(y)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(y){if(!so.disableBfCache&&y.persisted){Ut&&console.debug("Dexie: handling persisted pagehide"),jd!=null&&jd.close();for(var S=0,N=va;S<N.length;S++)N[S].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(y){!so.disableBfCache&&y.persisted&&(Ut&&console.debug("Dexie: handling persisted pageshow"),ON(),j1({all:new ar(-1/0,[[]])}))})),ee.rejectionMapper=function(y,S){return!y||y instanceof ye||y instanceof TypeError||y instanceof SyntaxError||!y.name||!Ye[y.name]?y:(S=new Ye[y.name](S||y.message,y),"stack"in y&&m(S,"stack",{get:function(){return this.inner.stack}}),S)},vr(Ut),r(so,Object.freeze({__proto__:null,Dexie:so,liveQuery:IN,Entity:np,cmp:Et,PropModification:ba,replacePrefix:function(y,S){return new ba({replacePrefix:[y,S]})},add:function(y){return new ba({add:y})},remove:function(y){return new ba({remove:y})},default:so,RangeSet:ar,mergeRanges:tl,rangesOverlap:Ec}),{default:so}),so})})(lF);var VJ=lF.exports;const HA=Qt(VJ),eI=Symbol.for("Dexie"),Bf=globalThis[eI]||(globalThis[eI]=HA);if(HA.semVer!==Bf.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${HA.semVer} and ${Bf.semVer}`);const{liveQuery:K6e,mergeRanges:G6e,rangesOverlap:Y6e,RangeSet:Q6e,cmp:X6e,Entity:Z6e,PropModification:J6e,replacePrefix:eFe,add:tFe,remove:nFe,DexieYProvider:rFe}=Bf,cF="GanaderoOS_DB",BJ=19;class UJ extends Bf{constructor(){super(cF);Wr(this,"animals");Wr(this,"fathers");Wr(this,"parturitions");Wr(this,"weighings");Wr(this,"lots");Wr(this,"origins");Wr(this,"breedingSeasons");Wr(this,"sireLots");Wr(this,"serviceRecords");Wr(this,"events");Wr(this,"feedingPlans");Wr(this,"bodyWeighings");Wr(this,"products");Wr(this,"healthPlans");Wr(this,"planActivities");Wr(this,"healthEvents");this.version(BJ).stores({animals:"&id, userId, status, location, motherId, fatherId, sireLotId",fathers:"&id, userId",parturitions:"&id, userId, goatId, status",weighings:"&id, userId, goatId, date",lots:"&id, userId, &name, parentLotId",origins:"&id, userId, &name",breedingSeasons:"&id, userId, &name, status",sireLots:"&id, userId, seasonId, sireId",serviceRecords:"&id, userId, sireLotId, femaleId",events:"&id, userId, animalId, date, type, lotName",feedingPlans:"&id, userId, lotName",bodyWeighings:"&id, userId, animalId, date",products:"&id, userId, &name, category",healthPlans:"&id, userId, &name, targetGroup",planActivities:"&id, userId, healthPlanId, category",healthEvents:"&id, userId, animalId, date, activityId"})}}let cm=null;const WJ=async()=>{if(cm)return cm;const t=new UJ;try{return await t.open(),console.log("Base de datos local abierta con éxito."),cm=t,t}catch(e){return console.error("Error al abrir la base de datos local.",e),confirm("GanaderoOS necesita actualizar la base de datos local. Tus datos en la nube están a salvo. ¿Deseas continuar? La aplicación se recargará.")?(await Bf.delete(cF),window.location.reload()):alert("La aplicación no puede continuar sin una base de datos funcional."),new Promise(()=>{})}},Nt=()=>{if(!cm)throw new Error("La base de datos no ha sido inicializada. Llama a initDB() primero.");return cm},Hr=[];for(let t=0;t<256;++t)Hr.push((t+256).toString(16).slice(1));function HJ(t,e=0){return(Hr[t[e+0]]+Hr[t[e+1]]+Hr[t[e+2]]+Hr[t[e+3]]+"-"+Hr[t[e+4]]+Hr[t[e+5]]+"-"+Hr[t[e+6]]+Hr[t[e+7]]+"-"+Hr[t[e+8]]+Hr[t[e+9]]+"-"+Hr[t[e+10]]+Hr[t[e+11]]+Hr[t[e+12]]+Hr[t[e+13]]+Hr[t[e+14]]+Hr[t[e+15]]).toLowerCase()}let f_;const qJ=new Uint8Array(16);function KJ(){if(!f_){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");f_=crypto.getRandomValues.bind(crypto)}return f_(qJ)}const GJ=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),tI={randomUUID:GJ};function YJ(t,e,n){var i;t=t||{};const r=t.random??((i=t.rng)==null?void 0:i.call(t))??KJ();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,HJ(r)}function Gn(t,e,n){return tI.randomUUID&&!t?tI.randomUUID():YJ(t)}const uF=P.createContext({}),Ze=()=>P.useContext(uF),wn=async(t,e,n)=>{try{const r={...n,createdAt:n.createdAt||zJ()};await OJ(Yn(Zt,t,e),r,{merge:!0})}catch(r){console.error(`Firestore sync for ${t} (${e}) failed (will retry automatically):`,r)}},QJ=({children:t})=>{const{currentUser:e}=oF(),[n,r]=P.useState([]),[i,s]=P.useState([]),[a,o]=P.useState([]),[c,u]=P.useState([]),[d,f]=P.useState([]),[h,p]=P.useState([]),[m,g]=P.useState([]),[b,x]=P.useState([]),[w,_]=P.useState([]),[E,j]=P.useState([]),[T,A]=P.useState([]),[C,D]=P.useState([]),[O,L]=P.useState([]),[z,M]=P.useState([]),[G,K]=P.useState([]),[B,U]=P.useState([]),[F,q]=P.useState(!0),[Z,re]=P.useState(navigator.onLine?"idle":"offline"),he=P.useRef(null),ye=P.useCallback(async()=>{try{const de=Nt(),[pe,ee,Fe,tt,bt,Ue,Lt,zt,Pr,hn,gi,at,sr,Wt,pn,Zh]=await Promise.all([de.animals.toArray(),de.fathers.toArray(),de.weighings.toArray(),de.parturitions.toArray(),de.lots.toArray(),de.origins.toArray(),de.breedingSeasons.toArray(),de.sireLots.toArray(),de.serviceRecords.toArray(),de.events.toArray(),de.feedingPlans.toArray(),de.bodyWeighings.toArray(),de.products.toArray(),de.healthPlans.toArray(),de.planActivities.toArray(),de.healthEvents.toArray()]);r(pe),s(ee),o(Fe),u(tt),f(bt),p(Ue),g(Lt),x(zt),_(Pr),j(hn),A(gi),D(at),L(sr),M(Wt),K(pn),U(Zh)}catch(de){console.error("Error al cargar datos locales:",de)}finally{q(!1)}},[]);P.useEffect(()=>{let de=[];const pe=()=>re("idle"),ee=()=>re("offline");return window.addEventListener("online",pe),window.addEventListener("offline",ee),(async()=>{if(!e){q(!1),r([]),s([]),o([]),u([]),f([]),p([]),g([]),x([]),_([]),j([]),A([]),D([]),L([]),M([]),K([]),U([]);return}q(!0);try{const tt=await WJ();await ye();const bt=Lt=>PJ(CC(Zt,Lt),NJ("userId","==",e.uid)),Ue=(Lt,zt)=>{const Pr=MJ(bt(Lt),async hn=>{if(hn.metadata.hasPendingWrites)return;hn.docChanges().length>0&&navigator.onLine&&(re("syncing"),he.current&&clearTimeout(he.current),he.current=setTimeout(()=>re("idle"),2e3));const gi=hn.docChanges().map(at=>{const sr={id:at.doc.id,...at.doc.data()};return sr.createdAt instanceof pr&&(sr.createdAt=sr.createdAt.toMillis()),{type:at.type,data:sr}});if(gi.length>0)try{await tt.transaction("rw",zt,async()=>{for(const at of gi)at.type==="added"||at.type==="modified"?await zt.put(at.data):at.type==="removed"&&await zt.delete(at.data.id)}),await ye()}catch(at){console.error(`Dexie transaction error during sync for ${Lt}:`,at)}},hn=>{if(hn.code==="permission-denied"){console.warn(`Permission denied for ${Lt}. Logging out.`);return}console.error(`Firestore snapshot error for ${Lt}:`,hn)});de.push(Pr)};Ue("animals",tt.animals),Ue("fathers",tt.fathers),Ue("parturitions",tt.parturitions),Ue("weighings",tt.weighings),Ue("lots",tt.lots),Ue("origins",tt.origins),Ue("breedingSeasons",tt.breedingSeasons),Ue("sireLots",tt.sireLots),Ue("serviceRecords",tt.serviceRecords),Ue("events",tt.events),Ue("feedingPlans",tt.feedingPlans),Ue("bodyWeighings",tt.bodyWeighings),Ue("products",tt.products),Ue("healthPlans",tt.healthPlans),Ue("planActivities",tt.planActivities),Ue("healthEvents",tt.healthEvents)}catch(tt){console.error("Fallo crítico en la inicialización de DataProvider:",tt),q(!1)}})(),()=>{de.forEach(tt=>tt()),window.removeEventListener("online",pe),window.removeEventListener("offline",ee),he.current&&clearTimeout(he.current)}},[e,ye]);const De=de=>{e&&(async()=>{try{const pe=Nt(),ee={id:Gn(),...de,userId:e.uid};await pe.events.put(ee),await wn("events",ee.id,ee),setTimeout(ye,500)}catch(pe){console.error("Error en el registro de evento en segundo plano:",pe)}})()},We=async de=>{if(!e)throw new Error("Usuario no autenticado");const pe=Nt(),ee={...de,id:de.id.toUpperCase(),userId:e.uid,createdAt:Date.now()};await pe.animals.put(ee),De({animalId:ee.id,date:ee.birthDate,type:"Nacimiento",details:`Nacido con ${ee.birthWeight||"N/A"} Kg. Madre: ${ee.motherId||"N/A"}. Padre: ${ee.fatherId||"N/A"}.`,lotName:ee.location}),ye(),wn("animals",ee.id,ee)},Je=async(de,pe)=>{if(!e)throw new Error("Usuario no autenticado");const ee=Nt(),Fe=de.toUpperCase(),tt=new Date().toISOString().split("T")[0],bt=await ee.animals.get(Fe);if(!bt)throw new Error("Animal no encontrado para actualizar");await ee.animals.update(Fe,pe),pe.location!==void 0&&pe.location!==bt.location&&De({animalId:Fe,date:tt,type:"Movimiento",details:`Movido de '${bt.location||"Sin Asignar"}' a '${pe.location||"Sin Asignar"}'`,lotName:pe.location||""}),pe.reproductiveStatus!==void 0&&pe.reproductiveStatus!==bt.reproductiveStatus&&De({animalId:Fe,date:tt,type:"Cambio de Estado",details:`Estado reproductivo: ${pe.reproductiveStatus}`}),pe.status!==void 0&&pe.status!==bt.status&&De({animalId:Fe,date:pe.endDate||tt,type:"Cambio de Estado",details:`Animal dado de baja: ${pe.status} ${pe.cullReason?`(${pe.cullReason})`:""}`}),pe.weaningDate&&!bt.weaningDate&&De({animalId:Fe,date:pe.weaningDate,type:"Cambio de Estado",details:`Destetado con ${pe.weaningWeight||"N/A"} Kg`}),ye(),wn("animals",Fe,pe)},jt=async de=>{if(!e)throw new Error("Usuario no autenticado");const pe=Nt(),ee=de.toUpperCase();await pe.animals.delete(ee),ye(),kc(Yn(Zt,"animals",ee)).catch(Fe=>console.error("Firestore delete sync failed:",Fe))},dt=async de=>{if(!e)throw new Error("Usuario no autenticado");const pe=Nt(),ee=await pe.parturitions.get(de);if(!ee)throw new Error("Parto no encontrado");const Fe={status:"en-secado",dryingStartDate:new Date().toISOString().split("T")[0]};await pe.parturitions.update(de,Fe),De({animalId:ee.goatId,date:Fe.dryingStartDate,type:"Cambio de Estado",details:`Inició proceso de secado (Lactancia de ${ee.parturitionDate})`}),ye(),wn("parturitions",de,Fe)},xe=async de=>{if(!e)throw new Error("Usuario no autenticado");const pe=Nt(),ee=await pe.parturitions.get(de);if(!ee)throw new Error("Parto no encontrado");const Fe={status:"seca"};await pe.parturitions.update(de,Fe),De({animalId:ee.goatId,date:new Date().toISOString().split("T")[0],type:"Cambio de Estado",details:`Declarada Seca (Lactancia de ${ee.parturitionDate})`}),ye(),wn("parturitions",de,Fe)},Ye=async de=>{if(!e)throw new Error("Usuario no autenticado");const pe=Nt();if(await pe.lots.where("name").equalsIgnoreCase(de.name).first())throw new Error(`El lote '${de.name}' ya existe.`);const Fe={id:Gn(),name:de.name,parentLotId:de.parentLotId,userId:e.uid};await pe.lots.put(Fe),ye(),wn("lots",Fe.id,Fe)},Qe=async de=>{if(!e)throw new Error("Usuario no autenticado");const pe=Nt(),ee=await pe.lots.get(de);if(ee){if(await pe.animals.where({location:ee.name}).count()>0)throw new Error("No se puede eliminar un lote con animales asignados.");if(await pe.lots.where({parentLotId:de}).count()>0)throw new Error("No se puede eliminar un lote que contiene sub-lotes.")}await pe.lots.delete(de),ye(),kc(Yn(Zt,"lots",de)).catch(Fe=>console.error("Firestore delete sync failed:",Fe))},fe=async de=>{if(!e)throw new Error("Usuario no autenticado");const pe=Nt();if(await pe.origins.where("name").equalsIgnoreCase(de).first())throw new Error(`El origen '${de}' ya existe.`);const Fe={id:Gn(),name:de,userId:e.uid};await pe.origins.put(Fe),ye(),wn("origins",Fe.id,Fe)},pt=async de=>{if(!e)throw new Error("Usuario no autenticado");await Nt().origins.delete(de),ye(),kc(Yn(Zt,"origins",de)).catch(ee=>console.error("Firestore delete sync failed:",ee))},ft=async de=>{if(!e)throw new Error("Usuario no autenticado");const pe=Nt(),ee={id:Gn(),...de,userId:e.uid},Fe={id:Gn(),animalId:de.goatId,date:de.date,type:"Pesaje Lechero",details:`Registro de ${de.kg} Kg`,userId:e.uid};await pe.transaction("rw",pe.weighings,pe.events,async()=>{await pe.weighings.put(ee),await pe.events.put(Fe)}),ye(),wn("weighings",ee.id,ee),wn("events",Fe.id,Fe)},Le=async de=>{if(!e)throw new Error("Usuario no autenticado");const pe=Nt(),ee={id:Gn(),...de,userId:e.uid},Fe={id:Gn(),animalId:de.animalId,date:de.date,type:"Pesaje Corporal",details:`Registro de ${de.kg} Kg`,userId:e.uid};await pe.transaction("rw",pe.bodyWeighings,pe.events,async()=>{await pe.bodyWeighings.put(ee),await pe.events.put(Fe)}),ye(),wn("bodyWeighings",ee.id,ee),wn("events",Fe.id,Fe)},Ve=async de=>{if(!e)throw new Error("Usuario no autenticado");const pe=Nt(),ee=await pe.weighings.where({date:de}).toArray();if(ee.length===0)return;const Fe=ee.map(zt=>zt.id),tt=ee.map(zt=>zt.goatId),Ue=(await pe.events.where("date").equals(de).and(zt=>zt.type==="Pesaje Lechero"&&tt.includes(zt.animalId)).toArray()).map(zt=>zt.id);await pe.transaction("rw",pe.weighings,pe.events,async()=>{await pe.weighings.bulkDelete(Fe),await pe.events.bulkDelete(Ue)}),await ye(),(async()=>{const zt=Kc(Zt);Fe.forEach(Pr=>zt.delete(Yn(Zt,"weighings",Pr))),Ue.forEach(Pr=>zt.delete(Yn(Zt,"events",Pr))),await zt.commit()})().catch(zt=>console.error("Firestore sync for deleteWeighingSession failed:",zt))},cn=async de=>{if(!e)throw new Error("Usuario no autenticado");const pe=Nt(),ee=de.id.toUpperCase();if(await pe.fathers.where("id").equalsIgnoreCase(ee).first())throw new Error(`El ID de padre '${ee}' ya está en uso.`);const tt={...de,id:ee,userId:e.uid};await pe.fathers.put(tt),ye(),wn("fathers",tt.id,tt)},gr=async de=>{if(!e)throw new Error("Usuario no autenticado");const pe=Nt(),ee=de.motherId.toUpperCase(),Fe=de.parturitionOutcome==="Aborto"&&!de.inducedLactation?"finalizada":"activa",tt=Gn(),bt={id:tt,goatId:ee,parturitionDate:de.parturitionDate,sireId:de.sireId,offspringCount:de.offspringCount,parturitionType:de.parturitionType,parturitionOutcome:de.parturitionOutcome,status:Fe,userId:e.uid},Ue=(de.liveOffspring||[]).map(at=>({id:at.id.toUpperCase(),sex:at.sex,status:"Activo",birthDate:de.parturitionDate,motherId:ee,fatherId:de.sireId,birthWeight:parseFloat(at.birthWeight),userId:e.uid,createdAt:Date.now(),lifecycleStage:at.sex==="Hembra"?"Cabrita":"Cabrito",location:"",reproductiveStatus:"No Aplica"})),Lt=de.parturitionOutcome==="Aborto"?"Aborto":"Parto",zt=de.parturitionOutcome==="Aborto"?`Aborto registrado con Semental: ${de.sireId}. ${de.inducedLactation?"Se induce lactancia.":""}`:`Parto ${de.parturitionType} (${de.offspringCount} crías) con Semental: ${de.sireId}. Vivas: ${Ue.length}.`,Pr={id:Gn(),animalId:ee,date:de.parturitionDate,type:Lt,details:zt,userId:e.uid},hn=Ue.map(at=>({id:Gn(),animalId:at.id,date:at.birthDate,type:"Nacimiento",details:`Nacido con ${at.birthWeight||"N/A"} Kg. Madre: ${at.motherId}. Padre: ${at.fatherId}.`,userId:e.uid}));await pe.transaction("rw",pe.parturitions,pe.animals,pe.events,async()=>{await pe.parturitions.put(bt),await pe.events.put(Pr),Ue.length>0&&(await pe.animals.bulkPut(Ue),await pe.events.bulkPut(hn))}),await ye(),(async()=>{const at=Kc(Zt);at.set(Yn(Zt,"parturitions",tt),bt),at.set(Yn(Zt,"events",Pr.id),Pr),Ue.forEach(sr=>at.set(Yn(Zt,"animals",sr.id),sr)),hn.forEach(sr=>at.set(Yn(Zt,"events",sr.id),sr)),await at.commit()})().catch(at=>console.error("Firestore sync for addParturition failed:",at))},Cr=async de=>{if(!e)throw new Error("Usuario no autenticado");const pe=Nt(),ee={id:Gn(),...de,userId:e.uid},Fe=await pe.sireLots.get(ee.sireLotId),tt=Fe?await pe.fathers.get(Fe.sireId):null,bt={id:Gn(),animalId:ee.femaleId,date:ee.serviceDate,type:"Servicio",details:`Servicio registrado con Semental: ${(tt==null?void 0:tt.name)||ee.sireLotId}`,userId:e.uid};await pe.transaction("rw",pe.serviceRecords,pe.events,async()=>{await pe.serviceRecords.put(ee),await pe.events.put(bt)}),ye(),wn("serviceRecords",ee.id,ee),wn("events",bt.id,bt)},Hn=async de=>{if(!e)throw new Error("Usuario no autenticado");const pe=Nt(),ee=await pe.animals.where({location:de.lotName}).toArray();if(ee.length===0)return;const Fe=ee.map(bt=>({id:Gn(),animalId:bt.id,date:de.date,type:de.type,details:de.details,lotName:de.lotName,userId:e.uid,notes:`Evento aplicado a todo el lote: ${de.lotName}`}));await pe.events.bulkPut(Fe),ye(),(async()=>{const bt=Kc(Zt);Fe.forEach(Ue=>bt.set(Yn(Zt,"events",Ue.id),Ue)),await bt.commit()})().catch(bt=>console.error("Firestore sync for addBatchEvent failed:",bt))},Ut=async de=>{if(!e)throw new Error("Usuario no autenticado");const pe=Nt(),ee={id:Gn(),...de,userId:e.uid};await pe.feedingPlans.put(ee),ye(),wn("feedingPlans",ee.id,ee)},vr=async de=>{if(!e)throw new Error("Usuario no autenticado");const pe=Nt(),ee={id:Gn(),...de,userId:e.uid};return await pe.breedingSeasons.put(ee),ye(),wn("breedingSeasons",ee.id,ee),ee.id},rr=async(de,pe)=>{if(!e)throw new Error("Usuario no autenticado");await Nt().breedingSeasons.update(de,pe),ye(),wn("breedingSeasons",de,pe)},Me=async de=>{if(!e)throw new Error("Usuario no autenticado");await Nt().breedingSeasons.delete(de),ye(),kc(Yn(Zt,"breedingSeasons",de)).catch(ee=>console.error("Firestore delete sync failed:",ee))},rt=async de=>{if(!e)throw new Error("Usuario no autenticado");const pe=Nt(),ee={id:Gn(),...de,userId:e.uid};return await pe.sireLots.put(ee),ye(),wn("sireLots",ee.id,ee),ee.id},Ct=async(de,pe)=>{if(!e)throw new Error("Usuario no autenticado");await Nt().sireLots.update(de,pe),ye(),wn("sireLots",de,pe)},un=async de=>{if(!e)throw new Error("Usuario no autenticado");await Nt().sireLots.delete(de),ye(),kc(Yn(Zt,"sireLots",de)).catch(ee=>console.error("Firestore delete sync failed:",ee))},Hi=async de=>{if(!e)throw new Error("Usuario no autenticado");const pe=Nt(),ee={id:Gn(),...de,userId:e.uid};await pe.products.put(ee),ye(),wn("products",ee.id,ee)},ps=async(de,pe)=>{if(!e)throw new Error("Usuario no autenticado");await Nt().products.update(de,pe),ye(),wn("products",de,pe)},ze=async de=>{if(!e)throw new Error("Usuario no autenticado");await Nt().products.delete(de),ye(),kc(Yn(Zt,"products",de)).catch(ee=>console.error("Firestore delete sync failed:",ee))},yt=async(de,pe)=>{if(!e)throw new Error("Usuario no autenticado");const ee=Nt(),Fe={id:Gn(),...de,userId:e.uid},tt=pe.map(Ue=>({id:Gn(),...Ue,healthPlanId:Fe.id,userId:e.uid}));await ee.transaction("rw",ee.healthPlans,ee.planActivities,async()=>{await ee.healthPlans.put(Fe),await ee.planActivities.bulkPut(tt)}),ye(),(async()=>{const Ue=Kc(Zt);Ue.set(Yn(Zt,"healthPlans",Fe.id),Fe),tt.forEach(Lt=>Ue.set(Yn(Zt,"planActivities",Lt.id),Lt)),await Ue.commit()})().catch(Ue=>console.error("Firestore sync for addHealthPlan failed:",Ue))},st=async(de,pe)=>{if(!e)throw new Error("Usuario no autenticado");await Nt().healthPlans.update(de,pe),ye(),wn("healthPlans",de,pe)},ir=async de=>{if(!e)throw new Error("Usuario no autenticado");const pe=Nt(),Fe=(await pe.planActivities.where({healthPlanId:de}).toArray()).map(bt=>bt.id);await pe.transaction("rw",pe.healthPlans,pe.planActivities,async()=>{await pe.planActivities.bulkDelete(Fe),await pe.healthPlans.delete(de)}),ye(),(async()=>{const bt=Kc(Zt);Fe.forEach(Ue=>bt.delete(Yn(Zt,"planActivities",Ue))),bt.delete(Yn(Zt,"healthPlans",de)),await bt.commit()})().catch(bt=>console.error("Firestore sync for deleteHealthPlan failed:",bt))},Tr=async de=>{if(!e)throw new Error("Usuario no autenticado");const pe=Nt(),ee={id:Gn(),...de,userId:e.uid};await pe.planActivities.put(ee),ye(),wn("planActivities",ee.id,ee)},Fr=async(de,pe)=>{if(!e)throw new Error("Usuario no autenticado");await Nt().planActivities.update(de,pe),ye(),wn("planActivities",de,pe)},Ge=async de=>{if(!e)throw new Error("Usuario no autenticado");await Nt().planActivities.delete(de),ye(),kc(Yn(Zt,"planActivities",de)).catch(ee=>console.error("Firestore delete sync failed:",ee))},ms=async de=>{var Fe;if(!e)throw new Error("Usuario no autenticado");const pe=Nt(),ee={id:Gn(),...de,userId:e.uid};await pe.healthEvents.put(ee),De({animalId:ee.animalId,date:ee.date,type:"Tratamiento",details:`${ee.type}${ee.productUsed?` con ${((Fe=O.find(tt=>tt.id===ee.productUsed))==null?void 0:Fe.name)||"producto"}`:""}`,notes:ee.notes,lotName:ee.lotName}),ye(),wn("healthEvents",ee.id,ee)};return l.jsx(uF.Provider,{value:{animals:n,fathers:i,weighings:a,parturitions:c,lots:d,origins:h,breedingSeasons:m,sireLots:b,serviceRecords:w,events:E,feedingPlans:T,bodyWeighings:C,products:O,healthPlans:z,planActivities:G,healthEvents:B,isLoading:F,syncStatus:Z,addAnimal:We,updateAnimal:Je,deleteAnimalPermanently:jt,startDryingProcess:dt,setLactationAsDry:xe,addLot:Ye,deleteLot:Qe,addOrigin:fe,deleteOrigin:pt,addBreedingSeason:vr,updateBreedingSeason:rr,deleteBreedingSeason:Me,addSireLot:rt,updateSireLot:Ct,deleteSireLot:un,addServiceRecord:Cr,addFeedingPlan:Ut,addBatchEvent:Hn,addWeighing:ft,addBodyWeighing:Le,deleteWeighingSession:Ve,addParturition:gr,fetchData:ye,addFather:cn,addProduct:Hi,updateProduct:ps,deleteProduct:ze,addHealthPlanWithActivities:yt,updateHealthPlan:st,deleteHealthPlan:ir,addPlanActivity:Tr,updatePlanActivity:Fr,deletePlanActivity:Ge,addHealthEvent:ms},children:t})};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XJ=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),dF=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZJ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JJ=P.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...o},c)=>P.createElement("svg",{ref:c,...ZJ,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:dF("lucide",i),...o},[...a.map(([u,d])=>P.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=(t,e)=>{const n=P.forwardRef(({className:r,...i},s)=>P.createElement(JJ,{ref:s,iconNode:e,className:dF(`lucide-${XJ(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=Pe("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=Pe("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=Pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=Pe("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eee=Pe("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=Pe("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tee=Pe("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=Pe("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nee=Pe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ree=Pe("BarChart4",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M13 17V9",key:"1fwyjl"}],["path",{d:"M18 17V5",key:"sfb6ij"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=Pe("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iee=Pe("CalendarCheck2",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 14V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"bce9hv"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m16 20 2 2 4-4",key:"13tcca"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const see=Pe("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aee=Pe("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=Pe("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=Pe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oee=Pe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=Pe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lee=Pe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=Pe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=Pe("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cee=Pe("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uee=Pe("CircleOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.35 2.69A10 10 0 0 1 21.3 15.65",key:"1pfsoa"}],["path",{d:"M19.08 19.08A10 10 0 1 1 4.92 4.92",key:"1ablyi"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=Pe("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=Pe("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=Pe("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=Pe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dee=Pe("CloudCog",[["circle",{cx:"12",cy:"17",r:"3",key:"1spfwm"}],["path",{d:"M4.2 15.1A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.2",key:"zaobp"}],["path",{d:"m15.7 18.4-.9-.3",key:"4qxpbn"}],["path",{d:"m9.2 15.9-.9-.3",key:"17q7o2"}],["path",{d:"m10.6 20.7.3-.9",key:"1pf4s2"}],["path",{d:"m13.1 14.2.3-.9",key:"1mnuqm"}],["path",{d:"m13.6 20.7-.4-1",key:"1jpd1m"}],["path",{d:"m10.8 14.3-.4-1",key:"17ugyy"}],["path",{d:"m8.3 18.6 1-.4",key:"s42vdx"}],["path",{d:"m14.7 15.8 1-.4",key:"2wizun"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fee=Pe("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hee=Pe("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pee=Pe("Dna",[["path",{d:"M2 15c6.667-6 13.333 0 20-6",key:"1pyr53"}],["path",{d:"M9 22c1.798-1.998 2.518-3.995 2.807-5.993",key:"q3hbxp"}],["path",{d:"M15 2c-1.798 1.998-2.518 3.995-2.807 5.993",key:"80uv8i"}],["path",{d:"m17 6-2.5-2.5",key:"5cdfhj"}],["path",{d:"m14 8-1-1",key:"15nbz5"}],["path",{d:"m7 18 2.5 2.5",key:"16tu1a"}],["path",{d:"m3.5 14.5.5.5",key:"hapbhd"}],["path",{d:"m20 9 .5.5",key:"1n7z02"}],["path",{d:"m6.5 12.5 1 1",key:"cs35ky"}],["path",{d:"m16.5 10.5 1 1",key:"696xn5"}],["path",{d:"m10 16 1.5 1.5",key:"11lckj"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=Pe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=Pe("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=Pe("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mee=Pe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=Pe("Feather",[["path",{d:"M12.67 19a2 2 0 0 0 1.416-.588l6.154-6.172a6 6 0 0 0-8.49-8.49L5.586 9.914A2 2 0 0 0 5 11.328V18a1 1 0 0 0 1 1z",key:"18jl4k"}],["path",{d:"M16 8 2 22",key:"vp34q"}],["path",{d:"M17.5 15H9",key:"1oz8nu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gee=Pe("FileArchive",[["path",{d:"M16 22h2a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v18",key:"1oywqq"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vee=Pe("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=Pe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=Pe("FilterX",[["path",{d:"M13.013 3H2l8 9.46V19l4 2v-8.54l.9-1.055",key:"1fi1da"}],["path",{d:"m22 3-5 5",key:"12jva0"}],["path",{d:"m17 3 5 5",key:"k36vhe"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yee=Pe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bee=Pe("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=Pe("GitCompareArrows",[["circle",{cx:"5",cy:"6",r:"3",key:"1qnov2"}],["path",{d:"M12 6h5a2 2 0 0 1 2 2v7",key:"1yj91y"}],["path",{d:"m15 9-3-3 3-3",key:"1lwv8l"}],["circle",{cx:"19",cy:"18",r:"3",key:"1qljk2"}],["path",{d:"M12 18H7a2 2 0 0 1-2-2V9",key:"16sdep"}],["path",{d:"m9 15 3 3-3 3",key:"1m3kbl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=Pe("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xee=Pe("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=Pe("HeartCrack",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"m12 13-1-1 2-2-3-3 2-2",key:"xjdxli"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wee=Pe("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"12sd6o"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=Pe("HeartPulse",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=Pe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=Pe("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=Pe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=Pe("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=Pe("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=Pe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=Pe("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=Pe("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=Pe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ee=Pe("Milk",[["path",{d:"M8 2h8",key:"1ssgc1"}],["path",{d:"M9 2v2.789a4 4 0 0 1-.672 2.219l-.656.984A4 4 0 0 0 7 10.212V20a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-9.789a4 4 0 0 0-.672-2.219l-.656-.984A4 4 0 0 1 15 4.788V2",key:"qtp12x"}],["path",{d:"M7 15a6.472 6.472 0 0 1 5 0 6.47 6.47 0 0 0 5 0",key:"ygeh44"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=Pe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=Pe("MoveRight",[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=Pe("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const See=Pe("PackageOpen",[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aee=Pe("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=Pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eee=Pe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jee=Pe("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cee=Pe("Replace",[["path",{d:"M14 4c0-1.1.9-2 2-2",key:"1mvvbw"}],["path",{d:"M20 2c1.1 0 2 .9 2 2",key:"1mj6oe"}],["path",{d:"M22 8c0 1.1-.9 2-2 2",key:"v1wql3"}],["path",{d:"M16 10c-1.1 0-2-.9-2-2",key:"821ux0"}],["path",{d:"m3 7 3 3 3-3",key:"x25e72"}],["path",{d:"M6 10V5c0-1.7 1.3-3 3-3h1",key:"13af7h"}],["rect",{width:"8",height:"8",x:"2",y:"14",rx:"2",key:"17ihk4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=Pe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=Pe("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=Pe("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=Pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tee=Pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=Pe("Sigma",[["path",{d:"M18 7V4H6l6 8-6 8h12v-3",key:"zis8ev"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=Pe("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pee=Pe("SquareActivity",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M17 12h-2l-2 5-2-10-2 5H7",key:"15hlnc"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=Pe("SquareCheckBig",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=Pe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=Pe("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nee=Pe("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=Pe("Syringe",[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kee=Pe("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=Pe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dee=Pe("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=Pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iee=Pe("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=Pe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=Pe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=Pe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oee=Pe("Waypoints",[["circle",{cx:"12",cy:"4.5",r:"2.5",key:"r5ysbb"}],["path",{d:"m10.2 6.3-3.9 3.9",key:"1nzqf6"}],["circle",{cx:"4.5",cy:"12",r:"2.5",key:"jydg6v"}],["path",{d:"M7 12h10",key:"b7w52i"}],["circle",{cx:"19.5",cy:"12",r:"2.5",key:"1piiel"}],["path",{d:"m13.8 17.7 3.9-3.9",key:"1wyg1y"}],["circle",{cx:"12",cy:"19.5",r:"2.5",key:"13o1pw"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=Pe("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=Pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=Pe("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);var EF={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},rI=Y.createContext&&Y.createContext(EF),Mee=["attr","size","title"];function Ree(t,e){if(t==null)return{};var n=Lee(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Lee(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Q0(){return Q0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Q0.apply(this,arguments)}function iI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function X0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iI(Object(n),!0).forEach(function(r){zee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zee(t,e,n){return e=$ee(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $ee(t){var e=Fee(t,"string");return typeof e=="symbol"?e:e+""}function Fee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jF(t){return t&&t.map((e,n)=>Y.createElement(e.tag,X0({key:n},e.attr),jF(e.child)))}function hs(t){return e=>Y.createElement(Vee,Q0({attr:X0({},t.attr)},e),jF(t.child))}function Vee(t){var e=n=>{var{attr:r,size:i,title:s}=t,a=Ree(t,Mee),o=i||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),Y.createElement("svg",Q0({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:c,style:X0(X0({color:t.color||n.color},n.style),t.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),s&&Y.createElement("title",null,s),t.children)};return rI!==void 0?Y.createElement(rI.Consumer,null,n=>e(n)):e(EF)}function CF(t){return hs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 23.38L89.844 89.845l-64.9 162.254 14.85 5.943c20.312-50.766 40.62-101.535 60.93-152.304l1.432-3.58L256 40.616l153.844 61.54 1.43 3.58 60.93 152.305 14.853-5.942-64.9-162.254C366.77 67.69 311.386 45.534 256 23.38zm0 36.624l-139.996 55.998L72.8 224h.2v263h78V329h-39v-18h297v176h30V224h.2c-14.402-36-28.802-72-43.204-107.998L256 60.004zM151 135h210v114H151V135zm23.563 18L199 201.873V153h-24.438zM313 153v48.873L337.438 153H313zm-144 29.127V231h24.438L169 182.127zm174 0L318.562 231H343v-48.873zm-98.73 18.69c-1.207-.02-2.31.02-3.288.128-2.823.31-10.76 3.708-16.86 7.3-2.796 1.645-5.23 3.22-7.122 4.484V231h78v-16.97c-4.193-1.675-10.334-4.02-17.578-6.368-11.206-3.63-24.71-6.71-33.152-6.846zM160 263h192v18H160v-18zm15.16 66L208 389.205 240.84 329h-65.68zm144 0L352 389.205 384.84 329h-65.68zM169 355.295v105.41L197.748 408 169 355.295zm78 0L218.252 408 247 460.705v-105.41zm66 0v105.41L341.748 408 313 355.295zm78 0L362.252 408 391 460.705v-105.41zm-183 71.5L175.16 487h65.68L208 426.795zm144 0L319.16 487h65.68L352 426.795z"},child:[]}]})(t)}function Bee(t){return hs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M23 23v466h466v-18H41v-82.184l85.854-57.234 70.023 70.022 65.133-260.536L387.28 203.7 455.07 95.73l19.317 11.858 6.102-71.1-60.644 37.616 19.884 12.207-59.01 93.99-130.732-65.366-62.865 251.462-57.98-57.978L41 367.184V23H23z"},child:[]}]})(t)}function Uee(t){return hs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M44.62 106a26 26 0 0 0-25.69 29.3c16 124 16 117.4 0 241.4A26 26 0 0 0 54.72 404l138.68-57.7c-1.2 9.5-2.4 18.9-3.9 30.4-2.5 19.8 17.3 35 35.8 27.3l252-124c9.7-4 16-13.5 16-24s-6.3-20-16-24l-252-124c-3.2-1.3-6.6-2-10.1-2-15.6.1-27.7 13.8-25.7 29.3 1.5 11.5 2.7 20.9 3.9 30.4L54.72 108a26 26 0 0 0-10.1-2z"},child:[]}]})(t)}function fv(t){return hs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M273 459l7.79-20 6.21 20 5.79-23.33-4.25-48c-7.76 7.94-17.54 17.85-29.74 30.27zm38.5-380.86a115.06 115.06 0 0 0-21.13-19.6c-17.315-11.88-35.418-18.913-55.08-22.14-18.751-3.067-37.99-2.743-56.33.12A203.86 203.86 0 0 0 133 49.42a184.2 184.2 0 0 0-29.62 15.36c-12.304 8.597-10.431 6.828.95 1.82a179.6 179.6 0 0 1 30.9-10c50.427-4.832 98.41-7.579 134.17 27.17a80 80 0 0 1 12.28 16c4.714 8.06 7.805 16.877 9.66 25.59l45.69 2.84c-5.032-17.752-15.256-37.574-25.53-50.06zm50.05 26.63c-8.531-13.217-18.495-25.428-29.66-34.88a78.24 78.24 0 0 0-15.79-10.38c2.67 2.68 5.22 5.45 7.61 8.32a138.13 138.13 0 0 1 9.13 12.11l.1.14.09.14c9.772 15.14 17.164 33.862 20.78 49.15l22.19 1.3a253.49 253.49 0 0 0-14.43-25.91zm29.89 43l70 179.4-11.82 28.37-65.77-37.94-8 13.86 67.56 39-4.327 5.754L394.12 372l-65.33-31.47a42.41 42.41 0 0 0-9.29-1.43c-5.71 0-9.52 2.06-12.71 6.62-2.53 3.61-78.5 80.52-147.64 150.28H16V243.73l92.85 3.85 96.61-33.26 10.13-11a214.71 214.71 0 0 1 38 24.27 18.57 18.57 0 0 0 11.61 3.93c13.792-1.574 22.025-9.12 32.83-17.83-3.267-21.244-6.724-43.71-9.56-62.1-6.463-2.155-12.926-4.308-19.39-6.46l4.39-4.78zm-37.25 65.02c-4.024-14.705-20.114-19.427-30.58-18.14-3.073.432-6.167 1.427-8.77 2.68.868 3.09 2.17 7.87 3.79 10.35 6.527 9.211 17.348 13.898 27.64 12.51 3.967-.672 8.94-3.676 7.92-7.4zm61.63 105.47l19 20 11.6-11-19-20zM475 172.99s-40.54-27.8-57-1.2l11.25 28.83zM294 382.05l13.4 22.28-.4-35.64c-3.29 3.45-7.53 7.82-12.95 13.36zm-30.6-167c5.858 1.872 17.61-6.048 17.33-8.01l-6.67-43.33-28-9.31c-17.65-2.861-58.224-4.989-67.27 9.28 39.596 39.732 39.526 16.87 84.61 51.37zm127.08 172.89c-15.313-7.704-30.838-14.996-46.28-22.44 5.153 29.387 10.895 58.672 15.75 88.11l25.26 37.33-2.6-34L400 469.61v-28.67l10.19-41.95 6.67-11.05z"},child:[]}]})(t)}function Wee(t){return hs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M302.958 20.019l-93.916 46.564v35.404c31.305-15.522 62.61-31.047 93.916-46.568zm6.53 52.252l-95.4 47.3 63.036 78.137 95.397-47.303zm-111.915 55.492l-33.732 16.724h47.224zm-22.119 34.722l71.615 26.633-21.484-26.633zm-41.021 3.948v276.752l131.22 48.796v-276.75zm243.134 1.56c-31.306 15.521-62.61 31.044-93.916 46.567v275.863l93.916-46.567zM176.501 272.466s-15.3 15.085-9.889 24.203c4.167 7.02 21.889 5.418 21.889 5.418l15.549 3.848s17.72 10.374 21.887 5.416c5.41-6.44-9.887-29.098-9.887-29.098s35.91 33.492 29.662 47.318c-3.143 6.955-24.719-2.117-24.719-2.117s5.495 7.21 4.944 10.549c-1.001 6.062-13.774 9.916-13.774 9.916s1.111 21.24-6 25.168c-5.147 2.843-14.628.497-19.775-4.895-7.111-7.448-6-28.136-6-28.136s-12.775-10.177-13.776-16.735c-.55-3.611 4.944-8.103 4.944-8.103s-21.575-1.607-24.717-10.117c-6.247-16.919 29.662-32.635 29.662-32.635z"},child:[]}]})(t)}function Hee(t){return hs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M90.52 390.06h38.497v16.583H65.443V390.06l31.933-28.182c2.852-2.578 4.96-5.098 6.328-7.56 1.368-2.46 2.05-5.018 2.05-7.675 0-4.1-1.386-7.402-4.16-9.902-2.733-2.5-6.386-3.75-10.956-3.75-3.516 0-7.363.763-11.543 2.286-4.18 1.485-8.652 3.71-13.418 6.68v-19.22c5.078-1.678 10.098-2.948 15.06-3.807 4.96-.9 9.823-1.35 14.588-1.35 10.47 0 18.594 2.306 24.375 6.915 5.82 4.61 8.73 11.035 8.73 19.277 0 4.766-1.23 9.22-3.69 13.36-2.46 4.1-7.637 9.61-15.528 16.523l-18.69 16.406m349.377 32.915c5.897 1.524 10.37 4.18 13.417 7.97 3.086 3.75 4.63 8.534 4.63 14.355 0 8.672-3.322 15.273-9.962 19.804-6.64 4.493-16.328 6.74-29.063 6.74-4.492 0-9.004-.372-13.535-1.115-4.492-.704-8.945-1.778-13.36-3.223v-17.403c4.22 2.11 8.4 3.71 12.54 4.805 4.18 1.054 8.28 1.58 12.304 1.58 5.978 0 10.548-1.034 13.712-3.104 3.203-2.07 4.805-5.04 4.805-8.907 0-3.985-1.64-6.993-4.922-9.024-3.242-2.07-8.047-3.105-14.414-3.106h-9.022v-14.53h9.492c5.664 0 9.883-.88 12.656-2.638 2.773-1.796 4.16-4.51 4.16-8.144 0-3.36-1.347-5.957-4.043-7.793-2.695-1.836-6.504-2.754-11.426-2.754-3.632 0-7.304.41-11.015 1.232-3.71.82-7.403 2.03-11.074 3.632V384.83c4.453-1.25 8.867-2.186 13.242-2.812 4.375-.624 8.672-.937 12.89-.937 11.368 0 19.864 1.876 25.49 5.626 5.663 3.71 8.495 9.316 8.495 16.816 0 5.118-1.348 9.317-4.043 12.598-2.696 3.242-6.68 5.527-11.953 6.856M236.062 230.74h19.922v-56.544l-20.45 4.22v-15.352l20.333-4.22h21.445v71.895h19.922v15.585h-61.172V230.74M496 496V352H352V128H176v160H16v208"},child:[]}]})(t)}function qee(t){return hs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M24.844 25.563c1.333 77.685 25.778 141.568 63.283 187.955 4.367-4.937 8.77-9.796 13.13-14.553a9.5 9.5 0 0 1 7.348-3.178 9.5 9.5 0 0 1 6.66 16.016c-22.957 25.048-46.51 52.82-58.777 76.95-6.132 12.067-9.31 23.07-9.037 31.874.17 5.474 1.374 10.174 4.26 14.562l16.552-22.684a9.5 9.5 0 0 1 7.898-4.008 9.5 9.5 0 0 1 7.45 15.207l-16.635 22.797c2.973.316 6.316-.284 10.474-1.75 8.174-2.882 18.38-9.868 28.734-19.672 20.704-19.608 42.15-50.057 56.953-77.644a9.5 9.5 0 0 1 9.9-4.885c6.228 1.017 22.147 2.215 35.78.573 6.816-.82 13.107-2.395 17.232-4.432 4.124-2.035 5.597-3.84 6.12-5.934a9.5 9.5 0 1 1 18.434 4.603c-2.193 8.78-8.967 14.825-16.145 18.37-7.18 3.542-15.245 5.277-23.372 6.256-12.798 1.542-25.47 1.082-34.522.143-2.816 5.038-5.806 10.122-8.937 15.192 29.03 14.058 60.48 21.354 92.34 21.115 22.055-.164 43.82-4.29 64.64-11.937-6.014-8.637-11.297-17.378-15.596-25.96A9.5 9.5 0 1 1 326 252.03c13.688 27.32 40.692 59.164 67.537 79.982 13.423 10.41 26.846 18.047 37.842 21.363 5.988 1.806 10.902 2.378 14.983 1.854l-10.996-13.093a9.5 9.5 0 0 1 7.06-15.715 9.5 9.5 0 0 1 7.49 3.494l12.054 14.352c3.226-4.725 4.71-9.948 5.042-16.102.513-9.534-2.39-21.344-8.18-34.158-11.578-25.63-34.297-54.796-57.053-79.625a9.5 9.5 0 0 1 7.322-16.01 9.5 9.5 0 0 1 6.685 3.172c3.1 3.384 6.205 6.848 9.29 10.37 37.514-47.34 61.834-111.574 62.892-186.352H24.843zm138.664 270.68c-4.952 14.607-8.863 29.266-11.043 42.61-2.476 15.154-2.608 28.608-.29 37.745 2.32 9.137 5.71 13.32 12.514 15.22 10.31 2.88 17.56 1.32 24.884-3.572 7.325-4.893 14.436-13.87 20.696-25.87 6.813-13.064 12.555-29.486 17.517-47.09-22.16-3.106-43.775-9.54-64.28-19.044zm173.04 6.083c-9.938 3.936-20.108 7.144-30.456 9.57.512.913 1.02 1.844 1.54 2.733 7.736 13.262 16.197 23.722 23.802 29.292 7.604 5.57 12.882 6.638 19.34 3.77 7.937-3.52 12.458-8.014 15.236-14.087-10.454-9.556-20.457-20.185-29.46-31.28z"},child:[]}]})(t)}const Kee=()=>{const[t,e]=P.useState(!0),[n,r]=P.useState(""),[i,s]=P.useState(""),[a,o]=P.useState(null),[c,u]=P.useState(!1),d=async()=>{if(window.confirm("¿Estás seguro de que quieres forzar la eliminación de la base de datos local? Esto no afectará tus datos en la nube."))try{await Bf.delete("GanaderoOS_DB"),alert("Base de datos local eliminada con éxito. La página se recargará."),window.location.reload()}catch(p){alert("Error al eliminar la base de datos."),console.error(p)}},f=p=>{if(p.code==="auth/network-request-failed")return"No hay conexión a internet. Se requiere conexión para iniciar sesión.";switch(p.code){case"auth/invalid-email":return"El formato del correo electrónico no es válido.";case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":return"Correo electrónico o contraseña incorrectos.";case"auth/email-already-in-use":return"Este correo electrónico ya está registrado.";case"auth/weak-password":return"La contraseña debe tener al menos 6 caracteres.";default:return console.error("Firebase Auth Error:",p),"Ocurrió un error inesperado. Por favor, intenta de nuevo."}},h=async p=>{p.preventDefault(),o(null),u(!0);try{t?await yQ(Vf,n,i):await vQ(Vf,n,i)}catch(m){o(f(m))}finally{u(!1)}};return l.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 font-sans",children:l.jsxs("div",{className:"w-full max-w-sm",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-2",children:[l.jsx(fv,{className:"w-12 h-12 text-brand-orange"}),l.jsx("h1",{className:"text-4xl font-bold text-white",children:"GanaderoOS"})]}),l.jsx("p",{className:"text-zinc-400",children:"El sistema operativo para tu finca."})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-6 border border-brand-border",children:[l.jsxs("div",{className:"flex bg-zinc-900/80 rounded-xl p-1 w-full mb-6",children:[l.jsx("button",{onClick:()=>e(!0),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t?"bg-zinc-700 text-white":"text-zinc-400 hover:bg-zinc-800/50"}`,children:"Iniciar Sesión"}),l.jsx("button",{onClick:()=>e(!1),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t?"text-zinc-400 hover:bg-zinc-800/50":"bg-zinc-700 text-white"}`,children:"Registrarse"})]}),l.jsxs("form",{onSubmit:h,className:"space-y-4",children:[l.jsx("input",{type:"email",value:n,onChange:p=>r(p.target.value),placeholder:"Correo electrónico",required:!0,className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl border border-transparent focus:border-brand-orange focus:ring-0 focus:outline-none placeholder-zinc-400"}),l.jsx("input",{type:"password",value:i,onChange:p=>s(p.target.value),placeholder:"Contraseña",required:!0,className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl border border-transparent focus:border-brand-orange focus:ring-0 focus:outline-none placeholder-zinc-400"}),a&&l.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[l.jsx(Vt,{size:18}),l.jsx("span",{children:a})]}),l.jsx("button",{type:"submit",disabled:c,className:"w-full bg-brand-orange text-white font-bold py-3 rounded-xl transition-colors hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Procesando...":t?"Iniciar Sesión":"Crear Cuenta"})]})]}),l.jsxs("div",{className:"mt-6 text-center",children:[l.jsxs("button",{onClick:d,className:"flex items-center justify-center gap-2 mx-auto bg-brand-red/20 text-brand-red font-semibold py-2 px-4 rounded-lg border border-brand-red/50 hover:bg-brand-red/30 transition-colors",children:[l.jsx(ha,{size:16}),"Forzar Reinicio de DB Local"]}),l.jsx("p",{className:"text-xs text-zinc-600 mt-2",children:"Si la app no carga, usa este botón."})]})]})})};function Gee(t){return hs({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M192 160c44.2 0 80-35.8 80-80S236.2 0 192 0s-80 35.8-80 80 35.8 80 80 80zm-53.4 248.8l25.6-32-61.5-51.2L56.8 383c-11.4 14.2-11.7 34.4-.8 49l48 64c7.9 10.5 19.9 16 32 16 8.3 0 16.8-2.6 24-8 17.7-13.2 21.2-38.3 8-56l-29.4-39.2zm142.7-83.2l-61.5 51.2 25.6 32L216 448c-13.2 17.7-9.7 42.8 8 56 7.2 5.4 15.6 8 24 8 12.2 0 24.2-5.5 32-16l48-64c10.9-14.6 10.6-34.8-.8-49l-45.9-57.4zM376.7 145c-12.7-18.1-37.6-22.4-55.7-9.8l-40.6 28.5c-52.7 37-124.2 37-176.8 0L63 135.3C44.9 122.6 20 127 7.3 145-5.4 163.1-1 188 17 200.7l40.6 28.5c17 11.9 35.4 20.9 54.4 27.9V288h160v-30.8c19-7 37.4-16 54.4-27.9l40.6-28.5c18.1-12.8 22.4-37.7 9.7-55.8z"},child:[]}]})(t)}function Yee(t){return hs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M447.1 112c-34.2.5-62.3 28.4-63 62.6-.5 24.3 12.5 45.6 32 56.8V344c0 57.3-50.2 104-112 104-60 0-109.2-44.1-111.9-99.2C265 333.8 320 269.2 320 192V36.6c0-11.4-8.1-21.3-19.3-23.5L237.8.5c-13-2.6-25.6 5.8-28.2 18.8L206.4 35c-2.6 13 5.8 25.6 18.8 28.2l30.7 6.1v121.4c0 52.9-42.2 96.7-95.1 97.2-53.4.5-96.9-42.7-96.9-96V69.4l30.7-6.1c13-2.6 21.4-15.2 18.8-28.2l-3.1-15.7C107.7 6.4 95.1-2 82.1.6L19.3 13C8.1 15.3 0 25.1 0 36.6V192c0 77.3 55.1 142 128.1 156.8C130.7 439.2 208.6 512 304 512c97 0 176-75.4 176-168V231.4c19.1-11.1 32-31.7 32-55.4 0-35.7-29.2-64.5-64.9-64zm.9 80c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16z"},child:[]}]})(t)}function Qee(t){return hs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M201.5 174.8l55.7 55.8c3.1 3.1 3.1 8.2 0 11.3l-11.3 11.3c-3.1 3.1-8.2 3.1-11.3 0l-55.7-55.8-45.3 45.3 55.8 55.8c3.1 3.1 3.1 8.2 0 11.3l-11.3 11.3c-3.1 3.1-8.2 3.1-11.3 0L111 265.2l-26.4 26.4c-17.3 17.3-25.6 41.1-23 65.4l7.1 63.6L2.3 487c-3.1 3.1-3.1 8.2 0 11.3l11.3 11.3c3.1 3.1 8.2 3.1 11.3 0l66.3-66.3 63.6 7.1c23.9 2.6 47.9-5.4 65.4-23l181.9-181.9-135.7-135.7-64.9 65zm308.2-93.3L430.5 2.3c-3.1-3.1-8.2-3.1-11.3 0l-11.3 11.3c-3.1 3.1-3.1 8.2 0 11.3l28.3 28.3-45.3 45.3-56.6-56.6-17-17c-3.1-3.1-8.2-3.1-11.3 0l-33.9 33.9c-3.1 3.1-3.1 8.2 0 11.3l17 17L424.8 223l17 17c3.1 3.1 8.2 3.1 11.3 0l33.9-34c3.1-3.1 3.1-8.2 0-11.3l-73.5-73.5 45.3-45.3 28.3 28.3c3.1 3.1 8.2 3.1 11.3 0l11.3-11.3c3.1-3.2 3.1-8.2 0-11.4z"},child:[]}]})(t)}function Xee(t){return hs({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M528 336c-48.6 0-88 39.4-88 88s39.4 88 88 88 88-39.4 88-88-39.4-88-88-88zm0 112c-13.23 0-24-10.77-24-24s10.77-24 24-24 24 10.77 24 24-10.77 24-24 24zm80-288h-64v-40.2c0-14.12 4.7-27.76 13.15-38.84 4.42-5.8 3.55-14.06-1.32-19.49L534.2 37.3c-6.66-7.45-18.32-6.92-24.7.78C490.58 60.9 480 89.81 480 119.8V160H377.67L321.58 29.14A47.914 47.914 0 0 0 277.45 0H144c-26.47 0-48 21.53-48 48v146.52c-8.63-6.73-20.96-6.46-28.89 1.47L36 227.1c-8.59 8.59-8.59 22.52 0 31.11l5.06 5.06c-4.99 9.26-8.96 18.82-11.91 28.72H22c-12.15 0-22 9.85-22 22v44c0 12.15 9.85 22 22 22h7.14c2.96 9.91 6.92 19.46 11.91 28.73l-5.06 5.06c-8.59 8.59-8.59 22.52 0 31.11L67.1 476c8.59 8.59 22.52 8.59 31.11 0l5.06-5.06c9.26 4.99 18.82 8.96 28.72 11.91V490c0 12.15 9.85 22 22 22h44c12.15 0 22-9.85 22-22v-7.14c9.9-2.95 19.46-6.92 28.72-11.91l5.06 5.06c8.59 8.59 22.52 8.59 31.11 0l31.11-31.11c8.59-8.59 8.59-22.52 0-31.11l-5.06-5.06c4.99-9.26 8.96-18.82 11.91-28.72H330c12.15 0 22-9.85 22-22v-6h80.54c21.91-28.99 56.32-48 95.46-48 18.64 0 36.07 4.61 51.8 12.2l50.82-50.82c6-6 9.37-14.14 9.37-22.63V192c.01-17.67-14.32-32-31.99-32zM176 416c-44.18 0-80-35.82-80-80s35.82-80 80-80 80 35.82 80 80-35.82 80-80 80zm22-256h-38V64h106.89l41.15 96H198z"},child:[]}]})(t)}function Zee(t){return hs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M510.28 445.86l-73.03-292.13c-3.8-15.19-16.44-25.72-30.87-25.72h-60.25c3.57-10.05 5.88-20.72 5.88-32 0-53.02-42.98-96-96-96s-96 42.98-96 96c0 11.28 2.3 21.95 5.88 32h-60.25c-14.43 0-27.08 10.54-30.87 25.72L1.72 445.86C-6.61 479.17 16.38 512 48.03 512h415.95c31.64 0 54.63-32.83 46.3-66.14zM256 128c-17.64 0-32-14.36-32-32s14.36-32 32-32 32 14.36 32 32-14.36 32-32 32z"},child:[]}]})(t)}const nt=({isOpen:t,onClose:e,title:n,children:r,size:i="default"})=>{if(!t)return null;const s=i==="fullscreen"?"items-end":"items-center",a={default:"max-w-md m-4 rounded-2xl",large:"max-w-xl m-4 rounded-2xl",fullscreen:"w-full h-[95vh] rounded-t-2xl flex flex-col"};return l.jsx("div",{className:`fixed inset-0 bg-black/60 backdrop-blur-md flex justify-center z-50 animate-fade-in ${s}`,onClick:e,children:l.jsxs("div",{className:`bg-ios-modal-bg border border-zinc-700/80 shadow-2xl text-white transform transition-all animate-slide-up ${a[i]}`,onClick:o=>o.stopPropagation(),children:[l.jsxs("header",{className:"flex-shrink-0 flex justify-between items-center p-4 border-b border-zinc-800/80",children:[l.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:n}),l.jsx("button",{onClick:e,className:"p-1 rounded-full text-zinc-500 hover:text-white hover:bg-zinc-700/50 transition-colors",children:l.jsx(Fo,{size:20})})]}),l.jsx("div",{className:i==="fullscreen"?"flex-1 overflow-y-auto p-4":"overflow-y-auto max-h-[85vh] p-6",children:r})]})})},TF=({isOpen:t,onClose:e,editingLotId:n})=>{const{lots:r,addLot:i}=Ze(),[s,a]=P.useState(""),[o,c]=P.useState(""),[u,d]=P.useState(""),f=async()=>{if(s.trim()===""){d("El nombre del lote no puede estar vacío.");return}try{await i({name:s,parentLotId:o||void 0}),h()}catch(m){d(m.message||"No se pudo guardar el lote."),console.error(m)}},h=()=>{a(""),c(""),d(""),e()},p=r.filter(m=>!m.parentLotId&&m.id!==n);return l.jsx(nt,{isOpen:t,onClose:h,title:"Crear Nuevo Lote",children:l.jsxs("form",{onSubmit:m=>{m.preventDefault(),f()},className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-zinc-400",children:"Introduce el nombre de la nueva ubicación o lote en tu finca."}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"lotName",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Nombre del Lote"}),l.jsx("input",{id:"lotName",type:"text",value:s,onChange:m=>a(m.target.value),placeholder:"Ej: Galpón 1",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"parentLot",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Sub-lote de (Opcional)"}),l.jsxs("select",{id:"parentLot",value:o,onChange:m=>c(m.target.value),className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0",children:[l.jsx("option",{value:"",children:"Ninguno (Es un Lote Principal)"}),p.map(m=>l.jsx("option",{value:m.id,children:m.name},m.id))]})]}),u&&l.jsx("p",{className:"text-sm text-brand-red text-center",children:u}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[l.jsx("button",{type:"button",onClick:h,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:"Guardar Lote"})]})]})})},QC=P.createContext({});function Vo(t){const e=P.useRef(null);return e.current===null&&(e.current=t()),e.current}const aw=P.createContext(null),ow=P.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class Jee extends P.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function ete({children:t,isPresent:e}){const n=P.useId(),r=P.useRef(null),i=P.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=P.useContext(ow);return P.useInsertionEffect(()=>{const{width:a,height:o,top:c,left:u}=i.current;if(e||!r.current||!a||!o)return;r.current.dataset.motionPopId=n;const d=document.createElement("style");return s&&(d.nonce=s),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${c}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[e]),l.jsx(Jee,{isPresent:e,childRef:r,sizeRef:i,children:P.cloneElement(t,{ref:r})})}const tte=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:a})=>{const o=Vo(nte),c=P.useId(),u=P.useCallback(f=>{o.set(f,!0);for(const h of o.values())if(!h)return;r&&r()},[o,r]),d=P.useMemo(()=>({id:c,initial:e,isPresent:n,custom:i,onExitComplete:u,register:f=>(o.set(f,!1),()=>o.delete(f))}),s?[Math.random(),u]:[n,u]);return P.useMemo(()=>{o.forEach((f,h)=>o.set(h,!1))},[n]),P.useEffect(()=>{!n&&!o.size&&r&&r()},[n]),a==="popLayout"&&(t=l.jsx(ete,{isPresent:n,children:t})),l.jsx(aw.Provider,{value:d,children:t})};function nte(){return new Map}function PF(t=!0){const e=P.useContext(aw);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=P.useId();P.useEffect(()=>{t&&i(s)},[t]);const a=P.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,a]:[!0]}const oy=t=>t.key||"";function sI(t){const e=[];return P.Children.forEach(t,n=>{P.isValidElement(n)&&e.push(n)}),e}const XC=typeof window<"u",lw=XC?P.useLayoutEffect:P.useEffect,t0=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:a=!1})=>{const[o,c]=PF(a),u=P.useMemo(()=>sI(t),[t]),d=a&&!o?[]:u.map(oy),f=P.useRef(!0),h=P.useRef(u),p=Vo(()=>new Map),[m,g]=P.useState(u),[b,x]=P.useState(u);lw(()=>{f.current=!1,h.current=u;for(let E=0;E<b.length;E++){const j=oy(b[E]);d.includes(j)?p.delete(j):p.get(j)!==!0&&p.set(j,!1)}},[b,d.length,d.join("-")]);const w=[];if(u!==m){let E=[...u];for(let j=0;j<b.length;j++){const T=b[j],A=oy(T);d.includes(A)||(E.splice(j,0,T),w.push(T))}s==="wait"&&w.length&&(E=w),x(sI(E)),g(u);return}const{forceRender:_}=P.useContext(QC);return l.jsx(l.Fragment,{children:b.map(E=>{const j=oy(E),T=a&&!o?!1:u===b||d.includes(j),A=()=>{if(p.has(j))p.set(j,!0);else return;let C=!0;p.forEach(D=>{D||(C=!1)}),C&&(_==null||_(),x(h.current),a&&(c==null||c()),r&&r())};return l.jsx(tte,{isPresent:T,initial:!f.current||n?void 0:!1,custom:T?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:T?void 0:A,children:E},j)})})},is=t=>t;let NF=is;function ZC(t){let e;return()=>(e===void 0&&(e=t()),e)}const Wf=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},wo=t=>t*1e3,_o=t=>t/1e3,rte={useManualTiming:!1};function ite(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(u){s.has(u)&&(c.schedule(u),t()),u(a)}const c={schedule:(u,d=!1,f=!1)=>{const p=f&&r?e:n;return d&&s.add(u),p.has(u)||p.add(u),u},cancel:u=>{n.delete(u),s.delete(u)},process:u=>{if(a=u,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(o),e.clear(),r=!1,i&&(i=!1,c.process(u))}};return c}const ly=["read","resolveKeyframes","update","preRender","render","postRender"],ste=40;function kF(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=ly.reduce((x,w)=>(x[w]=ite(s),x),{}),{read:o,resolveKeyframes:c,update:u,preRender:d,render:f,postRender:h}=a,p=()=>{const x=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(x-i.timestamp,ste),1),i.timestamp=x,i.isProcessing=!0,o.process(i),c.process(i),u.process(i),d.process(i),f.process(i),h.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(p))},m=()=>{n=!0,r=!0,i.isProcessing||t(p)};return{schedule:ly.reduce((x,w)=>{const _=a[w];return x[w]=(E,j=!1,T=!1)=>(n||m(),_.schedule(E,j,T)),x},{}),cancel:x=>{for(let w=0;w<ly.length;w++)a[ly[w]].cancel(x)},state:i,steps:a}}const{schedule:bn,cancel:Do,state:Gr,steps:p_}=kF(typeof requestAnimationFrame<"u"?requestAnimationFrame:is,!0),DF=P.createContext({strict:!1}),aI={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Hf={};for(const t in aI)Hf[t]={isEnabled:e=>aI[t].some(n=>!!e[n])};function ate(t){for(const e in t)Hf[e]={...Hf[e],...t[e]}}const ote=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Z0(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||ote.has(t)}let IF=t=>!Z0(t);function lte(t){t&&(IF=e=>e.startsWith("on")?!Z0(e):t(e))}try{lte(require("@emotion/is-prop-valid").default)}catch{}function cte(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(IF(i)||n===!0&&Z0(i)||!e&&!Z0(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function ute(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const cw=P.createContext({});function sg(t){return typeof t=="string"||Array.isArray(t)}function uw(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const JC=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],eT=["initial",...JC];function dw(t){return uw(t.animate)||eT.some(e=>sg(t[e]))}function OF(t){return!!(dw(t)||t.variants)}function dte(t,e){if(dw(t)){const{initial:n,animate:r}=t;return{initial:n===!1||sg(n)?n:void 0,animate:sg(r)?r:void 0}}return t.inherit!==!1?e:{}}function fte(t){const{initial:e,animate:n}=dte(t,P.useContext(cw));return P.useMemo(()=>({initial:e,animate:n}),[oI(e),oI(n)])}function oI(t){return Array.isArray(t)?t.join(" "):t}const hte=Symbol.for("motionComponentSymbol");function Zd(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function pte(t,e,n){return P.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Zd(n)&&(n.current=r))},[e])}const tT=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),mte="framerAppearId",MF="data-"+tT(mte),{schedule:nT}=kF(queueMicrotask,!1),RF=P.createContext({});function gte(t,e,n,r,i){var s,a;const{visualElement:o}=P.useContext(cw),c=P.useContext(DF),u=P.useContext(aw),d=P.useContext(ow).reducedMotion,f=P.useRef(null);r=r||c.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:o,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const h=f.current,p=P.useContext(RF);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&vte(f.current,n,i,p);const m=P.useRef(!1);P.useInsertionEffect(()=>{h&&m.current&&h.update(n,u)});const g=n[MF],b=P.useRef(!!g&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,g))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,g)));return lw(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),nT.render(h.render),b.current&&h.animationState&&h.animationState.animateChanges())}),P.useEffect(()=>{h&&(!b.current&&h.animationState&&h.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)===null||x===void 0||x.call(window,g)}),b.current=!1))}),h}function vte(t,e,n,r){const{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:c,layoutRoot:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:LF(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&Zd(o),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:c,layoutRoot:u})}function LF(t){if(t)return t.options.allowProjection!==!1?t.projection:LF(t.parent)}function yte({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,a;t&&ate(t);function o(u,d){let f;const h={...P.useContext(ow),...u,layoutId:bte(u)},{isStatic:p}=h,m=fte(u),g=r(u,p);if(!p&&XC){xte();const b=wte(h);f=b.MeasureLayout,m.visualElement=gte(i,g,h,e,b.ProjectionNode)}return l.jsxs(cw.Provider,{value:m,children:[f&&m.visualElement?l.jsx(f,{visualElement:m.visualElement,...h}):null,n(i,u,pte(g,m.visualElement,d),g,p,m.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${(a=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&a!==void 0?a:""})`}`;const c=P.forwardRef(o);return c[hte]=i,c}function bte({layoutId:t}){const e=P.useContext(QC).id;return e&&t!==void 0?e+"-"+t:t}function xte(t,e){P.useContext(DF).strict}function wte(t){const{drag:e,layout:n}=Hf;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const _te=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function rT(t){return typeof t!="string"||t.includes("-")?!1:!!(_te.indexOf(t)>-1||/[A-Z]/u.test(t))}function lI(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function iT(t,e,n,r){if(typeof e=="function"){const[i,s]=lI(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=lI(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const GA=t=>Array.isArray(t),Ste=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Ate=t=>GA(t)?t[t.length-1]||0:t,Xr=t=>!!(t&&t.getVelocity);function n0(t){const e=Xr(t)?t.get():t;return Ste(e)?e.toValue():e}function Ete({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const a={latestValues:jte(r,i,s,t),renderState:e()};return n&&(a.onMount=o=>n({props:r,current:o,...a}),a.onUpdate=o=>n(o)),a}const zF=t=>(e,n)=>{const r=P.useContext(cw),i=P.useContext(aw),s=()=>Ete(t,e,r,i);return n?s():Vo(s)};function jte(t,e,n,r){const i={},s=r(t,{});for(const h in s)i[h]=n0(s[h]);let{initial:a,animate:o}=t;const c=dw(t),u=OF(t);e&&u&&!c&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let d=n?n.initial===!1:!1;d=d||a===!1;const f=d?o:a;if(f&&typeof f!="boolean"&&!uw(f)){const h=Array.isArray(f)?f:[f];for(let p=0;p<h.length;p++){const m=iT(t,h[p]);if(m){const{transitionEnd:g,transition:b,...x}=m;for(const w in x){let _=x[w];if(Array.isArray(_)){const E=d?_.length-1:0;_=_[E]}_!==null&&(i[w]=_)}for(const w in g)i[w]=g[w]}}}return i}const Oh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Qu=new Set(Oh),$F=t=>e=>typeof e=="string"&&e.startsWith(t),FF=$F("--"),Cte=$F("var(--"),sT=t=>Cte(t)?Tte.test(t.split("/*")[0].trim()):!1,Tte=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,VF=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Io=(t,e,n)=>n>e?e:n<t?t:n,Mh={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ag={...Mh,transform:t=>Io(0,1,t)},cy={...Mh,default:1},hv=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ul=hv("deg"),La=hv("%"),ct=hv("px"),Pte=hv("vh"),Nte=hv("vw"),cI={...La,parse:t=>La.parse(t)/100,transform:t=>La.transform(t*100)},kte={borderWidth:ct,borderTopWidth:ct,borderRightWidth:ct,borderBottomWidth:ct,borderLeftWidth:ct,borderRadius:ct,radius:ct,borderTopLeftRadius:ct,borderTopRightRadius:ct,borderBottomRightRadius:ct,borderBottomLeftRadius:ct,width:ct,maxWidth:ct,height:ct,maxHeight:ct,top:ct,right:ct,bottom:ct,left:ct,padding:ct,paddingTop:ct,paddingRight:ct,paddingBottom:ct,paddingLeft:ct,margin:ct,marginTop:ct,marginRight:ct,marginBottom:ct,marginLeft:ct,backgroundPositionX:ct,backgroundPositionY:ct},Dte={rotate:ul,rotateX:ul,rotateY:ul,rotateZ:ul,scale:cy,scaleX:cy,scaleY:cy,scaleZ:cy,skew:ul,skewX:ul,skewY:ul,distance:ct,translateX:ct,translateY:ct,translateZ:ct,x:ct,y:ct,z:ct,perspective:ct,transformPerspective:ct,opacity:ag,originX:cI,originY:cI,originZ:ct},uI={...Mh,transform:Math.round},aT={...kte,...Dte,zIndex:uI,size:ct,fillOpacity:ag,strokeOpacity:ag,numOctaves:uI},Ite={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Ote=Oh.length;function Mte(t,e,n){let r="",i=!0;for(let s=0;s<Ote;s++){const a=Oh[s],o=t[a];if(o===void 0)continue;let c=!0;if(typeof o=="number"?c=o===(a.startsWith("scale")?1:0):c=parseFloat(o)===0,!c||n){const u=VF(o,aT[a]);if(!c){i=!1;const d=Ite[a]||a;r+=`${d}(${u}) `}n&&(e[a]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function oT(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let a=!1,o=!1;for(const c in e){const u=e[c];if(Qu.has(c)){a=!0;continue}else if(FF(c)){i[c]=u;continue}else{const d=VF(u,aT[c]);c.startsWith("origin")?(o=!0,s[c]=d):r[c]=d}}if(e.transform||(a||n?r.transform=Mte(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:c="50%",originY:u="50%",originZ:d=0}=s;r.transformOrigin=`${c} ${u} ${d}`}}const Rte={offset:"stroke-dashoffset",array:"stroke-dasharray"},Lte={offset:"strokeDashoffset",array:"strokeDasharray"};function zte(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?Rte:Lte;t[s.offset]=ct.transform(-r);const a=ct.transform(e),o=ct.transform(n);t[s.array]=`${a} ${o}`}function dI(t,e,n){return typeof t=="string"?t:ct.transform(e+n*t)}function $te(t,e,n){const r=dI(e,t.x,t.width),i=dI(n,t.y,t.height);return`${r} ${i}`}function lT(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:c=0,...u},d,f){if(oT(t,u,f),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:p,dimensions:m}=t;h.transform&&(m&&(p.transform=h.transform),delete h.transform),m&&(i!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=$te(m,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),a!==void 0&&zte(h,a,o,c,!1)}const cT=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),BF=()=>({...cT(),attrs:{}}),uT=t=>typeof t=="string"&&t.toLowerCase()==="svg";function UF(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const WF=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function HF(t,e,n,r){UF(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(WF.has(i)?i:tT(i),e.attrs[i])}const J0={};function Fte(t){Object.assign(J0,t)}function qF(t,{layout:e,layoutId:n}){return Qu.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!J0[t]||t==="opacity")}function dT(t,e,n){var r;const{style:i}=t,s={};for(const a in i)(Xr(i[a])||e.style&&Xr(e.style[a])||qF(a,t)||((r=n==null?void 0:n.getValue(a))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[a]=i[a]);return s}function KF(t,e,n){const r=dT(t,e,n);for(const i in t)if(Xr(t[i])||Xr(e[i])){const s=Oh.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function Vte(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const fI=["x","y","width","height","cx","cy","r"],Bte={useVisualState:zF({scrapeMotionValuesFromProps:KF,createRenderState:BF,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const o in i)if(Qu.has(o)){s=!0;break}}if(!s)return;let a=!e;if(e)for(let o=0;o<fI.length;o++){const c=fI[o];t[c]!==e[c]&&(a=!0)}a&&bn.read(()=>{Vte(n,r),bn.render(()=>{lT(r,i,uT(n.tagName),t.transformTemplate),HF(n,r)})})}})},Ute={useVisualState:zF({scrapeMotionValuesFromProps:dT,createRenderState:cT})};function GF(t,e,n){for(const r in e)!Xr(e[r])&&!qF(r,n)&&(t[r]=e[r])}function Wte({transformTemplate:t},e){return P.useMemo(()=>{const n=cT();return oT(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Hte(t,e){const n=t.style||{},r={};return GF(r,n,t),Object.assign(r,Wte(t,e)),r}function qte(t,e){const n={},r=Hte(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function Kte(t,e,n,r){const i=P.useMemo(()=>{const s=BF();return lT(s,e,uT(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};GF(s,t.style,t),i.style={...s,...i.style}}return i}function Gte(t=!1){return(n,r,i,{latestValues:s},a)=>{const c=(rT(n)?Kte:qte)(r,s,a,n),u=cte(r,typeof n=="string",t),d=n!==P.Fragment?{...u,...c,ref:i}:{},{children:f}=r,h=P.useMemo(()=>Xr(f)?f.get():f,[f]);return P.createElement(n,{...d,children:h})}}function Yte(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const a={...rT(r)?Bte:Ute,preloadedFeatures:t,useRender:Gte(i),createVisualElement:e,Component:r};return yte(a)}}function YF(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function fw(t,e,n){const r=t.getProps();return iT(r,e,n!==void 0?n:r.custom,t)}const Qte=ZC(()=>window.ScrollTimeline!==void 0);class Xte{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(Qte()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Zte extends Xte{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function fT(t,e){return t?t[e]||t.default||t:void 0}const YA=2e4;function QF(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<YA;)e+=n,r=t.next(e);return e>=YA?1/0:e}function hT(t){return typeof t=="function"}function hI(t,e){t.timeline=e,t.onfinish=null}const pT=t=>Array.isArray(t)&&typeof t[0]=="number",Jte={linearEasing:void 0};function ene(t,e){const n=ZC(t);return()=>{var r;return(r=Jte[e])!==null&&r!==void 0?r:n()}}const eb=ene(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),XF=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(Wf(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function ZF(t){return!!(typeof t=="function"&&eb()||!t||typeof t=="string"&&(t in QA||eb())||pT(t)||Array.isArray(t)&&t.every(ZF))}const Hp=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,QA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Hp([0,.65,.55,1]),circOut:Hp([.55,0,1,.45]),backIn:Hp([.31,.01,.66,-.59]),backOut:Hp([.33,1.53,.69,.99])};function JF(t,e){if(t)return typeof t=="function"&&eb()?XF(t,e):pT(t)?Hp(t):Array.isArray(t)?t.map(n=>JF(n,e)||QA.easeOut):QA[t]}const qs={x:!1,y:!1};function e8(){return qs.x||qs.y}function tne(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function t8(t,e){const n=tne(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function pI(t){return e=>{e.pointerType==="touch"||e8()||t(e)}}function nne(t,e,n={}){const[r,i,s]=t8(t,n),a=pI(o=>{const{target:c}=o,u=e(o);if(typeof u!="function"||!c)return;const d=pI(f=>{u(f),c.removeEventListener("pointerleave",d)});c.addEventListener("pointerleave",d,i)});return r.forEach(o=>{o.addEventListener("pointerenter",a,i)}),s}const n8=(t,e)=>e?t===e?!0:n8(t,e.parentElement):!1,mT=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,rne=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function ine(t){return rne.has(t.tagName)||t.tabIndex!==-1}const qp=new WeakSet;function mI(t){return e=>{e.key==="Enter"&&t(e)}}function m_(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const sne=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=mI(()=>{if(qp.has(n))return;m_(n,"down");const i=mI(()=>{m_(n,"up")}),s=()=>m_(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function gI(t){return mT(t)&&!e8()}function ane(t,e,n={}){const[r,i,s]=t8(t,n),a=o=>{const c=o.currentTarget;if(!gI(o)||qp.has(c))return;qp.add(c);const u=e(o),d=(p,m)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),!(!gI(p)||!qp.has(c))&&(qp.delete(c),typeof u=="function"&&u(p,{success:m}))},f=p=>{d(p,n.useGlobalTarget||n8(c,p.target))},h=p=>{d(p,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",h,i)};return r.forEach(o=>{!ine(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),o.addEventListener("focus",u=>sne(u,i),i)}),s}function one(t){return t==="x"||t==="y"?qs[t]?null:(qs[t]=!0,()=>{qs[t]=!1}):qs.x||qs.y?null:(qs.x=qs.y=!0,()=>{qs.x=qs.y=!1})}const r8=new Set(["width","height","top","left","right","bottom",...Oh]);let r0;function lne(){r0=void 0}const za={now:()=>(r0===void 0&&za.set(Gr.isProcessing||rte.useManualTiming?Gr.timestamp:performance.now()),r0),set:t=>{r0=t,queueMicrotask(lne)}};function gT(t,e){t.indexOf(e)===-1&&t.push(e)}function vT(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function cne([...t],e,n){const r=e<0?t.length+e:e;if(r>=0&&r<t.length){const i=n<0?t.length+n:n,[s]=t.splice(e,1);t.splice(i,0,s)}return t}class yT{constructor(){this.subscriptions=[]}add(e){return gT(this.subscriptions,e),()=>vT(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function i8(t,e){return e?t*(1e3/e):0}const vI=30,une=t=>!isNaN(parseFloat(t)),um={current:void 0};class dne{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=za.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=za.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=une(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new yT);const r=this.events[e].add(n);return e==="change"?()=>{r(),bn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return um.current&&um.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=za.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>vI)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,vI);return i8(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function qf(t,e){return new dne(t,e)}function fne(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,qf(n))}function bT(t,e){const n=fw(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const a in s){const o=Ate(s[a]);fne(t,a,o)}}function hne(t){return!!(Xr(t)&&t.add)}function XA(t,e){const n=t.getValue("willChange");if(hne(n))return n.add(e)}function s8(t){return t.props[MF]}const a8=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,pne=1e-7,mne=12;function gne(t,e,n,r,i){let s,a,o=0;do a=e+(n-e)/2,s=a8(a,r,i)-t,s>0?n=a:e=a;while(Math.abs(s)>pne&&++o<mne);return a}function pv(t,e,n,r){if(t===e&&n===r)return is;const i=s=>gne(s,0,1,t,n);return s=>s===0||s===1?s:a8(i(s),e,r)}const o8=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,l8=t=>e=>1-t(1-e),c8=pv(.33,1.53,.69,.99),xT=l8(c8),u8=o8(xT),d8=t=>(t*=2)<1?.5*xT(t):.5*(2-Math.pow(2,-10*(t-1))),wT=t=>1-Math.sin(Math.acos(t)),f8=l8(wT),h8=o8(wT),p8=t=>/^0[^.\s]+$/u.test(t);function vne(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||p8(t):!0}const dm=t=>Math.round(t*1e5)/1e5,_T=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function yne(t){return t==null}const bne=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ST=(t,e)=>n=>!!(typeof n=="string"&&bne.test(n)&&n.startsWith(t)||e&&!yne(n)&&Object.prototype.hasOwnProperty.call(n,e)),m8=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,a,o]=r.match(_T);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},xne=t=>Io(0,255,t),g_={...Mh,transform:t=>Math.round(xne(t))},tu={test:ST("rgb","red"),parse:m8("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+g_.transform(t)+", "+g_.transform(e)+", "+g_.transform(n)+", "+dm(ag.transform(r))+")"};function wne(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const ZA={test:ST("#"),parse:wne,transform:tu.transform},Jd={test:ST("hsl","hue"),parse:m8("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+La.transform(dm(e))+", "+La.transform(dm(n))+", "+dm(ag.transform(r))+")"},ci={test:t=>tu.test(t)||ZA.test(t)||Jd.test(t),parse:t=>tu.test(t)?tu.parse(t):Jd.test(t)?Jd.parse(t):ZA.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?tu.transform(t):Jd.transform(t)},_ne=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Sne(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(_T))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(_ne))===null||n===void 0?void 0:n.length)||0)>0}const g8="number",v8="color",Ane="var",Ene="var(",yI="${}",jne=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function og(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const o=e.replace(jne,c=>(ci.test(c)?(r.color.push(s),i.push(v8),n.push(ci.parse(c))):c.startsWith(Ene)?(r.var.push(s),i.push(Ane),n.push(c)):(r.number.push(s),i.push(g8),n.push(parseFloat(c))),++s,yI)).split(yI);return{values:n,split:o,indexes:r,types:i}}function y8(t){return og(t).values}function b8(t){const{split:e,types:n}=og(t),r=e.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=e[a],i[a]!==void 0){const o=n[a];o===g8?s+=dm(i[a]):o===v8?s+=ci.transform(i[a]):s+=i[a]}return s}}const Cne=t=>typeof t=="number"?0:t;function Tne(t){const e=y8(t);return b8(t)(e.map(Cne))}const Kl={test:Sne,parse:y8,createTransformer:b8,getAnimatableNone:Tne},Pne=new Set(["brightness","contrast","saturate","opacity"]);function Nne(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(_T)||[];if(!r)return t;const i=n.replace(r,"");let s=Pne.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const kne=/\b([a-z-]*)\(.*?\)/gu,JA={...Kl,getAnimatableNone:t=>{const e=t.match(kne);return e?e.map(Nne).join(" "):t}},Dne={...aT,color:ci,backgroundColor:ci,outlineColor:ci,fill:ci,stroke:ci,borderColor:ci,borderTopColor:ci,borderRightColor:ci,borderBottomColor:ci,borderLeftColor:ci,filter:JA,WebkitFilter:JA},AT=t=>Dne[t];function x8(t,e){let n=AT(t);return n!==JA&&(n=Kl),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Ine=new Set(["auto","none","0"]);function One(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!Ine.has(s)&&og(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=x8(n,i)}const bI=t=>t===Mh||t===ct,xI=(t,e)=>parseFloat(t.split(", ")[e]),wI=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return xI(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?xI(s[1],t):0}},Mne=new Set(["x","y","z"]),Rne=Oh.filter(t=>!Mne.has(t));function Lne(t){const e=[];return Rne.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Kf={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:wI(4,13),y:wI(5,14)};Kf.translateX=Kf.x;Kf.translateY=Kf.y;const mu=new Set;let eE=!1,tE=!1;function w8(){if(tE){const t=Array.from(mu).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=Lne(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,a])=>{var o;(o=r.getValue(s))===null||o===void 0||o.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}tE=!1,eE=!1,mu.forEach(t=>t.complete()),mu.clear()}function _8(){mu.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(tE=!0)})}function zne(){_8(),w8()}class ET{constructor(e,n,r,i,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(mu.add(this),eE||(eE=!0,bn.read(_8),bn.resolveKeyframes(w8))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const a=i==null?void 0:i.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const c=r.readValue(n,o);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=o),i&&a===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),mu.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,mu.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const S8=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),$ne=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Fne(t){const e=$ne.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function A8(t,e,n=1){const[r,i]=Fne(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return S8(a)?parseFloat(a):a}return sT(i)?A8(i,e,n+1):i}const E8=t=>e=>e.test(t),Vne={test:t=>t==="auto",parse:t=>t},j8=[Mh,ct,La,ul,Nte,Pte,Vne],_I=t=>j8.find(E8(t));class C8 extends ET{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),sT(u))){const d=A8(u,n.current);d!==void 0&&(e[c]=d),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!r8.has(r)||e.length!==2)return;const[i,s]=e,a=_I(i),o=_I(s);if(a!==o)if(bI(a)&&bI(o))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)vne(e[i])&&r.push(i);r.length&&One(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Kf[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const a=i.length-1,o=i[a];i[a]=Kf[r](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,u])=>{n.getValue(c).set(u)}),this.resolveNoneKeyframes()}}const SI=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Kl.test(t)||t==="0")&&!t.startsWith("url("));function Bne(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Une(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],a=SI(i,e),o=SI(s,e);return!a||!o?!1:Bne(t)||(n==="spring"||hT(n))&&r}const Wne=t=>t!==null;function hw(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(Wne),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const Hne=40;class T8{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=za.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Hne?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&zne(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=za.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:a,onComplete:o,onUpdate:c,isGenerator:u}=this.options;if(!u&&!Une(e,r,i,s))if(a)this.options.duration=0;else{c&&c(hw(e,this.options,n)),o&&o(),this.resolveFinishedPromise();return}const d=this.initPlayback(e,n);d!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...d},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Pn=(t,e,n)=>t+(e-t)*n;function v_(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function qne({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,a=0;if(!e)i=s=a=n;else{const o=n<.5?n*(1+e):n+e-n*e,c=2*n-o;i=v_(c,o,t+1/3),s=v_(c,o,t),a=v_(c,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function tb(t,e){return n=>n>0?e:t}const y_=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Kne=[ZA,tu,Jd],Gne=t=>Kne.find(e=>e.test(t));function AI(t){const e=Gne(t);if(!e)return!1;let n=e.parse(t);return e===Jd&&(n=qne(n)),n}const EI=(t,e)=>{const n=AI(t),r=AI(e);if(!n||!r)return tb(t,e);const i={...n};return s=>(i.red=y_(n.red,r.red,s),i.green=y_(n.green,r.green,s),i.blue=y_(n.blue,r.blue,s),i.alpha=Pn(n.alpha,r.alpha,s),tu.transform(i))},Yne=(t,e)=>n=>e(t(n)),mv=(...t)=>t.reduce(Yne),nE=new Set(["none","hidden"]);function Qne(t,e){return nE.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Xne(t,e){return n=>Pn(t,e,n)}function jT(t){return typeof t=="number"?Xne:typeof t=="string"?sT(t)?tb:ci.test(t)?EI:ere:Array.isArray(t)?P8:typeof t=="object"?ci.test(t)?EI:Zne:tb}function P8(t,e){const n=[...t],r=n.length,i=t.map((s,a)=>jT(s)(s,e[a]));return s=>{for(let a=0;a<r;a++)n[a]=i[a](s);return n}}function Zne(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=jT(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function Jne(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],o=t.indexes[a][i[a]],c=(n=t.values[o])!==null&&n!==void 0?n:0;r[s]=c,i[a]++}return r}const ere=(t,e)=>{const n=Kl.createTransformer(e),r=og(t),i=og(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?nE.has(t)&&!i.values.length||nE.has(e)&&!r.values.length?Qne(t,e):mv(P8(Jne(r,i),i.values),n):tb(t,e)};function N8(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Pn(t,e,n):jT(t)(t,e)}const tre=5;function k8(t,e,n){const r=Math.max(e-tre,0);return i8(n-t(r),e-r)}const Fn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},b_=.001;function nre({duration:t=Fn.duration,bounce:e=Fn.bounce,velocity:n=Fn.velocity,mass:r=Fn.mass}){let i,s,a=1-e;a=Io(Fn.minDamping,Fn.maxDamping,a),t=Io(Fn.minDuration,Fn.maxDuration,_o(t)),a<1?(i=u=>{const d=u*a,f=d*t,h=d-n,p=rE(u,a),m=Math.exp(-f);return b_-h/p*m},s=u=>{const f=u*a*t,h=f*n+n,p=Math.pow(a,2)*Math.pow(u,2)*t,m=Math.exp(-f),g=rE(Math.pow(u,2),a);return(-i(u)+b_>0?-1:1)*((h-p)*m)/g}):(i=u=>{const d=Math.exp(-u*t),f=(u-n)*t+1;return-b_+d*f},s=u=>{const d=Math.exp(-u*t),f=(n-u)*(t*t);return d*f});const o=5/t,c=ire(i,s,o);if(t=wo(t),isNaN(c))return{stiffness:Fn.stiffness,damping:Fn.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:a*2*Math.sqrt(r*u),duration:t}}}const rre=12;function ire(t,e,n){let r=n;for(let i=1;i<rre;i++)r=r-t(r)/e(r);return r}function rE(t,e){return t*Math.sqrt(1-e*e)}const sre=["duration","bounce"],are=["stiffness","damping","mass"];function jI(t,e){return e.some(n=>t[n]!==void 0)}function ore(t){let e={velocity:Fn.velocity,stiffness:Fn.stiffness,damping:Fn.damping,mass:Fn.mass,isResolvedFromDuration:!1,...t};if(!jI(t,are)&&jI(t,sre))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Io(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Fn.mass,stiffness:i,damping:s}}else{const n=nre(t);e={...e,...n,mass:Fn.mass},e.isResolvedFromDuration=!0}return e}function D8(t=Fn.visualDuration,e=Fn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:s},{stiffness:c,damping:u,mass:d,duration:f,velocity:h,isResolvedFromDuration:p}=ore({...n,velocity:-_o(n.velocity||0)}),m=h||0,g=u/(2*Math.sqrt(c*d)),b=a-s,x=_o(Math.sqrt(c/d)),w=Math.abs(b)<5;r||(r=w?Fn.restSpeed.granular:Fn.restSpeed.default),i||(i=w?Fn.restDelta.granular:Fn.restDelta.default);let _;if(g<1){const j=rE(x,g);_=T=>{const A=Math.exp(-g*x*T);return a-A*((m+g*x*b)/j*Math.sin(j*T)+b*Math.cos(j*T))}}else if(g===1)_=j=>a-Math.exp(-x*j)*(b+(m+x*b)*j);else{const j=x*Math.sqrt(g*g-1);_=T=>{const A=Math.exp(-g*x*T),C=Math.min(j*T,300);return a-A*((m+g*x*b)*Math.sinh(C)+j*b*Math.cosh(C))/j}}const E={calculatedDuration:p&&f||null,next:j=>{const T=_(j);if(p)o.done=j>=f;else{let A=0;g<1&&(A=j===0?wo(m):k8(_,j,T));const C=Math.abs(A)<=r,D=Math.abs(a-T)<=i;o.done=C&&D}return o.value=o.done?a:T,o},toString:()=>{const j=Math.min(QF(E),YA),T=XF(A=>E.next(j*A).value,j,30);return j+"ms "+T}};return E}function CI({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:c,restDelta:u=.5,restSpeed:d}){const f=t[0],h={done:!1,value:f},p=C=>o!==void 0&&C<o||c!==void 0&&C>c,m=C=>o===void 0?c:c===void 0||Math.abs(o-C)<Math.abs(c-C)?o:c;let g=n*e;const b=f+g,x=a===void 0?b:a(b);x!==b&&(g=x-f);const w=C=>-g*Math.exp(-C/r),_=C=>x+w(C),E=C=>{const D=w(C),O=_(C);h.done=Math.abs(D)<=u,h.value=h.done?x:O};let j,T;const A=C=>{p(h.value)&&(j=C,T=D8({keyframes:[h.value,m(h.value)],velocity:k8(_,C,h.value),damping:i,stiffness:s,restDelta:u,restSpeed:d}))};return A(0),{calculatedDuration:null,next:C=>{let D=!1;return!T&&j===void 0&&(D=!0,E(C),A(C)),j!==void 0&&C>=j?T.next(C-j):(!D&&E(C),h)}}}const lre=pv(.42,0,1,1),cre=pv(0,0,.58,1),I8=pv(.42,0,.58,1),ure=t=>Array.isArray(t)&&typeof t[0]!="number",dre={linear:is,easeIn:lre,easeInOut:I8,easeOut:cre,circIn:wT,circInOut:h8,circOut:f8,backIn:xT,backInOut:u8,backOut:c8,anticipate:d8},TI=t=>{if(pT(t)){NF(t.length===4);const[e,n,r,i]=t;return pv(e,n,r,i)}else if(typeof t=="string")return dre[t];return t};function fre(t,e,n){const r=[],i=n||N8,s=t.length-1;for(let a=0;a<s;a++){let o=i(t[a],t[a+1]);if(e){const c=Array.isArray(e)?e[a]||is:e;o=mv(c,o)}r.push(o)}return r}function O8(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(NF(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=fre(e,r,i),c=o.length,u=d=>{if(a&&d<t[0])return e[0];let f=0;if(c>1)for(;f<t.length-2&&!(d<t[f+1]);f++);const h=Wf(t[f],t[f+1],d);return o[f](h)};return n?d=>u(Io(t[0],t[s-1],d)):u}function hre(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Wf(0,e,r);t.push(Pn(n,1,i))}}function pre(t){const e=[0];return hre(e,t.length-1),e}function mre(t,e){return t.map(n=>n*e)}function gre(t,e){return t.map(()=>e||I8).splice(0,t.length-1)}function nb({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=ure(r)?r.map(TI):TI(r),s={done:!1,value:e[0]},a=mre(n&&n.length===e.length?n:pre(e),t),o=O8(a,e,{ease:Array.isArray(i)?i:gre(e,i)});return{calculatedDuration:t,next:c=>(s.value=o(c),s.done=c>=t,s)}}const vre=t=>{const e=({timestamp:n})=>t(n);return{start:()=>bn.update(e,!0),stop:()=>Do(e),now:()=>Gr.isProcessing?Gr.timestamp:za.now()}},yre={decay:CI,inertia:CI,tween:nb,keyframes:nb,spring:D8},bre=t=>t/100;class CT extends T8{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,a=(i==null?void 0:i.KeyframeResolver)||ET,o=(c,u)=>this.onKeyframesResolved(c,u);this.resolver=new a(s,o,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=this.options,o=hT(n)?n:yre[n]||nb;let c,u;o!==nb&&typeof e[0]!="number"&&(c=mv(bre,N8(e[0],e[1])),e=[0,100]);const d=o({...this.options,keyframes:e});s==="mirror"&&(u=o({...this.options,keyframes:[...e].reverse(),velocity:-a})),d.calculatedDuration===null&&(d.calculatedDuration=QF(d));const{calculatedDuration:f}=d,h=f+i,p=h*(r+1)-i;return{generator:d,mirroredGenerator:u,mapPercentToKeyframes:c,calculatedDuration:f,resolvedDuration:h,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:C}=this.options;return{done:!0,value:C[C.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:c,calculatedDuration:u,totalDuration:d,resolvedDuration:f}=r;if(this.startTime===null)return s.next(0);const{delay:h,repeat:p,repeatType:m,repeatDelay:g,onUpdate:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-d/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const x=this.currentTime-h*(this.speed>=0?1:-1),w=this.speed>=0?x<0:x>d;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let _=this.currentTime,E=s;if(p){const C=Math.min(this.currentTime,d)/f;let D=Math.floor(C),O=C%1;!O&&C>=1&&(O=1),O===1&&D--,D=Math.min(D,p+1),!!(D%2)&&(m==="reverse"?(O=1-O,g&&(O-=g/f)):m==="mirror"&&(E=a)),_=Io(0,1,O)*f}const j=w?{done:!1,value:c[0]}:E.next(_);o&&(j.value=o(j.value));let{done:T}=j;!w&&u!==null&&(T=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&T);return A&&i!==void 0&&(j.value=hw(c,this.options,i)),b&&b(j.value),A&&this.finish(),j}get duration(){const{resolved:e}=this;return e?_o(e.calculatedDuration):0}get time(){return _o(this.currentTime)}set time(e){e=wo(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=_o(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=vre,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const xre=new Set(["opacity","clipPath","filter","transform"]);function wre(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeInOut",times:c}={}){const u={[e]:n};c&&(u.offset=c);const d=JF(o,i);return Array.isArray(d)&&(u.easing=d),t.animate(u,{delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}const _re=ZC(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),rb=10,Sre=2e4;function Are(t){return hT(t.type)||t.type==="spring"||!ZF(t.ease)}function Ere(t,e){const n=new CT({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<Sre;)r=n.sample(s),i.push(r.value),s+=rb;return{times:void 0,keyframes:i,duration:s-rb,ease:"linear"}}const M8={anticipate:d8,backInOut:u8,circInOut:h8};function jre(t){return t in M8}class PI extends T8{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new C8(s,(a,o)=>this.onKeyframesResolved(a,o),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:a,motionValue:o,name:c,startTime:u}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof s=="string"&&eb()&&jre(s)&&(s=M8[s]),Are(this.options)){const{onComplete:f,onUpdate:h,motionValue:p,element:m,...g}=this.options,b=Ere(e,g);e=b.keyframes,e.length===1&&(e[1]=e[0]),r=b.duration,i=b.times,s=b.ease,a="keyframes"}const d=wre(o.owner.current,c,e,{...this.options,duration:r,times:i,ease:s});return d.startTime=u??this.calcStartTime(),this.pendingTimeline?(hI(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:f}=this.options;o.set(hw(e,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:r,times:i,type:a,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return _o(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return _o(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=wo(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return is;const{animation:r}=n;hI(r,e)}return is}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:a,times:o}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:d,onComplete:f,element:h,...p}=this.options,m=new CT({...p,keyframes:r,duration:i,type:s,ease:a,times:o,isGenerator:!0}),g=wo(this.time);u.setWithVelocity(m.sample(g-rb).value,m.sample(g).value,rb)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:a,type:o}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=n.owner.getProps();return _re()&&r&&xre.has(r)&&!c&&!u&&!i&&s!=="mirror"&&a!==0&&o!=="inertia"}}const Cre={type:"spring",stiffness:500,damping:25,restSpeed:10},Tre=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Pre={type:"keyframes",duration:.8},Nre={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},kre=(t,{keyframes:e})=>e.length>2?Pre:Qu.has(t)?t.startsWith("scale")?Tre(e[1]):Cre:Nre;function Dre({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const TT=(t,e,n,r={},i,s)=>a=>{const o=fT(r,t)||{},c=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-wo(c);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:h=>{e.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:s?void 0:i};Dre(o)||(d={...d,...kre(t,d)}),d.duration&&(d.duration=wo(d.duration)),d.repeatDelay&&(d.repeatDelay=wo(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(f=!0)),f&&!s&&e.get()!==void 0){const h=hw(d.keyframes,o);if(h!==void 0)return bn.update(()=>{d.onUpdate(h),d.onComplete()}),new Zte([])}return!s&&PI.supports(d)?new PI(d):new CT(d)};function Ire({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function R8(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:a=t.getDefaultTransition(),transitionEnd:o,...c}=e;r&&(a=r);const u=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const f in c){const h=t.getValue(f,(s=t.latestValues[f])!==null&&s!==void 0?s:null),p=c[f];if(p===void 0||d&&Ire(d,f))continue;const m={delay:n,...fT(a||{},f)};let g=!1;if(window.MotionHandoffAnimation){const x=s8(t);if(x){const w=window.MotionHandoffAnimation(x,f,bn);w!==null&&(m.startTime=w,g=!0)}}XA(t,f),h.start(TT(f,h,p,t.shouldReduceMotion&&r8.has(f)?{type:!1}:m,t,g));const b=h.animation;b&&u.push(b)}return o&&Promise.all(u).then(()=>{bn.update(()=>{o&&bT(t,o)})}),u}function iE(t,e,n={}){var r;const i=fw(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const a=i?()=>Promise.all(R8(t,i,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:h}=s;return Ore(t,e,d+u,f,h,n)}:()=>Promise.resolve(),{when:c}=s;if(c){const[u,d]=c==="beforeChildren"?[a,o]:[o,a];return u().then(()=>d())}else return Promise.all([a(),o(n.delay)])}function Ore(t,e,n=0,r=0,i=1,s){const a=[],o=(t.variantChildren.size-1)*r,c=i===1?(u=0)=>u*r:(u=0)=>o-u*r;return Array.from(t.variantChildren).sort(Mre).forEach((u,d)=>{u.notify("AnimationStart",e),a.push(iE(u,e,{...s,delay:n+c(d)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(a)}function Mre(t,e){return t.sortNodePosition(e)}function L8(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>iE(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=iE(t,e,n);else{const i=typeof e=="function"?fw(t,e,n.custom):e;r=Promise.all(R8(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const Rre=eT.length;function z8(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?z8(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Rre;n++){const r=eT[n],i=t.props[r];(sg(i)||i===!1)&&(e[r]=i)}return e}const Lre=[...JC].reverse(),zre=JC.length;function $re(t){return e=>Promise.all(e.map(({animation:n,options:r})=>L8(t,n,r)))}function Fre(t){let e=$re(t),n=NI(),r=!0;const i=c=>(u,d)=>{var f;const h=fw(t,d,c==="exit"?(f=t.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(h){const{transition:p,transitionEnd:m,...g}=h;u={...u,...g,...m}}return u};function s(c){e=c(t)}function a(c){const{props:u}=t,d=z8(t.parent)||{},f=[],h=new Set;let p={},m=1/0;for(let b=0;b<zre;b++){const x=Lre[b],w=n[x],_=u[x]!==void 0?u[x]:d[x],E=sg(_),j=x===c?w.isActive:null;j===!1&&(m=b);let T=_===d[x]&&_!==u[x]&&E;if(T&&r&&t.manuallyAnimateOnMount&&(T=!1),w.protectedKeys={...p},!w.isActive&&j===null||!_&&!w.prevProp||uw(_)||typeof _=="boolean")continue;const A=Vre(w.prevProp,_);let C=A||x===c&&w.isActive&&!T&&E||b>m&&E,D=!1;const O=Array.isArray(_)?_:[_];let L=O.reduce(i(x),{});j===!1&&(L={});const{prevResolvedValues:z={}}=w,M={...z,...L},G=U=>{C=!0,h.has(U)&&(D=!0,h.delete(U)),w.needsAnimating[U]=!0;const F=t.getValue(U);F&&(F.liveStyle=!1)};for(const U in M){const F=L[U],q=z[U];if(p.hasOwnProperty(U))continue;let Z=!1;GA(F)&&GA(q)?Z=!YF(F,q):Z=F!==q,Z?F!=null?G(U):h.add(U):F!==void 0&&h.has(U)?G(U):w.protectedKeys[U]=!0}w.prevProp=_,w.prevResolvedValues=L,w.isActive&&(p={...p,...L}),r&&t.blockInitialAnimation&&(C=!1),C&&(!(T&&A)||D)&&f.push(...O.map(U=>({animation:U,options:{type:x}})))}if(h.size){const b={};h.forEach(x=>{const w=t.getBaseTarget(x),_=t.getValue(x);_&&(_.liveStyle=!0),b[x]=w??null}),f.push({animation:b})}let g=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(g=!1),r=!1,g?e(f):Promise.resolve()}function o(c,u){var d;if(n[c].isActive===u)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(h=>{var p;return(p=h.animationState)===null||p===void 0?void 0:p.setActive(c,u)}),n[c].isActive=u;const f=a(c);for(const h in n)n[h].protectedKeys={};return f}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>n,reset:()=>{n=NI(),r=!0}}}function Vre(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!YF(e,t):!1}function Dc(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function NI(){return{animate:Dc(!0),whileInView:Dc(),whileHover:Dc(),whileTap:Dc(),whileDrag:Dc(),whileFocus:Dc(),exit:Dc()}}class nc{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Bre extends nc{constructor(e){super(e),e.animationState||(e.animationState=Fre(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();uw(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Ure=0;class Wre extends nc{constructor(){super(...arguments),this.id=Ure++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Hre={animation:{Feature:Bre},exit:{Feature:Wre}};function lg(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function gv(t){return{point:{x:t.pageX,y:t.pageY}}}const qre=t=>e=>mT(e)&&t(e,gv(e));function fm(t,e,n,r){return lg(t,e,qre(n),r)}const kI=(t,e)=>Math.abs(t-e);function Kre(t,e){const n=kI(t.x,e.x),r=kI(t.y,e.y);return Math.sqrt(n**2+r**2)}class $8{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=w_(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,p=Kre(f.offset,{x:0,y:0})>=3;if(!h&&!p)return;const{point:m}=f,{timestamp:g}=Gr;this.history.push({...m,timestamp:g});const{onStart:b,onMove:x}=this.handlers;h||(b&&b(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,f)},this.handlePointerMove=(f,h)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=x_(h,this.transformPagePoint),bn.update(this.updatePoint,!0)},this.handlePointerUp=(f,h)=>{this.end();const{onEnd:p,onSessionEnd:m,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=w_(f.type==="pointercancel"?this.lastMoveEventInfo:x_(h,this.transformPagePoint),this.history);this.startEvent&&p&&p(f,b),m&&m(f,b)},!mT(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const a=gv(e),o=x_(a,this.transformPagePoint),{point:c}=o,{timestamp:u}=Gr;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=n;d&&d(e,w_(o,this.history)),this.removeListeners=mv(fm(this.contextWindow,"pointermove",this.handlePointerMove),fm(this.contextWindow,"pointerup",this.handlePointerUp),fm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Do(this.updatePoint)}}function x_(t,e){return e?{point:e(t.point)}:t}function DI(t,e){return{x:t.x-e.x,y:t.y-e.y}}function w_({point:t},e){return{point:t,delta:DI(t,F8(e)),offset:DI(t,Gre(e)),velocity:Yre(e,.1)}}function Gre(t){return t[0]}function F8(t){return t[t.length-1]}function Yre(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=F8(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>wo(e)));)n--;if(!r)return{x:0,y:0};const s=_o(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const V8=1e-4,Qre=1-V8,Xre=1+V8,B8=.01,Zre=0-B8,Jre=0+B8;function cs(t){return t.max-t.min}function eie(t,e,n){return Math.abs(t-e)<=n}function II(t,e,n,r=.5){t.origin=r,t.originPoint=Pn(e.min,e.max,t.origin),t.scale=cs(n)/cs(e),t.translate=Pn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Qre&&t.scale<=Xre||isNaN(t.scale))&&(t.scale=1),(t.translate>=Zre&&t.translate<=Jre||isNaN(t.translate))&&(t.translate=0)}function hm(t,e,n,r){II(t.x,e.x,n.x,r?r.originX:void 0),II(t.y,e.y,n.y,r?r.originY:void 0)}function OI(t,e,n){t.min=n.min+e.min,t.max=t.min+cs(e)}function tie(t,e,n){OI(t.x,e.x,n.x),OI(t.y,e.y,n.y)}function MI(t,e,n){t.min=e.min-n.min,t.max=t.min+cs(e)}function pm(t,e,n){MI(t.x,e.x,n.x),MI(t.y,e.y,n.y)}function nie(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Pn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Pn(n,t,r.max):Math.min(t,n)),t}function RI(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function rie(t,{top:e,left:n,bottom:r,right:i}){return{x:RI(t.x,n,i),y:RI(t.y,e,r)}}function LI(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function iie(t,e){return{x:LI(t.x,e.x),y:LI(t.y,e.y)}}function sie(t,e){let n=.5;const r=cs(t),i=cs(e);return i>r?n=Wf(e.min,e.max-r,t.min):r>i&&(n=Wf(t.min,t.max-i,e.min)),Io(0,1,n)}function aie(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const sE=.35;function oie(t=sE){return t===!1?t=0:t===!0&&(t=sE),{x:zI(t,"left","right"),y:zI(t,"top","bottom")}}function zI(t,e,n){return{min:$I(t,e),max:$I(t,n)}}function $I(t,e){return typeof t=="number"?t:t[e]||0}const FI=()=>({translate:0,scale:1,origin:0,originPoint:0}),ef=()=>({x:FI(),y:FI()}),VI=()=>({min:0,max:0}),Qn=()=>({x:VI(),y:VI()});function Ss(t){return[t("x"),t("y")]}function U8({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function lie({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function cie(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function __(t){return t===void 0||t===1}function aE({scale:t,scaleX:e,scaleY:n}){return!__(t)||!__(e)||!__(n)}function $c(t){return aE(t)||W8(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function W8(t){return BI(t.x)||BI(t.y)}function BI(t){return t&&t!=="0%"}function ib(t,e,n){const r=t-n,i=e*r;return n+i}function UI(t,e,n,r,i){return i!==void 0&&(t=ib(t,i,r)),ib(t,n,r)+e}function oE(t,e=0,n=1,r,i){t.min=UI(t.min,e,n,r,i),t.max=UI(t.max,e,n,r,i)}function H8(t,{x:e,y:n}){oE(t.x,e.translate,e.scale,e.originPoint),oE(t.y,n.translate,n.scale,n.originPoint)}const WI=.999999999999,HI=1.0000000000001;function uie(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,a;for(let o=0;o<i;o++){s=n[o],a=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&nf(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,H8(t,a)),r&&$c(s.latestValues)&&nf(t,s.latestValues))}e.x<HI&&e.x>WI&&(e.x=1),e.y<HI&&e.y>WI&&(e.y=1)}function tf(t,e){t.min=t.min+e,t.max=t.max+e}function qI(t,e,n,r,i=.5){const s=Pn(t.min,t.max,i);oE(t,e,n,s,r)}function nf(t,e){qI(t.x,e.x,e.scaleX,e.scale,e.originX),qI(t.y,e.y,e.scaleY,e.scale,e.originY)}function q8(t,e){return U8(cie(t.getBoundingClientRect(),e))}function die(t,e,n){const r=q8(t,n),{scroll:i}=e;return i&&(tf(r.x,i.offset.x),tf(r.y,i.offset.y)),r}const K8=({current:t})=>t?t.ownerDocument.defaultView:null,fie=new WeakMap;class hie{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Qn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(gv(d).point)},s=(d,f)=>{const{drag:h,dragPropagation:p,onDragStart:m}=this.getProps();if(h&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=one(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ss(b=>{let x=this.getAxisMotionValue(b).get()||0;if(La.test(x)){const{projection:w}=this.visualElement;if(w&&w.layout){const _=w.layout.layoutBox[b];_&&(x=cs(_)*(parseFloat(x)/100))}}this.originPoint[b]=x}),m&&bn.postRender(()=>m(d,f)),XA(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},a=(d,f)=>{const{dragPropagation:h,dragDirectionLock:p,onDirectionLock:m,onDrag:g}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:b}=f;if(p&&this.currentDirection===null){this.currentDirection=pie(b),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",f.point,b),this.updateAxis("y",f.point,b),this.visualElement.render(),g&&g(d,f)},o=(d,f)=>this.stop(d,f),c=()=>Ss(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new $8(e,{onSessionStart:i,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:K8(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&bn.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!uy(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=nie(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Zd(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=rie(i.layoutBox,n):this.constraints=!1,this.elastic=oie(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ss(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=aie(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Zd(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=die(r,i.root,this.visualElement.getTransformPagePoint());let a=iie(i.layout.layoutBox,s);if(n){const o=n(lie(a));this.hasMutatedConstraints=!!o,o&&(a=U8(o))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},u=Ss(d=>{if(!uy(d,n,this.currentDirection))return;let f=c&&c[d]||{};a&&(f={min:0,max:0});const h=i?200:1e6,p=i?40:1e7,m={type:"inertia",velocity:r?e[d]:0,bounceStiffness:h,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(d,m)});return Promise.all(u).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return XA(this.visualElement,e),r.start(TT(e,r,0,n,this.visualElement,!1))}stopAnimation(){Ss(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ss(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ss(n=>{const{drag:r}=this.getProps();if(!uy(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[n];s.set(e[n]-Pn(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Zd(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ss(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const c=o.get();i[a]=sie({min:c,max:c},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ss(a=>{if(!uy(a,e,null))return;const o=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];o.set(Pn(c,u,i[a]))})}addListeners(){if(!this.visualElement.current)return;fie.set(this.visualElement,this);const e=this.visualElement.current,n=fm(e,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Zd(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),bn.read(r);const a=lg(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ss(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=c[d].translate,f.set(f.get()+c[d].translate))}),this.visualElement.render())});return()=>{a(),n(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=sE,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function uy(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function pie(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class mie extends nc{constructor(e){super(e),this.removeGroupControls=is,this.removeListeners=is,this.controls=new hie(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||is}unmount(){this.removeGroupControls(),this.removeListeners()}}const KI=t=>(e,n)=>{t&&bn.postRender(()=>t(e,n))};class gie extends nc{constructor(){super(...arguments),this.removePointerDownListener=is}onPointerDown(e){this.session=new $8(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:K8(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:KI(e),onStart:KI(n),onMove:r,onEnd:(s,a)=>{delete this.session,i&&bn.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=fm(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const i0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function GI(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ap={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ct.test(t))t=parseFloat(t);else return t;const n=GI(t,e.target.x),r=GI(t,e.target.y);return`${n}% ${r}%`}},vie={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Kl.parse(t);if(i.length>5)return r;const s=Kl.createTransformer(t),a=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,c=n.y.scale*e.y;i[0+a]/=o,i[1+a]/=c;const u=Pn(o,c,.5);return typeof i[2+a]=="number"&&(i[2+a]/=u),typeof i[3+a]=="number"&&(i[3+a]/=u),s(i)}};class yie extends P.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;Fte(bie),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),i0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,a=r.projection;return a&&(a.isPresent=s,i||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||bn.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),nT.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function G8(t){const[e,n]=PF(),r=P.useContext(QC);return l.jsx(yie,{...t,layoutGroup:r,switchLayoutGroup:P.useContext(RF),isPresent:e,safeToRemove:n})}const bie={borderRadius:{...Ap,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ap,borderTopRightRadius:Ap,borderBottomLeftRadius:Ap,borderBottomRightRadius:Ap,boxShadow:vie};function xie(t,e,n){const r=Xr(t)?t:qf(t);return r.start(TT("",r,e,n)),r.animation}function wie(t){return t instanceof SVGElement&&t.tagName!=="svg"}const _ie=(t,e)=>t.depth-e.depth;class Sie{constructor(){this.children=[],this.isDirty=!1}add(e){gT(this.children,e),this.isDirty=!0}remove(e){vT(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(_ie),this.isDirty=!1,this.children.forEach(e)}}function Aie(t,e){const n=za.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Do(r),t(s-e))};return bn.read(r,!0),()=>Do(r)}const Y8=["TopLeft","TopRight","BottomLeft","BottomRight"],Eie=Y8.length,YI=t=>typeof t=="string"?parseFloat(t):t,QI=t=>typeof t=="number"||ct.test(t);function jie(t,e,n,r,i,s){i?(t.opacity=Pn(0,n.opacity!==void 0?n.opacity:1,Cie(r)),t.opacityExit=Pn(e.opacity!==void 0?e.opacity:1,0,Tie(r))):s&&(t.opacity=Pn(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let a=0;a<Eie;a++){const o=`border${Y8[a]}Radius`;let c=XI(e,o),u=XI(n,o);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||QI(c)===QI(u)?(t[o]=Math.max(Pn(YI(c),YI(u),r),0),(La.test(u)||La.test(c))&&(t[o]+="%")):t[o]=u}(e.rotate||n.rotate)&&(t.rotate=Pn(e.rotate||0,n.rotate||0,r))}function XI(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Cie=Q8(0,.5,f8),Tie=Q8(.5,.95,is);function Q8(t,e,n){return r=>r<t?0:r>e?1:n(Wf(t,e,r))}function ZI(t,e){t.min=e.min,t.max=e.max}function bs(t,e){ZI(t.x,e.x),ZI(t.y,e.y)}function JI(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function eO(t,e,n,r,i){return t-=e,t=ib(t,1/n,r),i!==void 0&&(t=ib(t,1/i,r)),t}function Pie(t,e=0,n=1,r=.5,i,s=t,a=t){if(La.test(e)&&(e=parseFloat(e),e=Pn(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=Pn(s.min,s.max,r);t===s&&(o-=e),t.min=eO(t.min,e,n,o,i),t.max=eO(t.max,e,n,o,i)}function tO(t,e,[n,r,i],s,a){Pie(t,e[n],e[r],e[i],e.scale,s,a)}const Nie=["x","scaleX","originX"],kie=["y","scaleY","originY"];function nO(t,e,n,r){tO(t.x,e,Nie,n?n.x:void 0,r?r.x:void 0),tO(t.y,e,kie,n?n.y:void 0,r?r.y:void 0)}function rO(t){return t.translate===0&&t.scale===1}function X8(t){return rO(t.x)&&rO(t.y)}function iO(t,e){return t.min===e.min&&t.max===e.max}function Die(t,e){return iO(t.x,e.x)&&iO(t.y,e.y)}function sO(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Z8(t,e){return sO(t.x,e.x)&&sO(t.y,e.y)}function aO(t){return cs(t.x)/cs(t.y)}function oO(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Iie{constructor(){this.members=[]}add(e){gT(this.members,e),e.scheduleRender()}remove(e){if(vT(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Oie(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:f,rotateY:h,skewX:p,skewY:m}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),f&&(r+=`rotateX(${f}deg) `),h&&(r+=`rotateY(${h}deg) `),p&&(r+=`skewX(${p}deg) `),m&&(r+=`skewY(${m}deg) `)}const o=t.x.scale*e.x,c=t.y.scale*e.y;return(o!==1||c!==1)&&(r+=`scale(${o}, ${c})`),r||"none"}const Fc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Kp=typeof window<"u"&&window.MotionDebug!==void 0,S_=["","X","Y","Z"],Mie={visibility:"hidden"},lO=1e3;let Rie=0;function A_(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function J8(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=s8(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",bn,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&J8(r)}function eV({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},o=e==null?void 0:e()){this.id=Rie++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Kp&&(Fc.totalNodes=Fc.resolvedTargetDeltas=Fc.recalculatedProjection=0),this.nodes.forEach($ie),this.nodes.forEach(Wie),this.nodes.forEach(Hie),this.nodes.forEach(Fie),Kp&&window.MotionDebug.record(Fc)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Sie)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new yT),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const c=this.eventHandlers.get(a);c&&c.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=wie(a),this.instance=a;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||c)&&(this.isLayoutDirty=!0),t){let f;const h=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=Aie(h,250),i0.hasAnimatedSinceResize&&(i0.hasAnimatedSinceResize=!1,this.nodes.forEach(uO))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeTargetChanged:p,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||d.getDefaultTransition()||Qie,{onLayoutAnimationStart:b,onLayoutAnimationComplete:x}=d.getProps(),w=!this.targetLayout||!Z8(this.targetLayout,m)||p,_=!h&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||_||h&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,_);const E={...fT(g,"layout"),onPlay:b,onComplete:x};(d.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else h||uO(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Do(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(qie),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&J8(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(cO);return}this.isUpdating||this.nodes.forEach(Bie),this.isUpdating=!1,this.nodes.forEach(Uie),this.nodes.forEach(Lie),this.nodes.forEach(zie),this.clearAllSnapshots();const o=za.now();Gr.delta=Io(0,1e3/60,o-Gr.timestamp),Gr.timestamp=o,Gr.isProcessing=!0,p_.update.process(Gr),p_.preRender.process(Gr),p_.render.process(Gr),Gr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,nT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Vie),this.sharedNodes.forEach(Kie)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,bn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){bn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Qn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!X8(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;a&&(o||$c(this.latestValues)||d)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return a&&(c=this.removeTransform(c)),Xie(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return Qn();const c=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(Zie))){const{scroll:d}=this.root;d&&(tf(c.x,d.offset.x),tf(c.y,d.offset.y))}return c}removeElementScroll(a){var o;const c=Qn();if(bs(c,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return c;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:f,options:h}=d;d!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&bs(c,a),tf(c.x,f.offset.x),tf(c.y,f.offset.y))}return c}applyTransform(a,o=!1){const c=Qn();bs(c,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&nf(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),$c(d.latestValues)&&nf(c,d.latestValues)}return $c(this.latestValues)&&nf(c,this.latestValues),c}removeTransform(a){const o=Qn();bs(o,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!$c(u.latestValues))continue;aE(u.latestValues)&&u.updateSnapshot();const d=Qn(),f=u.measurePageBox();bs(d,f),nO(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return $c(this.latestValues)&&nO(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Gr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=Gr.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Qn(),this.relativeTargetOrigin=Qn(),pm(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),bs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Qn(),this.targetWithTransforms=Qn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),tie(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):bs(this.target,this.layout.layoutBox),H8(this.target,this.targetDelta)):bs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Qn(),this.relativeTargetOrigin=Qn(),pm(this.relativeTargetOrigin,this.target,p.target),bs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Kp&&Fc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||aE(this.parent.latestValues)||W8(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),c=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Gr.timestamp&&(u=!1),u)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;bs(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;uie(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Qn());const{target:m}=o;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(JI(this.prevProjectionDelta.x,this.projectionDelta.x),JI(this.prevProjectionDelta.y,this.projectionDelta.y)),hm(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==p||!oO(this.projectionDelta.x,this.prevProjectionDelta.x)||!oO(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m)),Kp&&Fc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ef(),this.projectionDelta=ef(),this.projectionDeltaWithTransform=ef()}setAnimationOrigin(a,o=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},f=ef();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=Qn(),p=c?c.source:void 0,m=this.layout?this.layout.source:void 0,g=p!==m,b=this.getStack(),x=!b||b.members.length<=1,w=!!(g&&!x&&this.options.crossfade===!0&&!this.path.some(Yie));this.animationProgress=0;let _;this.mixTargetDelta=E=>{const j=E/1e3;dO(f.x,a.x,j),dO(f.y,a.y,j),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(pm(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Gie(this.relativeTarget,this.relativeTargetOrigin,h,j),_&&Die(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=Qn()),bs(_,this.relativeTarget)),g&&(this.animationValues=d,jie(d,u,this.latestValues,j,w,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Do(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=bn.update(()=>{i0.hasAnimatedSinceResize=!0,this.currentAnimation=xie(0,lO,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(lO),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:c,layout:u,latestValues:d}=a;if(!(!o||!c||!u)){if(this!==a&&this.layout&&u&&tV(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Qn();const f=cs(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+f;const h=cs(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+h}bs(o,c),nf(o,d),hm(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Iie),this.sharedNodes.get(a).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const u={};c.z&&A_("z",a,u,this.animationValues);for(let d=0;d<S_.length;d++)A_(`rotate${S_[d]}`,a,u,this.animationValues),A_(`skew${S_[d]}`,a,u,this.animationValues);a.render();for(const d in u)a.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);a.scheduleRender()}getProjectionStyles(a){var o,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Mie;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=n0(a==null?void 0:a.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=n0(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!$c(this.latestValues)&&(g.transform=d?d({},""):"none",this.hasProjected=!1),g}const h=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=Oie(this.projectionDeltaWithTransform,this.treeScale,h),d&&(u.transform=d(h,u.transform));const{x:p,y:m}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${m.origin*100}% 0`,f.animationValues?u.opacity=f===this?(c=(o=h.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:u.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const g in J0){if(h[g]===void 0)continue;const{correct:b,applyTo:x}=J0[g],w=u.transform==="none"?h[g]:b(h[g],f);if(x){const _=x.length;for(let E=0;E<_;E++)u[x[E]]=w}else u[g]=w}return this.options.layoutId&&(u.pointerEvents=f===this?n0(a==null?void 0:a.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(cO),this.root.sharedNodes.clear()}}}function Lie(t){t.updateLayout()}function zie(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,a=n.source!==t.layout.source;s==="size"?Ss(f=>{const h=a?n.measuredBox[f]:n.layoutBox[f],p=cs(h);h.min=r[f].min,h.max=h.min+p}):tV(s,n.layoutBox,r)&&Ss(f=>{const h=a?n.measuredBox[f]:n.layoutBox[f],p=cs(r[f]);h.max=h.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+p)});const o=ef();hm(o,r,n.layoutBox);const c=ef();a?hm(c,t.applyTransform(i,!0),n.measuredBox):hm(c,r,n.layoutBox);const u=!X8(o);let d=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:p}=f;if(h&&p){const m=Qn();pm(m,n.layoutBox,h.layoutBox);const g=Qn();pm(g,r,p.layoutBox),Z8(m,g)||(d=!0),f.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=m,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function $ie(t){Kp&&Fc.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Fie(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Vie(t){t.clearSnapshot()}function cO(t){t.clearMeasurements()}function Bie(t){t.isLayoutDirty=!1}function Uie(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function uO(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Wie(t){t.resolveTargetDelta()}function Hie(t){t.calcProjection()}function qie(t){t.resetSkewAndRotation()}function Kie(t){t.removeLeadSnapshot()}function dO(t,e,n){t.translate=Pn(e.translate,0,n),t.scale=Pn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function fO(t,e,n,r){t.min=Pn(e.min,n.min,r),t.max=Pn(e.max,n.max,r)}function Gie(t,e,n,r){fO(t.x,e.x,n.x,r),fO(t.y,e.y,n.y,r)}function Yie(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Qie={duration:.45,ease:[.4,0,.1,1]},hO=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),pO=hO("applewebkit/")&&!hO("chrome/")?Math.round:is;function mO(t){t.min=pO(t.min),t.max=pO(t.max)}function Xie(t){mO(t.x),mO(t.y)}function tV(t,e,n){return t==="position"||t==="preserve-aspect"&&!eie(aO(e),aO(n),.2)}function Zie(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const Jie=eV({attachResizeListener:(t,e)=>lg(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),E_={current:void 0},nV=eV({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!E_.current){const t=new Jie({});t.mount(window),t.setOptions({layoutScroll:!0}),E_.current=t}return E_.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),ese={pan:{Feature:gie},drag:{Feature:mie,ProjectionNode:nV,MeasureLayout:G8}};function gO(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&bn.postRender(()=>s(e,gv(e)))}class tse extends nc{mount(){const{current:e}=this.node;e&&(this.unmount=nne(e,n=>(gO(this.node,n,"Start"),r=>gO(this.node,r,"End"))))}unmount(){}}class nse extends nc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=mv(lg(this.node.current,"focus",()=>this.onFocus()),lg(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function vO(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&bn.postRender(()=>s(e,gv(e)))}class rse extends nc{mount(){const{current:e}=this.node;e&&(this.unmount=ane(e,n=>(vO(this.node,n,"Start"),(r,{success:i})=>vO(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const lE=new WeakMap,j_=new WeakMap,ise=t=>{const e=lE.get(t.target);e&&e(t)},sse=t=>{t.forEach(ise)};function ase({root:t,...e}){const n=t||document;j_.has(n)||j_.set(n,{});const r=j_.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(sse,{root:t,...e})),r[i]}function ose(t,e,n){const r=ase(e);return lE.set(t,n),r.observe(t),()=>{lE.delete(t),r.unobserve(t)}}const lse={some:0,all:1};class cse extends nc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:lse[i]},o=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),h=u?d:f;h&&h(c)};return ose(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(use(e,n))&&this.startObserver()}unmount(){}}function use({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const dse={inView:{Feature:cse},tap:{Feature:rse},focus:{Feature:nse},hover:{Feature:tse}},fse={layout:{ProjectionNode:nV,MeasureLayout:G8}},cE={current:null},rV={current:!1};function hse(){if(rV.current=!0,!!XC)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>cE.current=t.matches;t.addListener(e),e()}else cE.current=!1}const pse=[...j8,ci,Kl],mse=t=>pse.find(E8(t)),yO=new WeakMap;function gse(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Xr(i))t.addValue(r,i);else if(Xr(s))t.addValue(r,qf(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=t.getStaticValue(r);t.addValue(r,qf(a!==void 0?a:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const bO=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class vse{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ET,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=za.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,bn.render(this.render,!1,!0))};const{latestValues:c,renderState:u,onUpdate:d}=a;this.onUpdate=d,this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=dw(n),this.isVariantNode=OF(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in h){const m=h[p];c[p]!==void 0&&Xr(m)&&m.set(c[p],!1)}}mount(e){this.current=e,yO.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),rV.current||hse(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:cE.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){yO.delete(this.current),this.projection&&this.projection.unmount(),Do(this.notifyUpdate),Do(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Qu.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&bn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Hf){const n=Hf[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Qn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<bO.length;r++){const i=bO[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=gse(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=qf(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(S8(i)||p8(i))?i=parseFloat(i):!mse(i)&&Kl.test(n)&&(i=x8(e,n)),this.setBaseTarget(e,Xr(i)?i.get():i)),Xr(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const a=iT(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(i=a[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Xr(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new yT),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class iV extends vse{constructor(){super(...arguments),this.KeyframeResolver=C8}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Xr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function yse(t){return window.getComputedStyle(t)}class bse extends iV{constructor(){super(...arguments),this.type="html",this.renderInstance=UF}readValueFromInstance(e,n){if(Qu.has(n)){const r=AT(n);return r&&r.default||0}else{const r=yse(e),i=(FF(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return q8(e,n)}build(e,n,r){oT(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return dT(e,n,r)}}class xse extends iV{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Qn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Qu.has(n)){const r=AT(n);return r&&r.default||0}return n=WF.has(n)?n:tT(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return KF(e,n,r)}build(e,n,r){lT(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){HF(e,n,r,i)}mount(e){this.isSVGTag=uT(e.tagName),super.mount(e)}}const wse=(t,e)=>rT(t)?new xse(e):new bse(e,{allowProjection:t!==P.Fragment}),_se=Yte({...Hre,...dse,...ese,...fse},wse),On=ute(_se);function sV(t){const e=Vo(()=>qf(t)),{isStatic:n}=P.useContext(ow);if(n){const[,r]=P.useState(t);P.useEffect(()=>e.on("change",r),[])}return e}function aV(t,e){const n=sV(e()),r=()=>n.set(e());return r(),lw(()=>{const i=()=>bn.preRender(r,!1,!0),s=t.map(a=>a.on("change",i));return()=>{s.forEach(a=>a()),Do(r)}}),n}const Sse=t=>t&&typeof t=="object"&&t.mix,Ase=t=>Sse(t)?t.mix:void 0;function Ese(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],i=t[1+n],s=t[2+n],a=t[3+n],o=O8(i,s,{mixer:Ase(s[0]),...a});return e?o(r):o}function jse(t){um.current=[],t();const e=aV(um.current,t);return um.current=void 0,e}function Cse(t,e,n,r){if(typeof t=="function")return jse(t);const i=typeof e=="function"?e:Ese(e,n,r);return Array.isArray(t)?xO(t,i):xO([t],([s])=>i(s))}function xO(t,e){const n=Vo(()=>[]);return aV(t,()=>{n.length=0;const r=t.length;for(let i=0;i<r;i++)n[i]=t[i].get();return e(n)})}function Tse(t){t.values.forEach(e=>e.stop())}function uE(t,e){[...e].reverse().forEach(r=>{const i=t.getVariant(r);i&&bT(t,i),t.variantChildren&&t.variantChildren.forEach(s=>{uE(s,e)})})}function Pse(t,e){if(Array.isArray(e))return uE(t,e);if(typeof e=="string")return uE(t,[e]);bT(t,e)}function Nse(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,r){const i=[];return t.forEach(s=>{i.push(L8(s,n,{transitionOverride:r}))}),Promise.all(i)},set(n){return t.forEach(r=>{Pse(r,n)})},stop(){t.forEach(n=>{Tse(n)})},mount(){return()=>{e.stop()}}};return e}function kse(){const t=Vo(Nse);return lw(t.mount,[]),t}const rc=kse;class Dse{constructor(){this.componentControls=new Set}subscribe(e){return this.componentControls.add(e),()=>this.componentControls.delete(e)}start(e,n){this.componentControls.forEach(r=>{r.start(e.nativeEvent||e,n)})}}const Ise=()=>new Dse;function PT(){return Vo(Ise)}const oV=P.createContext(null);function Ose(t,e,n,r){if(!r)return t;const i=t.findIndex(d=>d.value===e);if(i===-1)return t;const s=r>0?1:-1,a=t[i+s];if(!a)return t;const o=t[i],c=a.layout,u=Pn(c.min,c.max,.5);return s===1&&o.layout.max+n>u||s===-1&&o.layout.min+n<u?cne(t,i,i+s):t}function Mse({children:t,as:e="ul",axis:n="y",onReorder:r,values:i,...s},a){const o=Vo(()=>On[e]),c=[],u=P.useRef(!1),d={axis:n,registerItem:(f,h)=>{const p=c.findIndex(m=>f===m.value);p!==-1?c[p].layout=h[n]:c.push({value:f,layout:h[n]}),c.sort(Lse)},updateOrder:(f,h,p)=>{if(u.current)return;const m=Ose(c,f,h,p);c!==m&&(u.current=!0,r(m.map(Rse).filter(g=>i.indexOf(g)!==-1)))}};return P.useEffect(()=>{u.current=!1}),l.jsx(o,{...s,ref:a,ignoreStrict:!0,children:l.jsx(oV.Provider,{value:d,children:t})})}const NT=P.forwardRef(Mse);function Rse(t){return t.value}function Lse(t,e){return t.layout.min-e.layout.min}function wO(t,e=0){return Xr(t)?t:sV(e)}function zse({children:t,style:e={},value:n,as:r="li",onDrag:i,layout:s=!0,...a},o){const c=Vo(()=>On[r]),u=P.useContext(oV),d={x:wO(e.x),y:wO(e.y)},f=Cse([d.x,d.y],([g,b])=>g||b?1:"unset"),{axis:h,registerItem:p,updateOrder:m}=u;return l.jsx(c,{drag:h,...a,dragSnapToOrigin:!0,style:{...e,x:d.x,y:d.y,zIndex:f},layout:s,onDrag:(g,b)=>{const{velocity:x}=b;x[h]&&m(n,d[h].get(),x[h]),i&&i(g,b)},onLayoutMeasure:g=>p(n,g),ref:o,ignoreStrict:!0,children:t})}const kT=P.forwardRef(zse),Nu=({isOpen:t,onClose:e,title:n,actions:r})=>t?l.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex justify-center items-end sm:items-center z-50 animate-fade-in",onClick:e,children:l.jsxs("div",{className:"w-full max-w-sm bg-ios-modal-bg rounded-t-2xl sm:rounded-2xl shadow-2xl text-white animate-slide-up",onClick:i=>i.stopPropagation(),children:[l.jsx("div",{className:"p-2",children:l.jsx("header",{className:"text-center p-2 rounded-lg bg-zinc-800/50",children:l.jsx("h2",{className:"text-sm font-semibold text-brand-light-gray",children:n})})}),l.jsx("div",{className:"p-2",children:l.jsx("div",{className:"bg-zinc-800/50 rounded-lg",children:r.map((i,s)=>l.jsxs("button",{onClick:()=>{i.onClick(),e()},className:`w-full flex items-center p-3 text-left transition-colors hover:bg-white/10 ${i.color||"text-brand-blue"} ${s>0?"border-t border-zinc-700/80":""}`,children:[l.jsx(i.icon,{size:22,className:"mr-4"}),l.jsx("span",{className:"text-lg font-medium text-white",children:i.label})]},s))})}),l.jsxs("div",{className:"p-2 mt-1",children:[l.jsx("button",{onClick:e,className:"w-full bg-zinc-700 p-3 text-lg font-bold text-white rounded-xl hover:bg-zinc-600 transition-colors",children:"Cancelar"}),"S           "]})]})}):null,$se=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i})=>t?l.jsxs(nt,{isOpen:t,onClose:e,title:r,children:[" ",l.jsxs("div",{className:"space-y-6",children:[" ",l.jsx("p",{className:"text-zinc-300",children:i})," ",l.jsxs("div",{className:"flex justify-end gap-4",children:[l.jsx("button",{onClick:e,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-6 rounded-lg",children:"Cancelar"}),l.jsx("button",{onClick:()=>{n(),e()},className:"bg-brand-red hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg",children:"Confirmar"})]})," "]})," "]}):null,Fse=({lotName:t,count:e,subLotsCount:n,dragControls:r,isSubLot:i})=>l.jsxs("div",{className:"w-full p-4 flex items-center",children:[!i&&l.jsx("div",{className:"pl-2 pr-4 cursor-grab touch-none self-stretch flex items-center",onPointerDown:s=>r.start(s),children:l.jsx(HC,{className:"text-zinc-500"})}),i&&l.jsx("div",{className:"w-4 flex-shrink-0"}),l.jsxs("div",{className:"flex-grow",children:[l.jsxs("p",{className:"font-bold text-lg text-white flex items-center gap-2",children:[t,n>0&&l.jsx("span",{title:`${n} sub-lotes`,className:"bg-zinc-700/80 p-1 rounded-full",children:l.jsx(mF,{size:12,className:"text-zinc-400"})})]}),l.jsxs("p",{className:"text-sm text-zinc-400",children:[l.jsx("span",{className:"font-semibold text-brand-orange",children:e})," ",e===1?"animal":"animales",n>0?" (directos)":""]})]})]}),_O=({lot:t,onEdit:e,onDelete:n,onClick:r,dragControls:i,isSubLot:s=!1})=>{var h,p;const a=rc(),o=P.useRef(!1),c=t.count>0||(((h=t.subLots)==null?void 0:h.length)||0)>0,u=t.name!=="Sin Asignar",f={drag:"x",dragConstraints:{left:-((c?80:0)+(u?80:0)),right:0},dragElastic:.1,onPanStart:()=>{o.current=!0},onPanEnd:()=>{setTimeout(()=>{o.current=!1},50)},onTap:()=>{o.current||r()},animate:a,transition:{type:"spring",stiffness:400,damping:40}};return l.jsxs("div",{className:`relative w-full overflow-hidden ${s?"rounded-lg":"rounded-2xl"} bg-brand-glass border border-brand-border`,children:[l.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:[c&&l.jsxs("button",{onClick:e,onPointerDown:m=>m.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-orange text-white",children:[l.jsx(tc,{size:22}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Editar"})]}),u&&l.jsxs("button",{onClick:n,onPointerDown:m=>m.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-red text-white",children:[l.jsx(ha,{size:22}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Borrar"})]})]}),l.jsx(On.div,{...f,dragListener:!s&&i?!1:void 0,className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg",children:l.jsx(Fse,{lotName:t.name,count:t.count,subLotsCount:((p=t.subLots)==null?void 0:p.length)||0,dragControls:i,isSubLot:s})})]})},Vse=({lot:t,navigateTo:e,onEdit:n,onDelete:r})=>{const i=PT();return l.jsxs(kT,{value:t,dragListener:!1,dragControls:i,className:"space-y-1",children:[l.jsx(_O,{lot:t,dragControls:i,onClick:()=>e({name:"lot-detail",lotName:t.name}),onEdit:()=>n(t),onDelete:()=>r(t),isSubLot:!1}),t.subLots&&t.subLots.length>0&&l.jsx("div",{className:"pl-6 space-y-1",children:t.subLots.map(s=>l.jsx(_O,{lot:s,onClick:()=>e({name:"lot-detail",lotName:s.name}),onEdit:()=>n(s),onDelete:()=>r(s),isSubLot:!0},s.id))})]},t.id)};function Bse({navigateTo:t}){const{animals:e,lots:n,deleteLot:r}=Ze(),[i,s]=P.useState(!1),[a,o]=P.useState(null),[c,u]=P.useState(null),d=P.useMemo(()=>{const g=new Map;n.forEach(E=>g.set(E.name,0)),(e||[]).forEach(E=>{const j=E.location||"Sin Asignar";g.set(j,(g.get(j)||0)+1)});const b=n.map(E=>({id:E.id,name:E.name,count:g.get(E.name)||0,parentLotId:E.parentLotId})),x=new Map;b.forEach(E=>{E.parentLotId&&(x.has(E.parentLotId)||x.set(E.parentLotId,[]),x.get(E.parentLotId).push(E))});const w=b.filter(E=>!E.parentLotId).map(E=>({...E,subLots:x.get(E.id)||[]})),_=g.get("Sin Asignar")||0;return(_>0||w.length===0&&_>0)&&w.push({id:"unassigned",name:"Sin Asignar",count:_,parentLotId:void 0,subLots:[]}),w.sort((E,j)=>E.name.localeCompare(j.name))},[e,n]),[f,h]=P.useState(d);P.useEffect(()=>{h(d)},[d]);const p=[{label:"Mover Animales",icon:KC,onClick:()=>t({name:"lot-detail",lotName:(a==null?void 0:a.name)||""})}],m=()=>{c&&(r(c.id),u(null))};return f.length===0?l.jsxs("div",{className:"text-center py-10 bg-brand-glass rounded-2xl flex flex-col items-center gap-2",children:[l.jsx(CF,{size:32,className:"text-zinc-600"}),l.jsx("p",{className:"text-zinc-500 font-semibold",children:"No hay lotes físicos creados."}),l.jsx("p",{className:"text-xs text-zinc-600",children:"Usa el botón '+' para empezar a organizar tu rebaño."})]}):l.jsxs(l.Fragment,{children:[l.jsx(NT,{as:"div",axis:"y",values:f,onReorder:h,className:"space-y-3",children:f.map(g=>l.jsx(Vse,{lot:g,navigateTo:t,onEdit:b=>{o(b),s(!0)},onDelete:b=>u(b)},g.id))}),l.jsx(Nu,{isOpen:i,onClose:()=>s(!1),title:`Acciones para "${a==null?void 0:a.name}"`,actions:p}),l.jsx($se,{isOpen:!!c,onClose:()=>u(null),onConfirm:m,title:"Eliminar Lote",message:`¿Estás seguro de que quieres eliminar el lote "${c==null?void 0:c.name}"? Esta acción no se puede deshacer.`})]})}const Use=({onSave:t,onCancel:e,existingSeason:n})=>{const[r,i]=P.useState(""),[s,a]=P.useState(""),[o,c]=P.useState("45"),[u,d]=P.useState(!1),[f,h]=P.useState(null),[p,m]=P.useState(!1);P.useEffect(()=>{if(n){i(n.name),a(n.startDate);const b=new Date(n.startDate),x=new Date(n.endDate),w=Math.abs(x.getTime()-b.getTime()),_=Math.ceil(w/(1e3*60*60*24));c(String(_)),d(n.requiresLightTreatment)}else a(new Date().toISOString().split("T")[0])},[n]);const g=async b=>{if(b.preventDefault(),h(null),!r.trim()||!s||!o){h("Todos los campos son obligatorios.");return}m(!0);const x=new Date(s),w=new Date(x);w.setDate(x.getDate()+parseInt(o,10));const _={name:r,startDate:s,endDate:w.toISOString().split("T")[0],requiresLightTreatment:u};try{await t(_)}catch(E){h("No se pudo guardar la temporada de monta."),console.error(E),m(!1)}};return l.jsxs("form",{onSubmit:g,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Nombre de la Temporada"}),l.jsx("input",{id:"name",type:"text",value:r,onChange:b=>i(b.target.value),placeholder:"Ej: Monta de Otoño 2025",className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Inicio"}),l.jsx("input",{id:"startDate",type:"date",value:s,onChange:b=>a(b.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"duration",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Duración (días)"}),l.jsx("input",{id:"duration",type:"number",value:o,onChange:b=>c(b.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]})]}),l.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-zinc-700 flex items-center justify-between",children:[l.jsx("label",{htmlFor:"lightTreatment",className:"text-sm font-medium text-zinc-300",children:"¿Requiere Tratamiento de Luz?"}),l.jsx("input",{id:"lightTreatment",type:"checkbox",checked:u,onChange:b=>d(b.target.checked),className:"form-checkbox h-5 w-5 bg-zinc-700 border-zinc-600 rounded text-brand-orange focus:ring-brand-orange focus:ring-offset-0"})]}),f&&l.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[l.jsx(Vt,{size:18}),l.jsx("span",{children:f})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:p,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:p?"Guardando...":"Guardar Temporada"})]})]})},Wse=({season:t,dragControls:e})=>l.jsxs("div",{className:"w-full p-4 flex items-center",children:[l.jsx("div",{className:"pl-2 pr-4 cursor-grab touch-none self-stretch flex items-center",onPointerDown:n=>e.start(n),children:l.jsx(HC,{className:"text-zinc-500"})}),l.jsxs("div",{className:"flex-grow",children:[l.jsxs("p",{className:"font-bold text-lg text-white flex items-center gap-2",children:[t.name,t.requiresLightTreatment&&l.jsx("span",{title:"Requiere Tratamiento de Luz",children:l.jsx(Nee,{size:16,className:"text-yellow-400"})})]}),l.jsxs("p",{className:"text-sm text-zinc-400",children:[new Date(t.startDate+"T00:00:00").toLocaleDateString()," - ",new Date(t.endDate+"T00:00:00").toLocaleDateString()]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${t.status==="Activo"?"bg-green-500/80 text-white":"bg-zinc-600 text-zinc-300"}`,children:t.status}),l.jsx(tr,{className:"text-zinc-600"})]})]}),Hse=({season:t,onEdit:e,onClick:n,dragControls:r})=>{const i=rc(),s=P.useRef(!1);return l.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-brand-glass border border-brand-border",children:[l.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:l.jsxs("button",{onClick:e,onPointerDown:a=>a.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[l.jsx(tc,{size:22}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Editar"})]})}),l.jsx(On.div,{drag:"x",dragConstraints:{left:-80,right:0},dragElastic:.1,onPanStart:()=>{s.current=!0},onPanEnd:()=>{setTimeout(()=>{s.current=!1},50)},onTap:()=>{s.current||n()},animate:i,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg",children:l.jsx(Wse,{season:t,dragControls:r})})]})},qse=({season:t,navigateTo:e,onEdit:n})=>{const r=PT();return l.jsx(kT,{value:t,dragListener:!1,dragControls:r,children:l.jsx(Hse,{season:t,dragControls:r,onClick:()=>e({name:"breeding-season-detail",seasonId:t.id}),onEdit:()=>n(t)})},t.id)};function Kse({navigateTo:t}){const{breedingSeasons:e,addBreedingSeason:n,updateBreedingSeason:r}=Ze(),[i,s]=P.useState(!1),[a,o]=P.useState(void 0),c=P.useMemo(()=>[...e].sort((p,m)=>p.status==="Activo"&&m.status!=="Activo"?-1:p.status!=="Activo"&&m.status==="Activo"?1:new Date(m.startDate).getTime()-new Date(p.startDate).getTime()),[e]),[u,d]=P.useState(c);P.useEffect(()=>{d(c)},[c]);const f=p=>{o(p),s(!0)},h=async p=>{a?await r(a.id,{...p}):await n({...p,status:"Activo"}),s(!1),o(void 0)};return u.length===0?l.jsxs("div",{className:"text-center py-10 bg-brand-glass rounded-2xl flex flex-col items-center gap-2",children:[l.jsx(sw,{size:32,className:"text-zinc-600"}),l.jsx("p",{className:"text-zinc-500 font-semibold",children:"No hay temporadas de monta creadas."}),l.jsx("p",{className:"text-xs text-zinc-600",children:"Usa el botón de abajo para empezar a planificar."})]}):l.jsxs(l.Fragment,{children:[l.jsx(NT,{as:"div",axis:"y",values:u,onReorder:d,className:"space-y-3",children:u.map(p=>l.jsx(qse,{season:p,navigateTo:t,onEdit:f},p.id))}),l.jsx("div",{className:"px-4 mt-4",children:l.jsxs("button",{onClick:()=>f(),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[l.jsx(Er,{size:20})," Crear Nueva Temporada"]})}),l.jsx(nt,{isOpen:i,onClose:()=>{s(!1),o(void 0)},title:a?"Editar Temporada de Monta":"Crear Temporada de Monta",children:l.jsx(Use,{onSave:h,onCancel:()=>{s(!1),o(void 0)},existingSeason:a})})]})}function lV(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=lV(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function St(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=lV(t))&&(r&&(r+=" "),r+=e);return r}var Gse=Array.isArray,Wi=Gse,Yse=typeof $d=="object"&&$d&&$d.Object===Object&&$d,cV=Yse,Qse=cV,Xse=typeof self=="object"&&self&&self.Object===Object&&self,Zse=Qse||Xse||Function("return this")(),Ga=Zse,Jse=Ga,eae=Jse.Symbol,vv=eae,SO=vv,uV=Object.prototype,tae=uV.hasOwnProperty,nae=uV.toString,Ep=SO?SO.toStringTag:void 0;function rae(t){var e=tae.call(t,Ep),n=t[Ep];try{t[Ep]=void 0;var r=!0}catch{}var i=nae.call(t);return r&&(e?t[Ep]=n:delete t[Ep]),i}var iae=rae,sae=Object.prototype,aae=sae.toString;function oae(t){return aae.call(t)}var lae=oae,AO=vv,cae=iae,uae=lae,dae="[object Null]",fae="[object Undefined]",EO=AO?AO.toStringTag:void 0;function hae(t){return t==null?t===void 0?fae:dae:EO&&EO in Object(t)?cae(t):uae(t)}var Bo=hae;function pae(t){return t!=null&&typeof t=="object"}var Uo=pae,mae=Bo,gae=Uo,vae="[object Symbol]";function yae(t){return typeof t=="symbol"||gae(t)&&mae(t)==vae}var Rh=yae,bae=Wi,xae=Rh,wae=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_ae=/^\w*$/;function Sae(t,e){if(bae(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||xae(t)?!0:_ae.test(t)||!wae.test(t)||e!=null&&t in Object(e)}var DT=Sae;function Aae(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var ic=Aae;const Lh=Qt(ic);var Eae=Bo,jae=ic,Cae="[object AsyncFunction]",Tae="[object Function]",Pae="[object GeneratorFunction]",Nae="[object Proxy]";function kae(t){if(!jae(t))return!1;var e=Eae(t);return e==Tae||e==Pae||e==Cae||e==Nae}var IT=kae;const ut=Qt(IT);var Dae=Ga,Iae=Dae["__core-js_shared__"],Oae=Iae,C_=Oae,jO=function(){var t=/[^.]+$/.exec(C_&&C_.keys&&C_.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Mae(t){return!!jO&&jO in t}var Rae=Mae,Lae=Function.prototype,zae=Lae.toString;function $ae(t){if(t!=null){try{return zae.call(t)}catch{}try{return t+""}catch{}}return""}var dV=$ae,Fae=IT,Vae=Rae,Bae=ic,Uae=dV,Wae=/[\\^$.*+?()[\]{}|]/g,Hae=/^\[object .+?Constructor\]$/,qae=Function.prototype,Kae=Object.prototype,Gae=qae.toString,Yae=Kae.hasOwnProperty,Qae=RegExp("^"+Gae.call(Yae).replace(Wae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Xae(t){if(!Bae(t)||Vae(t))return!1;var e=Fae(t)?Qae:Hae;return e.test(Uae(t))}var Zae=Xae;function Jae(t,e){return t==null?void 0:t[e]}var eoe=Jae,toe=Zae,noe=eoe;function roe(t,e){var n=noe(t,e);return toe(n)?n:void 0}var Xu=roe,ioe=Xu,soe=ioe(Object,"create"),pw=soe,CO=pw;function aoe(){this.__data__=CO?CO(null):{},this.size=0}var ooe=aoe;function loe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var coe=loe,uoe=pw,doe="__lodash_hash_undefined__",foe=Object.prototype,hoe=foe.hasOwnProperty;function poe(t){var e=this.__data__;if(uoe){var n=e[t];return n===doe?void 0:n}return hoe.call(e,t)?e[t]:void 0}var moe=poe,goe=pw,voe=Object.prototype,yoe=voe.hasOwnProperty;function boe(t){var e=this.__data__;return goe?e[t]!==void 0:yoe.call(e,t)}var xoe=boe,woe=pw,_oe="__lodash_hash_undefined__";function Soe(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=woe&&e===void 0?_oe:e,this}var Aoe=Soe,Eoe=ooe,joe=coe,Coe=moe,Toe=xoe,Poe=Aoe;function zh(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}zh.prototype.clear=Eoe;zh.prototype.delete=joe;zh.prototype.get=Coe;zh.prototype.has=Toe;zh.prototype.set=Poe;var Noe=zh;function koe(){this.__data__=[],this.size=0}var Doe=koe;function Ioe(t,e){return t===e||t!==t&&e!==e}var OT=Ioe,Ooe=OT;function Moe(t,e){for(var n=t.length;n--;)if(Ooe(t[n][0],e))return n;return-1}var mw=Moe,Roe=mw,Loe=Array.prototype,zoe=Loe.splice;function $oe(t){var e=this.__data__,n=Roe(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():zoe.call(e,n,1),--this.size,!0}var Foe=$oe,Voe=mw;function Boe(t){var e=this.__data__,n=Voe(e,t);return n<0?void 0:e[n][1]}var Uoe=Boe,Woe=mw;function Hoe(t){return Woe(this.__data__,t)>-1}var qoe=Hoe,Koe=mw;function Goe(t,e){var n=this.__data__,r=Koe(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var Yoe=Goe,Qoe=Doe,Xoe=Foe,Zoe=Uoe,Joe=qoe,ele=Yoe;function $h(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}$h.prototype.clear=Qoe;$h.prototype.delete=Xoe;$h.prototype.get=Zoe;$h.prototype.has=Joe;$h.prototype.set=ele;var gw=$h,tle=Xu,nle=Ga,rle=tle(nle,"Map"),MT=rle,TO=Noe,ile=gw,sle=MT;function ale(){this.size=0,this.__data__={hash:new TO,map:new(sle||ile),string:new TO}}var ole=ale;function lle(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var cle=lle,ule=cle;function dle(t,e){var n=t.__data__;return ule(e)?n[typeof e=="string"?"string":"hash"]:n.map}var vw=dle,fle=vw;function hle(t){var e=fle(this,t).delete(t);return this.size-=e?1:0,e}var ple=hle,mle=vw;function gle(t){return mle(this,t).get(t)}var vle=gle,yle=vw;function ble(t){return yle(this,t).has(t)}var xle=ble,wle=vw;function _le(t,e){var n=wle(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var Sle=_le,Ale=ole,Ele=ple,jle=vle,Cle=xle,Tle=Sle;function Fh(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Fh.prototype.clear=Ale;Fh.prototype.delete=Ele;Fh.prototype.get=jle;Fh.prototype.has=Cle;Fh.prototype.set=Tle;var RT=Fh,fV=RT,Ple="Expected a function";function LT(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Ple);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=t.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(LT.Cache||fV),n}LT.Cache=fV;var hV=LT;const Nle=Qt(hV);var kle=hV,Dle=500;function Ile(t){var e=kle(t,function(r){return n.size===Dle&&n.clear(),r}),n=e.cache;return e}var Ole=Ile,Mle=Ole,Rle=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Lle=/\\(\\)?/g,zle=Mle(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Rle,function(n,r,i,s){e.push(i?s.replace(Lle,"$1"):r||n)}),e}),$le=zle;function Fle(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var zT=Fle,PO=vv,Vle=zT,Ble=Wi,Ule=Rh,NO=PO?PO.prototype:void 0,kO=NO?NO.toString:void 0;function pV(t){if(typeof t=="string")return t;if(Ble(t))return Vle(t,pV)+"";if(Ule(t))return kO?kO.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var Wle=pV,Hle=Wle;function qle(t){return t==null?"":Hle(t)}var mV=qle,Kle=Wi,Gle=DT,Yle=$le,Qle=mV;function Xle(t,e){return Kle(t)?t:Gle(t,e)?[t]:Yle(Qle(t))}var gV=Xle,Zle=Rh;function Jle(t){if(typeof t=="string"||Zle(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var yw=Jle,ece=gV,tce=yw;function nce(t,e){e=ece(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[tce(e[n++])];return n&&n==r?t:void 0}var $T=nce,rce=$T;function ice(t,e,n){var r=t==null?void 0:rce(t,e);return r===void 0?n:r}var vV=ice;const ss=Qt(vV);function sce(t){return t==null}var ace=sce;const gt=Qt(ace);var oce=Bo,lce=Wi,cce=Uo,uce="[object String]";function dce(t){return typeof t=="string"||!lce(t)&&cce(t)&&oce(t)==uce}var fce=dce;const ku=Qt(fce);var yV={exports:{}},sn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FT=Symbol.for("react.element"),VT=Symbol.for("react.portal"),bw=Symbol.for("react.fragment"),xw=Symbol.for("react.strict_mode"),ww=Symbol.for("react.profiler"),_w=Symbol.for("react.provider"),Sw=Symbol.for("react.context"),hce=Symbol.for("react.server_context"),Aw=Symbol.for("react.forward_ref"),Ew=Symbol.for("react.suspense"),jw=Symbol.for("react.suspense_list"),Cw=Symbol.for("react.memo"),Tw=Symbol.for("react.lazy"),pce=Symbol.for("react.offscreen"),bV;bV=Symbol.for("react.module.reference");function Ms(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case FT:switch(t=t.type,t){case bw:case ww:case xw:case Ew:case jw:return t;default:switch(t=t&&t.$$typeof,t){case hce:case Sw:case Aw:case Tw:case Cw:case _w:return t;default:return e}}case VT:return e}}}sn.ContextConsumer=Sw;sn.ContextProvider=_w;sn.Element=FT;sn.ForwardRef=Aw;sn.Fragment=bw;sn.Lazy=Tw;sn.Memo=Cw;sn.Portal=VT;sn.Profiler=ww;sn.StrictMode=xw;sn.Suspense=Ew;sn.SuspenseList=jw;sn.isAsyncMode=function(){return!1};sn.isConcurrentMode=function(){return!1};sn.isContextConsumer=function(t){return Ms(t)===Sw};sn.isContextProvider=function(t){return Ms(t)===_w};sn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===FT};sn.isForwardRef=function(t){return Ms(t)===Aw};sn.isFragment=function(t){return Ms(t)===bw};sn.isLazy=function(t){return Ms(t)===Tw};sn.isMemo=function(t){return Ms(t)===Cw};sn.isPortal=function(t){return Ms(t)===VT};sn.isProfiler=function(t){return Ms(t)===ww};sn.isStrictMode=function(t){return Ms(t)===xw};sn.isSuspense=function(t){return Ms(t)===Ew};sn.isSuspenseList=function(t){return Ms(t)===jw};sn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===bw||t===ww||t===xw||t===Ew||t===jw||t===pce||typeof t=="object"&&t!==null&&(t.$$typeof===Tw||t.$$typeof===Cw||t.$$typeof===_w||t.$$typeof===Sw||t.$$typeof===Aw||t.$$typeof===bV||t.getModuleId!==void 0)};sn.typeOf=Ms;yV.exports=sn;var mce=yV.exports,gce=Bo,vce=Uo,yce="[object Number]";function bce(t){return typeof t=="number"||vce(t)&&gce(t)==yce}var xV=bce;const xce=Qt(xV);var wce=xV;function _ce(t){return wce(t)&&t!=+t}var Sce=_ce;const Vh=Qt(Sce);var wi=function(e){return e===0?0:e>0?1:-1},nu=function(e){return ku(e)&&e.indexOf("%")===e.length-1},Ce=function(e){return xce(e)&&!Vh(e)},Ace=function(e){return gt(e)},Ar=function(e){return Ce(e)||ku(e)},Ece=0,Zu=function(e){var n=++Ece;return"".concat(e||"").concat(n)},_i=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ce(e)&&!ku(e))return r;var s;if(nu(e)){var a=e.indexOf("%");s=n*parseFloat(e.slice(0,a))/100}else s=+e;return Vh(s)&&(s=r),i&&s>n&&(s=n),s},vl=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},jce=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},_r=function(e,n){return Ce(e)&&Ce(n)?function(r){return e+r*(n-e)}:function(){return n}};function sb(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):ss(r,e))===n})}var Cce=function(e,n){return Ce(e)&&Ce(n)?e-n:ku(e)&&ku(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function bf(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function dE(t){"@babel/helpers - typeof";return dE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dE(t)}var Tce=["viewBox","children"],Pce=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],DO=["points","pathLength"],T_={svg:Tce,polygon:DO,polyline:DO},BT=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],ab=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(P.isValidElement(e)&&(r=e.props),!Lh(r))return null;var i={};return Object.keys(r).forEach(function(s){BT.includes(s)&&(i[s]=n||function(a){return r[s](r,a)})}),i},Nce=function(e,n,r){return function(i){return e(n,r,i),null}},Du=function(e,n,r){if(!Lh(e)||dE(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(s){var a=e[s];BT.includes(s)&&typeof a=="function"&&(i||(i={}),i[s]=Nce(a,n,r))}),i},kce=["children"],Dce=["children"];function IO(t,e){if(t==null)return{};var n=Ice(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ice(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function fE(t){"@babel/helpers - typeof";return fE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fE(t)}var OO={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},So=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},MO=null,P_=null,UT=function t(e){if(e===MO&&Array.isArray(P_))return P_;var n=[];return P.Children.forEach(e,function(r){gt(r)||(mce.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),P_=n,MO=e,n};function as(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return So(i)}):r=[So(e)],UT(t).forEach(function(i){var s=ss(i,"type.displayName")||ss(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}function Xi(t,e){var n=as(t,e);return n&&n[0]}var RO=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!Ce(r)||r<=0||!Ce(i)||i<=0)},Oce=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Mce=function(e){return e&&e.type&&ku(e.type)&&Oce.indexOf(e.type)>=0},wV=function(e){return e&&fE(e)==="object"&&"clipDot"in e},Rce=function(e,n,r,i){var s,a=(s=T_==null?void 0:T_[i])!==null&&s!==void 0?s:[];return n.startsWith("data-")||!ut(e)&&(i&&a.includes(n)||Pce.includes(n))||r&&BT.includes(n)},et=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(P.isValidElement(e)&&(i=e.props),!Lh(i))return null;var s={};return Object.keys(i).forEach(function(a){var o;Rce((o=i)===null||o===void 0?void 0:o[a],a,n,r)&&(s[a]=i[a])}),s},hE=function t(e,n){if(e===n)return!0;var r=P.Children.count(e);if(r!==P.Children.count(n))return!1;if(r===0)return!0;if(r===1)return LO(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var s=e[i],a=n[i];if(Array.isArray(s)||Array.isArray(a)){if(!t(s,a))return!1}else if(!LO(s,a))return!1}return!0},LO=function(e,n){if(gt(e)&&gt(n))return!0;if(!gt(e)&&!gt(n)){var r=e.props||{},i=r.children,s=IO(r,kce),a=n.props||{},o=a.children,c=IO(a,Dce);return i&&o?bf(s,c)&&hE(i,o):!i&&!o?bf(s,c):!1}return!1},zO=function(e,n){var r=[],i={};return UT(e).forEach(function(s,a){if(Mce(s))r.push(s);else if(s){var o=So(s.type),c=n[o]||{},u=c.handler,d=c.once;if(u&&(!d||!i[o])){var f=u(s,o,a);r.push(f),i[o]=!0}}}),r},Lce=function(e){var n=e&&e.type;return n&&OO[n]?OO[n]:null},zce=function(e,n){return UT(n).indexOf(e)},$ce=["children","width","height","viewBox","className","style","title","desc"];function pE(){return pE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pE.apply(this,arguments)}function Fce(t,e){if(t==null)return{};var n=Vce(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Vce(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function mE(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,s=t.className,a=t.style,o=t.title,c=t.desc,u=Fce(t,$ce),d=i||{width:n,height:r,x:0,y:0},f=St("recharts-surface",s);return Y.createElement("svg",pE({},et(u,!0,"svg"),{className:f,width:n,height:r,style:a,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),Y.createElement("title",null,o),Y.createElement("desc",null,c),e)}var Bce=["children","className"];function gE(){return gE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gE.apply(this,arguments)}function Uce(t,e){if(t==null)return{};var n=Wce(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Wce(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Tt=Y.forwardRef(function(t,e){var n=t.children,r=t.className,i=Uce(t,Bce),s=St("recharts-layer",r);return Y.createElement("g",gE({className:s},et(i,!0),{ref:e}),n)}),ta=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]};function Hce(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=t[r+e];return s}var qce=Hce,Kce=qce;function Gce(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:Kce(t,e,n)}var Yce=Gce,Qce="\\ud800-\\udfff",Xce="\\u0300-\\u036f",Zce="\\ufe20-\\ufe2f",Jce="\\u20d0-\\u20ff",eue=Xce+Zce+Jce,tue="\\ufe0e\\ufe0f",nue="\\u200d",rue=RegExp("["+nue+Qce+eue+tue+"]");function iue(t){return rue.test(t)}var _V=iue;function sue(t){return t.split("")}var aue=sue,SV="\\ud800-\\udfff",oue="\\u0300-\\u036f",lue="\\ufe20-\\ufe2f",cue="\\u20d0-\\u20ff",uue=oue+lue+cue,due="\\ufe0e\\ufe0f",fue="["+SV+"]",vE="["+uue+"]",yE="\\ud83c[\\udffb-\\udfff]",hue="(?:"+vE+"|"+yE+")",AV="[^"+SV+"]",EV="(?:\\ud83c[\\udde6-\\uddff]){2}",jV="[\\ud800-\\udbff][\\udc00-\\udfff]",pue="\\u200d",CV=hue+"?",TV="["+due+"]?",mue="(?:"+pue+"(?:"+[AV,EV,jV].join("|")+")"+TV+CV+")*",gue=TV+CV+mue,vue="(?:"+[AV+vE+"?",vE,EV,jV,fue].join("|")+")",yue=RegExp(yE+"(?="+yE+")|"+vue+gue,"g");function bue(t){return t.match(yue)||[]}var xue=bue,wue=aue,_ue=_V,Sue=xue;function Aue(t){return _ue(t)?Sue(t):wue(t)}var Eue=Aue,jue=Yce,Cue=_V,Tue=Eue,Pue=mV;function Nue(t){return function(e){e=Pue(e);var n=Cue(e)?Tue(e):void 0,r=n?n[0]:e.charAt(0),i=n?jue(n,1).join(""):e.slice(1);return r[t]()+i}}var kue=Nue,Due=kue,Iue=Due("toUpperCase"),Oue=Iue;const Pw=Qt(Oue);function gn(t){return function(){return t}}const PV=Math.cos,ob=Math.sin,pa=Math.sqrt,lb=Math.PI,Nw=2*lb,bE=Math.PI,xE=2*bE,Vc=1e-6,Mue=xE-Vc;function NV(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Rue(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return NV;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Lue{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?NV:Rue(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,c=r-e,u=i-n,d=a-e,f=o-n,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>Vc)if(!(Math.abs(f*c-u*d)>Vc)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let p=r-a,m=i-o,g=c*c+u*u,b=p*p+m*m,x=Math.sqrt(g),w=Math.sqrt(h),_=s*Math.tan((bE-Math.acos((g+h-b)/(2*x*w)))/2),E=_/w,j=_/x;Math.abs(E-1)>Vc&&this._append`L${e+E*d},${n+E*f}`,this._append`A${s},${s},0,0,${+(f*p>d*m)},${this._x1=e+j*c},${this._y1=n+j*u}`}}arc(e,n,r,i,s,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),c=r*Math.sin(i),u=e+o,d=n+c,f=1^a,h=a?i-s:s-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Vc||Math.abs(this._y1-d)>Vc)&&this._append`L${u},${d}`,r&&(h<0&&(h=h%xE+xE),h>Mue?this._append`A${r},${r},0,1,${f},${e-o},${n-c}A${r},${r},0,1,${f},${this._x1=u},${this._y1=d}`:h>Vc&&this._append`A${r},${r},0,${+(h>=bE)},${f},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function WT(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Lue(e)}function HT(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function kV(t){this._context=t}kV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function kw(t){return new kV(t)}function DV(t){return t[0]}function IV(t){return t[1]}function OV(t,e){var n=gn(!0),r=null,i=kw,s=null,a=WT(o);t=typeof t=="function"?t:t===void 0?DV:gn(t),e=typeof e=="function"?e:e===void 0?IV:gn(e);function o(c){var u,d=(c=HT(c)).length,f,h=!1,p;for(r==null&&(s=i(p=a())),u=0;u<=d;++u)!(u<d&&n(f=c[u],u,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(f,u,c),+e(f,u,c));if(p)return s=null,p+""||null}return o.x=function(c){return arguments.length?(t=typeof c=="function"?c:gn(+c),o):t},o.y=function(c){return arguments.length?(e=typeof c=="function"?c:gn(+c),o):e},o.defined=function(c){return arguments.length?(n=typeof c=="function"?c:gn(!!c),o):n},o.curve=function(c){return arguments.length?(i=c,r!=null&&(s=i(r)),o):i},o.context=function(c){return arguments.length?(c==null?r=s=null:s=i(r=c),o):r},o}function dy(t,e,n){var r=null,i=gn(!0),s=null,a=kw,o=null,c=WT(u);t=typeof t=="function"?t:t===void 0?DV:gn(+t),e=typeof e=="function"?e:gn(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?IV:gn(+n);function u(f){var h,p,m,g=(f=HT(f)).length,b,x=!1,w,_=new Array(g),E=new Array(g);for(s==null&&(o=a(w=c())),h=0;h<=g;++h){if(!(h<g&&i(b=f[h],h,f))===x)if(x=!x)p=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),m=h-1;m>=p;--m)o.point(_[m],E[m]);o.lineEnd(),o.areaEnd()}x&&(_[h]=+t(b,h,f),E[h]=+e(b,h,f),o.point(r?+r(b,h,f):_[h],n?+n(b,h,f):E[h]))}if(w)return o=null,w+""||null}function d(){return OV().defined(i).curve(a).context(s)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:gn(+f),r=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:gn(+f),u):t},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:gn(+f),u):r},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:gn(+f),n=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:gn(+f),u):e},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:gn(+f),u):n},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(n)},u.lineX1=function(){return d().x(r).y(e)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:gn(!!f),u):i},u.curve=function(f){return arguments.length?(a=f,s!=null&&(o=a(s)),u):a},u.context=function(f){return arguments.length?(f==null?s=o=null:o=a(s=f),u):s},u}class MV{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function zue(t){return new MV(t,!0)}function $ue(t){return new MV(t,!1)}const qT={draw(t,e){const n=pa(e/lb);t.moveTo(n,0),t.arc(0,0,n,0,Nw)}},Fue={draw(t,e){const n=pa(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},RV=pa(1/3),Vue=RV*2,Bue={draw(t,e){const n=pa(e/Vue),r=n*RV;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Uue={draw(t,e){const n=pa(e),r=-n/2;t.rect(r,r,n,n)}},Wue=.8908130915292852,LV=ob(lb/10)/ob(7*lb/10),Hue=ob(Nw/10)*LV,que=-PV(Nw/10)*LV,Kue={draw(t,e){const n=pa(e*Wue),r=Hue*n,i=que*n;t.moveTo(0,-n),t.lineTo(r,i);for(let s=1;s<5;++s){const a=Nw*s/5,o=PV(a),c=ob(a);t.lineTo(c*n,-o*n),t.lineTo(o*r-c*i,c*r+o*i)}t.closePath()}},N_=pa(3),Gue={draw(t,e){const n=-pa(e/(N_*3));t.moveTo(0,n*2),t.lineTo(-N_*n,-n),t.lineTo(N_*n,-n),t.closePath()}},xs=-.5,ws=pa(3)/2,wE=1/pa(12),Yue=(wE/2+1)*3,Que={draw(t,e){const n=pa(e/Yue),r=n/2,i=n*wE,s=r,a=n*wE+n,o=-s,c=a;t.moveTo(r,i),t.lineTo(s,a),t.lineTo(o,c),t.lineTo(xs*r-ws*i,ws*r+xs*i),t.lineTo(xs*s-ws*a,ws*s+xs*a),t.lineTo(xs*o-ws*c,ws*o+xs*c),t.lineTo(xs*r+ws*i,xs*i-ws*r),t.lineTo(xs*s+ws*a,xs*a-ws*s),t.lineTo(xs*o+ws*c,xs*c-ws*o),t.closePath()}};function Xue(t,e){let n=null,r=WT(i);t=typeof t=="function"?t:gn(t||qT),e=typeof e=="function"?e:gn(e===void 0?64:+e);function i(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:gn(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:gn(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function cb(){}function ub(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function zV(t){this._context=t}zV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ub(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ub(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Zue(t){return new zV(t)}function $V(t){this._context=t}$V.prototype={areaStart:cb,areaEnd:cb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:ub(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Jue(t){return new $V(t)}function FV(t){this._context=t}FV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ub(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ede(t){return new FV(t)}function VV(t){this._context=t}VV.prototype={areaStart:cb,areaEnd:cb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function tde(t){return new VV(t)}function $O(t){return t<0?-1:1}function FO(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),o=(s*i+a*r)/(r+i);return($O(s)+$O(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function VO(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function k_(t,e,n){var r=t._x0,i=t._y0,s=t._x1,a=t._y1,o=(s-r)/3;t._context.bezierCurveTo(r+o,i+o*e,s-o,a-o*n,s,a)}function db(t){this._context=t}db.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:k_(this,this._t0,VO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,k_(this,VO(this,n=FO(this,t,e)),n);break;default:k_(this,this._t0,n=FO(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function BV(t){this._context=new UV(t)}(BV.prototype=Object.create(db.prototype)).point=function(t,e){db.prototype.point.call(this,e,t)};function UV(t){this._context=t}UV.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function nde(t){return new db(t)}function rde(t){return new BV(t)}function WV(t){this._context=t}WV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=BO(t),i=BO(e),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function BO(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function ide(t){return new WV(t)}function Dw(t,e){this._context=t,this._t=e}Dw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function sde(t){return new Dw(t,.5)}function ade(t){return new Dw(t,0)}function ode(t){return new Dw(t,1)}function Gf(t,e){if((a=t.length)>1)for(var n=1,r,i,s=t[e[0]],a,o=s.length;n<a;++n)for(i=s,s=t[e[n]],r=0;r<o;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function _E(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function lde(t,e){return t[e]}function cde(t){const e=[];return e.key=t,e}function ude(){var t=gn([]),e=_E,n=Gf,r=lde;function i(s){var a=Array.from(t.apply(this,arguments),cde),o,c=a.length,u=-1,d;for(const f of s)for(o=0,++u;o<c;++o)(a[o][u]=[0,+r(f,a[o].key,u,s)]).data=f;for(o=0,d=HT(e(a));o<c;++o)a[d[o]].index=o;return n(a,d),a}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:gn(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:gn(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?_E:typeof s=="function"?s:gn(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??Gf,i):n},i}function dde(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,a;i<s;++i){for(a=n=0;n<r;++n)a+=t[n][i][1]||0;if(a)for(n=0;n<r;++n)t[n][i][1]/=a}Gf(t,e)}}function fde(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var a=0,o=0;a<i;++a)o+=t[a][n][1]||0;r[n][1]+=r[n][0]=-o/2}Gf(t,e)}}function hde(t,e){if(!(!((a=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,a;r<s;++r){for(var o=0,c=0,u=0;o<a;++o){for(var d=t[e[o]],f=d[r][1]||0,h=d[r-1][1]||0,p=(f-h)/2,m=0;m<o;++m){var g=t[e[m]],b=g[r][1]||0,x=g[r-1][1]||0;p+=b-x}c+=f,u+=p*f}i[r-1][1]+=i[r-1][0]=n,c&&(n-=u/c)}i[r-1][1]+=i[r-1][0]=n,Gf(t,e)}}function cg(t){"@babel/helpers - typeof";return cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cg(t)}var pde=["type","size","sizeType"];function SE(){return SE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SE.apply(this,arguments)}function UO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function WO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UO(Object(n),!0).forEach(function(r){mde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mde(t,e,n){return e=gde(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gde(t){var e=vde(t,"string");return cg(e)=="symbol"?e:e+""}function vde(t,e){if(cg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(cg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yde(t,e){if(t==null)return{};var n=bde(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function bde(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var HV={symbolCircle:qT,symbolCross:Fue,symbolDiamond:Bue,symbolSquare:Uue,symbolStar:Kue,symbolTriangle:Gue,symbolWye:Que},xde=Math.PI/180,wde=function(e){var n="symbol".concat(Pw(e));return HV[n]||qT},_de=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*xde;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Sde=function(e,n){HV["symbol".concat(Pw(e))]=n},KT=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,s=i===void 0?64:i,a=e.sizeType,o=a===void 0?"area":a,c=yde(e,pde),u=WO(WO({},c),{},{type:r,size:s,sizeType:o}),d=function(){var b=wde(r),x=Xue().type(b).size(_de(s,o,r));return x()},f=u.className,h=u.cx,p=u.cy,m=et(u,!0);return h===+h&&p===+p&&s===+s?Y.createElement("path",SE({},m,{className:St("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(p,")"),d:d()})):null};KT.registerSymbol=Sde;function Yf(t){"@babel/helpers - typeof";return Yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yf(t)}function AE(){return AE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AE.apply(this,arguments)}function HO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ade(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HO(Object(n),!0).forEach(function(r){ug(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ede(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jde(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,KV(r.key),r)}}function Cde(t,e,n){return e&&jde(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Tde(t,e,n){return e=fb(e),Pde(t,qV()?Reflect.construct(e,n||[],fb(t).constructor):e.apply(t,n))}function Pde(t,e){if(e&&(Yf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nde(t)}function Nde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qV=function(){return!!t})()}function fb(t){return fb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fb(t)}function kde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&EE(t,e)}function EE(t,e){return EE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},EE(t,e)}function ug(t,e,n){return e=KV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KV(t){var e=Dde(t,"string");return Yf(e)=="symbol"?e:e+""}function Dde(t,e){if(Yf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Yf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var _s=32,GT=function(t){function e(){return Ede(this,e),Tde(this,e,arguments)}return kde(e,t),Cde(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,s=_s/2,a=_s/6,o=_s/3,c=r.inactive?i:r.color;if(r.type==="plainline")return Y.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:s,x2:_s,y2:s,className:"recharts-legend-icon"});if(r.type==="line")return Y.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*o,",").concat(s,`
            H`).concat(_s,"M").concat(2*o,",").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(o,",").concat(s),className:"recharts-legend-icon"});if(r.type==="rect")return Y.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(_s/8,"h").concat(_s,"v").concat(_s*3/4,"h").concat(-_s,"z"),className:"recharts-legend-icon"});if(Y.isValidElement(r.legendIcon)){var u=Ade({},r);return delete u.legendIcon,Y.cloneElement(r.legendIcon,u)}return Y.createElement(KT,{fill:c,cx:s,cy:s,size:_s,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,s=i.payload,a=i.iconSize,o=i.layout,c=i.formatter,u=i.inactiveColor,d={x:0,y:0,width:_s,height:_s},f={display:o==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(p,m){var g=p.formatter||c,b=St(ug(ug({"recharts-legend-item":!0},"legend-item-".concat(m),!0),"inactive",p.inactive));if(p.type==="none")return null;var x=ut(p.value)?null:p.value;ta(!ut(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var w=p.inactive?u:p.color;return Y.createElement("li",AE({className:b,style:f,key:"legend-item-".concat(m)},Du(r.props,p,m)),Y.createElement(mE,{width:a,height:a,viewBox:d,style:h},r.renderIcon(p)),Y.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},g?g(x,p,m):x))})}},{key:"render",value:function(){var r=this.props,i=r.payload,s=r.layout,a=r.align;if(!i||!i.length)return null;var o={padding:0,margin:0,textAlign:s==="horizontal"?a:"left"};return Y.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(P.PureComponent);ug(GT,"displayName","Legend");ug(GT,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Ide=gw;function Ode(){this.__data__=new Ide,this.size=0}var Mde=Ode;function Rde(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var Lde=Rde;function zde(t){return this.__data__.get(t)}var $de=zde;function Fde(t){return this.__data__.has(t)}var Vde=Fde,Bde=gw,Ude=MT,Wde=RT,Hde=200;function qde(t,e){var n=this.__data__;if(n instanceof Bde){var r=n.__data__;if(!Ude||r.length<Hde-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Wde(r)}return n.set(t,e),this.size=n.size,this}var Kde=qde,Gde=gw,Yde=Mde,Qde=Lde,Xde=$de,Zde=Vde,Jde=Kde;function Bh(t){var e=this.__data__=new Gde(t);this.size=e.size}Bh.prototype.clear=Yde;Bh.prototype.delete=Qde;Bh.prototype.get=Xde;Bh.prototype.has=Zde;Bh.prototype.set=Jde;var GV=Bh,efe="__lodash_hash_undefined__";function tfe(t){return this.__data__.set(t,efe),this}var nfe=tfe;function rfe(t){return this.__data__.has(t)}var ife=rfe,sfe=RT,afe=nfe,ofe=ife;function hb(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new sfe;++e<n;)this.add(t[e])}hb.prototype.add=hb.prototype.push=afe;hb.prototype.has=ofe;var YV=hb;function lfe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var QV=lfe;function cfe(t,e){return t.has(e)}var XV=cfe,ufe=YV,dfe=QV,ffe=XV,hfe=1,pfe=2;function mfe(t,e,n,r,i,s){var a=n&hfe,o=t.length,c=e.length;if(o!=c&&!(a&&c>o))return!1;var u=s.get(t),d=s.get(e);if(u&&d)return u==e&&d==t;var f=-1,h=!0,p=n&pfe?new ufe:void 0;for(s.set(t,e),s.set(e,t);++f<o;){var m=t[f],g=e[f];if(r)var b=a?r(g,m,f,e,t,s):r(m,g,f,t,e,s);if(b!==void 0){if(b)continue;h=!1;break}if(p){if(!dfe(e,function(x,w){if(!ffe(p,w)&&(m===x||i(m,x,n,r,s)))return p.push(w)})){h=!1;break}}else if(!(m===g||i(m,g,n,r,s))){h=!1;break}}return s.delete(t),s.delete(e),h}var ZV=mfe,gfe=Ga,vfe=gfe.Uint8Array,yfe=vfe;function bfe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var xfe=bfe;function wfe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var YT=wfe,qO=vv,KO=yfe,_fe=OT,Sfe=ZV,Afe=xfe,Efe=YT,jfe=1,Cfe=2,Tfe="[object Boolean]",Pfe="[object Date]",Nfe="[object Error]",kfe="[object Map]",Dfe="[object Number]",Ife="[object RegExp]",Ofe="[object Set]",Mfe="[object String]",Rfe="[object Symbol]",Lfe="[object ArrayBuffer]",zfe="[object DataView]",GO=qO?qO.prototype:void 0,D_=GO?GO.valueOf:void 0;function $fe(t,e,n,r,i,s,a){switch(n){case zfe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Lfe:return!(t.byteLength!=e.byteLength||!s(new KO(t),new KO(e)));case Tfe:case Pfe:case Dfe:return _fe(+t,+e);case Nfe:return t.name==e.name&&t.message==e.message;case Ife:case Mfe:return t==e+"";case kfe:var o=Afe;case Ofe:var c=r&jfe;if(o||(o=Efe),t.size!=e.size&&!c)return!1;var u=a.get(t);if(u)return u==e;r|=Cfe,a.set(t,e);var d=Sfe(o(t),o(e),r,i,s,a);return a.delete(t),d;case Rfe:if(D_)return D_.call(t)==D_.call(e)}return!1}var Ffe=$fe;function Vfe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var JV=Vfe,Bfe=JV,Ufe=Wi;function Wfe(t,e,n){var r=e(t);return Ufe(t)?r:Bfe(r,n(t))}var Hfe=Wfe;function qfe(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var a=t[n];e(a,n,t)&&(s[i++]=a)}return s}var Kfe=qfe;function Gfe(){return[]}var Yfe=Gfe,Qfe=Kfe,Xfe=Yfe,Zfe=Object.prototype,Jfe=Zfe.propertyIsEnumerable,YO=Object.getOwnPropertySymbols,ehe=YO?function(t){return t==null?[]:(t=Object(t),Qfe(YO(t),function(e){return Jfe.call(t,e)}))}:Xfe,the=ehe;function nhe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var rhe=nhe,ihe=Bo,she=Uo,ahe="[object Arguments]";function ohe(t){return she(t)&&ihe(t)==ahe}var lhe=ohe,QO=lhe,che=Uo,eB=Object.prototype,uhe=eB.hasOwnProperty,dhe=eB.propertyIsEnumerable,fhe=QO(function(){return arguments}())?QO:function(t){return che(t)&&uhe.call(t,"callee")&&!dhe.call(t,"callee")},QT=fhe,pb={exports:{}};function hhe(){return!1}var phe=hhe;pb.exports;(function(t,e){var n=Ga,r=phe,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===i,o=a?n.Buffer:void 0,c=o?o.isBuffer:void 0,u=c||r;t.exports=u})(pb,pb.exports);var tB=pb.exports,mhe=9007199254740991,ghe=/^(?:0|[1-9]\d*)$/;function vhe(t,e){var n=typeof t;return e=e??mhe,!!e&&(n=="number"||n!="symbol"&&ghe.test(t))&&t>-1&&t%1==0&&t<e}var XT=vhe,yhe=9007199254740991;function bhe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=yhe}var ZT=bhe,xhe=Bo,whe=ZT,_he=Uo,She="[object Arguments]",Ahe="[object Array]",Ehe="[object Boolean]",jhe="[object Date]",Che="[object Error]",The="[object Function]",Phe="[object Map]",Nhe="[object Number]",khe="[object Object]",Dhe="[object RegExp]",Ihe="[object Set]",Ohe="[object String]",Mhe="[object WeakMap]",Rhe="[object ArrayBuffer]",Lhe="[object DataView]",zhe="[object Float32Array]",$he="[object Float64Array]",Fhe="[object Int8Array]",Vhe="[object Int16Array]",Bhe="[object Int32Array]",Uhe="[object Uint8Array]",Whe="[object Uint8ClampedArray]",Hhe="[object Uint16Array]",qhe="[object Uint32Array]",Sn={};Sn[zhe]=Sn[$he]=Sn[Fhe]=Sn[Vhe]=Sn[Bhe]=Sn[Uhe]=Sn[Whe]=Sn[Hhe]=Sn[qhe]=!0;Sn[She]=Sn[Ahe]=Sn[Rhe]=Sn[Ehe]=Sn[Lhe]=Sn[jhe]=Sn[Che]=Sn[The]=Sn[Phe]=Sn[Nhe]=Sn[khe]=Sn[Dhe]=Sn[Ihe]=Sn[Ohe]=Sn[Mhe]=!1;function Khe(t){return _he(t)&&whe(t.length)&&!!Sn[xhe(t)]}var Ghe=Khe;function Yhe(t){return function(e){return t(e)}}var nB=Yhe,mb={exports:{}};mb.exports;(function(t,e){var n=cV,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,a=s&&n.process,o=function(){try{var c=i&&i.require&&i.require("util").types;return c||a&&a.binding&&a.binding("util")}catch{}}();t.exports=o})(mb,mb.exports);var Qhe=mb.exports,Xhe=Ghe,Zhe=nB,XO=Qhe,ZO=XO&&XO.isTypedArray,Jhe=ZO?Zhe(ZO):Xhe,rB=Jhe,epe=rhe,tpe=QT,npe=Wi,rpe=tB,ipe=XT,spe=rB,ape=Object.prototype,ope=ape.hasOwnProperty;function lpe(t,e){var n=npe(t),r=!n&&tpe(t),i=!n&&!r&&rpe(t),s=!n&&!r&&!i&&spe(t),a=n||r||i||s,o=a?epe(t.length,String):[],c=o.length;for(var u in t)(e||ope.call(t,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||ipe(u,c)))&&o.push(u);return o}var cpe=lpe,upe=Object.prototype;function dpe(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||upe;return t===n}var fpe=dpe;function hpe(t,e){return function(n){return t(e(n))}}var iB=hpe,ppe=iB,mpe=ppe(Object.keys,Object),gpe=mpe,vpe=fpe,ype=gpe,bpe=Object.prototype,xpe=bpe.hasOwnProperty;function wpe(t){if(!vpe(t))return ype(t);var e=[];for(var n in Object(t))xpe.call(t,n)&&n!="constructor"&&e.push(n);return e}var _pe=wpe,Spe=IT,Ape=ZT;function Epe(t){return t!=null&&Ape(t.length)&&!Spe(t)}var yv=Epe,jpe=cpe,Cpe=_pe,Tpe=yv;function Ppe(t){return Tpe(t)?jpe(t):Cpe(t)}var Iw=Ppe,Npe=Hfe,kpe=the,Dpe=Iw;function Ipe(t){return Npe(t,Dpe,kpe)}var Ope=Ipe,JO=Ope,Mpe=1,Rpe=Object.prototype,Lpe=Rpe.hasOwnProperty;function zpe(t,e,n,r,i,s){var a=n&Mpe,o=JO(t),c=o.length,u=JO(e),d=u.length;if(c!=d&&!a)return!1;for(var f=c;f--;){var h=o[f];if(!(a?h in e:Lpe.call(e,h)))return!1}var p=s.get(t),m=s.get(e);if(p&&m)return p==e&&m==t;var g=!0;s.set(t,e),s.set(e,t);for(var b=a;++f<c;){h=o[f];var x=t[h],w=e[h];if(r)var _=a?r(w,x,h,e,t,s):r(x,w,h,t,e,s);if(!(_===void 0?x===w||i(x,w,n,r,s):_)){g=!1;break}b||(b=h=="constructor")}if(g&&!b){var E=t.constructor,j=e.constructor;E!=j&&"constructor"in t&&"constructor"in e&&!(typeof E=="function"&&E instanceof E&&typeof j=="function"&&j instanceof j)&&(g=!1)}return s.delete(t),s.delete(e),g}var $pe=zpe,Fpe=Xu,Vpe=Ga,Bpe=Fpe(Vpe,"DataView"),Upe=Bpe,Wpe=Xu,Hpe=Ga,qpe=Wpe(Hpe,"Promise"),Kpe=qpe,Gpe=Xu,Ype=Ga,Qpe=Gpe(Ype,"Set"),sB=Qpe,Xpe=Xu,Zpe=Ga,Jpe=Xpe(Zpe,"WeakMap"),eme=Jpe,jE=Upe,CE=MT,TE=Kpe,PE=sB,NE=eme,aB=Bo,Uh=dV,eM="[object Map]",tme="[object Object]",tM="[object Promise]",nM="[object Set]",rM="[object WeakMap]",iM="[object DataView]",nme=Uh(jE),rme=Uh(CE),ime=Uh(TE),sme=Uh(PE),ame=Uh(NE),Bc=aB;(jE&&Bc(new jE(new ArrayBuffer(1)))!=iM||CE&&Bc(new CE)!=eM||TE&&Bc(TE.resolve())!=tM||PE&&Bc(new PE)!=nM||NE&&Bc(new NE)!=rM)&&(Bc=function(t){var e=aB(t),n=e==tme?t.constructor:void 0,r=n?Uh(n):"";if(r)switch(r){case nme:return iM;case rme:return eM;case ime:return tM;case sme:return nM;case ame:return rM}return e});var ome=Bc,I_=GV,lme=ZV,cme=Ffe,ume=$pe,sM=ome,aM=Wi,oM=tB,dme=rB,fme=1,lM="[object Arguments]",cM="[object Array]",fy="[object Object]",hme=Object.prototype,uM=hme.hasOwnProperty;function pme(t,e,n,r,i,s){var a=aM(t),o=aM(e),c=a?cM:sM(t),u=o?cM:sM(e);c=c==lM?fy:c,u=u==lM?fy:u;var d=c==fy,f=u==fy,h=c==u;if(h&&oM(t)){if(!oM(e))return!1;a=!0,d=!1}if(h&&!d)return s||(s=new I_),a||dme(t)?lme(t,e,n,r,i,s):cme(t,e,c,n,r,i,s);if(!(n&fme)){var p=d&&uM.call(t,"__wrapped__"),m=f&&uM.call(e,"__wrapped__");if(p||m){var g=p?t.value():t,b=m?e.value():e;return s||(s=new I_),i(g,b,n,r,s)}}return h?(s||(s=new I_),ume(t,e,n,r,i,s)):!1}var mme=pme,gme=mme,dM=Uo;function oB(t,e,n,r,i){return t===e?!0:t==null||e==null||!dM(t)&&!dM(e)?t!==t&&e!==e:gme(t,e,n,r,oB,i)}var JT=oB,vme=GV,yme=JT,bme=1,xme=2;function wme(t,e,n,r){var i=n.length,s=i,a=!r;if(t==null)return!s;for(t=Object(t);i--;){var o=n[i];if(a&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<s;){o=n[i];var c=o[0],u=t[c],d=o[1];if(a&&o[2]){if(u===void 0&&!(c in t))return!1}else{var f=new vme;if(r)var h=r(u,d,c,t,e,f);if(!(h===void 0?yme(d,u,bme|xme,r,f):h))return!1}}return!0}var _me=wme,Sme=ic;function Ame(t){return t===t&&!Sme(t)}var lB=Ame,Eme=lB,jme=Iw;function Cme(t){for(var e=jme(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Eme(i)]}return e}var Tme=Cme;function Pme(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var cB=Pme,Nme=_me,kme=Tme,Dme=cB;function Ime(t){var e=kme(t);return e.length==1&&e[0][2]?Dme(e[0][0],e[0][1]):function(n){return n===t||Nme(n,t,e)}}var Ome=Ime;function Mme(t,e){return t!=null&&e in Object(t)}var Rme=Mme,Lme=gV,zme=QT,$me=Wi,Fme=XT,Vme=ZT,Bme=yw;function Ume(t,e,n){e=Lme(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var a=Bme(e[r]);if(!(s=t!=null&&n(t,a)))break;t=t[a]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&Vme(i)&&Fme(a,i)&&($me(t)||zme(t)))}var Wme=Ume,Hme=Rme,qme=Wme;function Kme(t,e){return t!=null&&qme(t,e,Hme)}var Gme=Kme,Yme=JT,Qme=vV,Xme=Gme,Zme=DT,Jme=lB,ege=cB,tge=yw,nge=1,rge=2;function ige(t,e){return Zme(t)&&Jme(e)?ege(tge(t),e):function(n){var r=Qme(n,t);return r===void 0&&r===e?Xme(n,t):Yme(e,r,nge|rge)}}var sge=ige;function age(t){return t}var Wh=age;function oge(t){return function(e){return e==null?void 0:e[t]}}var lge=oge,cge=$T;function uge(t){return function(e){return cge(e,t)}}var dge=uge,fge=lge,hge=dge,pge=DT,mge=yw;function gge(t){return pge(t)?fge(mge(t)):hge(t)}var vge=gge,yge=Ome,bge=sge,xge=Wh,wge=Wi,_ge=vge;function Sge(t){return typeof t=="function"?t:t==null?xge:typeof t=="object"?wge(t)?bge(t[0],t[1]):yge(t):_ge(t)}var Ya=Sge;function Age(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}var uB=Age;function Ege(t){return t!==t}var jge=Ege;function Cge(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var Tge=Cge,Pge=uB,Nge=jge,kge=Tge;function Dge(t,e,n){return e===e?kge(t,e,n):Pge(t,Nge,n)}var Ige=Dge,Oge=Ige;function Mge(t,e){var n=t==null?0:t.length;return!!n&&Oge(t,e,0)>-1}var Rge=Mge;function Lge(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var zge=Lge;function $ge(){}var Fge=$ge,O_=sB,Vge=Fge,Bge=YT,Uge=1/0,Wge=O_&&1/Bge(new O_([,-0]))[1]==Uge?function(t){return new O_(t)}:Vge,Hge=Wge,qge=YV,Kge=Rge,Gge=zge,Yge=XV,Qge=Hge,Xge=YT,Zge=200;function Jge(t,e,n){var r=-1,i=Kge,s=t.length,a=!0,o=[],c=o;if(n)a=!1,i=Gge;else if(s>=Zge){var u=e?null:Qge(t);if(u)return Xge(u);a=!1,i=Yge,c=new qge}else c=e?[]:o;e:for(;++r<s;){var d=t[r],f=e?e(d):d;if(d=n||d!==0?d:0,a&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;e&&c.push(f),o.push(d)}else i(c,f,n)||(c!==o&&c.push(f),o.push(d))}return o}var eve=Jge,tve=Ya,nve=eve;function rve(t,e){return t&&t.length?nve(t,tve(e)):[]}var ive=rve;const fM=Qt(ive);function dB(t,e,n){return e===!0?fM(t,n):ut(e)?fM(t,e):t}function Qf(t){"@babel/helpers - typeof";return Qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qf(t)}var sve=["ref"];function hM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ao(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hM(Object(n),!0).forEach(function(r){Ow(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ave(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hB(r.key),r)}}function ove(t,e,n){return e&&pM(t.prototype,e),n&&pM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function lve(t,e,n){return e=gb(e),cve(t,fB()?Reflect.construct(e,n||[],gb(t).constructor):e.apply(t,n))}function cve(t,e){if(e&&(Qf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uve(t)}function uve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fB=function(){return!!t})()}function gb(t){return gb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gb(t)}function dve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kE(t,e)}function kE(t,e){return kE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},kE(t,e)}function Ow(t,e,n){return e=hB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hB(t){var e=fve(t,"string");return Qf(e)=="symbol"?e:e+""}function fve(t,e){if(Qf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Qf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function hve(t,e){if(t==null)return{};var n=pve(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function pve(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function mve(t){return t.value}function gve(t,e){if(Y.isValidElement(t))return Y.cloneElement(t,e);if(typeof t=="function")return Y.createElement(t,e);e.ref;var n=hve(e,sve);return Y.createElement(GT,n)}var mM=1,na=function(t){function e(){var n;ave(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=lve(this,e,[].concat(i)),Ow(n,"lastBoundingBox",{width:-1,height:-1}),n}return dve(e,t),ove(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>mM||Math.abs(i.height-this.lastBoundingBox.height)>mM)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ao({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,s=i.layout,a=i.align,o=i.verticalAlign,c=i.margin,u=i.chartWidth,d=i.chartHeight,f,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(a==="center"&&s==="vertical"){var p=this.getBBoxSnapshot();f={left:((u||0)-p.width)/2}}else f=a==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(o==="middle"){var m=this.getBBoxSnapshot();h={top:((d||0)-m.height)/2}}else h=o==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return ao(ao({},f),h)}},{key:"render",value:function(){var r=this,i=this.props,s=i.content,a=i.width,o=i.height,c=i.wrapperStyle,u=i.payloadUniqBy,d=i.payload,f=ao(ao({position:"absolute",width:a||"auto",height:o||"auto"},this.getDefaultPosition(c)),c);return Y.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(p){r.wrapperNode=p}},gve(s,ao(ao({},this.props),{},{payload:dB(d,u,mve)})))}}],[{key:"getWithHeight",value:function(r,i){var s=ao(ao({},this.defaultProps),r.props),a=s.layout;return a==="vertical"&&Ce(r.props.height)?{height:r.props.height}:a==="horizontal"?{width:r.props.width||i}:null}}])}(P.PureComponent);Ow(na,"displayName","Legend");Ow(na,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var gM=vv,vve=QT,yve=Wi,vM=gM?gM.isConcatSpreadable:void 0;function bve(t){return yve(t)||vve(t)||!!(vM&&t&&t[vM])}var xve=bve,wve=JV,_ve=xve;function pB(t,e,n,r,i){var s=-1,a=t.length;for(n||(n=_ve),i||(i=[]);++s<a;){var o=t[s];e>0&&n(o)?e>1?pB(o,e-1,n,r,i):wve(i,o):r||(i[i.length]=o)}return i}var mB=pB;function Sve(t){return function(e,n,r){for(var i=-1,s=Object(e),a=r(e),o=a.length;o--;){var c=a[t?o:++i];if(n(s[c],c,s)===!1)break}return e}}var Ave=Sve,Eve=Ave,jve=Eve(),Cve=jve,Tve=Cve,Pve=Iw;function Nve(t,e){return t&&Tve(t,e,Pve)}var gB=Nve,kve=yv;function Dve(t,e){return function(n,r){if(n==null)return n;if(!kve(n))return t(n,r);for(var i=n.length,s=e?i:-1,a=Object(n);(e?s--:++s<i)&&r(a[s],s,a)!==!1;);return n}}var Ive=Dve,Ove=gB,Mve=Ive,Rve=Mve(Ove),eP=Rve,Lve=eP,zve=yv;function $ve(t,e){var n=-1,r=zve(t)?Array(t.length):[];return Lve(t,function(i,s,a){r[++n]=e(i,s,a)}),r}var vB=$ve;function Fve(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var Vve=Fve,yM=Rh;function Bve(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,s=yM(t),a=e!==void 0,o=e===null,c=e===e,u=yM(e);if(!o&&!u&&!s&&t>e||s&&a&&c&&!o&&!u||r&&a&&c||!n&&c||!i)return 1;if(!r&&!s&&!u&&t<e||u&&n&&i&&!r&&!s||o&&n&&i||!a&&i||!c)return-1}return 0}var Uve=Bve,Wve=Uve;function Hve(t,e,n){for(var r=-1,i=t.criteria,s=e.criteria,a=i.length,o=n.length;++r<a;){var c=Wve(i[r],s[r]);if(c){if(r>=o)return c;var u=n[r];return c*(u=="desc"?-1:1)}}return t.index-e.index}var qve=Hve,M_=zT,Kve=$T,Gve=Ya,Yve=vB,Qve=Vve,Xve=nB,Zve=qve,Jve=Wh,eye=Wi;function tye(t,e,n){e.length?e=M_(e,function(s){return eye(s)?function(a){return Kve(a,s.length===1?s[0]:s)}:s}):e=[Jve];var r=-1;e=M_(e,Xve(Gve));var i=Yve(t,function(s,a,o){var c=M_(e,function(u){return u(s)});return{criteria:c,index:++r,value:s}});return Qve(i,function(s,a){return Zve(s,a,n)})}var nye=tye;function rye(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var iye=rye,sye=iye,bM=Math.max;function aye(t,e,n){return e=bM(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=bM(r.length-e,0),a=Array(s);++i<s;)a[i]=r[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=r[i];return o[e]=n(a),sye(t,this,o)}}var oye=aye;function lye(t){return function(){return t}}var cye=lye,uye=Xu,dye=function(){try{var t=uye(Object,"defineProperty");return t({},"",{}),t}catch{}}(),yB=dye,fye=cye,xM=yB,hye=Wh,pye=xM?function(t,e){return xM(t,"toString",{configurable:!0,enumerable:!1,value:fye(e),writable:!0})}:hye,mye=pye,gye=800,vye=16,yye=Date.now;function bye(t){var e=0,n=0;return function(){var r=yye(),i=vye-(r-n);if(n=r,i>0){if(++e>=gye)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var xye=bye,wye=mye,_ye=xye,Sye=_ye(wye),Aye=Sye,Eye=Wh,jye=oye,Cye=Aye;function Tye(t,e){return Cye(jye(t,e,Eye),t+"")}var Pye=Tye,Nye=OT,kye=yv,Dye=XT,Iye=ic;function Oye(t,e,n){if(!Iye(n))return!1;var r=typeof e;return(r=="number"?kye(n)&&Dye(e,n.length):r=="string"&&e in n)?Nye(n[e],t):!1}var Mw=Oye,Mye=mB,Rye=nye,Lye=Pye,wM=Mw,zye=Lye(function(t,e){if(t==null)return[];var n=e.length;return n>1&&wM(t,e[0],e[1])?e=[]:n>2&&wM(e[0],e[1],e[2])&&(e=[e[0]]),Rye(t,Mye(e,1),[])}),$ye=zye;const tP=Qt($ye);function dg(t){"@babel/helpers - typeof";return dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dg(t)}function DE(){return DE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},DE.apply(this,arguments)}function Fye(t,e){return Wye(t)||Uye(t,e)||Bye(t,e)||Vye()}function Vye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bye(t,e){if(t){if(typeof t=="string")return _M(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _M(t,e)}}function _M(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Uye(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function Wye(t){if(Array.isArray(t))return t}function SM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function R_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SM(Object(n),!0).forEach(function(r){Hye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hye(t,e,n){return e=qye(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qye(t){var e=Kye(t,"string");return dg(e)=="symbol"?e:e+""}function Kye(t,e){if(dg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(dg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gye(t){return Array.isArray(t)&&Ar(t[0])&&Ar(t[1])?t.join(" ~ "):t}var Yye=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,s=i===void 0?{}:i,a=e.itemStyle,o=a===void 0?{}:a,c=e.labelStyle,u=c===void 0?{}:c,d=e.payload,f=e.formatter,h=e.itemSorter,p=e.wrapperClassName,m=e.labelClassName,g=e.label,b=e.labelFormatter,x=e.accessibilityLayer,w=x===void 0?!1:x,_=function(){if(d&&d.length){var z={padding:0,margin:0},M=(h?tP(d,h):d).map(function(G,K){if(G.type==="none")return null;var B=R_({display:"block",paddingTop:4,paddingBottom:4,color:G.color||"#000"},o),U=G.formatter||f||Gye,F=G.value,q=G.name,Z=F,re=q;if(U&&Z!=null&&re!=null){var he=U(F,q,G,K,d);if(Array.isArray(he)){var ye=Fye(he,2);Z=ye[0],re=ye[1]}else Z=he}return Y.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(K),style:B},Ar(re)?Y.createElement("span",{className:"recharts-tooltip-item-name"},re):null,Ar(re)?Y.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,Y.createElement("span",{className:"recharts-tooltip-item-value"},Z),Y.createElement("span",{className:"recharts-tooltip-item-unit"},G.unit||""))});return Y.createElement("ul",{className:"recharts-tooltip-item-list",style:z},M)}return null},E=R_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),j=R_({margin:0},u),T=!gt(g),A=T?g:"",C=St("recharts-default-tooltip",p),D=St("recharts-tooltip-label",m);T&&b&&d!==void 0&&d!==null&&(A=b(g,d));var O=w?{role:"status","aria-live":"assertive"}:{};return Y.createElement("div",DE({className:C,style:E},O),Y.createElement("p",{className:D,style:j},Y.isValidElement(A)?A:"".concat(A)),_())};function fg(t){"@babel/helpers - typeof";return fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fg(t)}function hy(t,e,n){return e=Qye(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qye(t){var e=Xye(t,"string");return fg(e)=="symbol"?e:e+""}function Xye(t,e){if(fg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(fg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jp="recharts-tooltip-wrapper",Zye={visibility:"hidden"};function Jye(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return St(jp,hy(hy(hy(hy({},"".concat(jp,"-right"),Ce(n)&&e&&Ce(e.x)&&n>=e.x),"".concat(jp,"-left"),Ce(n)&&e&&Ce(e.x)&&n<e.x),"".concat(jp,"-bottom"),Ce(r)&&e&&Ce(e.y)&&r>=e.y),"".concat(jp,"-top"),Ce(r)&&e&&Ce(e.y)&&r<e.y))}function AM(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,s=t.position,a=t.reverseDirection,o=t.tooltipDimension,c=t.viewBox,u=t.viewBoxDimension;if(s&&Ce(s[r]))return s[r];var d=n[r]-o-i,f=n[r]+i;if(e[r])return a[r]?d:f;if(a[r]){var h=d,p=c[r];return h<p?Math.max(f,c[r]):Math.max(d,c[r])}var m=f+o,g=c[r]+u;return m>g?Math.max(d,c[r]):Math.max(f,c[r])}function e0e(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function t0e(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,s=t.reverseDirection,a=t.tooltipBox,o=t.useTranslate3d,c=t.viewBox,u,d,f;return a.height>0&&a.width>0&&n?(d=AM({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.width,viewBox:c,viewBoxDimension:c.width}),f=AM({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.height,viewBox:c,viewBoxDimension:c.height}),u=e0e({translateX:d,translateY:f,useTranslate3d:o})):u=Zye,{cssProperties:u,cssClasses:Jye({translateX:d,translateY:f,coordinate:n})}}function Xf(t){"@babel/helpers - typeof";return Xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xf(t)}function EM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EM(Object(n),!0).forEach(function(r){OE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function n0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r0e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xB(r.key),r)}}function i0e(t,e,n){return e&&r0e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function s0e(t,e,n){return e=vb(e),a0e(t,bB()?Reflect.construct(e,n||[],vb(t).constructor):e.apply(t,n))}function a0e(t,e){if(e&&(Xf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o0e(t)}function o0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bB=function(){return!!t})()}function vb(t){return vb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vb(t)}function l0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IE(t,e)}function IE(t,e){return IE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},IE(t,e)}function OE(t,e,n){return e=xB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xB(t){var e=c0e(t,"string");return Xf(e)=="symbol"?e:e+""}function c0e(t,e){if(Xf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var CM=1,u0e=function(t){function e(){var n;n0e(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=s0e(this,e,[].concat(i)),OE(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),OE(n,"handleKeyDown",function(a){if(a.key==="Escape"){var o,c,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&o!==void 0?o:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return l0e(e,t),i0e(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>CM||Math.abs(r.height-this.state.lastBoundingBox.height)>CM)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,s=i.active,a=i.allowEscapeViewBox,o=i.animationDuration,c=i.animationEasing,u=i.children,d=i.coordinate,f=i.hasPayload,h=i.isAnimationActive,p=i.offset,m=i.position,g=i.reverseDirection,b=i.useTranslate3d,x=i.viewBox,w=i.wrapperStyle,_=t0e({allowEscapeViewBox:a,coordinate:d,offsetTopLeft:p,position:m,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:b,viewBox:x}),E=_.cssClasses,j=_.cssProperties,T=jM(jM({transition:h&&s?"transform ".concat(o,"ms ").concat(c):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&f?"visible":"hidden",position:"absolute",top:0,left:0},w);return Y.createElement("div",{tabIndex:-1,className:E,style:T,ref:function(C){r.wrapperNode=C}},u)}}])}(P.PureComponent),d0e=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},sc={isSsr:d0e()};function Zf(t){"@babel/helpers - typeof";return Zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zf(t)}function TM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function PM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TM(Object(n),!0).forEach(function(r){nP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function f0e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h0e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_B(r.key),r)}}function p0e(t,e,n){return e&&h0e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function m0e(t,e,n){return e=yb(e),g0e(t,wB()?Reflect.construct(e,n||[],yb(t).constructor):e.apply(t,n))}function g0e(t,e){if(e&&(Zf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v0e(t)}function v0e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wB=function(){return!!t})()}function yb(t){return yb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yb(t)}function y0e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ME(t,e)}function ME(t,e){return ME=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ME(t,e)}function nP(t,e,n){return e=_B(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _B(t){var e=b0e(t,"string");return Zf(e)=="symbol"?e:e+""}function b0e(t,e){if(Zf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function x0e(t){return t.dataKey}function w0e(t,e){return Y.isValidElement(t)?Y.cloneElement(t,e):typeof t=="function"?Y.createElement(t,e):Y.createElement(Yye,e)}var tn=function(t){function e(){return f0e(this,e),m0e(this,e,arguments)}return y0e(e,t),p0e(e,[{key:"render",value:function(){var r=this,i=this.props,s=i.active,a=i.allowEscapeViewBox,o=i.animationDuration,c=i.animationEasing,u=i.content,d=i.coordinate,f=i.filterNull,h=i.isAnimationActive,p=i.offset,m=i.payload,g=i.payloadUniqBy,b=i.position,x=i.reverseDirection,w=i.useTranslate3d,_=i.viewBox,E=i.wrapperStyle,j=m??[];f&&j.length&&(j=dB(m.filter(function(A){return A.value!=null&&(A.hide!==!0||r.props.includeHidden)}),g,x0e));var T=j.length>0;return Y.createElement(u0e,{allowEscapeViewBox:a,animationDuration:o,animationEasing:c,isAnimationActive:h,active:s,coordinate:d,hasPayload:T,offset:p,position:b,reverseDirection:x,useTranslate3d:w,viewBox:_,wrapperStyle:E},w0e(u,PM(PM({},this.props),{},{payload:j})))}}])}(P.PureComponent);nP(tn,"displayName","Tooltip");nP(tn,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!sc.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var _0e=Ga,S0e=function(){return _0e.Date.now()},A0e=S0e,E0e=/\s/;function j0e(t){for(var e=t.length;e--&&E0e.test(t.charAt(e)););return e}var C0e=j0e,T0e=C0e,P0e=/^\s+/;function N0e(t){return t&&t.slice(0,T0e(t)+1).replace(P0e,"")}var k0e=N0e,D0e=k0e,NM=ic,I0e=Rh,kM=NaN,O0e=/^[-+]0x[0-9a-f]+$/i,M0e=/^0b[01]+$/i,R0e=/^0o[0-7]+$/i,L0e=parseInt;function z0e(t){if(typeof t=="number")return t;if(I0e(t))return kM;if(NM(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=NM(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=D0e(t);var n=M0e.test(t);return n||R0e.test(t)?L0e(t.slice(2),n?2:8):O0e.test(t)?kM:+t}var SB=z0e,$0e=ic,L_=A0e,DM=SB,F0e="Expected a function",V0e=Math.max,B0e=Math.min;function U0e(t,e,n){var r,i,s,a,o,c,u=0,d=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(F0e);e=DM(e)||0,$0e(n)&&(d=!!n.leading,f="maxWait"in n,s=f?V0e(DM(n.maxWait)||0,e):s,h="trailing"in n?!!n.trailing:h);function p(T){var A=r,C=i;return r=i=void 0,u=T,a=t.apply(C,A),a}function m(T){return u=T,o=setTimeout(x,e),d?p(T):a}function g(T){var A=T-c,C=T-u,D=e-A;return f?B0e(D,s-C):D}function b(T){var A=T-c,C=T-u;return c===void 0||A>=e||A<0||f&&C>=s}function x(){var T=L_();if(b(T))return w(T);o=setTimeout(x,g(T))}function w(T){return o=void 0,h&&r?p(T):(r=i=void 0,a)}function _(){o!==void 0&&clearTimeout(o),u=0,r=c=i=o=void 0}function E(){return o===void 0?a:w(L_())}function j(){var T=L_(),A=b(T);if(r=arguments,i=this,c=T,A){if(o===void 0)return m(c);if(f)return clearTimeout(o),o=setTimeout(x,e),p(c)}return o===void 0&&(o=setTimeout(x,e)),a}return j.cancel=_,j.flush=E,j}var W0e=U0e,H0e=W0e,q0e=ic,K0e="Expected a function";function G0e(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(K0e);return q0e(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),H0e(t,e,{leading:r,maxWait:e,trailing:i})}var Y0e=G0e;const AB=Qt(Y0e);function hg(t){"@babel/helpers - typeof";return hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hg(t)}function IM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function py(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IM(Object(n),!0).forEach(function(r){Q0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Q0e(t,e,n){return e=X0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function X0e(t){var e=Z0e(t,"string");return hg(e)=="symbol"?e:e+""}function Z0e(t,e){if(hg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function J0e(t,e){return rbe(t)||nbe(t,e)||tbe(t,e)||ebe()}function ebe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tbe(t,e){if(t){if(typeof t=="string")return OM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OM(t,e)}}function OM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function nbe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function rbe(t){if(Array.isArray(t))return t}var fr=P.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,s=t.width,a=s===void 0?"100%":s,o=t.height,c=o===void 0?"100%":o,u=t.minWidth,d=u===void 0?0:u,f=t.minHeight,h=t.maxHeight,p=t.children,m=t.debounce,g=m===void 0?0:m,b=t.id,x=t.className,w=t.onResize,_=t.style,E=_===void 0?{}:_,j=P.useRef(null),T=P.useRef();T.current=w,P.useImperativeHandle(e,function(){return Object.defineProperty(j.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),j.current},configurable:!0})});var A=P.useState({containerWidth:i.width,containerHeight:i.height}),C=J0e(A,2),D=C[0],O=C[1],L=P.useCallback(function(M,G){O(function(K){var B=Math.round(M),U=Math.round(G);return K.containerWidth===B&&K.containerHeight===U?K:{containerWidth:B,containerHeight:U}})},[]);P.useEffect(function(){var M=function(q){var Z,re=q[0].contentRect,he=re.width,ye=re.height;L(he,ye),(Z=T.current)===null||Z===void 0||Z.call(T,he,ye)};g>0&&(M=AB(M,g,{trailing:!0,leading:!1}));var G=new ResizeObserver(M),K=j.current.getBoundingClientRect(),B=K.width,U=K.height;return L(B,U),G.observe(j.current),function(){G.disconnect()}},[L,g]);var z=P.useMemo(function(){var M=D.containerWidth,G=D.containerHeight;if(M<0||G<0)return null;ta(nu(a)||nu(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,c),ta(!n||n>0,"The aspect(%s) must be greater than zero.",n);var K=nu(a)?M:a,B=nu(c)?G:c;n&&n>0&&(K?B=K/n:B&&(K=B*n),h&&B>h&&(B=h)),ta(K>0||B>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,K,B,a,c,d,f,n);var U=!Array.isArray(p)&&So(p.type).endsWith("Chart");return Y.Children.map(p,function(F){return Y.isValidElement(F)?P.cloneElement(F,py({width:K,height:B},U?{style:py({height:"100%",width:"100%",maxHeight:B,maxWidth:K},F.props.style)}:{})):F})},[n,p,c,h,f,d,D,a]);return Y.createElement("div",{id:b?"".concat(b):void 0,className:St("recharts-responsive-container",x),style:py(py({},E),{},{width:a,height:c,minWidth:d,minHeight:f,maxHeight:h}),ref:j},z)}),aa=function(e){return null};aa.displayName="Cell";function pg(t){"@babel/helpers - typeof";return pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pg(t)}function MM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function RE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MM(Object(n),!0).forEach(function(r){ibe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ibe(t,e,n){return e=sbe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sbe(t){var e=abe(t,"string");return pg(e)=="symbol"?e:e+""}function abe(t,e){if(pg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(pg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Td={widthCache:{},cacheCount:0},obe=2e3,lbe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},RM="recharts_measurement_span";function cbe(t){var e=RE({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var mm=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||sc.isSsr)return{width:0,height:0};var r=cbe(n),i=JSON.stringify({text:e,copyStyle:r});if(Td.widthCache[i])return Td.widthCache[i];try{var s=document.getElementById(RM);s||(s=document.createElement("span"),s.setAttribute("id",RM),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var a=RE(RE({},lbe),r);Object.assign(s.style,a),s.textContent="".concat(e);var o=s.getBoundingClientRect(),c={width:o.width,height:o.height};return Td.widthCache[i]=c,++Td.cacheCount>obe&&(Td.cacheCount=0,Td.widthCache={}),c}catch{return{width:0,height:0}}},ube=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function mg(t){"@babel/helpers - typeof";return mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mg(t)}function bb(t,e){return pbe(t)||hbe(t,e)||fbe(t,e)||dbe()}function dbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fbe(t,e){if(t){if(typeof t=="string")return LM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LM(t,e)}}function LM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hbe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function pbe(t){if(Array.isArray(t))return t}function mbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vbe(r.key),r)}}function gbe(t,e,n){return e&&zM(t.prototype,e),n&&zM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function vbe(t){var e=ybe(t,"string");return mg(e)=="symbol"?e:e+""}function ybe(t,e){if(mg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(mg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var $M=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,FM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,bbe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,xbe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,EB={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},wbe=Object.keys(EB),rf="NaN";function _be(t,e){return t*EB[e]}var my=function(){function t(e,n){mbe(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!bbe.test(n)&&(this.num=NaN,this.unit=""),wbe.includes(n)&&(this.num=_be(e,n),this.unit="px")}return gbe(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=xbe.exec(n))!==null&&r!==void 0?r:[],s=bb(i,3),a=s[1],o=s[2];return new t(parseFloat(a),o??"")}}])}();function jB(t){if(t.includes(rf))return rf;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=$M.exec(e))!==null&&n!==void 0?n:[],i=bb(r,4),s=i[1],a=i[2],o=i[3],c=my.parse(s??""),u=my.parse(o??""),d=a==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return rf;e=e.replace($M,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,h=(f=FM.exec(e))!==null&&f!==void 0?f:[],p=bb(h,4),m=p[1],g=p[2],b=p[3],x=my.parse(m??""),w=my.parse(b??""),_=g==="+"?x.add(w):x.subtract(w);if(_.isNaN())return rf;e=e.replace(FM,_.toString())}return e}var VM=/\(([^()]*)\)/;function Sbe(t){for(var e=t;e.includes("(");){var n=VM.exec(e),r=bb(n,2),i=r[1];e=e.replace(VM,jB(i))}return e}function Abe(t){var e=t.replace(/\s+/g,"");return e=Sbe(e),e=jB(e),e}function Ebe(t){try{return Abe(t)}catch{return rf}}function z_(t){var e=Ebe(t.slice(5,-1));return e===rf?"":e}var jbe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Cbe=["dx","dy","angle","className","breakAll"];function LE(){return LE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},LE.apply(this,arguments)}function BM(t,e){if(t==null)return{};var n=Tbe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Tbe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function UM(t,e){return Dbe(t)||kbe(t,e)||Nbe(t,e)||Pbe()}function Pbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nbe(t,e){if(t){if(typeof t=="string")return WM(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WM(t,e)}}function WM(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function kbe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function Dbe(t){if(Array.isArray(t))return t}var CB=/[ \f\n\r\t\v\u2028\u2029]+/,TB=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var s=[];gt(n)||(r?s=n.toString().split(""):s=n.toString().split(CB));var a=s.map(function(c){return{word:c,width:mm(c,i).width}}),o=r?0:mm(" ",i).width;return{wordsWithComputedWidth:a,spaceWidth:o}}catch{return null}},Ibe=function(e,n,r,i,s){var a=e.maxLines,o=e.children,c=e.style,u=e.breakAll,d=Ce(a),f=o,h=function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return K.reduce(function(B,U){var F=U.word,q=U.width,Z=B[B.length-1];if(Z&&(i==null||s||Z.width+q+r<Number(i)))Z.words.push(F),Z.width+=q+r;else{var re={words:[F],width:q};B.push(re)}return B},[])},p=h(n),m=function(K){return K.reduce(function(B,U){return B.width>U.width?B:U})};if(!d)return p;for(var g="…",b=function(K){var B=f.slice(0,K),U=TB({breakAll:u,style:c,children:B+g}).wordsWithComputedWidth,F=h(U),q=F.length>a||m(F).width>Number(i);return[q,F]},x=0,w=f.length-1,_=0,E;x<=w&&_<=f.length-1;){var j=Math.floor((x+w)/2),T=j-1,A=b(T),C=UM(A,2),D=C[0],O=C[1],L=b(j),z=UM(L,1),M=z[0];if(!D&&!M&&(x=j+1),D&&M&&(w=j-1),!D&&M){E=O;break}_++}return E||p},HM=function(e){var n=gt(e)?[]:e.toString().split(CB);return[{words:n}]},Obe=function(e){var n=e.width,r=e.scaleToFit,i=e.children,s=e.style,a=e.breakAll,o=e.maxLines;if((n||r)&&!sc.isSsr){var c,u,d=TB({breakAll:a,children:i,style:s});if(d){var f=d.wordsWithComputedWidth,h=d.spaceWidth;c=f,u=h}else return HM(i);return Ibe({breakAll:a,children:i,maxLines:o,style:s},c,u,n,r)}return HM(i)},qM="#808080",Iu=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,s=i===void 0?0:i,a=e.lineHeight,o=a===void 0?"1em":a,c=e.capHeight,u=c===void 0?"0.71em":c,d=e.scaleToFit,f=d===void 0?!1:d,h=e.textAnchor,p=h===void 0?"start":h,m=e.verticalAnchor,g=m===void 0?"end":m,b=e.fill,x=b===void 0?qM:b,w=BM(e,jbe),_=P.useMemo(function(){return Obe({breakAll:w.breakAll,children:w.children,maxLines:w.maxLines,scaleToFit:f,style:w.style,width:w.width})},[w.breakAll,w.children,w.maxLines,f,w.style,w.width]),E=w.dx,j=w.dy,T=w.angle,A=w.className,C=w.breakAll,D=BM(w,Cbe);if(!Ar(r)||!Ar(s))return null;var O=r+(Ce(E)?E:0),L=s+(Ce(j)?j:0),z;switch(g){case"start":z=z_("calc(".concat(u,")"));break;case"middle":z=z_("calc(".concat((_.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:z=z_("calc(".concat(_.length-1," * -").concat(o,")"));break}var M=[];if(f){var G=_[0].width,K=w.width;M.push("scale(".concat((Ce(K)?K/G:1)/G,")"))}return T&&M.push("rotate(".concat(T,", ").concat(O,", ").concat(L,")")),M.length&&(D.transform=M.join(" ")),Y.createElement("text",LE({},et(D,!0),{x:O,y:L,className:St("recharts-text",A),textAnchor:p,fill:x.includes("url")?qM:x}),_.map(function(B,U){var F=B.words.join(C?"":" ");return Y.createElement("tspan",{x:O,dy:U===0?z:o,key:"".concat(F,"-").concat(U)},F)}))};function zl(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Mbe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function rP(t){let e,n,r;t.length!==2?(e=zl,n=(o,c)=>zl(t(o),c),r=(o,c)=>t(o)-c):(e=t===zl||t===Mbe?t:Rbe,n=t,r=t);function i(o,c,u=0,d=o.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;n(o[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(o,c,u=0,d=o.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;n(o[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function a(o,c,u=0,d=o.length){const f=i(o,c,u,d-1);return f>u&&r(o[f-1],c)>-r(o[f],c)?f-1:f}return{left:i,center:a,right:s}}function Rbe(){return 0}function PB(t){return t===null?NaN:+t}function*Lbe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const zbe=rP(zl),bv=zbe.right;rP(PB).center;class KM extends Map{constructor(e,n=Vbe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(GM(this,e))}has(e){return super.has(GM(this,e))}set(e,n){return super.set($be(this,e),n)}delete(e){return super.delete(Fbe(this,e))}}function GM({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function $be({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Fbe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Vbe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Bbe(t=zl){if(t===zl)return NB;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function NB(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Ube=Math.sqrt(50),Wbe=Math.sqrt(10),Hbe=Math.sqrt(2);function xb(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=Ube?10:s>=Wbe?5:s>=Hbe?2:1;let o,c,u;return i<0?(u=Math.pow(10,-i)/a,o=Math.round(t*u),c=Math.round(e*u),o/u<t&&++o,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*a,o=Math.round(t/u),c=Math.round(e/u),o*u<t&&++o,c*u>e&&--c),c<o&&.5<=n&&n<2?xb(t,e,n*2):[o,c,u]}function zE(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,a]=r?xb(e,t,n):xb(t,e,n);if(!(s>=i))return[];const o=s-i+1,c=new Array(o);if(r)if(a<0)for(let u=0;u<o;++u)c[u]=(s-u)/-a;else for(let u=0;u<o;++u)c[u]=(s-u)*a;else if(a<0)for(let u=0;u<o;++u)c[u]=(i+u)/-a;else for(let u=0;u<o;++u)c[u]=(i+u)*a;return c}function $E(t,e,n){return e=+e,t=+t,n=+n,xb(t,e,n)[2]}function FE(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?$E(e,t,n):$E(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function YM(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function QM(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function kB(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?NB:Bbe(i);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),p=Math.max(n,Math.floor(e-u*f/c+h)),m=Math.min(r,Math.floor(e+(c-u)*f/c+h));kB(t,e,p,m,i)}const s=t[e];let a=n,o=r;for(Cp(t,n,e),i(t[r],s)>0&&Cp(t,n,r);a<o;){for(Cp(t,a,o),++a,--o;i(t[a],s)<0;)++a;for(;i(t[o],s)>0;)--o}i(t[n],s)===0?Cp(t,n,o):(++o,Cp(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function Cp(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function qbe(t,e,n){if(t=Float64Array.from(Lbe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return QM(t);if(e>=1)return YM(t);var r,i=(r-1)*e,s=Math.floor(i),a=YM(kB(t,s).subarray(0,s+1)),o=QM(t.subarray(s+1));return a+(o-a)*(i-s)}}function Kbe(t,e,n=PB){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),a=+n(t[s],s,t),o=+n(t[s+1],s+1,t);return a+(o-a)*(i-s)}}function Gbe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function Rs(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Wo(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const VE=Symbol("implicit");function iP(){var t=new KM,e=[],n=[],r=VE;function i(s){let a=t.get(s);if(a===void 0){if(r!==VE)return r;t.set(s,a=e.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new KM;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return iP(e,n).unknown(r)},Rs.apply(i,arguments),i}function gg(){var t=iP().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,a,o=!1,c=0,u=0,d=.5;delete t.unknown;function f(){var h=e().length,p=i<r,m=p?i:r,g=p?r:i;s=(g-m)/Math.max(1,h-c+u*2),o&&(s=Math.floor(s)),m+=(g-m-s*(h-c))*d,a=s*(1-c),o&&(m=Math.round(m),a=Math.round(a));var b=Gbe(h).map(function(x){return m+s*x});return n(p?b.reverse():b)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,o=!0,f()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(h){return arguments.length?(o=!!h,f()):o},t.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},t.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},t.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},t.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},t.copy=function(){return gg(e(),[r,i]).round(o).paddingInner(c).paddingOuter(u).align(d)},Rs.apply(f(),arguments)}function DB(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return DB(e())},t}function gm(){return DB(gg.apply(null,arguments).paddingInner(1))}function sP(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function IB(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function xv(){}var vg=.7,wb=1/vg,xf="\\s*([+-]?\\d+)\\s*",yg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$a="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ybe=/^#([0-9a-f]{3,8})$/,Qbe=new RegExp(`^rgb\\(${xf},${xf},${xf}\\)$`),Xbe=new RegExp(`^rgb\\(${$a},${$a},${$a}\\)$`),Zbe=new RegExp(`^rgba\\(${xf},${xf},${xf},${yg}\\)$`),Jbe=new RegExp(`^rgba\\(${$a},${$a},${$a},${yg}\\)$`),exe=new RegExp(`^hsl\\(${yg},${$a},${$a}\\)$`),txe=new RegExp(`^hsla\\(${yg},${$a},${$a},${yg}\\)$`),XM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};sP(xv,bg,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ZM,formatHex:ZM,formatHex8:nxe,formatHsl:rxe,formatRgb:JM,toString:JM});function ZM(){return this.rgb().formatHex()}function nxe(){return this.rgb().formatHex8()}function rxe(){return OB(this).formatHsl()}function JM(){return this.rgb().formatRgb()}function bg(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ybe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?eR(e):n===3?new Oi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?gy(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?gy(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Qbe.exec(t))?new Oi(e[1],e[2],e[3],1):(e=Xbe.exec(t))?new Oi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Zbe.exec(t))?gy(e[1],e[2],e[3],e[4]):(e=Jbe.exec(t))?gy(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=exe.exec(t))?rR(e[1],e[2]/100,e[3]/100,1):(e=txe.exec(t))?rR(e[1],e[2]/100,e[3]/100,e[4]):XM.hasOwnProperty(t)?eR(XM[t]):t==="transparent"?new Oi(NaN,NaN,NaN,0):null}function eR(t){return new Oi(t>>16&255,t>>8&255,t&255,1)}function gy(t,e,n,r){return r<=0&&(t=e=n=NaN),new Oi(t,e,n,r)}function ixe(t){return t instanceof xv||(t=bg(t)),t?(t=t.rgb(),new Oi(t.r,t.g,t.b,t.opacity)):new Oi}function BE(t,e,n,r){return arguments.length===1?ixe(t):new Oi(t,e,n,r??1)}function Oi(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}sP(Oi,BE,IB(xv,{brighter(t){return t=t==null?wb:Math.pow(wb,t),new Oi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?vg:Math.pow(vg,t),new Oi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Oi(gu(this.r),gu(this.g),gu(this.b),_b(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:tR,formatHex:tR,formatHex8:sxe,formatRgb:nR,toString:nR}));function tR(){return`#${ru(this.r)}${ru(this.g)}${ru(this.b)}`}function sxe(){return`#${ru(this.r)}${ru(this.g)}${ru(this.b)}${ru((isNaN(this.opacity)?1:this.opacity)*255)}`}function nR(){const t=_b(this.opacity);return`${t===1?"rgb(":"rgba("}${gu(this.r)}, ${gu(this.g)}, ${gu(this.b)}${t===1?")":`, ${t})`}`}function _b(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function gu(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ru(t){return t=gu(t),(t<16?"0":"")+t.toString(16)}function rR(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Zs(t,e,n,r)}function OB(t){if(t instanceof Zs)return new Zs(t.h,t.s,t.l,t.opacity);if(t instanceof xv||(t=bg(t)),!t)return new Zs;if(t instanceof Zs)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,o=s-i,c=(s+i)/2;return o?(e===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-e)/o+2:a=(e-n)/o+4,o/=c<.5?s+i:2-s-i,a*=60):o=c>0&&c<1?0:a,new Zs(a,o,c,t.opacity)}function axe(t,e,n,r){return arguments.length===1?OB(t):new Zs(t,e,n,r??1)}function Zs(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}sP(Zs,axe,IB(xv,{brighter(t){return t=t==null?wb:Math.pow(wb,t),new Zs(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?vg:Math.pow(vg,t),new Zs(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Oi($_(t>=240?t-240:t+120,i,r),$_(t,i,r),$_(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Zs(iR(this.h),vy(this.s),vy(this.l),_b(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=_b(this.opacity);return`${t===1?"hsl(":"hsla("}${iR(this.h)}, ${vy(this.s)*100}%, ${vy(this.l)*100}%${t===1?")":`, ${t})`}`}}));function iR(t){return t=(t||0)%360,t<0?t+360:t}function vy(t){return Math.max(0,Math.min(1,t||0))}function $_(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const aP=t=>()=>t;function oxe(t,e){return function(n){return t+n*e}}function lxe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function cxe(t){return(t=+t)==1?MB:function(e,n){return n-e?lxe(e,n,t):aP(isNaN(e)?n:e)}}function MB(t,e){var n=e-t;return n?oxe(t,n):aP(isNaN(t)?e:t)}const sR=function t(e){var n=cxe(e);function r(i,s){var a=n((i=BE(i)).r,(s=BE(s)).r),o=n(i.g,s.g),c=n(i.b,s.b),u=MB(i.opacity,s.opacity);return function(d){return i.r=a(d),i.g=o(d),i.b=c(d),i.opacity=u(d),i+""}}return r.gamma=t,r}(1);function uxe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function dxe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function fxe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=Hh(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function hxe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Sb(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function pxe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Hh(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var UE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,F_=new RegExp(UE.source,"g");function mxe(t){return function(){return t}}function gxe(t){return function(e){return t(e)+""}}function vxe(t,e){var n=UE.lastIndex=F_.lastIndex=0,r,i,s,a=-1,o=[],c=[];for(t=t+"",e=e+"";(r=UE.exec(t))&&(i=F_.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,c.push({i:a,x:Sb(r,i)})),n=F_.lastIndex;return n<e.length&&(s=e.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?c[0]?gxe(c[0].x):mxe(e):(e=c.length,function(u){for(var d=0,f;d<e;++d)o[(f=c[d]).i]=f.x(u);return o.join("")})}function Hh(t,e){var n=typeof e,r;return e==null||n==="boolean"?aP(e):(n==="number"?Sb:n==="string"?(r=bg(e))?(e=r,sR):vxe:e instanceof bg?sR:e instanceof Date?hxe:dxe(e)?uxe:Array.isArray(e)?fxe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?pxe:Sb)(t,e)}function oP(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function yxe(t,e){e===void 0&&(e=t,t=Hh);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(a){var o=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return s[o](a-o)}}function bxe(t){return function(){return t}}function Ab(t){return+t}var aR=[0,1];function Si(t){return t}function WE(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:bxe(isNaN(e)?NaN:.5)}function xxe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function wxe(t,e,n){var r=t[0],i=t[1],s=e[0],a=e[1];return i<r?(r=WE(i,r),s=n(a,s)):(r=WE(r,i),s=n(s,a)),function(o){return s(r(o))}}function _xe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=WE(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(o){var c=bv(t,o,1,r)-1;return s[c](i[c](o))}}function wv(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Rw(){var t=aR,e=aR,n=Hh,r,i,s,a=Si,o,c,u;function d(){var h=Math.min(t.length,e.length);return a!==Si&&(a=xxe(t[0],t[h-1])),o=h>2?_xe:wxe,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(c||(c=o(t.map(r),e,n)))(r(a(h)))}return f.invert=function(h){return a(i((u||(u=o(e,t.map(r),Sb)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,Ab),d()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),d()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=oP,d()},f.clamp=function(h){return arguments.length?(a=h?!0:Si,d()):a!==Si},f.interpolate=function(h){return arguments.length?(n=h,d()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,p){return r=h,i=p,d()}}function lP(){return Rw()(Si,Si)}function Sxe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Eb(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Jf(t){return t=Eb(Math.abs(t)),t?t[1]:NaN}function Axe(t,e){return function(n,r){for(var i=n.length,s=[],a=0,o=t[0],c=0;i>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),s.push(n.substring(i-=o,i+o)),!((c+=o+1)>r));)o=t[a=(a+1)%t.length];return s.reverse().join(e)}}function Exe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var jxe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function xg(t){if(!(e=jxe.exec(t)))throw new Error("invalid format: "+t);var e;return new cP({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}xg.prototype=cP.prototype;function cP(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}cP.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Cxe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var RB;function Txe(t,e){var n=Eb(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(RB=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Eb(t,Math.max(0,e+s-1))[0]}function oR(t,e){var n=Eb(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const lR={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Sxe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>oR(t*100,e),r:oR,s:Txe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function cR(t){return t}var uR=Array.prototype.map,dR=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Pxe(t){var e=t.grouping===void 0||t.thousands===void 0?cR:Axe(uR.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?cR:Exe(uR.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(f){f=xg(f);var h=f.fill,p=f.align,m=f.sign,g=f.symbol,b=f.zero,x=f.width,w=f.comma,_=f.precision,E=f.trim,j=f.type;j==="n"?(w=!0,j="g"):lR[j]||(_===void 0&&(_=12),E=!0,j="g"),(b||h==="0"&&p==="=")&&(b=!0,h="0",p="=");var T=g==="$"?n:g==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",A=g==="$"?r:/[%p]/.test(j)?a:"",C=lR[j],D=/[defgprs%]/.test(j);_=_===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function O(L){var z=T,M=A,G,K,B;if(j==="c")M=C(L)+M,L="";else{L=+L;var U=L<0||1/L<0;if(L=isNaN(L)?c:C(Math.abs(L),_),E&&(L=Cxe(L)),U&&+L==0&&m!=="+"&&(U=!1),z=(U?m==="("?m:o:m==="-"||m==="("?"":m)+z,M=(j==="s"?dR[8+RB/3]:"")+M+(U&&m==="("?")":""),D){for(G=-1,K=L.length;++G<K;)if(B=L.charCodeAt(G),48>B||B>57){M=(B===46?i+L.slice(G+1):L.slice(G))+M,L=L.slice(0,G);break}}}w&&!b&&(L=e(L,1/0));var F=z.length+L.length+M.length,q=F<x?new Array(x-F+1).join(h):"";switch(w&&b&&(L=e(q+L,q.length?x-M.length:1/0),q=""),p){case"<":L=z+L+M+q;break;case"=":L=z+q+L+M;break;case"^":L=q.slice(0,F=q.length>>1)+z+L+M+q.slice(F);break;default:L=q+z+L+M;break}return s(L)}return O.toString=function(){return f+""},O}function d(f,h){var p=u((f=xg(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor(Jf(h)/3)))*3,g=Math.pow(10,-m),b=dR[8+m/3];return function(x){return p(g*x)+b}}return{format:u,formatPrefix:d}}var yy,uP,LB;Nxe({thousands:",",grouping:[3],currency:["$",""]});function Nxe(t){return yy=Pxe(t),uP=yy.format,LB=yy.formatPrefix,yy}function kxe(t){return Math.max(0,-Jf(Math.abs(t)))}function Dxe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Jf(e)/3)))*3-Jf(Math.abs(t)))}function Ixe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Jf(e)-Jf(t))+1}function zB(t,e,n,r){var i=FE(t,e,n),s;switch(r=xg(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=Dxe(i,a))&&(r.precision=s),LB(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Ixe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=kxe(i))&&(r.precision=s-(r.type==="%")*2);break}}return uP(r)}function ac(t){var e=t.domain;return t.ticks=function(n){var r=e();return zE(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return zB(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,a=r[i],o=r[s],c,u,d=10;for(o<a&&(u=a,a=o,o=u,u=i,i=s,s=u);d-- >0;){if(u=$E(a,o,n),u===c)return r[i]=a,r[s]=o,e(r);if(u>0)a=Math.floor(a/u)*u,o=Math.ceil(o/u)*u;else if(u<0)a=Math.ceil(a*u)/u,o=Math.floor(o*u)/u;else break;c=u}return t},t}function jb(){var t=lP();return t.copy=function(){return wv(t,jb())},Rs.apply(t,arguments),ac(t)}function $B(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Ab),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return $B(t).unknown(e)},t=arguments.length?Array.from(t,Ab):[0,1],ac(n)}function FB(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],a;return s<i&&(a=n,n=r,r=a,a=i,i=s,s=a),t[n]=e.floor(i),t[r]=e.ceil(s),t}function fR(t){return Math.log(t)}function hR(t){return Math.exp(t)}function Oxe(t){return-Math.log(-t)}function Mxe(t){return-Math.exp(-t)}function Rxe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Lxe(t){return t===10?Rxe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function zxe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function pR(t){return(e,n)=>-t(-e,n)}function dP(t){const e=t(fR,hR),n=e.domain;let r=10,i,s;function a(){return i=zxe(r),s=Lxe(r),n()[0]<0?(i=pR(i),s=pR(s),t(Oxe,Mxe)):t(fR,hR),e}return e.base=function(o){return arguments.length?(r=+o,a()):r},e.domain=function(o){return arguments.length?(n(o),a()):n()},e.ticks=o=>{const c=n();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=i(u),p=i(d),m,g;const b=o==null?10:+o;let x=[];if(!(r%1)&&p-h<b){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(m=1;m<r;++m)if(g=h<0?m/s(-h):m*s(h),!(g<u)){if(g>d)break;x.push(g)}}else for(;h<=p;++h)for(m=r-1;m>=1;--m)if(g=h>0?m/s(-h):m*s(h),!(g<u)){if(g>d)break;x.push(g)}x.length*2<b&&(x=zE(u,d,b))}else x=zE(h,p,Math.min(p-h,b)).map(s);return f?x.reverse():x},e.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=xg(c)).precision==null&&(c.trim=!0),c=uP(c)),o===1/0)return c;const u=Math.max(1,r*o/e.ticks().length);return d=>{let f=d/s(Math.round(i(d)));return f*r<r-.5&&(f*=r),f<=u?c(d):""}},e.nice=()=>n(FB(n(),{floor:o=>s(Math.floor(i(o))),ceil:o=>s(Math.ceil(i(o)))})),e}function VB(){const t=dP(Rw()).domain([1,10]);return t.copy=()=>wv(t,VB()).base(t.base()),Rs.apply(t,arguments),t}function mR(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function gR(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function fP(t){var e=1,n=t(mR(e),gR(e));return n.constant=function(r){return arguments.length?t(mR(e=+r),gR(e)):e},ac(n)}function BB(){var t=fP(Rw());return t.copy=function(){return wv(t,BB()).constant(t.constant())},Rs.apply(t,arguments)}function vR(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function $xe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Fxe(t){return t<0?-t*t:t*t}function hP(t){var e=t(Si,Si),n=1;function r(){return n===1?t(Si,Si):n===.5?t($xe,Fxe):t(vR(n),vR(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},ac(e)}function pP(){var t=hP(Rw());return t.copy=function(){return wv(t,pP()).exponent(t.exponent())},Rs.apply(t,arguments),t}function Vxe(){return pP.apply(null,arguments).exponent(.5)}function yR(t){return Math.sign(t)*t*t}function Bxe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function UB(){var t=lP(),e=[0,1],n=!1,r;function i(s){var a=Bxe(t(s));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(s){return t.invert(yR(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,Ab)).map(yR)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return UB(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Rs.apply(i,arguments),ac(i)}function WB(){var t=[],e=[],n=[],r;function i(){var a=0,o=Math.max(1,e.length);for(n=new Array(o-1);++a<o;)n[a-1]=Kbe(t,a/o);return s}function s(a){return a==null||isNaN(a=+a)?r:e[bv(n,a)]}return s.invertExtent=function(a){var o=e.indexOf(a);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let o of a)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(zl),i()},s.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return WB().domain(t).range(e).unknown(r)},Rs.apply(s,arguments)}function HB(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function a(c){return c!=null&&c<=c?i[bv(r,c,0,n)]:s}function o(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return a}return a.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,o()):[t,e]},a.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,o()):i.slice()},a.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},a.unknown=function(c){return arguments.length&&(s=c),a},a.thresholds=function(){return r.slice()},a.copy=function(){return HB().domain([t,e]).range(i).unknown(s)},Rs.apply(ac(a),arguments)}function qB(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[bv(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var a=e.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return qB().domain(t).range(e).unknown(n)},Rs.apply(i,arguments)}const V_=new Date,B_=new Date;function jr(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const a=i(s),o=i.ceil(s);return s-a<o-s?a:o},i.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,o)=>{const c=[];if(s=i.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return c;let u;do c.push(u=new Date(+s)),e(s,o),t(s);while(u<s&&s<a);return c},i.filter=s=>jr(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!s(a););else for(;--o>=0;)for(;e(a,1),!s(a););}),n&&(i.count=(s,a)=>(V_.setTime(+s),B_.setTime(+a),t(V_),t(B_),Math.floor(n(V_,B_))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?a=>r(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const Cb=jr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Cb.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?jr(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Cb);Cb.range;const vo=1e3,Ts=vo*60,yo=Ts*60,Oo=yo*24,mP=Oo*7,bR=Oo*30,U_=Oo*365,iu=jr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*vo)},(t,e)=>(e-t)/vo,t=>t.getUTCSeconds());iu.range;const gP=jr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*vo)},(t,e)=>{t.setTime(+t+e*Ts)},(t,e)=>(e-t)/Ts,t=>t.getMinutes());gP.range;const vP=jr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ts)},(t,e)=>(e-t)/Ts,t=>t.getUTCMinutes());vP.range;const yP=jr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*vo-t.getMinutes()*Ts)},(t,e)=>{t.setTime(+t+e*yo)},(t,e)=>(e-t)/yo,t=>t.getHours());yP.range;const bP=jr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*yo)},(t,e)=>(e-t)/yo,t=>t.getUTCHours());bP.range;const _v=jr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ts)/Oo,t=>t.getDate()-1);_v.range;const Lw=jr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Oo,t=>t.getUTCDate()-1);Lw.range;const KB=jr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Oo,t=>Math.floor(t/Oo));KB.range;function Ju(t){return jr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ts)/mP)}const zw=Ju(0),Tb=Ju(1),Uxe=Ju(2),Wxe=Ju(3),eh=Ju(4),Hxe=Ju(5),qxe=Ju(6);zw.range;Tb.range;Uxe.range;Wxe.range;eh.range;Hxe.range;qxe.range;function ed(t){return jr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/mP)}const $w=ed(0),Pb=ed(1),Kxe=ed(2),Gxe=ed(3),th=ed(4),Yxe=ed(5),Qxe=ed(6);$w.range;Pb.range;Kxe.range;Gxe.range;th.range;Yxe.range;Qxe.range;const xP=jr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());xP.range;const wP=jr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());wP.range;const Mo=jr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Mo.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:jr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Mo.range;const Ro=jr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ro.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:jr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Ro.range;function GB(t,e,n,r,i,s){const a=[[iu,1,vo],[iu,5,5*vo],[iu,15,15*vo],[iu,30,30*vo],[s,1,Ts],[s,5,5*Ts],[s,15,15*Ts],[s,30,30*Ts],[i,1,yo],[i,3,3*yo],[i,6,6*yo],[i,12,12*yo],[r,1,Oo],[r,2,2*Oo],[n,1,mP],[e,1,bR],[e,3,3*bR],[t,1,U_]];function o(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const p=f&&typeof f.range=="function"?f:c(u,d,f),m=p?p.range(u,+d+1):[];return h?m.reverse():m}function c(u,d,f){const h=Math.abs(d-u)/f,p=rP(([,,b])=>b).right(a,h);if(p===a.length)return t.every(FE(u/U_,d/U_,f));if(p===0)return Cb.every(Math.max(FE(u,d,f),1));const[m,g]=a[h/a[p-1][2]<a[p][2]/h?p-1:p];return m.every(g)}return[o,c]}const[Xxe,Zxe]=GB(Ro,wP,$w,KB,bP,vP),[Jxe,ewe]=GB(Mo,xP,zw,_v,yP,gP);function W_(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function H_(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Tp(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function twe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,a=t.shortDays,o=t.months,c=t.shortMonths,u=Pp(i),d=Np(i),f=Pp(s),h=Np(s),p=Pp(a),m=Np(a),g=Pp(o),b=Np(o),x=Pp(c),w=Np(c),_={a:U,A:F,b:q,B:Z,c:null,d:ER,e:ER,f:Awe,g:Owe,G:Rwe,H:wwe,I:_we,j:Swe,L:YB,m:Ewe,M:jwe,p:re,q:he,Q:TR,s:PR,S:Cwe,u:Twe,U:Pwe,V:Nwe,w:kwe,W:Dwe,x:null,X:null,y:Iwe,Y:Mwe,Z:Lwe,"%":CR},E={a:ye,A:De,b:We,B:Je,c:null,d:jR,e:jR,f:Vwe,g:Xwe,G:Jwe,H:zwe,I:$we,j:Fwe,L:XB,m:Bwe,M:Uwe,p:jt,q:dt,Q:TR,s:PR,S:Wwe,u:Hwe,U:qwe,V:Kwe,w:Gwe,W:Ywe,x:null,X:null,y:Qwe,Y:Zwe,Z:e1e,"%":CR},j={a:O,A:L,b:z,B:M,c:G,d:SR,e:SR,f:vwe,g:_R,G:wR,H:AR,I:AR,j:hwe,L:gwe,m:fwe,M:pwe,p:D,q:dwe,Q:bwe,s:xwe,S:mwe,u:awe,U:owe,V:lwe,w:swe,W:cwe,x:K,X:B,y:_R,Y:wR,Z:uwe,"%":ywe};_.x=T(n,_),_.X=T(r,_),_.c=T(e,_),E.x=T(n,E),E.X=T(r,E),E.c=T(e,E);function T(xe,Ye){return function(Qe){var fe=[],pt=-1,ft=0,Le=xe.length,Ve,cn,gr;for(Qe instanceof Date||(Qe=new Date(+Qe));++pt<Le;)xe.charCodeAt(pt)===37&&(fe.push(xe.slice(ft,pt)),(cn=xR[Ve=xe.charAt(++pt)])!=null?Ve=xe.charAt(++pt):cn=Ve==="e"?" ":"0",(gr=Ye[Ve])&&(Ve=gr(Qe,cn)),fe.push(Ve),ft=pt+1);return fe.push(xe.slice(ft,pt)),fe.join("")}}function A(xe,Ye){return function(Qe){var fe=Tp(1900,void 0,1),pt=C(fe,xe,Qe+="",0),ft,Le;if(pt!=Qe.length)return null;if("Q"in fe)return new Date(fe.Q);if("s"in fe)return new Date(fe.s*1e3+("L"in fe?fe.L:0));if(Ye&&!("Z"in fe)&&(fe.Z=0),"p"in fe&&(fe.H=fe.H%12+fe.p*12),fe.m===void 0&&(fe.m="q"in fe?fe.q:0),"V"in fe){if(fe.V<1||fe.V>53)return null;"w"in fe||(fe.w=1),"Z"in fe?(ft=H_(Tp(fe.y,0,1)),Le=ft.getUTCDay(),ft=Le>4||Le===0?Pb.ceil(ft):Pb(ft),ft=Lw.offset(ft,(fe.V-1)*7),fe.y=ft.getUTCFullYear(),fe.m=ft.getUTCMonth(),fe.d=ft.getUTCDate()+(fe.w+6)%7):(ft=W_(Tp(fe.y,0,1)),Le=ft.getDay(),ft=Le>4||Le===0?Tb.ceil(ft):Tb(ft),ft=_v.offset(ft,(fe.V-1)*7),fe.y=ft.getFullYear(),fe.m=ft.getMonth(),fe.d=ft.getDate()+(fe.w+6)%7)}else("W"in fe||"U"in fe)&&("w"in fe||(fe.w="u"in fe?fe.u%7:"W"in fe?1:0),Le="Z"in fe?H_(Tp(fe.y,0,1)).getUTCDay():W_(Tp(fe.y,0,1)).getDay(),fe.m=0,fe.d="W"in fe?(fe.w+6)%7+fe.W*7-(Le+5)%7:fe.w+fe.U*7-(Le+6)%7);return"Z"in fe?(fe.H+=fe.Z/100|0,fe.M+=fe.Z%100,H_(fe)):W_(fe)}}function C(xe,Ye,Qe,fe){for(var pt=0,ft=Ye.length,Le=Qe.length,Ve,cn;pt<ft;){if(fe>=Le)return-1;if(Ve=Ye.charCodeAt(pt++),Ve===37){if(Ve=Ye.charAt(pt++),cn=j[Ve in xR?Ye.charAt(pt++):Ve],!cn||(fe=cn(xe,Qe,fe))<0)return-1}else if(Ve!=Qe.charCodeAt(fe++))return-1}return fe}function D(xe,Ye,Qe){var fe=u.exec(Ye.slice(Qe));return fe?(xe.p=d.get(fe[0].toLowerCase()),Qe+fe[0].length):-1}function O(xe,Ye,Qe){var fe=p.exec(Ye.slice(Qe));return fe?(xe.w=m.get(fe[0].toLowerCase()),Qe+fe[0].length):-1}function L(xe,Ye,Qe){var fe=f.exec(Ye.slice(Qe));return fe?(xe.w=h.get(fe[0].toLowerCase()),Qe+fe[0].length):-1}function z(xe,Ye,Qe){var fe=x.exec(Ye.slice(Qe));return fe?(xe.m=w.get(fe[0].toLowerCase()),Qe+fe[0].length):-1}function M(xe,Ye,Qe){var fe=g.exec(Ye.slice(Qe));return fe?(xe.m=b.get(fe[0].toLowerCase()),Qe+fe[0].length):-1}function G(xe,Ye,Qe){return C(xe,e,Ye,Qe)}function K(xe,Ye,Qe){return C(xe,n,Ye,Qe)}function B(xe,Ye,Qe){return C(xe,r,Ye,Qe)}function U(xe){return a[xe.getDay()]}function F(xe){return s[xe.getDay()]}function q(xe){return c[xe.getMonth()]}function Z(xe){return o[xe.getMonth()]}function re(xe){return i[+(xe.getHours()>=12)]}function he(xe){return 1+~~(xe.getMonth()/3)}function ye(xe){return a[xe.getUTCDay()]}function De(xe){return s[xe.getUTCDay()]}function We(xe){return c[xe.getUTCMonth()]}function Je(xe){return o[xe.getUTCMonth()]}function jt(xe){return i[+(xe.getUTCHours()>=12)]}function dt(xe){return 1+~~(xe.getUTCMonth()/3)}return{format:function(xe){var Ye=T(xe+="",_);return Ye.toString=function(){return xe},Ye},parse:function(xe){var Ye=A(xe+="",!1);return Ye.toString=function(){return xe},Ye},utcFormat:function(xe){var Ye=T(xe+="",E);return Ye.toString=function(){return xe},Ye},utcParse:function(xe){var Ye=A(xe+="",!0);return Ye.toString=function(){return xe},Ye}}}var xR={"-":"",_:" ",0:"0"},$r=/^\s*\d+/,nwe=/^%/,rwe=/[\\^$*+?|[\]().{}]/g;function Kt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function iwe(t){return t.replace(rwe,"\\$&")}function Pp(t){return new RegExp("^(?:"+t.map(iwe).join("|")+")","i")}function Np(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function swe(t,e,n){var r=$r.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function awe(t,e,n){var r=$r.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function owe(t,e,n){var r=$r.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function lwe(t,e,n){var r=$r.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function cwe(t,e,n){var r=$r.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function wR(t,e,n){var r=$r.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function _R(t,e,n){var r=$r.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function uwe(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function dwe(t,e,n){var r=$r.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function fwe(t,e,n){var r=$r.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function SR(t,e,n){var r=$r.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function hwe(t,e,n){var r=$r.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function AR(t,e,n){var r=$r.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function pwe(t,e,n){var r=$r.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function mwe(t,e,n){var r=$r.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function gwe(t,e,n){var r=$r.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function vwe(t,e,n){var r=$r.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function ywe(t,e,n){var r=nwe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function bwe(t,e,n){var r=$r.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function xwe(t,e,n){var r=$r.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function ER(t,e){return Kt(t.getDate(),e,2)}function wwe(t,e){return Kt(t.getHours(),e,2)}function _we(t,e){return Kt(t.getHours()%12||12,e,2)}function Swe(t,e){return Kt(1+_v.count(Mo(t),t),e,3)}function YB(t,e){return Kt(t.getMilliseconds(),e,3)}function Awe(t,e){return YB(t,e)+"000"}function Ewe(t,e){return Kt(t.getMonth()+1,e,2)}function jwe(t,e){return Kt(t.getMinutes(),e,2)}function Cwe(t,e){return Kt(t.getSeconds(),e,2)}function Twe(t){var e=t.getDay();return e===0?7:e}function Pwe(t,e){return Kt(zw.count(Mo(t)-1,t),e,2)}function QB(t){var e=t.getDay();return e>=4||e===0?eh(t):eh.ceil(t)}function Nwe(t,e){return t=QB(t),Kt(eh.count(Mo(t),t)+(Mo(t).getDay()===4),e,2)}function kwe(t){return t.getDay()}function Dwe(t,e){return Kt(Tb.count(Mo(t)-1,t),e,2)}function Iwe(t,e){return Kt(t.getFullYear()%100,e,2)}function Owe(t,e){return t=QB(t),Kt(t.getFullYear()%100,e,2)}function Mwe(t,e){return Kt(t.getFullYear()%1e4,e,4)}function Rwe(t,e){var n=t.getDay();return t=n>=4||n===0?eh(t):eh.ceil(t),Kt(t.getFullYear()%1e4,e,4)}function Lwe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Kt(e/60|0,"0",2)+Kt(e%60,"0",2)}function jR(t,e){return Kt(t.getUTCDate(),e,2)}function zwe(t,e){return Kt(t.getUTCHours(),e,2)}function $we(t,e){return Kt(t.getUTCHours()%12||12,e,2)}function Fwe(t,e){return Kt(1+Lw.count(Ro(t),t),e,3)}function XB(t,e){return Kt(t.getUTCMilliseconds(),e,3)}function Vwe(t,e){return XB(t,e)+"000"}function Bwe(t,e){return Kt(t.getUTCMonth()+1,e,2)}function Uwe(t,e){return Kt(t.getUTCMinutes(),e,2)}function Wwe(t,e){return Kt(t.getUTCSeconds(),e,2)}function Hwe(t){var e=t.getUTCDay();return e===0?7:e}function qwe(t,e){return Kt($w.count(Ro(t)-1,t),e,2)}function ZB(t){var e=t.getUTCDay();return e>=4||e===0?th(t):th.ceil(t)}function Kwe(t,e){return t=ZB(t),Kt(th.count(Ro(t),t)+(Ro(t).getUTCDay()===4),e,2)}function Gwe(t){return t.getUTCDay()}function Ywe(t,e){return Kt(Pb.count(Ro(t)-1,t),e,2)}function Qwe(t,e){return Kt(t.getUTCFullYear()%100,e,2)}function Xwe(t,e){return t=ZB(t),Kt(t.getUTCFullYear()%100,e,2)}function Zwe(t,e){return Kt(t.getUTCFullYear()%1e4,e,4)}function Jwe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?th(t):th.ceil(t),Kt(t.getUTCFullYear()%1e4,e,4)}function e1e(){return"+0000"}function CR(){return"%"}function TR(t){return+t}function PR(t){return Math.floor(+t/1e3)}var Pd,JB,e9;t1e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function t1e(t){return Pd=twe(t),JB=Pd.format,Pd.parse,e9=Pd.utcFormat,Pd.utcParse,Pd}function n1e(t){return new Date(t)}function r1e(t){return t instanceof Date?+t:+new Date(+t)}function _P(t,e,n,r,i,s,a,o,c,u){var d=lP(),f=d.invert,h=d.domain,p=u(".%L"),m=u(":%S"),g=u("%I:%M"),b=u("%I %p"),x=u("%a %d"),w=u("%b %d"),_=u("%B"),E=u("%Y");function j(T){return(c(T)<T?p:o(T)<T?m:a(T)<T?g:s(T)<T?b:r(T)<T?i(T)<T?x:w:n(T)<T?_:E)(T)}return d.invert=function(T){return new Date(f(T))},d.domain=function(T){return arguments.length?h(Array.from(T,r1e)):h().map(n1e)},d.ticks=function(T){var A=h();return t(A[0],A[A.length-1],T??10)},d.tickFormat=function(T,A){return A==null?j:u(A)},d.nice=function(T){var A=h();return(!T||typeof T.range!="function")&&(T=e(A[0],A[A.length-1],T??10)),T?h(FB(A,T)):d},d.copy=function(){return wv(d,_P(t,e,n,r,i,s,a,o,c,u))},d}function i1e(){return Rs.apply(_P(Jxe,ewe,Mo,xP,zw,_v,yP,gP,iu,JB).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function s1e(){return Rs.apply(_P(Xxe,Zxe,Ro,wP,$w,Lw,bP,vP,iu,e9).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Fw(){var t=0,e=1,n,r,i,s,a=Si,o=!1,c;function u(f){return f==null||isNaN(f=+f)?c:a(i===0?.5:(f=(s(f)-n)*i,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(a=f,u):a};function d(f){return function(h){var p,m;return arguments.length?([p,m]=h,a=f(p,m),u):[a(0),a(1)]}}return u.range=d(Hh),u.rangeRound=d(oP),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),u}}function oc(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function t9(){var t=ac(Fw()(Si));return t.copy=function(){return oc(t,t9())},Wo.apply(t,arguments)}function n9(){var t=dP(Fw()).domain([1,10]);return t.copy=function(){return oc(t,n9()).base(t.base())},Wo.apply(t,arguments)}function r9(){var t=fP(Fw());return t.copy=function(){return oc(t,r9()).constant(t.constant())},Wo.apply(t,arguments)}function SP(){var t=hP(Fw());return t.copy=function(){return oc(t,SP()).exponent(t.exponent())},Wo.apply(t,arguments)}function a1e(){return SP.apply(null,arguments).exponent(.5)}function i9(){var t=[],e=Si;function n(r){if(r!=null&&!isNaN(r=+r))return e((bv(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(zl),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>qbe(t,s/r))},n.copy=function(){return i9(e).domain(t)},Wo.apply(n,arguments)}function Vw(){var t=0,e=.5,n=1,r=1,i,s,a,o,c,u=Si,d,f=!1,h;function p(g){return isNaN(g=+g)?h:(g=.5+((g=+d(g))-s)*(r*g<r*s?o:c),u(f?Math.max(0,Math.min(1,g)):g))}p.domain=function(g){return arguments.length?([t,e,n]=g,i=d(t=+t),s=d(e=+e),a=d(n=+n),o=i===s?0:.5/(s-i),c=s===a?0:.5/(a-s),r=s<i?-1:1,p):[t,e,n]},p.clamp=function(g){return arguments.length?(f=!!g,p):f},p.interpolator=function(g){return arguments.length?(u=g,p):u};function m(g){return function(b){var x,w,_;return arguments.length?([x,w,_]=b,u=yxe(g,[x,w,_]),p):[u(0),u(.5),u(1)]}}return p.range=m(Hh),p.rangeRound=m(oP),p.unknown=function(g){return arguments.length?(h=g,p):h},function(g){return d=g,i=g(t),s=g(e),a=g(n),o=i===s?0:.5/(s-i),c=s===a?0:.5/(a-s),r=s<i?-1:1,p}}function s9(){var t=ac(Vw()(Si));return t.copy=function(){return oc(t,s9())},Wo.apply(t,arguments)}function a9(){var t=dP(Vw()).domain([.1,1,10]);return t.copy=function(){return oc(t,a9()).base(t.base())},Wo.apply(t,arguments)}function o9(){var t=fP(Vw());return t.copy=function(){return oc(t,o9()).constant(t.constant())},Wo.apply(t,arguments)}function AP(){var t=hP(Vw());return t.copy=function(){return oc(t,AP()).exponent(t.exponent())},Wo.apply(t,arguments)}function o1e(){return AP.apply(null,arguments).exponent(.5)}const NR=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:gg,scaleDiverging:s9,scaleDivergingLog:a9,scaleDivergingPow:AP,scaleDivergingSqrt:o1e,scaleDivergingSymlog:o9,scaleIdentity:$B,scaleImplicit:VE,scaleLinear:jb,scaleLog:VB,scaleOrdinal:iP,scalePoint:gm,scalePow:pP,scaleQuantile:WB,scaleQuantize:HB,scaleRadial:UB,scaleSequential:t9,scaleSequentialLog:n9,scaleSequentialPow:SP,scaleSequentialQuantile:i9,scaleSequentialSqrt:a1e,scaleSequentialSymlog:r9,scaleSqrt:Vxe,scaleSymlog:BB,scaleThreshold:qB,scaleTime:i1e,scaleUtc:s1e,tickFormat:zB},Symbol.toStringTag,{value:"Module"}));var l1e=Rh;function c1e(t,e,n){for(var r=-1,i=t.length;++r<i;){var s=t[r],a=e(s);if(a!=null&&(o===void 0?a===a&&!l1e(a):n(a,o)))var o=a,c=s}return c}var Bw=c1e;function u1e(t,e){return t>e}var l9=u1e,d1e=Bw,f1e=l9,h1e=Wh;function p1e(t){return t&&t.length?d1e(t,h1e,f1e):void 0}var m1e=p1e;const _l=Qt(m1e);function g1e(t,e){return t<e}var c9=g1e,v1e=Bw,y1e=c9,b1e=Wh;function x1e(t){return t&&t.length?v1e(t,b1e,y1e):void 0}var w1e=x1e;const Uw=Qt(w1e);var _1e=zT,S1e=Ya,A1e=vB,E1e=Wi;function j1e(t,e){var n=E1e(t)?_1e:A1e;return n(t,S1e(e))}var C1e=j1e,T1e=mB,P1e=C1e;function N1e(t,e){return T1e(P1e(t,e),1)}var k1e=N1e;const D1e=Qt(k1e);var I1e=JT;function O1e(t,e){return I1e(t,e)}var M1e=O1e;const Ou=Qt(M1e);var qh=1e9,R1e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},jP,Nn=!0,Os="[DecimalError] ",vu=Os+"Invalid argument: ",EP=Os+"Exponent out of range: ",Kh=Math.floor,Uc=Math.pow,L1e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Zi,Ir=1e7,An=7,u9=9007199254740991,Nb=Kh(u9/An),Ke={};Ke.absoluteValue=Ke.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ke.comparedTo=Ke.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};Ke.decimalPlaces=Ke.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*An;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Ke.dividedBy=Ke.div=function(t){return Ao(this,new this.constructor(t))};Ke.dividedToIntegerBy=Ke.idiv=function(t){var e=this,n=e.constructor;return fn(Ao(e,new n(t),0,1),n.precision)};Ke.equals=Ke.eq=function(t){return!this.cmp(t)};Ke.exponent=function(){return mr(this)};Ke.greaterThan=Ke.gt=function(t){return this.cmp(t)>0};Ke.greaterThanOrEqualTo=Ke.gte=function(t){return this.cmp(t)>=0};Ke.isInteger=Ke.isint=function(){return this.e>this.d.length-2};Ke.isNegative=Ke.isneg=function(){return this.s<0};Ke.isPositive=Ke.ispos=function(){return this.s>0};Ke.isZero=function(){return this.s===0};Ke.lessThan=Ke.lt=function(t){return this.cmp(t)<0};Ke.lessThanOrEqualTo=Ke.lte=function(t){return this.cmp(t)<1};Ke.logarithm=Ke.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Zi))throw Error(Os+"NaN");if(n.s<1)throw Error(Os+(n.s?"NaN":"-Infinity"));return n.eq(Zi)?new r(0):(Nn=!1,e=Ao(wg(n,s),wg(t,s),s),Nn=!0,fn(e,i))};Ke.minus=Ke.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?h9(e,t):d9(e,(t.s=-t.s,t))};Ke.modulo=Ke.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Os+"NaN");return n.s?(Nn=!1,e=Ao(n,t,0,1).times(t),Nn=!0,n.minus(e)):fn(new r(n),i)};Ke.naturalExponential=Ke.exp=function(){return f9(this)};Ke.naturalLogarithm=Ke.ln=function(){return wg(this)};Ke.negated=Ke.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ke.plus=Ke.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?d9(e,t):h9(e,(t.s=-t.s,t))};Ke.precision=Ke.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(vu+t);if(e=mr(i)+1,r=i.d.length-1,n=r*An+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Ke.squareRoot=Ke.sqrt=function(){var t,e,n,r,i,s,a,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Os+"NaN")}for(t=mr(o),Nn=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=Na(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Kh((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=a=n+3;;)if(s=r,r=s.plus(Ao(o,s,a+2)).times(.5),Na(s.d).slice(0,a)===(e=Na(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(fn(s,n+1,0),s.times(s).eq(o)){r=s;break}}else if(e!="9999")break;a+=4}return Nn=!0,fn(r,n)};Ke.times=Ke.mul=function(t){var e,n,r,i,s,a,o,c,u,d=this,f=d.constructor,h=d.d,p=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,n=d.e+t.e,c=h.length,u=p.length,c<u&&(s=h,h=p,p=s,a=c,c=u,u=a),s=[],a=c+u,r=a;r--;)s.push(0);for(r=u;--r>=0;){for(e=0,i=c+r;i>r;)o=s[i]+p[r]*h[i-r-1]+e,s[i--]=o%Ir|0,e=o/Ir|0;s[i]=(s[i]+e)%Ir|0}for(;!s[--a];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,Nn?fn(t,f.precision):t};Ke.toDecimalPlaces=Ke.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Wa(t,0,qh),e===void 0?e=r.rounding:Wa(e,0,8),fn(n,t+mr(n)+1,e))};Ke.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Mu(r,!0):(Wa(t,0,qh),e===void 0?e=i.rounding:Wa(e,0,8),r=fn(new i(r),t+1,e),n=Mu(r,!0,t+1)),n};Ke.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?Mu(i):(Wa(t,0,qh),e===void 0?e=s.rounding:Wa(e,0,8),r=fn(new s(i),t+mr(i)+1,e),n=Mu(r.abs(),!1,t+mr(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ke.toInteger=Ke.toint=function(){var t=this,e=t.constructor;return fn(new e(t),mr(t)+1,e.rounding)};Ke.toNumber=function(){return+this};Ke.toPower=Ke.pow=function(t){var e,n,r,i,s,a,o=this,c=o.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(Zi);if(o=new c(o),!o.s){if(t.s<1)throw Error(Os+"Infinity");return o}if(o.eq(Zi))return o;if(r=c.precision,t.eq(Zi))return fn(o,r);if(e=t.e,n=t.d.length-1,a=e>=n,s=o.s,a){if((n=d<0?-d:d)<=u9){for(i=new c(Zi),e=Math.ceil(r/An+4),Nn=!1;n%2&&(i=i.times(o),DR(i.d,e)),n=Kh(n/2),n!==0;)o=o.times(o),DR(o.d,e);return Nn=!0,t.s<0?new c(Zi).div(i):fn(i,r)}}else if(s<0)throw Error(Os+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,Nn=!1,i=t.times(wg(o,r+u)),Nn=!0,i=f9(i),i.s=s,i};Ke.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=mr(i),r=Mu(i,n<=s.toExpNeg||n>=s.toExpPos)):(Wa(t,1,qh),e===void 0?e=s.rounding:Wa(e,0,8),i=fn(new s(i),t,e),n=mr(i),r=Mu(i,t<=n||n<=s.toExpNeg,t)),r};Ke.toSignificantDigits=Ke.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Wa(t,1,qh),e===void 0?e=r.rounding:Wa(e,0,8)),fn(new r(n),t,e)};Ke.toString=Ke.valueOf=Ke.val=Ke.toJSON=Ke[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=mr(t),n=t.constructor;return Mu(t,e<=n.toExpNeg||e>=n.toExpPos)};function d9(t,e){var n,r,i,s,a,o,c,u,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),Nn?fn(e,f):e;if(c=t.d,u=e.d,a=t.e,i=e.e,c=c.slice(),s=a-i,s){for(s<0?(r=c,s=-s,o=u.length):(r=u,i=a,o=c.length),a=Math.ceil(f/An),o=a>o?a+1:o+1,s>o&&(s=o,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(o=c.length,s=u.length,o-s<0&&(s=o,r=u,u=c,c=r),n=0;s;)n=(c[--s]=c[s]+u[s]+n)/Ir|0,c[s]%=Ir;for(n&&(c.unshift(n),++i),o=c.length;c[--o]==0;)c.pop();return e.d=c,e.e=i,Nn?fn(e,f):e}function Wa(t,e,n){if(t!==~~t||t<e||t>n)throw Error(vu+t)}function Na(t){var e,n,r,i=t.length-1,s="",a=t[0];if(i>0){for(s+=a,e=1;e<i;e++)r=t[e]+"",n=An-r.length,n&&(s+=pl(n)),s+=r;a=t[e],r=a+"",n=An-r.length,n&&(s+=pl(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var Ao=function(){function t(r,i){var s,a=0,o=r.length;for(r=r.slice();o--;)s=r[o]*i+a,r[o]=s%Ir|0,a=s/Ir|0;return a&&r.unshift(a),r}function e(r,i,s,a){var o,c;if(s!=a)c=s>a?1:-1;else for(o=c=0;o<s;o++)if(r[o]!=i[o]){c=r[o]>i[o]?1:-1;break}return c}function n(r,i,s){for(var a=0;s--;)r[s]-=a,a=r[s]<i[s]?1:0,r[s]=a*Ir+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,a){var o,c,u,d,f,h,p,m,g,b,x,w,_,E,j,T,A,C,D=r.constructor,O=r.s==i.s?1:-1,L=r.d,z=i.d;if(!r.s)return new D(r);if(!i.s)throw Error(Os+"Division by zero");for(c=r.e-i.e,A=z.length,j=L.length,p=new D(O),m=p.d=[],u=0;z[u]==(L[u]||0);)++u;if(z[u]>(L[u]||0)&&--c,s==null?w=s=D.precision:a?w=s+(mr(r)-mr(i))+1:w=s,w<0)return new D(0);if(w=w/An+2|0,u=0,A==1)for(d=0,z=z[0],w++;(u<j||d)&&w--;u++)_=d*Ir+(L[u]||0),m[u]=_/z|0,d=_%z|0;else{for(d=Ir/(z[0]+1)|0,d>1&&(z=t(z,d),L=t(L,d),A=z.length,j=L.length),E=A,g=L.slice(0,A),b=g.length;b<A;)g[b++]=0;C=z.slice(),C.unshift(0),T=z[0],z[1]>=Ir/2&&++T;do d=0,o=e(z,g,A,b),o<0?(x=g[0],A!=b&&(x=x*Ir+(g[1]||0)),d=x/T|0,d>1?(d>=Ir&&(d=Ir-1),f=t(z,d),h=f.length,b=g.length,o=e(f,g,h,b),o==1&&(d--,n(f,A<h?C:z,h))):(d==0&&(o=d=1),f=z.slice()),h=f.length,h<b&&f.unshift(0),n(g,f,b),o==-1&&(b=g.length,o=e(z,g,A,b),o<1&&(d++,n(g,A<b?C:z,b))),b=g.length):o===0&&(d++,g=[0]),m[u++]=d,o&&g[0]?g[b++]=L[E]||0:(g=[L[E]],b=1);while((E++<j||g[0]!==void 0)&&w--)}return m[0]||m.shift(),p.e=c,fn(p,a?s+mr(p)+1:s)}}();function f9(t,e){var n,r,i,s,a,o,c=0,u=0,d=t.constructor,f=d.precision;if(mr(t)>16)throw Error(EP+mr(t));if(!t.s)return new d(Zi);for(Nn=!1,o=f,a=new d(.03125);t.abs().gte(.1);)t=t.times(a),u+=5;for(r=Math.log(Uc(2,u))/Math.LN10*2+5|0,o+=r,n=i=s=new d(Zi),d.precision=o;;){if(i=fn(i.times(t),o),n=n.times(++c),a=s.plus(Ao(i,n,o)),Na(a.d).slice(0,o)===Na(s.d).slice(0,o)){for(;u--;)s=fn(s.times(s),o);return d.precision=f,e==null?(Nn=!0,fn(s,f)):s}s=a}}function mr(t){for(var e=t.e*An,n=t.d[0];n>=10;n/=10)e++;return e}function q_(t,e,n){if(e>t.LN10.sd())throw Nn=!0,n&&(t.precision=n),Error(Os+"LN10 precision limit exceeded");return fn(new t(t.LN10),e)}function pl(t){for(var e="";t--;)e+="0";return e}function wg(t,e){var n,r,i,s,a,o,c,u,d,f=1,h=10,p=t,m=p.d,g=p.constructor,b=g.precision;if(p.s<1)throw Error(Os+(p.s?"NaN":"-Infinity"));if(p.eq(Zi))return new g(0);if(e==null?(Nn=!1,u=b):u=e,p.eq(10))return e==null&&(Nn=!0),q_(g,u);if(u+=h,g.precision=u,n=Na(m),r=n.charAt(0),s=mr(p),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(t),n=Na(p.d),r=n.charAt(0),f++;s=mr(p),r>1?(p=new g("0."+n),s++):p=new g(r+"."+n.slice(1))}else return c=q_(g,u+2,b).times(s+""),p=wg(new g(r+"."+n.slice(1)),u-h).plus(c),g.precision=b,e==null?(Nn=!0,fn(p,b)):p;for(o=a=p=Ao(p.minus(Zi),p.plus(Zi),u),d=fn(p.times(p),u),i=3;;){if(a=fn(a.times(d),u),c=o.plus(Ao(a,new g(i),u)),Na(c.d).slice(0,u)===Na(o.d).slice(0,u))return o=o.times(2),s!==0&&(o=o.plus(q_(g,u+2,b).times(s+""))),o=Ao(o,new g(f),u),g.precision=b,e==null?(Nn=!0,fn(o,b)):o;o=c,i+=2}}function kR(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Kh(n/An),t.d=[],r=(n+1)%An,n<0&&(r+=An),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=An;r<i;)t.d.push(+e.slice(r,r+=An));e=e.slice(r),r=An-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Nn&&(t.e>Nb||t.e<-Nb))throw Error(EP+n)}else t.s=0,t.e=0,t.d=[0];return t}function fn(t,e,n){var r,i,s,a,o,c,u,d,f=t.d;for(a=1,s=f[0];s>=10;s/=10)a++;if(r=e-a,r<0)r+=An,i=e,u=f[d=0];else{if(d=Math.ceil((r+1)/An),s=f.length,d>=s)return t;for(u=s=f[d],a=1;s>=10;s/=10)a++;r%=An,i=r-An+a}if(n!==void 0&&(s=Uc(10,a-i-1),o=u/s%10|0,c=e<0||f[d+1]!==void 0||u%s,c=n<4?(o||c)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||c||n==6&&(r>0?i>0?u/Uc(10,a-i):0:f[d-1])%10&1||n==(t.s<0?8:7))),e<1||!f[0])return c?(s=mr(t),f.length=1,e=e-s-1,f[0]=Uc(10,(An-e%An)%An),t.e=Kh(-e/An)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(r==0?(f.length=d,s=1,d--):(f.length=d+1,s=Uc(10,An-r),f[d]=i>0?(u/Uc(10,a-i)%Uc(10,i)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==Ir&&(f[0]=1,++t.e);break}else{if(f[d]+=s,f[d]!=Ir)break;f[d--]=0,s=1}for(r=f.length;f[--r]===0;)f.pop();if(Nn&&(t.e>Nb||t.e<-Nb))throw Error(EP+mr(t));return t}function h9(t,e){var n,r,i,s,a,o,c,u,d,f,h=t.constructor,p=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),Nn?fn(e,p):e;if(c=t.d,f=e.d,r=e.e,u=t.e,c=c.slice(),a=u-r,a){for(d=a<0,d?(n=c,a=-a,o=f.length):(n=f,r=u,o=c.length),i=Math.max(Math.ceil(p/An),o)+2,a>i&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for(i=c.length,o=f.length,d=i<o,d&&(o=i),i=0;i<o;i++)if(c[i]!=f[i]){d=c[i]<f[i];break}a=0}for(d&&(n=c,c=f,f=n,e.s=-e.s),o=c.length,i=f.length-o;i>0;--i)c[o++]=0;for(i=f.length;i>a;){if(c[--i]<f[i]){for(s=i;s&&c[--s]===0;)c[s]=Ir-1;--c[s],c[i]+=Ir}c[i]-=f[i]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,Nn?fn(e,p):e):new h(0)}function Mu(t,e,n){var r,i=mr(t),s=Na(t.d),a=s.length;return e?(n&&(r=n-a)>0?s=s.charAt(0)+"."+s.slice(1)+pl(r):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+pl(-i-1)+s,n&&(r=n-a)>0&&(s+=pl(r))):i>=a?(s+=pl(i+1-a),n&&(r=n-i-1)>0&&(s=s+"."+pl(r))):((r=i+1)<a&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(s+="."),s+=pl(r))),t.s<0?"-"+s:s}function DR(t,e){if(t.length>e)return t.length=e,!0}function p9(t){var e,n,r;function i(s){var a=this;if(!(a instanceof i))return new i(s);if(a.constructor=i,s instanceof i){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(vu+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return kR(a,s.toString())}else if(typeof s!="string")throw Error(vu+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,L1e.test(s))kR(a,s);else throw Error(vu+s)}if(i.prototype=Ke,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=p9,i.config=i.set=z1e,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function z1e(t){if(!t||typeof t!="object")throw Error(Os+"Object expected");var e,n,r,i=["precision",1,qh,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Kh(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(vu+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(vu+n+": "+r);return this}var jP=p9(R1e);Zi=new jP(1);const ln=jP;function $1e(t){return U1e(t)||B1e(t)||V1e(t)||F1e()}function F1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V1e(t,e){if(t){if(typeof t=="string")return HE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HE(t,e)}}function B1e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function U1e(t){if(Array.isArray(t))return HE(t)}function HE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var W1e=function(e){return e},m9={},g9=function(e){return e===m9},IR=function(e){return function n(){return arguments.length===0||arguments.length===1&&g9(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},H1e=function t(e,n){return e===1?n:IR(function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var a=i.filter(function(o){return o!==m9}).length;return a>=e?n.apply(void 0,i):t(e-a,IR(function(){for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];var d=i.map(function(f){return g9(f)?c.shift():f});return n.apply(void 0,$1e(d).concat(c))}))})},Ww=function(e){return H1e(e.length,e)},qE=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},q1e=Ww(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),K1e=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return W1e;var i=n.reverse(),s=i[0],a=i.slice(1);return function(){return a.reduce(function(o,c){return c(o)},s.apply(void 0,arguments))}},KE=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},v9=function(e){var n=null,r=null;return function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n&&s.every(function(o,c){return o===n[c]})||(n=s,r=e.apply(void 0,s)),r}};function G1e(t){var e;return t===0?e=1:e=Math.floor(new ln(t).abs().log(10).toNumber())+1,e}function Y1e(t,e,n){for(var r=new ln(t),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}var Q1e=Ww(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),X1e=Ww(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),Z1e=Ww(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const Hw={rangeStep:Y1e,getDigitCount:G1e,interpolateNumber:Q1e,uninterpolateNumber:X1e,uninterpolateTruncation:Z1e};function GE(t){return t_e(t)||e_e(t)||y9(t)||J1e()}function J1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e_e(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function t_e(t){if(Array.isArray(t))return YE(t)}function _g(t,e){return i_e(t)||r_e(t,e)||y9(t,e)||n_e()}function n_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y9(t,e){if(t){if(typeof t=="string")return YE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YE(t,e)}}function YE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function r_e(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,s=void 0;try{for(var a=t[Symbol.iterator](),o;!(r=(o=a.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(c){i=!0,s=c}finally{try{!r&&a.return!=null&&a.return()}finally{if(i)throw s}}return n}}function i_e(t){if(Array.isArray(t))return t}function b9(t){var e=_g(t,2),n=e[0],r=e[1],i=n,s=r;return n>r&&(i=r,s=n),[i,s]}function x9(t,e,n){if(t.lte(0))return new ln(0);var r=Hw.getDigitCount(t.toNumber()),i=new ln(10).pow(r),s=t.div(i),a=r!==1?.05:.1,o=new ln(Math.ceil(s.div(a).toNumber())).add(n).mul(a),c=o.mul(i);return e?c:new ln(Math.ceil(c))}function s_e(t,e,n){var r=1,i=new ln(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(r=new ln(10).pow(Hw.getDigitCount(t)-1),i=new ln(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new ln(Math.floor(t)))}else t===0?i=new ln(Math.floor((e-1)/2)):n||(i=new ln(Math.floor(t)));var a=Math.floor((e-1)/2),o=K1e(q1e(function(c){return i.add(new ln(c-a).mul(r)).toNumber()}),qE);return o(0,e)}function w9(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new ln(0),tickMin:new ln(0),tickMax:new ln(0)};var s=x9(new ln(e).sub(t).div(n-1),r,i),a;t<=0&&e>=0?a=new ln(0):(a=new ln(t).add(e).div(2),a=a.sub(new ln(a).mod(s)));var o=Math.ceil(a.sub(t).div(s).toNumber()),c=Math.ceil(new ln(e).sub(a).div(s).toNumber()),u=o+c+1;return u>n?w9(t,e,n,r,i+1):(u<n&&(c=e>0?c+(n-u):c,o=e>0?o:o+(n-u)),{step:s,tickMin:a.sub(new ln(o).mul(s)),tickMax:a.add(new ln(c).mul(s))})}function a_e(t){var e=_g(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),o=b9([n,r]),c=_g(o,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(GE(qE(0,i-1).map(function(){return 1/0}))):[].concat(GE(qE(0,i-1).map(function(){return-1/0})),[d]);return n>r?KE(f):f}if(u===d)return s_e(u,i,s);var h=w9(u,d,a,s),p=h.step,m=h.tickMin,g=h.tickMax,b=Hw.rangeStep(m,g.add(new ln(.1).mul(p)),p);return n>r?KE(b):b}function o_e(t,e){var n=_g(t,2),r=n[0],i=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=b9([r,i]),o=_g(a,2),c=o[0],u=o[1];if(c===-1/0||u===1/0)return[r,i];if(c===u)return[c];var d=Math.max(e,2),f=x9(new ln(u).sub(c).div(d-1),s,0),h=[].concat(GE(Hw.rangeStep(new ln(c),new ln(u).sub(new ln(.99).mul(f)),f)),[u]);return r>i?KE(h):h}var l_e=v9(a_e),c_e=v9(o_e),u_e="Invariant failed";function Ru(t,e){throw new Error(u_e)}var d_e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function nh(t){"@babel/helpers - typeof";return nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nh(t)}function kb(){return kb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kb.apply(this,arguments)}function f_e(t,e){return g_e(t)||m_e(t,e)||p_e(t,e)||h_e()}function h_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p_e(t,e){if(t){if(typeof t=="string")return OR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OR(t,e)}}function OR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function m_e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function g_e(t){if(Array.isArray(t))return t}function v_e(t,e){if(t==null)return{};var n=y_e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function y_e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function b_e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x_e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A9(r.key),r)}}function w_e(t,e,n){return e&&x_e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function __e(t,e,n){return e=Db(e),S_e(t,_9()?Reflect.construct(e,n||[],Db(t).constructor):e.apply(t,n))}function S_e(t,e){if(e&&(nh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A_e(t)}function A_e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_9=function(){return!!t})()}function Db(t){return Db=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Db(t)}function E_e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QE(t,e)}function QE(t,e){return QE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},QE(t,e)}function S9(t,e,n){return e=A9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A9(t){var e=j_e(t,"string");return nh(e)=="symbol"?e:e+""}function j_e(t,e){if(nh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(nh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Sv=function(t){function e(){return b_e(this,e),__e(this,e,arguments)}return E_e(e,t),w_e(e,[{key:"render",value:function(){var r=this.props,i=r.offset,s=r.layout,a=r.width,o=r.dataKey,c=r.data,u=r.dataPointFormatter,d=r.xAxis,f=r.yAxis,h=v_e(r,d_e),p=et(h,!1);this.props.direction==="x"&&d.type!=="number"&&Ru();var m=c.map(function(g){var b=u(g,o),x=b.x,w=b.y,_=b.value,E=b.errorVal;if(!E)return null;var j=[],T,A;if(Array.isArray(E)){var C=f_e(E,2);T=C[0],A=C[1]}else T=A=E;if(s==="vertical"){var D=d.scale,O=w+i,L=O+a,z=O-a,M=D(_-T),G=D(_+A);j.push({x1:G,y1:L,x2:G,y2:z}),j.push({x1:M,y1:O,x2:G,y2:O}),j.push({x1:M,y1:L,x2:M,y2:z})}else if(s==="horizontal"){var K=f.scale,B=x+i,U=B-a,F=B+a,q=K(_-T),Z=K(_+A);j.push({x1:U,y1:Z,x2:F,y2:Z}),j.push({x1:B,y1:q,x2:B,y2:Z}),j.push({x1:U,y1:q,x2:F,y2:q})}return Y.createElement(Tt,kb({className:"recharts-errorBar",key:"bar-".concat(j.map(function(re){return"".concat(re.x1,"-").concat(re.x2,"-").concat(re.y1,"-").concat(re.y2)}))},p),j.map(function(re){return Y.createElement("line",kb({},re,{key:"line-".concat(re.x1,"-").concat(re.x2,"-").concat(re.y1,"-").concat(re.y2)}))}))});return Y.createElement(Tt,{className:"recharts-errorBars"},m)}}])}(Y.Component);S9(Sv,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});S9(Sv,"displayName","ErrorBar");function Sg(t){"@babel/helpers - typeof";return Sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sg(t)}function MR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ic(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MR(Object(n),!0).forEach(function(r){C_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function C_e(t,e,n){return e=T_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T_e(t){var e=P_e(t,"string");return Sg(e)=="symbol"?e:e+""}function P_e(t,e){if(Sg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var E9=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,s=e.legendContent,a=Xi(n,na);if(!a)return null;var o=na.defaultProps,c=o!==void 0?Ic(Ic({},o),a.props):{},u;return a.props&&a.props.payload?u=a.props&&a.props.payload:s==="children"?u=(r||[]).reduce(function(d,f){var h=f.item,p=f.props,m=p.sectors||p.data||[];return d.concat(m.map(function(g){return{type:a.props.iconType||h.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):u=(r||[]).map(function(d){var f=d.item,h=f.type.defaultProps,p=h!==void 0?Ic(Ic({},h),f.props):{},m=p.dataKey,g=p.name,b=p.legendType,x=p.hide;return{inactive:x,dataKey:m,type:c.iconType||b||"square",color:CP(f),value:g||m,payload:p}}),Ic(Ic(Ic({},c),na.getWithHeight(a,i)),{},{payload:u,item:a})};function Ag(t){"@babel/helpers - typeof";return Ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ag(t)}function RR(t){return I_e(t)||D_e(t)||k_e(t)||N_e()}function N_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k_e(t,e){if(t){if(typeof t=="string")return XE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XE(t,e)}}function D_e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function I_e(t){if(Array.isArray(t))return XE(t)}function XE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function LR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LR(Object(n),!0).forEach(function(r){wf(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wf(t,e,n){return e=O_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O_e(t){var e=M_e(t,"string");return Ag(e)=="symbol"?e:e+""}function M_e(t,e){if(Ag(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ag(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jn(t,e,n){return gt(t)||gt(e)?n:Ar(e)?ss(t,e,n):ut(e)?e(t):n}function vm(t,e,n,r){var i=D1e(t,function(o){return Jn(o,e)});if(n==="number"){var s=i.filter(function(o){return Ce(o)||parseFloat(o)});return s.length?[Uw(s),_l(s)]:[1/0,-1/0]}var a=r?i.filter(function(o){return!gt(o)}):i;return a.map(function(o){return Ar(o)||o instanceof Date?o:""})}var R_e=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,a=-1,o=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(o<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,u=0;u<o;u++){var d=u>0?i[u-1].coordinate:i[o-1].coordinate,f=i[u].coordinate,h=u>=o-1?i[0].coordinate:i[u+1].coordinate,p=void 0;if(wi(f-d)!==wi(h-f)){var m=[];if(wi(h-f)===wi(c[1]-c[0])){p=h;var g=f+c[1]-c[0];m[0]=Math.min(g,(g+d)/2),m[1]=Math.max(g,(g+d)/2)}else{p=d;var b=h+c[1]-c[0];m[0]=Math.min(f,(b+f)/2),m[1]=Math.max(f,(b+f)/2)}var x=[Math.min(f,(p+f)/2),Math.max(f,(p+f)/2)];if(e>x[0]&&e<=x[1]||e>=m[0]&&e<=m[1]){a=i[u].index;break}}else{var w=Math.min(d,h),_=Math.max(d,h);if(e>(w+f)/2&&e<=(_+f)/2){a=i[u].index;break}}}else for(var E=0;E<o;E++)if(E===0&&e<=(r[E].coordinate+r[E+1].coordinate)/2||E>0&&E<o-1&&e>(r[E].coordinate+r[E-1].coordinate)/2&&e<=(r[E].coordinate+r[E+1].coordinate)/2||E===o-1&&e>(r[E].coordinate+r[E-1].coordinate)/2){a=r[E].index;break}return a},CP=function(e){var n,r=e,i=r.type.displayName,s=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Bn(Bn({},e.type.defaultProps),e.props):e.props,a=s.stroke,o=s.fill,c;switch(i){case"Line":c=a;break;case"Area":case"Radar":c=a&&a!=="none"?a:o;break;default:c=o;break}return c},L_e=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var a={},o=Object.keys(s),c=0,u=o.length;c<u;c++)for(var d=s[o[c]].stackGroups,f=Object.keys(d),h=0,p=f.length;h<p;h++){var m=d[f[h]],g=m.items,b=m.cateAxisId,x=g.filter(function(A){return So(A.type).indexOf("Bar")>=0});if(x&&x.length){var w=x[0].type.defaultProps,_=w!==void 0?Bn(Bn({},w),x[0].props):x[0].props,E=_.barSize,j=_[b];a[j]||(a[j]=[]);var T=gt(E)?n:E;a[j].push({item:x[0],stackList:x.slice(1),barSize:gt(T)?void 0:_i(T,r,0)})}}return a},z_e=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,s=e.sizeList,a=s===void 0?[]:s,o=e.maxBarSize,c=a.length;if(c<1)return null;var u=_i(n,i,0,!0),d,f=[];if(a[0].barSize===+a[0].barSize){var h=!1,p=i/c,m=a.reduce(function(E,j){return E+j.barSize||0},0);m+=(c-1)*u,m>=i&&(m-=(c-1)*u,u=0),m>=i&&p>0&&(h=!0,p*=.9,m=c*p);var g=(i-m)/2>>0,b={offset:g-u,size:0};d=a.reduce(function(E,j){var T={item:j.item,position:{offset:b.offset+b.size+u,size:h?p:j.barSize}},A=[].concat(RR(E),[T]);return b=A[A.length-1].position,j.stackList&&j.stackList.length&&j.stackList.forEach(function(C){A.push({item:C,position:b})}),A},f)}else{var x=_i(r,i,0,!0);i-2*x-(c-1)*u<=0&&(u=0);var w=(i-2*x-(c-1)*u)/c;w>1&&(w>>=0);var _=o===+o?Math.min(w,o):w;d=a.reduce(function(E,j,T){var A=[].concat(RR(E),[{item:j.item,position:{offset:x+(w+u)*T+(w-_)/2,size:_}}]);return j.stackList&&j.stackList.length&&j.stackList.forEach(function(C){A.push({item:C,position:A[A.length-1].position})}),A},f)}return d},$_e=function(e,n,r,i){var s=r.children,a=r.width,o=r.margin,c=a-(o.left||0)-(o.right||0),u=E9({children:s,legendWidth:c});if(u){var d=i||{},f=d.width,h=d.height,p=u.align,m=u.verticalAlign,g=u.layout;if((g==="vertical"||g==="horizontal"&&m==="middle")&&p!=="center"&&Ce(e[p]))return Bn(Bn({},e),{},wf({},p,e[p]+(f||0)));if((g==="horizontal"||g==="vertical"&&p==="center")&&m!=="middle"&&Ce(e[m]))return Bn(Bn({},e),{},wf({},m,e[m]+(h||0)))}return e},F_e=function(e,n,r){return gt(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},j9=function(e,n,r,i,s){var a=n.props.children,o=as(a,Sv).filter(function(u){return F_e(i,s,u.props.direction)});if(o&&o.length){var c=o.map(function(u){return u.props.dataKey});return e.reduce(function(u,d){var f=Jn(d,r);if(gt(f))return u;var h=Array.isArray(f)?[Uw(f),_l(f)]:[f,f],p=c.reduce(function(m,g){var b=Jn(d,g,0),x=h[0]-Math.abs(Array.isArray(b)?b[0]:b),w=h[1]+Math.abs(Array.isArray(b)?b[1]:b);return[Math.min(x,m[0]),Math.max(w,m[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},V_e=function(e,n,r,i,s){var a=n.map(function(o){return j9(e,o,r,s,i)}).filter(function(o){return!gt(o)});return a&&a.length?a.reduce(function(o,c){return[Math.min(o[0],c[0]),Math.max(o[1],c[1])]},[1/0,-1/0]):null},C9=function(e,n,r,i,s){var a=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&j9(e,c,u,i)||vm(e,u,r,s)});if(r==="number")return a.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var o={};return a.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)o[u[d]]||(o[u[d]]=!0,c.push(u[d]));return c},[])},T9=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},P9=function(e,n,r,i){if(i)return e.map(function(c){return c.coordinate});var s,a,o=e.map(function(c){return c.coordinate===n&&(s=!0),c.coordinate===r&&(a=!0),c.coordinate});return s||o.push(n),a||o.push(r),o},bo=function(e,n,r){if(!e)return null;var i=e.scale,s=e.duplicateDomain,a=e.type,o=e.range,c=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||r)&&a==="category"&&i.bandwidth?i.bandwidth()/c:0;if(u=e.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?wi(o[0]-o[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(f){var h=s?s.indexOf(f):f;return{coordinate:i(h)+u,value:f,offset:u}});return d.filter(function(f){return!Vh(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,h){return{coordinate:i(f)+u,value:f,index:h,offset:u}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(f){return{coordinate:i(f)+u,value:f,offset:u}}):i.domain().map(function(f,h){return{coordinate:i(f)+u,value:s?s[f]:f,index:h,offset:u}})},K_=new WeakMap,by=function(e,n){if(typeof n!="function")return e;K_.has(e)||K_.set(e,new WeakMap);var r=K_.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},N9=function(e,n,r){var i=e.scale,s=e.type,a=e.layout,o=e.axisType;if(i==="auto")return a==="radial"&&o==="radiusAxis"?{scale:gg(),realScaleType:"band"}:a==="radial"&&o==="angleAxis"?{scale:jb(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:gm(),realScaleType:"point"}:s==="category"?{scale:gg(),realScaleType:"band"}:{scale:jb(),realScaleType:"linear"};if(ku(i)){var c="scale".concat(Pw(i));return{scale:(NR[c]||gm)(),realScaleType:NR[c]?c:"point"}}return ut(i)?{scale:i}:{scale:gm(),realScaleType:"point"}},zR=1e-4,k9=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),s=Math.min(i[0],i[1])-zR,a=Math.max(i[0],i[1])+zR,o=e(n[0]),c=e(n[r-1]);(o<s||o>a||c<s||c>a)&&e.domain([n[0],n[r-1]])}},B_e=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},U_e=function(e,n){if(!n||n.length!==2||!Ce(n[0])||!Ce(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),s=[e[0],e[1]];return(!Ce(e[0])||e[0]<r)&&(s[0]=r),(!Ce(e[1])||e[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<r&&(s[1]=r),s},W_e=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var s=0,a=0,o=0;o<n;++o){var c=Vh(e[o][r][1])?e[o][r][0]:e[o][r][1];c>=0?(e[o][r][0]=s,e[o][r][1]=s+c,s=e[o][r][1]):(e[o][r][0]=a,e[o][r][1]=a+c,a=e[o][r][1])}},H_e=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var s=0,a=0;a<n;++a){var o=Vh(e[a][r][1])?e[a][r][0]:e[a][r][1];o>=0?(e[a][r][0]=s,e[a][r][1]=s+o,s=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},q_e={sign:W_e,expand:dde,none:Gf,silhouette:fde,wiggle:hde,positive:H_e},K_e=function(e,n,r){var i=n.map(function(o){return o.props.dataKey}),s=q_e[r],a=ude().keys(i).value(function(o,c){return+Jn(o,c,0)}).order(_E).offset(s);return a(e)},G_e=function(e,n,r,i,s,a){if(!e)return null;var o=a?n.reverse():n,c={},u=o.reduce(function(f,h){var p,m=(p=h.type)!==null&&p!==void 0&&p.defaultProps?Bn(Bn({},h.type.defaultProps),h.props):h.props,g=m.stackId,b=m.hide;if(b)return f;var x=m[r],w=f[x]||{hasStack:!1,stackGroups:{}};if(Ar(g)){var _=w.stackGroups[g]||{numericAxisId:r,cateAxisId:i,items:[]};_.items.push(h),w.hasStack=!0,w.stackGroups[g]=_}else w.stackGroups[Zu("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[h]};return Bn(Bn({},f),{},wf({},x,w))},c),d={};return Object.keys(u).reduce(function(f,h){var p=u[h];if(p.hasStack){var m={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(g,b){var x=p.stackGroups[b];return Bn(Bn({},g),{},wf({},b,{numericAxisId:r,cateAxisId:i,items:x.items,stackedData:K_e(e,x.items,s)}))},m)}return Bn(Bn({},f),{},wf({},h,p))},d)},D9=function(e,n){var r=n.realScaleType,i=n.type,s=n.tickCount,a=n.originalDomain,o=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&i==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var u=e.domain();if(!u.length)return null;var d=l_e(u,s,o);return e.domain([Uw(d),_l(d)]),{niceTicks:d}}if(s&&i==="number"){var f=e.domain(),h=c_e(f,s,o);return{niceTicks:h}}return null};function Ib(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,s=t.index,a=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!gt(i[e.dataKey])){var o=sb(n,"value",i[e.dataKey]);if(o)return o.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var c=Jn(i,gt(a)?e.dataKey:a);return gt(c)?null:e.scale(c)}var $R=function(e){var n=e.axis,r=e.ticks,i=e.offset,s=e.bandSize,a=e.entry,o=e.index;if(n.type==="category")return r[o]?r[o].coordinate+i:null;var c=Jn(a,n.dataKey,n.domain[o]);return gt(c)?null:n.scale(c)-s/2+i},Y_e=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return i<=0&&s>=0?0:s<0?s:i}return r[0]},Q_e=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Bn(Bn({},e.type.defaultProps),e.props):e.props,s=i.stackId;if(Ar(s)){var a=n[s];if(a){var o=a.items.indexOf(e);return o>=0?a.stackedData[o]:null}}return null},X_e=function(e){return e.reduce(function(n,r){return[Uw(r.concat([n[0]]).filter(Ce)),_l(r.concat([n[1]]).filter(Ce))]},[1/0,-1/0])},I9=function(e,n,r){return Object.keys(e).reduce(function(i,s){var a=e[s],o=a.stackedData,c=o.reduce(function(u,d){var f=X_e(d.slice(n,r+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},FR=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,VR=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ZE=function(e,n,r){if(ut(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(Ce(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(FR.test(e[0])){var s=+FR.exec(e[0])[1];i[0]=n[0]-s}else ut(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(Ce(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(VR.test(e[1])){var a=+VR.exec(e[1])[1];i[1]=n[1]+a}else ut(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},Ob=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var s=tP(n,function(f){return f.coordinate}),a=1/0,o=1,c=s.length;o<c;o++){var u=s[o],d=s[o-1];a=Math.min((u.coordinate||0)-(d.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0},BR=function(e,n,r){return!e||!e.length||Ou(e,ss(r,"type.defaultProps.domain"))?n:e},O9=function(e,n){var r=e.type.defaultProps?Bn(Bn({},e.type.defaultProps),e.props):e.props,i=r.dataKey,s=r.name,a=r.unit,o=r.formatter,c=r.tooltipType,u=r.chartType,d=r.hide;return Bn(Bn({},et(e,!1)),{},{dataKey:i,unit:a,formatter:o,name:s||i,color:CP(e),value:Jn(n,i),type:c,payload:n,chartType:u,hide:d})};function Eg(t){"@babel/helpers - typeof";return Eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eg(t)}function UR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UR(Object(n),!0).forEach(function(r){M9(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function M9(t,e,n){return e=Z_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Z_e(t){var e=J_e(t,"string");return Eg(e)=="symbol"?e:e+""}function J_e(t,e){if(Eg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Eg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eSe(t,e){return iSe(t)||rSe(t,e)||nSe(t,e)||tSe()}function tSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nSe(t,e){if(t){if(typeof t=="string")return WR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WR(t,e)}}function WR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rSe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function iSe(t){if(Array.isArray(t))return t}var Mb=Math.PI/180,sSe=function(e){return e*180/Math.PI},yn=function(e,n,r,i){return{x:e+Math.cos(-Mb*i)*r,y:n+Math.sin(-Mb*i)*r}},R9=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},aSe=function(e,n,r,i,s){var a=e.width,o=e.height,c=e.startAngle,u=e.endAngle,d=_i(e.cx,a,a/2),f=_i(e.cy,o,o/2),h=R9(a,o,r),p=_i(e.innerRadius,h,0),m=_i(e.outerRadius,h,h*.8),g=Object.keys(n);return g.reduce(function(b,x){var w=n[x],_=w.domain,E=w.reversed,j;if(gt(w.range))i==="angleAxis"?j=[c,u]:i==="radiusAxis"&&(j=[p,m]),E&&(j=[j[1],j[0]]);else{j=w.range;var T=j,A=eSe(T,2);c=A[0],u=A[1]}var C=N9(w,s),D=C.realScaleType,O=C.scale;O.domain(_).range(j),k9(O);var L=D9(O,uo(uo({},w),{},{realScaleType:D})),z=uo(uo(uo({},w),L),{},{range:j,radius:m,realScaleType:D,scale:O,cx:d,cy:f,innerRadius:p,outerRadius:m,startAngle:c,endAngle:u});return uo(uo({},b),{},M9({},x,z))},{})},oSe=function(e,n){var r=e.x,i=e.y,s=n.x,a=n.y;return Math.sqrt(Math.pow(r-s,2)+Math.pow(i-a,2))},lSe=function(e,n){var r=e.x,i=e.y,s=n.cx,a=n.cy,o=oSe({x:r,y:i},{x:s,y:a});if(o<=0)return{radius:o};var c=(r-s)/o,u=Math.acos(c);return i>a&&(u=2*Math.PI-u),{radius:o,angle:sSe(u),angleInRadian:u}},cSe=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),s=Math.floor(r/360),a=Math.min(i,s);return{startAngle:n-a*360,endAngle:r-a*360}},uSe=function(e,n){var r=n.startAngle,i=n.endAngle,s=Math.floor(r/360),a=Math.floor(i/360),o=Math.min(s,a);return e+o*360},HR=function(e,n){var r=e.x,i=e.y,s=lSe({x:r,y:i},n),a=s.radius,o=s.angle,c=n.innerRadius,u=n.outerRadius;if(a<c||a>u)return!1;if(a===0)return!0;var d=cSe(n),f=d.startAngle,h=d.endAngle,p=o,m;if(f<=h){for(;p>h;)p-=360;for(;p<f;)p+=360;m=p>=f&&p<=h}else{for(;p>f;)p-=360;for(;p<h;)p+=360;m=p>=h&&p<=f}return m?uo(uo({},n),{},{radius:a,angle:uSe(p,n)}):null},L9=function(e){return!P.isValidElement(e)&&!ut(e)&&typeof e!="boolean"?e.className:""};function jg(t){"@babel/helpers - typeof";return jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jg(t)}var dSe=["offset"];function fSe(t){return gSe(t)||mSe(t)||pSe(t)||hSe()}function hSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pSe(t,e){if(t){if(typeof t=="string")return JE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JE(t,e)}}function mSe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function gSe(t){if(Array.isArray(t))return JE(t)}function JE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vSe(t,e){if(t==null)return{};var n=ySe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ySe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function qR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qR(Object(n),!0).forEach(function(r){bSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bSe(t,e,n){return e=xSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xSe(t){var e=wSe(t,"string");return jg(e)=="symbol"?e:e+""}function wSe(t,e){if(jg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cg(){return Cg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cg.apply(this,arguments)}var _Se=function(e){var n=e.value,r=e.formatter,i=gt(e.children)?n:e.children;return ut(r)?r(i):i},SSe=function(e,n){var r=wi(n-e),i=Math.min(Math.abs(n-e),360);return r*i},ASe=function(e,n,r){var i=e.position,s=e.viewBox,a=e.offset,o=e.className,c=s,u=c.cx,d=c.cy,f=c.innerRadius,h=c.outerRadius,p=c.startAngle,m=c.endAngle,g=c.clockWise,b=(f+h)/2,x=SSe(p,m),w=x>=0?1:-1,_,E;i==="insideStart"?(_=p+w*a,E=g):i==="insideEnd"?(_=m-w*a,E=!g):i==="end"&&(_=m+w*a,E=g),E=x<=0?E:!E;var j=yn(u,d,b,_),T=yn(u,d,b,_+(E?1:-1)*359),A="M".concat(j.x,",").concat(j.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(E?0:1,`,
    `).concat(T.x,",").concat(T.y),C=gt(e.id)?Zu("recharts-radial-line-"):e.id;return Y.createElement("text",Cg({},r,{dominantBaseline:"central",className:St("recharts-radial-bar-label",o)}),Y.createElement("defs",null,Y.createElement("path",{id:C,d:A})),Y.createElement("textPath",{xlinkHref:"#".concat(C)},n))},ESe=function(e){var n=e.viewBox,r=e.offset,i=e.position,s=n,a=s.cx,o=s.cy,c=s.innerRadius,u=s.outerRadius,d=s.startAngle,f=s.endAngle,h=(d+f)/2;if(i==="outside"){var p=yn(a,o,u+r,h),m=p.x,g=p.y;return{x:m,y:g,textAnchor:m>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:o,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:o,textAnchor:"middle",verticalAnchor:"end"};var b=(c+u)/2,x=yn(a,o,b,h),w=x.x,_=x.y;return{x:w,y:_,textAnchor:"middle",verticalAnchor:"middle"}},jSe=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,s=e.position,a=n,o=a.x,c=a.y,u=a.width,d=a.height,f=d>=0?1:-1,h=f*i,p=f>0?"end":"start",m=f>0?"start":"end",g=u>=0?1:-1,b=g*i,x=g>0?"end":"start",w=g>0?"start":"end";if(s==="top"){var _={x:o+u/2,y:c-f*i,textAnchor:"middle",verticalAnchor:p};return xr(xr({},_),r?{height:Math.max(c-r.y,0),width:u}:{})}if(s==="bottom"){var E={x:o+u/2,y:c+d+h,textAnchor:"middle",verticalAnchor:m};return xr(xr({},E),r?{height:Math.max(r.y+r.height-(c+d),0),width:u}:{})}if(s==="left"){var j={x:o-b,y:c+d/2,textAnchor:x,verticalAnchor:"middle"};return xr(xr({},j),r?{width:Math.max(j.x-r.x,0),height:d}:{})}if(s==="right"){var T={x:o+u+b,y:c+d/2,textAnchor:w,verticalAnchor:"middle"};return xr(xr({},T),r?{width:Math.max(r.x+r.width-T.x,0),height:d}:{})}var A=r?{width:u,height:d}:{};return s==="insideLeft"?xr({x:o+b,y:c+d/2,textAnchor:w,verticalAnchor:"middle"},A):s==="insideRight"?xr({x:o+u-b,y:c+d/2,textAnchor:x,verticalAnchor:"middle"},A):s==="insideTop"?xr({x:o+u/2,y:c+h,textAnchor:"middle",verticalAnchor:m},A):s==="insideBottom"?xr({x:o+u/2,y:c+d-h,textAnchor:"middle",verticalAnchor:p},A):s==="insideTopLeft"?xr({x:o+b,y:c+h,textAnchor:w,verticalAnchor:m},A):s==="insideTopRight"?xr({x:o+u-b,y:c+h,textAnchor:x,verticalAnchor:m},A):s==="insideBottomLeft"?xr({x:o+b,y:c+d-h,textAnchor:w,verticalAnchor:p},A):s==="insideBottomRight"?xr({x:o+u-b,y:c+d-h,textAnchor:x,verticalAnchor:p},A):Lh(s)&&(Ce(s.x)||nu(s.x))&&(Ce(s.y)||nu(s.y))?xr({x:o+_i(s.x,u),y:c+_i(s.y,d),textAnchor:"end",verticalAnchor:"end"},A):xr({x:o+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},A)},CSe=function(e){return"cx"in e&&Ce(e.cx)};function Mr(t){var e=t.offset,n=e===void 0?5:e,r=vSe(t,dSe),i=xr({offset:n},r),s=i.viewBox,a=i.position,o=i.value,c=i.children,u=i.content,d=i.className,f=d===void 0?"":d,h=i.textBreakAll;if(!s||gt(o)&&gt(c)&&!P.isValidElement(u)&&!ut(u))return null;if(P.isValidElement(u))return P.cloneElement(u,i);var p;if(ut(u)){if(p=P.createElement(u,i),P.isValidElement(p))return p}else p=_Se(i);var m=CSe(s),g=et(i,!0);if(m&&(a==="insideStart"||a==="insideEnd"||a==="end"))return ASe(i,p,g);var b=m?ESe(i):jSe(i);return Y.createElement(Iu,Cg({className:St("recharts-label",f)},g,b,{breakAll:h}),p)}Mr.displayName="Label";var z9=function(e){var n=e.cx,r=e.cy,i=e.angle,s=e.startAngle,a=e.endAngle,o=e.r,c=e.radius,u=e.innerRadius,d=e.outerRadius,f=e.x,h=e.y,p=e.top,m=e.left,g=e.width,b=e.height,x=e.clockWise,w=e.labelViewBox;if(w)return w;if(Ce(g)&&Ce(b)){if(Ce(f)&&Ce(h))return{x:f,y:h,width:g,height:b};if(Ce(p)&&Ce(m))return{x:p,y:m,width:g,height:b}}return Ce(f)&&Ce(h)?{x:f,y:h,width:0,height:0}:Ce(n)&&Ce(r)?{cx:n,cy:r,startAngle:s||i||0,endAngle:a||i||0,innerRadius:u||0,outerRadius:d||c||o||0,clockWise:x}:e.viewBox?e.viewBox:{}},TSe=function(e,n){return e?e===!0?Y.createElement(Mr,{key:"label-implicit",viewBox:n}):Ar(e)?Y.createElement(Mr,{key:"label-implicit",viewBox:n,value:e}):P.isValidElement(e)?e.type===Mr?P.cloneElement(e,{key:"label-implicit",viewBox:n}):Y.createElement(Mr,{key:"label-implicit",content:e,viewBox:n}):ut(e)?Y.createElement(Mr,{key:"label-implicit",content:e,viewBox:n}):Lh(e)?Y.createElement(Mr,Cg({viewBox:n},e,{key:"label-implicit"})):null:null},PSe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,s=z9(e),a=as(i,Mr).map(function(c,u){return P.cloneElement(c,{viewBox:n||s,key:"label-".concat(u)})});if(!r)return a;var o=TSe(e.label,n||s);return[o].concat(fSe(a))};Mr.parseViewBox=z9;Mr.renderCallByParent=PSe;function NSe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var kSe=NSe;const DSe=Qt(kSe);function Tg(t){"@babel/helpers - typeof";return Tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tg(t)}var ISe=["valueAccessor"],OSe=["data","dataKey","clockWise","id","textBreakAll"];function MSe(t){return $Se(t)||zSe(t)||LSe(t)||RSe()}function RSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LSe(t,e){if(t){if(typeof t=="string")return e2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e2(t,e)}}function zSe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $Se(t){if(Array.isArray(t))return e2(t)}function e2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Rb(){return Rb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rb.apply(this,arguments)}function KR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function GR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KR(Object(n),!0).forEach(function(r){FSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function FSe(t,e,n){return e=VSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VSe(t){var e=BSe(t,"string");return Tg(e)=="symbol"?e:e+""}function BSe(t,e){if(Tg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function YR(t,e){if(t==null)return{};var n=USe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function USe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var WSe=function(e){return Array.isArray(e.value)?DSe(e.value):e.value};function Ns(t){var e=t.valueAccessor,n=e===void 0?WSe:e,r=YR(t,ISe),i=r.data,s=r.dataKey,a=r.clockWise,o=r.id,c=r.textBreakAll,u=YR(r,OSe);return!i||!i.length?null:Y.createElement(Tt,{className:"recharts-label-list"},i.map(function(d,f){var h=gt(s)?n(d,f):Jn(d&&d.payload,s),p=gt(o)?{}:{id:"".concat(o,"-").concat(f)};return Y.createElement(Mr,Rb({},et(d,!0),u,p,{parentViewBox:d.parentViewBox,value:h,textBreakAll:c,viewBox:Mr.parseViewBox(gt(a)?d:GR(GR({},d),{},{clockWise:a})),key:"label-".concat(f),index:f}))}))}Ns.displayName="LabelList";function HSe(t,e){return t?t===!0?Y.createElement(Ns,{key:"labelList-implicit",data:e}):Y.isValidElement(t)||ut(t)?Y.createElement(Ns,{key:"labelList-implicit",data:e,content:t}):Lh(t)?Y.createElement(Ns,Rb({data:e},t,{key:"labelList-implicit"})):null:null}function qSe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=as(r,Ns).map(function(a,o){return P.cloneElement(a,{data:e,key:"labelList-".concat(o)})});if(!n)return i;var s=HSe(t.label,e);return[s].concat(MSe(i))}Ns.renderCallByParent=qSe;function Pg(t){"@babel/helpers - typeof";return Pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pg(t)}function t2(){return t2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t2.apply(this,arguments)}function QR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function XR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QR(Object(n),!0).forEach(function(r){KSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KSe(t,e,n){return e=GSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GSe(t){var e=YSe(t,"string");return Pg(e)=="symbol"?e:e+""}function YSe(t,e){if(Pg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Pg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var QSe=function(e,n){var r=wi(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},xy=function(e){var n=e.cx,r=e.cy,i=e.radius,s=e.angle,a=e.sign,o=e.isExternal,c=e.cornerRadius,u=e.cornerIsExternal,d=c*(o?1:-1)+i,f=Math.asin(c/d)/Mb,h=u?s:s+a*f,p=yn(n,r,d,h),m=yn(n,r,i,h),g=u?s-a*f:s,b=yn(n,r,d*Math.cos(f*Mb),g);return{center:p,circleTangency:m,lineTangency:b,theta:f}},$9=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,a=e.startAngle,o=e.endAngle,c=QSe(a,o),u=a+c,d=yn(n,r,s,a),f=yn(n,r,s,u),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(a>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var p=yn(n,r,i,a),m=yn(n,r,i,u);h+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(a<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(n,",").concat(r," Z");return h},XSe=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,a=e.cornerRadius,o=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,d=e.endAngle,f=wi(d-u),h=xy({cx:n,cy:r,radius:s,angle:u,sign:f,cornerRadius:a,cornerIsExternal:c}),p=h.circleTangency,m=h.lineTangency,g=h.theta,b=xy({cx:n,cy:r,radius:s,angle:d,sign:-f,cornerRadius:a,cornerIsExternal:c}),x=b.circleTangency,w=b.lineTangency,_=b.theta,E=c?Math.abs(u-d):Math.abs(u-d)-g-_;if(E<0)return o?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):$9({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:u,endAngle:d});var j="M ".concat(m.x,",").concat(m.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(E>180),",").concat(+(f<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
  `);if(i>0){var T=xy({cx:n,cy:r,radius:i,angle:u,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:c}),A=T.circleTangency,C=T.lineTangency,D=T.theta,O=xy({cx:n,cy:r,radius:i,angle:d,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:c}),L=O.circleTangency,z=O.lineTangency,M=O.theta,G=c?Math.abs(u-d):Math.abs(u-d)-D-M;if(G<0&&a===0)return"".concat(j,"L").concat(n,",").concat(r,"Z");j+="L".concat(z.x,",").concat(z.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(L.x,",").concat(L.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(G>180),",").concat(+(f>0),",").concat(A.x,",").concat(A.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(C.x,",").concat(C.y,"Z")}else j+="L".concat(n,",").concat(r,"Z");return j},ZSe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},F9=function(e){var n=XR(XR({},ZSe),e),r=n.cx,i=n.cy,s=n.innerRadius,a=n.outerRadius,o=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,f=n.endAngle,h=n.className;if(a<s||d===f)return null;var p=St("recharts-sector",h),m=a-s,g=_i(o,m,0,!0),b;return g>0&&Math.abs(d-f)<360?b=XSe({cx:r,cy:i,innerRadius:s,outerRadius:a,cornerRadius:Math.min(g,m/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):b=$9({cx:r,cy:i,innerRadius:s,outerRadius:a,startAngle:d,endAngle:f}),Y.createElement("path",t2({},et(n,!0),{className:p,d:b,role:"img"}))};function Ng(t){"@babel/helpers - typeof";return Ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ng(t)}function n2(){return n2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},n2.apply(this,arguments)}function ZR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function JR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZR(Object(n),!0).forEach(function(r){JSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function JSe(t,e,n){return e=eAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eAe(t){var e=tAe(t,"string");return Ng(e)=="symbol"?e:e+""}function tAe(t,e){if(Ng(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ng(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var e4={curveBasisClosed:Jue,curveBasisOpen:ede,curveBasis:Zue,curveBumpX:zue,curveBumpY:$ue,curveLinearClosed:tde,curveLinear:kw,curveMonotoneX:nde,curveMonotoneY:rde,curveNatural:ide,curveStep:sde,curveStepAfter:ode,curveStepBefore:ade},wy=function(e){return e.x===+e.x&&e.y===+e.y},kp=function(e){return e.x},Dp=function(e){return e.y},nAe=function(e,n){if(ut(e))return e;var r="curve".concat(Pw(e));return(r==="curveMonotone"||r==="curveBump")&&n?e4["".concat(r).concat(n==="vertical"?"Y":"X")]:e4[r]||kw},rAe=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,s=i===void 0?[]:i,a=e.baseLine,o=e.layout,c=e.connectNulls,u=c===void 0?!1:c,d=nAe(r,o),f=u?s.filter(function(g){return wy(g)}):s,h;if(Array.isArray(a)){var p=u?a.filter(function(g){return wy(g)}):a,m=f.map(function(g,b){return JR(JR({},g),{},{base:p[b]})});return o==="vertical"?h=dy().y(Dp).x1(kp).x0(function(g){return g.base.x}):h=dy().x(kp).y1(Dp).y0(function(g){return g.base.y}),h.defined(wy).curve(d),h(m)}return o==="vertical"&&Ce(a)?h=dy().y(Dp).x1(kp).x0(a):Ce(a)?h=dy().x(kp).y1(Dp).y0(a):h=OV().x(kp).y(Dp),h.defined(wy).curve(d),h(f)},yu=function(e){var n=e.className,r=e.points,i=e.path,s=e.pathRef;if((!r||!r.length)&&!i)return null;var a=r&&r.length?rAe(e):i;return P.createElement("path",n2({},et(e,!1),ab(e),{className:St("recharts-curve",n),d:a,ref:s}))},V9={exports:{}},iAe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",sAe=iAe,aAe=sAe;function B9(){}function U9(){}U9.resetWarningCache=B9;var oAe=function(){function t(r,i,s,a,o,c){if(c!==aAe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:U9,resetWarningCache:B9};return n.PropTypes=n,n};V9.exports=oAe();var lAe=V9.exports;const Yt=Qt(lAe);var cAe=Object.getOwnPropertyNames,uAe=Object.getOwnPropertySymbols,dAe=Object.prototype.hasOwnProperty;function t4(t,e){return function(r,i,s){return t(r,i,s)&&e(r,i,s)}}function _y(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var s=i.cache,a=s.get(n),o=s.get(r);if(a&&o)return a===r&&o===n;s.set(n,r),s.set(r,n);var c=t(n,r,i);return s.delete(n),s.delete(r),c}}function fAe(t){return t!=null?t[Symbol.toStringTag]:void 0}function n4(t){return cAe(t).concat(uAe(t))}var hAe=Object.hasOwn||function(t,e){return dAe.call(t,e)};function td(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var pAe="__v",mAe="__o",gAe="_owner",r4=Object.getOwnPropertyDescriptor,i4=Object.keys;function vAe(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function yAe(t,e){return td(t.getTime(),e.getTime())}function bAe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function xAe(t,e){return t===e}function s4(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),s=t.entries(),a,o,c=0;(a=s.next())&&!a.done;){for(var u=e.entries(),d=!1,f=0;(o=u.next())&&!o.done;){if(i[f]){f++;continue}var h=a.value,p=o.value;if(n.equals(h[0],p[0],c,f,t,e,n)&&n.equals(h[1],p[1],h[0],p[0],t,e,n)){d=i[f]=!0;break}f++}if(!d)return!1;c++}return!0}var wAe=td;function _Ae(t,e,n){var r=i4(t),i=r.length;if(i4(e).length!==i)return!1;for(;i-- >0;)if(!W9(t,e,n,r[i]))return!1;return!0}function Ip(t,e,n){var r=n4(t),i=r.length;if(n4(e).length!==i)return!1;for(var s,a,o;i-- >0;)if(s=r[i],!W9(t,e,n,s)||(a=r4(t,s),o=r4(e,s),(a||o)&&(!a||!o||a.configurable!==o.configurable||a.enumerable!==o.enumerable||a.writable!==o.writable)))return!1;return!0}function SAe(t,e){return td(t.valueOf(),e.valueOf())}function AAe(t,e){return t.source===e.source&&t.flags===e.flags}function a4(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),s=t.values(),a,o;(a=s.next())&&!a.done;){for(var c=e.values(),u=!1,d=0;(o=c.next())&&!o.done;){if(!i[d]&&n.equals(a.value,o.value,a.value,o.value,t,e,n)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function EAe(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function jAe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function W9(t,e,n,r){return(r===gAe||r===mAe||r===pAe)&&(t.$$typeof||e.$$typeof)?!0:hAe(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var CAe="[object Arguments]",TAe="[object Boolean]",PAe="[object Date]",NAe="[object Error]",kAe="[object Map]",DAe="[object Number]",IAe="[object Object]",OAe="[object RegExp]",MAe="[object Set]",RAe="[object String]",LAe="[object URL]",zAe=Array.isArray,o4=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,l4=Object.assign,$Ae=Object.prototype.toString.call.bind(Object.prototype.toString);function FAe(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,s=t.areMapsEqual,a=t.areNumbersEqual,o=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,d=t.areSetsEqual,f=t.areTypedArraysEqual,h=t.areUrlsEqual,p=t.unknownTagComparators;return function(g,b,x){if(g===b)return!0;if(g==null||b==null)return!1;var w=typeof g;if(w!==typeof b)return!1;if(w!=="object")return w==="number"?a(g,b,x):w==="function"?i(g,b,x):!1;var _=g.constructor;if(_!==b.constructor)return!1;if(_===Object)return o(g,b,x);if(zAe(g))return e(g,b,x);if(o4!=null&&o4(g))return f(g,b,x);if(_===Date)return n(g,b,x);if(_===RegExp)return u(g,b,x);if(_===Map)return s(g,b,x);if(_===Set)return d(g,b,x);var E=$Ae(g);if(E===PAe)return n(g,b,x);if(E===OAe)return u(g,b,x);if(E===kAe)return s(g,b,x);if(E===MAe)return d(g,b,x);if(E===IAe)return typeof g.then!="function"&&typeof b.then!="function"&&o(g,b,x);if(E===LAe)return h(g,b,x);if(E===NAe)return r(g,b,x);if(E===CAe)return o(g,b,x);if(E===TAe||E===DAe||E===RAe)return c(g,b,x);if(p){var j=p[E];if(!j){var T=fAe(g);T&&(j=p[T])}if(j)return j(g,b,x)}return!1}}function VAe(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?Ip:vAe,areDatesEqual:yAe,areErrorsEqual:bAe,areFunctionsEqual:xAe,areMapsEqual:r?t4(s4,Ip):s4,areNumbersEqual:wAe,areObjectsEqual:r?Ip:_Ae,arePrimitiveWrappersEqual:SAe,areRegExpsEqual:AAe,areSetsEqual:r?t4(a4,Ip):a4,areTypedArraysEqual:r?Ip:EAe,areUrlsEqual:jAe,unknownTagComparators:void 0};if(n&&(i=l4({},i,n(i))),e){var s=_y(i.areArraysEqual),a=_y(i.areMapsEqual),o=_y(i.areObjectsEqual),c=_y(i.areSetsEqual);i=l4({},i,{areArraysEqual:s,areMapsEqual:a,areObjectsEqual:o,areSetsEqual:c})}return i}function BAe(t){return function(e,n,r,i,s,a,o){return t(e,n,o)}}function UAe(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,s=t.strict;if(r)return function(c,u){var d=r(),f=d.cache,h=f===void 0?e?new WeakMap:void 0:f,p=d.meta;return n(c,u,{cache:h,equals:i,meta:p,strict:s})};if(e)return function(c,u){return n(c,u,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var a={cache:void 0,equals:i,meta:void 0,strict:s};return function(c,u){return n(c,u,a)}}var WAe=lc();lc({strict:!0});lc({circular:!0});lc({circular:!0,strict:!0});lc({createInternalComparator:function(){return td}});lc({strict:!0,createInternalComparator:function(){return td}});lc({circular:!0,createInternalComparator:function(){return td}});lc({circular:!0,createInternalComparator:function(){return td},strict:!0});function lc(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,s=t.strict,a=s===void 0?!1:s,o=VAe(t),c=FAe(o),u=r?r(c):BAe(c);return UAe({circular:n,comparator:c,createState:i,equals:u,strict:a})}function HAe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function c4(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(s){n<0&&(n=s),s-n>e?(t(s),n=-1):HAe(i)};requestAnimationFrame(r)}function r2(t){"@babel/helpers - typeof";return r2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r2(t)}function qAe(t){return QAe(t)||YAe(t)||GAe(t)||KAe()}function KAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GAe(t,e){if(t){if(typeof t=="string")return u4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u4(t,e)}}function u4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function YAe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function QAe(t){if(Array.isArray(t))return t}function XAe(){var t={},e=function(){return null},n=!1,r=function i(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var a=s,o=qAe(a),c=o[0],u=o.slice(1);if(typeof c=="number"){c4(i.bind(null,u),c);return}i(c),c4(i.bind(null,u));return}r2(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,r(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function kg(t){"@babel/helpers - typeof";return kg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kg(t)}function d4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function f4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?d4(Object(n),!0).forEach(function(r){H9(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function H9(t,e,n){return e=ZAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZAe(t){var e=JAe(t,"string");return kg(e)==="symbol"?e:String(e)}function JAe(t,e){if(kg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(kg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var eEe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(s){return i.includes(s)})})},tEe=function(e){return e},nEe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},ym=function(e,n){return Object.keys(n).reduce(function(r,i){return f4(f4({},r),{},H9({},i,e(i,n[i])))},{})},h4=function(e,n,r){return e.map(function(i){return"".concat(nEe(i)," ").concat(n,"ms ").concat(r)}).join(",")};function rEe(t,e){return aEe(t)||sEe(t,e)||q9(t,e)||iEe()}function iEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sEe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function aEe(t){if(Array.isArray(t))return t}function oEe(t){return uEe(t)||cEe(t)||q9(t)||lEe()}function lEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q9(t,e){if(t){if(typeof t=="string")return i2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i2(t,e)}}function cEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function uEe(t){if(Array.isArray(t))return i2(t)}function i2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Lb=1e-4,K9=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},G9=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},p4=function(e,n){return function(r){var i=K9(e,n);return G9(i,r)}},dEe=function(e,n){return function(r){var i=K9(e,n),s=[].concat(oEe(i.map(function(a,o){return a*o}).slice(1)),[0]);return G9(s,r)}},m4=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],s=n[1],a=n[2],o=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,s=0,a=1,o=1;break;case"ease":i=.25,s=.1,a=.25,o=1;break;case"ease-in":i=.42,s=0,a=1,o=1;break;case"ease-out":i=.42,s=0,a=.58,o=1;break;case"ease-in-out":i=0,s=0,a=.58,o=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(b){return parseFloat(b)}),d=rEe(u,4);i=d[0],s=d[1],a=d[2],o=d[3]}}}var f=p4(i,a),h=p4(s,o),p=dEe(i,a),m=function(x){return x>1?1:x<0?0:x},g=function(x){for(var w=x>1?1:x,_=w,E=0;E<8;++E){var j=f(_)-w,T=p(_);if(Math.abs(j-w)<Lb||T<Lb)return h(_);_=m(_-j/T)}return h(_)};return g.isStepper=!1,g},fEe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,s=i===void 0?8:i,a=e.dt,o=a===void 0?17:a,c=function(d,f,h){var p=-(d-f)*r,m=h*s,g=h+(p-m)*o/1e3,b=h*o/1e3+d;return Math.abs(b-f)<Lb&&Math.abs(g)<Lb?[f,0]:[b,g]};return c.isStepper=!0,c.dt=o,c},hEe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return m4(i);case"spring":return fEe();default:if(i.split("(")[0]==="cubic-bezier")return m4(i)}return typeof i=="function"?i:null};function Dg(t){"@babel/helpers - typeof";return Dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dg(t)}function g4(t){return gEe(t)||mEe(t)||Y9(t)||pEe()}function pEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function gEe(t){if(Array.isArray(t))return a2(t)}function v4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v4(Object(n),!0).forEach(function(r){s2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function s2(t,e,n){return e=vEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vEe(t){var e=yEe(t,"string");return Dg(e)==="symbol"?e:String(e)}function yEe(t,e){if(Dg(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Dg(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bEe(t,e){return _Ee(t)||wEe(t,e)||Y9(t,e)||xEe()}function xEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y9(t,e){if(t){if(typeof t=="string")return a2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a2(t,e)}}function a2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wEe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function _Ee(t){if(Array.isArray(t))return t}var zb=function(e,n,r){return e+(n-e)*r},o2=function(e){var n=e.from,r=e.to;return n!==r},SEe=function t(e,n,r){var i=ym(function(s,a){if(o2(a)){var o=e(a.from,a.to,a.velocity),c=bEe(o,2),u=c[0],d=c[1];return qr(qr({},a),{},{from:u,velocity:d})}return a},n);return r<1?ym(function(s,a){return o2(a)?qr(qr({},a),{},{velocity:zb(a.velocity,i[s].velocity,r),from:zb(a.from,i[s].from,r)}):a},n):t(e,i,r-1)};const AEe=function(t,e,n,r,i){var s=eEe(t,e),a=s.reduce(function(b,x){return qr(qr({},b),{},s2({},x,[t[x],e[x]]))},{}),o=s.reduce(function(b,x){return qr(qr({},b),{},s2({},x,{from:t[x],velocity:0,to:e[x]}))},{}),c=-1,u,d,f=function(){return null},h=function(){return ym(function(x,w){return w.from},o)},p=function(){return!Object.values(o).filter(o2).length},m=function(x){u||(u=x);var w=x-u,_=w/n.dt;o=SEe(n,o,_),i(qr(qr(qr({},t),e),h())),u=x,p()||(c=requestAnimationFrame(f))},g=function(x){d||(d=x);var w=(x-d)/r,_=ym(function(j,T){return zb.apply(void 0,g4(T).concat([n(w)]))},a);if(i(qr(qr(qr({},t),e),_)),w<1)c=requestAnimationFrame(f);else{var E=ym(function(j,T){return zb.apply(void 0,g4(T).concat([n(1)]))},a);i(qr(qr(qr({},t),e),E))}};return f=n.isStepper?m:g,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function rh(t){"@babel/helpers - typeof";return rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rh(t)}var EEe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function jEe(t,e){if(t==null)return{};var n=CEe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function CEe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function G_(t){return kEe(t)||NEe(t)||PEe(t)||TEe()}function TEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PEe(t,e){if(t){if(typeof t=="string")return l2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l2(t,e)}}function NEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function kEe(t){if(Array.isArray(t))return l2(t)}function l2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function y4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Hs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y4(Object(n),!0).forEach(function(r){Gp(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gp(t,e,n){return e=Q9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DEe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IEe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Q9(r.key),r)}}function OEe(t,e,n){return e&&IEe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Q9(t){var e=MEe(t,"string");return rh(e)==="symbol"?e:String(e)}function MEe(t,e){if(rh(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(rh(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function REe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c2(t,e)}function c2(t,e){return c2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},c2(t,e)}function LEe(t){var e=zEe();return function(){var r=$b(t),i;if(e){var s=$b(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return u2(this,i)}}function u2(t,e){if(e&&(rh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d2(t)}function d2(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zEe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $b(t){return $b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$b(t)}var oa=function(t){REe(n,t);var e=LEe(n);function n(r,i){var s;DEe(this,n),s=e.call(this,r,i);var a=s.props,o=a.isActive,c=a.attributeName,u=a.from,d=a.to,f=a.steps,h=a.children,p=a.duration;if(s.handleStyleChange=s.handleStyleChange.bind(d2(s)),s.changeStyle=s.changeStyle.bind(d2(s)),!o||p<=0)return s.state={style:{}},typeof h=="function"&&(s.state={style:d}),u2(s);if(f&&f.length)s.state={style:f[0].style};else if(u){if(typeof h=="function")return s.state={style:u},u2(s);s.state={style:c?Gp({},c,u):u}}else s.state={style:{}};return s}return OEe(n,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,a=i.canBegin;this.mounted=!0,!(!s||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,a=s.isActive,o=s.canBegin,c=s.attributeName,u=s.shouldReAnimate,d=s.to,f=s.from,h=this.state.style;if(o){if(!a){var p={style:c?Gp({},c,d):d};this.state&&h&&(c&&h[c]!==d||!c&&h!==d)&&this.setState(p);return}if(!(WAe(i.to,d)&&i.canBegin&&i.isActive)){var m=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=m||u?f:i.to;if(this.state&&h){var b={style:c?Gp({},c,g):g};(c&&h[c]!==g||!c&&h!==g)&&this.setState(b)}this.runAnimation(Hs(Hs({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,a=i.from,o=i.to,c=i.duration,u=i.easing,d=i.begin,f=i.onAnimationEnd,h=i.onAnimationStart,p=AEe(a,o,hEe(u),c,this.changeStyle),m=function(){s.stopJSAnimation=p()};this.manager.start([h,d,m,c,f])}},{key:"runStepAnimation",value:function(i){var s=this,a=i.steps,o=i.begin,c=i.onAnimationStart,u=a[0],d=u.style,f=u.duration,h=f===void 0?0:f,p=function(g,b,x){if(x===0)return g;var w=b.duration,_=b.easing,E=_===void 0?"ease":_,j=b.style,T=b.properties,A=b.onAnimationEnd,C=x>0?a[x-1]:b,D=T||Object.keys(j);if(typeof E=="function"||E==="spring")return[].concat(G_(g),[s.runJSAnimation.bind(s,{from:C.style,to:j,duration:w,easing:E}),w]);var O=h4(D,w,E),L=Hs(Hs(Hs({},C.style),j),{},{transition:O});return[].concat(G_(g),[L,w,A]).filter(tEe)};return this.manager.start([c].concat(G_(a.reduce(p,[d,Math.max(h,o)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=XAe());var s=i.begin,a=i.duration,o=i.attributeName,c=i.to,u=i.easing,d=i.onAnimationStart,f=i.onAnimationEnd,h=i.steps,p=i.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var g=o?Gp({},o,c):c,b=h4(Object.keys(g),a,u);m.start([d,s,Hs(Hs({},g),{},{transition:b}),a,f])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var a=i.duration;i.attributeName,i.easing;var o=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=jEe(i,EEe),u=P.Children.count(s),d=this.state.style;if(typeof s=="function")return s(d);if(!o||u===0||a<=0)return s;var f=function(p){var m=p.props,g=m.style,b=g===void 0?{}:g,x=m.className,w=P.cloneElement(p,Hs(Hs({},c),{},{style:Hs(Hs({},b),d),className:x}));return w};return u===1?f(P.Children.only(s)):Y.createElement("div",null,P.Children.map(s,function(h){return f(h)}))}}]),n}(P.PureComponent);oa.displayName="Animate";oa.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};oa.propTypes={from:Yt.oneOfType([Yt.object,Yt.string]),to:Yt.oneOfType([Yt.object,Yt.string]),attributeName:Yt.string,duration:Yt.number,begin:Yt.number,easing:Yt.oneOfType([Yt.string,Yt.func]),steps:Yt.arrayOf(Yt.shape({duration:Yt.number.isRequired,style:Yt.object.isRequired,easing:Yt.oneOfType([Yt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Yt.func]),properties:Yt.arrayOf("string"),onAnimationEnd:Yt.func})),children:Yt.oneOfType([Yt.node,Yt.func]),isActive:Yt.bool,canBegin:Yt.bool,onAnimationEnd:Yt.func,shouldReAnimate:Yt.bool,onAnimationStart:Yt.func,onAnimationReStart:Yt.func};function Ig(t){"@babel/helpers - typeof";return Ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ig(t)}function Fb(){return Fb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fb.apply(this,arguments)}function $Ee(t,e){return UEe(t)||BEe(t,e)||VEe(t,e)||FEe()}function FEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VEe(t,e){if(t){if(typeof t=="string")return b4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b4(t,e)}}function b4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function BEe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function UEe(t){if(Array.isArray(t))return t}function x4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function w4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x4(Object(n),!0).forEach(function(r){WEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WEe(t,e,n){return e=HEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HEe(t){var e=qEe(t,"string");return Ig(e)=="symbol"?e:e+""}function qEe(t,e){if(Ig(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ig(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _4=function(e,n,r,i,s){var a=Math.min(Math.abs(r)/2,Math.abs(i)/2),o=i>=0?1:-1,c=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,d;if(a>0&&s instanceof Array){for(var f=[0,0,0,0],h=0,p=4;h<p;h++)f[h]=s[h]>a?a:s[h];d="M".concat(e,",").concat(n+o*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(e+c*f[0],",").concat(n)),d+="L ".concat(e+r-c*f[1],",").concat(n),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+o*f[1])),d+="L ".concat(e+r,",").concat(n+i-o*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(e+r-c*f[2],",").concat(n+i)),d+="L ".concat(e+c*f[3],",").concat(n+i),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+i-o*f[3])),d+="Z"}else if(a>0&&s===+s&&s>0){var m=Math.min(a,s);d="M ".concat(e,",").concat(n+o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e+c*m,",").concat(n,`
            L `).concat(e+r-c*m,",").concat(n,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e+r,",").concat(n+o*m,`
            L `).concat(e+r,",").concat(n+i-o*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e+r-c*m,",").concat(n+i,`
            L `).concat(e+c*m,",").concat(n+i,`
            A `).concat(m,",").concat(m,",0,0,").concat(u,",").concat(e,",").concat(n+i-o*m," Z")}else d="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return d},KEe=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,s=n.x,a=n.y,o=n.width,c=n.height;if(Math.abs(o)>0&&Math.abs(c)>0){var u=Math.min(s,s+o),d=Math.max(s,s+o),f=Math.min(a,a+c),h=Math.max(a,a+c);return r>=u&&r<=d&&i>=f&&i<=h}return!1},GEe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},TP=function(e){var n=w4(w4({},GEe),e),r=P.useRef(),i=P.useState(-1),s=$Ee(i,2),a=s[0],o=s[1];P.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var E=r.current.getTotalLength();E&&o(E)}catch{}},[]);var c=n.x,u=n.y,d=n.width,f=n.height,h=n.radius,p=n.className,m=n.animationEasing,g=n.animationDuration,b=n.animationBegin,x=n.isAnimationActive,w=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var _=St("recharts-rectangle",p);return w?Y.createElement(oa,{canBegin:a>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:g,animationEasing:m,isActive:w},function(E){var j=E.width,T=E.height,A=E.x,C=E.y;return Y.createElement(oa,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:g,isActive:x,easing:m},Y.createElement("path",Fb({},et(n,!0),{className:_,d:_4(A,C,j,T,h),ref:r})))}):Y.createElement("path",Fb({},et(n,!0),{className:_,d:_4(c,u,d,f,h)}))},YEe=["points","className","baseLinePoints","connectNulls"];function sf(){return sf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sf.apply(this,arguments)}function QEe(t,e){if(t==null)return{};var n=XEe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function XEe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function S4(t){return t2e(t)||e2e(t)||JEe(t)||ZEe()}function ZEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JEe(t,e){if(t){if(typeof t=="string")return f2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f2(t,e)}}function e2e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function t2e(t){if(Array.isArray(t))return f2(t)}function f2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var A4=function(e){return e&&e.x===+e.x&&e.y===+e.y},n2e=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){A4(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),A4(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},bm=function(e,n){var r=n2e(e);n&&(r=[r.reduce(function(s,a){return[].concat(S4(s),S4(a))},[])]);var i=r.map(function(s){return s.reduce(function(a,o,c){return"".concat(a).concat(c===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},r2e=function(e,n,r){var i=bm(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(bm(n.reverse(),r).slice(1))},i2e=function(e){var n=e.points,r=e.className,i=e.baseLinePoints,s=e.connectNulls,a=QEe(e,YEe);if(!n||!n.length)return null;var o=St("recharts-polygon",r);if(i&&i.length){var c=a.stroke&&a.stroke!=="none",u=r2e(n,i,s);return Y.createElement("g",{className:o},Y.createElement("path",sf({},et(a,!0),{fill:u.slice(-1)==="Z"?a.fill:"none",stroke:"none",d:u})),c?Y.createElement("path",sf({},et(a,!0),{fill:"none",d:bm(n,s)})):null,c?Y.createElement("path",sf({},et(a,!0),{fill:"none",d:bm(i,s)})):null)}var d=bm(n,s);return Y.createElement("path",sf({},et(a,!0),{fill:d.slice(-1)==="Z"?a.fill:"none",className:o,d}))};function h2(){return h2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h2.apply(this,arguments)}var Av=function(e){var n=e.cx,r=e.cy,i=e.r,s=e.className,a=St("recharts-dot",s);return n===+n&&r===+r&&i===+i?P.createElement("circle",h2({},et(e,!1),ab(e),{className:a,cx:n,cy:r,r:i})):null};function Og(t){"@babel/helpers - typeof";return Og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Og(t)}var s2e=["x","y","top","left","width","height","className"];function p2(){return p2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},p2.apply(this,arguments)}function E4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function a2e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E4(Object(n),!0).forEach(function(r){o2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function o2e(t,e,n){return e=l2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l2e(t){var e=c2e(t,"string");return Og(e)=="symbol"?e:e+""}function c2e(t,e){if(Og(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Og(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function u2e(t,e){if(t==null)return{};var n=d2e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function d2e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var f2e=function(e,n,r,i,s,a){return"M".concat(e,",").concat(s,"v").concat(i,"M").concat(a,",").concat(n,"h").concat(r)},h2e=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,s=i===void 0?0:i,a=e.top,o=a===void 0?0:a,c=e.left,u=c===void 0?0:c,d=e.width,f=d===void 0?0:d,h=e.height,p=h===void 0?0:h,m=e.className,g=u2e(e,s2e),b=a2e({x:r,y:s,top:o,left:u,width:f,height:p},g);return!Ce(r)||!Ce(s)||!Ce(f)||!Ce(p)||!Ce(o)||!Ce(u)?null:Y.createElement("path",p2({},et(b,!0),{className:St("recharts-cross",m),d:f2e(r,s,f,p,o,u)}))},p2e=Bw,m2e=l9,g2e=Ya;function v2e(t,e){return t&&t.length?p2e(t,g2e(e),m2e):void 0}var y2e=v2e;const b2e=Qt(y2e);var x2e=Bw,w2e=Ya,_2e=c9;function S2e(t,e){return t&&t.length?x2e(t,w2e(e),_2e):void 0}var A2e=S2e;const E2e=Qt(A2e);var j2e=["cx","cy","angle","ticks","axisLine"],C2e=["ticks","tick","angle","tickFormatter","stroke"];function ih(t){"@babel/helpers - typeof";return ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ih(t)}function xm(){return xm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xm.apply(this,arguments)}function j4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Oc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j4(Object(n),!0).forEach(function(r){qw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function C4(t,e){if(t==null)return{};var n=T2e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function T2e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function P2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Z9(r.key),r)}}function N2e(t,e,n){return e&&T4(t.prototype,e),n&&T4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function k2e(t,e,n){return e=Vb(e),D2e(t,X9()?Reflect.construct(e,n||[],Vb(t).constructor):e.apply(t,n))}function D2e(t,e){if(e&&(ih(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I2e(t)}function I2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function X9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(X9=function(){return!!t})()}function Vb(t){return Vb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vb(t)}function O2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m2(t,e)}function m2(t,e){return m2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},m2(t,e)}function qw(t,e,n){return e=Z9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Z9(t){var e=M2e(t,"string");return ih(e)=="symbol"?e:e+""}function M2e(t,e){if(ih(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ih(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Kw=function(t){function e(){return P2e(this,e),k2e(this,e,arguments)}return O2e(e,t),N2e(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,s=this.props,a=s.angle,o=s.cx,c=s.cy;return yn(o,c,i,a)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,s=r.cy,a=r.angle,o=r.ticks,c=b2e(o,function(d){return d.coordinate||0}),u=E2e(o,function(d){return d.coordinate||0});return{cx:i,cy:s,startAngle:a,endAngle:a,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,s=r.cy,a=r.angle,o=r.ticks,c=r.axisLine,u=C4(r,j2e),d=o.reduce(function(m,g){return[Math.min(m[0],g.coordinate),Math.max(m[1],g.coordinate)]},[1/0,-1/0]),f=yn(i,s,d[0],a),h=yn(i,s,d[1],a),p=Oc(Oc(Oc({},et(u,!1)),{},{fill:"none"},et(c,!1)),{},{x1:f.x,y1:f.y,x2:h.x,y2:h.y});return Y.createElement("line",xm({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var r=this,i=this.props,s=i.ticks,a=i.tick,o=i.angle,c=i.tickFormatter,u=i.stroke,d=C4(i,C2e),f=this.getTickTextAnchor(),h=et(d,!1),p=et(a,!1),m=s.map(function(g,b){var x=r.getTickValueCoord(g),w=Oc(Oc(Oc(Oc({textAnchor:f,transform:"rotate(".concat(90-o,", ").concat(x.x,", ").concat(x.y,")")},h),{},{stroke:"none",fill:u},p),{},{index:b},x),{},{payload:g});return Y.createElement(Tt,xm({className:St("recharts-polar-radius-axis-tick",L9(a)),key:"tick-".concat(g.coordinate)},Du(r.props,g,b)),e.renderTickItem(a,w,c?c(g.value,b):g.value))});return Y.createElement(Tt,{className:"recharts-polar-radius-axis-ticks"},m)}},{key:"render",value:function(){var r=this.props,i=r.ticks,s=r.axisLine,a=r.tick;return!i||!i.length?null:Y.createElement(Tt,{className:St("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),a&&this.renderTicks(),Mr.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,s){var a;return Y.isValidElement(r)?a=Y.cloneElement(r,i):ut(r)?a=r(i):a=Y.createElement(Iu,xm({},i,{className:"recharts-polar-radius-axis-tick-value"}),s),a}}])}(P.PureComponent);qw(Kw,"displayName","PolarRadiusAxis");qw(Kw,"axisType","radiusAxis");qw(Kw,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function sh(t){"@babel/helpers - typeof";return sh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sh(t)}function Gc(){return Gc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gc.apply(this,arguments)}function P4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Mc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P4(Object(n),!0).forEach(function(r){Gw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function R2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function N4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,e7(r.key),r)}}function L2e(t,e,n){return e&&N4(t.prototype,e),n&&N4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function z2e(t,e,n){return e=Bb(e),$2e(t,J9()?Reflect.construct(e,n||[],Bb(t).constructor):e.apply(t,n))}function $2e(t,e){if(e&&(sh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F2e(t)}function F2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function J9(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(J9=function(){return!!t})()}function Bb(t){return Bb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Bb(t)}function V2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g2(t,e)}function g2(t,e){return g2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},g2(t,e)}function Gw(t,e,n){return e=e7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e7(t){var e=B2e(t,"string");return sh(e)=="symbol"?e:e+""}function B2e(t,e){if(sh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(sh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var U2e=Math.PI/180,k4=1e-5,Yw=function(t){function e(){return R2e(this,e),z2e(this,e,arguments)}return V2e(e,t),L2e(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,s=i.cx,a=i.cy,o=i.radius,c=i.orientation,u=i.tickSize,d=u||8,f=yn(s,a,o,r.coordinate),h=yn(s,a,o+(c==="inner"?-1:1)*d,r.coordinate);return{x1:f.x,y1:f.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,s=Math.cos(-r.coordinate*U2e),a;return s>k4?a=i==="outer"?"start":"end":s<-k4?a=i==="outer"?"end":"start":a="middle",a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,s=r.cy,a=r.radius,o=r.axisLine,c=r.axisLineType,u=Mc(Mc({},et(this.props,!1)),{},{fill:"none"},et(o,!1));if(c==="circle")return Y.createElement(Av,Gc({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:s,r:a}));var d=this.props.ticks,f=d.map(function(h){return yn(i,s,a,h.coordinate)});return Y.createElement(i2e,Gc({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,s=i.ticks,a=i.tick,o=i.tickLine,c=i.tickFormatter,u=i.stroke,d=et(this.props,!1),f=et(a,!1),h=Mc(Mc({},d),{},{fill:"none"},et(o,!1)),p=s.map(function(m,g){var b=r.getTickLineCoord(m),x=r.getTickTextAnchor(m),w=Mc(Mc(Mc({textAnchor:x},d),{},{stroke:"none",fill:u},f),{},{index:g,payload:m,x:b.x2,y:b.y2});return Y.createElement(Tt,Gc({className:St("recharts-polar-angle-axis-tick",L9(a)),key:"tick-".concat(m.coordinate)},Du(r.props,m,g)),o&&Y.createElement("line",Gc({className:"recharts-polar-angle-axis-tick-line"},h,b)),a&&e.renderTickItem(a,w,c?c(m.value,g):m.value))});return Y.createElement(Tt,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var r=this.props,i=r.ticks,s=r.radius,a=r.axisLine;return s<=0||!i||!i.length?null:Y.createElement(Tt,{className:St("recharts-polar-angle-axis",this.props.className)},a&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,s){var a;return Y.isValidElement(r)?a=Y.cloneElement(r,i):ut(r)?a=r(i):a=Y.createElement(Iu,Gc({},i,{className:"recharts-polar-angle-axis-tick-value"}),s),a}}])}(P.PureComponent);Gw(Yw,"displayName","PolarAngleAxis");Gw(Yw,"axisType","angleAxis");Gw(Yw,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var W2e=iB,H2e=W2e(Object.getPrototypeOf,Object),q2e=H2e,K2e=Bo,G2e=q2e,Y2e=Uo,Q2e="[object Object]",X2e=Function.prototype,Z2e=Object.prototype,t7=X2e.toString,J2e=Z2e.hasOwnProperty,eje=t7.call(Object);function tje(t){if(!Y2e(t)||K2e(t)!=Q2e)return!1;var e=G2e(t);if(e===null)return!0;var n=J2e.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&t7.call(n)==eje}var nje=tje;const rje=Qt(nje);var ije=Bo,sje=Uo,aje="[object Boolean]";function oje(t){return t===!0||t===!1||sje(t)&&ije(t)==aje}var lje=oje;const cje=Qt(lje);function Mg(t){"@babel/helpers - typeof";return Mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mg(t)}function Ub(){return Ub=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ub.apply(this,arguments)}function uje(t,e){return pje(t)||hje(t,e)||fje(t,e)||dje()}function dje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fje(t,e){if(t){if(typeof t=="string")return D4(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D4(t,e)}}function D4(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hje(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function pje(t){if(Array.isArray(t))return t}function I4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function O4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I4(Object(n),!0).forEach(function(r){mje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mje(t,e,n){return e=gje(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gje(t){var e=vje(t,"string");return Mg(e)=="symbol"?e:e+""}function vje(t,e){if(Mg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Mg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var M4=function(e,n,r,i,s){var a=r-i,o;return o="M ".concat(e,",").concat(n),o+="L ".concat(e+r,",").concat(n),o+="L ".concat(e+r-a/2,",").concat(n+s),o+="L ".concat(e+r-a/2-i,",").concat(n+s),o+="L ".concat(e,",").concat(n," Z"),o},yje={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},bje=function(e){var n=O4(O4({},yje),e),r=P.useRef(),i=P.useState(-1),s=uje(i,2),a=s[0],o=s[1];P.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var _=r.current.getTotalLength();_&&o(_)}catch{}},[]);var c=n.x,u=n.y,d=n.upperWidth,f=n.lowerWidth,h=n.height,p=n.className,m=n.animationEasing,g=n.animationDuration,b=n.animationBegin,x=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||h!==+h||d===0&&f===0||h===0)return null;var w=St("recharts-trapezoid",p);return x?Y.createElement(oa,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:h,x:c,y:u},duration:g,animationEasing:m,isActive:x},function(_){var E=_.upperWidth,j=_.lowerWidth,T=_.height,A=_.x,C=_.y;return Y.createElement(oa,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:g,easing:m},Y.createElement("path",Ub({},et(n,!0),{className:w,d:M4(A,C,E,j,T),ref:r})))}):Y.createElement("g",null,Y.createElement("path",Ub({},et(n,!0),{className:w,d:M4(c,u,d,f,h)})))},xje=["option","shapeType","propTransformer","activeClassName","isActive"];function Rg(t){"@babel/helpers - typeof";return Rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rg(t)}function wje(t,e){if(t==null)return{};var n=_je(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _je(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function R4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Wb(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R4(Object(n),!0).forEach(function(r){Sje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sje(t,e,n){return e=Aje(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Aje(t){var e=Eje(t,"string");return Rg(e)=="symbol"?e:e+""}function Eje(t,e){if(Rg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jje(t,e){return Wb(Wb({},e),t)}function Cje(t,e){return t==="symbols"}function L4(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return Y.createElement(TP,n);case"trapezoid":return Y.createElement(bje,n);case"sector":return Y.createElement(F9,n);case"symbols":if(Cje(e))return Y.createElement(KT,n);break;default:return null}}function Tje(t){return P.isValidElement(t)?t.props:t}function n7(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?jje:r,s=t.activeClassName,a=s===void 0?"recharts-active-shape":s,o=t.isActive,c=wje(t,xje),u;if(P.isValidElement(e))u=P.cloneElement(e,Wb(Wb({},c),Tje(e)));else if(ut(e))u=e(c);else if(rje(e)&&!cje(e)){var d=i(e,c);u=Y.createElement(L4,{shapeType:n,elementProps:d})}else{var f=c;u=Y.createElement(L4,{shapeType:n,elementProps:f})}return o?Y.createElement(Tt,{className:a},u):u}function Qw(t,e){return e!=null&&"trapezoids"in t.props}function Xw(t,e){return e!=null&&"sectors"in t.props}function Lg(t,e){return e!=null&&"points"in t.props}function Pje(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,s=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&s}function Nje(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function kje(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function Dje(t,e){var n;return Qw(t,e)?n=Pje:Xw(t,e)?n=Nje:Lg(t,e)&&(n=kje),n}function Ije(t,e){var n;return Qw(t,e)?n="trapezoids":Xw(t,e)?n="sectors":Lg(t,e)&&(n="points"),n}function Oje(t,e){if(Qw(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Xw(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Lg(t,e)?e.payload:{}}function Mje(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=Ije(n,e),s=Oje(n,e),a=r.filter(function(c,u){var d=Ou(s,c),f=n.props[i].filter(function(m){var g=Dje(n,e);return g(m,e)}),h=n.props[i].indexOf(f[f.length-1]),p=u===h;return d&&p}),o=r.indexOf(a[a.length-1]);return o}var s0;function ah(t){"@babel/helpers - typeof";return ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ah(t)}function af(){return af=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},af.apply(this,arguments)}function z4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z4(Object(n),!0).forEach(function(r){js(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i7(r.key),r)}}function Lje(t,e,n){return e&&$4(t.prototype,e),n&&$4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function zje(t,e,n){return e=Hb(e),$je(t,r7()?Reflect.construct(e,n||[],Hb(t).constructor):e.apply(t,n))}function $je(t,e){if(e&&(ah(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fje(t)}function Fje(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r7=function(){return!!t})()}function Hb(t){return Hb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Hb(t)}function Vje(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v2(t,e)}function v2(t,e){return v2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},v2(t,e)}function js(t,e,n){return e=i7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i7(t){var e=Bje(t,"string");return ah(e)=="symbol"?e:e+""}function Bje(t,e){if(ah(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ah(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var la=function(t){function e(n){var r;return Rje(this,e),r=zje(this,e,[n]),js(r,"pieRef",null),js(r,"sectorRefs",[]),js(r,"id",Zu("recharts-pie-")),js(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),ut(i)&&i()}),js(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),ut(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return Vje(e,t),Lje(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.label,o=s.labelLine,c=s.dataKey,u=s.valueKey,d=et(this.props,!1),f=et(a,!1),h=et(o,!1),p=a&&a.offsetRadius||20,m=r.map(function(g,b){var x=(g.startAngle+g.endAngle)/2,w=yn(g.cx,g.cy,g.outerRadius+p,x),_=mn(mn(mn(mn({},d),g),{},{stroke:"none"},f),{},{index:b,textAnchor:e.getTextAnchor(w.x,g.cx)},w),E=mn(mn(mn(mn({},d),g),{},{fill:"none",stroke:g.fill},h),{},{index:b,points:[yn(g.cx,g.cy,g.outerRadius,x),w]}),j=c;return gt(c)&&gt(u)?j="value":gt(c)&&(j=u),Y.createElement(Tt,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(b)},o&&e.renderLabelLineItem(o,E,"line"),e.renderLabelItem(a,_,Jn(g,j)))});return Y.createElement(Tt,{className:"recharts-pie-labels"},m)}},{key:"renderSectorsStatically",value:function(r){var i=this,s=this.props,a=s.activeShape,o=s.blendStroke,c=s.inactiveShape;return r.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&r.length!==1)return null;var f=i.isActiveIndex(d),h=c&&i.hasActiveIndex()?c:null,p=f?a:h,m=mn(mn({},u),{},{stroke:o?u.fill:u.stroke,tabIndex:-1});return Y.createElement(Tt,af({ref:function(b){b&&!i.sectorRefs.includes(b)&&i.sectorRefs.push(b)},tabIndex:-1,className:"recharts-pie-sector"},Du(i.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),Y.createElement(n7,af({option:p,isActive:f,shapeType:"sector"},m)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,s=i.sectors,a=i.isAnimationActive,o=i.animationBegin,c=i.animationDuration,u=i.animationEasing,d=i.animationId,f=this.state,h=f.prevSectors,p=f.prevIsAnimationActive;return Y.createElement(oa,{begin:o,duration:c,isActive:a,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(m){var g=m.t,b=[],x=s&&s[0],w=x.startAngle;return s.forEach(function(_,E){var j=h&&h[E],T=E>0?ss(_,"paddingAngle",0):0;if(j){var A=_r(j.endAngle-j.startAngle,_.endAngle-_.startAngle),C=mn(mn({},_),{},{startAngle:w+T,endAngle:w+A(g)+T});b.push(C),w=C.endAngle}else{var D=_.endAngle,O=_.startAngle,L=_r(0,D-O),z=L(g),M=mn(mn({},_),{},{startAngle:w+T,endAngle:w+z+T});b.push(M),w=M.endAngle}}),Y.createElement(Tt,null,r.renderSectorsStatically(b))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var a=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[a].focus(),i.setState({sectorToFocus:a});break}case"ArrowRight":{var o=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,s=r.isAnimationActive,a=this.state.prevSectors;return s&&i&&i.length&&(!a||!Ou(a,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,s=i.hide,a=i.sectors,o=i.className,c=i.label,u=i.cx,d=i.cy,f=i.innerRadius,h=i.outerRadius,p=i.isAnimationActive,m=this.state.isAnimationFinished;if(s||!a||!a.length||!Ce(u)||!Ce(d)||!Ce(f)||!Ce(h))return null;var g=St("recharts-pie",o);return Y.createElement(Tt,{tabIndex:this.props.rootTabIndex,className:g,ref:function(x){r.pieRef=x}},this.renderSectors(),c&&this.renderLabels(a),Mr.renderCallByParent(this.props,null,!1),(!p||m)&&Ns.renderCallByParent(this.props,a,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,s){if(Y.isValidElement(r))return Y.cloneElement(r,i);if(ut(r))return r(i);var a=St("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return Y.createElement(yu,af({},i,{key:s,type:"linear",className:a}))}},{key:"renderLabelItem",value:function(r,i,s){if(Y.isValidElement(r))return Y.cloneElement(r,i);var a=s;if(ut(r)&&(a=r(i),Y.isValidElement(a)))return a;var o=St("recharts-pie-label-text",typeof r!="boolean"&&!ut(r)?r.className:"");return Y.createElement(Iu,af({},i,{alignmentBaseline:"middle",className:o}),a)}}])}(P.PureComponent);s0=la;js(la,"displayName","Pie");js(la,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!sc.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});js(la,"parseDeltaAngle",function(t,e){var n=wi(e-t),r=Math.min(Math.abs(e-t),360);return n*r});js(la,"getRealPieData",function(t){var e=t.data,n=t.children,r=et(t,!1),i=as(n,aa);return e&&e.length?e.map(function(s,a){return mn(mn(mn({payload:s},r),s),i&&i[a]&&i[a].props)}):i&&i.length?i.map(function(s){return mn(mn({},r),s.props)}):[]});js(la,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,i=e.width,s=e.height,a=R9(i,s),o=r+_i(t.cx,i,i/2),c=n+_i(t.cy,s,s/2),u=_i(t.innerRadius,a,0),d=_i(t.outerRadius,a,a*.8),f=t.maxRadius||Math.sqrt(i*i+s*s)/2;return{cx:o,cy:c,innerRadius:u,outerRadius:d,maxRadius:f}});js(la,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?mn(mn({},e.type.defaultProps),e.props):e.props,i=s0.getRealPieData(r);if(!i||!i.length)return null;var s=r.cornerRadius,a=r.startAngle,o=r.endAngle,c=r.paddingAngle,u=r.dataKey,d=r.nameKey,f=r.valueKey,h=r.tooltipType,p=Math.abs(r.minAngle),m=s0.parseCoordinateOfPie(r,n),g=s0.parseDeltaAngle(a,o),b=Math.abs(g),x=u;gt(u)&&gt(f)?(ta(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x="value"):gt(u)&&(ta(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x=f);var w=i.filter(function(C){return Jn(C,x,0)!==0}).length,_=(b>=360?w:w-1)*c,E=b-w*p-_,j=i.reduce(function(C,D){var O=Jn(D,x,0);return C+(Ce(O)?O:0)},0),T;if(j>0){var A;T=i.map(function(C,D){var O=Jn(C,x,0),L=Jn(C,d,D),z=(Ce(O)?O:0)/j,M;D?M=A.endAngle+wi(g)*c*(O!==0?1:0):M=a;var G=M+wi(g)*((O!==0?p:0)+z*E),K=(M+G)/2,B=(m.innerRadius+m.outerRadius)/2,U=[{name:L,value:O,payload:C,dataKey:x,type:h}],F=yn(m.cx,m.cy,B,K);return A=mn(mn(mn({percent:z,cornerRadius:s,name:L,tooltipPayload:U,midAngle:K,middleRadius:B,tooltipPosition:F},C),m),{},{value:Jn(C,x),startAngle:M,endAngle:G,payload:C,paddingAngle:wi(g)*c}),A})}return mn(mn({},m),{},{sectors:T,data:i})});var Uje=Math.ceil,Wje=Math.max;function Hje(t,e,n,r){for(var i=-1,s=Wje(Uje((e-t)/(n||1)),0),a=Array(s);s--;)a[r?s:++i]=t,t+=n;return a}var qje=Hje,Kje=SB,F4=1/0,Gje=17976931348623157e292;function Yje(t){if(!t)return t===0?t:0;if(t=Kje(t),t===F4||t===-F4){var e=t<0?-1:1;return e*Gje}return t===t?t:0}var s7=Yje,Qje=qje,Xje=Mw,Y_=s7;function Zje(t){return function(e,n,r){return r&&typeof r!="number"&&Xje(e,n,r)&&(n=r=void 0),e=Y_(e),n===void 0?(n=e,e=0):n=Y_(n),r=r===void 0?e<n?1:-1:Y_(r),Qje(e,n,r,t)}}var Jje=Zje,eCe=Jje,tCe=eCe(),nCe=tCe;const qb=Qt(nCe);function zg(t){"@babel/helpers - typeof";return zg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zg(t)}function V4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function B4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V4(Object(n),!0).forEach(function(r){a7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function a7(t,e,n){return e=rCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rCe(t){var e=iCe(t,"string");return zg(e)=="symbol"?e:e+""}function iCe(t,e){if(zg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sCe=["Webkit","Moz","O","ms"],aCe=function(e,n){var r=e.replace(/(\w)/,function(s){return s.toUpperCase()}),i=sCe.reduce(function(s,a){return B4(B4({},s),{},a7({},a+r,n))},{});return i[e]=n,i};function oh(t){"@babel/helpers - typeof";return oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oh(t)}function Kb(){return Kb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kb.apply(this,arguments)}function U4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Q_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?U4(Object(n),!0).forEach(function(r){Yi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l7(r.key),r)}}function lCe(t,e,n){return e&&W4(t.prototype,e),n&&W4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function cCe(t,e,n){return e=Gb(e),uCe(t,o7()?Reflect.construct(e,n||[],Gb(t).constructor):e.apply(t,n))}function uCe(t,e){if(e&&(oh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dCe(t)}function dCe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(o7=function(){return!!t})()}function Gb(t){return Gb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Gb(t)}function fCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y2(t,e)}function y2(t,e){return y2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},y2(t,e)}function Yi(t,e,n){return e=l7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l7(t){var e=hCe(t,"string");return oh(e)=="symbol"?e:e+""}function hCe(t,e){if(oh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(oh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var pCe=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,s=e.x,a=e.width,o=e.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=gm().domain(qb(0,c)).range([s,s+a-o]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:d}},H4=function(e){return e.changedTouches&&!!e.changedTouches.length},lh=function(t){function e(n){var r;return oCe(this,e),r=cCe(this,e,[n]),Yi(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),Yi(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),Yi(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,s=i.endIndex,a=i.onDragEnd,o=i.startIndex;a==null||a({endIndex:s,startIndex:o})}),r.detachDragEndListener()}),Yi(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Yi(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Yi(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Yi(r,"handleSlideDragStart",function(i){var s=H4(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return fCe(e,t),lCe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,s=r.endX,a=this.state.scaleValues,o=this.props,c=o.gap,u=o.data,d=u.length-1,f=Math.min(i,s),h=Math.max(i,s),p=e.getIndexInRange(a,f),m=e.getIndexInRange(a,h);return{startIndex:p-p%c,endIndex:m===d?d:m-m%c}}},{key:"getTextOfTick",value:function(r){var i=this.props,s=i.data,a=i.tickFormatter,o=i.dataKey,c=Jn(s[r],o,r);return ut(a)?a(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,s=i.slideMoveStartX,a=i.startX,o=i.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,h=c.startIndex,p=c.endIndex,m=c.onChange,g=r.pageX-s;g>0?g=Math.min(g,u+d-f-o,u+d-f-a):g<0&&(g=Math.max(g,u-a,u-o));var b=this.getIndex({startX:a+g,endX:o+g});(b.startIndex!==h||b.endIndex!==p)&&m&&m(b),this.setState({startX:a+g,endX:o+g,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var s=H4(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,s=i.brushMoveStartX,a=i.movingTravellerId,o=i.endX,c=i.startX,u=this.state[a],d=this.props,f=d.x,h=d.width,p=d.travellerWidth,m=d.onChange,g=d.gap,b=d.data,x={startX:this.state.startX,endX:this.state.endX},w=r.pageX-s;w>0?w=Math.min(w,f+h-p-u):w<0&&(w=Math.max(w,f-u)),x[a]=u+w;var _=this.getIndex(x),E=_.startIndex,j=_.endIndex,T=function(){var C=b.length-1;return a==="startX"&&(o>c?E%g===0:j%g===0)||o<c&&j===C||a==="endX"&&(o>c?j%g===0:E%g===0)||o>c&&j===C};this.setState(Yi(Yi({},a,u+w),"brushMoveStartX",r.pageX),function(){m&&T()&&m(_)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var s=this,a=this.state,o=a.scaleValues,c=a.startX,u=a.endX,d=this.state[i],f=o.indexOf(d);if(f!==-1){var h=f+r;if(!(h===-1||h>=o.length)){var p=o[h];i==="startX"&&p>=u||i==="endX"&&p<=c||this.setState(Yi({},i,p),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,s=r.y,a=r.width,o=r.height,c=r.fill,u=r.stroke;return Y.createElement("rect",{stroke:u,fill:c,x:i,y:s,width:a,height:o})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,s=r.y,a=r.width,o=r.height,c=r.data,u=r.children,d=r.padding,f=P.Children.only(u);return f?Y.cloneElement(f,{x:i,y:s,width:a,height:o,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,i){var s,a,o=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,h=c.traveller,p=c.ariaLabel,m=c.data,g=c.startIndex,b=c.endIndex,x=Math.max(r,this.props.x),w=Q_(Q_({},et(this.props,!1)),{},{x,y:u,width:d,height:f}),_=p||"Min value: ".concat((s=m[g])===null||s===void 0?void 0:s.name,", Max value: ").concat((a=m[b])===null||a===void 0?void 0:a.name);return Y.createElement(Tt,{tabIndex:0,role:"slider","aria-label":_,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(j){["ArrowLeft","ArrowRight"].includes(j.key)&&(j.preventDefault(),j.stopPropagation(),o.handleTravellerMoveKeyboard(j.key==="ArrowRight"?1:-1,i))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(h,w))}},{key:"renderSlide",value:function(r,i){var s=this.props,a=s.y,o=s.height,c=s.stroke,u=s.travellerWidth,d=Math.min(r,i)+u,f=Math.max(Math.abs(i-r)-u,0);return Y.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:a,width:f,height:o})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,s=r.endIndex,a=r.y,o=r.height,c=r.travellerWidth,u=r.stroke,d=this.state,f=d.startX,h=d.endX,p=5,m={pointerEvents:"none",fill:u};return Y.createElement(Tt,{className:"recharts-brush-texts"},Y.createElement(Iu,Kb({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-p,y:a+o/2},m),this.getTextOfTick(i)),Y.createElement(Iu,Kb({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+c+p,y:a+o/2},m),this.getTextOfTick(s)))}},{key:"render",value:function(){var r=this.props,i=r.data,s=r.className,a=r.children,o=r.x,c=r.y,u=r.width,d=r.height,f=r.alwaysShowText,h=this.state,p=h.startX,m=h.endX,g=h.isTextActive,b=h.isSlideMoving,x=h.isTravellerMoving,w=h.isTravellerFocused;if(!i||!i.length||!Ce(o)||!Ce(c)||!Ce(u)||!Ce(d)||u<=0||d<=0)return null;var _=St("recharts-brush",s),E=Y.Children.count(a)===1,j=aCe("userSelect","none");return Y.createElement(Tt,{className:_,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:j},this.renderBackground(),E&&this.renderPanorama(),this.renderSlide(p,m),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(m,"endX"),(g||b||x||w||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,s=r.y,a=r.width,o=r.height,c=r.stroke,u=Math.floor(s+o/2)-1;return Y.createElement(Y.Fragment,null,Y.createElement("rect",{x:i,y:s,width:a,height:o,fill:c,stroke:"none"}),Y.createElement("line",{x1:i+1,y1:u,x2:i+a-1,y2:u,fill:"none",stroke:"#fff"}),Y.createElement("line",{x1:i+1,y1:u+2,x2:i+a-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var s;return Y.isValidElement(r)?s=Y.cloneElement(r,i):ut(r)?s=r(i):s=e.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(r,i){var s=r.data,a=r.width,o=r.x,c=r.travellerWidth,u=r.updateId,d=r.startIndex,f=r.endIndex;if(s!==i.prevData||u!==i.prevUpdateId)return Q_({prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:o,prevWidth:a},s&&s.length?pCe({data:s,width:a,x:o,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(a!==i.prevWidth||o!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([o,o+a-c]);var h=i.scale.domain().map(function(p){return i.scale(p)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:o,prevWidth:a,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,i){for(var s=r.length,a=0,o=s-1;o-a>1;){var c=Math.floor((a+o)/2);r[c]>i?o=c:a=c}return i>=r[o]?o:a}}])}(P.PureComponent);Yi(lh,"displayName","Brush");Yi(lh,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var mCe=eP;function gCe(t,e){var n;return mCe(t,function(r,i,s){return n=e(r,i,s),!n}),!!n}var vCe=gCe,yCe=QV,bCe=Ya,xCe=vCe,wCe=Wi,_Ce=Mw;function SCe(t,e,n){var r=wCe(t)?yCe:xCe;return n&&_Ce(t,e,n)&&(e=void 0),r(t,bCe(e))}var ACe=SCe;const ECe=Qt(ACe);var Fa=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},q4=yB;function jCe(t,e,n){e=="__proto__"&&q4?q4(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var CCe=jCe,TCe=CCe,PCe=gB,NCe=Ya;function kCe(t,e){var n={};return e=NCe(e),PCe(t,function(r,i,s){TCe(n,i,e(r,i,s))}),n}var DCe=kCe;const ICe=Qt(DCe);function OCe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var MCe=OCe,RCe=eP;function LCe(t,e){var n=!0;return RCe(t,function(r,i,s){return n=!!e(r,i,s),n}),n}var zCe=LCe,$Ce=MCe,FCe=zCe,VCe=Ya,BCe=Wi,UCe=Mw;function WCe(t,e,n){var r=BCe(t)?$Ce:FCe;return n&&UCe(t,e,n)&&(e=void 0),r(t,VCe(e))}var HCe=WCe;const c7=Qt(HCe);var qCe=["x","y"];function $g(t){"@babel/helpers - typeof";return $g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$g(t)}function b2(){return b2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b2.apply(this,arguments)}function K4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Op(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K4(Object(n),!0).forEach(function(r){KCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KCe(t,e,n){return e=GCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GCe(t){var e=YCe(t,"string");return $g(e)=="symbol"?e:e+""}function YCe(t,e){if($g(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($g(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function QCe(t,e){if(t==null)return{};var n=XCe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function XCe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ZCe(t,e){var n=t.x,r=t.y,i=QCe(t,qCe),s="".concat(n),a=parseInt(s,10),o="".concat(r),c=parseInt(o,10),u="".concat(e.height||i.height),d=parseInt(u,10),f="".concat(e.width||i.width),h=parseInt(f,10);return Op(Op(Op(Op(Op({},e),i),a?{x:a}:{}),c?{y:c}:{}),{},{height:d,width:h,name:e.name,radius:e.radius})}function G4(t){return Y.createElement(n7,b2({shapeType:"rectangle",propTransformer:ZCe,activeClassName:"recharts-active-bar"},t))}var JCe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var s=Ce(r)||Ace(r);return s?e(r,i):(s||Ru(),n)}},eTe=["value","background"],u7;function ch(t){"@babel/helpers - typeof";return ch=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ch(t)}function tTe(t,e){if(t==null)return{};var n=nTe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function nTe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Yb(){return Yb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yb.apply(this,arguments)}function Y4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y4(Object(n),!0).forEach(function(r){Sl(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,f7(r.key),r)}}function iTe(t,e,n){return e&&Q4(t.prototype,e),n&&Q4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function sTe(t,e,n){return e=Qb(e),aTe(t,d7()?Reflect.construct(e,n||[],Qb(t).constructor):e.apply(t,n))}function aTe(t,e){if(e&&(ch(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oTe(t)}function oTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d7=function(){return!!t})()}function Qb(t){return Qb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qb(t)}function lTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x2(t,e)}function x2(t,e){return x2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},x2(t,e)}function Sl(t,e,n){return e=f7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f7(t){var e=cTe(t,"string");return ch(e)=="symbol"?e:e+""}function cTe(t,e){if(ch(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ch(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var hr=function(t){function e(){var n;rTe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=sTe(this,e,[].concat(i)),Sl(n,"state",{isAnimationFinished:!1}),Sl(n,"id",Zu("recharts-bar-")),Sl(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),a&&a()}),Sl(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),a&&a()}),n}return lTe(e,t),iTe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,s=this.props,a=s.shape,o=s.dataKey,c=s.activeIndex,u=s.activeBar,d=et(this.props,!1);return r&&r.map(function(f,h){var p=h===c,m=p?u:a,g=cr(cr(cr({},d),f),{},{isActive:p,option:m,index:h,dataKey:o,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return Y.createElement(Tt,Yb({className:"recharts-bar-rectangle"},Du(i.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(h)}),Y.createElement(G4,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,s=i.data,a=i.layout,o=i.isAnimationActive,c=i.animationBegin,u=i.animationDuration,d=i.animationEasing,f=i.animationId,h=this.state.prevData;return Y.createElement(oa,{begin:c,duration:u,isActive:o,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var m=p.t,g=s.map(function(b,x){var w=h&&h[x];if(w){var _=_r(w.x,b.x),E=_r(w.y,b.y),j=_r(w.width,b.width),T=_r(w.height,b.height);return cr(cr({},b),{},{x:_(m),y:E(m),width:j(m),height:T(m)})}if(a==="horizontal"){var A=_r(0,b.height),C=A(m);return cr(cr({},b),{},{y:b.y+b.height-C,height:C})}var D=_r(0,b.width),O=D(m);return cr(cr({},b),{},{width:O})});return Y.createElement(Tt,null,r.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,s=r.isAnimationActive,a=this.state.prevData;return s&&i&&i.length&&(!a||!Ou(a,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,s=i.data,a=i.dataKey,o=i.activeIndex,c=et(this.props.background,!1);return s.map(function(u,d){u.value;var f=u.background,h=tTe(u,eTe);if(!f)return null;var p=cr(cr(cr(cr(cr({},h),{},{fill:"#eee"},f),c),Du(r.props,u,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:a,index:d,className:"recharts-bar-background-rectangle"});return Y.createElement(G4,Yb({key:"background-bar-".concat(d),option:r.props.background,isActive:d===o},p))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.data,o=s.xAxis,c=s.yAxis,u=s.layout,d=s.children,f=as(d,Sv);if(!f)return null;var h=u==="vertical"?a[0].height/2:a[0].width/2,p=function(b,x){var w=Array.isArray(b.value)?b.value[1]:b.value;return{x:b.x,y:b.y,value:w,errorVal:Jn(b,x)}},m={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Y.createElement(Tt,m,f.map(function(g){return Y.cloneElement(g,{key:"error-bar-".concat(i,"-").concat(g.props.dataKey),data:a,xAxis:o,yAxis:c,layout:u,offset:h,dataPointFormatter:p})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,s=r.data,a=r.className,o=r.xAxis,c=r.yAxis,u=r.left,d=r.top,f=r.width,h=r.height,p=r.isAnimationActive,m=r.background,g=r.id;if(i||!s||!s.length)return null;var b=this.state.isAnimationFinished,x=St("recharts-bar",a),w=o&&o.allowDataOverflow,_=c&&c.allowDataOverflow,E=w||_,j=gt(g)?this.id:g;return Y.createElement(Tt,{className:x},w||_?Y.createElement("defs",null,Y.createElement("clipPath",{id:"clipPath-".concat(j)},Y.createElement("rect",{x:w?u:u-f/2,y:_?d:d-h/2,width:w?f:f*2,height:_?h:h*2}))):null,Y.createElement(Tt,{className:"recharts-bar-rectangles",clipPath:E?"url(#clipPath-".concat(j,")"):null},m?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(E,j),(!p||b)&&Ns.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(P.PureComponent);u7=hr;Sl(hr,"displayName","Bar");Sl(hr,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!sc.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Sl(hr,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,s=t.xAxis,a=t.yAxis,o=t.xAxisTicks,c=t.yAxisTicks,u=t.stackedData,d=t.dataStartIndex,f=t.displayedData,h=t.offset,p=B_e(r,n);if(!p)return null;var m=e.layout,g=n.type.defaultProps,b=g!==void 0?cr(cr({},g),n.props):n.props,x=b.dataKey,w=b.children,_=b.minPointSize,E=m==="horizontal"?a:s,j=u?E.scale.domain():null,T=Y_e({numericAxis:E}),A=as(w,aa),C=f.map(function(D,O){var L,z,M,G,K,B;u?L=U_e(u[d+O],j):(L=Jn(D,x),Array.isArray(L)||(L=[T,L]));var U=JCe(_,u7.defaultProps.minPointSize)(L[1],O);if(m==="horizontal"){var F,q=[a.scale(L[0]),a.scale(L[1])],Z=q[0],re=q[1];z=$R({axis:s,ticks:o,bandSize:i,offset:p.offset,entry:D,index:O}),M=(F=re??Z)!==null&&F!==void 0?F:void 0,G=p.size;var he=Z-re;if(K=Number.isNaN(he)?0:he,B={x:z,y:a.y,width:G,height:a.height},Math.abs(U)>0&&Math.abs(K)<Math.abs(U)){var ye=wi(K||U)*(Math.abs(U)-Math.abs(K));M-=ye,K+=ye}}else{var De=[s.scale(L[0]),s.scale(L[1])],We=De[0],Je=De[1];if(z=We,M=$R({axis:a,ticks:c,bandSize:i,offset:p.offset,entry:D,index:O}),G=Je-We,K=p.size,B={x:s.x,y:M,width:s.width,height:K},Math.abs(U)>0&&Math.abs(G)<Math.abs(U)){var jt=wi(G||U)*(Math.abs(U)-Math.abs(G));G+=jt}}return cr(cr(cr({},D),{},{x:z,y:M,width:G,height:K,value:u?L:L[1],payload:D,background:B},A&&A[O]&&A[O].props),{},{tooltipPayload:[O9(n,D)],tooltipPosition:{x:z+G/2,y:M+K/2}})});return cr({data:C,layout:m},h)});function Fg(t){"@babel/helpers - typeof";return Fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fg(t)}function uTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function X4(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h7(r.key),r)}}function dTe(t,e,n){return e&&X4(t.prototype,e),n&&X4(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Z4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ys(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z4(Object(n),!0).forEach(function(r){Zw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zw(t,e,n){return e=h7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h7(t){var e=fTe(t,"string");return Fg(e)=="symbol"?e:e+""}function fTe(t,e){if(Fg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Fg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var PP=function(e,n,r,i,s){var a=e.width,o=e.height,c=e.layout,u=e.children,d=Object.keys(n),f={left:r.left,leftMirror:r.left,right:a-r.right,rightMirror:a-r.right,top:r.top,topMirror:r.top,bottom:o-r.bottom,bottomMirror:o-r.bottom},h=!!Xi(u,hr);return d.reduce(function(p,m){var g=n[m],b=g.orientation,x=g.domain,w=g.padding,_=w===void 0?{}:w,E=g.mirror,j=g.reversed,T="".concat(b).concat(E?"Mirror":""),A,C,D,O,L;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var z=x[1]-x[0],M=1/0,G=g.categoricalDomain.sort(Cce);if(G.forEach(function(De,We){We>0&&(M=Math.min((De||0)-(G[We-1]||0),M))}),Number.isFinite(M)){var K=M/z,B=g.layout==="vertical"?r.height:r.width;if(g.padding==="gap"&&(A=K*B/2),g.padding==="no-gap"){var U=_i(e.barCategoryGap,K*B),F=K*B/2;A=F-U-(F-U)/B*U}}}i==="xAxis"?C=[r.left+(_.left||0)+(A||0),r.left+r.width-(_.right||0)-(A||0)]:i==="yAxis"?C=c==="horizontal"?[r.top+r.height-(_.bottom||0),r.top+(_.top||0)]:[r.top+(_.top||0)+(A||0),r.top+r.height-(_.bottom||0)-(A||0)]:C=g.range,j&&(C=[C[1],C[0]]);var q=N9(g,s,h),Z=q.scale,re=q.realScaleType;Z.domain(x).range(C),k9(Z);var he=D9(Z,Ys(Ys({},g),{},{realScaleType:re}));i==="xAxis"?(L=b==="top"&&!E||b==="bottom"&&E,D=r.left,O=f[T]-L*g.height):i==="yAxis"&&(L=b==="left"&&!E||b==="right"&&E,D=f[T]-L*g.width,O=r.top);var ye=Ys(Ys(Ys({},g),he),{},{realScaleType:re,x:D,y:O,scale:Z,width:i==="xAxis"?r.width:g.width,height:i==="yAxis"?r.height:g.height});return ye.bandSize=Ob(ye,he),!g.hide&&i==="xAxis"?f[T]+=(L?-1:1)*ye.height:g.hide||(f[T]+=(L?-1:1)*ye.width),Ys(Ys({},p),{},Zw({},m,ye))},{})},p7=function(e,n){var r=e.x,i=e.y,s=n.x,a=n.y;return{x:Math.min(r,s),y:Math.min(i,a),width:Math.abs(s-r),height:Math.abs(a-i)}},hTe=function(e){var n=e.x1,r=e.y1,i=e.x2,s=e.y2;return p7({x:n,y:r},{x:i,y:s})},m7=function(){function t(e){uTe(this,t),this.scale=e}return dTe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,s=r.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+a}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(n)+o}default:return this.scale(n)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],s=r[r.length-1];return i<=s?n>=i&&n<=s:n>=s&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();Zw(m7,"EPS",1e-4);var NP=function(e){var n=Object.keys(e).reduce(function(r,i){return Ys(Ys({},r),{},Zw({},i,m7.create(e[i])))},{});return Ys(Ys({},n),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.bandAware,o=s.position;return ICe(i,function(c,u){return n[u].apply(c,{bandAware:a,position:o})})},isInRange:function(i){return c7(i,function(s,a){return n[a].isInRange(s)})}})};function pTe(t){return(t%180+180)%180}var mTe=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=pTe(i),a=s*Math.PI/180,o=Math.atan(r/n),c=a>o&&a<Math.PI-o?r/Math.sin(a):n/Math.cos(a);return Math.abs(c)},gTe=Ya,vTe=yv,yTe=Iw;function bTe(t){return function(e,n,r){var i=Object(e);if(!vTe(e)){var s=gTe(n);e=yTe(e),n=function(o){return s(i[o],o,i)}}var a=t(e,n,r);return a>-1?i[s?e[a]:a]:void 0}}var xTe=bTe,wTe=s7;function _Te(t){var e=wTe(t),n=e%1;return e===e?n?e-n:e:0}var STe=_Te,ATe=uB,ETe=Ya,jTe=STe,CTe=Math.max;function TTe(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:jTe(n);return i<0&&(i=CTe(r+i,0)),ATe(t,ETe(e),i)}var PTe=TTe,NTe=xTe,kTe=PTe,DTe=NTe(kTe),ITe=DTe;const OTe=Qt(ITe);var MTe=Nle(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),kP=P.createContext(void 0),DP=P.createContext(void 0),g7=P.createContext(void 0),v7=P.createContext({}),y7=P.createContext(void 0),b7=P.createContext(0),x7=P.createContext(0),J4=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,s=n.offset,a=e.clipPathId,o=e.children,c=e.width,u=e.height,d=MTe(s);return Y.createElement(kP.Provider,{value:r},Y.createElement(DP.Provider,{value:i},Y.createElement(v7.Provider,{value:s},Y.createElement(g7.Provider,{value:d},Y.createElement(y7.Provider,{value:a},Y.createElement(b7.Provider,{value:u},Y.createElement(x7.Provider,{value:c},o)))))))},RTe=function(){return P.useContext(y7)},w7=function(e){var n=P.useContext(kP);n==null&&Ru();var r=n[e];return r==null&&Ru(),r},LTe=function(){var e=P.useContext(kP);return vl(e)},zTe=function(){var e=P.useContext(DP),n=OTe(e,function(r){return c7(r.domain,Number.isFinite)});return n||vl(e)},_7=function(e){var n=P.useContext(DP);n==null&&Ru();var r=n[e];return r==null&&Ru(),r},$Te=function(){var e=P.useContext(g7);return e},FTe=function(){return P.useContext(v7)},IP=function(){return P.useContext(x7)},OP=function(){return P.useContext(b7)};function uh(t){"@babel/helpers - typeof";return uh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uh(t)}function VTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BTe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A7(r.key),r)}}function UTe(t,e,n){return e&&BTe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function WTe(t,e,n){return e=Xb(e),HTe(t,S7()?Reflect.construct(e,n||[],Xb(t).constructor):e.apply(t,n))}function HTe(t,e){if(e&&(uh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qTe(t)}function qTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(S7=function(){return!!t})()}function Xb(t){return Xb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xb(t)}function KTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w2(t,e)}function w2(t,e){return w2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},w2(t,e)}function e5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function t5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e5(Object(n),!0).forEach(function(r){MP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MP(t,e,n){return e=A7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A7(t){var e=GTe(t,"string");return uh(e)=="symbol"?e:e+""}function GTe(t,e){if(uh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(uh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function YTe(t,e){return JTe(t)||ZTe(t,e)||XTe(t,e)||QTe()}function QTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XTe(t,e){if(t){if(typeof t=="string")return n5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return n5(t,e)}}function n5(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ZTe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function JTe(t){if(Array.isArray(t))return t}function _2(){return _2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_2.apply(this,arguments)}var ePe=function(e,n){var r;return Y.isValidElement(e)?r=Y.cloneElement(e,n):ut(e)?r=e(n):r=Y.createElement("line",_2({},n,{className:"recharts-reference-line-line"})),r},tPe=function(e,n,r,i,s,a,o,c,u){var d=s.x,f=s.y,h=s.width,p=s.height;if(r){var m=u.y,g=e.y.apply(m,{position:a});if(Fa(u,"discard")&&!e.y.isInRange(g))return null;var b=[{x:d+h,y:g},{x:d,y:g}];return c==="left"?b.reverse():b}if(n){var x=u.x,w=e.x.apply(x,{position:a});if(Fa(u,"discard")&&!e.x.isInRange(w))return null;var _=[{x:w,y:f+p},{x:w,y:f}];return o==="top"?_.reverse():_}if(i){var E=u.segment,j=E.map(function(T){return e.apply(T,{position:a})});return Fa(u,"discard")&&ECe(j,function(T){return!e.isInRange(T)})?null:j}return null};function nPe(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,s=t.yAxisId,a=t.shape,o=t.className,c=t.alwaysShow,u=RTe(),d=w7(i),f=_7(s),h=$Te();if(!u||!h)return null;ta(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=NP({x:d.scale,y:f.scale}),m=Ar(e),g=Ar(n),b=r&&r.length===2,x=tPe(p,m,g,b,h,t.position,d.orientation,f.orientation,t);if(!x)return null;var w=YTe(x,2),_=w[0],E=_.x,j=_.y,T=w[1],A=T.x,C=T.y,D=Fa(t,"hidden")?"url(#".concat(u,")"):void 0,O=t5(t5({clipPath:D},et(t,!0)),{},{x1:E,y1:j,x2:A,y2:C});return Y.createElement(Tt,{className:St("recharts-reference-line",o)},ePe(a,O),Mr.renderCallByParent(t,hTe({x1:E,y1:j,x2:A,y2:C})))}var Jw=function(t){function e(){return VTe(this,e),WTe(this,e,arguments)}return KTe(e,t),UTe(e,[{key:"render",value:function(){return Y.createElement(nPe,this.props)}}])}(Y.Component);MP(Jw,"displayName","ReferenceLine");MP(Jw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function S2(){return S2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},S2.apply(this,arguments)}function dh(t){"@babel/helpers - typeof";return dh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dh(t)}function r5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function i5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r5(Object(n),!0).forEach(function(r){e1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iPe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,j7(r.key),r)}}function sPe(t,e,n){return e&&iPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function aPe(t,e,n){return e=Zb(e),oPe(t,E7()?Reflect.construct(e,n||[],Zb(t).constructor):e.apply(t,n))}function oPe(t,e){if(e&&(dh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lPe(t)}function lPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E7=function(){return!!t})()}function Zb(t){return Zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zb(t)}function cPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A2(t,e)}function A2(t,e){return A2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},A2(t,e)}function e1(t,e,n){return e=j7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j7(t){var e=uPe(t,"string");return dh(e)=="symbol"?e:e+""}function uPe(t,e){if(dh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(dh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var dPe=function(e){var n=e.x,r=e.y,i=e.xAxis,s=e.yAxis,a=NP({x:i.scale,y:s.scale}),o=a.apply({x:n,y:r},{bandAware:!0});return Fa(e,"discard")&&!a.isInRange(o)?null:o},t1=function(t){function e(){return rPe(this,e),aPe(this,e,arguments)}return cPe(e,t),sPe(e,[{key:"render",value:function(){var r=this.props,i=r.x,s=r.y,a=r.r,o=r.alwaysShow,c=r.clipPathId,u=Ar(i),d=Ar(s);if(ta(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=dPe(this.props);if(!f)return null;var h=f.x,p=f.y,m=this.props,g=m.shape,b=m.className,x=Fa(this.props,"hidden")?"url(#".concat(c,")"):void 0,w=i5(i5({clipPath:x},et(this.props,!0)),{},{cx:h,cy:p});return Y.createElement(Tt,{className:St("recharts-reference-dot",b)},e.renderDot(g,w),Mr.renderCallByParent(this.props,{x:h-a,y:p-a,width:2*a,height:2*a}))}}])}(Y.Component);e1(t1,"displayName","ReferenceDot");e1(t1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});e1(t1,"renderDot",function(t,e){var n;return Y.isValidElement(t)?n=Y.cloneElement(t,e):ut(t)?n=t(e):n=Y.createElement(Av,S2({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function E2(){return E2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},E2.apply(this,arguments)}function fh(t){"@babel/helpers - typeof";return fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fh(t)}function s5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function a5(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s5(Object(n),!0).forEach(function(r){n1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hPe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,T7(r.key),r)}}function pPe(t,e,n){return e&&hPe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function mPe(t,e,n){return e=Jb(e),gPe(t,C7()?Reflect.construct(e,n||[],Jb(t).constructor):e.apply(t,n))}function gPe(t,e){if(e&&(fh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vPe(t)}function vPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C7=function(){return!!t})()}function Jb(t){return Jb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Jb(t)}function yPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j2(t,e)}function j2(t,e){return j2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},j2(t,e)}function n1(t,e,n){return e=T7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T7(t){var e=bPe(t,"string");return fh(e)=="symbol"?e:e+""}function bPe(t,e){if(fh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(fh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var xPe=function(e,n,r,i,s){var a=s.x1,o=s.x2,c=s.y1,u=s.y2,d=s.xAxis,f=s.yAxis;if(!d||!f)return null;var h=NP({x:d.scale,y:f.scale}),p={x:e?h.x.apply(a,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(c,{position:"start"}):h.y.rangeMin},m={x:n?h.x.apply(o,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(u,{position:"end"}):h.y.rangeMax};return Fa(s,"discard")&&(!h.isInRange(p)||!h.isInRange(m))?null:p7(p,m)},r1=function(t){function e(){return fPe(this,e),mPe(this,e,arguments)}return yPe(e,t),pPe(e,[{key:"render",value:function(){var r=this.props,i=r.x1,s=r.x2,a=r.y1,o=r.y2,c=r.className,u=r.alwaysShow,d=r.clipPathId;ta(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=Ar(i),h=Ar(s),p=Ar(a),m=Ar(o),g=this.props.shape;if(!f&&!h&&!p&&!m&&!g)return null;var b=xPe(f,h,p,m,this.props);if(!b&&!g)return null;var x=Fa(this.props,"hidden")?"url(#".concat(d,")"):void 0;return Y.createElement(Tt,{className:St("recharts-reference-area",c)},e.renderRect(g,a5(a5({clipPath:x},et(this.props,!0)),b)),Mr.renderCallByParent(this.props,b))}}])}(Y.Component);n1(r1,"displayName","ReferenceArea");n1(r1,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});n1(r1,"renderRect",function(t,e){var n;return Y.isValidElement(t)?n=Y.cloneElement(t,e):ut(t)?n=t(e):n=Y.createElement(TP,E2({},e,{className:"recharts-reference-area-rect"})),n});function P7(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function wPe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return mTe(r,n)}function _Pe(t,e,n){var r=n==="width",i=t.x,s=t.y,a=t.width,o=t.height;return e===1?{start:r?i:s,end:r?i+a:s+o}:{start:r?i+a:s+o,end:r?i:s}}function ex(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-i)<=0}function SPe(t,e){return P7(t,e+1)}function APe(t,e,n,r,i){for(var s=(r||[]).slice(),a=e.start,o=e.end,c=0,u=1,d=a,f=function(){var m=r==null?void 0:r[c];if(m===void 0)return{v:P7(r,u)};var g=c,b,x=function(){return b===void 0&&(b=n(m,g)),b},w=m.coordinate,_=c===0||ex(t,w,x,d,o);_||(c=0,d=a,u+=1),_&&(d=w+t*(x()/2+i),c+=u)},h;u<=s.length;)if(h=f(),h)return h.v;return[]}function Vg(t){"@babel/helpers - typeof";return Vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vg(t)}function o5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ui(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o5(Object(n),!0).forEach(function(r){EPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function EPe(t,e,n){return e=jPe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jPe(t){var e=CPe(t,"string");return Vg(e)=="symbol"?e:e+""}function CPe(t,e){if(Vg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TPe(t,e,n,r,i){for(var s=(r||[]).slice(),a=s.length,o=e.start,c=e.end,u=function(h){var p=s[h],m,g=function(){return m===void 0&&(m=n(p,h)),m};if(h===a-1){var b=t*(p.coordinate+t*g()/2-c);s[h]=p=ui(ui({},p),{},{tickCoord:b>0?p.coordinate-b*t:p.coordinate})}else s[h]=p=ui(ui({},p),{},{tickCoord:p.coordinate});var x=ex(t,p.tickCoord,g,o,c);x&&(c=p.tickCoord-t*(g()/2+i),s[h]=ui(ui({},p),{},{isShow:!0}))},d=a-1;d>=0;d--)u(d);return s}function PPe(t,e,n,r,i,s){var a=(r||[]).slice(),o=a.length,c=e.start,u=e.end;if(s){var d=r[o-1],f=n(d,o-1),h=t*(d.coordinate+t*f/2-u);a[o-1]=d=ui(ui({},d),{},{tickCoord:h>0?d.coordinate-h*t:d.coordinate});var p=ex(t,d.tickCoord,function(){return f},c,u);p&&(u=d.tickCoord-t*(f/2+i),a[o-1]=ui(ui({},d),{},{isShow:!0}))}for(var m=s?o-1:o,g=function(w){var _=a[w],E,j=function(){return E===void 0&&(E=n(_,w)),E};if(w===0){var T=t*(_.coordinate-t*j()/2-c);a[w]=_=ui(ui({},_),{},{tickCoord:T<0?_.coordinate-T*t:_.coordinate})}else a[w]=_=ui(ui({},_),{},{tickCoord:_.coordinate});var A=ex(t,_.tickCoord,j,c,u);A&&(c=_.tickCoord+t*(j()/2+i),a[w]=ui(ui({},_),{},{isShow:!0}))},b=0;b<m;b++)g(b);return a}function RP(t,e,n){var r=t.tick,i=t.ticks,s=t.viewBox,a=t.minTickGap,o=t.orientation,c=t.interval,u=t.tickFormatter,d=t.unit,f=t.angle;if(!i||!i.length||!r)return[];if(Ce(c)||sc.isSsr)return SPe(i,typeof c=="number"&&Ce(c)?c:0);var h=[],p=o==="top"||o==="bottom"?"width":"height",m=d&&p==="width"?mm(d,{fontSize:e,letterSpacing:n}):{width:0,height:0},g=function(_,E){var j=ut(u)?u(_.value,E):_.value;return p==="width"?wPe(mm(j,{fontSize:e,letterSpacing:n}),m,f):mm(j,{fontSize:e,letterSpacing:n})[p]},b=i.length>=2?wi(i[1].coordinate-i[0].coordinate):1,x=_Pe(s,b,p);return c==="equidistantPreserveStart"?APe(b,x,g,i,a):(c==="preserveStart"||c==="preserveStartEnd"?h=PPe(b,x,g,i,a,c==="preserveStartEnd"):h=TPe(b,x,g,i,a),h.filter(function(w){return w.isShow}))}var NPe=["viewBox"],kPe=["viewBox"],DPe=["ticks"];function hh(t){"@babel/helpers - typeof";return hh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hh(t)}function of(){return of=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},of.apply(this,arguments)}function l5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function br(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?l5(Object(n),!0).forEach(function(r){LP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function X_(t,e){if(t==null)return{};var n=IPe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function IPe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function OPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,k7(r.key),r)}}function MPe(t,e,n){return e&&c5(t.prototype,e),n&&c5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function RPe(t,e,n){return e=tx(e),LPe(t,N7()?Reflect.construct(e,n||[],tx(t).constructor):e.apply(t,n))}function LPe(t,e){if(e&&(hh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zPe(t)}function zPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function N7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(N7=function(){return!!t})()}function tx(t){return tx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},tx(t)}function $Pe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C2(t,e)}function C2(t,e){return C2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},C2(t,e)}function LP(t,e,n){return e=k7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k7(t){var e=FPe(t,"string");return hh(e)=="symbol"?e:e+""}function FPe(t,e){if(hh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Gh=function(t){function e(n){var r;return OPe(this,e),r=RPe(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return $Pe(e,t),MPe(e,[{key:"shouldComponentUpdate",value:function(r,i){var s=r.viewBox,a=X_(r,NPe),o=this.props,c=o.viewBox,u=X_(o,kPe);return!bf(s,c)||!bf(a,u)||!bf(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,s=i.x,a=i.y,o=i.width,c=i.height,u=i.orientation,d=i.tickSize,f=i.mirror,h=i.tickMargin,p,m,g,b,x,w,_=f?-1:1,E=r.tickSize||d,j=Ce(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":p=m=r.coordinate,b=a+ +!f*c,g=b-_*E,w=g-_*h,x=j;break;case"left":g=b=r.coordinate,m=s+ +!f*o,p=m-_*E,x=p-_*h,w=j;break;case"right":g=b=r.coordinate,m=s+ +f*o,p=m+_*E,x=p+_*h,w=j;break;default:p=m=r.coordinate,b=a+ +f*c,g=b+_*E,w=g+_*h,x=j;break}return{line:{x1:p,y1:g,x2:m,y2:b},tick:{x,y:w}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,a;switch(i){case"left":a=s?"start":"end";break;case"right":a=s?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,a="end";switch(i){case"left":case"right":a="middle";break;case"top":a=s?"start":"end";break;default:a=s?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,s=r.y,a=r.width,o=r.height,c=r.orientation,u=r.mirror,d=r.axisLine,f=br(br(br({},et(this.props,!1)),et(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!u||c==="bottom"&&u);f=br(br({},f),{},{x1:i,y1:s+h*o,x2:i+a,y2:s+h*o})}else{var p=+(c==="left"&&!u||c==="right"&&u);f=br(br({},f),{},{x1:i+p*a,y1:s,x2:i+p*a,y2:s+o})}return Y.createElement("line",of({},f,{className:St("recharts-cartesian-axis-line",ss(d,"className"))}))}},{key:"renderTicks",value:function(r,i,s){var a=this,o=this.props,c=o.tickLine,u=o.stroke,d=o.tick,f=o.tickFormatter,h=o.unit,p=RP(br(br({},this.props),{},{ticks:r}),i,s),m=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),b=et(this.props,!1),x=et(d,!1),w=br(br({},b),{},{fill:"none"},et(c,!1)),_=p.map(function(E,j){var T=a.getTickLineCoord(E),A=T.line,C=T.tick,D=br(br(br(br({textAnchor:m,verticalAnchor:g},b),{},{stroke:"none",fill:u},x),C),{},{index:j,payload:E,visibleTicksCount:p.length,tickFormatter:f});return Y.createElement(Tt,of({className:"recharts-cartesian-axis-tick",key:"tick-".concat(E.value,"-").concat(E.coordinate,"-").concat(E.tickCoord)},Du(a.props,E,j)),c&&Y.createElement("line",of({},w,A,{className:St("recharts-cartesian-axis-tick-line",ss(c,"className"))})),d&&e.renderTickItem(d,D,"".concat(ut(f)?f(E.value,j):E.value).concat(h||"")))});return Y.createElement("g",{className:"recharts-cartesian-axis-ticks"},_)}},{key:"render",value:function(){var r=this,i=this.props,s=i.axisLine,a=i.width,o=i.height,c=i.ticksGenerator,u=i.className,d=i.hide;if(d)return null;var f=this.props,h=f.ticks,p=X_(f,DPe),m=h;return ut(c)&&(m=h&&h.length>0?c(this.props):c(p)),a<=0||o<=0||!m||!m.length?null:Y.createElement(Tt,{className:St("recharts-cartesian-axis",u),ref:function(b){r.layerReference=b}},s&&this.renderAxisLine(),this.renderTicks(m,this.state.fontSize,this.state.letterSpacing),Mr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,s){var a,o=St(i.className,"recharts-cartesian-axis-tick-value");return Y.isValidElement(r)?a=Y.cloneElement(r,br(br({},i),{},{className:o})):ut(r)?a=r(br(br({},i),{},{className:o})):a=Y.createElement(Iu,of({},i,{className:"recharts-cartesian-axis-tick-value"}),s),a}}])}(P.Component);LP(Gh,"displayName","CartesianAxis");LP(Gh,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var VPe=["x1","y1","x2","y2","key"],BPe=["offset"];function Lu(t){"@babel/helpers - typeof";return Lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lu(t)}function u5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u5(Object(n),!0).forEach(function(r){UPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function UPe(t,e,n){return e=WPe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WPe(t){var e=HPe(t,"string");return Lu(e)=="symbol"?e:e+""}function HPe(t,e){if(Lu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function su(){return su=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},su.apply(this,arguments)}function d5(t,e){if(t==null)return{};var n=qPe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qPe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var KPe=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,s=e.y,a=e.width,o=e.height,c=e.ry;return Y.createElement("rect",{x:i,y:s,ry:c,width:a,height:o,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function D7(t,e){var n;if(Y.isValidElement(t))n=Y.cloneElement(t,e);else if(ut(t))n=t(e);else{var r=e.x1,i=e.y1,s=e.x2,a=e.y2,o=e.key,c=d5(e,VPe),u=et(c,!1);u.offset;var d=d5(u,BPe);n=Y.createElement("line",su({},d,{x1:r,y1:i,x2:s,y2:a,fill:"none",key:o}))}return n}function GPe(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,s=t.horizontalPoints;if(!i||!s||!s.length)return null;var a=s.map(function(o,c){var u=hi(hi({},t),{},{x1:e,y1:o,x2:e+n,y2:o,key:"line-".concat(c),index:c});return D7(i,u)});return Y.createElement("g",{className:"recharts-cartesian-grid-horizontal"},a)}function YPe(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,s=t.verticalPoints;if(!i||!s||!s.length)return null;var a=s.map(function(o,c){var u=hi(hi({},t),{},{x1:o,y1:e,x2:o,y2:e+n,key:"line-".concat(c),index:c});return D7(i,u)});return Y.createElement("g",{className:"recharts-cartesian-grid-vertical"},a)}function QPe(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,s=t.width,a=t.height,o=t.horizontalPoints,c=t.horizontal,u=c===void 0?!0:c;if(!u||!e||!e.length)return null;var d=o.map(function(h){return Math.round(h+i-i)}).sort(function(h,p){return h-p});i!==d[0]&&d.unshift(0);var f=d.map(function(h,p){var m=!d[p+1],g=m?i+a-h:d[p+1]-h;if(g<=0)return null;var b=p%e.length;return Y.createElement("rect",{key:"react-".concat(p),y:h,x:r,height:g,width:s,stroke:"none",fill:e[b],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return Y.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function XPe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,s=t.x,a=t.y,o=t.width,c=t.height,u=t.verticalPoints;if(!n||!r||!r.length)return null;var d=u.map(function(h){return Math.round(h+s-s)}).sort(function(h,p){return h-p});s!==d[0]&&d.unshift(0);var f=d.map(function(h,p){var m=!d[p+1],g=m?s+o-h:d[p+1]-h;if(g<=0)return null;var b=p%r.length;return Y.createElement("rect",{key:"react-".concat(p),x:h,y:a,width:g,height:c,stroke:"none",fill:r[b],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return Y.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var ZPe=function(e,n){var r=e.xAxis,i=e.width,s=e.height,a=e.offset;return P9(RP(hi(hi(hi({},Gh.defaultProps),r),{},{ticks:bo(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),a.left,a.left+a.width,n)},JPe=function(e,n){var r=e.yAxis,i=e.width,s=e.height,a=e.offset;return P9(RP(hi(hi(hi({},Gh.defaultProps),r),{},{ticks:bo(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),a.top,a.top+a.height,n)},Nd={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Ev(t){var e,n,r,i,s,a,o=IP(),c=OP(),u=FTe(),d=hi(hi({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Nd.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Nd.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:Nd.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Nd.horizontalFill,vertical:(s=t.vertical)!==null&&s!==void 0?s:Nd.vertical,verticalFill:(a=t.verticalFill)!==null&&a!==void 0?a:Nd.verticalFill,x:Ce(t.x)?t.x:u.left,y:Ce(t.y)?t.y:u.top,width:Ce(t.width)?t.width:u.width,height:Ce(t.height)?t.height:u.height}),f=d.x,h=d.y,p=d.width,m=d.height,g=d.syncWithTicks,b=d.horizontalValues,x=d.verticalValues,w=LTe(),_=zTe();if(!Ce(p)||p<=0||!Ce(m)||m<=0||!Ce(f)||f!==+f||!Ce(h)||h!==+h)return null;var E=d.verticalCoordinatesGenerator||ZPe,j=d.horizontalCoordinatesGenerator||JPe,T=d.horizontalPoints,A=d.verticalPoints;if((!T||!T.length)&&ut(j)){var C=b&&b.length,D=j({yAxis:_?hi(hi({},_),{},{ticks:C?b:_.ticks}):void 0,width:o,height:c,offset:u},C?!0:g);ta(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Lu(D),"]")),Array.isArray(D)&&(T=D)}if((!A||!A.length)&&ut(E)){var O=x&&x.length,L=E({xAxis:w?hi(hi({},w),{},{ticks:O?x:w.ticks}):void 0,width:o,height:c,offset:u},O?!0:g);ta(Array.isArray(L),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Lu(L),"]")),Array.isArray(L)&&(A=L)}return Y.createElement("g",{className:"recharts-cartesian-grid"},Y.createElement(KPe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),Y.createElement(GPe,su({},d,{offset:u,horizontalPoints:T,xAxis:w,yAxis:_})),Y.createElement(YPe,su({},d,{offset:u,verticalPoints:A,xAxis:w,yAxis:_})),Y.createElement(QPe,su({},d,{horizontalPoints:T})),Y.createElement(XPe,su({},d,{verticalPoints:A})))}Ev.displayName="CartesianGrid";var eNe=["type","layout","connectNulls","ref"],tNe=["key"];function ph(t){"@babel/helpers - typeof";return ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ph(t)}function f5(t,e){if(t==null)return{};var n=nNe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function nNe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function wm(){return wm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wm.apply(this,arguments)}function h5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Gi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h5(Object(n),!0).forEach(function(r){Qs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kd(t){return aNe(t)||sNe(t)||iNe(t)||rNe()}function rNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iNe(t,e){if(t){if(typeof t=="string")return T2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T2(t,e)}}function sNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function aNe(t){if(Array.isArray(t))return T2(t)}function T2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function oNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,O7(r.key),r)}}function lNe(t,e,n){return e&&p5(t.prototype,e),n&&p5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function cNe(t,e,n){return e=nx(e),uNe(t,I7()?Reflect.construct(e,n||[],nx(t).constructor):e.apply(t,n))}function uNe(t,e){if(e&&(ph(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dNe(t)}function dNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function I7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(I7=function(){return!!t})()}function nx(t){return nx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},nx(t)}function fNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P2(t,e)}function P2(t,e){return P2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},P2(t,e)}function Qs(t,e,n){return e=O7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O7(t){var e=hNe(t,"string");return ph(e)=="symbol"?e:e+""}function hNe(t,e){if(ph(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ph(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var zu=function(t){function e(){var n;oNe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=cNe(this,e,[].concat(i)),Qs(n,"state",{isAnimationFinished:!0,totalLength:0}),Qs(n,"generateSimpleStrokeDasharray",function(a,o){return"".concat(o,"px ").concat(a-o,"px")}),Qs(n,"getStrokeDasharray",function(a,o,c){var u=c.reduce(function(x,w){return x+w});if(!u)return n.generateSimpleStrokeDasharray(o,a);for(var d=Math.floor(a/u),f=a%u,h=o-a,p=[],m=0,g=0;m<c.length;g+=c[m],++m)if(g+c[m]>f){p=[].concat(kd(c.slice(0,m)),[f-g]);break}var b=p.length%2===0?[0,h]:[h];return[].concat(kd(e.repeat(c,d)),kd(p),b).map(function(x){return"".concat(x,"px")}).join(", ")}),Qs(n,"id",Zu("recharts-line-")),Qs(n,"pathRef",function(a){n.mainCurve=a}),Qs(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Qs(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return fNe(e,t),lNe(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.points,o=s.xAxis,c=s.yAxis,u=s.layout,d=s.children,f=as(d,Sv);if(!f)return null;var h=function(g,b){return{x:g.x,y:g.y,value:g.value,errorVal:Jn(g.payload,b)}},p={clipPath:r?"url(#clipPath-".concat(i,")"):null};return Y.createElement(Tt,p,f.map(function(m){return Y.cloneElement(m,{key:"bar-".concat(m.props.dataKey),data:a,xAxis:o,yAxis:c,layout:u,dataPointFormatter:h})}))}},{key:"renderDots",value:function(r,i,s){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var o=this.props,c=o.dot,u=o.points,d=o.dataKey,f=et(this.props,!1),h=et(c,!0),p=u.map(function(g,b){var x=Gi(Gi(Gi({key:"dot-".concat(b),r:3},f),h),{},{index:b,cx:g.x,cy:g.y,value:g.value,dataKey:d,payload:g.payload,points:u});return e.renderDotItem(c,x)}),m={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return Y.createElement(Tt,wm({className:"recharts-line-dots",key:"dots"},m),p)}},{key:"renderCurveStatically",value:function(r,i,s,a){var o=this.props,c=o.type,u=o.layout,d=o.connectNulls;o.ref;var f=f5(o,eNe),h=Gi(Gi(Gi({},et(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(s,")"):null,points:r},a),{},{type:c,layout:u,connectNulls:d});return Y.createElement(yu,wm({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var s=this,a=this.props,o=a.points,c=a.strokeDasharray,u=a.isAnimationActive,d=a.animationBegin,f=a.animationDuration,h=a.animationEasing,p=a.animationId,m=a.animateNewValues,g=a.width,b=a.height,x=this.state,w=x.prevPoints,_=x.totalLength;return Y.createElement(oa,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(E){var j=E.t;if(w){var T=w.length/o.length,A=o.map(function(z,M){var G=Math.floor(M*T);if(w[G]){var K=w[G],B=_r(K.x,z.x),U=_r(K.y,z.y);return Gi(Gi({},z),{},{x:B(j),y:U(j)})}if(m){var F=_r(g*2,z.x),q=_r(b/2,z.y);return Gi(Gi({},z),{},{x:F(j),y:q(j)})}return Gi(Gi({},z),{},{x:z.x,y:z.y})});return s.renderCurveStatically(A,r,i)}var C=_r(0,_),D=C(j),O;if(c){var L="".concat(c).split(/[,\s]+/gim).map(function(z){return parseFloat(z)});O=s.getStrokeDasharray(D,_,L)}else O=s.generateSimpleStrokeDasharray(_,D);return s.renderCurveStatically(o,r,i,{strokeDasharray:O})})}},{key:"renderCurve",value:function(r,i){var s=this.props,a=s.points,o=s.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return o&&a&&a.length&&(!u&&d>0||!Ou(u,a))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(a,r,i)}},{key:"render",value:function(){var r,i=this.props,s=i.hide,a=i.dot,o=i.points,c=i.className,u=i.xAxis,d=i.yAxis,f=i.top,h=i.left,p=i.width,m=i.height,g=i.isAnimationActive,b=i.id;if(s||!o||!o.length)return null;var x=this.state.isAnimationFinished,w=o.length===1,_=St("recharts-line",c),E=u&&u.allowDataOverflow,j=d&&d.allowDataOverflow,T=E||j,A=gt(b)?this.id:b,C=(r=et(a,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},D=C.r,O=D===void 0?3:D,L=C.strokeWidth,z=L===void 0?2:L,M=wV(a)?a:{},G=M.clipDot,K=G===void 0?!0:G,B=O*2+z;return Y.createElement(Tt,{className:_},E||j?Y.createElement("defs",null,Y.createElement("clipPath",{id:"clipPath-".concat(A)},Y.createElement("rect",{x:E?h:h-p/2,y:j?f:f-m/2,width:E?p:p*2,height:j?m:m*2})),!K&&Y.createElement("clipPath",{id:"clipPath-dots-".concat(A)},Y.createElement("rect",{x:h-B/2,y:f-B/2,width:p+B,height:m+B}))):null,!w&&this.renderCurve(T,A),this.renderErrorBar(T,A),(w||a)&&this.renderDots(T,K,A),(!g||x)&&Ns.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var s=r.length%2!==0?[].concat(kd(r),[0]):r,a=[],o=0;o<i;++o)a=[].concat(kd(a),kd(s));return a}},{key:"renderDotItem",value:function(r,i){var s;if(Y.isValidElement(r))s=Y.cloneElement(r,i);else if(ut(r))s=r(i);else{var a=i.key,o=f5(i,tNe),c=St("recharts-line-dot",typeof r!="boolean"?r.className:"");s=Y.createElement(Av,wm({key:a},o,{className:c}))}return s}}])}(P.PureComponent);Qs(zu,"displayName","Line");Qs(zu,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!sc.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Qs(zu,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,s=t.yAxisTicks,a=t.dataKey,o=t.bandSize,c=t.displayedData,u=t.offset,d=e.layout,f=c.map(function(h,p){var m=Jn(h,a);return d==="horizontal"?{x:Ib({axis:n,ticks:i,bandSize:o,entry:h,index:p}),y:gt(m)?null:r.scale(m),value:m,payload:h}:{x:gt(m)?null:n.scale(m),y:Ib({axis:r,ticks:s,bandSize:o,entry:h,index:p}),value:m,payload:h}});return Gi({points:f,layout:d},u)});var pNe=["layout","type","stroke","connectNulls","isRange","ref"],mNe=["key"],M7;function mh(t){"@babel/helpers - typeof";return mh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mh(t)}function R7(t,e){if(t==null)return{};var n=gNe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function gNe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function au(){return au=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},au.apply(this,arguments)}function m5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m5(Object(n),!0).forEach(function(r){ka(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,z7(r.key),r)}}function yNe(t,e,n){return e&&g5(t.prototype,e),n&&g5(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function bNe(t,e,n){return e=rx(e),xNe(t,L7()?Reflect.construct(e,n||[],rx(t).constructor):e.apply(t,n))}function xNe(t,e){if(e&&(mh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wNe(t)}function wNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(L7=function(){return!!t})()}function rx(t){return rx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},rx(t)}function _Ne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&N2(t,e)}function N2(t,e){return N2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},N2(t,e)}function ka(t,e,n){return e=z7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z7(t){var e=SNe(t,"string");return mh(e)=="symbol"?e:e+""}function SNe(t,e){if(mh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(mh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var cc=function(t){function e(){var n;vNe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=bNe(this,e,[].concat(i)),ka(n,"state",{isAnimationFinished:!0}),ka(n,"id",Zu("recharts-area-")),ka(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),ut(a)&&a()}),ka(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),ut(a)&&a()}),n}return _Ne(e,t),yNe(e,[{key:"renderDots",value:function(r,i,s){var a=this.props.isAnimationActive,o=this.state.isAnimationFinished;if(a&&!o)return null;var c=this.props,u=c.dot,d=c.points,f=c.dataKey,h=et(this.props,!1),p=et(u,!0),m=d.map(function(b,x){var w=dl(dl(dl({key:"dot-".concat(x),r:3},h),p),{},{index:x,cx:b.x,cy:b.y,dataKey:f,value:b.value,payload:b.payload,points:d});return e.renderDotItem(u,w)}),g={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return Y.createElement(Tt,au({className:"recharts-area-dots"},g),m)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,s=i.baseLine,a=i.points,o=i.strokeWidth,c=a[0].x,u=a[a.length-1].x,d=r*Math.abs(c-u),f=_l(a.map(function(h){return h.y||0}));return Ce(s)&&typeof s=="number"?f=Math.max(s,f):s&&Array.isArray(s)&&s.length&&(f=Math.max(_l(s.map(function(h){return h.y||0})),f)),Ce(f)?Y.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(f+(o?parseInt("".concat(o),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,s=i.baseLine,a=i.points,o=i.strokeWidth,c=a[0].y,u=a[a.length-1].y,d=r*Math.abs(c-u),f=_l(a.map(function(h){return h.x||0}));return Ce(s)&&typeof s=="number"?f=Math.max(s,f):s&&Array.isArray(s)&&s.length&&(f=Math.max(_l(s.map(function(h){return h.x||0})),f)),Ce(f)?Y.createElement("rect",{x:0,y:c<u?c:c-d,width:f+(o?parseInt("".concat(o),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,s,a){var o=this.props,c=o.layout,u=o.type,d=o.stroke,f=o.connectNulls,h=o.isRange;o.ref;var p=R7(o,pNe);return Y.createElement(Tt,{clipPath:s?"url(#clipPath-".concat(a,")"):null},Y.createElement(yu,au({},et(p,!0),{points:r,connectNulls:f,type:u,baseLine:i,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&Y.createElement(yu,au({},et(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:r})),d!=="none"&&h&&Y.createElement(yu,au({},et(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var s=this,a=this.props,o=a.points,c=a.baseLine,u=a.isAnimationActive,d=a.animationBegin,f=a.animationDuration,h=a.animationEasing,p=a.animationId,m=this.state,g=m.prevPoints,b=m.prevBaseLine;return Y.createElement(oa,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var w=x.t;if(g){var _=g.length/o.length,E=o.map(function(C,D){var O=Math.floor(D*_);if(g[O]){var L=g[O],z=_r(L.x,C.x),M=_r(L.y,C.y);return dl(dl({},C),{},{x:z(w),y:M(w)})}return C}),j;if(Ce(c)&&typeof c=="number"){var T=_r(b,c);j=T(w)}else if(gt(c)||Vh(c)){var A=_r(b,0);j=A(w)}else j=c.map(function(C,D){var O=Math.floor(D*_);if(b[O]){var L=b[O],z=_r(L.x,C.x),M=_r(L.y,C.y);return dl(dl({},C),{},{x:z(w),y:M(w)})}return C});return s.renderAreaStatically(E,j,r,i)}return Y.createElement(Tt,null,Y.createElement("defs",null,Y.createElement("clipPath",{id:"animationClipPath-".concat(i)},s.renderClipRect(w))),Y.createElement(Tt,{clipPath:"url(#animationClipPath-".concat(i,")")},s.renderAreaStatically(o,c,r,i)))})}},{key:"renderArea",value:function(r,i){var s=this.props,a=s.points,o=s.baseLine,c=s.isAnimationActive,u=this.state,d=u.prevPoints,f=u.prevBaseLine,h=u.totalLength;return c&&a&&a.length&&(!d&&h>0||!Ou(d,a)||!Ou(f,o))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(a,o,r,i)}},{key:"render",value:function(){var r,i=this.props,s=i.hide,a=i.dot,o=i.points,c=i.className,u=i.top,d=i.left,f=i.xAxis,h=i.yAxis,p=i.width,m=i.height,g=i.isAnimationActive,b=i.id;if(s||!o||!o.length)return null;var x=this.state.isAnimationFinished,w=o.length===1,_=St("recharts-area",c),E=f&&f.allowDataOverflow,j=h&&h.allowDataOverflow,T=E||j,A=gt(b)?this.id:b,C=(r=et(a,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},D=C.r,O=D===void 0?3:D,L=C.strokeWidth,z=L===void 0?2:L,M=wV(a)?a:{},G=M.clipDot,K=G===void 0?!0:G,B=O*2+z;return Y.createElement(Tt,{className:_},E||j?Y.createElement("defs",null,Y.createElement("clipPath",{id:"clipPath-".concat(A)},Y.createElement("rect",{x:E?d:d-p/2,y:j?u:u-m/2,width:E?p:p*2,height:j?m:m*2})),!K&&Y.createElement("clipPath",{id:"clipPath-dots-".concat(A)},Y.createElement("rect",{x:d-B/2,y:u-B/2,width:p+B,height:m+B}))):null,w?null:this.renderArea(T,A),(a||w)&&this.renderDots(T,K,A),(!g||x)&&Ns.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(P.PureComponent);M7=cc;ka(cc,"displayName","Area");ka(cc,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!sc.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});ka(cc,"getBaseValue",function(t,e,n,r){var i=t.layout,s=t.baseValue,a=e.props.baseValue,o=a??s;if(Ce(o)&&typeof o=="number")return o;var c=i==="horizontal"?r:n,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),f=Math.min(u[0],u[1]);return o==="dataMin"?f:o==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return o==="dataMin"?u[0]:o==="dataMax"?u[1]:u[0]});ka(cc,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,i=t.yAxis,s=t.xAxisTicks,a=t.yAxisTicks,o=t.bandSize,c=t.dataKey,u=t.stackedData,d=t.dataStartIndex,f=t.displayedData,h=t.offset,p=e.layout,m=u&&u.length,g=M7.getBaseValue(e,n,r,i),b=p==="horizontal",x=!1,w=f.map(function(E,j){var T;m?T=u[d+j]:(T=Jn(E,c),Array.isArray(T)?x=!0:T=[g,T]);var A=T[1]==null||m&&Jn(E,c)==null;return b?{x:Ib({axis:r,ticks:s,bandSize:o,entry:E,index:j}),y:A?null:i.scale(T[1]),value:T,payload:E}:{x:A?null:r.scale(T[1]),y:Ib({axis:i,ticks:a,bandSize:o,entry:E,index:j}),value:T,payload:E}}),_;return m||x?_=w.map(function(E){var j=Array.isArray(E.value)?E.value[0]:null;return b?{x:E.x,y:j!=null&&E.y!=null?i.scale(j):null}:{x:j!=null?r.scale(j):null,y:E.y}}):_=b?i.scale(g):r.scale(g),dl({points:w,baseLine:_,layout:p,isRange:x},h)});ka(cc,"renderDotItem",function(t,e){var n;if(Y.isValidElement(t))n=Y.cloneElement(t,e);else if(ut(t))n=t(e);else{var r=St("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,s=R7(e,mNe);n=Y.createElement(Av,au({},s,{key:i,className:r}))}return n});function gh(t){"@babel/helpers - typeof";return gh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gh(t)}function ANe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ENe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,V7(r.key),r)}}function jNe(t,e,n){return e&&ENe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function CNe(t,e,n){return e=ix(e),TNe(t,$7()?Reflect.construct(e,n||[],ix(t).constructor):e.apply(t,n))}function TNe(t,e){if(e&&(gh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PNe(t)}function PNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($7=function(){return!!t})()}function ix(t){return ix=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ix(t)}function NNe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k2(t,e)}function k2(t,e){return k2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},k2(t,e)}function F7(t,e,n){return e=V7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function V7(t){var e=kNe(t,"string");return gh(e)=="symbol"?e:e+""}function kNe(t,e){if(gh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function D2(){return D2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},D2.apply(this,arguments)}function DNe(t){var e=t.xAxisId,n=IP(),r=OP(),i=w7(e);return i==null?null:P.createElement(Gh,D2({},i,{className:St("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(a){return bo(a,!0)}}))}var Un=function(t){function e(){return ANe(this,e),CNe(this,e,arguments)}return NNe(e,t),jNe(e,[{key:"render",value:function(){return P.createElement(DNe,this.props)}}])}(P.Component);F7(Un,"displayName","XAxis");F7(Un,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function vh(t){"@babel/helpers - typeof";return vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vh(t)}function INe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ONe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,W7(r.key),r)}}function MNe(t,e,n){return e&&ONe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function RNe(t,e,n){return e=sx(e),LNe(t,B7()?Reflect.construct(e,n||[],sx(t).constructor):e.apply(t,n))}function LNe(t,e){if(e&&(vh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zNe(t)}function zNe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function B7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(B7=function(){return!!t})()}function sx(t){return sx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sx(t)}function $Ne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&I2(t,e)}function I2(t,e){return I2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},I2(t,e)}function U7(t,e,n){return e=W7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function W7(t){var e=FNe(t,"string");return vh(e)=="symbol"?e:e+""}function FNe(t,e){if(vh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function O2(){return O2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},O2.apply(this,arguments)}var VNe=function(e){var n=e.yAxisId,r=IP(),i=OP(),s=_7(n);return s==null?null:P.createElement(Gh,O2({},s,{className:St("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(o){return bo(o,!0)}}))},er=function(t){function e(){return INe(this,e),RNe(this,e,arguments)}return $Ne(e,t),MNe(e,[{key:"render",value:function(){return P.createElement(VNe,this.props)}}])}(P.Component);U7(er,"displayName","YAxis");U7(er,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function v5(t){return HNe(t)||WNe(t)||UNe(t)||BNe()}function BNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UNe(t,e){if(t){if(typeof t=="string")return M2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M2(t,e)}}function WNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function HNe(t){if(Array.isArray(t))return M2(t)}function M2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var R2=function(e,n,r,i,s){var a=as(e,Jw),o=as(e,t1),c=[].concat(v5(a),v5(o)),u=as(e,r1),d="".concat(i,"Id"),f=i[0],h=n;if(c.length&&(h=c.reduce(function(g,b){if(b.props[d]===r&&Fa(b.props,"extendDomain")&&Ce(b.props[f])){var x=b.props[f];return[Math.min(g[0],x),Math.max(g[1],x)]}return g},h)),u.length){var p="".concat(f,"1"),m="".concat(f,"2");h=u.reduce(function(g,b){if(b.props[d]===r&&Fa(b.props,"extendDomain")&&Ce(b.props[p])&&Ce(b.props[m])){var x=b.props[p],w=b.props[m];return[Math.min(g[0],x,w),Math.max(g[1],x,w)]}return g},h)}return s&&s.length&&(h=s.reduce(function(g,b){return Ce(b)?[Math.min(g[0],b),Math.max(g[1],b)]:g},h)),h},H7={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new i(d,f||c,h),m=n?n+u:u;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],p]:c._events[m].push(p):(c._events[m]=p,c._eventsCount++),c}function a(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)e.call(d,f)&&u.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=n?n+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,m=new Array(p);h<p;h++)m[h]=f[h].fn;return m},o.prototype.listenerCount=function(u){var d=n?n+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,h,p,m){var g=n?n+u:u;if(!this._events[g])return!1;var b=this._events[g],x=arguments.length,w,_;if(b.fn){switch(b.once&&this.removeListener(u,b.fn,void 0,!0),x){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,f),!0;case 4:return b.fn.call(b.context,d,f,h),!0;case 5:return b.fn.call(b.context,d,f,h,p),!0;case 6:return b.fn.call(b.context,d,f,h,p,m),!0}for(_=1,w=new Array(x-1);_<x;_++)w[_-1]=arguments[_];b.fn.apply(b.context,w)}else{var E=b.length,j;for(_=0;_<E;_++)switch(b[_].once&&this.removeListener(u,b[_].fn,void 0,!0),x){case 1:b[_].fn.call(b[_].context);break;case 2:b[_].fn.call(b[_].context,d);break;case 3:b[_].fn.call(b[_].context,d,f);break;case 4:b[_].fn.call(b[_].context,d,f,h);break;default:if(!w)for(j=1,w=new Array(x-1);j<x;j++)w[j-1]=arguments[j];b[_].fn.apply(b[_].context,w)}}return!0},o.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,h){var p=n?n+u:u;if(!this._events[p])return this;if(!d)return a(this,p),this;var m=this._events[p];if(m.fn)m.fn===d&&(!h||m.once)&&(!f||m.context===f)&&a(this,p);else{for(var g=0,b=[],x=m.length;g<x;g++)(m[g].fn!==d||h&&!m[g].once||f&&m[g].context!==f)&&b.push(m[g]);b.length?this._events[p]=b.length===1?b[0]:b:a(this,p)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&a(this,d)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(H7);var qNe=H7.exports;const KNe=Qt(qNe);var Z_=new KNe,J_="recharts.syncMouseEvents";function Bg(t){"@babel/helpers - typeof";return Bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bg(t)}function GNe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function YNe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,q7(r.key),r)}}function QNe(t,e,n){return e&&YNe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function eS(t,e,n){return e=q7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q7(t){var e=XNe(t,"string");return Bg(e)=="symbol"?e:e+""}function XNe(t,e){if(Bg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ZNe=function(){function t(){GNe(this,t),eS(this,"activeIndex",0),eS(this,"coordinateList",[]),eS(this,"layout","horizontal")}return QNe(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,s=i===void 0?null:i,a=n.container,o=a===void 0?null:a,c=n.layout,u=c===void 0?null:c,d=n.offset,f=d===void 0?null:d,h=n.mouseHandlerCallback,p=h===void 0?null:h;this.coordinateList=(r=s??this.coordinateList)!==null&&r!==void 0?r:[],this.container=o??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,a=i.y,o=i.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,f=s+c+u,h=a+this.offset.top+o/2+d;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function JNe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&Ce(r)&&Ce(i))return!0}return!1}function eke(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function K7(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,s=t.endAngle,a=yn(e,n,r,i),o=yn(e,n,r,s);return{points:[a,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:s}}function tke(t,e,n){var r,i,s,a;if(t==="horizontal")r=e.x,s=r,i=n.top,a=n.top+n.height;else if(t==="vertical")i=e.y,a=i,r=n.left,s=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var o=e.cx,c=e.cy,u=e.innerRadius,d=e.outerRadius,f=e.angle,h=yn(o,c,u,f),p=yn(o,c,d,f);r=h.x,i=h.y,s=p.x,a=p.y}else return K7(e);return[{x:r,y:i},{x:s,y:a}]}function Ug(t){"@babel/helpers - typeof";return Ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ug(t)}function y5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?y5(Object(n),!0).forEach(function(r){nke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nke(t,e,n){return e=rke(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rke(t){var e=ike(t,"string");return Ug(e)=="symbol"?e:e+""}function ike(t,e){if(Ug(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ug(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ske(t){var e,n,r=t.element,i=t.tooltipEventType,s=t.isActive,a=t.activeCoordinate,o=t.activePayload,c=t.offset,u=t.activeTooltipIndex,d=t.tooltipAxisBandSize,f=t.layout,h=t.chartName,p=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!p||!s||!a||h!=="ScatterChart"&&i!=="axis")return null;var m,g=yu;if(h==="ScatterChart")m=a,g=h2e;else if(h==="BarChart")m=eke(f,a,c,d),g=TP;else if(f==="radial"){var b=K7(a),x=b.cx,w=b.cy,_=b.radius,E=b.startAngle,j=b.endAngle;m={cx:x,cy:w,startAngle:E,endAngle:j,innerRadius:_,outerRadius:_},g=F9}else m={points:tke(f,a,c)},g=yu;var T=Sy(Sy(Sy(Sy({stroke:"#ccc",pointerEvents:"none"},c),m),et(p,!1)),{},{payload:o,payloadIndex:u,className:St("recharts-tooltip-cursor",p.className)});return P.isValidElement(p)?P.cloneElement(p,T):P.createElement(g,T)}var ake=["item"],oke=["children","className","width","height","style","compact","title","desc"];function yh(t){"@babel/helpers - typeof";return yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yh(t)}function lf(){return lf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lf.apply(this,arguments)}function b5(t,e){return uke(t)||cke(t,e)||Y7(t,e)||lke()}function lke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cke(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,o=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return o}}function uke(t){if(Array.isArray(t))return t}function x5(t,e){if(t==null)return{};var n=dke(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function dke(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function fke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Q7(r.key),r)}}function pke(t,e,n){return e&&hke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function mke(t,e,n){return e=ax(e),gke(t,G7()?Reflect.construct(e,n||[],ax(t).constructor):e.apply(t,n))}function gke(t,e){if(e&&(yh(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vke(t)}function vke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function G7(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(G7=function(){return!!t})()}function ax(t){return ax=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ax(t)}function yke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&L2(t,e)}function L2(t,e){return L2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},L2(t,e)}function bh(t){return wke(t)||xke(t)||Y7(t)||bke()}function bke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y7(t,e){if(t){if(typeof t=="string")return z2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z2(t,e)}}function xke(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wke(t){if(Array.isArray(t))return z2(t)}function z2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function w5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Se(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w5(Object(n),!0).forEach(function(r){lt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lt(t,e,n){return e=Q7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Q7(t){var e=_ke(t,"string");return yh(e)=="symbol"?e:e+""}function _ke(t,e){if(yh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yh(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ske={xAxis:["bottom","top"],yAxis:["left","right"]},Ake={width:"100%",height:"100%"},X7={x:0,y:0};function Ay(t){return t}var Eke=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},jke=function(e,n,r,i){var s=n.find(function(d){return d&&d.index===r});if(s){if(e==="horizontal")return{x:s.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:s.coordinate};if(e==="centric"){var a=s.coordinate,o=i.radius;return Se(Se(Se({},i),yn(i.cx,i.cy,o,a)),{},{angle:a,radius:o})}var c=s.coordinate,u=i.angle;return Se(Se(Se({},i),yn(i.cx,i.cy,c,u)),{},{angle:u,radius:c})}return X7},i1=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,s=n.dataEndIndex,a=(r??[]).reduce(function(o,c){var u=c.props.data;return u&&u.length?[].concat(bh(o),bh(u)):o},[]);return a.length>0?a:e&&e.length&&Ce(i)&&Ce(s)?e.slice(i,s+1):[]};function Z7(t){return t==="number"?[0,"auto"]:void 0}var $2=function(e,n,r,i){var s=e.graphicalItems,a=e.tooltipAxis,o=i1(n,e);return r<0||!s||!s.length||r>=o.length?null:s.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:n;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var h;if(a.dataKey&&!a.allowDuplicatedCategory){var p=f===void 0?o:f;h=sb(p,a.dataKey,i)}else h=f&&f[r]||o[r];return h?[].concat(bh(c),[O9(u,h)]):c},[])},_5=function(e,n,r,i){var s=i||{x:e.chartX,y:e.chartY},a=Eke(s,r),o=e.orderedTooltipTicks,c=e.tooltipAxis,u=e.tooltipTicks,d=R_e(a,o,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,h=$2(e,n,d,f),p=jke(r,o,d,s);return{activeTooltipIndex:d,activeLabel:f,activePayload:h,activeCoordinate:p}}return null},Cke=function(e,n){var r=n.axes,i=n.graphicalItems,s=n.axisType,a=n.axisIdKey,o=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,f=e.children,h=e.stackOffset,p=T9(d,s);return r.reduce(function(m,g){var b,x=g.type.defaultProps!==void 0?Se(Se({},g.type.defaultProps),g.props):g.props,w=x.type,_=x.dataKey,E=x.allowDataOverflow,j=x.allowDuplicatedCategory,T=x.scale,A=x.ticks,C=x.includeHidden,D=x[a];if(m[D])return m;var O=i1(e.data,{graphicalItems:i.filter(function(he){var ye,De=a in he.props?he.props[a]:(ye=he.type.defaultProps)===null||ye===void 0?void 0:ye[a];return De===D}),dataStartIndex:c,dataEndIndex:u}),L=O.length,z,M,G;JNe(x.domain,E,w)&&(z=ZE(x.domain,null,E),p&&(w==="number"||T!=="auto")&&(G=vm(O,_,"category")));var K=Z7(w);if(!z||z.length===0){var B,U=(B=x.domain)!==null&&B!==void 0?B:K;if(_){if(z=vm(O,_,w),w==="category"&&p){var F=jce(z);j&&F?(M=z,z=qb(0,L)):j||(z=BR(U,z,g).reduce(function(he,ye){return he.indexOf(ye)>=0?he:[].concat(bh(he),[ye])},[]))}else if(w==="category")j?z=z.filter(function(he){return he!==""&&!gt(he)}):z=BR(U,z,g).reduce(function(he,ye){return he.indexOf(ye)>=0||ye===""||gt(ye)?he:[].concat(bh(he),[ye])},[]);else if(w==="number"){var q=V_e(O,i.filter(function(he){var ye,De,We=a in he.props?he.props[a]:(ye=he.type.defaultProps)===null||ye===void 0?void 0:ye[a],Je="hide"in he.props?he.props.hide:(De=he.type.defaultProps)===null||De===void 0?void 0:De.hide;return We===D&&(C||!Je)}),_,s,d);q&&(z=q)}p&&(w==="number"||T!=="auto")&&(G=vm(O,_,"category"))}else p?z=qb(0,L):o&&o[D]&&o[D].hasStack&&w==="number"?z=h==="expand"?[0,1]:I9(o[D].stackGroups,c,u):z=C9(O,i.filter(function(he){var ye=a in he.props?he.props[a]:he.type.defaultProps[a],De="hide"in he.props?he.props.hide:he.type.defaultProps.hide;return ye===D&&(C||!De)}),w,d,!0);if(w==="number")z=R2(f,z,D,s,A),U&&(z=ZE(U,z,E));else if(w==="category"&&U){var Z=U,re=z.every(function(he){return Z.indexOf(he)>=0});re&&(z=Z)}}return Se(Se({},m),{},lt({},D,Se(Se({},x),{},{axisType:s,domain:z,categoricalDomain:G,duplicateDomain:M,originalDomain:(b=x.domain)!==null&&b!==void 0?b:K,isCategorical:p,layout:d})))},{})},Tke=function(e,n){var r=n.graphicalItems,i=n.Axis,s=n.axisType,a=n.axisIdKey,o=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,f=e.children,h=i1(e.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),p=h.length,m=T9(d,s),g=-1;return r.reduce(function(b,x){var w=x.type.defaultProps!==void 0?Se(Se({},x.type.defaultProps),x.props):x.props,_=w[a],E=Z7("number");if(!b[_]){g++;var j;return m?j=qb(0,p):o&&o[_]&&o[_].hasStack?(j=I9(o[_].stackGroups,c,u),j=R2(f,j,_,s)):(j=ZE(E,C9(h,r.filter(function(T){var A,C,D=a in T.props?T.props[a]:(A=T.type.defaultProps)===null||A===void 0?void 0:A[a],O="hide"in T.props?T.props.hide:(C=T.type.defaultProps)===null||C===void 0?void 0:C.hide;return D===_&&!O}),"number",d),i.defaultProps.allowDataOverflow),j=R2(f,j,_,s)),Se(Se({},b),{},lt({},_,Se(Se({axisType:s},i.defaultProps),{},{hide:!0,orientation:ss(Ske,"".concat(s,".").concat(g%2),null),domain:j,originalDomain:E,isCategorical:m,layout:d})))}return b},{})},Pke=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,s=n.AxisComp,a=n.graphicalItems,o=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.children,f="".concat(i,"Id"),h=as(d,s),p={};return h&&h.length?p=Cke(e,{axes:h,graphicalItems:a,axisType:i,axisIdKey:f,stackGroups:o,dataStartIndex:c,dataEndIndex:u}):a&&a.length&&(p=Tke(e,{Axis:s,graphicalItems:a,axisType:i,axisIdKey:f,stackGroups:o,dataStartIndex:c,dataEndIndex:u})),p},Nke=function(e){var n=vl(e),r=bo(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:tP(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Ob(n,r)}},S5=function(e){var n=e.children,r=e.defaultShowTooltip,i=Xi(n,lh),s=0,a=0;return e.data&&e.data.length!==0&&(a=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(a=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!r}},kke=function(e){return!e||!e.length?!1:e.some(function(n){var r=So(n&&n.type);return r&&r.indexOf("Bar")>=0})},A5=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Dke=function(e,n){var r=e.props,i=e.graphicalItems,s=e.xAxisMap,a=s===void 0?{}:s,o=e.yAxisMap,c=o===void 0?{}:o,u=r.width,d=r.height,f=r.children,h=r.margin||{},p=Xi(f,lh),m=Xi(f,na),g=Object.keys(c).reduce(function(j,T){var A=c[T],C=A.orientation;return!A.mirror&&!A.hide?Se(Se({},j),{},lt({},C,j[C]+A.width)):j},{left:h.left||0,right:h.right||0}),b=Object.keys(a).reduce(function(j,T){var A=a[T],C=A.orientation;return!A.mirror&&!A.hide?Se(Se({},j),{},lt({},C,ss(j,"".concat(C))+A.height)):j},{top:h.top||0,bottom:h.bottom||0}),x=Se(Se({},b),g),w=x.bottom;p&&(x.bottom+=p.props.height||lh.defaultProps.height),m&&n&&(x=$_e(x,i,r,n));var _=u-x.left-x.right,E=d-x.top-x.bottom;return Se(Se({brushBottom:w},x),{},{width:Math.max(_,0),height:Math.max(E,0)})},Ike=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},s1=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,s=i===void 0?"axis":i,a=e.validateTooltipEventTypes,o=a===void 0?["axis"]:a,c=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,f=e.defaultProps,h=function(x,w){var _=w.graphicalItems,E=w.stackGroups,j=w.offset,T=w.updateId,A=w.dataStartIndex,C=w.dataEndIndex,D=x.barSize,O=x.layout,L=x.barGap,z=x.barCategoryGap,M=x.maxBarSize,G=A5(O),K=G.numericAxisName,B=G.cateAxisName,U=kke(_),F=[];return _.forEach(function(q,Z){var re=i1(x.data,{graphicalItems:[q],dataStartIndex:A,dataEndIndex:C}),he=q.type.defaultProps!==void 0?Se(Se({},q.type.defaultProps),q.props):q.props,ye=he.dataKey,De=he.maxBarSize,We=he["".concat(K,"Id")],Je=he["".concat(B,"Id")],jt={},dt=c.reduce(function(Ut,vr){var rr=w["".concat(vr.axisType,"Map")],Me=he["".concat(vr.axisType,"Id")];rr&&rr[Me]||vr.axisType==="zAxis"||Ru();var rt=rr[Me];return Se(Se({},Ut),{},lt(lt({},vr.axisType,rt),"".concat(vr.axisType,"Ticks"),bo(rt)))},jt),xe=dt[B],Ye=dt["".concat(B,"Ticks")],Qe=E&&E[We]&&E[We].hasStack&&Q_e(q,E[We].stackGroups),fe=So(q.type).indexOf("Bar")>=0,pt=Ob(xe,Ye),ft=[],Le=U&&L_e({barSize:D,stackGroups:E,totalSize:Ike(dt,B)});if(fe){var Ve,cn,gr=gt(De)?M:De,Cr=(Ve=(cn=Ob(xe,Ye,!0))!==null&&cn!==void 0?cn:gr)!==null&&Ve!==void 0?Ve:0;ft=z_e({barGap:L,barCategoryGap:z,bandSize:Cr!==pt?Cr:pt,sizeList:Le[Je],maxBarSize:gr}),Cr!==pt&&(ft=ft.map(function(Ut){return Se(Se({},Ut),{},{position:Se(Se({},Ut.position),{},{offset:Ut.position.offset-Cr/2})})}))}var Hn=q&&q.type&&q.type.getComposedData;Hn&&F.push({props:Se(Se({},Hn(Se(Se({},dt),{},{displayedData:re,props:x,dataKey:ye,item:q,bandSize:pt,barPosition:ft,offset:j,stackedData:Qe,layout:O,dataStartIndex:A,dataEndIndex:C}))),{},lt(lt(lt({key:q.key||"item-".concat(Z)},K,dt[K]),B,dt[B]),"animationId",T)),childIndex:zce(q,x.children),item:q})}),F},p=function(x,w){var _=x.props,E=x.dataStartIndex,j=x.dataEndIndex,T=x.updateId;if(!RO({props:_}))return null;var A=_.children,C=_.layout,D=_.stackOffset,O=_.data,L=_.reverseStackOrder,z=A5(C),M=z.numericAxisName,G=z.cateAxisName,K=as(A,r),B=G_e(O,K,"".concat(M,"Id"),"".concat(G,"Id"),D,L),U=c.reduce(function(he,ye){var De="".concat(ye.axisType,"Map");return Se(Se({},he),{},lt({},De,Pke(_,Se(Se({},ye),{},{graphicalItems:K,stackGroups:ye.axisType===M&&B,dataStartIndex:E,dataEndIndex:j}))))},{}),F=Dke(Se(Se({},U),{},{props:_,graphicalItems:K}),w==null?void 0:w.legendBBox);Object.keys(U).forEach(function(he){U[he]=d(_,U[he],F,he.replace("Map",""),n)});var q=U["".concat(G,"Map")],Z=Nke(q),re=h(_,Se(Se({},U),{},{dataStartIndex:E,dataEndIndex:j,updateId:T,graphicalItems:K,stackGroups:B,offset:F}));return Se(Se({formattedGraphicalItems:re,graphicalItems:K,offset:F,stackGroups:B},Z),U)},m=function(b){function x(w){var _,E,j;return fke(this,x),j=mke(this,x,[w]),lt(j,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),lt(j,"accessibilityManager",new ZNe),lt(j,"handleLegendBBoxUpdate",function(T){if(T){var A=j.state,C=A.dataStartIndex,D=A.dataEndIndex,O=A.updateId;j.setState(Se({legendBBox:T},p({props:j.props,dataStartIndex:C,dataEndIndex:D,updateId:O},Se(Se({},j.state),{},{legendBBox:T}))))}}),lt(j,"handleReceiveSyncEvent",function(T,A,C){if(j.props.syncId===T){if(C===j.eventEmitterSymbol&&typeof j.props.syncMethod!="function")return;j.applySyncEvent(A)}}),lt(j,"handleBrushChange",function(T){var A=T.startIndex,C=T.endIndex;if(A!==j.state.dataStartIndex||C!==j.state.dataEndIndex){var D=j.state.updateId;j.setState(function(){return Se({dataStartIndex:A,dataEndIndex:C},p({props:j.props,dataStartIndex:A,dataEndIndex:C,updateId:D},j.state))}),j.triggerSyncEvent({dataStartIndex:A,dataEndIndex:C})}}),lt(j,"handleMouseEnter",function(T){var A=j.getMouseInfo(T);if(A){var C=Se(Se({},A),{},{isTooltipActive:!0});j.setState(C),j.triggerSyncEvent(C);var D=j.props.onMouseEnter;ut(D)&&D(C,T)}}),lt(j,"triggeredAfterMouseMove",function(T){var A=j.getMouseInfo(T),C=A?Se(Se({},A),{},{isTooltipActive:!0}):{isTooltipActive:!1};j.setState(C),j.triggerSyncEvent(C);var D=j.props.onMouseMove;ut(D)&&D(C,T)}),lt(j,"handleItemMouseEnter",function(T){j.setState(function(){return{isTooltipActive:!0,activeItem:T,activePayload:T.tooltipPayload,activeCoordinate:T.tooltipPosition||{x:T.cx,y:T.cy}}})}),lt(j,"handleItemMouseLeave",function(){j.setState(function(){return{isTooltipActive:!1}})}),lt(j,"handleMouseMove",function(T){T.persist(),j.throttleTriggeredAfterMouseMove(T)}),lt(j,"handleMouseLeave",function(T){j.throttleTriggeredAfterMouseMove.cancel();var A={isTooltipActive:!1};j.setState(A),j.triggerSyncEvent(A);var C=j.props.onMouseLeave;ut(C)&&C(A,T)}),lt(j,"handleOuterEvent",function(T){var A=Lce(T),C=ss(j.props,"".concat(A));if(A&&ut(C)){var D,O;/.*touch.*/i.test(A)?O=j.getMouseInfo(T.changedTouches[0]):O=j.getMouseInfo(T),C((D=O)!==null&&D!==void 0?D:{},T)}}),lt(j,"handleClick",function(T){var A=j.getMouseInfo(T);if(A){var C=Se(Se({},A),{},{isTooltipActive:!0});j.setState(C),j.triggerSyncEvent(C);var D=j.props.onClick;ut(D)&&D(C,T)}}),lt(j,"handleMouseDown",function(T){var A=j.props.onMouseDown;if(ut(A)){var C=j.getMouseInfo(T);A(C,T)}}),lt(j,"handleMouseUp",function(T){var A=j.props.onMouseUp;if(ut(A)){var C=j.getMouseInfo(T);A(C,T)}}),lt(j,"handleTouchMove",function(T){T.changedTouches!=null&&T.changedTouches.length>0&&j.throttleTriggeredAfterMouseMove(T.changedTouches[0])}),lt(j,"handleTouchStart",function(T){T.changedTouches!=null&&T.changedTouches.length>0&&j.handleMouseDown(T.changedTouches[0])}),lt(j,"handleTouchEnd",function(T){T.changedTouches!=null&&T.changedTouches.length>0&&j.handleMouseUp(T.changedTouches[0])}),lt(j,"handleDoubleClick",function(T){var A=j.props.onDoubleClick;if(ut(A)){var C=j.getMouseInfo(T);A(C,T)}}),lt(j,"handleContextMenu",function(T){var A=j.props.onContextMenu;if(ut(A)){var C=j.getMouseInfo(T);A(C,T)}}),lt(j,"triggerSyncEvent",function(T){j.props.syncId!==void 0&&Z_.emit(J_,j.props.syncId,T,j.eventEmitterSymbol)}),lt(j,"applySyncEvent",function(T){var A=j.props,C=A.layout,D=A.syncMethod,O=j.state.updateId,L=T.dataStartIndex,z=T.dataEndIndex;if(T.dataStartIndex!==void 0||T.dataEndIndex!==void 0)j.setState(Se({dataStartIndex:L,dataEndIndex:z},p({props:j.props,dataStartIndex:L,dataEndIndex:z,updateId:O},j.state)));else if(T.activeTooltipIndex!==void 0){var M=T.chartX,G=T.chartY,K=T.activeTooltipIndex,B=j.state,U=B.offset,F=B.tooltipTicks;if(!U)return;if(typeof D=="function")K=D(F,T);else if(D==="value"){K=-1;for(var q=0;q<F.length;q++)if(F[q].value===T.activeLabel){K=q;break}}var Z=Se(Se({},U),{},{x:U.left,y:U.top}),re=Math.min(M,Z.x+Z.width),he=Math.min(G,Z.y+Z.height),ye=F[K]&&F[K].value,De=$2(j.state,j.props.data,K),We=F[K]?{x:C==="horizontal"?F[K].coordinate:re,y:C==="horizontal"?he:F[K].coordinate}:X7;j.setState(Se(Se({},T),{},{activeLabel:ye,activeCoordinate:We,activePayload:De,activeTooltipIndex:K}))}else j.setState(T)}),lt(j,"renderCursor",function(T){var A,C=j.state,D=C.isTooltipActive,O=C.activeCoordinate,L=C.activePayload,z=C.offset,M=C.activeTooltipIndex,G=C.tooltipAxisBandSize,K=j.getTooltipEventType(),B=(A=T.props.active)!==null&&A!==void 0?A:D,U=j.props.layout,F=T.key||"_recharts-cursor";return Y.createElement(ske,{key:F,activeCoordinate:O,activePayload:L,activeTooltipIndex:M,chartName:n,element:T,isActive:B,layout:U,offset:z,tooltipAxisBandSize:G,tooltipEventType:K})}),lt(j,"renderPolarAxis",function(T,A,C){var D=ss(T,"type.axisType"),O=ss(j.state,"".concat(D,"Map")),L=T.type.defaultProps,z=L!==void 0?Se(Se({},L),T.props):T.props,M=O&&O[z["".concat(D,"Id")]];return P.cloneElement(T,Se(Se({},M),{},{className:St(D,M.className),key:T.key||"".concat(A,"-").concat(C),ticks:bo(M,!0)}))}),lt(j,"renderPolarGrid",function(T){var A=T.props,C=A.radialLines,D=A.polarAngles,O=A.polarRadius,L=j.state,z=L.radiusAxisMap,M=L.angleAxisMap,G=vl(z),K=vl(M),B=K.cx,U=K.cy,F=K.innerRadius,q=K.outerRadius;return P.cloneElement(T,{polarAngles:Array.isArray(D)?D:bo(K,!0).map(function(Z){return Z.coordinate}),polarRadius:Array.isArray(O)?O:bo(G,!0).map(function(Z){return Z.coordinate}),cx:B,cy:U,innerRadius:F,outerRadius:q,key:T.key||"polar-grid",radialLines:C})}),lt(j,"renderLegend",function(){var T=j.state.formattedGraphicalItems,A=j.props,C=A.children,D=A.width,O=A.height,L=j.props.margin||{},z=D-(L.left||0)-(L.right||0),M=E9({children:C,formattedGraphicalItems:T,legendWidth:z,legendContent:u});if(!M)return null;var G=M.item,K=x5(M,ake);return P.cloneElement(G,Se(Se({},K),{},{chartWidth:D,chartHeight:O,margin:L,onBBoxUpdate:j.handleLegendBBoxUpdate}))}),lt(j,"renderTooltip",function(){var T,A=j.props,C=A.children,D=A.accessibilityLayer,O=Xi(C,tn);if(!O)return null;var L=j.state,z=L.isTooltipActive,M=L.activeCoordinate,G=L.activePayload,K=L.activeLabel,B=L.offset,U=(T=O.props.active)!==null&&T!==void 0?T:z;return P.cloneElement(O,{viewBox:Se(Se({},B),{},{x:B.left,y:B.top}),active:U,label:K,payload:U?G:[],coordinate:M,accessibilityLayer:D})}),lt(j,"renderBrush",function(T){var A=j.props,C=A.margin,D=A.data,O=j.state,L=O.offset,z=O.dataStartIndex,M=O.dataEndIndex,G=O.updateId;return P.cloneElement(T,{key:T.key||"_recharts-brush",onChange:by(j.handleBrushChange,T.props.onChange),data:D,x:Ce(T.props.x)?T.props.x:L.left,y:Ce(T.props.y)?T.props.y:L.top+L.height+L.brushBottom-(C.bottom||0),width:Ce(T.props.width)?T.props.width:L.width,startIndex:z,endIndex:M,updateId:"brush-".concat(G)})}),lt(j,"renderReferenceElement",function(T,A,C){if(!T)return null;var D=j,O=D.clipPathId,L=j.state,z=L.xAxisMap,M=L.yAxisMap,G=L.offset,K=T.type.defaultProps||{},B=T.props,U=B.xAxisId,F=U===void 0?K.xAxisId:U,q=B.yAxisId,Z=q===void 0?K.yAxisId:q;return P.cloneElement(T,{key:T.key||"".concat(A,"-").concat(C),xAxis:z[F],yAxis:M[Z],viewBox:{x:G.left,y:G.top,width:G.width,height:G.height},clipPathId:O})}),lt(j,"renderActivePoints",function(T){var A=T.item,C=T.activePoint,D=T.basePoint,O=T.childIndex,L=T.isRange,z=[],M=A.props.key,G=A.item.type.defaultProps!==void 0?Se(Se({},A.item.type.defaultProps),A.item.props):A.item.props,K=G.activeDot,B=G.dataKey,U=Se(Se({index:O,dataKey:B,cx:C.x,cy:C.y,r:4,fill:CP(A.item),strokeWidth:2,stroke:"#fff",payload:C.payload,value:C.value},et(K,!1)),ab(K));return z.push(x.renderActiveDot(K,U,"".concat(M,"-activePoint-").concat(O))),D?z.push(x.renderActiveDot(K,Se(Se({},U),{},{cx:D.x,cy:D.y}),"".concat(M,"-basePoint-").concat(O))):L&&z.push(null),z}),lt(j,"renderGraphicChild",function(T,A,C){var D=j.filterFormatItem(T,A,C);if(!D)return null;var O=j.getTooltipEventType(),L=j.state,z=L.isTooltipActive,M=L.tooltipAxis,G=L.activeTooltipIndex,K=L.activeLabel,B=j.props.children,U=Xi(B,tn),F=D.props,q=F.points,Z=F.isRange,re=F.baseLine,he=D.item.type.defaultProps!==void 0?Se(Se({},D.item.type.defaultProps),D.item.props):D.item.props,ye=he.activeDot,De=he.hide,We=he.activeBar,Je=he.activeShape,jt=!!(!De&&z&&U&&(ye||We||Je)),dt={};O!=="axis"&&U&&U.props.trigger==="click"?dt={onClick:by(j.handleItemMouseEnter,T.props.onClick)}:O!=="axis"&&(dt={onMouseLeave:by(j.handleItemMouseLeave,T.props.onMouseLeave),onMouseEnter:by(j.handleItemMouseEnter,T.props.onMouseEnter)});var xe=P.cloneElement(T,Se(Se({},D.props),dt));function Ye(vr){return typeof M.dataKey=="function"?M.dataKey(vr.payload):null}if(jt)if(G>=0){var Qe,fe;if(M.dataKey&&!M.allowDuplicatedCategory){var pt=typeof M.dataKey=="function"?Ye:"payload.".concat(M.dataKey.toString());Qe=sb(q,pt,K),fe=Z&&re&&sb(re,pt,K)}else Qe=q==null?void 0:q[G],fe=Z&&re&&re[G];if(Je||We){var ft=T.props.activeIndex!==void 0?T.props.activeIndex:G;return[P.cloneElement(T,Se(Se(Se({},D.props),dt),{},{activeIndex:ft})),null,null]}if(!gt(Qe))return[xe].concat(bh(j.renderActivePoints({item:D,activePoint:Qe,basePoint:fe,childIndex:G,isRange:Z})))}else{var Le,Ve=(Le=j.getItemByXY(j.state.activeCoordinate))!==null&&Le!==void 0?Le:{graphicalItem:xe},cn=Ve.graphicalItem,gr=cn.item,Cr=gr===void 0?T:gr,Hn=cn.childIndex,Ut=Se(Se(Se({},D.props),dt),{},{activeIndex:Hn});return[P.cloneElement(Cr,Ut),null,null]}return Z?[xe,null,null]:[xe,null]}),lt(j,"renderCustomized",function(T,A,C){return P.cloneElement(T,Se(Se({key:"recharts-customized-".concat(C)},j.props),j.state))}),lt(j,"renderMap",{CartesianGrid:{handler:Ay,once:!0},ReferenceArea:{handler:j.renderReferenceElement},ReferenceLine:{handler:Ay},ReferenceDot:{handler:j.renderReferenceElement},XAxis:{handler:Ay},YAxis:{handler:Ay},Brush:{handler:j.renderBrush,once:!0},Bar:{handler:j.renderGraphicChild},Line:{handler:j.renderGraphicChild},Area:{handler:j.renderGraphicChild},Radar:{handler:j.renderGraphicChild},RadialBar:{handler:j.renderGraphicChild},Scatter:{handler:j.renderGraphicChild},Pie:{handler:j.renderGraphicChild},Funnel:{handler:j.renderGraphicChild},Tooltip:{handler:j.renderCursor,once:!0},PolarGrid:{handler:j.renderPolarGrid,once:!0},PolarAngleAxis:{handler:j.renderPolarAxis},PolarRadiusAxis:{handler:j.renderPolarAxis},Customized:{handler:j.renderCustomized}}),j.clipPathId="".concat((_=w.id)!==null&&_!==void 0?_:Zu("recharts"),"-clip"),j.throttleTriggeredAfterMouseMove=AB(j.triggeredAfterMouseMove,(E=w.throttleDelay)!==null&&E!==void 0?E:1e3/60),j.state={},j}return yke(x,b),pke(x,[{key:"componentDidMount",value:function(){var _,E;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var _=this.props,E=_.children,j=_.data,T=_.height,A=_.layout,C=Xi(E,tn);if(C){var D=C.props.defaultIndex;if(!(typeof D!="number"||D<0||D>this.state.tooltipTicks.length-1)){var O=this.state.tooltipTicks[D]&&this.state.tooltipTicks[D].value,L=$2(this.state,j,D,O),z=this.state.tooltipTicks[D].coordinate,M=(this.state.offset.top+T)/2,G=A==="horizontal",K=G?{x:z,y:M}:{y:z,x:M},B=this.state.formattedGraphicalItems.find(function(F){var q=F.item;return q.type.name==="Scatter"});B&&(K=Se(Se({},K),B.props.points[D].tooltipPosition),L=B.props.points[D].tooltipPayload);var U={activeTooltipIndex:D,isTooltipActive:!0,activeLabel:O,activePayload:L,activeCoordinate:K};this.setState(U),this.renderCursor(C),this.accessibilityManager.setIndex(D)}}}},{key:"getSnapshotBeforeUpdate",value:function(_,E){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==E.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==_.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==_.margin){var j,T;this.accessibilityManager.setDetails({offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(T=this.props.margin.top)!==null&&T!==void 0?T:0}})}return null}},{key:"componentDidUpdate",value:function(_){hE([Xi(_.children,tn)],[Xi(this.props.children,tn)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var _=Xi(this.props.children,tn);if(_&&typeof _.props.shared=="boolean"){var E=_.props.shared?"axis":"item";return o.indexOf(E)>=0?E:s}return s}},{key:"getMouseInfo",value:function(_){if(!this.container)return null;var E=this.container,j=E.getBoundingClientRect(),T=ube(j),A={chartX:Math.round(_.pageX-T.left),chartY:Math.round(_.pageY-T.top)},C=j.width/E.offsetWidth||1,D=this.inRange(A.chartX,A.chartY,C);if(!D)return null;var O=this.state,L=O.xAxisMap,z=O.yAxisMap,M=this.getTooltipEventType(),G=_5(this.state,this.props.data,this.props.layout,D);if(M!=="axis"&&L&&z){var K=vl(L).scale,B=vl(z).scale,U=K&&K.invert?K.invert(A.chartX):null,F=B&&B.invert?B.invert(A.chartY):null;return Se(Se({},A),{},{xValue:U,yValue:F},G)}return G?Se(Se({},A),G):null}},{key:"inRange",value:function(_,E){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,T=this.props.layout,A=_/j,C=E/j;if(T==="horizontal"||T==="vertical"){var D=this.state.offset,O=A>=D.left&&A<=D.left+D.width&&C>=D.top&&C<=D.top+D.height;return O?{x:A,y:C}:null}var L=this.state,z=L.angleAxisMap,M=L.radiusAxisMap;if(z&&M){var G=vl(z);return HR({x:A,y:C},G)}return null}},{key:"parseEventsOfWrapper",value:function(){var _=this.props.children,E=this.getTooltipEventType(),j=Xi(_,tn),T={};j&&E==="axis"&&(j.props.trigger==="click"?T={onClick:this.handleClick}:T={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var A=ab(this.props,this.handleOuterEvent);return Se(Se({},A),T)}},{key:"addListener",value:function(){Z_.on(J_,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Z_.removeListener(J_,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(_,E,j){for(var T=this.state.formattedGraphicalItems,A=0,C=T.length;A<C;A++){var D=T[A];if(D.item===_||D.props.key===_.key||E===So(D.item.type)&&j===D.childIndex)return D}return null}},{key:"renderClipPath",value:function(){var _=this.clipPathId,E=this.state.offset,j=E.left,T=E.top,A=E.height,C=E.width;return Y.createElement("defs",null,Y.createElement("clipPath",{id:_},Y.createElement("rect",{x:j,y:T,height:A,width:C})))}},{key:"getXScales",value:function(){var _=this.state.xAxisMap;return _?Object.entries(_).reduce(function(E,j){var T=b5(j,2),A=T[0],C=T[1];return Se(Se({},E),{},lt({},A,C.scale))},{}):null}},{key:"getYScales",value:function(){var _=this.state.yAxisMap;return _?Object.entries(_).reduce(function(E,j){var T=b5(j,2),A=T[0],C=T[1];return Se(Se({},E),{},lt({},A,C.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(_){var E;return(E=this.state.xAxisMap)===null||E===void 0||(E=E[_])===null||E===void 0?void 0:E.scale}},{key:"getYScaleByAxisId",value:function(_){var E;return(E=this.state.yAxisMap)===null||E===void 0||(E=E[_])===null||E===void 0?void 0:E.scale}},{key:"getItemByXY",value:function(_){var E=this.state,j=E.formattedGraphicalItems,T=E.activeItem;if(j&&j.length)for(var A=0,C=j.length;A<C;A++){var D=j[A],O=D.props,L=D.item,z=L.type.defaultProps!==void 0?Se(Se({},L.type.defaultProps),L.props):L.props,M=So(L.type);if(M==="Bar"){var G=(O.data||[]).find(function(F){return KEe(_,F)});if(G)return{graphicalItem:D,payload:G}}else if(M==="RadialBar"){var K=(O.data||[]).find(function(F){return HR(_,F)});if(K)return{graphicalItem:D,payload:K}}else if(Qw(D,T)||Xw(D,T)||Lg(D,T)){var B=Mje({graphicalItem:D,activeTooltipItem:T,itemData:z.data}),U=z.activeIndex===void 0?B:z.activeIndex;return{graphicalItem:Se(Se({},D),{},{childIndex:U}),payload:Lg(D,T)?z.data[B]:D.props.data[B]}}}return null}},{key:"render",value:function(){var _=this;if(!RO(this))return null;var E=this.props,j=E.children,T=E.className,A=E.width,C=E.height,D=E.style,O=E.compact,L=E.title,z=E.desc,M=x5(E,oke),G=et(M,!1);if(O)return Y.createElement(J4,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Y.createElement(mE,lf({},G,{width:A,height:C,title:L,desc:z}),this.renderClipPath(),zO(j,this.renderMap)));if(this.props.accessibilityLayer){var K,B;G.tabIndex=(K=this.props.tabIndex)!==null&&K!==void 0?K:0,G.role=(B=this.props.role)!==null&&B!==void 0?B:"application",G.onKeyDown=function(F){_.accessibilityManager.keyboardEvent(F)},G.onFocus=function(){_.accessibilityManager.focus()}}var U=this.parseEventsOfWrapper();return Y.createElement(J4,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Y.createElement("div",lf({className:St("recharts-wrapper",T),style:Se({position:"relative",cursor:"default",width:A,height:C},D)},U,{ref:function(q){_.container=q}}),Y.createElement(mE,lf({},G,{width:A,height:C,title:L,desc:z,style:Ake}),this.renderClipPath(),zO(j,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(P.Component);lt(m,"displayName",n),lt(m,"defaultProps",Se({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),lt(m,"getDerivedStateFromProps",function(b,x){var w=b.dataKey,_=b.data,E=b.children,j=b.width,T=b.height,A=b.layout,C=b.stackOffset,D=b.margin,O=x.dataStartIndex,L=x.dataEndIndex;if(x.updateId===void 0){var z=S5(b);return Se(Se(Se({},z),{},{updateId:0},p(Se(Se({props:b},z),{},{updateId:0}),x)),{},{prevDataKey:w,prevData:_,prevWidth:j,prevHeight:T,prevLayout:A,prevStackOffset:C,prevMargin:D,prevChildren:E})}if(w!==x.prevDataKey||_!==x.prevData||j!==x.prevWidth||T!==x.prevHeight||A!==x.prevLayout||C!==x.prevStackOffset||!bf(D,x.prevMargin)){var M=S5(b),G={chartX:x.chartX,chartY:x.chartY,isTooltipActive:x.isTooltipActive},K=Se(Se({},_5(x,_,A)),{},{updateId:x.updateId+1}),B=Se(Se(Se({},M),G),K);return Se(Se(Se({},B),p(Se({props:b},B),x)),{},{prevDataKey:w,prevData:_,prevWidth:j,prevHeight:T,prevLayout:A,prevStackOffset:C,prevMargin:D,prevChildren:E})}if(!hE(E,x.prevChildren)){var U,F,q,Z,re=Xi(E,lh),he=re&&(U=(F=re.props)===null||F===void 0?void 0:F.startIndex)!==null&&U!==void 0?U:O,ye=re&&(q=(Z=re.props)===null||Z===void 0?void 0:Z.endIndex)!==null&&q!==void 0?q:L,De=he!==O||ye!==L,We=!gt(_),Je=We&&!De?x.updateId:x.updateId+1;return Se(Se({updateId:Je},p(Se(Se({props:b},x),{},{updateId:Je,dataStartIndex:he,dataEndIndex:ye}),x)),{},{prevChildren:E,dataStartIndex:he,dataEndIndex:ye})}return null}),lt(m,"renderActiveDot",function(b,x,w){var _;return P.isValidElement(b)?_=P.cloneElement(b,x):ut(b)?_=b(x):_=Y.createElement(Av,x),Y.createElement(Tt,{className:"recharts-active-dot",key:w},_)});var g=P.forwardRef(function(x,w){return Y.createElement(m,lf({},x,{ref:w}))});return g.displayName=m.displayName,g},J7=s1({chartName:"LineChart",GraphicalChild:zu,axisComponents:[{axisType:"xAxis",AxisComp:Un},{axisType:"yAxis",AxisComp:er}],formatAxisMap:PP}),Mi=s1({chartName:"BarChart",GraphicalChild:hr,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Un},{axisType:"yAxis",AxisComp:er}],formatAxisMap:PP}),F2=s1({chartName:"PieChart",GraphicalChild:la,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Yw},{axisType:"radiusAxis",AxisComp:Kw}],formatAxisMap:aSe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),Oke=s1({chartName:"AreaChart",GraphicalChild:cc,axisComponents:[{axisType:"xAxis",AxisComp:Un},{axisType:"yAxis",AxisComp:er}],formatAxisMap:PP});const en={PREGNANT:{key:"PREGNANT",Icon:Ua,color:"text-pink-400",label:"Preñada"},IN_SERVICE_CONFIRMED:{key:"IN_SERVICE_CONFIRMED",Icon:wee,color:"text-pink-500",label:"Servicio Visto"},IN_SERVICE:{key:"IN_SERVICE",Icon:qC,color:"text-red-400",label:"En Monta"},EMPTY:{key:"EMPTY",Icon:uee,color:"text-zinc-500",label:"Vacía"},SIRE_IN_SERVICE:{key:"SIRE_IN_SERVICE",Icon:Oee,color:"text-blue-400",label:"Reproductor Activo"},MILKING:{key:"MILKING",Icon:qee,color:"text-blue-300",label:"En Ordeño"},DRYING_OFF:{key:"DRYING_OFF",Icon:Yu,color:"text-yellow-400",label:"Secando"},DRY:{key:"DRY",Icon:fa,color:"text-zinc-400",label:"Seca"}},Va=t=>{if(!t||t==="N/A")return-1;const e=new Date(t+"T00:00:00Z"),n=new Date,r=new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()));if(isNaN(e.getTime()))return-1;const i=r.getTime()-e.getTime(),s=Math.floor(i/(1e3*60*60*24));return Math.max(0,s)},ma=t=>{const e=Va(t);if(e<0)return"N/A";if(e<=60)return`${e} día${e!==1?"s":""}`;const n=30.4375,r=Math.floor(e/n);if(r<12){const a=Math.round(e%n);return`${r} mes${r!==1?"es":""}${a>0?` y ${a} día${a!==1?"s":""}`:""}`}const i=Math.floor(r/12),s=Math.round(r%12);return`${i} año${i!==1?"s":""}${s>0?` y ${s} mes${s!==1?"es":""}`:""}`},uc=(t,e)=>{const n=Va(t.birthDate);return n<0?"Indefinido":t.sex==="Hembra"?t.weaningDate||n>60?e.some(i=>i.goatId===t.id)?"Cabra":"Cabritona":"Cabrita":n>=365?"Macho Cabrío":t.weaningDate||n>60?"Macho de Levante":"Cabrito"},nd=(t,e)=>{const n=new Date(t+"T00:00:00Z"),r=new Date(e+"T00:00:00Z");if(isNaN(n.getTime())||isNaN(r.getTime()))return 0;const i=r.getTime()-n.getTime(),s=Math.floor(i/(1e3*60*60*24));return Math.max(0,s)},Mke=(t,e)=>{const r=1+(e-50)/(e+50),i=t*Math.max(.5,r);return parseFloat(i.toFixed(2))},zP=(t,e)=>{if(e.length===0)return{overall:null,recent:null};const n=[...e].sort((a,o)=>new Date(a.date).getTime()-new Date(o.date).getTime()),r=n[n.length-1];let i=null;if(t&&t>0){const a=Va(r.date)-Va(new Date().toISOString().split("T")[0])+Va(new Date(r.date).toISOString().split("T")[0]);a>0&&(i=(r.kg-t)/a)}let s=null;if(n.length>=2){const a=r,o=n[n.length-2],c=(new Date(a.date).getTime()-new Date(o.date).getTime())/(1e3*60*60*24);c>0&&(s=(a.kg-o.kg)/c)}return{overall:i,recent:s}},eU=(t,e,n)=>{const r=t.map(d=>({age:(new Date(d.date).getTime()-new Date(e).getTime())/864e5,kg:d.kg})).sort((d,f)=>d.age-f.age);if(r.length<1)return null;const i=r.filter(d=>d.age<=n).pop(),s=r.find(d=>d.age>=n);if(i&&i.age===n)return i.kg;if(s&&s.age===n)return s.kg;if(!i||!s)return null;if(i.age===s.age)return i.kg;const a=s.age-i.age;if(a===0)return i.kg;const o=s.kg-i.kg,c=n-i.age,u=i.kg+c/a*o;return parseFloat(u.toFixed(2))},Rke=(t,e,n)=>{if(e===0)return 100;const r=t/e*100,i=1+(180-Math.min(n,180))/180*.1;return Math.round(r*i)},Lke=t=>{if(!t.weaningWeight||!t.weaningDate||!t.birthWeight||!t.birthDate)return null;const e=(new Date(t.weaningDate).getTime()-new Date(t.birthDate).getTime())/(1e3*60*60*24);if(e<=0)return null;const n=(t.weaningWeight-t.birthWeight)/e,r=t.birthWeight+n*60;return parseFloat(r.toFixed(2))},zke=(t,e)=>{const n=e.filter(r=>r.animalId===t.id);return eU(n,t.birthDate,210)},tU=(t,e,n,r,i)=>{const s=[];if(!t)return[];if(t.sex==="Hembra"){const o=e.filter(c=>c.goatId===t.id&&c.status!=="finalizada").sort((c,u)=>new Date(u.parturitionDate).getTime()-new Date(c.parturitionDate).getTime())[0];o&&(o.status==="activa"?s.push(en.MILKING):o.status==="en-secado"?s.push(en.DRYING_OFF):o.status==="seca"&&s.push(en.DRY))}if(t.reproductiveStatus==="Preñada"?s.push(en.PREGNANT):t.reproductiveStatus==="En Servicio"?n.some(c=>c.femaleId===t.id&&c.sireLotId===t.sireLotId)?s.push(en.IN_SERVICE_CONFIRMED):s.push(en.IN_SERVICE):(t.reproductiveStatus==="Vacía"||t.reproductiveStatus==="Post-Parto")&&s.push(en.EMPTY),t.sex==="Macho"){const o=i.filter(d=>d.status==="Activo"),c=new Set(o.map(d=>d.id));r.some(d=>d.sireId===t.id&&c.has(d.seasonId))&&s.push(en.SIRE_IN_SERVICE)}return Array.from(new Set(s.map(o=>o.key))).map(o=>en[o])},$ke=()=>{const{animals:t,parturitions:e,bodyWeighings:n,sireLots:r,breedingSeasons:i,weighings:s}=Ze();return P.useMemo(()=>{const o=t.filter(F=>!F.isReference),c={cabras:[],cabritonas:[],cabritas:[],cabritos:[],machosLevante:[],reproductores:[]};o.forEach(F=>{switch(uc(F,e)){case"Cabra":c.cabras.push(F);break;case"Cabritona":c.cabritonas.push(F);break;case"Cabrita":c.cabritas.push(F);break;case"Cabrito":c.cabritos.push(F);break;case"Macho de Levante":c.machosLevante.push(F);break;case"Macho Cabrío":c.reproductores.push(F);break}});const u=c.cabras.length+c.cabritonas.length+c.cabritas.length,d=e.filter(F=>F.status==="activa"&&c.cabras.some(q=>q.id===F.goatId)).length,f=c.cabras.length-d,h=c.cabras.filter(F=>F.reproductiveStatus==="Preñada").length,p=c.cabras.filter(F=>F.reproductiveStatus==="Vacía"||F.reproductiveStatus==="Post-Parto"||F.reproductiveStatus==="Destetada").length,m=c.cabras.filter(F=>F.reproductiveStatus==="En Servicio").length,g=[{name:"Preñadas",value:h,color:"#34C759"},{name:"Vacías",value:p,color:"#FF9500"},{name:"En Monta",value:m,color:"#007AFF"}].filter(F=>F.value>0),b=new Date().getFullYear(),x=[];for(let F=0;F<2;F++){const q=new Date(b,F*6,1),Z=new Date(b,(F+1)*6,0),re=s.filter(We=>{const Je=new Date(We.date+"T00:00:00");return Je>=q&&Je<=Z}),he=new Set(re.map(We=>We.goatId)),ye=c.cabras.filter(We=>!!e.find(jt=>jt.goatId===We.id&&new Date(jt.parturitionDate)<=Z)).length,De=ye>0?he.size/ye*100:0;x.push({name:`Semestre ${F+1}`,"En Ordeño (%)":parseFloat(De.toFixed(1))})}const w=c.cabritonas.filter(F=>F.reproductiveStatus==="En Servicio").length,_=c.cabritonas.filter(F=>{const q=n.filter(Z=>Z.animalId===F.id).sort((Z,re)=>new Date(re.date).getTime()-new Date(Z.date).getTime())[0];return q?q.kg>=28.5&&q.kg<30||q.kg>=30&&F.reproductiveStatus!=="En Servicio"&&F.reproductiveStatus!=="Preñada":!1}).length,E=c.cabritonas.length-w-h,j=c.cabritas.length,T=c.cabritos.length,A=j+T,C=[{name:"Hembras",value:j,color:"#FF2D55"},{name:"Machos",value:T,color:"#007AFF"}].filter(F=>F.value>0),D=[...c.cabritas,...c.cabritos].map(F=>{const q=Va(F.birthDate),Z=n.filter(jt=>jt.animalId===F.id).sort((jt,dt)=>new Date(dt.date).getTime()-new Date(jt.date).getTime())[0],re=(Z==null?void 0:Z.kg)||0,he=q>=52,ye=re>=9.5,De=q>=45&&q<52,We=q>=40&&q<45||re>=8.5&&re<9.5;let Je="Amamantando";return he&&ye?Je="Listo para Destete":De?Je="En Fase Destete":We&&(Je="Próximo a Destete"),{id:F.id,status:Je}}),O=D.filter(F=>F.status==="En Fase Destete").length,L=D.filter(F=>F.status==="Próximo a Destete").length,z=D.filter(F=>F.status==="Listo para Destete").length,M=D.filter(F=>F.status==="Amamantando").length,G=[{name:"Listo",value:z,color:"#34C759"},{name:"En Fase",value:O,color:"#FFD60A"},{name:"Próximo",value:L,color:"#FF9F0A"},{name:"Amamantando",value:M,color:"#007AFF"}].filter(F=>F.value>0),K=new Set(i.filter(F=>F.status==="Activo").map(F=>F.id)),B=r.filter(F=>K.has(F.seasonId)),U=c.reproductores.filter(F=>B.some(q=>q.sireId===F.id)).map(F=>{const q=B.find(re=>re.sireId===F.id),Z=t.filter(re=>re.sireLotId===q.id).length;return{...F,lotId:q.id,assignedFemales:Z}});return{totalPoblacion:o.length,totalVientres:u,cabras:{total:c.cabras.length,enProduccion:d,secas:f,preñadas:h,vacias:p,enMonta:m,reproductiveStatusData:g,milkingPercentageData:x},cabritonas:{total:c.cabritonas.length,enMonta:w,disponibles:E,proximasAServicio:_},crias:{total:A,hembras:j,machos:T,criasEnMaternidadData:C,enFaseDestete:O,proximasADestete:L,listasParaDestete:z,desteteStatusData:G},reproductores:{total:c.reproductores.length,activos:U}}},[t,e,n,r,i,s])},Ey=({title:t,value:e,icon:n,onClick:r})=>l.jsxs("button",{onClick:r,className:"bg-dashboard-surface backdrop-blur-xl rounded-2xl p-4 border border-brand-border/50 text-left hover:border-brand-orange/60 hover:bg-dashboard-surface-hover transition-all duration-200 w-full",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-sm font-medium text-brand-light-gray uppercase tracking-wider",children:t}),l.jsx(n,{className:"w-6 h-6 text-brand-orange"})]}),l.jsx("p",{className:"text-4xl font-semibold text-white mt-4",children:e})]}),ol=({title:t,children:e})=>l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-brand-light-gray mb-3 px-1",children:t}),l.jsx("div",{className:"bg-brand-glass backdrop-blur-lg rounded-xl p-4 border border-brand-border/50",children:e})]}),ll=({label:t,value:e,unit:n,subLabel:r,icon:i})=>l.jsxs("div",{className:"flex justify-between items-center py-2.5",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[i&&l.jsx(i,{className:"w-5 h-5 text-zinc-400"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-base text-white",children:t}),r&&l.jsx("p",{className:"text-xs text-brand-medium-gray mt-0.5",children:r})]})]}),l.jsxs("div",{className:"flex items-baseline gap-1.5",children:[l.jsx("p",{className:"text-xl font-semibold text-white",children:e}),l.jsx("p",{className:"text-sm text-brand-medium-gray",children:n})]})]}),tS=({active:t,payload:e,label:n})=>t&&e&&e.length?l.jsxs("div",{className:"p-2 bg-zinc-800/80 backdrop-blur-md rounded-lg border border-zinc-700 text-white text-sm",children:[l.jsx("p",{className:"font-semibold mb-1",children:n||e[0].name}),e.map((r,i)=>l.jsxs("p",{style:{color:r.color},children:[r.name,": ",l.jsxs("span",{className:"font-bold",children:[r.value,r.unit]})]},`item-${i}`))]}):null;function E5({navigateTo:t}){const[e,n]=P.useState("physical"),[r,i]=P.useState(!1),[s,a]=P.useState(!1),[o,c]=P.useState(!1),[u,d]=P.useState(!1),[f,h]=P.useState(!1),p=$ke();return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-lg mx-auto space-y-6 pb-24 pt-4",children:[l.jsxs("div",{className:"text-center mb-6 px-4",children:[l.jsxs("p",{className:"text-base text-zinc-300 font-light",children:["Población Total del Rebaño: ",l.jsx("span",{className:"font-bold text-white",children:p.totalPoblacion})]}),l.jsxs("p",{className:"text-sm text-zinc-400",children:["Total de Vientres: ",l.jsx("span",{className:"font-bold text-zinc-200",children:p.totalVientres})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 px-4",children:[l.jsx(Ey,{title:"Cabras",value:p.cabras.total,icon:rw,onClick:()=>a(!0)}),l.jsx(Ey,{title:"Cabritonas",value:p.cabritonas.total,icon:Ka,onClick:()=>c(!0)}),l.jsx(Ey,{title:"Crías",value:p.crias.total,icon:Ua,onClick:()=>d(!0)}),l.jsx(Ey,{title:"Reproductores",value:p.reproductores.total,icon:pee,onClick:()=>h(!0)})]}),l.jsx("div",{className:"pt-4 px-4",children:l.jsxs("div",{className:"relative bg-brand-glass rounded-xl p-1 border border-brand-border flex items-center",children:[l.jsxs("button",{onClick:()=>n("physical"),className:`w-1/2 py-2 rounded-lg transition-colors flex items-center justify-center gap-2 ${e==="physical"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:[l.jsx(Uf,{size:16})," ",l.jsx("span",{className:"text-sm font-semibold",children:"Lotes Físicos"}),l.jsx("span",{onClick:m=>{m.stopPropagation(),i(!0)},className:"ml-2 p-1 rounded-full hover:bg-brand-orange/50",children:l.jsx(Er,{size:18})})]}),l.jsxs("button",{onClick:()=>n("breeding"),className:`w-1/2 py-2 text-sm font-semibold rounded-lg transition-colors flex items-center justify-center gap-2 ${e==="breeding"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:[l.jsx(sw,{size:16})," Lotes de Monta"]})]})}),l.jsxs("div",{className:"pt-0",children:[e==="physical"&&l.jsx(Bse,{navigateTo:t}),e==="breeding"&&l.jsx(Kse,{navigateTo:t})]})]}),l.jsx(nt,{isOpen:s,onClose:()=>a(!1),title:"Análisis de Hembras Adultas",children:l.jsxs("div",{className:"space-y-5",children:[l.jsxs(ol,{title:"Estado Productivo y Reproductivo",children:[l.jsx(ll,{icon:bee,label:"En Producción",unit:"cabras",value:p.cabras.enProduccion,subLabel:`${(p.cabras.total>0?p.cabras.enProduccion/p.cabras.total*100:0).toFixed(0)}% del total`}),l.jsx("div",{className:"border-b border-brand-border/50 mx-2"}),l.jsx(ll,{icon:fa,label:"Secas",unit:"cabras",value:p.cabras.secas,subLabel:`${(p.cabras.total>0?p.cabras.secas/p.cabras.total*100:0).toFixed(0)}% del total`}),l.jsx("div",{className:"border-b border-brand-border/50 mx-2"}),l.jsx(ll,{icon:nI,label:"En Monta Activa",unit:"cabras",value:p.cabras.enMonta})]}),l.jsx(ol,{title:"Estado Reproductivo (Vientres)",children:l.jsx("div",{className:"w-full h-48",children:l.jsx(fr,{width:"100%",height:"100%",children:l.jsxs(F2,{children:[l.jsx(la,{data:p.cabras.reproductiveStatusData,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:45,outerRadius:65,paddingAngle:3,cornerRadius:5,children:p.cabras.reproductiveStatusData.map(m=>l.jsx(aa,{fill:m.color,stroke:"none"},`cell-${m.name}`))}),l.jsx(tn,{content:l.jsx(tS,{})}),l.jsx(na,{iconSize:10,wrapperStyle:{fontSize:"12px",paddingTop:"10px"}})]})})})}),l.jsx(ol,{title:"Rendimiento Anual en Ordeño",children:l.jsx("div",{className:"w-full h-48",children:l.jsx(fr,{width:"100%",height:"100%",children:l.jsxs(Mi,{data:p.cabras.milkingPercentageData,margin:{top:15,right:10,left:-20,bottom:0},children:[l.jsx(Un,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},axisLine:!1,tickLine:!1}),l.jsx(er,{tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},unit:"%",axisLine:!1,tickLine:!1}),l.jsx(tn,{content:l.jsx(tS,{unit:"%"}),cursor:{fill:"rgba(255, 255, 255, 0.08)"}}),l.jsx(hr,{dataKey:"En Ordeño (%)",fill:"#FF9500",radius:[8,8,0,0],animationDuration:500})]})})})})]})}),l.jsx(nt,{isOpen:o,onClose:()=>c(!1),title:"Análisis de Cabritonas",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs(ol,{title:"Disponibilidad para Monta",children:[l.jsx(ll,{icon:nI,label:"En Monta",unit:"cabritonas",value:p.cabritonas.enMonta,subLabel:`${(p.cabritonas.total>0?p.cabritonas.enMonta/p.cabritonas.total*100:0).toFixed(0)}% del total`}),l.jsx("div",{className:"border-b border-brand-border/50 mx-2"}),l.jsx(ll,{icon:Uf,label:"Disponibles",unit:"cabritonas",value:p.cabritonas.disponibles})]}),l.jsx(ol,{title:"Próximas a Servicio",children:l.jsx(ll,{icon:Zee,label:"Con Peso Óptimo",unit:"cabritonas",value:p.cabritonas.proximasAServicio,subLabel:"(≥ 28.5 Kg y sin lote asignado)"})})]})}),l.jsx(nt,{isOpen:u,onClose:()=>d(!1),title:"Análisis de Crías en Maternidad",children:l.jsxs("div",{className:"space-y-5",children:[l.jsx(ol,{title:"Distribución por Sexo",children:l.jsx("div",{className:"w-full h-48",children:l.jsx(fr,{width:"100%",height:"100%",children:l.jsxs(F2,{children:[l.jsx(la,{data:p.crias.criasEnMaternidadData,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:45,outerRadius:65,paddingAngle:3,cornerRadius:5,children:p.crias.criasEnMaternidadData.map(m=>l.jsx(aa,{fill:m.color,stroke:"none"},`cell-${m.name}`))}),l.jsx(tn,{content:l.jsx(tS,{})}),l.jsx(na,{iconSize:10,wrapperStyle:{fontSize:"12px",paddingTop:"10px"}})]})})})}),l.jsxs(ol,{title:"Estado de Destete",children:[l.jsx(ll,{icon:Ua,label:"Listas para Destete",unit:"crías",value:p.crias.listasParaDestete,subLabel:"≥ 52 días y ≥ 9.5 Kg"}),l.jsx("div",{className:"border-b border-brand-border/50 mx-2"}),l.jsx(ll,{icon:cee,label:"En Fase de Destete",unit:"crías",value:p.crias.enFaseDestete,subLabel:"45-52 días"}),l.jsx("div",{className:"border-b border-brand-border/50 mx-2"})]})]})}),l.jsx(nt,{isOpen:f,onClose:()=>h(!1),title:"Estado de Reproductores",children:l.jsx("div",{className:"space-y-4",children:l.jsx(ol,{title:"Activos en Temporada de Monta",children:p.reproductores.activos.length>0?p.reproductores.activos.map((m,g)=>l.jsxs("div",{children:[l.jsxs("button",{onClick:()=>{h(!1),t({name:"sire-lot-detail",lotId:m.lotId})},className:"w-full text-left p-2 rounded-lg flex justify-between items-center hover:bg-brand-glass transition-colors group",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-white",children:m.name||`ID: ${m.id}`}),l.jsx("p",{className:"text-xs text-brand-medium-gray",children:"Ver lote de monta asignado"})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("span",{className:"text-base font-semibold text-brand-orange",children:[m.assignedFemales," hembras"]}),l.jsx(tr,{className:"text-zinc-500 group-hover:text-white transition-colors"})]})]}),g<p.reproductores.activos.length-1&&l.jsx("div",{className:"border-b border-brand-border/50 mx-2"})]},m.id)):l.jsx("p",{className:"text-sm text-brand-medium-gray text-center py-4",children:"No hay reproductores activos en una temporada de monta actualmente."})})})}),l.jsx(TF,{isOpen:r,onClose:()=>i(!1)})]})}const Fke=()=>({isRelated:P.useCallback((e,n,r)=>{if(!e||!n)return!1;const i=r.find(s=>s.id===e);if(!i)return!1;if(i.fatherId===n)return!0;if(i.motherId){const s=r.find(a=>a.id===i.motherId);if(s&&s.fatherId===n)return!0}return!1},[])}),Vke=(t,e,n,r,i)=>{const s=[];if(!t)return[];if(t.sex==="Hembra"){const a=e.filter(o=>o.goatId===t.id&&o.status!=="finalizada").sort((o,c)=>new Date(c.parturitionDate).getTime()-new Date(o.parturitionDate).getTime())[0];a&&(a.status==="activa"?s.push("MILKING"):a.status==="en-secado"?s.push("DRYING_OFF"):a.status==="seca"&&s.push("DRY"))}if(t.reproductiveStatus==="Preñada"?s.push("PREGNANT"):t.reproductiveStatus==="En Servicio"?n.some(o=>o.femaleId===t.id&&o.sireLotId===t.sireLotId)?s.push("IN_SERVICE_CONFIRMED"):s.push("IN_SERVICE"):(t.reproductiveStatus==="Vacía"||t.reproductiveStatus==="Post-Parto")&&s.push("EMPTY"),t.sex==="Macho"){const a=i.filter(u=>u.status==="Activo"),o=new Set(a.map(u=>u.id));r.some(u=>u.sireId===t.id&&o.has(u.seasonId))&&s.push("SIRE_IN_SERVICE")}return Array.from(new Set(s))},Bke=["Cabrita","Cabritona","Cabra","Cabrito","Macho de Levante","Macho Cabrío"],j5=({title:t,filters:e,activeFilter:n,onFilterChange:r})=>l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-zinc-400 mb-2",children:t}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("button",{type:"button",onClick:()=>r("ALL"),className:`px-2 py-1 text-xs font-semibold rounded-full transition-colors ${n==="ALL"?"bg-zinc-600 text-white":"bg-zinc-800/80 text-zinc-300"}`,children:"Todos"}),e.map(i=>{const s=i.Icon||null;return l.jsxs("button",{type:"button",onClick:()=>r(i.key),className:`flex items-center gap-1.5 px-2 py-1 text-xs font-semibold rounded-full transition-colors ${n===i.key?"bg-brand-blue text-white":"bg-zinc-800/80 text-zinc-300"}`,children:[l.jsx(s,{size:14}),i.label]},i.key)})]})]}),a1=({isOpen:t,onClose:e,onSelect:n,animals:r,parturitions:i,serviceRecords:s,breedingSeasons:a,sireLots:o,title:c,sireIdForInbreedingCheck:u,sessionType:d})=>{const[f,h]=P.useState(""),[p,m]=P.useState(new Set),{isRelated:g}=Fke(),[b,x]=P.useState(!0),[w,_]=P.useState("Todos"),[E,j]=P.useState(!1),[T,A]=P.useState("ALL"),[C,D]=P.useState("ALL"),[O,L]=P.useState("all");P.useEffect(()=>{t&&d&&(B(),d==="leche"?A("MILKING"):d==="corporal"&&L("Hembra"))},[t,d]);const z=P.useMemo(()=>r.map(U=>({...U,statuses:Vke(U,i,s,o,a),formattedAge:ma(U.birthDate),zootecnicCategory:uc(U,i)})),[r,i,s,o,a]),M=P.useMemo(()=>{let U=z;return O!=="all"&&(U=U.filter(F=>F.sex===O)),E?U.sort((F,q)=>(q.createdAt||0)-(F.createdAt||0)).slice(0,25):(w!=="Todos"&&(U=U.filter(F=>F.zootecnicCategory===w)),T!=="ALL"&&(U=U.filter(F=>F.statuses.includes(T))),C!=="ALL"&&(U=U.filter(F=>F.statuses.includes(C))),f&&(U=U.filter(F=>F.id.toLowerCase().includes(f.toLowerCase()))),U)},[z,w,E,T,C,O,f]),G=()=>{M.every(U=>p.has(U.id))?m(new Set):m(new Set(M.map(U=>U.id)))},K=()=>{n(Array.from(p)),e()},B=()=>{_("Todos"),j(!1),A("ALL"),D("ALL"),h(""),L("all")};return P.useEffect(()=>{t&&d&&m(new Set(M.map(U=>U.id)))},[M,t,d]),l.jsx(nt,{isOpen:t,onClose:e,title:c,size:"fullscreen",children:l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsxs("div",{className:"flex-shrink-0 space-y-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx(Pu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500"}),l.jsx("input",{type:"search",placeholder:"Buscar por ID...",value:f,onChange:U=>h(U.target.value),className:"w-full bg-zinc-800 border border-zinc-700 rounded-xl pl-10 pr-4 py-2.5 text-white focus:ring-2 focus:ring-brand-orange"})]}),l.jsxs("button",{onClick:()=>x(!b),className:"w-full flex justify-between items-center text-zinc-400 hover:text-white",children:[l.jsx("span",{className:"text-sm font-semibold",children:"Filtros Avanzados"}),l.jsx(KA,{className:`transition-transform ${b?"rotate-180":""}`})]}),b&&l.jsxs("div",{className:"space-y-4 p-4 bg-black/20 rounded-2xl animate-fade-in",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-zinc-400 mb-2",children:"Filtrar por Sexo"}),l.jsxs("div",{className:"flex bg-zinc-800 rounded-xl p-1 w-full",children:[l.jsx("button",{onClick:()=>L("all"),className:`w-1/3 rounded-lg py-2 text-sm font-semibold transition-colors ${O==="all"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"Todos"}),l.jsx("button",{onClick:()=>L("Hembra"),className:`w-1/3 rounded-lg py-2 text-sm font-semibold transition-colors ${O==="Hembra"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"Hembras"}),l.jsx("button",{onClick:()=>L("Macho"),className:`w-1/3 rounded-lg py-2 text-sm font-semibold transition-colors ${O==="Macho"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"Machos"})]})]}),l.jsx(j5,{title:"Filtros Productivos",filters:["MILKING","DRYING_OFF","DRY"].map(U=>en[U]),activeFilter:T,onFilterChange:A}),l.jsx(j5,{title:"Filtros Reproductivos",filters:["PREGNANT","IN_SERVICE_CONFIRMED","IN_SERVICE","EMPTY","SIRE_IN_SERVICE"].map(U=>en[U]),activeFilter:C,onFilterChange:D}),l.jsxs("div",{className:"flex gap-2 pt-2 border-t border-brand-border",children:[l.jsxs("select",{value:w,onChange:U=>_(U.target.value),className:"w-full bg-zinc-800 p-2 rounded-xl text-white border border-zinc-700 text-sm",children:[l.jsx("option",{value:"Todos",children:"Categoría Zootécnica..."}),Bke.map(U=>l.jsx("option",{value:U,children:U},U))]}),l.jsxs("button",{onClick:()=>j(!E),className:`flex-shrink-0 flex items-center gap-2 p-2 rounded-xl border text-sm transition-colors ${E?"bg-brand-orange border-brand-orange text-white":"border-zinc-700 bg-zinc-800 text-zinc-300"}`,children:[l.jsx(iw,{size:16})," Última Carga"]}),l.jsx("button",{onClick:B,className:"flex-shrink-0 p-2 rounded-xl border border-zinc-700 bg-zinc-800 text-zinc-300",children:l.jsx(WC,{size:16})})]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 py-4 min-h-[10rem]",children:M.length>0?M.map(U=>{const F=u?g(U.id,u,r):!1;return l.jsxs("div",{onClick:()=>m(q=>{const Z=new Set(q);return Z.has(U.id)?Z.delete(U.id):Z.add(U.id),Z}),className:`w-full text-left p-3 flex items-center gap-4 rounded-lg cursor-pointer transition-colors ${F?"bg-yellow-900/50 border border-yellow-500/60 hover:bg-yellow-800/50":"bg-zinc-800/50 hover:bg-zinc-700"}`,children:[p.has(U.id)?l.jsx(GC,{className:"text-brand-orange flex-shrink-0"}):l.jsx(YC,{className:"text-zinc-500 flex-shrink-0"}),l.jsxs("div",{className:"flex-grow",children:[l.jsxs("p",{className:"font-bold text-white flex items-center gap-2",children:[U.id," ",F&&l.jsx(Vt,{className:"text-yellow-400",size:16})]}),l.jsxs("p",{className:"text-xs text-zinc-400",children:[U.sex," | ",U.formattedAge," | Lote: ",U.location||"Sin Asignar"]})]})]},U.id)}):l.jsx("div",{className:"flex-grow flex items-center justify-center",children:l.jsx("p",{className:"text-zinc-500 text-center",children:"No se encontraron animales."})})}),l.jsxs("div",{className:"flex-shrink-0 grid grid-cols-3 items-center pt-4 border-t border-brand-border gap-2",children:[l.jsx("button",{type:"button",onClick:G,disabled:M.length===0,className:"bg-zinc-700 hover:bg-zinc-600 text-white font-bold py-3 px-2 rounded-lg disabled:opacity-50 text-sm",children:M.every(U=>p.has(U.id))&&M.length>0?"Deseleccionar":"Sel. Todos"}),l.jsx("button",{onClick:e,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-3 px-2 rounded-lg text-sm",children:"Cancelar"}),l.jsxs("button",{onClick:K,className:"bg-brand-green hover:bg-green-600 text-white font-bold py-3 px-2 rounded-lg disabled:opacity-50 text-sm",children:["Seleccionar (",p.size,")"]})]})]})})},Uke=({isOpen:t,onClose:e,animalsToTransfer:n,fromLot:r})=>{const{lots:i,updateAnimal:s}=Ze(),[a,o]=P.useState(""),c=P.useMemo(()=>i.filter(d=>d.name!==r),[i,r]),u=async()=>{if(!a||n.length===0)return;const d=n.map(f=>s(f,{location:a}));try{await Promise.all(d),e()}catch(f){console.error("Error al transferir animales:",f)}};return l.jsx(nt,{isOpen:t,onClose:e,title:`Transferir ${n.length} animales`,children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:["Transferir desde: ",l.jsx("span",{className:"font-semibold text-white",children:r})]}),l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1 mt-4",children:"Hacia el lote:"}),l.jsxs("select",{value:a,onChange:d=>o(d.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",children:[l.jsx("option",{value:"",children:"Seleccionar lote de destino..."}),c.map(d=>l.jsx("option",{value:d.name,children:d.name},d.id))]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[l.jsx("button",{onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{onClick:u,disabled:!a,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:"Confirmar Transferencia"})]})]})})};function Dd(t,e,n){let r=n.initialDeps??[],i;function s(){var a,o,c,u;let d;n.key&&((a=n.debug)!=null&&a.call(n))&&(d=Date.now());const f=t();if(!(f.length!==r.length||f.some((m,g)=>r[g]!==m)))return i;r=f;let p;if(n.key&&((o=n.debug)!=null&&o.call(n))&&(p=Date.now()),i=e(...f),n.key&&((c=n.debug)!=null&&c.call(n))){const m=Math.round((Date.now()-d)*100)/100,g=Math.round((Date.now()-p)*100)/100,b=g/16,x=(w,_)=>{for(w=String(w);w.length<_;)w=" "+w;return w};console.info(`%c⏱ ${x(g,5)} /${x(m,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*b,120))}deg 100% 31%);`,n==null?void 0:n.key)}return(u=n==null?void 0:n.onChange)==null||u.call(n,i),i}return s.updateDeps=a=>{r=a},s}function C5(t,e){if(t===void 0)throw new Error("Unexpected undefined");return t}const Wke=(t,e)=>Math.abs(t-e)<1.01,Hke=(t,e,n)=>{let r;return function(...i){t.clearTimeout(r),r=t.setTimeout(()=>e.apply(this,i),n)}},T5=t=>{const{offsetWidth:e,offsetHeight:n}=t;return{width:e,height:n}},qke=t=>t,Kke=t=>{const e=Math.max(t.startIndex-t.overscan,0),n=Math.min(t.endIndex+t.overscan,t.count-1),r=[];for(let i=e;i<=n;i++)r.push(i);return r},Gke=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;const i=a=>{const{width:o,height:c}=a;e({width:Math.round(o),height:Math.round(c)})};if(i(T5(n)),!r.ResizeObserver)return()=>{};const s=new r.ResizeObserver(a=>{const o=()=>{const c=a[0];if(c!=null&&c.borderBoxSize){const u=c.borderBoxSize[0];if(u){i({width:u.inlineSize,height:u.blockSize});return}}i(T5(n))};t.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()});return s.observe(n,{box:"border-box"}),()=>{s.unobserve(n)}},P5={passive:!0},N5=typeof window>"u"?!0:"onscrollend"in window,Yke=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;let i=0;const s=t.options.useScrollendEvent&&N5?()=>{}:Hke(r,()=>{e(i,!1)},t.options.isScrollingResetDelay),a=d=>()=>{const{horizontal:f,isRtl:h}=t.options;i=f?n.scrollLeft*(h&&-1||1):n.scrollTop,s(),e(i,d)},o=a(!0),c=a(!1);c(),n.addEventListener("scroll",o,P5);const u=t.options.useScrollendEvent&&N5;return u&&n.addEventListener("scrollend",c,P5),()=>{n.removeEventListener("scroll",o),u&&n.removeEventListener("scrollend",c)}},Qke=(t,e,n)=>{if(e!=null&&e.borderBoxSize){const r=e.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return t[n.options.horizontal?"offsetWidth":"offsetHeight"]},Xke=(t,{adjustments:e=0,behavior:n},r)=>{var i,s;const a=t+e;(s=(i=r.scrollElement)==null?void 0:i.scrollTo)==null||s.call(i,{[r.options.horizontal?"left":"top"]:a,behavior:n})};class Zke{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(i=>{i.forEach(s=>{const a=()=>{this._measureElement(s.target,s)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()})}));return{disconnect:()=>{var i;(i=r())==null||i.disconnect(),n=null},observe:i=>{var s;return(s=r())==null?void 0:s.observe(i,{box:"border-box"})},unobserve:i=>{var s;return(s=r())==null?void 0:s.unobserve(i)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,i])=>{typeof i>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:qke,rangeExtractor:Kke,onChange:()=>{},measureElement:Qke,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,i;(i=(r=this.options).onChange)==null||i.call(r,this,n)},this.maybeNotify=Dd(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,s)=>{this.scrollAdjustments=0,this.scrollDirection=s?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=s,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const i=new Map,s=new Map;for(let a=r-1;a>=0;a--){const o=n[a];if(i.has(o.lane))continue;const c=s.get(o.lane);if(c==null||o.end>c.end?s.set(o.lane,o):o.end<c.end&&i.set(o.lane,!0),i.size===this.options.lanes)break}return s.size===this.options.lanes?Array.from(s.values()).sort((a,o)=>a.end===o.end?a.index-o.index:a.end-o.end)[0]:void 0},this.getMeasurementOptions=Dd(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,r,i,s,a)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:i,getItemKey:s,enabled:a}),{key:!1}),this.getMeasurements=Dd(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:i,getItemKey:s,enabled:a},o)=>{if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(d=>{this.itemSizeCache.set(d.key,d.size)}));const c=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const u=this.measurementsCache.slice(0,c);for(let d=c;d<n;d++){const f=s(d),h=this.options.lanes===1?u[d-1]:this.getFurthestMeasurement(u,d),p=h?h.end+this.options.gap:r+i,m=o.get(f),g=typeof m=="number"?m:this.options.estimateSize(d),b=p+g,x=h?h.lane:d%this.options.lanes;u[d]={index:d,start:p,size:g,end:b,key:f,lane:x}}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Dd(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,i,s)=>this.range=n.length>0&&r>0?Jke({measurements:n,outerSize:r,scrollOffset:i,lanes:s}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Dd(()=>{let n=null,r=null;const i=this.calculateRange();return i&&(n=i.startIndex,r=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,i,s,a)=>s===null||a===null?[]:n({startIndex:s,endIndex:a,overscan:r,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,i=n.getAttribute(r);return i?parseInt(i,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const i=this.indexFromElement(n),s=this.measurementsCache[i];if(!s)return;const a=s.key,o=this.elementsCache.get(a);o!==n&&(o&&this.observer.unobserve(o),this.observer.observe(n),this.elementsCache.set(a,n)),n.isConnected&&this.resizeItem(i,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const i=this.measurementsCache[n];if(!i)return;const s=this.itemSizeCache.get(i.key)??i.size,a=r-s;a!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,a,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,i)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(i))});return}this._measureElement(n,void 0)},this.getVirtualItems=Dd(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const i=[];for(let s=0,a=n.length;s<a;s++){const o=n[s],c=r[o];i.push(c)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return C5(r[nU(0,r.length-1,i=>C5(r[i]).start,n)])},this.getOffsetForAlignment=(n,r,i=0)=>{const s=this.getSize(),a=this.getScrollOffset();r==="auto"&&(r=n>=a+s?"end":"start"),r==="center"?n+=(i-s)/2:r==="end"&&(n-=s);const o=this.getTotalSize()+this.options.scrollMargin-s;return Math.max(Math.min(o,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const i=this.measurementsCache[n];if(!i)return;const s=this.getSize(),a=this.getScrollOffset();if(r==="auto")if(i.end>=a+s-this.options.scrollPaddingEnd)r="end";else if(i.start<=a+this.options.scrollPaddingStart)r="start";else return[a,r];const o=r==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,r,i.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:i})},this.scrollToIndex=(n,{align:r="auto",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let s=0;const a=10,o=u=>{if(!this.targetWindow)return;const d=this.getOffsetForIndex(n,u);if(!d){console.warn("Failed to get offset for index:",n);return}const[f,h]=d;this._scrollToOffset(f,{adjustments:void 0,behavior:i}),this.targetWindow.requestAnimationFrame(()=>{const p=this.getScrollOffset(),m=this.getOffsetForIndex(n,h);if(!m){console.warn("Failed to get offset for index:",n);return}Wke(m[0],p)||c(h)})},c=u=>{this.targetWindow&&(s++,s<a?this.targetWindow.requestAnimationFrame(()=>o(u)):console.warn(`Failed to scroll to index ${n} after ${a} attempts.`))};o(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let i;if(r.length===0)i=this.options.paddingStart;else if(this.options.lanes===1)i=((n=r[r.length-1])==null?void 0:n.end)??0;else{const s=Array(this.options.lanes).fill(null);let a=r.length-1;for(;a>=0&&s.some(o=>o===null);){const o=r[a];s[o.lane]===null&&(s[o.lane]=o.end),a--}i=Math.max(...s.filter(o=>o!==null))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:i})=>{this.options.scrollToFn(n,{behavior:i,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(e)}}const nU=(t,e,n,r)=>{for(;t<=e;){const i=(t+e)/2|0,s=n(i);if(s<r)t=i+1;else if(s>r)e=i-1;else return i}return t>0?t-1:0};function Jke({measurements:t,outerSize:e,scrollOffset:n,lanes:r}){const i=t.length-1,s=c=>t[c].start;if(t.length<=r)return{startIndex:0,endIndex:i};let a=nU(0,i,s,n),o=a;if(r===1)for(;o<i&&t[o].end<n+e;)o++;else if(r>1){const c=Array(r).fill(0);for(;o<i&&c.some(d=>d<n+e);){const d=t[o];c[d.lane]=d.end,o++}const u=Array(r).fill(n+e);for(;a>=0&&u.some(d=>d>=n);){const d=t[a];u[d.lane]=d.start,a--}a=Math.max(0,a-a%r),o=Math.min(i,o+(r-1-o%r))}return{startIndex:a,endIndex:o}}const k5=typeof document<"u"?P.useLayoutEffect:P.useEffect;function eDe(t){const e=P.useReducer(()=>({}),{})[1],n={...t,onChange:(i,s)=>{var a;s?Wm.flushSync(e):e(),(a=t.onChange)==null||a.call(t,i,s)}},[r]=P.useState(()=>new Zke(n));return r.setOptions(n),k5(()=>r._didMount(),[]),k5(()=>r._willUpdate()),r}function $P(t){return eDe({observeElementRect:Gke,observeElementOffset:Yke,scrollToFn:Xke,...t})}const FP=({statuses:t})=>{if(!t||t.length===0)return null;const e=[...t].sort((n,r)=>{const i=["MILKING","DRYING_OFF","DRY","PREGNANT","IN_SERVICE_CONFIRMED","IN_SERVICE","EMPTY","SIRE_IN_SERVICE"];return i.indexOf(n.key)-i.indexOf(r.key)});return l.jsx("div",{className:"flex items-center space-x-1.5",children:e.map(({key:n,Icon:r,color:i,label:s})=>l.jsx("span",{title:s,children:l.jsx(r,{className:i,size:16,strokeWidth:2.5})},n))})},rU=({animal:t,onSelect:e,onOpenActions:n})=>{const r=rc(),i=P.useRef(!1),s=(a,o)=>{const c=o.offset.x,u=o.velocity.x;(c<-80/2||u<-500)&&n(t),r.start({x:0}),setTimeout(()=>{i.current=!1},50)};return l.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-brand-glass border border-brand-border",children:[l.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:l.jsxs("div",{className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[l.jsx(Er,{size:22}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Acciones"})]})}),l.jsx(On.div,{drag:"x",dragConstraints:{left:-80,right:0},dragElastic:.1,onDragStart:()=>{i.current=!0},onDragEnd:s,onTap:()=>{i.current||e(t.id)},animate:r,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg p-4",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),l.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:[t.sex," | ",t.formattedAge," | Lote: ",t.location||"Sin Asignar"]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(FP,{statuses:t.statusObjects}),l.jsx(tr,{className:"text-zinc-600"})]})]})})]})},VP=({isOpen:t,onClose:e,onSave:n})=>{const[r,i]=P.useState(""),[s,a]=P.useState(""),[o,c]=P.useState(""),{fathers:u}=Ze(),d=()=>{c("");const f=r.trim().toUpperCase(),h=s.trim();if(!f||!h){c("Ambos campos son obligatorios.");return}if(u.some(p=>p.id===f)){c("Este ID ya está en uso. Por favor, elige otro.");return}n({id:f,name:h}),i(""),a("")};return l.jsx(nt,{isOpen:t,onClose:e,title:"Añadir Nuevo Padre",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-zinc-400",children:"Introduce un ID único y el nombre del nuevo semental."}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("input",{type:"text",value:r,onChange:f=>i(f.target.value),placeholder:"ID del Padre (ej. P002)",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0"}),l.jsx("input",{type:"text",value:s,onChange:f=>a(f.target.value),placeholder:"Nombre del Padre (ej. Sansón)",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0"})]}),o&&l.jsx("p",{className:"text-sm text-brand-red",children:o}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[l.jsx("button",{onClick:e,className:"px-5 py-2 bg-zinc-600 rounded-lg hover:bg-zinc-500 font-semibold",children:"Cancelar"}),l.jsx("button",{onClick:d,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:"Guardar Padre"})]})]})})};function Bt(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function us(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function xi(t,e){const n=Bt(t);return isNaN(e)?us(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function ca(t,e){const n=Bt(t);if(isNaN(e))return us(t,NaN);if(!e)return n;const r=n.getDate(),i=us(t,n.getTime());i.setMonth(n.getMonth()+e+1,0);const s=i.getDate();return r>=s?i:(n.setFullYear(i.getFullYear(),i.getMonth(),r),n)}const BP=6048e5,tDe=864e5;let nDe={};function jv(){return nDe}function Ha(t,e){var o,c,u,d;const n=jv(),r=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=Bt(t),s=i.getDay(),a=(s<r?7:0)+s-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}function $u(t){return Ha(t,{weekStartsOn:1})}function iU(t){const e=Bt(t),n=e.getFullYear(),r=us(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=$u(r),s=us(t,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const a=$u(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function xh(t){const e=Bt(t);return e.setHours(0,0,0,0),e}function ox(t){const e=Bt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Da(t,e){const n=xh(t),r=xh(e),i=+n-ox(n),s=+r-ox(r);return Math.round((i-s)/tDe)}function rDe(t){const e=iU(t),n=us(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),$u(n)}function V2(t,e){const n=e*7;return xi(t,n)}function iDe(t,e){return ca(t,e*12)}function sDe(t){let e;return t.forEach(function(n){const r=Bt(n);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function aDe(t){let e;return t.forEach(n=>{const r=Bt(n);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function Ri(t,e){const n=xh(t),r=xh(e);return+n==+r}function UP(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function oDe(t){if(!UP(t)&&typeof t!="number")return!1;const e=Bt(t);return!isNaN(Number(e))}function Wg(t,e){const n=Bt(t),r=Bt(e),i=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return i*12+s}function lDe(t,e,n){const r=Ha(t,n),i=Ha(e,n),s=+r-ox(r),a=+i-ox(i);return Math.round((s-a)/BP)}function WP(t){const e=Bt(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function Bi(t){const e=Bt(t);return e.setDate(1),e.setHours(0,0,0,0),e}function sU(t){const e=Bt(t),n=us(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function HP(t,e){var o,c,u,d;const n=jv(),r=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=Bt(t),s=i.getDay(),a=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+a),i.setHours(23,59,59,999),i}function aU(t){return HP(t,{weekStartsOn:1})}const cDe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},uDe=(t,e,n)=>{let r;const i=cDe[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function _f(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const dDe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},fDe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},hDe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},pDe={date:_f({formats:dDe,defaultWidth:"full"}),time:_f({formats:fDe,defaultWidth:"full"}),dateTime:_f({formats:hDe,defaultWidth:"full"})},mDe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},gDe=(t,e,n,r)=>mDe[t];function Ta(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):a;i=t.formattingValues[o]||t.formattingValues[a]}else{const a=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[o]||t.values[a]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const vDe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},yDe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},bDe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},xDe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},wDe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},_De={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},SDe=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},ADe={ordinalNumber:SDe,era:Ta({values:vDe,defaultWidth:"wide"}),quarter:Ta({values:yDe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ta({values:bDe,defaultWidth:"wide"}),day:Ta({values:xDe,defaultWidth:"wide"}),dayPeriod:Ta({values:wDe,defaultWidth:"wide",formattingValues:_De,defaultFormattingWidth:"wide"})};function Pa(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const a=s[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(o)?jDe(o,f=>f.test(a)):EDe(o,f=>f.test(a));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(a.length);return{value:u,rest:d}}}function EDe(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function jDe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function oU(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let a=t.valueCallback?t.valueCallback(s[0]):s[0];a=n.valueCallback?n.valueCallback(a):a;const o=e.slice(i.length);return{value:a,rest:o}}}const CDe=/^(\d+)(th|st|nd|rd)?/i,TDe=/\d+/i,PDe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},NDe={any:[/^b/i,/^(a|c)/i]},kDe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},DDe={any:[/1/i,/2/i,/3/i,/4/i]},IDe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ODe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},MDe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},RDe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},LDe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},zDe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},$De={ordinalNumber:oU({matchPattern:CDe,parsePattern:TDe,valueCallback:t=>parseInt(t,10)}),era:Pa({matchPatterns:PDe,defaultMatchWidth:"wide",parsePatterns:NDe,defaultParseWidth:"any"}),quarter:Pa({matchPatterns:kDe,defaultMatchWidth:"wide",parsePatterns:DDe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Pa({matchPatterns:IDe,defaultMatchWidth:"wide",parsePatterns:ODe,defaultParseWidth:"any"}),day:Pa({matchPatterns:MDe,defaultMatchWidth:"wide",parsePatterns:RDe,defaultParseWidth:"any"}),dayPeriod:Pa({matchPatterns:LDe,defaultMatchWidth:"any",parsePatterns:zDe,defaultParseWidth:"any"})},lU={code:"en-US",formatDistance:uDe,formatLong:pDe,formatRelative:gDe,localize:ADe,match:$De,options:{weekStartsOn:0,firstWeekContainsDate:1}};function FDe(t){const e=Bt(t);return Da(e,sU(e))+1}function cU(t){const e=Bt(t),n=+$u(e)-+rDe(e);return Math.round(n/BP)+1}function uU(t,e){var d,f,h,p;const n=Bt(t),r=n.getFullYear(),i=jv(),s=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(h=i.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,a=us(t,0);a.setFullYear(r+1,0,s),a.setHours(0,0,0,0);const o=Ha(a,e),c=us(t,0);c.setFullYear(r,0,s),c.setHours(0,0,0,0);const u=Ha(c,e);return n.getTime()>=o.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function VDe(t,e){var o,c,u,d;const n=jv(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=uU(t,e),s=us(t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),Ha(s,e)}function dU(t,e){const n=Bt(t),r=+Ha(n,e)-+VDe(n,e);return Math.round(r/BP)+1}function Jt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const cl={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Jt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Jt(n+1,2)},d(t,e){return Jt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Jt(t.getHours()%12||12,e.length)},H(t,e){return Jt(t.getHours(),e.length)},m(t,e){return Jt(t.getMinutes(),e.length)},s(t,e){return Jt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Jt(i,e.length)}},Id={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},D5={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return cl.y(t,e)},Y:function(t,e,n,r){const i=uU(t,r),s=i>0?i:1-i;if(e==="YY"){const a=s%100;return Jt(a,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):Jt(s,e.length)},R:function(t,e){const n=iU(t);return Jt(n,e.length)},u:function(t,e){const n=t.getFullYear();return Jt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Jt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Jt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return cl.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Jt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=dU(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Jt(i,e.length)},I:function(t,e,n){const r=cU(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Jt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):cl.d(t,e)},D:function(t,e,n){const r=FDe(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Jt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Jt(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Jt(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Jt(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Id.noon:r===0?i=Id.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Id.evening:r>=12?i=Id.afternoon:r>=4?i=Id.morning:i=Id.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return cl.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):cl.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Jt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Jt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):cl.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):cl.s(t,e)},S:function(t,e){return cl.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return O5(r);case"XXXX":case"XX":return Wc(r);case"XXXXX":case"XXX":default:return Wc(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return O5(r);case"xxxx":case"xx":return Wc(r);case"xxxxx":case"xxx":default:return Wc(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+I5(r,":");case"OOOO":default:return"GMT"+Wc(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+I5(r,":");case"zzzz":default:return"GMT"+Wc(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Jt(r,e.length)},T:function(t,e,n){const r=t.getTime();return Jt(r,e.length)}};function I5(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+Jt(s,2)}function O5(t,e){return t%60===0?(t>0?"-":"+")+Jt(Math.abs(t)/60,2):Wc(t,e)}function Wc(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Jt(Math.trunc(r/60),2),s=Jt(r%60,2);return n+i+e+s}const M5=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},fU=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},BDe=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return M5(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",M5(r,e)).replace("{{time}}",fU(i,e))},UDe={p:fU,P:BDe},WDe=/^D+$/,HDe=/^Y+$/,qDe=["D","DD","YY","YYYY"];function KDe(t){return WDe.test(t)}function GDe(t){return HDe.test(t)}function YDe(t,e,n){const r=QDe(t,e,n);if(console.warn(r),qDe.includes(t))throw new RangeError(r)}function QDe(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const XDe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ZDe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,JDe=/^'([^]*?)'?$/,eIe=/''/g,tIe=/[a-zA-Z]/;function rd(t,e,n){var d,f,h,p,m,g,b,x;const r=jv(),i=(n==null?void 0:n.locale)??r.locale??lU,s=(n==null?void 0:n.firstWeekContainsDate)??((f=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(h=r.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,a=(n==null?void 0:n.weekStartsOn)??((g=(m=n==null?void 0:n.locale)==null?void 0:m.options)==null?void 0:g.weekStartsOn)??r.weekStartsOn??((x=(b=r.locale)==null?void 0:b.options)==null?void 0:x.weekStartsOn)??0,o=Bt(t);if(!oDe(o))throw new RangeError("Invalid time value");let c=e.match(ZDe).map(w=>{const _=w[0];if(_==="p"||_==="P"){const E=UDe[_];return E(w,i.formatLong)}return w}).join("").match(XDe).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const _=w[0];if(_==="'")return{isToken:!1,value:nIe(w)};if(D5[_])return{isToken:!0,value:w};if(_.match(tIe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:w}});i.localize.preprocessor&&(c=i.localize.preprocessor(o,c));const u={firstWeekContainsDate:s,weekStartsOn:a,locale:i};return c.map(w=>{if(!w.isToken)return w.value;const _=w.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&GDe(_)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&KDe(_))&&YDe(_,e,String(t));const E=D5[_[0]];return E(o,_,i.localize,u)}).join("")}function nIe(t){const e=t.match(JDe);return e?e[1].replace(eIe,"'"):t}function rIe(t){const e=Bt(t),n=e.getFullYear(),r=e.getMonth(),i=us(t,0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function iIe(t){return Math.trunc(+Bt(t)/1e3)}function sIe(t){const e=Bt(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(0,0,0,0),e}function aIe(t,e){return lDe(sIe(t),Bi(t),e)+1}function B2(t,e){const n=Bt(t),r=Bt(e);return n.getTime()>r.getTime()}function hU(t,e){const n=Bt(t),r=Bt(e);return+n<+r}function qP(t,e){const n=Bt(t),r=Bt(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function oIe(t,e){const n=Bt(t),r=Bt(e);return n.getFullYear()===r.getFullYear()}function nS(t,e){return xi(t,-e)}function rS(t,e){const n=Bt(t),r=n.getFullYear(),i=n.getDate(),s=us(t,0);s.setFullYear(r,e,15),s.setHours(0,0,0,0);const a=rIe(s);return n.setMonth(e,Math.min(i,a)),n}function R5(t,e){const n=Bt(t);return isNaN(+n)?us(t,NaN):(n.setFullYear(e),n)}const lIe={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},cIe=(t,e,n)=>{let r;const i=lIe[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"en "+r:"hace "+r:r},uIe={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},dIe={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},fIe={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},hIe={date:_f({formats:uIe,defaultWidth:"full"}),time:_f({formats:dIe,defaultWidth:"full"}),dateTime:_f({formats:fIe,defaultWidth:"full"})},pIe={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},mIe={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},gIe=(t,e,n,r)=>e.getHours()!==1?mIe[t]:pIe[t],vIe={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},yIe={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},bIe={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},xIe={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},wIe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},_Ie={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},SIe=(t,e)=>Number(t)+"º",AIe={ordinalNumber:SIe,era:Ta({values:vIe,defaultWidth:"wide"}),quarter:Ta({values:yIe,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:Ta({values:bIe,defaultWidth:"wide"}),day:Ta({values:xIe,defaultWidth:"wide"}),dayPeriod:Ta({values:wIe,defaultWidth:"wide",formattingValues:_Ie,defaultFormattingWidth:"wide"})},EIe=/^(\d+)(º)?/i,jIe=/\d+/i,CIe={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},TIe={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},PIe={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},NIe={any:[/1/i,/2/i,/3/i,/4/i]},kIe={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},DIe={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},IIe={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},OIe={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},MIe={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},RIe={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},LIe={ordinalNumber:oU({matchPattern:EIe,parsePattern:jIe,valueCallback:function(t){return parseInt(t,10)}}),era:Pa({matchPatterns:CIe,defaultMatchWidth:"wide",parsePatterns:TIe,defaultParseWidth:"any"}),quarter:Pa({matchPatterns:PIe,defaultMatchWidth:"wide",parsePatterns:NIe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Pa({matchPatterns:kIe,defaultMatchWidth:"wide",parsePatterns:DIe,defaultParseWidth:"any"}),day:Pa({matchPatterns:IIe,defaultMatchWidth:"wide",parsePatterns:OIe,defaultParseWidth:"any"}),dayPeriod:Pa({matchPatterns:MIe,defaultMatchWidth:"any",parsePatterns:RIe,defaultParseWidth:"any"})},KP={code:"es",formatDistance:cIe,formatLong:hIe,formatRelative:gIe,localize:AIe,match:LIe,options:{weekStartsOn:1,firstWeekContainsDate:1}};var ht=function(){return ht=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ht.apply(this,arguments)};function zIe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function pU(t,e,n){for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function Cv(t){return t.mode==="multiple"}function Tv(t){return t.mode==="range"}function o1(t){return t.mode==="single"}var $Ie={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function FIe(t,e){return rd(t,"LLLL y",e)}function VIe(t,e){return rd(t,"d",e)}function BIe(t,e){return rd(t,"LLLL",e)}function UIe(t){return"".concat(t)}function WIe(t,e){return rd(t,"cccccc",e)}function HIe(t,e){return rd(t,"yyyy",e)}var qIe=Object.freeze({__proto__:null,formatCaption:FIe,formatDay:VIe,formatMonthCaption:BIe,formatWeekNumber:UIe,formatWeekdayName:WIe,formatYearCaption:HIe}),KIe=function(t,e,n){return rd(t,"do MMMM (EEEE)",n)},GIe=function(){return"Month: "},YIe=function(){return"Go to next month"},QIe=function(){return"Go to previous month"},XIe=function(t,e){return rd(t,"cccc",e)},ZIe=function(t){return"Week n. ".concat(t)},JIe=function(){return"Year: "},eOe=Object.freeze({__proto__:null,labelDay:KIe,labelMonthDropdown:GIe,labelNext:YIe,labelPrevious:QIe,labelWeekNumber:ZIe,labelWeekday:XIe,labelYearDropdown:JIe});function tOe(){var t="buttons",e=$Ie,n=lU,r={},i={},s=1,a={},o=new Date;return{captionLayout:t,classNames:e,formatters:qIe,labels:eOe,locale:n,modifiersClassNames:r,modifiers:i,numberOfMonths:s,styles:a,today:o,mode:"default"}}function nOe(t){var e=t.fromYear,n=t.toYear,r=t.fromMonth,i=t.toMonth,s=t.fromDate,a=t.toDate;return r?s=Bi(r):e&&(s=new Date(e,0,1)),i?a=WP(i):n&&(a=new Date(n,11,31)),{fromDate:s?xh(s):void 0,toDate:a?xh(a):void 0}}var mU=P.createContext(void 0);function rOe(t){var e,n=t.initialProps,r=tOe(),i=nOe(n),s=i.fromDate,a=i.toDate,o=(e=n.captionLayout)!==null&&e!==void 0?e:r.captionLayout;o!=="buttons"&&(!s||!a)&&(o="buttons");var c;(o1(n)||Cv(n)||Tv(n))&&(c=n.onSelect);var u=ht(ht(ht({},r),n),{captionLayout:o,classNames:ht(ht({},r.classNames),n.classNames),components:ht({},n.components),formatters:ht(ht({},r.formatters),n.formatters),fromDate:s,labels:ht(ht({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:ht(ht({},r.modifiers),n.modifiers),modifiersClassNames:ht(ht({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:ht(ht({},r.styles),n.styles),toDate:a});return l.jsx(mU.Provider,{value:u,children:t.children})}function xn(){var t=P.useContext(mU);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function gU(t){var e=xn(),n=e.locale,r=e.classNames,i=e.styles,s=e.formatters.formatCaption;return l.jsx("div",{className:r.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:s(t.displayMonth,{locale:n})})}function iOe(t){return l.jsx("svg",ht({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:l.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function vU(t){var e,n,r=t.onChange,i=t.value,s=t.children,a=t.caption,o=t.className,c=t.style,u=xn(),d=(n=(e=u.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&n!==void 0?n:iOe;return l.jsxs("div",{className:o,style:c,children:[l.jsx("span",{className:u.classNames.vhidden,children:t["aria-label"]}),l.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:i,onChange:r,children:s}),l.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[a,l.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function sOe(t){var e,n=xn(),r=n.fromDate,i=n.toDate,s=n.styles,a=n.locale,o=n.formatters.formatMonthCaption,c=n.classNames,u=n.components,d=n.labels.labelMonthDropdown;if(!r)return l.jsx(l.Fragment,{});if(!i)return l.jsx(l.Fragment,{});var f=[];if(oIe(r,i))for(var h=Bi(r),p=r.getMonth();p<=i.getMonth();p++)f.push(rS(h,p));else for(var h=Bi(new Date),p=0;p<=11;p++)f.push(rS(h,p));var m=function(b){var x=Number(b.target.value),w=rS(Bi(t.displayMonth),x);t.onChange(w)},g=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:vU;return l.jsx(g,{name:"months","aria-label":d(),className:c.dropdown_month,style:s.dropdown_month,onChange:m,value:t.displayMonth.getMonth(),caption:o(t.displayMonth,{locale:a}),children:f.map(function(b){return l.jsx("option",{value:b.getMonth(),children:o(b,{locale:a})},b.getMonth())})})}function aOe(t){var e,n=t.displayMonth,r=xn(),i=r.fromDate,s=r.toDate,a=r.locale,o=r.styles,c=r.classNames,u=r.components,d=r.formatters.formatYearCaption,f=r.labels.labelYearDropdown,h=[];if(!i)return l.jsx(l.Fragment,{});if(!s)return l.jsx(l.Fragment,{});for(var p=i.getFullYear(),m=s.getFullYear(),g=p;g<=m;g++)h.push(R5(sU(new Date),g));var b=function(w){var _=R5(Bi(n),Number(w.target.value));t.onChange(_)},x=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:vU;return l.jsx(x,{name:"years","aria-label":f(),className:c.dropdown_year,style:o.dropdown_year,onChange:b,value:n.getFullYear(),caption:d(n,{locale:a}),children:h.map(function(w){return l.jsx("option",{value:w.getFullYear(),children:d(w,{locale:a})},w.getFullYear())})})}function oOe(t,e){var n=P.useState(t),r=n[0],i=n[1],s=e===void 0?r:e;return[s,i]}function lOe(t){var e=t.month,n=t.defaultMonth,r=t.today,i=e||n||r||new Date,s=t.toDate,a=t.fromDate,o=t.numberOfMonths,c=o===void 0?1:o;if(s&&Wg(s,i)<0){var u=-1*(c-1);i=ca(s,u)}return a&&Wg(i,a)<0&&(i=a),Bi(i)}function cOe(){var t=xn(),e=lOe(t),n=oOe(e,t.month),r=n[0],i=n[1],s=function(a){var o;if(!t.disableNavigation){var c=Bi(a);i(c),(o=t.onMonthChange)===null||o===void 0||o.call(t,c)}};return[r,s]}function uOe(t,e){for(var n=e.reverseMonths,r=e.numberOfMonths,i=Bi(t),s=Bi(ca(i,r)),a=Wg(s,i),o=[],c=0;c<a;c++){var u=ca(i,c);o.push(u)}return n&&(o=o.reverse()),o}function dOe(t,e){if(!e.disableNavigation){var n=e.toDate,r=e.pagedNavigation,i=e.numberOfMonths,s=i===void 0?1:i,a=r?s:1,o=Bi(t);if(!n)return ca(o,a);var c=Wg(n,t);if(!(c<s))return ca(o,a)}}function fOe(t,e){if(!e.disableNavigation){var n=e.fromDate,r=e.pagedNavigation,i=e.numberOfMonths,s=i===void 0?1:i,a=r?s:1,o=Bi(t);if(!n)return ca(o,-a);var c=Wg(o,n);if(!(c<=0))return ca(o,-a)}}var yU=P.createContext(void 0);function hOe(t){var e=xn(),n=cOe(),r=n[0],i=n[1],s=uOe(r,e),a=dOe(r,e),o=fOe(r,e),c=function(f){return s.some(function(h){return qP(f,h)})},u=function(f,h){c(f)||(h&&hU(f,h)?i(ca(f,1+e.numberOfMonths*-1)):i(f))},d={currentMonth:r,displayMonths:s,goToMonth:i,goToDate:u,previousMonth:o,nextMonth:a,isDateDisplayed:c};return l.jsx(yU.Provider,{value:d,children:t.children})}function Pv(){var t=P.useContext(yU);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function L5(t){var e,n=xn(),r=n.classNames,i=n.styles,s=n.components,a=Pv().goToMonth,o=function(d){a(ca(d,t.displayIndex?-t.displayIndex:0))},c=(e=s==null?void 0:s.CaptionLabel)!==null&&e!==void 0?e:gU,u=l.jsx(c,{id:t.id,displayMonth:t.displayMonth});return l.jsxs("div",{className:r.caption_dropdowns,style:i.caption_dropdowns,children:[l.jsx("div",{className:r.vhidden,children:u}),l.jsx(sOe,{onChange:o,displayMonth:t.displayMonth}),l.jsx(aOe,{onChange:o,displayMonth:t.displayMonth})]})}function pOe(t){return l.jsx("svg",ht({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:l.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function mOe(t){return l.jsx("svg",ht({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:l.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var lx=P.forwardRef(function(t,e){var n=xn(),r=n.classNames,i=n.styles,s=[r.button_reset,r.button];t.className&&s.push(t.className);var a=s.join(" "),o=ht(ht({},i.button_reset),i.button);return t.style&&Object.assign(o,t.style),l.jsx("button",ht({},t,{ref:e,type:"button",className:a,style:o}))});function gOe(t){var e,n,r=xn(),i=r.dir,s=r.locale,a=r.classNames,o=r.styles,c=r.labels,u=c.labelPrevious,d=c.labelNext,f=r.components;if(!t.nextMonth&&!t.previousMonth)return l.jsx(l.Fragment,{});var h=u(t.previousMonth,{locale:s}),p=[a.nav_button,a.nav_button_previous].join(" "),m=d(t.nextMonth,{locale:s}),g=[a.nav_button,a.nav_button_next].join(" "),b=(e=f==null?void 0:f.IconRight)!==null&&e!==void 0?e:mOe,x=(n=f==null?void 0:f.IconLeft)!==null&&n!==void 0?n:pOe;return l.jsxs("div",{className:a.nav,style:o.nav,children:[!t.hidePrevious&&l.jsx(lx,{name:"previous-month","aria-label":h,className:p,style:o.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:i==="rtl"?l.jsx(b,{className:a.nav_icon,style:o.nav_icon}):l.jsx(x,{className:a.nav_icon,style:o.nav_icon})}),!t.hideNext&&l.jsx(lx,{name:"next-month","aria-label":m,className:g,style:o.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:i==="rtl"?l.jsx(x,{className:a.nav_icon,style:o.nav_icon}):l.jsx(b,{className:a.nav_icon,style:o.nav_icon})})]})}function z5(t){var e=xn().numberOfMonths,n=Pv(),r=n.previousMonth,i=n.nextMonth,s=n.goToMonth,a=n.displayMonths,o=a.findIndex(function(m){return qP(t.displayMonth,m)}),c=o===0,u=o===a.length-1,d=e>1&&(c||!u),f=e>1&&(u||!c),h=function(){r&&s(r)},p=function(){i&&s(i)};return l.jsx(gOe,{displayMonth:t.displayMonth,hideNext:d,hidePrevious:f,nextMonth:i,previousMonth:r,onPreviousClick:h,onNextClick:p})}function vOe(t){var e,n=xn(),r=n.classNames,i=n.disableNavigation,s=n.styles,a=n.captionLayout,o=n.components,c=(e=o==null?void 0:o.CaptionLabel)!==null&&e!==void 0?e:gU,u;return i?u=l.jsx(c,{id:t.id,displayMonth:t.displayMonth}):a==="dropdown"?u=l.jsx(L5,{displayMonth:t.displayMonth,id:t.id}):a==="dropdown-buttons"?u=l.jsxs(l.Fragment,{children:[l.jsx(L5,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),l.jsx(z5,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):u=l.jsxs(l.Fragment,{children:[l.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),l.jsx(z5,{displayMonth:t.displayMonth,id:t.id})]}),l.jsx("div",{className:r.caption,style:s.caption,children:u})}function yOe(t){var e=xn(),n=e.footer,r=e.styles,i=e.classNames.tfoot;return n?l.jsx("tfoot",{className:i,style:r.tfoot,children:l.jsx("tr",{children:l.jsx("td",{colSpan:8,children:n})})}):l.jsx(l.Fragment,{})}function bOe(t,e,n){for(var r=n?$u(new Date):Ha(new Date,{locale:t,weekStartsOn:e}),i=[],s=0;s<7;s++){var a=xi(r,s);i.push(a)}return i}function xOe(){var t=xn(),e=t.classNames,n=t.styles,r=t.showWeekNumber,i=t.locale,s=t.weekStartsOn,a=t.ISOWeek,o=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,u=bOe(i,s,a);return l.jsxs("tr",{style:n.head_row,className:e.head_row,children:[r&&l.jsx("td",{style:n.head_cell,className:e.head_cell}),u.map(function(d,f){return l.jsx("th",{scope:"col",className:e.head_cell,style:n.head_cell,"aria-label":c(d,{locale:i}),children:o(d,{locale:i})},f)})]})}function wOe(){var t,e=xn(),n=e.classNames,r=e.styles,i=e.components,s=(t=i==null?void 0:i.HeadRow)!==null&&t!==void 0?t:xOe;return l.jsx("thead",{style:r.head,className:n.head,children:l.jsx(s,{})})}function _Oe(t){var e=xn(),n=e.locale,r=e.formatters.formatDay;return l.jsx(l.Fragment,{children:r(t.date,{locale:n})})}var GP=P.createContext(void 0);function SOe(t){if(!Cv(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return l.jsx(GP.Provider,{value:e,children:t.children})}return l.jsx(AOe,{initialProps:t.initialProps,children:t.children})}function AOe(t){var e=t.initialProps,n=t.children,r=e.selected,i=e.min,s=e.max,a=function(u,d,f){var h,p;(h=e.onDayClick)===null||h===void 0||h.call(e,u,d,f);var m=!!(d.selected&&i&&(r==null?void 0:r.length)===i);if(!m){var g=!!(!d.selected&&s&&(r==null?void 0:r.length)===s);if(!g){var b=r?pU([],r):[];if(d.selected){var x=b.findIndex(function(w){return Ri(u,w)});b.splice(x,1)}else b.push(u);(p=e.onSelect)===null||p===void 0||p.call(e,b,u,d,f)}}},o={disabled:[]};r&&o.disabled.push(function(u){var d=s&&r.length>s-1,f=r.some(function(h){return Ri(h,u)});return!!(d&&!f)});var c={selected:r,onDayClick:a,modifiers:o};return l.jsx(GP.Provider,{value:c,children:n})}function YP(){var t=P.useContext(GP);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function EOe(t,e){var n=e||{},r=n.from,i=n.to;return r&&i?Ri(i,t)&&Ri(r,t)?void 0:Ri(i,t)?{from:i,to:void 0}:Ri(r,t)?void 0:B2(r,t)?{from:t,to:i}:{from:r,to:t}:i?B2(t,i)?{from:i,to:t}:{from:t,to:i}:r?hU(t,r)?{from:t,to:r}:{from:r,to:t}:{from:t,to:void 0}}var QP=P.createContext(void 0);function jOe(t){if(!Tv(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return l.jsx(QP.Provider,{value:e,children:t.children})}return l.jsx(COe,{initialProps:t.initialProps,children:t.children})}function COe(t){var e=t.initialProps,n=t.children,r=e.selected,i=r||{},s=i.from,a=i.to,o=e.min,c=e.max,u=function(p,m,g){var b,x;(b=e.onDayClick)===null||b===void 0||b.call(e,p,m,g);var w=EOe(p,r);(x=e.onSelect)===null||x===void 0||x.call(e,w,p,m,g)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(s?(d.range_start=[s],a?(d.range_end=[a],Ri(s,a)||(d.range_middle=[{after:s,before:a}])):d.range_end=[s]):a&&(d.range_start=[a],d.range_end=[a]),o&&(s&&!a&&d.disabled.push({after:nS(s,o-1),before:xi(s,o-1)}),s&&a&&d.disabled.push({after:s,before:xi(s,o-1)}),!s&&a&&d.disabled.push({after:nS(a,o-1),before:xi(a,o-1)})),c){if(s&&!a&&(d.disabled.push({before:xi(s,-c+1)}),d.disabled.push({after:xi(s,c-1)})),s&&a){var f=Da(a,s)+1,h=c-f;d.disabled.push({before:nS(s,h)}),d.disabled.push({after:xi(a,h)})}!s&&a&&(d.disabled.push({before:xi(a,-c+1)}),d.disabled.push({after:xi(a,c-1)}))}return l.jsx(QP.Provider,{value:{selected:r,onDayClick:u,modifiers:d},children:n})}function XP(){var t=P.useContext(QP);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function a0(t){return Array.isArray(t)?pU([],t):t!==void 0?[t]:[]}function TOe(t){var e={};return Object.entries(t).forEach(function(n){var r=n[0],i=n[1];e[r]=a0(i)}),e}var ua;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(ua||(ua={}));var POe=ua.Selected,oo=ua.Disabled,NOe=ua.Hidden,kOe=ua.Today,iS=ua.RangeEnd,sS=ua.RangeMiddle,aS=ua.RangeStart,DOe=ua.Outside;function IOe(t,e,n){var r,i=(r={},r[POe]=a0(t.selected),r[oo]=a0(t.disabled),r[NOe]=a0(t.hidden),r[kOe]=[t.today],r[iS]=[],r[sS]=[],r[aS]=[],r[DOe]=[],r);return t.fromDate&&i[oo].push({before:t.fromDate}),t.toDate&&i[oo].push({after:t.toDate}),Cv(t)?i[oo]=i[oo].concat(e.modifiers[oo]):Tv(t)&&(i[oo]=i[oo].concat(n.modifiers[oo]),i[aS]=n.modifiers[aS],i[sS]=n.modifiers[sS],i[iS]=n.modifiers[iS]),i}var bU=P.createContext(void 0);function OOe(t){var e=xn(),n=YP(),r=XP(),i=IOe(e,n,r),s=TOe(e.modifiers),a=ht(ht({},i),s);return l.jsx(bU.Provider,{value:a,children:t.children})}function xU(){var t=P.useContext(bU);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function MOe(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function ROe(t){return!!(t&&typeof t=="object"&&"from"in t)}function LOe(t){return!!(t&&typeof t=="object"&&"after"in t)}function zOe(t){return!!(t&&typeof t=="object"&&"before"in t)}function $Oe(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function FOe(t,e){var n,r=e.from,i=e.to;if(r&&i){var s=Da(i,r)<0;s&&(n=[i,r],r=n[0],i=n[1]);var a=Da(t,r)>=0&&Da(i,t)>=0;return a}return i?Ri(i,t):r?Ri(r,t):!1}function VOe(t){return UP(t)}function BOe(t){return Array.isArray(t)&&t.every(UP)}function UOe(t,e){return e.some(function(n){if(typeof n=="boolean")return n;if(VOe(n))return Ri(t,n);if(BOe(n))return n.includes(t);if(ROe(n))return FOe(t,n);if($Oe(n))return n.dayOfWeek.includes(t.getDay());if(MOe(n)){var r=Da(n.before,t),i=Da(n.after,t),s=r>0,a=i<0,o=B2(n.before,n.after);return o?a&&s:s||a}return LOe(n)?Da(t,n.after)>0:zOe(n)?Da(n.before,t)>0:typeof n=="function"?n(t):!1})}function ZP(t,e,n){var r=Object.keys(e).reduce(function(s,a){var o=e[a];return UOe(t,o)&&s.push(a),s},[]),i={};return r.forEach(function(s){return i[s]=!0}),n&&!qP(t,n)&&(i.outside=!0),i}function WOe(t,e){for(var n=Bi(t[0]),r=WP(t[t.length-1]),i,s,a=n;a<=r;){var o=ZP(a,e),c=!o.disabled&&!o.hidden;if(!c){a=xi(a,1);continue}if(o.selected)return a;o.today&&!s&&(s=a),i||(i=a),a=xi(a,1)}return s||i}var HOe=365;function wU(t,e){var n=e.moveBy,r=e.direction,i=e.context,s=e.modifiers,a=e.retry,o=a===void 0?{count:0,lastFocused:t}:a,c=i.weekStartsOn,u=i.fromDate,d=i.toDate,f=i.locale,h={day:xi,week:V2,month:ca,year:iDe,startOfWeek:function(b){return i.ISOWeek?$u(b):Ha(b,{locale:f,weekStartsOn:c})},endOfWeek:function(b){return i.ISOWeek?aU(b):HP(b,{locale:f,weekStartsOn:c})}},p=h[n](t,r==="after"?1:-1);r==="before"&&u?p=sDe([u,p]):r==="after"&&d&&(p=aDe([d,p]));var m=!0;if(s){var g=ZP(p,s);m=!g.disabled&&!g.hidden}return m?p:o.count>HOe?o.lastFocused:wU(p,{moveBy:n,direction:r,context:i,modifiers:s,retry:ht(ht({},o),{count:o.count+1})})}var _U=P.createContext(void 0);function qOe(t){var e=Pv(),n=xU(),r=P.useState(),i=r[0],s=r[1],a=P.useState(),o=a[0],c=a[1],u=WOe(e.displayMonths,n),d=i??(o&&e.isDateDisplayed(o))?o:u,f=function(){c(i),s(void 0)},h=function(b){s(b)},p=xn(),m=function(b,x){if(i){var w=wU(i,{moveBy:b,direction:x,context:p,modifiers:n});Ri(i,w)||(e.goToDate(w,i),h(w))}},g={focusedDay:i,focusTarget:d,blur:f,focus:h,focusDayAfter:function(){return m("day","after")},focusDayBefore:function(){return m("day","before")},focusWeekAfter:function(){return m("week","after")},focusWeekBefore:function(){return m("week","before")},focusMonthBefore:function(){return m("month","before")},focusMonthAfter:function(){return m("month","after")},focusYearBefore:function(){return m("year","before")},focusYearAfter:function(){return m("year","after")},focusStartOfWeek:function(){return m("startOfWeek","before")},focusEndOfWeek:function(){return m("endOfWeek","after")}};return l.jsx(_U.Provider,{value:g,children:t.children})}function JP(){var t=P.useContext(_U);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function KOe(t,e){var n=xU(),r=ZP(t,n,e);return r}var eN=P.createContext(void 0);function GOe(t){if(!o1(t.initialProps)){var e={selected:void 0};return l.jsx(eN.Provider,{value:e,children:t.children})}return l.jsx(YOe,{initialProps:t.initialProps,children:t.children})}function YOe(t){var e=t.initialProps,n=t.children,r=function(s,a,o){var c,u,d;if((c=e.onDayClick)===null||c===void 0||c.call(e,s,a,o),a.selected&&!e.required){(u=e.onSelect)===null||u===void 0||u.call(e,void 0,s,a,o);return}(d=e.onSelect)===null||d===void 0||d.call(e,s,s,a,o)},i={selected:e.selected,onDayClick:r};return l.jsx(eN.Provider,{value:i,children:n})}function SU(){var t=P.useContext(eN);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function QOe(t,e){var n=xn(),r=SU(),i=YP(),s=XP(),a=JP(),o=a.focusDayAfter,c=a.focusDayBefore,u=a.focusWeekAfter,d=a.focusWeekBefore,f=a.blur,h=a.focus,p=a.focusMonthBefore,m=a.focusMonthAfter,g=a.focusYearBefore,b=a.focusYearAfter,x=a.focusStartOfWeek,w=a.focusEndOfWeek,_=function(U){var F,q,Z,re;o1(n)?(F=r.onDayClick)===null||F===void 0||F.call(r,t,e,U):Cv(n)?(q=i.onDayClick)===null||q===void 0||q.call(i,t,e,U):Tv(n)?(Z=s.onDayClick)===null||Z===void 0||Z.call(s,t,e,U):(re=n.onDayClick)===null||re===void 0||re.call(n,t,e,U)},E=function(U){var F;h(t),(F=n.onDayFocus)===null||F===void 0||F.call(n,t,e,U)},j=function(U){var F;f(),(F=n.onDayBlur)===null||F===void 0||F.call(n,t,e,U)},T=function(U){var F;(F=n.onDayMouseEnter)===null||F===void 0||F.call(n,t,e,U)},A=function(U){var F;(F=n.onDayMouseLeave)===null||F===void 0||F.call(n,t,e,U)},C=function(U){var F;(F=n.onDayPointerEnter)===null||F===void 0||F.call(n,t,e,U)},D=function(U){var F;(F=n.onDayPointerLeave)===null||F===void 0||F.call(n,t,e,U)},O=function(U){var F;(F=n.onDayTouchCancel)===null||F===void 0||F.call(n,t,e,U)},L=function(U){var F;(F=n.onDayTouchEnd)===null||F===void 0||F.call(n,t,e,U)},z=function(U){var F;(F=n.onDayTouchMove)===null||F===void 0||F.call(n,t,e,U)},M=function(U){var F;(F=n.onDayTouchStart)===null||F===void 0||F.call(n,t,e,U)},G=function(U){var F;(F=n.onDayKeyUp)===null||F===void 0||F.call(n,t,e,U)},K=function(U){var F;switch(U.key){case"ArrowLeft":U.preventDefault(),U.stopPropagation(),n.dir==="rtl"?o():c();break;case"ArrowRight":U.preventDefault(),U.stopPropagation(),n.dir==="rtl"?c():o();break;case"ArrowDown":U.preventDefault(),U.stopPropagation(),u();break;case"ArrowUp":U.preventDefault(),U.stopPropagation(),d();break;case"PageUp":U.preventDefault(),U.stopPropagation(),U.shiftKey?g():p();break;case"PageDown":U.preventDefault(),U.stopPropagation(),U.shiftKey?b():m();break;case"Home":U.preventDefault(),U.stopPropagation(),x();break;case"End":U.preventDefault(),U.stopPropagation(),w();break}(F=n.onDayKeyDown)===null||F===void 0||F.call(n,t,e,U)},B={onClick:_,onFocus:E,onBlur:j,onKeyDown:K,onKeyUp:G,onMouseEnter:T,onMouseLeave:A,onPointerEnter:C,onPointerLeave:D,onTouchCancel:O,onTouchEnd:L,onTouchMove:z,onTouchStart:M};return B}function XOe(){var t=xn(),e=SU(),n=YP(),r=XP(),i=o1(t)?e.selected:Cv(t)?n.selected:Tv(t)?r.selected:void 0;return i}function ZOe(t){return Object.values(ua).includes(t)}function JOe(t,e){var n=[t.classNames.day];return Object.keys(e).forEach(function(r){var i=t.modifiersClassNames[r];if(i)n.push(i);else if(ZOe(r)){var s=t.classNames["day_".concat(r)];s&&n.push(s)}}),n}function eMe(t,e){var n=ht({},t.styles.day);return Object.keys(e).forEach(function(r){var i;n=ht(ht({},n),(i=t.modifiersStyles)===null||i===void 0?void 0:i[r])}),n}function tMe(t,e,n){var r,i,s,a=xn(),o=JP(),c=KOe(t,e),u=QOe(t,c),d=XOe(),f=!!(a.onDayClick||a.mode!=="default");P.useEffect(function(){var T;c.outside||o.focusedDay&&f&&Ri(o.focusedDay,t)&&((T=n.current)===null||T===void 0||T.focus())},[o.focusedDay,t,n,f,c.outside]);var h=JOe(a,c).join(" "),p=eMe(a,c),m=!!(c.outside&&!a.showOutsideDays||c.hidden),g=(s=(i=a.components)===null||i===void 0?void 0:i.DayContent)!==null&&s!==void 0?s:_Oe,b=l.jsx(g,{date:t,displayMonth:e,activeModifiers:c}),x={style:p,className:h,children:b,role:"gridcell"},w=o.focusTarget&&Ri(o.focusTarget,t)&&!c.outside,_=o.focusedDay&&Ri(o.focusedDay,t),E=ht(ht(ht({},x),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=_||w?0:-1,r)),u),j={isButton:f,isHidden:m,activeModifiers:c,selectedDays:d,buttonProps:E,divProps:x};return j}function nMe(t){var e=P.useRef(null),n=tMe(t.date,t.displayMonth,e);return n.isHidden?l.jsx("div",{role:"gridcell"}):n.isButton?l.jsx(lx,ht({name:"day",ref:e},n.buttonProps)):l.jsx("div",ht({},n.divProps))}function rMe(t){var e=t.number,n=t.dates,r=xn(),i=r.onWeekNumberClick,s=r.styles,a=r.classNames,o=r.locale,c=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,d=u(Number(e),{locale:o});if(!i)return l.jsx("span",{className:a.weeknumber,style:s.weeknumber,children:d});var f=c(Number(e),{locale:o}),h=function(p){i(e,n,p)};return l.jsx(lx,{name:"week-number","aria-label":f,className:a.weeknumber,style:s.weeknumber,onClick:h,children:d})}function iMe(t){var e,n,r=xn(),i=r.styles,s=r.classNames,a=r.showWeekNumber,o=r.components,c=(e=o==null?void 0:o.Day)!==null&&e!==void 0?e:nMe,u=(n=o==null?void 0:o.WeekNumber)!==null&&n!==void 0?n:rMe,d;return a&&(d=l.jsx("td",{className:s.cell,style:i.cell,children:l.jsx(u,{number:t.weekNumber,dates:t.dates})})),l.jsxs("tr",{className:s.row,style:i.row,children:[d,t.dates.map(function(f){return l.jsx("td",{className:s.cell,style:i.cell,role:"presentation",children:l.jsx(c,{displayMonth:t.displayMonth,date:f})},iIe(f))})]})}function $5(t,e,n){for(var r=n!=null&&n.ISOWeek?aU(e):HP(e,n),i=n!=null&&n.ISOWeek?$u(t):Ha(t,n),s=Da(r,i),a=[],o=0;o<=s;o++)a.push(xi(i,o));var c=a.reduce(function(u,d){var f=n!=null&&n.ISOWeek?cU(d):dU(d,n),h=u.find(function(p){return p.weekNumber===f});return h?(h.dates.push(d),u):(u.push({weekNumber:f,dates:[d]}),u)},[]);return c}function sMe(t,e){var n=$5(Bi(t),WP(t),e);if(e!=null&&e.useFixedWeeks){var r=aIe(t,e);if(r<6){var i=n[n.length-1],s=i.dates[i.dates.length-1],a=V2(s,6-r),o=$5(V2(s,1),a,e);n.push.apply(n,o)}}return n}function aMe(t){var e,n,r,i=xn(),s=i.locale,a=i.classNames,o=i.styles,c=i.hideHead,u=i.fixedWeeks,d=i.components,f=i.weekStartsOn,h=i.firstWeekContainsDate,p=i.ISOWeek,m=sMe(t.displayMonth,{useFixedWeeks:!!u,ISOWeek:p,locale:s,weekStartsOn:f,firstWeekContainsDate:h}),g=(e=d==null?void 0:d.Head)!==null&&e!==void 0?e:wOe,b=(n=d==null?void 0:d.Row)!==null&&n!==void 0?n:iMe,x=(r=d==null?void 0:d.Footer)!==null&&r!==void 0?r:yOe;return l.jsxs("table",{id:t.id,className:a.table,style:o.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&l.jsx(g,{}),l.jsx("tbody",{className:a.tbody,style:o.tbody,children:m.map(function(w){return l.jsx(b,{displayMonth:t.displayMonth,dates:w.dates,weekNumber:w.weekNumber},w.weekNumber)})}),l.jsx(x,{displayMonth:t.displayMonth})]})}function oMe(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var lMe=oMe()?P.useLayoutEffect:P.useEffect,oS=!1,cMe=0;function F5(){return"react-day-picker-".concat(++cMe)}function uMe(t){var e,n=t??(oS?F5():null),r=P.useState(n),i=r[0],s=r[1];return lMe(function(){i===null&&s(F5())},[]),P.useEffect(function(){oS===!1&&(oS=!0)},[]),(e=t??i)!==null&&e!==void 0?e:void 0}function dMe(t){var e,n,r=xn(),i=r.dir,s=r.classNames,a=r.styles,o=r.components,c=Pv().displayMonths,u=uMe(r.id?"".concat(r.id,"-").concat(t.displayIndex):void 0),d=r.id?"".concat(r.id,"-grid-").concat(t.displayIndex):void 0,f=[s.month],h=a.month,p=t.displayIndex===0,m=t.displayIndex===c.length-1,g=!p&&!m;i==="rtl"&&(e=[p,m],m=e[0],p=e[1]),p&&(f.push(s.caption_start),h=ht(ht({},h),a.caption_start)),m&&(f.push(s.caption_end),h=ht(ht({},h),a.caption_end)),g&&(f.push(s.caption_between),h=ht(ht({},h),a.caption_between));var b=(n=o==null?void 0:o.Caption)!==null&&n!==void 0?n:vOe;return l.jsxs("div",{className:f.join(" "),style:h,children:[l.jsx(b,{id:u,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),l.jsx(aMe,{id:d,"aria-labelledby":u,displayMonth:t.displayMonth})]},t.displayIndex)}function fMe(t){var e=xn(),n=e.classNames,r=e.styles;return l.jsx("div",{className:n.months,style:r.months,children:t.children})}function hMe(t){var e,n,r=t.initialProps,i=xn(),s=JP(),a=Pv(),o=P.useState(!1),c=o[0],u=o[1];P.useEffect(function(){i.initialFocus&&s.focusTarget&&(c||(s.focus(s.focusTarget),u(!0)))},[i.initialFocus,c,s.focus,s.focusTarget,s]);var d=[i.classNames.root,i.className];i.numberOfMonths>1&&d.push(i.classNames.multiple_months),i.showWeekNumber&&d.push(i.classNames.with_weeknumber);var f=ht(ht({},i.styles.root),i.style),h=Object.keys(r).filter(function(m){return m.startsWith("data-")}).reduce(function(m,g){var b;return ht(ht({},m),(b={},b[g]=r[g],b))},{}),p=(n=(e=r.components)===null||e===void 0?void 0:e.Months)!==null&&n!==void 0?n:fMe;return l.jsx("div",ht({className:d.join(" "),style:f,dir:i.dir,id:i.id,nonce:r.nonce,title:r.title,lang:r.lang},h,{children:l.jsx(p,{children:a.displayMonths.map(function(m,g){return l.jsx(dMe,{displayIndex:g,displayMonth:m},g)})})}))}function pMe(t){var e=t.children,n=zIe(t,["children"]);return l.jsx(rOe,{initialProps:n,children:l.jsx(hOe,{children:l.jsx(GOe,{initialProps:n,children:l.jsx(SOe,{initialProps:n,children:l.jsx(jOe,{initialProps:n,children:l.jsx(OOe,{children:l.jsx(qOe,{children:e})})})})})})})}function Yh(t){return l.jsx(pMe,ht({},t,{children:l.jsx(hMe,{initialProps:t})}))}const V5=[{count:1,name:"Simple"},{count:2,name:"Doble"},{count:3,name:"Triple"},{count:4,name:"Cuádruple"},{count:5,name:"Quíntuple"}],mMe=140,B5=7,gMe=`
  .rdp {
    --rdp-cell-size: 40px; --rdp-accent-color: #FF9500; --rdp-background-color: #1c1c1e;
    --rdp-accent-color-dark: #FF9500; --rdp-background-color-dark: #1c1c1e;
    --rdp-outline: 2px solid var(--rdp-accent-color); --rdp-border-radius: 12px; color: #FFF;
  }
  .rdp-caption_label, .rdp-nav_button { color: #FF9500; }
  .rdp-head_cell { color: #8e8e93; }
  .rdp-day_selected { background-color: var(--rdp-accent-color); color: #000; font-weight: bold; }
`,id=({isOpen:t,onClose:e,motherId:n})=>{const{fathers:r,addFather:i,addParturition:s,parturitions:a}=Ze(),[o,c]=P.useState(1),[u,d]=P.useState(new Date().toISOString().split("T")[0]),[f,h]=P.useState(""),[p,m]=P.useState(1),[g,b]=P.useState([]),[x,w]=P.useState(!1),[_,E]=P.useState(!1),[j,T]=P.useState(!1),[A,C]=P.useState("");P.useEffect(()=>{t&&(c(1),d(new Date().toISOString().split("T")[0]),h(""),m(1),b([]),T(!1),C(""))},[t]);const D=()=>c(B=>B<4?B+1:B),O=()=>c(B=>B>1?B-1:B),L=B=>{m(B),b(Array.from({length:B},(U,F)=>({id:`kid_${F}_${Date.now()}`,sex:"Hembra",status:"Viva",correlative:"",birthWeight:""}))),D()},z=(B,U,F)=>{const q=[...g];let Z=F;U==="birthWeight"&&parseFloat(F)>B5&&(Z=B5.toString()),q[B]={...q[B],[U]:Z},b(q)},M=async()=>{var q;T(!0),C("");const B=a.filter(Z=>Z.goatId.toUpperCase()===n.toUpperCase()),U=new Date(u).getTime();if(B.some(Z=>{const re=new Date(Z.parturitionDate).getTime();return Math.abs(U-re)/(1e3*60*60*24)<mMe})){C(`Ya existe un parto registrado para ${n} en una fecha demasiado cercana.`),T(!1);return}try{const Z=r.find(De=>De.id===f);if(!Z)throw new Error("Padre no encontrado");const re=g.filter(De=>De.status==="Viva"),he=g.some(De=>De.status==="Mortinato"),ye=re.map(De=>({sex:De.sex,birthWeight:De.birthWeight,id:`${De.sex==="Macho"?"X":Z.name.charAt(0).toUpperCase()}${De.correlative}`}));await s({motherId:n.toUpperCase(),parturitionDate:u,sireId:f,parturitionType:((q=V5.find(De=>De.count===p))==null?void 0:q.name)||"Simple",offspringCount:g.length,liveOffspring:ye,parturitionOutcome:he?"Con Mortinatos":"Normal"}),D(),setTimeout(e,2e3)}catch(Z){C(Z.message||"Error al registrar el parto. Revisa los datos."),console.error(Z),T(!1)}},G=P.useMemo(()=>r.find(B=>B.id===f),[f,r]),K=async B=>{await i(B),h(B.id),w(!1)};return t?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex flex-col justify-end z-50 animate-fade-in",onClick:e,children:l.jsxs("div",{className:"bg-ios-modal-bg w-full h-[95vh] rounded-t-2xl flex flex-col animate-slide-up",onClick:B=>B.stopPropagation(),children:[l.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between p-4 border-b border-brand-border",children:[o>1&&o<4&&l.jsx("button",{onClick:O,className:"p-2 text-zinc-400 hover:text-white",children:l.jsx(nr,{size:24})}),l.jsxs("h1",{className:"text-xl font-bold tracking-tight text-white mx-auto",children:["Registrar Parto para ",n]}),o<4?l.jsx("button",{onClick:e,className:"p-2 text-zinc-400 hover:text-white",children:l.jsx(Fo,{size:24})}):l.jsx("div",{className:"w-10"})]}),l.jsxs("main",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:[o===1&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Fecha del Parto"}),l.jsxs("button",{type:"button",onClick:()=>E(!0),className:"w-full bg-zinc-800 p-4 rounded-xl text-lg text-left flex justify-between items-center",children:[l.jsx("span",{className:u?"text-white":"text-zinc-500",children:u?new Date(u+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"}):"Seleccionar Fecha"}),l.jsx(Is,{className:"text-zinc-400",size:20})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Padre (Semental)"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{value:f,onChange:B=>h(B.target.value),className:"w-full bg-zinc-800 p-4 rounded-xl text-lg appearance-none",children:[l.jsx("option",{value:"",children:"Seleccionar Padre..."}),r.map(B=>l.jsxs("option",{value:B.id,children:[B.name," (",B.id,")"]},B.id))]}),l.jsx("button",{type:"button",onClick:()=>w(!0),className:"flex-shrink-0 p-4 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",children:l.jsx(Er,{size:24})})]})]}),l.jsx("button",{onClick:D,disabled:!u||!f,className:"w-full bg-brand-orange text-white font-bold py-4 rounded-xl text-lg disabled:opacity-50",children:"Siguiente"})]}),o===2&&l.jsxs("div",{className:"space-y-6 text-center",children:[l.jsx("h2",{className:"text-2xl font-semibold text-white",children:"¿Cuántas crías nacieron?"}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:V5.map(B=>l.jsx("button",{onClick:()=>L(B.count),className:"bg-zinc-800 hover:bg-zinc-700 text-white font-bold py-8 rounded-2xl text-2xl transition-colors",children:B.name},B.count))})]}),o===3&&l.jsxs("div",{className:"space-y-4",children:[g.map((B,U)=>{const F=B.status==="Mortinato";return l.jsxs("div",{className:`bg-black/20 rounded-2xl p-4 border transition-colors ${F?"border-red-500/30":"border-zinc-700"} space-y-3`,children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("p",{className:"font-semibold text-brand-orange",children:["Cría ",U+1]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("div",{className:"w-32",children:l.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[l.jsx("button",{type:"button",onClick:()=>z(U,"status","Viva"),className:`w-1/2 text-xs rounded-md py-1 transition-all ${F?"text-zinc-400":"bg-green-600 text-white"}`,children:"Viva"}),l.jsx("button",{type:"button",onClick:()=>z(U,"status","Mortinato"),className:`w-1/2 text-xs rounded-md py-1 transition-all ${F?"bg-red-600 text-white":"text-zinc-400"}`,children:"Mortinato"})]})}),l.jsx("div",{className:"w-32",children:l.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[l.jsx("button",{type:"button",onClick:()=>z(U,"sex","Hembra"),className:`w-1/2 text-xs rounded-md py-1 transition-all ${B.sex==="Hembra"?"bg-pink-500 text-white":"text-zinc-400"}`,children:"Hembra"}),l.jsx("button",{type:"button",onClick:()=>z(U,"sex","Macho"),className:`w-1/2 text-xs rounded-md py-1 transition-all ${B.sex==="Macho"?"bg-blue-500 text-white":"text-zinc-400"}`,children:"Macho"})]})})]})]}),l.jsxs("div",{className:`grid grid-cols-2 gap-3 items-center transition-opacity ${F?"opacity-40":"opacity-100"}`,children:[l.jsxs("div",{className:"flex items-center bg-zinc-800 p-3 rounded-xl gap-2",children:[l.jsx("span",{className:"font-mono text-zinc-400 text-lg",children:B.sex==="Macho"?"X":(G==null?void 0:G.name.charAt(0).toUpperCase())||"?"}),l.jsx("input",{autoFocus:U===0,value:B.correlative,onChange:q=>z(U,"correlative",q.target.value.toUpperCase()),placeholder:"ID",className:"w-full bg-transparent text-lg text-white focus:outline-none",disabled:F})]}),l.jsx("input",{value:B.birthWeight,onChange:q=>z(U,"birthWeight",q.target.value),placeholder:"Peso (Kg)",type:"number",step:"0.1",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",disabled:F})]})]},B.id)}),l.jsx("button",{onClick:M,disabled:j||g.some(B=>B.status==="Viva"&&(!B.correlative||!B.birthWeight)),className:"w-full bg-brand-green text-white font-bold py-4 rounded-xl text-lg disabled:opacity-50",children:j?"Guardando...":`Guardar Parto y ${p} Cría(s)`}),A&&l.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[l.jsx(Vt,{size:18}),l.jsx("span",{children:A})]})]}),o===4&&l.jsxs("div",{className:"text-center flex flex-col justify-center items-center h-full",children:[l.jsx(ri,{size:80,className:"text-brand-green mb-4"}),l.jsx("h2",{className:"text-3xl font-bold text-white",children:"¡Éxito!"}),l.jsx("p",{className:"text-lg text-zinc-400",children:"El parto y las crías se han registrado correctamente."})]})]})]})}),l.jsxs(nt,{isOpen:_,onClose:()=>E(!1),title:"Seleccionar Fecha del Parto",children:[l.jsx("style",{children:gMe}),l.jsx("div",{className:"flex justify-center",children:l.jsx(Yh,{mode:"single",selected:new Date(u+"T00:00:00"),onSelect:B=>{B&&d(B.toISOString().split("T")[0]),E(!1)},locale:KP,disabled:{after:new Date},captionLayout:"dropdown",fromYear:new Date().getFullYear()-20,toYear:new Date().getFullYear()})})]}),l.jsx(VP,{isOpen:x,onClose:()=>w(!1),onSave:K})]}):null},tN=({animal:t,onSaveSuccess:e,onCancel:n})=>{const{parturitions:r,addWeighing:i,startDryingProcess:s,setLactationAsDry:a}=Ze(),[o,c]=P.useState(new Date().toISOString().split("T")[0]),[u,d]=P.useState(""),[f,h]=P.useState(!1),[p,m]=P.useState(null),[g,b]=P.useState(!1),x=P.useMemo(()=>r.filter(T=>T.goatId===t.id&&(T.status==="activa"||T.status==="en-secado")).sort((T,A)=>new Date(A.parturitionDate).getTime()-new Date(T.parturitionDate).getTime())[0],[r,t.id]),w=x?nd(x.parturitionDate,o):null,_=async T=>{if(T.preventDefault(),!x||x.status==="seca"||x.status==="finalizada"){m({type:"error",text:"No se puede guardar pesaje. El animal no tiene una lactancia activa o en secado."});return}m(null),h(!0);const A=parseFloat(u);if(isNaN(A)||A<=0){m({type:"error",text:"Por favor, introduce un peso válido."}),h(!1);return}if(A>8.5){m({type:"error",text:"La producción parece irracionalmente alta."}),h(!1);return}try{await i({goatId:t.id,date:o,kg:A}),m({type:"success",text:`Pesaje de ${t.id} guardado con éxito.`}),setTimeout(e,1500)}catch(C){m({type:"error",text:C.message||"No se pudo guardar el pesaje."}),h(!1)}},E=async()=>{if(!(!x||x.status!=="activa")){h(!0),m(null);try{await s(x.id),m({type:"success",text:"Proceso de secado iniciado con éxito."}),setTimeout(e,1500)}catch(T){m({type:"error",text:T.message||"No se pudo iniciar el secado."}),h(!1)}}},j=async()=>{if(!(!x||x.status==="seca"||x.status==="finalizada")){h(!0),m(null);try{await a(x.id),m({type:"success",text:"Lactancia declarada como seca con éxito."}),setTimeout(e,1500)}catch(T){m({type:"error",text:T.message||"No se pudo finalizar la lactancia."}),h(!1)}}};return l.jsxs(l.Fragment,{children:[l.jsx(nt,{isOpen:!g,onClose:n,title:`Pesaje Lechero: ${t.id}`,children:l.jsx("div",{className:"space-y-4",children:x?l.jsxs("form",{onSubmit:_,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"weighingDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha"}),l.jsx("input",{id:"weighingDate",type:"date",value:o,onChange:T=>c(T.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Días en Leche (DEL)"}),l.jsx("div",{className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-center font-bold text-white",children:w??"N/A"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"weighingKg",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Producción (Kg)"}),l.jsx("input",{id:"weighingKg",type:"number",step:"0.1",value:u,onChange:T=>d(T.target.value),placeholder:"Ej: 3.5",autoFocus:!0,className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg",required:!0})]}),p&&l.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${p.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[p.type==="success"?l.jsx(ri,{size:18}):l.jsx(Vt,{size:18}),l.jsx("span",{children:p.text})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-brand-border",children:[l.jsx("button",{type:"button",onClick:n,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsxs("button",{type:"submit",disabled:f,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50 flex items-center gap-2",children:[l.jsx(Dh,{size:18})," Guardar Pesaje"]})]}),l.jsxs("div",{className:"space-y-2 pt-4 border-t border-brand-border",children:[l.jsx("h4",{className:"text-sm font-semibold text-zinc-400",children:"Otras Acciones de Lactancia"}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[l.jsxs("button",{type:"button",onClick:E,disabled:f||x.status!=="activa",className:"w-full flex items-center justify-center gap-2 bg-blue-600/20 text-blue-300 font-semibold py-3 px-3 rounded-lg hover:bg-blue-600/40 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(Yu,{size:16})," ",x.status==="en-secado"?"Ya en Secado":"Iniciar Secado"]}),l.jsxs("button",{type:"button",onClick:j,disabled:f||x.status==="seca"||x.status==="finalizada",className:"w-full flex items-center justify-center gap-2 bg-gray-600/20 text-gray-300 font-semibold py-3 px-3 rounded-lg hover:bg-gray-600/40 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(fa,{size:16})," ",x.status==="seca"?"Ya Seca":"Declarar Seca"]})]})]})]}):l.jsxs("div",{className:"text-center space-y-4",children:[l.jsx(Vt,{className:"mx-auto h-12 w-12 text-amber-400"}),l.jsx("h3",{className:"text-lg font-medium text-white",children:"Animal sin Parto Activo"}),l.jsx("p",{className:"text-sm text-zinc-400",children:"Para registrar un pesaje o gestionar el secado, debe tener un parto activo."}),l.jsxs("button",{onClick:()=>b(!0),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[l.jsx(Ua,{size:18})," Declarar Parto"]})]})})}),g&&l.jsx(id,{isOpen:g,onClose:()=>{b(!1)},motherId:t.id})]})},AU=({animal:t,onSaveSuccess:e,onCancel:n})=>{const{addBodyWeighing:r}=Ze(),[i,s]=P.useState(new Date().toISOString().split("T")[0]),[a,o]=P.useState(""),[c,u]=P.useState(!1),[d,f]=P.useState(null),h=async p=>{p.preventDefault(),f(null),u(!0);const m=parseFloat(a);if(isNaN(m)||m<=0){f({type:"error",text:"Por favor, introduce un peso válido."}),u(!1);return}if(m>50){f({type:"error",text:"El peso corporal excede los 50 Kg. Por favor, verifique el dato."}),u(!1);return}try{await r({animalId:t.id,date:i,kg:m}),f({type:"success",text:`Pesaje de ${t.id} guardado con éxito.`}),setTimeout(e,1500)}catch(g){f({type:"error",text:g.message||"No se pudo guardar el pesaje."}),u(!1)}};return l.jsx(nt,{isOpen:!0,onClose:n,title:`Pesaje Corporal: ${t.id}`,children:l.jsxs("form",{onSubmit:h,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"weighingDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha"}),l.jsx("input",{id:"weighingDate",type:"date",value:i,onChange:p=>s(p.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"weighingKg",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Peso (Kg)"}),l.jsx("input",{id:"weighingKg",type:"number",step:"0.1",value:a,onChange:p=>o(p.target.value),placeholder:"Ej: 32.5",autoFocus:!0,className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg",required:!0})]})]}),d&&l.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${d.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[d.type==="success"?l.jsx(ri,{size:18}):l.jsx(Vt,{size:18}),l.jsx("span",{children:d.text})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-brand-border",children:[l.jsx("button",{type:"button",onClick:n,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsxs("button",{type:"submit",disabled:c,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50 flex items-center gap-2",children:[l.jsx(Dh,{size:18})," Guardar"]})]})]})})},nN=({animal:t,onConfirm:e,onCancel:n})=>{const[r,i]=P.useState("Venta"),[s,a]=P.useState(new Date().toISOString().split("T")[0]),[o,c]=P.useState(""),[u,d]=P.useState(""),[f,h]=P.useState("Cría"),[p,m]=P.useState(""),[g,b]=P.useState(),[x,w]=P.useState(""),_=["Baja producción","Bajo índice de crecimiento","Inflamación articular","Linfadenitis caseosa","Sospecha de otras enfermedades"],E=()=>{const j={reason:r,date:s,salePrice:r==="Venta"&&parseFloat(o)||void 0,saleBuyer:r==="Venta"&&u||void 0,salePurpose:r==="Venta"?f:void 0,deathReason:r==="Muerte"&&p||void 0,cullReason:r==="Descarte"&&g||void 0,cullReasonDetails:r==="Descarte"&&g==="Sospecha de otras enfermedades"?x:void 0};e(j)};return l.jsx(nt,{isOpen:!0,onClose:n,title:`Dar de Baja a ${t.id}`,children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex bg-zinc-800 rounded-xl p-1 w-full",children:[l.jsx("button",{onClick:()=>i("Venta"),className:`w-1/3 rounded-lg py-2 text-sm font-semibold transition-colors ${r==="Venta"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"Venta"}),l.jsx("button",{onClick:()=>i("Muerte"),className:`w-1/3 rounded-lg py-2 text-sm font-semibold transition-colors ${r==="Muerte"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"Muerte"}),l.jsx("button",{onClick:()=>i("Descarte"),className:`w-1/3 rounded-lg py-2 text-sm font-semibold transition-colors ${r==="Descarte"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"Descarte"})]}),l.jsxs("div",{className:"animate-fade-in",children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha del Evento"}),l.jsx("input",{type:"date",value:s,onChange:j=>a(j.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg"})]}),r==="Venta"&&l.jsxs("div",{className:"space-y-4 animate-fade-in",children:[l.jsx("input",{type:"number",value:o,onChange:j=>c(j.target.value),placeholder:"Precio de Venta (Opcional)",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg"}),l.jsx("input",{type:"text",value:u,onChange:j=>d(j.target.value),placeholder:"Comprador (Opcional)",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg"}),l.jsxs("select",{value:f,onChange:j=>h(j.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",children:[l.jsx("option",{value:"Cría",children:"Para Cría"}),l.jsx("option",{value:"Carne",children:"Para Carne"})]})]}),r==="Muerte"&&l.jsx("div",{className:"animate-fade-in",children:l.jsx("textarea",{value:p,onChange:j=>m(j.target.value),placeholder:"Causa / Descripción de la muerte...",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",rows:3})}),r==="Descarte"&&l.jsxs("div",{className:"space-y-4 animate-fade-in",children:[l.jsxs("select",{value:g||"",onChange:j=>b(j.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",children:[l.jsx("option",{value:"",children:"Seleccione una causa..."}),_.map(j=>l.jsx("option",{value:j,children:j},j))]}),g==="Sospecha de otras enfermedades"&&l.jsx("input",{type:"text",value:x,onChange:j=>w(j.target.value),placeholder:"Especificar sospecha o síntomas...",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg"})]}),l.jsx("p",{className:"text-xs text-zinc-500 text-center pt-2",children:'El animal será movido a "Referencia". Esta acción no se puede deshacer desde esta pantalla.'}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-brand-border",children:[l.jsx("button",{onClick:n,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{onClick:E,className:"px-5 py-2 bg-brand-red hover:bg-red-700 text-white font-bold rounded-lg",children:"Confirmar Baja"})]})]})})},rN=({animal:t,onSaveSuccess:e,onCancel:n})=>{const{fathers:r,addFather:i,addParturition:s}=Ze(),[a,o]=P.useState(new Date().toISOString().split("T")[0]),[c,u]=P.useState(""),[d,f]=P.useState(!0),[h,p]=P.useState(!1),[m,g]=P.useState(null),[b,x]=P.useState(!1),w=async E=>{if(E.preventDefault(),!c){g({type:"error",text:"Debe seleccionar el padre (semental)."});return}p(!0),g(null);try{await s({motherId:t.id,parturitionDate:a,sireId:c,parturitionType:"Simple",offspringCount:0,liveOffspring:[],parturitionOutcome:"Aborto",inducedLactation:d}),g({type:"success",text:"Aborto registrado con éxito."}),setTimeout(e,1500)}catch(j){g({type:"error",text:j.message||"No se pudo registrar el aborto."}),p(!1)}},_=async E=>{await i(E),u(E.id),x(!1)};return l.jsxs(l.Fragment,{children:[l.jsx(nt,{isOpen:!0,onClose:n,title:`Registrar Aborto: ${t.id}`,children:l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha del Aborto"}),l.jsx("input",{type:"date",value:a,onChange:E=>o(E.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Padre (Semental Involucrado)"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{value:c,onChange:E=>u(E.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg appearance-none",required:!0,children:[l.jsx("option",{value:"",children:"Seleccionar Padre..."}),r.map(E=>l.jsxs("option",{value:E.id,children:[E.name," (",E.id,")"]},E.id))]}),l.jsx("button",{type:"button",onClick:()=>x(!0),className:"flex-shrink-0 p-3 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",children:l.jsx(Er,{size:24})})]})]}),l.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-zinc-700 flex items-center justify-between",children:[l.jsx("label",{htmlFor:"inducedLactation",className:"text-sm font-medium text-zinc-300",children:"¿Se iniciará lactancia post-aborto?"}),l.jsx("input",{id:"inducedLactation",type:"checkbox",checked:d,onChange:E=>f(E.target.checked),className:"form-checkbox h-5 w-5 bg-zinc-700 border-zinc-600 rounded text-brand-orange focus:ring-brand-orange focus:ring-offset-0"})]}),l.jsx("p",{className:"text-xs text-zinc-500 text-center px-4",children:'Marcar esta opción iniciará una lactancia "atípica" para poder registrar los pesajes.'}),m&&l.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${m.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[m.type==="success"?l.jsx(ri,{size:18}):l.jsx(Vt,{size:18}),l.jsx("span",{children:m.text})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-brand-border",children:[l.jsx("button",{type:"button",onClick:n,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:h,className:"px-5 py-2 bg-brand-red hover:bg-red-700 text-white font-bold rounded-lg disabled:opacity-50",children:h?"Guardando...":"Confirmar Aborto"})]})]})}),l.jsx(VP,{isOpen:b,onClose:()=>x(!1),onSave:_})]})},vMe=(t,e,n,r,i)=>{const s=[];if(!t)return[];if(t.sex==="Hembra"){const a=e.filter(o=>o.goatId===t.id&&o.status!=="finalizada").sort((o,c)=>new Date(c.parturitionDate).getTime()-new Date(o.parturitionDate).getTime())[0];a&&(a.status==="activa"?s.push(en.MILKING):a.status==="en-secado"?s.push(en.DRYING_OFF):a.status==="seca"&&s.push(en.DRY))}if(t.reproductiveStatus==="Preñada"?s.push(en.PREGNANT):t.reproductiveStatus==="En Servicio"?n.some(o=>o.femaleId===t.id&&o.sireLotId===t.sireLotId)?s.push(en.IN_SERVICE_CONFIRMED):s.push(en.IN_SERVICE):(t.reproductiveStatus==="Vacía"||t.reproductiveStatus==="Post-Parto")&&s.push(en.EMPTY),t.sex==="Macho"){const a=i.filter(u=>u.status==="Activo"),o=new Set(a.map(u=>u.id));r.some(u=>u.sireId===t.id&&o.has(u.seasonId))&&s.push(en.SIRE_IN_SERVICE)}return Array.from(new Set(s))},yMe=({animal:t,isSelected:e,onSelect:n})=>l.jsx("div",{onClick:()=>n(t.id),className:`w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border flex justify-between items-center transition-all cursor-pointer ${e?"border-brand-orange ring-2 ring-brand-orange/50":"border-brand-border"}`,children:l.jsxs("div",{className:"flex items-center gap-4",children:[e?l.jsx(GC,{className:"text-brand-orange flex-shrink-0",size:24}):l.jsx(YC,{className:"text-zinc-500 flex-shrink-0",size:24}),l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),l.jsxs("p",{className:"text-sm text-zinc-400",children:[t.sex," | ",t.formattedAge]})]})]})});function bMe({lotName:t,onBack:e,navigateTo:n}){const{animals:r,parturitions:i,serviceRecords:s,breedingSeasons:a,sireLots:o,updateAnimal:c}=Ze(),[u,d]=P.useState(!1),[f,h]=P.useState(!1),[p,m]=P.useState(new Set),[g,b]=P.useState(!1),[x,w]=P.useState(null),[_,E]=P.useState(!1),[j,T]=P.useState(null),A=P.useMemo(()=>r.filter(U=>(U.location||"Sin Asignar")===t).sort((U,F)=>U.id.localeCompare(F.id)).map(U=>({...U,formattedAge:ma(U.birthDate),statusObjects:vMe(U,i,s,o,a)})),[r,t,i,s,o,a]),C=P.useRef(null),D=$P({count:A.length,getScrollElement:()=>C.current,estimateSize:()=>92,overscan:5}),O=U=>{m(F=>{const q=new Set(F);return q.has(U)?q.delete(U):q.add(U),q})},L=async()=>{const U=Array.from(p).map(F=>c(F,{location:""}));try{await Promise.all(U),h(!1),m(new Set)}catch(F){console.error("Error al quitar animales del lote:",F)}},z=async U=>{if(!t)return;const F=U.map(q=>c(q,{location:t}));await Promise.all(F),d(!1)},M=U=>{if(!U)return[];const F=[];return U.sex==="Hembra"&&(F.push({label:"Declarar Parto",icon:Ua,onClick:()=>{E(!1),T("parturition")}}),F.push({label:"Declarar Aborto",icon:dv,onClick:()=>{E(!1),T("abortion")},color:"text-yellow-400"}),F.push({label:"Acciones de Leche",icon:ql,onClick:()=>{E(!1),T("milkWeighing")}})),F.push({label:"Agregar Peso Corporal",icon:ec,onClick:()=>{E(!1),T("bodyWeighing")}}),F.push({label:"Dar de Baja",icon:fa,onClick:()=>{E(!1),T("decommission")},color:"text-brand-red"}),F},G=U=>{w(U),E(!0)},K=()=>{T(null),w(null)},B=async U=>{if(!x)return;const F={status:U.reason,isReference:!0,endDate:U.date};U.reason==="Venta"&&Object.assign(F,{salePrice:U.salePrice,saleBuyer:U.saleBuyer,salePurpose:U.salePurpose}),U.reason==="Muerte"&&(F.deathReason=U.deathReason),U.reason==="Descarte"&&Object.assign(F,{cullReason:U.cullReason,cullReasonDetails:U.cullReasonDetails}),await c(x.id,F),K()};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-24 animate-fade-in",children:[l.jsxs("header",{className:"flex items-center justify-between pt-8 pb-4 px-4",children:[l.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(nr,{size:24})}),l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:t}),l.jsxs("p",{className:"text-lg text-zinc-400",children:[A.length," ",A.length===1?"animal":"animales"]})]}),f?l.jsx("button",{onClick:()=>{h(!1),m(new Set)},className:"text-brand-orange font-semibold px-2 py-1",children:"Listo"}):l.jsx("button",{onClick:()=>h(!0),className:"p-2 -mr-2 text-zinc-400 hover:text-white",children:l.jsx(tc,{size:20})})]}),!f&&l.jsx("div",{className:"px-4",children:l.jsxs("button",{onClick:()=>d(!0),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-4 px-4 rounded-xl transition-colors text-lg",children:[l.jsx(Er,{size:20})," Añadir Animales"]})}),l.jsx("div",{ref:C,className:"pt-4",style:{height:"calc(100vh - 250px)",overflowY:"auto"},children:A.length>0?l.jsx("div",{style:{height:`${D.getTotalSize()}px`,width:"100%",position:"relative"},children:D.getVirtualItems().map(U=>{const F=A[U.index];return l.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${U.size}px`,transform:`translateY(${U.start}px)`,padding:"0 1rem 0.5rem 1rem"},children:f?l.jsx(yMe,{animal:F,isSelected:p.has(F.id),onSelect:O}):l.jsx(rU,{animal:F,onSelect:q=>n({name:"rebano-profile",animalId:q}),onOpenActions:G})},U.key)})}):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl mx-4",children:l.jsx("p",{className:"text-zinc-500",children:"Este lote está vacío."})})})]}),f&&p.size>0&&l.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-black/50 backdrop-blur-md p-4 border-t border-brand-border animate-slide-up z-20",children:l.jsxs("div",{className:"max-w-2xl mx-auto flex gap-4",children:[l.jsxs("button",{onClick:L,className:"flex-1 flex items-center justify-center gap-2 bg-brand-red text-white font-bold py-3 rounded-xl",children:[l.jsx(ha,{size:18})," Quitar del Lote"]}),l.jsxs("button",{onClick:()=>b(!0),className:"flex-1 flex items-center justify-center gap-2 bg-brand-blue text-white font-bold py-3 rounded-xl",children:[l.jsx(wF,{size:18})," Transferir"]})]})}),l.jsx(a1,{isOpen:u,onClose:()=>d(!1),onSelect:z,animals:r,parturitions:i,serviceRecords:s,breedingSeasons:a,sireLots:o,title:`Añadir animales a: ${t}`}),l.jsx(Uke,{isOpen:g,onClose:()=>{b(!1),h(!1),m(new Set)},animalsToTransfer:Array.from(p),fromLot:t}),l.jsx(Nu,{isOpen:_,onClose:()=>E(!1),title:`Acciones para ${(x==null?void 0:x.id)||""}`,actions:M(x)}),x&&l.jsxs(l.Fragment,{children:[j==="parturition"&&l.jsx(id,{isOpen:!0,onClose:K,motherId:x.id}),j==="abortion"&&l.jsx(rN,{animal:x,onCancel:K,onSaveSuccess:K}),j==="milkWeighing"&&l.jsx(tN,{animal:x,onCancel:K,onSaveSuccess:K}),j==="bodyWeighing"&&l.jsx(AU,{animal:x,onCancel:K,onSaveSuccess:K}),j==="decommission"&&l.jsx(nN,{animal:x,onCancel:K,onConfirm:B})]})]})}const xMe=({activeFilter:t,setActiveFilter:e})=>l.jsxs("div",{className:"flex bg-zinc-800 rounded-xl p-1 w-full",children:[l.jsx("button",{onClick:()=>e("Activo"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t==="Activo"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"Activos"}),l.jsx("button",{onClick:()=>e("Referencia"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t==="Referencia"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"De Referencia"})]}),wMe=({activeFilter:t,setFilter:e})=>{const n=[{key:"all",label:"Todos"},{key:"Venta",label:"Vendidos"},{key:"Muerte",label:"Muertos"},{key:"Descarte",label:"Descartados"}];return l.jsxs("div",{className:"p-3 bg-black/20 rounded-lg",children:[l.jsx("label",{className:"block text-xs font-medium text-zinc-400 mb-2",children:"Filtrar por estado:"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(r=>l.jsx("button",{onClick:()=>e(r.key),className:`px-3 py-1 text-xs font-semibold rounded-full transition-colors ${t===r.key?"bg-brand-blue text-white":"bg-zinc-700 text-zinc-300"}`,children:r.label},r.key))})]})},U5=({isOpen:t,onClose:e,onSelect:n,animals:r,title:i,filterSex:s})=>{const[a,o]=P.useState(""),[c,u]=P.useState("Activo"),[d,f]=P.useState("all"),h=g=>{u(g),f("all")},p=P.useMemo(()=>r.filter(g=>{if(s&&g.sex!==s)return!1;const b=g.isReference||!1;return c==="Referencia"?b?d!=="all"?g.status===d:!0:!1:!b}).filter(g=>a?g.id.toLowerCase().includes(a.toLowerCase()):!0),[r,a,c,d,s]),m=g=>{n(g),o("")};return l.jsx(nt,{isOpen:t,onClose:e,title:i,children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx(Pu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500"}),l.jsx("input",{type:"search",placeholder:"Buscar por ID...",value:a,onChange:g=>o(g.target.value),className:"w-full bg-zinc-800 border border-zinc-700 rounded-xl pl-10 pr-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-orange"})]}),l.jsx(xMe,{activeFilter:c,setActiveFilter:h}),c==="Referencia"&&l.jsx("div",{className:"animate-fade-in",children:l.jsx(wMe,{activeFilter:d,setFilter:f})}),l.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2 pr-2",children:p.length>0?p.map(g=>l.jsxs("button",{onClick:()=>m(g.id),className:"w-full text-left p-3 bg-zinc-800/50 hover:bg-zinc-700 rounded-lg transition-colors",children:[l.jsx("p",{className:"font-bold text-white",children:g.id}),l.jsxs("p",{className:"text-xs text-zinc-400",children:[g.sex," | ",ma(g.birthDate)," | Lote: ",g.location||"Sin Asignar"]})]},g.id)):l.jsx("p",{className:"text-center text-zinc-500 py-8",children:"No se encontraron animales con estos filtros."})})]})})},_Me=(t,e)=>{if(!t||!e)return"Indefinido";const n=new Date,r=new Date(t);if(isNaN(r.getTime()))return"Indefinido";const i=(n.getTime()-r.getTime())/(1e3*60*60*24);return e==="Hembra"?i<=60?"Cabrita":i<=365?"Cabritona":"Cabra Primípara":i<=60?"Cabrito":i<=365?"Macho de Levante":"Macho Cabrío (Reproductor)"},jy=({legend:t,children:e})=>l.jsxs("fieldset",{className:"bg-black/20 rounded-2xl p-4 border border-zinc-800/50 space-y-4",children:[l.jsx("legend",{className:"px-2 text-sm font-semibold text-zinc-400",children:t}),e]}),W5=({labelOn:t,labelOff:e,value:n,onChange:r})=>l.jsxs("div",{onClick:()=>r(!n),className:"w-full bg-zinc-800/80 rounded-xl p-1 flex cursor-pointer",children:[l.jsx("span",{className:`w-1/2 text-center font-semibold p-2 rounded-lg transition-all ${n?"bg-zinc-600 text-white":"text-zinc-400"}`,children:t}),l.jsx("span",{className:`w-1/2 text-center font-semibold p-2 rounded-lg transition-all ${n?"text-zinc-400":"bg-zinc-600 text-white"}`,children:e})]}),SMe=({onSaveSuccess:t,onCancel:e})=>{const{addAnimal:n,animals:r,lots:i}=Ze(),[s,a]=P.useState("Hembra"),[o,c]=P.useState(!1),[u,d]=P.useState(""),[f,h]=P.useState(""),[p,m]=P.useState(""),[g,b]=P.useState(""),[x,w]=P.useState(""),[_,E]=P.useState(""),[j,T]=P.useState(""),[A,C]=P.useState(""),[D,O]=P.useState(null),[L,z]=P.useState(!1),[M,G]=P.useState(!1),[K,B]=P.useState(!1),U=P.useMemo(()=>_Me(f,s),[f,s]),F=async q=>{if(q.preventDefault(),O(null),!u||!f){O({type:"error",text:"El ID y la Fecha de Nacimiento son obligatorios."});return}const Z={sex:s,isReference:o,birthDate:f,lifecycleStage:U,conceptionMethod:p,birthWeight:g?parseFloat(g):void 0,fatherId:x||void 0,motherId:_||void 0,racialComposition:j||void 0,location:A||"",status:"Activo",reproductiveStatus:"No Aplica"};try{await n({id:u.toUpperCase(),...Z}),O({type:"success",text:`Animal ${u.toUpperCase()} agregado con éxito.`}),setTimeout(t,1500)}catch(re){O({type:"error",text:re.message||"No se pudo guardar el animal."}),console.error("Error al guardar animal:",re)}};return l.jsxs(l.Fragment,{children:[l.jsxs("form",{onSubmit:F,className:"w-full space-y-6",children:[l.jsxs(jy,{legend:"Categoría",children:[l.jsx(W5,{labelOn:"Hembra",labelOff:"Macho",value:s==="Hembra",onChange:q=>a(q?"Hembra":"Macho")}),l.jsx(W5,{labelOn:"Activo",labelOff:"Referencia",value:!o,onChange:q=>c(!q)})]}),l.jsxs(jy,{legend:"Identificación",children:[l.jsx("input",{autoFocus:!0,value:u,onChange:q=>d(q.target.value),placeholder:"Identificación del Animal (ID)",className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg",required:!0}),l.jsxs("button",{type:"button",onClick:()=>z(!0),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-left flex justify-between items-center",children:[l.jsx("span",{className:f?"text-white":"text-zinc-500",children:f?new Date(f+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"}):"Fecha de Nacimiento"}),l.jsx(Is,{className:"text-zinc-400",size:20})]}),l.jsxs("div",{className:"bg-zinc-800/80 p-3 rounded-xl text-lg flex justify-between items-center",children:[l.jsx("span",{className:"text-zinc-400",children:"Estado:"}),l.jsx("span",{className:"font-semibold text-white",children:U})]})]}),l.jsxs(jy,{legend:"Genética y Nacimiento",children:[l.jsxs("select",{value:p,onChange:q=>m(q.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg",children:[l.jsx("option",{value:"",children:"Origen / Concepción..."}),l.jsx("option",{value:"MN",children:"Monta Natural (MN)"}),l.jsx("option",{value:"IA",children:"Inseminación Artificial (IA)"}),l.jsx("option",{value:"TE",children:"Transferencia de Embriones (TE)"})]}),l.jsx("input",{type:"number",step:"0.1",value:g,onChange:q=>b(q.target.value),placeholder:"Peso al Nacer (Kg)",className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"}),l.jsxs("button",{type:"button",onClick:()=>B(!0),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-left flex justify-between items-center",children:[l.jsx("span",{className:x?"text-white":"text-zinc-500",children:x||"Padre (Semental)"}),l.jsx(Pu,{className:"text-zinc-400",size:20})]}),l.jsxs("button",{type:"button",onClick:()=>G(!0),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-left flex justify-between items-center",children:[l.jsx("span",{className:_?"text-white":"text-zinc-500",children:_||"Madre"}),l.jsx(Pu,{className:"text-zinc-400",size:20})]}),l.jsx("input",{value:j,onChange:q=>T(q.target.value),placeholder:"Composición Racial (Ej: 50%A 50%S)",className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),l.jsxs(jy,{legend:"Manejo",children:[l.jsxs("select",{value:A,onChange:q=>C(q.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg",children:[l.jsx("option",{value:"",children:"Ubicación / Lote (Opcional)..."}),i.map(q=>l.jsx("option",{value:q.name,children:q.name},q.id))]}),l.jsx("p",{className:"text-xs text-zinc-500 text-center px-4",children:'Si no se asigna un lote, se podrá encontrar en el filtro "Última Carga".'})]}),l.jsxs("div",{className:"space-y-3 pt-4",children:[D&&l.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${D.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[" ",D.type==="success"?l.jsx(ri,{size:18}):l.jsx(Vt,{size:18})," ",l.jsx("span",{children:D.text})," "]}),l.jsx("button",{type:"submit",className:"w-full bg-brand-green hover:bg-green-600 text-white font-bold py-4 rounded-xl text-lg",children:"Guardar Animal"}),l.jsx("button",{type:"button",onClick:e,className:"w-full bg-zinc-700 hover:bg-zinc-600 text-white font-semibold py-3 rounded-xl text-lg",children:"Cancelar"})]})]}),l.jsx(nt,{isOpen:L,onClose:()=>z(!1),title:"Seleccionar Fecha de Nacimiento",children:l.jsx("div",{className:"flex justify-center",children:l.jsx(Yh,{mode:"single",selected:f?new Date(f+"T00:00:00"):void 0,onSelect:q=>{q&&h(q.toISOString().split("T")[0]),z(!1)},captionLayout:"dropdown",fromYear:new Date().getFullYear()-20,toYear:new Date().getFullYear()})})}),l.jsx(U5,{isOpen:M,onClose:()=>G(!1),onSelect:q=>{E(q),G(!1)},animals:r,title:"Seleccionar Madre",filterSex:"Hembra"}),l.jsx(U5,{isOpen:K,onClose:()=>B(!1),onSelect:q=>{w(q),B(!1)},animals:r,title:"Seleccionar Padre",filterSex:"Macho"})]})};function AMe({onBack:t}){return l.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-md flex flex-col justify-end animate-fade-in",onClick:t,children:l.jsxs("div",{className:"bg-ios-modal-bg w-full max-w-4xl mx-auto h-[95vh] rounded-t-2xl flex flex-col animate-slide-up",onClick:e=>e.stopPropagation(),children:[l.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between p-4 border-b border-brand-border",children:[l.jsx("div",{className:"w-10"})," ",l.jsx("h1",{className:"text-xl font-bold tracking-tight text-white",children:"Ingresar Nuevo Animal"}),l.jsx("button",{onClick:t,className:"p-2 text-zinc-400 hover:text-white rounded-full hover:bg-zinc-700/50 transition-colors","aria-label":"Cerrar",children:l.jsx(Fo,{size:24})})]}),l.jsx("main",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:l.jsx("div",{className:"max-w-2xl mx-auto",children:l.jsx(SMe,{onSaveSuccess:t,onCancel:t})})})]})})}const EU=(t,e)=>{const[n,r]=P.useState(""),i=P.useMemo(()=>n?t.filter(s=>e.some(a=>{const o=s[a];return typeof o=="string"||typeof o=="number"?o.toString().toLowerCase().includes(n.toLowerCase()):!1})):t,[t,n,e]);return{searchTerm:n,setSearchTerm:r,filteredItems:i}},EMe=({title:t,subtitle:e,searchTerm:n,setSearchTerm:r})=>{const[i,s]=P.useState(!1),a=P.useRef(null);P.useEffect(()=>{var c;i&&((c=a.current)==null||c.focus())},[i]);const o=()=>{r(""),s(!1)};return l.jsxs("header",{className:"text-center pt-4 pb-4 relative overflow-hidden",children:[l.jsxs("div",{className:`transition-transform duration-300 ${i?"-translate-y-20":"translate-y-0"}`,children:[l.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:t}),l.jsx("p",{className:"text-md text-zinc-400",children:e})]}),l.jsx("div",{className:`absolute inset-0 transition-transform duration-300 flex items-center pt-2 ${i?"translate-y-0":"translate-y-20"}`,children:l.jsx("input",{ref:a,type:"text",value:n,onChange:c=>r(c.target.value),placeholder:"Buscar por ID...",className:"w-full bg-zinc-800 text-white text-lg placeholder-zinc-500 p-3 rounded-xl border-2 border-transparent focus:border-amber-500 focus:ring-0 focus:outline-none"})}),l.jsx("div",{className:"absolute top-4 right-0 pt-1",children:l.jsx("button",{onClick:i?o:()=>s(!0),className:"p-2 text-zinc-400 hover:text-white transition-colors",children:i?l.jsx(Fo,{size:22}):l.jsx(Pu,{size:22})})})]})},jMe=({isOpen:t,animal:e,onClose:n,onLogToSession:r,onStartNewSession:i,onStartDrying:s,onSetDry:a})=>{const{parturitions:o,weighings:c}=Ze(),[u,d]=P.useState(!1),f=P.useMemo(()=>o.filter(p=>p.goatId===e.id&&(p.status==="activa"||p.status==="en-secado")).sort((p,m)=>new Date(m.parturitionDate).getTime()-new Date(p.parturitionDate).getTime())[0],[o,e.id]),h=P.useMemo(()=>{const p=c.map(g=>g.date);return[...new Set(p)].sort((g,b)=>new Date(b).getTime()-new Date(g).getTime()).slice(0,3)},[c]);return!f&&!u?l.jsx(nt,{isOpen:t,onClose:n,title:`Acción Requerida: ${e.id}`,children:l.jsxs("div",{className:"text-center space-y-4",children:[l.jsx(Vt,{className:"mx-auto h-12 w-12 text-amber-400"}),l.jsx("h3",{className:"text-lg font-medium text-white",children:"Animal sin Parto Activo"}),l.jsx("p",{className:"text-sm text-zinc-400",children:"Para registrar un pesaje o gestionar el secado, el animal debe tener un parto activo."}),l.jsxs("button",{onClick:()=>d(!0),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[l.jsx(Ua,{size:18})," Declarar Parto Ahora"]})]})}):u?l.jsx(id,{isOpen:!0,onClose:()=>{d(!1),n()},motherId:e.id}):l.jsx(nt,{isOpen:t,onClose:n,title:`Pesaje Lechero: ${e.id}`,children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-zinc-400 mb-2",children:[l.jsx(iw,{size:16}),"Añadir a Sesión Reciente"]}),h.length>0?l.jsx("div",{className:"space-y-2",children:h.map(p=>l.jsxs("button",{onClick:()=>r(p),className:"w-full text-left bg-zinc-800/80 p-3 rounded-xl hover:bg-zinc-700 transition-colors flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Is,{size:18,className:"text-zinc-500"}),l.jsx("span",{className:"text-base font-semibold text-white",children:new Date(p+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"})})]}),l.jsx(tr,{size:20,className:"text-zinc-600"})]},p))}):l.jsx("p",{className:"text-center text-sm text-zinc-500 py-4",children:"No hay sesiones recientes."})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-zinc-400 mb-2",children:[l.jsx(rs,{size:16}),"Iniciar Nueva Sesión de Pesaje"]}),l.jsxs("button",{onClick:i,className:"w-full text-left bg-brand-orange/20 border border-brand-orange/80 p-4 rounded-xl hover:bg-brand-orange/30 transition-colors flex justify-between items-center",children:[l.jsx("span",{className:"text-lg font-bold text-white",children:"Construir Carga Masiva..."}),l.jsx(tr,{size:20,className:"text-brand-orange"})]})]}),f&&l.jsxs("div",{className:"pt-4 border-t border-brand-border",children:[l.jsx("h3",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Acciones de Lactancia"}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[l.jsxs("button",{onClick:()=>s(f.id),disabled:f.status==="en-secado",className:"w-full flex items-center justify-center gap-2 bg-blue-600/20 text-blue-300 font-semibold py-3 px-3 rounded-lg hover:bg-blue-600/40 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(Yu,{size:16})," ",f.status==="en-secado"?"Ya en Secado":"Iniciar Secado"]}),l.jsxs("button",{onClick:()=>a(f.id),className:"w-full flex items-center justify-center gap-2 bg-gray-600/20 text-gray-300 font-semibold py-3 px-3 rounded-lg hover:bg-gray-600/40 transition-colors",children:[l.jsx(fa,{size:16})," Declarar Seca"]})]})]})]})})},CMe=({isOpen:t,animal:e,onClose:n,onLogToSession:r,onStartNewSession:i,onSetReadyForMating:s})=>{const{bodyWeighings:a,parturitions:o}=Ze(),c=P.useMemo(()=>{const f=a.map(p=>p.date);return[...new Set(f)].sort((p,m)=>new Date(m).getTime()-new Date(p).getTime()).slice(0,3)},[a]),d=uc(e,o)==="Cabritona"&&e.reproductiveStatus==="Vacía";return l.jsx(nt,{isOpen:t,onClose:n,title:`Pesaje Corporal: ${e.id}`,children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-zinc-400 mb-2",children:[l.jsx(iw,{size:16}),"Añadir a Sesión Reciente"]}),c.length>0?l.jsx("div",{className:"space-y-2",children:c.map(f=>l.jsxs("button",{onClick:()=>r(f),className:"w-full text-left bg-zinc-800/80 p-3 rounded-xl hover:bg-zinc-700 transition-colors flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Is,{size:18,className:"text-zinc-500"}),l.jsx("span",{className:"text-base font-semibold text-white",children:new Date(f+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"})})]}),l.jsx(tr,{size:20,className:"text-zinc-600"})]},f))}):l.jsx("p",{className:"text-center text-sm text-zinc-500 py-4",children:"No hay sesiones recientes."})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-zinc-400 mb-2",children:[l.jsx(rs,{size:16}),"Iniciar Nueva Sesión de Pesaje"]}),l.jsxs("button",{onClick:i,className:"w-full text-left bg-brand-green/20 border border-brand-green/80 p-4 rounded-xl hover:bg-brand-green/30 transition-colors flex justify-between items-center",children:[l.jsx("span",{className:"text-lg font-bold text-white",children:"Construir Carga Masiva..."}),l.jsx(tr,{size:20,className:"text-brand-green"})]})]}),d&&l.jsxs("div",{className:"pt-4 border-t border-brand-border",children:[l.jsx("h3",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Acciones de Desarrollo"}),l.jsx("div",{className:"flex",children:l.jsxs("button",{onClick:s,className:"w-full flex items-center justify-center gap-2 bg-pink-600/20 text-pink-300 font-semibold py-3 px-3 rounded-lg hover:bg-pink-600/40 transition-colors",children:[l.jsx(AF,{size:16})," Declarar en Peso de Monta"]})}),l.jsx("p",{className:"text-xs text-zinc-500 text-center px-4 mt-2",children:'Si el animal tiene el peso y la edad adecuados, esto lo marcará como "Listo para Monta".'})]})]})})},H5=({animalId:t,weightType:e,onSaveSuccess:n,onCancel:r,sessionDate:i})=>{const{addBodyWeighing:s,addWeighing:a}=Ze(),[o,c]=P.useState(i||new Date().toISOString().split("T")[0]),[u,d]=P.useState(""),[f,h]=P.useState(!1),[p,m]=P.useState(null);P.useEffect(()=>{i&&c(i)},[i]);const g=async b=>{b.preventDefault(),m(null),h(!0);const x=parseFloat(u);if(isNaN(x)||x<=0){m({type:"error",text:"Por favor, introduce un peso válido."}),h(!1);return}if(e==="corporal"&&x>150){m({type:"error",text:"El peso corporal parece irracionalmente alto."}),h(!1);return}if(e==="leche"&&x>8.5){m({type:"error",text:"La producción de leche parece irracionalmente alta."}),h(!1);return}try{e==="corporal"?await s({animalId:t,date:o,kg:x}):await a({goatId:t,date:o,kg:x}),m({type:"success",text:`Pesaje de ${t} guardado con éxito.`}),setTimeout(()=>{n()},1500)}catch(w){m({type:"error",text:w.message||"No se pudo guardar el pesaje."}),h(!1)}};return l.jsxs("form",{onSubmit:g,className:"space-y-4",children:[l.jsxs("p",{className:"text-sm text-zinc-400",children:["Registrando pesaje ",e==="corporal"?"corporal":"lechero"," para el animal ",l.jsx("span",{className:"font-bold text-white",children:t}),"."]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"weighingDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha del Pesaje"}),l.jsx("input",{id:"weighingDate",type:"date",value:o,onChange:b=>c(b.target.value),disabled:!!i,className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl text-lg disabled:opacity-70 disabled:bg-zinc-700",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"weighingKg",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Peso (Kg)"}),l.jsx("input",{id:"weighingKg",type:"number",step:"0.1",value:u,onChange:b=>d(b.target.value),placeholder:"Ej: 3.5",autoFocus:!0,className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl text-lg",required:!0})]}),p&&l.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${p.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[p.type==="success"?l.jsx(ri,{size:18}):l.jsx(Vt,{size:18}),l.jsx("span",{children:p.text})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:r,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:f,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:f?"Guardando...":"Guardar Pesaje"})]})]})},TMe=({weightType:t,onBack:e,onAnimalsSelected:n})=>{const{animals:r,parturitions:i,serviceRecords:s,breedingSeasons:a,sireLots:o}=Ze(),[c,u]=P.useState(!0),d=`Nueva Sesión de Peso ${t==="corporal"?"Corporal":"Lechero"}`,f=p=>{const m=r.filter(g=>p.includes(g.id));n(p,m),u(!1)},h=()=>{u(!1),e()};return l.jsx(a1,{isOpen:c,onClose:h,onSelect:f,animals:r,parturitions:i,serviceRecords:s,breedingSeasons:a,sireLots:o,title:d,sessionType:t})},PMe=({weightType:t,animalsToWeigh:e,onSaveSuccess:n,onCancel:r})=>{const{addWeighing:i,addBodyWeighing:s,parturitions:a,startDryingProcess:o,setLactationAsDry:c}=Ze(),[u,d]=P.useState(new Date().toISOString().split("T")[0]),[f,h]=P.useState({}),[p,m]=P.useState(!1),[g,b]=P.useState(null),[x,w]=P.useState(null),_=(D,O)=>{h(L=>({...L,[D]:O}))},E=P.useMemo(()=>Object.values(f).filter(D=>D.trim()!==""&&!isNaN(parseFloat(D))).length,[f]),j=P.useMemo(()=>{const D=new Map;if(t==="leche"){const O=new Set(e.map(L=>L.id));a.filter(L=>O.has(L.goatId)&&(L.status==="activa"||L.status==="en-secado")).forEach(L=>{const z=D.get(L.goatId);(!z||new Date(L.parturitionDate)>new Date(z.parturitionDate))&&D.set(L.goatId,L)})}return D},[a,e,t]),T=async D=>{const O=j.get(D);if(!(!O||O.status!=="activa")){b(D),w(null);try{await o(O.id),j.set(D,{...O,status:"en-secado"})}catch(L){w({type:"error",text:`Error al secar ${D}: ${L.message}`})}finally{b(null)}}},A=async D=>{const O=j.get(D);if(!(!O||O.status==="seca"||O.status==="finalizada")){b(D),w(null);try{await c(O.id),j.set(D,{...O,status:"seca"})}catch(L){w({type:"error",text:`Error al secar ${D}: ${L.message}`})}finally{b(null)}}},C=async D=>{D.preventDefault(),w(null),m(!0);const O=Object.entries(f).map(([L,z])=>({animalId:L,kg:parseFloat(z)})).filter(L=>!isNaN(L.kg)&&L.kg>0);if(O.length===0){w({type:"error",text:"No se han introducido pesos válidos."}),m(!1);return}try{const L=O.map(z=>t==="leche"?i({goatId:z.animalId,kg:z.kg,date:u}):s({animalId:z.animalId,kg:z.kg,date:u}));await Promise.all(L),w({type:"success",text:`${O.length} pesajes guardados con éxito.`}),setTimeout(()=>{n()},1500)}catch(L){w({type:"error",text:"Ocurrió un error al guardar los datos."}),m(!1),console.error("Error en escritura por lote de pesajes:",L)}};return l.jsxs("form",{onSubmit:C,className:"flex flex-col h-full",children:[l.jsxs("div",{className:"flex-shrink-0 space-y-4 p-4 border-b border-brand-border",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:t==="leche"?"Sesión de Ordeño":"Sesión de Pesaje Corporal"}),l.jsx("input",{type:"date",value:u,onChange:D=>d(D.target.value),className:"bg-zinc-800 text-white p-2 rounded-lg text-sm"})]}),l.jsxs("p",{className:"text-sm text-zinc-400",children:["Registrando ",E," / ",e.length," animales."]})]}),l.jsx("div",{className:"flex-grow overflow-y-auto p-4 space-y-2",children:e.map(D=>{if(t==="corporal")return l.jsxs("div",{className:"grid grid-cols-2 items-center gap-4 p-2 bg-black/20 rounded-lg",children:[l.jsx("label",{htmlFor:`weight-${D.id}`,className:"font-semibold text-white truncate",children:D.id}),l.jsx("input",{id:`weight-${D.id}`,type:"number",step:"0.1",value:f[D.id]||"",onChange:z=>_(D.id,z.target.value),placeholder:"Kg",className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-center"})]},D.id);const O=j.get(D.id),L=g===D.id;return l.jsxs("div",{className:"grid grid-cols-3 items-center gap-2 p-2 bg-black/20 rounded-lg",children:[l.jsx("label",{htmlFor:`weight-${D.id}`,className:"font-semibold text-white truncate col-span-1",children:D.id}),l.jsx("input",{id:`weight-${D.id}`,type:"number",step:"0.1",value:f[D.id]||"",onChange:z=>_(D.id,z.target.value),placeholder:"Kg",disabled:!O||O.status==="seca"||p,className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-center col-span-1 disabled:opacity-50"}),l.jsx("div",{className:"col-span-1 flex items-center justify-end gap-1",children:L?l.jsx(Y0,{className:"animate-spin text-zinc-400",size:20}):l.jsxs(l.Fragment,{children:[l.jsx("button",{type:"button",onClick:()=>T(D.id),disabled:!O||O.status!=="activa"||p,title:"Iniciar Secado",className:"p-2 bg-blue-600/20 text-blue-300 rounded-lg hover:bg-blue-600/40 disabled:opacity-30 disabled:cursor-not-allowed",children:l.jsx(Yu,{size:16})}),l.jsx("button",{type:"button",onClick:()=>A(D.id),disabled:!O||O.status==="seca"||O.status==="finalizada"||p,title:"Declarar Seca",className:"p-2 bg-gray-600/20 text-gray-300 rounded-lg hover:bg-gray-600/40 disabled:opacity-30 disabled:cursor-not-allowed",children:l.jsx(fa,{size:16})})]})})]},D.id)})}),l.jsxs("div",{className:"flex-shrink-0 p-4 border-t border-brand-border bg-ios-modal-bg",children:[x&&l.jsxs("div",{className:`mb-3 flex items-center space-x-2 p-3 rounded-lg text-sm ${x.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[x.type==="success"?l.jsx(ri,{size:18}):l.jsx(Vt,{size:18}),l.jsx("span",{children:x.text})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:r,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsxs("button",{type:"submit",disabled:p||E===0||g!==null,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50 flex items-center gap-2",children:[p?l.jsx(Y0,{size:18,className:"animate-spin"}):l.jsx(Dh,{size:18}),"IT'S               Guardar ",E>0?`(${E})`:""]})]})]})]})},NMe=`
  .rdp {
    --rdp-cell-size: 40px;
    --rdp-accent-color: #FF9500;
    --rdp-background-color: #1c1c1e;
    --rdp-accent-color-dark: #FF9500;
    --rdp-background-color-dark: #1c1c1e;
    --rdp-outline: 2px solid var(--rdp-accent-color);
    --rdp-border-radius: 12px;
    color: #FFF;
  }
  .rdp-caption_label, .rdp-nav_button { color: #FF9500; }
  .rdp-head_cell { color: #8e8e93; }
  .rdp-day_selected { background-color: var(--rdp-accent-color); color: #000; font-weight: bold; }
`,jU=({isOpen:t,onClose:e,onSave:n,animalId:r})=>{if(!t)return null;const i=s=>{s&&n(s),e()};return l.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex justify-center items-end sm:items-center z-50 animate-fade-in",onClick:e,children:l.jsxs("div",{className:"w-full max-w-sm bg-ios-modal-bg rounded-t-2xl sm:rounded-2xl shadow-2xl text-white animate-slide-up",onClick:s=>s.stopPropagation(),children:[l.jsxs("header",{className:"text-center p-3",children:[l.jsxs("h2",{className:"font-semibold text-white",children:["Registrar Servicio para ",r]}),l.jsx("p",{className:"text-sm text-zinc-400",children:"Selecciona la fecha del servicio"})]}),l.jsx("style",{children:NMe}),l.jsx("div",{className:"flex justify-center pb-4",children:l.jsx(Yh,{mode:"single",onSelect:i,defaultMonth:new Date,locale:KP,disabled:{after:new Date}})})]})})},kMe=({animal:t,onSelect:e,onOpenActions:n})=>{const r=rc(),i=P.useRef(!1),s=(a,o)=>{const c=o.offset.x,u=o.velocity.x;(c<-80/2||u<-500)&&n(t),r.start({x:0}),setTimeout(()=>{i.current=!1},100)};return l.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-brand-glass border border-brand-border",children:[l.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:l.jsxs("div",{className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[l.jsx(Er,{size:22}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Acciones"})]})}),l.jsx(On.div,{drag:"x",dragConstraints:{left:-80,right:0},dragElastic:.1,onDragStart:()=>{i.current=!0},onDragEnd:s,onTap:()=>{i.current||e(t.id)},animate:r,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg p-4",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),l.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:[t.sex," | ",t.formattedAge," | Lote: ",t.location||"Sin Asignar"]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(FP,{statuses:t.statusObjects}),l.jsx(tr,{className:"text-zinc-600"})]})]})})]})},DMe=["Cabrita","Cabritona","Cabra","Cabrito","Macho de Levante","Macho Cabrío"],lS=({title:t,filters:e,activeFilter:n,onFilterChange:r})=>l.jsxs("div",{children:[t&&l.jsx("label",{className:"block text-sm font-semibold text-zinc-400 mb-2",children:t}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("button",{onClick:()=>r("all"),className:`px-3 py-1 text-xs font-semibold rounded-full transition-colors ${n==="all"||n==="ALL"?"bg-zinc-600 text-white":"bg-zinc-800/80 text-zinc-300"}`,children:"Todos"}),e.map(i=>{const s=i.Icon||null;return l.jsxs("button",{onClick:()=>r(i.key),className:`flex items-center gap-1.5 px-3 py-1 text-xs font-semibold rounded-full transition-colors ${n===i.key?"bg-brand-green text-white":"bg-zinc-800/80 text-zinc-300"}`,children:[s&&l.jsx(s,{size:14}),i.label]},i.key)})]})]});function IMe({navigateTo:t,locationFilter:e}){const{animals:n,parturitions:r,serviceRecords:i,breedingSeasons:s,sireLots:a,isLoading:o,updateAnimal:c,startDryingProcess:u,setLactationAsDry:d,addServiceRecord:f}=Ze(),[h,p]=P.useState(null),[m,g]=P.useState(!1),[b,x]=P.useState(null),[w,_]=P.useState(null),[E,j]=P.useState([]),[T,A]=P.useState("corporal"),[C,D]=P.useState("Activos"),[O,L]=P.useState("all"),[z,M]=P.useState("Todos"),[G,K]=P.useState(!1),[B,U]=P.useState("ALL"),[F,q]=P.useState("ALL"),[Z,re]=P.useState(!1),[he,ye]=P.useState(!1),De=P.useMemo(()=>n.map(Me=>({...Me,statusObjects:tU(Me,r,i,a,s),formattedAge:ma(Me.birthDate),zootecnicCategory:uc(Me,r)})),[n,r,i,a,s]),We=P.useMemo(()=>{let Me=C==="Activos"?De.filter(rt=>!rt.isReference):De.filter(rt=>rt.isReference);return G?Me.sort((rt,Ct)=>(Ct.endDate?new Date(Ct.endDate).getTime():Ct.createdAt||0)-(rt.endDate?new Date(rt.endDate).getTime():rt.createdAt||0)).slice(0,25):(e&&(Me=Me.filter(rt=>(rt.location||"Sin Asignar")===e)),C==="Activos"?(B!=="ALL"&&(Me=Me.filter(rt=>rt.statusObjects.some(Ct=>Ct.key===B))),F!=="ALL"&&(Me=Me.filter(rt=>rt.statusObjects.some(Ct=>Ct.key===F)))):O!=="all"&&(Me=Me.filter(rt=>rt.status===O)),z!=="Todos"&&(Me=Me.filter(rt=>rt.zootecnicCategory===z)),Me)},[De,C,G,e,z,B,F,O]),{searchTerm:Je,setSearchTerm:jt,filteredItems:dt}=EU(We,["id"]),xe=()=>{M("Todos"),K(!1),U("ALL"),q("ALL"),L("all"),jt("")},Ye=Me=>{if(!Me)return[];const rt=[];return Me.sex==="Hembra"&&(rt.push({label:"Declarar Parto",icon:Ua,onClick:()=>{g(!1),x("parturition")}}),rt.push({label:"Declarar Aborto",icon:dv,onClick:()=>{g(!1),x("abortion")},color:"text-yellow-400"}),rt.push({label:"Acciones de Leche",icon:ql,onClick:()=>{g(!1),x("milkWeighingAction")}}),Me.sireLotId&&rt.push({label:"Registrar Servicio",icon:qC,onClick:()=>{g(!1),x("service")},color:"text-pink-400"})),rt.push({label:"Acciones de Peso",icon:ec,onClick:()=>{g(!1),x("bodyWeighingAction")}}),rt.push({label:"Mover a Lote",icon:KC,onClick:()=>t({name:"rebano-profile",animalId:Me.id,openAction:"move"})}),rt.push({label:"Dar de Baja",icon:fa,onClick:()=>{g(!1),x("decommission")},color:"text-brand-red"}),rt},Qe=Me=>{p(Me),g(!0)},fe=()=>{x(null),p(null),_(null),j([])},pt=async Me=>{if(!h)return;const rt={status:Me.reason,isReference:!0,endDate:Me.date};Me.reason==="Venta"&&Object.assign(rt,{salePrice:Me.salePrice,saleBuyer:Me.saleBuyer,salePurpose:Me.salePurpose}),Me.reason==="Muerte"&&(rt.deathReason=Me.deathReason),Me.reason==="Descarte"&&Object.assign(rt,{cullReason:Me.cullReason,cullReasonDetails:Me.cullReasonDetails}),await c(h.id,rt),fe()},ft=(Me,rt)=>{_(Me),x(rt==="leche"?"logSimpleMilk":"logSimpleBody")},Le=Me=>{A(Me),x(Me==="leche"?"newMilkSession":"newBodySession")},Ve=async()=>{h&&(await c(h.id,{reproductiveStatus:"En Servicio"}),fe())},cn=(Me,rt)=>{j(rt),x("bulkWeighing")},gr=()=>{fe()},Cr=Me=>{u(Me),fe()},Hn=Me=>{d(Me),fe()},Ut=async Me=>{if(!h||!h.sireLotId){console.error("No se puede declarar servicio: animal o sireLotId faltante."),fe();return}await f({sireLotId:h.sireLotId,femaleId:h.id,serviceDate:Me.toISOString().split("T")[0]}),fe()},vr=P.useRef(null),rr=$P({count:dt.length,getScrollElement:()=>vr.current,estimateSize:()=>104,overscan:5});return o?l.jsx("div",{className:"text-center p-10",children:l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando rebaño..."})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{ref:vr,className:"w-full max-w-2xl mx-auto space-y-4 pb-12",style:{height:"100vh",overflowY:"auto"},children:[l.jsx(EMe,{title:e||"Mi Rebaño",subtitle:`${dt.length} animales en la vista`,searchTerm:Je,setSearchTerm:jt}),l.jsxs("div",{className:"space-y-4 px-4",children:[l.jsxs("div",{className:"flex bg-zinc-800 rounded-xl p-1 w-full",children:[l.jsxs("button",{onClick:()=>D("Activos"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors flex items-center justify-center gap-2 ${C==="Activos"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:[l.jsx(Uf,{size:16})," Activos"]}),l.jsxs("button",{onClick:()=>D("Referencia"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors flex items-center justify-center gap-2 ${C==="Referencia"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:[l.jsx(gee,{size:16})," Referencia"]})]}),C==="Activos"?l.jsxs("div",{className:"space-y-4 animate-fade-in",children:[l.jsxs("button",{onClick:()=>t({name:"add-animal"}),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[l.jsx(Er,{size:18})," Ingresar Nuevo Animal"]}),l.jsxs("div",{className:"space-y-4 bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:()=>re(!Z),className:"w-full flex justify-between items-center text-sm font-semibold text-zinc-400 hover:text-white transition-colors",children:[l.jsx("span",{children:"Filtros Productivos"}),l.jsx(KA,{className:`transition-transform ${Z?"rotate-180":""}`,size:18})]}),Z&&l.jsx("div",{className:"animate-fade-in",children:l.jsx(lS,{title:"",filters:["MILKING","DRYING_OFF","DRY"].map(Me=>en[Me]),activeFilter:B,onFilterChange:U})})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:()=>ye(!he),className:"w-full flex justify-between items-center text-sm font-semibold text-zinc-400 hover:text-white transition-colors",children:[l.jsx("span",{children:"Filtros Reproductivos"}),l.jsx(KA,{className:`transition-transform ${he?"rotate-180":""}`,size:18})]}),he&&l.jsx("div",{className:"animate-fade-in",children:l.jsx(lS,{title:"",filters:["PREGNANT","IN_SERVICE_CONFIRMED","IN_SERVICE","EMPTY","SIRE_IN_SERVICE"].map(Me=>en[Me]),activeFilter:F,onFilterChange:q})})]})]})]}):l.jsx("div",{className:"space-y-4 bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border animate-fade-in",children:l.jsx(lS,{title:"Filtrar por Causa de Baja",filters:[{key:"Venta",label:"Venta"},{key:"Muerte",label:"Muerte"},{key:"Descarte",label:"Descarte"}],activeFilter:O,onFilterChange:L})}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("button",{onClick:()=>K(!0),title:"Última Carga",className:`flex items-center gap-2 py-1 px-3 text-sm font-semibold rounded-lg transition-colors ${G?"text-brand-orange":"text-zinc-400 hover:text-brand-orange"}`,children:[l.jsx(iw,{size:16})," Última Carga"]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("button",{onClick:()=>t({name:"manage-lots"}),className:"flex items-center gap-2 text-zinc-400 hover:text-brand-orange text-sm font-semibold py-1 px-3",children:[l.jsx(Tee,{size:14})," Gestionar Lotes"]}),l.jsxs("button",{onClick:xe,className:"flex items-center gap-2 text-zinc-400 hover:text-brand-orange text-sm font-semibold py-1 px-3",children:[l.jsx(WC,{size:14})," Limpiar"]})]})]}),l.jsxs("select",{value:z,onChange:Me=>M(Me.target.value),className:"w-full bg-brand-glass p-3 rounded-xl text-white border border-brand-border focus:border-brand-orange focus:ring-0",children:[l.jsx("option",{value:"Todos",children:"Todas las Categorías Zootécnicas"}),DMe.map(Me=>l.jsx("option",{value:Me,children:Me},Me))]})]}),l.jsx("div",{className:"pt-4",children:dt.length>0?l.jsx("div",{style:{height:`${rr.getTotalSize()}px`,width:"100%",position:"relative"},children:rr.getVirtualItems().map(Me=>{const rt=dt[Me.index];return l.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${Me.size}px`,transform:`translateY(${Me.start}px)`,padding:"0 1rem 0.5rem 1rem"},children:l.jsx(kMe,{animal:rt,onSelect:()=>t({name:"rebano-profile",animalId:rt.id}),onOpenActions:Qe})},Me.key)})}):l.jsxs("div",{className:"text-center py-10 bg-brand-glass rounded-2xl mx-4",children:["m                        ",l.jsx("p",{className:"text-zinc-400",children:Je?`No se encontraron resultados para "${Je}"`:"No hay animales que coincidan con los filtros."})]})}),"ci          "]}),l.jsx(Nu,{isOpen:m,onClose:()=>g(!1),title:`Acciones para ${(h==null?void 0:h.id)||""}`,actions:Ye(h)}),h&&l.jsxs(l.Fragment,{children:[b==="parturition"&&l.jsx(id,{isOpen:!0,onClose:fe,motherId:h.id}),b==="abortion"&&l.jsx(rN,{animal:h,onCancel:fe,onSaveSuccess:fe}),b==="decommission"&&l.jsx(nN,{animal:h,onCancel:fe,onConfirm:pt}),b==="service"&&l.jsx(jU,{isOpen:!0,onClose:fe,onSave:Ut,animalId:h.id}),b==="milkWeighingAction"&&l.jsx(jMe,{isOpen:!0,animal:h,onClose:fe,onLogToSession:Me=>ft(Me,"leche"),onStartNewSession:()=>Le("leche"),onStartDrying:Cr,onSetDry:Hn}),b==="bodyWeighingAction"&&l.jsx(CMe,{isOpen:!0,animal:h,onClose:fe,onLogToSession:Me=>ft(Me,"corporal"),onStartNewSession:()=>Le("corporal"),onSetReadyForMating:Ve}),b==="logSimpleMilk"&&w&&l.jsx(nt,{isOpen:!0,onClose:fe,title:`Añadir Pesaje Leche: ${h.id}`,children:l.jsx(H5,{animalId:h.id,weightType:"leche",onSaveSuccess:fe,onCancel:fe})}),b==="logSimpleBody"&&w&&l.jsx(nt,{isOpen:!0,onClose:fe,title:`Añadir Peso Corporal: ${h.id}`,children:l.jsx(H5,{animalId:h.id,weightType:"corporal",onSaveSuccess:fe,onCancel:fe})}),(b==="newMilkSession"||b==="newBodySession")&&l.jsx(TMe,{weightType:T,onBack:fe,onAnimalsSelected:cn}),b==="bulkWeighing"&&l.jsx(nt,{isOpen:!0,onClose:fe,title:`Carga Masiva - ${T}`,size:"fullscreen",children:l.jsx(PMe,{weightType:T,animalsToWeigh:E,onSaveSuccess:gr,onCancel:fe})})]})]})}const OMe=({isOpen:t,onClose:e})=>{const{addOrigin:n}=Ze(),[r,i]=P.useState(""),[s,a]=P.useState(""),o=async()=>{if(r.trim()===""){a("El nombre del origen no puede estar vacío.");return}try{await n(r),i(""),a(""),e()}catch(u){a("No se pudo guardar el origen."),console.error(u)}},c=()=>{i(""),a(""),e()};return l.jsx(nt,{isOpen:t,onClose:c,title:"Crear Nuevo Origen",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-zinc-400",children:"Introduce el nombre de la ganadería o finca de origen."}),l.jsx("div",{children:l.jsx("input",{type:"text",value:r,onChange:u=>i(u.target.value),placeholder:"Ej: Agropecuaria La Bendición",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0"})}),s&&l.jsx("p",{className:"text-sm text-brand-red",children:s}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[l.jsx("button",{onClick:c,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{onClick:o,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:"Guardar Origen"})]})]})})},MMe=t=>{const{events:e}=Ze();return P.useMemo(()=>t?e.filter(s=>s.animalId===t).sort((s,a)=>new Date(a.date).getTime()-new Date(s.date).getTime()):[],[e,t])},RMe=t=>{const{animals:e}=Ze(),n=P.useMemo(()=>{const i=new Map;return e.forEach(s=>i.set(s.id,s)),i},[e]);return P.useMemo(()=>{const i=(a,o)=>{if(!a||o>3)return;const c=n.get(a);if(!c)return;const u=i(c.fatherId,o+1),d=i(c.motherId,o+1);return{animal:c,sire:u,dam:d}};return i(t,0)||null},[t,n])},Pi=({animal:t,onClick:e})=>{const n="bg-zinc-800/80 p-2 rounded-lg border border-zinc-700/80 w-32 text-center shadow-md transition-colors text-xs";if(!t)return l.jsx("div",{className:`${n} bg-zinc-900/50 border-dashed`,children:l.jsx("p",{className:"font-semibold text-zinc-500",children:"Desconocido"})});const r=t.sex==="Hembra"?"text-pink-400":"text-blue-400";return l.jsxs("button",{onClick:()=>e(t.id),className:`${n} hover:border-brand-orange`,children:[l.jsx("p",{className:`font-bold truncate ${r}`,children:t.id}),l.jsx("p",{className:"text-zinc-400",children:t.sex})]})},LMe=({rootNode:t,onAncestorClick:e})=>{var i,s,a,o,c,u,d,f,h,p,m,g,b,x,w,_,E,j,T,A,C,D,O,L,z,M,G,K,B,U,F,q,Z,re;if(!t)return l.jsx("div",{className:"text-center p-8 text-zinc-500",children:"No hay datos de genealogía suficientes para mostrar el pedigrí."});const n="border-zinc-600",r=l.jsx("div",{className:`w-4 border-t-2 ${n}`});return l.jsxs("div",{className:"flex items-center justify-center p-4 overflow-x-auto",children:[l.jsx("div",{className:"flex flex-col items-center justify-center",children:l.jsxs("div",{className:"bg-zinc-800/80 p-2 rounded-lg border border-zinc-700/80 w-32 text-center shadow-md text-xs",children:[l.jsx("p",{className:`font-bold truncate ${t.animal.sex==="Hembra"?"text-pink-400":"text-blue-400"}`,children:t.animal.id}),l.jsx("p",{className:"text-zinc-400",children:t.animal.sex})]})}),l.jsxs("div",{className:"flex flex-col items-center",children:[r,l.jsx("div",{className:`h-20 border-r-2 ${n}`}),r]}),l.jsxs("div",{className:"flex flex-col items-center justify-around",children:[l.jsx(Pi,{animal:(i=t.sire)==null?void 0:i.animal,onClick:e}),l.jsx(Pi,{animal:(s=t.dam)==null?void 0:s.animal,onClick:e})]}),l.jsxs("div",{className:"flex flex-col items-center justify-around",children:[l.jsxs("div",{className:"flex items-center",children:[r,l.jsx("div",{className:`h-10 border-r-2 ${n}`}),r]}),l.jsxs("div",{className:"flex items-center",children:[r,l.jsx("div",{className:`h-10 border-r-2 ${n}`}),r]})]}),l.jsxs("div",{className:"flex flex-col items-center justify-around gap-[24px]",children:[l.jsx(Pi,{animal:(o=(a=t.sire)==null?void 0:a.sire)==null?void 0:o.animal,onClick:e}),l.jsx(Pi,{animal:(u=(c=t.sire)==null?void 0:c.dam)==null?void 0:u.animal,onClick:e}),l.jsx(Pi,{animal:(f=(d=t.dam)==null?void 0:d.sire)==null?void 0:f.animal,onClick:e}),l.jsx(Pi,{animal:(p=(h=t.dam)==null?void 0:h.dam)==null?void 0:p.animal,onClick:e})]}),l.jsxs("div",{className:"flex flex-col items-center justify-around gap-[24px]",children:[l.jsxs("div",{className:"flex items-center",children:[" ",r," ",l.jsx("div",{className:`h-6 border-r-2 ${n}`})," ",r," "]}),l.jsxs("div",{className:"flex items-center",children:[" ",r," ",l.jsx("div",{className:`h-6 border-r-2 ${n}`})," ",r," "]}),l.jsxs("div",{className:"flex items-center",children:[" ",r," ",l.jsx("div",{className:`h-6 border-r-2 ${n}`})," ",r," "]}),l.jsxs("div",{className:"flex items-center",children:[" ",r," ",l.jsx("div",{className:`h-6 border-r-2 ${n}`})," ",r," "]})]}),l.jsxs("div",{className:"flex flex-col items-center justify-around gap-[8px]",children:[l.jsx(Pi,{animal:(b=(g=(m=t.sire)==null?void 0:m.sire)==null?void 0:g.sire)==null?void 0:b.animal,onClick:e}),l.jsx(Pi,{animal:(_=(w=(x=t.sire)==null?void 0:x.sire)==null?void 0:w.dam)==null?void 0:_.animal,onClick:e}),l.jsx(Pi,{animal:(T=(j=(E=t.sire)==null?void 0:E.dam)==null?void 0:j.sire)==null?void 0:T.animal,onClick:e}),l.jsx(Pi,{animal:(D=(C=(A=t.sire)==null?void 0:A.dam)==null?void 0:C.dam)==null?void 0:D.animal,onClick:e}),l.jsx(Pi,{animal:(z=(L=(O=t.dam)==null?void 0:O.sire)==null?void 0:L.sire)==null?void 0:z.animal,onClick:e}),l.jsx(Pi,{animal:(K=(G=(M=t.dam)==null?void 0:M.sire)==null?void 0:G.dam)==null?void 0:K.animal,onClick:e}),l.jsx(Pi,{animal:(F=(U=(B=t.dam)==null?void 0:B.dam)==null?void 0:U.sire)==null?void 0:F.animal,onClick:e}),l.jsx(Pi,{animal:(re=(Z=(q=t.dam)==null?void 0:q.dam)==null?void 0:Z.dam)==null?void 0:re.animal,onClick:e})]})]})},zMe=({animalId:t,birthDate:e,onSave:n,onCancel:r})=>{const[i,s]=P.useState(new Date().toISOString().split("T")[0]),[a,o]=P.useState(""),[c,u]=P.useState(null),[d,f]=P.useState(!1),h=async p=>{p.preventDefault(),u(null),f(!0);const m=parseFloat(a);if(!i||!a||isNaN(m)||m<=0){u("Por favor, introduce una fecha y un peso válidos."),f(!1);return}if(new Date(i)<new Date(e)){u("La fecha de destete no puede ser anterior a la fecha de nacimiento."),f(!1);return}try{await n({weaningDate:i,weaningWeight:m})}catch(g){u("No se pudo guardar el registro de destete."),console.error(g)}finally{f(!1)}};return l.jsxs("form",{onSubmit:h,className:"space-y-4",children:[l.jsxs("p",{className:"text-sm text-zinc-400",children:["Registra la fecha y el peso al momento de separar a ",l.jsx("span",{className:"font-bold text-white",children:t})," de su madre."]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"weaningDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Destete"}),l.jsx("input",{id:"weaningDate",type:"date",value:i,onChange:p=>s(p.target.value),className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl text-lg",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"weaningWeight",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Peso al Destete (Kg)"}),l.jsx("input",{id:"weaningWeight",type:"number",step:"0.1",value:a,onChange:p=>o(p.target.value),placeholder:"Ej: 15.5",className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl text-lg",required:!0})]}),c&&l.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[l.jsx(Vt,{size:18}),l.jsx("span",{children:c})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:r,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:d,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:d?"Guardando...":"Guardar Destete"})]})]})},lo=({label:t,value:e,isEditing:n,children:r})=>l.jsxs("div",{children:[l.jsx("dt",{className:"text-sm font-medium text-zinc-400",children:t}),n&&r?r:l.jsx("dd",{className:"mt-1 text-lg font-semibold text-white truncate",children:e||"N/A"})]}),$Me=({animalId:t,navigateTo:e})=>{const n=RMe(t);return l.jsx(LMe,{rootNode:n,onAncestorClick:r=>e({name:"rebano-profile",animalId:r})})},FMe={Nacimiento:{icon:pF,color:"bg-green-500/20 text-brand-green"},Parto:{icon:Ua,color:"bg-pink-500/20 text-pink-400"},Aborto:{icon:dv,color:"bg-yellow-500/20 text-yellow-400"},Movimiento:{icon:KC,color:"bg-blue-500/20 text-brand-blue"},"Cambio de Estado":{icon:kee,color:"bg-purple-500/20 text-purple-400"},"Pesaje Lechero":{icon:_ee,color:"bg-gray-500/20 text-gray-300"},"Pesaje Corporal":{icon:ec,color:"bg-green-500/20 text-brand-green"},Servicio:{icon:rw,color:"bg-pink-500/20 text-pink-400"},Tratamiento:{icon:Ih,color:"bg-red-500/20 text-brand-red"},Diagnóstico:{icon:ri,color:"bg-teal-500/20 text-teal-300"}},VMe=({animalId:t})=>{const e=MMe(t);return e.length===0?l.jsx("div",{className:"text-center p-8 text-zinc-500",children:"Este animal no tiene eventos registrados."}):l.jsx("div",{className:"space-y-3",children:e.map(n=>{const r=FMe[n.type]||{icon:UC,color:"bg-gray-500/20 text-gray-300"},i=r.icon;return l.jsxs("div",{className:"flex items-start gap-4 p-3 bg-black/20 rounded-lg",children:[l.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${r.color}`,children:l.jsx(i,{size:20})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-white",children:n.type}),l.jsx("p",{className:"text-sm text-zinc-300",children:n.details}),l.jsxs("p",{className:"text-xs text-zinc-500 mt-1",children:[new Date(n.date+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"}),n.lotName&&` | Lote: ${n.lotName}`]})]})]},n.id)})})},BMe=({offspring:t,navigateTo:e})=>t.length===0?l.jsx("div",{className:"text-center p-8 text-zinc-500",children:"Este animal no tiene descendencia registrada."}):l.jsx("div",{className:"space-y-2",children:t.map(n=>l.jsxs("button",{onClick:()=>e({name:"rebano-profile",animalId:n.id}),className:"w-full text-left p-3 bg-black/20 hover:bg-zinc-800/60 rounded-lg transition-colors flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:n.id}),l.jsxs("p",{className:"text-sm text-zinc-400",children:[n.sex," | ",ma(n.birthDate)," | Lote: ",n.location||"Sin Asignar"]})]}),l.jsx(tr,{className:"text-zinc-600"}),"line-height:            "]},n.id))}),UMe=({animal:t,parturitions:e,isEditing:n,editedData:r,setEditedData:i,origins:s,onAddOriginClick:a,onLocationClick:o})=>{const c=(f,h)=>{i(p=>({...p,[f]:h}))},u=ma(t.birthDate),d=uc(t,e);return l.jsxs("dl",{className:"grid grid-cols-2 gap-x-4 gap-y-6",children:[l.jsx(lo,{label:"ID",value:t.id}),l.jsx(lo,{label:"Sexo",value:t.sex}),l.jsx(lo,{label:"Fecha Nacimiento",value:new Date(t.birthDate+"T00:00:00").toLocaleDateString("es-VE"),isEditing:n,children:l.jsx("input",{type:"date",value:r.birthDate||"",onChange:f=>c("birthDate",f.target.value),className:"w-full bg-zinc-700 p-2 rounded-md mt-1"})}),l.jsx(lo,{label:"Edad",value:u}),l.jsx(lo,{label:"Ubicación / Lote",children:!n&&l.jsx("dd",{className:"mt-1 text-lg",children:l.jsx("button",{onClick:o,className:"font-semibold text-brand-orange hover:underline text-left",children:t.location||"Sin Asignar"})})}),l.jsx(lo,{label:"Categoría",value:d}),l.jsx(lo,{label:"Origen",value:t.origin,isEditing:n,children:l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsxs("select",{value:r.origin||"",onChange:f=>c("origin",f.target.value),className:"w-full bg-zinc-700 p-2 rounded-md",children:[l.jsx("option",{value:"Finca Masparrito",children:"Finca Masparrito"}),s.map(f=>l.jsx("option",{value:f.name,children:f.name},f.id))]}),l.jsx("button",{type:"button",onClick:a,className:"p-2 bg-brand-orange hover:bg-orange-600 text-white rounded-md",children:l.jsx(rs,{size:20})})]})}),t.weaningDate&&l.jsx(lo,{label:"Fecha de Destete",value:new Date(t.weaningDate+"T00:00:00").toLocaleDateString("es-VE")}),t.weaningWeight&&l.jsx(lo,{label:"Peso al Destete",value:`${t.weaningWeight} Kg`})]})},WMe=({isOpen:t,onClose:e,onConfirm:n,reason:r})=>{const[i,s]=P.useState(new Date().toISOString().split("T")[0]),[a,o]=P.useState(""),[c,u]=P.useState(""),[d,f]=P.useState("Cría"),[h,p]=P.useState(""),[m,g]=P.useState(),[b,x]=P.useState("");if(!t||!r)return null;const w=["Baja producción","Bajo índice de crecimiento","Inflamación articular","Linfadenitis caseosa","Sospecha de otras enfermedades"],_=()=>{n({date:i,price:parseFloat(a)||void 0,buyer:c||void 0,purpose:d,reason:h||void 0,cullReason:m||void 0,cullDetails:m==="Sospecha de otras enfermedades"?b:void 0})};return l.jsx(nt,{isOpen:t,onClose:e,title:`Dar de baja por ${r}`,children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha"}),l.jsx("input",{type:"date",value:i,onChange:E=>s(E.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg"})]}),r==="Venta"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Precio de Venta (Opcional)"}),l.jsx("input",{type:"number",value:a,onChange:E=>o(E.target.value),placeholder:"0.00",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Comprador (Opcional)"}),l.jsx("input",{type:"text",value:c,onChange:E=>u(E.target.value),placeholder:"Nombre del comprador",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fin de la Venta"}),l.jsxs("select",{value:d,onChange:E=>f(E.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",children:[l.jsx("option",{value:"Cría",children:"Cría"}),l.jsx("option",{value:"Carne",children:"Carne"})]})]})]}),r==="Muerte"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Causa / Descripción de la Muerte"}),l.jsx("textarea",{value:h,onChange:E=>p(E.target.value),placeholder:"Ej: Infección, ataque de depredador...",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",rows:3})]}),r==="Descarte"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Causa del Descarte"}),l.jsxs("select",{value:m||"",onChange:E=>g(E.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",children:[l.jsx("option",{value:"",children:"Seleccione una causa..."}),w.map(E=>l.jsx("option",{value:E,children:E},E))]})]}),m==="Sospecha de otras enfermedades"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Especificar Sospecha / Síntomas"}),l.jsx("input",{type:"text",value:b,onChange:E=>x(E.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg"})]})]}),l.jsx("p",{className:"text-sm text-zinc-400",children:'El animal será movido a la lista de "Referencia". Esta acción no se puede deshacer.'}),l.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[l.jsx("button",{onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{onClick:_,className:"px-5 py-2 bg-brand-red hover:bg-red-700 text-white font-bold rounded-lg",children:"Confirmar Baja"})]})]})})},HMe=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i})=>t?l.jsx(nt,{isOpen:t,onClose:e,title:r,children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("p",{className:"text-zinc-300",children:i}),l.jsxs("div",{className:"flex justify-end gap-4",children:[l.jsx("button",{onClick:e,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-6 rounded-lg",children:"Cancelar"}),l.jsx("button",{onClick:()=>{n(),e()},className:"bg-brand-red hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg",children:"Confirmar"})]})]})}):null;function qMe({animalId:t,onBack:e,navigateTo:n}){const{animals:r,lots:i,origins:s,parturitions:a,updateAnimal:o,deleteAnimalPermanently:c}=Ze(),[u,d]=P.useState("main"),[f,h]=P.useState(!1),[p,m]=P.useState({}),[g,b]=P.useState("idle"),[x,w]=P.useState(!1),[_,E]=P.useState(!1),[j,T]=P.useState(!1),[A,C]=P.useState(!1),[D,O]=P.useState(""),[L,z]=P.useState(!1),[M,G]=P.useState(null),[K,B]=P.useState(!1),[U,F]=P.useState(!1),[q,Z]=P.useState(!1),re=P.useMemo(()=>r.find(Le=>Le.id===t),[r,t]),he=P.useMemo(()=>re?re.sex==="Hembra"?r.filter(Le=>Le.motherId===re.id).sort((Le,Ve)=>new Date(Ve.birthDate).getTime()-new Date(Le.birthDate).getTime()):re.sex==="Macho"?r.filter(Le=>Le.fatherId===re.id).sort((Le,Ve)=>new Date(Ve.birthDate).getTime()-new Date(Le.birthDate).getTime()):[]:[],[r,re]),ye=P.useMemo(()=>re?uc(re,a):"",[re,a]),De=(re==null?void 0:re.breedingFailures)||0,We=De>=2?"border-brand-red ring-2 ring-brand-red/80":"border-brand-border";P.useEffect(()=>{re&&(f&&m({birthDate:re.birthDate,origin:re.origin}),O(re.location||""))},[re,f]);const Je=async()=>{if(re){b("saving");try{await o(re.id,p),b("success"),setTimeout(()=>{h(!1),b("idle")},1500)}catch(Le){console.error("Error al actualizar el animal:",Le),b("idle")}}},jt=()=>{h(!1)},dt=async()=>{if(re)try{await o(re.id,{location:D}),C(!1)}catch(Le){console.error("Error al actualizar la ubicación:",Le)}},xe=async Le=>{if(!re||!M)return;const Ve={status:M,isReference:!0,endDate:Le.date};M==="Venta"&&(Le.price&&(Ve.salePrice=Le.price),Le.buyer&&(Ve.saleBuyer=Le.buyer),Le.purpose&&(Ve.salePurpose=Le.purpose)),M==="Muerte"&&Le.reason&&(Ve.deathReason=Le.reason),M==="Descarte"&&(Le.cullReason&&(Ve.cullReason=Le.cullReason),Le.cullDetails&&(Ve.cullReasonDetails=Le.cullDetails)),await o(re.id,Ve),G(null),e()},Ye=async()=>{re&&await o(re.id,{isReference:!1,status:"Activo",endDate:void 0})},Qe=async()=>{re&&(await c(re.id),e())},fe=async Le=>{re&&(await o(re.id,{weaningDate:Le.weaningDate,weaningWeight:Le.weaningWeight}),Z(!1))},pt=[{label:"Por Venta",icon:Hl,onClick:()=>G("Venta")},{label:"Por Muerte",icon:dv,onClick:()=>G("Muerte"),color:"text-brand-red"},{label:"Por Descarte",icon:tee,onClick:()=>G("Descarte"),color:"text-brand-red"}],ft=[{label:"Reintegrar a Activos",icon:Eee,onClick:Ye},{label:"Eliminar Permanentemente",icon:ha,onClick:()=>F(!0),color:"text-brand-red"}];return re?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in pb-12",children:[l.jsxs("header",{className:`bg-brand-glass backdrop-blur-xl rounded-b-2xl p-4 border-b border-x sticky top-0 z-10 transition-all ${We}`,children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(nr,{size:24})}),l.jsxs("h1",{className:"text-2xl font-bold tracking-tight text-white flex items-center gap-2",children:[re.id," ",De===1&&l.jsx("span",{title:"1 fallo reproductivo reportado",children:l.jsx(Vt,{className:"text-yellow-400",size:20})})," ",De>=2&&l.jsx("span",{title:`${De} fallos reproductivos reportados`,children:l.jsx(Vt,{className:"text-brand-red",size:20})})]}),l.jsx("div",{className:"w-8"})]}),l.jsx("p",{className:"text-center text-brand-orange font-semibold text-sm -mt-1 mb-3 uppercase tracking-wider",children:re.isReference?`Baja: ${re.status}`:re.location||"Sin Asignar"}),l.jsxs("div",{className:"flex justify-around bg-black/20 rounded-xl p-1",children:[re.sex==="Hembra"&&l.jsxs(l.Fragment,{children:[" ",l.jsxs("button",{onClick:()=>n({name:"lactation-profile",animalId:re.id}),className:"flex flex-col items-center p-2 text-blue-300 hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[l.jsx(ql,{size:22}),l.jsx("span",{className:"text-xs mt-1",children:"Leche"})]})," ",l.jsxs("button",{onClick:()=>T(!0),disabled:re.isReference,className:"flex flex-col items-center p-2 text-pink-400 hover:bg-zinc-700/50 w-full rounded-lg transition-colors disabled:opacity-40 disabled:cursor-not-allowed",children:[l.jsx(pF,{size:22}),l.jsx("span",{className:"text-xs mt-1",children:"Parto"})]})," "]}),(ye==="Cabrita"||ye==="Cabrito")&&!re.weaningDate&&!re.isReference&&l.jsxs("button",{onClick:()=>Z(!0),className:"flex flex-col items-center p-2 text-yellow-300 hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[l.jsx(eee,{size:22}),l.jsx("span",{className:"text-xs mt-1",children:"Destetar"})]}),l.jsxs("button",{onClick:()=>n({name:"growth-profile",animalId:re.id}),className:"flex flex-col items-center p-2 text-brand-green hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[l.jsx(ec,{size:22}),l.jsx("span",{className:"text-xs mt-1",children:"Peso"})]}),l.jsxs("button",{onClick:()=>alert("Función en desarrollo"),disabled:re.isReference,className:"flex flex-col items-center p-2 text-teal-300 hover:bg-zinc-700/50 w-full rounded-lg transition-colors disabled:opacity-40 disabled:cursor-not-allowed",children:[l.jsx(Ih,{size:22}),l.jsx("span",{className:"text-xs mt-1",children:"Sanidad"})]}),l.jsxs("button",{onClick:()=>re.isReference?B(!0):C(!0),className:"flex flex-col items-center p-2 text-brand-blue hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[l.jsx(Cee,{size:22}),l.jsx("span",{className:"text-xs mt-1",children:"Mover"})]}),!re.isReference&&l.jsxs("button",{onClick:()=>z(!0),className:"flex flex-col items-center p-2 text-amber-400 hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[l.jsx(fa,{size:22}),l.jsx("span",{className:"text-xs mt-1",children:"Dar de baja"})]}),l.jsxs("button",{onClick:()=>h(!f),disabled:re.isReference,className:`flex flex-col items-center p-2 w-full rounded-lg transition-colors ${f?"text-green-400":"text-brand-orange"} hover:bg-zinc-700/50 disabled:opacity-40 disabled:cursor-not-allowed`,children:[l.jsx(tc,{size:22}),l.jsx("span",{className:"text-xs mt-1",children:"Editar"})]})]})]}),l.jsxs("main",{className:"p-4 space-y-4",children:[l.jsxs("div",{className:"flex bg-brand-glass rounded-xl p-1 border border-brand-border",children:[l.jsx("button",{onClick:()=>d("main"),className:`w-1/4 py-2 text-sm font-semibold rounded-lg transition-colors ${u==="main"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Ficha"}),l.jsx("button",{onClick:()=>d("genetics"),className:`w-1/4 py-2 text-sm font-semibold rounded-lg transition-colors ${u==="genetics"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Genealogía"}),l.jsx("button",{onClick:()=>d("progeny"),className:`w-1/4 py-2 text-sm font-semibold rounded-lg transition-colors ${u==="progeny"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Progenie"}),l.jsx("button",{onClick:()=>d("events"),className:`w-1/4 py-2 text-sm font-semibold rounded-lg transition-colors ${u==="events"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Eventos"})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[u==="main"&&l.jsxs("div",{className:"space-y-6",children:[" ",l.jsx(UMe,{animal:re,parturitions:a,isEditing:f,editedData:p,setEditedData:m,origins:s,onAddOriginClick:()=>E(!0),onLocationClick:()=>C(!0)})," ",f&&l.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-zinc-700",children:[" ",l.jsxs("button",{onClick:jt,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-6 rounded-lg flex items-center gap-2",children:[l.jsx(Fo,{size:18})," Cancelar"]})," ",l.jsxs("button",{onClick:Je,disabled:g!=="idle",className:"bg-brand-green hover:bg-green-600 text-white font-bold py-2 px-6 rounded-lg flex items-center gap-2 disabled:opacity-50 min-w-[130px] justify-center",children:[" ",g==="saving"&&l.jsx("span",{className:"animate-spin h-5 w-5 border-2 border-current border-t-transparent rounded-full"})," ",g==="success"&&l.jsx(ri,{size:18})," ",g==="idle"&&l.jsx(Dh,{size:18})," ",l.jsx("span",{className:"ml-2",children:g==="success"?"Guardado":"Guardar"})," "]})," "]})," "]}),u==="genetics"&&l.jsx($Me,{animalId:re.id,navigateTo:n}),u==="progeny"&&l.jsx(BMe,{offspring:he,navigateTo:n}),u==="events"&&l.jsx(VMe,{animalId:re.id})]})]})]}),l.jsx(nt,{isOpen:A,onClose:()=>C(!1),title:`Cambiar Lote para ${re.id}`,children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Seleccionar nuevo lote"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{value:D,onChange:Le=>O(Le.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",children:[l.jsx("option",{value:"",children:"Sin Asignar"}),i.map(Le=>l.jsx("option",{value:Le.name,children:Le.name},Le.id))]}),l.jsx("button",{type:"button",onClick:()=>{C(!1),w(!0)},className:"p-3 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",children:l.jsx(rs,{size:24})})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[l.jsx("button",{onClick:()=>C(!1),className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{onClick:dt,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:"Guardar Cambio"})]})]})}),l.jsx(Nu,{isOpen:L,onClose:()=>z(!1),title:"Causa de la Baja",actions:pt}),l.jsx(WMe,{isOpen:!!M,onClose:()=>G(null),onConfirm:xe,reason:M}),l.jsx(Nu,{isOpen:K,onClose:()=>B(!1),title:"Acciones de Referencia",actions:ft}),l.jsx(HMe,{isOpen:U,onClose:()=>F(!1),onConfirm:Qe,title:`¿Eliminar ${re.id} Permanentemente?`,message:"Esta acción borrará el registro del animal de la base de datos para siempre y no se puede deshacer."}),l.jsx(TF,{isOpen:x,onClose:()=>w(!1)}),l.jsx(OMe,{isOpen:_,onClose:()=>E(!1)}),l.jsx(id,{isOpen:j,onClose:()=>T(!1),motherId:re.id}),l.jsx(nt,{isOpen:q,onClose:()=>Z(!1),title:`Registrar Destete de ${re.id}`,children:l.jsx(zMe,{animalId:re.id,birthDate:re.birthDate,onSave:fe,onCancel:()=>Z(!1)})})]}):l.jsxs("div",{className:"text-center p-10",children:[l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Animal no encontrado."}),l.jsx("button",{onClick:e,className:"mt-4 text-brand-orange",children:"Volver"})]})}const KMe=({animal:t,parturition:e,onSelectAnimal:n})=>l.jsxs("div",{onClick:()=>n(t.id),className:"w-full cursor-pointer text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-amber-400 transition-colors",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),l.jsxs("p",{className:"text-sm text-zinc-400",children:[e.status==="en-secado"&&`Secado desde: ${new Date(e.dryingStartDate).toLocaleDateString()}`,e.status==="seca"&&"Lactancia finalizada"]})]}),l.jsx(tr,{className:"text-zinc-600"})]});function GMe({onSelectAnimal:t,defaultView:e="drying"}){const{animals:n,parturitions:r,isLoading:i}=Ze(),[s,a]=P.useState(e);P.useEffect(()=>{a(e)},[e]);const o=P.useMemo(()=>{const u=h=>n.find(p=>p.id===h),d=r.filter(h=>h.status==="en-secado").map(h=>({animal:u(h.goatId),parturition:h})).filter(h=>h.animal),f=r.filter(h=>h.status==="seca").map(h=>({animal:u(h.goatId),parturition:h})).filter(h=>h.animal);return{drying:d,dry:f}},[n,r]),c=o[s]||[];return i?l.jsx("div",{className:"text-center p-10",children:l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando datos..."})}):l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[l.jsxs("header",{className:"text-center pt-8 pb-4",children:[l.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white",children:"Gestión de Rebaño"}),l.jsx("p",{className:"text-xl text-zinc-400",children:"Animales por Estado de Lactancia"})]}),l.jsx("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-2 border border-brand-border flex justify-between items-center",children:l.jsxs("div",{className:"flex bg-zinc-900/80 rounded-xl p-1 w-full",children:[l.jsxs("button",{onClick:()=>a("drying"),className:`w-1/2 px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors ${s==="drying"?"bg-blue-500 text-white":"text-zinc-300 hover:bg-zinc-700/50"}`,children:["En Secado (",o.drying.length,")"]}),l.jsxs("button",{onClick:()=>a("dry"),className:`w-1/2 px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors ${s==="dry"?"bg-gray-600 text-white":"text-zinc-300 hover:bg-zinc-700/50"}`,children:["Secas (",o.dry.length,")"]})]})}),l.jsx("div",{className:"space-y-2",children:c.length>0?c.map(({animal:u,parturition:d})=>l.jsx(KMe,{animal:u,parturition:d,onSelectAnimal:t},d.id)):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-400",children:"No hay animales en este estado."})})})]})}function YMe({onBack:t}){const{lots:e,animals:n,parturitions:r,serviceRecords:i,breedingSeasons:s,sireLots:a,addLot:o,deleteLot:c,updateAnimal:u}=Ze(),[d,f]=P.useState(""),[h,p]=P.useState(!1),[m,g]=P.useState(null),[b,x]=P.useState(""),w=P.useMemo(()=>{const A=new Map;return n.forEach(C=>{const D=C.location||"Sin Asignar";A.set(D,(A.get(D)||0)+1)}),e.map(C=>({...C,animalCount:A.get(C.name)||0})).sort((C,D)=>C.name.localeCompare(D.name))},[e,n]),_=async()=>{if(d.trim()!==""){x("");try{await o({name:d,parentLotId:void 0}),f("")}catch(A){x(A.message||"No se pudo crear el lote.")}}},E=async(A,C)=>{var D;if(C>0){x(`No se puede eliminar "${(D=e.find(O=>O.id===A))==null?void 0:D.name}". Reasigne los ${C} animales primero.`);return}if(x(""),window.confirm("¿Estás seguro de que quieres eliminar este lote? Esta acción no se puede deshacer."))try{await c(A)}catch(O){x(O.message||"No se pudo eliminar el lote.")}},j=A=>{g(A),p(!0)},T=async A=>{if(!m)return;const C=A.map(D=>u(D,{location:m}));await Promise.all(C),p(!1),g(null)};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[l.jsxs("header",{className:"flex items-center pt-8 pb-4 px-4",children:[l.jsx("button",{onClick:t,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(nr,{size:24})}),l.jsxs("div",{className:"text-center flex-grow",children:[l.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Gestionar Lotes Físicos"}),l.jsx("p",{className:"text-md text-zinc-400",children:"Crea ubicaciones y asigna animales"})]}),l.jsx("div",{className:"w-8"})]}),l.jsx("div",{className:"px-4",children:l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Añadir Nuevo Lote"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"text",value:d,onChange:A=>f(A.target.value),placeholder:"Nombre del lote...",className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"}),l.jsx("button",{onClick:_,className:"p-3 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",children:l.jsx(Er,{size:24})})]}),b&&l.jsx("p",{className:"text-sm text-brand-red text-center",children:b})]})}),l.jsxs("div",{className:"space-y-2 pt-4 px-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-zinc-300 px-2",children:"Lotes Existentes"}),w.length>0?w.map(A=>l.jsxs("div",{className:"w-full text-left bg-brand-glass rounded-2xl p-4 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-white",children:A.name}),l.jsxs("p",{className:"text-sm text-zinc-400",children:[A.animalCount," ",A.animalCount===1?"animal":"animales"]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>j(A.name),className:"flex items-center gap-2 bg-zinc-700/80 text-white font-semibold py-2 px-3 rounded-lg hover:bg-zinc-600/80 transition-colors",children:[l.jsx(Uf,{size:16})," Asignar"]}),l.jsx("button",{onClick:()=>E(A.id,A.animalCount),className:"p-2 text-zinc-500 hover:text-brand-red transition-colors",children:l.jsx(ha,{size:18})})]})]},A.id)):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-500",children:"Aún no has creado ningún lote."})})]})]}),l.jsx(a1,{isOpen:h,onClose:()=>p(!1),onSelect:T,animals:n,parturitions:r,serviceRecords:i,breedingSeasons:s,sireLots:a,title:`Asignar animales a: ${m}`})]})}const QMe=({onSave:t,onCancel:e})=>{const{fathers:n,addFather:r}=Ze(),[i,s]=P.useState(""),[a,o]=P.useState(!1),[c,u]=P.useState(null),[d,f]=P.useState(!1),h=async m=>{await r(m),s(m.id),o(!1)},p=async m=>{if(m.preventDefault(),u(null),!i){u("Debes seleccionar un semental.");return}f(!0);try{await t(i)}catch(g){u("No se pudo guardar el lote."),console.error(g),f(!1)}};return l.jsxs(l.Fragment,{children:[l.jsxs("form",{onSubmit:p,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"sire",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Seleccionar Semental"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{id:"sire",value:i,onChange:m=>s(m.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0,children:[l.jsx("option",{value:"",children:"Elegir reproductor..."}),n.map(m=>l.jsxs("option",{value:m.id,children:[m.name," (",m.id,")"]},m.id))]}),l.jsx("button",{type:"button",onClick:()=>o(!0),className:"flex-shrink-0 p-3 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",children:l.jsx(Er,{size:24})})]})]}),c&&l.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[l.jsx(Vt,{size:18}),l.jsx("span",{children:c})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:d||!i,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:d?"Guardando...":"Crear Lote"})]})]}),l.jsx(VP,{isOpen:a,onClose:()=>o(!1),onSave:h})]})},l1=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i})=>t?l.jsx(nt,{isOpen:t,onClose:e,title:r,children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("p",{className:"text-zinc-300",children:i}),l.jsxs("div",{className:"flex justify-end gap-4",children:[l.jsx("button",{onClick:e,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-6 rounded-lg transition-colors",children:"Cancelar"}),l.jsx("button",{onClick:()=>{n(),e()},className:"bg-brand-red hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg transition-colors",children:"Confirmar"})]})]})}):null,XMe=({isOpen:t,onClose:e,femalesToTransfer:n,originSeasonId:r,onConfirmTransfer:i})=>{const{breedingSeasons:s}=Ze(),[a,o]=P.useState(new Set),[c,u]=P.useState(""),[d,f]=P.useState(!1),[h,p]=P.useState("");Y.useEffect(()=>{t&&(o(new Set(n.map(x=>x.id))),u(""),p(""))},[t,n]);const m=P.useMemo(()=>s.filter(x=>x.status==="Activo"&&x.id!==r),[s,r]),g=x=>{o(w=>{const _=new Set(w);return _.has(x)?_.delete(x):_.add(x),_})},b=async()=>{if(!c){p("Debes seleccionar una temporada de destino.");return}if(a.size===0){p("Debes seleccionar al menos una hembra para transferir.");return}f(!0),await i(c,Array.from(a)),f(!1),e()};return t?l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex justify-center items-center z-50 animate-fade-in",onClick:e,children:l.jsxs("div",{className:"bg-ios-modal-bg w-full max-w-lg m-4 rounded-2xl flex flex-col animate-slide-up",onClick:x=>x.stopPropagation(),children:[l.jsx("header",{className:"flex-shrink-0 p-4 border-b border-brand-border",children:l.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Transferir Hembras sin Servicio"})}),l.jsxs("main",{className:"p-6 space-y-4 overflow-y-auto",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:["Hembras a transferir (",a.size,"/",n.length,")"]}),l.jsx("div",{className:"max-h-40 overflow-y-auto space-y-2 p-2 bg-black/20 rounded-lg",children:n.map(x=>l.jsxs("div",{onClick:()=>g(x.id),className:"flex items-center gap-3 p-2 rounded-md hover:bg-zinc-700 cursor-pointer",children:[a.has(x.id)?l.jsx(GC,{className:"text-brand-orange flex-shrink-0"}):l.jsx(YC,{className:"text-zinc-500 flex-shrink-0"}),l.jsx("span",{className:"font-semibold text-white",children:x.id})]},x.id))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"destination",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Transferir a la Temporada:"}),l.jsxs("select",{id:"destination",value:c,onChange:x=>u(x.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",children:[l.jsx("option",{value:"",children:"Seleccionar temporada de destino..."}),m.map(x=>l.jsx("option",{value:x.id,children:x.name},x.id))]})]}),h&&l.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[l.jsx(Vt,{size:18}),l.jsx("span",{children:h})]})]}),l.jsxs("footer",{className:"flex-shrink-0 flex justify-end gap-4 p-4 border-t border-brand-border",children:[l.jsx("button",{onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{onClick:b,disabled:d,className:"px-5 py-2 bg-brand-orange hover:bg-orange-600 text-white font-bold rounded-lg disabled:opacity-50",children:d?"Transfiriendo...":`Transferir ${a.size} Hembra(s)`})]})]})}):null},ZMe=({sireName:t,animalCount:e,dragControls:n})=>l.jsxs("div",{className:"w-full p-4 flex items-center",children:[l.jsx("div",{className:"pl-2 pr-4 cursor-grab touch-none self-stretch flex items-center",onPointerDown:r=>n.start(r),children:l.jsx(HC,{className:"text-zinc-500"})}),l.jsxs("div",{className:"flex-grow",children:[l.jsxs("p",{className:"font-bold text-lg text-white flex items-center gap-2",children:[l.jsx(fv,{})," Lote: ",t]}),l.jsxs("p",{className:"text-sm text-zinc-400 mt-1 flex items-center gap-2",children:[l.jsx(Uf,{size:14})," ",e," ",e===1?"hembra asignada":"hembras asignadas"]})]}),l.jsx(tr,{className:"text-zinc-600"})]}),JMe=({lot:t,onEdit:e,onDelete:n,onClick:r,dragControls:i})=>{const s=rc(),a=P.useRef(!1),o=(c,u)=>{const d=u.offset.x,f=u.velocity.x;if(Math.abs(d)<2){r();return}d<-160/2||f<-500?s.start({x:-160}):s.start({x:0}),setTimeout(()=>{a.current=!1},100)};return l.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-brand-glass border border-brand-border",children:[l.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:[l.jsxs("button",{onClick:e,onPointerDown:c=>c.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[l.jsx(tc,{size:22}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Editar"})]}),l.jsxs("button",{onClick:n,onPointerDown:c=>c.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-red text-white",children:[l.jsx(ha,{size:22}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Eliminar"})]})]}),l.jsx(On.div,{drag:"x",dragConstraints:{left:-160,right:0},dragElastic:.1,onDragStart:()=>{a.current=!0},onDragEnd:o,onTap:()=>{a.current||r()},animate:s,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg",children:l.jsx(ZMe,{sireName:t.sireName,animalCount:t.animalCount,dragControls:i})})]})},eRe=({lot:t,navigateTo:e,onEdit:n,onDelete:r})=>{const i=PT();return l.jsx(kT,{value:t,dragListener:!1,dragControls:i,children:l.jsx(JMe,{lot:t,dragControls:i,onClick:()=>e({name:"sire-lot-detail",lotId:t.id}),onEdit:()=>n(t),onDelete:()=>r(t)})},t.id)};function tRe({seasonId:t,onBack:e,navigateTo:n}){const{breedingSeasons:r,sireLots:i,fathers:s,animals:a,serviceRecords:o,addSireLot:c,updateSireLot:u,deleteSireLot:d,updateAnimal:f}=Ze(),[h,p]=P.useState(!1),[m,g]=P.useState(void 0),[b,x]=P.useState(null),[w,_]=P.useState(null),[E,j]=P.useState(!1),T=P.useMemo(()=>r.find(B=>B.id===t),[r,t]),A=P.useMemo(()=>i.filter(B=>B.seasonId===t).map(B=>{var q;const U=((q=s.find(Z=>Z.id===B.sireId))==null?void 0:q.name)||"Desconocido",F=a.filter(Z=>Z.sireLotId===B.id).length;return{...B,sireName:U,animalCount:F}}),[i,t,s,a]),[C,D]=P.useState(A);P.useEffect(()=>{D(A)},[A]);const O=P.useMemo(()=>{if(!T||T.status!=="Cerrado")return[];const B=new Set(A.map(q=>q.id)),U=a.filter(q=>q.sireLotId&&B.has(q.sireLotId)),F=new Set(o.filter(q=>q.sireLotId&&B.has(q.sireLotId)).map(q=>q.femaleId));return U.filter(q=>!F.has(q.id))},[T,A,a,o]),L=B=>{g(B),p(!0)},z=async B=>{m?await u(m.id,{sireId:B}):await c({seasonId:t,sireId:B}),p(!1),g(void 0)},M=B=>{B.animalCount>0?_(`No se puede eliminar. Reasigna las ${B.animalCount} hembra(s) a otro lote primero.`):x(B)},G=()=>{b&&(d(b.id),x(null))},K=async(B,U)=>{const F=i.find(Z=>Z.seasonId===B);if(!F){alert("La temporada de destino no tiene lotes de reproductor. Por favor, crea uno primero.");return}const q=U.map(Z=>f(Z,{sireLotId:F.id,reproductiveStatus:"En Servicio"}));await Promise.all(q)};return T?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 pb-12 animate-fade-in",children:[l.jsxs("header",{className:"flex items-center pt-8 pb-4 px-4",children:[l.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(nr,{size:24})}),l.jsxs("div",{className:"text-center flex-grow",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:T.name}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Detalle de la Temporada"})]}),l.jsx("div",{className:"w-8"})]}),l.jsxs("div",{className:"space-y-4 px-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-zinc-300",children:"Lotes de Reproductor"}),l.jsxs("button",{onClick:()=>L(),className:"flex items-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-2 px-3 rounded-lg transition-colors text-sm",children:[l.jsx(Er,{size:16})," Añadir Lote"]})]}),C.length>0?l.jsx(NT,{as:"div",axis:"y",values:C,onReorder:D,className:"space-y-3",children:C.map(B=>l.jsx(eRe,{lot:B,navigateTo:n,onEdit:L,onDelete:M},B.id))}):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-500",children:"Esta temporada aún no tiene lotes de reproductor."})})]}),T.status==="Cerrado"&&l.jsxs("div",{className:"space-y-4 px-4 pt-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-zinc-300",children:"Resultados: Hembras sin Servicio"}),O.length>0&&l.jsxs("button",{onClick:()=>j(!0),className:"flex items-center gap-2 bg-brand-blue hover:bg-blue-600 text-white font-bold py-2 px-3 rounded-lg text-sm",children:[l.jsx(wF,{size:16})," Transferir"]})]}),l.jsx("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-2",children:O.length>0?O.map(B=>l.jsxs("div",{className:"flex items-center justify-between p-2 bg-black/20 rounded-md",children:[l.jsx("span",{className:"font-semibold text-white",children:B.id}),l.jsxs("span",{className:"text-xs text-zinc-400",children:["Lote Físico: ",B.location||"N/A"]})]},B.id)):l.jsxs("div",{className:"text-center py-6 flex flex-col items-center gap-2",children:[l.jsx(See,{size:32,className:"text-zinc-600"}),l.jsx("p",{className:"text-zinc-400 font-semibold",children:"Todas las hembras tuvieron servicio en esta temporada."})]})})]})]}),l.jsx(nt,{isOpen:h,onClose:()=>{p(!1),g(void 0)},title:m?`Editar Lote de ${m.sireName}`:"Añadir Lote de Reproductor",children:l.jsx(QMe,{onSave:z,onCancel:()=>{p(!1),g(void 0)}})}),l.jsx(l1,{isOpen:!!b,onClose:()=>x(null),onConfirm:G,title:`Eliminar Lote de ${b==null?void 0:b.sireName}`,message:"¿Estás seguro de que quieres eliminar este lote? Esta acción es irreversible."}),l.jsx(nt,{isOpen:!!w,onClose:()=>_(null),title:"Acción no permitida",children:l.jsxs("div",{className:"space-y-4 text-center",children:[" ",l.jsx(Vt,{size:40,className:"mx-auto text-amber-400"})," ",l.jsx("p",{className:"text-zinc-300",children:w})," ",l.jsx("button",{onClick:()=>_(null),className:"mt-4 bg-brand-orange text-white font-semibold py-2 px-6 rounded-lg",children:"Entendido"})," "]})}),l.jsx(XMe,{isOpen:E,onClose:()=>j(!1),femalesToTransfer:O,originSeasonId:T.id,onConfirmTransfer:K})]}):l.jsxs("div",{className:"text-center p-10",children:[l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Temporada no encontrada."}),l.jsx("button",{onClick:e,className:"mt-4 text-brand-orange",children:"Volver"})]})}const nRe=(t,e,n,r,i)=>{const s=[];if(!t)return[];if(t.sex==="Hembra"){const a=e.filter(o=>o.goatId===t.id&&o.status!=="finalizada").sort((o,c)=>new Date(c.parturitionDate).getTime()-new Date(o.parturitionDate).getTime())[0];a&&(a.status==="activa"?s.push(en.MILKING):a.status==="en-secado"?s.push(en.DRYING_OFF):a.status==="seca"&&s.push(en.DRY))}if(t.reproductiveStatus==="Preñada"?s.push(en.PREGNANT):t.reproductiveStatus==="En Servicio"?n.some(o=>o.femaleId===t.id&&o.sireLotId===t.sireLotId)?s.push(en.IN_SERVICE_CONFIRMED):s.push(en.IN_SERVICE):(t.reproductiveStatus==="Vacía"||t.reproductiveStatus==="Post-Parto")&&s.push(en.EMPTY),t.sex==="Macho"){const a=i.filter(u=>u.status==="Activo"),o=new Set(a.map(u=>u.id));r.some(u=>u.sireId===t.id&&o.has(u.seasonId))&&s.push(en.SIRE_IN_SERVICE)}return Array.from(new Set(s))};function rRe({lotId:t,navigateTo:e,onBack:n}){const{sireLots:r,fathers:i,animals:s,parturitions:a,serviceRecords:o,breedingSeasons:c,updateAnimal:u,addServiceRecord:d}=Ze(),[f,h]=P.useState(!1),[p,m]=P.useState(""),[g,b]=P.useState(null),[x,w]=P.useState(!1),[_,E]=P.useState(null),j=P.useMemo(()=>r.find(K=>K.id===t),[r,t]),T=P.useMemo(()=>{var K;return((K=i.find(B=>B.id===(j==null?void 0:j.sireId)))==null?void 0:K.name)||"Desconocido"},[i,j]),A=P.useMemo(()=>j?s.filter(K=>K.sireLotId===j.id).sort((K,B)=>K.id.localeCompare(B.id)).map(K=>({...K,formattedAge:ma(K.birthDate),statusObjects:nRe(K,a,o,r,c)})):[],[s,j,a,o,r,c]),C=P.useMemo(()=>p?A.filter(K=>K.id.toLowerCase().includes(p.toLowerCase())):A,[A,p]),D=async K=>{if(!j)return;const B=K.map(U=>u(U,{sireLotId:j.id,reproductiveStatus:"En Servicio"}));await Promise.all(B),h(!1)},O=async K=>{!j||!g||(await d({sireLotId:j.id,femaleId:g.id,serviceDate:K.toISOString().split("T")[0]}),M())},L=K=>{if(!K)return[];const B=[];return B.push({label:"Registrar Servicio",icon:qC,onClick:()=>{w(!1),E("service")},color:"text-pink-400"}),B.push({label:"Declarar Parto",icon:Ua,onClick:()=>{w(!1),E("parturition")}}),B.push({label:"Declarar Aborto",icon:dv,onClick:()=>{w(!1),E("abortion")},color:"text-yellow-400"}),B.push({label:"Acciones de Leche",icon:ql,onClick:()=>{w(!1),E("milkWeighing")}}),B.push({label:"Agregar Peso Corporal",icon:ec,onClick:()=>{w(!1),E("bodyWeighing")}}),B.push({label:"Dar de Baja",icon:fa,onClick:()=>{w(!1),E("decommission")},color:"text-brand-red"}),B},z=K=>{b(K),w(!0)},M=()=>{E(null),b(null)},G=async K=>{if(!g)return;const B={status:K.reason,isReference:!0,endDate:K.date};K.reason==="Venta"&&Object.assign(B,{salePrice:K.salePrice,saleBuyer:K.saleBuyer,salePurpose:K.salePurpose}),K.reason==="Muerte"&&(B.deathReason=K.deathReason),K.reason==="Descarte"&&Object.assign(B,{cullReason:K.cullReason,cullReasonDetails:K.cullReasonDetails}),await u(g.id,B),M()};return j?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[l.jsxs("header",{className:"flex items-center justify-between pt-8 pb-4 px-4 sticky top-0 bg-gray-900/80 backdrop-blur-lg z-10 border-b border-brand-border",children:[l.jsx("button",{onClick:n,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(nr,{size:24})}),l.jsxs("div",{className:"text-center flex-grow",children:[l.jsxs("h1",{className:"text-xl font-bold tracking-tight text-white truncate",children:["Lote: ",T]}),l.jsxs("p",{className:"text-xs text-zinc-400 truncate",children:["Reproductor: ",T," (",j.sireId,")"]})]}),l.jsx("button",{onClick:()=>h(!0),className:"p-2 -mr-2 bg-brand-orange hover:bg-orange-600 text-white rounded-full transition-colors",children:l.jsx(Er,{size:24})})]}),l.jsxs("div",{className:"space-y-4 pt-4 px-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("h3",{className:"text-lg font-semibold text-zinc-300",children:["Hembras Asignadas (",C.length,")"]}),l.jsxs("div",{className:"relative w-40",children:[l.jsx(Pu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-500"}),l.jsx("input",{type:"search",value:p,onChange:K=>m(K.target.value),placeholder:"Buscar...",className:"w-full bg-zinc-800/80 rounded-lg pl-8 pr-2 py-1 text-white border-transparent focus:border-brand-amber focus:ring-0 text-sm"})]})]}),l.jsx("div",{className:"space-y-2",children:C.length>0?C.map(K=>l.jsx(rU,{animal:K,onSelect:B=>e({name:"rebano-profile",animalId:B}),onOpenActions:z},K.id)):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-500",children:p?"No se encontraron coincidencias.":"Aún no has asignado hembras a este lote."})})})]})]}),l.jsx(a1,{isOpen:f,onClose:()=>h(!1),onSelect:D,animals:s,parturitions:a,serviceRecords:o,breedingSeasons:c,sireLots:r,title:`Asignar Hembras al Lote de ${T}`,sireIdForInbreedingCheck:j.sireId}),l.jsx(Nu,{isOpen:x,onClose:()=>w(!1),title:`Acciones para ${(g==null?void 0:g.id)||""}`,actions:L(g)}),g&&l.jsxs(l.Fragment,{children:[_==="service"&&l.jsx(jU,{isOpen:!0,onClose:M,onSave:O,animalId:g.id}),_==="parturition"&&l.jsx(id,{isOpen:!0,onClose:M,motherId:g.id}),_==="abortion"&&l.jsx(rN,{animal:g,onCancel:M,onSaveSuccess:M}),_==="milkWeighing"&&l.jsx(tN,{animal:g,onCancel:M,onSaveSuccess:M}),_==="bodyWeighing"&&l.jsx(AU,{animal:g,onCancel:M,onSaveSuccess:M}),_==="decommission"&&l.jsx(nN,{animal:g,onCancel:M,onConfirm:G})]})]}):l.jsxs("div",{className:"text-center p-10",children:[l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Lote de Reproductor no encontrado."}),l.jsx("button",{onClick:n,className:"mt-4 text-brand-orange",children:"Volver"})]})}const iRe=t=>{const[e,n]=P.useState([]),[r,i]=P.useState([]),[s,a]=P.useState(!0);return P.useEffect(()=>{if(!t)return;(async()=>{a(!0);try{const u=Nt(),[d,f]=await Promise.all([u.weighings.where("goatId").equals(t).toArray(),u.parturitions.where("goatId").equals(t).toArray()]);n(d),i(f.sort((h,p)=>new Date(h.parturitionDate).getTime()-new Date(p.parturitionDate).getTime()))}catch(u){console.error(`Error al cargar datos para ${t}:`,u)}finally{a(!1)}})()},[t]),{...P.useMemo(()=>{if(r.length===0)return{allLactations:[],parturitionIntervals:[],lastWeighingDate:null};const c=r.map((f,h)=>{const p=new Date(f.parturitionDate),m=h<r.length-1?new Date(r[h+1].parturitionDate):new Date(9999,11,31),g=e.filter(T=>{const A=new Date(T.date);return A>=p&&A<m}),b=g.map(T=>({del:nd(f.parturitionDate,T.date),kg:T.kg})).sort((T,A)=>T.del-A.del),x=g.reduce((T,A)=>T+A.kg,0),w=g.length>0?x/g.length:0,_=b.reduce((T,A)=>A.kg>T.kg?A:T,{kg:0,del:0}),E=b[b.length-1],j=E?E.del:0;return{parturitionDate:f.parturitionDate,weighings:g,lactationCurve:b,averageProduction:w,peakProduction:_,totalDays:j}}),u=r.slice(1).map((f,h)=>{const p=r[h],m=new Date(f.parturitionDate).getTime()-new Date(p.parturitionDate).getTime();return{period:`${p.parturitionDate.substring(0,4)} - ${f.parturitionDate.substring(0,4)}`,days:Math.round(m/(1e3*60*60*24))}}),d=e.sort((f,h)=>new Date(h.date).getTime()-new Date(f.date).getTime())[0];return{allLactations:c,parturitionIntervals:u,lastWeighingDate:(d==null?void 0:d.date)||null}},[e,r]),isLoading:s}},sRe=(t,e,n,r)=>{const[i,s]=P.useState([]),[a,o]=P.useState(!1);return P.useEffect(()=>{if(!t||!e.length){s([]);return}(()=>{o(!0);let u=[];if(t==="PRIMIPARAS_HISTORICAL"){const p=n.reduce((m,g)=>(m[g.goatId]=(m[g.goatId]||0)+1,m),{});u=e.filter(m=>p[m.id]===1).map(m=>m.id)}else if(t==="MULTIPARAS_HISTORICAL"){const p=n.reduce((m,g)=>(m[g.goatId]=(m[g.goatId]||0)+1,m),{});u=e.filter(m=>p[m.id]>1).map(m=>m.id)}const d=r.filter(p=>u.includes(p.goatId)),f={};d.forEach(p=>{const m=n.filter(b=>b.goatId===p.goatId&&new Date(p.date)>=new Date(b.parturitionDate)).sort((b,x)=>new Date(x.parturitionDate).getTime()-new Date(b.parturitionDate).getTime())[0];if(!m)return;const g=nd(m.parturitionDate,p.date);f[g]||(f[g]={totalKg:0,count:0}),f[g].totalKg+=p.kg,f[g].count++});const h=Object.entries(f).map(([p,m])=>({del:parseInt(p),kg:m.totalKg/m.count})).sort((p,m)=>p.del-m.del);s(h),o(!1)})()},[t,e,n,r]),{comparativeCurve:i,isLoading:a}},Fu=({active:t,payload:e,label:n})=>{if(t&&e&&e.length){const r=e[0].payload.name==="Promedio Rebaño";return"range"in e[0].payload?l.jsxs("div",{className:"bg-black/50 backdrop-blur-xl p-3 rounded-lg border border-brand-border text-white",children:[l.jsxs("p",{className:"label text-brand-light-gray text-sm",children:["Rango: ",e[0].payload.range," Kg"]}),l.jsxs("p",{className:"font-bold text-base",children:["Nº de Cabras: ",e[0].value]})]}):l.jsxs("div",{className:"bg-black/50 backdrop-blur-xl p-3 rounded-lg border border-brand-border text-white",children:[l.jsx("p",{className:"label text-brand-light-gray text-sm",children:r?`Días en Leche (DEL): ${n}`:`DEL: ${n}`}),l.jsx("p",{className:"font-bold text-base",children:r?`Promedio: ${e[0].value.toFixed(2)} Kg`:`Producción: ${e[0].value.toFixed(2)} Kg`})]})}return null},Cy=({active:t,payload:e,label:n,context:r})=>{if(t&&e&&e.length){let i="",s="";switch(r){case"average":i=`Lactancia del ${n}`,s=`Promedio: ${e[0].value.toFixed(2)} Kg`;break;case"peak":i=`Lactancia del ${n}`,s=`Pico: ${e[0].value.toFixed(2)} Kg`;break;case"del":i=`Lactancia del ${n}`,s=`Duración: ${e[0].value} días`;break;case"interval":i=`Período ${n}`,s=`Intervalo: ${e[0].value} días`;break}return l.jsxs("div",{className:"bg-black/60 backdrop-blur-xl p-3 rounded-lg border border-zinc-700 text-white",children:[l.jsx("p",{className:"label text-zinc-400 text-sm font-medium",children:i}),l.jsx("p",{className:"font-semibold text-base",children:s})]})}return null};function aRe({animalId:t,onBack:e,navigateTo:n}){const{animals:r,parturitions:i,weighings:s,startDryingProcess:a,setLactationAsDry:o}=Ze(),{allLactations:c,parturitionIntervals:u,lastWeighingDate:d,isLoading:f}=iRe(t),[h,p]=P.useState(null),[m,g]=P.useState(null),[b,x]=P.useState(!1),{comparativeCurve:w,isLoading:_}=sRe(m,r,i,s),E=P.useMemo(()=>{if(c.length===0)return null;const z=c[c.length-1],M=i.find(G=>G.parturitionDate===z.parturitionDate&&G.goatId===t);return{...z,id:M==null?void 0:M.id,status:M==null?void 0:M.status}},[c,i,t]),j=P.useMemo(()=>E?nd(E.parturitionDate,new Date().toISOString().split("T")[0]):"N/A",[E]),T=P.useMemo(()=>({average:c.map(z=>({name:new Date(z.parturitionDate).getFullYear().toString(),value:z.averageProduction})),peak:c.map(z=>({name:new Date(z.parturitionDate).getFullYear().toString(),value:z.peakProduction.kg})),del:c.map(z=>({name:new Date(z.parturitionDate).getFullYear().toString(),value:z.totalDays})),interval:u.map(z=>({name:z.period,value:z.days}))}),[c,u]);if(f)return l.jsx("div",{className:"text-center p-10",children:l.jsxs("h1",{className:"text-2xl text-zinc-400",children:["Cargando perfil de lactancia de ",t,"..."]})});const A=c.length>0?c[c.length-1]:null,C=u.length>0?u[u.length-1].days:0,D=c.length===1,O=()=>{const z=!b;x(z),z||g(null)},L=z=>{g(M=>M===z?null:z)};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-4xl mx-auto space-y-4 animate-fade-in px-4",children:[l.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[l.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(nr,{size:24})}),l.jsxs("div",{className:"text-center flex-grow",children:[l.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white",children:t}),l.jsx("p",{className:"text-xl text-zinc-400",children:"Perfil de Lactancia"})]}),l.jsx("button",{onClick:()=>n({name:"rebano-profile",animalId:t}),className:"p-2 -mr-2 text-zinc-400 hover:text-white transition-colors",title:"Ir a la ficha general del animal",children:l.jsx(UC,{size:24})})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[l.jsxs("button",{onClick:()=>p("average"),className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-amber transition-colors",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[l.jsx(BC,{size:14}),l.jsx("span",{children:"Promedio"})]}),l.jsxs("p",{className:"text-2xl font-bold text-white",children:[(A==null?void 0:A.averageProduction.toFixed(2))||"N/A"," ",l.jsx("span",{className:"text-lg text-zinc-400",children:"Kg"})]})]}),l.jsxs("button",{onClick:()=>p("peak"),className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-amber transition-colors",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[l.jsx(Ka,{size:14}),l.jsx("span",{children:"Pico Prod."})]}),l.jsxs("p",{className:"text-2xl font-bold text-white",children:[(A==null?void 0:A.peakProduction.kg.toFixed(2))||"N/A"," ",l.jsx("span",{className:"text-lg text-zinc-400",children:"Kg"})]})]}),l.jsxs("button",{onClick:()=>p("del"),className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-amber transition-colors",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[l.jsx(fF,{size:14}),l.jsx("span",{children:"DEL"})]}),l.jsx("p",{className:"text-2xl font-bold text-white",children:j})]}),l.jsxs("button",{onClick:()=>p("interval"),className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-amber transition-colors",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[l.jsx(jee,{size:14}),l.jsx("span",{children:"Int. Partos"})]}),l.jsxs("p",{className:"text-2xl font-bold text-white",children:[C," ",l.jsx("span",{className:"text-lg text-zinc-400",children:"días"})]})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[l.jsx(iee,{size:14}),l.jsx("span",{children:"Últ. Pesaje"})]}),l.jsx("p",{className:"text-xl font-bold text-white",children:d?new Date(d+"T00:00:00").toLocaleDateString():"N/A"})]})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border relative",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center border-b border-brand-border pb-2 mb-4 gap-2",children:[l.jsxs("h3",{className:"text-zinc-400 font-semibold text-xs uppercase",children:["Curva de Lactancia Actual (Parto: ",(A==null?void 0:A.parturitionDate)||"N/A",")"]}),l.jsxs("div",{className:"flex items-center space-x-2 self-end sm:self-center",children:[l.jsx("span",{className:"text-xs font-semibold text-zinc-300",children:"Comparar:"}),l.jsx("button",{onClick:O,className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${b?"bg-amber-500":"bg-zinc-700"}`,children:l.jsx("span",{"aria-hidden":"true",className:`inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${b?"translate-x-5":"translate-x-0"}`})}),b&&l.jsxs("div",{className:"flex items-center space-x-2 animate-fade-in",children:[l.jsx("button",{onClick:()=>L("PRIMIPARAS_HISTORICAL"),className:`px-2 py-1 text-xs rounded-md transition-colors ${m==="PRIMIPARAS_HISTORICAL"?"bg-amber-500 text-black font-semibold":"bg-zinc-700/50 text-zinc-300 hover:bg-zinc-600/50"} ${D?"ring-2 ring-amber-400":""}`,children:"vs Primíparas"}),l.jsx("button",{onClick:()=>L("MULTIPARAS_HISTORICAL"),className:`px-2 py-1 text-xs rounded-md transition-colors ${m==="MULTIPARAS_HISTORICAL"?"bg-amber-500 text-black font-semibold":"bg-zinc-700/50 text-zinc-300 hover:bg-zinc-600/50"} ${D?"":"ring-2 ring-amber-400"}`,children:"vs Multíparas"})]})]})]}),l.jsxs("div",{className:"w-full h-56",children:[l.jsx(fr,{children:l.jsxs(J7,{margin:{top:5,right:20,left:-10,bottom:5},children:[l.jsx(Ev,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),l.jsx(Un,{dataKey:"del",type:"number",domain:["dataMin","dataMax"],tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(er,{orientation:"right",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(tn,{content:l.jsx(Fu,{})}),l.jsx(na,{verticalAlign:"top",height:36,iconType:"plainline"}),l.jsx(zu,{type:"monotone",data:A==null?void 0:A.lactationCurve,dataKey:"kg",name:t,stroke:"#FBBF24",strokeWidth:2.5,dot:!1}),m&&!_&&l.jsx(zu,{type:"monotone",data:w,dataKey:"kg",name:"Promedio del Grupo",stroke:"#34d399",strokeWidth:2,strokeDasharray:"5 5",dot:!1})]})}),_&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 backdrop-blur-sm rounded-xl text-white",children:"Calculando comparación..."})]})]}),(E==null?void 0:E.id)&&l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsx("h3",{className:"text-zinc-400 font-semibold text-xs uppercase mb-3",children:"Gestión de Lactancia Actual"}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[E.status==="activa"&&l.jsxs("button",{onClick:()=>a(E.id),className:"w-full flex items-center justify-center space-x-2 bg-blue-600/80 hover:bg-blue-500/80 text-white font-semibold py-3 px-4 rounded-xl transition-colors",children:[l.jsx(Yu,{size:20}),l.jsx("span",{children:"Iniciar Proceso de Secado"})]}),E.status==="en-secado"&&l.jsxs("button",{onClick:()=>o(E.id),className:"w-full flex items-center justify-center space-x-2 bg-gray-600/80 hover:bg-gray-500/80 text-white font-semibold py-3 px-4 rounded-xl transition-colors",children:[l.jsx(fa,{size:20}),l.jsx("span",{children:"Declarar Lactancia como Seca"})]}),E.status==="seca"&&l.jsx("div",{className:"w-full text-center p-3 bg-black/20 rounded-xl",children:l.jsx("p",{className:"font-semibold text-green-400",children:"Esta lactancia ha finalizado."})})]}),E.status==="en-secado"&&l.jsx("p",{className:"text-center text-xs text-zinc-400 mt-2",children:"El animal está en su período de secado."})]})]}),l.jsx(nt,{isOpen:h==="average",onClose:()=>p(null),title:"Historial de Promedios",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"w-full h-48 -ml-4",children:l.jsx(fr,{children:l.jsxs(Mi,{data:T.average,margin:{top:5,right:20,left:-20,bottom:0},children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"modalBarGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[l.jsx("stop",{offset:"0%",stopColor:"#FBBF24",stopOpacity:.8}),l.jsx("stop",{offset:"100%",stopColor:"#FBBF24",stopOpacity:.2})]})}),l.jsx(Un,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1}),l.jsx(er,{orientation:"right",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1,width:40}),l.jsx(tn,{content:l.jsx(Cy,{context:"average"}),cursor:{fill:"rgba(255, 255, 255, 0.1)"}}),l.jsx(hr,{dataKey:"value",radius:[4,4,0,0],fill:"url(#modalBarGradient)"})]})})}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Detalles por Lactancia"}),l.jsx("ul",{className:"space-y-1",children:c.slice().reverse().map(z=>l.jsxs("li",{className:"flex justify-between items-center p-2 rounded-md hover:bg-white/5",children:[l.jsxs("span",{className:"text-base font-medium text-zinc-200",children:["Parto del ",z.parturitionDate]}),l.jsxs("span",{className:"text-base font-semibold text-white",children:[z.averageProduction.toFixed(2)," Kg"]})]},z.parturitionDate))})]})]})}),l.jsx(nt,{isOpen:h==="peak",onClose:()=>p(null),title:"Historial de Picos de Producción",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"w-full h-48 -ml-4",children:l.jsx(fr,{children:l.jsxs(Mi,{data:T.peak,margin:{top:5,right:20,left:-20,bottom:0},children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"modalBarGradientPeak",x1:"0",y1:"0",x2:"0",y2:"1",children:[l.jsx("stop",{offset:"0%",stopColor:"#10B981",stopOpacity:.8}),l.jsx("stop",{offset:"100%",stopColor:"#10B981",stopOpacity:.2})]})}),l.jsx(Un,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1}),l.jsx(er,{orientation:"right",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1,width:40}),l.jsx(tn,{content:l.jsx(Cy,{context:"peak"}),cursor:{fill:"rgba(255, 255, 255, 0.1)"}}),l.jsx(hr,{dataKey:"value",radius:[4,4,0,0],fill:"url(#modalBarGradientPeak)"})]})})}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Detalles por Lactancia"}),l.jsx("ul",{className:"space-y-1",children:c.slice().reverse().map(z=>l.jsxs("li",{className:"flex justify-between items-center p-2 rounded-md hover:bg-white/5",children:[l.jsxs("span",{className:"text-base font-medium text-zinc-200",children:["Parto del ",z.parturitionDate]}),l.jsxs("span",{className:"text-base font-semibold text-white",children:[z.peakProduction.kg.toFixed(2)," Kg ",l.jsxs("span",{className:"font-normal text-zinc-400",children:["(Día ",z.peakProduction.del,")"]})]})]},z.parturitionDate))})]})]})}),l.jsx(nt,{isOpen:h==="del",onClose:()=>p(null),title:"Historial de Duración de Lactancias",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"w-full h-48 -ml-4",children:l.jsx(fr,{children:l.jsxs(Mi,{data:T.del,margin:{top:5,right:20,left:-20,bottom:0},children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"modalBarGradientDel",x1:"0",y1:"0",x2:"0",y2:"1",children:[l.jsx("stop",{offset:"0%",stopColor:"#3B82F6",stopOpacity:.8}),l.jsx("stop",{offset:"100%",stopColor:"#3B82F6",stopOpacity:.2})]})}),l.jsx(Un,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1}),l.jsx(er,{orientation:"right",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1,width:40}),l.jsx(tn,{content:l.jsx(Cy,{context:"del"}),cursor:{fill:"rgba(255, 255, 255, 0.1)"}}),l.jsx(hr,{dataKey:"value",radius:[4,4,0,0],fill:"url(#modalBarGradientDel)"})]})})}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Detalles por Lactancia"}),l.jsx("ul",{className:"space-y-1",children:c.slice().reverse().map(z=>l.jsxs("li",{className:"flex justify-between items-center p-2 rounded-md hover:bg-white/5",children:[l.jsxs("span",{className:"text-base font-medium text-zinc-200",children:["Parto del ",z.parturitionDate]}),l.jsxs("span",{className:"text-base font-semibold text-white",children:[z.totalDays," días"]})]},z.parturitionDate))})]})]})}),l.jsx(nt,{isOpen:h==="interval",onClose:()=>p(null),title:"Historial de Intervalos entre Partos",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"w-full h-48 -ml-4",children:l.jsx(fr,{children:l.jsxs(Mi,{data:T.interval,margin:{top:5,right:20,left:-20,bottom:0},children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"modalBarGradientInt",x1:"0",y1:"0",x2:"0",y2:"1",children:[l.jsx("stop",{offset:"0%",stopColor:"#8B5CF6",stopOpacity:.8}),l.jsx("stop",{offset:"100%",stopColor:"#8B5CF6",stopOpacity:.2})]})}),l.jsx(Un,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1}),l.jsx(er,{orientation:"right",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1,width:40}),l.jsx(tn,{content:l.jsx(Cy,{context:"interval"}),cursor:{fill:"rgba(255, 255, 255, 0.1)"}}),l.jsx(hr,{dataKey:"value",radius:[4,4,0,0],fill:"url(#modalBarGradientInt)"})]})})}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Detalles de Intervalos"}),l.jsx("ul",{className:"space-y-1",children:u.slice().reverse().map(z=>l.jsxs("li",{className:"flex justify-between items-center p-2 rounded-md hover:bg-white/5",children:[l.jsxs("span",{className:"text-base font-medium text-zinc-200",children:["Período ",z.period]}),l.jsxs("span",{className:"text-base font-semibold text-white",children:[z.days," días"]})]},z.period))})]})]})})]})}const oRe=({plan:t})=>l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsx("p",{className:"font-semibold text-white",children:t.details}),l.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:["Iniciado el: ",new Date(t.startDate+"T00:00:00").toLocaleDateString("es-VE")]})]});function lRe({lotName:t,onBack:e}){const{feedingPlans:n,addFeedingPlan:r}=Ze(),[i,s]=P.useState(""),[a,o]=P.useState(new Date().toISOString().split("T")[0]),[c,u]=P.useState(null),d=P.useMemo(()=>n.filter(h=>h.lotName===t).sort((h,p)=>new Date(p.startDate).getTime()-new Date(h.startDate).getTime()),[n,t]),f=async h=>{if(h.preventDefault(),!i.trim()){u({type:"error",text:"Los detalles del plan no pueden estar vacíos."});return}try{await r({lotName:t,details:i,startDate:a}),u({type:"success",text:"Plan de alimentación guardado con éxito."}),s("")}catch(p){u({type:"error",text:"No se pudo guardar el plan."}),console.error(p)}};return l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 pb-12 animate-fade-in",children:[l.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[l.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(nr,{size:24})}),l.jsxs("div",{className:"text-center flex-grow",children:[l.jsxs("h1",{className:"text-3xl font-bold tracking-tight text-white",children:["Alimentación: ",t]}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Planes de Nutrición del Lote"})]}),l.jsx("div",{className:"w-8"})]}),l.jsxs("form",{onSubmit:f,className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-4",children:[l.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[l.jsx(Er,{size:20})," Asignar Nuevo Plan"]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"planDetails",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Detalles del Plan (Ej: 2kg de concentrado/día)"}),l.jsx("textarea",{id:"planDetails",rows:3,value:i,onChange:h=>s(h.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"planStartDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Inicio"}),l.jsx("input",{id:"planStartDate",type:"date",value:a,onChange:h=>o(h.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),l.jsx("button",{type:"submit",className:"w-full bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 rounded-xl text-lg transition-colors",children:"Guardar Plan"}),c&&l.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${c.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[c.type==="success"?l.jsx(ri,{size:18}):l.jsx(Vt,{size:18}),l.jsx("span",{children:c.text})]})]}),l.jsxs("div",{className:"space-y-4 pt-4",children:[l.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 px-2 flex items-center gap-2",children:[l.jsx(FC,{size:20})," Historial de Planes"]}),d.length>0?l.jsx("div",{className:"space-y-2",children:d.map(h=>l.jsx(oRe,{plan:h},h.id))}):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-500",children:"No hay planes de alimentación registrados para este lote."})})]})]})}const cRe=({event:t})=>l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsx("p",{className:"font-semibold text-white",children:t.details}),l.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:["Aplicado el: ",new Date(t.date+"T00:00:00").toLocaleDateString("es-VE")]})]});function uRe({lotName:t,onBack:e}){const{events:n,addBatchEvent:r}=Ze(),[i,s]=P.useState(""),[a,o]=P.useState(new Date().toISOString().split("T")[0]),[c,u]=P.useState(null),d=P.useMemo(()=>{const h=n.filter(p=>p.lotName===t&&p.type==="Tratamiento").reduce((p,m)=>{const g=`${m.date}-${m.details}`;return p[g]||(p[g]=m),p},{});return Object.values(h).sort((p,m)=>new Date(m.date).getTime()-new Date(p.date).getTime())},[n,t]),f=async h=>{if(h.preventDefault(),u(null),!i.trim()){u({type:"error",text:"Los detalles del tratamiento no pueden estar vacíos."});return}try{await r({lotName:t,details:i,date:a,type:"Tratamiento"}),u({type:"success",text:"Tratamiento registrado con éxito para todo el lote."}),s("")}catch(p){u({type:"error",text:"No se pudo registrar el tratamiento."}),console.error(p)}};return l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 pb-12 animate-fade-in",children:[l.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[l.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(nr,{size:24})}),l.jsxs("div",{className:"text-center flex-grow",children:[l.jsxs("h1",{className:"text-3xl font-bold tracking-tight text-white",children:["Tratamientos: ",t]}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Sanidad Colectiva del Lote"})]}),l.jsx("div",{className:"w-8"})]}),l.jsxs("form",{onSubmit:f,className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-4",children:[l.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[l.jsx(Er,{size:20})," Registrar Tratamiento al Lote"]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"treatmentDetails",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Detalles del Tratamiento (Ej: Vacuna Triple)"}),l.jsx("textarea",{id:"treatmentDetails",rows:3,value:i,onChange:h=>s(h.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"treatmentDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Aplicación"}),l.jsx("input",{id:"treatmentDate",type:"date",value:a,onChange:h=>o(h.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),l.jsx("button",{type:"submit",className:"w-full bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 rounded-xl text-lg transition-colors",children:"Guardar Tratamiento"}),c&&l.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${c.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[c.type==="success"?l.jsx(ri,{size:18}):l.jsx(Vt,{size:18}),l.jsx("span",{children:c.text})]})]}),l.jsxs("div",{className:"space-y-4 pt-4",children:[l.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 px-2 flex items-center gap-2",children:[l.jsx(Dee,{size:20})," Historial de Tratamientos del Lote"]}),d.length>0?l.jsx("div",{className:"space-y-2",children:d.map(h=>l.jsx(cRe,{event:h},h.id))}):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-500",children:"No hay tratamientos registrados para este lote."})})]})]})}const Od=({icon:t,label:e,value:n,unit:r,colorClass:i})=>l.jsxs("div",{className:`bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border ${i||""}`,children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[l.jsx(t,{size:14}),l.jsx("span",{children:e})]}),l.jsxs("p",{className:"text-2xl font-bold text-white",children:[n," ",l.jsx("span",{className:"text-lg text-zinc-400",children:r})]})]}),dRe=({active:t,payload:e,label:n})=>t&&e&&e.length?l.jsxs("div",{className:"bg-black/50 backdrop-blur-xl p-3 rounded-lg border border-brand-border text-white",children:[l.jsxs("p",{className:"label text-brand-light-gray text-sm",children:["Edad: ",n," días"]}),e.map(r=>l.jsxs("p",{style:{color:r.color},className:"font-bold text-base",children:[r.name,": ",r.value.toFixed(2)," Kg"]},r.name))]}):null;function fRe({animalId:t,onBack:e}){const{animals:n,bodyWeighings:r}=Ze(),i=P.useMemo(()=>{const p=n.find(A=>A.id===t);if(!p)return null;const m=r.filter(A=>A.animalId===p.id).sort((A,C)=>new Date(A.date).getTime()-new Date(C.date).getTime()),g=zP(p.birthWeight,m),b=ma(p.birthDate),x=m.length>0?m[m.length-1].kg:p.birthWeight||0,w=Lke(p),_=zke(p,m),E=m.map(A=>({age:(new Date(A.date).getTime()-new Date(p.birthDate).getTime())/(1e3*60*60*24),[p.id]:A.kg}));p.birthWeight&&E.unshift({age:0,[p.id]:p.birthWeight});const T=[60,90,180,270].map(A=>({days:A,weight:eU(m,p.birthDate,A)}));return{animal:p,gdp:g,formattedAge:b,latestWeight:x,chartData:E,interpolatedWeights:T,weaningIndex:w,precocityIndex:_}},[t,n,r]);if(!i)return l.jsx("div",{className:"text-center p-10",children:l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Animal no encontrado."})});const{animal:s,gdp:a,formattedAge:o,latestWeight:c,chartData:u,interpolatedWeights:d,weaningIndex:f,precocityIndex:h}=i;return l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in pb-12",children:[l.jsxs("header",{className:"flex items-center pt-8 pb-4 px-4",children:[l.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(nr,{size:24})}),l.jsxs("div",{className:"text-center flex-grow",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:s.id}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Perfil de Crecimiento"})]}),l.jsx("div",{className:"w-8"})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 px-4",children:[l.jsx(Od,{icon:ec,label:"Peso Actual",value:c.toFixed(2),unit:"Kg"}),l.jsx(Od,{icon:Ka,label:"GDP General",value:a.overall?(a.overall*1e3).toFixed(0):"N/A",unit:"g/día"}),l.jsx(Od,{icon:Is,label:"Edad Actual",value:o}),l.jsx(Od,{icon:xee,label:"Nº Pesajes",value:u.length})]}),(f||h)&&l.jsxs("div",{className:"grid grid-cols-2 gap-4 px-4",children:[f&&l.jsx(Od,{icon:Hee,label:"Índice Destete (60d)",value:f.toFixed(2),unit:"Kg",colorClass:"border-amber-400/50"}),h&&l.jsx(Od,{icon:Uee,label:"Índice Precocidad (7m)",value:h.toFixed(2),unit:"Kg",colorClass:"border-amber-400/50"})]}),l.jsx("div",{className:"px-4",children:l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Curva de Crecimiento"}),l.jsx("div",{className:"w-full h-64",children:l.jsx(fr,{children:l.jsxs(J7,{data:u,margin:{top:5,right:20,left:-10,bottom:5},children:[l.jsx(Ev,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),l.jsx(Un,{dataKey:"age",type:"number",domain:["dataMin","dataMax"],tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},label:{value:"Edad (días)",position:"insideBottom",offset:-5,fill:"rgba(255,255,255,0.5)"}}),l.jsx(er,{orientation:"right",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},label:{value:"Peso (Kg)",angle:-90,position:"insideRight",fill:"rgba(255,255,255,0.5)"}}),l.jsx(tn,{content:l.jsx(dRe,{})}),l.jsx(na,{verticalAlign:"top",height:36}),l.jsx(zu,{type:"monotone",dataKey:s.id,stroke:"#34C759",strokeWidth:2.5,dot:{r:4},activeDot:{r:6}})]})})})]})}),l.jsx("div",{className:"px-4",children:l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Hitos de Crecimiento (Pesos Estimados)"}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:d.map(({days:p,weight:m})=>l.jsxs("div",{className:"bg-black/20 p-3 rounded-lg text-center",children:[l.jsxs("p",{className:"text-sm text-zinc-400",children:["Peso a los ",p," días"]}),l.jsx("p",{className:"text-xl font-bold text-white",children:m?`${m.toFixed(2)} Kg`:"---"})]},p))})]})})]})}const hRe=t=>new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(r.result.split(",")[1]),r.onerror=i=>n(i)}),pRe=({onImageSelect:t})=>{const e=P.useRef(null),n=r=>{var i;(i=r.target.files)!=null&&i[0]&&t(r.target.files[0])};return l.jsxs("div",{className:"space-y-4 animate-fade-in",children:[l.jsx("input",{type:"file",ref:e,accept:"image/*",onChange:n,className:"hidden"}),l.jsxs("button",{onClick:()=>{var r,i;(r=e.current)==null||r.setAttribute("capture","environment"),(i=e.current)==null||i.click()},className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-blue-400 text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[l.jsx(oee,{className:"w-12 h-12 mb-2 text-blue-400"}),l.jsx("span",{className:"text-lg font-semibold",children:"Tomar Foto"}),l.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Usa la cámara para escanear"})]}),l.jsxs("button",{onClick:()=>{var r,i;(r=e.current)==null||r.removeAttribute("capture"),(i=e.current)==null||i.click()},className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-green-400 text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[l.jsx(vee,{className:"w-12 h-12 mb-2 text-green-400"}),l.jsx("span",{className:"text-lg font-semibold",children:"Seleccionar Archivo"}),l.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Elige una foto de tu galería"})]})]})};function mRe({onBack:t}){const[e,n]=P.useState("capture"),[r,i]=P.useState(""),[s,a]=P.useState(""),o=async c=>{var u,d;n("loading"),i(""),a("");try{const f=await hRe(c),g=await fetch("https://vision.googleapis.com/v1/images:annotate?key=AIzaSyAsHrxI8e8prsvYNvx992YyC26n592GfWk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({requests:[{image:{content:f},features:[{type:"TEXT_DETECTION"}]}]})});if(!g.ok){const w=await g.json();throw new Error(w.error.message||"Error en la API de Google Vision.")}const x=(d=(u=(await g.json()).responses[0])==null?void 0:u.fullTextAnnotation)==null?void 0:d.text;if(x)a(x),n("verification");else throw new Error("No se pudo detectar texto en la imagen. Intenta con una foto más clara.")}catch(f){i(f.message||"Ocurrió un error inesperado."),n("error")}};return l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4",children:[l.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[l.jsx("button",{onClick:t,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(nr,{size:24})}),l.jsxs("div",{className:"text-center flex-grow",children:[l.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white",children:"Escanear Cuaderno"}),l.jsx("p",{className:"text-xl text-zinc-400",children:"Digitalización Asistida"})]}),l.jsx("div",{className:"w-8"})]}),e==="capture"&&l.jsx(pRe,{onImageSelect:o}),e==="loading"&&l.jsxs("div",{className:"text-center py-20 animate-fade-in",children:[l.jsx(vF,{className:"w-12 h-12 text-amber-400 mx-auto animate-spin"}),l.jsx("p",{className:"mt-4 text-zinc-400",children:"Analizando imagen con IA..."})]}),e==="verification"&&l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border animate-fade-in space-y-4",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase tracking-wider border-b border-brand-border pb-2",children:[l.jsx(UC,{}),l.jsx("span",{children:"Texto Reconocido"})]}),l.jsx("textarea",{readOnly:!0,value:s,className:"w-full h-48 bg-black/20 text-white p-3 rounded-lg border border-zinc-700"}),l.jsx("p",{className:"text-xs text-zinc-500 text-center",children:"Funcionalidad de autocompletado de pesajes próximamente."}),l.jsx("button",{onClick:()=>n("capture"),className:"w-full bg-zinc-700 hover:bg-zinc-600 text-white font-semibold py-2 px-4 rounded-lg",children:"Escanear Otra Imagen"})]}),e==="error"&&l.jsxs("div",{className:"bg-red-900/40 border border-red-500/50 rounded-2xl p-6 text-center animate-fade-in",children:[l.jsx(Vt,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),l.jsx("h2",{className:"text-lg font-semibold text-white mb-2",children:"Ocurrió un Error"}),l.jsx("p",{className:"text-red-300",children:r}),l.jsx("button",{onClick:()=>n("capture"),className:"mt-6 bg-zinc-700 hover:bg-zinc-600 text-white font-semibold py-2 px-4 rounded-lg",children:"Intentar de Nuevo"})]})]})}const q5=152,iN=()=>{const{animals:t,breedingSeasons:e,sireLots:n,serviceRecords:r,fathers:i}=Ze();return{forecastBySeason:P.useMemo(()=>{var d;const a=[],o=e.filter(f=>f.status==="Activo");for(const f of o){const h=n.filter(g=>g.seasonId===f.id);if(h.length===0)continue;const p=new Set(h.map(g=>g.id)),m=t.filter(g=>g.sireLotId&&p.has(g.sireLotId));for(const g of m){const b=r.filter(_=>_.femaleId===g.id&&_.sireLotId===g.sireLotId&&new Date(_.serviceDate)>=new Date(f.startDate)&&new Date(_.serviceDate)<=new Date(f.endDate)).sort((_,E)=>new Date(E.serviceDate).getTime()-new Date(_.serviceDate).getTime())[0],x=n.find(_=>_.id===g.sireLotId);if(!x)continue;const w=((d=i.find(_=>_.id===x.sireId))==null?void 0:d.name)||x.sireId;if(b){const _=new Date(b.serviceDate);_.setDate(_.getDate()+q5),a.push({animal:g,dueDate:_,type:"Confirmada",sireId:x.sireId,sireName:w,seasonId:f.id})}else{const E=new Date(f.startDate);E.setDate(E.getDate()+10+q5),a.push({animal:g,dueDate:E,type:"Probable",sireId:x.sireId,sireName:w,seasonId:f.id})}}}const c=a.reduce((f,h)=>{const{seasonId:p}=h;return f[p]||(f[p]=[]),f[p].push(h),f},{});let u=Object.entries(c).map(([f,h])=>{const p=e.find(x=>x.id===f),m=h.map(x=>x.dueDate.getTime()),g=new Date(Math.min(...m)),b=new Date(Math.max(...m));return{seasonId:f,seasonName:p.name,projectedStartDate:h.length>0?g:null,projectedEndDate:h.length>0?b:null,events:h.sort((x,w)=>x.dueDate.getTime()-w.dueDate.getTime()),totalEvents:h.length,confirmedEvents:h.filter(x=>x.type==="Confirmada").length,probableEvents:h.filter(x=>x.type==="Probable").length,daysSinceLastSeason:null}}).sort((f,h)=>f.projectedStartDate.getTime()-h.projectedStartDate.getTime());if(u.length>1)for(let f=1;f<u.length;f++){const h=u[f].projectedStartDate,p=u[f-1].projectedEndDate,m=h.getTime()-p.getTime(),g=Math.ceil(m/(1e3*60*60*24));u[f].daysSinceLastSeason=g}return u},[t,e,n,r,i])}},gRe=`
  .rdp { --rdp-cell-size: 45px; --rdp-accent-color: #FF9500; --rdp-background-color: #2C2C2E; --rdp-accent-color-dark: #FF9500; --rdp-background-color-dark: #2C2C2E; --rdp-outline: 2px solid var(--rdp-accent-color); --rdp-border-radius: 12px; color: #FFF; width: 100%; }
  .rdp-caption_label, .rdp-nav_button { color: #FF9500; }
  .rdp-head_cell { color: #8e8e93; font-size: 0.8em; }
  .rdp-day_selected { background-color: var(--rdp-accent-color); color: #000; font-weight: bold; }
  .day-confirmed { position: relative; }
  .day-confirmed::after { content: ''; position: absolute; bottom: 6px; left: 50%; transform: translateX(-50%); width: 6px; height: 6px; border-radius: 50%; background-color: #34C759; }
  .day-probable { position: relative; }
  .day-probable::after { content: ''; position: absolute; bottom: 6px; left: 50%; transform: translateX(-50%); width: 6px; height: 6px; border-radius: 50%; background-color: #FF9500; opacity: 0.7; }
`,vRe=({seasonForecast:t,onClick:e})=>{var n,r;return l.jsxs("button",{onClick:e,className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border hover:border-brand-blue transition-colors",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:t.seasonName}),l.jsxs("p",{className:"text-sm text-zinc-400",children:[(n=t.projectedStartDate)==null?void 0:n.toLocaleDateString("es-VE",{month:"long",day:"numeric"})," - ",(r=t.projectedEndDate)==null?void 0:r.toLocaleDateString("es-VE",{month:"long",day:"numeric",year:"numeric"})]})]}),t.daysSinceLastSeason!==null&&t.daysSinceLastSeason>0&&l.jsxs("div",{className:"text-right flex-shrink-0 ml-4",children:[l.jsx("p",{className:"text-xs text-zinc-500",children:"Separación"}),l.jsxs("p",{className:"font-semibold text-white",children:[t.daysSinceLastSeason," días"]})]})]}),l.jsxs("div",{className:"mt-3 pt-3 border-t border-zinc-700/50 flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"font-bold text-2xl text-white",children:t.totalEvents}),l.jsx("p",{className:"text-xs text-zinc-400",children:"Partos"})]}),l.jsxs("div",{className:"text-left text-xs",children:[l.jsxs("p",{className:"flex items-center gap-1 text-brand-green",children:[l.jsx(ri,{size:12})," Confirmados: ",t.confirmedEvents]}),l.jsxs("p",{className:"flex items-center gap-1 text-brand-orange",children:[l.jsx(VC,{size:12})," Probables: ",t.probableEvents]})]})]}),l.jsx(tr,{className:"text-zinc-600"})]})]})},yRe=({forecastItem:t,onClick:e})=>l.jsxs("button",{onClick:e,className:"w-full text-left bg-black/20 rounded-lg p-3 flex justify-between items-center hover:bg-zinc-800/60 transition-colors",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-white",children:t.animal.id}),l.jsxs("p",{className:"text-xs text-zinc-400",children:["Reproductor: ",t.sireName]})]}),l.jsxs("div",{className:`flex items-center gap-2 text-sm font-semibold ${t.type==="Confirmada"?"text-brand-green":"text-brand-orange"}`,children:[t.type==="Confirmada"?l.jsx(ri,{size:16}):l.jsx(VC,{size:16}),l.jsx("span",{children:t.type})]})]});function bRe({navigateTo:t}){const{forecastBySeason:e}=iN(),[n,r]=P.useState("cards"),[i,s]=P.useState(void 0),[a,o]=P.useState(new Date),c=P.useMemo(()=>e.flatMap(f=>f.events),[e]),u=P.useMemo(()=>({confirmed:c.filter(f=>f.type==="Confirmada").map(f=>f.dueDate),probable:c.filter(f=>f.type==="Probable").map(f=>f.dueDate)}),[c]),d=P.useMemo(()=>i?c.filter(f=>f.dueDate.getFullYear()===i.getFullYear()&&f.dueDate.getMonth()===i.getMonth()&&f.dueDate.getDate()===i.getDate()):[],[c,i]);return l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4",children:[l.jsx("style",{children:gRe}),l.jsxs("header",{className:"text-center",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Calendario de Partos"}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Proyecciones del Rebaño"})]}),l.jsxs("div",{className:"flex justify-center p-1 bg-zinc-800 rounded-xl",children:[l.jsxs("button",{onClick:()=>r("cards"),className:`w-1/2 py-2 text-sm font-semibold rounded-lg flex items-center justify-center gap-2 transition-colors ${n==="cards"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:[l.jsx(gF,{size:16})," Temporadas"]}),l.jsxs("button",{onClick:()=>r("calendar"),className:`w-1/2 py-2 text-sm font-semibold rounded-lg flex items-center justify-center gap-2 transition-colors ${n==="calendar"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:[l.jsx(Is,{size:16})," Calendario"]})]}),n==="cards"&&l.jsx("div",{className:"space-y-3",children:e.length>0?e.map(f=>l.jsx(vRe,{seasonForecast:f,onClick:()=>t({name:"birthing-season-detail",seasonId:f.seasonId})},f.seasonId)):l.jsxs("div",{className:"text-center py-10 bg-brand-glass rounded-2xl flex flex-col items-center gap-2",children:[l.jsx(Ua,{size:32,className:"text-zinc-600"}),l.jsx("p",{className:"text-zinc-400",children:"No hay temporadas de parto activas o proyectadas."})]})}),n==="calendar"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-2 border border-brand-border",children:l.jsx(Yh,{mode:"single",selected:i,onSelect:s,month:a,onMonthChange:o,locale:KP,modifiers:{confirmed:u.confirmed,probable:u.probable},modifiersClassNames:{confirmed:"day-confirmed",probable:"day-probable"},showOutsideDays:!0})}),i&&l.jsxs("div",{className:"space-y-3 pt-2",children:[l.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Proyecciones para el ",i.toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"})]}),d.length>0?l.jsx("div",{className:"space-y-2",children:d.map(f=>l.jsx(yRe,{forecastItem:f,onClick:()=>t({name:"rebano-profile",animalId:f.animal.id})},f.animal.id))}):l.jsx("div",{className:"text-center py-6 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-500",children:"No hay partos proyectados para este día."})})]})]})]})}const xRe=({forecastItem:t,onClick:e})=>l.jsxs("button",{onClick:e,className:"w-full text-left bg-black/20 rounded-lg p-3 flex justify-between items-center hover:bg-zinc-800/60 transition-colors",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-white",children:t.animal.id}),l.jsxs("p",{className:"text-xs text-zinc-400",children:["Reproductor: ",t.sireName]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:`flex items-center gap-2 text-sm font-semibold ${t.type==="Confirmada"?"text-brand-green":"text-brand-orange"}`,children:[t.type==="Confirmada"?l.jsx(ri,{size:16}):l.jsx(VC,{size:16}),l.jsx("span",{children:t.type})]}),l.jsx(tr,{className:"text-zinc-600"})]})]}),wRe=t=>{const e=new Date(t.getUTCFullYear(),t.getUTCMonth(),1),n=e.getUTCDay()===0?6:e.getUTCDay()-1,r=t.getUTCDate(),i=Math.ceil((r+n)/7),s=t.toLocaleString("es-VE",{month:"short",timeZone:"UTC"});return`${s.charAt(0).toUpperCase()+s.slice(1)} - Sem ${i}`};function _Re({seasonId:t,onBack:e,navigateTo:n}){const{forecastBySeason:r}=iN(),i=P.useMemo(()=>r.find(a=>a.seasonId===t),[r,t]),s=P.useMemo(()=>{if(!i)return[];const a={};return i.events.forEach(o=>{const c=o.dueDate,u=wRe(c);if(!a[u]){const d=c.getUTCDate(),f=c.getUTCDay()===0?6:c.getUTCDay()-1,h=new Date(c);h.setUTCDate(d-f),a[u]={count:0,startDate:h}}a[u].count++}),Object.entries(a).map(([o,c])=>({name:o,partos:c.count,startDate:c.startDate})).sort((o,c)=>o.startDate.getTime()-c.startDate.getTime())},[i]);return i?l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4",children:[l.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[l.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(nr,{size:24})}),l.jsxs("div",{className:"text-center flex-grow",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:i.seasonName}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Detalle de Proyección de Partos"})]}),l.jsx("div",{className:"w-8"})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-white mb-4",children:[l.jsx(nw,{size:20})," Proyección Semanal de Partos"]}),l.jsx("div",{className:"w-full h-56",children:l.jsx(fr,{children:l.jsxs(Mi,{data:s,margin:{top:5,right:10,left:-20,bottom:5},children:[l.jsx(Ev,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),l.jsx(Un,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(er,{allowDecimals:!1,tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(tn,{cursor:{fill:"rgba(255, 255, 255, 0.1)"},contentStyle:{backgroundColor:"rgba(44, 44, 46, 0.8)",border:"1px solid #444",borderRadius:"12px"}}),l.jsx(hr,{dataKey:"partos",name:"Nº de Partos",fill:"#007AFF",radius:[4,4,0,0]})]})})})]}),l.jsxs("div",{className:"space-y-3 pt-4",children:[l.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Lista de Animales (",i.totalEvents,")"]}),l.jsx("div",{className:"space-y-2",children:i.events.map(a=>l.jsx(xRe,{forecastItem:a,onClick:()=>n({name:"rebano-profile",animalId:a.animal.id})},a.animal.id))})]})]}):l.jsxs("div",{className:"text-center p-10",children:[l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Temporada de Partos no encontrada."}),l.jsx("button",{onClick:e,className:"mt-4 text-brand-amber",children:"Volver"})]})}const SRe=[{id:"rebano",name:"Rebaño",icon:fv,color:"bg-amber-600"},{id:"lactokeeper",name:"LactoKeeper",icon:ql,color:"bg-brand-blue"},{id:"kilos",name:"Kilos",icon:ec,color:"bg-brand-green"},{id:"salud",name:"StockCare",icon:rw,color:"bg-teal-500"},{id:"cents",name:"Cents",icon:Hl,color:"bg-yellow-500"}],c1=({onSwitchModule:t})=>{const[e,n]=P.useState(!1),r=i=>{n(!1),t(i)};return l.jsxs("div",{className:"fixed bottom-24 right-4 z-40 flex flex-col items-end gap-4",children:[l.jsx("div",{className:`flex flex-col items-end gap-4 transition-all duration-300 ease-in-out overflow-hidden ${e?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:SRe.map(i=>l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"bg-black/60 backdrop-blur-md text-white text-sm font-semibold px-3 py-1 rounded-md shadow-lg",children:i.name}),l.jsx("button",{onClick:()=>r(i.id),className:`w-14 h-14 rounded-full flex items-center justify-center text-white shadow-lg ${i.color} transform transition-transform hover:scale-110`,"aria-label":`Cambiar al módulo ${i.name}`,children:l.jsx(i.icon,{size:28})})]},i.id))}),l.jsx("button",{onClick:()=>n(!e),className:"w-16 h-16 rounded-full flex items-center justify-center text-black bg-brand-amber shadow-2xl shadow-black/50 transform transition-transform duration-200 hover:scale-110 pointer-events-auto","aria-label":"Seleccionar módulo",children:l.jsx("div",{className:`transform transition-transform duration-300 ${e?"rotate-180 scale-75":"rotate-0"}`,children:e?l.jsx(Fo,{size:32}):l.jsx(mF,{size:32})})})]})};function ARe(t){return hs({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224l0 32 0 160c0 17.7 14.3 32 32 32l32 0c17.7 0 32-14.3 32-32l0-88.2c9.9 6.6 20.6 12 32 16.1l0 24.2c0 8.8 7.2 16 16 16s16-7.2 16-16l0-16.9c5.3 .6 10.6 .9 16 .9s10.7-.3 16-.9l0 16.9c0 8.8 7.2 16 16 16s16-7.2 16-16l0-24.2c11.4-4 22.1-9.4 32-16.1l0 88.2c0 17.7 14.3 32 32 32l32 0c17.7 0 32-14.3 32-32l0-160 32 32 0 49.5c0 9.5 2.8 18.7 8.1 26.6L530 427c8.8 13.1 23.5 21 39.3 21c22.5 0 41.9-15.9 46.3-38l20.3-101.6c2.6-13-.3-26.5-8-37.3l-3.9-5.5 0-81.6c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 14.4-52.9-74.1C496 86.5 452.4 64 405.9 64L272 64l-16 0-64 0-48 0C77.7 64 24 117.7 24 184l0 54C9.4 249.8 0 267.8 0 288l0 17.6c0 8 6.4 14.4 14.4 14.4C46.2 320 72 294.2 72 262.4l0-6.4 0-32 0-40c0-24.3 12.1-45.8 30.5-58.9C98.3 135.9 96 147.7 96 160l0 64zM560 336a16 16 0 1 1 32 0 16 16 0 1 1 -32 0zM166.6 166.6c-4.2-4.2-6.6-10-6.6-16c0-12.5 10.1-22.6 22.6-22.6l178.7 0c12.5 0 22.6 10.1 22.6 22.6c0 6-2.4 11.8-6.6 16l-23.4 23.4C332.2 211.8 302.7 224 272 224s-60.2-12.2-81.9-33.9l-23.4-23.4z"},child:[]}]})(t)}const ERe={idle:{Icon:hee,color:"text-green-500",label:"Datos sincronizados"},syncing:{Icon:dee,color:"text-amber-500 animate-spin-slow",label:"Sincronizando datos..."},offline:{Icon:fee,color:"text-red-500",label:"Sin conexión"}},Nv=({status:t})=>{const{Icon:e,color:n,label:r}=ERe[t];return l.jsx("div",{className:"flex items-center gap-2",title:r,children:l.jsx(e,{className:`w-5 h-5 ${n}`})})};function jRe({initialPage:t,onSwitchModule:e}){const{syncStatus:n}=Ze(),[r,i]=P.useState({name:"lots-dashboard"}),[s,a]=P.useState([]);P.useEffect(()=>{t&&(i(t),a([]))},[t]);const o=[{page:{name:"lots-dashboard"},label:"Lotes",icon:CF,mapsTo:["lots-dashboard","lot-detail","breeding-season-detail","sire-lot-detail","feeding-plan","batch-treatment"]},{page:{name:"herd"},label:"Rebaño",icon:ARe,mapsTo:["herd","rebano-profile","manage-lots","lactation-profile","growth-profile"]},{page:{name:"farm-calendar"},label:"Calendario",icon:fF,mapsTo:["farm-calendar","birthing-season-detail"]},{page:{name:"add-animal"},label:"Añadir",icon:rs,mapsTo:["add-animal","ocr"]}],c=h=>{a(p=>[...p,r]),i(h)},u=()=>{const h=s.pop();h?(a([...s]),i(h)):i({name:"lots-dashboard"})},d=h=>{a([]),i(h)},f=()=>{switch(r.name){case"lots-dashboard":return l.jsx(E5,{navigateTo:c});case"lot-detail":return l.jsx(bMe,{lotName:r.lotName,onBack:u,navigateTo:c});case"breeding-season-detail":return l.jsx(tRe,{seasonId:r.seasonId,onBack:u,navigateTo:c});case"sire-lot-detail":return l.jsx(rRe,{lotId:r.lotId,onBack:u,navigateTo:c});case"herd":return l.jsx(IMe,{navigateTo:c,locationFilter:r.locationFilter});case"manage-lots":return l.jsx(YMe,{onBack:()=>d({name:"herd"})});case"management":return l.jsx(GMe,{onSelectAnimal:h=>c({name:"rebano-profile",animalId:h})});case"add-animal":return l.jsx(AMe,{onBack:()=>d({name:"herd"})});case"rebano-profile":return l.jsx(qMe,{animalId:r.animalId,onBack:u,navigateTo:c});case"lactation-profile":return l.jsx(aRe,{animalId:r.animalId,onBack:u,navigateTo:c});case"growth-profile":return l.jsx(fRe,{animalId:r.animalId,onBack:u});case"ocr":return l.jsx(mRe,{onBack:u});case"feeding-plan":return l.jsx(lRe,{lotName:r.lotName,onBack:u});case"batch-treatment":return l.jsx(uRe,{lotName:r.lotName,onBack:u});case"farm-calendar":return l.jsx(bRe,{navigateTo:c});case"birthing-season-detail":return l.jsx(_Re,{seasonId:r.seasonId,onBack:u,navigateTo:c});default:return l.jsx(E5,{navigateTo:c})}};return l.jsxs("div",{className:"font-sans text-gray-200 min-h-screen animate-fade-in",children:[l.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-gray-900/80 backdrop-blur-lg border-b border-brand-border",children:l.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(fv,{className:"text-brand-orange",size:28}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-bold text-white leading-none",children:"GanaderoOS"}),l.jsx("p",{className:"text-xs text-zinc-400 leading-none",children:"Rebaño"})]})]}),l.jsx("div",{className:"flex items-center gap-4",children:l.jsx(Nv,{status:n})})]})}),l.jsx("main",{className:"pt-16 pb-24",children:f()}),l.jsx(c1,{onSwitchModule:e}),l.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 z-20 bg-black/30 backdrop-blur-xl border-t border-white/20 flex justify-around",children:[o.map(h=>{const p=h.mapsTo.includes(r.name);return l.jsxs("button",{onClick:()=>d(h.page),className:`relative flex flex-col items-center justify-center pt-3 pb-2 w-full transition-colors ${p?"text-amber-400":"text-gray-500 hover:text-white"}`,children:[l.jsx(h.icon,{className:"w-6 h-6"}),l.jsx("span",{className:"text-xs font-semibold mt-1",children:h.label})]},h.label)}),l.jsxs("button",{onClick:()=>Vf.signOut(),className:"relative flex flex-col items-center justify-center pt-3 pb-2 w-full text-gray-500 hover:text-red-400 transition-colors",children:[l.jsx(bF,{className:"w-6 h-6"}),l.jsx("span",{className:"text-xs font-semibold mt-1",children:"Salir"})]})]})]})}function K5({onNavigateToAnalysis:t}){const{animals:e,weighings:n,parturitions:r,isLoading:i}=Ze(),[s,a]=P.useState("current"),[o,c]=P.useState(!1),[u,d]=P.useState(!1),f=P.useMemo(()=>{if(i||!n.length||!e.length)return{herdAverage:0,activeGoats:0,herdLactationCurve:[],gaussData:{distribution:[],mean:0,stdDev:0}};let h=0;if(n.length>0){const T=n.reduce((A,C)=>C.date>A?C.date:A,n[0].date);h=new Set(n.filter(A=>A.date===T).map(A=>A.goatId)).size}let p=n;if(s==="current"){const T=new Set(r.filter(A=>A.status==="activa").map(A=>A.goatId));p=n.filter(A=>T.has(A.goatId))}const m={};p.forEach(T=>{const A=r.filter(D=>D.goatId===T.goatId&&new Date(T.date)>=new Date(D.parturitionDate)).sort((D,O)=>new Date(O.parturitionDate).getTime()-new Date(D.parturitionDate).getTime())[0];if(!A)return;const C=nd(A.parturitionDate,T.date);m[C]||(m[C]={totalKg:0,count:0}),m[C].totalKg+=T.kg,m[C].count++});const g=Object.entries(m).map(([T,A])=>({del:parseInt(T),kg:A.totalKg/A.count,name:"Promedio Rebaño"})).sort((T,A)=>T.del-A.del),b=e.map(T=>{const A=n.filter(D=>D.goatId===T.id);return A.length===0?null:{avg:A.reduce((D,O)=>D+O.kg,0)/A.length}}).filter(Boolean),x=b.length>0?b.reduce((T,A)=>T+A.avg,0)/b.length:0,w=b.length>0?Math.sqrt(b.reduce((T,A)=>T+Math.pow(A.avg-x,2),0)/b.length):0,_=[];if(b.length>0){const T=Math.floor(Math.min(...b.map(C=>C.avg))*4)/4,A=Math.ceil(Math.max(...b.map(C=>C.avg))*4)/4;for(let C=T;C<=A;C+=.25){const D=C,O=C+.25,L=b.filter(z=>z.avg>=D&&z.avg<O).length;L>0&&_.push({range:`${D.toFixed(2)}`,count:L})}}const E={distribution:_,mean:x,stdDev:w};return{herdAverage:n.length>0?n.reduce((T,A)=>T+A.kg,0)/n.length:0,activeGoats:h,herdLactationCurve:g,gaussData:E}},[e,n,r,i,s]);return i?l.jsx("div",{className:"text-center p-10",children:l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando datos del rebaño..."})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 px-4",children:[l.jsxs("header",{className:"text-center pt-4 pb-4",children:[l.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Dashboard de Producción"}),l.jsx("p",{className:"text-md text-zinc-400",children:"Análisis General de LactoKeeper"})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-2 text-xs uppercase tracking-wider",children:[l.jsx(BC,{size:14}),l.jsx("span",{children:"Promedio Global"})]}),l.jsxs("p",{className:"text-4xl font-bold tracking-tight text-white",children:[f.herdAverage.toFixed(2)," ",l.jsx("span",{className:"text-2xl font-medium text-zinc-400",children:"Kg"})]})]}),l.jsxs("button",{onClick:t,className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border text-left hover:border-brand-orange transition-colors",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-2 text-xs uppercase tracking-wider",children:[l.jsx(Pee,{}),l.jsx("span",{children:"Animales en Ordeño"})]}),l.jsx("p",{className:"text-4xl font-bold tracking-tight text-white",children:f.activeGoats})]})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsxs("div",{className:"flex justify-between items-center border-b border-brand-border pb-2 mb-4",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase tracking-wider",children:[l.jsx(qA,{size:16}),l.jsx("span",{children:"Curva de Lactancia"}),l.jsx("button",{onClick:()=>c(!0),className:"text-zinc-500 hover:text-white transition-colors",children:l.jsx(G0,{size:14})})]}),l.jsxs("div",{className:"flex bg-zinc-900/80 rounded-lg p-0.5",children:[l.jsx("button",{onClick:()=>a("current"),className:`px-2 py-0.5 text-xs font-semibold rounded-md transition-colors ${s==="current"?"bg-brand-orange text-white":"text-zinc-400 hover:bg-zinc-700/50"}`,children:"Actual"}),l.jsx("button",{onClick:()=>a("historical"),className:`px-2 py-0.5 text-xs font-semibold rounded-md transition-colors ${s==="historical"?"bg-brand-orange text-white":"text-zinc-400 hover:bg-zinc-700/50"}`,children:"Histórico"})]})]}),l.jsx("div",{className:"w-full h-48",children:l.jsx(fr,{children:l.jsxs(Oke,{data:f.herdLactationCurve,margin:{top:5,right:10,left:0,bottom:5},children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"lactationGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[l.jsx("stop",{offset:"0%",stopColor:"#FF9500",stopOpacity:.7}),l.jsx("stop",{offset:"80%",stopColor:"#34C759",stopOpacity:.1})]})}),l.jsx(Un,{dataKey:"del",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1}),l.jsx(er,{orientation:"right",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1,domain:["dataMin - 0.5","dataMax + 0.5"],width:30}),l.jsx(tn,{content:l.jsx(Fu,{})}),l.jsx(cc,{type:"monotone",dataKey:"kg",stroke:"#FF9500",strokeWidth:2.5,fill:"url(#lactationGradient)"})]})})})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsx("div",{className:"flex justify-between items-center border-b border-brand-border pb-2 mb-4",children:l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase tracking-wider",children:[l.jsx(qA,{size:16}),l.jsx("span",{children:"Distribución del Rebaño"}),l.jsx("button",{onClick:()=>d(!0),className:"text-zinc-500 hover:text-white transition-colors",children:l.jsx(G0,{size:14})})]})}),l.jsx("div",{className:"w-full h-48",children:l.jsx(fr,{children:l.jsxs(Mi,{data:f.gaussData.distribution,margin:{top:10,right:10,left:0,bottom:0},children:[l.jsx(Ev,{strokeDasharray:"3 3",stroke:"rgba(255, 255, 255, 0.1)"}),l.jsx(Un,{dataKey:"range",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1}),l.jsx(er,{orientation:"right",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1,allowDecimals:!1,width:30}),l.jsx(tn,{content:l.jsx(Fu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),l.jsx(hr,{dataKey:"count",fill:"rgba(255, 255, 255, 0.4)",name:"Nº de Cabras"}),l.jsx(Jw,{x:f.gaussData.mean.toFixed(2),stroke:"#34C759",strokeWidth:2,label:{value:"μ",fill:"#34C759",position:"insideTopLeft"}})]})})})]})]}),l.jsx(nt,{isOpen:o,onClose:()=>c(!1),title:"¿Qué es la Curva de Lactancia del Rebaño?",children:l.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[l.jsx("p",{children:'Este gráfico revela la **"personalidad productiva"** de tu rebaño. No es un promedio simple, sino una línea de tiempo del rendimiento promedio.'}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-white mb-1",children:"¿Cómo se Calcula?"}),l.jsx("p",{className:"text-sm",children:'Para cada "Día en Leche" (DEL) en el eje horizontal, el sistema agrupa los pesajes de **todos los animales** que han pasado por ese día de su ciclo y calcula el promedio.'}),l.jsxs("p",{className:"text-sm mt-2 bg-black/20 p-2 rounded-md",children:[l.jsx("strong",{children:"Ejemplo:"}),' El punto en "DEL 50" es el promedio de todos los pesajes que se hicieron a cualquier animal cuando estaba exactamente en su día 50 de lactancia.']})]}),l.jsx("p",{className:"pt-2 border-t border-zinc-700/80",children:"Te permite responder visualmente a preguntas clave como: ¿Cuándo ocurre el pico de producción del rebaño? y ¿Qué tan persistente es la lactancia después del pico?"})]})}),l.jsx(nt,{isOpen:u,onClose:()=>d(!1),title:"¿Qué es la Distribución del Rebaño?",children:l.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[l.jsx("p",{children:"Este gráfico, conocido como Campana de Gauss o distribución normal, clasifica el rendimiento promedio de cada animal en el rebaño."}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-white mb-1",children:"Media (μ)"}),l.jsx("p",{className:"text-sm",children:"La línea verde marcada como **μ** representa el **promedio de producción de todo el rebaño**. Es el punto de referencia central."})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-white mb-1",children:"Las Barras"}),l.jsx("p",{className:"text-sm",children:"Cada barra muestra cuántos animales caen dentro de un rango específico de producción. Una barra alta en el centro (cerca de μ) indica que la mayoría de tu rebaño tiene un rendimiento promedio y consistente."})]}),l.jsx("p",{className:"pt-2 border-t border-zinc-700/80",children:"Esta herramienta es clave para identificar rápidamente a los animales de élite (extremo derecho) y a los que podrían necesitar atención (extremo izquierdo)."})]})})]})}const U2=(t,e,n,r,i)=>P.useMemo(()=>{if(!t.length||!e.length)return{classifiedAnimals:[],distribution:[],mean:0,stdDev:0,weightedMean:0};const s=t.reduce((g,b)=>{const x=e.find(C=>C.id===b.goatId);if(!x)return g;const w=r.filter(C=>C.goatId===x.id&&new Date(C.parturitionDate)<=new Date(b.date)).sort((C,D)=>new Date(D.parturitionDate).getTime()-new Date(C.parturitionDate).getTime())[0];if(!w)return g;const _=nd(w.parturitionDate,b.date),E=i?Mke(b.kg,_):b.kg,j=n.filter(C=>C.goatId===x.id).sort((C,D)=>new Date(D.date).getTime()-new Date(C.date).getTime());let T="single";const A=j.findIndex(C=>C.date===b.date);if(A!==-1&&A+1<j.length){const C=j[A+1],D=b.kg-C.kg,O=.15;D>O?T="up":D<-O?T="down":T="stable"}return g.push({...x,latestWeighing:b.kg,weighingId:b.id,del:_,score:E,trend:T,date:b.date}),g},[]);if(!s.length)return{classifiedAnimals:[],distribution:[],mean:0,stdDev:0,weightedMean:0};const a=i?"score":"latestWeighing",o=s.reduce((g,b)=>g+b[a],0)/s.length,c=Math.sqrt(s.reduce((g,b)=>g+Math.pow(b[a]-o,2),0)/s.length),u=o-.4*c,d=o+.4*c,f=s.map(g=>{const b=g[a];let x="Promedio";return c>.1&&(b<u?x="Pobre":b>d&&(x="Sobresaliente")),{...g,classification:x}}),h=[{name:"Pobre",count:f.filter(g=>g.classification==="Pobre").length,fill:"#FF3B30"},{name:"Promedio",count:f.filter(g=>g.classification==="Promedio").length,fill:"#6B7280"},{name:"Sobresaliente",count:f.filter(g=>g.classification==="Sobresaliente").length,fill:"#34C759"}],p=s.length>0?s.reduce((g,b)=>g+b.latestWeighing,0)/s.length:0,m=s.length>0?s.reduce((g,b)=>g+b.score,0)/s.length:0;return{classifiedAnimals:f,distribution:h,mean:p,stdDev:c,weightedMean:m}},[t,e,n,r,i]),CRe=({trend:t,isLongTrend:e})=>{if(!t||t==="single")return null;const n={up:{Icon:ig,color:"text-brand-green"},down:{Icon:rg,color:"text-brand-red"},stable:{Icon:xF,color:"text-zinc-400"}},{Icon:r,color:i}=n[t];return l.jsxs("div",{className:`flex items-center font-semibold text-sm ${i}`,children:[l.jsx(r,{size:18,strokeWidth:3}),e&&l.jsx("span",{className:"ml-0.5 font-bold",children:"+"})]})},sN=(t,e)=>P.useMemo(()=>{if(!t||!e)return{trend:null,difference:0,isLongTrend:!1,lastTwoWeighings:[]};const r=e.filter(d=>d.goatId===t).sort((d,f)=>new Date(f.date).getTime()-new Date(d.date).getTime());if(r.length<1)return{trend:null,difference:0,isLongTrend:!1,lastTwoWeighings:[]};if(r.length===1)return{trend:"single",difference:0,isLongTrend:!1,lastTwoWeighings:[r[0]]};const i=r[0],s=r[1],a=i.kg-s.kg,o=.15;let c;a>o?c="up":a<-o?c="down":c="stable";let u=!1;if(r.length>=3){const d=r[2],f=s.kg-d.kg,h=a>o&&f>o,p=a<-o&&f<-o;(h||p)&&(u=!0)}return{trend:c,difference:a,isLongTrend:u,lastTwoWeighings:[i,s]}},[t,e]),TRe=()=>{const{animals:t,parturitions:e,weighings:n}=Ze();return P.useMemo(()=>{const i=new Date().toISOString().split("T")[0],s=new Set;return e.forEach(o=>{if(o.status==="activa"){const c=nd(o.parturitionDate,i);c>=270&&c<=300&&s.add(o.goatId)}}),t.filter(o=>o.reproductiveStatus==="Preñada"&&!o.isReference).forEach(o=>{const c=n.filter(u=>u.goatId===o.id).sort((u,d)=>new Date(d.date).getTime()-new Date(u.date).getTime());if(c.length>=4){const u=c[0].kg,d=c[1].kg,f=c[2].kg,h=c[3].kg;u<d&&d<f&&f<h&&s.add(o.id)}}),e.forEach(o=>{o.status==="en-secado"&&s.add(o.goatId)}),Array.from(s)},[t,e,n])},PRe=({isOpen:t,onClose:e,animalIds:n,onSelectAnimal:r})=>l.jsxs(nt,{isOpen:t,onClose:e,title:"Animales que Salieron del Ordeño",children:[l.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto pr-2",children:n.length>0?n.map(i=>l.jsxs("button",{onClick:()=>{r(i),e()},className:"w-full text-left p-3 bg-zinc-800 hover:bg-zinc-700 rounded-lg transition-colors flex justify-between items-center",children:[l.jsx("span",{className:"font-semibold text-white",children:i}),l.jsx(tr,{className:"text-zinc-500"})]},i)):l.jsx("p",{className:"text-center text-zinc-500 py-4",children:"No hay animales que hayan salido en este período."})}),l.jsx("div",{className:"flex justify-end mt-4 pt-4 border-t border-brand-border",children:l.jsx("button",{onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cerrar"})})]}),NRe=({isOpen:t,onClose:e,onConfirm:n,dateToDelete:r})=>{const[i,s]=P.useState(""),a=r?new Date(r+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"}):"",o=i===r;return P.useEffect(()=>{t&&s("")},[t]),l.jsx(nt,{isOpen:t,onClose:e,title:"Confirmar Eliminación",children:l.jsxs("div",{className:"space-y-4 text-white",children:[l.jsxs("div",{className:"text-center space-y-2",children:[l.jsx(Vt,{className:"mx-auto h-12 w-12 text-brand-red"}),l.jsxs("p",{className:"text-lg font-semibold",children:["¿Eliminar todos los pesajes del ",l.jsx("span",{className:"font-bold",children:a}),"?"]}),l.jsxs("p",{className:"text-sm text-zinc-400",children:["Esta acción es irreversible y eliminará ",r?"permanentemente":""," todos los registros de esta fecha."]})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"confirmDateInput",className:"block text-sm font-medium text-zinc-400 mb-1",children:["Para confirmar, escribe la fecha: ",l.jsx("strong",{className:"text-zinc-200",children:r})]}),l.jsx("input",{id:"confirmDateInput",type:"text",value:i,onChange:c=>s(c.target.value),placeholder:"YYYY-MM-DD",className:`w-full bg-zinc-800 p-3 rounded-xl text-lg text-center font-mono border-2 ${i&&!o?"border-red-500":"border-zinc-700"} focus:border-brand-red focus:ring-0`})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-brand-border",children:[l.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{type:"button",onClick:n,disabled:!o,className:"px-5 py-2 bg-brand-red hover:bg-red-700 text-white font-bold rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Eliminar Permanentemente"})]})]})})},Ty=({title:t,value:e,unit:n,icon:r,onClick:i})=>l.jsxs("button",{onClick:i,className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-orange transition-colors w-full",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[l.jsx(r,{size:14}),l.jsx("span",{children:t})]}),l.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:[e," ",l.jsx("span",{className:"text-lg text-zinc-400",children:n})]})]}),cS=({animal:t,onSelectAnimal:e,onOpenActions:n,isNewEntry:r})=>{const{weighings:i}=Ze(),{trend:s,isLongTrend:a}=sN(t.id,i),o=rc(),c=P.useRef(!1),u={Sobresaliente:"bg-brand-green",Promedio:"bg-gray-500",Pobre:"bg-brand-red"},d=ma(t.birthDate),f=(h,p)=>{const m=p.offset.x,g=p.velocity.x;(m<-80/2||g<-500)&&n(t),o.start({x:0}),setTimeout(()=>{c.current=!1},100)};return l.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-brand-glass border border-brand-border",children:[l.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:l.jsxs("div",{className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[l.jsx(Er,{size:22}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Acciones"})]})}),l.jsxs(On.div,{drag:"x",dragConstraints:{left:-80,right:0},dragElastic:.1,onDragStart:()=>{c.current=!0},onDragEnd:f,onTap:()=>{c.current||e(t.id)},animate:o,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg p-4",children:[l.jsx("div",{className:`absolute top-3 right-3 w-2.5 h-2.5 rounded-full ${t.latestWeighing>0?u[t.classification]:"bg-transparent"}`,title:`Rendimiento: ${t.classification}`}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),l.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:[t.sex," | ",d," | Lote: ",t.location||"Sin Asignar"]})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"font-semibold text-brand-orange",children:t.latestWeighing>0?`${t.latestWeighing.toFixed(2)} Kg`:"Sin Pesar"}),t.del>0&&l.jsxs("p",{className:"text-xs text-zinc-400",children:["DEL: ",t.del]})]}),l.jsx(FP,{statuses:t.statusObjects}),r?l.jsx("span",{title:"Primer Ingreso al Control Lechero",className:"w-8 h-8 flex items-center justify-center rounded-full bg-green-500/20 text-brand-green",children:l.jsx(yF,{size:18,strokeWidth:3})}):l.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:l.jsx(CRe,{trend:s,isLongTrend:a})}),l.jsx(tr,{className:"text-zinc-600"})]})]})]})]})},kRe=({animalId:t})=>{var i,s;const{weighings:e}=Ze(),{lastTwoWeighings:n,difference:r}=sN(t,e);return n.length<2?l.jsx("p",{children:"No hay suficientes datos para comparar."}):l.jsxs("div",{className:"text-center text-white space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"text-sm text-zinc-400",children:["Pesaje Anterior (",new Date(n[1].date+"T00:00:00").toLocaleDateString(),")"]}),l.jsxs("p",{className:"text-2xl font-semibold",children:[((i=n[1])==null?void 0:i.kg.toFixed(2))||"N/A"," Kg"]})]}),l.jsxs("div",{children:[l.jsxs("p",{className:"text-sm text-zinc-400",children:["Último Pesaje (",new Date(n[0].date+"T00:00:00").toLocaleDateString(),")"]}),l.jsxs("p",{className:"text-2xl font-semibold",children:[((s=n[0])==null?void 0:s.kg.toFixed(2))||"N/A"," Kg"]})]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-zinc-400 text-base mb-1",children:"Diferencia"}),l.jsxs("p",{className:`text-3xl font-bold ${r>.15?"text-brand-green":r<-.15?"text-brand-red":"text-zinc-400"}`,children:[r>0?"+":"",r.toFixed(2)," Kg"]})]})]})},DRe=t=>{const{x:e,y:n,width:r,height:i,value:s,total:a}=t;if(a===0||s===0)return null;const o=(s/a*100).toFixed(0);return l.jsx("text",{x:e+r/2,y:n+i/2,fill:"#fff",textAnchor:"middle",dominantBaseline:"middle",fontSize:"14px",fontWeight:"bold",opacity:.8,children:`${o}%`})};function IRe({onSelectAnimal:t}){const{animals:e,parturitions:n,weighings:r,isLoading:i,serviceRecords:s,sireLots:a,breedingSeasons:o,startDryingProcess:c,setLactationAsDry:u,deleteWeighingSession:d}=Ze(),[f,h]=P.useState(!1),[p,m]=P.useState("all"),[g,b]=P.useState("all"),[x,w]=P.useState("all"),[_,E]=P.useState("all"),[j,T]=P.useState(null),[A,C]=P.useState(null),[D,O]=P.useState(!1),[L,z]=P.useState(!1),[M,G]=P.useState(!1),[K,B]=P.useState(0),[U,F]=P.useState(!1),[q,Z]=P.useState(null),[re,he]=P.useState(!1),ye=TRe(),{weighingsByDate:De,availableDates:We}=P.useMemo(()=>{const ze={};r.forEach(st=>{ze[st.date]||(ze[st.date]=[]),ze[st.date].push(st)});const yt=Object.keys(ze).sort((st,ir)=>new Date(ir).getTime()-new Date(st).getTime());return{weighingsByDate:ze,availableDates:yt}},[r]),Je=We[K],jt=P.useMemo(()=>{if(!Je)return[];const ze=De[Je]||[],yt=new Map;return ze.forEach(st=>yt.set(st.goatId,st)),Array.from(yt.values())},[Je,De]),{classifiedAnimals:dt,distribution:xe,mean:Ye,stdDev:Qe,weightedMean:fe}=U2(jt,e,r,n,f),pt=P.useMemo(()=>dt.map(ze=>{const yt=e.find(st=>st.id===ze.id);return{...ze,statusObjects:yt?tU(yt,n,s,a,o):[]}}),[dt,e,n,s,a,o]),ft=P.useMemo(()=>{if(K+1<We.length){const ze=We[K+1];return De[ze]||[]}return[]},[K,We,De]),Le=U2(ft,e,r,n,!1),Ve=P.useMemo(()=>{const ze=new Set(dt.map(Ue=>Ue.id));let yt=new Set,st=new Set;const ir=new Set(Le.classifiedAnimals.map(Ue=>Ue.id));K===We.length-1&&We.length>0?yt=ze:We.length>0&&(yt=new Set([...ze].filter(Ue=>!ir.has(Ue))),st=new Set([...ir].filter(Ue=>!ze.has(Ue))));const Tr=We.slice(Math.max(0,K-2),K+1).map(Ue=>{const Lt=De[Ue]||[];if(Lt.length===0)return{date:Ue,avg:0};const zt=Lt.reduce((Pr,hn)=>Pr+hn.kg,0);return{date:new Date(Ue).toLocaleDateString("es-VE",{month:"short",day:"numeric"}),avg:zt/Lt.length}}).reverse();let Fr=null,Ge=null,ms=0,de=0,pe=0;if(pt.length>0){const Ue=pt.map(Lt=>Lt.latestWeighing);ms=Ue.reduce((Lt,zt)=>Lt+zt,0),de=Math.max(...Ue),pe=Math.min(...Ue),Fr=pt.find(Lt=>Lt.latestWeighing===de)||null,Ge=pt.find(Lt=>Lt.latestWeighing===pe)||null}const ee=Ye-Qe,Fe=Ye+Qe,tt=dt.filter(Ue=>Ue.latestWeighing>=ee&&Ue.latestWeighing<=Fe).length,bt=dt.length>0?tt/dt.length*100:0;return{trendData:Tr,kpi:{total:ms,max:de,min:pe},topPerformer:Fr,bottomPerformer:Ge,consistency:{percentage:bt},newAnimalIds:yt,exitingAnimalIds:st}},[dt,pt,Le.classifiedAnimals,We,K,De,Ye,Qe]),{searchTerm:cn,setSearchTerm:gr,filteredItems:Cr}=EU(pt,["id"]),Hn=P.useMemo(()=>{let ze=cn?Cr:pt;return p!=="all"&&(ze=ze.filter(yt=>yt.classification===p)),x==="new"&&(ze=ze.filter(yt=>Ve.newAnimalIds.has(yt.id))),g!=="all"&&(ze=ze.filter(yt=>{const{trend:st}=sN(yt.id,r);return st===g})),_!=="all"&&(ze=ze.filter(yt=>{const st=yt.del;return _==="drying"?ye.includes(yt.id):st===0?!1:_==="first"?st>0&&st<=100:_==="second"?st>100&&st<=200:_==="third"?st>200&&st<270:!1})),ze.sort((yt,st)=>st.latestWeighing-yt.latestWeighing)},[cn,Cr,pt,p,g,_,x,Ve.newAnimalIds,ye,r]),Ut=P.useMemo(()=>{const ze=dt.filter(Tr=>!Ve.newAnimalIds.has(Tr.id)).length;if(dt.length===0)return{up:0,down:0,stable:0,new:0};if(ze===0&&Ve.newAnimalIds.size>0)return{up:0,down:0,stable:0,new:100};if(ze===0)return{up:0,down:0,stable:0,new:0};const yt=dt.filter(Tr=>Tr.trend==="up").length,st=dt.filter(Tr=>Tr.trend==="down").length,ir=dt.filter(Tr=>Tr.trend==="stable").length;return{up:yt/ze*100,down:st/ze*100,stable:ir/ze*100,new:Ve.newAnimalIds.size/dt.length*100||0}},[dt,Ve.newAnimalIds]),vr=()=>{m("all"),b("all"),E("all"),w("all"),gr("")},rr=ze=>{if(ze!=null&&ze.name){const yt=ze.name;m(st=>st===yt?"all":yt)}},Me=P.useRef(null),rt=$P({count:Hn.length,getScrollElement:()=>Me.current,estimateSize:()=>92,overscan:5}),Ct=ze=>{Z(ze),F(!0)},un=ze=>{if(!ze)return[];const yt=[],st=n.find(ir=>ir.goatId===ze.id&&(ir.status==="activa"||ir.status==="en-secado"));return yt.push({label:"Registrar/Editar Pesaje",icon:ql,onClick:()=>{F(!1),T("milkWeighing")}}),st&&(st.status==="activa"&&yt.push({label:"Iniciar Secado",icon:Yu,onClick:()=>{c(st.id),F(!1)},color:"text-blue-400"}),(st.status==="activa"||st.status==="en-secado")&&yt.push({label:"Declarar Seca",icon:fa,onClick:()=>{u(st.id),F(!1)},color:"text-zinc-400"})),yt},Hi=()=>{T(null),Z(null)},ps=async()=>{if(Je)try{await d(Je),B(0),he(!1)}catch(ze){console.error("Error deleting session:",ze)}};return i&&We.length===0?l.jsx("div",{className:"text-center p-10",children:l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Calculando análisis..."})}):We.length===0?l.jsx("div",{className:"text-center p-10",children:l.jsx("h1",{className:"text-2xl text-zinc-400",children:"No hay pesajes registrados."})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{ref:Me,className:"w-full max-w-2xl mx-auto h-screen overflow-y-auto",children:l.jsxs("div",{className:"p-4 space-y-4",children:[l.jsxs("div",{className:"bg-brand-glass rounded-2xl p-3 border border-brand-border flex justify-between items-center",children:[l.jsx("button",{onClick:()=>B(ze=>Math.min(ze+1,We.length-1)),disabled:K>=We.length-1,className:"p-2 rounded-full hover:bg-zinc-700/50 disabled:opacity-30",children:l.jsx(lee,{})}),l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-lg font-semibold text-white",children:Je?new Date(Je+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"}):"Sin Datos"}),l.jsxs("p",{className:"text-sm text-zinc-400",children:[jt.length," animales pesados"]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("button",{onClick:()=>he(!0),className:"p-2 rounded-full text-zinc-500 hover:text-brand-red hover:bg-red-500/10 transition-colors mr-2",title:"Eliminar pesajes de este día",children:l.jsx(ha,{size:18})}),l.jsx("button",{onClick:()=>B(ze=>Math.max(ze-1,0)),disabled:K===0,className:"p-2 rounded-full hover:bg-zinc-700/50 disabled:opacity-30",children:l.jsx(tr,{})})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx(Ty,{icon:ql,title:f?"Media Ponderada":"Media Prod.",value:(f?fe:Ye).toFixed(2),unit:"Kg",onClick:()=>T("media")}),l.jsx(Ty,{icon:SF,title:"Prod. Total",value:Ve.kpi.total.toFixed(2),unit:"Kg",onClick:()=>T("total")}),l.jsx(Ty,{icon:AF,title:"Consistencia",value:Qe.toFixed(2),unit:"σ",onClick:()=>T("stdDev")}),l.jsx(Ty,{icon:Ka,title:"Rango Prod.",value:`${Ve.kpi.min.toFixed(2)} - ${Ve.kpi.max.toFixed(2)}`,unit:"Kg",onClick:()=>T("rango")})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border animate-fade-in",children:[l.jsxs("div",{className:"flex justify-between items-center border-b border-brand-border pb-2 mb-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(qA,{className:"text-brand-orange w-[18px] h-[18px]"}),l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Análisis del Día"}),l.jsx("button",{onClick:()=>O(!0),className:"text-zinc-500 hover:text-white",children:l.jsx(G0,{size:14})})]}),l.jsxs("label",{className:"flex items-center space-x-2 text-sm text-zinc-300 cursor-pointer",children:[l.jsx(h_,{size:14,className:f?"text-brand-orange":"text-zinc-500"}),l.jsx("span",{children:"Ponderado a DEL"}),l.jsx("button",{type:"button",onClick:ze=>{ze.preventDefault(),ze.stopPropagation(),z(!0)},className:"text-zinc-500 hover:text-white -ml-1",children:l.jsx(G0,{size:14})}),l.jsx("input",{type:"checkbox",checked:f,onChange:ze=>h(ze.target.checked),className:"form-checkbox h-4 w-4 bg-zinc-700 border-zinc-600 rounded text-brand-orange focus:ring-brand-orange focus:ring-offset-0"})]})]}),l.jsx("div",{className:"w-full h-48",children:l.jsx(fr,{children:l.jsxs(Mi,{data:xe,margin:{top:20,right:10,left:-20,bottom:0},children:[l.jsx(Un,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(er,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},allowDecimals:!1}),l.jsx(tn,{content:l.jsx(Fu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),l.jsxs(hr,{dataKey:"count",onClick:rr,cursor:"pointer",children:[xe.map(ze=>l.jsx(aa,{fill:ze.fill,className:`${p!=="all"&&p!==ze.name?"opacity-30":"opacity-100"} transition-opacity`},ze.name)),l.jsx(Ns,{dataKey:"count",content:l.jsx(DRe,{total:dt.length})})]})]})})}),l.jsxs("div",{className:"text-center text-xs text-zinc-400 mt-2",children:[l.jsxs("span",{children:["μ = ",Ye.toFixed(2)]})," | ",l.jsxs("span",{children:["σ = ",Qe.toFixed(2)]})]})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-2 border border-brand-border space-y-2",children:[l.jsxs("div",{className:"flex justify-between items-center px-2 pt-2",children:[l.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[l.jsx("button",{onClick:()=>{b("all"),w("all")},className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors ${g==="all"&&x==="all"?"bg-zinc-600 text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"Todos"}),l.jsxs("button",{onClick:()=>{b("up"),w("all")},disabled:Ut.up===0&&dt.length-Ve.newAnimalIds.size>0,className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors flex items-center space-x-1 ${g==="up"?"bg-brand-green/80 text-white":"bg-zinc-800/50 text-brand-green"} disabled:opacity-40`,children:[l.jsx(ig,{size:14})," ",l.jsxs("span",{children:[Ut.up.toFixed(0),"%"]})]}),l.jsxs("button",{onClick:()=>{b("down"),w("all")},disabled:Ut.down===0&&dt.length-Ve.newAnimalIds.size>0,className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors flex items-center space-x-1 ${g==="down"?"bg-brand-red/80 text-white":"bg-zinc-800/50 text-brand-red"} disabled:opacity-40`,children:[l.jsx(rg,{size:14})," ",l.jsxs("span",{children:[Ut.down.toFixed(0),"%"]})]}),l.jsxs("button",{onClick:()=>{b("single"),w("all")},disabled:Ut.new===0&&dt.length>0,className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors flex items-center space-x-1 ${g==="single"?"bg-brand-blue/80 text-white":"bg-zinc-800/50 text-brand-blue"} disabled:opacity-40`,children:[l.jsx(h_,{size:14})," ",l.jsxs("span",{children:[Ut.new.toFixed(0),"%"]})]})]}),l.jsx("button",{onClick:vr,title:"Limpiar todos los filtros",className:"text-zinc-500 hover:text-white",children:l.jsx(WC,{size:16})})]}),l.jsxs("div",{className:"flex justify-between items-center p-2 border-t border-brand-border",children:[l.jsx("div",{className:"text-xs font-semibold text-zinc-400",children:"Fase Lactancia:"}),l.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[l.jsx("button",{onClick:()=>E("all"),className:`px-2 py-1 text-xs font-semibold rounded-md ${_==="all"?"bg-zinc-600 text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"Todos"}),l.jsx("button",{onClick:()=>E("first"),className:`px-2 py-1 text-xs font-semibold rounded-md ${_==="first"?"bg-brand-blue text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"1er T"}),l.jsx("button",{onClick:()=>E("second"),className:`px-2 py-1 text-xs font-semibold rounded-md ${_==="second"?"bg-brand-blue text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"2do T"}),l.jsx("button",{onClick:()=>E("third"),className:`px-2 py-1 text-xs font-semibold rounded-md ${_==="third"?"bg-brand-blue text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"3er T"}),l.jsx("button",{onClick:()=>E("drying"),className:`px-2 py-1 text-xs font-semibold rounded-md ${_==="drying"?"bg-brand-red/80 text-white":"bg-zinc-800/50 text-brand-red"}`,children:"A Secado"})]})]}),l.jsxs("div",{className:"flex justify-between items-center p-2 border-t border-brand-border",children:[l.jsx("div",{className:"text-xs font-semibold text-zinc-400",children:"Movimientos:"}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("button",{onClick:()=>w(ze=>ze==="new"?"all":"new"),disabled:Ve.newAnimalIds.size===0,className:`px-3 py-1 text-xs font-semibold rounded-md flex items-center gap-1.5 transition-all ${x==="new"?"bg-brand-green text-white shadow-lg shadow-green-500/20":"bg-zinc-800/50 text-zinc-300"} ${Ve.newAnimalIds.size>0&&x!=="new"&&"animate-pulse"} disabled:opacity-40 disabled:cursor-not-allowed`,children:[l.jsx(yF,{size:14})," ",l.jsxs("span",{children:["Ingresos (",Ve.newAnimalIds.size,")"]})]}),l.jsxs("button",{onClick:()=>G(!0),disabled:Ve.exitingAnimalIds.size===0,className:`px-3 py-1 text-xs font-semibold rounded-md flex items-center gap-1.5 transition-all bg-zinc-800/50 text-zinc-300 ${Ve.exitingAnimalIds.size>0&&"animate-pulse"} disabled:opacity-40 disabled:cursor-not-allowed`,children:[l.jsx(bF,{size:14})," ",l.jsxs("span",{children:["Salidas (",Ve.exitingAnimalIds.size,")"]})]})]})]})]}),l.jsxs("div",{className:"relative px-4",children:[l.jsx(Pu,{className:"absolute left-7 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500 pointer-events-none"}),l.jsx("input",{type:"search",placeholder:`Buscar en ${Hn.length} animales...`,value:cn,onChange:ze=>gr(ze.target.value),className:"w-full bg-brand-glass border border-brand-border rounded-xl pl-10 pr-4 py-3 text-white focus:ring-2 focus:ring-brand-orange"})]}),l.jsx("div",{className:"pt-2",style:{height:"600px"},children:Hn.length>0?l.jsx("div",{style:{height:`${rt.getTotalSize()}px`,width:"100%",position:"relative"},children:rt.getVirtualItems().map(ze=>{const yt=Hn[ze.index];return l.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${ze.size}px`,transform:`translateY(${ze.start}px)`,padding:"0 1rem 0.5rem 1rem"},children:l.jsx(cS,{animal:yt,onSelectAnimal:t,onOpenActions:Ct,isNewEntry:Ve.newAnimalIds.has(yt.id)})},ze.key)})}):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl mx-4",children:l.jsx("p",{className:"text-zinc-400",children:cn?"No se encontraron resultados":"No hay animales con los filtros."})})})]})}),l.jsx(nt,{isOpen:j==="media",onClose:()=>T(null),title:"Análisis de Producción Media",children:l.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[l.jsxs("p",{children:["La **Media de Producción** del día es **",Ye.toFixed(2)," Kg**. Representa el promedio simple."]}),l.jsxs("p",{children:["La **Media Ponderada** (",fe.toFixed(2)," Kg) premia la **persistencia lechera** (más valor a producción tardía)."]})]})}),l.jsx(nt,{isOpen:j==="total",onClose:()=>T(null),title:"Producción Total del Día",children:l.jsxs("div",{className:"text-center",children:[l.jsxs("p",{className:"text-zinc-400",children:["La producción total registrada el ",Je?new Date(Je+"T00:00:00").toLocaleDateString():"-"," fue:"]}),l.jsxs("h2",{className:"text-5xl font-bold text-brand-orange my-2",children:[Ve.kpi.total.toFixed(2)," Kg"]})]})}),l.jsx(nt,{isOpen:j==="stdDev",onClose:()=>T(null),title:"Análisis de Consistencia (σ)",children:l.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[l.jsxs("p",{children:["La Desviación Estándar (σ) de **",Qe.toFixed(2),"** mide la dispersión. Un valor **bajo** es ideal (rebaño consistente)."]}),l.jsxs("div",{className:"bg-black/30 p-4 rounded-lg text-center",children:[l.jsx("p",{className:"text-sm uppercase text-zinc-400",children:"Rebaño dentro de 1σ"}),l.jsxs("p",{className:"text-4xl font-bold text-brand-orange my-1",children:[Ve.consistency.percentage.toFixed(0),"%"]}),l.jsxs("p",{className:"text-sm text-zinc-400",children:["Cercanía al promedio de ",l.jsxs("span",{className:"font-bold text-white",children:[Ye.toFixed(2)," Kg"]}),"."]})]})]})}),l.jsx(nt,{isOpen:j==="rango",onClose:()=>T(null),title:"Extremos de Producción del Día",children:l.jsxs("div",{className:"space-y-4",children:[Ve.topPerformer&&l.jsxs("div",{className:"bg-green-900/40 border border-green-500/50 rounded-2xl p-4",children:[l.jsx("h3",{className:"font-semibold text-brand-green mb-2",children:"Producción Máxima"}),l.jsx(cS,{animal:Ve.topPerformer,onSelectAnimal:()=>{T(null),t(Ve.topPerformer.id)},onOpenActions:Ct,isNewEntry:Ve.newAnimalIds.has(Ve.topPerformer.id)})]}),Ve.bottomPerformer&&l.jsxs("div",{className:"bg-red-900/40 border border-red-500/50 rounded-2xl p-4",children:[l.jsx("h3",{className:"font-semibold text-brand-red mb-2",children:"Producción Mínima"}),l.jsx(cS,{animal:Ve.bottomPerformer,onSelectAnimal:()=>{T(null),t(Ve.bottomPerformer.id)},onOpenActions:Ct,isNewEntry:Ve.newAnimalIds.has(Ve.bottomPerformer.id)})]})]})}),l.jsx(nt,{isOpen:D,onClose:()=>O(!1),title:"¿Qué es el Análisis del Ordeño?",children:l.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[l.jsx("p",{children:"Clasifica animales (Pobre, Promedio, Sobresaliente) usando la media (μ) y desviación estándar (σ)."}),l.jsxs("div",{children:[l.jsxs("h4",{className:"font-semibold text-white mb-1",children:["Ponderado a DEL (",l.jsx(h_,{size:12,className:"inline-block mb-0.5"}),")"]}),l.jsx("p",{className:"text-sm",children:"Activa este cálculo para dar más valor a la producción temprana (persistencia)."})]})]})}),l.jsx(nt,{isOpen:L,onClose:()=>z(!1),title:"¿Qué es el Score Ponderado?",children:l.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[l.jsx("p",{children:"Ajusta la producción para premiar la **persistencia lechera**."}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-white mb-1",children:"Fórmula"}),l.jsx("div",{className:"bg-black/30 p-3 rounded-lg text-sm font-mono text-center text-orange-300",children:"Score = Kg × (1 + ((DEL - 50) / (DEL + 50)))"})]}),l.jsx("p",{className:"pt-2 border-t border-zinc-700/80 text-sm",children:"2 Kg en día **200** valen más que 2 Kg en día 40."})]})}),A&&l.jsx(nt,{isOpen:!!A,onClose:()=>C(null),title:`Tendencia de ${A.id}`,children:l.jsx(kRe,{animalId:A.id})}),l.jsx(PRe,{isOpen:M,onClose:()=>G(!1),animalIds:Array.from(Ve.exitingAnimalIds),onSelectAnimal:t}),l.jsx(Nu,{isOpen:U,onClose:()=>F(!1),title:`Acciones para ${(q==null?void 0:q.id)||""}`,actions:un(q)}),j==="milkWeighing"&&q&&l.jsx(tN,{animal:q,onCancel:Hi,onSaveSuccess:Hi}),Je&&l.jsx(NRe,{isOpen:re,onClose:()=>he(!1),onConfirm:ps,dateToDelete:Je})]})}const ORe=t=>P.useMemo(()=>{if(t.length===0)return{monthlyData:[]};const n=t.reduce((i,s)=>{const a=s.date.substring(0,7);return i[a]||(i[a]=[]),i[a].push(s),i},{});let r=Object.entries(n).map(([i,s])=>{const a=new Date(`${i}-02T12:00:00Z`),o=a.toLocaleString("es-VE",{month:"long",timeZone:"UTC"}),c=a.getUTCFullYear(),u=s.length,d=s.reduce((f,h)=>f+h.kg,0);return{periodLabel:`${o.charAt(0).toUpperCase()+o.slice(1)} ${c}`,periodId:i,totalKg:d,averageKg:u>0?d/u:0,weighingCount:u,animalCount:new Set(s.map(f=>f.goatId)).size,weighingEvents:new Set(s.map(f=>f.date)).size,weighings:s,newAnimalsWeighings:[]}}).sort((i,s)=>s.periodId.localeCompare(i.periodId));return r=r.map((i,s,a)=>{const o=a[s+1];if(o){const c=o.averageKg?(i.averageKg-o.averageKg)/o.averageKg*100:void 0,u=o.animalCount?(i.animalCount-o.animalCount)/o.animalCount*100:void 0,d=new Set(o.weighings.map(g=>g.goatId)),f=new Set(i.weighings.map(g=>g.goatId)),h=new Set([...f].filter(g=>!d.has(g))),p=i.weighings.filter(g=>h.has(g.goatId)),m=[...d].filter(g=>!f.has(g)).length;return{...i,avgKgChange:c,animalCountChange:u,newAnimalsWeighings:p,previousAnimalCount:o.animalCount,exitingAnimalCount:m}}return{...i,newAnimalsWeighings:i.weighings,previousAnimalCount:0,exitingAnimalCount:0}}),{monthlyData:r,quarterlyData:[],yearlyData:[]}},[t]),CU=({value:t})=>{if(t===void 0||isNaN(t))return null;const e=t>0,n=e?"text-brand-green":"text-brand-red",r=e?ig:rg;return l.jsxs("span",{className:`flex items-center text-sm font-bold ${n}`,children:[l.jsx(r,{size:16,className:"mr-0.5"}),t.toFixed(1),"%"]})},MRe=({stats:t,onClick:e})=>l.jsxs("button",{onClick:e,className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-brand-orange transition-colors",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:t.periodLabel}),l.jsxs("p",{className:"text-sm text-zinc-400",children:["Prom: ",t.averageKg.toFixed(2)," Kg | ",t.animalCount," animales"]})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx(CU,{value:t.avgKgChange}),l.jsx(tr,{className:"text-zinc-600"})]})]}),RRe=({weighing:t,onSelectAnimal:e})=>l.jsxs("button",{onClick:()=>e(t.id),className:"w-full text-left bg-black/20 rounded-lg p-3 border border-zinc-700/50 flex justify-between items-center hover:border-orange-400/50",children:[l.jsx("div",{className:"flex items-center gap-4",children:l.jsx("div",{children:l.jsxs("p",{className:"font-bold text-base text-white flex items-center gap-2",children:[t.id,l.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full text-white ${t.classification==="Pobre"?"bg-brand-red/80":t.classification==="Sobresaliente"?"bg-brand-green/80":"bg-gray-500/80"}`,children:t.classification})]})})}),l.jsxs("p",{className:"font-semibold text-lg text-white",children:[t.latestWeighing.toFixed(2)," ",l.jsx("span",{className:"text-base font-medium text-zinc-400",children:"Kg"})]})]}),LRe=t=>{const{x:e,y:n,width:r,value:i,total:s}=t;if(s===0||i===0)return null;const a=(i/s*100).toFixed(0);return l.jsx("text",{x:e+r/2,y:n+20,fill:"#fff",textAnchor:"middle",fontSize:"12px",fontWeight:"bold",children:`${a}%`})};function zRe({navigateToRebano:t}){const{animals:e,weighings:n,parturitions:r,isLoading:i}=Ze(),[s,a]=P.useState(null),[o,c]=P.useState("all"),{monthlyData:u}=ORe(n),d=U2((s==null?void 0:s.weighings)||[],e,n,r,!1),f=P.useMemo(()=>o==="all"?d.classifiedAnimals:d.classifiedAnimals.filter(p=>p.classification===o),[d.classifiedAnimals,o]),h=p=>{if(p!=null&&p.name){const m=p.name;c(g=>g===m?"all":m)}};return i?l.jsx("div",{className:"text-center p-10",children:l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando historial..."})}):s?l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12 animate-fade-in px-4",children:[l.jsxs("header",{className:"flex items-center pt-4 pb-4",children:[l.jsx("button",{onClick:()=>{a(null),c("all")},className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(nr,{size:24})}),l.jsx("div",{className:"text-center flex-grow",children:l.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:s.periodLabel})}),l.jsx("div",{className:"w-8"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-brand-glass p-3 rounded-2xl",children:[l.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[l.jsx(BC,{size:14}),"Promedio / Animal"]}),l.jsxs("div",{className:"flex items-baseline gap-2",children:[l.jsxs("p",{className:"text-2xl font-bold text-white",children:[s.averageKg.toFixed(2),l.jsx("span",{className:"text-lg ml-1 text-zinc-400",children:"Kg"})]}),l.jsx(CU,{value:s.avgKgChange})]})]}),l.jsxs("div",{className:"bg-brand-glass p-3 rounded-2xl",children:[l.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[l.jsx(Is,{size:14}),"Eventos de Pesaje"]}),l.jsx("p",{className:"text-2xl font-bold text-white",children:s.weighingEvents})]}),l.jsxs("div",{className:"bg-brand-glass p-3 rounded-2xl",children:[l.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[l.jsx(Uf,{size:14}),"Animales Ordeñados"]}),l.jsx("p",{className:"text-2xl font-bold text-white",children:s.animalCount})]}),l.jsxs("div",{className:"bg-brand-glass p-3 rounded-2xl",children:[l.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[l.jsx(Ka,{size:14}),"Total Registrado"]}),l.jsxs("p",{className:"text-2xl font-bold text-white",children:[s.totalKg.toFixed(0),l.jsx("span",{className:"text-lg ml-1 text-zinc-400",children:"Kg"})]})]})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsxs("div",{className:"flex items-center space-x-2 border-b border-brand-border pb-2 mb-4",children:[l.jsx(nw,{className:"text-brand-orange",size:18}),l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Distribución del Período"})]}),l.jsx("div",{className:"w-full h-48",children:l.jsx(fr,{children:l.jsxs(Mi,{data:d.distribution,margin:{top:20,right:10,left:-20,bottom:0},children:[l.jsx(Un,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(er,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(tn,{cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),l.jsxs(hr,{dataKey:"count",onClick:h,cursor:"pointer",children:[d.distribution.map(p=>l.jsx(aa,{fill:p.fill,className:`${o!=="all"&&o!==p.name?"opacity-30":"opacity-100"} transition-opacity`},p.name)),l.jsx(Ns,{dataKey:"count",content:l.jsx(LRe,{total:d.classifiedAnimals.length})})]})]})})}),l.jsxs("div",{className:"text-center text-xs text-zinc-400 mt-2",children:[l.jsxs("span",{children:["μ = ",d.mean.toFixed(2)," Kg"]})," | ",l.jsxs("span",{children:["σ = ",d.stdDev.toFixed(2)]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 ml-1 mt-4",children:["Pesajes del Período (",f.length,")"]}),f.sort((p,m)=>m.latestWeighing-p.latestWeighing).map(p=>l.jsx(RRe,{weighing:p,onSelectAnimal:m=>t({name:"lactation-profile",animalId:m})},p.weighingId||p.id))]})]}):l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12 px-4",children:[l.jsx("header",{className:"text-center pt-4 pb-4",children:l.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Historial de Producción"})}),l.jsx("div",{className:"space-y-2",children:(u||[]).map(p=>l.jsx(MRe,{stats:p,onClick:()=>a(p)},p.periodId))})]})}const $Re=({selectedDate:t,onDateChange:e,onOpenCalendar:n})=>{const r=P.useMemo(()=>{const s=new Date;return s.setHours(0,0,0,0),Array.from({length:7},(a,o)=>{const c=new Date(s);return c.setDate(s.getDate()-o),c})},[]),i=(s,a)=>{if(s.getTime()===a.getTime())return"Hoy";const o=new Date(a);return o.setDate(a.getDate()-1),s.getTime()===o.getTime()?"Ayer":s.toLocaleDateString("es-VE",{weekday:"short"}).replace(".","")};return l.jsxs("div",{className:"px-4",children:[l.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-zinc-400 mb-2",children:[l.jsx(Is,{size:16}),"Fecha del Pesaje"]}),l.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",style:{scrollbarWidth:"none",WebkitOverflowScrolling:"touch"},children:[l.jsxs("button",{type:"button",onClick:n,className:"flex flex-col items-center justify-center bg-zinc-800/80 rounded-lg p-2 w-16 h-16 flex-shrink-0 text-zinc-300 hover:bg-zinc-700 transition-colors",children:[l.jsx(Is,{size:20}),l.jsx("span",{className:"text-xs mt-1",children:"Calendario"})]}),r.map(s=>{const a=s.getTime()===t.getTime();return l.jsxs("button",{type:"button",onClick:()=>e(s),className:`flex flex-col items-center justify-center rounded-lg p-2 w-16 h-16 flex-shrink-0 transition-colors ${a?"bg-brand-orange text-white":"bg-zinc-800/80 text-zinc-300 hover:bg-zinc-700"}`,children:[l.jsx("span",{className:"text-xs capitalize",children:i(s,r[0])}),l.jsx("span",{className:"font-bold text-2xl",children:s.getDate()}),l.jsx("span",{className:"text-xs",children:s.toLocaleDateString("es-VE",{month:"short"}).replace(".","")})]},s.toISOString())})]})]})},FRe=({entry:t,onDelete:e,onRegister:n})=>{const r=!t.isRecognized;return l.jsxs("div",{className:`p-3 rounded-lg flex justify-between items-center animate-fade-in group ${r?"bg-amber-900/40 border border-amber-500/50":"bg-zinc-800/50"}`,children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[r&&l.jsx(Vt,{className:"text-amber-400 flex-shrink-0",size:18}),l.jsx("span",{className:"font-semibold text-white",children:t.animalId})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[r?l.jsx("button",{onClick:()=>n(t.animalId),className:"text-xs font-semibold bg-brand-orange text-white px-2 py-1 rounded-md hover:bg-orange-600",children:"Registrar Parto"}):l.jsxs("span",{className:"text-zinc-300 font-semibold",children:[t.kg.toFixed(2)," Kg"]}),l.jsx("button",{onClick:()=>e(t.tempId),className:"p-1 text-zinc-400 hover:text-brand-red opacity-0 group-hover:opacity-100 transition-opacity",children:l.jsx(Fo,{size:16})})]})]})},VRe=({onSaveSuccess:t})=>{const{animals:e,weighings:n,fetchData:r}=Ze(),[i,s]=P.useState(""),[a,o]=P.useState(""),[c,u]=P.useState([]),[d,f]=P.useState(null),[h,p]=P.useState(()=>{const M=new Date;return M.setHours(0,0,0,0),M}),[m,g]=P.useState(!1),[b,x]=P.useState({isOpen:!1,motherId:""}),[w,_]=P.useState(!1),E=P.useRef(null),j=P.useRef(null),T=()=>{var F;if(f(null),!i||!a)return;const M=i.toUpperCase().trim(),G=parseFloat(a),K=h.toISOString().split("T")[0];if(G>100){f({type:"error",text:`El valor de ${G} Kg es irracional. Verifique el dato.`});return}if(G>8.5){f({type:"error",text:`Producción de ${G} Kg es muy alta. Límite: 8.5 Kg.`});return}if(c.some(q=>q.animalId===M)){f({type:"error",text:`${M} ya tiene un pesaje en esta sesión.`});return}if(n.some(q=>q.goatId===M&&q.date===K)){f({type:"error",text:`${M} ya tiene un pesaje guardado para esta fecha.`});return}const B=e.find(q=>q.id===M);if(B&&B.isReference){f({type:"error",text:`${M} es un animal de Referencia. No se pueden añadir pesajes.`});return}const U={tempId:Date.now(),animalId:M,kg:G,date:K,isRecognized:!!B};u(q=>[U,...q]),s(""),o(""),(F=E.current)==null||F.focus()},A=async()=>{f(null),_(!0);const{currentUser:M}=Vf;if(!M){f({type:"error",text:"Error de autenticación."}),_(!1);return}const G=c.filter(K=>!K.isRecognized).length;if(G>0){f({type:"error",text:`No se puede guardar. Tienes ${G} animal(es) sin registrar.`}),_(!1);return}if(c.length===0){f({type:"error",text:"No hay pesajes para guardar."}),_(!1);return}try{const K=Kc(Zt),B=CC(Zt,"weighings");c.forEach(U=>{const F=Yn(B),q={goatId:U.animalId,kg:U.kg,date:U.date,userId:M.uid};K.set(F,q)}),await K.commit(),f({type:"success",text:`${c.length} pesajes guardados con éxito.`}),u([]),setTimeout(()=>{t(h.toISOString().split("T")[0])},1500)}catch(K){f({type:"error",text:"Ocurrió un error al guardar en la nube."}),console.error("Error en escritura por lote:",K),_(!1)}},C=M=>{var G;M.key==="Enter"&&i&&(M.preventDefault(),(G=j.current)==null||G.focus())},D=M=>{M.key==="Enter"&&a&&(M.preventDefault(),T())},O=M=>{u(G=>G.filter(K=>K.tempId!==M))},L=M=>{M&&(M.setHours(0,0,0,0),p(M)),g(!1)},z=()=>{r(),u(M=>M.map(G=>G.animalId===b.motherId?{...G,isRecognized:!0}:G)),x({isOpen:!1,motherId:""})};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsxs("div",{className:"flex-shrink-0 space-y-4 pt-4",children:[l.jsxs("div",{className:"text-center px-4",children:[l.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Carga Rápida de Leche"}),l.jsx("p",{className:"text-md text-zinc-400",children:"Sesión de Ordeño"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx($Re,{selectedDate:h,onDateChange:p,onOpenCalendar:()=>g(!0)}),l.jsxs("div",{className:"flex items-center gap-2 px-4",children:[l.jsx("input",{ref:E,type:"text",value:i,onChange:M=>s(M.target.value),onKeyDown:C,placeholder:"ID Animal",className:"w-full bg-brand-glass p-4 rounded-xl text-lg placeholder-zinc-500 border-2 border-transparent focus:border-brand-orange focus:ring-0"}),l.jsx("input",{ref:j,type:"number",step:"0.01",value:a,onChange:M=>o(M.target.value),onKeyDown:D,placeholder:"Kg",className:"w-32 flex-shrink-0 bg-brand-glass p-4 rounded-xl text-lg placeholder-zinc-500 border-2 border-transparent focus:border-brand-orange focus:ring-0"}),l.jsx("button",{onClick:T,disabled:!i||!a||w,"aria-label":"Añadir a la lista",className:"aspect-square h-full bg-brand-orange text-white rounded-xl flex items-center justify-center transition-all hover:bg-orange-600 disabled:opacity-40",children:l.jsx(rs,{size:24})})]})]})]}),l.jsxs("div",{className:"flex-grow overflow-y-auto px-4 space-y-2 py-4",children:[c.length===0&&l.jsx("p",{className:"text-center text-zinc-500 text-sm pt-8",children:"Los pesajes añadidos aparecerán aquí."}),c.map(M=>l.jsx(FRe,{entry:M,onDelete:O,onRegister:G=>x({isOpen:!0,motherId:G})},M.tempId))]}),l.jsxs("div",{className:"flex-shrink-0 p-4 border-t border-brand-border bg-gray-900/80 backdrop-blur-sm",children:[d&&l.jsxs("div",{className:`mb-3 flex items-center space-x-2 p-3 rounded-lg text-sm ${d.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[" ",d.type==="success"?l.jsx(ri,{size:18}):l.jsx(Vt,{size:18})," ",l.jsx("span",{children:d.text})," "]}),l.jsxs("button",{onClick:A,disabled:w||c.length===0,className:"w-full flex items-center justify-center gap-2 bg-brand-orange/20 border border-brand-orange text-brand-orange hover:bg-brand-orange/30 font-bold py-4 px-4 rounded-xl transition-colors text-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[w?l.jsx(Y0,{size:24,className:"animate-spin"}):l.jsx(Dh,{size:20}),w?"Guardando...":`Guardar ${c.length>0?`(${c.length})`:""} Pesajes`]})]})]}),l.jsx(nt,{isOpen:m,onClose:()=>g(!1),title:"Seleccionar Fecha",children:l.jsx("div",{className:"flex justify-center",children:l.jsx(Yh,{mode:"single",selected:h,onSelect:L})})}),l.jsx(id,{isOpen:b.isOpen,onClose:z,motherId:b.motherId})]})};function BRe({onNavigate:t,onSaveSuccess:e}){const[n,r]=P.useState("options");return n==="rapid"?l.jsx(VRe,{onSaveSuccess:e}):l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4 pt-4",children:[l.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white text-center",children:"Añadir Datos de Leche"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("button",{onClick:()=>r("rapid"),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-brand-orange text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[l.jsx(sw,{className:"w-12 h-12 mb-2 text-brand-orange"}),l.jsx("span",{className:"text-lg font-semibold",children:"Carga Rápida"}),l.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Para carga masiva con teclado"})]}),l.jsxs("button",{onClick:()=>t("ocr",{}),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-brand-blue text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[l.jsx(_F,{className:"w-12 h-12 mb-2 text-brand-blue"}),l.jsx("span",{className:"text-lg font-semibold",children:"Escanear Cuaderno"}),l.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Digitalización asistida por IA"})]})]})]})}const URe=({animal:t,parturition:e,onSelectAnimal:n})=>l.jsxs("div",{onClick:()=>n(t.id),className:"w-full cursor-pointer text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-amber-400 transition-colors",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),l.jsxs("p",{className:"text-sm text-zinc-400",children:[e.status==="en-secado"&&`Secado desde: ${new Date(e.dryingStartDate+"T00:00:00").toLocaleDateString()}`,e.status==="seca"&&"Lactancia finalizada"]})]}),l.jsx(tr,{className:"text-zinc-600"})]});function WRe({navigateToRebano:t}){const{animals:e,parturitions:n,isLoading:r}=Ze(),[i,s]=P.useState("drying"),a=P.useMemo(()=>{const c=f=>e.find(h=>h.id===f),u=n.filter(f=>f.status==="en-secado").map(f=>({animal:c(f.goatId),parturition:f})).filter(f=>f.animal),d=n.filter(f=>f.status==="seca").map(f=>({animal:c(f.goatId),parturition:f})).filter(f=>f.animal);return{drying:u,dry:d}},[e,n]),o=a[i]||[];return r?l.jsx("div",{className:"text-center p-10",children:l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando datos..."})}):l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12 px-4",children:[l.jsxs("header",{className:"text-center pt-4 pb-4",children:[l.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Gestión de Secado"}),l.jsx("p",{className:"text-md text-zinc-400",children:"Animales por Estado de Lactancia"})]}),l.jsx("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-2 border border-brand-border",children:l.jsxs("div",{className:"flex bg-zinc-900/80 rounded-xl p-1 w-full",children:[l.jsxs("button",{onClick:()=>s("drying"),className:`w-1/2 px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors ${i==="drying"?"bg-blue-500 text-white":"text-zinc-300 hover:bg-zinc-700/50"}`,children:["En Secado (",a.drying.length,")"]}),l.jsxs("button",{onClick:()=>s("dry"),className:`w-1/2 px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors ${i==="dry"?"bg-gray-600 text-white":"text-zinc-300 hover:bg-zinc-700/50"}`,children:["Secas (",a.dry.length,")"]})]})}),l.jsx("div",{className:"space-y-2",children:o.length>0?o.map(({animal:c,parturition:u})=>l.jsx(URe,{animal:c,parturition:u,onSelectAnimal:d=>t({name:"lactation-profile",animalId:d})},u.id)):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-400",children:"No hay animales en este estado."})})})]})}function HRe({initialPage:t,onPageStateChange:e,navigateToRebano:n,onSwitchModule:r}){const{syncStatus:i}=Ze(),[s,a]=P.useState(t||"dashboard");P.useEffect(()=>{e(s)},[s,e]),P.useEffect(()=>{a(t||"dashboard")},[t]);const o=[{id:"dashboard",label:"Dashboard",icon:nee},{id:"analysis",label:"Análisis",icon:gF},{id:"history",label:"Historial",icon:aee},{id:"add-data",label:"Añadir",icon:rs},{id:"drying",label:"Secado",icon:Yu}],c=()=>{s!=="dashboard"?a("dashboard"):r("rebano")},u=f=>{e(s),n({name:"lactation-profile",animalId:f})},d=()=>{switch(s){case"dashboard":return l.jsx(K5,{onNavigateToAnalysis:()=>a("analysis")});case"analysis":return l.jsx(IRe,{onSelectAnimal:u});case"history":return l.jsx(zRe,{navigateToRebano:n});case"add-data":return l.jsx(BRe,{onNavigate:(f,h)=>n({name:f,...h}),onSaveSuccess:()=>a("analysis")});case"drying":return l.jsx(WRe,{navigateToRebano:n});default:return l.jsx(K5,{onNavigateToAnalysis:()=>a("analysis")})}};return l.jsxs("div",{className:"min-h-screen animate-fade-in text-white flex flex-col",children:[l.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-gray-900/80 backdrop-blur-lg border-b border-brand-border",children:l.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[l.jsx("button",{onClick:c,className:"p-2 -ml-2 text-zinc-400 hover:text-white","aria-label":"Atrás",children:l.jsx(nr,{size:24})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Wee,{className:"text-brand-orange",size:28}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-bold text-white leading-none",children:"GanaderoOS"}),l.jsx("p",{className:"text-xs text-zinc-400 leading-none",children:"LactoKeeper"})]})]}),l.jsx("div",{className:"w-8 flex justify-end",children:l.jsx(Nv,{status:i})})]})}),l.jsx("main",{className:"flex-grow pt-16 pb-24",children:d()}),l.jsx(c1,{onSwitchModule:r}),l.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-black/30 backdrop-blur-xl border-t border-white/20 flex justify-around",children:o.map(f=>l.jsxs("button",{onClick:()=>a(f.id),className:`flex flex-col items-center justify-center p-3 w-full transition-colors ${s===f.id?"text-brand-orange":"text-gray-400 hover:text-brand-orange"}`,children:[l.jsx(f.icon,{className:"w-6 h-6 mb-1"}),l.jsx("span",{className:"text-xs font-semibold",children:f.label})]},f.id))})]})}const qRe=({selectedDate:t,onDateChange:e,onOpenCalendar:n})=>{const r=P.useMemo(()=>{const s=new Date;return s.setHours(0,0,0,0),Array.from({length:7},(a,o)=>{const c=new Date(s);return c.setDate(s.getDate()-o),c})},[]),i=(s,a)=>{if(s.getTime()===a.getTime())return"Hoy";const o=new Date(a);return o.setDate(a.getDate()-1),s.getTime()===o.getTime()?"Ayer":s.toLocaleDateString("es-VE",{weekday:"short"}).replace(".","")};return l.jsxs("div",{className:"px-4",children:[l.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-zinc-400 mb-2",children:[l.jsx(Is,{size:16}),"Fecha del Pesaje"]}),l.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",style:{scrollbarWidth:"none",WebkitOverflowScrolling:"touch"},children:[l.jsxs("button",{type:"button",onClick:n,className:"flex flex-col items-center justify-center bg-zinc-800/80 rounded-lg p-2 w-16 h-16 flex-shrink-0 text-zinc-300 hover:bg-zinc-700 transition-colors",children:[l.jsx(Is,{size:20}),l.jsx("span",{className:"text-xs mt-1",children:"Calendario"})]}),r.map(s=>{const a=s.getTime()===t.getTime();return l.jsxs("button",{type:"button",onClick:()=>e(s),className:`flex flex-col items-center justify-center rounded-lg p-2 w-16 h-16 flex-shrink-0 transition-colors ${a?"bg-brand-green text-white":"bg-zinc-800/80 text-zinc-300 hover:bg-zinc-700"}`,children:[l.jsx("span",{className:"text-xs capitalize",children:i(s,r[0])}),l.jsx("span",{className:"font-bold text-2xl",children:s.getDate()}),l.jsx("span",{className:"text-xs",children:s.toLocaleDateString("es-VE",{month:"short"}).replace(".","")})]},s.toISOString())})]})]})},KRe=({entry:t,onDelete:e})=>{const n=!t.isRecognized;return l.jsxs("div",{className:`p-3 rounded-lg flex justify-between items-center animate-fade-in group ${n?"bg-amber-900/40 border border-amber-500/50":"bg-zinc-800/50"}`,children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[n&&l.jsx(Vt,{className:"text-amber-400 flex-shrink-0",size:18}),l.jsx("span",{className:"font-semibold text-white",children:t.animalId})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("span",{className:"text-zinc-300 font-semibold",children:[t.kg.toFixed(2)," Kg"]}),l.jsx("button",{onClick:()=>e(t.tempId),className:"p-1 text-zinc-400 hover:text-brand-red opacity-0 group-hover:opacity-100 transition-opacity",children:l.jsx(Fo,{size:16})})]})]})},GRe=({onBack:t,onSaveSuccess:e})=>{const{animals:n}=Ze(),[r,i]=P.useState(""),[s,a]=P.useState(""),[o,c]=P.useState([]),[u,d]=P.useState(null),[f,h]=P.useState(()=>{const A=new Date;return A.setHours(0,0,0,0),A}),[p,m]=P.useState(!1),g=P.useRef(null),b=P.useRef(null),x=()=>{var L;if(!r||!s)return;const A=r.toUpperCase().trim(),C=parseFloat(s);if(C>100){d({type:"error",text:`El peso de ${C} Kg es irracional. Verifique el dato.`});return}const D=n.find(z=>z.id===A);if(D&&D.isReference){d({type:"error",text:`${A} es un animal de Referencia y no se le pueden añadir pesajes.`});return}const O={tempId:Date.now(),animalId:A,kg:C,date:f.toISOString().split("T")[0],isRecognized:!!D};c(z=>[O,...z]),i(""),a(""),(L=g.current)==null||L.focus()},w=async()=>{d(null);const{currentUser:A}=Vf;if(!A){d({type:"error",text:"Error de autenticación."});return}if(o.length===0){d({type:"error",text:"No hay pesajes para guardar."});return}try{const C=Kc(Zt),D=CC(Zt,"bodyWeighings");o.forEach(O=>{const L=Yn(D),z={animalId:O.animalId,kg:O.kg,date:O.date,userId:A.uid};C.set(L,z)}),await C.commit(),d({type:"success",text:`${o.length} pesajes guardados con éxito.`}),c([]),setTimeout(()=>e(f.toISOString().split("T")[0]),1500)}catch(C){d({type:"error",text:"Ocurrió un error al guardar en la nube."}),console.error("Error en escritura por lote:",C)}},_=A=>{var C;A.key==="Enter"&&r&&(A.preventDefault(),(C=b.current)==null||C.focus())},E=A=>{A.key==="Enter"&&s&&(A.preventDefault(),x())},j=A=>{c(C=>C.filter(D=>D.tempId!==A))},T=A=>{A&&(A.setHours(0,0,0,0),h(A)),m(!1)};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex flex-col h-full animate-fade-in",children:[l.jsxs("div",{className:"flex-shrink-0 space-y-4",children:[l.jsxs("header",{className:"text-center px-4 flex items-center",children:[l.jsx("button",{onClick:t,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(nr,{size:24})}),l.jsxs("div",{className:"flex-grow",children:[l.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Carga Rápida de Peso"}),l.jsx("p",{className:"text-md text-zinc-400",children:"Sesión de Pesaje"})]}),l.jsx("div",{className:"w-8"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx(qRe,{selectedDate:f,onDateChange:h,onOpenCalendar:()=>m(!0)}),l.jsxs("div",{className:"flex items-center gap-2 px-4",children:[l.jsx("input",{ref:g,type:"text",value:r,onChange:A=>i(A.target.value),onKeyDown:_,placeholder:"ID Animal",className:"w-full bg-brand-glass p-4 rounded-xl text-lg placeholder-zinc-500 border-2 border-transparent focus:border-brand-green focus:ring-0"}),l.jsx("input",{ref:b,type:"number",step:"0.01",value:s,onChange:A=>a(A.target.value),onKeyDown:E,placeholder:"Kg",className:"w-32 flex-shrink-0 bg-brand-glass p-4 rounded-xl text-lg placeholder-zinc-500 border-2 border-transparent focus:border-brand-green focus:ring-0"}),l.jsx("button",{onClick:x,disabled:!r||!s,"aria-label":"Añadir a la lista",className:"aspect-square h-full bg-brand-orange text-white rounded-xl flex items-center justify-center transition-all hover:bg-orange-600 disabled:opacity-40",children:l.jsx(rs,{size:24})})]})]})]}),l.jsxs("div",{className:"flex-grow overflow-y-auto px-4 space-y-2 py-4",children:[o.length===0&&l.jsx("p",{className:"text-center text-zinc-500 text-sm pt-8",children:"Los pesajes añadidos aparecerán aquí."}),o.map(A=>l.jsx(KRe,{entry:A,onDelete:j},A.tempId))]}),l.jsxs("div",{className:"flex-shrink-0 p-4 border-t border-brand-border bg-gray-900/80 backdrop-blur-sm",children:[u&&l.jsxs("div",{className:`mb-3 flex items-center space-x-2 p-3 rounded-lg text-sm ${u.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[" ",u.type==="success"?l.jsx(ri,{size:18}):l.jsx(Vt,{size:18})," ",l.jsx("span",{children:u.text})," "]}),l.jsxs("button",{onClick:w,className:"w-full flex items-center justify-center gap-2 bg-brand-green/20 border border-brand-green text-brand-green hover:bg-brand-green/30 font-bold py-4 px-4 rounded-xl transition-colors text-lg",children:[l.jsx(Dh,{size:20})," Guardar ",o.length>0?`(${o.length})`:""," Pesajes"]})]})]}),l.jsx(nt,{isOpen:p,onClose:()=>m(!1),title:"Seleccionar Fecha",children:l.jsx("div",{className:"flex justify-center",children:l.jsx(Yh,{mode:"single",selected:f,onSelect:T})})})]})};function YRe({onNavigate:t,onSaveSuccess:e}){const[n,r]=P.useState("options");return n==="rapid"?l.jsx(GRe,{onBack:()=>r("options"),onSaveSuccess:e}):l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4",children:[l.jsxs("header",{className:"text-center",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Añadir Pesaje Corporal"}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Carga de Datos de Crecimiento"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("button",{onClick:()=>r("rapid"),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-brand-green text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[l.jsx(sw,{className:"w-12 h-12 mb-2 text-brand-green"}),l.jsx("span",{className:"text-lg font-semibold",children:"Carga Rápida"}),l.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Para carga masiva con teclado"})]}),l.jsxs("button",{onClick:()=>t("ocr",{}),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-brand-blue text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[l.jsx(_F,{className:"w-12 h-12 mb-2 text-brand-blue"}),l.jsx("span",{className:"text-lg font-semibold",children:"Escanear Cuaderno"}),l.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Digitalización asistida por IA"})]})]})]})}const QRe=({gdp:t,averageGdp:e})=>{if(!t||!e||e===0)return null;const n=t/e;return n>1.1?l.jsx(Ka,{size:18,className:"text-brand-green"}):n<.9?l.jsx(Iee,{size:18,className:"text-brand-red"}):l.jsx(xF,{size:18,className:"text-zinc-500"})},XRe=({animal:t,onSelect:e,averageGdp:n})=>l.jsxs("button",{onClick:()=>e(t.id),className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-brand-green transition-colors",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),l.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:[t.sex," | ",t.formattedAge," | Lote: ",t.location||"N/A"]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"text-right",children:[l.jsxs("p",{className:"font-semibold text-white",children:[t.gdp.overall?`${(t.gdp.overall*1e3).toFixed(0)}`:"--",l.jsx("span",{className:"text-sm text-zinc-400",children:" g/día"})]}),l.jsx("p",{className:`font-bold text-sm ${t.classification==="Sobresaliente"?"text-brand-green":t.classification==="Pobre"?"text-brand-red":"text-zinc-400"}`,children:t.classification})]}),l.jsx(QRe,{gdp:t.gdp.overall,averageGdp:n}),l.jsx(tr,{className:"text-zinc-600"})]})]});function G5({onSelectAnimal:t}){const{animals:e,bodyWeighings:n,parturitions:r}=Ze(),i=P.useMemo(()=>{const s=e.filter(w=>{const _=uc(w,r);return["Cabrita","Cabritona","Cabrito","Macho de Levante"].includes(_)});if(s.length===0)return{analyzedAnimals:[],distribution:[],averageGdp:0};let a=0,o=0;const c=s.map(w=>{const _=n.filter(j=>j.animalId===w.id),E=zP(w.birthWeight,_);return E.overall&&E.overall>0&&(a+=E.overall,o++),{...w,formattedAge:ma(w.birthDate),gdp:E}}),u=o>0?a/o:0,d=c.map(w=>({...w,score:w.gdp.overall?Rke(w.gdp.overall,u,Va(w.birthDate)):0})),f=d.filter(w=>w.score>0).map(w=>w.score),h=f.length>0?f.reduce((w,_)=>w+_,0)/f.length:0,p=f.length>0?Math.sqrt(f.reduce((w,_)=>w+Math.pow(_-h,2),0)/f.length):0,m=h-.4*p,g=h+.4*p,b=d.map(w=>{let _="Promedio";return w.score>0&&p>1&&(w.score<m?_="Pobre":w.score>g&&(_="Sobresaliente")),{...w,classification:_}}),x=[{name:"Pobre",count:b.filter(w=>w.classification==="Pobre").length,fill:"#FF3B30"},{name:"Promedio",count:b.filter(w=>w.classification==="Promedio").length,fill:"#6B7280"},{name:"Sobresaliente",count:b.filter(w=>w.classification==="Sobresaliente").length,fill:"#34C759"}];return{analyzedAnimals:b.sort((w,_)=>_.score-w.score),distribution:x,averageGdp:u}},[e,n,r]);return l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in",children:[l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-2 text-xs uppercase tracking-wider",children:[l.jsx(Ka,{}),l.jsx("span",{children:"GDP Promedio del Levante"})]}),l.jsxs("p",{className:"text-4xl font-bold tracking-tight text-white",children:[(i.averageGdp*1e3).toFixed(0)," ",l.jsx("span",{className:"text-2xl font-medium text-zinc-400",children:"g/día"})]})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Distribución del Crecimiento"}),l.jsx("div",{className:"w-full h-48",children:l.jsx(fr,{children:l.jsxs(Mi,{data:i.distribution,margin:{top:20,right:10,left:-20,bottom:0},children:[l.jsx(Un,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(er,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(tn,{content:l.jsx(Fu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),l.jsx(hr,{dataKey:"count",children:i.distribution.map(s=>l.jsx(aa,{fill:s.fill},s.name))})]})})})]}),l.jsxs("div",{className:"space-y-2 pt-4",children:[l.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 ml-1",children:["Animales en Levante (",i.analyzedAnimals.length,")"]}),i.analyzedAnimals.length>0?i.analyzedAnimals.map(s=>l.jsx(XRe,{animal:s,onSelect:()=>t(s.id),averageGdp:i.averageGdp},s.id)):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-500",children:"No hay animales en fase de levante o no se han registrado pesajes."})})]})]})}const ZRe=()=>{const{animals:t,bodyWeighings:e,parturitions:n}=Ze();return P.useMemo(()=>{const s=t.filter(_=>{const E=Va(_.birthDate);return E>0&&E<=365&&!_.isReference}).map(_=>{const E=e.filter(T=>T.animalId===_.id),j=zP(_.birthWeight,E);return{..._,gdp:j.overall,ageInDays:Va(_.birthDate)}}).filter(_=>_.gdp!==null&&_.gdp>0);if(s.length<2)return{classifiedAnimals:[],distribution:[],gaussChartData:[],meanGdp:0,stdDev:0};const o=s.reduce((_,E)=>_+E.gdp,0)/s.length,c=Math.sqrt(s.reduce((_,E)=>_+Math.pow(E.gdp-o,2),0)/s.length),u=o-.4*c,d=o+.4*c,f=s.map(_=>{let E="Promedio";return c>.005&&(_.gdp<u?E="Pobre":_.gdp>d&&(E="Sobresaliente")),{..._,classification:E}}),h=[{name:"Pobre",count:f.filter(_=>_.classification==="Pobre").length,fill:"#FF3B30"},{name:"Promedio",count:f.filter(_=>_.classification==="Promedio").length,fill:"#6B7280"},{name:"Sobresaliente",count:f.filter(_=>_.classification==="Sobresaliente").length,fill:"#34C759"}],p=f.map(_=>_.gdp),m=Math.min(...p),g=Math.max(...p),b=10,x=(g-m)/b,w=Array.from({length:b},(_,E)=>{const j=m+E*x,T=j+x,A=f.filter(C=>C.gdp>=j&&C.gdp<T).length;return{name:`${(j*1e3).toFixed(0)}`,count:A}});return{classifiedAnimals:f.sort((_,E)=>E.gdp-_.gdp),distribution:h,gaussChartData:w,meanGdp:o,stdDev:c}},[t,e,n])},JRe=({animal:t,onSelect:e})=>{const n={Sobresaliente:"bg-brand-green/80",Promedio:"bg-gray-500/80",Pobre:"bg-brand-red/80"},r=ma(t.birthDate);return l.jsxs("button",{onClick:()=>e(t.id),className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-brand-green transition-colors",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),l.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:[t.sex," | ",r," | Lote: ",t.location||"Sin Asignar"]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("p",{className:"font-semibold text-white text-right",children:[(t.gdp*1e3).toFixed(0),l.jsx("span",{className:"text-sm text-zinc-400",children:" g/día"})]}),l.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full text-white ${n[t.classification]}`,children:t.classification}),l.jsx(tr,{className:"text-zinc-600"})]})]})};function e4e({onSelectAnimal:t}){const{classifiedAnimals:e,distribution:n,gaussChartData:r,meanGdp:i,stdDev:s}=ZRe(),[a,o]=P.useState("all"),c=Y.useMemo(()=>a==="all"?e:e.filter(d=>d.classification===a),[e,a]),u=d=>{if(d!=null&&d.name){const f=d.name;o(h=>h===f?"all":f)}};return l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4",children:[l.jsxs("header",{className:"text-center",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Análisis de GDP"}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Ganancia Diaria de Peso"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[l.jsx(Ka,{size:14}),l.jsx("span",{children:"GDP Media"})]}),l.jsxs("p",{className:"text-2xl font-bold text-white",children:[(i*1e3).toFixed(0)," ",l.jsx("span",{className:"text-lg text-zinc-400",children:"g/día"})]})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[l.jsx(SF,{size:14}),l.jsx("span",{children:"Desv. Estándar"})]}),l.jsxs("p",{className:"text-2xl font-bold text-white",children:[(s*1e3).toFixed(0)," ",l.jsx("span",{className:"text-lg text-zinc-400",children:"g/día"})]})]})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Distribución del Crecimiento"}),l.jsx("div",{className:"w-full h-48",children:l.jsx(fr,{children:l.jsxs(Mi,{data:n,margin:{top:20,right:10,left:-20,bottom:0},children:[l.jsx(Un,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(er,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(tn,{content:l.jsx(Fu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),l.jsx(hr,{dataKey:"count",onClick:u,cursor:"pointer",children:n.map(d=>l.jsx(aa,{fill:d.fill,className:`${a!=="all"&&a!==d.name?"opacity-30":"opacity-100"} transition-opacity`},d.name))})]})})})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Campana de Gauss (g/día)"}),l.jsx("div",{className:"w-full h-48",children:l.jsx(fr,{children:l.jsxs(Mi,{data:r,margin:{top:20,right:10,left:-20,bottom:0},children:[l.jsx(Un,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(er,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},allowDecimals:!1}),l.jsx(tn,{content:l.jsx(Fu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),l.jsx(hr,{dataKey:"count",fill:"rgba(52, 199, 89, 0.6)"})]})})})]}),l.jsxs("div",{className:"space-y-2 pt-4",children:[l.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 ml-1",children:[a==="all"?"Todos los Animales":`Animales (${a})`," (",c.length,")"]}),c.length>0?c.map(d=>l.jsx(JRe,{animal:d,onSelect:t},d.id)):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-500",children:"No hay animales que coincidan con los filtros."})})]})]})}function t4e({navigateToRebano:t,onSwitchModule:e}){const{syncStatus:n}=Ze(),[r,i]=P.useState("dashboard"),s=[{id:"dashboard",label:"Dashboard",icon:nw},{id:"analysis",label:"Análisis",icon:Bee},{id:"add-data",label:"Añadir",icon:rs}],a=()=>{r!=="dashboard"?i("dashboard"):e("rebano")},o=()=>{switch(r){case"dashboard":return l.jsx(G5,{onSelectAnimal:c=>t({name:"growth-profile",animalId:c})});case"analysis":return l.jsx(e4e,{onSelectAnimal:c=>t({name:"growth-profile",animalId:c})});case"add-data":return l.jsx(YRe,{onNavigate:t,onSaveSuccess:()=>i("analysis")});default:return l.jsx(G5,{onSelectAnimal:c=>t({name:"growth-profile",animalId:c})})}};return l.jsxs("div",{className:"min-h-screen animate-fade-in text-white flex flex-col",children:[l.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-gray-900/80 backdrop-blur-lg border-b border-brand-border",children:l.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[l.jsx("button",{onClick:a,className:"p-2 -ml-2 text-zinc-400 hover:text-white","aria-label":"Atrás",children:l.jsx(nr,{size:24})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ec,{className:"text-brand-green"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-bold text-white leading-none",children:"GanaderoOS"}),l.jsx("p",{className:"text-xs text-zinc-400 leading-none",children:"Kilos"})]})]}),l.jsx("div",{className:"w-8 flex justify-end",children:l.jsx(Nv,{status:n})})]})}),l.jsx("main",{className:"flex-grow pt-16 pb-24",children:o()}),l.jsx(c1,{onSwitchModule:e}),l.jsx("nav",{className:"flex-shrink-0 fixed bottom-0 left-0 right-0 bg-black/30 backdrop-blur-xl border-t border-white/20 flex justify-around",children:s.map(c=>l.jsxs("button",{onClick:()=>i(c.id),className:`flex flex-col items-center justify-center p-3 w-full transition-colors ${r===c.id?"text-brand-green":"text-gray-400 hover:text-brand-green"}`,children:[l.jsx(c.icon,{className:"w-6 h-6 mb-1"}),l.jsx("span",{className:"text-xs font-semibold",children:c.label})]},c.id))})]})}const n4e=["Desparasitantes","Antibióticos","Vacunas","Vitaminas","Modificadores Orgánicos","Pomadas Tópicas","Analgésicos","Hormonas","Antiinflamatorios","Otro"],aN=({onSave:t,onCancel:e,existingProduct:n})=>{const[r,i]=P.useState(""),[s,a]=P.useState(""),[o,c]=P.useState("Otro"),[u,d]=P.useState(""),[f,h]=P.useState("ml"),[p,m]=P.useState(""),[g,b]=P.useState("Inyectable"),[x,w]=P.useState("Intramuscular"),[_,E]=P.useState("per_kg"),[j,T]=P.useState(""),[A,C]=P.useState(""),[D,O]=P.useState(""),[L,z]=P.useState(null);P.useEffect(()=>{n&&(i(n.name),a(n.laboratory||""),c(n.category||"Otro"),d(String(n.presentationValue||"")),h(n.presentationUnit||"ml"),m(String(n.price||"")),b(n.applicationType),n.applicationRoute&&w(n.applicationRoute),E(n.dosageType||"per_kg"),T(String(n.dosageFixed||"")),C(String(n.dosagePerKg_ml||"")),O(String(n.dosagePerKg_kg||"")))},[n]);const M=async G=>{if(G.preventDefault(),z(null),!r.trim()){z("El nombre es obligatorio.");return}if(_==="fixed"&&!j){z("La dosis fija es obligatoria.");return}if(_==="per_kg"&&(!A||!D)){z("Ambos campos de dosificación por Kg son obligatorios.");return}const K={name:r,applicationType:g,dosageType:_,category:o};s&&(K.laboratory=s),u&&(K.presentationValue=parseFloat(u)),K.presentationUnit=f,p&&(K.price=parseFloat(p)),g==="Inyectable"&&(K.applicationRoute=x),_==="fixed"&&(K.dosageFixed=parseFloat(j)),_==="per_kg"&&(K.dosagePerKg_ml=parseFloat(A),K.dosagePerKg_kg=parseFloat(D));try{await t(K)}catch(B){z("No se pudo guardar el producto."),console.error(B)}};return l.jsxs("form",{onSubmit:M,className:"space-y-4",children:[l.jsx("input",{type:"text",value:r,onChange:G=>i(G.target.value),placeholder:"Nombre o Marca Comercial",className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0}),l.jsxs("select",{value:o,onChange:G=>c(G.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",children:[l.jsx("option",{value:"",disabled:!0,children:"Seleccionar Categoría..."}),n4e.map(G=>l.jsx("option",{value:G,children:G},G))]}),l.jsx("input",{type:"text",value:s,onChange:G=>a(G.target.value),placeholder:"Laboratorio (Opcional)",className:"w-full bg-zinc-800 p-3 rounded-xl"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"number",value:u,onChange:G=>d(G.target.value),placeholder:"Presentación",className:"w-full bg-zinc-800 p-3 rounded-xl"}),l.jsxs("select",{value:f,onChange:G=>h(G.target.value),className:"bg-zinc-800 p-3 rounded-xl",children:[l.jsx("option",{value:"ml",children:"ml"}),l.jsx("option",{value:"L",children:"L"})]})]}),l.jsxs("div",{className:"relative",children:[l.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400",children:"$"}),l.jsx("input",{type:"number",step:"0.01",value:p,onChange:G=>m(G.target.value),placeholder:"Precio",className:"w-full bg-zinc-800 p-3 pl-7 rounded-xl"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium text-zinc-400",children:"Vía de Administración"}),l.jsxs("div",{className:"relative flex w-full justify-between rounded-lg bg-zinc-800 p-1",children:[l.jsx("button",{type:"button",onClick:()=>b("Inyectable"),className:"relative z-10 w-1/2 py-1.5 text-sm font-semibold text-white",children:"Inyectable"}),l.jsx("button",{type:"button",onClick:()=>b("Oral"),className:"relative z-10 w-1/2 py-1.5 text-sm font-semibold text-white",children:"Oral"}),l.jsx(On.div,{layoutId:"app-type-bg",transition:{type:"spring",stiffness:400,damping:30},className:`absolute top-1 h-[calc(100%-0.5rem)] w-1/2 rounded-md bg-zinc-600 ${g==="Oral"?"left-1/2":"left-1"}`})]})]}),g==="Inyectable"&&l.jsxs(On.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2 overflow-hidden",children:[l.jsx("label",{className:"text-sm font-medium text-zinc-400",children:"Ruta (Inyectable)"}),l.jsxs("div",{className:"relative flex w-full justify-between rounded-lg bg-zinc-800 p-1",children:[l.jsx("button",{type:"button",onClick:()=>w("Intramuscular"),className:"relative z-10 w-1/2 py-1.5 text-sm font-semibold text-white",children:"Intramuscular"}),l.jsx("button",{type:"button",onClick:()=>w("Subcutáneo"),className:"relative z-10 w-1/2 py-1.5 text-sm font-semibold text-white",children:"Subcutáneo"}),l.jsx(On.div,{layoutId:"app-route-bg",transition:{type:"spring",stiffness:400,damping:30},className:`absolute top-1 h-[calc(100%-0.5rem)] w-1/2 rounded-md bg-zinc-600 ${x==="Subcutáneo"?"left-1/2":"left-1"}`})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium text-zinc-400",children:"Dosificación"}),l.jsxs("div",{className:"relative flex w-full justify-between rounded-lg bg-zinc-800 p-1",children:[l.jsx("button",{type:"button",onClick:()=>E("per_kg"),className:"relative z-10 w-1/2 py-1.5 text-sm font-semibold text-white",children:"Por Kg PV"}),l.jsx("button",{type:"button",onClick:()=>E("fixed"),className:"relative z-10 w-1/2 py-1.5 text-sm font-semibold text-white",children:"Dosis Única"}),l.jsx(On.div,{layoutId:"dosage-type-bg",transition:{type:"spring",stiffness:400,damping:30},className:`absolute top-1 h-[calc(100%-0.5rem)] w-1/2 rounded-md bg-zinc-600 ${_==="fixed"?"left-1/2":"left-1"}`})]}),_==="per_kg"?l.jsxs("div",{className:"flex items-center justify-between gap-2 animate-fade-in",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:"number",step:"0.1",value:A,onChange:G=>C(G.target.value),placeholder:"1",className:"w-full bg-zinc-800 p-3 pr-10 rounded-xl",required:!0}),l.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400 text-sm",children:"ml"})]}),l.jsx("span",{className:"text-zinc-500 text-sm",children:"por cada"}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:"number",step:"1",value:D,onChange:G=>O(G.target.value),placeholder:"50",className:"w-full bg-zinc-800 p-3 pr-10 rounded-xl",required:!0}),l.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400 text-sm",children:"Kg"})]})]}):l.jsxs("div",{className:"relative animate-fade-in",children:[l.jsx("input",{type:"number",step:"0.1",value:j,onChange:G=>T(G.target.value),placeholder:"Ej: 2",className:"w-full bg-zinc-800 p-3 pr-24 rounded-xl",required:!0}),l.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400 text-sm",children:"ml (dosis total)"})]})]}),L&&l.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[l.jsx(Vt,{size:18}),l.jsx("span",{children:L})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:e,className:"px-5 py-2.5 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"px-5 py-2.5 bg-brand-green text-white font-bold rounded-lg",children:n?"Actualizar Producto":"Guardar Producto"})]})]})};function r4e(){const{products:t,addProduct:e,updateProduct:n,deleteProduct:r}=Ze(),[i,s]=P.useState(!1),[a,o]=P.useState(void 0),[c,u]=P.useState(null),[d,f]=P.useState("Todos"),h=E=>{o(E),s(!0)},p=()=>{s(!1),o(void 0)},m=async E=>{a!=null&&a.id?await n(a.id,E):await e(E),p()},g=async()=>{c!=null&&c.id&&await r(c.id),u(null)},b=P.useMemo(()=>{const E=new Set(t.map(j=>j.category).filter(Boolean));return["Todos",...Array.from(E).sort()]},[t]),x=P.useMemo(()=>d==="Todos"?t:t.filter(E=>E.category===d),[t,d]),w=E=>{if(!E.price||!E.presentationValue||E.presentationValue===0)return"N/A";const j=E.presentationUnit==="L"?E.presentationValue*1e3:E.presentationValue;return j===0?"N/A":`$${(E.price/j).toFixed(3)} / ml`},_=E=>E.dosageType==="fixed"?`${E.dosageFixed} ml (fija)`:E.dosageType==="per_kg"?`${E.dosagePerKg_ml} ml / ${E.dosagePerKg_kg} Kg`:"No especificada";return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 animate-fade-in px-4",children:[l.jsxs("header",{className:"text-center",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Inventario de Productos"}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Gestión de Insumos Sanitarios"})]}),l.jsxs("button",{onClick:()=>h(),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:opacity-90 text-black font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[l.jsx(Er,{size:18})," Añadir Nuevo Producto"]}),l.jsxs("div",{className:"space-y-2 pt-4",children:[l.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-zinc-300",children:[l.jsx(yee,{size:18})," Filtrar por Categoría"]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:b.map(E=>l.jsx("button",{onClick:()=>f(E),className:`px-3 py-1.5 text-sm font-semibold rounded-full transition-colors ${d===E?"bg-brand-blue text-white":"bg-zinc-700 text-zinc-300"}`,children:E},E))})]}),l.jsx("div",{className:"space-y-3 pt-4",children:x.length>0?x.map(E=>l.jsx("div",{className:"bg-dashboard-surface rounded-2xl p-4 border border-brand-border",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:E.name}),l.jsx("p",{className:"text-sm text-zinc-400",children:E.presentationValue?`${E.presentationValue} ${E.presentationUnit}`:"Sin presentación"}),l.jsxs("div",{className:"mt-2 flex items-center flex-wrap gap-x-4 gap-y-1 text-xs",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Ih,{size:14})," ",_(E)]}),l.jsxs("span",{className:"flex items-center gap-1 font-semibold text-amber-400",children:[l.jsx(Hl,{size:14})," ",w(E)]})]})]}),l.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[l.jsx("button",{onClick:()=>h(E),className:"p-2 text-zinc-400 hover:text-brand-orange transition-colors",children:l.jsx(tc,{size:18})}),l.jsx("button",{onClick:()=>u(E),className:"p-2 text-zinc-400 hover:text-brand-red transition-colors",children:l.jsx(ha,{size:18})})]})]})},E.id)):l.jsxs("div",{className:"text-center py-10 bg-dashboard-surface rounded-2xl",children:[l.jsx("p",{className:"text-zinc-500 font-semibold",children:"No se encontraron productos."}),l.jsx("p",{className:"text-zinc-500 text-sm",children:d==="Todos"?"Añade tu primer producto para empezar.":`No hay productos en la categoría "${d}".`})]})})]}),l.jsx(nt,{isOpen:i,onClose:p,title:a?"Editar Producto":"Añadir Producto",children:l.jsx(aN,{onSave:m,onCancel:p,existingProduct:a})}),l.jsx(l1,{isOpen:!!c,onClose:()=>u(null),onConfirm:g,title:"Eliminar Producto",message:`¿Estás seguro de que quieres eliminar "${c==null?void 0:c.name}"? Esta acción no se puede deshacer.`})]})}var u1,ot,TU,PU,wh,Yc,Y5,NU,kU,cx={},DU=[],i4e=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Al(t,e){for(var n in e)t[n]=e[n];return t}function IU(t){var e=t.parentNode;e&&e.removeChild(t)}function ve(t,e,n){var r,i,s,a={};for(s in e)s=="key"?r=e[s]:s=="ref"?i=e[s]:a[s]=e[s];if(arguments.length>2&&(a.children=arguments.length>3?u1.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)a[s]===void 0&&(a[s]=t.defaultProps[s]);return o0(t,a,r,i,null)}function o0(t,e,n,r,i){var s={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i??++TU};return i==null&&ot.vnode!=null&&ot.vnode(s),s}function Lo(){return{current:null}}function Wn(t){return t.children}function s4e(t,e,n,r,i){var s;for(s in n)s==="children"||s==="key"||s in e||ux(t,s,null,n[s],r);for(s in e)i&&typeof e[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||n[s]===e[s]||ux(t,s,e[s],n[s],r)}function Q5(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||i4e.test(e)?n:n+"px"}function ux(t,e,n,r,i){var s;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||Q5(t.style,e,"");if(n)for(e in n)r&&n[e]===r[e]||Q5(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")s=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?r||t.addEventListener(e,s?Z5:X5,s):t.removeEventListener(e,s?Z5:X5,s);else if(e!=="dangerouslySetInnerHTML"){if(i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e.indexOf("-")==-1?t.removeAttribute(e):t.setAttribute(e,n))}}function X5(t){wh=!0;try{return this.l[t.type+!1](ot.event?ot.event(t):t)}finally{wh=!1}}function Z5(t){wh=!0;try{return this.l[t.type+!0](ot.event?ot.event(t):t)}finally{wh=!1}}function os(t,e){this.props=t,this.context=e}function Hg(t,e){if(e==null)return t.__?Hg(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?Hg(t):null}function OU(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return OU(t)}}function a4e(t){wh?setTimeout(t):NU(t)}function W2(t){(!t.__d&&(t.__d=!0)&&Yc.push(t)&&!dx.__r++||Y5!==ot.debounceRendering)&&((Y5=ot.debounceRendering)||a4e)(dx)}function dx(){var t,e,n,r,i,s,a,o;for(Yc.sort(function(c,u){return c.__v.__b-u.__v.__b});t=Yc.shift();)t.__d&&(e=Yc.length,r=void 0,i=void 0,a=(s=(n=t).__v).__e,(o=n.__P)&&(r=[],(i=Al({},s)).__v=s.__v+1,oN(o,s,i,n.__n,o.ownerSVGElement!==void 0,s.__h!=null?[a]:null,r,a??Hg(s),s.__h),$U(r,s),s.__e!=a&&OU(s)),Yc.length>e&&Yc.sort(function(c,u){return c.__v.__b-u.__v.__b}));dx.__r=0}function MU(t,e,n,r,i,s,a,o,c,u){var d,f,h,p,m,g,b,x=r&&r.__k||DU,w=x.length;for(n.__k=[],d=0;d<e.length;d++)if((p=n.__k[d]=(p=e[d])==null||typeof p=="boolean"?null:typeof p=="string"||typeof p=="number"||typeof p=="bigint"?o0(null,p,null,null,p):Array.isArray(p)?o0(Wn,{children:p},null,null,null):p.__b>0?o0(p.type,p.props,p.key,p.ref?p.ref:null,p.__v):p)!=null){if(p.__=n,p.__b=n.__b+1,(h=x[d])===null||h&&p.key==h.key&&p.type===h.type)x[d]=void 0;else for(f=0;f<w;f++){if((h=x[f])&&p.key==h.key&&p.type===h.type){x[f]=void 0;break}h=null}oN(t,p,h=h||cx,i,s,a,o,c,u),m=p.__e,(f=p.ref)&&h.ref!=f&&(b||(b=[]),h.ref&&b.push(h.ref,null,p),b.push(f,p.__c||m,p)),m!=null?(g==null&&(g=m),typeof p.type=="function"&&p.__k===h.__k?p.__d=c=RU(p,c,t):c=LU(t,p,h,x,m,c),typeof n.type=="function"&&(n.__d=c)):c&&h.__e==c&&c.parentNode!=t&&(c=Hg(h))}for(n.__e=g,d=w;d--;)x[d]!=null&&(typeof n.type=="function"&&x[d].__e!=null&&x[d].__e==n.__d&&(n.__d=zU(r).nextSibling),VU(x[d],x[d]));if(b)for(d=0;d<b.length;d++)FU(b[d],b[++d],b[++d])}function RU(t,e,n){for(var r,i=t.__k,s=0;i&&s<i.length;s++)(r=i[s])&&(r.__=t,e=typeof r.type=="function"?RU(r,e,n):LU(n,r,r,i,r.__e,e));return e}function fx(t,e){return e=e||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(n){fx(n,e)}):e.push(t)),e}function LU(t,e,n,r,i,s){var a,o,c;if(e.__d!==void 0)a=e.__d,e.__d=void 0;else if(n==null||i!=s||i.parentNode==null)e:if(s==null||s.parentNode!==t)t.appendChild(i),a=null;else{for(o=s,c=0;(o=o.nextSibling)&&c<r.length;c+=1)if(o==i)break e;t.insertBefore(i,s),a=s}return a!==void 0?a:i.nextSibling}function zU(t){var e,n,r;if(t.type==null||typeof t.type=="string")return t.__e;if(t.__k){for(e=t.__k.length-1;e>=0;e--)if((n=t.__k[e])&&(r=zU(n)))return r}return null}function oN(t,e,n,r,i,s,a,o,c){var u,d,f,h,p,m,g,b,x,w,_,E,j,T,A,C=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(c=n.__h,o=e.__e=n.__e,e.__h=null,s=[o]),(u=ot.__b)&&u(e);try{e:if(typeof C=="function"){if(b=e.props,x=(u=C.contextType)&&r[u.__c],w=u?x?x.props.value:u.__:r,n.__c?g=(d=e.__c=n.__c).__=d.__E:("prototype"in C&&C.prototype.render?e.__c=d=new C(b,w):(e.__c=d=new os(b,w),d.constructor=C,d.render=l4e),x&&x.sub(d),d.props=b,d.state||(d.state={}),d.context=w,d.__n=r,f=d.__d=!0,d.__h=[],d._sb=[]),d.__s==null&&(d.__s=d.state),C.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=Al({},d.__s)),Al(d.__s,C.getDerivedStateFromProps(b,d.__s))),h=d.props,p=d.state,d.__v=e,f)C.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(C.getDerivedStateFromProps==null&&b!==h&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(b,w),!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(b,d.__s,w)===!1||e.__v===n.__v){for(e.__v!==n.__v&&(d.props=b,d.state=d.__s,d.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(D){D&&(D.__=e)}),_=0;_<d._sb.length;_++)d.__h.push(d._sb[_]);d._sb=[],d.__h.length&&a.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(b,d.__s,w),d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(h,p,m)})}if(d.context=w,d.props=b,d.__P=t,E=ot.__r,j=0,"prototype"in C&&C.prototype.render){for(d.state=d.__s,d.__d=!1,E&&E(e),u=d.render(d.props,d.state,d.context),T=0;T<d._sb.length;T++)d.__h.push(d._sb[T]);d._sb=[]}else do d.__d=!1,E&&E(e),u=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++j<25);d.state=d.__s,d.getChildContext!=null&&(r=Al(Al({},r),d.getChildContext())),f||d.getSnapshotBeforeUpdate==null||(m=d.getSnapshotBeforeUpdate(h,p)),A=u!=null&&u.type===Wn&&u.key==null?u.props.children:u,MU(t,Array.isArray(A)?A:[A],e,n,r,i,s,a,o,c),d.base=e.__e,e.__h=null,d.__h.length&&a.push(d),g&&(d.__E=d.__=null),d.__e=!1}else s==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=o4e(n.__e,e,n,r,i,s,a,c);(u=ot.diffed)&&u(e)}catch(D){e.__v=null,(c||s!=null)&&(e.__e=o,e.__h=!!c,s[s.indexOf(o)]=null),ot.__e(D,e,n)}}function $U(t,e){ot.__c&&ot.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(r){r.call(n)})}catch(r){ot.__e(r,n.__v)}})}function o4e(t,e,n,r,i,s,a,o){var c,u,d,f=n.props,h=e.props,p=e.type,m=0;if(p==="svg"&&(i=!0),s!=null){for(;m<s.length;m++)if((c=s[m])&&"setAttribute"in c==!!p&&(p?c.localName===p:c.nodeType===3)){t=c,s[m]=null;break}}if(t==null){if(p===null)return document.createTextNode(h);t=i?document.createElementNS("http://www.w3.org/2000/svg",p):document.createElement(p,h.is&&h),s=null,o=!1}if(p===null)f===h||o&&t.data===h||(t.data=h);else{if(s=s&&u1.call(t.childNodes),u=(f=n.props||cx).dangerouslySetInnerHTML,d=h.dangerouslySetInnerHTML,!o){if(s!=null)for(f={},m=0;m<t.attributes.length;m++)f[t.attributes[m].name]=t.attributes[m].value;(d||u)&&(d&&(u&&d.__html==u.__html||d.__html===t.innerHTML)||(t.innerHTML=d&&d.__html||""))}if(s4e(t,h,f,i,o),d)e.__k=[];else if(m=e.props.children,MU(t,Array.isArray(m)?m:[m],e,n,r,i&&p!=="foreignObject",s,a,s?s[0]:n.__k&&Hg(n,0),o),s!=null)for(m=s.length;m--;)s[m]!=null&&IU(s[m]);o||("value"in h&&(m=h.value)!==void 0&&(m!==t.value||p==="progress"&&!m||p==="option"&&m!==f.value)&&ux(t,"value",m,f.value,!1),"checked"in h&&(m=h.checked)!==void 0&&m!==t.checked&&ux(t,"checked",m,f.checked,!1))}return t}function FU(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(r){ot.__e(r,n)}}function VU(t,e,n){var r,i;if(ot.unmount&&ot.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||FU(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){ot.__e(s,e)}r.base=r.__P=null,t.__c=void 0}if(r=t.__k)for(i=0;i<r.length;i++)r[i]&&VU(r[i],e,n||typeof t.type!="function");n||t.__e==null||IU(t.__e),t.__=t.__e=t.__d=void 0}function l4e(t,e,n){return this.constructor(t,n)}function qg(t,e,n){var r,i,s;ot.__&&ot.__(t,e),i=(r=!1)?null:e.__k,s=[],oN(e,t=e.__k=ve(Wn,null,[t]),i||cx,cx,e.ownerSVGElement!==void 0,i?null:e.firstChild?u1.call(e.childNodes):null,s,i?i.__e:e.firstChild,r),$U(s,t)}function c4e(t,e){var n={__c:e="__cC"+kU++,__:t,Consumer:function(r,i){return r.children(i)},Provider:function(r){var i,s;return this.getChildContext||(i=[],(s={})[e]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(a){this.props.value!==a.value&&i.some(function(o){o.__e=!0,W2(o)})},this.sub=function(a){i.push(a);var o=a.componentWillUnmount;a.componentWillUnmount=function(){i.splice(i.indexOf(a),1),o&&o.call(a)}}),r.children}};return n.Provider.__=n.Consumer.contextType=n}u1=DU.slice,ot={__e:function(t,e,n,r){for(var i,s,a;e=e.__;)if((i=e.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(t)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,r||{}),a=i.__d),a)return i.__E=i}catch(o){t=o}throw t}},TU=0,PU=function(t){return t!=null&&t.constructor===void 0},wh=!1,os.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Al({},this.state),typeof t=="function"&&(t=t(Al({},n),this.props)),t&&Al(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),W2(this))},os.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),W2(this))},os.prototype.render=Wn,Yc=[],NU=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,dx.__r=0,kU=0;var ja,uS,J5,BU=[],dS=[],e3=ot.__b,t3=ot.__r,n3=ot.diffed,r3=ot.__c,i3=ot.unmount;function u4e(){for(var t;t=BU.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(l0),t.__H.__h.forEach(H2),t.__H.__h=[]}catch(e){t.__H.__h=[],ot.__e(e,t.__v)}}ot.__b=function(t){ja=null,e3&&e3(t)},ot.__r=function(t){t3&&t3(t);var e=(ja=t.__c).__H;e&&(uS===ja?(e.__h=[],ja.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=dS,n.__N=n.i=void 0})):(e.__h.forEach(l0),e.__h.forEach(H2),e.__h=[])),uS=ja},ot.diffed=function(t){n3&&n3(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(BU.push(e)!==1&&J5===ot.requestAnimationFrame||((J5=ot.requestAnimationFrame)||d4e)(u4e)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==dS&&(n.__=n.__V),n.i=void 0,n.__V=dS})),uS=ja=null},ot.__c=function(t,e){e.some(function(n){try{n.__h.forEach(l0),n.__h=n.__h.filter(function(r){return!r.__||H2(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],ot.__e(r,n.__v)}}),r3&&r3(t,e)},ot.unmount=function(t){i3&&i3(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{l0(r)}catch(i){e=i}}),n.__H=void 0,e&&ot.__e(e,n.__v))};var s3=typeof requestAnimationFrame=="function";function d4e(t){var e,n=function(){clearTimeout(r),s3&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);s3&&(e=requestAnimationFrame(n))}function l0(t){var e=ja,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),ja=e}function H2(t){var e=ja;t.__c=t.__(),ja=e}function f4e(t,e){for(var n in e)t[n]=e[n];return t}function a3(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var r in e)if(r!=="__source"&&t[r]!==e[r])return!0;return!1}function o3(t){this.props=t}(o3.prototype=new os).isPureReactComponent=!0,o3.prototype.shouldComponentUpdate=function(t,e){return a3(this.props,t)||a3(this.state,e)};var l3=ot.__b;ot.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),l3&&l3(t)};var h4e=ot.__e;ot.__e=function(t,e,n,r){if(t.then){for(var i,s=e;s=s.__;)if((i=s.__c)&&i.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),i.__c(t,e)}h4e(t,e,n,r)};var c3=ot.unmount;function UU(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),t.__c.__H=null),(t=f4e({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map(function(r){return UU(r,e,n)})),t}function WU(t,e,n){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(r){return WU(r,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=n)),t}function fS(){this.__u=0,this.t=null,this.__b=null}function HU(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function Py(){this.u=null,this.o=null}ot.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&t.__h===!0&&(t.type=null),c3&&c3(t)},(fS.prototype=new os).__c=function(t,e){var n=e.__c,r=this;r.t==null&&(r.t=[]),r.t.push(n);var i=HU(r.__v),s=!1,a=function(){s||(s=!0,n.__R=null,i?i(o):o())};n.__R=a;var o=function(){if(!--r.__u){if(r.state.__a){var u=r.state.__a;r.__v.__k[0]=WU(u,u.__c.__P,u.__c.__O)}var d;for(r.setState({__a:r.__b=null});d=r.t.pop();)d.forceUpdate()}},c=e.__h===!0;r.__u++||c||r.setState({__a:r.__b=r.__v.__k[0]}),t.then(a,a)},fS.prototype.componentWillUnmount=function(){this.t=[]},fS.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=UU(this.__b,n,r.__O=r.__P)}this.__b=null}var i=e.__a&&ve(Wn,null,t.fallback);return i&&(i.__h=null),[ve(Wn,null,e.__a?null:t.children),i]};var u3=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};function p4e(t){return this.getChildContext=function(){return t.context},t.children}function m4e(t){var e=this,n=t.i;e.componentWillUnmount=function(){qg(null,e.l),e.l=null,e.i=null},e.i&&e.i!==n&&e.componentWillUnmount(),t.__v?(e.l||(e.i=n,e.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(r){this.childNodes.push(r),e.i.appendChild(r)},insertBefore:function(r,i){this.childNodes.push(r),e.i.appendChild(r)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),e.i.removeChild(r)}}),qg(ve(p4e,{context:e.context},t.__v),e.l)):e.l&&e.componentWillUnmount()}function g4e(t,e){var n=ve(m4e,{__v:t,i:e});return n.containerInfo=e,n}(Py.prototype=new os).__a=function(t){var e=this,n=HU(e.__v),r=e.o.get(t);return r[0]++,function(i){var s=function(){e.props.revealOrder?(r.push(i),u3(e,t,r)):i()};n?n(s):s()}},Py.prototype.render=function(t){this.u=null,this.o=new Map;var e=fx(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},Py.prototype.componentDidUpdate=Py.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,n){u3(t,n,e)})};var v4e=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,y4e=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,b4e=typeof document<"u",x4e=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(t)};os.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(os.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var d3=ot.event;function w4e(){}function _4e(){return this.cancelBubble}function S4e(){return this.defaultPrevented}ot.event=function(t){return d3&&(t=d3(t)),t.persist=w4e,t.isPropagationStopped=_4e,t.isDefaultPrevented=S4e,t.nativeEvent=t};var f3={configurable:!0,get:function(){return this.class}},h3=ot.vnode;ot.vnode=function(t){var e=t.type,n=t.props,r=n;if(typeof e=="string"){var i=e.indexOf("-")===-1;for(var s in r={},n){var a=n[s];b4e&&s==="children"&&e==="noscript"||s==="value"&&"defaultValue"in n&&a==null||(s==="defaultValue"&&"value"in n&&n.value==null?s="value":s==="download"&&a===!0?a="":/ondoubleclick/i.test(s)?s="ondblclick":/^onchange(textarea|input)/i.test(s+e)&&!x4e(n.type)?s="oninput":/^onfocus$/i.test(s)?s="onfocusin":/^onblur$/i.test(s)?s="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(s)?s=s.toLowerCase():i&&y4e.test(s)?s=s.replace(/[A-Z0-9]/g,"-$&").toLowerCase():a===null&&(a=void 0),/^oninput$/i.test(s)&&(s=s.toLowerCase(),r[s]&&(s="oninputCapture")),r[s]=a)}e=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=fx(n.children).forEach(function(o){o.props.selected=r.value.indexOf(o.props.value)!=-1})),e=="select"&&r.defaultValue!=null&&(r.value=fx(n.children).forEach(function(o){o.props.selected=r.multiple?r.defaultValue.indexOf(o.props.value)!=-1:r.defaultValue==o.props.value})),t.props=r,n.class!=n.className&&(f3.enumerable="className"in n,n.className!=null&&(r.class=n.className),Object.defineProperty(r,"className",f3))}t.$$typeof=v4e,h3&&h3(t)};var p3=ot.__r;ot.__r=function(t){p3&&p3(t),t.__c};const qU=[],q2=new Map;function KU(t){qU.push(t),q2.forEach(e=>{YU(e,t)})}function A4e(t){t.isConnected&&t.getRootNode&&GU(t.getRootNode())}function GU(t){let e=q2.get(t);if(!e||!e.isConnected){if(e=t.querySelector("style[data-fullcalendar]"),!e){e=document.createElement("style"),e.setAttribute("data-fullcalendar","");const n=j4e();n&&(e.nonce=n);const r=t===document?document.head:t,i=t===document?r.querySelector("script,link[rel=stylesheet],link[as=style],style"):r.firstChild;r.insertBefore(e,i)}q2.set(t,e),E4e(e)}}function E4e(t){for(const e of qU)YU(t,e)}function YU(t,e){const{sheet:n}=t,r=n.cssRules.length;e.split("}").forEach((i,s)=>{i=i.trim(),i&&n.insertRule(i+"}",r+s)})}let hS;function j4e(){return hS===void 0&&(hS=C4e()),hS}function C4e(){const t=document.querySelector('meta[name="csp-nonce"]');if(t&&t.hasAttribute("content"))return t.getAttribute("content");const e=document.querySelector("script[nonce]");return e&&e.nonce||""}typeof document<"u"&&GU(document);var T4e=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';KU(T4e);class lN{constructor(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),e==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))}pause(e=""){let{pauseDepths:n}=this;n[e]=(n[e]||0)+1,this.clearTimeout()}resume(e="",n){let{pauseDepths:r}=this;e in r&&(n?delete r[e]:(r[e]-=1,r[e]<=0&&delete r[e]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function cN(t){t.parentNode&&t.parentNode.removeChild(t)}function pi(t,e){if(t.closest)return t.closest(e);if(!document.documentElement.contains(t))return null;do{if(P4e(t,e))return t;t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===1);return null}function P4e(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector).call(t,e)}function N4e(t,e){let n=t instanceof HTMLElement?[t]:t,r=[];for(let i=0;i<n.length;i+=1){let s=n[i].querySelectorAll(e);for(let a=0;a<s.length;a+=1)r.push(s[a])}return r}const k4e=/(top|left|right|bottom|width|height)$/i;function _m(t,e){for(let n in e)QU(t,n,e[n])}function QU(t,e,n){n==null?t.style[e]="":typeof n=="number"&&k4e.test(e)?t.style[e]=`${n}px`:t.style[e]=n}function XU(t){var e,n;return(n=(e=t.composedPath)===null||e===void 0?void 0:e.call(t)[0])!==null&&n!==void 0?n:t.target}let m3=0;function d1(){return m3+=1,"fc-dom-"+m3}function f1(t){t.preventDefault()}function D4e(t,e){return n=>{let r=pi(n.target,t);r&&e.call(r,n,r)}}function ZU(t,e,n,r){let i=D4e(n,r);return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}function I4e(t,e,n,r){let i;return ZU(t,"mouseover",e,(s,a)=>{if(a!==i){i=a,n(s,a);let o=c=>{i=null,r(c,a),a.removeEventListener("mouseleave",o)};a.addEventListener("mouseleave",o)}})}const g3=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function O4e(t,e){let n=r=>{e(r),g3.forEach(i=>{t.removeEventListener(i,n)})};g3.forEach(r=>{t.addEventListener(r,n)})}function JU(t){return Object.assign({onClick:t},eW(t))}function eW(t){return{tabIndex:0,onKeyDown(e){(e.key==="Enter"||e.key===" ")&&(t(e),e.preventDefault())}}}let v3=0;function sd(){return v3+=1,String(v3)}function uN(){document.body.classList.add("fc-not-allowed")}function dN(){document.body.classList.remove("fc-not-allowed")}function M4e(t){t.style.userSelect="none",t.style.webkitUserSelect="none",t.addEventListener("selectstart",f1)}function R4e(t){t.style.userSelect="",t.style.webkitUserSelect="",t.removeEventListener("selectstart",f1)}function L4e(t){t.addEventListener("contextmenu",f1)}function z4e(t){t.removeEventListener("contextmenu",f1)}function $4e(t){let e=[],n=[],r,i;for(typeof t=="string"?n=t.split(/\s*,\s*/):typeof t=="function"?n=[t]:Array.isArray(t)&&(n=t),r=0;r<n.length;r+=1)i=n[r],typeof i=="string"?e.push(i.charAt(0)==="-"?{field:i.substring(1),order:-1}:{field:i,order:1}):typeof i=="function"&&e.push({func:i});return e}function F4e(t,e,n){let r,i;for(r=0;r<n.length;r+=1)if(i=V4e(t,e,n[r]),i)return i;return 0}function V4e(t,e,n){return n.func?n.func(t,e):B4e(t[n.field],e[n.field])*(n.order||1)}function B4e(t,e){return!t&&!e?0:e==null?-1:t==null?1:typeof t=="string"||typeof e=="string"?String(t).localeCompare(String(e)):t-e}function pS(t,e){let n=String(t);return"000".substr(0,e-n.length)+n}function Sm(t,e,n){return typeof t=="function"?t(...e):typeof t=="string"?e.reduce((r,i,s)=>r.replace("$"+s,i||""),t):n}function U4e(t,e){return t-e}function mS(t){return t%1===0}function W4e(t){let e=t.querySelector(".fc-scrollgrid-shrink-frame"),n=t.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!n)throw new Error("needs fc-scrollgrid-shrink-cushion className");return t.getBoundingClientRect().width-e.getBoundingClientRect().width+n.getBoundingClientRect().width}const H4e=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function Gt(t,e){return typeof t=="string"?q4e(t):typeof t=="object"&&t?y3(t):typeof t=="number"?y3({[e||"milliseconds"]:t}):null}function q4e(t){let e=H4e.exec(t);if(e){let n=e[1]?-1:1;return{years:0,months:0,days:n*(e[2]?parseInt(e[2],10):0),milliseconds:n*((e[3]?parseInt(e[3],10):0)*60*60*1e3+(e[4]?parseInt(e[4],10):0)*60*1e3+(e[5]?parseInt(e[5],10):0)*1e3+(e[6]?parseInt(e[6],10):0))}}return null}function y3(t){let e={years:t.years||t.year||0,months:t.months||t.month||0,days:t.days||t.day||0,milliseconds:(t.hours||t.hour||0)*60*60*1e3+(t.minutes||t.minute||0)*60*1e3+(t.seconds||t.second||0)*1e3+(t.milliseconds||t.millisecond||t.ms||0)},n=t.weeks||t.week;return n&&(e.days+=n*7,e.specifiedWeeks=!0),e}function K4e(t,e){return t.years===e.years&&t.months===e.months&&t.days===e.days&&t.milliseconds===e.milliseconds}function G4e(t,e){return{years:t.years-e.years,months:t.months-e.months,days:t.days-e.days,milliseconds:t.milliseconds-e.milliseconds}}function Y4e(t){return Sf(t)/365}function Q4e(t){return Sf(t)/30}function Sf(t){return Kg(t)/864e5}function Kg(t){return t.years*(365*864e5)+t.months*(30*864e5)+t.days*864e5+t.milliseconds}function K2(t){let e=t.milliseconds;if(e){if(e%1e3!==0)return{unit:"millisecond",value:e};if(e%(1e3*60)!==0)return{unit:"second",value:e/1e3};if(e%(1e3*60*60)!==0)return{unit:"minute",value:e/(1e3*60)};if(e)return{unit:"hour",value:e/(1e3*60*60)}}return t.days?t.specifiedWeeks&&t.days%7===0?{unit:"week",value:t.days/7}:{unit:"day",value:t.days}:t.months?{unit:"month",value:t.months}:t.years?{unit:"year",value:t.years}:{unit:"millisecond",value:0}}function Gl(t,e,n){if(t===e)return!0;let r=t.length,i;if(r!==e.length)return!1;for(i=0;i<r;i+=1)if(!(n?n(t[i],e[i]):t[i]===e[i]))return!1;return!0}const X4e=["sun","mon","tue","wed","thu","fri","sat"];function b3(t,e){let n=El(t);return n[2]+=e*7,Li(n)}function zr(t,e){let n=El(t);return n[2]+=e,Li(n)}function Yl(t,e){let n=El(t);return n[6]+=e,Li(n)}function Z4e(t,e){return Qh(t,e)/7}function Qh(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60*24)}function J4e(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60)}function e5e(t,e){return(e.valueOf()-t.valueOf())/(1e3*60)}function t5e(t,e){return(e.valueOf()-t.valueOf())/1e3}function n5e(t,e){let n=kn(t),r=kn(e);return{years:0,months:0,days:Math.round(Qh(n,r)),milliseconds:e.valueOf()-r.valueOf()-(t.valueOf()-n.valueOf())}}function r5e(t,e){let n=hx(t,e);return n!==null&&n%7===0?n/7:null}function hx(t,e){return jl(t)===jl(e)?Math.round(Qh(t,e)):null}function kn(t){return Li([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()])}function i5e(t){return Li([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours()])}function s5e(t){return Li([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes()])}function a5e(t){return Li([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()])}function o5e(t,e,n){let r=t.getUTCFullYear(),i=gS(t,r,e,n);if(i<1)return gS(t,r-1,e,n);let s=gS(t,r+1,e,n);return s>=1?Math.min(i,s):i}function gS(t,e,n,r){let i=Li([e,0,1+l5e(e,n,r)]),s=kn(t),a=Math.round(Qh(i,s));return Math.floor(a/7)+1}function l5e(t,e,n){let r=7+e-n;return-((7+Li([t,0,r]).getUTCDay()-e)%7)+r-1}function x3(t){return[t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()]}function w3(t){return new Date(t[0],t[1]||0,t[2]==null?1:t[2],t[3]||0,t[4]||0,t[5]||0)}function El(t){return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()]}function Li(t){return t.length===1&&(t=t.concat([0])),new Date(Date.UTC(...t))}function tW(t){return!isNaN(t.valueOf())}function jl(t){return t.getUTCHours()*1e3*60*60+t.getUTCMinutes()*1e3*60+t.getUTCSeconds()*1e3+t.getUTCMilliseconds()}function c5e(t,e,n=!1){let r=t.toISOString();return r=r.replace(".000",""),n&&(r=r.replace("T00:00:00Z","")),r.length>10&&(e==null?r=r.replace("Z",""):e!==0&&(r=r.replace("Z",hN(e,!0)))),r}function fN(t){return t.toISOString().replace(/T.*$/,"")}function u5e(t){return t.toISOString().match(/^\d{4}-\d{2}/)[0]}function hN(t,e=!1){let n=t<0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),s=Math.round(r%60);return e?`${n+pS(i,2)}:${pS(s,2)}`:`GMT${n}${i}${s?`:${pS(s,2)}`:""}`}function Ht(t,e,n){let r,i;return function(...s){if(!r)i=t.apply(this,s);else if(!Gl(r,s)){let a=t.apply(this,s);(!e||!e(a,i))&&(i=a)}return r=s,i}}function c0(t,e,n){let r,i;return s=>(r?da(r,s)||(i=t.call(this,s)):i=t.call(this,s),r=s,i)}const vS={week:3,separator:9,omitZeroMinute:9,meridiem:9,omitCommas:9},px={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},Ny=/\s*([ap])\.?m\.?/i,d5e=/,/g,f5e=/\s+/g,h5e=/\u200e/g,p5e=/UTC|GMT/;class m5e{constructor(e){let n={},r={},i=9;for(let s in e)s in vS?(r[s]=e[s],vS[s]<9&&(i=Math.min(vS[s],i))):(n[s]=e[s],s in px&&(i=Math.min(px[s],i)));this.standardDateProps=n,this.extendedSettings=r,this.smallestUnitNum=i,this.buildFormattingFunc=Ht(_3)}format(e,n){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,n)(e)}formatRange(e,n,r,i){let{standardDateProps:s,extendedSettings:a}=this,o=w5e(e.marker,n.marker,r.calendarSystem);if(!o)return this.format(e,r);let c=o;c>1&&(s.year==="numeric"||s.year==="2-digit")&&(s.month==="numeric"||s.month==="2-digit")&&(s.day==="numeric"||s.day==="2-digit")&&(c=1);let u=this.format(e,r),d=this.format(n,r);if(u===d)return u;let f=_5e(s,c),h=_3(f,a,r),p=h(e),m=h(n),g=S5e(u,p,d,m),b=a.separator||i||r.defaultSeparator||"";return g?g.before+p+b+m+g.after:u+b+d}getSmallestUnit(){switch(this.smallestUnitNum){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function _3(t,e,n){let r=Object.keys(t).length;return r===1&&t.timeZoneName==="short"?i=>hN(i.timeZoneOffset):r===0&&e.week?i=>x5e(n.computeWeekNumber(i.marker),n.weekText,n.weekTextLong,n.locale,e.week):g5e(t,e,n)}function g5e(t,e,n){t=Object.assign({},t),e=Object.assign({},e),v5e(t,e),t.timeZone="UTC";let r=new Intl.DateTimeFormat(n.locale.codes,t),i;if(e.omitZeroMinute){let s=Object.assign({},t);delete s.minute,i=new Intl.DateTimeFormat(n.locale.codes,s)}return s=>{let{marker:a}=s,o;i&&!a.getUTCMinutes()?o=i:o=r;let c=o.format(a);return y5e(c,s,t,e,n)}}function v5e(t,e){t.timeZoneName&&(t.hour||(t.hour="2-digit"),t.minute||(t.minute="2-digit")),t.timeZoneName==="long"&&(t.timeZoneName="short"),e.omitZeroMinute&&(t.second||t.millisecond)&&delete e.omitZeroMinute}function y5e(t,e,n,r,i){return t=t.replace(h5e,""),n.timeZoneName==="short"&&(t=b5e(t,i.timeZone==="UTC"||e.timeZoneOffset==null?"UTC":hN(e.timeZoneOffset))),r.omitCommas&&(t=t.replace(d5e,"").trim()),r.omitZeroMinute&&(t=t.replace(":00","")),r.meridiem===!1?t=t.replace(Ny,"").trim():r.meridiem==="narrow"?t=t.replace(Ny,(s,a)=>a.toLocaleLowerCase()):r.meridiem==="short"?t=t.replace(Ny,(s,a)=>`${a.toLocaleLowerCase()}m`):r.meridiem==="lowercase"&&(t=t.replace(Ny,s=>s.toLocaleLowerCase())),t=t.replace(f5e," "),t=t.trim(),t}function b5e(t,e){let n=!1;return t=t.replace(p5e,()=>(n=!0,e)),n||(t+=` ${e}`),t}function x5e(t,e,n,r,i){let s=[];return i==="long"?s.push(n):(i==="short"||i==="narrow")&&s.push(e),(i==="long"||i==="short")&&s.push(" "),s.push(r.simpleNumberFormat.format(t)),r.options.direction==="rtl"&&s.reverse(),s.join("")}function w5e(t,e,n){return n.getMarkerYear(t)!==n.getMarkerYear(e)?5:n.getMarkerMonth(t)!==n.getMarkerMonth(e)?4:n.getMarkerDay(t)!==n.getMarkerDay(e)?2:jl(t)!==jl(e)?1:0}function _5e(t,e){let n={};for(let r in t)(!(r in px)||px[r]<=e)&&(n[r]=t[r]);return n}function S5e(t,e,n,r){let i=0;for(;i<t.length;){let s=t.indexOf(e,i);if(s===-1)break;let a=t.substr(0,s);i=s+e.length;let o=t.substr(i),c=0;for(;c<n.length;){let u=n.indexOf(r,c);if(u===-1)break;let d=n.substr(0,u);c=u+r.length;let f=n.substr(c);if(a===d&&o===f)return{before:a,after:o}}}return null}function S3(t,e){let n=e.markerToArray(t.marker);return{marker:t.marker,timeZoneOffset:t.timeZoneOffset,array:n,year:n[0],month:n[1],day:n[2],hour:n[3],minute:n[4],second:n[5],millisecond:n[6]}}function mx(t,e,n,r){let i=S3(t,n.calendarSystem),s=e?S3(e,n.calendarSystem):null;return{date:i,start:i,end:s,timeZone:n.timeZone,localeCodes:n.locale.codes,defaultSeparator:r||n.defaultSeparator}}class A5e{constructor(e){this.cmdStr=e}format(e,n,r){return n.cmdFormatter(this.cmdStr,mx(e,null,n,r))}formatRange(e,n,r,i){return r.cmdFormatter(this.cmdStr,mx(e,n,r,i))}}class E5e{constructor(e){this.func=e}format(e,n,r){return this.func(mx(e,null,n,r))}formatRange(e,n,r,i){return this.func(mx(e,n,r,i))}}function Rr(t){return typeof t=="object"&&t?new m5e(t):typeof t=="string"?new A5e(t):typeof t=="function"?new E5e(t):null}const A3={navLinkDayClick:me,navLinkWeekClick:me,duration:Gt,bootstrapFontAwesome:me,buttonIcons:me,customButtons:me,defaultAllDayEventDuration:Gt,defaultTimedEventDuration:Gt,nextDayThreshold:Gt,scrollTime:Gt,scrollTimeReset:Boolean,slotMinTime:Gt,slotMaxTime:Gt,dayPopoverFormat:Rr,slotDuration:Gt,snapDuration:Gt,headerToolbar:me,footerToolbar:me,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:Rr,dayHeaderClassNames:me,dayHeaderContent:me,dayHeaderDidMount:me,dayHeaderWillUnmount:me,dayCellClassNames:me,dayCellContent:me,dayCellDidMount:me,dayCellWillUnmount:me,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:me,weekNumbers:Boolean,weekNumberClassNames:me,weekNumberContent:me,weekNumberDidMount:me,weekNumberWillUnmount:me,editable:Boolean,viewClassNames:me,viewDidMount:me,viewWillUnmount:me,nowIndicator:Boolean,nowIndicatorSnap:me,nowIndicatorClassNames:me,nowIndicatorContent:me,nowIndicatorDidMount:me,nowIndicatorWillUnmount:me,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:me,locale:me,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:me,eventOrder:$4e,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:me,contentHeight:me,direction:String,weekNumberFormat:Rr,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:me,initialDate:me,now:me,eventDataTransform:me,stickyHeaderDates:me,stickyFooterScrollbar:me,viewHeight:me,defaultAllDay:Boolean,eventSourceFailure:me,eventSourceSuccess:me,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:me,eventConstraint:me,eventAllow:me,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:me,eventContent:me,eventDidMount:me,eventWillUnmount:me,selectConstraint:me,selectOverlap:me,selectAllow:me,droppable:Boolean,unselectCancel:String,slotLabelFormat:me,slotLaneClassNames:me,slotLaneContent:me,slotLaneDidMount:me,slotLaneWillUnmount:me,slotLabelClassNames:me,slotLabelContent:me,slotLabelDidMount:me,slotLabelWillUnmount:me,dayMaxEvents:me,dayMaxEventRows:me,dayMinWidth:Number,slotLabelInterval:Gt,allDayText:String,allDayClassNames:me,allDayContent:me,allDayDidMount:me,allDayWillUnmount:me,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:Rr,rerenderDelay:Number,moreLinkText:me,moreLinkHint:me,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:me,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:Gt,hiddenDays:me,fixedWeekCount:Boolean,validRange:me,visibleRange:me,titleFormat:me,eventInteractive:Boolean,noEventsText:String,viewHint:me,navLinkHint:me,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:me,moreLinkClassNames:me,moreLinkContent:me,moreLinkDidMount:me,moreLinkWillUnmount:me,monthStartFormat:Rr,handleCustomRendering:me,customRenderingMetaMap:me,customRenderingReplaces:Boolean},Am={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:" – ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"},nowIndicatorSnap:"auto"},E3={datesSet:me,eventsSet:me,eventAdd:me,eventChange:me,eventRemove:me,windowResize:me,eventClick:me,eventMouseEnter:me,eventMouseLeave:me,select:me,unselect:me,loading:me,_unmount:me,_beforeprint:me,_afterprint:me,_noEventDrop:me,_noEventResize:me,_resize:me,_scrollRequest:me},j3={buttonText:me,buttonHints:me,views:me,plugins:me,initialEvents:me,events:me,eventSources:me},Hc={headerToolbar:qc,footerToolbar:qc,buttonText:qc,buttonHints:qc,buttonIcons:qc,dateIncrement:qc,plugins:ky,events:ky,eventSources:ky,resources:ky};function qc(t,e){return typeof t=="object"&&typeof e=="object"&&t&&e?da(t,e):t===e}function ky(t,e){return Array.isArray(t)&&Array.isArray(e)?Gl(t,e):t===e}const j5e={type:String,component:me,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:me,usesMinMaxTime:Boolean,classNames:me,content:me,didMount:me,willUnmount:me};function yS(t){return mN(t,Hc)}function pN(t,e){let n={},r={};for(let i in e)i in t&&(n[i]=e[i](t[i]));for(let i in t)i in e||(r[i]=t[i]);return{refined:n,extra:r}}function me(t){return t}const{hasOwnProperty:gx}=Object.prototype;function mN(t,e){let n={};if(e){for(let r in e)if(e[r]===qc){let i=[];for(let s=t.length-1;s>=0;s-=1){let a=t[s][r];if(typeof a=="object"&&a)i.unshift(a);else if(a!==void 0){n[r]=a;break}}i.length&&(n[r]=mN(i))}}for(let r=t.length-1;r>=0;r-=1){let i=t[r];for(let s in i)s in n||(n[s]=i[s])}return n}function Vu(t,e){let n={};for(let r in t)e(t[r],r)&&(n[r]=t[r]);return n}function ad(t,e){let n={};for(let r in t)n[r]=e(t[r],r);return n}function nW(t){let e={};for(let n of t)e[n]=!0;return e}function gN(t){let e=[];for(let n in t)e.push(t[n]);return e}function da(t,e){if(t===e)return!0;for(let n in t)if(gx.call(t,n)&&!(n in e))return!1;for(let n in e)if(gx.call(e,n)&&t[n]!==e[n])return!1;return!0}const C5e=/^on[A-Z]/;function T5e(t,e){const n=P5e(t,e);for(let r of n)if(!C5e.test(r))return!1;return!0}function P5e(t,e){let n=[];for(let r in t)gx.call(t,r)&&(r in e||n.push(r));for(let r in e)gx.call(e,r)&&t[r]!==e[r]&&n.push(r);return n}function bS(t,e,n={}){if(t===e)return!0;for(let r in e)if(!(r in t&&N5e(t[r],e[r],n[r])))return!1;for(let r in t)if(!(r in e))return!1;return!0}function N5e(t,e,n){return t===e||n===!0?!0:n?n(t,e):!1}function k5e(t,e=0,n,r=1){let i=[];n==null&&(n=Object.keys(t).length);for(let s=e;s<n;s+=r){let a=t[s];a!==void 0&&i.push(a)}return i}let rW={};function D5e(t,e){rW[t]=e}function I5e(t){return new rW[t]}class O5e{getMarkerYear(e){return e.getUTCFullYear()}getMarkerMonth(e){return e.getUTCMonth()}getMarkerDay(e){return e.getUTCDate()}arrayToMarker(e){return Li(e)}markerToArray(e){return El(e)}}D5e("gregory",O5e);const M5e=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function R5e(t){let e=M5e.exec(t);if(e){let n=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?+`0.${e[12]}`*1e3:0));if(tW(n)){let r=null;return e[13]&&(r=(e[15]==="-"?-1:1)*(Number(e[16]||0)*60+Number(e[18]||0))),{marker:n,isTimeUnspecified:!e[6],timeZoneOffset:r}}}return null}class L5e{constructor(e){let n=this.timeZone=e.timeZone,r=n!=="local"&&n!=="UTC";e.namedTimeZoneImpl&&r&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(n)),this.canComputeOffset=!!(!r||this.namedTimeZoneImpl),this.calendarSystem=I5e(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,e.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof e.firstDay=="number"&&(this.weekDow=e.firstDay),typeof e.weekNumberCalculation=="function"&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=e.weekText!=null?e.weekText:e.locale.options.weekText,this.weekTextLong=(e.weekTextLong!=null?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}createMarker(e){let n=this.createMarkerMeta(e);return n===null?null:n.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):Li(x3(new Date))}createMarkerMeta(e){if(typeof e=="string")return this.parse(e);let n=null;return typeof e=="number"?n=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(n=this.timestampToMarker(e))):Array.isArray(e)&&(n=Li(e)),n===null||!tW(n)?null:{marker:n,isTimeUnspecified:!1,forcedTzo:null}}parse(e){let n=R5e(e);if(n===null)return null;let{marker:r}=n,i=null;return n.timeZoneOffset!==null&&(this.canComputeOffset?r=this.timestampToMarker(r.valueOf()-n.timeZoneOffset*60*1e3):i=n.timeZoneOffset),{marker:r,isTimeUnspecified:n.isTimeUnspecified,forcedTzo:i}}getYear(e){return this.calendarSystem.getMarkerYear(e)}getMonth(e){return this.calendarSystem.getMarkerMonth(e)}getDay(e){return this.calendarSystem.getMarkerDay(e)}add(e,n){let r=this.calendarSystem.markerToArray(e);return r[0]+=n.years,r[1]+=n.months,r[2]+=n.days,r[6]+=n.milliseconds,this.calendarSystem.arrayToMarker(r)}subtract(e,n){let r=this.calendarSystem.markerToArray(e);return r[0]-=n.years,r[1]-=n.months,r[2]-=n.days,r[6]-=n.milliseconds,this.calendarSystem.arrayToMarker(r)}addYears(e,n){let r=this.calendarSystem.markerToArray(e);return r[0]+=n,this.calendarSystem.arrayToMarker(r)}addMonths(e,n){let r=this.calendarSystem.markerToArray(e);return r[1]+=n,this.calendarSystem.arrayToMarker(r)}diffWholeYears(e,n){let{calendarSystem:r}=this;return jl(e)===jl(n)&&r.getMarkerDay(e)===r.getMarkerDay(n)&&r.getMarkerMonth(e)===r.getMarkerMonth(n)?r.getMarkerYear(n)-r.getMarkerYear(e):null}diffWholeMonths(e,n){let{calendarSystem:r}=this;return jl(e)===jl(n)&&r.getMarkerDay(e)===r.getMarkerDay(n)?r.getMarkerMonth(n)-r.getMarkerMonth(e)+(r.getMarkerYear(n)-r.getMarkerYear(e))*12:null}greatestWholeUnit(e,n){let r=this.diffWholeYears(e,n);return r!==null?{unit:"year",value:r}:(r=this.diffWholeMonths(e,n),r!==null?{unit:"month",value:r}:(r=r5e(e,n),r!==null?{unit:"week",value:r}:(r=hx(e,n),r!==null?{unit:"day",value:r}:(r=J4e(e,n),mS(r)?{unit:"hour",value:r}:(r=e5e(e,n),mS(r)?{unit:"minute",value:r}:(r=t5e(e,n),mS(r)?{unit:"second",value:r}:{unit:"millisecond",value:n.valueOf()-e.valueOf()}))))))}countDurationsBetween(e,n,r){let i;return r.years&&(i=this.diffWholeYears(e,n),i!==null)?i/Y4e(r):r.months&&(i=this.diffWholeMonths(e,n),i!==null)?i/Q4e(r):r.days&&(i=hx(e,n),i!==null)?i/Sf(r):(n.valueOf()-e.valueOf())/Kg(r)}startOf(e,n){return n==="year"?this.startOfYear(e):n==="month"?this.startOfMonth(e):n==="week"?this.startOfWeek(e):n==="day"?kn(e):n==="hour"?i5e(e):n==="minute"?s5e(e):n==="second"?a5e(e):null}startOfYear(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])}startOfMonth(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])}startOfWeek(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):o5e(e,this.weekDow,this.weekDoy)}format(e,n,r={}){return n.format({marker:e,timeZoneOffset:r.forcedTzo!=null?r.forcedTzo:this.offsetForMarker(e)},this)}formatRange(e,n,r,i={}){return i.isEndExclusive&&(n=Yl(n,-1)),r.formatRange({marker:e,timeZoneOffset:i.forcedStartTzo!=null?i.forcedStartTzo:this.offsetForMarker(e)},{marker:n,timeZoneOffset:i.forcedEndTzo!=null?i.forcedEndTzo:this.offsetForMarker(n)},this,i.defaultSeparator)}formatIso(e,n={}){let r=null;return n.omitTimeZoneOffset||(n.forcedTzo!=null?r=n.forcedTzo:r=this.offsetForMarker(e)),c5e(e,r,n.omitTime)}timestampToMarker(e){return this.timeZone==="local"?Li(x3(new Date(e))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(e):Li(this.namedTimeZoneImpl.timestampToArray(e))}offsetForMarker(e){return this.timeZone==="local"?-w3(El(e)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(El(e)):null}toDate(e,n){return this.timeZone==="local"?w3(El(e)):this.timeZone==="UTC"?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-this.namedTimeZoneImpl.offsetForArray(El(e))*1e3*60):new Date(e.valueOf()-(n||0))}}class kv{constructor(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}setIconOverride(e){let n,r;if(typeof e=="object"&&e){n=Object.assign({},this.iconClasses);for(r in e)n[r]=this.applyIconOverridePrefix(e[r]);this.iconClasses=n}else e===!1&&(this.iconClasses={})}applyIconOverridePrefix(e){let n=this.iconOverridePrefix;return n&&e.indexOf(n)!==0&&(e=n+e),e}getClass(e){return this.classes[e]||""}getIconClass(e,n){let r;return n&&this.rtlIconClasses?r=this.rtlIconClasses[e]||this.iconClasses[e]:r=this.iconClasses[e],r?`${this.baseIconClass} ${r}`:""}getCustomButtonIconClass(e){let n;return this.iconOverrideCustomButtonOption&&(n=e[this.iconOverrideCustomButtonOption],n)?`${this.baseIconClass} ${this.applyIconOverridePrefix(n)}`:""}}kv.prototype.classes={};kv.prototype.iconClasses={};kv.prototype.baseIconClass="";kv.prototype.iconOverridePrefix="";function vx(t){t();let e=ot.debounceRendering,n=[];function r(i){n.push(i)}for(ot.debounceRendering=r,qg(ve(z5e,{}),document.createElement("div"));n.length;)n.shift()();ot.debounceRendering=e}class z5e extends os{render(){return ve("div",{})}componentDidMount(){this.setState({})}}function iW(t){let e=c4e(t),n=e.Provider;return e.Provider=function(){let r=!this.getChildContext,i=n.apply(this,arguments);if(r){let s=[];this.shouldComponentUpdate=a=>{this.props.value!==a.value&&s.forEach(o=>{o.context=a.value,o.forceUpdate()})},this.sub=a=>{s.push(a);let o=a.componentWillUnmount;a.componentWillUnmount=()=>{s.splice(s.indexOf(a),1),o&&o.call(a)}}}return i},e}class $5e{constructor(e,n,r,i){this.execFunc=e,this.emitter=n,this.scrollTime=r,this.scrollTimeReset=i,this.handleScrollRequest=s=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},s),this.drain()},n.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const od=iW({});function F5e(t,e,n,r,i,s,a,o,c,u,d,f,h,p){return{dateEnv:i,nowManager:s,options:n,pluginHooks:o,emitter:d,dispatch:c,getCurrentData:u,calendarApi:f,viewSpec:t,viewApi:e,dateProfileGenerator:r,theme:a,isRtl:n.direction==="rtl",addResizeHandler(m){d.on("_resize",m)},removeResizeHandler(m){d.off("_resize",m)},createScrollResponder(m){return new $5e(m,d,Gt(n.scrollTime),n.scrollTimeReset)},registerInteractiveComponent:h,unregisterInteractiveComponent:p}}class ld extends os{shouldComponentUpdate(e,n){return!bS(this.props,e,this.propEquality)||!bS(this.state,n,this.stateEquality)}safeSetState(e){bS(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}ld.addPropsEquality=V5e;ld.addStateEquality=B5e;ld.contextType=od;ld.prototype.propEquality={};ld.prototype.stateEquality={};class zn extends ld{}zn.contextType=od;function V5e(t){let e=Object.create(this.prototype.propEquality);Object.assign(e,t),this.prototype.propEquality=e}function B5e(t){let e=Object.create(this.prototype.stateEquality);Object.assign(e,t),this.prototype.stateEquality=e}function qa(t,e){typeof t=="function"?t(e):t&&(t.current=e)}class vN extends zn{constructor(){super(...arguments),this.id=sd(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=e=>{const{options:n}=this.context,{generatorName:r}=this.props;(!n.customRenderingReplaces||!G2(r,n))&&this.updateElRef(e)},this.updateElRef=e=>{this.props.elRef&&qa(this.props.elRef,e)}}render(){const{props:e,context:n}=this,{options:r}=n,{customGenerator:i,defaultGenerator:s,renderProps:a}=e,o=sW(e,[],this.handleEl);let c=!1,u,d=[],f;if(i!=null){const h=typeof i=="function"?i(a,ve):i;if(h===!0)c=!0;else{const p=h&&typeof h=="object";p&&"html"in h?o.dangerouslySetInnerHTML={__html:h.html}:p&&"domNodes"in h?d=Array.prototype.slice.call(h.domNodes):(p?PU(h):typeof h!="function")?u=h:f=h}}else c=!G2(e.generatorName,r);return c&&s&&(u=s(a)),this.queuedDomNodes=d,this.currentGeneratorMeta=f,ve(e.elTag,o,u)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(e){var n;const{props:r,context:i}=this,{handleCustomRendering:s,customRenderingMetaMap:a}=i.options;if(s){const o=(n=this.currentGeneratorMeta)!==null&&n!==void 0?n:a==null?void 0:a[r.generatorName];o&&s(Object.assign(Object.assign({id:this.id,isActive:e,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:o},r),{elClasses:(r.elClasses||[]).filter(U5e)}))}}applyQueueudDomNodes(){const{queuedDomNodes:e,currentDomNodes:n}=this,r=this.base;if(!Gl(e,n)){n.forEach(cN);for(let i of e)r.appendChild(i);this.currentDomNodes=e}}}vN.addPropsEquality({elClasses:Gl,elStyle:da,elAttrs:T5e,renderProps:da});function G2(t,e){var n;return!!(e.handleCustomRendering&&t&&(!((n=e.customRenderingMetaMap)===null||n===void 0)&&n[t]))}function sW(t,e,n){const r=Object.assign(Object.assign({},t.elAttrs),{ref:n});return(t.elClasses||e)&&(r.className=(t.elClasses||[]).concat(e||[]).concat(r.className||[]).filter(Boolean).join(" ")),t.elStyle&&(r.style=t.elStyle),r}function U5e(t){return!!t}const aW=iW(0);class Ho extends os{constructor(){super(...arguments),this.InnerContent=W5e.bind(void 0,this),this.handleEl=e=>{this.el=e,this.props.elRef&&(qa(this.props.elRef,e),e&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:e}=this,n=H5e(e.classNameGenerator,e.renderProps);if(e.children){const r=sW(e,n,this.handleEl),i=e.children(this.InnerContent,e.renderProps,r);return e.elTag?ve(e.elTag,r,i):i}else return ve(vN,Object.assign(Object.assign({},e),{elRef:this.handleEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(n),renderId:this.context}))}componentDidMount(){var e,n;this.el?(n=(e=this.props).didMount)===null||n===void 0||n.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var e,n;(n=(e=this.props).willUnmount)===null||n===void 0||n.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}Ho.contextType=aW;function W5e(t,e){const n=t.props;return ve(vN,Object.assign({renderProps:n.renderProps,generatorName:n.generatorName,customGenerator:n.customGenerator,defaultGenerator:n.defaultGenerator,renderId:t.context},e))}function H5e(t,e){const n=typeof t=="function"?t(e):t||[];return typeof n=="string"?[n]:n}class C3 extends zn{render(){let{props:e,context:n}=this,{options:r}=n,i={view:n.viewApi};return ve(Ho,{elRef:e.elRef,elTag:e.elTag||"div",elAttrs:e.elAttrs,elClasses:[...oW(e.viewSpec),...e.elClasses||[]],elStyle:e.elStyle,renderProps:i,classNameGenerator:r.viewClassNames,generatorName:void 0,didMount:r.viewDidMount,willUnmount:r.viewWillUnmount},()=>e.children)}}function oW(t){return[`fc-${t.type}-view`,"fc-view"]}function q5e(t,e){let n=null,r=null;return t.start&&(n=e.createMarker(t.start)),t.end&&(r=e.createMarker(t.end)),!n&&!r||n&&r&&r<n?null:{start:n,end:r}}function T3(t,e){let n=[],{start:r}=e,i,s;for(t.sort(K5e),i=0;i<t.length;i+=1)s=t[i],s.start>r&&n.push({start:r,end:s.start}),s.end>r&&(r=s.end);return r<e.end&&n.push({start:r,end:e.end}),n}function K5e(t,e){return t.start.valueOf()-e.start.valueOf()}function _h(t,e){let{start:n,end:r}=t,i=null;return e.start!==null&&(n===null?n=e.start:n=new Date(Math.max(n.valueOf(),e.start.valueOf()))),e.end!=null&&(r===null?r=e.end:r=new Date(Math.min(r.valueOf(),e.end.valueOf()))),(n===null||r===null||n<r)&&(i={start:n,end:r}),i}function G5e(t,e){return(t.start===null?null:t.start.valueOf())===(e.start===null?null:e.start.valueOf())&&(t.end===null?null:t.end.valueOf())===(e.end===null?null:e.end.valueOf())}function yN(t,e){return(t.end===null||e.start===null||t.end>e.start)&&(t.start===null||e.end===null||t.start<e.end)}function h1(t,e){return(t.start===null||e.start!==null&&e.start>=t.start)&&(t.end===null||e.end!==null&&e.end<=t.end)}function $l(t,e){return(t.start===null||e>=t.start)&&(t.end===null||e<t.end)}function Y5e(t,e){return e.start!=null&&t<e.start?e.start:e.end!=null&&t>=e.end?new Date(e.end.valueOf()-1):t}function lW(t){let e=Math.floor(Qh(t.start,t.end))||1,n=kn(t.start),r=zr(n,e);return{start:n,end:r}}function cW(t,e=Gt(0)){let n=null,r=null;if(t.end){r=kn(t.end);let i=t.end.valueOf()-r.valueOf();i&&i>=Kg(e)&&(r=zr(r,1))}return t.start&&(n=kn(t.start),r&&r<=n&&(r=zr(n,1))),{start:n,end:r}}function cf(t,e,n,r){return r==="year"?Gt(n.diffWholeYears(t,e),"year"):r==="month"?Gt(n.diffWholeMonths(t,e),"month"):n5e(t,e)}class uW{constructor(e){this.props=e,this.initHiddenDays()}buildPrev(e,n,r){let{dateEnv:i}=this.props,s=i.subtract(i.startOf(n,e.currentRangeUnit),e.dateIncrement);return this.build(s,-1,r)}buildNext(e,n,r){let{dateEnv:i}=this.props,s=i.add(i.startOf(n,e.currentRangeUnit),e.dateIncrement);return this.build(s,1,r)}build(e,n,r=!0){let{props:i}=this,s,a,o,c,u,d;return s=this.buildValidRange(),s=this.trimHiddenDays(s),r&&(e=Y5e(e,s)),a=this.buildCurrentRangeInfo(e,n),o=/^(year|month|week|day)$/.test(a.unit),c=this.buildRenderRange(this.trimHiddenDays(a.range),a.unit,o),c=this.trimHiddenDays(c),u=c,i.showNonCurrentDates||(u=_h(u,a.range)),u=this.adjustActiveRange(u),u=_h(u,s),d=yN(a.range,s),$l(c,e)||(e=c.start),{currentDate:e,validRange:s,currentRange:a.range,currentRangeUnit:a.unit,isRangeAllDay:o,activeRange:u,renderRange:c,slotMinTime:i.slotMinTime,slotMaxTime:i.slotMaxTime,isValid:d,dateIncrement:this.buildDateIncrement(a.duration)}}buildValidRange(){let e=this.props.validRangeInput,n=typeof e=="function"?e.call(this.props.calendarApi,this.props.dateEnv.toDate(this.props.nowManager.getDateMarker())):e;return this.refineRange(n)||{start:null,end:null}}buildCurrentRangeInfo(e,n){let{props:r}=this,i=null,s=null,a=null,o;return r.duration?(i=r.duration,s=r.durationUnit,a=this.buildRangeFromDuration(e,n,i,s)):(o=this.props.dayCount)?(s="day",a=this.buildRangeFromDayCount(e,n,o)):(a=this.buildCustomVisibleRange(e))?s=r.dateEnv.greatestWholeUnit(a.start,a.end).unit:(i=this.getFallbackDuration(),s=K2(i).unit,a=this.buildRangeFromDuration(e,n,i,s)),{duration:i,unit:s,range:a}}getFallbackDuration(){return Gt({day:1})}adjustActiveRange(e){let{dateEnv:n,usesMinMaxTime:r,slotMinTime:i,slotMaxTime:s}=this.props,{start:a,end:o}=e;return r&&(Sf(i)<0&&(a=kn(a),a=n.add(a,i)),Sf(s)>1&&(o=kn(o),o=zr(o,-1),o=n.add(o,s))),{start:a,end:o}}buildRangeFromDuration(e,n,r,i){let{dateEnv:s,dateAlignment:a}=this.props,o,c,u;if(!a){let{dateIncrement:f}=this.props;f&&Kg(f)<Kg(r)?a=K2(f).unit:a=i}Sf(r)<=1&&this.isHiddenDay(o)&&(o=this.skipHiddenDays(o,n),o=kn(o));function d(){o=s.startOf(e,a),c=s.add(o,r),u={start:o,end:c}}return d(),this.trimHiddenDays(u)||(e=this.skipHiddenDays(e,n),d()),u}buildRangeFromDayCount(e,n,r){let{dateEnv:i,dateAlignment:s}=this.props,a=0,o=e,c;s&&(o=i.startOf(o,s)),o=kn(o),o=this.skipHiddenDays(o,n),c=o;do c=zr(c,1),this.isHiddenDay(c)||(a+=1);while(a<r);return{start:o,end:c}}buildCustomVisibleRange(e){let{props:n}=this,r=n.visibleRangeInput,i=typeof r=="function"?r.call(n.calendarApi,n.dateEnv.toDate(e)):r,s=this.refineRange(i);return s&&(s.start==null||s.end==null)?null:s}buildRenderRange(e,n,r){return e}buildDateIncrement(e){let{dateIncrement:n}=this.props,r;return n||((r=this.props.dateAlignment)?Gt(1,r):e||Gt({days:1}))}refineRange(e){if(e){let n=q5e(e,this.props.dateEnv);return n&&(n=cW(n)),n}return null}initHiddenDays(){let e=this.props.hiddenDays||[],n=[],r=0,i;for(this.props.weekends===!1&&e.push(0,6),i=0;i<7;i+=1)(n[i]=e.indexOf(i)!==-1)||(r+=1);if(!r)throw new Error("invalid hiddenDays");this.isHiddenDayHash=n}trimHiddenDays(e){let{start:n,end:r}=e;return n&&(n=this.skipHiddenDays(n)),r&&(r=this.skipHiddenDays(r,-1,!0)),n==null||r==null||n<r?{start:n,end:r}:null}isHiddenDay(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]}skipHiddenDays(e,n=1,r=!1){for(;this.isHiddenDayHash[(e.getUTCDay()+(r?n:0)+7)%7];)e=zr(e,n);return e}}function bN(t,e,n,r){return{instanceId:sd(),defId:t,range:e,forcedStartTzo:n??null,forcedEndTzo:r??null}}function Q5e(t,e,n,r){for(let i=0;i<r.length;i+=1){let s=r[i].parse(t,n);if(s){let{allDay:a}=t;return a==null&&(a=e,a==null&&(a=s.allDayGuess,a==null&&(a=!1))),{allDay:a,duration:s.duration,typeData:s.typeData,typeId:i}}}return null}function Bu(t,e,n){let{dateEnv:r,pluginHooks:i,options:s}=n,{defs:a,instances:o}=t;o=Vu(o,c=>!a[c.defId].recurringDef);for(let c in a){let u=a[c];if(u.recurringDef){let{duration:d}=u.recurringDef;d||(d=u.allDay?s.defaultAllDayEventDuration:s.defaultTimedEventDuration);let f=X5e(u,d,e,r,i.recurringTypes);for(let h of f){let p=bN(c,{start:h,end:r.add(h,d)});o[p.instanceId]=p}}}return{defs:a,instances:o}}function X5e(t,e,n,r,i){let a=i[t.recurringDef.typeId].expand(t.recurringDef.typeData,{start:r.subtract(n.start,e),end:n.end},r);return t.allDay&&(a=a.map(kn)),a}const u0={id:String,groupId:String,title:String,url:String,interactive:Boolean},dW={start:me,end:me,date:me,allDay:Boolean},Z5e=Object.assign(Object.assign(Object.assign({},u0),dW),{extendedProps:me});function fW(t,e,n,r,i=xN(n),s,a){let{refined:o,extra:c}=hW(t,n,i),u=e3e(e,n),d=Q5e(o,u,n.dateEnv,n.pluginHooks.recurringTypes);if(d){let h=Y2(o,c,e?e.sourceId:"",d.allDay,!!d.duration,n,s);return h.recurringDef={typeId:d.typeId,typeData:d.typeData,duration:d.duration},{def:h,instance:null}}let f=J5e(o,u,n,r);if(f){let h=Y2(o,c,e?e.sourceId:"",f.allDay,f.hasEnd,n,s),p=bN(h.defId,f.range,f.forcedStartTzo,f.forcedEndTzo);return a&&h.publicId&&a[h.publicId]&&(p.instanceId=a[h.publicId]),{def:h,instance:p}}return null}function hW(t,e,n=xN(e)){return pN(t,n)}function xN(t){return Object.assign(Object.assign(Object.assign({},yx),Z5e),t.pluginHooks.eventRefiners)}function Y2(t,e,n,r,i,s,a){let o={title:t.title||"",groupId:t.groupId||"",publicId:t.id||"",url:t.url||"",recurringDef:null,defId:(a&&t.id?a[t.id]:"")||sd(),sourceId:n,allDay:r,hasEnd:i,interactive:t.interactive,ui:bx(t,s),extendedProps:Object.assign(Object.assign({},t.extendedProps||{}),e)};for(let c of s.pluginHooks.eventDefMemberAdders)Object.assign(o,c(t));return Object.freeze(o.ui.classNames),Object.freeze(o.extendedProps),o}function J5e(t,e,n,r){let{allDay:i}=t,s,a=null,o=!1,c,u=null,d=t.start!=null?t.start:t.date;if(s=n.dateEnv.createMarkerMeta(d),s)a=s.marker;else if(!r)return null;return t.end!=null&&(c=n.dateEnv.createMarkerMeta(t.end)),i==null&&(e!=null?i=e:i=(!s||s.isTimeUnspecified)&&(!c||c.isTimeUnspecified)),i&&a&&(a=kn(a)),c&&(u=c.marker,i&&(u=kn(u)),a&&u<=a&&(u=null)),u?o=!0:r||(o=n.options.forceEventDuration||!1,u=n.dateEnv.add(a,i?n.options.defaultAllDayEventDuration:n.options.defaultTimedEventDuration)),{allDay:i,hasEnd:o,range:{start:a,end:u},forcedStartTzo:s?s.forcedTzo:null,forcedEndTzo:c?c.forcedTzo:null}}function e3e(t,e){let n=null;return t&&(n=t.defaultAllDay),n==null&&(n=e.options.defaultAllDay),n}function Gg(t,e,n,r,i,s){let a=ra(),o=xN(n);for(let c of t){let u=fW(c,e,n,r,o,i,s);u&&Q2(u,a)}return a}function Q2(t,e=ra()){return e.defs[t.def.defId]=t.def,t.instance&&(e.instances[t.instance.instanceId]=t.instance),e}function wN(t,e){let n=t.instances[e];if(n){let r=t.defs[n.defId],i=p1(t,s=>t3e(r,s));return i.defs[r.defId]=r,i.instances[n.instanceId]=n,i}return ra()}function t3e(t,e){return!!(t.groupId&&t.groupId===e.groupId)}function ra(){return{defs:{},instances:{}}}function _N(t,e){return{defs:Object.assign(Object.assign({},t.defs),e.defs),instances:Object.assign(Object.assign({},t.instances),e.instances)}}function p1(t,e){let n=Vu(t.defs,e),r=Vu(t.instances,i=>n[i.defId]);return{defs:n,instances:r}}function n3e(t,e){let{defs:n,instances:r}=t,i={},s={};for(let a in n)e.defs[a]||(i[a]=n[a]);for(let a in r)!e.instances[a]&&i[r[a].defId]&&(s[a]=r[a]);return{defs:i,instances:s}}function r3e(t,e){return Array.isArray(t)?Gg(t,null,e,!0):typeof t=="object"&&t?Gg([t],null,e,!0):t!=null?String(t):null}function P3(t){return Array.isArray(t)?t:typeof t=="string"?t.split(/\s+/):[]}const yx={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:me,overlap:me,allow:me,className:P3,classNames:P3,color:String,backgroundColor:String,borderColor:String,textColor:String},i3e={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function bx(t,e){let n=r3e(t.constraint,e);return{display:t.display||null,startEditable:t.startEditable!=null?t.startEditable:t.editable,durationEditable:t.durationEditable!=null?t.durationEditable:t.editable,constraints:n!=null?[n]:[],overlap:t.overlap!=null?t.overlap:null,allows:t.allow!=null?[t.allow]:[],backgroundColor:t.backgroundColor||t.color||"",borderColor:t.borderColor||t.color||"",textColor:t.textColor||"",classNames:(t.className||[]).concat(t.classNames||[])}}function s3e(t){return t.reduce(a3e,i3e)}function a3e(t,e){return{display:e.display!=null?e.display:t.display,startEditable:e.startEditable!=null?e.startEditable:t.startEditable,durationEditable:e.durationEditable!=null?e.durationEditable:t.durationEditable,constraints:t.constraints.concat(e.constraints),overlap:typeof e.overlap=="boolean"?e.overlap:t.overlap,allows:t.allows.concat(e.allows),backgroundColor:e.backgroundColor||t.backgroundColor,borderColor:e.borderColor||t.borderColor,textColor:e.textColor||t.textColor,classNames:t.classNames.concat(e.classNames)}}const o3e={id:String,defaultAllDay:Boolean,url:String,format:String,events:me,eventDataTransform:me,success:me,failure:me};function pW(t,e,n=mW(e)){let r;if(typeof t=="string"?r={url:t}:typeof t=="function"||Array.isArray(t)?r={events:t}:typeof t=="object"&&t&&(r=t),r){let{refined:i,extra:s}=pN(r,n),a=l3e(i,e);if(a)return{_raw:t,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:i.defaultAllDay,eventDataTransform:i.eventDataTransform,success:i.success,failure:i.failure,publicId:i.id||"",sourceId:sd(),sourceDefId:a.sourceDefId,meta:a.meta,ui:bx(i,e),extendedProps:s}}return null}function mW(t){return Object.assign(Object.assign(Object.assign({},yx),o3e),t.pluginHooks.eventSourceRefiners)}function l3e(t,e){let n=e.pluginHooks.eventSourceDefs;for(let r=n.length-1;r>=0;r-=1){let s=n[r].parseMeta(t);if(s)return{sourceDefId:r,meta:s}}return null}function c3e(t,e,n,r,i){switch(e.type){case"RECEIVE_EVENTS":return u3e(t,n[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,i);case"RESET_RAW_EVENTS":return d3e(t,n[e.sourceId],e.rawEvents,r.activeRange,i);case"ADD_EVENTS":return f3e(t,e.eventStore,r?r.activeRange:null,i);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return _N(t,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return r?Bu(t,r.activeRange,i):t;case"REMOVE_EVENTS":return n3e(t,e.eventStore);case"REMOVE_EVENT_SOURCE":return vW(t,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return p1(t,s=>!s.sourceId);case"REMOVE_ALL_EVENTS":return ra();default:return t}}function u3e(t,e,n,r,i,s){if(e&&n===e.latestFetchId){let a=Gg(gW(i,e,s),e,s);return r&&(a=Bu(a,r,s)),_N(vW(t,e.sourceId),a)}return t}function d3e(t,e,n,r,i){const{defIdMap:s,instanceIdMap:a}=p3e(t);let o=Gg(gW(n,e,i),e,i,!1,s,a);return Bu(o,r,i)}function gW(t,e,n){let r=n.options.eventDataTransform,i=e?e.eventDataTransform:null;return i&&(t=N3(t,i)),r&&(t=N3(t,r)),t}function N3(t,e){let n;if(!e)n=t;else{n=[];for(let r of t){let i=e(r);i?n.push(i):i==null&&n.push(r)}}return n}function f3e(t,e,n,r){return n&&(e=Bu(e,n,r)),_N(t,e)}function k3(t,e,n){let{defs:r}=t,i=ad(t.instances,s=>r[s.defId].allDay?s:Object.assign(Object.assign({},s),{range:{start:n.createMarker(e.toDate(s.range.start,s.forcedStartTzo)),end:n.createMarker(e.toDate(s.range.end,s.forcedEndTzo))},forcedStartTzo:n.canComputeOffset?null:s.forcedStartTzo,forcedEndTzo:n.canComputeOffset?null:s.forcedEndTzo}));return{defs:r,instances:i}}function vW(t,e){return p1(t,n=>n.sourceId!==e)}function h3e(t,e){return{defs:t.defs,instances:Vu(t.instances,n=>!e[n.instanceId])}}function p3e(t){const{defs:e,instances:n}=t,r={},i={};for(let s in e){const a=e[s],{publicId:o}=a;o&&(r[o]=s)}for(let s in n){const a=n[s],o=e[a.defId],{publicId:c}=o;c&&(i[c]=s)}return{defIdMap:r,instanceIdMap:i}}class m1{constructor(){this.handlers={},this.thisContext=null}setThisContext(e){this.thisContext=e}setOptions(e){this.options=e}on(e,n){m3e(this.handlers,e,n)}off(e,n){g3e(this.handlers,e,n)}trigger(e,...n){let r=this.handlers[e]||[],i=this.options&&this.options[e],s=[].concat(i||[],r);for(let a of s)a.apply(this.thisContext,n)}hasHandlers(e){return!!(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])}}function m3e(t,e,n){(t[e]||(t[e]=[])).push(n)}function g3e(t,e,n){n?t[e]&&(t[e]=t[e].filter(r=>r!==n)):delete t[e]}const v3e={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function y3e(t,e){return Gg(b3e(t),null,e)}function b3e(t){let e;return t===!0?e=[{}]:Array.isArray(t)?e=t.filter(n=>n.daysOfWeek):typeof t=="object"&&t?e=[t]:e=[],e=e.map(n=>Object.assign(Object.assign({},v3e),n)),e}function yW(t,e,n){n.emitter.trigger("select",Object.assign(Object.assign({},SN(t,n)),{jsEvent:e?e.origEvent:null,view:n.viewApi||n.calendarApi.view}))}function x3e(t,e){e.emitter.trigger("unselect",{jsEvent:t?t.origEvent:null,view:e.viewApi||e.calendarApi.view})}function SN(t,e){let n={};for(let r of e.pluginHooks.dateSpanTransforms)Object.assign(n,r(t,e));return Object.assign(n,M3e(t,e.dateEnv)),n}function D3(t,e,n){let{dateEnv:r,options:i}=n,s=e;return t?(s=kn(s),s=r.add(s,i.defaultAllDayEventDuration)):s=r.add(s,i.defaultTimedEventDuration),s}function AN(t,e,n,r){let i=xx(t.defs,e),s=ra();for(let a in t.defs){let o=t.defs[a];s.defs[a]=w3e(o,i[a],n,r)}for(let a in t.instances){let o=t.instances[a],c=s.defs[o.defId];s.instances[a]=_3e(o,c,i[o.defId],n,r)}return s}function w3e(t,e,n,r){let i=n.standardProps||{};i.hasEnd==null&&e.durationEditable&&(n.startDelta||n.endDelta)&&(i.hasEnd=!0);let s=Object.assign(Object.assign(Object.assign({},t),i),{ui:Object.assign(Object.assign({},t.ui),i.ui)});n.extendedProps&&(s.extendedProps=Object.assign(Object.assign({},s.extendedProps),n.extendedProps));for(let a of r.pluginHooks.eventDefMutationAppliers)a(s,n,r);return!s.hasEnd&&r.options.forceEventDuration&&(s.hasEnd=!0),s}function _3e(t,e,n,r,i){let{dateEnv:s}=i,a=r.standardProps&&r.standardProps.allDay===!0,o=r.standardProps&&r.standardProps.hasEnd===!1,c=Object.assign({},t);return a&&(c.range=lW(c.range)),r.datesDelta&&n.startEditable&&(c.range={start:s.add(c.range.start,r.datesDelta),end:s.add(c.range.end,r.datesDelta)}),r.startDelta&&n.durationEditable&&(c.range={start:s.add(c.range.start,r.startDelta),end:c.range.end}),r.endDelta&&n.durationEditable&&(c.range={start:c.range.start,end:s.add(c.range.end,r.endDelta)}),o&&(c.range={start:c.range.start,end:D3(e.allDay,c.range.start,i)}),e.allDay&&(c.range={start:kn(c.range.start),end:kn(c.range.end)}),c.range.end<c.range.start&&(c.range.end=D3(e.allDay,c.range.start,i)),c}class zd{constructor(e,n){this.context=e,this.internalEventSource=n}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class Dn{constructor(e,n,r){this._context=e,this._def=n,this._instance=r||null}setProp(e,n){if(e in dW)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(e==="id")n=u0[e](n),this.mutate({standardProps:{publicId:n}});else if(e in u0)n=u0[e](n),this.mutate({standardProps:{[e]:n}});else if(e in yx){let r=yx[e](n);e==="color"?r={backgroundColor:n,borderColor:n}:e==="editable"?r={startEditable:n,durationEditable:n}:r={[e]:n},this.mutate({standardProps:{ui:r}})}else console.warn(`Could not set prop '${e}'. Use setExtendedProp instead.`)}setExtendedProp(e,n){this.mutate({extendedProps:{[e]:n}})}setStart(e,n={}){let{dateEnv:r}=this._context,i=r.createMarker(e);if(i&&this._instance){let s=this._instance.range,a=cf(s.start,i,r,n.granularity);n.maintainDuration?this.mutate({datesDelta:a}):this.mutate({startDelta:a})}}setEnd(e,n={}){let{dateEnv:r}=this._context,i;if(!(e!=null&&(i=r.createMarker(e),!i))&&this._instance)if(i){let s=cf(this._instance.range.end,i,r,n.granularity);this.mutate({endDelta:s})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(e,n,r={}){let{dateEnv:i}=this._context,s={allDay:r.allDay},a=i.createMarker(e),o;if(a&&!(n!=null&&(o=i.createMarker(n),!o))&&this._instance){let c=this._instance.range;r.allDay===!0&&(c=lW(c));let u=cf(c.start,a,i,r.granularity);if(o){let d=cf(c.end,o,i,r.granularity);K4e(u,d)?this.mutate({datesDelta:u,standardProps:s}):this.mutate({startDelta:u,endDelta:d,standardProps:s})}else s.hasEnd=!1,this.mutate({datesDelta:u,standardProps:s})}}moveStart(e){let n=Gt(e);n&&this.mutate({startDelta:n})}moveEnd(e){let n=Gt(e);n&&this.mutate({endDelta:n})}moveDates(e){let n=Gt(e);n&&this.mutate({datesDelta:n})}setAllDay(e,n={}){let r={allDay:e},{maintainDuration:i}=n;i==null&&(i=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(r.hasEnd=i),this.mutate({standardProps:r})}formatRange(e){let{dateEnv:n}=this._context,r=this._instance,i=Rr(e);return this._def.hasEnd?n.formatRange(r.range.start,r.range.end,i,{forcedStartTzo:r.forcedStartTzo,forcedEndTzo:r.forcedEndTzo}):n.format(r.range.start,i,{forcedTzo:r.forcedStartTzo})}mutate(e){let n=this._instance;if(n){let r=this._def,i=this._context,{eventStore:s}=i.getCurrentData(),a=wN(s,n.instanceId);a=AN(a,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,i);let c=new Dn(i,r,n);this._def=a.defs[r.defId],this._instance=a.instances[n.instanceId],i.dispatch({type:"MERGE_EVENTS",eventStore:a}),i.emitter.trigger("eventChange",{oldEvent:c,event:this,relatedEvents:bu(a,i,n),revert(){i.dispatch({type:"RESET_EVENTS",eventStore:s})}})}}remove(){let e=this._context,n=bW(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:n}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){e.dispatch({type:"MERGE_EVENTS",eventStore:n})}})}get source(){let{sourceId:e}=this._def;return e?new zd(this._context,this._context.getCurrentData().eventSources[e]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""}get endStr(){let e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(e={}){let n=this._def,{ui:r}=n,{startStr:i,endStr:s}=this,a={allDay:n.allDay};return n.title&&(a.title=n.title),i&&(a.start=i),s&&(a.end=s),n.publicId&&(a.id=n.publicId),n.groupId&&(a.groupId=n.groupId),n.url&&(a.url=n.url),r.display&&r.display!=="auto"&&(a.display=r.display),e.collapseColor&&r.backgroundColor&&r.backgroundColor===r.borderColor?a.color=r.backgroundColor:(r.backgroundColor&&(a.backgroundColor=r.backgroundColor),r.borderColor&&(a.borderColor=r.borderColor)),r.textColor&&(a.textColor=r.textColor),r.classNames.length&&(a.classNames=r.classNames),Object.keys(n.extendedProps).length&&(e.collapseExtendedProps?Object.assign(a,n.extendedProps):a.extendedProps=n.extendedProps),a}toJSON(){return this.toPlainObject()}}function bW(t){let e=t._def,n=t._instance;return{defs:{[e.defId]:e},instances:n?{[n.instanceId]:n}:{}}}function bu(t,e,n){let{defs:r,instances:i}=t,s=[],a=n?n.instanceId:"";for(let o in i){let c=i[o],u=r[c.defId];c.instanceId!==a&&s.push(new Dn(e,u,c))}return s}function I3(t,e,n,r){let i={},s={},a={},o=[],c=[],u=xx(t.defs,e);for(let d in t.defs){let f=t.defs[d];u[f.defId].display==="inverse-background"&&(f.groupId?(i[f.groupId]=[],a[f.groupId]||(a[f.groupId]=f)):s[d]=[])}for(let d in t.instances){let f=t.instances[d],h=t.defs[f.defId],p=u[h.defId],m=f.range,g=!h.allDay&&r?cW(m,r):m,b=_h(g,n);b&&(p.display==="inverse-background"?h.groupId?i[h.groupId].push(b):s[f.defId].push(b):p.display!=="none"&&(p.display==="background"?o:c).push({def:h,ui:p,instance:f,range:b,isStart:g.start&&g.start.valueOf()===b.start.valueOf(),isEnd:g.end&&g.end.valueOf()===b.end.valueOf()}))}for(let d in i){let f=i[d],h=T3(f,n);for(let p of h){let m=a[d],g=u[m.defId];o.push({def:m,ui:g,instance:null,range:p,isStart:!1,isEnd:!1})}}for(let d in s){let f=s[d],h=T3(f,n);for(let p of h)o.push({def:t.defs[d],ui:u[d],instance:null,range:p,isStart:!1,isEnd:!1})}return{bg:o,fg:c}}function O3(t,e){t.fcSeg=e}function Sh(t){return t.fcSeg||t.parentNode.fcSeg||null}function xx(t,e){return ad(t,n=>xW(n,e))}function xW(t,e){let n=[];return e[""]&&n.push(e[""]),e[t.defId]&&n.push(e[t.defId]),n.push(t.ui),s3e(n)}function S3e(t,e){let n=t.map(A3e);return n.sort((r,i)=>F4e(r,i,e)),n.map(r=>r._seg)}function A3e(t){let{eventRange:e}=t,n=e.def,r=e.instance?e.instance.range:e.range,i=r.start?r.start.valueOf():0,s=r.end?r.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},n.extendedProps),n),{id:n.publicId,start:i,end:s,duration:s-i,allDay:Number(n.allDay),_seg:t})}function E3e(t,e){let{pluginHooks:n}=e,r=n.isDraggableTransformers,{def:i,ui:s}=t.eventRange,a=s.startEditable;for(let o of r)a=o(a,i,s,e);return a}function j3e(t,e){return t.isStart&&t.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function C3e(t,e){return t.isEnd&&t.eventRange.ui.durationEditable}function wW(t,e,n,r,i,s,a){let{dateEnv:o,options:c}=n,{displayEventTime:u,displayEventEnd:d}=c,f=t.eventRange.def,h=t.eventRange.instance;u==null&&(u=r!==!1),d==null&&(d=i!==!1);let p=h.range.start,m=h.range.end,g=t.start||t.eventRange.range.start,b=t.end||t.eventRange.range.end,x=kn(p).valueOf()===kn(g).valueOf(),w=kn(Yl(m,-1)).valueOf()===kn(Yl(b,-1)).valueOf();return u&&!f.allDay&&(x||w)?(g=x?p:g,b=w?m:b,d&&f.hasEnd?o.formatRange(g,b,e,{forcedStartTzo:h.forcedStartTzo,forcedEndTzo:h.forcedEndTzo}):o.format(g,e,{forcedTzo:h.forcedStartTzo})):""}function Em(t,e,n){let r=t.eventRange.range;return{isPast:r.end<=e.start,isFuture:r.start>=e.end,isToday:e&&$l(e,r.start)}}function T3e(t){let e=["fc-event"];return t.isMirror&&e.push("fc-event-mirror"),t.isDraggable&&e.push("fc-event-draggable"),(t.isStartResizable||t.isEndResizable)&&e.push("fc-event-resizable"),t.isDragging&&e.push("fc-event-dragging"),t.isResizing&&e.push("fc-event-resizing"),t.isSelected&&e.push("fc-event-selected"),t.isStart&&e.push("fc-event-start"),t.isEnd&&e.push("fc-event-end"),t.isPast&&e.push("fc-event-past"),t.isToday&&e.push("fc-event-today"),t.isFuture&&e.push("fc-event-future"),e}function P3e(t){return t.instance?t.instance.instanceId:`${t.def.defId}:${t.range.start.toISOString()}`}function _W(t,e){let{def:n,instance:r}=t.eventRange,{url:i}=n;if(i)return{href:i};let{emitter:s,options:a}=e,{eventInteractive:o}=a;return o==null&&(o=n.interactive,o==null&&(o=!!s.hasHandlers("eventClick"))),o?eW(c=>{s.trigger("eventClick",{el:c.target,event:new Dn(e,n,r),jsEvent:c,view:e.viewApi})}):{}}const N3e={start:me,end:me,allDay:Boolean};function k3e(t,e,n){let r=D3e(t,e),{range:i}=r;if(!i.start)return null;if(!i.end){if(n==null)return null;i.end=e.add(i.start,n)}return r}function D3e(t,e){let{refined:n,extra:r}=pN(t,N3e),i=n.start?e.createMarkerMeta(n.start):null,s=n.end?e.createMarkerMeta(n.end):null,{allDay:a}=n;return a==null&&(a=i&&i.isTimeUnspecified&&(!s||s.isTimeUnspecified)),Object.assign({range:{start:i?i.marker:null,end:s?s.marker:null},allDay:a},r)}function I3e(t,e){return G5e(t.range,e.range)&&t.allDay===e.allDay&&O3e(t,e)}function O3e(t,e){for(let n in e)if(n!=="range"&&n!=="allDay"&&t[n]!==e[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}function M3e(t,e){return Object.assign(Object.assign({},AW(t.range,e,t.allDay)),{allDay:t.allDay})}function SW(t,e,n){return Object.assign(Object.assign({},AW(t,e,n)),{timeZone:e.timeZone})}function AW(t,e,n){return{start:e.toDate(t.start),end:e.toDate(t.end),startStr:e.formatIso(t.start,{omitTime:n}),endStr:e.formatIso(t.end,{omitTime:n})}}function R3e(t,e,n){let r=hW({editable:!1},n),i=Y2(r.refined,r.extra,"",t.allDay,!0,n);return{def:i,ui:xW(i,e),instance:bN(i.defId,t.range),range:t.range,isStart:!0,isEnd:!0}}function L3e(t,e,n){let r=!1,i=function(o){r||(r=!0,e(o))},s=function(o){r||(r=!0,n(o))},a=t(i,s);a&&typeof a.then=="function"&&a.then(i,s)}class M3 extends Error{constructor(e,n){super(e),this.response=n}}function z3e(t,e,n){t=t.toUpperCase();const r={method:t};return t==="GET"?e+=(e.indexOf("?")===-1?"?":"&")+new URLSearchParams(n):(r.body=new URLSearchParams(n),r.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(e,r).then(i=>{if(i.ok)return i.json().then(s=>[s,i],()=>{throw new M3("Failure parsing JSON",i)});throw new M3("Request failed",i)})}let xS;function EW(){return xS==null&&(xS=$3e()),xS}function $3e(){if(typeof document>"u")return!0;let t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.innerHTML="<table><tr><td><div></div></td></tr></table>",t.querySelector("table").style.height="100px",t.querySelector("div").style.height="100%",document.body.appendChild(t);let n=t.querySelector("div").offsetHeight>0;return document.body.removeChild(t),n}class F3e extends zn{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{vx(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{vx(()=>{this.setState({forPrint:!1})})}}render(){let{props:e}=this,{options:n}=e,{forPrint:r}=this.state,i=r||n.height==="auto"||n.contentHeight==="auto",s=!i&&n.height!=null?n.height:"",a=["fc",r?"fc-media-print":"fc-media-screen",`fc-direction-${n.direction}`,e.theme.getClass("root")];return EW()||a.push("fc-liquid-hack"),e.children(a,s,i,r)}componentDidMount(){let{emitter:e}=this.props;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:e}=this.props;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)}}class Xh{constructor(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}destroy(){}}function V3e(t,e){return{component:t,el:e.el,useEventCenter:e.useEventCenter!=null?e.useEventCenter:!0,isHitComboAllowed:e.isHitComboAllowed||null}}function EN(t){return{[t.component.uid]:t}}const X2={};class g1 extends os{constructor(e,n){super(e,n),this.handleRefresh=()=>{let r=this.computeTiming();r.state.nowDate.valueOf()!==this.state.nowDate.valueOf()&&this.setState(r.state),this.clearTimeout(),this.setTimeout(r.waitMs)},this.handleVisibilityChange=()=>{document.hidden||this.handleRefresh()},this.state=this.computeTiming().state}render(){let{props:e,state:n}=this;return e.children(n.nowDate,n.todayRange)}componentDidMount(){this.setTimeout(),this.context.nowManager.addResetListener(this.handleRefresh),document.addEventListener("visibilitychange",this.handleVisibilityChange)}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout(),this.context.nowManager.removeResetListener(this.handleRefresh),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}computeTiming(){let{props:e,context:n}=this,r=n.nowManager.getDateMarker(),{nowIndicatorSnap:i}=n.options;i==="auto"&&(i=/year|month|week|day/.test(e.unit)||(e.unitValue||1)===1);let s,a;return i?(s=n.dateEnv.startOf(r,e.unit),a=n.dateEnv.add(s,Gt(1,e.unit)).valueOf()-r.valueOf()):(s=r,a=1e3*60),a=Math.min(1e3*60*60*24,a),{state:{nowDate:s,todayRange:B3e(s)},waitMs:a}}setTimeout(e=this.computeTiming().waitMs){this.timeoutId=setTimeout(()=>{const n=this.computeTiming();this.setState(n.state,()=>{this.setTimeout(n.waitMs)})},e)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}g1.contextType=od;function B3e(t){let e=kn(t),n=zr(e,1);return{start:e,end:n}}class U3e{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(e){this.currentDataManager.dispatch(e)}get view(){return this.getCurrentData().viewApi}batchRendering(e){e()}updateSize(){this.trigger("_resize",!0)}setOption(e,n){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:n})}getOption(e){return this.currentDataManager.currentCalendarOptionsInput[e]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(e,n){let{currentDataManager:r}=this;r.currentCalendarOptionsRefiners[e]?r.emitter.on(e,n):console.warn(`Unknown listener name '${e}'`)}off(e,n){this.currentDataManager.emitter.off(e,n)}trigger(e,...n){this.currentDataManager.emitter.trigger(e,...n)}changeView(e,n){this.batchRendering(()=>{if(this.unselect(),n)if(n.start&&n.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:n});else{let{dateEnv:r}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:r.createMarker(n)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})})}zoomTo(e,n){let r=this.getCurrentData(),i;n=n||"day",i=r.viewSpecs[n]||this.getUnitViewSpec(n),this.unselect(),i?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:i.type,dateMarker:e}):this.dispatch({type:"CHANGE_DATE",dateMarker:e})}getUnitViewSpec(e){let{viewSpecs:n,toolbarConfig:r}=this.getCurrentData(),i=[].concat(r.header?r.header.viewsWithButtons:[],r.footer?r.footer.viewsWithButtons:[]),s,a;for(let o in n)i.push(o);for(s=0;s<i.length;s+=1)if(a=n[i[s]],a&&a.singleUnit===e)return a;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})}nextYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})}today(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.nowManager.getDateMarker()})}gotoDate(e){let n=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.createMarker(e)})}incrementDate(e){let n=this.getCurrentData(),r=Gt(e);r&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.add(n.currentDate,r)}))}getDate(){let e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)}formatDate(e,n){let{dateEnv:r}=this.getCurrentData();return r.format(r.createMarker(e),Rr(n))}formatRange(e,n,r){let{dateEnv:i}=this.getCurrentData();return i.formatRange(i.createMarker(e),i.createMarker(n),Rr(r),r)}formatIso(e,n){let{dateEnv:r}=this.getCurrentData();return r.formatIso(r.createMarker(e),{omitTime:n})}select(e,n){let r;n==null?e.start!=null?r=e:r={start:e,end:null}:r={start:e,end:n};let i=this.getCurrentData(),s=k3e(r,i.dateEnv,Gt({days:1}));s&&(this.dispatch({type:"SELECT_DATES",selection:s}),yW(s,null,i))}unselect(e){let n=this.getCurrentData();n.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),x3e(e,n))}addEvent(e,n){if(e instanceof Dn){let a=e._def,o=e._instance;return this.getCurrentData().eventStore.defs[a.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:Q2({def:a,instance:o})}),this.triggerEventAdd(e)),e}let r=this.getCurrentData(),i;if(n instanceof zd)i=n.internalEventSource;else if(typeof n=="boolean")n&&([i]=gN(r.eventSources));else if(n!=null){let a=this.getEventSourceById(n);if(!a)return console.warn(`Could not find an event source with ID "${n}"`),null;i=a.internalEventSource}let s=fW(e,i,r,!1);if(s){let a=new Dn(r,s.def,s.def.recurringDef?null:s.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:Q2(s)}),this.triggerEventAdd(a),a}return null}triggerEventAdd(e){let{emitter:n}=this.getCurrentData();n.trigger("eventAdd",{event:e,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:bW(e)})}})}getEventById(e){let n=this.getCurrentData(),{defs:r,instances:i}=n.eventStore;e=String(e);for(let s in r){let a=r[s];if(a.publicId===e){if(a.recurringDef)return new Dn(n,a,null);for(let o in i){let c=i[o];if(c.defId===a.defId)return new Dn(n,a,c)}}}return null}getEvents(){let e=this.getCurrentData();return bu(e.eventStore,e)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let e=this.getCurrentData(),n=e.eventSources,r=[];for(let i in n)r.push(new zd(e,n[i]));return r}getEventSourceById(e){let n=this.getCurrentData(),r=n.eventSources;e=String(e);for(let i in r)if(r[i].publicId===e)return new zd(n,r[i]);return null}addEventSource(e){let n=this.getCurrentData();if(e instanceof zd)return n.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;let r=pW(e,n);return r?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[r]}),new zd(n,r)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(e){let n=Gt(e);n&&this.trigger("_scrollRequest",{time:n})}}function W3e(t,e){return t.left>=e.left&&t.left<e.right&&t.top>=e.top&&t.top<e.bottom}function jW(t,e){let n={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)};return n.left<n.right&&n.top<n.bottom?n:!1}function H3e(t,e){return{left:Math.min(Math.max(t.left,e.left),e.right),top:Math.min(Math.max(t.top,e.top),e.bottom)}}function q3e(t){return{left:(t.left+t.right)/2,top:(t.top+t.bottom)/2}}function K3e(t,e){return{left:t.left-e.left,top:t.top-e.top}}function CW(t,e,n,r){return{dow:t.getUTCDay(),isDisabled:!!(r&&(!r.activeRange||!$l(r.activeRange,t))),isOther:!!(r&&!$l(r.currentRange,t)),isToday:!!(e&&$l(e,t)),isPast:!!(e&&t<e.start),isFuture:!!(e&&t>=e.end)}}function jN(t,e){let n=["fc-day",`fc-day-${X4e[t.dow]}`];return t.isDisabled?n.push("fc-day-disabled"):(t.isToday&&(n.push("fc-day-today"),n.push(e.getClass("today"))),t.isPast&&n.push("fc-day-past"),t.isFuture&&n.push("fc-day-future"),t.isOther&&n.push("fc-day-other")),n}const G3e=Rr({year:"numeric",month:"long",day:"numeric"}),Y3e=Rr({week:"long"});function Z2(t,e,n="day",r=!0){const{dateEnv:i,options:s,calendarApi:a}=t;let o=i.format(e,n==="week"?Y3e:G3e);if(s.navLinks){let c=i.toDate(e);const u=d=>{let f=n==="day"?s.navLinkDayClick:n==="week"?s.navLinkWeekClick:null;typeof f=="function"?f.call(a,i.toDate(e),d):(typeof f=="string"&&(n=f),a.zoomTo(e,n))};return Object.assign({title:Sm(s.navLinkHint,[o,c],o),"data-navlink":""},r?JU(u):{onClick:u})}return{"aria-label":o}}let wS=null;function Q3e(){return wS===null&&(wS=X3e()),wS}function X3e(){let t=document.createElement("div");_m(t,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),t.innerHTML="<div></div>",document.body.appendChild(t);let n=t.firstChild.getBoundingClientRect().left>t.getBoundingClientRect().left;return cN(t),n}let _S;function Z3e(){return _S||(_S=J3e()),_S}function J3e(){let t=document.createElement("div");t.style.overflow="scroll",t.style.position="absolute",t.style.top="-9999px",t.style.left="-9999px",document.body.appendChild(t);let e=TW(t);return document.body.removeChild(t),e}function TW(t){return{x:t.offsetHeight-t.clientHeight,y:t.offsetWidth-t.clientWidth}}function eLe(t,e=!1){let n=window.getComputedStyle(t),r=parseInt(n.borderLeftWidth,10)||0,i=parseInt(n.borderRightWidth,10)||0,s=parseInt(n.borderTopWidth,10)||0,a=parseInt(n.borderBottomWidth,10)||0,o=TW(t),c=o.y-r-i,u=o.x-s-a,d={borderLeft:r,borderRight:i,borderTop:s,borderBottom:a,scrollbarBottom:u,scrollbarLeft:0,scrollbarRight:0};return Q3e()&&n.direction==="rtl"?d.scrollbarLeft=c:d.scrollbarRight=c,e&&(d.paddingLeft=parseInt(n.paddingLeft,10)||0,d.paddingRight=parseInt(n.paddingRight,10)||0,d.paddingTop=parseInt(n.paddingTop,10)||0,d.paddingBottom=parseInt(n.paddingBottom,10)||0),d}function tLe(t,e=!1,n){let r=CN(t),i=eLe(t,e),s={left:r.left+i.borderLeft+i.scrollbarLeft,right:r.right-i.borderRight-i.scrollbarRight,top:r.top+i.borderTop,bottom:r.bottom-i.borderBottom-i.scrollbarBottom};return e&&(s.left+=i.paddingLeft,s.right-=i.paddingRight,s.top+=i.paddingTop,s.bottom-=i.paddingBottom),s}function CN(t){let e=t.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY,right:e.right+window.scrollX,bottom:e.bottom+window.scrollY}}function nLe(t){let e=PW(t),n=t.getBoundingClientRect();for(let r of e){let i=jW(n,r.getBoundingClientRect());if(i)n=i;else return null}return n}function PW(t){let e=[];for(;t instanceof HTMLElement;){let n=window.getComputedStyle(t);if(n.position==="fixed")break;/(auto|scroll)/.test(n.overflow+n.overflowY+n.overflowX)&&e.push(t),t=t.parentNode}return e}class wx{constructor(e,n,r,i){this.els=n;let s=this.originClientRect=e.getBoundingClientRect();r&&this.buildElHorizontals(s.left),i&&this.buildElVerticals(s.top)}buildElHorizontals(e){let n=[],r=[];for(let i of this.els){let s=i.getBoundingClientRect();n.push(s.left-e),r.push(s.right-e)}this.lefts=n,this.rights=r}buildElVerticals(e){let n=[],r=[];for(let i of this.els){let s=i.getBoundingClientRect();n.push(s.top-e),r.push(s.bottom-e)}this.tops=n,this.bottoms=r}leftToIndex(e){let{lefts:n,rights:r}=this,i=n.length,s;for(s=0;s<i;s+=1)if(e>=n[s]&&e<r[s])return s}topToIndex(e){let{tops:n,bottoms:r}=this,i=n.length,s;for(s=0;s<i;s+=1)if(e>=n[s]&&e<r[s])return s}getWidth(e){return this.rights[e]-this.lefts[e]}getHeight(e){return this.bottoms[e]-this.tops[e]}similarTo(e){return Dy(this.tops||[],e.tops||[])&&Dy(this.bottoms||[],e.bottoms||[])&&Dy(this.lefts||[],e.lefts||[])&&Dy(this.rights||[],e.rights||[])}}function Dy(t,e){const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(Math.round(t[r])!==Math.round(e[r]))return!1;return!0}class TN{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class rLe extends TN{constructor(e){super(),this.el=e}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(e){this.el.scrollTop=e}setScrollLeft(e){this.el.scrollLeft=e}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class iLe extends TN{getScrollTop(){return window.scrollY}getScrollLeft(){return window.scrollX}setScrollTop(e){window.scroll(window.scrollX,e)}setScrollLeft(e){window.scroll(e,window.scrollY)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class cd extends zn{constructor(){super(...arguments),this.uid=sd()}prepareHits(){}queryHit(e,n,r,i){return null}isValidSegDownEl(e){return!this.props.eventDrag&&!this.props.eventResize&&!pi(e,".fc-event-mirror")}isValidDateDownEl(e){return!pi(e,".fc-event:not(.fc-bg-event)")&&!pi(e,".fc-more-link")&&!pi(e,"a[data-navlink]")&&!pi(e,".fc-popover")}}class sLe{constructor(e=n=>n.thickness||1){this.getEntryThickness=e,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(e){let n=[];for(let r of e)this.insertEntry(r,n);return n}insertEntry(e,n){let r=this.findInsertion(e);this.isInsertionValid(r,e)?this.insertEntryAt(e,r):this.handleInvalidInsertion(r,e,n)}isInsertionValid(e,n){return(this.maxCoord===-1||e.levelCoord+this.getEntryThickness(n)<=this.maxCoord)&&(this.maxStackCnt===-1||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,n,r){if(this.allowReslicing&&e.touchingEntry){const i=Object.assign(Object.assign({},n),{span:NW(n.span,e.touchingEntry.span)});r.push(i),this.splitEntry(n,e.touchingEntry,r)}else r.push(n)}splitEntry(e,n,r){let i=e.span,s=n.span;i.start<s.start&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:i.start,end:s.start}},r),i.end>s.end&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:s.end,end:i.end}},r)}insertEntryAt(e,n){let{entriesByLevel:r,levelCoords:i}=this;n.lateral===-1?(SS(i,n.level,n.levelCoord),SS(r,n.level,[e])):SS(r[n.level],n.lateral,e),this.stackCnts[jm(e)]=n.stackCnt}findInsertion(e){let{levelCoords:n,entriesByLevel:r,strictOrder:i,stackCnts:s}=this,a=n.length,o=0,c=-1,u=-1,d=null,f=0;for(let m=0;m<a;m+=1){const g=n[m];if(!i&&g>=o+this.getEntryThickness(e))break;let b=r[m],x,w=L3(b,e.span.start,R3),_=w[0]+w[1];for(;(x=b[_])&&x.span.start<e.span.end;){let E=g+this.getEntryThickness(x);E>o&&(o=E,d=x,c=m,u=_),E===o&&(f=Math.max(f,s[jm(x)]+1)),_+=1}}let h=0;if(d)for(h=c+1;h<a&&n[h]<o;)h+=1;let p=-1;return h<a&&n[h]===o&&(p=L3(r[h],e.span.end,R3)[0]),{touchingLevel:c,touchingLateral:u,touchingEntry:d,stackCnt:f,levelCoord:o,level:h,lateral:p}}toRects(){let{entriesByLevel:e,levelCoords:n}=this,r=e.length,i=[];for(let s=0;s<r;s+=1){let a=e[s],o=n[s];for(let c of a)i.push(Object.assign(Object.assign({},c),{thickness:this.getEntryThickness(c),levelCoord:o}))}return i}}function R3(t){return t.span.end}function jm(t){return t.index+":"+t.span.start}function NW(t,e){let n=Math.max(t.start,e.start),r=Math.min(t.end,e.end);return n<r?{start:n,end:r}:null}function SS(t,e,n){t.splice(e,0,n)}function L3(t,e,n){let r=0,i=t.length;if(!i||e<n(t[r]))return[0,0];if(e>n(t[i-1]))return[i,0];for(;r<i;){let s=Math.floor(r+(i-r)/2),a=n(t[s]);if(e<a)i=s;else if(e>a)r=s+1;else return[s,1]}return[r,0]}class aLe{constructor(e,n){this.emitter=new m1}destroy(){}setMirrorIsVisible(e){}setMirrorNeedsRevert(e){}setAutoScrollEnabled(e){}}const PN={};function oLe(t,e){return!t||e>10?Rr({weekday:"short"}):e>1?Rr({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):Rr({weekday:"long"})}const kW="fc-col-header-cell";function DW(t){return t.text}class lLe extends zn{render(){let{dateEnv:e,options:n,theme:r,viewApi:i}=this.context,{props:s}=this,{date:a,dateProfile:o}=s,c=CW(a,s.todayRange,null,o),u=[kW].concat(jN(c,r)),d=e.format(a,s.dayHeaderFormat),f=!c.isDisabled&&s.colCnt>1?Z2(this.context,a):{},h=e.toDate(a);e.namedTimeZoneImpl&&(h=Yl(h,36e5));let p=Object.assign(Object.assign(Object.assign({date:h,view:i},s.extraRenderProps),{text:d}),c);return ve(Ho,{elTag:"th",elClasses:u,elAttrs:Object.assign({role:"columnheader",colSpan:s.colSpan,"data-date":c.isDisabled?void 0:fN(a)},s.extraDataAttrs),renderProps:p,generatorName:"dayHeaderContent",customGenerator:n.dayHeaderContent,defaultGenerator:DW,classNameGenerator:n.dayHeaderClassNames,didMount:n.dayHeaderDidMount,willUnmount:n.dayHeaderWillUnmount},m=>ve("div",{className:"fc-scrollgrid-sync-inner"},!c.isDisabled&&ve(m,{elTag:"a",elAttrs:f,elClasses:["fc-col-header-cell-cushion",s.isSticky&&"fc-sticky"]})))}}const cLe=Rr({weekday:"long"});class uLe extends zn{render(){let{props:e}=this,{dateEnv:n,theme:r,viewApi:i,options:s}=this.context,a=zr(new Date(2592e5),e.dow),o={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},c=n.format(a,e.dayHeaderFormat),u=Object.assign(Object.assign(Object.assign(Object.assign({date:a},o),{view:i}),e.extraRenderProps),{text:c});return ve(Ho,{elTag:"th",elClasses:[kW,...jN(o,r),...e.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:e.colSpan},e.extraDataAttrs),renderProps:u,generatorName:"dayHeaderContent",customGenerator:s.dayHeaderContent,defaultGenerator:DW,classNameGenerator:s.dayHeaderClassNames,didMount:s.dayHeaderDidMount,willUnmount:s.dayHeaderWillUnmount},d=>ve("div",{className:"fc-scrollgrid-sync-inner"},ve(d,{elTag:"a",elClasses:["fc-col-header-cell-cushion",e.isSticky&&"fc-sticky"],elAttrs:{"aria-label":n.format(a,cLe)}})))}}class dLe extends zn{constructor(){super(...arguments),this.createDayHeaderFormatter=Ht(fLe)}render(){let{context:e}=this,{dates:n,dateProfile:r,datesRepDistinctDays:i,renderIntro:s}=this.props,a=this.createDayHeaderFormatter(e.options.dayHeaderFormat,i,n.length);return ve(g1,{unit:"day"},(o,c)=>ve("tr",{role:"row"},s&&s("day"),n.map(u=>i?ve(lLe,{key:u.toISOString(),date:u,dateProfile:r,todayRange:c,colCnt:n.length,dayHeaderFormat:a}):ve(uLe,{key:u.getUTCDay(),dow:u.getUTCDay(),dayHeaderFormat:a}))))}}function fLe(t,e,n){return t||oLe(e,n)}class hLe{constructor(e,n){let r=e.start,{end:i}=e,s=[],a=[],o=-1;for(;r<i;)n.isHiddenDay(r)?s.push(o+.5):(o+=1,s.push(o),a.push(r)),r=zr(r,1);this.dates=a,this.indices=s,this.cnt=a.length}sliceRange(e){let n=this.getDateDayIndex(e.start),r=this.getDateDayIndex(zr(e.end,-1)),i=Math.max(0,n),s=Math.min(this.cnt-1,r);return i=Math.ceil(i),s=Math.floor(s),i<=s?{firstIndex:i,lastIndex:s,isStart:n===i,isEnd:r===s}:null}getDateDayIndex(e){let{indices:n}=this,r=Math.floor(Qh(this.dates[0],e));return r<0?n[0]-1:r>=n.length?n[n.length-1]+1:n[r]}}class pLe{constructor(e,n){let{dates:r}=e,i,s,a;if(n){for(s=r[0].getUTCDay(),i=1;i<r.length&&r[i].getUTCDay()!==s;i+=1);a=Math.ceil(r.length/i)}else a=1,i=r.length;this.rowCnt=a,this.colCnt=i,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let e=[];for(let n=0;n<this.rowCnt;n+=1){let r=[];for(let i=0;i<this.colCnt;i+=1)r.push(this.buildCell(n,i));e.push(r)}return e}buildCell(e,n){let r=this.daySeries.dates[e*this.colCnt+n];return{key:r.toISOString(),date:r}}buildHeaderDates(){let e=[];for(let n=0;n<this.colCnt;n+=1)e.push(this.cells[0][n].date);return e}sliceRange(e){let{colCnt:n}=this,r=this.daySeries.sliceRange(e),i=[];if(r){let{firstIndex:s,lastIndex:a}=r,o=s;for(;o<=a;){let c=Math.floor(o/n),u=Math.min((c+1)*n,a+1);i.push({row:c,firstCol:o%n,lastCol:(u-1)%n,isStart:r.isStart&&o===s,isEnd:r.isEnd&&u-1===a}),o=u}}return i}}class mLe{constructor(){this.sliceBusinessHours=Ht(this._sliceBusinessHours),this.sliceDateSelection=Ht(this._sliceDateSpan),this.sliceEventStore=Ht(this._sliceEventStore),this.sliceEventDrag=Ht(this._sliceInteraction),this.sliceEventResize=Ht(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(e,n,r,i,...s){let{eventUiBases:a}=e,o=this.sliceEventStore(e.eventStore,a,n,r,...s);return{dateSelectionSegs:this.sliceDateSelection(e.dateSelection,n,r,a,i,...s),businessHourSegs:this.sliceBusinessHours(e.businessHours,n,r,i,...s),fgEventSegs:o.fg,bgEventSegs:o.bg,eventDrag:this.sliceEventDrag(e.eventDrag,a,n,r,...s),eventResize:this.sliceEventResize(e.eventResize,a,n,r,...s),eventSelection:e.eventSelection}}sliceNowDate(e,n,r,i,...s){return this._sliceDateSpan({range:{start:e,end:Yl(e,1)},allDay:!1},n,r,{},i,...s)}_sliceBusinessHours(e,n,r,i,...s){return e?this._sliceEventStore(Bu(e,Iy(n,!!r),i),{},n,r,...s).bg:[]}_sliceEventStore(e,n,r,i,...s){if(e){let a=I3(e,n,Iy(r,!!i),i);return{bg:this.sliceEventRanges(a.bg,s),fg:this.sliceEventRanges(a.fg,s)}}return{bg:[],fg:[]}}_sliceInteraction(e,n,r,i,...s){if(!e)return null;let a=I3(e.mutatedEvents,n,Iy(r,!!i),i);return{segs:this.sliceEventRanges(a.fg,s),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}}_sliceDateSpan(e,n,r,i,s,...a){if(!e)return[];let o=Iy(n,!!r),c=_h(e.range,o);if(c){e=Object.assign(Object.assign({},e),{range:c});let u=R3e(e,i,s),d=this.sliceRange(e.range,...a);for(let f of d)f.eventRange=u;return d}return[]}sliceEventRanges(e,n){let r=[];for(let i of e)r.push(...this.sliceEventRange(i,n));return r}sliceEventRange(e,n){let r=e.range;this.forceDayIfListItem&&e.ui.display==="list-item"&&(r={start:r.start,end:zr(r.start,1)});let i=this.sliceRange(r,...n);for(let s of i)s.eventRange=e,s.isStart=e.isStart&&s.isStart,s.isEnd=e.isEnd&&s.isEnd;return i}}function Iy(t,e){let n=t.activeRange;return e?n:{start:Yl(n.start,t.slotMinTime.milliseconds),end:Yl(n.end,t.slotMaxTime.milliseconds-864e5)}}function IW(t,e,n){let{instances:r}=t.mutatedEvents;for(let i in r)if(!h1(e.validRange,r[i].range))return!1;return OW({eventDrag:t},n)}function gLe(t,e,n){return h1(e.validRange,t.range)?OW({dateSelection:t},n):!1}function OW(t,e){let n=e.getCurrentData(),r=Object.assign({businessHours:n.businessHours,dateSelection:"",eventStore:n.eventStore,eventUiBases:n.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},t);return(e.pluginHooks.isPropsValid||vLe)(r,e)}function vLe(t,e,n={},r){return!(t.eventDrag&&!yLe(t,e,n,r)||t.dateSelection&&!bLe(t,e,n,r))}function yLe(t,e,n,r){let i=e.getCurrentData(),s=t.eventDrag,a=s.mutatedEvents,o=a.defs,c=a.instances,u=xx(o,s.isEvent?t.eventUiBases:{"":i.selectionConfig});r&&(u=ad(u,r));let d=h3e(t.eventStore,s.affectedEvents.instances),f=d.defs,h=d.instances,p=xx(f,t.eventUiBases);for(let m in c){let g=c[m],b=g.range,x=u[g.defId],w=o[g.defId];if(!MW(x.constraints,b,d,t.businessHours,e))return!1;let{eventOverlap:_}=e.options,E=typeof _=="function"?_:null;for(let T in h){let A=h[T];if(yN(b,A.range)&&(p[A.defId].overlap===!1&&s.isEvent||x.overlap===!1||E&&!E(new Dn(e,f[A.defId],A),new Dn(e,w,g))))return!1}let j=i.eventStore;for(let T of x.allows){let A=Object.assign(Object.assign({},n),{range:g.range,allDay:w.allDay}),C=j.defs[w.defId],D=j.instances[m],O;if(C?O=new Dn(e,C,D):O=new Dn(e,w),!T(SN(A,e),O))return!1}}return!0}function bLe(t,e,n,r){let i=t.eventStore,s=i.defs,a=i.instances,o=t.dateSelection,c=o.range,{selectionConfig:u}=e.getCurrentData();if(r&&(u=r(u)),!MW(u.constraints,c,i,t.businessHours,e))return!1;let{selectOverlap:d}=e.options,f=typeof d=="function"?d:null;for(let h in a){let p=a[h];if(yN(c,p.range)&&(u.overlap===!1||f&&!f(new Dn(e,s[p.defId],p),null)))return!1}for(let h of u.allows){let p=Object.assign(Object.assign({},n),o);if(!h(SN(p,e),null))return!1}return!0}function MW(t,e,n,r,i){for(let s of t)if(!wLe(xLe(s,e,n,r,i),e))return!1;return!0}function xLe(t,e,n,r,i){return t==="businessHours"?AS(Bu(r,e,i)):typeof t=="string"?AS(p1(n,s=>s.groupId===t)):typeof t=="object"&&t?AS(Bu(t,e,i)):[]}function AS(t){let{instances:e}=t,n=[];for(let r in e)n.push(e[r].range);return n}function wLe(t,e){for(let n of t)if(h1(n,e))return!0;return!1}const Oy=/^(visible|hidden)$/;class _Le extends zn{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,qa(this.props.elRef,e)}}render(){let{props:e}=this,{liquid:n,liquidIsAbsolute:r}=e,i=n&&r,s=["fc-scroller"];return n&&(r?s.push("fc-scroller-liquid-absolute"):s.push("fc-scroller-liquid")),ve("div",{ref:this.handleEl,className:s.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:i&&-(e.overcomeLeft||0)||"",right:i&&-(e.overcomeRight||0)||"",bottom:i&&-(e.overcomeBottom||0)||"",marginLeft:!i&&-(e.overcomeLeft||0)||"",marginRight:!i&&-(e.overcomeRight||0)||"",marginBottom:!i&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)}needsXScrolling(){if(Oy.test(this.props.overflowX))return!1;let{el:e}=this,n=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:r}=e;for(let i=0;i<r.length;i+=1)if(r[i].getBoundingClientRect().width>n)return!0;return!1}needsYScrolling(){if(Oy.test(this.props.overflowY))return!1;let{el:e}=this,n=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:r}=e;for(let i=0;i<r.length;i+=1)if(r[i].getBoundingClientRect().height>n)return!0;return!1}getXScrollbarWidth(){return Oy.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return Oy.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class ou{constructor(e){this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(n,r)=>{let{depths:i,currentMap:s}=this,a=!1,o=!1;n!==null?(a=r in s,s[r]=n,i[r]=(i[r]||0)+1,o=!0):(i[r]-=1,i[r]||(delete s[r],delete this.callbackMap[r],a=!0)),this.masterCallback&&(a&&this.masterCallback(null,String(r)),o&&this.masterCallback(n,String(r)))}}createRef(e){let n=this.callbackMap[e];return n||(n=this.callbackMap[e]=r=>{this.handleValue(r,String(e))}),n}collect(e,n,r){return k5e(this.currentMap,e,n,r)}getAll(){return gN(this.currentMap)}}function SLe(t){let e=N4e(t,".fc-scrollgrid-shrink"),n=0;for(let r of e)n=Math.max(n,W4e(r));return Math.ceil(n)}function RW(t,e){return t.liquid&&e.liquid}function ALe(t,e){return e.maxHeight!=null||RW(t,e)}function ELe(t,e,n,r){let{expandRows:i}=n;return typeof e.content=="function"?e.content(n):ve("table",{role:"presentation",className:[e.tableClassName,t.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:n.tableMinWidth,width:n.clientWidth,height:i?n.clientHeight:""}},n.tableColGroupNode,ve(r?"thead":"tbody",{role:"presentation"},typeof e.rowContent=="function"?e.rowContent(n):e.rowContent))}function jLe(t,e){return Gl(t,e,da)}function CLe(t,e){let n=[];for(let r of t){let i=r.span||1;for(let s=0;s<i;s+=1)n.push(ve("col",{style:{width:r.width==="shrink"?TLe(e):r.width||"",minWidth:r.minWidth||""}}))}return ve("colgroup",{},...n)}function TLe(t){return t??4}function PLe(t){for(let e of t)if(e.width==="shrink")return!0;return!1}function NLe(t,e){let n=["fc-scrollgrid",e.theme.getClass("table")];return t&&n.push("fc-scrollgrid-liquid"),n}function kLe(t,e){let n=["fc-scrollgrid-section",`fc-scrollgrid-section-${t.type}`,t.className];return e&&t.liquid&&t.maxHeight==null&&n.push("fc-scrollgrid-section-liquid"),t.isSticky&&n.push("fc-scrollgrid-section-sticky"),n}function DLe(t){return ve("div",{className:"fc-scrollgrid-sticky-shim",style:{width:t.clientWidth,minWidth:t.tableMinWidth}})}function z3(t){let{stickyHeaderDates:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}function ILe(t){let{stickyFooterScrollbar:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}class LW extends zn{constructor(){super(...arguments),this.processCols=Ht(e=>e,jLe),this.renderMicroColGroup=Ht(CLe),this.scrollerRefs=new ou,this.scrollerElRefs=new ou(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:e,state:n,context:r}=this,i=e.sections||[],s=this.processCols(e.cols),a=this.renderMicroColGroup(s,n.shrinkWidth),o=NLe(e.liquid,r);e.collapsibleWidth&&o.push("fc-scrollgrid-collapsible");let c=i.length,u=0,d,f=[],h=[],p=[];for(;u<c&&(d=i[u]).type==="header";)f.push(this.renderSection(d,a,!0)),u+=1;for(;u<c&&(d=i[u]).type==="body";)h.push(this.renderSection(d,a,!1)),u+=1;for(;u<c&&(d=i[u]).type==="footer";)p.push(this.renderSection(d,a,!0)),u+=1;let m=!EW();const g={role:"rowgroup"};return ve("table",{role:"grid",className:o.join(" "),style:{height:e.height}},!!(!m&&f.length)&&ve("thead",g,...f),!!(!m&&h.length)&&ve("tbody",g,...h),!!(!m&&p.length)&&ve("tfoot",g,...p),m&&ve("tbody",g,...f,...h,...p))}renderSection(e,n,r){return"outerContent"in e?ve(Wn,{key:e.key},e.outerContent):ve("tr",{key:e.key,role:"presentation",className:kLe(e,this.props.liquid).join(" ")},this.renderChunkTd(e,n,e.chunk,r))}renderChunkTd(e,n,r,i){if("outerContent"in r)return r.outerContent;let{props:s}=this,{forceYScrollbars:a,scrollerClientWidths:o,scrollerClientHeights:c}=this.state,u=ALe(s,e),d=RW(s,e),f=s.liquid?a?"scroll":u?"auto":"hidden":"visible",h=e.key,p=ELe(e,r,{tableColGroupNode:n,tableMinWidth:"",clientWidth:!s.collapsibleWidth&&o[h]!==void 0?o[h]:null,clientHeight:c[h]!==void 0?c[h]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},i);return ve(i?"th":"td",{ref:r.elRef,role:"presentation"},ve("div",{className:`fc-scroller-harness${d?" fc-scroller-harness-liquid":""}`},ve(_Le,{ref:this.scrollerRefs.createRef(h),elRef:this.scrollerElRefs.createRef(h),overflowY:f,overflowX:s.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:d,liquidIsAbsolute:!0},p)))}_handleScrollerEl(e,n){let r=OLe(this.props.sections,n);r&&qa(r.chunk.scrollerElRef,e)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return PLe(this.props.cols)?SLe(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let e=Z3e(),{scrollerRefs:n,scrollerElRefs:r}=this,i=!1,s={},a={};for(let o in n.currentMap){let c=n.currentMap[o];if(c&&c.needsYScrolling()){i=!0;break}}for(let o of this.props.sections){let c=o.key,u=r.currentMap[c];if(u){let d=u.parentNode;s[c]=Math.floor(d.getBoundingClientRect().width-(i?e.y:0)),a[c]=Math.floor(d.getBoundingClientRect().height)}}return{forceYScrollbars:i,scrollerClientWidths:s,scrollerClientHeights:a}}}LW.addStateEquality({scrollerClientWidths:da,scrollerClientHeights:da});function OLe(t,e){for(let n of t)if(n.key===e)return n;return null}class NN extends zn{constructor(){super(...arguments),this.buildPublicEvent=Ht((e,n,r)=>new Dn(e,n,r)),this.handleEl=e=>{this.el=e,qa(this.props.elRef,e),e&&O3(e,this.props.seg)}}render(){const{props:e,context:n}=this,{options:r}=n,{seg:i}=e,{eventRange:s}=i,{ui:a}=s,o={event:this.buildPublicEvent(n,s.def,s.instance),view:n.viewApi,timeText:e.timeText,textColor:a.textColor,backgroundColor:a.backgroundColor,borderColor:a.borderColor,isDraggable:!e.disableDragging&&E3e(i,n),isStartResizable:!e.disableResizing&&j3e(i,n),isEndResizable:!e.disableResizing&&C3e(i),isMirror:!!(e.isDragging||e.isResizing||e.isDateSelecting),isStart:!!i.isStart,isEnd:!!i.isEnd,isPast:!!e.isPast,isFuture:!!e.isFuture,isToday:!!e.isToday,isSelected:!!e.isSelected,isDragging:!!e.isDragging,isResizing:!!e.isResizing};return ve(Ho,{elRef:this.handleEl,elTag:e.elTag,elAttrs:e.elAttrs,elClasses:[...T3e(o),...i.eventRange.ui.classNames,...e.elClasses||[]],elStyle:e.elStyle,renderProps:o,generatorName:"eventContent",customGenerator:r.eventContent,defaultGenerator:e.defaultGenerator,classNameGenerator:r.eventClassNames,didMount:r.eventDidMount,willUnmount:r.eventWillUnmount},e.children)}componentDidUpdate(e){this.el&&this.props.seg!==e.seg&&O3(this.el,this.props.seg)}}class zW extends zn{render(){let{props:e,context:n}=this,{options:r}=n,{seg:i}=e,{ui:s}=i.eventRange,a=r.eventTimeFormat||e.defaultTimeFormat,o=wW(i,a,n,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return ve(NN,Object.assign({},e,{elTag:"a",elStyle:{borderColor:s.borderColor,backgroundColor:s.backgroundColor},elAttrs:_W(i,n),defaultGenerator:MLe,timeText:o}),(c,u)=>ve(Wn,null,ve(c,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:u.textColor}}),!!u.isStartResizable&&ve("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!u.isEndResizable&&ve("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}zW.addPropsEquality({seg:da});function MLe(t){return ve("div",{className:"fc-event-main-frame"},t.timeText&&ve("div",{className:"fc-event-time"},t.timeText),ve("div",{className:"fc-event-title-container"},ve("div",{className:"fc-event-title fc-sticky"},t.event.title||ve(Wn,null," "))))}const RLe=Rr({day:"numeric"});class $W extends zn{constructor(){super(...arguments),this.refineRenderProps=c0(LLe)}render(){let{props:e,context:n}=this,{options:r}=n,i=this.refineRenderProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,isMonthStart:e.isMonthStart||!1,showDayNumber:e.showDayNumber,extraRenderProps:e.extraRenderProps,viewApi:n.viewApi,dateEnv:n.dateEnv,monthStartFormat:r.monthStartFormat});return ve(Ho,{elRef:e.elRef,elTag:e.elTag,elAttrs:Object.assign(Object.assign({},e.elAttrs),i.isDisabled?{}:{"data-date":fN(e.date)}),elClasses:[...jN(i,n.theme),...e.elClasses||[]],elStyle:e.elStyle,renderProps:i,generatorName:"dayCellContent",customGenerator:r.dayCellContent,defaultGenerator:e.defaultGenerator,classNameGenerator:i.isDisabled?void 0:r.dayCellClassNames,didMount:r.dayCellDidMount,willUnmount:r.dayCellWillUnmount},e.children)}}function FW(t){return!!(t.dayCellContent||G2("dayCellContent",t))}function LLe(t){let{date:e,dateEnv:n,dateProfile:r,isMonthStart:i}=t,s=CW(e,t.todayRange,null,r),a=t.showDayNumber?n.format(e,i?t.monthStartFormat:RLe):"";return Object.assign(Object.assign(Object.assign({date:n.toDate(e),view:t.viewApi},s),{isMonthStart:i,dayNumberText:a}),t.extraRenderProps)}class zLe extends zn{render(){let{props:e}=this,{seg:n}=e;return ve(NN,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:n.eventRange.ui.backgroundColor},defaultGenerator:$Le,seg:n,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,disableDragging:!0,disableResizing:!0})}}function $Le(t){let{title:e}=t.event;return e&&ve("div",{className:"fc-event-title"},t.event.title)}function FLe(t){return ve("div",{className:`fc-${t}`})}const VLe=t=>ve(od.Consumer,null,e=>{let{dateEnv:n,options:r}=e,{date:i}=t,s=r.weekNumberFormat||t.defaultFormat,a=n.computeWeekNumber(i),o=n.format(i,s),c={num:a,text:o,date:i};return ve(Ho,{elRef:t.elRef,elTag:t.elTag,elAttrs:t.elAttrs,elClasses:t.elClasses,elStyle:t.elStyle,renderProps:c,generatorName:"weekNumberContent",customGenerator:r.weekNumberContent,defaultGenerator:BLe,classNameGenerator:r.weekNumberClassNames,didMount:r.weekNumberDidMount,willUnmount:r.weekNumberWillUnmount},t.children)});function BLe(t){return t.text}const ES=10;class ULe extends zn{constructor(){super(...arguments),this.state={titleId:d1()},this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&qa(this.props.elRef,e)},this.handleDocumentMouseDown=e=>{const n=XU(e);this.rootEl.contains(n)||this.handleCloseClick()},this.handleDocumentKeyDown=e=>{e.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:e}=this.props;e&&e()}}render(){let{theme:e,options:n}=this.context,{props:r,state:i}=this,s=["fc-popover",e.getClass("popover")].concat(r.extraClassNames||[]);return g4e(ve("div",Object.assign({},r.extraAttrs,{id:r.id,className:s.join(" "),"aria-labelledby":i.titleId,ref:this.handleRootEl}),ve("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},ve("span",{className:"fc-popover-title",id:i.titleId},r.title),ve("span",{className:"fc-popover-close "+e.getIconClass("close"),title:n.closeHint,onClick:this.handleCloseClick})),ve("div",{className:"fc-popover-body "+e.getClass("popoverContent")},r.children)),r.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:e}=this.context,{alignmentEl:n,alignGridTop:r}=this.props,{rootEl:i}=this,s=nLe(n);if(s){let a=i.getBoundingClientRect(),o=r?pi(n,".fc-scrollgrid").getBoundingClientRect().top:s.top,c=e?s.right-a.width:s.left;o=Math.max(o,ES),c=Math.min(c,document.documentElement.clientWidth-ES-a.width),c=Math.max(c,ES);let u=i.offsetParent.getBoundingClientRect();_m(i,{top:o-u.top,left:c-u.left})}}}class WLe extends cd{constructor(){super(...arguments),this.handleRootEl=e=>{this.rootEl=e,e?this.context.registerInteractiveComponent(this,{el:e,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:e,dateEnv:n}=this.context,{props:r}=this,{startDate:i,todayRange:s,dateProfile:a}=r,o=n.format(i,e.dayPopoverFormat);return ve($W,{elRef:this.handleRootEl,date:i,dateProfile:a,todayRange:s},(c,u,d)=>ve(ULe,{elRef:d.ref,id:r.id,title:o,extraClassNames:["fc-more-popover"].concat(d.className||[]),extraAttrs:d,parentEl:r.parentEl,alignmentEl:r.alignmentEl,alignGridTop:r.alignGridTop,onClose:r.onClose},FW(e)&&ve(c,{elTag:"div",elClasses:["fc-more-popover-misc"]}),r.children))}queryHit(e,n,r,i){let{rootEl:s,props:a}=this;return e>=0&&e<r&&n>=0&&n<i?{dateProfile:a.dateProfile,dateSpan:Object.assign({allDay:!a.forceTimed,range:{start:a.startDate,end:a.endDate}},a.extraDateSpan),dayEl:s,rect:{left:0,top:0,right:r,bottom:i},layer:1}:null}}class HLe extends zn{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:d1()},this.handleLinkEl=e=>{this.linkEl=e,this.props.elRef&&qa(this.props.elRef,e)},this.handleClick=e=>{let{props:n,context:r}=this,{moreLinkClick:i}=r.options,s=$3(n).start;function a(o){let{def:c,instance:u,range:d}=o.eventRange;return{event:new Dn(r,c,u),start:r.dateEnv.toDate(d.start),end:r.dateEnv.toDate(d.end),isStart:o.isStart,isEnd:o.isEnd}}typeof i=="function"&&(i=i({date:s,allDay:!!n.allDayDate,allSegs:n.allSegs.map(a),hiddenSegs:n.hiddenSegs.map(a),jsEvent:e,view:r.viewApi})),!i||i==="popover"?this.setState({isPopoverOpen:!0}):typeof i=="string"&&r.calendarApi.zoomTo(s,i)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:e,state:n}=this;return ve(od.Consumer,null,r=>{let{viewApi:i,options:s,calendarApi:a}=r,{moreLinkText:o}=s,{moreCnt:c}=e,u=$3(e),d=typeof o=="function"?o.call(a,c):`+${c} ${o}`,f=Sm(s.moreLinkHint,[c],d),h={num:c,shortText:`+${c}`,text:d,view:i};return ve(Wn,null,!!e.moreCnt&&ve(Ho,{elTag:e.elTag||"a",elRef:this.handleLinkEl,elClasses:[...e.elClasses||[],"fc-more-link"],elStyle:e.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},e.elAttrs),JU(this.handleClick)),{title:f,"aria-expanded":n.isPopoverOpen,"aria-controls":n.isPopoverOpen?n.popoverId:""}),renderProps:h,generatorName:"moreLinkContent",customGenerator:s.moreLinkContent,defaultGenerator:e.defaultGenerator||qLe,classNameGenerator:s.moreLinkClassNames,didMount:s.moreLinkDidMount,willUnmount:s.moreLinkWillUnmount},e.children),n.isPopoverOpen&&ve(WLe,{id:n.popoverId,startDate:u.start,endDate:u.end,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:e.extraDateSpan,parentEl:this.parentEl,alignmentEl:e.alignmentElRef?e.alignmentElRef.current:this.linkEl,alignGridTop:e.alignGridTop,forceTimed:e.forceTimed,onClose:this.handlePopoverClose},e.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=pi(this.linkEl,".fc-view-harness"))}}function qLe(t){return t.text}function $3(t){if(t.allDayDate)return{start:t.allDayDate,end:zr(t.allDayDate,1)};let{hiddenSegs:e}=t;return{start:KLe(e),end:YLe(e)}}function KLe(t){return t.reduce(GLe).eventRange.range.start}function GLe(t,e){return t.eventRange.range.start<e.eventRange.range.start?t:e}function YLe(t){return t.reduce(QLe).eventRange.range.end}function QLe(t,e){return t.eventRange.range.end>e.eventRange.range.end?t:e}class XLe{constructor(){this.handlers=[]}set(e){this.currentValue=e;for(let n of this.handlers)n(e)}subscribe(e){this.handlers.push(e),this.currentValue!==void 0&&e(this.currentValue)}}class ZLe extends XLe{constructor(){super(...arguments),this.map=new Map}handle(e){const{map:n}=this;let r=!1;e.isActive?(n.set(e.id,e),r=!0):n.has(e.id)&&(n.delete(e.id),r=!0),r&&this.set(n)}}const JLe=[],VW={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},BW=Object.assign(Object.assign({},VW),{buttonHints:{prev:"Previous $0",next:"Next $0",today(t,e){return e==="day"?"Today":`This ${t}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(t){return`Show ${t} more event${t===1?"":"s"}`}});function eze(t){let e=t.length>0?t[0].code:"en",n=JLe.concat(t),r={en:BW};for(let i of n)r[i.code]=i;return{map:r,defaultCode:e}}function UW(t,e){return typeof t=="object"&&!Array.isArray(t)?WW(t.code,[t.code],t):tze(t,e)}function tze(t,e){let n=[].concat(t||[]),r=nze(n,e)||BW;return WW(t,n,r)}function nze(t,e){for(let n=0;n<t.length;n+=1){let r=t[n].toLocaleLowerCase().split("-");for(let i=r.length;i>0;i-=1){let s=r.slice(0,i).join("-");if(e[s])return e[s]}}return null}function WW(t,e,n){let r=mN([VW,n],["buttonText"]);delete r.code;let{week:i}=r;return delete r.week,{codeArg:t,codes:e,week:i,simpleNumberFormat:new Intl.NumberFormat(t),options:r}}function dc(t){return{id:sd(),name:t.name,premiumReleaseDate:t.premiumReleaseDate?new Date(t.premiumReleaseDate):void 0,deps:t.deps||[],reducers:t.reducers||[],isLoadingFuncs:t.isLoadingFuncs||[],contextInit:[].concat(t.contextInit||[]),eventRefiners:t.eventRefiners||{},eventDefMemberAdders:t.eventDefMemberAdders||[],eventSourceRefiners:t.eventSourceRefiners||{},isDraggableTransformers:t.isDraggableTransformers||[],eventDragMutationMassagers:t.eventDragMutationMassagers||[],eventDefMutationAppliers:t.eventDefMutationAppliers||[],dateSelectionTransformers:t.dateSelectionTransformers||[],datePointTransforms:t.datePointTransforms||[],dateSpanTransforms:t.dateSpanTransforms||[],views:t.views||{},viewPropsTransformers:t.viewPropsTransformers||[],isPropsValid:t.isPropsValid||null,externalDefTransforms:t.externalDefTransforms||[],viewContainerAppends:t.viewContainerAppends||[],eventDropTransformers:t.eventDropTransformers||[],componentInteractions:t.componentInteractions||[],calendarInteractions:t.calendarInteractions||[],themeClasses:t.themeClasses||{},eventSourceDefs:t.eventSourceDefs||[],cmdFormatter:t.cmdFormatter,recurringTypes:t.recurringTypes||[],namedTimeZonedImpl:t.namedTimeZonedImpl,initialView:t.initialView||"",elementDraggingImpl:t.elementDraggingImpl,optionChangeHandlers:t.optionChangeHandlers||{},scrollGridImpl:t.scrollGridImpl||null,listenerRefiners:t.listenerRefiners||{},optionRefiners:t.optionRefiners||{},propSetHandlers:t.propSetHandlers||{}}}function rze(t,e){let n={},r={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function i(s){for(let a of s){const o=a.name,c=n[o];c===void 0?(n[o]=a.id,i(a.deps),r=sze(r,a)):c!==a.id&&console.warn(`Duplicate plugin '${o}'`)}}return t&&i(t),i(e),r}function ize(){let t=[],e=[],n;return(r,i)=>((!n||!Gl(r,t)||!Gl(i,e))&&(n=rze(r,i)),t=r,e=i,n)}function sze(t,e){return{premiumReleaseDate:aze(t.premiumReleaseDate,e.premiumReleaseDate),reducers:t.reducers.concat(e.reducers),isLoadingFuncs:t.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:t.contextInit.concat(e.contextInit),eventRefiners:Object.assign(Object.assign({},t.eventRefiners),e.eventRefiners),eventDefMemberAdders:t.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},t.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:t.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:t.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:t.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:t.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:t.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:t.dateSpanTransforms.concat(e.dateSpanTransforms),views:Object.assign(Object.assign({},t.views),e.views),viewPropsTransformers:t.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||t.isPropsValid,externalDefTransforms:t.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:t.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:t.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:t.calendarInteractions.concat(e.calendarInteractions),componentInteractions:t.componentInteractions.concat(e.componentInteractions),themeClasses:Object.assign(Object.assign({},t.themeClasses),e.themeClasses),eventSourceDefs:t.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||t.cmdFormatter,recurringTypes:t.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||t.namedTimeZonedImpl,initialView:t.initialView||e.initialView,elementDraggingImpl:t.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},t.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||t.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},t.listenerRefiners),e.listenerRefiners),optionRefiners:Object.assign(Object.assign({},t.optionRefiners),e.optionRefiners),propSetHandlers:Object.assign(Object.assign({},t.propSetHandlers),e.propSetHandlers)}}function aze(t,e){return t===void 0?e:e===void 0?t:new Date(Math.max(t.valueOf(),e.valueOf()))}class fc extends kv{}fc.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};fc.prototype.baseIconClass="fc-icon";fc.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};fc.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};fc.prototype.iconOverrideOption="buttonIcons";fc.prototype.iconOverrideCustomButtonOption="icon";fc.prototype.iconOverridePrefix="fc-icon-";function oze(t,e){let n={},r;for(r in t)J2(r,n,t,e);for(r in e)J2(r,n,t,e);return n}function J2(t,e,n,r){if(e[t])return e[t];let i=lze(t,e,n,r);return i&&(e[t]=i),i}function lze(t,e,n,r){let i=n[t],s=r[t],a=d=>i&&i[d]!==null?i[d]:s&&s[d]!==null?s[d]:null,o=a("component"),c=a("superType"),u=null;if(c){if(c===t)throw new Error("Can't have a custom view type that references itself");u=J2(c,e,n,r)}return!o&&u&&(o=u.component),o?{type:t,component:o,defaults:Object.assign(Object.assign({},u?u.defaults:{}),i?i.rawOptions:{}),overrides:Object.assign(Object.assign({},u?u.overrides:{}),s?s.rawOptions:{})}:null}function F3(t){return ad(t,cze)}function cze(t){let e=typeof t=="function"?{component:t}:t,{component:n}=e;return e.content?n=V3(e):n&&!(n.prototype instanceof zn)&&(n=V3(Object.assign(Object.assign({},e),{content:n}))),{superType:e.type,component:n,rawOptions:e}}function V3(t){return e=>ve(od.Consumer,null,n=>ve(Ho,{elTag:"div",elClasses:oW(n.viewSpec),renderProps:Object.assign(Object.assign({},e),{nextDayThreshold:n.options.nextDayThreshold}),generatorName:void 0,customGenerator:t.content,classNameGenerator:t.classNames,didMount:t.didMount,willUnmount:t.willUnmount}))}function uze(t,e,n,r){let i=F3(t),s=F3(e.views),a=oze(i,s);return ad(a,o=>dze(o,s,e,n,r))}function dze(t,e,n,r,i){let s=t.overrides.duration||t.defaults.duration||r.duration||n.duration,a=null,o="",c="",u={};if(s&&(a=fze(s),a)){let h=K2(a);o=h.unit,h.value===1&&(c=o,u=e[o]?e[o].rawOptions:{})}let d=h=>{let p=h.buttonText||{},m=t.defaults.buttonTextKey;return m!=null&&p[m]!=null?p[m]:p[t.type]!=null?p[t.type]:p[c]!=null?p[c]:null},f=h=>{let p=h.buttonHints||{},m=t.defaults.buttonTextKey;return m!=null&&p[m]!=null?p[m]:p[t.type]!=null?p[t.type]:p[c]!=null?p[c]:null};return{type:t.type,component:t.component,duration:a,durationUnit:o,singleUnit:c,optionDefaults:t.defaults,optionOverrides:Object.assign(Object.assign({},u),t.overrides),buttonTextOverride:d(r)||d(n)||t.overrides.buttonText,buttonTextDefault:d(i)||t.defaults.buttonText||d(Am)||t.type,buttonTitleOverride:f(r)||f(n)||t.overrides.buttonHint,buttonTitleDefault:f(i)||t.defaults.buttonHint||f(Am)}}let B3={};function fze(t){let e=JSON.stringify(t),n=B3[e];return n===void 0&&(n=Gt(t),B3[e]=n),n}function hze(t,e){switch(e.type){case"CHANGE_VIEW_TYPE":t=e.viewType}return t}function pze(t,e){switch(e.type){case"CHANGE_DATE":return e.dateMarker;default:return t}}function mze(t,e,n){let r=t.initialDate;return r!=null?e.createMarker(r):n.getDateMarker()}function gze(t,e){switch(e.type){case"SET_OPTION":return Object.assign(Object.assign({},t),{[e.optionName]:e.rawOptionValue});default:return t}}function vze(t,e,n,r){let i;switch(e.type){case"CHANGE_VIEW_TYPE":return r.build(e.dateMarker||n);case"CHANGE_DATE":return r.build(e.dateMarker);case"PREV":if(i=r.buildPrev(t,n),i.isValid)return i;break;case"NEXT":if(i=r.buildNext(t,n),i.isValid)return i;break}return t}function yze(t,e,n){let r=e?e.activeRange:null;return qW({},Eze(t,n),r,n)}function bze(t,e,n,r){let i=n?n.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return qW(t,e.sources,i,r);case"REMOVE_EVENT_SOURCE":return wze(t,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return n?KW(t,i,r):t;case"FETCH_EVENT_SOURCES":return kN(t,e.sourceIds?nW(e.sourceIds):GW(t,r),i,e.isRefetch||!1,r);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return Aze(t,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return t}}function xze(t,e,n){let r=e?e.activeRange:null;return kN(t,GW(t,n),r,!0,n)}function HW(t){for(let e in t)if(t[e].isFetching)return!0;return!1}function qW(t,e,n,r){let i={};for(let s of e)i[s.sourceId]=s;return n&&(i=KW(i,n,r)),Object.assign(Object.assign({},t),i)}function wze(t,e){return Vu(t,n=>n.sourceId!==e)}function KW(t,e,n){return kN(t,Vu(t,r=>_ze(r,e,n)),e,!1,n)}function _ze(t,e,n){return YW(t,n)?!n.options.lazyFetching||!t.fetchRange||t.isFetching||e.start<t.fetchRange.start||e.end>t.fetchRange.end:!t.latestFetchId}function kN(t,e,n,r,i){let s={};for(let a in t){let o=t[a];e[a]?s[a]=Sze(o,n,r,i):s[a]=o}return s}function Sze(t,e,n,r){let{options:i,calendarApi:s}=r,a=r.pluginHooks.eventSourceDefs[t.sourceDefId],o=sd();return a.fetch({eventSource:t,range:e,isRefetch:n,context:r},c=>{let{rawEvents:u}=c;i.eventSourceSuccess&&(u=i.eventSourceSuccess.call(s,u,c.response)||u),t.success&&(u=t.success.call(s,u,c.response)||u),r.dispatch({type:"RECEIVE_EVENTS",sourceId:t.sourceId,fetchId:o,fetchRange:e,rawEvents:u})},c=>{let u=!1;i.eventSourceFailure&&(i.eventSourceFailure.call(s,c),u=!0),t.failure&&(t.failure(c),u=!0),u||console.warn(c.message,c),r.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:t.sourceId,fetchId:o,fetchRange:e,error:c})}),Object.assign(Object.assign({},t),{isFetching:!0,latestFetchId:o})}function Aze(t,e,n,r){let i=t[e];return i&&n===i.latestFetchId?Object.assign(Object.assign({},t),{[e]:Object.assign(Object.assign({},i),{isFetching:!1,fetchRange:r})}):t}function GW(t,e){return Vu(t,n=>YW(n,e))}function Eze(t,e){let n=mW(e),r=[].concat(t.eventSources||[]),i=[];t.initialEvents&&r.unshift(t.initialEvents),t.events&&r.unshift(t.events);for(let s of r){let a=pW(s,e,n);a&&i.push(a)}return i}function YW(t,e){return!e.pluginHooks.eventSourceDefs[t.sourceDefId].ignoreRange}function jze(t,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return t}}function Cze(t,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return t}}function Tze(t,e){let n;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return n=e.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return t}}function Pze(t,e){let n;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return n=e.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return t}}function Nze(t,e,n,r,i){let s=t.headerToolbar?U3(t.headerToolbar,t,e,n,r,i):null,a=t.footerToolbar?U3(t.footerToolbar,t,e,n,r,i):null;return{header:s,footer:a}}function U3(t,e,n,r,i,s){let a={},o=[],c=!1;for(let u in t){let d=t[u],f=kze(d,e,n,r,i,s);a[u]=f.widgets,o.push(...f.viewsWithButtons),c=c||f.hasTitle}return{sectionWidgets:a,viewsWithButtons:o,hasTitle:c}}function kze(t,e,n,r,i,s){let a=e.direction==="rtl",o=e.customButtons||{},c=n.buttonText||{},u=e.buttonText||{},d=n.buttonHints||{},f=e.buttonHints||{},h=t?t.split(" "):[],p=[],m=!1;return{widgets:h.map(b=>b.split(",").map(x=>{if(x==="title")return m=!0,{buttonName:x};let w,_,E,j,T,A;if(w=o[x])E=C=>{w.click&&w.click.call(C.target,C,C.target)},(j=r.getCustomButtonIconClass(w))||(j=r.getIconClass(x,a))||(T=w.text),A=w.hint||w.text;else if(_=i[x]){p.push(x),E=()=>{s.changeView(x)},(T=_.buttonTextOverride)||(j=r.getIconClass(x,a))||(T=_.buttonTextDefault);let C=_.buttonTextOverride||_.buttonTextDefault;A=Sm(_.buttonTitleOverride||_.buttonTitleDefault||e.viewHint,[C,x],C)}else if(s[x])if(E=()=>{s[x]()},(T=c[x])||(j=r.getIconClass(x,a))||(T=u[x]),x==="prevYear"||x==="nextYear"){let C=x==="prevYear"?"prev":"next";A=Sm(d[C]||f[C],[u.year||"year","year"],u[x])}else A=C=>Sm(d[x]||f[x],[u[C]||C,C],u[x]);return{buttonName:x,buttonClick:E,buttonIcon:j,buttonText:T,buttonHint:A}})),viewsWithButtons:p,hasTitle:m}}class Dze{constructor(e,n,r){this.type=e,this.getCurrentData=n,this.dateEnv=r}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(e){return this.getCurrentData().options[e]}}let Ize={ignoreRange:!0,parseMeta(t){return Array.isArray(t.events)?t.events:null},fetch(t,e){e({rawEvents:t.eventSource.meta})}};const Oze=dc({name:"array-event-source",eventSourceDefs:[Ize]});let Mze={parseMeta(t){return typeof t.events=="function"?t.events:null},fetch(t,e,n){const{dateEnv:r}=t.context,i=t.eventSource.meta;L3e(i.bind(null,SW(t.range,r)),s=>e({rawEvents:s}),n)}};const Rze=dc({name:"func-event-source",eventSourceDefs:[Mze]}),Lze={method:String,extraParams:me,startParam:String,endParam:String,timeZoneParam:String};let zze={parseMeta(t){return t.url&&(t.format==="json"||!t.format)?{url:t.url,format:"json",method:(t.method||"GET").toUpperCase(),extraParams:t.extraParams,startParam:t.startParam,endParam:t.endParam,timeZoneParam:t.timeZoneParam}:null},fetch(t,e,n){const{meta:r}=t.eventSource,i=Fze(r,t.range,t.context);z3e(r.method,r.url,i).then(([s,a])=>{e({rawEvents:s,response:a})},n)}};const $ze=dc({name:"json-event-source",eventSourceRefiners:Lze,eventSourceDefs:[zze]});function Fze(t,e,n){let{dateEnv:r,options:i}=n,s,a,o,c,u={};return s=t.startParam,s==null&&(s=i.startParam),a=t.endParam,a==null&&(a=i.endParam),o=t.timeZoneParam,o==null&&(o=i.timeZoneParam),typeof t.extraParams=="function"?c=t.extraParams():c=t.extraParams||{},Object.assign(u,c),u[s]=r.formatIso(e.start),u[a]=r.formatIso(e.end),r.timeZone!=="local"&&(u[o]=r.timeZone),u}const Vze={daysOfWeek:me,startTime:Gt,endTime:Gt,duration:Gt,startRecur:me,endRecur:me};let Bze={parse(t,e){if(t.daysOfWeek||t.startTime||t.endTime||t.startRecur||t.endRecur){let n={daysOfWeek:t.daysOfWeek||null,startTime:t.startTime||null,endTime:t.endTime||null,startRecur:t.startRecur?e.createMarker(t.startRecur):null,endRecur:t.endRecur?e.createMarker(t.endRecur):null,dateEnv:e},r;return t.duration&&(r=t.duration),!r&&t.startTime&&t.endTime&&(r=G4e(t.endTime,t.startTime)),{allDayGuess:!t.startTime&&!t.endTime,duration:r,typeData:n}}return null},expand(t,e,n){let r=_h(e,{start:t.startRecur,end:t.endRecur});return r?Wze(t.daysOfWeek,t.startTime,t.dateEnv,n,r):[]}};const Uze=dc({name:"simple-recurring-event",recurringTypes:[Bze],eventRefiners:Vze});function Wze(t,e,n,r,i){let s=t?nW(t):null,a=kn(i.start),o=i.end,c=[];for(e&&(e.milliseconds<0?o=zr(o,1):e.milliseconds>=1e3*60*60*24&&(a=zr(a,-1)));a<o;){let u;(!s||s[a.getUTCDay()])&&(e?u=r.add(a,e):u=a,c.push(r.createMarker(n.toDate(u)))),a=zr(a,1)}return c}const Hze=dc({name:"change-handler",optionChangeHandlers:{events(t,e){W3([t],e)},eventSources:W3}});function W3(t,e){let n=gN(e.getCurrentData().eventSources);if(n.length===1&&t.length===1&&Array.isArray(n[0]._raw)&&Array.isArray(t[0])){e.dispatch({type:"RESET_RAW_EVENTS",sourceId:n[0].sourceId,rawEvents:t[0]});return}let r=[];for(let i of t){let s=!1;for(let a=0;a<n.length;a+=1)if(n[a]._raw===i){n.splice(a,1),s=!0;break}s||r.push(i)}for(let i of n)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:i.sourceId});for(let i of r)e.calendarApi.addEventSource(i)}function qze(t,e){e.emitter.trigger("datesSet",Object.assign(Object.assign({},SW(t.activeRange,e.dateEnv)),{view:e.viewApi}))}function Kze(t,e){let{emitter:n}=e;n.hasHandlers("eventsSet")&&n.trigger("eventsSet",bu(t,e))}const Gze=[Oze,Rze,$ze,Uze,Hze,dc({name:"misc",isLoadingFuncs:[t=>HW(t.eventSources)],propSetHandlers:{dateProfile:qze,eventStore:Kze}})];class Yze{constructor(e,n){this.runTaskOption=e,this.drainedOption=n,this.queue=[],this.delayedRunner=new lN(this.drain.bind(this))}request(e,n){this.queue.push(e),this.delayedRunner.request(n)}pause(e){this.delayedRunner.pause(e)}resume(e,n){this.delayedRunner.resume(e,n)}drain(){let{queue:e}=this;for(;e.length;){let n=[],r;for(;r=e.shift();)this.runTask(r),n.push(r);this.drained(n)}}runTask(e){this.runTaskOption&&this.runTaskOption(e)}drained(e){this.drainedOption&&this.drainedOption(e)}}function Qze(t,e,n){let r;return/^(year|month)$/.test(t.currentRangeUnit)?r=t.currentRange:r=t.activeRange,n.formatRange(r.start,r.end,Rr(e.titleFormat||Xze(t)),{isEndExclusive:t.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}function Xze(t){let{currentRangeUnit:e}=t;if(e==="year")return{year:"numeric"};if(e==="month")return{year:"numeric",month:"long"};let n=hx(t.currentRange.start,t.currentRange.end);return n!==null&&n>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class H3{constructor(){this.resetListeners=new Set}handleInput(e,n){const r=this.dateEnv;if(e!==r&&(typeof n=="function"?this.nowFn=n:r||(this.nowAnchorDate=e.toDate(n?e.createMarker(n):e.createNowMarker()),this.nowAnchorQueried=Date.now()),this.dateEnv=e,r))for(const i of this.resetListeners.values())i()}getDateMarker(){return this.nowAnchorDate?this.dateEnv.timestampToMarker(this.nowAnchorDate.valueOf()+(Date.now()-this.nowAnchorQueried)):this.dateEnv.createMarker(this.nowFn())}addResetListener(e){this.resetListeners.add(e)}removeResetListener(e){this.resetListeners.delete(e)}}class Zze{constructor(e){this.computeCurrentViewData=Ht(this._computeCurrentViewData),this.organizeRawLocales=Ht(eze),this.buildLocale=Ht(UW),this.buildPluginHooks=ize(),this.buildDateEnv=Ht(Jze),this.buildTheme=Ht(e$e),this.parseToolbars=Ht(Nze),this.buildViewSpecs=Ht(uze),this.buildDateProfileGenerator=c0(t$e),this.buildViewApi=Ht(n$e),this.buildViewUiProps=c0(s$e),this.buildEventUiBySource=Ht(r$e,da),this.buildEventUiBases=Ht(i$e),this.parseContextBusinessHours=c0(a$e),this.buildTitle=Ht(Qze),this.nowManager=new H3,this.emitter=new m1,this.actionRunner=new Yze(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=h=>{this.actionRunner.request(h)},this.props=e,this.actionRunner.pause(),this.nowManager=new H3;let n={},r=this.computeOptionsData(e.optionOverrides,n,e.calendarApi),i=r.calendarOptions.initialView||r.pluginHooks.initialView,s=this.computeCurrentViewData(i,r,e.optionOverrides,n);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(s.options);let a={nowManager:this.nowManager,dateEnv:r.dateEnv,options:r.calendarOptions,pluginHooks:r.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},o=mze(r.calendarOptions,r.dateEnv,this.nowManager),c=s.dateProfileGenerator.build(o);$l(c.activeRange,o)||(o=c.currentRange.start);for(let h of r.pluginHooks.contextInit)h(a);let u=yze(r.calendarOptions,c,a),d={dynamicOptionOverrides:n,currentViewType:i,currentDate:o,dateProfile:c,businessHours:this.parseContextBusinessHours(a),eventSources:u,eventUiBases:{},eventStore:ra(),renderableEventStore:ra(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(a).selectionConfig},f=Object.assign(Object.assign({},a),d);for(let h of r.pluginHooks.reducers)Object.assign(d,h(null,null,f));jS(d,a)&&this.emitter.trigger("loading",!0),this.state=d,this.updateData(),this.actionRunner.resume()}resetOptions(e,n){let{props:r}=this;n===void 0?r.optionOverrides=e:(r.optionOverrides=Object.assign(Object.assign({},r.optionOverrides||{}),e),this.optionsForRefining.push(...n)),(n===void 0||n.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(e){let{props:n,state:r,emitter:i}=this,s=gze(r.dynamicOptionOverrides,e),a=this.computeOptionsData(n.optionOverrides,s,n.calendarApi),o=hze(r.currentViewType,e),c=this.computeCurrentViewData(o,a,n.optionOverrides,s);n.calendarApi.currentDataManager=this,i.setThisContext(n.calendarApi),i.setOptions(c.options);let u={nowManager:this.nowManager,dateEnv:a.dateEnv,options:a.calendarOptions,pluginHooks:a.pluginHooks,calendarApi:n.calendarApi,dispatch:this.dispatch,emitter:i,getCurrentData:this.getCurrentData},{currentDate:d,dateProfile:f}=r;this.data&&this.data.dateProfileGenerator!==c.dateProfileGenerator&&(f=c.dateProfileGenerator.build(d)),d=pze(d,e),f=vze(f,e,d,c.dateProfileGenerator),(e.type==="PREV"||e.type==="NEXT"||!$l(f.currentRange,d))&&(d=f.currentRange.start);let h=bze(r.eventSources,e,f,u),p=c3e(r.eventStore,e,h,f,u),g=HW(h)&&!c.options.progressiveEventRendering&&r.renderableEventStore||p,{eventUiSingleBase:b,selectionConfig:x}=this.buildViewUiProps(u),w=this.buildEventUiBySource(h),_=this.buildEventUiBases(g.defs,b,w),E={dynamicOptionOverrides:s,currentViewType:o,currentDate:d,dateProfile:f,eventSources:h,eventStore:p,renderableEventStore:g,selectionConfig:x,eventUiBases:_,businessHours:this.parseContextBusinessHours(u),dateSelection:jze(r.dateSelection,e),eventSelection:Cze(r.eventSelection,e),eventDrag:Tze(r.eventDrag,e),eventResize:Pze(r.eventResize,e)},j=Object.assign(Object.assign({},u),E);for(let C of a.pluginHooks.reducers)Object.assign(E,C(r,e,j));let T=jS(r,u),A=jS(E,u);!T&&A?i.trigger("loading",!0):T&&!A&&i.trigger("loading",!1),this.state=E,n.onAction&&n.onAction(e)}updateData(){let{props:e,state:n}=this,r=this.data,i=this.computeOptionsData(e.optionOverrides,n.dynamicOptionOverrides,e.calendarApi),s=this.computeCurrentViewData(n.currentViewType,i,e.optionOverrides,n.dynamicOptionOverrides),a=this.data=Object.assign(Object.assign(Object.assign({nowManager:this.nowManager,viewTitle:this.buildTitle(n.dateProfile,s.options,i.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},i),s),n),o=i.pluginHooks.optionChangeHandlers,c=r&&r.calendarOptions,u=i.calendarOptions;if(c&&c!==u){c.timeZone!==u.timeZone&&(n.eventSources=a.eventSources=xze(a.eventSources,n.dateProfile,a),n.eventStore=a.eventStore=k3(a.eventStore,r.dateEnv,a.dateEnv),n.renderableEventStore=a.renderableEventStore=k3(a.renderableEventStore,r.dateEnv,a.dateEnv));for(let d in o)(this.optionsForHandling.indexOf(d)!==-1||c[d]!==u[d])&&o[d](u[d],a)}this.optionsForHandling=[],e.onData&&e.onData(a)}computeOptionsData(e,n,r){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&n===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:i,pluginHooks:s,localeDefaults:a,availableLocaleData:o,extra:c}=this.processRawCalendarOptions(e,n);q3(c);let u=this.buildDateEnv(i.timeZone,i.locale,i.weekNumberCalculation,i.firstDay,i.weekText,s,o,i.defaultRangeSeparator),d=this.buildViewSpecs(s.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,a),f=this.buildTheme(i,s),h=this.parseToolbars(i,this.stableOptionOverrides,f,d,r);return this.stableCalendarOptionsData={calendarOptions:i,pluginHooks:s,dateEnv:u,viewSpecs:d,theme:f,toolbarConfig:h,localeDefaults:a,availableRawLocales:o.map}}processRawCalendarOptions(e,n){let{locales:r,locale:i}=yS([Am,e,n]),s=this.organizeRawLocales(r),a=s.map,o=this.buildLocale(i||s.defaultCode,a).options,c=this.buildPluginHooks(e.plugins||[],Gze),u=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},A3),E3),j3),c.listenerRefiners),c.optionRefiners),d={},f=yS([Am,o,e,n]),h={},p=this.currentCalendarOptionsInput,m=this.currentCalendarOptionsRefined,g=!1;for(let b in f)this.optionsForRefining.indexOf(b)===-1&&(f[b]===p[b]||Hc[b]&&b in p&&Hc[b](p[b],f[b]))?h[b]=m[b]:u[b]?(h[b]=u[b](f[b]),g=!0):d[b]=p[b];return g&&(this.currentCalendarOptionsInput=f,this.currentCalendarOptionsRefined=h,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=n),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:c,availableLocaleData:s,localeDefaults:o,extra:d}}_computeCurrentViewData(e,n,r,i){let s=n.viewSpecs[e];if(!s)throw new Error(`viewType "${e}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:a,extra:o}=this.processRawViewOptions(s,n.pluginHooks,n.localeDefaults,r,i);q3(o),this.nowManager.handleInput(n.dateEnv,a.now);let c=this.buildDateProfileGenerator({dateProfileGeneratorClass:s.optionDefaults.dateProfileGeneratorClass,nowManager:this.nowManager,duration:s.duration,durationUnit:s.durationUnit,usesMinMaxTime:s.optionDefaults.usesMinMaxTime,dateEnv:n.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:a.slotMinTime,slotMaxTime:a.slotMaxTime,showNonCurrentDates:a.showNonCurrentDates,dayCount:a.dayCount,dateAlignment:a.dateAlignment,dateIncrement:a.dateIncrement,hiddenDays:a.hiddenDays,weekends:a.weekends,validRangeInput:a.validRange,visibleRangeInput:a.visibleRange,fixedWeekCount:a.fixedWeekCount}),u=this.buildViewApi(e,this.getCurrentData,n.dateEnv);return{viewSpec:s,options:a,dateProfileGenerator:c,viewApi:u}}processRawViewOptions(e,n,r,i,s){let a=yS([Am,e.optionDefaults,r,i,e.optionOverrides,s]),o=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},A3),E3),j3),j5e),n.listenerRefiners),n.optionRefiners),c={},u=this.currentViewOptionsInput,d=this.currentViewOptionsRefined,f=!1,h={};for(let p in a)a[p]===u[p]||Hc[p]&&Hc[p](a[p],u[p])?c[p]=d[p]:(a[p]===this.currentCalendarOptionsInput[p]||Hc[p]&&Hc[p](a[p],this.currentCalendarOptionsInput[p])?p in this.currentCalendarOptionsRefined&&(c[p]=this.currentCalendarOptionsRefined[p]):o[p]?c[p]=o[p](a[p]):h[p]=a[p],f=!0);return f&&(this.currentViewOptionsInput=a,this.currentViewOptionsRefined=c),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:h}}}function Jze(t,e,n,r,i,s,a,o){let c=UW(e||a.defaultCode,a.map);return new L5e({calendarSystem:"gregory",timeZone:t,namedTimeZoneImpl:s.namedTimeZonedImpl,locale:c,weekNumberCalculation:n,firstDay:r,weekText:i,cmdFormatter:s.cmdFormatter,defaultSeparator:o})}function e$e(t,e){let n=e.themeClasses[t.themeSystem]||fc;return new n(t)}function t$e(t){let e=t.dateProfileGeneratorClass||uW;return new e(t)}function n$e(t,e,n){return new Dze(t,e,n)}function r$e(t){return ad(t,e=>e.ui)}function i$e(t,e,n){let r={"":e};for(let i in t){let s=t[i];s.sourceId&&n[s.sourceId]&&(r[i]=n[s.sourceId])}return r}function s$e(t){let{options:e}=t;return{eventUiSingleBase:bx({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:typeof e.eventOverlap=="boolean"?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},t),selectionConfig:bx({constraint:e.selectConstraint,overlap:typeof e.selectOverlap=="boolean"?e.selectOverlap:void 0,allow:e.selectAllow},t)}}function jS(t,e){for(let n of e.pluginHooks.isLoadingFuncs)if(n(t))return!0;return!1}function a$e(t){return y3e(t.options.businessHours,t)}function q3(t,e){for(let n in t)console.warn(`Unknown option '${n}'`)}class o$e extends zn{render(){let e=this.props.widgetGroups.map(n=>this.renderWidgetGroup(n));return ve("div",{className:"fc-toolbar-chunk"},...e)}renderWidgetGroup(e){let{props:n}=this,{theme:r}=this.context,i=[],s=!0;for(let a of e){let{buttonName:o,buttonClick:c,buttonText:u,buttonIcon:d,buttonHint:f}=a;if(o==="title")s=!1,i.push(ve("h2",{className:"fc-toolbar-title",id:n.titleId},n.title));else{let h=o===n.activeButton,p=!n.isTodayEnabled&&o==="today"||!n.isPrevEnabled&&o==="prev"||!n.isNextEnabled&&o==="next",m=[`fc-${o}-button`,r.getClass("button")];h&&m.push(r.getClass("buttonActive")),i.push(ve("button",{type:"button",title:typeof f=="function"?f(n.navUnit):f,disabled:p,"aria-pressed":h,className:m.join(" "),onClick:c},u||(d?ve("span",{className:d,role:"img"}):"")))}}if(i.length>1){let a=s&&r.getClass("buttonGroup")||"";return ve("div",{className:a},...i)}return i[0]}}class K3 extends zn{render(){let{model:e,extraClassName:n}=this.props,r=!1,i,s,a=e.sectionWidgets,o=a.center;return a.left?(r=!0,i=a.left):i=a.start,a.right?(r=!0,s=a.right):s=a.end,ve("div",{className:[n||"","fc-toolbar",r?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",i||[]),this.renderSection("center",o||[]),this.renderSection("end",s||[]))}renderSection(e,n){let{props:r}=this;return ve(o$e,{key:e,widgetGroups:n,title:r.title,navUnit:r.navUnit,activeButton:r.activeButton,isTodayEnabled:r.isTodayEnabled,isPrevEnabled:r.isPrevEnabled,isNextEnabled:r.isNextEnabled,titleId:r.titleId})}}class l$e extends zn{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,qa(this.props.elRef,e),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:e,state:n}=this,{aspectRatio:r}=e,i=["fc-view-harness",r||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],s="",a="";return r?n.availableWidth!==null?s=n.availableWidth/r:a=`${1/r*100}%`:s=e.height||"",ve("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:i.join(" "),style:{height:s,paddingBottom:a}},e.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class c$e extends Xh{constructor(e){super(e),this.handleSegClick=(n,r)=>{let{component:i}=this,{context:s}=i,a=Sh(r);if(a&&i.isValidSegDownEl(n.target)){let o=pi(n.target,".fc-event-forced-url"),c=o?o.querySelector("a[href]").href:"";s.emitter.trigger("eventClick",{el:r,event:new Dn(i.context,a.eventRange.def,a.eventRange.instance),jsEvent:n,view:s.viewApi}),c&&!n.defaultPrevented&&(window.location.href=c)}},this.destroy=ZU(e.el,"click",".fc-event",this.handleSegClick)}}class u$e extends Xh{constructor(e){super(e),this.handleEventElRemove=n=>{n===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(n,r)=>{Sh(r)&&(this.currentSegEl=r,this.triggerEvent("eventMouseEnter",n,r))},this.handleSegLeave=(n,r)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",n,r))},this.removeHoverListeners=I4e(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(e,n,r){let{component:i}=this,{context:s}=i,a=Sh(r);(!n||i.isValidSegDownEl(n.target))&&s.emitter.trigger(e,{el:r,event:new Dn(s,a.eventRange.def,a.eventRange.instance),jsEvent:n,view:s.viewApi})}}class d$e extends ld{constructor(){super(...arguments),this.buildViewContext=Ht(F5e),this.buildViewPropTransformers=Ht(h$e),this.buildToolbarProps=Ht(f$e),this.headerRef=Lo(),this.footerRef=Lo(),this.interactionsStore={},this.state={viewLabelId:d1()},this.registerInteractiveComponent=(e,n)=>{let r=V3e(e,n),a=[c$e,u$e].concat(this.props.pluginHooks.componentInteractions).map(o=>new o(r));this.interactionsStore[e.uid]=a,X2[e.uid]=r},this.unregisterInteractiveComponent=e=>{let n=this.interactionsStore[e.uid];if(n){for(let r of n)r.destroy();delete this.interactionsStore[e.uid]}delete X2[e.uid]},this.resizeRunner=new lN(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=e=>{let{options:n}=this.props;n.handleWindowResize&&e.target===window&&this.resizeRunner.request(n.windowResizeDelay)}}render(){let{props:e}=this,{toolbarConfig:n,options:r}=e,i=!1,s="",a;e.isHeightAuto||e.forPrint?s="":r.height!=null?i=!0:r.contentHeight!=null?s=r.contentHeight:a=Math.max(r.aspectRatio,.5);let o=this.buildViewContext(e.viewSpec,e.viewApi,e.options,e.dateProfileGenerator,e.dateEnv,e.nowManager,e.theme,e.pluginHooks,e.dispatch,e.getCurrentData,e.emitter,e.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),c=n.header&&n.header.hasTitle?this.state.viewLabelId:void 0;return ve(od.Provider,{value:o},ve(g1,{unit:"day"},u=>{let d=this.buildToolbarProps(e.viewSpec,e.dateProfile,e.dateProfileGenerator,e.currentDate,u,e.viewTitle);return ve(Wn,null,n.header&&ve(K3,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:n.header,titleId:c},d)),ve(l$e,{liquid:i,height:s,aspectRatio:a,labeledById:c},this.renderView(e),this.buildAppendContent()),n.footer&&ve(K3,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:n.footer,titleId:""},d)))}))}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map(r=>new r(e)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:n}=e.pluginHooks;for(let r in n)n[r](e[r],e)}componentDidUpdate(e){let{props:n}=this,{propSetHandlers:r}=n.pluginHooks;for(let i in r)n[i]!==e[i]&&r[i](n[i],n)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let e of this.calendarInteractions)e.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:e}=this,n=e.pluginHooks.viewContainerAppends.map(r=>r(e));return ve(Wn,{},...n)}renderView(e){let{pluginHooks:n}=e,{viewSpec:r}=e,i={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},s=this.buildViewPropTransformers(n.viewPropsTransformers);for(let o of s)Object.assign(i,o.transform(i,e));let a=r.component;return ve(a,Object.assign({},i))}}function f$e(t,e,n,r,i,s){let a=n.build(i,void 0,!1),o=n.buildPrev(e,r,!1),c=n.buildNext(e,r,!1);return{title:s,activeButton:t.type,navUnit:t.singleUnit,isTodayEnabled:a.isValid&&!$l(e.currentRange,i),isPrevEnabled:o.isValid,isNextEnabled:c.isValid}}function h$e(t){return t.map(e=>new e)}class p$e extends U3e{constructor(e,n={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=r=>{switch(r.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=r=>{this.currentData=r,this.renderRunner.request(r.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:r}=this;vx(()=>{qg(ve(F3e,{options:r.calendarOptions,theme:r.theme,emitter:r.emitter},(i,s,a,o)=>(this.setClassNames(i),this.setHeight(s),ve(aW.Provider,{value:this.customContentRenderId},ve(d$e,Object.assign({isHeightAuto:a,forPrint:o},r))))),this.el)})}else this.isRendered&&(this.isRendered=!1,qg(null,this.el),this.setClassNames([]),this.setHeight(""))},A4e(e),this.el=e,this.renderRunner=new lN(this.handleRenderRequest),new Zze({optionOverrides:n,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){vx(()=>{super.updateSize()})}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(e,n){this.currentDataManager.resetOptions(e,n)}setClassNames(e){if(!Gl(e,this.currentClassNames)){let{classList:n}=this.el;for(let r of this.currentClassNames)n.remove(r);for(let r of e)n.add(r);this.currentClassNames=e}}setHeight(e){QU(this.el,"height",e)}}const m$e=parseInt(String(Y.version).split(".")[0]),g$e=m$e<18;class DN extends P.Component{constructor(){super(...arguments),this.elRef=P.createRef(),this.isUpdating=!1,this.isUnmounting=!1,this.state={customRenderingMap:new Map},this.requestResize=()=>{this.isUnmounting||(this.cancelResize(),this.resizeId=requestAnimationFrame(()=>{this.doResize()}))}}render(){const e=[];for(const n of this.state.customRenderingMap.values())e.push(Y.createElement(v$e,{key:n.id,customRendering:n}));return Y.createElement("div",{ref:this.elRef},e)}componentDidMount(){this.isUnmounting=!1;const e=new ZLe;this.handleCustomRendering=e.handle.bind(e),this.calendar=new p$e(this.elRef.current,Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.calendar.render(),this.calendar.on("_beforeprint",()=>{Wm.flushSync(()=>{})});let n;e.subscribe(r=>{const i=Date.now(),s=!n;(g$e||s||this.isUpdating||this.isUnmounting||i-n<100?QW:Wm.flushSync)(()=>{this.setState({customRenderingMap:r},()=>{n=i,s?this.doResize():this.requestResize()})})})}componentDidUpdate(){this.isUpdating=!0,this.calendar.resetOptions(Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.isUpdating=!1}componentWillUnmount(){this.isUnmounting=!0,this.cancelResize(),this.calendar.destroy()}doResize(){this.calendar.updateSize()}cancelResize(){this.resizeId!==void 0&&(cancelAnimationFrame(this.resizeId),this.resizeId=void 0)}getApi(){return this.calendar}}DN.act=QW;class v$e extends P.PureComponent{render(){const{customRendering:e}=this.props,{generatorMeta:n}=e,r=typeof n=="function"?n(e.renderProps):n;return Wm.createPortal(r,e.containerEl)}}function QW(t){t()}class y$e extends cd{constructor(){super(...arguments),this.headerElRef=Lo()}renderSimpleLayout(e,n){let{props:r,context:i}=this,s=[],a=z3(i.options);return e&&s.push({type:"header",key:"header",isSticky:a,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),s.push({type:"body",key:"body",liquid:!0,chunk:{content:n}}),ve(C3,{elClasses:["fc-daygrid"],viewSpec:i.viewSpec},ve(LW,{liquid:!r.isHeightAuto&&!r.forPrint,collapsibleWidth:r.forPrint,cols:[],sections:s}))}renderHScrollLayout(e,n,r,i){let s=this.context.pluginHooks.scrollGridImpl;if(!s)throw new Error("No ScrollGrid implementation");let{props:a,context:o}=this,c=!a.forPrint&&z3(o.options),u=!a.forPrint&&ILe(o.options),d=[];return e&&d.push({type:"header",key:"header",isSticky:c,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),d.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:n}]}),u&&d.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:DLe}]}),ve(C3,{elClasses:["fc-daygrid"],viewSpec:o.viewSpec},ve(s,{liquid:!a.isHeightAuto&&!a.forPrint,forPrint:a.forPrint,collapsibleWidth:a.forPrint,colGroups:[{cols:[{span:r,minWidth:i}]}],sections:d}))}}function d0(t,e){let n=[];for(let r=0;r<e;r+=1)n[r]=[];for(let r of t)n[r.row].push(r);return n}function My(t,e){let n=[];for(let r=0;r<e;r+=1)n[r]=[];for(let r of t)n[r.firstCol].push(r);return n}function G3(t,e){let n=[];if(t){for(let r=0;r<e;r+=1)n[r]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(let r of t.segs)n[r.row].segs.push(r)}else for(let r=0;r<e;r+=1)n[r]=null;return n}const XW=Rr({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function ZW(t){let{display:e}=t.eventRange.ui;return e==="list-item"||e==="auto"&&!t.eventRange.def.allDay&&t.firstCol===t.lastCol&&t.isStart&&t.isEnd}class JW extends zn{render(){let{props:e}=this;return ve(zW,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:XW,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class eH extends zn{render(){let{props:e,context:n}=this,{options:r}=n,{seg:i}=e,s=r.eventTimeFormat||XW,a=wW(i,s,n,!0,e.defaultDisplayEventEnd);return ve(NN,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:_W(e.seg,n),defaultGenerator:b$e,timeText:a,isResizing:!1,isDateSelecting:!1}))}}function b$e(t){return ve(Wn,null,ve("div",{className:"fc-daygrid-event-dot",style:{borderColor:t.borderColor||t.backgroundColor}}),t.timeText&&ve("div",{className:"fc-event-time"},t.timeText),ve("div",{className:"fc-event-title"},t.event.title||ve(Wn,null," ")))}class x$e extends zn{constructor(){super(...arguments),this.compileSegs=Ht(w$e)}render(){let{props:e}=this,{allSegs:n,invisibleSegs:r}=this.compileSegs(e.singlePlacements);return ve(HLe,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:n,hiddenSegs:r,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let i=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return ve(Wn,null,n.map(s=>{let a=s.eventRange.instance.instanceId;return ve("div",{className:"fc-daygrid-event-harness",key:a,style:{visibility:i[a]?"hidden":""}},ZW(s)?ve(eH,Object.assign({seg:s,isDragging:!1,isSelected:a===e.eventSelection,defaultDisplayEventEnd:!1},Em(s,e.todayRange))):ve(JW,Object.assign({seg:s,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:a===e.eventSelection,defaultDisplayEventEnd:!1},Em(s,e.todayRange))))}))}})}}function w$e(t){let e=[],n=[];for(let r of t)e.push(r.seg),r.isVisible||n.push(r.seg);return{allSegs:e,invisibleSegs:n}}const _$e=Rr({week:"narrow"});class S$e extends cd{constructor(){super(...arguments),this.rootElRef=Lo(),this.state={dayNumberId:d1()},this.handleRootEl=e=>{qa(this.rootElRef,e),qa(this.props.elRef,e)}}render(){let{context:e,props:n,state:r,rootElRef:i}=this,{options:s,dateEnv:a}=e,{date:o,dateProfile:c}=n;const u=n.showDayNumber&&E$e(o,c.currentRange,a);return ve($W,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...n.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},n.extraDataAttrs),n.showDayNumber?{"aria-labelledby":r.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:A$e,date:o,dateProfile:c,todayRange:n.todayRange,showDayNumber:n.showDayNumber,isMonthStart:u,extraRenderProps:n.extraRenderProps},(d,f)=>ve("div",{ref:n.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:n.minHeight}},n.showWeekNumber&&ve(VLe,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:Z2(e,o,"week"),date:o,defaultFormat:_$e}),!f.isDisabled&&(n.showDayNumber||FW(s)||n.forceDayTop)?ve("div",{className:"fc-daygrid-day-top"},ve(d,{elTag:"a",elClasses:["fc-daygrid-day-number",u&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},Z2(e,o)),{id:r.dayNumberId})})):n.showDayNumber?ve("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},ve("a",{className:"fc-daygrid-day-number"}," ")):void 0,ve("div",{className:"fc-daygrid-day-events",ref:n.fgContentElRef},n.fgContent,ve("div",{className:"fc-daygrid-day-bottom",style:{marginTop:n.moreMarginTop}},ve(x$e,{allDayDate:o,singlePlacements:n.singlePlacements,moreCnt:n.moreCnt,alignmentElRef:i,alignGridTop:!n.showDayNumber,extraDateSpan:n.extraDateSpan,dateProfile:n.dateProfile,eventSelection:n.eventSelection,eventDrag:n.eventDrag,eventResize:n.eventResize,todayRange:n.todayRange}))),ve("div",{className:"fc-daygrid-day-bg"},n.bgContent)))}}function A$e(t){return t.dayNumberText||ve(Wn,null," ")}function E$e(t,e,n){const{start:r,end:i}=e,s=Yl(i,-1),a=n.getYear(r),o=n.getMonth(r),c=n.getYear(s),u=n.getMonth(s);return!(a===c&&o===u)&&(t.valueOf()===r.valueOf()||n.getDay(t)===1&&t.valueOf()<i.valueOf())}function tH(t){return t.eventRange.instance.instanceId+":"+t.firstCol}function nH(t){return tH(t)+":"+t.lastCol}function j$e(t,e,n,r,i,s,a){let o=new P$e(x=>{let w=t[x.index].eventRange.instance.instanceId+":"+x.span.start+":"+(x.span.end-1);return i[w]||1});o.allowReslicing=!0,o.strictOrder=r,e===!0||n===!0?(o.maxCoord=s,o.hiddenConsumes=!0):typeof e=="number"?o.maxStackCnt=e:typeof n=="number"&&(o.maxStackCnt=n,o.hiddenConsumes=!0);let c=[],u=[];for(let x=0;x<t.length;x+=1){let w=t[x],_=nH(w);i[_]!=null?c.push({index:x,span:{start:w.firstCol,end:w.lastCol+1}}):u.push(w)}let d=o.addSegs(c),f=o.toRects(),{singleColPlacements:h,multiColPlacements:p,leftoverMargins:m}=C$e(f,t,a),g=[],b=[];for(let x of u){p[x.firstCol].push({seg:x,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let w=x.firstCol;w<=x.lastCol;w+=1)h[w].push({seg:Af(x,w,w+1,a),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let x=0;x<a.length;x+=1)g.push(0);for(let x of d){let w=t[x.index],_=x.span;p[_.start].push({seg:Af(w,_.start,_.end,a),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let E=_.start;E<_.end;E+=1)g[E]+=1,h[E].push({seg:Af(w,E,E+1,a),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let x=0;x<a.length;x+=1)b.push(m[x]);return{singleColPlacements:h,multiColPlacements:p,moreCnts:g,moreMarginTops:b}}function C$e(t,e,n){let r=T$e(t,n.length),i=[],s=[],a=[];for(let o=0;o<n.length;o+=1){let c=r[o],u=[],d=0,f=0;for(let p of c){let m=e[p.index];u.push({seg:Af(m,o,o+1,n),isVisible:!0,isAbsolute:!1,absoluteTop:p.levelCoord,marginTop:p.levelCoord-d}),d=p.levelCoord+p.thickness}let h=[];d=0,f=0;for(let p of c){let m=e[p.index],g=p.span.end-p.span.start>1,b=p.span.start===o;f+=p.levelCoord-d,d=p.levelCoord+p.thickness,g?(f+=p.thickness,b&&h.push({seg:Af(m,p.span.start,p.span.end,n),isVisible:!0,isAbsolute:!0,absoluteTop:p.levelCoord,marginTop:0})):b&&(h.push({seg:Af(m,p.span.start,p.span.end,n),isVisible:!0,isAbsolute:!1,absoluteTop:p.levelCoord,marginTop:f}),f=0)}i.push(u),s.push(h),a.push(f)}return{singleColPlacements:i,multiColPlacements:s,leftoverMargins:a}}function T$e(t,e){let n=[];for(let r=0;r<e;r+=1)n.push([]);for(let r of t)for(let i=r.span.start;i<r.span.end;i+=1)n[i].push(r);return n}function Af(t,e,n,r){if(t.firstCol===e&&t.lastCol===n-1)return t;let i=t.eventRange,s=i.range,a=_h(s,{start:r[e].date,end:zr(r[n-1].date,1)});return Object.assign(Object.assign({},t),{firstCol:e,lastCol:n-1,eventRange:{def:i.def,ui:Object.assign(Object.assign({},i.ui),{durationEditable:!1}),instance:i.instance,range:a},isStart:t.isStart&&a.start.valueOf()===s.start.valueOf(),isEnd:t.isEnd&&a.end.valueOf()===s.end.valueOf()})}class P$e extends sLe{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const n=super.addSegs(e),{entriesByLevel:r}=this,i=s=>!this.forceHidden[jm(s)];for(let s=0;s<r.length;s+=1)r[s]=r[s].filter(i);return n}handleInvalidInsertion(e,n,r){const{entriesByLevel:i,forceHidden:s}=this,{touchingEntry:a,touchingLevel:o,touchingLateral:c}=e;if(this.hiddenConsumes&&a){const u=jm(a);if(!s[u])if(this.allowReslicing){const d=Object.assign(Object.assign({},a),{span:NW(a.span,n.span)}),f=jm(d);s[f]=!0,i[o][c]=d,r.push(d),this.splitEntry(a,n,r)}else s[u]=!0,r.push(a)}super.handleInvalidInsertion(e,n,r)}}class rH extends cd{constructor(){super(...arguments),this.cellElRefs=new ou,this.frameElRefs=new ou,this.fgElRefs=new ou,this.segHarnessRefs=new ou,this.rootElRef=Lo(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:n,context:r}=this,{options:i}=r,s=e.cells.length,a=My(e.businessHourSegs,s),o=My(e.bgEventSegs,s),c=My(this.getHighlightSegs(),s),u=My(this.getMirrorSegs(),s),{singleColPlacements:d,multiColPlacements:f,moreCnts:h,moreMarginTops:p}=j$e(S3e(e.fgEventSegs,i.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,i.eventOrderStrict,n.segHeights,n.maxContentHeight,e.cells),m=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return ve("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((g,b)=>{let x=this.renderFgSegs(b,e.forPrint?d[b]:f[b],e.todayRange,m),w=this.renderFgSegs(b,N$e(u[b],f),e.todayRange,{},!!e.eventDrag,!!e.eventResize,!1);return ve(S$e,{key:g.key,elRef:this.cellElRefs.createRef(g.key),innerElRef:this.frameElRefs.createRef(g.key),dateProfile:e.dateProfile,date:g.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&b===0,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:g.extraRenderProps,extraDataAttrs:g.extraDataAttrs,extraClassNames:g.extraClassNames,extraDateSpan:g.extraDateSpan,moreCnt:h[b],moreMarginTop:p[b],singlePlacements:d[b],fgContentElRef:this.fgElRefs.createRef(g.key),fgContent:ve(Wn,null,ve(Wn,null,x),ve(Wn,null,w)),bgContent:ve(Wn,null,this.renderFillSegs(c[b],"highlight"),this.renderFillSegs(a[b],"non-business"),this.renderFillSegs(o[b],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,n){let r=this.props;this.updateSizing(!da(e,r))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,n,r,i,s,a,o){let{context:c}=this,{eventSelection:u}=this.props,{framePositions:d}=this.state,f=this.props.cells.length===1,h=s||a||o,p=[];if(d)for(let m of n){let{seg:g}=m,{instanceId:b}=g.eventRange.instance,x=m.isVisible&&!i[b],w=m.isAbsolute,_="",E="";w&&(c.isRtl?(E=0,_=d.lefts[g.lastCol]-d.lefts[g.firstCol]):(_=0,E=d.rights[g.firstCol]-d.rights[g.lastCol])),p.push(ve("div",{className:"fc-daygrid-event-harness"+(w?" fc-daygrid-event-harness-abs":""),key:tH(g),ref:h?null:this.segHarnessRefs.createRef(nH(g)),style:{visibility:x?"":"hidden",marginTop:w?"":m.marginTop,top:w?m.absoluteTop:"",left:_,right:E}},ZW(g)?ve(eH,Object.assign({seg:g,isDragging:s,isSelected:b===u,defaultDisplayEventEnd:f},Em(g,r))):ve(JW,Object.assign({seg:g,isDragging:s,isResizing:a,isDateSelecting:o,isSelected:b===u,defaultDisplayEventEnd:f},Em(g,r)))))}return p}renderFillSegs(e,n){let{isRtl:r}=this.context,{todayRange:i}=this.props,{framePositions:s}=this.state,a=[];if(s)for(let o of e){let c=r?{right:0,left:s.lefts[o.lastCol]-s.lefts[o.firstCol]}:{left:0,right:s.rights[o.firstCol]-s.rights[o.lastCol]};a.push(ve("div",{key:P3e(o.eventRange),className:"fc-daygrid-bg-harness",style:c},n==="bg-event"?ve(zLe,Object.assign({seg:o},Em(o,i))):FLe(n)))}return ve(Wn,{},...a)}updateSizing(e){let{props:n,state:r,frameElRefs:i}=this;if(!n.forPrint&&n.clientWidth!==null){if(e){let c=n.cells.map(u=>i.currentMap[u.key]);if(c.length){let u=this.rootElRef.current,d=new wx(u,c,!0,!1);(!r.framePositions||!r.framePositions.similarTo(d))&&this.setState({framePositions:new wx(u,c,!0,!1)})}}const s=this.state.segHeights,a=this.querySegHeights(),o=n.dayMaxEvents===!0||n.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},s),a),maxContentHeight:o?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,n={};for(let r in e){let i=Math.round(e[r].getBoundingClientRect().height);n[r]=Math.max(n[r]||0,i)}return n}computeMaxContentHeight(){let e=this.props.cells[0].key,n=this.cellElRefs.currentMap[e],r=this.fgElRefs.currentMap[e];return n.getBoundingClientRect().bottom-r.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(n=>e[n.key])}}rH.addStateEquality({segHeights:da});function N$e(t,e){if(!t.length)return[];let n=k$e(e);return t.map(r=>({seg:r,isVisible:!0,isAbsolute:!0,absoluteTop:n[r.eventRange.instance.instanceId],marginTop:0}))}function k$e(t){let e={};for(let n of t)for(let r of n)e[r.seg.eventRange.instance.instanceId]=r.absoluteTop;return e}class D$e extends cd{constructor(){super(...arguments),this.splitBusinessHourSegs=Ht(d0),this.splitBgEventSegs=Ht(I$e),this.splitFgEventSegs=Ht(d0),this.splitDateSelectionSegs=Ht(d0),this.splitEventDrag=Ht(G3),this.splitEventResize=Ht(G3),this.rowRefs=new ou}render(){let{props:e,context:n}=this,r=e.cells.length,i=this.splitBusinessHourSegs(e.businessHourSegs,r),s=this.splitBgEventSegs(e.bgEventSegs,r),a=this.splitFgEventSegs(e.fgEventSegs,r),o=this.splitDateSelectionSegs(e.dateSelectionSegs,r),c=this.splitEventDrag(e.eventDrag,r),u=this.splitEventResize(e.eventResize,r),d=r>=7&&e.clientWidth?e.clientWidth/n.options.aspectRatio/6:null;return ve(g1,{unit:"day"},(f,h)=>ve(Wn,null,e.cells.map((p,m)=>ve(rH,{ref:this.rowRefs.createRef(m),key:p.length?p[0].date.toISOString():m,showDayNumbers:r>1,showWeekNumbers:e.showWeekNumbers,todayRange:h,dateProfile:e.dateProfile,cells:p,renderIntro:e.renderRowIntro,businessHourSegs:i[m],eventSelection:e.eventSelection,bgEventSegs:s[m],fgEventSegs:a[m],dateSelectionSegs:o[m],eventDrag:c[m],eventResize:u[m],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:d,forPrint:e.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],n=e?e.closest(".fc-daygrid-body"):null;n&&(this.rootEl=n,this.context.registerInteractiveComponent(this,{el:n,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new wx(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new wx(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,n){let{colPositions:r,rowPositions:i}=this,s=r.leftToIndex(e),a=i.topToIndex(n);if(a!=null&&s!=null){let o=this.props.cells[a][s];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(a,s),allDay:!0},o.extraDateSpan),dayEl:this.getCellEl(a,s),rect:{left:r.lefts[s],right:r.rights[s],top:i.tops[a],bottom:i.bottoms[a]},layer:0}}return null}getCellEl(e,n){return this.rowRefs.currentMap[e].getCellEls()[n]}getCellRange(e,n){let r=this.props.cells[e][n].date,i=zr(r,1);return{start:r,end:i}}}function I$e(t,e){return d0(t.filter(O$e),e)}function O$e(t){return t.eventRange.def.allDay}class M$e extends cd{constructor(){super(...arguments),this.elRef=Lo(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:n,dayMaxEvents:r,expandRows:i}=e,s=r===!0||n===!0;s&&!i&&(s=!1,n=null,r=null);let a=["fc-daygrid-body",s?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",i?"":"fc-daygrid-body-natural"];return ve("div",{ref:this.elRef,className:a.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},ve("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:i?e.clientHeight:""}},e.colGroupNode,ve("tbody",{role:"presentation"},ve(D$e,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:r,dayMaxEventRows:n,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=R$e(this.elRef.current,this.props.dateProfile);if(e){const n=e.closest(".fc-daygrid-body"),r=n.closest(".fc-scroller"),i=e.getBoundingClientRect().top-n.getBoundingClientRect().top;r.scrollTop=i?i+1:0}this.needsScrollReset=!1}}}function R$e(t,e){let n;return e.currentRangeUnit.match(/year|month/)&&(n=t.querySelector(`[data-date="${u5e(e.currentDate)}-01"]`)),n||(n=t.querySelector(`[data-date="${fN(e.currentDate)}"]`)),n}class L$e extends mLe{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,n){return n.sliceRange(e)}}class z$e extends cd{constructor(){super(...arguments),this.slicer=new L$e,this.tableRef=Lo()}render(){let{props:e,context:n}=this;return ve(M$e,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,n,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}class $$e extends y$e{constructor(){super(...arguments),this.buildDayTableModel=Ht(F$e),this.headerRef=Lo(),this.tableRef=Lo()}render(){let{options:e,dateProfileGenerator:n}=this.context,{props:r}=this,i=this.buildDayTableModel(r.dateProfile,n),s=e.dayHeaders&&ve(dLe,{ref:this.headerRef,dateProfile:r.dateProfile,dates:i.headerDates,datesRepDistinctDays:i.rowCnt===1}),a=o=>ve(z$e,{ref:this.tableRef,dateProfile:r.dateProfile,dayTableModel:i,businessHours:r.businessHours,dateSelection:r.dateSelection,eventStore:r.eventStore,eventUiBases:r.eventUiBases,eventSelection:r.eventSelection,eventDrag:r.eventDrag,eventResize:r.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:o.tableColGroupNode,tableMinWidth:o.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!r.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:o.clientWidth,clientHeight:o.clientHeight,forPrint:r.forPrint});return e.dayMinWidth?this.renderHScrollLayout(s,a,i.colCnt,e.dayMinWidth):this.renderSimpleLayout(s,a)}}function F$e(t,e){let n=new hLe(t.renderRange,e);return new pLe(n,/year|month|week/.test(t.currentRangeUnit))}class V$e extends uW{buildRenderRange(e,n,r){let i=super.buildRenderRange(e,n,r),{props:s}=this;return B$e({currentRange:i,snapToWeek:/^(year|month)$/.test(n),fixedWeekCount:s.fixedWeekCount,dateEnv:s.dateEnv})}}function B$e(t){let{dateEnv:e,currentRange:n}=t,{start:r,end:i}=n,s;if(t.snapToWeek&&(r=e.startOfWeek(r),s=e.startOfWeek(i),s.valueOf()!==i.valueOf()&&(i=b3(s,1))),t.fixedWeekCount){let a=e.startOfWeek(e.startOfMonth(zr(n.end,-1))),o=Math.ceil(Z4e(a,i));i=b3(i,6-o)}return{start:r,end:i}}var U$e=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';KU(U$e);var iH=dc({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:$$e,dateProfileGeneratorClass:V$e},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}}),sH={code:"es",week:{dow:1,doy:4},buttonText:{prev:"Ant",next:"Sig",today:"Hoy",year:"Año",month:"Mes",week:"Semana",day:"Día",list:"Agenda"},buttonHints:{prev:"$0 antes",next:"$0 siguiente",today(t){return t==="Día"?"Hoy":(t==="Semana"?"Esta":"Este")+" "+t.toLocaleLowerCase()}},viewHint(t){return"Vista "+(t==="Semana"?"de la":"del")+" "+t.toLocaleLowerCase()},weekText:"Sm",weekTextLong:"Semana",allDayText:"Todo el día",moreLinkText:"más",moreLinkHint(t){return`Mostrar ${t} eventos más`},noEventsText:"No hay eventos para mostrar",navLinkHint:"Ir al $0",closeHint:"Cerrar",timeHint:"La hora",eventHint:"Evento"};const W$e=(t,e)=>{const n=[],r=new Date,i=r.getFullYear();return t.forEach(s=>{const a=s.category==="Tratamiento"?"#007AFF":"#AF52DE";if(e==="Maternidad"&&s.trigger.type==="age"&&s.trigger.days)s.trigger.days.forEach(o=>{const c=new Date;c.setDate(r.getDate()+o),n.push({title:s.name,start:c,backgroundColor:a,borderColor:a})});else if(e==="Adultos"&&s.trigger.type==="fixed_date_period"&&s.trigger.month&&s.trigger.week){const o=(s.trigger.week-1)*7+1,c=new Date(i,s.trigger.month-1,o);n.push({title:s.name,start:c,backgroundColor:a,borderColor:a})}}),n},H$e=({isOpen:t,onClose:e,activities:n,targetGroup:r})=>{const i=Y.useMemo(()=>W$e(n,r),[n,r]);return l.jsx(nt,{isOpen:t,onClose:e,title:"",children:l.jsxs(On.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full max-w-2xl mx-auto p-4 sm:p-0",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-white leading-none",children:"Previsualización del Plan"}),l.jsx("p",{className:"text-zinc-400 mt-2",children:r==="Maternidad"?"Este calendario simula las fechas de las actividades asumiendo un nacimiento el día de hoy.":"Este calendario muestra la distribución de las actividades a lo largo del año actual."})]}),l.jsx("div",{className:"h-[55vh] sm:h-[60vh] text-white",children:l.jsx(DN,{plugins:[iH],initialView:"dayGridMonth",locale:sH,events:i,height:"100%",headerToolbar:{left:"prev,next",center:"title",right:"today"}})}),l.jsx("div",{className:"flex justify-end mt-6",children:l.jsx("button",{onClick:e,className:"px-6 py-3 bg-brand-blue text-white font-bold rounded-xl w-full sm:w-auto",children:"Cerrar"})})]})})},q$e=({targetGroup:t,activityType:e,onSaveActivity:n,existingActivity:r,clearEditing:i})=>{const{products:s,addProduct:a}=Ze(),[o,c]=P.useState(""),[u,d]=P.useState(""),[f,h]=P.useState(""),[p,m]=P.useState(!1),[g,b]=P.useState(null),[x,w]=P.useState(new Set),[_,E]=P.useState(""),[j,T]=P.useState(null),A=["0","8","15","21","30","45","60","75","90","105","120"],z=e==="Control"?t==="Maternidad"?["Cura de Ombligo","Descorne","Castración","Hematología","Coprología","FAMACHA"]:["Hematología","Coprología","Arreglo Podal","FAMACHA"]:t==="Maternidad"?["Coxidioestático","Desparasitación","Vacuna Clostridial"]:["Desparasitación","Vacuna Leptospirosis","Vacuna Clostridial","Vacuna Rabia"],M=P.useMemo(()=>s.reduce((Z,re)=>{const he=re.category||"Otro";return Z[he]||(Z[he]=[]),Z[he].push(re),Z},{}),[s]);P.useEffect(()=>{r?(c(r.name),e==="Tratamiento"&&(d(r.productId||""),h(r.complementaryProductId||"")),t==="Maternidad"&&r.trigger.days&&w(new Set(r.trigger.days.map(String))),t==="Adultos"&&r.trigger.month&&r.trigger.week&&w(new Set([`${r.trigger.month}-${r.trigger.week}`]))):G()},[r,e,t]);const G=()=>{c(""),d(""),h(""),w(new Set),E(""),b(null),i()},K=Z=>{Z.trim()&&w(re=>{const he=new Set(re);return he.has(Z)?he.delete(Z):he.add(Z),he})},B=()=>{_&&!isNaN(Number(_))&&(K(_),E(""))},U=async Z=>{await a(Z),m(!1)},F=()=>{if(b(null),!o.trim()){b("El nombre es obligatorio.");return}if(e==="Tratamiento"&&!u){b("Debe seleccionar un producto principal.");return}if(x.size===0){b("Debe seleccionar al menos un tiempo de aplicación.");return}const Z=[],re={category:e,name:o};if(e==="Tratamiento"&&(u&&(re.productId=u),f&&(re.complementaryProductId=f)),t==="Maternidad"){const he={type:"age",days:Array.from(x).map(Number).sort((ye,De)=>ye-De)};Z.push({...re,trigger:he})}else Array.from(x).forEach(he=>{const[ye,De]=he.split("-").map(Number),We={type:"fixed_date_period",month:ye,week:De};Z.push({...re,trigger:We})});Z.forEach(he=>n(he,!!r)),G()},q=Array.from(x).filter(Z=>!A.includes(Z));return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("h3",{className:"text-xl font-semibold text-white",children:["Añadir ",e]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{list:"activity-names-list",value:o,onChange:Z=>c(Z.target.value),placeholder:`Nombre del ${e}...`,className:"w-full bg-zinc-800 p-3 rounded-lg text-base"}),l.jsx("datalist",{id:"activity-names-list",children:z.map(Z=>l.jsx("option",{value:Z},Z))}),e==="Control"&&l.jsx("button",{type:"button",onClick:()=>alert("Funcionalidad para crear nuevos tipos de control en desarrollo."),className:"flex-shrink-0 p-3 bg-brand-orange/80 text-white rounded-lg",children:l.jsx(rs,{size:20})})]}),e==="Tratamiento"&&l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{value:u,onChange:Z=>d(Z.target.value),className:"w-full bg-zinc-800 p-3 rounded-lg text-base appearance-none",children:[l.jsx("option",{value:"",disabled:!0,children:"Producto Principal..."}),Object.entries(M).map(([Z,re])=>l.jsx("optgroup",{label:Z,children:re.map(he=>l.jsx("option",{value:he.id,children:he.name},he.id))},Z))]}),l.jsx("button",{type:"button",onClick:()=>m(!0),className:"flex-shrink-0 p-3 bg-brand-orange text-white rounded-lg",children:l.jsx(rs,{size:20})})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{value:f,onChange:Z=>h(Z.target.value),className:"w-full bg-zinc-800 p-3 rounded-lg text-base appearance-none",children:[l.jsx("option",{value:"",children:"Producto Complementario (Opcional)..."}),Object.entries(M).map(([Z,re])=>l.jsx("optgroup",{label:Z,children:re.map(he=>l.jsx("option",{value:he.id,children:he.name},he.id))},Z))]}),l.jsx("button",{type:"button",onClick:()=>m(!0),className:"flex-shrink-0 p-3 bg-brand-orange/50 text-white rounded-lg",children:l.jsx(rs,{size:20})})]})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("label",{className:"text-base font-medium text-zinc-400",children:"Tiempos de Aplicación (Selecciona uno o varios)"}),t==="Maternidad"?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex flex-wrap gap-2",children:[A.map(Z=>l.jsx("button",{type:"button",onClick:()=>K(Z),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-colors ${x.has(Z)?"bg-zinc-200 text-black":"bg-zinc-700 text-zinc-300"}`,children:Z==="0"?"Nacimiento":`${Z} días`},Z)),q.map(Z=>l.jsxs("button",{type:"button",onClick:()=>K(Z),className:"flex items-center gap-1.5 px-4 py-2 text-sm font-semibold rounded-lg bg-zinc-200 text-black",children:[Z," días ",l.jsx(Fo,{size:16})]},`manual-${Z}`))]}),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[l.jsx("input",{type:"number",value:_,onChange:Z=>E(Z.target.value),placeholder:"Día manual...",className:"w-full bg-zinc-800 p-3 rounded-lg text-base"}),l.jsx("button",{type:"button",onClick:B,className:"px-5 py-3 bg-zinc-700 text-white font-semibold rounded-lg text-sm hover:bg-zinc-600",children:"Agregar"})]})]}):l.jsx("div",{className:"p-2 bg-zinc-800 rounded-lg",children:l.jsx(t0,{mode:"wait",children:j?l.jsxs(On.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:()=>T(null),className:"p-2 text-zinc-400 hover:bg-zinc-700 rounded-md",children:l.jsx(nr,{size:16})}),l.jsx("h4",{className:"font-bold text-white",children:new Date(0,j-1).toLocaleString("es-VE",{month:"long"})})]}),l.jsx("div",{className:"grid grid-cols-4 gap-2",children:[1,2,3,4].map(Z=>{const re=`${j}-${Z}`,he=x.has(re);return l.jsxs("button",{type:"button",onClick:()=>K(re),className:`py-3 px-2 text-sm font-semibold rounded-md transition-colors ${he?"bg-teal-500 text-white":"bg-zinc-700 text-zinc-300 hover:bg-zinc-600"}`,children:["Semana ",Z]},Z)})})]},"weeks-view"):l.jsx(On.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"grid grid-cols-4 gap-2",children:[...Array(12)].map((Z,re)=>{const he=re+1,ye=new Date(0,re).toLocaleString("es-VE",{month:"short"}),De=Array.from(x).some(We=>We.startsWith(`${he}-`));return l.jsxs("button",{type:"button",onClick:()=>T(he),className:"relative text-center py-3 px-2 text-sm font-semibold rounded-md bg-zinc-700 hover:bg-zinc-600 text-zinc-300 transition-colors",children:[De&&l.jsx("span",{className:"absolute top-1.5 right-1.5 w-1.5 h-1.5 bg-brand-green rounded-full"}),ye.charAt(0).toUpperCase()+ye.slice(1)]},he)})},"months-view")})})]}),g&&l.jsxs("p",{className:"text-sm text-red-400 flex items-center gap-2",children:[l.jsx(Vt,{size:16})," ",g]}),l.jsx("button",{type:"button",onClick:F,className:"w-full py-3 bg-brand-orange text-black font-bold rounded-lg text-base mt-4",children:r?"Actualizar Actividad":"Añadir a la Lista"}),l.jsx(nt,{isOpen:p,onClose:()=>m(!1),title:"Crear Producto",children:l.jsx(aN,{onSave:U,onCancel:()=>m(!1)})})]})},K$e=({onSave:t,onCancel:e})=>{const[n,r]=P.useState(1),[i,s]=P.useState(""),[a,o]=P.useState(""),[c,u]=P.useState("Maternidad"),[d,f]=P.useState(new Set),[h,p]=P.useState([]),[m,g]=P.useState(null),[b,x]=P.useState(null),[w,_]=P.useState(!1),[E,j]=P.useState("Tratamiento"),[T,A]=P.useState(!1),C=["Cabritonas","Cabras","Reproductores","Machos de Levante"],D=G=>{f(K=>{const B=new Set(K);return B.has(G)?B.delete(G):B.add(G),B})},O=(G,K)=>{p(K&&m?B=>B.map(U=>U.tempId===m.tempId?{...G,tempId:U.tempId}:U):B=>[...B,{...G,tempId:Date.now()}])},L=G=>{p(K=>K.filter(B=>B.tempId!==G))},z=async()=>{if(!i.trim()){x("El nombre del plan es obligatorio.");return}if(c==="Adultos"&&d.size===0){x("Debe seleccionar al menos una categoría de adulto.");return}if(h.length===0){x("Debe añadir al menos una actividad al plan.");return}x(null),_(!0);try{const G=h.map(({tempId:B,...U})=>U),K={name:i,description:a,targetGroup:c,adultsSubgroup:c==="Adultos"?Array.from(d):void 0};await t(K,G)}catch{x("No se pudo guardar el plan."),_(!1)}},M=()=>n===1?l.jsxs(On.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:50},transition:{duration:.3},className:"space-y-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Crear Plan Sanitario"}),l.jsx("p",{className:"text-zinc-400",children:"Paso 1: Define tu plan"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("input",{type:"text",value:i,onChange:G=>s(G.target.value),placeholder:"Nombre del Plan",className:"w-full bg-zinc-800 p-3 rounded-xl text-base"}),l.jsx("input",{type:"text",value:a,onChange:G=>o(G.target.value),placeholder:"Descripción (Opcional)",className:"w-full bg-zinc-800 p-3 rounded-xl text-base"}),l.jsxs("div",{children:[l.jsx("label",{className:"text-base font-medium text-zinc-400 mb-2 block",children:"Grupo Objetivo"}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("button",{type:"button",onClick:()=>u("Maternidad"),className:`p-4 rounded-2xl border-2 flex flex-col items-center gap-2 transition-all ${c==="Maternidad"?"bg-teal-500/20 border-teal-500 scale-105":"bg-zinc-800/50 border-zinc-700"}`,children:[l.jsx(Gee,{className:"w-8 h-8 text-teal-400"}),l.jsx("span",{className:"font-semibold text-white",children:"Maternidad"})]}),l.jsxs("button",{type:"button",onClick:()=>u("Adultos"),className:`p-4 rounded-2xl border-2 flex flex-col items-center gap-2 transition-all ${c==="Adultos"?"bg-pink-500/20 border-pink-500 scale-105":"bg-zinc-800/50 border-zinc-700"}`,children:[l.jsx(Xee,{className:"w-8 h-8 text-pink-400"}),l.jsx("span",{className:"font-semibold text-white",children:"Rebaño Adulto"})]})]})]})]}),b&&l.jsxs("p",{className:"text-sm text-red-400 flex items-center gap-2 mt-4",children:[l.jsx(Vt,{size:16})," ",b]}),l.jsxs("div",{className:"flex flex-col sm:flex-row-reverse sm:justify-start gap-3 pt-4",children:[l.jsx("button",{onClick:()=>{i.trim()?(r(2),x(null)):x("El nombre del plan es obligatorio.")},className:"w-full sm:w-auto px-5 py-3 bg-brand-orange text-black font-bold rounded-xl flex items-center justify-center gap-2",children:"Siguiente"}),l.jsx("button",{onClick:e,className:"w-full sm:w-auto px-5 py-3 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-xl",children:"Cancelar"})]})]},"step1"):n===2?l.jsxs(On.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},className:"space-y-8",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white",children:i||"Nuevo Plan"}),l.jsxs("p",{className:"text-zinc-400",children:["Paso 2: Añade las actividades para el grupo: ",l.jsx("span",{className:"font-semibold text-white",children:c})]})]}),l.jsx(t0,{children:c==="Adultos"&&l.jsxs(On.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2 overflow-hidden",children:[l.jsx("label",{className:"text-base font-medium text-zinc-400 mb-2 block",children:"Categorías (Selecciona una o varias)"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:C.map(G=>l.jsx("button",{type:"button",onClick:()=>D(G),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-colors ${d.has(G)?"bg-pink-500 text-white":"bg-zinc-700 text-zinc-300"}`,children:G},G))})]})}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("h3",{className:"text-xl font-semibold text-zinc-300",children:["Actividades del Plan (",h.length,")"]}),l.jsx("div",{className:"min-h-[100px] max-h-60 overflow-y-auto pr-2 border border-brand-border rounded-xl p-2 space-y-2",children:l.jsx(t0,{children:h.length>0?h.map(G=>{var K;return l.jsxs(On.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:`flex justify-between items-center bg-zinc-800 p-3 rounded-lg border-l-4 ${G.category==="Tratamiento"?"border-blue-500":"border-purple-500"}`,children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-white",children:G.name}),l.jsxs("p",{className:"text-xs text-zinc-400",children:[((K=G.trigger.days)==null?void 0:K.map(B=>B===0?"Nacer":B).join(", "))||"Tiempos no definidos"," días"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>g({activity:G,tempId:G.tempId}),className:"p-1 text-zinc-400 hover:text-brand-orange",children:l.jsx(tc,{size:16})}),l.jsx("button",{onClick:()=>L(G.tempId),className:"p-1 text-zinc-400 hover:text-brand-red",children:l.jsx(ha,{size:16})})]})]},G.tempId)}):l.jsx("div",{className:"text-center py-6 text-zinc-500",children:l.jsx("p",{children:"Añade actividades para empezar a construir tu plan."})})})})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"relative flex w-full max-w-sm mx-auto justify-between rounded-lg bg-zinc-800 p-1 mb-6",children:[l.jsxs("button",{type:"button",onClick:()=>j("Tratamiento"),className:"relative z-10 w-1/2 py-2 text-sm font-semibold text-white flex items-center justify-center gap-2",children:[l.jsx(Qee,{})," Tratamiento"]}),l.jsxs("button",{type:"button",onClick:()=>j("Control"),className:"relative z-10 w-1/2 py-2 text-sm font-semibold text-white flex items-center justify-center gap-2",children:[l.jsx(Yee,{})," Control"]}),l.jsx(On.div,{layoutId:"add-type-bg",transition:{type:"spring",stiffness:400,damping:30},className:`absolute top-1 h-[calc(100%-0.5rem)] w-1/2 rounded-md bg-zinc-600 ${E==="Control"?"left-1/2":"left-1"}`})]}),l.jsx(q$e,{targetGroup:c,activityType:E,onSaveActivity:O,existingActivity:m?m.activity:null,clearEditing:()=>g(null)})]}),b&&l.jsxs("p",{className:"text-sm text-red-400 flex items-center gap-2 mt-4",children:[l.jsx(Vt,{size:16})," ",b]}),l.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-between items-center pt-6 gap-4",children:[l.jsxs("button",{onClick:()=>r(1),className:"w-full sm:w-auto px-5 py-3 text-zinc-300 font-semibold rounded-xl flex items-center justify-center gap-2 hover:bg-zinc-700",children:[l.jsx(nr,{size:16})," Atrás"]}),l.jsxs("div",{className:"flex gap-3 w-full sm:w-auto",children:[l.jsxs("button",{onClick:()=>A(!0),className:"flex-1 px-5 py-3 bg-brand-blue text-white font-bold rounded-xl flex items-center justify-center gap-2",children:[l.jsx(mee,{size:16})," Previsualizar"]}),l.jsx("button",{onClick:z,disabled:w,className:"flex-1 px-5 py-3 bg-brand-green text-white font-bold rounded-xl flex items-center justify-center gap-2 disabled:opacity-50",children:w?"Guardando...":l.jsxs(l.Fragment,{children:[l.jsx(ri,{size:16})," Guardar"]})})]})]})]},"step2"):null;return l.jsxs("div",{className:"w-full p-4",children:[l.jsx(t0,{mode:"wait",children:M()}),l.jsx(H$e,{isOpen:T,onClose:()=>A(!1),activities:h,targetGroup:c})]})},G$e=({plan:t,onClick:e,onDelete:n,isDeleting:r})=>{const i=rc(),s=P.useRef(!1),a=(o,c)=>{const u=c.offset.x,d=c.velocity.x;if(Math.abs(u)<5&&!s.current){e();return}u<-80/2||d<-500?i.start({x:-80}):i.start({x:0}),setTimeout(()=>{s.current=!1},100)};return l.jsxs("div",{className:`relative w-full overflow-hidden rounded-2xl bg-dashboard-surface border border-brand-border transition-opacity ${r?"opacity-50":"opacity-100"}`,children:[l.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:l.jsxs("button",{onClick:n,onPointerDown:o=>o.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-red text-white transition-colors hover:bg-red-600",children:[l.jsx(ha,{size:22}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Eliminar"})]})}),l.jsx(On.div,{drag:"x",dragConstraints:{left:-80,right:0},dragElastic:.1,onDragStart:()=>{s.current=!0},onDragEnd:a,onTap:()=>{!s.current&&!r&&e()},animate:i,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg p-4",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:t.name}),l.jsx("p",{className:"text-sm text-zinc-400 mt-1",children:t.description||`Plan para ${t.targetGroup}`})]}),r?l.jsx(Y0,{className:"animate-spin text-zinc-400"}):l.jsx(tr,{className:"text-zinc-600"})]})})]})};function Y$e({navigateTo:t}){const{healthPlans:e,deleteHealthPlan:n,addHealthPlanWithActivities:r}=Ze(),[i,s]=P.useState(!1),[a,o]=P.useState(null),[c,u]=P.useState(null),d=async(h,p)=>{await r(h,p),s(!1)},f=async()=>{if(a!=null&&a.id){u(a.id),o(null);try{await n(a.id)}catch(h){console.error("Error al eliminar el plan:",h)}finally{u(null)}}};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4",children:[l.jsxs("header",{className:"text-center",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Planificador Sanitario"}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Define tus Protocolos y Planes"})]}),l.jsxs("button",{onClick:()=>s(!0),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:opacity-90 text-black font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[l.jsx(Er,{size:18})," Crear Nuevo Plan Sanitario"]}),l.jsx("div",{className:"space-y-3 pt-4",children:e.length>0?e.map(h=>l.jsx(G$e,{plan:h,onClick:()=>t({name:"plan-detail",planId:h.id}),onDelete:()=>o(h),isDeleting:c===h.id},h.id)):l.jsxs("div",{className:"text-center py-10 bg-dashboard-surface rounded-2xl flex flex-col items-center gap-4",children:[l.jsx(FC,{size:48,className:"text-zinc-600"}),l.jsx("p",{className:"text-zinc-400 font-semibold",children:"Aún no has creado ningún plan."}),l.jsx("p",{className:"text-zinc-500 text-sm",children:"Usa el botón de arriba para empezar."})]})})]}),l.jsx(nt,{isOpen:i,onClose:()=>s(!1),title:"",children:l.jsx(K$e,{onSave:d,onCancel:()=>s(!1)})}),l.jsx(l1,{isOpen:!!a,onClose:()=>o(null),onConfirm:f,title:`Eliminar Plan "${a==null?void 0:a.name}"`,message:"¿Estás seguro? Al eliminar el plan, también se eliminarán todas sus actividades asociadas. Esta acción no se puede deshacer."})]})}PN.touchMouseIgnoreWait=500;let ej=0,_x=0,tj=!1;class aH{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=n=>{if(!this.shouldIgnoreMouse()&&Q$e(n)&&this.tryStart(n)){let r=this.createEventFromMouse(n,!0);this.emitter.trigger("pointerdown",r),this.initScrollWatch(r),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=n=>{let r=this.createEventFromMouse(n);this.recordCoords(r),this.emitter.trigger("pointermove",r)},this.handleMouseUp=n=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(n)),this.cleanup()},this.handleTouchStart=n=>{if(this.tryStart(n)){this.isTouchDragging=!0;let r=this.createEventFromTouch(n,!0);this.emitter.trigger("pointerdown",r),this.initScrollWatch(r);let i=n.target;this.shouldIgnoreMove||i.addEventListener("touchmove",this.handleTouchMove),i.addEventListener("touchend",this.handleTouchEnd),i.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=n=>{let r=this.createEventFromTouch(n);this.recordCoords(r),this.emitter.trigger("pointermove",r)},this.handleTouchEnd=n=>{if(this.isDragging){let r=n.target;r.removeEventListener("touchmove",this.handleTouchMove),r.removeEventListener("touchend",this.handleTouchEnd),r.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(n)),this.cleanup(),this.isTouchDragging=!1,X$e()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=n=>{if(!this.shouldIgnoreMove){let r=window.scrollX-this.prevScrollX+this.prevPageX,i=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:n,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:r,pageY:i,deltaX:r-this.origPageX,deltaY:i-this.origPageY})}},this.containerEl=e,this.emitter=new m1,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),Z$e()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),J$e()}tryStart(e){let n=this.querySubjectEl(e),r=e.target;return n&&(!this.handleSelector||pi(r,this.handleSelector))?(this.subjectEl=n,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){tj=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?pi(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return ej||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(tj=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,n){let r=0,i=0;return n?(this.origPageX=e.pageX,this.origPageY=e.pageY):(r=e.pageX-this.origPageX,i=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:r,deltaY:i}}createEventFromTouch(e,n){let r=e.touches,i,s,a=0,o=0;return r&&r.length?(i=r[0].pageX,s=r[0].pageY):(i=e.pageX,s=e.pageY),n?(this.origPageX=i,this.origPageY=s):(a=i-this.origPageX,o=s-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:i,pageY:s,deltaX:a,deltaY:o}}}function Q$e(t){return t.button===0&&!t.ctrlKey}function X$e(){ej+=1,setTimeout(()=>{ej-=1},PN.touchMouseIgnoreWait)}function Z$e(){_x+=1,_x===1&&window.addEventListener("touchmove",oH,{passive:!1})}function J$e(){_x-=1,_x||window.removeEventListener("touchmove",oH,{passive:!1})}function oH(t){tj&&t.preventDefault()}class e6e{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,n,r){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=n-window.scrollX,this.origScreenY=r-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,n){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=n-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,n){let r=()=>{this.cleanup(),n()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(r,this.revertDuration):setTimeout(r,0)}doRevertAnimation(e,n){let r=this.mirrorEl,i=this.sourceEl.getBoundingClientRect();r.style.transition="top "+n+"ms,left "+n+"ms",_m(r,{left:i.left,top:i.top}),O4e(r,()=>{r.style.transition="",e()})}cleanup(){this.mirrorEl&&(cN(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&_m(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,n=this.mirrorEl;return n||(n=this.mirrorEl=this.sourceEl.cloneNode(!0),n.style.userSelect="none",n.style.webkitUserSelect="none",n.style.pointerEvents="none",n.classList.add("fc-event-dragging"),_m(n,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(n)),n}}class lH extends TN{constructor(e,n){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=n,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class cH extends lH{constructor(e,n){super(new rLe(e),n)}getEventTarget(){return this.scrollController.el}computeClientRect(){return tLe(this.scrollController.el)}}class t6e extends lH{constructor(e){super(new iLe,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const Y3=typeof performance=="function"?performance.now:Date.now;class n6e{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let n=Y3();this.handleSide(e,(n-this.msSinceRequest)/1e3),this.requestAnimation(n)}else this.isAnimating=!1}}}start(e,n,r){this.isEnabled&&(this.scrollCaches=this.buildCaches(r),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,n))}handleMove(e,n){if(this.isEnabled){let r=e-window.scrollX,i=n-window.scrollY,s=this.pointerScreenY===null?0:i-this.pointerScreenY,a=this.pointerScreenX===null?0:r-this.pointerScreenX;s<0?this.everMovedUp=!0:s>0&&(this.everMovedDown=!0),a<0?this.everMovedLeft=!0:a>0&&(this.everMovedRight=!0),this.pointerScreenX=r,this.pointerScreenY=i,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(Y3()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,n){let{scrollCache:r}=e,{edgeThreshold:i}=this,s=i-e.distance,a=s*s/(i*i)*this.maxVelocity*n,o=1;switch(e.name){case"left":o=-1;case"right":r.setScrollLeft(r.getScrollLeft()+a*o);break;case"top":o=-1;case"bottom":r.setScrollTop(r.getScrollTop()+a*o);break}}computeBestEdge(e,n){let{edgeThreshold:r}=this,i=null,s=this.scrollCaches||[];for(let a of s){let o=a.clientRect,c=e-o.left,u=o.right-e,d=n-o.top,f=o.bottom-n;c>=0&&u>=0&&d>=0&&f>=0&&(d<=r&&this.everMovedUp&&a.canScrollUp()&&(!i||i.distance>d)&&(i={scrollCache:a,name:"top",distance:d}),f<=r&&this.everMovedDown&&a.canScrollDown()&&(!i||i.distance>f)&&(i={scrollCache:a,name:"bottom",distance:f}),c<=r&&this.everMovedLeft&&a.canScrollLeft()&&(!i||i.distance>c)&&(i={scrollCache:a,name:"left",distance:c}),u<=r&&this.everMovedRight&&a.canScrollRight()&&(!i||i.distance>u)&&(i={scrollCache:a,name:"right",distance:u}))}return i}buildCaches(e){return this.queryScrollEls(e).map(n=>n===window?new t6e(!1):new cH(n,!1))}queryScrollEls(e){let n=[];for(let r of this.scrollQuery)typeof r=="object"?n.push(r):n.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(r)));return n}}class Dv extends aLe{constructor(e,n){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=i=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,M4e(document.body),L4e(document.body),i.isTouch||i.origEvent.preventDefault(),this.emitter.trigger("pointerdown",i),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(i.subjectEl,i.pageX,i.pageY),this.startDelay(i),this.minDistance||this.handleDistanceSurpassed(i)))},this.onPointerMove=i=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",i),!this.isDistanceSurpassed){let s=this.minDistance,a,{deltaX:o,deltaY:c}=i;a=o*o+c*c,a>=s*s&&this.handleDistanceSurpassed(i)}this.isDragging&&(i.origEvent.type!=="scroll"&&(this.mirror.handleMove(i.pageX,i.pageY),this.autoScroller.handleMove(i.pageX,i.pageY)),this.emitter.trigger("dragmove",i))}},this.onPointerUp=i=>{this.isInteracting&&(this.isInteracting=!1,R4e(document.body),z4e(document.body),this.emitter.trigger("pointerup",i),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(i)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let r=this.pointer=new aH(e);r.emitter.on("pointerdown",this.onPointerDown),r.emitter.on("pointermove",this.onPointerMove),r.emitter.on("pointerup",this.onPointerUp),n&&(r.selector=n),this.mirror=new e6e,this.autoScroller=new n6e}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class r6e{constructor(e){this.el=e,this.origRect=CN(e),this.scrollCaches=PW(e).map(n=>new cH(n,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let n of this.scrollCaches)e+=n.origScrollLeft-n.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let n of this.scrollCaches)e+=n.origScrollTop-n.getScrollTop();return e}isWithinClipping(e,n){let r={left:e,top:n};for(let i of this.scrollCaches)if(!i6e(i.getEventTarget())&&!W3e(r,i.clientRect))return!1;return!0}}function i6e(t){let e=t.tagName;return e==="HTML"||e==="BODY"}class v1{constructor(e,n){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=r=>{let{dragging:i}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(r),this.initialHit||!this.requireInitial?(i.setIgnoreMove(!1),this.emitter.trigger("pointerdown",r)):i.setIgnoreMove(!0)},this.handleDragStart=r=>{this.emitter.trigger("dragstart",r),this.handleMove(r,!0)},this.handleDragMove=r=>{this.emitter.trigger("dragmove",r),this.handleMove(r)},this.handlePointerUp=r=>{this.releaseHits(),this.emitter.trigger("pointerup",r)},this.handleDragEnd=r=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,r),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",r)},this.droppableStore=n,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new m1}processFirstCoord(e){let n={left:e.pageX,top:e.pageY},r=n,i=e.subjectEl,s;i instanceof HTMLElement&&(s=CN(i),r=H3e(r,s));let a=this.initialHit=this.queryHitForOffset(r.left,r.top);if(a){if(this.useSubjectCenter&&s){let o=jW(s,a.rect);o&&(r=q3e(o))}this.coordAdjust=K3e(r,n)}else this.coordAdjust={left:0,top:0}}handleMove(e,n){let r=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(n||!y1(this.movingHit,r))&&(this.movingHit=r,this.emitter.trigger("hitupdate",r,!1,e))}prepareHits(){this.offsetTrackers=ad(this.droppableStore,e=>(e.component.prepareHits(),new r6e(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let n in e)e[n].destroy();this.offsetTrackers={}}queryHitForOffset(e,n){let{droppableStore:r,offsetTrackers:i}=this,s=null;for(let a in r){let o=r[a].component,c=i[a];if(c&&c.isWithinClipping(e,n)){let u=c.computeLeft(),d=c.computeTop(),f=e-u,h=n-d,{origRect:p}=c,m=p.right-p.left,g=p.bottom-p.top;if(f>=0&&f<m&&h>=0&&h<g){let b=o.queryHit(f,h,m,g);b&&h1(b.dateProfile.activeRange,b.dateSpan.range)&&(this.disablePointCheck||c.el.contains(c.el.getRootNode().elementFromPoint(f+u-window.scrollX,h+d-window.scrollY)))&&(!s||b.layer>s.layer)&&(b.componentId=a,b.context=o.context,b.rect.left+=u,b.rect.right+=u,b.rect.top+=d,b.rect.bottom+=d,s=b)}}}return s}}function y1(t,e){return!t&&!e?!0:!!t!=!!e?!1:I3e(t.dateSpan,e.dateSpan)}function uH(t,e){let n={};for(let r of e.pluginHooks.datePointTransforms)Object.assign(n,r(t,e));return Object.assign(n,s6e(t,e.dateEnv)),n}function s6e(t,e){return{date:e.toDate(t.range.start),dateStr:e.formatIso(t.range.start,{omitTime:t.allDay}),allDay:t.allDay}}class a6e extends Xh{constructor(e){super(e),this.handlePointerDown=r=>{let{dragging:i}=this,s=r.origEvent.target;i.setIgnoreMove(!this.component.isValidDateDownEl(s))},this.handleDragEnd=r=>{let{component:i}=this,{pointer:s}=this.dragging;if(!s.wasTouchScroll){let{initialHit:a,finalHit:o}=this.hitDragging;if(a&&o&&y1(a,o)){let{context:c}=i,u=Object.assign(Object.assign({},uH(a.dateSpan,c)),{dayEl:a.dayEl,jsEvent:r.origEvent,view:c.viewApi||c.calendarApi.view});c.emitter.trigger("dateClick",u)}}},this.dragging=new Dv(e.el),this.dragging.autoScroller.isEnabled=!1;let n=this.hitDragging=new v1(this.dragging,EN(e));n.emitter.on("pointerdown",this.handlePointerDown),n.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class o6e extends Xh{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=a=>{let{component:o,dragging:c}=this,{options:u}=o.context,d=u.selectable&&o.isValidDateDownEl(a.origEvent.target);c.setIgnoreMove(!d),c.delay=a.isTouch?l6e(o):null},this.handleDragStart=a=>{this.component.context.calendarApi.unselect(a)},this.handleHitUpdate=(a,o)=>{let{context:c}=this.component,u=null,d=!1;if(a){let f=this.hitDragging.initialHit;a.componentId===f.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(f,a)||(u=c6e(f,a,c.pluginHooks.dateSelectionTransformers)),(!u||!gLe(u,a.dateProfile,c))&&(d=!0,u=null)}u?c.dispatch({type:"SELECT_DATES",selection:u}):o||c.dispatch({type:"UNSELECT_DATES"}),d?uN():dN(),o||(this.dragSelection=u)},this.handlePointerUp=a=>{this.dragSelection&&(yW(this.dragSelection,a,this.component.context),this.dragSelection=null)};let{component:n}=e,{options:r}=n.context,i=this.dragging=new Dv(e.el);i.touchScrollAllowed=!1,i.minDistance=r.selectMinDistance||0,i.autoScroller.isEnabled=r.dragScroll;let s=this.hitDragging=new v1(this.dragging,EN(e));s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function l6e(t){let{options:e}=t.context,n=e.selectLongPressDelay;return n==null&&(n=e.longPressDelay),n}function c6e(t,e,n){let r=t.dateSpan,i=e.dateSpan,s=[r.range.start,r.range.end,i.range.start,i.range.end];s.sort(U4e);let a={};for(let o of n){let c=o(t,e);if(c===!1)return null;c&&Object.assign(a,c)}return a.range={start:s[0],end:s[3]},a.allDay=r.allDay,a}class Iv extends Xh{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=a=>{let o=a.origEvent.target,{component:c,dragging:u}=this,{mirror:d}=u,{options:f}=c.context,h=c.context;this.subjectEl=a.subjectEl;let p=this.subjectSeg=Sh(a.subjectEl),g=(this.eventRange=p.eventRange).instance.instanceId;this.relevantEvents=wN(h.getCurrentData().eventStore,g),u.minDistance=a.isTouch?0:f.eventDragMinDistance,u.delay=a.isTouch&&g!==c.props.eventSelection?d6e(c):null,f.fixedMirrorParent?d.parentNode=f.fixedMirrorParent:d.parentNode=pi(o,".fc"),d.revertDuration=f.dragRevertDuration;let b=c.isValidSegDownEl(o)&&!pi(o,".fc-event-resizer");u.setIgnoreMove(!b),this.isDragging=b&&a.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=a=>{let o=this.component.context,c=this.eventRange,u=c.instance.instanceId;a.isTouch?u!==this.component.props.eventSelection&&o.dispatch({type:"SELECT_EVENT",eventInstanceId:u}):o.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(o.calendarApi.unselect(a),o.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new Dn(o,c.def,c.instance),jsEvent:a.origEvent,view:o.viewApi}))},this.handleHitUpdate=(a,o)=>{if(!this.isDragging)return;let c=this.relevantEvents,u=this.hitDragging.initialHit,d=this.component.context,f=null,h=null,p=null,m=!1,g={affectedEvents:c,mutatedEvents:ra(),isEvent:!0};if(a){f=a.context;let b=f.options;d===f||b.editable&&b.droppable?(h=u6e(u,a,this.eventRange.instance.range.start,f.getCurrentData().pluginHooks.eventDragMutationMassagers),h&&(p=AN(c,f.getCurrentData().eventUiBases,h,f),g.mutatedEvents=p,IW(g,a.dateProfile,f)||(m=!0,h=null,p=null,g.mutatedEvents=ra()))):f=null}this.displayDrag(f,g),m?uN():dN(),o||(d===f&&y1(u,a)&&(h=null),this.dragging.setMirrorNeedsRevert(!h),this.dragging.setMirrorIsVisible(!a||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=f,this.validMutation=h,this.mutatedRelevantEvents=p)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=a=>{if(this.isDragging){let o=this.component.context,c=o.viewApi,{receivingContext:u,validMutation:d}=this,f=this.eventRange.def,h=this.eventRange.instance,p=new Dn(o,f,h),m=this.relevantEvents,g=this.mutatedRelevantEvents,{finalHit:b}=this.hitDragging;if(this.clearDrag(),o.emitter.trigger("eventDragStop",{el:this.subjectEl,event:p,jsEvent:a.origEvent,view:c}),d){if(u===o){let x=new Dn(o,g.defs[f.defId],h?g.instances[h.instanceId]:null);o.dispatch({type:"MERGE_EVENTS",eventStore:g});let w={oldEvent:p,event:x,relatedEvents:bu(g,o,h),revert(){o.dispatch({type:"MERGE_EVENTS",eventStore:m})}},_={};for(let E of o.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(_,E(d,o));o.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},w),_),{el:a.subjectEl,delta:d.datesDelta,jsEvent:a.origEvent,view:c})),o.emitter.trigger("eventChange",w)}else if(u){let x={event:p,relatedEvents:bu(m,o,h),revert(){o.dispatch({type:"MERGE_EVENTS",eventStore:m})}};o.emitter.trigger("eventLeave",Object.assign(Object.assign({},x),{draggedEl:a.subjectEl,view:c})),o.dispatch({type:"REMOVE_EVENTS",eventStore:m}),o.emitter.trigger("eventRemove",x);let w=g.defs[f.defId],_=g.instances[h.instanceId],E=new Dn(u,w,_);u.dispatch({type:"MERGE_EVENTS",eventStore:g});let j={event:E,relatedEvents:bu(g,u,_),revert(){u.dispatch({type:"REMOVE_EVENTS",eventStore:g})}};u.emitter.trigger("eventAdd",j),a.isTouch&&u.dispatch({type:"SELECT_EVENT",eventInstanceId:h.instanceId}),u.emitter.trigger("drop",Object.assign(Object.assign({},uH(b.dateSpan,u)),{draggedEl:a.subjectEl,jsEvent:a.origEvent,view:b.context.viewApi})),u.emitter.trigger("eventReceive",Object.assign(Object.assign({},j),{draggedEl:a.subjectEl,view:b.context.viewApi}))}}else o.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:n}=this,{options:r}=n.context,i=this.dragging=new Dv(e.el);i.pointer.selector=Iv.SELECTOR,i.touchScrollAllowed=!1,i.autoScroller.isEnabled=r.dragScroll;let s=this.hitDragging=new v1(this.dragging,X2);s.useSubjectCenter=e.useEventCenter,s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("pointerup",this.handlePointerUp),s.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,n){let r=this.component.context,i=this.receivingContext;i&&i!==e&&(i===r?i.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:n.affectedEvents,mutatedEvents:ra(),isEvent:!0}}):i.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:n})}clearDrag(){let e=this.component.context,{receivingContext:n}=this;n&&n.dispatch({type:"UNSET_EVENT_DRAG"}),e!==n&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}Iv.SELECTOR=".fc-event-draggable, .fc-event-resizable";function u6e(t,e,n,r){let i=t.dateSpan,s=e.dateSpan,a=i.range.start,o=s.range.start,c={};i.allDay!==s.allDay&&(c.allDay=s.allDay,c.hasEnd=e.context.options.allDayMaintainDuration,s.allDay?a=kn(n):a=n);let u=cf(a,o,t.context.dateEnv,t.componentId===e.componentId?t.largeUnit:null);u.milliseconds&&(c.allDay=!1);let d={datesDelta:u,standardProps:c};for(let f of r)f(d,t,e);return d}function d6e(t){let{options:e}=t.context,n=e.eventLongPressDelay;return n==null&&(n=e.longPressDelay),n}class f6e extends Xh{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=s=>{let{component:a}=this,o=this.querySegEl(s),c=Sh(o),u=this.eventRange=c.eventRange;this.dragging.minDistance=a.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(s.origEvent.target)||s.isTouch&&this.component.props.eventSelection!==u.instance.instanceId)},this.handleDragStart=s=>{let{context:a}=this.component,o=this.eventRange;this.relevantEvents=wN(a.getCurrentData().eventStore,this.eventRange.instance.instanceId);let c=this.querySegEl(s);this.draggingSegEl=c,this.draggingSeg=Sh(c),a.calendarApi.unselect(),a.emitter.trigger("eventResizeStart",{el:c,event:new Dn(a,o.def,o.instance),jsEvent:s.origEvent,view:a.viewApi})},this.handleHitUpdate=(s,a,o)=>{let{context:c}=this.component,u=this.relevantEvents,d=this.hitDragging.initialHit,f=this.eventRange.instance,h=null,p=null,m=!1,g={affectedEvents:u,mutatedEvents:ra(),isEvent:!0};s&&(s.componentId===d.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(d,s)||(h=h6e(d,s,o.subjectEl.classList.contains("fc-event-resizer-start"),f.range))),h&&(p=AN(u,c.getCurrentData().eventUiBases,h,c),g.mutatedEvents=p,IW(g,s.dateProfile,c)||(m=!0,h=null,p=null,g.mutatedEvents=null)),p?c.dispatch({type:"SET_EVENT_RESIZE",state:g}):c.dispatch({type:"UNSET_EVENT_RESIZE"}),m?uN():dN(),a||(h&&y1(d,s)&&(h=null),this.validMutation=h,this.mutatedRelevantEvents=p)},this.handleDragEnd=s=>{let{context:a}=this.component,o=this.eventRange.def,c=this.eventRange.instance,u=new Dn(a,o,c),d=this.relevantEvents,f=this.mutatedRelevantEvents;if(a.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:u,jsEvent:s.origEvent,view:a.viewApi}),this.validMutation){let h=new Dn(a,f.defs[o.defId],c?f.instances[c.instanceId]:null);a.dispatch({type:"MERGE_EVENTS",eventStore:f});let p={oldEvent:u,event:h,relatedEvents:bu(f,a,c),revert(){a.dispatch({type:"MERGE_EVENTS",eventStore:d})}};a.emitter.trigger("eventResize",Object.assign(Object.assign({},p),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||Gt(0),endDelta:this.validMutation.endDelta||Gt(0),jsEvent:s.origEvent,view:a.viewApi})),a.emitter.trigger("eventChange",p)}else a.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:n}=e,r=this.dragging=new Dv(e.el);r.pointer.selector=".fc-event-resizer",r.touchScrollAllowed=!1,r.autoScroller.isEnabled=n.context.options.dragScroll;let i=this.hitDragging=new v1(this.dragging,EN(e));i.emitter.on("pointerdown",this.handlePointerDown),i.emitter.on("dragstart",this.handleDragStart),i.emitter.on("hitupdate",this.handleHitUpdate),i.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return pi(e.subjectEl,".fc-event")}}function h6e(t,e,n,r){let i=t.context.dateEnv,s=t.dateSpan.range.start,a=e.dateSpan.range.start,o=cf(s,a,i,t.largeUnit);if(n){if(i.add(r.start,o)<r.end)return{startDelta:o}}else if(i.add(r.end,o)>r.start)return{endDelta:o};return null}class p6e{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=r=>{r.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=r=>{let i=this.context.options.unselectCancel,s=XU(r.origEvent);this.matchesCancel=!!pi(s,i),this.matchesEvent=!!pi(s,Iv.SELECTOR)},this.onDocumentPointerUp=r=>{let{context:i}=this,{documentPointer:s}=this,a=i.getCurrentData();if(!s.wasTouchScroll){if(a.dateSelection&&!this.isRecentPointerDateSelect){let o=i.options.unselectAuto;o&&(!o||!this.matchesCancel)&&i.calendarApi.unselect(r)}a.eventSelection&&!this.matchesEvent&&i.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let n=this.documentPointer=new aH(document);n.shouldIgnoreMove=!0,n.shouldWatchScroll=!1,n.emitter.on("pointerdown",this.onDocumentPointerDown),n.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const m6e={fixedMirrorParent:me},g6e={dateClick:me,eventDragStart:me,eventDragStop:me,eventDrop:me,eventResizeStart:me,eventResizeStop:me,eventResize:me,drop:me,eventReceive:me,eventLeave:me};PN.dataAttrPrefix="";var v6e=dc({name:"@fullcalendar/interaction",componentInteractions:[a6e,o6e,Iv,f6e],calendarInteractions:[p6e],elementDraggingImpl:Dv,optionRefiners:m6e,listenerRefiners:g6e});const y6e=(t,e,n)=>{const r=(n-1)*7+1;return new Date(Date.UTC(t,e-1,r))},b6e=()=>{const{animals:t,healthPlans:e,planActivities:n,healthEvents:r,parturitions:i}=Ze(),{forecastBySeason:s}=iN(),a=P.useMemo(()=>{const c=new Date;c.setUTCHours(0,0,0,0);const u=c.getUTCFullYear(),d=new Date(c.getTime()+90*24*60*60*1e3),f=[],h=t.filter(p=>p.status==="Activo"&&!p.isReference);for(const p of e){const m=h.filter(b=>{var w,_;const x=Va(b.birthDate);if(x<0)return!1;if(p.targetGroup==="Maternidad")return x<=120;if(p.targetGroup==="Adultos"){if(x<=120)return!1;const E=p.adultsSubgroup&&p.adultsSubgroup.length>0,j=p.targetLots&&p.targetLots.length>0;if(!E&&!j)return!0;const T=uc(b,i),A=E&&((w=p.adultsSubgroup)==null?void 0:w.includes(T)),C=j&&((_=p.targetLots)==null?void 0:_.includes(b.location));if(E&&j)return A||C;if(E)return A;if(j)return C}return!1}),g=n.filter(b=>b.healthPlanId===p.id);for(const b of m)for(const x of g){const w=(_,E)=>{if(!_||!E)return;if(_.setUTCHours(0,0,0,0),!r.some(T=>T.animalId!==b.id||T.activityId!==x.id?!1:x.trigger.type==="age"?new Date(T.date+"T00:00:00Z").getTime()===_.getTime():new Date(T.date+"T00:00:00Z").getUTCFullYear()===_.getUTCFullYear())&&_<=d){let T="Próxima";const A=Math.ceil((_.getTime()-c.getTime())/864e5);A<0?T="Atrasada":A===0&&(T="Para Hoy"),f.push({key:E,animal:b,plan:p,activity:x,dueDate:_,status:T})}};if(x.trigger.type==="age"&&x.trigger.days)for(const _ of x.trigger.days){const E=new Date(b.birthDate+"T00:00:00Z");E.setUTCDate(E.getUTCDate()+_),w(E,`${b.id}-${x.id}-${_}`)}else if(x.trigger.type==="fixed_date_period"&&x.trigger.month&&x.trigger.week){const _=y6e(u,x.trigger.month,x.trigger.week),E=`${b.id}-${x.id}-${u}`;w(_,E)}else if(x.trigger.type==="birthing_season_event"&&x.trigger.offsetDays!==void 0){const _=s.find(E=>E.events.some(j=>j.animal.id===b.id));if(_&&_.projectedStartDate){const E=new Date(_.projectedStartDate);E.setUTCDate(E.getUTCDate()+x.trigger.offsetDays);const j=E,T=`${b.id}-${x.id}-${_.seasonId}`;w(j,T)}}}}return f.sort((p,m)=>p.dueDate.getTime()-m.dueDate.getTime())},[t,e,n,r,i,s]);return{...P.useMemo(()=>({overdue:a.filter(c=>c.status==="Atrasada"),today:a.filter(c=>c.status==="Para Hoy"),upcoming:a.filter(c=>c.status==="Próxima")}),[a]),allTasks:a}},x6e=({task:t,onSave:e,onCancel:n})=>{const{addHealthEvent:r,products:i,bodyWeighings:s}=Ze(),[a,o]=P.useState(new Date().toISOString().split("T")[0]),[c,u]=P.useState(""),[d,f]=P.useState(null),[h,p]=P.useState(!1),{animal:m,activity:g}=t,b=P.useMemo(()=>i.find(j=>j.id===g.productId),[i,g.productId]),x=P.useMemo(()=>s.filter(j=>j.animalId===m.id).sort((j,T)=>new Date(T.date).getTime()-new Date(j.date).getTime())[0],[s,m.id]),{doseApplied:w,calculatedCost:_}=P.useMemo(()=>{if(!b||!x)return{doseApplied:void 0,calculatedCost:void 0};let j=0;if(b.dosageType==="fixed"&&b.dosageFixed?j=b.dosageFixed:b.dosageType==="per_kg"&&b.dosagePerKg_ml&&b.dosagePerKg_kg&&(j=x.kg/b.dosagePerKg_kg*b.dosagePerKg_ml),j===0)return{doseApplied:void 0,calculatedCost:void 0};let T=0;const A=b.presentationUnit==="L"?(b.presentationValue||0)*1e3:b.presentationValue||0;if(b.price&&A>0){const C=b.price/A;T=j*C}return{doseApplied:parseFloat(j.toFixed(2)),calculatedCost:parseFloat(T.toFixed(2))}},[b,x]),E=async j=>{j.preventDefault(),p(!0),f(null);try{await r({animalId:m.id,lotName:m.location,date:a,activityId:g.id,type:g.name,productUsed:b==null?void 0:b.id,doseApplied:w,unit:"ml",calculatedCost:_,notes:c,executedBy:"self"}),e()}catch(T){console.error(T),f("No se pudo registrar el evento. Inténtelo de nuevo.")}finally{p(!1)}};return l.jsxs("form",{onSubmit:E,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("p",{children:[l.jsx("span",{className:"font-semibold text-zinc-400",children:"Animal:"})," ",l.jsx("span",{className:"font-bold text-white",children:m.id})]}),l.jsxs("p",{children:[l.jsx("span",{className:"font-semibold text-zinc-400",children:"Actividad:"})," ",l.jsx("span",{className:"font-bold text-white",children:g.name})]}),b&&l.jsxs("p",{children:[l.jsx("span",{className:"font-semibold text-zinc-400",children:"Producto:"})," ",l.jsx("span",{className:"font-bold text-white",children:b.name})]})]}),l.jsxs("div",{className:"p-4 bg-black/20 rounded-xl space-y-2",children:[l.jsx("h3",{className:"font-semibold text-white",children:"Detalles del Registro"}),x?l.jsxs("div",{children:[l.jsxs("p",{className:"text-sm text-zinc-300",children:["Basado en el último peso registrado de ",l.jsxs("span",{className:"font-bold text-white",children:[x.kg," kg"]}),"."]}),w!==void 0&&l.jsxs("p",{className:"text-sm text-zinc-300",children:["Dosis Calculada: ",l.jsxs("span",{className:"font-bold text-teal-400",children:[w," ml"]})]}),_!==void 0&&l.jsxs("p",{className:"text-sm text-zinc-300",children:["Costo Estimado: ",l.jsxs("span",{className:"font-bold text-amber-400",children:["$",_.toFixed(2)]})]})]}):l.jsx("p",{className:"text-sm text-amber-400",children:"Advertencia: No se encontró un peso reciente para este animal. La dosis y el costo no se pueden calcular automáticamente."})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Aplicación"}),l.jsx("input",{id:"date",type:"date",value:a,onChange:j=>o(j.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Notas (Opcional)"}),l.jsx("textarea",{id:"notes",value:c,onChange:j=>u(j.target.value),placeholder:"Anotaciones sobre la aplicación, etc.",rows:3,className:"w-full bg-zinc-800 p-3 rounded-xl"})]}),d&&l.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[l.jsx(Vt,{size:18}),l.jsx("span",{children:d})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:n,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:h,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:h?"Guardando...":"Confirmar Registro"})]})]})},w6e=({animals:t,selectedAnimalIds:e,onChange:n})=>{const r=i=>{const s=Array.from(i.target.selectedOptions,a=>a.value);n(s)};return l.jsx("select",{multiple:!0,value:e,onChange:r,className:"w-full h-32 bg-zinc-800 p-3 rounded-xl",children:t.map(i=>l.jsx("option",{value:i.id,children:i.id},i.id))})},_6e=({onSaveSuccess:t,onCancel:e})=>{const{addHealthEvent:n,products:r,animals:i,bodyWeighings:s}=Ze(),[a,o]=P.useState([]),[c,u]=P.useState(new Date().toISOString().split("T")[0]),[d,f]=P.useState(""),[h,p]=P.useState(void 0),[m,g]=P.useState(""),[b,x]=P.useState(null),[w,_]=P.useState(!1),E=P.useMemo(()=>r.find(T=>T.id===h),[r,h]),j=async T=>{if(T.preventDefault(),a.length===0||!d.trim()){x("Debe seleccionar al menos un animal y especificar el tipo de actividad.");return}_(!0),x(null);try{const A=a.map(C=>{const D=i.find(M=>M.id===C);if(!D)return null;const O=s.filter(M=>M.animalId===C).sort((M,G)=>new Date(G.date).getTime()-new Date(M.date).getTime())[0];let L,z;if(E&&O){let M=0;if(E.dosageType==="fixed"&&E.dosageFixed?M=E.dosageFixed:E.dosageType==="per_kg"&&E.dosagePerKg_ml&&E.dosagePerKg_kg&&(M=O.kg/E.dosagePerKg_kg*E.dosagePerKg_ml),M>0){L=parseFloat(M.toFixed(2));const G=E.presentationUnit==="L"?(E.presentationValue||0)*1e3:E.presentationValue||0;if(E.price&&G>0){const K=E.price/G;z=parseFloat((M*K).toFixed(2))}}}return{animalId:C,lotName:D.location,date:c,type:d,productUsed:h,doseApplied:L,unit:"ml",calculatedCost:z,notes:m}});for(const C of A)C&&await n(C);t()}catch(A){console.error(A),x("No se pudo registrar el evento. Inténtelo de nuevo.")}finally{_(!1)}};return l.jsxs("form",{onSubmit:j,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Animal(es) (mantén Ctrl/Cmd para seleccionar varios)"}),l.jsx(w6e,{animals:i.filter(T=>T.status==="Activo"),selectedAnimalIds:a,onChange:o}),l.jsxs("p",{className:"text-xs text-zinc-500 mt-1",children:[a.length," animal(es) seleccionado(s)."]})]}),l.jsx("input",{type:"text",value:d,onChange:T=>f(T.target.value),placeholder:"Tipo de Actividad (Ej: Tratamiento por Neumonía)",className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0}),l.jsxs("select",{value:h||"",onChange:T=>p(T.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",children:[l.jsx("option",{value:"",children:"Seleccionar Producto (Opcional)..."}),r.map(T=>l.jsx("option",{value:T.id,children:T.name},T.id))]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"unplanned-date",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Aplicación"}),l.jsx("input",{id:"unplanned-date",type:"date",value:c,onChange:T=>u(T.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl"})]}),l.jsx("textarea",{value:m,onChange:T=>g(T.target.value),placeholder:"Notas (Opcional)",rows:3,className:"w-full bg-zinc-800 p-3 rounded-xl"}),b&&l.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[l.jsx(Vt,{size:18}),l.jsx("span",{children:b})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:w,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:w?"Guardando...":"Registrar Evento"})]})]})};function Q3(){const{allTasks:t}=b6e(),[e,n]=P.useState(null),[r,i]=P.useState(!1),s=P.useRef(null),[a,o]=P.useState("dayGridMonth"),[c,u]=P.useState(""),d=P.useMemo(()=>t.map(g=>({id:g.key,title:`${g.animal.id} - ${g.activity.name}`,start:g.dueDate,allDay:!0,extendedProps:{task:g},backgroundColor:g.status==="Atrasada"?"#FF3B30":g.status==="Para Hoy"?"#34C759":"#007AFF",borderColor:g.status==="Atrasada"?"#FF3B30":g.status==="Para Hoy"?"#34C759":"#007AFF"})),[t]),f=g=>{n(g.event.extendedProps.task)},h=()=>{n(null),i(!1)},p=g=>{var b;(b=s.current)==null||b.getApi().changeView(g),o(g)},m=g=>{u(g.view.title)};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full h-full max-w-4xl mx-auto p-4 flex flex-col",children:[l.jsxs("header",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start mb-4 gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl sm:text-4xl font-bold tracking-tight text-white leading-tight",children:"Calendario Sanitario"}),l.jsx("p",{className:"text-base sm:text-lg text-zinc-400",children:"Vista completa de actividades"})]}),l.jsxs("button",{onClick:()=>i(!0),className:"flex-shrink-0 flex items-center justify-center gap-2 bg-brand-blue text-white font-semibold py-2 px-4 rounded-lg transition-colors text-sm w-full sm:w-auto",children:[l.jsx(Er,{size:16})," Registrar Actividad"]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between mb-4 gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>{var g;return(g=s.current)==null?void 0:g.getApi().prev()},className:"p-2 bg-zinc-700 rounded-md hover:bg-zinc-600",children:"‹"}),l.jsx("button",{onClick:()=>{var g;return(g=s.current)==null?void 0:g.getApi().next()},className:"p-2 bg-zinc-700 rounded-md hover:bg-zinc-600",children:"›"}),l.jsx("h2",{className:"text-xl font-semibold text-white capitalize w-40 text-center",children:c})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>{var g;return(g=s.current)==null?void 0:g.getApi().today()},className:"px-4 py-1.5 bg-zinc-700 rounded-md hover:bg-zinc-600 text-sm font-semibold",children:"Hoy"}),l.jsxs("div",{className:"relative flex justify-between rounded-lg bg-zinc-700 p-1 text-sm font-semibold",children:[l.jsx("button",{onClick:()=>p("dayGridMonth"),className:"relative z-10 w-20 py-1 rounded-md",children:"Mes"}),l.jsx("button",{onClick:()=>p("dayGridWeek"),className:"relative z-10 w-20 py-1 rounded-md",children:"Semana"}),l.jsx(On.div,{layoutId:"calendar-view-bg",transition:{type:"spring",stiffness:400,damping:30},className:`absolute top-1 h-[calc(100%-0.5rem)] w-20 rounded-md bg-zinc-500 ${a==="dayGridWeek"?"left-[calc(50%_-_2px)]":"left-1"}`})]})]})]}),l.jsx("div",{className:"flex-grow",children:l.jsx(DN,{ref:s,plugins:[iH,v6e],initialView:a,locale:sH,events:d,eventClick:f,height:"100%",headerToolbar:!1,datesSet:m})})]}),e&&l.jsx(nt,{isOpen:!!e,onClose:()=>n(null),title:`Registrar: ${e.activity.name}`,children:l.jsx(x6e,{task:e,onSave:h,onCancel:()=>n(null)})}),l.jsx(nt,{isOpen:r,onClose:()=>i(!1),title:"Registrar Actividad No Planificada",children:l.jsx(_6e,{onSaveSuccess:h,onCancel:()=>i(!1)})})]})}const CS=({legend:t,children:e})=>l.jsxs("fieldset",{className:"bg-black/20 rounded-2xl p-4 border border-zinc-700 space-y-4",children:[l.jsx("legend",{className:"px-2 text-sm font-semibold text-zinc-400",children:t}),e]}),S6e=["Coxidioestático","Desparasitación","Vacuna Clostridial"],A6e=["Desparasitación","Vacuna Leptospirosis","Vacuna Clostridial","Vacuna Rabia"],E6e=["Cura de ombligo","Revisión de Mucosas (FAMACHA)","Descorne","Castración"],j6e=["Revisión de Mucosas (FAMACHA)","Recorte de Pezuñas","Toma de muestra de Hematología y Coprología"],C6e=[1,8,15,21,30,45,60,90,120],T6e=[{value:1,label:"Enero"},{value:2,label:"Febrero"},{value:3,label:"Marzo"},{value:4,label:"Abril"},{value:5,label:"Mayo"},{value:6,label:"Junio"},{value:7,label:"Julio"},{value:8,label:"Agosto"},{value:9,label:"Septiembre"},{value:10,label:"Octubre"},{value:11,label:"Noviembre"},{value:12,label:"Diciembre"}],P6e=[{value:1,label:"1ra Semana"},{value:2,label:"2da Semana"},{value:3,label:"3ra Semana"},{value:4,label:"4ta Semana"}],N6e=({healthPlanId:t,targetGroup:e,onSave:n,onCancel:r,existingActivity:i})=>{const{products:s,addProduct:a}=Ze(),[o,c]=P.useState("Tratamiento"),[u,d]=P.useState(""),[f,h]=P.useState(void 0),[p,m]=P.useState(void 0),[g,b]=P.useState(e==="Maternidad"?"age":"fixed_date_period"),[x,w]=P.useState(""),[_,E]=P.useState("1"),[j,T]=P.useState("1"),[A,C]=P.useState(""),[D,O]=P.useState(!1),[L,z]=P.useState(null),M=e==="Maternidad"?o==="Tratamiento"?S6e:E6e:o==="Tratamiento"?A6e:j6e;P.useEffect(()=>{var B;i&&(c(i.category),d(i.name),h(i.productId),m(i.complementaryProductId),b(i.trigger.type),i.trigger.type==="age"&&w(String(((B=i.trigger.days)==null?void 0:B[0])||"")),i.trigger.type==="fixed_date_period"&&(E(String(i.trigger.month||"1")),T(String(i.trigger.week||"1"))),i.trigger.type==="birthing_season_event"&&C(String(i.trigger.offsetDays||"")))},[i]);const G=async B=>{await a(B),O(!1)},K=async B=>{if(B.preventDefault(),z(null),!u.trim()){z("El nombre es obligatorio.");return}if(o==="Tratamiento"&&!f){z("Debe seleccionar un producto principal.");return}let U;if(e==="Maternidad"){const q=parseInt(x,10);if(isNaN(q)||q<0){z("Los días de nacido deben ser un número válido.");return}U={type:"age",days:[q]}}else if(g==="fixed_date_period")U={type:"fixed_date_period",month:parseInt(_,10),week:parseInt(j,10)};else{const q=parseInt(A,10);if(isNaN(q)){z("Debe introducir un número válido de días.");return}U={type:"birthing_season_event",offsetDays:q}}await n({healthPlanId:t,category:o,name:u,productId:f,complementaryProductId:p,trigger:U})};return l.jsxs(l.Fragment,{children:[l.jsxs("form",{onSubmit:K,className:"space-y-6",children:[l.jsxs(CS,{legend:"Paso 1: Define la Actividad",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("button",{type:"button",onClick:()=>c("Tratamiento"),className:`p-4 rounded-2xl border-2 transition-colors flex flex-col items-center gap-2 ${o==="Tratamiento"?"bg-blue-500/20 border-blue-500":"bg-zinc-800/50 border-zinc-700 hover:border-zinc-500"}`,children:[l.jsx(Ih,{className:"w-8 h-8 text-blue-400"}),l.jsx("span",{className:"font-semibold text-white",children:"Tratamiento"})]}),l.jsxs("button",{type:"button",onClick:()=>c("Control"),className:`p-4 rounded-2xl border-2 transition-colors flex flex-col items-center gap-2 ${o==="Control"?"bg-purple-500/20 border-purple-500":"bg-zinc-800/50 border-zinc-700 hover:border-zinc-500"}`,children:[l.jsx(hF,{className:"w-8 h-8 text-purple-400"}),l.jsx("span",{className:"font-semibold text-white",children:"Control"})]})]}),l.jsx("input",{list:"activity-names",value:u,onChange:B=>d(B.target.value),placeholder:`Nombre del ${o}...`,className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0}),l.jsx("datalist",{id:"activity-names",children:M.map(B=>l.jsx("option",{value:B},B))})]}),o==="Tratamiento"&&l.jsxs(CS,{legend:"Paso 2: Selecciona los Productos",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{value:f||"",onChange:B=>h(B.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0,children:[l.jsx("option",{value:"",children:"Producto Principal..."}),s.map(B=>l.jsx("option",{value:B.id,children:B.name},B.id))]}),l.jsx("button",{type:"button",onClick:()=>O(!0),className:"flex-shrink-0 p-3 bg-brand-orange text-white rounded-xl",children:l.jsx(rs,{size:20})})]}),l.jsxs("select",{value:p||"",onChange:B=>m(B.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",children:[l.jsx("option",{value:"",children:"Producto Complementario (Opcional)..."}),s.map(B=>l.jsx("option",{value:B.id,children:B.name},B.id))]})]}),l.jsx(CS,{legend:`Paso ${o==="Tratamiento"?"3":"2"}: ¿Cuándo se ejecuta?`,children:e==="Maternidad"?l.jsxs("div",{className:"animate-fade-in",children:[l.jsx("label",{className:"block text-xs font-medium text-zinc-400 mb-2",children:"A los Días de Nacido"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:C6e.map(B=>l.jsxs("button",{type:"button",onClick:()=>w(String(B)),className:`px-3 py-1 text-sm font-semibold rounded-full transition-colors ${x===String(B)?"bg-teal-500 text-white":"bg-zinc-700 text-zinc-300"}`,children:[B," días"]},B))}),l.jsx("div",{className:"flex items-center gap-2 mt-4",children:l.jsx("input",{type:"number",value:x,onChange:B=>w(B.target.value),placeholder:"O escribe los días...",className:"w-full bg-zinc-800 p-2 rounded-lg",required:!0})})]}):l.jsxs(l.Fragment,{children:[l.jsxs("select",{value:g,onChange:B=>b(B.target.value),className:"w-full bg-zinc-800 p-2 rounded-lg",children:[l.jsx("option",{value:"fixed_date_period",children:"Por Fecha Fija Anual"}),l.jsx("option",{value:"birthing_season_event",children:"Relativo a Temporada de Partos"})]}),g==="fixed_date_period"&&l.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-fade-in",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"triggerMonth",className:"block text-xs font-medium text-zinc-400 mb-1",children:"Mes"}),l.jsx("select",{id:"triggerMonth",value:_,onChange:B=>E(B.target.value),className:"w-full bg-zinc-800 p-2 rounded-lg",children:T6e.map(B=>l.jsx("option",{value:B.value,children:B.label},B.value))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"triggerWeek",className:"block text-xs font-medium text-zinc-400 mb-1",children:"Semana"}),l.jsx("select",{id:"triggerWeek",value:j,onChange:B=>T(B.target.value),className:"w-full bg-zinc-800 p-2 rounded-lg",children:P6e.map(B=>l.jsx("option",{value:B.value,children:B.label},B.value))})]})]}),g==="birthing_season_event"&&l.jsxs("div",{className:"animate-fade-in",children:[l.jsx("label",{htmlFor:"triggerOffsetDays",className:"block text-xs font-medium text-zinc-400 mb-1",children:"Días antes (-) / después (+) del inicio de la temporada"}),l.jsx("input",{id:"triggerOffsetDays",type:"number",value:A,onChange:B=>C(B.target.value),placeholder:"Ej: -30 (para 30 días antes)",className:"w-full bg-zinc-800 p-2 rounded-lg",required:!0})]})]})}),L&&l.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[l.jsx(Vt,{size:18})," ",l.jsx("span",{children:L})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:r,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:i?"Actualizar Actividad":"Añadir al Plan"})]})]}),l.jsx(nt,{isOpen:D,onClose:()=>O(!1),title:"Crear Nuevo Producto",children:l.jsx(aN,{onSave:G,onCancel:()=>O(!1)})})]})},k6e=({activity:t,onEdit:e,onDelete:n})=>{const{products:r}=Ze(),i=r.find(d=>d.id===t.productId),s=r.find(d=>d.id===t.complementaryProductId),a=rc(),o=P.useRef(!1),c=(d,f)=>{const h=f.offset.x,p=f.velocity.x;h<-160/2||p<-500?a.start({x:-160}):a.start({x:0}),setTimeout(()=>{o.current=!1},100)},u=()=>{var f;const{trigger:d}=t;switch(d.type){case"age":return`Días: ${((f=d.days)==null?void 0:f.join(", "))||"N/A"}`;case"fixed_date_period":const h=new Date(2024,d.month-1,1).toLocaleString("es-VE",{month:"long"});return`${d.week}a semana de ${h}`;case"birthing_season_event":const p=d.offsetDays>=0?"días después":"días antes";return`${Math.abs(d.offsetDays)} ${p} del inicio de la temporada de partos`;default:return"Tiempo no especificado"}};return l.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-black/20 border border-zinc-700",children:[l.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:[l.jsxs("button",{onClick:e,onPointerDown:d=>d.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[l.jsx(tc,{size:20}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Editar"})]}),l.jsxs("button",{onClick:n,onPointerDown:d=>d.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-red text-white",children:[l.jsx(ha,{size:20}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Eliminar"})]})]}),l.jsxs(On.div,{drag:"x",dragConstraints:{left:-160,right:0},dragElastic:.1,onDragStart:()=>{o.current=!0},onDragEnd:c,animate:a,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-grab bg-ios-modal-bg/50 p-4",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:t.name}),l.jsx("p",{className:`text-sm font-semibold ${t.category==="Tratamiento"?"text-blue-400":"text-purple-400"}`,children:t.category}),i&&l.jsxs("p",{className:"text-xs text-zinc-400 mt-1",children:["Ppal: ",i.name]}),s&&l.jsxs("p",{className:"text-xs text-zinc-400",children:["Comp: ",s.name]})]}),t.category==="Tratamiento"?l.jsx(Ih,{className:"text-blue-400"}):l.jsx(hF,{className:"text-purple-400"})]}),l.jsxs("div",{className:"mt-3 pt-3 border-t border-zinc-700 flex items-center text-zinc-300",children:[l.jsx(Is,{size:16,className:"mr-2"}),l.jsx("span",{className:"text-sm font-semibold",children:u()})]})]})]})};function D6e({planId:t,onBack:e}){const{healthPlans:n,planActivities:r,addPlanActivity:i,updatePlanActivity:s,deletePlanActivity:a}=Ze(),[o,c]=P.useState(!1),[u,d]=P.useState(void 0),[f,h]=P.useState(null),p=P.useMemo(()=>n.find(_=>_.id===t),[n,t]),m=P.useMemo(()=>p?r.filter(_=>_.healthPlanId===t).sort((_,E)=>{var j,T;return(((j=_.trigger.days)==null?void 0:j[0])||0)-(((T=E.trigger.days)==null?void 0:T[0])||0)}):[],[r,t,p]),g=_=>{d(_),c(!0)},b=()=>{c(!1),d(void 0)},x=async _=>{u!=null&&u.id?await s(u.id,_):await i({..._,healthPlanId:t}),b()},w=async()=>{f!=null&&f.id&&await a(f.id),h(null)};return p?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 pb-12 animate-fade-in px-4",children:[l.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[l.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(nr,{size:24})}),l.jsxs("div",{className:"text-center flex-grow",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:p.name}),l.jsx("p",{className:"text-lg text-zinc-400",children:p.targetGroup})]}),l.jsx("div",{className:"w-8"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-zinc-300",children:"Actividades del Plan"}),l.jsxs("button",{onClick:()=>g(),className:"flex items-center gap-2 bg-teal-600 hover:bg-teal-500 text-white font-bold py-2 px-3 rounded-lg transition-colors text-sm",children:[l.jsx(Er,{size:16})," Añadir Actividad"]})]}),m.length>0?l.jsx("div",{className:"space-y-3",children:m.map(_=>l.jsx(k6e,{activity:_,onEdit:()=>g(_),onDelete:()=>h(_)},_.id))}):l.jsxs("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:[l.jsx("p",{className:"text-zinc-500 font-semibold",children:"Este plan aún no tiene actividades."}),l.jsx("p",{className:"text-zinc-500 text-sm",children:"Añade tratamientos o controles para empezar."})]})]})]}),l.jsx(nt,{isOpen:o,onClose:b,title:u?"Editar Actividad":"Añadir Actividad al Plan",children:l.jsx(N6e,{healthPlanId:p.id,targetGroup:p.targetGroup,onSave:x,onCancel:b,existingActivity:u})}),l.jsx(l1,{isOpen:!!f,onClose:()=>h(null),onConfirm:w,title:`Eliminar Actividad "${f==null?void 0:f.name}"`,message:"¿Estás seguro de que quieres eliminar esta actividad del plan? Esta acción no se puede deshacer."})]}):l.jsxs("div",{className:"text-center p-10",children:[l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Plan no encontrado."}),l.jsx("button",{onClick:e,className:"mt-4 text-brand-amber",children:"Volver al Planificador"})]})}const I6e=()=>{const{healthEvents:t,products:e,animals:n}=Ze();return P.useMemo(()=>{const i=new Date;i.setDate(i.getDate()-30),i.setHours(0,0,0,0);const a=t.filter(b=>new Date(b.date)>=i).reduce((b,x)=>b+(x.calculatedCost||0),0),o=n.filter(b=>b.status==="Activo").length,c=o>0?a/o:0,u=[],d={},f=new Date;f.setMonth(f.getMonth()-6),t.filter(b=>new Date(b.date)>=f).forEach(b=>{const x=b.date.substring(0,7);d[x]||(d[x]=0),d[x]+=b.calculatedCost||0}),Object.keys(d).sort().forEach(b=>{u.push({name:b,total:parseFloat(d[b].toFixed(2))})});const h={};t.forEach(b=>{const x=b.type||"Sin Categoría";h[x]||(h[x]=0),h[x]+=b.calculatedCost||0});const p=Object.keys(h).map(b=>({name:b,total:parseFloat(h[b].toFixed(2))})).sort((b,x)=>x.total-b.total),m={};t.forEach(b=>{m[b.animalId]||(m[b.animalId]=0),m[b.animalId]+=b.calculatedCost||0});const g=Object.keys(m).map(b=>({animalId:b,total:m[b]})).sort((b,x)=>x.total-b.total).slice(0,5);return{totalCostLast30Days:a,avgCostPerAnimal:c,monthlyCosts:u,costsByCategory:p,topCostAnimals:g}},[t,e,n])},X3=({title:t,value:e,unit:n,icon:r})=>l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[l.jsx(r,{size:14}),l.jsx("span",{children:t})]}),l.jsxs("p",{className:"text-3xl font-bold text-white mt-1",children:[e," ",l.jsx("span",{className:"text-xl text-zinc-400",children:n})]})]}),Z3=["#34C759","#FF9500","#007AFF","#AF52DE","#FF3B30","#5E5CE6","#5AC8FA","#FFCC00"];function O6e(){const{totalCostLast30Days:t,avgCostPerAnimal:e,monthlyCosts:n,costsByCategory:r,topCostAnimals:i}=I6e(),s=a=>new Date(a+"-02T00:00:00Z").toLocaleString("es-VE",{month:"short",year:"2-digit"});return l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4",children:[l.jsxs("header",{className:"text-center",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Análisis de Costos"}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Módulo StockCare"})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsx(X3,{title:"Costo (Últimos 30 días)",value:`$${t.toFixed(2)}`,icon:Hl}),l.jsx(X3,{title:"Costo Prom./Animal (30d)",value:`$${e.toFixed(2)}`,icon:Ka})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-white mb-4",children:[l.jsx(nw,{size:20})," Costo Mensual (Últimos 6m)"]}),l.jsx("div",{className:"w-full h-56",children:l.jsx(fr,{children:l.jsxs(Mi,{data:n,margin:{top:5,right:10,left:-20,bottom:5},children:[l.jsx(Un,{dataKey:"name",tickFormatter:s,tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(er,{tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},unit:"$"}),l.jsx(tn,{cursor:{fill:"rgba(255, 255, 255, 0.1)"},contentStyle:{backgroundColor:"rgba(44, 44, 46, 0.8)",border:"1px solid #444",borderRadius:"12px"},formatter:a=>`$${a.toFixed(2)}`}),l.jsx(hr,{dataKey:"total",name:"Costo Total",fill:"#2dd4bf",radius:[4,4,0,0]})]})})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-white mb-4",children:[l.jsx(Aee,{size:20})," Costos por Categoría"]}),l.jsx("div",{className:"w-full h-48",children:l.jsx(fr,{children:l.jsxs(F2,{children:[l.jsx(la,{data:r,dataKey:"total",nameKey:"name",cx:"50%",cy:"50%",outerRadius:60,fill:"#8884d8",children:r.map((a,o)=>l.jsx(aa,{fill:Z3[o%Z3.length]},`cell-${o}`))}),l.jsx(tn,{contentStyle:{backgroundColor:"rgba(44, 44, 46, 0.8)",border:"1px solid #444",borderRadius:"12px"},formatter:a=>`$${a.toFixed(2)}`}),l.jsx(na,{iconSize:10,wrapperStyle:{fontSize:"12px",color:"#a1a1aa"}})]})})})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Top 5 Animales (Costo Total)"}),l.jsx("div",{className:"space-y-2",children:i.length>0?i.map((a,o)=>l.jsxs("div",{className:"flex justify-between items-center text-sm bg-black/20 p-2 rounded-md",children:[l.jsxs("span",{className:"font-semibold text-white",children:[o+1,". ",a.animalId]}),l.jsxs("span",{className:"font-bold text-teal-300",children:["$",a.total.toFixed(2)]})]},a.animalId)):l.jsx("p",{className:"text-sm text-zinc-500 text-center pt-8",children:"No hay datos suficientes."})})]})]})]})}function M6e({onSwitchModule:t}){const{syncStatus:e}=Ze(),[n,r]=P.useState({name:"calendario"}),[i,s]=P.useState([]),a=[{id:"calendario",label:"Calendario",icon:see},{id:"planes",label:"Planes",icon:FC},{id:"inventario",label:"Inventario",icon:Ih},{id:"costos",label:"Costos",icon:Hl}],o=f=>{s(h=>[...h,n]),r(f)},c=()=>{const f=i.pop();f?(s([...i]),r(f)):t("rebano")},u=f=>{s([]),r({name:f})},d=()=>{switch(n.name){case"calendario":return l.jsx(Q3,{});case"planes":return l.jsx(Y$e,{navigateTo:o});case"inventario":return l.jsx(r4e,{});case"costos":return l.jsx(O6e,{});case"plan-detail":return l.jsx(D6e,{planId:n.planId,onBack:c});default:return l.jsx(Q3,{})}};return l.jsxs("div",{className:"min-h-screen animate-fade-in text-white flex flex-col bg-brand-dark",children:[l.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-brand-dark/80 backdrop-blur-lg border-b border-brand-border",children:l.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[l.jsx("button",{onClick:c,className:"p-2 -ml-2 text-zinc-400 hover:text-white","aria-label":"Atrás",children:l.jsx(nr,{size:24})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(rw,{className:"text-teal-400"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-bold text-white leading-none",children:"GanaderoOS"}),l.jsx("p",{className:"text-xs text-zinc-400 leading-none",children:"StockCare"})]})]}),l.jsx("div",{className:"w-8 flex justify-end",children:l.jsx(Nv,{status:e})})]})}),l.jsx("main",{className:"flex-grow pt-16 pb-24",children:d()}),l.jsx("nav",{className:"flex-shrink-0 fixed bottom-0 left-0 right-0 bg-black/30 backdrop-blur-xl border-t border-white/20 flex justify-around z-20",children:a.map(f=>l.jsxs("button",{onClick:()=>u(f.id),className:`flex flex-col items-center justify-center p-3 w-full transition-colors ${n.name===f.id?"text-teal-400":"text-gray-400 hover:text-teal-400"}`,children:[l.jsx(f.icon,{className:"w-6 h-6 mb-1"}),l.jsx("span",{className:"text-xs font-semibold",children:f.label})]},f.id))})]})}const J3=.5,R6e=()=>{const{animals:t,healthEvents:e,weighings:n,parturitions:r}=Ze();return P.useMemo(()=>{const o=[...t.filter(p=>p.status==="Activo"&&p.sex==="Hembra").map(p=>{const m=e.filter(T=>T.animalId===p.id).reduce((T,A)=>T+(A.calculatedCost||0),0),g=n.filter(T=>T.goatId===p.id),b=g.reduce((T,A)=>T+A.kg,0),x=b*J3;let w=null,_=0;const E=r.filter(T=>T.goatId===p.id);b>0&&E.length>0&&(_=E.reduce((A,C)=>{const D=g.filter(M=>new Date(M.date)>=new Date(C.parturitionDate));if(D.length===0)return A;const O=new Date(C.parturitionDate),z=(new Date(D.sort((M,G)=>new Date(G.date).getTime()-new Date(M.date).getTime())[0].date).getTime()-O.getTime())/(1e3*60*60*24);return A+z},0),w=m/b);const j=x-m;return{animalId:p.id,totalRevenue:x,totalCosts:m,netProfit:j,costPerLiter:w,totalKgProduced:b,lactationDays:_}})].sort((p,m)=>m.netProfit-p.netProfit),c=o.reduce((p,m)=>p+m.totalRevenue,0),u=o.reduce((p,m)=>p+m.totalCosts,0),d=c-u,f=o.filter(p=>p.costPerLiter!==null&&p.costPerLiter>0).map(p=>p.costPerLiter),h=f.length>0?f.reduce((p,m)=>p+m,0)/f.length:0;return{animalsByProfitability:o,totalFarmRevenue:c,totalFarmCosts:u,totalFarmNetProfit:d,averageCostPerLiter:h,assumedMilkPrice:J3}},[t,e,n,r])},Ry=({title:t,value:e,unit:n,icon:r,colorClass:i})=>l.jsxs("div",{className:`bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border ${i||""}`,children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[l.jsx(r,{size:14}),l.jsx("span",{children:t})]}),l.jsxs("p",{className:"text-3xl font-bold text-white mt-1",children:[e," ",l.jsx("span",{className:"text-xl text-zinc-400",children:n})]})]}),eL=({animalData:t})=>{const e=t.netProfit>=0;return l.jsxs("div",{className:"w-full text-left bg-black/20 rounded-xl p-4 border border-zinc-700/80 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-xl text-white",children:t.animalId}),l.jsxs("div",{className:"flex items-center gap-4 text-xs text-zinc-400 mt-1",children:[l.jsxs("span",{children:["Ingresos: $",t.totalRevenue.toFixed(2)]}),l.jsxs("span",{children:["Costos: $",t.totalCosts.toFixed(2)]})]})]}),l.jsxs("div",{className:`text-right font-bold text-2xl ${e?"text-brand-green":"text-brand-red"}`,children:[e?"+":"","$",t.netProfit.toFixed(2)]})]})},L6e=({active:t,payload:e})=>t&&e&&e.length?l.jsxs("div",{className:"bg-black/60 backdrop-blur-md p-2 rounded-lg border border-zinc-700 text-white text-sm",children:[l.jsx("p",{className:"font-bold",children:e[0].payload.animalId}),l.jsxs("p",{style:{color:e[0].fill},children:["Rentabilidad: $",e[0].value.toFixed(2)]})]}):null;function z6e(){const{animalsByProfitability:t,totalFarmRevenue:e,totalFarmCosts:n,totalFarmNetProfit:r,averageCostPerLiter:i,assumedMilkPrice:s}=R6e(),a=t.slice(0,5),o=t.slice(-5).reverse();return t.length===0?l.jsxs("div",{className:"text-center py-10 bg-brand-glass rounded-2xl mx-4 flex flex-col items-center gap-4",children:[l.jsx(Hl,{size:48,className:"text-zinc-600"}),l.jsx("p",{className:"text-zinc-400 font-semibold text-lg",children:"No hay datos suficientes"}),l.jsx("p",{className:"text-zinc-500 text-sm max-w-xs",children:"Registra pesajes lecheros y eventos de salud con costos para empezar a ver el análisis económico."})]}):l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 animate-fade-in px-4",children:[l.jsxs("header",{className:"text-center",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Análisis Económico"}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Rentabilidad de la Finca"})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsx(Ry,{title:"Ingresos Totales (Leche)",value:`$${e.toFixed(2)}`,icon:ig,colorClass:"border-green-500/30"}),l.jsx(Ry,{title:"Costos Totales (Sanidad)",value:`$${n.toFixed(2)}`,icon:rg,colorClass:"border-red-500/30"})]}),l.jsxs("div",{className:`bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border ${r>=0?"border-green-500/50":"border-red-500/50"}`,children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[l.jsx(Hl,{size:14}),l.jsx("span",{children:"Rentabilidad Neta (Ingresos - Costos)"})]}),l.jsxs("p",{className:`text-5xl font-bold mt-1 ${r>=0?"text-brand-green":"text-brand-red"}`,children:[r>=0?"+":"","$",r.toFixed(2)]})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsx(Ry,{title:"Costo / Litro de Leche",value:`$${i.toFixed(3)}`,icon:ql}),l.jsx(Ry,{title:"Precio Leche (Asumido)",value:`$${s.toFixed(2)}`,unit:"/Kg",icon:Ka})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-white mb-4",children:[l.jsx(ree,{size:20})," Distribución de Rentabilidad"]}),l.jsx("div",{className:"w-full h-56",children:l.jsx(fr,{children:l.jsxs(Mi,{data:t,margin:{top:5,right:0,left:0,bottom:5},children:[l.jsx(Un,{dataKey:"animalId",tick:!1,axisLine:!1}),l.jsx(tn,{content:l.jsx(L6e,{}),cursor:{fill:"rgba(255, 255, 255, 0.1)"}}),l.jsx(hr,{dataKey:"netProfit",children:t.map(c=>l.jsx(aa,{fill:c.netProfit>=0?"#34C759":"#FF3B30"},c.animalId))})]})})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-xl font-semibold text-zinc-300",children:"Ranking de Rentabilidad"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("h4",{className:"font-semibold text-brand-green flex items-center gap-2",children:[l.jsx(ig,{size:18})," Top 5 Animales Más Rentables"]}),a.map(c=>l.jsx(eL,{animalData:c},c.animalId))]}),l.jsxs("div",{className:"space-y-2 pt-4",children:[l.jsxs("h4",{className:"font-semibold text-brand-red flex items-center gap-2",children:[l.jsx(rg,{size:18})," Top 5 Animales Menos Rentables"]}),o.map(c=>l.jsx(eL,{animalData:c},c.animalId))]})]})]})}function $6e({onSwitchModule:t}){const{syncStatus:e}=Ze();return l.jsxs("div",{className:"min-h-screen animate-fade-in text-white flex flex-col",children:[l.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-gray-900/80 backdrop-blur-lg border-b border-brand-border",children:l.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[l.jsx("button",{onClick:()=>t("rebano"),className:"p-2 -ml-2 text-zinc-400 hover:text-white","aria-label":"Salir del módulo",children:l.jsx(nr,{size:24})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Hl,{className:"text-yellow-400"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-bold text-white leading-none",children:"GanaderoOS"}),l.jsx("p",{className:"text-xs text-zinc-400 leading-none",children:"Cents"})]})]}),l.jsx("div",{className:"w-8 flex justify-end",children:l.jsx(Nv,{status:e})})]})}),l.jsx("main",{className:"flex-grow pt-16 pb-24",children:l.jsx(z6e,{})}),l.jsx(c1,{onSwitchModule:t})]})}const F6e=()=>l.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-[#1C1C1E] animate-fade-in",children:[l.jsxs("div",{className:"relative flex items-center justify-center w-24 h-24",children:[l.jsx(fv,{className:"text-brand-orange w-12 h-12"}),l.jsx("div",{className:"absolute inset-0",children:l.jsx(vF,{className:"w-24 h-24 text-zinc-700 animate-spin-slow"})})]}),l.jsx("p",{className:"mt-4 text-lg font-medium text-zinc-400 tracking-wider",children:"Cargando datos..."})]});function V6e(){const{currentUser:t,isLoading:e}=oF(),{isLoading:n}=Ze(),[r,i]=P.useState("rebano"),[s,a]=P.useState(null),[o,c]=P.useState({lactokeeper:"dashboard"}),u=P.useCallback(h=>{a(null),i(h)},[]),d=P.useCallback(h=>{a(h),i("rebano")},[]),f=P.useCallback(h=>{c(p=>({...p,lactokeeper:h}))},[]);if(e||t&&n)return l.jsx(F6e,{});if(!t)return l.jsx(Kee,{});switch(r){case"lactokeeper":return l.jsx(HRe,{initialPage:o.lactokeeper,onPageStateChange:f,navigateToRebano:d,onSwitchModule:u});case"kilos":return l.jsx(t4e,{navigateToRebano:d,onSwitchModule:u});case"salud":return l.jsx(M6e,{onSwitchModule:u});case"cents":return l.jsx($6e,{onSwitchModule:u});case"rebano":default:return l.jsx(jRe,{initialPage:s,onSwitchModule:u})}}TS.createRoot(document.getElementById("root")).render(l.jsx(Y.StrictMode,{children:l.jsx(FJ,{children:l.jsx(QJ,{children:l.jsx(V6e,{})})})}));
