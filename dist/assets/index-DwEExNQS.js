var OV=Object.defineProperty;var IV=(t,e,n)=>e in t?OV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var mr=(t,e,n)=>IV(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Gu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ot(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var YM={exports:{}},z0={},XM={exports:{}},vt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $m=Symbol.for("react.element"),DV=Symbol.for("react.portal"),MV=Symbol.for("react.fragment"),RV=Symbol.for("react.strict_mode"),LV=Symbol.for("react.profiler"),$V=Symbol.for("react.provider"),zV=Symbol.for("react.context"),FV=Symbol.for("react.forward_ref"),VV=Symbol.for("react.suspense"),BV=Symbol.for("react.memo"),UV=Symbol.for("react.lazy"),IE=Symbol.iterator;function WV(t){return t===null||typeof t!="object"?null:(t=IE&&t[IE]||t["@@iterator"],typeof t=="function"?t:null)}var QM={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},JM=Object.assign,ZM={};function Pf(t,e,n){this.props=t,this.context=e,this.refs=ZM,this.updater=n||QM}Pf.prototype.isReactComponent={};Pf.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Pf.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function e4(){}e4.prototype=Pf.prototype;function OS(t,e,n){this.props=t,this.context=e,this.refs=ZM,this.updater=n||QM}var IS=OS.prototype=new e4;IS.constructor=OS;JM(IS,Pf.prototype);IS.isPureReactComponent=!0;var DE=Array.isArray,t4=Object.prototype.hasOwnProperty,DS={current:null},n4={key:!0,ref:!0,__self:!0,__source:!0};function r4(t,e,n){var r,i={},a=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(a=""+e.key),e)t4.call(e,r)&&!n4.hasOwnProperty(r)&&(i[r]=e[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:$m,type:t,key:a,ref:s,props:i,_owner:DS.current}}function KV(t,e){return{$$typeof:$m,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function MS(t){return typeof t=="object"&&t!==null&&t.$$typeof===$m}function qV(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ME=/\/+/g;function Mb(t,e){return typeof t=="object"&&t!==null&&t.key!=null?qV(""+t.key):e.toString(36)}function xv(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case $m:case DV:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Mb(s,0):r,DE(i)?(n="",t!=null&&(n=t.replace(ME,"$&/")+"/"),xv(i,e,n,"",function(u){return u})):i!=null&&(MS(i)&&(i=KV(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(ME,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",DE(t))for(var o=0;o<t.length;o++){a=t[o];var c=r+Mb(a,o);s+=xv(a,e,n,c,i)}else if(c=WV(t),typeof c=="function")for(t=c.call(t),o=0;!(a=t.next()).done;)a=a.value,c=r+Mb(a,o++),s+=xv(a,e,n,c,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Cg(t,e,n){if(t==null)return t;var r=[],i=0;return xv(t,r,"","",function(a){return e.call(n,a,i++)}),r}function HV(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Xr={current:null},bv={transition:null},GV={ReactCurrentDispatcher:Xr,ReactCurrentBatchConfig:bv,ReactCurrentOwner:DS};function i4(){throw Error("act(...) is not supported in production builds of React.")}vt.Children={map:Cg,forEach:function(t,e,n){Cg(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Cg(t,function(){e++}),e},toArray:function(t){return Cg(t,function(e){return e})||[]},only:function(t){if(!MS(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};vt.Component=Pf;vt.Fragment=MV;vt.Profiler=LV;vt.PureComponent=OS;vt.StrictMode=RV;vt.Suspense=VV;vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GV;vt.act=i4;vt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=JM({},t.props),i=t.key,a=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,s=DS.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)t4.call(e,c)&&!n4.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:$m,type:t.type,key:i,ref:a,props:r,_owner:s}};vt.createContext=function(t){return t={$$typeof:zV,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:$V,_context:t},t.Consumer=t};vt.createElement=r4;vt.createFactory=function(t){var e=r4.bind(null,t);return e.type=t,e};vt.createRef=function(){return{current:null}};vt.forwardRef=function(t){return{$$typeof:FV,render:t}};vt.isValidElement=MS;vt.lazy=function(t){return{$$typeof:UV,_payload:{_status:-1,_result:t},_init:HV}};vt.memo=function(t,e){return{$$typeof:BV,type:t,compare:e===void 0?null:e}};vt.startTransition=function(t){var e=bv.transition;bv.transition={};try{t()}finally{bv.transition=e}};vt.unstable_act=i4;vt.useCallback=function(t,e){return Xr.current.useCallback(t,e)};vt.useContext=function(t){return Xr.current.useContext(t)};vt.useDebugValue=function(){};vt.useDeferredValue=function(t){return Xr.current.useDeferredValue(t)};vt.useEffect=function(t,e){return Xr.current.useEffect(t,e)};vt.useId=function(){return Xr.current.useId()};vt.useImperativeHandle=function(t,e,n){return Xr.current.useImperativeHandle(t,e,n)};vt.useInsertionEffect=function(t,e){return Xr.current.useInsertionEffect(t,e)};vt.useLayoutEffect=function(t,e){return Xr.current.useLayoutEffect(t,e)};vt.useMemo=function(t,e){return Xr.current.useMemo(t,e)};vt.useReducer=function(t,e,n){return Xr.current.useReducer(t,e,n)};vt.useRef=function(t){return Xr.current.useRef(t)};vt.useState=function(t){return Xr.current.useState(t)};vt.useSyncExternalStore=function(t,e,n){return Xr.current.useSyncExternalStore(t,e,n)};vt.useTransition=function(){return Xr.current.useTransition()};vt.version="18.3.1";XM.exports=vt;var k=XM.exports;const H=Ot(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YV=k,XV=Symbol.for("react.element"),QV=Symbol.for("react.fragment"),JV=Object.prototype.hasOwnProperty,ZV=YV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,e9={key:!0,ref:!0,__self:!0,__source:!0};function a4(t,e,n){var r,i={},a=null,s=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)JV.call(e,r)&&!e9.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:XV,type:t,key:a,ref:s,props:i,_owner:ZV.current}}z0.Fragment=QV;z0.jsx=a4;z0.jsxs=a4;YM.exports=z0;var l=YM.exports,g1={},s4={exports:{}},Fi={},o4={exports:{}},l4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,q){var ae=F.length;F.push(q);e:for(;0<ae;){var ce=ae-1>>>1,ve=F[ce];if(0<i(ve,q))F[ce]=q,F[ae]=ve,ae=ce;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var q=F[0],ae=F.pop();if(ae!==q){F[0]=ae;e:for(var ce=0,ve=F.length,we=ve>>>1;ce<we;){var Le=2*(ce+1)-1,Ye=F[Le],et=Le+1,ke=F[et];if(0>i(Ye,ae))et<ve&&0>i(ke,Ye)?(F[ce]=ke,F[et]=ae,ce=et):(F[ce]=Ye,F[Le]=ae,ce=Le);else if(et<ve&&0>i(ke,ae))F[ce]=ke,F[et]=ae,ce=et;else break e}}return q}function i(F,q){var ae=F.sortIndex-q.sortIndex;return ae!==0?ae:F.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var c=[],u=[],d=1,f=null,h=3,p=!1,y=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(F){for(var q=n(u);q!==null;){if(q.callback===null)r(u);else if(q.startTime<=F)r(u),q.sortIndex=q.expirationTime,e(c,q);else break;q=n(u)}}function T(F){if(v=!1,S(F),!y)if(n(c)!==null)y=!0,W(E);else{var q=n(u);q!==null&&B(T,q.startTime-F)}}function E(F,q){y=!1,v&&(v=!1,x(P),P=-1),p=!0;var ae=h;try{for(S(q),f=n(c);f!==null&&(!(f.expirationTime>q)||F&&!M());){var ce=f.callback;if(typeof ce=="function"){f.callback=null,h=f.priorityLevel;var ve=ce(f.expirationTime<=q);q=t.unstable_now(),typeof ve=="function"?f.callback=ve:f===n(c)&&r(c),S(q)}else r(c);f=n(c)}if(f!==null)var we=!0;else{var Le=n(u);Le!==null&&B(T,Le.startTime-q),we=!1}return we}finally{f=null,h=ae,p=!1}}var A=!1,j=null,P=-1,O=5,D=-1;function M(){return!(t.unstable_now()-D<O)}function z(){if(j!==null){var F=t.unstable_now();D=F;var q=!0;try{q=j(!0,F)}finally{q?L():(A=!1,j=null)}}else A=!1}var L;if(typeof _=="function")L=function(){_(z)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,X=te.port2;te.port1.onmessage=z,L=function(){X.postMessage(null)}}else L=function(){b(z,0)};function W(F){j=F,A||(A=!0,L())}function B(F,q){P=b(function(){F(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,W(E))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(F){switch(h){case 1:case 2:case 3:var q=3;break;default:q=h}var ae=h;h=q;try{return F()}finally{h=ae}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,q){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ae=h;h=F;try{return q()}finally{h=ae}},t.unstable_scheduleCallback=function(F,q,ae){var ce=t.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?ce+ae:ce):ae=ce,F){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=ae+ve,F={id:d++,callback:q,priorityLevel:F,startTime:ae,expirationTime:ve,sortIndex:-1},ae>ce?(F.sortIndex=ae,e(u,F),n(c)===null&&F===n(u)&&(v?(x(P),P=-1):v=!0,B(T,ae-ce))):(F.sortIndex=ve,e(c,F),y||p||(y=!0,W(E))),F},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(F){var q=h;return function(){var ae=h;h=q;try{return F.apply(this,arguments)}finally{h=ae}}}})(l4);o4.exports=l4;var t9=o4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n9=k,Li=t9;function Ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c4=new Set,wp={};function ru(t,e){Nd(t,e),Nd(t+"Capture",e)}function Nd(t,e){for(wp[t]=e,t=0;t<e.length;t++)c4.add(e[t])}var Ys=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),v1=Object.prototype.hasOwnProperty,r9=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,RE={},LE={};function i9(t){return v1.call(LE,t)?!0:v1.call(RE,t)?!1:r9.test(t)?LE[t]=!0:(RE[t]=!0,!1)}function a9(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function s9(t,e,n,r){if(e===null||typeof e>"u"||a9(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qr(t,e,n,r,i,a,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=s}var jr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){jr[t]=new Qr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];jr[e]=new Qr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){jr[t]=new Qr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){jr[t]=new Qr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){jr[t]=new Qr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){jr[t]=new Qr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){jr[t]=new Qr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){jr[t]=new Qr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){jr[t]=new Qr(t,5,!1,t.toLowerCase(),null,!1,!1)});var RS=/[\-:]([a-z])/g;function LS(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(RS,LS);jr[e]=new Qr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(RS,LS);jr[e]=new Qr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(RS,LS);jr[e]=new Qr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){jr[t]=new Qr(t,1,!1,t.toLowerCase(),null,!1,!1)});jr.xlinkHref=new Qr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){jr[t]=new Qr(t,1,!1,t.toLowerCase(),null,!0,!0)});function $S(t,e,n,r){var i=jr.hasOwnProperty(e)?jr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(s9(e,n,i,r)&&(n=null),r||i===null?i9(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var co=n9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ng=Symbol.for("react.element"),Yu=Symbol.for("react.portal"),Xu=Symbol.for("react.fragment"),zS=Symbol.for("react.strict_mode"),y1=Symbol.for("react.profiler"),u4=Symbol.for("react.provider"),d4=Symbol.for("react.context"),FS=Symbol.for("react.forward_ref"),x1=Symbol.for("react.suspense"),b1=Symbol.for("react.suspense_list"),VS=Symbol.for("react.memo"),Uo=Symbol.for("react.lazy"),f4=Symbol.for("react.offscreen"),$E=Symbol.iterator;function ph(t){return t===null||typeof t!="object"?null:(t=$E&&t[$E]||t["@@iterator"],typeof t=="function"?t:null)}var gn=Object.assign,Rb;function Dh(t){if(Rb===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Rb=e&&e[1]||""}return`
`+Rb+t}var Lb=!1;function $b(t,e){if(!t||Lb)return"";Lb=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=r.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var c=`
`+i[s].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=s&&0<=o);break}}}finally{Lb=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Dh(t):""}function o9(t){switch(t.tag){case 5:return Dh(t.type);case 16:return Dh("Lazy");case 13:return Dh("Suspense");case 19:return Dh("SuspenseList");case 0:case 2:case 15:return t=$b(t.type,!1),t;case 11:return t=$b(t.type.render,!1),t;case 1:return t=$b(t.type,!0),t;default:return""}}function w1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xu:return"Fragment";case Yu:return"Portal";case y1:return"Profiler";case zS:return"StrictMode";case x1:return"Suspense";case b1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case d4:return(t.displayName||"Context")+".Consumer";case u4:return(t._context.displayName||"Context")+".Provider";case FS:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case VS:return e=t.displayName||null,e!==null?e:w1(t.type)||"Memo";case Uo:e=t._payload,t=t._init;try{return w1(t(e))}catch{}}return null}function l9(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return w1(e);case 8:return e===zS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function pl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function h4(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function c9(t){var e=h4(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,a.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function kg(t){t._valueTracker||(t._valueTracker=c9(t))}function p4(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=h4(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Bv(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function _1(t,e){var n=e.checked;return gn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function zE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=pl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function m4(t,e){e=e.checked,e!=null&&$S(t,"checked",e,!1)}function S1(t,e){m4(t,e);var n=pl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?j1(t,e.type,n):e.hasOwnProperty("defaultValue")&&j1(t,e.type,pl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function FE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function j1(t,e,n){(e!=="number"||Bv(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Mh=Array.isArray;function vd(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+pl(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function A1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ae(91));return gn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function VE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ae(92));if(Mh(n)){if(1<n.length)throw Error(Ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:pl(n)}}function g4(t,e){var n=pl(e.value),r=pl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function BE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function v4(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function P1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?v4(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Og,y4=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Og=Og||document.createElement("div"),Og.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Og.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _p(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Gh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},u9=["Webkit","ms","Moz","O"];Object.keys(Gh).forEach(function(t){u9.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gh[e]=Gh[t]})});function x4(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Gh.hasOwnProperty(t)&&Gh[t]?(""+e).trim():e+"px"}function b4(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=x4(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var d9=gn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function E1(t,e){if(e){if(d9[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ae(62))}}function T1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var C1=null;function BS(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var N1=null,yd=null,xd=null;function UE(t){if(t=Vm(t)){if(typeof N1!="function")throw Error(Ae(280));var e=t.stateNode;e&&(e=W0(e),N1(t.stateNode,t.type,e))}}function w4(t){yd?xd?xd.push(t):xd=[t]:yd=t}function _4(){if(yd){var t=yd,e=xd;if(xd=yd=null,UE(t),e)for(t=0;t<e.length;t++)UE(e[t])}}function S4(t,e){return t(e)}function j4(){}var zb=!1;function A4(t,e,n){if(zb)return t(e,n);zb=!0;try{return S4(t,e,n)}finally{zb=!1,(yd!==null||xd!==null)&&(j4(),_4())}}function Sp(t,e){var n=t.stateNode;if(n===null)return null;var r=W0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ae(231,e,typeof n));return n}var k1=!1;if(Ys)try{var mh={};Object.defineProperty(mh,"passive",{get:function(){k1=!0}}),window.addEventListener("test",mh,mh),window.removeEventListener("test",mh,mh)}catch{k1=!1}function f9(t,e,n,r,i,a,s,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Yh=!1,Uv=null,Wv=!1,O1=null,h9={onError:function(t){Yh=!0,Uv=t}};function p9(t,e,n,r,i,a,s,o,c){Yh=!1,Uv=null,f9.apply(h9,arguments)}function m9(t,e,n,r,i,a,s,o,c){if(p9.apply(this,arguments),Yh){if(Yh){var u=Uv;Yh=!1,Uv=null}else throw Error(Ae(198));Wv||(Wv=!0,O1=u)}}function iu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function P4(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function WE(t){if(iu(t)!==t)throw Error(Ae(188))}function g9(t){var e=t.alternate;if(!e){if(e=iu(t),e===null)throw Error(Ae(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return WE(i),t;if(a===r)return WE(i),e;a=a.sibling}throw Error(Ae(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,o=i.child;o;){if(o===n){s=!0,n=i,r=a;break}if(o===r){s=!0,r=i,n=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===n){s=!0,n=a,r=i;break}if(o===r){s=!0,r=a,n=i;break}o=o.sibling}if(!s)throw Error(Ae(189))}}if(n.alternate!==r)throw Error(Ae(190))}if(n.tag!==3)throw Error(Ae(188));return n.stateNode.current===n?t:e}function E4(t){return t=g9(t),t!==null?T4(t):null}function T4(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=T4(t);if(e!==null)return e;t=t.sibling}return null}var C4=Li.unstable_scheduleCallback,KE=Li.unstable_cancelCallback,v9=Li.unstable_shouldYield,y9=Li.unstable_requestPaint,Cn=Li.unstable_now,x9=Li.unstable_getCurrentPriorityLevel,US=Li.unstable_ImmediatePriority,N4=Li.unstable_UserBlockingPriority,Kv=Li.unstable_NormalPriority,b9=Li.unstable_LowPriority,k4=Li.unstable_IdlePriority,F0=null,is=null;function w9(t){if(is&&typeof is.onCommitFiberRoot=="function")try{is.onCommitFiberRoot(F0,t,void 0,(t.current.flags&128)===128)}catch{}}var Pa=Math.clz32?Math.clz32:j9,_9=Math.log,S9=Math.LN2;function j9(t){return t>>>=0,t===0?32:31-(_9(t)/S9|0)|0}var Ig=64,Dg=4194304;function Rh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function qv(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,s=n&268435455;if(s!==0){var o=s&~i;o!==0?r=Rh(o):(a&=s,a!==0&&(r=Rh(a)))}else s=n&~i,s!==0?r=Rh(s):a!==0&&(r=Rh(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Pa(e),i=1<<n,r|=t[n],e&=~i;return r}function A9(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function P9(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var s=31-Pa(a),o=1<<s,c=i[s];c===-1?(!(o&n)||o&r)&&(i[s]=A9(o,e)):c<=e&&(t.expiredLanes|=o),a&=~o}}function I1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function O4(){var t=Ig;return Ig<<=1,!(Ig&4194240)&&(Ig=64),t}function Fb(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function zm(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Pa(e),t[e]=n}function E9(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Pa(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}function WS(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Pa(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Rt=0;function I4(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var D4,KS,M4,R4,L4,D1=!1,Mg=[],tl=null,nl=null,rl=null,jp=new Map,Ap=new Map,qo=[],T9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qE(t,e){switch(t){case"focusin":case"focusout":tl=null;break;case"dragenter":case"dragleave":nl=null;break;case"mouseover":case"mouseout":rl=null;break;case"pointerover":case"pointerout":jp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ap.delete(e.pointerId)}}function gh(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Vm(e),e!==null&&KS(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function C9(t,e,n,r,i){switch(e){case"focusin":return tl=gh(tl,t,e,n,r,i),!0;case"dragenter":return nl=gh(nl,t,e,n,r,i),!0;case"mouseover":return rl=gh(rl,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return jp.set(a,gh(jp.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ap.set(a,gh(Ap.get(a)||null,t,e,n,r,i)),!0}return!1}function $4(t){var e=mc(t.target);if(e!==null){var n=iu(e);if(n!==null){if(e=n.tag,e===13){if(e=P4(n),e!==null){t.blockedOn=e,L4(t.priority,function(){M4(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wv(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=M1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);C1=r,n.target.dispatchEvent(r),C1=null}else return e=Vm(n),e!==null&&KS(e),t.blockedOn=n,!1;e.shift()}return!0}function HE(t,e,n){wv(t)&&n.delete(e)}function N9(){D1=!1,tl!==null&&wv(tl)&&(tl=null),nl!==null&&wv(nl)&&(nl=null),rl!==null&&wv(rl)&&(rl=null),jp.forEach(HE),Ap.forEach(HE)}function vh(t,e){t.blockedOn===e&&(t.blockedOn=null,D1||(D1=!0,Li.unstable_scheduleCallback(Li.unstable_NormalPriority,N9)))}function Pp(t){function e(i){return vh(i,t)}if(0<Mg.length){vh(Mg[0],t);for(var n=1;n<Mg.length;n++){var r=Mg[n];r.blockedOn===t&&(r.blockedOn=null)}}for(tl!==null&&vh(tl,t),nl!==null&&vh(nl,t),rl!==null&&vh(rl,t),jp.forEach(e),Ap.forEach(e),n=0;n<qo.length;n++)r=qo[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<qo.length&&(n=qo[0],n.blockedOn===null);)$4(n),n.blockedOn===null&&qo.shift()}var bd=co.ReactCurrentBatchConfig,Hv=!0;function k9(t,e,n,r){var i=Rt,a=bd.transition;bd.transition=null;try{Rt=1,qS(t,e,n,r)}finally{Rt=i,bd.transition=a}}function O9(t,e,n,r){var i=Rt,a=bd.transition;bd.transition=null;try{Rt=4,qS(t,e,n,r)}finally{Rt=i,bd.transition=a}}function qS(t,e,n,r){if(Hv){var i=M1(t,e,n,r);if(i===null)Xb(t,e,r,Gv,n),qE(t,r);else if(C9(i,t,e,n,r))r.stopPropagation();else if(qE(t,r),e&4&&-1<T9.indexOf(t)){for(;i!==null;){var a=Vm(i);if(a!==null&&D4(a),a=M1(t,e,n,r),a===null&&Xb(t,e,r,Gv,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Xb(t,e,r,null,n)}}var Gv=null;function M1(t,e,n,r){if(Gv=null,t=BS(r),t=mc(t),t!==null)if(e=iu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=P4(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Gv=t,null}function z4(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(x9()){case US:return 1;case N4:return 4;case Kv:case b9:return 16;case k4:return 536870912;default:return 16}default:return 16}}var Yo=null,HS=null,_v=null;function F4(){if(_v)return _v;var t,e=HS,n=e.length,r,i="value"in Yo?Yo.value:Yo.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[a-r];r++);return _v=i.slice(t,1<r?1-r:void 0)}function Sv(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Rg(){return!0}function GE(){return!1}function Vi(t){function e(n,r,i,a,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Rg:GE,this.isPropagationStopped=GE,this}return gn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Rg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Rg)},persist:function(){},isPersistent:Rg}),e}var Ef={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},GS=Vi(Ef),Fm=gn({},Ef,{view:0,detail:0}),I9=Vi(Fm),Vb,Bb,yh,V0=gn({},Fm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:YS,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==yh&&(yh&&t.type==="mousemove"?(Vb=t.screenX-yh.screenX,Bb=t.screenY-yh.screenY):Bb=Vb=0,yh=t),Vb)},movementY:function(t){return"movementY"in t?t.movementY:Bb}}),YE=Vi(V0),D9=gn({},V0,{dataTransfer:0}),M9=Vi(D9),R9=gn({},Fm,{relatedTarget:0}),Ub=Vi(R9),L9=gn({},Ef,{animationName:0,elapsedTime:0,pseudoElement:0}),$9=Vi(L9),z9=gn({},Ef,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),F9=Vi(z9),V9=gn({},Ef,{data:0}),XE=Vi(V9),B9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},W9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function K9(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=W9[t])?!!e[t]:!1}function YS(){return K9}var q9=gn({},Fm,{key:function(t){if(t.key){var e=B9[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Sv(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?U9[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:YS,charCode:function(t){return t.type==="keypress"?Sv(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Sv(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),H9=Vi(q9),G9=gn({},V0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),QE=Vi(G9),Y9=gn({},Fm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:YS}),X9=Vi(Y9),Q9=gn({},Ef,{propertyName:0,elapsedTime:0,pseudoElement:0}),J9=Vi(Q9),Z9=gn({},V0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),e7=Vi(Z9),t7=[9,13,27,32],XS=Ys&&"CompositionEvent"in window,Xh=null;Ys&&"documentMode"in document&&(Xh=document.documentMode);var n7=Ys&&"TextEvent"in window&&!Xh,V4=Ys&&(!XS||Xh&&8<Xh&&11>=Xh),JE=" ",ZE=!1;function B4(t,e){switch(t){case"keyup":return t7.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function U4(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qu=!1;function r7(t,e){switch(t){case"compositionend":return U4(e);case"keypress":return e.which!==32?null:(ZE=!0,JE);case"textInput":return t=e.data,t===JE&&ZE?null:t;default:return null}}function i7(t,e){if(Qu)return t==="compositionend"||!XS&&B4(t,e)?(t=F4(),_v=HS=Yo=null,Qu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return V4&&e.locale!=="ko"?null:e.data;default:return null}}var a7={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!a7[t.type]:e==="textarea"}function W4(t,e,n,r){w4(r),e=Yv(e,"onChange"),0<e.length&&(n=new GS("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Qh=null,Ep=null;function s7(t){tR(t,0)}function B0(t){var e=ed(t);if(p4(e))return t}function o7(t,e){if(t==="change")return e}var K4=!1;if(Ys){var Wb;if(Ys){var Kb="oninput"in document;if(!Kb){var tT=document.createElement("div");tT.setAttribute("oninput","return;"),Kb=typeof tT.oninput=="function"}Wb=Kb}else Wb=!1;K4=Wb&&(!document.documentMode||9<document.documentMode)}function nT(){Qh&&(Qh.detachEvent("onpropertychange",q4),Ep=Qh=null)}function q4(t){if(t.propertyName==="value"&&B0(Ep)){var e=[];W4(e,Ep,t,BS(t)),A4(s7,e)}}function l7(t,e,n){t==="focusin"?(nT(),Qh=e,Ep=n,Qh.attachEvent("onpropertychange",q4)):t==="focusout"&&nT()}function c7(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return B0(Ep)}function u7(t,e){if(t==="click")return B0(e)}function d7(t,e){if(t==="input"||t==="change")return B0(e)}function f7(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Na=typeof Object.is=="function"?Object.is:f7;function Tp(t,e){if(Na(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!v1.call(e,i)||!Na(t[i],e[i]))return!1}return!0}function rT(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function iT(t,e){var n=rT(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rT(n)}}function H4(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?H4(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function G4(){for(var t=window,e=Bv();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Bv(t.document)}return e}function QS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function h7(t){var e=G4(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&H4(n.ownerDocument.documentElement,n)){if(r!==null&&QS(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=iT(n,a);var s=iT(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var p7=Ys&&"documentMode"in document&&11>=document.documentMode,Ju=null,R1=null,Jh=null,L1=!1;function aT(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;L1||Ju==null||Ju!==Bv(r)||(r=Ju,"selectionStart"in r&&QS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Jh&&Tp(Jh,r)||(Jh=r,r=Yv(R1,"onSelect"),0<r.length&&(e=new GS("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ju)))}function Lg(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Zu={animationend:Lg("Animation","AnimationEnd"),animationiteration:Lg("Animation","AnimationIteration"),animationstart:Lg("Animation","AnimationStart"),transitionend:Lg("Transition","TransitionEnd")},qb={},Y4={};Ys&&(Y4=document.createElement("div").style,"AnimationEvent"in window||(delete Zu.animationend.animation,delete Zu.animationiteration.animation,delete Zu.animationstart.animation),"TransitionEvent"in window||delete Zu.transitionend.transition);function U0(t){if(qb[t])return qb[t];if(!Zu[t])return t;var e=Zu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Y4)return qb[t]=e[n];return t}var X4=U0("animationend"),Q4=U0("animationiteration"),J4=U0("animationstart"),Z4=U0("transitionend"),eR=new Map,sT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wl(t,e){eR.set(t,e),ru(e,[t])}for(var Hb=0;Hb<sT.length;Hb++){var Gb=sT[Hb],m7=Gb.toLowerCase(),g7=Gb[0].toUpperCase()+Gb.slice(1);wl(m7,"on"+g7)}wl(X4,"onAnimationEnd");wl(Q4,"onAnimationIteration");wl(J4,"onAnimationStart");wl("dblclick","onDoubleClick");wl("focusin","onFocus");wl("focusout","onBlur");wl(Z4,"onTransitionEnd");Nd("onMouseEnter",["mouseout","mouseover"]);Nd("onMouseLeave",["mouseout","mouseover"]);Nd("onPointerEnter",["pointerout","pointerover"]);Nd("onPointerLeave",["pointerout","pointerover"]);ru("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ru("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ru("onBeforeInput",["compositionend","keypress","textInput","paste"]);ru("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ru("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ru("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),v7=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lh));function oT(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,m9(r,e,void 0,t),t.currentTarget=null}function tR(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var s=r.length-1;0<=s;s--){var o=r[s],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==a&&i.isPropagationStopped())break e;oT(i,o,u),a=c}else for(s=0;s<r.length;s++){if(o=r[s],c=o.instance,u=o.currentTarget,o=o.listener,c!==a&&i.isPropagationStopped())break e;oT(i,o,u),a=c}}}if(Wv)throw t=O1,Wv=!1,O1=null,t}function tn(t,e){var n=e[B1];n===void 0&&(n=e[B1]=new Set);var r=t+"__bubble";n.has(r)||(nR(e,t,2,!1),n.add(r))}function Yb(t,e,n){var r=0;e&&(r|=4),nR(n,t,r,e)}var $g="_reactListening"+Math.random().toString(36).slice(2);function Cp(t){if(!t[$g]){t[$g]=!0,c4.forEach(function(n){n!=="selectionchange"&&(v7.has(n)||Yb(n,!1,t),Yb(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$g]||(e[$g]=!0,Yb("selectionchange",!1,e))}}function nR(t,e,n,r){switch(z4(e)){case 1:var i=k9;break;case 4:i=O9;break;default:i=qS}n=i.bind(null,e,n,t),i=void 0,!k1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Xb(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;s=s.return}for(;o!==null;){if(s=mc(o),s===null)return;if(c=s.tag,c===5||c===6){r=a=s;continue e}o=o.parentNode}}r=r.return}A4(function(){var u=a,d=BS(n),f=[];e:{var h=eR.get(t);if(h!==void 0){var p=GS,y=t;switch(t){case"keypress":if(Sv(n)===0)break e;case"keydown":case"keyup":p=H9;break;case"focusin":y="focus",p=Ub;break;case"focusout":y="blur",p=Ub;break;case"beforeblur":case"afterblur":p=Ub;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=YE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=M9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=X9;break;case X4:case Q4:case J4:p=$9;break;case Z4:p=J9;break;case"scroll":p=I9;break;case"wheel":p=e7;break;case"copy":case"cut":case"paste":p=F9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=QE}var v=(e&4)!==0,b=!v&&t==="scroll",x=v?h!==null?h+"Capture":null:h;v=[];for(var _=u,S;_!==null;){S=_;var T=S.stateNode;if(S.tag===5&&T!==null&&(S=T,x!==null&&(T=Sp(_,x),T!=null&&v.push(Np(_,T,S)))),b)break;_=_.return}0<v.length&&(h=new p(h,y,null,n,d),f.push({event:h,listeners:v}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&n!==C1&&(y=n.relatedTarget||n.fromElement)&&(mc(y)||y[Xs]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=u,y=y?mc(y):null,y!==null&&(b=iu(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=u),p!==y)){if(v=YE,T="onMouseLeave",x="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(v=QE,T="onPointerLeave",x="onPointerEnter",_="pointer"),b=p==null?h:ed(p),S=y==null?h:ed(y),h=new v(T,_+"leave",p,n,d),h.target=b,h.relatedTarget=S,T=null,mc(d)===u&&(v=new v(x,_+"enter",y,n,d),v.target=S,v.relatedTarget=b,T=v),b=T,p&&y)t:{for(v=p,x=y,_=0,S=v;S;S=Lu(S))_++;for(S=0,T=x;T;T=Lu(T))S++;for(;0<_-S;)v=Lu(v),_--;for(;0<S-_;)x=Lu(x),S--;for(;_--;){if(v===x||x!==null&&v===x.alternate)break t;v=Lu(v),x=Lu(x)}v=null}else v=null;p!==null&&lT(f,h,p,v,!1),y!==null&&b!==null&&lT(f,b,y,v,!0)}}e:{if(h=u?ed(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var E=o7;else if(eT(h))if(K4)E=d7;else{E=c7;var A=l7}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(E=u7);if(E&&(E=E(t,u))){W4(f,E,n,d);break e}A&&A(t,h,u),t==="focusout"&&(A=h._wrapperState)&&A.controlled&&h.type==="number"&&j1(h,"number",h.value)}switch(A=u?ed(u):window,t){case"focusin":(eT(A)||A.contentEditable==="true")&&(Ju=A,R1=u,Jh=null);break;case"focusout":Jh=R1=Ju=null;break;case"mousedown":L1=!0;break;case"contextmenu":case"mouseup":case"dragend":L1=!1,aT(f,n,d);break;case"selectionchange":if(p7)break;case"keydown":case"keyup":aT(f,n,d)}var j;if(XS)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Qu?B4(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(V4&&n.locale!=="ko"&&(Qu||P!=="onCompositionStart"?P==="onCompositionEnd"&&Qu&&(j=F4()):(Yo=d,HS="value"in Yo?Yo.value:Yo.textContent,Qu=!0)),A=Yv(u,P),0<A.length&&(P=new XE(P,t,null,n,d),f.push({event:P,listeners:A}),j?P.data=j:(j=U4(n),j!==null&&(P.data=j)))),(j=n7?r7(t,n):i7(t,n))&&(u=Yv(u,"onBeforeInput"),0<u.length&&(d=new XE("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=j))}tR(f,e)})}function Np(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Yv(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Sp(t,n),a!=null&&r.unshift(Np(t,a,i)),a=Sp(t,e),a!=null&&r.push(Np(t,a,i))),t=t.return}return r}function Lu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function lT(t,e,n,r,i){for(var a=e._reactName,s=[];n!==null&&n!==r;){var o=n,c=o.alternate,u=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&u!==null&&(o=u,i?(c=Sp(n,a),c!=null&&s.unshift(Np(n,c,o))):i||(c=Sp(n,a),c!=null&&s.push(Np(n,c,o)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var y7=/\r\n?/g,x7=/\u0000|\uFFFD/g;function cT(t){return(typeof t=="string"?t:""+t).replace(y7,`
`).replace(x7,"")}function zg(t,e,n){if(e=cT(e),cT(t)!==e&&n)throw Error(Ae(425))}function Xv(){}var $1=null,z1=null;function F1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var V1=typeof setTimeout=="function"?setTimeout:void 0,b7=typeof clearTimeout=="function"?clearTimeout:void 0,uT=typeof Promise=="function"?Promise:void 0,w7=typeof queueMicrotask=="function"?queueMicrotask:typeof uT<"u"?function(t){return uT.resolve(null).then(t).catch(_7)}:V1;function _7(t){setTimeout(function(){throw t})}function Qb(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Pp(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Pp(e)}function il(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function dT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Tf=Math.random().toString(36).slice(2),Ja="__reactFiber$"+Tf,kp="__reactProps$"+Tf,Xs="__reactContainer$"+Tf,B1="__reactEvents$"+Tf,S7="__reactListeners$"+Tf,j7="__reactHandles$"+Tf;function mc(t){var e=t[Ja];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Xs]||n[Ja]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=dT(t);t!==null;){if(n=t[Ja])return n;t=dT(t)}return e}t=n,n=t.parentNode}return null}function Vm(t){return t=t[Ja]||t[Xs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ed(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ae(33))}function W0(t){return t[kp]||null}var U1=[],td=-1;function _l(t){return{current:t}}function sn(t){0>td||(t.current=U1[td],U1[td]=null,td--)}function Xt(t,e){td++,U1[td]=t.current,t.current=e}var ml={},$r=_l(ml),pi=_l(!1),Mc=ml;function kd(t,e){var n=t.type.contextTypes;if(!n)return ml;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function mi(t){return t=t.childContextTypes,t!=null}function Qv(){sn(pi),sn($r)}function fT(t,e,n){if($r.current!==ml)throw Error(Ae(168));Xt($r,e),Xt(pi,n)}function rR(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ae(108,l9(t)||"Unknown",i));return gn({},n,r)}function Jv(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ml,Mc=$r.current,Xt($r,t),Xt(pi,pi.current),!0}function hT(t,e,n){var r=t.stateNode;if(!r)throw Error(Ae(169));n?(t=rR(t,e,Mc),r.__reactInternalMemoizedMergedChildContext=t,sn(pi),sn($r),Xt($r,t)):sn(pi),Xt(pi,n)}var Rs=null,K0=!1,Jb=!1;function iR(t){Rs===null?Rs=[t]:Rs.push(t)}function A7(t){K0=!0,iR(t)}function Sl(){if(!Jb&&Rs!==null){Jb=!0;var t=0,e=Rt;try{var n=Rs;for(Rt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Rs=null,K0=!1}catch(i){throw Rs!==null&&(Rs=Rs.slice(t+1)),C4(US,Sl),i}finally{Rt=e,Jb=!1}}return null}var nd=[],rd=0,Zv=null,ey=0,Xi=[],Qi=0,Rc=null,Ls=1,$s="";function ac(t,e){nd[rd++]=ey,nd[rd++]=Zv,Zv=t,ey=e}function aR(t,e,n){Xi[Qi++]=Ls,Xi[Qi++]=$s,Xi[Qi++]=Rc,Rc=t;var r=Ls;t=$s;var i=32-Pa(r)-1;r&=~(1<<i),n+=1;var a=32-Pa(e)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ls=1<<32-Pa(e)+i|n<<i|r,$s=a+t}else Ls=1<<a|n<<i|r,$s=t}function JS(t){t.return!==null&&(ac(t,1),aR(t,1,0))}function ZS(t){for(;t===Zv;)Zv=nd[--rd],nd[rd]=null,ey=nd[--rd],nd[rd]=null;for(;t===Rc;)Rc=Xi[--Qi],Xi[Qi]=null,$s=Xi[--Qi],Xi[Qi]=null,Ls=Xi[--Qi],Xi[Qi]=null}var Ii=null,ki=null,ln=!1,ja=null;function sR(t,e){var n=Zi(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function pT(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ii=t,ki=il(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ii=t,ki=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Rc!==null?{id:Ls,overflow:$s}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Zi(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ii=t,ki=null,!0):!1;default:return!1}}function W1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function K1(t){if(ln){var e=ki;if(e){var n=e;if(!pT(t,e)){if(W1(t))throw Error(Ae(418));e=il(n.nextSibling);var r=Ii;e&&pT(t,e)?sR(r,n):(t.flags=t.flags&-4097|2,ln=!1,Ii=t)}}else{if(W1(t))throw Error(Ae(418));t.flags=t.flags&-4097|2,ln=!1,Ii=t}}}function mT(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ii=t}function Fg(t){if(t!==Ii)return!1;if(!ln)return mT(t),ln=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!F1(t.type,t.memoizedProps)),e&&(e=ki)){if(W1(t))throw oR(),Error(Ae(418));for(;e;)sR(t,e),e=il(e.nextSibling)}if(mT(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ki=il(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ki=null}}else ki=Ii?il(t.stateNode.nextSibling):null;return!0}function oR(){for(var t=ki;t;)t=il(t.nextSibling)}function Od(){ki=Ii=null,ln=!1}function ej(t){ja===null?ja=[t]:ja.push(t)}var P7=co.ReactCurrentBatchConfig;function xh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ae(309));var r=n.stateNode}if(!r)throw Error(Ae(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(s){var o=i.refs;s===null?delete o[a]:o[a]=s},e._stringRef=a,e)}if(typeof t!="string")throw Error(Ae(284));if(!n._owner)throw Error(Ae(290,t))}return t}function Vg(t,e){throw t=Object.prototype.toString.call(e),Error(Ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function gT(t){var e=t._init;return e(t._payload)}function lR(t){function e(x,_){if(t){var S=x.deletions;S===null?(x.deletions=[_],x.flags|=16):S.push(_)}}function n(x,_){if(!t)return null;for(;_!==null;)e(x,_),_=_.sibling;return null}function r(x,_){for(x=new Map;_!==null;)_.key!==null?x.set(_.key,_):x.set(_.index,_),_=_.sibling;return x}function i(x,_){return x=ll(x,_),x.index=0,x.sibling=null,x}function a(x,_,S){return x.index=S,t?(S=x.alternate,S!==null?(S=S.index,S<_?(x.flags|=2,_):S):(x.flags|=2,_)):(x.flags|=1048576,_)}function s(x){return t&&x.alternate===null&&(x.flags|=2),x}function o(x,_,S,T){return _===null||_.tag!==6?(_=aw(S,x.mode,T),_.return=x,_):(_=i(_,S),_.return=x,_)}function c(x,_,S,T){var E=S.type;return E===Xu?d(x,_,S.props.children,T,S.key):_!==null&&(_.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Uo&&gT(E)===_.type)?(T=i(_,S.props),T.ref=xh(x,_,S),T.return=x,T):(T=Nv(S.type,S.key,S.props,null,x.mode,T),T.ref=xh(x,_,S),T.return=x,T)}function u(x,_,S,T){return _===null||_.tag!==4||_.stateNode.containerInfo!==S.containerInfo||_.stateNode.implementation!==S.implementation?(_=sw(S,x.mode,T),_.return=x,_):(_=i(_,S.children||[]),_.return=x,_)}function d(x,_,S,T,E){return _===null||_.tag!==7?(_=Ec(S,x.mode,T,E),_.return=x,_):(_=i(_,S),_.return=x,_)}function f(x,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return _=aw(""+_,x.mode,S),_.return=x,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ng:return S=Nv(_.type,_.key,_.props,null,x.mode,S),S.ref=xh(x,null,_),S.return=x,S;case Yu:return _=sw(_,x.mode,S),_.return=x,_;case Uo:var T=_._init;return f(x,T(_._payload),S)}if(Mh(_)||ph(_))return _=Ec(_,x.mode,S,null),_.return=x,_;Vg(x,_)}return null}function h(x,_,S,T){var E=_!==null?_.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return E!==null?null:o(x,_,""+S,T);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ng:return S.key===E?c(x,_,S,T):null;case Yu:return S.key===E?u(x,_,S,T):null;case Uo:return E=S._init,h(x,_,E(S._payload),T)}if(Mh(S)||ph(S))return E!==null?null:d(x,_,S,T,null);Vg(x,S)}return null}function p(x,_,S,T,E){if(typeof T=="string"&&T!==""||typeof T=="number")return x=x.get(S)||null,o(_,x,""+T,E);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Ng:return x=x.get(T.key===null?S:T.key)||null,c(_,x,T,E);case Yu:return x=x.get(T.key===null?S:T.key)||null,u(_,x,T,E);case Uo:var A=T._init;return p(x,_,S,A(T._payload),E)}if(Mh(T)||ph(T))return x=x.get(S)||null,d(_,x,T,E,null);Vg(_,T)}return null}function y(x,_,S,T){for(var E=null,A=null,j=_,P=_=0,O=null;j!==null&&P<S.length;P++){j.index>P?(O=j,j=null):O=j.sibling;var D=h(x,j,S[P],T);if(D===null){j===null&&(j=O);break}t&&j&&D.alternate===null&&e(x,j),_=a(D,_,P),A===null?E=D:A.sibling=D,A=D,j=O}if(P===S.length)return n(x,j),ln&&ac(x,P),E;if(j===null){for(;P<S.length;P++)j=f(x,S[P],T),j!==null&&(_=a(j,_,P),A===null?E=j:A.sibling=j,A=j);return ln&&ac(x,P),E}for(j=r(x,j);P<S.length;P++)O=p(j,x,P,S[P],T),O!==null&&(t&&O.alternate!==null&&j.delete(O.key===null?P:O.key),_=a(O,_,P),A===null?E=O:A.sibling=O,A=O);return t&&j.forEach(function(M){return e(x,M)}),ln&&ac(x,P),E}function v(x,_,S,T){var E=ph(S);if(typeof E!="function")throw Error(Ae(150));if(S=E.call(S),S==null)throw Error(Ae(151));for(var A=E=null,j=_,P=_=0,O=null,D=S.next();j!==null&&!D.done;P++,D=S.next()){j.index>P?(O=j,j=null):O=j.sibling;var M=h(x,j,D.value,T);if(M===null){j===null&&(j=O);break}t&&j&&M.alternate===null&&e(x,j),_=a(M,_,P),A===null?E=M:A.sibling=M,A=M,j=O}if(D.done)return n(x,j),ln&&ac(x,P),E;if(j===null){for(;!D.done;P++,D=S.next())D=f(x,D.value,T),D!==null&&(_=a(D,_,P),A===null?E=D:A.sibling=D,A=D);return ln&&ac(x,P),E}for(j=r(x,j);!D.done;P++,D=S.next())D=p(j,x,P,D.value,T),D!==null&&(t&&D.alternate!==null&&j.delete(D.key===null?P:D.key),_=a(D,_,P),A===null?E=D:A.sibling=D,A=D);return t&&j.forEach(function(z){return e(x,z)}),ln&&ac(x,P),E}function b(x,_,S,T){if(typeof S=="object"&&S!==null&&S.type===Xu&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Ng:e:{for(var E=S.key,A=_;A!==null;){if(A.key===E){if(E=S.type,E===Xu){if(A.tag===7){n(x,A.sibling),_=i(A,S.props.children),_.return=x,x=_;break e}}else if(A.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Uo&&gT(E)===A.type){n(x,A.sibling),_=i(A,S.props),_.ref=xh(x,A,S),_.return=x,x=_;break e}n(x,A);break}else e(x,A);A=A.sibling}S.type===Xu?(_=Ec(S.props.children,x.mode,T,S.key),_.return=x,x=_):(T=Nv(S.type,S.key,S.props,null,x.mode,T),T.ref=xh(x,_,S),T.return=x,x=T)}return s(x);case Yu:e:{for(A=S.key;_!==null;){if(_.key===A)if(_.tag===4&&_.stateNode.containerInfo===S.containerInfo&&_.stateNode.implementation===S.implementation){n(x,_.sibling),_=i(_,S.children||[]),_.return=x,x=_;break e}else{n(x,_);break}else e(x,_);_=_.sibling}_=sw(S,x.mode,T),_.return=x,x=_}return s(x);case Uo:return A=S._init,b(x,_,A(S._payload),T)}if(Mh(S))return y(x,_,S,T);if(ph(S))return v(x,_,S,T);Vg(x,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,_!==null&&_.tag===6?(n(x,_.sibling),_=i(_,S),_.return=x,x=_):(n(x,_),_=aw(S,x.mode,T),_.return=x,x=_),s(x)):n(x,_)}return b}var Id=lR(!0),cR=lR(!1),ty=_l(null),ny=null,id=null,tj=null;function nj(){tj=id=ny=null}function rj(t){var e=ty.current;sn(ty),t._currentValue=e}function q1(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function wd(t,e){ny=t,tj=id=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ui=!0),t.firstContext=null)}function ia(t){var e=t._currentValue;if(tj!==t)if(t={context:t,memoizedValue:e,next:null},id===null){if(ny===null)throw Error(Ae(308));id=t,ny.dependencies={lanes:0,firstContext:t}}else id=id.next=t;return e}var gc=null;function ij(t){gc===null?gc=[t]:gc.push(t)}function uR(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,ij(e)):(n.next=i.next,i.next=n),e.interleaved=n,Qs(t,r)}function Qs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Wo=!1;function aj(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dR(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ws(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function al(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Pt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Qs(t,n)}return i=r.interleaved,i===null?(e.next=e,ij(r)):(e.next=i.next,i.next=e),r.interleaved=e,Qs(t,n)}function jv(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,WS(t,n)}}function vT(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=s:a=a.next=s,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ry(t,e,n,r){var i=t.updateQueue;Wo=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,u=c.next;c.next=null,s===null?a=u:s.next=u,s=c;var d=t.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==s&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(a!==null){var f=i.baseState;s=0,d=u=c=null,o=a;do{var h=o.lane,p=o.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=t,v=o;switch(h=e,p=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){f=y.call(p,f,h);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,h=typeof y=="function"?y.call(p,f,h):y,h==null)break e;f=gn({},f,h);break e;case 2:Wo=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,s|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;h=o,o=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(d===null&&(c=f),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);$c|=s,t.lanes=s,t.memoizedState=f}}function yT(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ae(191,i));i.call(r)}}}var Bm={},as=_l(Bm),Op=_l(Bm),Ip=_l(Bm);function vc(t){if(t===Bm)throw Error(Ae(174));return t}function sj(t,e){switch(Xt(Ip,e),Xt(Op,t),Xt(as,Bm),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:P1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=P1(e,t)}sn(as),Xt(as,e)}function Dd(){sn(as),sn(Op),sn(Ip)}function fR(t){vc(Ip.current);var e=vc(as.current),n=P1(e,t.type);e!==n&&(Xt(Op,t),Xt(as,n))}function oj(t){Op.current===t&&(sn(as),sn(Op))}var pn=_l(0);function iy(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Zb=[];function lj(){for(var t=0;t<Zb.length;t++)Zb[t]._workInProgressVersionPrimary=null;Zb.length=0}var Av=co.ReactCurrentDispatcher,ew=co.ReactCurrentBatchConfig,Lc=0,mn=null,Gn=null,sr=null,ay=!1,Zh=!1,Dp=0,E7=0;function Cr(){throw Error(Ae(321))}function cj(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Na(t[n],e[n]))return!1;return!0}function uj(t,e,n,r,i,a){if(Lc=a,mn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Av.current=t===null||t.memoizedState===null?k7:O7,t=n(r,i),Zh){a=0;do{if(Zh=!1,Dp=0,25<=a)throw Error(Ae(301));a+=1,sr=Gn=null,e.updateQueue=null,Av.current=I7,t=n(r,i)}while(Zh)}if(Av.current=sy,e=Gn!==null&&Gn.next!==null,Lc=0,sr=Gn=mn=null,ay=!1,e)throw Error(Ae(300));return t}function dj(){var t=Dp!==0;return Dp=0,t}function Qa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sr===null?mn.memoizedState=sr=t:sr=sr.next=t,sr}function aa(){if(Gn===null){var t=mn.alternate;t=t!==null?t.memoizedState:null}else t=Gn.next;var e=sr===null?mn.memoizedState:sr.next;if(e!==null)sr=e,Gn=t;else{if(t===null)throw Error(Ae(310));Gn=t,t={memoizedState:Gn.memoizedState,baseState:Gn.baseState,baseQueue:Gn.baseQueue,queue:Gn.queue,next:null},sr===null?mn.memoizedState=sr=t:sr=sr.next=t}return sr}function Mp(t,e){return typeof e=="function"?e(t):e}function tw(t){var e=aa(),n=e.queue;if(n===null)throw Error(Ae(311));n.lastRenderedReducer=t;var r=Gn,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var o=s=null,c=null,u=a;do{var d=u.lane;if((Lc&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=f,s=r):c=c.next=f,mn.lanes|=d,$c|=d}u=u.next}while(u!==null&&u!==a);c===null?s=r:c.next=o,Na(r,e.memoizedState)||(ui=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do a=i.lane,mn.lanes|=a,$c|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function nw(t){var e=aa(),n=e.queue;if(n===null)throw Error(Ae(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do a=t(a,s.action),s=s.next;while(s!==i);Na(a,e.memoizedState)||(ui=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function hR(){}function pR(t,e){var n=mn,r=aa(),i=e(),a=!Na(r.memoizedState,i);if(a&&(r.memoizedState=i,ui=!0),r=r.queue,fj(vR.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||sr!==null&&sr.memoizedState.tag&1){if(n.flags|=2048,Rp(9,gR.bind(null,n,r,i,e),void 0,null),lr===null)throw Error(Ae(349));Lc&30||mR(n,e,i)}return i}function mR(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=mn.updateQueue,e===null?(e={lastEffect:null,stores:null},mn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function gR(t,e,n,r){e.value=n,e.getSnapshot=r,yR(e)&&xR(t)}function vR(t,e,n){return n(function(){yR(e)&&xR(t)})}function yR(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Na(t,n)}catch{return!0}}function xR(t){var e=Qs(t,1);e!==null&&Ea(e,t,1,-1)}function xT(t){var e=Qa();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mp,lastRenderedState:t},e.queue=t,t=t.dispatch=N7.bind(null,mn,t),[e.memoizedState,t]}function Rp(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=mn.updateQueue,e===null?(e={lastEffect:null,stores:null},mn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function bR(){return aa().memoizedState}function Pv(t,e,n,r){var i=Qa();mn.flags|=t,i.memoizedState=Rp(1|e,n,void 0,r===void 0?null:r)}function q0(t,e,n,r){var i=aa();r=r===void 0?null:r;var a=void 0;if(Gn!==null){var s=Gn.memoizedState;if(a=s.destroy,r!==null&&cj(r,s.deps)){i.memoizedState=Rp(e,n,a,r);return}}mn.flags|=t,i.memoizedState=Rp(1|e,n,a,r)}function bT(t,e){return Pv(8390656,8,t,e)}function fj(t,e){return q0(2048,8,t,e)}function wR(t,e){return q0(4,2,t,e)}function _R(t,e){return q0(4,4,t,e)}function SR(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function jR(t,e,n){return n=n!=null?n.concat([t]):null,q0(4,4,SR.bind(null,e,t),n)}function hj(){}function AR(t,e){var n=aa();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cj(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function PR(t,e){var n=aa();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cj(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ER(t,e,n){return Lc&21?(Na(n,e)||(n=O4(),mn.lanes|=n,$c|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ui=!0),t.memoizedState=n)}function T7(t,e){var n=Rt;Rt=n!==0&&4>n?n:4,t(!0);var r=ew.transition;ew.transition={};try{t(!1),e()}finally{Rt=n,ew.transition=r}}function TR(){return aa().memoizedState}function C7(t,e,n){var r=ol(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},CR(t))NR(e,n);else if(n=uR(t,e,n,r),n!==null){var i=Gr();Ea(n,t,r,i),kR(n,e,r)}}function N7(t,e,n){var r=ol(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(CR(t))NR(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var s=e.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,Na(o,s)){var c=e.interleaved;c===null?(i.next=i,ij(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=uR(t,e,i,r),n!==null&&(i=Gr(),Ea(n,t,r,i),kR(n,e,r))}}function CR(t){var e=t.alternate;return t===mn||e!==null&&e===mn}function NR(t,e){Zh=ay=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function kR(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,WS(t,n)}}var sy={readContext:ia,useCallback:Cr,useContext:Cr,useEffect:Cr,useImperativeHandle:Cr,useInsertionEffect:Cr,useLayoutEffect:Cr,useMemo:Cr,useReducer:Cr,useRef:Cr,useState:Cr,useDebugValue:Cr,useDeferredValue:Cr,useTransition:Cr,useMutableSource:Cr,useSyncExternalStore:Cr,useId:Cr,unstable_isNewReconciler:!1},k7={readContext:ia,useCallback:function(t,e){return Qa().memoizedState=[t,e===void 0?null:e],t},useContext:ia,useEffect:bT,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Pv(4194308,4,SR.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Pv(4194308,4,t,e)},useInsertionEffect:function(t,e){return Pv(4,2,t,e)},useMemo:function(t,e){var n=Qa();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Qa();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=C7.bind(null,mn,t),[r.memoizedState,t]},useRef:function(t){var e=Qa();return t={current:t},e.memoizedState=t},useState:xT,useDebugValue:hj,useDeferredValue:function(t){return Qa().memoizedState=t},useTransition:function(){var t=xT(!1),e=t[0];return t=T7.bind(null,t[1]),Qa().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=mn,i=Qa();if(ln){if(n===void 0)throw Error(Ae(407));n=n()}else{if(n=e(),lr===null)throw Error(Ae(349));Lc&30||mR(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,bT(vR.bind(null,r,a,t),[t]),r.flags|=2048,Rp(9,gR.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Qa(),e=lr.identifierPrefix;if(ln){var n=$s,r=Ls;n=(r&~(1<<32-Pa(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Dp++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=E7++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},O7={readContext:ia,useCallback:AR,useContext:ia,useEffect:fj,useImperativeHandle:jR,useInsertionEffect:wR,useLayoutEffect:_R,useMemo:PR,useReducer:tw,useRef:bR,useState:function(){return tw(Mp)},useDebugValue:hj,useDeferredValue:function(t){var e=aa();return ER(e,Gn.memoizedState,t)},useTransition:function(){var t=tw(Mp)[0],e=aa().memoizedState;return[t,e]},useMutableSource:hR,useSyncExternalStore:pR,useId:TR,unstable_isNewReconciler:!1},I7={readContext:ia,useCallback:AR,useContext:ia,useEffect:fj,useImperativeHandle:jR,useInsertionEffect:wR,useLayoutEffect:_R,useMemo:PR,useReducer:nw,useRef:bR,useState:function(){return nw(Mp)},useDebugValue:hj,useDeferredValue:function(t){var e=aa();return Gn===null?e.memoizedState=t:ER(e,Gn.memoizedState,t)},useTransition:function(){var t=nw(Mp)[0],e=aa().memoizedState;return[t,e]},useMutableSource:hR,useSyncExternalStore:pR,useId:TR,unstable_isNewReconciler:!1};function ba(t,e){if(t&&t.defaultProps){e=gn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function H1(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:gn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var H0={isMounted:function(t){return(t=t._reactInternals)?iu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Gr(),i=ol(t),a=Ws(r,i);a.payload=e,n!=null&&(a.callback=n),e=al(t,a,i),e!==null&&(Ea(e,t,i,r),jv(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Gr(),i=ol(t),a=Ws(r,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=al(t,a,i),e!==null&&(Ea(e,t,i,r),jv(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Gr(),r=ol(t),i=Ws(n,r);i.tag=2,e!=null&&(i.callback=e),e=al(t,i,r),e!==null&&(Ea(e,t,r,n),jv(e,t,r))}};function wT(t,e,n,r,i,a,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,s):e.prototype&&e.prototype.isPureReactComponent?!Tp(n,r)||!Tp(i,a):!0}function OR(t,e,n){var r=!1,i=ml,a=e.contextType;return typeof a=="object"&&a!==null?a=ia(a):(i=mi(e)?Mc:$r.current,r=e.contextTypes,a=(r=r!=null)?kd(t,i):ml),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=H0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function _T(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&H0.enqueueReplaceState(e,e.state,null)}function G1(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},aj(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=ia(a):(a=mi(e)?Mc:$r.current,i.context=kd(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(H1(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&H0.enqueueReplaceState(i,i.state,null),ry(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Md(t,e){try{var n="",r=e;do n+=o9(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function rw(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Y1(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var D7=typeof WeakMap=="function"?WeakMap:Map;function IR(t,e,n){n=Ws(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ly||(ly=!0,a_=r),Y1(t,e)},n}function DR(t,e,n){n=Ws(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Y1(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Y1(t,e),typeof r!="function"&&(sl===null?sl=new Set([this]):sl.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function ST(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new D7;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=G7.bind(null,t,e,n),e.then(t,t))}function jT(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function AT(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ws(-1,1),e.tag=2,al(n,e,1))),n.lanes|=1),t)}var M7=co.ReactCurrentOwner,ui=!1;function Ur(t,e,n,r){e.child=t===null?cR(e,null,n,r):Id(e,t.child,n,r)}function PT(t,e,n,r,i){n=n.render;var a=e.ref;return wd(e,i),r=uj(t,e,n,r,a,i),n=dj(),t!==null&&!ui?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Js(t,e,i)):(ln&&n&&JS(e),e.flags|=1,Ur(t,e,r,i),e.child)}function ET(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!wj(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,MR(t,e,a,r,i)):(t=Nv(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var s=a.memoizedProps;if(n=n.compare,n=n!==null?n:Tp,n(s,r)&&t.ref===e.ref)return Js(t,e,i)}return e.flags|=1,t=ll(a,r),t.ref=e.ref,t.return=e,e.child=t}function MR(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(Tp(a,r)&&t.ref===e.ref)if(ui=!1,e.pendingProps=r=a,(t.lanes&i)!==0)t.flags&131072&&(ui=!0);else return e.lanes=t.lanes,Js(t,e,i)}return X1(t,e,n,r,i)}function RR(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xt(sd,Ti),Ti|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Xt(sd,Ti),Ti|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Xt(sd,Ti),Ti|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,Xt(sd,Ti),Ti|=r;return Ur(t,e,i,n),e.child}function LR(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function X1(t,e,n,r,i){var a=mi(n)?Mc:$r.current;return a=kd(e,a),wd(e,i),n=uj(t,e,n,r,a,i),r=dj(),t!==null&&!ui?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Js(t,e,i)):(ln&&r&&JS(e),e.flags|=1,Ur(t,e,n,i),e.child)}function TT(t,e,n,r,i){if(mi(n)){var a=!0;Jv(e)}else a=!1;if(wd(e,i),e.stateNode===null)Ev(t,e),OR(e,n,r),G1(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,o=e.memoizedProps;s.props=o;var c=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=ia(u):(u=mi(n)?Mc:$r.current,u=kd(e,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==r||c!==u)&&_T(e,s,r,u),Wo=!1;var h=e.memoizedState;s.state=h,ry(e,r,s,i),c=e.memoizedState,o!==r||h!==c||pi.current||Wo?(typeof d=="function"&&(H1(e,n,d,r),c=e.memoizedState),(o=Wo||wT(e,n,o,r,h,c,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),s.props=r,s.state=c,s.context=u,r=o):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,dR(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:ba(e.type,o),s.props=u,f=e.pendingProps,h=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=ia(c):(c=mi(n)?Mc:$r.current,c=kd(e,c));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==f||h!==c)&&_T(e,s,r,c),Wo=!1,h=e.memoizedState,s.state=h,ry(e,r,s,i);var y=e.memoizedState;o!==f||h!==y||pi.current||Wo?(typeof p=="function"&&(H1(e,n,p,r),y=e.memoizedState),(u=Wo||wT(e,n,u,r,h,y,c)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,y,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,y,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),s.props=r,s.state=y,s.context=c,r=u):(typeof s.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Q1(t,e,n,r,a,i)}function Q1(t,e,n,r,i,a){LR(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&hT(e,n,!1),Js(t,e,a);r=e.stateNode,M7.current=e;var o=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Id(e,t.child,null,a),e.child=Id(e,null,o,a)):Ur(t,e,o,a),e.memoizedState=r.state,i&&hT(e,n,!0),e.child}function $R(t){var e=t.stateNode;e.pendingContext?fT(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fT(t,e.context,!1),sj(t,e.containerInfo)}function CT(t,e,n,r,i){return Od(),ej(i),e.flags|=256,Ur(t,e,n,r),e.child}var J1={dehydrated:null,treeContext:null,retryLane:0};function Z1(t){return{baseLanes:t,cachePool:null,transitions:null}}function zR(t,e,n){var r=e.pendingProps,i=pn.current,a=!1,s=(e.flags&128)!==0,o;if((o=s)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Xt(pn,i&1),t===null)return K1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,a?(r=e.mode,a=e.child,s={mode:"hidden",children:s},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=X0(s,r,0,null),t=Ec(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Z1(n),e.memoizedState=J1,t):pj(e,s));if(i=t.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return R7(t,e,s,r,o,i,n);if(a){a=r.fallback,s=e.mode,i=t.child,o=i.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=ll(i,c),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=ll(o,a):(a=Ec(a,s,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,s=t.child.memoizedState,s=s===null?Z1(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=t.childLanes&~n,e.memoizedState=J1,r}return a=t.child,t=a.sibling,r=ll(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function pj(t,e){return e=X0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Bg(t,e,n,r){return r!==null&&ej(r),Id(e,t.child,null,n),t=pj(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function R7(t,e,n,r,i,a,s){if(n)return e.flags&256?(e.flags&=-257,r=rw(Error(Ae(422))),Bg(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=X0({mode:"visible",children:r.children},i,0,null),a=Ec(a,i,s,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&Id(e,t.child,null,s),e.child.memoizedState=Z1(s),e.memoizedState=J1,a);if(!(e.mode&1))return Bg(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,a=Error(Ae(419)),r=rw(a,r,void 0),Bg(t,e,s,r)}if(o=(s&t.childLanes)!==0,ui||o){if(r=lr,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Qs(t,i),Ea(r,t,i,-1))}return bj(),r=rw(Error(Ae(421))),Bg(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Y7.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,ki=il(i.nextSibling),Ii=e,ln=!0,ja=null,t!==null&&(Xi[Qi++]=Ls,Xi[Qi++]=$s,Xi[Qi++]=Rc,Ls=t.id,$s=t.overflow,Rc=e),e=pj(e,r.children),e.flags|=4096,e)}function NT(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),q1(t.return,e,n)}function iw(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function FR(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(Ur(t,e,r.children,n),r=pn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&NT(t,n,e);else if(t.tag===19)NT(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Xt(pn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&iy(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),iw(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&iy(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}iw(e,!0,n,null,a);break;case"together":iw(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ev(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Js(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),$c|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ae(153));if(e.child!==null){for(t=e.child,n=ll(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ll(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function L7(t,e,n){switch(e.tag){case 3:$R(e),Od();break;case 5:fR(e);break;case 1:mi(e.type)&&Jv(e);break;case 4:sj(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Xt(ty,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Xt(pn,pn.current&1),e.flags|=128,null):n&e.child.childLanes?zR(t,e,n):(Xt(pn,pn.current&1),t=Js(t,e,n),t!==null?t.sibling:null);Xt(pn,pn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return FR(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Xt(pn,pn.current),r)break;return null;case 22:case 23:return e.lanes=0,RR(t,e,n)}return Js(t,e,n)}var VR,e_,BR,UR;VR=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};e_=function(){};BR=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,vc(as.current);var a=null;switch(n){case"input":i=_1(t,i),r=_1(t,r),a=[];break;case"select":i=gn({},i,{value:void 0}),r=gn({},r,{value:void 0}),a=[];break;case"textarea":i=A1(t,i),r=A1(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Xv)}E1(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(s in o)o.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(wp.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(s in o)!o.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&o[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(wp.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&tn("scroll",t),a||o===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};UR=function(t,e,n,r){n!==r&&(e.flags|=4)};function bh(t,e){if(!ln)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Nr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function $7(t,e,n){var r=e.pendingProps;switch(ZS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nr(e),null;case 1:return mi(e.type)&&Qv(),Nr(e),null;case 3:return r=e.stateNode,Dd(),sn(pi),sn($r),lj(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Fg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ja!==null&&(l_(ja),ja=null))),e_(t,e),Nr(e),null;case 5:oj(e);var i=vc(Ip.current);if(n=e.type,t!==null&&e.stateNode!=null)BR(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ae(166));return Nr(e),null}if(t=vc(as.current),Fg(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[Ja]=e,r[kp]=a,t=(e.mode&1)!==0,n){case"dialog":tn("cancel",r),tn("close",r);break;case"iframe":case"object":case"embed":tn("load",r);break;case"video":case"audio":for(i=0;i<Lh.length;i++)tn(Lh[i],r);break;case"source":tn("error",r);break;case"img":case"image":case"link":tn("error",r),tn("load",r);break;case"details":tn("toggle",r);break;case"input":zE(r,a),tn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},tn("invalid",r);break;case"textarea":VE(r,a),tn("invalid",r)}E1(n,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?r.textContent!==o&&(a.suppressHydrationWarning!==!0&&zg(r.textContent,o,t),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&zg(r.textContent,o,t),i=["children",""+o]):wp.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&tn("scroll",r)}switch(n){case"input":kg(r),FE(r,a,!0);break;case"textarea":kg(r),BE(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Xv)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=v4(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Ja]=e,t[kp]=r,VR(t,e,!1,!1),e.stateNode=t;e:{switch(s=T1(n,r),n){case"dialog":tn("cancel",t),tn("close",t),i=r;break;case"iframe":case"object":case"embed":tn("load",t),i=r;break;case"video":case"audio":for(i=0;i<Lh.length;i++)tn(Lh[i],t);i=r;break;case"source":tn("error",t),i=r;break;case"img":case"image":case"link":tn("error",t),tn("load",t),i=r;break;case"details":tn("toggle",t),i=r;break;case"input":zE(t,r),i=_1(t,r),tn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=gn({},r,{value:void 0}),tn("invalid",t);break;case"textarea":VE(t,r),i=A1(t,r),tn("invalid",t);break;default:i=r}E1(n,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="style"?b4(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&y4(t,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&_p(t,c):typeof c=="number"&&_p(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(wp.hasOwnProperty(a)?c!=null&&a==="onScroll"&&tn("scroll",t):c!=null&&$S(t,a,c,s))}switch(n){case"input":kg(t),FE(t,r,!1);break;case"textarea":kg(t),BE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+pl(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?vd(t,!!r.multiple,a,!1):r.defaultValue!=null&&vd(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Xv)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nr(e),null;case 6:if(t&&e.stateNode!=null)UR(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ae(166));if(n=vc(Ip.current),vc(as.current),Fg(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ja]=e,(a=r.nodeValue!==n)&&(t=Ii,t!==null))switch(t.tag){case 3:zg(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&zg(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ja]=e,e.stateNode=r}return Nr(e),null;case 13:if(sn(pn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ln&&ki!==null&&e.mode&1&&!(e.flags&128))oR(),Od(),e.flags|=98560,a=!1;else if(a=Fg(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(Ae(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Ae(317));a[Ja]=e}else Od(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nr(e),a=!1}else ja!==null&&(l_(ja),ja=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||pn.current&1?Xn===0&&(Xn=3):bj())),e.updateQueue!==null&&(e.flags|=4),Nr(e),null);case 4:return Dd(),e_(t,e),t===null&&Cp(e.stateNode.containerInfo),Nr(e),null;case 10:return rj(e.type._context),Nr(e),null;case 17:return mi(e.type)&&Qv(),Nr(e),null;case 19:if(sn(pn),a=e.memoizedState,a===null)return Nr(e),null;if(r=(e.flags&128)!==0,s=a.rendering,s===null)if(r)bh(a,!1);else{if(Xn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=iy(t),s!==null){for(e.flags|=128,bh(a,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,t=s.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Xt(pn,pn.current&1|2),e.child}t=t.sibling}a.tail!==null&&Cn()>Rd&&(e.flags|=128,r=!0,bh(a,!1),e.lanes=4194304)}else{if(!r)if(t=iy(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),bh(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!ln)return Nr(e),null}else 2*Cn()-a.renderingStartTime>Rd&&n!==1073741824&&(e.flags|=128,r=!0,bh(a,!1),e.lanes=4194304);a.isBackwards?(s.sibling=e.child,e.child=s):(n=a.last,n!==null?n.sibling=s:e.child=s,a.last=s)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Cn(),e.sibling=null,n=pn.current,Xt(pn,r?n&1|2:n&1),e):(Nr(e),null);case 22:case 23:return xj(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ti&1073741824&&(Nr(e),e.subtreeFlags&6&&(e.flags|=8192)):Nr(e),null;case 24:return null;case 25:return null}throw Error(Ae(156,e.tag))}function z7(t,e){switch(ZS(e),e.tag){case 1:return mi(e.type)&&Qv(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Dd(),sn(pi),sn($r),lj(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return oj(e),null;case 13:if(sn(pn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ae(340));Od()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return sn(pn),null;case 4:return Dd(),null;case 10:return rj(e.type._context),null;case 22:case 23:return xj(),null;case 24:return null;default:return null}}var Ug=!1,Dr=!1,F7=typeof WeakSet=="function"?WeakSet:Set,Fe=null;function ad(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){wn(t,e,r)}else n.current=null}function t_(t,e,n){try{n()}catch(r){wn(t,e,r)}}var kT=!1;function V7(t,e){if($1=Hv,t=G4(),QS(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var s=0,o=-1,c=-1,u=0,d=0,f=t,h=null;t:for(;;){for(var p;f!==n||i!==0&&f.nodeType!==3||(o=s+i),f!==a||r!==0&&f.nodeType!==3||(c=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===t)break t;if(h===n&&++u===i&&(o=s),h===a&&++d===r&&(c=s),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(z1={focusedElem:t,selectionRange:n},Hv=!1,Fe=e;Fe!==null;)if(e=Fe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Fe=t;else for(;Fe!==null;){e=Fe;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,b=y.memoizedState,x=e.stateNode,_=x.getSnapshotBeforeUpdate(e.elementType===e.type?v:ba(e.type,v),b);x.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ae(163))}}catch(T){wn(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,Fe=t;break}Fe=e.return}return y=kT,kT=!1,y}function ep(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&t_(e,n,a)}i=i.next}while(i!==r)}}function G0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function n_(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function WR(t){var e=t.alternate;e!==null&&(t.alternate=null,WR(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ja],delete e[kp],delete e[B1],delete e[S7],delete e[j7])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function KR(t){return t.tag===5||t.tag===3||t.tag===4}function OT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||KR(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function r_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xv));else if(r!==4&&(t=t.child,t!==null))for(r_(t,e,n),t=t.sibling;t!==null;)r_(t,e,n),t=t.sibling}function i_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(i_(t,e,n),t=t.sibling;t!==null;)i_(t,e,n),t=t.sibling}var vr=null,wa=!1;function Do(t,e,n){for(n=n.child;n!==null;)qR(t,e,n),n=n.sibling}function qR(t,e,n){if(is&&typeof is.onCommitFiberUnmount=="function")try{is.onCommitFiberUnmount(F0,n)}catch{}switch(n.tag){case 5:Dr||ad(n,e);case 6:var r=vr,i=wa;vr=null,Do(t,e,n),vr=r,wa=i,vr!==null&&(wa?(t=vr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):vr.removeChild(n.stateNode));break;case 18:vr!==null&&(wa?(t=vr,n=n.stateNode,t.nodeType===8?Qb(t.parentNode,n):t.nodeType===1&&Qb(t,n),Pp(t)):Qb(vr,n.stateNode));break;case 4:r=vr,i=wa,vr=n.stateNode.containerInfo,wa=!0,Do(t,e,n),vr=r,wa=i;break;case 0:case 11:case 14:case 15:if(!Dr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&t_(n,e,s),i=i.next}while(i!==r)}Do(t,e,n);break;case 1:if(!Dr&&(ad(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){wn(n,e,o)}Do(t,e,n);break;case 21:Do(t,e,n);break;case 22:n.mode&1?(Dr=(r=Dr)||n.memoizedState!==null,Do(t,e,n),Dr=r):Do(t,e,n);break;default:Do(t,e,n)}}function IT(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new F7),e.forEach(function(r){var i=X7.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function va(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,s=e,o=s;e:for(;o!==null;){switch(o.tag){case 5:vr=o.stateNode,wa=!1;break e;case 3:vr=o.stateNode.containerInfo,wa=!0;break e;case 4:vr=o.stateNode.containerInfo,wa=!0;break e}o=o.return}if(vr===null)throw Error(Ae(160));qR(a,s,i),vr=null,wa=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){wn(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)HR(e,t),e=e.sibling}function HR(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(va(e,t),Xa(t),r&4){try{ep(3,t,t.return),G0(3,t)}catch(v){wn(t,t.return,v)}try{ep(5,t,t.return)}catch(v){wn(t,t.return,v)}}break;case 1:va(e,t),Xa(t),r&512&&n!==null&&ad(n,n.return);break;case 5:if(va(e,t),Xa(t),r&512&&n!==null&&ad(n,n.return),t.flags&32){var i=t.stateNode;try{_p(i,"")}catch(v){wn(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,s=n!==null?n.memoizedProps:a,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&m4(i,a),T1(o,s);var u=T1(o,a);for(s=0;s<c.length;s+=2){var d=c[s],f=c[s+1];d==="style"?b4(i,f):d==="dangerouslySetInnerHTML"?y4(i,f):d==="children"?_p(i,f):$S(i,d,f,u)}switch(o){case"input":S1(i,a);break;case"textarea":g4(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?vd(i,!!a.multiple,p,!1):h!==!!a.multiple&&(a.defaultValue!=null?vd(i,!!a.multiple,a.defaultValue,!0):vd(i,!!a.multiple,a.multiple?[]:"",!1))}i[kp]=a}catch(v){wn(t,t.return,v)}}break;case 6:if(va(e,t),Xa(t),r&4){if(t.stateNode===null)throw Error(Ae(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(v){wn(t,t.return,v)}}break;case 3:if(va(e,t),Xa(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Pp(e.containerInfo)}catch(v){wn(t,t.return,v)}break;case 4:va(e,t),Xa(t);break;case 13:va(e,t),Xa(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(vj=Cn())),r&4&&IT(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Dr=(u=Dr)||d,va(e,t),Dr=u):va(e,t),Xa(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Fe=t,d=t.child;d!==null;){for(f=Fe=d;Fe!==null;){switch(h=Fe,p=h.child,h.tag){case 0:case 11:case 14:case 15:ep(4,h,h.return);break;case 1:ad(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){wn(r,n,v)}}break;case 5:ad(h,h.return);break;case 22:if(h.memoizedState!==null){MT(f);continue}}p!==null?(p.return=h,Fe=p):MT(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=f.stateNode,c=f.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=x4("display",s))}catch(v){wn(t,t.return,v)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){wn(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:va(e,t),Xa(t),r&4&&IT(t);break;case 21:break;default:va(e,t),Xa(t)}}function Xa(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(KR(n)){var r=n;break e}n=n.return}throw Error(Ae(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(_p(i,""),r.flags&=-33);var a=OT(t);i_(t,a,i);break;case 3:case 4:var s=r.stateNode.containerInfo,o=OT(t);r_(t,o,s);break;default:throw Error(Ae(161))}}catch(c){wn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function B7(t,e,n){Fe=t,GR(t)}function GR(t,e,n){for(var r=(t.mode&1)!==0;Fe!==null;){var i=Fe,a=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Ug;if(!s){var o=i.alternate,c=o!==null&&o.memoizedState!==null||Dr;o=Ug;var u=Dr;if(Ug=s,(Dr=c)&&!u)for(Fe=i;Fe!==null;)s=Fe,c=s.child,s.tag===22&&s.memoizedState!==null?RT(i):c!==null?(c.return=s,Fe=c):RT(i);for(;a!==null;)Fe=a,GR(a),a=a.sibling;Fe=i,Ug=o,Dr=u}DT(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Fe=a):DT(t)}}function DT(t){for(;Fe!==null;){var e=Fe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Dr||G0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Dr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ba(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&yT(e,a,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}yT(e,s,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Pp(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ae(163))}Dr||e.flags&512&&n_(e)}catch(h){wn(e,e.return,h)}}if(e===t){Fe=null;break}if(n=e.sibling,n!==null){n.return=e.return,Fe=n;break}Fe=e.return}}function MT(t){for(;Fe!==null;){var e=Fe;if(e===t){Fe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Fe=n;break}Fe=e.return}}function RT(t){for(;Fe!==null;){var e=Fe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{G0(4,e)}catch(c){wn(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){wn(e,i,c)}}var a=e.return;try{n_(e)}catch(c){wn(e,a,c)}break;case 5:var s=e.return;try{n_(e)}catch(c){wn(e,s,c)}}}catch(c){wn(e,e.return,c)}if(e===t){Fe=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Fe=o;break}Fe=e.return}}var U7=Math.ceil,oy=co.ReactCurrentDispatcher,mj=co.ReactCurrentOwner,ta=co.ReactCurrentBatchConfig,Pt=0,lr=null,Ln=null,_r=0,Ti=0,sd=_l(0),Xn=0,Lp=null,$c=0,Y0=0,gj=0,tp=null,li=null,vj=0,Rd=1/0,Ds=null,ly=!1,a_=null,sl=null,Wg=!1,Xo=null,cy=0,np=0,s_=null,Tv=-1,Cv=0;function Gr(){return Pt&6?Cn():Tv!==-1?Tv:Tv=Cn()}function ol(t){return t.mode&1?Pt&2&&_r!==0?_r&-_r:P7.transition!==null?(Cv===0&&(Cv=O4()),Cv):(t=Rt,t!==0||(t=window.event,t=t===void 0?16:z4(t.type)),t):1}function Ea(t,e,n,r){if(50<np)throw np=0,s_=null,Error(Ae(185));zm(t,n,r),(!(Pt&2)||t!==lr)&&(t===lr&&(!(Pt&2)&&(Y0|=n),Xn===4&&Ho(t,_r)),gi(t,r),n===1&&Pt===0&&!(e.mode&1)&&(Rd=Cn()+500,K0&&Sl()))}function gi(t,e){var n=t.callbackNode;P9(t,e);var r=qv(t,t===lr?_r:0);if(r===0)n!==null&&KE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&KE(n),e===1)t.tag===0?A7(LT.bind(null,t)):iR(LT.bind(null,t)),w7(function(){!(Pt&6)&&Sl()}),n=null;else{switch(I4(r)){case 1:n=US;break;case 4:n=N4;break;case 16:n=Kv;break;case 536870912:n=k4;break;default:n=Kv}n=n5(n,YR.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function YR(t,e){if(Tv=-1,Cv=0,Pt&6)throw Error(Ae(327));var n=t.callbackNode;if(_d()&&t.callbackNode!==n)return null;var r=qv(t,t===lr?_r:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=uy(t,r);else{e=r;var i=Pt;Pt|=2;var a=QR();(lr!==t||_r!==e)&&(Ds=null,Rd=Cn()+500,Pc(t,e));do try{q7();break}catch(o){XR(t,o)}while(!0);nj(),oy.current=a,Pt=i,Ln!==null?e=0:(lr=null,_r=0,e=Xn)}if(e!==0){if(e===2&&(i=I1(t),i!==0&&(r=i,e=o_(t,i))),e===1)throw n=Lp,Pc(t,0),Ho(t,r),gi(t,Cn()),n;if(e===6)Ho(t,r);else{if(i=t.current.alternate,!(r&30)&&!W7(i)&&(e=uy(t,r),e===2&&(a=I1(t),a!==0&&(r=a,e=o_(t,a))),e===1))throw n=Lp,Pc(t,0),Ho(t,r),gi(t,Cn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Ae(345));case 2:sc(t,li,Ds);break;case 3:if(Ho(t,r),(r&130023424)===r&&(e=vj+500-Cn(),10<e)){if(qv(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Gr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=V1(sc.bind(null,t,li,Ds),e);break}sc(t,li,Ds);break;case 4:if(Ho(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-Pa(r);a=1<<s,s=e[s],s>i&&(i=s),r&=~a}if(r=i,r=Cn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*U7(r/1960))-r,10<r){t.timeoutHandle=V1(sc.bind(null,t,li,Ds),r);break}sc(t,li,Ds);break;case 5:sc(t,li,Ds);break;default:throw Error(Ae(329))}}}return gi(t,Cn()),t.callbackNode===n?YR.bind(null,t):null}function o_(t,e){var n=tp;return t.current.memoizedState.isDehydrated&&(Pc(t,e).flags|=256),t=uy(t,e),t!==2&&(e=li,li=n,e!==null&&l_(e)),t}function l_(t){li===null?li=t:li.push.apply(li,t)}function W7(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Na(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ho(t,e){for(e&=~gj,e&=~Y0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Pa(e),r=1<<n;t[n]=-1,e&=~r}}function LT(t){if(Pt&6)throw Error(Ae(327));_d();var e=qv(t,0);if(!(e&1))return gi(t,Cn()),null;var n=uy(t,e);if(t.tag!==0&&n===2){var r=I1(t);r!==0&&(e=r,n=o_(t,r))}if(n===1)throw n=Lp,Pc(t,0),Ho(t,e),gi(t,Cn()),n;if(n===6)throw Error(Ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,sc(t,li,Ds),gi(t,Cn()),null}function yj(t,e){var n=Pt;Pt|=1;try{return t(e)}finally{Pt=n,Pt===0&&(Rd=Cn()+500,K0&&Sl())}}function zc(t){Xo!==null&&Xo.tag===0&&!(Pt&6)&&_d();var e=Pt;Pt|=1;var n=ta.transition,r=Rt;try{if(ta.transition=null,Rt=1,t)return t()}finally{Rt=r,ta.transition=n,Pt=e,!(Pt&6)&&Sl()}}function xj(){Ti=sd.current,sn(sd)}function Pc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,b7(n)),Ln!==null)for(n=Ln.return;n!==null;){var r=n;switch(ZS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Qv();break;case 3:Dd(),sn(pi),sn($r),lj();break;case 5:oj(r);break;case 4:Dd();break;case 13:sn(pn);break;case 19:sn(pn);break;case 10:rj(r.type._context);break;case 22:case 23:xj()}n=n.return}if(lr=t,Ln=t=ll(t.current,null),_r=Ti=e,Xn=0,Lp=null,gj=Y0=$c=0,li=tp=null,gc!==null){for(e=0;e<gc.length;e++)if(n=gc[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var s=a.next;a.next=i,r.next=s}n.pending=r}gc=null}return t}function XR(t,e){do{var n=Ln;try{if(nj(),Av.current=sy,ay){for(var r=mn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ay=!1}if(Lc=0,sr=Gn=mn=null,Zh=!1,Dp=0,mj.current=null,n===null||n.return===null){Xn=1,Lp=e,Ln=null;break}e:{var a=t,s=n.return,o=n,c=e;if(e=_r,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=jT(s);if(p!==null){p.flags&=-257,AT(p,s,o,a,e),p.mode&1&&ST(a,u,e),e=p,c=u;var y=e.updateQueue;if(y===null){var v=new Set;v.add(c),e.updateQueue=v}else y.add(c);break e}else{if(!(e&1)){ST(a,u,e),bj();break e}c=Error(Ae(426))}}else if(ln&&o.mode&1){var b=jT(s);if(b!==null){!(b.flags&65536)&&(b.flags|=256),AT(b,s,o,a,e),ej(Md(c,o));break e}}a=c=Md(c,o),Xn!==4&&(Xn=2),tp===null?tp=[a]:tp.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var x=IR(a,c,e);vT(a,x);break e;case 1:o=c;var _=a.type,S=a.stateNode;if(!(a.flags&128)&&(typeof _.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(sl===null||!sl.has(S)))){a.flags|=65536,e&=-e,a.lanes|=e;var T=DR(a,o,e);vT(a,T);break e}}a=a.return}while(a!==null)}ZR(n)}catch(E){e=E,Ln===n&&n!==null&&(Ln=n=n.return);continue}break}while(!0)}function QR(){var t=oy.current;return oy.current=sy,t===null?sy:t}function bj(){(Xn===0||Xn===3||Xn===2)&&(Xn=4),lr===null||!($c&268435455)&&!(Y0&268435455)||Ho(lr,_r)}function uy(t,e){var n=Pt;Pt|=2;var r=QR();(lr!==t||_r!==e)&&(Ds=null,Pc(t,e));do try{K7();break}catch(i){XR(t,i)}while(!0);if(nj(),Pt=n,oy.current=r,Ln!==null)throw Error(Ae(261));return lr=null,_r=0,Xn}function K7(){for(;Ln!==null;)JR(Ln)}function q7(){for(;Ln!==null&&!v9();)JR(Ln)}function JR(t){var e=t5(t.alternate,t,Ti);t.memoizedProps=t.pendingProps,e===null?ZR(t):Ln=e,mj.current=null}function ZR(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=z7(n,e),n!==null){n.flags&=32767,Ln=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Xn=6,Ln=null;return}}else if(n=$7(n,e,Ti),n!==null){Ln=n;return}if(e=e.sibling,e!==null){Ln=e;return}Ln=e=t}while(e!==null);Xn===0&&(Xn=5)}function sc(t,e,n){var r=Rt,i=ta.transition;try{ta.transition=null,Rt=1,H7(t,e,n,r)}finally{ta.transition=i,Rt=r}return null}function H7(t,e,n,r){do _d();while(Xo!==null);if(Pt&6)throw Error(Ae(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ae(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(E9(t,a),t===lr&&(Ln=lr=null,_r=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Wg||(Wg=!0,n5(Kv,function(){return _d(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=ta.transition,ta.transition=null;var s=Rt;Rt=1;var o=Pt;Pt|=4,mj.current=null,V7(t,n),HR(n,t),h7(z1),Hv=!!$1,z1=$1=null,t.current=n,B7(n),y9(),Pt=o,Rt=s,ta.transition=a}else t.current=n;if(Wg&&(Wg=!1,Xo=t,cy=i),a=t.pendingLanes,a===0&&(sl=null),w9(n.stateNode),gi(t,Cn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ly)throw ly=!1,t=a_,a_=null,t;return cy&1&&t.tag!==0&&_d(),a=t.pendingLanes,a&1?t===s_?np++:(np=0,s_=t):np=0,Sl(),null}function _d(){if(Xo!==null){var t=I4(cy),e=ta.transition,n=Rt;try{if(ta.transition=null,Rt=16>t?16:t,Xo===null)var r=!1;else{if(t=Xo,Xo=null,cy=0,Pt&6)throw Error(Ae(331));var i=Pt;for(Pt|=4,Fe=t.current;Fe!==null;){var a=Fe,s=a.child;if(Fe.flags&16){var o=a.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(Fe=u;Fe!==null;){var d=Fe;switch(d.tag){case 0:case 11:case 15:ep(8,d,a)}var f=d.child;if(f!==null)f.return=d,Fe=f;else for(;Fe!==null;){d=Fe;var h=d.sibling,p=d.return;if(WR(d),d===u){Fe=null;break}if(h!==null){h.return=p,Fe=h;break}Fe=p}}}var y=a.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}Fe=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,Fe=s;else e:for(;Fe!==null;){if(a=Fe,a.flags&2048)switch(a.tag){case 0:case 11:case 15:ep(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,Fe=x;break e}Fe=a.return}}var _=t.current;for(Fe=_;Fe!==null;){s=Fe;var S=s.child;if(s.subtreeFlags&2064&&S!==null)S.return=s,Fe=S;else e:for(s=_;Fe!==null;){if(o=Fe,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:G0(9,o)}}catch(E){wn(o,o.return,E)}if(o===s){Fe=null;break e}var T=o.sibling;if(T!==null){T.return=o.return,Fe=T;break e}Fe=o.return}}if(Pt=i,Sl(),is&&typeof is.onPostCommitFiberRoot=="function")try{is.onPostCommitFiberRoot(F0,t)}catch{}r=!0}return r}finally{Rt=n,ta.transition=e}}return!1}function $T(t,e,n){e=Md(n,e),e=IR(t,e,1),t=al(t,e,1),e=Gr(),t!==null&&(zm(t,1,e),gi(t,e))}function wn(t,e,n){if(t.tag===3)$T(t,t,n);else for(;e!==null;){if(e.tag===3){$T(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(sl===null||!sl.has(r))){t=Md(n,t),t=DR(e,t,1),e=al(e,t,1),t=Gr(),e!==null&&(zm(e,1,t),gi(e,t));break}}e=e.return}}function G7(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Gr(),t.pingedLanes|=t.suspendedLanes&n,lr===t&&(_r&n)===n&&(Xn===4||Xn===3&&(_r&130023424)===_r&&500>Cn()-vj?Pc(t,0):gj|=n),gi(t,e)}function e5(t,e){e===0&&(t.mode&1?(e=Dg,Dg<<=1,!(Dg&130023424)&&(Dg=4194304)):e=1);var n=Gr();t=Qs(t,e),t!==null&&(zm(t,e,n),gi(t,n))}function Y7(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),e5(t,n)}function X7(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ae(314))}r!==null&&r.delete(e),e5(t,n)}var t5;t5=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||pi.current)ui=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ui=!1,L7(t,e,n);ui=!!(t.flags&131072)}else ui=!1,ln&&e.flags&1048576&&aR(e,ey,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ev(t,e),t=e.pendingProps;var i=kd(e,$r.current);wd(e,n),i=uj(null,e,r,t,i,n);var a=dj();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mi(r)?(a=!0,Jv(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,aj(e),i.updater=H0,e.stateNode=i,i._reactInternals=e,G1(e,r,t,n),e=Q1(null,e,r,!0,a,n)):(e.tag=0,ln&&a&&JS(e),Ur(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ev(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=J7(r),t=ba(r,t),i){case 0:e=X1(null,e,r,t,n);break e;case 1:e=TT(null,e,r,t,n);break e;case 11:e=PT(null,e,r,t,n);break e;case 14:e=ET(null,e,r,ba(r.type,t),n);break e}throw Error(Ae(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ba(r,i),X1(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ba(r,i),TT(t,e,r,i,n);case 3:e:{if($R(e),t===null)throw Error(Ae(387));r=e.pendingProps,a=e.memoizedState,i=a.element,dR(t,e),ry(e,r,null,n);var s=e.memoizedState;if(r=s.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Md(Error(Ae(423)),e),e=CT(t,e,r,n,i);break e}else if(r!==i){i=Md(Error(Ae(424)),e),e=CT(t,e,r,n,i);break e}else for(ki=il(e.stateNode.containerInfo.firstChild),Ii=e,ln=!0,ja=null,n=cR(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Od(),r===i){e=Js(t,e,n);break e}Ur(t,e,r,n)}e=e.child}return e;case 5:return fR(e),t===null&&K1(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,s=i.children,F1(r,i)?s=null:a!==null&&F1(r,a)&&(e.flags|=32),LR(t,e),Ur(t,e,s,n),e.child;case 6:return t===null&&K1(e),null;case 13:return zR(t,e,n);case 4:return sj(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Id(e,null,r,n):Ur(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ba(r,i),PT(t,e,r,i,n);case 7:return Ur(t,e,e.pendingProps,n),e.child;case 8:return Ur(t,e,e.pendingProps.children,n),e.child;case 12:return Ur(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,s=i.value,Xt(ty,r._currentValue),r._currentValue=s,a!==null)if(Na(a.value,s)){if(a.children===i.children&&!pi.current){e=Js(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=Ws(-1,n&-n),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),q1(a.return,n,e),o.lanes|=n;break}c=c.next}}else if(a.tag===10)s=a.type===e.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(Ae(341));s.lanes|=n,o=s.alternate,o!==null&&(o.lanes|=n),q1(s,n,e),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===e){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}Ur(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,wd(e,n),i=ia(i),r=r(i),e.flags|=1,Ur(t,e,r,n),e.child;case 14:return r=e.type,i=ba(r,e.pendingProps),i=ba(r.type,i),ET(t,e,r,i,n);case 15:return MR(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ba(r,i),Ev(t,e),e.tag=1,mi(r)?(t=!0,Jv(e)):t=!1,wd(e,n),OR(e,r,i),G1(e,r,i,n),Q1(null,e,r,!0,t,n);case 19:return FR(t,e,n);case 22:return RR(t,e,n)}throw Error(Ae(156,e.tag))};function n5(t,e){return C4(t,e)}function Q7(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zi(t,e,n,r){return new Q7(t,e,n,r)}function wj(t){return t=t.prototype,!(!t||!t.isReactComponent)}function J7(t){if(typeof t=="function")return wj(t)?1:0;if(t!=null){if(t=t.$$typeof,t===FS)return 11;if(t===VS)return 14}return 2}function ll(t,e){var n=t.alternate;return n===null?(n=Zi(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Nv(t,e,n,r,i,a){var s=2;if(r=t,typeof t=="function")wj(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Xu:return Ec(n.children,i,a,e);case zS:s=8,i|=8;break;case y1:return t=Zi(12,n,e,i|2),t.elementType=y1,t.lanes=a,t;case x1:return t=Zi(13,n,e,i),t.elementType=x1,t.lanes=a,t;case b1:return t=Zi(19,n,e,i),t.elementType=b1,t.lanes=a,t;case f4:return X0(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case u4:s=10;break e;case d4:s=9;break e;case FS:s=11;break e;case VS:s=14;break e;case Uo:s=16,r=null;break e}throw Error(Ae(130,t==null?t:typeof t,""))}return e=Zi(s,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function Ec(t,e,n,r){return t=Zi(7,t,r,e),t.lanes=n,t}function X0(t,e,n,r){return t=Zi(22,t,r,e),t.elementType=f4,t.lanes=n,t.stateNode={isHidden:!1},t}function aw(t,e,n){return t=Zi(6,t,null,e),t.lanes=n,t}function sw(t,e,n){return e=Zi(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Z7(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fb(0),this.expirationTimes=Fb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fb(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function _j(t,e,n,r,i,a,s,o,c){return t=new Z7(t,e,n,o,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Zi(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},aj(a),t}function eB(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yu,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function r5(t){if(!t)return ml;t=t._reactInternals;e:{if(iu(t)!==t||t.tag!==1)throw Error(Ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ae(171))}if(t.tag===1){var n=t.type;if(mi(n))return rR(t,n,e)}return e}function i5(t,e,n,r,i,a,s,o,c){return t=_j(n,r,!0,t,i,a,s,o,c),t.context=r5(null),n=t.current,r=Gr(),i=ol(n),a=Ws(r,i),a.callback=e??null,al(n,a,i),t.current.lanes=i,zm(t,i,r),gi(t,r),t}function Q0(t,e,n,r){var i=e.current,a=Gr(),s=ol(i);return n=r5(n),e.context===null?e.context=n:e.pendingContext=n,e=Ws(a,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=al(i,e,s),t!==null&&(Ea(t,i,s,a),jv(t,i,s)),s}function dy(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function zT(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Sj(t,e){zT(t,e),(t=t.alternate)&&zT(t,e)}function tB(){return null}var a5=typeof reportError=="function"?reportError:function(t){console.error(t)};function jj(t){this._internalRoot=t}J0.prototype.render=jj.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ae(409));Q0(t,e,null,null)};J0.prototype.unmount=jj.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zc(function(){Q0(null,t,null,null)}),e[Xs]=null}};function J0(t){this._internalRoot=t}J0.prototype.unstable_scheduleHydration=function(t){if(t){var e=R4();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qo.length&&e!==0&&e<qo[n].priority;n++);qo.splice(n,0,t),n===0&&$4(t)}};function Aj(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Z0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function FT(){}function nB(t,e,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var u=dy(s);a.call(u)}}var s=i5(e,r,t,0,null,!1,!1,"",FT);return t._reactRootContainer=s,t[Xs]=s.current,Cp(t.nodeType===8?t.parentNode:t),zc(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=dy(c);o.call(u)}}var c=_j(t,0,!1,null,null,!1,!1,"",FT);return t._reactRootContainer=c,t[Xs]=c.current,Cp(t.nodeType===8?t.parentNode:t),zc(function(){Q0(e,c,n,r)}),c}function ex(t,e,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var c=dy(s);o.call(c)}}Q0(e,s,t,i)}else s=nB(n,e,t,i,r);return dy(s)}D4=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Rh(e.pendingLanes);n!==0&&(WS(e,n|1),gi(e,Cn()),!(Pt&6)&&(Rd=Cn()+500,Sl()))}break;case 13:zc(function(){var r=Qs(t,1);if(r!==null){var i=Gr();Ea(r,t,1,i)}}),Sj(t,1)}};KS=function(t){if(t.tag===13){var e=Qs(t,134217728);if(e!==null){var n=Gr();Ea(e,t,134217728,n)}Sj(t,134217728)}};M4=function(t){if(t.tag===13){var e=ol(t),n=Qs(t,e);if(n!==null){var r=Gr();Ea(n,t,e,r)}Sj(t,e)}};R4=function(){return Rt};L4=function(t,e){var n=Rt;try{return Rt=t,e()}finally{Rt=n}};N1=function(t,e,n){switch(e){case"input":if(S1(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=W0(r);if(!i)throw Error(Ae(90));p4(r),S1(r,i)}}}break;case"textarea":g4(t,n);break;case"select":e=n.value,e!=null&&vd(t,!!n.multiple,e,!1)}};S4=yj;j4=zc;var rB={usingClientEntryPoint:!1,Events:[Vm,ed,W0,w4,_4,yj]},wh={findFiberByHostInstance:mc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iB={bundleType:wh.bundleType,version:wh.version,rendererPackageName:wh.rendererPackageName,rendererConfig:wh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:co.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=E4(t),t===null?null:t.stateNode},findFiberByHostInstance:wh.findFiberByHostInstance||tB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kg.isDisabled&&Kg.supportsFiber)try{F0=Kg.inject(iB),is=Kg}catch{}}Fi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rB;Fi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Aj(e))throw Error(Ae(200));return eB(t,e,null,n)};Fi.createRoot=function(t,e){if(!Aj(t))throw Error(Ae(299));var n=!1,r="",i=a5;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=_j(t,1,!1,null,null,n,!1,r,i),t[Xs]=e.current,Cp(t.nodeType===8?t.parentNode:t),new jj(e)};Fi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ae(188)):(t=Object.keys(t).join(","),Error(Ae(268,t)));return t=E4(e),t=t===null?null:t.stateNode,t};Fi.flushSync=function(t){return zc(t)};Fi.hydrate=function(t,e,n){if(!Z0(e))throw Error(Ae(200));return ex(null,t,e,!0,n)};Fi.hydrateRoot=function(t,e,n){if(!Aj(t))throw Error(Ae(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",s=a5;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=i5(e,null,t,1,n??null,i,!1,a,s),t[Xs]=e.current,Cp(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new J0(e)};Fi.render=function(t,e,n){if(!Z0(e))throw Error(Ae(200));return ex(null,t,e,!1,n)};Fi.unmountComponentAtNode=function(t){if(!Z0(t))throw Error(Ae(40));return t._reactRootContainer?(zc(function(){ex(null,null,t,!1,function(){t._reactRootContainer=null,t[Xs]=null})}),!0):!1};Fi.unstable_batchedUpdates=yj;Fi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Z0(n))throw Error(Ae(200));if(t==null||t._reactInternals===void 0)throw Error(Ae(38));return ex(t,e,n,!1,r)};Fi.version="18.3.1-next-f1338f8080-20240426";function s5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s5)}catch(t){console.error(t)}}s5(),s4.exports=Fi;var o5=s4.exports,VT=o5;g1.createRoot=VT.createRoot,g1.hydrateRoot=VT.hydrateRoot;var BT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l5=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},aB=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],s=t[n++],o=t[n++],c=((i&7)<<18|(a&63)<<12|(s&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},c5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],s=i+1<t.length,o=s?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,d=a>>2,f=(a&3)<<4|o>>4;let h=(o&15)<<2|u>>6,p=u&63;c||(p=64,s||(h=64)),r.push(n[d],n[f],n[h],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(l5(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):aB(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],o=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||o==null||u==null||f==null)throw new sB;const h=a<<2|o>>4;if(r.push(h),u!==64){const p=o<<4&240|u>>2;if(r.push(p),f!==64){const y=u<<6&192|f;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class sB extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oB=function(t){const e=l5(t);return c5.encodeByteArray(e,!0)},u5=function(t){return oB(t).replace(/\./g,"")},d5=function(t){try{return c5.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lB(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cB=()=>lB().__FIREBASE_DEFAULTS__,uB=()=>{if(typeof process>"u"||typeof BT>"u")return;const t=BT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},dB=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&d5(t[1]);return e&&JSON.parse(e)},Pj=()=>{try{return cB()||uB()||dB()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},fB=()=>{var t;return(t=Pj())===null||t===void 0?void 0:t.config},hB=t=>{var e;return(e=Pj())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mB(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yi())}function gB(){var t;const e=(t=Pj())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vB(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yB(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function xB(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bB(){const t=yi();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function wB(){return!gB()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _B(){try{return typeof indexedDB=="object"}catch{return!1}}function SB(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jB="FirebaseError";class uo extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=jB,Object.setPrototypeOf(this,uo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Um.prototype.create)}}class Um{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?AB(a,r):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new uo(i,o,r)}}function AB(t,e){return t.replace(PB,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const PB=/\{\$([^}]+)}/g;function $p(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],s=e[i];if(UT(a)&&UT(s)){if(!$p(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function UT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f5(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $h(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function zh(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function EB(t,e){const n=new TB(t,e);return n.subscribe.bind(n)}class TB{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");CB(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ow),i.error===void 0&&(i.error=ow),i.complete===void 0&&(i.complete=ow);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CB(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ow(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(t){return t&&t._delegate?t._delegate:t}class Fc{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new pB;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(OB(e))try{this.getOrInitializeService({instanceIdentifier:oc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=oc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oc){return this.instances.has(e)}getOptions(e=oc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);r===o&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const s=this.instances.get(i);return s&&e(s,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:kB(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=oc){return this.component?this.component.multipleInstances?e:oc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kB(t){return t===oc?void 0:t}function OB(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IB{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new NB(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(wt||(wt={}));const DB={debug:wt.DEBUG,verbose:wt.VERBOSE,info:wt.INFO,warn:wt.WARN,error:wt.ERROR,silent:wt.SILENT},MB=wt.INFO,RB={[wt.DEBUG]:"log",[wt.VERBOSE]:"log",[wt.INFO]:"info",[wt.WARN]:"warn",[wt.ERROR]:"error"},LB=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=RB[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ej{constructor(e){this.name=e,this._logLevel=MB,this._logHandler=LB,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in wt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?DB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,wt.DEBUG,...e),this._logHandler(this,wt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,wt.VERBOSE,...e),this._logHandler(this,wt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,wt.INFO,...e),this._logHandler(this,wt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,wt.WARN,...e),this._logHandler(this,wt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,wt.ERROR,...e),this._logHandler(this,wt.ERROR,...e)}}const $B=(t,e)=>e.some(n=>t instanceof n);let WT,KT;function zB(){return WT||(WT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FB(){return KT||(KT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const h5=new WeakMap,c_=new WeakMap,p5=new WeakMap,lw=new WeakMap,Tj=new WeakMap;function VB(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{n(cl(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&h5.set(n,t)}).catch(()=>{}),Tj.set(e,t),e}function BB(t){if(c_.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});c_.set(t,e)}let u_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return c_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||p5.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cl(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function UB(t){u_=t(u_)}function WB(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(cw(this),e,...n);return p5.set(r,e.sort?e.sort():[e]),cl(r)}:FB().includes(t)?function(...e){return t.apply(cw(this),e),cl(h5.get(this))}:function(...e){return cl(t.apply(cw(this),e))}}function KB(t){return typeof t=="function"?WB(t):(t instanceof IDBTransaction&&BB(t),$B(t,zB())?new Proxy(t,u_):t)}function cl(t){if(t instanceof IDBRequest)return VB(t);if(lw.has(t))return lw.get(t);const e=KB(t);return e!==t&&(lw.set(t,e),Tj.set(e,t)),e}const cw=t=>Tj.get(t);function qB(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(t,e),o=cl(s);return r&&s.addEventListener("upgradeneeded",c=>{r(cl(s.result),c.oldVersion,c.newVersion,cl(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),o.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const HB=["get","getKey","getAll","getAllKeys","count"],GB=["put","add","delete","clear"],uw=new Map;function qT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(uw.get(e))return uw.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=GB.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||HB.includes(n)))return;const a=async function(s,...o){const c=this.transaction(s,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),i&&c.done]))[0]};return uw.set(e,a),a}UB(t=>({...t,get:(e,n,r)=>qT(e,n)||t.get(e,n,r),has:(e,n)=>!!qT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YB{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(XB(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function XB(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const d_="@firebase/app",HT="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs=new Ej("@firebase/app"),QB="@firebase/app-compat",JB="@firebase/analytics-compat",ZB="@firebase/analytics",eU="@firebase/app-check-compat",tU="@firebase/app-check",nU="@firebase/auth",rU="@firebase/auth-compat",iU="@firebase/database",aU="@firebase/data-connect",sU="@firebase/database-compat",oU="@firebase/functions",lU="@firebase/functions-compat",cU="@firebase/installations",uU="@firebase/installations-compat",dU="@firebase/messaging",fU="@firebase/messaging-compat",hU="@firebase/performance",pU="@firebase/performance-compat",mU="@firebase/remote-config",gU="@firebase/remote-config-compat",vU="@firebase/storage",yU="@firebase/storage-compat",xU="@firebase/firestore",bU="@firebase/vertexai-preview",wU="@firebase/firestore-compat",_U="firebase",SU="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jU="[DEFAULT]",AU={[d_]:"fire-core",[QB]:"fire-core-compat",[ZB]:"fire-analytics",[JB]:"fire-analytics-compat",[tU]:"fire-app-check",[eU]:"fire-app-check-compat",[nU]:"fire-auth",[rU]:"fire-auth-compat",[iU]:"fire-rtdb",[aU]:"fire-data-connect",[sU]:"fire-rtdb-compat",[oU]:"fire-fn",[lU]:"fire-fn-compat",[cU]:"fire-iid",[uU]:"fire-iid-compat",[dU]:"fire-fcm",[fU]:"fire-fcm-compat",[hU]:"fire-perf",[pU]:"fire-perf-compat",[mU]:"fire-rc",[gU]:"fire-rc-compat",[vU]:"fire-gcs",[yU]:"fire-gcs-compat",[xU]:"fire-fst",[wU]:"fire-fst-compat",[bU]:"fire-vertex","fire-js":"fire-js",[_U]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_=new Map,PU=new Map,h_=new Map;function GT(t,e){try{t.container.addComponent(e)}catch(n){Zs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ld(t){const e=t.name;if(h_.has(e))return Zs.debug(`There were multiple attempts to register component ${e}.`),!1;h_.set(e,t);for(const n of f_.values())GT(n,t);for(const n of PU.values())GT(n,t);return!0}function m5(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Qo(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Tc=new Um("app","Firebase",EU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TU{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Tc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=SU;function CU(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:jU,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Tc.create("bad-app-name",{appName:String(i)});if(n||(n=fB()),!n)throw Tc.create("no-options");const a=f_.get(i);if(a){if($p(n,a.options)&&$p(r,a.config))return a;throw Tc.create("duplicate-app",{appName:i})}const s=new IB(i);for(const c of h_.values())s.addComponent(c);const o=new TU(n,r,s);return f_.set(i,o),o}function ul(t,e,n){var r;let i=(r=AU[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){const o=[`Unable to register library "${i}" with version "${e}":`];a&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zs.warn(o.join(" "));return}Ld(new Fc(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NU="firebase-heartbeat-database",kU=1,zp="firebase-heartbeat-store";let dw=null;function g5(){return dw||(dw=qB(NU,kU,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(zp)}catch(n){console.warn(n)}}}}).catch(t=>{throw Tc.create("idb-open",{originalErrorMessage:t.message})})),dw}async function OU(t){try{const n=(await g5()).transaction(zp),r=await n.objectStore(zp).get(v5(t));return await n.done,r}catch(e){if(e instanceof uo)Zs.warn(e.message);else{const n=Tc.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Zs.warn(n.message)}}}async function YT(t,e){try{const r=(await g5()).transaction(zp,"readwrite");await r.objectStore(zp).put(e,v5(t)),await r.done}catch(n){if(n instanceof uo)Zs.warn(n.message);else{const r=Tc.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Zs.warn(r.message)}}}function v5(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IU=1024,DU=30*24*60*60*1e3;class MU{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new LU(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=XT();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=DU}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Zs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=XT(),{heartbeatsToSend:r,unsentEntries:i}=RU(this._heartbeatsCache.heartbeats),a=u5(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Zs.warn(n),""}}}function XT(){return new Date().toISOString().substring(0,10)}function RU(t,e=IU){const n=[];let r=t.slice();for(const i of t){const a=n.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),QT(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),QT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class LU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _B()?SB().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await OU(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return YT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return YT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function QT(t){return u5(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $U(t){Ld(new Fc("platform-logger",e=>new YB(e),"PRIVATE")),Ld(new Fc("heartbeat",e=>new MU(e),"PRIVATE")),ul(d_,HT,t),ul(d_,HT,"esm2017"),ul("fire-js","")}$U("");function y5(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function x5(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zU=x5,b5=new Um("auth","Firebase",x5());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy=new Ej("@firebase/auth");function FU(t,...e){fy.logLevel<=wt.WARN&&fy.warn(`Auth (${tx}): ${t}`,...e)}function kv(t,...e){fy.logLevel<=wt.ERROR&&fy.error(`Auth (${tx}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(t,...e){throw Nj(t,...e)}function Cj(t,...e){return Nj(t,...e)}function w5(t,e,n){const r=Object.assign(Object.assign({},zU()),{[e]:n});return new Um("auth","Firebase",r).create(e,{appName:t.name})}function Cc(t){return w5(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Nj(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return b5.create(t,...e)}function At(t,e,...n){if(!t)throw Nj(e,...n)}function zs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw kv(e),new Error(e)}function hy(t,e){t||zs(e)}function VU(){return JT()==="http:"||JT()==="https:"}function JT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VU()||yB()||"connection"in navigator)?navigator.onLine:!0}function UU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,n){this.shortDelay=e,this.longDelay=n,hy(n>e,"Short delay should be less than long delay!"),this.isMobile=mB()||xB()}get(){return BU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WU(t,e){hy(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qU=new Wm(3e4,6e4);function au(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function su(t,e,n,r,i={}){return S5(t,i,async()=>{let a={},s={};r&&(e==="GET"?s=r:a={body:JSON.stringify(r)});const o=f5(Object.assign({key:t.config.apiKey},s)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},a);return vB()||(u.referrerPolicy="no-referrer"),_5.fetch()(j5(t,t.config.apiHost,n,o),u)})}async function S5(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},KU),e);try{const i=new GU(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw qg(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const o=a.ok?s.errorMessage:s.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw qg(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw qg(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw qg(t,"user-disabled",s);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw w5(t,d,u);$d(t,d)}}catch(i){if(i instanceof uo)throw i;$d(t,"network-request-failed",{message:String(i)})}}async function nx(t,e,n,r,i={}){const a=await su(t,e,n,r,i);return"mfaPendingCredential"in a&&$d(t,"multi-factor-auth-required",{_serverResponse:a}),a}function j5(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?WU(t.config,i):`${t.config.apiScheme}://${i}`}function HU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class GU{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Cj(this.auth,"network-request-failed")),qU.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qg(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Cj(t,e,r);return i.customData._tokenResponse=n,i}function ZT(t){return t!==void 0&&t.enterprise!==void 0}class YU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return HU(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function XU(t,e){return su(t,"GET","/v2/recaptchaConfig",au(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QU(t,e){return su(t,"POST","/v1/accounts:delete",e)}async function A5(t,e){return su(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function JU(t,e=!1){const n=cr(t),r=await n.getIdToken(e),i=P5(r);At(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:rp(fw(i.auth_time)),issuedAtTime:rp(fw(i.iat)),expirationTime:rp(fw(i.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function fw(t){return Number(t)*1e3}function P5(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return kv("JWT malformed, contained fewer than 3 sections"),null;try{const i=d5(n);return i?JSON.parse(i):(kv("Failed to decode base64 JWT payload"),null)}catch(i){return kv("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function eC(t){const e=P5(t);return At(e,"internal-error"),At(typeof e.exp<"u","internal-error"),At(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p_(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof uo&&ZU(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function ZU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eW{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=rp(this.lastLoginAt),this.creationTime=rp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function py(t){var e;const n=t.auth,r=await t.getIdToken(),i=await p_(t,A5(n,{idToken:r}));At(i==null?void 0:i.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const s=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?E5(a.providerUserInfo):[],o=nW(t.providerData,s),c=t.isAnonymous,u=!(t.email&&a.passwordHash)&&!(o!=null&&o.length),d=c?u:!1,f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new m_(a.createdAt,a.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function tW(t){const e=cr(t);await py(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nW(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function E5(t){return t.map(e=>{var{providerId:n}=e,r=y5(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rW(t,e){const n=await S5(t,{},async()=>{const r=f5({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,s=j5(t,i,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",_5.fetch()(s,{method:"POST",headers:o,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function iW(t,e){return su(t,"POST","/v2/accounts:revokeToken",au(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){At(e.idToken,"internal-error"),At(typeof e.idToken<"u","internal-error"),At(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eC(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){At(e.length!==0,"internal-error");const n=eC(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(At(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await rW(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,s=new Sd;return r&&(At(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(At(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(At(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Sd,this.toJSON())}_performRefresh(){return zs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mo(t,e){At(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Fs{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,a=y5(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new eW(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new m_(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await p_(this,this.stsTokenManager.getToken(this.auth,e));return At(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return JU(this,e)}reload(){return tW(this)}_assign(e){this!==e&&(At(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Fs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){At(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await py(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qo(this.auth.app))return Promise.reject(Cc(this.auth));const e=await this.getIdToken();return await p_(this,QU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,a,s,o,c,u,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,p=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,y=(s=n.photoURL)!==null&&s!==void 0?s:void 0,v=(o=n.tenantId)!==null&&o!==void 0?o:void 0,b=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,x=(u=n.createdAt)!==null&&u!==void 0?u:void 0,_=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:S,emailVerified:T,isAnonymous:E,providerData:A,stsTokenManager:j}=n;At(S&&j,e,"internal-error");const P=Sd.fromJSON(this.name,j);At(typeof S=="string",e,"internal-error"),Mo(f,e.name),Mo(h,e.name),At(typeof T=="boolean",e,"internal-error"),At(typeof E=="boolean",e,"internal-error"),Mo(p,e.name),Mo(y,e.name),Mo(v,e.name),Mo(b,e.name),Mo(x,e.name),Mo(_,e.name);const O=new Fs({uid:S,auth:e,email:h,emailVerified:T,displayName:f,isAnonymous:E,photoURL:y,phoneNumber:p,tenantId:v,stsTokenManager:P,createdAt:x,lastLoginAt:_});return A&&Array.isArray(A)&&(O.providerData=A.map(D=>Object.assign({},D))),b&&(O._redirectEventId=b),O}static async _fromIdTokenResponse(e,n,r=!1){const i=new Sd;i.updateFromServerResponse(n);const a=new Fs({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await py(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];At(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?E5(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),o=new Sd;o.updateFromIdToken(r);const c=new Fs({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new m_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=new Map;function yc(t){hy(t instanceof Function,"Expected a class definition");let e=tC.get(t);return e?(hy(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,tC.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}T5.type="NONE";const nC=T5;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(t,e,n){return`firebase:${t}:${e}:${n}`}class jd{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=hw(this.userKey,i.apiKey,a),this.fullPersistenceKey=hw("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Fs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new jd(yc(nC),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=i[0]||yc(nC);const s=hw(r,e.config.apiKey,e.name);let o=null;for(const u of n)try{const d=await u._get(s);if(d){const f=Fs._fromJSON(e,d);u!==a&&(o=f),a=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new jd(a,e,r):(a=c[0],o&&await a._set(s,o.toJSON()),await Promise.all(n.map(async u=>{if(u!==a)try{await u._remove(s)}catch{}})),new jd(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(C5(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aW(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(k5(e))return"Blackberry";if(O5(e))return"Webos";if(sW(e))return"Safari";if((e.includes("chrome/")||oW(e))&&!e.includes("edge/"))return"Chrome";if(N5(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function aW(t=yi()){return/firefox\//i.test(t)}function sW(t=yi()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oW(t=yi()){return/crios\//i.test(t)}function C5(t=yi()){return/iemobile/i.test(t)}function N5(t=yi()){return/android/i.test(t)}function k5(t=yi()){return/blackberry/i.test(t)}function O5(t=yi()){return/webos/i.test(t)}function lW(t=yi()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function cW(){return bB()&&document.documentMode===10}function uW(t=yi()){return lW(t)||N5(t)||O5(t)||k5(t)||/windows phone/i.test(t)||C5(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5(t,e=[]){let n;switch(t){case"Browser":n=rC(yi());break;case"Worker":n=`${rC(yi())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${tx}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dW{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((s,o)=>{try{const c=e(a);s(c)}catch(c){o(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fW(t,e={}){return su(t,"GET","/v2/passwordPolicy",au(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hW=6;class pW{constructor(e){var n,r,i,a;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:hW,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,a,s,o;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(a=c.containsUppercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mW{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iC(this),this.idTokenSubscription=new iC(this),this.beforeStateQueue=new dW(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=b5,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=yc(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await jd.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await A5(this,{idToken:e}),r=await Fs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Qo(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,o=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===o)&&(c!=null&&c.user)&&(i=c.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return At(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await py(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=UU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qo(this.app))return Promise.reject(Cc(this));const n=e?cr(e):null;return n&&At(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&At(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qo(this.app)?Promise.reject(Cc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qo(this.app)?Promise.reject(Cc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yc(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await fW(this),n=new pW(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Um("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await iW(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&yc(e)||this._popupRedirectResolver;At(n,this,"argument-error"),this.redirectPersistenceManager=await jd.create(this,[yc(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(At(o,this,"internal-error"),o.then(()=>{s||a(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return At(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=I5(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&FU(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Km(t){return cr(t)}class iC{constructor(e){this.auth=e,this.observer=null,this.addObserver=EB(n=>this.observer=n)}get next(){return At(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kj={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gW(t){kj=t}function vW(t){return kj.loadJS(t)}function yW(){return kj.recaptchaEnterpriseScript}const xW="recaptcha-enterprise",bW="NO_RECAPTCHA";class wW{constructor(e){this.type=xW,this.auth=Km(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(s,o)=>{XU(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new YU(c);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,s(u.siteKey)}}).catch(c=>{o(c)})})}function i(a,s,o){const c=window.grecaptcha;ZT(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(u=>{s(u)}).catch(()=>{s(bW)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,s)=>{r(this.auth).then(o=>{if(!n&&ZT(window.grecaptcha))i(o,a,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=yW();c.length!==0&&(c+=o),vW(c).then(()=>{i(o,a,s)}).catch(u=>{s(u)})}}).catch(o=>{s(o)})})}}async function aC(t,e,n,r=!1){const i=new wW(t);let a;try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const s=Object.assign({},e);return r?Object.assign(s,{captchaResp:a}):Object.assign(s,{captchaResponse:a}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function g_(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await aC(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await aC(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _W(t,e){const n=m5(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if($p(a,e??{}))return i;$d(i,"already-initialized")}return n.initialize({options:e})}function SW(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(yc);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jW{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return zs("not implemented")}_getIdTokenResponse(e){return zs("not implemented")}_linkToIdToken(e,n){return zs("not implemented")}_getReauthenticationResolver(e){return zs("not implemented")}}async function AW(t,e){return su(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PW(t,e){return nx(t,"POST","/v1/accounts:signInWithPassword",au(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EW(t,e){return nx(t,"POST","/v1/accounts:signInWithEmailLink",au(t,e))}async function TW(t,e){return nx(t,"POST","/v1/accounts:signInWithEmailLink",au(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp extends jW{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Fp(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Fp(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return g_(e,n,"signInWithPassword",PW);case"emailLink":return EW(e,{email:this._email,oobCode:this._password});default:$d(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return g_(e,r,"signUpPassword",AW);case"emailLink":return TW(e,{idToken:n,email:this._email,oobCode:this._password});default:$d(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CW(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function NW(t){const e=$h(zh(t)).link,n=e?$h(zh(e)).deep_link_id:null,r=$h(zh(t)).deep_link_id;return(r?$h(zh(r)).link:null)||r||n||e||t}class Oj{constructor(e){var n,r,i,a,s,o;const c=$h(zh(e)),u=(n=c.apiKey)!==null&&n!==void 0?n:null,d=(r=c.oobCode)!==null&&r!==void 0?r:null,f=CW((i=c.mode)!==null&&i!==void 0?i:null);At(u&&d&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=d,this.continueUrl=(a=c.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(s=c.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(o=c.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const n=NW(e);try{return new Oj(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(){this.providerId=Cf.PROVIDER_ID}static credential(e,n){return Fp._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Oj.parseLink(n);return At(r,"argument-error"),Fp._fromEmailAndCode(e,r.code,r.tenantId)}}Cf.PROVIDER_ID="password";Cf.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Cf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kW(t,e){return nx(t,"POST","/v1/accounts:signUp",au(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await Fs._fromIdTokenResponse(e,r,i),s=sC(r);return new Vp({user:a,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=sC(r);return new Vp({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function sC(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my extends uo{constructor(e,n,r,i){var a;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,my.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new my(e,n,r,i)}}function OW(t,e,n,r){return n._getIdTokenResponse(t).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?my._fromErrorAndOperation(t,a,e,r):a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IW(t,e,n=!1){if(Qo(t.app))return Promise.reject(Cc(t));const r="signIn",i=await OW(t,r,e),a=await Vp._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function DW(t,e){return IW(Km(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D5(t){const e=Km(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function MW(t,e,n){if(Qo(t.app))return Promise.reject(Cc(t));const r=Km(t),s=await g_(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",kW).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&D5(t),c}),o=await Vp._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}function RW(t,e,n){return Qo(t.app)?Promise.reject(Cc(t)):DW(cr(t),Cf.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&D5(t),r})}function LW(t,e,n,r){return cr(t).onAuthStateChanged(e,n,r)}const oC="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(oC,"1"),this.storage.removeItem(oC),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $W=1e3,zW=10;class R5 extends M5{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uW(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,o,c)=>{this.notifyListeners(s,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},a=this.storage.getItem(r);cW()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,zW):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},$W)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}R5.type="LOCAL";const FW=R5;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VW extends M5{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}VW.type="SESSION";new Wm(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Wm(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Wm(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Wm(5e3,15e3);var lC="@firebase/auth",cC="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BW{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){At(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UW(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function WW(t){Ld(new Fc("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;At(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:I5(t)},u=new mW(r,i,a,c);return SW(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ld(new Fc("auth-internal",e=>{const n=Km(e.getProvider("auth").getImmediate());return(r=>new BW(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ul(lC,cC,UW(t)),ul(lC,cC,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KW=5*60;hB("authIdTokenMaxAge");function qW(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}gW({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=Cj("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",qW().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});WW("Browser");var HW="firebase",GW="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ul(HW,GW,"app");var uC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Nc,L5;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,P){function O(){}O.prototype=P.prototype,j.D=P.prototype,j.prototype=new O,j.prototype.constructor=j,j.C=function(D,M,z){for(var L=Array(arguments.length-2),te=2;te<arguments.length;te++)L[te-2]=arguments[te];return P.prototype[M].apply(D,L)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(j,P,O){O||(O=0);var D=Array(16);if(typeof P=="string")for(var M=0;16>M;++M)D[M]=P.charCodeAt(O++)|P.charCodeAt(O++)<<8|P.charCodeAt(O++)<<16|P.charCodeAt(O++)<<24;else for(M=0;16>M;++M)D[M]=P[O++]|P[O++]<<8|P[O++]<<16|P[O++]<<24;P=j.g[0],O=j.g[1],M=j.g[2];var z=j.g[3],L=P+(z^O&(M^z))+D[0]+3614090360&4294967295;P=O+(L<<7&4294967295|L>>>25),L=z+(M^P&(O^M))+D[1]+3905402710&4294967295,z=P+(L<<12&4294967295|L>>>20),L=M+(O^z&(P^O))+D[2]+606105819&4294967295,M=z+(L<<17&4294967295|L>>>15),L=O+(P^M&(z^P))+D[3]+3250441966&4294967295,O=M+(L<<22&4294967295|L>>>10),L=P+(z^O&(M^z))+D[4]+4118548399&4294967295,P=O+(L<<7&4294967295|L>>>25),L=z+(M^P&(O^M))+D[5]+1200080426&4294967295,z=P+(L<<12&4294967295|L>>>20),L=M+(O^z&(P^O))+D[6]+2821735955&4294967295,M=z+(L<<17&4294967295|L>>>15),L=O+(P^M&(z^P))+D[7]+4249261313&4294967295,O=M+(L<<22&4294967295|L>>>10),L=P+(z^O&(M^z))+D[8]+1770035416&4294967295,P=O+(L<<7&4294967295|L>>>25),L=z+(M^P&(O^M))+D[9]+2336552879&4294967295,z=P+(L<<12&4294967295|L>>>20),L=M+(O^z&(P^O))+D[10]+4294925233&4294967295,M=z+(L<<17&4294967295|L>>>15),L=O+(P^M&(z^P))+D[11]+2304563134&4294967295,O=M+(L<<22&4294967295|L>>>10),L=P+(z^O&(M^z))+D[12]+1804603682&4294967295,P=O+(L<<7&4294967295|L>>>25),L=z+(M^P&(O^M))+D[13]+4254626195&4294967295,z=P+(L<<12&4294967295|L>>>20),L=M+(O^z&(P^O))+D[14]+2792965006&4294967295,M=z+(L<<17&4294967295|L>>>15),L=O+(P^M&(z^P))+D[15]+1236535329&4294967295,O=M+(L<<22&4294967295|L>>>10),L=P+(M^z&(O^M))+D[1]+4129170786&4294967295,P=O+(L<<5&4294967295|L>>>27),L=z+(O^M&(P^O))+D[6]+3225465664&4294967295,z=P+(L<<9&4294967295|L>>>23),L=M+(P^O&(z^P))+D[11]+643717713&4294967295,M=z+(L<<14&4294967295|L>>>18),L=O+(z^P&(M^z))+D[0]+3921069994&4294967295,O=M+(L<<20&4294967295|L>>>12),L=P+(M^z&(O^M))+D[5]+3593408605&4294967295,P=O+(L<<5&4294967295|L>>>27),L=z+(O^M&(P^O))+D[10]+38016083&4294967295,z=P+(L<<9&4294967295|L>>>23),L=M+(P^O&(z^P))+D[15]+3634488961&4294967295,M=z+(L<<14&4294967295|L>>>18),L=O+(z^P&(M^z))+D[4]+3889429448&4294967295,O=M+(L<<20&4294967295|L>>>12),L=P+(M^z&(O^M))+D[9]+568446438&4294967295,P=O+(L<<5&4294967295|L>>>27),L=z+(O^M&(P^O))+D[14]+3275163606&4294967295,z=P+(L<<9&4294967295|L>>>23),L=M+(P^O&(z^P))+D[3]+4107603335&4294967295,M=z+(L<<14&4294967295|L>>>18),L=O+(z^P&(M^z))+D[8]+1163531501&4294967295,O=M+(L<<20&4294967295|L>>>12),L=P+(M^z&(O^M))+D[13]+2850285829&4294967295,P=O+(L<<5&4294967295|L>>>27),L=z+(O^M&(P^O))+D[2]+4243563512&4294967295,z=P+(L<<9&4294967295|L>>>23),L=M+(P^O&(z^P))+D[7]+1735328473&4294967295,M=z+(L<<14&4294967295|L>>>18),L=O+(z^P&(M^z))+D[12]+2368359562&4294967295,O=M+(L<<20&4294967295|L>>>12),L=P+(O^M^z)+D[5]+4294588738&4294967295,P=O+(L<<4&4294967295|L>>>28),L=z+(P^O^M)+D[8]+2272392833&4294967295,z=P+(L<<11&4294967295|L>>>21),L=M+(z^P^O)+D[11]+1839030562&4294967295,M=z+(L<<16&4294967295|L>>>16),L=O+(M^z^P)+D[14]+4259657740&4294967295,O=M+(L<<23&4294967295|L>>>9),L=P+(O^M^z)+D[1]+2763975236&4294967295,P=O+(L<<4&4294967295|L>>>28),L=z+(P^O^M)+D[4]+1272893353&4294967295,z=P+(L<<11&4294967295|L>>>21),L=M+(z^P^O)+D[7]+4139469664&4294967295,M=z+(L<<16&4294967295|L>>>16),L=O+(M^z^P)+D[10]+3200236656&4294967295,O=M+(L<<23&4294967295|L>>>9),L=P+(O^M^z)+D[13]+681279174&4294967295,P=O+(L<<4&4294967295|L>>>28),L=z+(P^O^M)+D[0]+3936430074&4294967295,z=P+(L<<11&4294967295|L>>>21),L=M+(z^P^O)+D[3]+3572445317&4294967295,M=z+(L<<16&4294967295|L>>>16),L=O+(M^z^P)+D[6]+76029189&4294967295,O=M+(L<<23&4294967295|L>>>9),L=P+(O^M^z)+D[9]+3654602809&4294967295,P=O+(L<<4&4294967295|L>>>28),L=z+(P^O^M)+D[12]+3873151461&4294967295,z=P+(L<<11&4294967295|L>>>21),L=M+(z^P^O)+D[15]+530742520&4294967295,M=z+(L<<16&4294967295|L>>>16),L=O+(M^z^P)+D[2]+3299628645&4294967295,O=M+(L<<23&4294967295|L>>>9),L=P+(M^(O|~z))+D[0]+4096336452&4294967295,P=O+(L<<6&4294967295|L>>>26),L=z+(O^(P|~M))+D[7]+1126891415&4294967295,z=P+(L<<10&4294967295|L>>>22),L=M+(P^(z|~O))+D[14]+2878612391&4294967295,M=z+(L<<15&4294967295|L>>>17),L=O+(z^(M|~P))+D[5]+4237533241&4294967295,O=M+(L<<21&4294967295|L>>>11),L=P+(M^(O|~z))+D[12]+1700485571&4294967295,P=O+(L<<6&4294967295|L>>>26),L=z+(O^(P|~M))+D[3]+2399980690&4294967295,z=P+(L<<10&4294967295|L>>>22),L=M+(P^(z|~O))+D[10]+4293915773&4294967295,M=z+(L<<15&4294967295|L>>>17),L=O+(z^(M|~P))+D[1]+2240044497&4294967295,O=M+(L<<21&4294967295|L>>>11),L=P+(M^(O|~z))+D[8]+1873313359&4294967295,P=O+(L<<6&4294967295|L>>>26),L=z+(O^(P|~M))+D[15]+4264355552&4294967295,z=P+(L<<10&4294967295|L>>>22),L=M+(P^(z|~O))+D[6]+2734768916&4294967295,M=z+(L<<15&4294967295|L>>>17),L=O+(z^(M|~P))+D[13]+1309151649&4294967295,O=M+(L<<21&4294967295|L>>>11),L=P+(M^(O|~z))+D[4]+4149444226&4294967295,P=O+(L<<6&4294967295|L>>>26),L=z+(O^(P|~M))+D[11]+3174756917&4294967295,z=P+(L<<10&4294967295|L>>>22),L=M+(P^(z|~O))+D[2]+718787259&4294967295,M=z+(L<<15&4294967295|L>>>17),L=O+(z^(M|~P))+D[9]+3951481745&4294967295,j.g[0]=j.g[0]+P&4294967295,j.g[1]=j.g[1]+(M+(L<<21&4294967295|L>>>11))&4294967295,j.g[2]=j.g[2]+M&4294967295,j.g[3]=j.g[3]+z&4294967295}r.prototype.u=function(j,P){P===void 0&&(P=j.length);for(var O=P-this.blockSize,D=this.B,M=this.h,z=0;z<P;){if(M==0)for(;z<=O;)i(this,j,z),z+=this.blockSize;if(typeof j=="string"){for(;z<P;)if(D[M++]=j.charCodeAt(z++),M==this.blockSize){i(this,D),M=0;break}}else for(;z<P;)if(D[M++]=j[z++],M==this.blockSize){i(this,D),M=0;break}}this.h=M,this.o+=P},r.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var P=1;P<j.length-8;++P)j[P]=0;var O=8*this.o;for(P=j.length-8;P<j.length;++P)j[P]=O&255,O/=256;for(this.u(j),j=Array(16),P=O=0;4>P;++P)for(var D=0;32>D;D+=8)j[O++]=this.g[P]>>>D&255;return j};function a(j,P){var O=o;return Object.prototype.hasOwnProperty.call(O,j)?O[j]:O[j]=P(j)}function s(j,P){this.h=P;for(var O=[],D=!0,M=j.length-1;0<=M;M--){var z=j[M]|0;D&&z==P||(O[M]=z,D=!1)}this.g=O}var o={};function c(j){return-128<=j&&128>j?a(j,function(P){return new s([P|0],0>P?-1:0)}):new s([j|0],0>j?-1:0)}function u(j){if(isNaN(j)||!isFinite(j))return f;if(0>j)return b(u(-j));for(var P=[],O=1,D=0;j>=O;D++)P[D]=j/O|0,O*=4294967296;return new s(P,0)}function d(j,P){if(j.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(j.charAt(0)=="-")return b(d(j.substring(1),P));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=u(Math.pow(P,8)),D=f,M=0;M<j.length;M+=8){var z=Math.min(8,j.length-M),L=parseInt(j.substring(M,M+z),P);8>z?(z=u(Math.pow(P,z)),D=D.j(z).add(u(L))):(D=D.j(O),D=D.add(u(L)))}return D}var f=c(0),h=c(1),p=c(16777216);t=s.prototype,t.m=function(){if(v(this))return-b(this).m();for(var j=0,P=1,O=0;O<this.g.length;O++){var D=this.i(O);j+=(0<=D?D:4294967296+D)*P,P*=4294967296}return j},t.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(y(this))return"0";if(v(this))return"-"+b(this).toString(j);for(var P=u(Math.pow(j,6)),O=this,D="";;){var M=T(O,P).g;O=x(O,M.j(P));var z=((0<O.g.length?O.g[0]:O.h)>>>0).toString(j);if(O=M,y(O))return z+D;for(;6>z.length;)z="0"+z;D=z+D}},t.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function y(j){if(j.h!=0)return!1;for(var P=0;P<j.g.length;P++)if(j.g[P]!=0)return!1;return!0}function v(j){return j.h==-1}t.l=function(j){return j=x(this,j),v(j)?-1:y(j)?0:1};function b(j){for(var P=j.g.length,O=[],D=0;D<P;D++)O[D]=~j.g[D];return new s(O,~j.h).add(h)}t.abs=function(){return v(this)?b(this):this},t.add=function(j){for(var P=Math.max(this.g.length,j.g.length),O=[],D=0,M=0;M<=P;M++){var z=D+(this.i(M)&65535)+(j.i(M)&65535),L=(z>>>16)+(this.i(M)>>>16)+(j.i(M)>>>16);D=L>>>16,z&=65535,L&=65535,O[M]=L<<16|z}return new s(O,O[O.length-1]&-2147483648?-1:0)};function x(j,P){return j.add(b(P))}t.j=function(j){if(y(this)||y(j))return f;if(v(this))return v(j)?b(this).j(b(j)):b(b(this).j(j));if(v(j))return b(this.j(b(j)));if(0>this.l(p)&&0>j.l(p))return u(this.m()*j.m());for(var P=this.g.length+j.g.length,O=[],D=0;D<2*P;D++)O[D]=0;for(D=0;D<this.g.length;D++)for(var M=0;M<j.g.length;M++){var z=this.i(D)>>>16,L=this.i(D)&65535,te=j.i(M)>>>16,X=j.i(M)&65535;O[2*D+2*M]+=L*X,_(O,2*D+2*M),O[2*D+2*M+1]+=z*X,_(O,2*D+2*M+1),O[2*D+2*M+1]+=L*te,_(O,2*D+2*M+1),O[2*D+2*M+2]+=z*te,_(O,2*D+2*M+2)}for(D=0;D<P;D++)O[D]=O[2*D+1]<<16|O[2*D];for(D=P;D<2*P;D++)O[D]=0;return new s(O,0)};function _(j,P){for(;(j[P]&65535)!=j[P];)j[P+1]+=j[P]>>>16,j[P]&=65535,P++}function S(j,P){this.g=j,this.h=P}function T(j,P){if(y(P))throw Error("division by zero");if(y(j))return new S(f,f);if(v(j))return P=T(b(j),P),new S(b(P.g),b(P.h));if(v(P))return P=T(j,b(P)),new S(b(P.g),P.h);if(30<j.g.length){if(v(j)||v(P))throw Error("slowDivide_ only works with positive integers.");for(var O=h,D=P;0>=D.l(j);)O=E(O),D=E(D);var M=A(O,1),z=A(D,1);for(D=A(D,2),O=A(O,2);!y(D);){var L=z.add(D);0>=L.l(j)&&(M=M.add(O),z=L),D=A(D,1),O=A(O,1)}return P=x(j,M.j(P)),new S(M,P)}for(M=f;0<=j.l(P);){for(O=Math.max(1,Math.floor(j.m()/P.m())),D=Math.ceil(Math.log(O)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),z=u(O),L=z.j(P);v(L)||0<L.l(j);)O-=D,z=u(O),L=z.j(P);y(z)&&(z=h),M=M.add(z),j=x(j,L)}return new S(M,j)}t.A=function(j){return T(this,j).h},t.and=function(j){for(var P=Math.max(this.g.length,j.g.length),O=[],D=0;D<P;D++)O[D]=this.i(D)&j.i(D);return new s(O,this.h&j.h)},t.or=function(j){for(var P=Math.max(this.g.length,j.g.length),O=[],D=0;D<P;D++)O[D]=this.i(D)|j.i(D);return new s(O,this.h|j.h)},t.xor=function(j){for(var P=Math.max(this.g.length,j.g.length),O=[],D=0;D<P;D++)O[D]=this.i(D)^j.i(D);return new s(O,this.h^j.h)};function E(j){for(var P=j.g.length+1,O=[],D=0;D<P;D++)O[D]=j.i(D)<<1|j.i(D-1)>>>31;return new s(O,j.h)}function A(j,P){var O=P>>5;P%=32;for(var D=j.g.length-O,M=[],z=0;z<D;z++)M[z]=0<P?j.i(z+O)>>>P|j.i(z+O+1)<<32-P:j.i(z+O);return new s(M,j.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,L5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=d,Nc=s}).apply(typeof uC<"u"?uC:typeof self<"u"?self:typeof window<"u"?window:{});var Hg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $5,Fh,z5,Ov,v_,F5,V5,B5;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,N,R){return m==Array.prototype||m==Object.prototype||(m[N]=R.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hg=="object"&&Hg];for(var N=0;N<m.length;++N){var R=m[N];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var r=n(this);function i(m,N){if(N)e:{var R=r;m=m.split(".");for(var U=0;U<m.length-1;U++){var ue=m[U];if(!(ue in R))break e;R=R[ue]}m=m[m.length-1],U=R[m],N=N(U),N!=U&&N!=null&&e(R,m,{configurable:!0,writable:!0,value:N})}}function a(m,N){m instanceof String&&(m+="");var R=0,U=!1,ue={next:function(){if(!U&&R<m.length){var he=R++;return{value:N(he,m[he]),done:!1}}return U=!0,{done:!0,value:void 0}}};return ue[Symbol.iterator]=function(){return ue},ue}i("Array.prototype.values",function(m){return m||function(){return a(this,function(N,R){return R})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function c(m){var N=typeof m;return N=N!="object"?N:m?Array.isArray(m)?"array":N:"null",N=="array"||N=="object"&&typeof m.length=="number"}function u(m){var N=typeof m;return N=="object"&&m!=null||N=="function"}function d(m,N,R){return m.call.apply(m.bind,arguments)}function f(m,N,R){if(!m)throw Error();if(2<arguments.length){var U=Array.prototype.slice.call(arguments,2);return function(){var ue=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ue,U),m.apply(N,ue)}}return function(){return m.apply(N,arguments)}}function h(m,N,R){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,h.apply(null,arguments)}function p(m,N){var R=Array.prototype.slice.call(arguments,1);return function(){var U=R.slice();return U.push.apply(U,arguments),m.apply(this,U)}}function y(m,N){function R(){}R.prototype=N.prototype,m.aa=N.prototype,m.prototype=new R,m.prototype.constructor=m,m.Qb=function(U,ue,he){for(var Ie=Array(arguments.length-2),It=2;It<arguments.length;It++)Ie[It-2]=arguments[It];return N.prototype[ue].apply(U,Ie)}}function v(m){const N=m.length;if(0<N){const R=Array(N);for(let U=0;U<N;U++)R[U]=m[U];return R}return[]}function b(m,N){for(let R=1;R<arguments.length;R++){const U=arguments[R];if(c(U)){const ue=m.length||0,he=U.length||0;m.length=ue+he;for(let Ie=0;Ie<he;Ie++)m[ue+Ie]=U[Ie]}else m.push(U)}}class x{constructor(N,R){this.i=N,this.j=R,this.h=0,this.g=null}get(){let N;return 0<this.h?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function _(m){return/^[\s\xa0]*$/.test(m)}function S(){var m=o.navigator;return m&&(m=m.userAgent)?m:""}function T(m){return T[" "](m),m}T[" "]=function(){};var E=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function A(m,N,R){for(const U in m)N.call(R,m[U],U,m)}function j(m,N){for(const R in m)N.call(void 0,m[R],R,m)}function P(m){const N={};for(const R in m)N[R]=m[R];return N}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(m,N){let R,U;for(let ue=1;ue<arguments.length;ue++){U=arguments[ue];for(R in U)m[R]=U[R];for(let he=0;he<O.length;he++)R=O[he],Object.prototype.hasOwnProperty.call(U,R)&&(m[R]=U[R])}}function M(m){var N=1;m=m.split(":");const R=[];for(;0<N&&m.length;)R.push(m.shift()),N--;return m.length&&R.push(m.join(":")),R}function z(m){o.setTimeout(()=>{throw m},0)}function L(){var m=q;let N=null;return m.g&&(N=m.g,m.g=m.g.next,m.g||(m.h=null),N.next=null),N}class te{constructor(){this.h=this.g=null}add(N,R){const U=X.get();U.set(N,R),this.h?this.h.next=U:this.g=U,this.h=U}}var X=new x(()=>new W,m=>m.reset());class W{constructor(){this.next=this.g=this.h=null}set(N,R){this.h=N,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let B,F=!1,q=new te,ae=()=>{const m=o.Promise.resolve(void 0);B=()=>{m.then(ce)}};var ce=()=>{for(var m;m=L();){try{m.h.call(m.g)}catch(R){z(R)}var N=X;N.j(m),100>N.h&&(N.h++,m.next=N.g,N.g=m)}F=!1};function ve(){this.s=this.s,this.C=this.C}ve.prototype.s=!1,ve.prototype.ma=function(){this.s||(this.s=!0,this.N())},ve.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function we(m,N){this.type=m,this.g=this.target=N,this.defaultPrevented=!1}we.prototype.h=function(){this.defaultPrevented=!0};var Le=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var m=!1,N=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const R=()=>{};o.addEventListener("test",R,N),o.removeEventListener("test",R,N)}catch{}return m}();function Ye(m,N){if(we.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var R=this.type=m.type,U=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=N,N=m.relatedTarget){if(E){e:{try{T(N.nodeName);var ue=!0;break e}catch{}ue=!1}ue||(N=null)}}else R=="mouseover"?N=m.fromElement:R=="mouseout"&&(N=m.toElement);this.relatedTarget=N,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:et[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&Ye.aa.h.call(this)}}y(Ye,we);var et={2:"touch",3:"pen",4:"mouse"};Ye.prototype.h=function(){Ye.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var ke="closure_listenable_"+(1e6*Math.random()|0),We=0;function Q(m,N,R,U,ue){this.listener=m,this.proxy=null,this.src=N,this.type=R,this.capture=!!U,this.ha=ue,this.key=++We,this.da=this.fa=!1}function Pe(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function xe(m){this.src=m,this.g={},this.h=0}xe.prototype.add=function(m,N,R,U,ue){var he=m.toString();m=this.g[he],m||(m=this.g[he]=[],this.h++);var Ie=pt(m,N,U,ue);return-1<Ie?(N=m[Ie],R||(N.fa=!1)):(N=new Q(N,this.src,he,!!U,ue),N.fa=R,m.push(N)),N};function de(m,N){var R=N.type;if(R in m.g){var U=m.g[R],ue=Array.prototype.indexOf.call(U,N,void 0),he;(he=0<=ue)&&Array.prototype.splice.call(U,ue,1),he&&(Pe(N),m.g[R].length==0&&(delete m.g[R],m.h--))}}function pt(m,N,R,U){for(var ue=0;ue<m.length;++ue){var he=m[ue];if(!he.da&&he.listener==N&&he.capture==!!R&&he.ha==U)return ue}return-1}var nt="closure_lm_"+(1e6*Math.random()|0),Oe={};function Ze(m,N,R,U,ue){if(Array.isArray(N)){for(var he=0;he<N.length;he++)Ze(m,N[he],R,U,ue);return null}return R=wi(R),m&&m[ke]?m.K(N,R,u(U)?!!U.capture:!1,ue):yn(m,N,R,!1,U,ue)}function yn(m,N,R,U,ue,he){if(!N)throw Error("Invalid event type");var Ie=u(ue)?!!ue.capture:!!ue,It=zr(m);if(It||(m[nt]=It=new xe(m)),R=It.add(N,R,U,Ie,he),R.proxy)return R;if(U=Zr(),R.proxy=U,U.src=m,U.listener=R,m.addEventListener)Le||(ue=Ie),ue===void 0&&(ue=!1),m.addEventListener(N.toString(),U,ue);else if(m.attachEvent)m.attachEvent(dn(N.toString()),U);else if(m.addListener&&m.removeListener)m.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return R}function Zr(){function m(R){return N.call(m.src,m.listener,R)}const N=ti;return m}function bi(m,N,R,U,ue){if(Array.isArray(N))for(var he=0;he<N.length;he++)bi(m,N[he],R,U,ue);else U=u(U)?!!U.capture:!!U,R=wi(R),m&&m[ke]?(m=m.i,N=String(N).toString(),N in m.g&&(he=m.g[N],R=pt(he,R,U,ue),-1<R&&(Pe(he[R]),Array.prototype.splice.call(he,R,1),he.length==0&&(delete m.g[N],m.h--)))):m&&(m=zr(m))&&(N=m.g[N.toString()],m=-1,N&&(m=pt(N,R,U,ue)),(R=-1<m?N[m]:null)&&ei(R))}function ei(m){if(typeof m!="number"&&m&&!m.da){var N=m.src;if(N&&N[ke])de(N.i,m);else{var R=m.type,U=m.proxy;N.removeEventListener?N.removeEventListener(R,U,m.capture):N.detachEvent?N.detachEvent(dn(R),U):N.addListener&&N.removeListener&&N.removeListener(U),(R=zr(N))?(de(R,m),R.h==0&&(R.src=null,N[nt]=null)):Pe(m)}}}function dn(m){return m in Oe?Oe[m]:Oe[m]="on"+m}function ti(m,N){if(m.da)m=!0;else{N=new Ye(N,this);var R=m.listener,U=m.ha||m.src;m.fa&&ei(m),m=R.call(U,N)}return m}function zr(m){return m=m[nt],m instanceof xe?m:null}var ca="__closure_events_fn_"+(1e9*Math.random()>>>0);function wi(m){return typeof m=="function"?m:(m[ca]||(m[ca]=function(N){return m.handleEvent(N)}),m[ca])}function qt(){ve.call(this),this.i=new xe(this),this.M=this,this.F=null}y(qt,ve),qt.prototype[ke]=!0,qt.prototype.removeEventListener=function(m,N,R,U){bi(this,m,N,R,U)};function en(m,N){var R,U=m.F;if(U)for(R=[];U;U=U.F)R.push(U);if(m=m.M,U=N.type||N,typeof N=="string")N=new we(N,m);else if(N instanceof we)N.target=N.target||m;else{var ue=N;N=new we(U,m),D(N,ue)}if(ue=!0,R)for(var he=R.length-1;0<=he;he--){var Ie=N.g=R[he];ue=za(Ie,U,!0,N)&&ue}if(Ie=N.g=m,ue=za(Ie,U,!0,N)&&ue,ue=za(Ie,U,!1,N)&&ue,R)for(he=0;he<R.length;he++)Ie=N.g=R[he],ue=za(Ie,U,!1,N)&&ue}qt.prototype.N=function(){if(qt.aa.N.call(this),this.i){var m=this.i,N;for(N in m.g){for(var R=m.g[N],U=0;U<R.length;U++)Pe(R[U]);delete m.g[N],m.h--}}this.F=null},qt.prototype.K=function(m,N,R,U){return this.i.add(String(m),N,!1,R,U)},qt.prototype.L=function(m,N,R,U){return this.i.add(String(m),N,!0,R,U)};function za(m,N,R,U){if(N=m.i.g[String(N)],!N)return!0;N=N.concat();for(var ue=!0,he=0;he<N.length;++he){var Ie=N[he];if(Ie&&!Ie.da&&Ie.capture==R){var It=Ie.listener,Dn=Ie.ha||Ie.src;Ie.fa&&de(m.i,Ie),ue=It.call(Dn,U)!==!1&&ue}}return ue&&!U.defaultPrevented}function Fa(m,N,R){if(typeof m=="function")R&&(m=h(m,R));else if(m&&typeof m.handleEvent=="function")m=h(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(N)?-1:o.setTimeout(m,N||0)}function yo(m){m.g=Fa(()=>{m.g=null,m.i&&(m.i=!1,yo(m))},m.l);const N=m.h;m.h=null,m.m.apply(null,N)}class xo extends ve{constructor(N,R){super(),this.m=N,this.l=R,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:yo(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fr(m){ve.call(this),this.h=m,this.g={}}y(Fr,ve);var xs=[];function bo(m){A(m.g,function(N,R){this.g.hasOwnProperty(R)&&ei(N)},m),m.g={}}Fr.prototype.N=function(){Fr.aa.N.call(this),bo(this)},Fr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ni=o.JSON.stringify,Be=o.JSON.parse,ye=class{stringify(m){return o.JSON.stringify(m,void 0)}parse(m){return o.JSON.parse(m,void 0)}};function qe(){}qe.prototype.h=null;function jn(m){return m.h||(m.h=m.i())}function Ne(){}var ut={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bn(){we.call(this,"d")}y(Bn,we);function yt(){we.call(this,"c")}y(yt,we);var On={},_i=null;function Va(){return _i=_i||new qt}On.La="serverreachability";function Si(m){we.call(this,On.La,m)}y(Si,we);function Un(m){const N=Va();en(N,new Si(N))}On.STAT_EVENT="statevent";function tr(m,N){we.call(this,On.STAT_EVENT,m),this.stat=N}y(tr,we);function fn(m){const N=Va();en(N,new tr(N,m))}On.Ma="timingevent";function bs(m,N){we.call(this,On.Ma,m),this.size=N}y(bs,we);function Tt(m,N){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){m()},N)}function Ht(){this.g=!0}Ht.prototype.xa=function(){this.g=!1};function Ab(m,N,R,U,ue,he){m.info(function(){if(m.g)if(he)for(var Ie="",It=he.split("&"),Dn=0;Dn<It.length;Dn++){var bt=It[Dn].split("=");if(1<bt.length){var rr=bt[0];bt=bt[1];var Wn=rr.split("_");Ie=2<=Wn.length&&Wn[1]=="type"?Ie+(rr+"="+bt+"&"):Ie+(rr+"=redacted&")}}else Ie=null;else Ie=he;return"XMLHTTP REQ ("+U+") [attempt "+ue+"]: "+N+`
`+R+`
`+Ie})}function bu(m,N,R,U,ue,he,Ie){m.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+ue+"]: "+N+`
`+R+`
`+he+" "+Ie})}function ua(m,N,R,U){m.info(function(){return"XMLHTTP TEXT ("+N+"): "+Pb(m,R)+(U?" "+U:"")})}function wu(m,N){m.info(function(){return"TIMEOUT: "+N})}Ht.prototype.info=function(){};function Pb(m,N){if(!m.g)return N;if(!N)return null;try{var R=JSON.parse(N);if(R){for(m=0;m<R.length;m++)if(Array.isArray(R[m])){var U=R[m];if(!(2>U.length)){var ue=U[1];if(Array.isArray(ue)&&!(1>ue.length)){var he=ue[0];if(he!="noop"&&he!="stop"&&he!="close")for(var Ie=1;Ie<ue.length;Ie++)ue[Ie]=""}}}}return ni(R)}catch{return N}}var ji={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ws={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Bi;function _s(){}y(_s,qe),_s.prototype.g=function(){return new XMLHttpRequest},_s.prototype.i=function(){return{}},Bi=new _s;function Ba(m,N,R,U){this.j=m,this.i=N,this.l=R,this.R=U||1,this.U=new Fr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new da}function da(){this.i=null,this.g="",this.h=!1}var Jf={},fa={};function _u(m,N,R){m.L=1,m.v=Ka(Ai(N)),m.m=R,m.P=!0,Su(m,null)}function Su(m,N){m.F=Date.now(),ri(m),m.A=Ai(m.v);var R=m.A,U=m.R;Array.isArray(U)||(U=[String(U)]),An(R.i,"t",U),m.C=0,R=m.j.J,m.h=new da,m.g=Ga(m.j,R?N:null,!m.m),0<m.O&&(m.M=new xo(h(m.Y,m,m.g),m.O)),N=m.U,R=m.g,U=m.ca;var ue="readystatechange";Array.isArray(ue)||(ue&&(xs[0]=ue.toString()),ue=xs);for(var he=0;he<ue.length;he++){var Ie=Ze(R,ue[he],U||N.handleEvent,!1,N.h||N);if(!Ie)break;N.g[Ie.key]=Ie}N=m.H?P(m.H):{},m.m?(m.u||(m.u="POST"),N["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,N)):(m.u="GET",m.g.ea(m.A,m.u,null,N)),Un(),Ab(m.i,m.u,m.A,m.l,m.R,m.m)}Ba.prototype.ca=function(m){m=m.target;const N=this.M;N&&ga(m)==3?N.j():this.Y(m)},Ba.prototype.Y=function(m){try{if(m==this.g)e:{const Wn=ga(this.g);var N=this.g.Ba();const Ya=this.g.Z();if(!(3>Wn)&&(Wn!=3||this.g&&(this.h.h||this.g.oa()||Tu(this.g)))){this.J||Wn!=4||N==7||(N==8||0>=Ya?Un(3):Un(2)),Ua(this);var R=this.g.Z();this.X=R;t:if(on(this)){var U=Tu(this.g);m="";var ue=U.length,he=ga(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ha(this),Wa(this);var Ie="";break t}this.h.i=new o.TextDecoder}for(N=0;N<ue;N++)this.h.h=!0,m+=this.h.i.decode(U[N],{stream:!(he&&N==ue-1)});U.length=0,this.h.g+=m,this.C=0,Ie=this.h.g}else Ie=this.g.oa();if(this.o=R==200,bu(this.i,this.u,this.A,this.l,this.R,Wn,R),this.o){if(this.T&&!this.K){t:{if(this.g){var It,Dn=this.g;if((It=Dn.g?Dn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(It)){var bt=It;break t}}bt=null}if(R=bt)ua(this.i,this.l,R,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ll(this,R);else{this.o=!1,this.s=3,fn(12),ha(this),Wa(this);break e}}if(this.P){R=!0;let ii;for(;!this.J&&this.C<Ie.length;)if(ii=Ss(this,Ie),ii==fa){Wn==4&&(this.s=4,fn(14),R=!1),ua(this.i,this.l,null,"[Incomplete Response]");break}else if(ii==Jf){this.s=4,fn(15),ua(this.i,this.l,Ie,"[Invalid Chunk]"),R=!1;break}else ua(this.i,this.l,ii,null),Ll(this,ii);if(on(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Wn!=4||Ie.length!=0||this.h.h||(this.s=1,fn(16),R=!1),this.o=this.o&&R,!R)ua(this.i,this.l,Ie,"[Invalid Chunked Response]"),ha(this),Wa(this);else if(0<Ie.length&&!this.W){this.W=!0;var rr=this.j;rr.g==this&&rr.ba&&!rr.M&&(rr.j.info("Great, no buffering proxy detected. Bytes received: "+Ie.length),Cs(rr),rr.M=!0,fn(11))}}else ua(this.i,this.l,Ie,null),Ll(this,Ie);Wn==4&&ha(this),this.o&&!this.J&&(Wn==4?Xl(this.j,this):(this.o=!1,ri(this)))}else ch(this.g),R==400&&0<Ie.indexOf("Unknown SID")?(this.s=3,fn(12)):(this.s=0,fn(13)),ha(this),Wa(this)}}}catch{}finally{}};function on(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function Ss(m,N){var R=m.C,U=N.indexOf(`
`,R);return U==-1?fa:(R=Number(N.substring(R,U)),isNaN(R)?Jf:(U+=1,U+R>N.length?fa:(N=N.slice(U,U+R),m.C=U+R,N)))}Ba.prototype.cancel=function(){this.J=!0,ha(this)};function ri(m){m.S=Date.now()+m.I,Zf(m,m.I)}function Zf(m,N){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Tt(h(m.ba,m),N)}function Ua(m){m.B&&(o.clearTimeout(m.B),m.B=null)}Ba.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(wu(this.i,this.A),this.L!=2&&(Un(),fn(17)),ha(this),this.s=2,Wa(this)):Zf(this,this.S-m)};function Wa(m){m.j.G==0||m.J||Xl(m.j,m)}function ha(m){Ua(m);var N=m.M;N&&typeof N.ma=="function"&&N.ma(),m.M=null,bo(m.U),m.g&&(N=m.g,m.g=null,N.abort(),N.ma())}function Ll(m,N){try{var R=m.j;if(R.G!=0&&(R.g==m||mt(R.h,m))){if(!m.K&&mt(R.h,m)&&R.G==3){try{var U=R.Da.g.parse(N)}catch{U=null}if(Array.isArray(U)&&U.length==3){var ue=U;if(ue[0]==0){e:if(!R.u){if(R.g)if(R.g.F+3e3<m.F)Yl(R),Es(R);else break e;In(R),fn(18)}}else R.za=ue[1],0<R.za-R.T&&37500>ue[2]&&R.F&&R.v==0&&!R.C&&(R.C=Tt(h(R.Za,R),6e3));if(1>=th(R.h)&&R.ca){try{R.ca()}catch{}R.ca=void 0}}else Ha(R,11)}else if((m.K||R.g==m)&&Yl(R),!_(N))for(ue=R.Da.g.parse(N),N=0;N<ue.length;N++){let bt=ue[N];if(R.T=bt[0],bt=bt[1],R.G==2)if(bt[0]=="c"){R.K=bt[1],R.ia=bt[2];const rr=bt[3];rr!=null&&(R.la=rr,R.j.info("VER="+R.la));const Wn=bt[4];Wn!=null&&(R.Aa=Wn,R.j.info("SVER="+R.Aa));const Ya=bt[5];Ya!=null&&typeof Ya=="number"&&0<Ya&&(U=1.5*Ya,R.L=U,R.j.info("backChannelRequestTimeoutMs_="+U)),U=R;const ii=m.g;if(ii){const Jl=ii.g?ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jl){var he=U.h;he.g||Jl.indexOf("spdy")==-1&&Jl.indexOf("quic")==-1&&Jl.indexOf("h2")==-1||(he.j=he.l,he.g=new Set,he.h&&(ju(he,he.h),he.h=null))}if(U.D){const hh=ii.g?ii.g.getResponseHeader("X-HTTP-Session-Id"):null;hh&&(U.ya=hh,zt(U.I,U.D,hh))}}R.G=3,R.l&&R.l.ua(),R.ba&&(R.R=Date.now()-m.F,R.j.info("Handshake RTT: "+R.R+"ms")),U=R;var Ie=m;if(U.qa=Iu(U,U.J?U.ia:null,U.W),Ie.K){nh(U.h,Ie);var It=Ie,Dn=U.L;Dn&&(It.I=Dn),It.B&&(Ua(It),ri(It)),U.g=Ie}else Ou(U);0<R.i.length&&Cu(R)}else bt[0]!="stop"&&bt[0]!="close"||Ha(R,7);else R.G==3&&(bt[0]=="stop"||bt[0]=="close"?bt[0]=="stop"?Ha(R,7):To(R):bt[0]!="noop"&&R.l&&R.l.ta(bt),R.v=0)}}Un(4)}catch{}}var js=class{constructor(m,N){this.g=m,this.map=N}};function eh(m){this.l=m||10,o.PerformanceNavigationTiming?(m=o.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $l(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function th(m){return m.h?1:m.g?m.g.size:0}function mt(m,N){return m.h?m.h==N:m.g?m.g.has(N):!1}function ju(m,N){m.g?m.g.add(N):m.h=N}function nh(m,N){m.h&&m.h==N?m.h=null:m.g&&m.g.has(N)&&m.g.delete(N)}eh.prototype.cancel=function(){if(this.i=zl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function zl(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let N=m.i;for(const R of m.g.values())N=N.concat(R.D);return N}return v(m.i)}function jg(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(c(m)){for(var N=[],R=m.length,U=0;U<R;U++)N.push(m[U]);return N}N=[],R=0;for(U in m)N[R++]=m[U];return N}function Wt(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(c(m)||typeof m=="string"){var N=[];m=m.length;for(var R=0;R<m;R++)N.push(R);return N}N=[],R=0;for(const U in m)N[R++]=U;return N}}}function wo(m,N){if(m.forEach&&typeof m.forEach=="function")m.forEach(N,void 0);else if(c(m)||typeof m=="string")Array.prototype.forEach.call(m,N,void 0);else for(var R=Wt(m),U=jg(m),ue=U.length,he=0;he<ue;he++)N.call(void 0,U[he],R&&R[he],m)}var _o=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function So(m,N){if(m){m=m.split("&");for(var R=0;R<m.length;R++){var U=m[R].indexOf("="),ue=null;if(0<=U){var he=m[R].substring(0,U);ue=m[R].substring(U+1)}else he=m[R];N(he,ue?decodeURIComponent(ue.replace(/\+/g," ")):"")}}}function pa(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof pa){this.h=m.h,As(this,m.j),this.o=m.o,this.g=m.g,Fl(this,m.s),this.l=m.l;var N=m.i,R=new qa;R.i=N.i,N.g&&(R.g=new Map(N.g),R.h=N.h),Vl(this,R),this.m=m.m}else m&&(N=String(m).match(_o))?(this.h=!1,As(this,N[1]||"",!0),this.o=jo(N[2]||""),this.g=jo(N[3]||"",!0),Fl(this,N[4]),this.l=jo(N[5]||"",!0),Vl(this,N[6]||"",!0),this.m=jo(N[7]||"")):(this.h=!1,this.i=new qa(null,this.h))}pa.prototype.toString=function(){var m=[],N=this.j;N&&m.push(Bl(N,rh,!0),":");var R=this.g;return(R||N=="file")&&(m.push("//"),(N=this.o)&&m.push(Bl(N,rh,!0),"@"),m.push(encodeURIComponent(String(R)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.s,R!=null&&m.push(":",String(R))),(R=this.l)&&(this.g&&R.charAt(0)!="/"&&m.push("/"),m.push(Bl(R,R.charAt(0)=="/"?Tb:Eb,!0))),(R=this.i.toString())&&m.push("?",R),(R=this.m)&&m.push("#",Bl(R,Ao)),m.join("")};function Ai(m){return new pa(m)}function As(m,N,R){m.j=R?jo(N,!0):N,m.j&&(m.j=m.j.replace(/:$/,""))}function Fl(m,N){if(N){if(N=Number(N),isNaN(N)||0>N)throw Error("Bad port number "+N);m.s=N}else m.s=null}function Vl(m,N,R){N instanceof qa?(m.i=N,Ul(m.i,m.h)):(R||(N=Bl(N,Vr)),m.i=new qa(N,m.h))}function zt(m,N,R){m.i.set(N,R)}function Ka(m){return zt(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function jo(m,N){return m?N?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Bl(m,N,R){return typeof m=="string"?(m=encodeURI(m).replace(N,_t),R&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function _t(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var rh=/[#\/\?@]/g,Eb=/[#\?:]/g,Tb=/[#\?]/g,Vr=/[#\?@]/g,Ao=/#/g;function qa(m,N){this.h=this.g=null,this.i=m||null,this.j=!!N}function fr(m){m.g||(m.g=new Map,m.h=0,m.i&&So(m.i,function(N,R){m.add(decodeURIComponent(N.replace(/\+/g," ")),R)}))}t=qa.prototype,t.add=function(m,N){fr(this),this.i=null,m=hr(this,m);var R=this.g.get(m);return R||this.g.set(m,R=[]),R.push(N),this.h+=1,this};function ih(m,N){fr(m),N=hr(m,N),m.g.has(N)&&(m.i=null,m.h-=m.g.get(N).length,m.g.delete(N))}function ah(m,N){return fr(m),N=hr(m,N),m.g.has(N)}t.forEach=function(m,N){fr(this),this.g.forEach(function(R,U){R.forEach(function(ue){m.call(N,ue,U,this)},this)},this)},t.na=function(){fr(this);const m=Array.from(this.g.values()),N=Array.from(this.g.keys()),R=[];for(let U=0;U<N.length;U++){const ue=m[U];for(let he=0;he<ue.length;he++)R.push(N[U])}return R},t.V=function(m){fr(this);let N=[];if(typeof m=="string")ah(this,m)&&(N=N.concat(this.g.get(hr(this,m))));else{m=Array.from(this.g.values());for(let R=0;R<m.length;R++)N=N.concat(m[R])}return N},t.set=function(m,N){return fr(this),this.i=null,m=hr(this,m),ah(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[N]),this.h+=1,this},t.get=function(m,N){return m?(m=this.V(m),0<m.length?String(m[0]):N):N};function An(m,N,R){ih(m,N),0<R.length&&(m.i=null,m.g.set(hr(m,N),v(R)),m.h+=R.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],N=Array.from(this.g.keys());for(var R=0;R<N.length;R++){var U=N[R];const he=encodeURIComponent(String(U)),Ie=this.V(U);for(U=0;U<Ie.length;U++){var ue=he;Ie[U]!==""&&(ue+="="+encodeURIComponent(String(Ie[U]))),m.push(ue)}}return this.i=m.join("&")};function hr(m,N){return N=String(N),m.j&&(N=N.toLowerCase()),N}function Ul(m,N){N&&!m.j&&(fr(m),m.i=null,m.g.forEach(function(R,U){var ue=U.toLowerCase();U!=ue&&(ih(this,U),An(this,ue,R))},m)),m.j=N}function Wl(m,N){const R=new Ht;if(o.Image){const U=new Image;U.onload=p(pr,R,"TestLoadImage: loaded",!0,N,U),U.onerror=p(pr,R,"TestLoadImage: error",!1,N,U),U.onabort=p(pr,R,"TestLoadImage: abort",!1,N,U),U.ontimeout=p(pr,R,"TestLoadImage: timeout",!1,N,U),o.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=m}else N(!1)}function sh(m,N){const R=new Ht,U=new AbortController,ue=setTimeout(()=>{U.abort(),pr(R,"TestPingServer: timeout",!1,N)},1e4);fetch(m,{signal:U.signal}).then(he=>{clearTimeout(ue),he.ok?pr(R,"TestPingServer: ok",!0,N):pr(R,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(ue),pr(R,"TestPingServer: error",!1,N)})}function pr(m,N,R,U,ue){try{ue&&(ue.onload=null,ue.onerror=null,ue.onabort=null,ue.ontimeout=null),U(R)}catch{}}function Cb(){this.g=new ye}function Ui(m,N,R){const U=R||"";try{wo(m,function(ue,he){let Ie=ue;u(ue)&&(Ie=ni(ue)),N.push(U+he+"="+encodeURIComponent(Ie))})}catch(ue){throw N.push(U+"type="+encodeURIComponent("_badmap")),ue}}function Po(m){this.l=m.Ub||null,this.j=m.eb||!1}y(Po,qe),Po.prototype.g=function(){return new Kl(this.l,this.j)},Po.prototype.i=function(m){return function(){return m}}({});function Kl(m,N){qt.call(this),this.D=m,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Kl,qt),t=Kl.prototype,t.open=function(m,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=N,this.readyState=1,Ps(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const N={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(N.body=m),(this.D||o).fetch(new Request(this.A,N)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ma(this)),this.readyState=0},t.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Ps(this)),this.g&&(this.readyState=3,Ps(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Au(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function Au(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}t.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var N=m.value?m.value:new Uint8Array(0);(N=this.v.decode(N,{stream:!m.done}))&&(this.response=this.responseText+=N)}m.done?ma(this):Ps(this),this.readyState==3&&Au(this)}},t.Ra=function(m){this.g&&(this.response=this.responseText=m,ma(this))},t.Qa=function(m){this.g&&(this.response=m,ma(this))},t.ga=function(){this.g&&ma(this)};function ma(m){m.readyState=4,m.l=null,m.j=null,m.v=null,Ps(m)}t.setRequestHeader=function(m,N){this.u.append(m,N)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],N=this.h.entries();for(var R=N.next();!R.done;)R=R.value,m.push(R[0]+": "+R[1]),R=N.next();return m.join(`\r
`)};function Ps(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Kl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function oh(m){let N="";return A(m,function(R,U){N+=U,N+=":",N+=R,N+=`\r
`}),N}function lh(m,N,R){e:{for(U in R){var U=!1;break e}U=!0}U||(R=oh(R),typeof m=="string"?R!=null&&encodeURIComponent(String(R)):zt(m,N,R))}function Ft(m){qt.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Ft,qt);var Nb=/^https?$/i,kb=["POST","PUT"];t=Ft.prototype,t.Ha=function(m){this.J=m},t.ea=function(m,N,R,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);N=N?N.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Bi.g(),this.v=this.o?jn(this.o):jn(Bi),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(N,String(m),!0),this.B=!1}catch(he){ql(this,he);return}if(m=R||"",R=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var ue in U)R.set(ue,U[ue]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const he of U.keys())R.set(he,U.get(he));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(R.keys()).find(he=>he.toLowerCase()=="content-type"),ue=o.FormData&&m instanceof o.FormData,!(0<=Array.prototype.indexOf.call(kb,N,void 0))||U||ue||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[he,Ie]of R)this.g.setRequestHeader(he,Ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ag(this),this.u=!0,this.g.send(m),this.u=!1}catch(he){ql(this,he)}};function ql(m,N){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=N,m.m=5,Hl(m),Eu(m)}function Hl(m){m.A||(m.A=!0,en(m,"complete"),en(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,en(this,"complete"),en(this,"abort"),Eu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Eu(this,!0)),Ft.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Pu(this):this.bb())},t.bb=function(){Pu(this)};function Pu(m){if(m.h&&typeof s<"u"&&(!m.v[1]||ga(m)!=4||m.Z()!=2)){if(m.u&&ga(m)==4)Fa(m.Ea,0,m);else if(en(m,"readystatechange"),ga(m)==4){m.h=!1;try{const Ie=m.Z();e:switch(Ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var R;if(!(R=N)){var U;if(U=Ie===0){var ue=String(m.D).match(_o)[1]||null;!ue&&o.self&&o.self.location&&(ue=o.self.location.protocol.slice(0,-1)),U=!Nb.test(ue?ue.toLowerCase():"")}R=U}if(R)en(m,"complete"),en(m,"success");else{m.m=6;try{var he=2<ga(m)?m.g.statusText:""}catch{he=""}m.l=he+" ["+m.Z()+"]",Hl(m)}}finally{Eu(m)}}}}function Eu(m,N){if(m.g){Ag(m);const R=m.g,U=m.v[0]?()=>{}:null;m.g=null,m.v=null,N||en(m,"ready");try{R.onreadystatechange=U}catch{}}}function Ag(m){m.I&&(o.clearTimeout(m.I),m.I=null)}t.isActive=function(){return!!this.g};function ga(m){return m.g?m.g.readyState:0}t.Z=function(){try{return 2<ga(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(m){if(this.g){var N=this.g.responseText;return m&&N.indexOf(m)==0&&(N=N.substring(m.length)),Be(N)}};function Tu(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function ch(m){const N={};m=(m.g&&2<=ga(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<m.length;U++){if(_(m[U]))continue;var R=M(m[U]);const ue=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const he=N[ue]||[];N[ue]=he,he.push(R)}j(N,function(U){return U.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Eo(m,N,R){return R&&R.internalChannelParams&&R.internalChannelParams[m]||N}function Gl(m){this.Aa=0,this.i=[],this.j=new Ht,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Eo("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Eo("baseRetryDelayMs",5e3,m),this.cb=Eo("retryDelaySeedMs",1e4,m),this.Wa=Eo("forwardChannelMaxRetries",2,m),this.wa=Eo("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new eh(m&&m.concurrentRequestLimit),this.Da=new Cb,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Gl.prototype,t.la=8,t.G=1,t.connect=function(m,N,R,U){fn(0),this.W=m,this.H=N||{},R&&U!==void 0&&(this.H.OSID=R,this.H.OAID=U),this.F=this.X,this.I=Iu(this,null,this.W),Cu(this)};function To(m){if(uh(m),m.G==3){var N=m.U++,R=Ai(m.I);if(zt(R,"SID",m.K),zt(R,"RID",N),zt(R,"TYPE","terminate"),Ts(m,R),N=new Ba(m,m.j,N),N.L=2,N.v=Ka(Ai(R)),R=!1,o.navigator&&o.navigator.sendBeacon)try{R=o.navigator.sendBeacon(N.v.toString(),"")}catch{}!R&&o.Image&&(new Image().src=N.v,R=!0),R||(N.g=Ga(N.j,null),N.g.ea(N.v)),N.F=Date.now(),ri(N)}Ql(m)}function Es(m){m.g&&(Cs(m),m.g.cancel(),m.g=null)}function uh(m){Es(m),m.u&&(o.clearTimeout(m.u),m.u=null),Yl(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&o.clearTimeout(m.s),m.s=null)}function Cu(m){if(!$l(m.h)&&!m.s){m.s=!0;var N=m.Ga;B||ae(),F||(B(),F=!0),q.add(N,m),m.B=0}}function Co(m,N){return th(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=N.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Tt(h(m.Ga,m,N),dh(m,m.B)),m.B++,!0)}t.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const ue=new Ba(this,this.j,m);let he=this.o;if(this.S&&(he?(he=P(he),D(he,this.S)):he=this.S),this.m!==null||this.O||(ue.H=he,he=null),this.P)e:{for(var N=0,R=0;R<this.i.length;R++){t:{var U=this.i[R];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(N+=U,4096<N){N=R;break e}if(N===4096||R===this.i.length-1){N=R+1;break e}}N=1e3}else N=1e3;N=ku(this,ue,N),R=Ai(this.I),zt(R,"RID",m),zt(R,"CVER",22),this.D&&zt(R,"X-HTTP-Session-Id",this.D),Ts(this,R),he&&(this.O?N="headers="+encodeURIComponent(String(oh(he)))+"&"+N:this.m&&lh(R,this.m,he)),ju(this.h,ue),this.Ua&&zt(R,"TYPE","init"),this.P?(zt(R,"$req",N),zt(R,"SID","null"),ue.T=!0,_u(ue,R,null)):_u(ue,R,N),this.G=2}}else this.G==3&&(m?Nu(this,m):this.i.length==0||$l(this.h)||Nu(this))};function Nu(m,N){var R;N?R=N.l:R=m.U++;const U=Ai(m.I);zt(U,"SID",m.K),zt(U,"RID",R),zt(U,"AID",m.T),Ts(m,U),m.m&&m.o&&lh(U,m.m,m.o),R=new Ba(m,m.j,R,m.B+1),m.m===null&&(R.H=m.o),N&&(m.i=N.D.concat(m.i)),N=ku(m,R,1e3),R.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),ju(m.h,R),_u(R,U,N)}function Ts(m,N){m.H&&A(m.H,function(R,U){zt(N,U,R)}),m.l&&wo({},function(R,U){zt(N,U,R)})}function ku(m,N,R){R=Math.min(m.i.length,R);var U=m.l?h(m.l.Na,m.l,m):null;e:{var ue=m.i;let he=-1;for(;;){const Ie=["count="+R];he==-1?0<R?(he=ue[0].g,Ie.push("ofs="+he)):he=0:Ie.push("ofs="+he);let It=!0;for(let Dn=0;Dn<R;Dn++){let bt=ue[Dn].g;const rr=ue[Dn].map;if(bt-=he,0>bt)he=Math.max(0,ue[Dn].g-100),It=!1;else try{Ui(rr,Ie,"req"+bt+"_")}catch{U&&U(rr)}}if(It){U=Ie.join("&");break e}}}return m=m.i.splice(0,R),N.D=m,U}function Ou(m){if(!m.g&&!m.u){m.Y=1;var N=m.Fa;B||ae(),F||(B(),F=!0),q.add(N,m),m.v=0}}function In(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Tt(h(m.Fa,m),dh(m,m.v)),m.v++,!0)}t.Fa=function(){if(this.u=null,No(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Tt(h(this.ab,this),m)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,fn(10),Es(this),No(this))};function Cs(m){m.A!=null&&(o.clearTimeout(m.A),m.A=null)}function No(m){m.g=new Ba(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var N=Ai(m.qa);zt(N,"RID","rpc"),zt(N,"SID",m.K),zt(N,"AID",m.T),zt(N,"CI",m.F?"0":"1"),!m.F&&m.ja&&zt(N,"TO",m.ja),zt(N,"TYPE","xmlhttp"),Ts(m,N),m.m&&m.o&&lh(N,m.m,m.o),m.L&&(m.g.I=m.L);var R=m.g;m=m.ia,R.L=1,R.v=Ka(Ai(N)),R.m=null,R.P=!0,Su(R,m)}t.Za=function(){this.C!=null&&(this.C=null,Es(this),In(this),fn(19))};function Yl(m){m.C!=null&&(o.clearTimeout(m.C),m.C=null)}function Xl(m,N){var R=null;if(m.g==N){Yl(m),Cs(m),m.g=null;var U=2}else if(mt(m.h,N))R=N.D,nh(m.h,N),U=1;else return;if(m.G!=0){if(N.o)if(U==1){R=N.m?N.m.length:0,N=Date.now()-N.F;var ue=m.B;U=Va(),en(U,new bs(U,R)),Cu(m)}else Ou(m);else if(ue=N.s,ue==3||ue==0&&0<N.X||!(U==1&&Co(m,N)||U==2&&In(m)))switch(R&&0<R.length&&(N=m.h,N.i=N.i.concat(R)),ue){case 1:Ha(m,5);break;case 4:Ha(m,10);break;case 3:Ha(m,6);break;default:Ha(m,2)}}}function dh(m,N){let R=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(R*=2),R*N}function Ha(m,N){if(m.j.info("Error code "+N),N==2){var R=h(m.fb,m),U=m.Xa;const ue=!U;U=new pa(U||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||As(U,"https"),Ka(U),ue?Wl(U.toString(),R):sh(U.toString(),R)}else fn(2);m.G=0,m.l&&m.l.sa(N),Ql(m),uh(m)}t.fb=function(m){m?(this.j.info("Successfully pinged google.com"),fn(2)):(this.j.info("Failed to ping google.com"),fn(1))};function Ql(m){if(m.G=0,m.ka=[],m.l){const N=zl(m.h);(N.length!=0||m.i.length!=0)&&(b(m.ka,N),b(m.ka,m.i),m.h.i.length=0,v(m.i),m.i.length=0),m.l.ra()}}function Iu(m,N,R){var U=R instanceof pa?Ai(R):new pa(R);if(U.g!="")N&&(U.g=N+"."+U.g),Fl(U,U.s);else{var ue=o.location;U=ue.protocol,N=N?N+"."+ue.hostname:ue.hostname,ue=+ue.port;var he=new pa(null);U&&As(he,U),N&&(he.g=N),ue&&Fl(he,ue),R&&(he.l=R),U=he}return R=m.D,N=m.ya,R&&N&&zt(U,R,N),zt(U,"VER",m.la),Ts(m,U),U}function Ga(m,N,R){if(N&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return N=m.Ca&&!m.pa?new Ft(new Po({eb:R})):new Ft(m.pa),N.Ha(m.J),N}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Du(){}t=Du.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ko(){}ko.prototype.g=function(m,N){return new nr(m,N)};function nr(m,N){qt.call(this),this.g=new Gl(N),this.l=m,this.h=N&&N.messageUrlParams||null,m=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(m?m["X-WebChannel-Content-Type"]=N.messageContentType:m={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.va&&(m?m["X-WebChannel-Client-Profile"]=N.va:m={"X-WebChannel-Client-Profile":N.va}),this.g.S=m,(m=N&&N.Sb)&&!_(m)&&(this.g.m=m),this.v=N&&N.supportsCrossDomainXhr||!1,this.u=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!_(N)&&(this.g.D=N,m=this.h,m!==null&&N in m&&(m=this.h,N in m&&delete m[N])),this.j=new Oo(this)}y(nr,qt),nr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nr.prototype.close=function(){To(this.g)},nr.prototype.o=function(m){var N=this.g;if(typeof m=="string"){var R={};R.__data__=m,m=R}else this.u&&(R={},R.__data__=ni(m),m=R);N.i.push(new js(N.Ya++,m)),N.G==3&&Cu(N)},nr.prototype.N=function(){this.g.l=null,delete this.j,To(this.g),delete this.g,nr.aa.N.call(this)};function Mu(m){Bn.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var N=m.__sm__;if(N){e:{for(const R in N){m=R;break e}m=void 0}(this.i=m)&&(m=this.i,N=N!==null&&m in N?N[m]:void 0),this.data=N}else this.data=m}y(Mu,Bn);function fh(){yt.call(this),this.status=1}y(fh,yt);function Oo(m){this.g=m}y(Oo,Du),Oo.prototype.ua=function(){en(this.g,"a")},Oo.prototype.ta=function(m){en(this.g,new Mu(m))},Oo.prototype.sa=function(m){en(this.g,new fh)},Oo.prototype.ra=function(){en(this.g,"b")},ko.prototype.createWebChannel=ko.prototype.g,nr.prototype.send=nr.prototype.o,nr.prototype.open=nr.prototype.m,nr.prototype.close=nr.prototype.close,B5=function(){return new ko},V5=function(){return Va()},F5=On,v_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ji.NO_ERROR=0,ji.TIMEOUT=8,ji.HTTP_ERROR=6,Ov=ji,ws.COMPLETE="complete",z5=ws,Ne.EventType=ut,ut.OPEN="a",ut.CLOSE="b",ut.ERROR="c",ut.MESSAGE="d",qt.prototype.listen=qt.prototype.K,Fh=Ne,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,$5=Ft}).apply(typeof Hg<"u"?Hg:typeof self<"u"?self:typeof window<"u"?window:{});const dC="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}oi.UNAUTHENTICATED=new oi(null),oi.GOOGLE_CREDENTIALS=new oi("google-credentials-uid"),oi.FIRST_PARTY=new oi("first-party-uid"),oi.MOCK_USER=new oi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nf="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc=new Ej("@firebase/firestore");function _h(){return Vc.logLevel}function Ue(t,...e){if(Vc.logLevel<=wt.DEBUG){const n=e.map(Ij);Vc.debug(`Firestore (${Nf}): ${t}`,...n)}}function eo(t,...e){if(Vc.logLevel<=wt.ERROR){const n=e.map(Ij);Vc.error(`Firestore (${Nf}): ${t}`,...n)}}function Bp(t,...e){if(Vc.logLevel<=wt.WARN){const n=e.map(Ij);Vc.warn(`Firestore (${Nf}): ${t}`,...n)}}function Ij(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(t="Unexpected state"){const e=`FIRESTORE (${Nf}) INTERNAL ASSERTION FAILED: `+t;throw eo(e),new Error(e)}function Lt(t,e){t||rt()}function ct(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ze extends uo{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YW{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XW{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(oi.UNAUTHENTICATED))}shutdown(){}}class QW{constructor(e){this.t=e,this.currentUser=oi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Lt(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let a=new dl;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new dl,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},o=c=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>o(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new dl)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Lt(typeof r.accessToken=="string"),new YW(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Lt(e===null||typeof e=="string"),new oi(e)}}class JW{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=oi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ZW{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new JW(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(oi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class eK{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tK{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Lt(this.o===void 0);const r=a=>{a.error!=null&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.R;return this.R=a.token,Ue("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Lt(typeof n.token=="string"),this.R=n.token,new eK(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nK(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=nK(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%e.length))}return r}}function Ct(t,e){return t<e?-1:t>e?1:0}function zd(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ze(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ze(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ze(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ze(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Jn.fromMillis(Date.now())}static fromDate(e){return Jn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Jn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ct(this.nanoseconds,e.nanoseconds):Ct(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new lt(e)}static min(){return new lt(new Jn(0,0))}static max(){return new lt(new Jn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e,n,r){n===void 0?n=0:n>e.length&&rt(),r===void 0?r=e.length-n:r>e.length-n&&rt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Up.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Up?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=e.get(i),s=n.get(i);if(a<s)return-1;if(a>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class an extends Up{construct(e,n,r){return new an(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ze(be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new an(n)}static emptyPath(){return new an([])}}const rK=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class br extends Up{construct(e,n,r){return new br(e,n,r)}static isValidIdentifier(e){return rK.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),br.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new br(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new ze(be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new ze(be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ze(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else o==="`"?(s=!s,i++):o!=="."||s?(r+=o,i++):(a(),i++)}if(a(),s)throw new ze(be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new br(n)}static emptyPath(){return new br([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e){this.path=e}static fromPath(e){return new He(an.fromString(e))}static fromName(e){return new He(an.fromString(e).popFirst(5))}static empty(){return new He(an.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&an.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return an.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new He(new an(e.slice()))}}function iK(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=lt.fromTimestamp(r===1e9?new Jn(n+1,0):new Jn(n,r));return new gl(i,He.empty(),e)}function aK(t){return new gl(t.readTime,t.key,-1)}class gl{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new gl(lt.min(),He.empty(),-1)}static max(){return new gl(lt.max(),He.empty(),-1)}}function sK(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=He.comparator(t.documentKey,e.documentKey),n!==0?n:Ct(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oK="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lK{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qm(t){if(t.code!==be.FAILED_PRECONDITION||t.message!==oK)throw t;Ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new _e((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof _e?n:_e.resolve(n)}catch(n){return _e.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):_e.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):_e.reject(n)}static resolve(e){return new _e((n,r)=>{n(e)})}static reject(e){return new _e((n,r)=>{r(e)})}static waitFor(e){return new _e((n,r)=>{let i=0,a=0,s=!1;e.forEach(o=>{++i,o.next(()=>{++a,s&&a===i&&n()},c=>r(c))}),s=!0,a===i&&n()})}static or(e){let n=_e.resolve(!1);for(const r of e)n=n.next(i=>i?_e.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,a)=>{r.push(n.call(this,i,a))}),this.waitFor(r)}static mapArray(e,n){return new _e((r,i)=>{const a=e.length,s=new Array(a);let o=0;for(let c=0;c<a;c++){const u=c;n(e[u]).next(d=>{s[u]=d,++o,o===a&&r(s)},d=>i(d))}})}static doWhile(e,n){return new _e((r,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):r()};a()})}}function cK(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Hm(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Dj.oe=-1;function rx(t){return t==null}function gy(t){return t===0&&1/t==-1/0}function uK(t){return typeof t=="number"&&Number.isInteger(t)&&!gy(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ou(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function W5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,n){this.comparator=e,this.root=n||xr.EMPTY}insert(e,n){return new vn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xr.BLACK,null,null))}remove(e){return new vn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gg(this.root,e,this.comparator,!0)}}class Gg{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xr{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??xr.RED,this.left=i??xr.EMPTY,this.right=a??xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new xr(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return xr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return xr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rt();const e=this.left.check();if(e!==this.right.check())throw rt();return e+(this.isRed()?0:1)}}xr.EMPTY=null,xr.RED=!0,xr.BLACK=!1;xr.EMPTY=new class{constructor(){this.size=0}get key(){throw rt()}get value(){throw rt()}get color(){throw rt()}get left(){throw rt()}get right(){throw rt()}copy(e,n,r,i,a){return this}insert(e,n,r){return new xr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this.comparator=e,this.data=new vn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new hC(this.data.getIterator())}getIteratorFrom(e){return new hC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Sr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Sr(this.comparator);return n.data=e,n}}class hC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e){this.fields=e,e.sort(br.comparator)}static empty(){return new Oi([])}unionWith(e){let n=new Sr(br.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Oi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zd(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new K5("Invalid base64 string: "+a):a}}(e);return new Ar(n)}static fromUint8Array(e){const n=function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a}(e);return new Ar(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ct(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ar.EMPTY_BYTE_STRING=new Ar("");const dK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vl(t){if(Lt(!!t),typeof t=="string"){let e=0;const n=dK.exec(t);if(Lt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tn(t.seconds),nanos:Tn(t.nanos)}}function Tn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Bc(t){return typeof t=="string"?Ar.fromBase64String(t):Ar.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mj(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Rj(t){const e=t.mapValue.fields.__previous_value__;return Mj(e)?Rj(e):e}function Wp(t){const e=vl(t.mapValue.fields.__local_write_time__.timestampValue);return new Jn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fK{constructor(e,n,r,i,a,s,o,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u}}class Kp{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Kp("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Kp&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg={mapValue:{}};function Uc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Mj(t)?4:pK(t)?9007199254740991:hK(t)?10:11:rt()}function hs(t,e){if(t===e)return!0;const n=Uc(t);if(n!==Uc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wp(t).isEqual(Wp(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=vl(i.timestampValue),o=vl(a.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return Bc(i.bytesValue).isEqual(Bc(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return Tn(i.geoPointValue.latitude)===Tn(a.geoPointValue.latitude)&&Tn(i.geoPointValue.longitude)===Tn(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return Tn(i.integerValue)===Tn(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=Tn(i.doubleValue),o=Tn(a.doubleValue);return s===o?gy(s)===gy(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return zd(t.arrayValue.values||[],e.arrayValue.values||[],hs);case 10:case 11:return function(i,a){const s=i.mapValue.fields||{},o=a.mapValue.fields||{};if(fC(s)!==fC(o))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(o[c]===void 0||!hs(s[c],o[c])))return!1;return!0}(t,e);default:return rt()}}function qp(t,e){return(t.values||[]).find(n=>hs(n,e))!==void 0}function Fd(t,e){if(t===e)return 0;const n=Uc(t),r=Uc(e);if(n!==r)return Ct(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ct(t.booleanValue,e.booleanValue);case 2:return function(a,s){const o=Tn(a.integerValue||a.doubleValue),c=Tn(s.integerValue||s.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1}(t,e);case 3:return pC(t.timestampValue,e.timestampValue);case 4:return pC(Wp(t),Wp(e));case 5:return Ct(t.stringValue,e.stringValue);case 6:return function(a,s){const o=Bc(a),c=Bc(s);return o.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(a,s){const o=a.split("/"),c=s.split("/");for(let u=0;u<o.length&&u<c.length;u++){const d=Ct(o[u],c[u]);if(d!==0)return d}return Ct(o.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,s){const o=Ct(Tn(a.latitude),Tn(s.latitude));return o!==0?o:Ct(Tn(a.longitude),Tn(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return mC(t.arrayValue,e.arrayValue);case 10:return function(a,s){var o,c,u,d;const f=a.fields||{},h=s.fields||{},p=(o=f.value)===null||o===void 0?void 0:o.arrayValue,y=(c=h.value)===null||c===void 0?void 0:c.arrayValue,v=Ct(((u=p==null?void 0:p.values)===null||u===void 0?void 0:u.length)||0,((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0);return v!==0?v:mC(p,y)}(t.mapValue,e.mapValue);case 11:return function(a,s){if(a===Yg.mapValue&&s===Yg.mapValue)return 0;if(a===Yg.mapValue)return 1;if(s===Yg.mapValue)return-1;const o=a.fields||{},c=Object.keys(o),u=s.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const h=Ct(c[f],d[f]);if(h!==0)return h;const p=Fd(o[c[f]],u[d[f]]);if(p!==0)return p}return Ct(c.length,d.length)}(t.mapValue,e.mapValue);default:throw rt()}}function pC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ct(t,e);const n=vl(t),r=vl(e),i=Ct(n.seconds,r.seconds);return i!==0?i:Ct(n.nanos,r.nanos)}function mC(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=Fd(n[i],r[i]);if(a)return a}return Ct(n.length,r.length)}function Vd(t){return y_(t)}function y_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=vl(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Bc(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return He.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=y_(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const s of r)a?a=!1:i+=",",i+=`${s}:${y_(n.fields[s])}`;return i+"}"}(t.mapValue):rt()}function gC(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function x_(t){return!!t&&"integerValue"in t}function Lj(t){return!!t&&"arrayValue"in t}function vC(t){return!!t&&"nullValue"in t}function yC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Iv(t){return!!t&&"mapValue"in t}function hK(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ip(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ou(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ip(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ip(t.arrayValue.values[n]);return e}return Object.assign({},t)}function pK(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this.value=e}static empty(){return new ci({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Iv(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ip(n)}setAll(e){let n=br.emptyPath(),r={},i=[];e.forEach((s,o)=>{if(!n.isImmediateParentOf(o)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=o.popLast()}s?r[o.lastSegment()]=ip(s):i.push(o.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());Iv(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return hs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Iv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ou(n,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new ci(ip(this.value))}}function q5(t){const e=[];return ou(t.fields,(n,r)=>{const i=new br([n]);if(Iv(r)){const a=q5(r.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)}),new Oi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,n,r,i,a,s,o){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Mr(e,0,lt.min(),lt.min(),lt.min(),ci.empty(),0)}static newFoundDocument(e,n,r,i){return new Mr(e,1,n,lt.min(),r,i,0)}static newNoDocument(e,n){return new Mr(e,2,n,lt.min(),lt.min(),ci.empty(),0)}static newUnknownDocument(e,n){return new Mr(e,3,n,lt.min(),lt.min(),ci.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(lt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ci.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ci.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=lt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Mr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,n){this.position=e,this.inclusive=n}}function xC(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],s=t.position[i];if(a.field.isKeyField()?r=He.comparator(He.fromName(s.referenceValue),n.key):r=Fd(s,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function bC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!hs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e,n="asc"){this.field=e,this.dir=n}}function mK(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H5{}class $n extends H5{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new vK(e,n,r):n==="array-contains"?new bK(e,r):n==="in"?new wK(e,r):n==="not-in"?new _K(e,r):n==="array-contains-any"?new SK(e,r):new $n(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new yK(e,r):new xK(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Fd(n,this.value)):n!==null&&Uc(this.value)===Uc(n)&&this.matchesComparison(Fd(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return rt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ka extends H5{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ka(e,n)}matches(e){return G5(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function G5(t){return t.op==="and"}function Y5(t){return gK(t)&&G5(t)}function gK(t){for(const e of t.filters)if(e instanceof ka)return!1;return!0}function b_(t){if(t instanceof $n)return t.field.canonicalString()+t.op.toString()+Vd(t.value);if(Y5(t))return t.filters.map(e=>b_(e)).join(",");{const e=t.filters.map(n=>b_(n)).join(",");return`${t.op}(${e})`}}function X5(t,e){return t instanceof $n?function(r,i){return i instanceof $n&&r.op===i.op&&r.field.isEqual(i.field)&&hs(r.value,i.value)}(t,e):t instanceof ka?function(r,i){return i instanceof ka&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,s,o)=>a&&X5(s,i.filters[o]),!0):!1}(t,e):void rt()}function Q5(t){return t instanceof $n?function(n){return`${n.field.canonicalString()} ${n.op} ${Vd(n.value)}`}(t):t instanceof ka?function(n){return n.op.toString()+" {"+n.getFilters().map(Q5).join(" ,")+"}"}(t):"Filter"}class vK extends $n{constructor(e,n,r){super(e,n,r),this.key=He.fromName(r.referenceValue)}matches(e){const n=He.comparator(e.key,this.key);return this.matchesComparison(n)}}class yK extends $n{constructor(e,n){super(e,"in",n),this.keys=J5("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class xK extends $n{constructor(e,n){super(e,"not-in",n),this.keys=J5("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function J5(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>He.fromName(r.referenceValue))}class bK extends $n{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Lj(n)&&qp(n.arrayValue,this.value)}}class wK extends $n{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&qp(this.value.arrayValue,n)}}class _K extends $n{constructor(e,n){super(e,"not-in",n)}matches(e){if(qp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!qp(this.value.arrayValue,n)}}class SK extends $n{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Lj(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>qp(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jK{constructor(e,n=null,r=[],i=[],a=null,s=null,o=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=s,this.endAt=o,this.ue=null}}function wC(t,e=null,n=[],r=[],i=null,a=null,s=null){return new jK(t,e,n,r,i,a,s)}function $j(t){const e=ct(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>b_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),rx(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Vd(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Vd(r)).join(",")),e.ue=n}return e.ue}function zj(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!mK(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!X5(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!bC(t.startAt,e.startAt)&&bC(t.endAt,e.endAt)}function w_(t){return He.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,n=null,r=[],i=[],a=null,s="F",o=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=s,this.startAt=o,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function AK(t,e,n,r,i,a,s,o){return new Gm(t,e,n,r,i,a,s,o)}function ix(t){return new Gm(t)}function _C(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Z5(t){return t.collectionGroup!==null}function ap(t){const e=ct(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let o=new Sr(br.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new yy(a,r))}),n.has(br.keyField().canonicalString())||e.ce.push(new yy(br.keyField(),r))}return e.ce}function ss(t){const e=ct(t);return e.le||(e.le=PK(e,ap(t))),e.le}function PK(t,e){if(t.limitType==="F")return wC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new yy(i.field,a)});const n=t.endAt?new vy(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new vy(t.startAt.position,t.startAt.inclusive):null;return wC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function __(t,e){const n=t.filters.concat([e]);return new Gm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function S_(t,e,n){return new Gm(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ax(t,e){return zj(ss(t),ss(e))&&t.limitType===e.limitType}function e3(t){return`${$j(ss(t))}|lt:${t.limitType}`}function Ku(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Q5(i)).join(", ")}]`),rx(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Vd(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Vd(i)).join(",")),`Target(${r})`}(ss(t))}; limitType=${t.limitType})`}function sx(t,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):He.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,i){for(const a of ap(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,o,c){const u=xC(s,o,c);return s.inclusive?u<=0:u<0}(r.startAt,ap(r),i)||r.endAt&&!function(s,o,c){const u=xC(s,o,c);return s.inclusive?u>=0:u>0}(r.endAt,ap(r),i))}(t,e)}function EK(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function t3(t){return(e,n)=>{let r=!1;for(const i of ap(t)){const a=TK(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function TK(t,e,n){const r=t.field.isKeyField()?He.comparator(e.key,n.key):function(a,s,o){const c=s.data.field(a),u=o.data.field(a);return c!==null&&u!==null?Fd(c,u):rt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return rt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ou(this.inner,(n,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return W5(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CK=new vn(He.comparator);function to(){return CK}const n3=new vn(He.comparator);function Vh(...t){let e=n3;for(const n of t)e=e.insert(n.key,n);return e}function r3(t){let e=n3;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function xc(){return sp()}function i3(){return sp()}function sp(){return new kf(t=>t.toString(),(t,e)=>t.isEqual(e))}const NK=new vn(He.comparator),kK=new Sr(He.comparator);function xt(...t){let e=kK;for(const n of t)e=e.add(n);return e}const OK=new Sr(Ct);function IK(){return OK}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gy(e)?"-0":e}}function a3(t){return{integerValue:""+t}}function DK(t,e){return uK(e)?a3(e):Fj(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(){this._=void 0}}function MK(t,e,n){return t instanceof xy?function(i,a){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Mj(a)&&(a=Rj(a)),a&&(s.fields.__previous_value__=a),{mapValue:s}}(n,e):t instanceof Hp?o3(t,e):t instanceof Gp?l3(t,e):function(i,a){const s=s3(i,a),o=SC(s)+SC(i.Pe);return x_(s)&&x_(i.Pe)?a3(o):Fj(i.serializer,o)}(t,e)}function RK(t,e,n){return t instanceof Hp?o3(t,e):t instanceof Gp?l3(t,e):n}function s3(t,e){return t instanceof by?function(r){return x_(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class xy extends ox{}class Hp extends ox{constructor(e){super(),this.elements=e}}function o3(t,e){const n=c3(e);for(const r of t.elements)n.some(i=>hs(i,r))||n.push(r);return{arrayValue:{values:n}}}class Gp extends ox{constructor(e){super(),this.elements=e}}function l3(t,e){let n=c3(e);for(const r of t.elements)n=n.filter(i=>!hs(i,r));return{arrayValue:{values:n}}}class by extends ox{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function SC(t){return Tn(t.integerValue||t.doubleValue)}function c3(t){return Lj(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function LK(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Hp&&i instanceof Hp||r instanceof Gp&&i instanceof Gp?zd(r.elements,i.elements,hs):r instanceof by&&i instanceof by?hs(r.Pe,i.Pe):r instanceof xy&&i instanceof xy}(t.transform,e.transform)}class $K{constructor(e,n){this.version=e,this.transformResults=n}}class Yr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Yr}static exists(e){return new Yr(void 0,e)}static updateTime(e){return new Yr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Dv(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class lx{}function u3(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new cx(t.key,Yr.none()):new Ym(t.key,t.data,Yr.none());{const n=t.data,r=ci.empty();let i=new Sr(br.comparator);for(let a of e.fields)if(!i.has(a)){let s=n.field(a);s===null&&a.length>1&&(a=a.popLast(),s=n.field(a)),s===null?r.delete(a):r.set(a,s),i=i.add(a)}return new jl(t.key,r,new Oi(i.toArray()),Yr.none())}}function zK(t,e,n){t instanceof Ym?function(i,a,s){const o=i.value.clone(),c=AC(i.fieldTransforms,a,s.transformResults);o.setAll(c),a.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof jl?function(i,a,s){if(!Dv(i.precondition,a))return void a.convertToUnknownDocument(s.version);const o=AC(i.fieldTransforms,a,s.transformResults),c=a.data;c.setAll(d3(i)),c.setAll(o),a.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function op(t,e,n,r){return t instanceof Ym?function(a,s,o,c){if(!Dv(a.precondition,s))return o;const u=a.value.clone(),d=PC(a.fieldTransforms,c,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof jl?function(a,s,o,c){if(!Dv(a.precondition,s))return o;const u=PC(a.fieldTransforms,c,s),d=s.data;return d.setAll(d3(a)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(a,s,o){return Dv(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function FK(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=s3(r.transform,i||null);a!=null&&(n===null&&(n=ci.empty()),n.set(r.field,a))}return n||null}function jC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&zd(r,i,(a,s)=>LK(a,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ym extends lx{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class jl extends lx{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function d3(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function AC(t,e,n){const r=new Map;Lt(t.length===n.length);for(let i=0;i<n.length;i++){const a=t[i],s=a.transform,o=e.data.field(a.field);r.set(a.field,RK(s,o,n[i]))}return r}function PC(t,e,n){const r=new Map;for(const i of t){const a=i.transform,s=n.data.field(i.field);r.set(i.field,MK(a,s,e))}return r}class cx extends lx{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VK extends lx{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BK{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&zK(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=op(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=op(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=i3();return this.mutations.forEach(i=>{const a=e.get(i.key),s=a.overlayedDocument;let o=this.applyToLocalView(s,a.mutatedFields);o=n.has(i.key)?null:o;const c=u3(s,o);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(lt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),xt())}isEqual(e){return this.batchId===e.batchId&&zd(this.mutations,e.mutations,(n,r)=>jC(n,r))&&zd(this.baseMutations,e.baseMutations,(n,r)=>jC(n,r))}}class Vj{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Lt(e.mutations.length===r.length);let i=function(){return NK}();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new Vj(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UK{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WK{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mn,jt;function KK(t){switch(t){default:return rt();case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0}}function f3(t){if(t===void 0)return eo("GRPC error has no .code"),be.UNKNOWN;switch(t){case Mn.OK:return be.OK;case Mn.CANCELLED:return be.CANCELLED;case Mn.UNKNOWN:return be.UNKNOWN;case Mn.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case Mn.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case Mn.INTERNAL:return be.INTERNAL;case Mn.UNAVAILABLE:return be.UNAVAILABLE;case Mn.UNAUTHENTICATED:return be.UNAUTHENTICATED;case Mn.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case Mn.NOT_FOUND:return be.NOT_FOUND;case Mn.ALREADY_EXISTS:return be.ALREADY_EXISTS;case Mn.PERMISSION_DENIED:return be.PERMISSION_DENIED;case Mn.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case Mn.ABORTED:return be.ABORTED;case Mn.OUT_OF_RANGE:return be.OUT_OF_RANGE;case Mn.UNIMPLEMENTED:return be.UNIMPLEMENTED;case Mn.DATA_LOSS:return be.DATA_LOSS;default:return rt()}}(jt=Mn||(Mn={}))[jt.OK=0]="OK",jt[jt.CANCELLED=1]="CANCELLED",jt[jt.UNKNOWN=2]="UNKNOWN",jt[jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jt[jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jt[jt.NOT_FOUND=5]="NOT_FOUND",jt[jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",jt[jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",jt[jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",jt[jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jt[jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jt[jt.ABORTED=10]="ABORTED",jt[jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",jt[jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",jt[jt.INTERNAL=13]="INTERNAL",jt[jt.UNAVAILABLE=14]="UNAVAILABLE",jt[jt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qK(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HK=new Nc([4294967295,4294967295],0);function EC(t){const e=qK().encode(t),n=new L5;return n.update(e),new Uint8Array(n.digest())}function TC(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Nc([n,r],0),new Nc([i,a],0)]}class Bj{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Bh(`Invalid padding: ${n}`);if(r<0)throw new Bh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Bh(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Nc.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Nc.fromNumber(r)));return i.compare(HK)===1&&(i=new Nc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=EC(e),[r,i]=TC(n);for(let a=0;a<this.hashCount;a++){const s=this.Ee(r,i,a);if(!this.de(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new Bj(a,i,n);return r.forEach(o=>s.insert(o)),s}insert(e){if(this.Ie===0)return;const n=EC(e),[r,i]=TC(n);for(let a=0;a<this.hashCount;a++){const s=this.Ee(r,i,a);this.Ae(s)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Bh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Xm.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ux(lt.min(),i,new vn(Ct),to(),xt())}}class Xm{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Xm(r,n,xt(),xt(),xt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class h3{constructor(e,n){this.targetId=e,this.me=n}}class p3{constructor(e,n,r=Ar.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class CC{constructor(){this.fe=0,this.ge=kC(),this.pe=Ar.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=xt(),n=xt(),r=xt();return this.ge.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:rt()}}),new Xm(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=kC()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Lt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class GK{constructor(e){this.Le=e,this.Be=new Map,this.ke=to(),this.qe=NC(),this.Qe=new vn(Ct)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:rt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const a=i.target;if(w_(a))if(r===0){const s=new He(a.path);this.Ue(n,s,Mr.newNoDocument(s,lt.min()))}else Lt(r===1);else{const s=this.Ye(n);if(s!==r){const o=this.Ze(e),c=o?this.Xe(o,e,s):1;if(c!==0){this.je(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let s,o;try{s=Bc(r).toUint8Array()}catch(c){if(c instanceof K5)return Bp("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new Bj(s,i,a)}catch(c){return Bp(c instanceof Bh?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.Ie===0?null:o}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(a=>{const s=this.Le.tt(),o=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.Ue(n,a,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((a,s)=>{const o=this.Je(s);if(o){if(a.current&&w_(o.target)){const c=new He(o.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,Mr.newNoDocument(c,e))}a.be&&(n.set(s,a.ve()),a.Ce())}});let r=xt();this.qe.forEach((a,s)=>{let o=!0;s.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(a))}),this.ke.forEach((a,s)=>s.setReadTime(e));const i=new ux(e,n,this.Qe,this.ke,r);return this.ke=to(),this.qe=NC(),this.Qe=new vn(Ct),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new CC,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Sr(Ct),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Ue("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new CC),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function NC(){return new vn(He.comparator)}function kC(){return new vn(He.comparator)}const YK={asc:"ASCENDING",desc:"DESCENDING"},XK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QK={and:"AND",or:"OR"};class JK{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function j_(t,e){return t.useProto3Json||rx(e)?e:{value:e}}function wy(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function m3(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ZK(t,e){return wy(t,e.toTimestamp())}function os(t){return Lt(!!t),lt.fromTimestamp(function(n){const r=vl(n);return new Jn(r.seconds,r.nanos)}(t))}function Uj(t,e){return A_(t,e).canonicalString()}function A_(t,e){const n=function(i){return new an(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function g3(t){const e=an.fromString(t);return Lt(w3(e)),e}function P_(t,e){return Uj(t.databaseId,e.path)}function pw(t,e){const n=g3(e);if(n.get(1)!==t.databaseId.projectId)throw new ze(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ze(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new He(y3(n))}function v3(t,e){return Uj(t.databaseId,e)}function eq(t){const e=g3(t);return e.length===4?an.emptyPath():y3(e)}function E_(t){return new an(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function y3(t){return Lt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function OC(t,e,n){return{name:P_(t,e),fields:n.value.mapValue.fields}}function tq(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:rt()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(u,d){return u.useProto3Json?(Lt(d===void 0||typeof d=="string"),Ar.fromBase64String(d||"")):(Lt(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Ar.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,o=s&&function(u){const d=u.code===void 0?be.UNKNOWN:f3(u.code);return new ze(d,u.message||"")}(s);n=new p3(r,i,a,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=pw(t,r.document.name),a=os(r.document.updateTime),s=r.document.createTime?os(r.document.createTime):lt.min(),o=new ci({mapValue:{fields:r.document.fields}}),c=Mr.newFoundDocument(i,a,s,o),u=r.targetIds||[],d=r.removedTargetIds||[];n=new Mv(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=pw(t,r.document),a=r.readTime?os(r.readTime):lt.min(),s=Mr.newNoDocument(i,a),o=r.removedTargetIds||[];n=new Mv([],o,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=pw(t,r.document),a=r.removedTargetIds||[];n=new Mv([],a,i,null)}else{if(!("filter"in e))return rt();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,s=new WK(i,a),o=r.targetId;n=new h3(o,s)}}return n}function nq(t,e){let n;if(e instanceof Ym)n={update:OC(t,e.key,e.value)};else if(e instanceof cx)n={delete:P_(t,e.key)};else if(e instanceof jl)n={update:OC(t,e.key,e.data),updateMask:dq(e.fieldMask)};else{if(!(e instanceof VK))return rt();n={verify:P_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,s){const o=s.transform;if(o instanceof xy)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Hp)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Gp)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof by)return{fieldPath:s.field.canonicalString(),increment:o.Pe};throw rt()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:ZK(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:rt()}(t,e.precondition)),n}function rq(t,e){return t&&t.length>0?(Lt(e!==void 0),t.map(n=>function(i,a){let s=i.updateTime?os(i.updateTime):os(a);return s.isEqual(lt.min())&&(s=os(a)),new $K(s,i.transformResults||[])}(n,e))):[]}function iq(t,e){return{documents:[v3(t,e.path)]}}function aq(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=v3(t,i);const a=function(u){if(u.length!==0)return b3(ka.create(u,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const s=function(u){if(u.length!==0)return u.map(d=>function(h){return{field:qu(h.field),direction:lq(h.dir)}}(d))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=j_(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function sq(t){let e=eq(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Lt(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let a=[];n.where&&(a=function(f){const h=x3(f);return h instanceof ka&&Y5(h)?h.getFilters():[h]}(n.where));let s=[];n.orderBy&&(s=function(f){return f.map(h=>function(y){return new yy(Hu(y.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(h))}(n.orderBy));let o=null;n.limit&&(o=function(f){let h;return h=typeof f=="object"?f.value:f,rx(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(f){const h=!!f.before,p=f.values||[];return new vy(p,h)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const h=!f.before,p=f.values||[];return new vy(p,h)}(n.endAt)),AK(e,i,s,a,o,"F",c,u)}function oq(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return rt()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function x3(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Hu(n.unaryFilter.field);return $n.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Hu(n.unaryFilter.field);return $n.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Hu(n.unaryFilter.field);return $n.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Hu(n.unaryFilter.field);return $n.create(s,"!=",{nullValue:"NULL_VALUE"});default:return rt()}}(t):t.fieldFilter!==void 0?function(n){return $n.create(Hu(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rt()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ka.create(n.compositeFilter.filters.map(r=>x3(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return rt()}}(n.compositeFilter.op))}(t):rt()}function lq(t){return YK[t]}function cq(t){return XK[t]}function uq(t){return QK[t]}function qu(t){return{fieldPath:t.canonicalString()}}function Hu(t){return br.fromServerFormat(t.fieldPath)}function b3(t){return t instanceof $n?function(n){if(n.op==="=="){if(yC(n.value))return{unaryFilter:{field:qu(n.field),op:"IS_NAN"}};if(vC(n.value))return{unaryFilter:{field:qu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(yC(n.value))return{unaryFilter:{field:qu(n.field),op:"IS_NOT_NAN"}};if(vC(n.value))return{unaryFilter:{field:qu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qu(n.field),op:cq(n.op),value:n.value}}}(t):t instanceof ka?function(n){const r=n.getFilters().map(i=>b3(i));return r.length===1?r[0]:{compositeFilter:{op:uq(n.op),filters:r}}}(t):rt()}function dq(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function w3(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,n,r,i,a=lt.min(),s=lt.min(),o=Ar.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new Jo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Jo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fq{constructor(e){this.ct=e}}function hq(t){const e=sq({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?S_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pq{constructor(){this.un=new mq}addToCollectionParentIndex(e,n){return this.un.add(n),_e.resolve()}getCollectionParents(e,n){return _e.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return _e.resolve()}deleteFieldIndex(e,n){return _e.resolve()}deleteAllFieldIndexes(e){return _e.resolve()}createTargetIndexes(e,n){return _e.resolve()}getDocumentsMatchingTarget(e,n){return _e.resolve(null)}getIndexType(e,n){return _e.resolve(0)}getFieldIndexes(e,n){return _e.resolve([])}getNextCollectionGroupToUpdate(e){return _e.resolve(null)}getMinOffset(e,n){return _e.resolve(gl.min())}getMinOffsetFromCollectionGroup(e,n){return _e.resolve(gl.min())}updateCollectionGroup(e,n,r){return _e.resolve()}updateIndexEntries(e,n){return _e.resolve()}}class mq{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Sr(an.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Sr(an.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Bd(0)}static kn(){return new Bd(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gq{constructor(){this.changes=new kf(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Mr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?_e.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vq{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yq{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&op(r.mutation,i,Oi.empty(),Jn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,xt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=xt()){const i=xc();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(a=>{let s=Vh();return a.forEach((o,c)=>{s=s.insert(o,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=xc();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,xt()))}populateOverlays(e,n,r){const i=[];return r.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((s,o)=>{n.set(s,o)})})}computeViews(e,n,r,i){let a=to();const s=sp(),o=function(){return sp()}();return n.forEach((c,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof jl)?a=a.insert(u.key,u):d!==void 0?(s.set(u.key,d.mutation.getFieldMask()),op(d.mutation,u,d.mutation.getFieldMask(),Jn.now())):s.set(u.key,Oi.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((u,d)=>s.set(u,d)),n.forEach((u,d)=>{var f;return o.set(u,new vq(d,(f=s.get(u))!==null&&f!==void 0?f:null))}),o))}recalculateAndSaveOverlays(e,n){const r=sp();let i=new vn((s,o)=>s-o),a=xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const o of s)o.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let d=r.get(c)||Oi.empty();d=o.applyToLocalView(u,d),r.set(c,d);const f=(i.get(o.batchId)||xt()).add(c);i=i.insert(o.batchId,f)})}).next(()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,d=c.value,f=i3();d.forEach(h=>{if(!a.has(h)){const p=u3(n.get(h),r.get(h));p!==null&&f.set(h,p),a=a.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,f))}return _e.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return He.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Z5(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):_e.resolve(xc());let o=-1,c=a;return s.next(u=>_e.forEach(u,(d,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),a.get(d)?_e.resolve():this.remoteDocumentCache.getEntry(e,d).next(h=>{c=c.insert(d,h)}))).next(()=>this.populateOverlays(e,u,a)).next(()=>this.computeViews(e,c,u,xt())).next(d=>({batchId:o,changes:r3(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new He(n)).next(r=>{let i=Vh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let s=Vh();return this.indexManager.getCollectionParents(e,a).next(o=>_e.forEach(o,c=>{const u=function(f,h){return new Gm(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,h)=>{s=s.insert(f,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i))).next(s=>{a.forEach((c,u)=>{const d=u.getKey();s.get(d)===null&&(s=s.insert(d,Mr.newInvalidDocument(d)))});let o=Vh();return s.forEach((c,u)=>{const d=a.get(c);d!==void 0&&op(d.mutation,u,Oi.empty(),Jn.now()),sx(n,u)&&(o=o.insert(c,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xq{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return _e.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:os(i.createTime)}}(n)),_e.resolve()}getNamedQuery(e,n){return _e.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:hq(i.bundledQuery),readTime:os(i.readTime)}}(n)),_e.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bq{constructor(){this.overlays=new vn(He.comparator),this.Ir=new Map}getOverlay(e,n){return _e.resolve(this.overlays.get(n))}getOverlays(e,n){const r=xc();return _e.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,a)=>{this.ht(e,n,a)}),_e.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(r)),_e.resolve()}getOverlaysForCollection(e,n,r){const i=xc(),a=n.length+1,s=new He(n.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return _e.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new vn((u,d)=>u-d);const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=a.get(u.largestBatchId);d===null&&(d=xc(),a=a.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=xc(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>o.set(u,d)),!(o.size()>=i)););return _e.resolve(o)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new UK(n,r));let a=this.Ir.get(n);a===void 0&&(a=xt(),this.Ir.set(n,a)),this.Ir.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wq{constructor(){this.sessionToken=Ar.EMPTY_BYTE_STRING}getSessionToken(e){return _e.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,_e.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(){this.Tr=new Sr(ir.Er),this.dr=new Sr(ir.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new ir(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ir(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new He(new an([])),r=new ir(n,e),i=new ir(n,e+1),a=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),a.push(s.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new He(new an([])),r=new ir(n,e),i=new ir(n,e+1);let a=xt();return this.dr.forEachInRange([r,i],s=>{a=a.add(s.key)}),a}containsKey(e){const n=new ir(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ir{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return He.comparator(e.key,n.key)||Ct(e.wr,n.wr)}static Ar(e,n){return Ct(e.wr,n.wr)||He.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _q{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Sr(ir.Er)}checkEmpty(e){return _e.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new BK(a,n,r,i);this.mutationQueue.push(s);for(const o of i)this.br=this.br.add(new ir(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return _e.resolve(s)}lookupMutationBatch(e,n){return _e.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),a=i<0?0:i;return _e.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return _e.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return _e.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ir(n,0),i=new ir(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,i],s=>{const o=this.Dr(s.wr);a.push(o)}),_e.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Sr(Ct);return n.forEach(i=>{const a=new ir(i,0),s=new ir(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,s],o=>{r=r.add(o.wr)})}),_e.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;He.isDocumentKey(a)||(a=a.child(""));const s=new ir(new He(a),0);let o=new Sr(Ct);return this.br.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(o=o.add(c.wr)),!0)},s),_e.resolve(this.Cr(o))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Lt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return _e.forEach(n.mutations,i=>{const a=new ir(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new ir(n,0),i=this.br.firstAfterOrEqual(r);return _e.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,_e.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sq{constructor(e){this.Mr=e,this.docs=function(){return new vn(He.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return _e.resolve(r?r.document.mutableCopy():Mr.newInvalidDocument(n))}getEntries(e,n){let r=to();return n.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Mr.newInvalidDocument(i))}),_e.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=to();const s=n.path,o=new He(s.child("")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||sK(aK(d),r)<=0||(i.has(d.key)||sx(n,d))&&(a=a.insert(d.key,d.mutableCopy()))}return _e.resolve(a)}getAllFromCollectionGroup(e,n,r,i){rt()}Or(e,n){return _e.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new jq(this)}getSize(e){return _e.resolve(this.size)}}class jq extends gq{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),_e.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aq{constructor(e){this.persistence=e,this.Nr=new kf(n=>$j(n),zj),this.lastRemoteSnapshotVersion=lt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Wj,this.targetCount=0,this.kr=Bd.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),_e.resolve()}getLastRemoteSnapshotVersion(e){return _e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _e.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),_e.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),_e.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Bd(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,_e.resolve()}updateTargetData(e,n){return this.Kn(n),_e.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,_e.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.Nr.forEach((s,o)=>{o.sequenceNumber<=n&&r.get(o.targetId)===null&&(this.Nr.delete(s),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),_e.waitFor(a).next(()=>i)}getTargetCount(e){return _e.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return _e.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),_e.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(s=>{a.push(i.markPotentiallyOrphaned(e,s))}),_e.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),_e.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return _e.resolve(r)}containsKey(e,n){return _e.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pq{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Dj(0),this.Kr=!1,this.Kr=!0,this.$r=new wq,this.referenceDelegate=e(this),this.Ur=new Aq(this),this.indexManager=new pq,this.remoteDocumentCache=function(i){return new Sq(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new fq(n),this.Gr=new xq(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new bq,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new _q(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Ue("MemoryPersistence","Starting transaction:",e);const i=new Eq(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(a=>this.referenceDelegate.jr(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Hr(e,n){return _e.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Eq extends lK{constructor(e){super(),this.currentSequenceNumber=e}}class Kj{constructor(e){this.persistence=e,this.Jr=new Wj,this.Yr=null}static Zr(e){return new Kj(e)}get Xr(){if(this.Yr)return this.Yr;throw rt()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),_e.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),_e.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),_e.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.Xr.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _e.forEach(this.Xr,r=>{const i=He.fromPath(r);return this.ei(e,i).next(a=>{a||n.removeEntry(i,lt.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return _e.or([()=>_e.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=xt(),i=xt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new qj(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tq{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cq{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return wB()?8:cK(yi())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.Yi(e,n).next(s=>{a.result=s}).next(()=>{if(!a.result)return this.Zi(e,n,i,r).next(s=>{a.result=s})}).next(()=>{if(a.result)return;const s=new Tq;return this.Xi(e,n,s).next(o=>{if(a.result=o,this.zi)return this.es(e,n,s,o.size)})}).next(()=>a.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(_h()<=wt.DEBUG&&Ue("QueryEngine","SDK will not create cache indexes for query:",Ku(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),_e.resolve()):(_h()<=wt.DEBUG&&Ue("QueryEngine","Query:",Ku(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(_h()<=wt.DEBUG&&Ue("QueryEngine","The SDK decides to create cache indexes for query:",Ku(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ss(n))):_e.resolve())}Yi(e,n){if(_C(n))return _e.resolve(null);let r=ss(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=S_(n,null,"F"),r=ss(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const s=xt(...a);return this.Ji.getDocuments(e,s).next(o=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ts(n,o);return this.ns(n,u,s,c.readTime)?this.Yi(e,S_(n,null,"F")):this.rs(e,u,n,c)}))})))}Zi(e,n,r,i){return _C(n)||i.isEqual(lt.min())?_e.resolve(null):this.Ji.getDocuments(e,r).next(a=>{const s=this.ts(n,a);return this.ns(n,s,r,i)?_e.resolve(null):(_h()<=wt.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ku(n)),this.rs(e,s,n,iK(i,-1)).next(o=>o))})}ts(e,n){let r=new Sr(t3(e));return n.forEach((i,a)=>{sx(e,a)&&(r=r.add(a))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,n,r){return _h()<=wt.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",Ku(n)),this.Ji.getDocumentsMatchingQuery(e,n,gl.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(a=>(n.forEach(s=>{a=a.insert(s.key,s)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nq{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new vn(Ct),this._s=new kf(a=>$j(a),zj),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yq(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function kq(t,e,n,r){return new Nq(t,e,n,r)}async function _3(t,e){const n=ct(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const s=[],o=[];let c=xt();for(const u of i){s.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of a){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({hs:u,removedBatchIds:s,addedBatchIds:o}))})})}function Oq(t,e){const n=ct(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return function(o,c,u,d){const f=u.batch,h=f.keys();let p=_e.resolve();return h.forEach(y=>{p=p.next(()=>d.getEntry(c,y)).next(v=>{const b=u.docVersions.get(y);Lt(b!==null),v.version.compareTo(b)<0&&(f.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),d.addEntry(v)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(c,f))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let c=xt();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(c=c.add(o.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function S3(t){const e=ct(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Iq(t,e){const n=ct(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const o=[];e.targetChanges.forEach((d,f)=>{const h=i.get(f);if(!h)return;o.push(n.Ur.removeMatchingKeys(a,d.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(a,d.addedDocuments,f)));let p=h.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(f)!==null?p=p.withResumeToken(Ar.EMPTY_BYTE_STRING,lt.min()).withLastLimboFreeSnapshotVersion(lt.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,r)),i=i.insert(f,p),function(v,b,x){return v.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(h,p,d)&&o.push(n.Ur.updateTargetData(a,p))});let c=to(),u=xt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(a,d))}),o.push(Dq(a,s,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!r.isEqual(lt.min())){const d=n.Ur.getLastRemoteSnapshotVersion(a).next(f=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r));o.push(d)}return _e.waitFor(o).next(()=>s.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,c,u)).next(()=>c)}).then(a=>(n.os=i,a))}function Dq(t,e,n){let r=xt(),i=xt();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let s=to();return n.forEach((o,c)=>{const u=a.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),c.isNoDocument()&&c.version.isEqual(lt.min())?(e.removeEntry(o,c.readTime),s=s.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(o,c)):Ue("LocalStore","Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function Mq(t,e){const n=ct(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Rq(t,e){const n=ct(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(a=>a?(i=a,_e.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new Jo(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function T_(t,e,n){const r=ct(t),i=r.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Hm(s))throw s;Ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function IC(t,e,n){const r=ct(t);let i=lt.min(),a=xt();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,d){const f=ct(c),h=f._s.get(d);return h!==void 0?_e.resolve(f.os.get(h)):f.Ur.getTargetData(u,d)}(r,s,ss(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,o.targetId).next(c=>{a=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:lt.min(),n?a:xt())).next(o=>(Lq(r,EK(e),o),{documents:o,Ts:a})))}function Lq(t,e,n){let r=t.us.get(e)||lt.min();n.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.us.set(e,r)}class DC{constructor(){this.activeTargetIds=IK()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $q{constructor(){this.so=new DC,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new DC,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zq{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xg=null;function mw(){return Xg===null?Xg=function(){return 268435456+Math.round(2147483648*Math.random())}():Xg++,"0x"+Xg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vq{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr="WebChannelConnection";class Bq extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(n,r,i,a,s){const o=mw(),c=this.xo(n,r.toUriEncodedString());Ue("RestConnection",`Sending RPC '${n}' ${o}:`,c,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,a,s),this.No(n,c,u,i).then(d=>(Ue("RestConnection",`Received RPC '${n}' ${o}: `,d),d),d=>{throw Bp("RestConnection",`RPC '${n}' ${o} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(n,r,i,a,s,o){return this.Mo(n,r,i,a,s)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Nf}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,s)=>n[s]=a),i&&i.headers.forEach((a,s)=>n[s]=a)}xo(n,r){const i=Fq[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const a=mw();return new Promise((s,o)=>{const c=new $5;c.setWithCredentials(!0),c.listenOnce(z5.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ov.NO_ERROR:const d=c.getResponseJson();Ue(kr,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),s(d);break;case Ov.TIMEOUT:Ue(kr,`RPC '${e}' ${a} timed out`),o(new ze(be.DEADLINE_EXCEEDED,"Request time out"));break;case Ov.HTTP_ERROR:const f=c.getStatus();if(Ue(kr,`RPC '${e}' ${a} failed with status:`,f,"response text:",c.getResponseText()),f>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);const p=h==null?void 0:h.error;if(p&&p.status&&p.message){const y=function(b){const x=b.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(x)>=0?x:be.UNKNOWN}(p.status);o(new ze(y,p.message))}else o(new ze(be.UNKNOWN,"Server responded with status "+c.getStatus()))}else o(new ze(be.UNAVAILABLE,"Connection failed."));break;default:rt()}}finally{Ue(kr,`RPC '${e}' ${a} completed.`)}});const u=JSON.stringify(i);Ue(kr,`RPC '${e}' ${a} sending request:`,i),c.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=mw(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=B5(),o=V5(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=a.join("");Ue(kr,`Creating RPC '${e}' stream ${i}: ${d}`,c);const f=s.createWebChannel(d,c);let h=!1,p=!1;const y=new Vq({Io:b=>{p?Ue(kr,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(h||(Ue(kr,`Opening RPC '${e}' stream ${i} transport.`),f.open(),h=!0),Ue(kr,`RPC '${e}' stream ${i} sending:`,b),f.send(b))},To:()=>f.close()}),v=(b,x,_)=>{b.listen(x,S=>{try{_(S)}catch(T){setTimeout(()=>{throw T},0)}})};return v(f,Fh.EventType.OPEN,()=>{p||(Ue(kr,`RPC '${e}' stream ${i} transport opened.`),y.yo())}),v(f,Fh.EventType.CLOSE,()=>{p||(p=!0,Ue(kr,`RPC '${e}' stream ${i} transport closed`),y.So())}),v(f,Fh.EventType.ERROR,b=>{p||(p=!0,Bp(kr,`RPC '${e}' stream ${i} transport errored:`,b),y.So(new ze(be.UNAVAILABLE,"The operation could not be completed")))}),v(f,Fh.EventType.MESSAGE,b=>{var x;if(!p){const _=b.data[0];Lt(!!_);const S=_,T=S.error||((x=S[0])===null||x===void 0?void 0:x.error);if(T){Ue(kr,`RPC '${e}' stream ${i} received error:`,T);const E=T.status;let A=function(O){const D=Mn[O];if(D!==void 0)return f3(D)}(E),j=T.message;A===void 0&&(A=be.INTERNAL,j="Unknown error status: "+E+" with message "+T.message),p=!0,y.So(new ze(A,j)),f.close()}else Ue(kr,`RPC '${e}' stream ${i} received:`,_),y.bo(_)}}),v(o,F5.STAT_EVENT,b=>{b.stat===v_.PROXY?Ue(kr,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===v_.NOPROXY&&Ue(kr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}function gw(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(t){return new JK(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(e,n,r=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e,n,r,i,a,s,o,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new j3(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===be.RESOURCE_EXHAUSTED?(eo(n.toString()),eo("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new ze(be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Uq extends A3{constructor(e,n,r,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=tq(this.serializer,e),r=function(a){if(!("targetChange"in a))return lt.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?lt.min():s.readTime?os(s.readTime):lt.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=E_(this.serializer),n.addTarget=function(a,s){let o;const c=s.target;if(o=w_(c)?{documents:iq(a,c)}:{query:aq(a,c)._t},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=m3(a,s.resumeToken);const u=j_(a,s.expectedCount);u!==null&&(o.expectedCount=u)}else if(s.snapshotVersion.compareTo(lt.min())>0){o.readTime=wy(a,s.snapshotVersion.toTimestamp());const u=j_(a,s.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const r=oq(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=E_(this.serializer),n.removeTarget=e,this.a_(n)}}class Wq extends A3{constructor(e,n,r,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Lt(!!e.streamToken),this.lastStreamToken=e.streamToken,Lt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Lt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=rq(e.writeResults,e.commitTime),r=os(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=E_(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>nq(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kq extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ze(be.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,s])=>this.connection.Mo(e,A_(n,r),i,a,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ze(be.UNKNOWN,a.toString())})}Lo(e,n,r,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Lo(e,A_(n,r),i,s,o,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ze(be.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class qq{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(eo(n),this.D_=!1):Ue("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hq{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(s=>{r.enqueueAndForget(async()=>{lu(this)&&(Ue("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=ct(c);u.L_.add(4),await Qm(u),u.q_.set("Unknown"),u.L_.delete(4),await fx(u)}(this))})}),this.q_=new qq(r,i)}}async function fx(t){if(lu(t))for(const e of t.B_)await e(!0)}async function Qm(t){for(const e of t.B_)await e(!1)}function P3(t,e){const n=ct(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Xj(n)?Yj(n):Of(n).r_()&&Gj(n,e))}function Hj(t,e){const n=ct(t),r=Of(n);n.N_.delete(e),r.r_()&&E3(n,e),n.N_.size===0&&(r.r_()?r.o_():lu(n)&&n.q_.set("Unknown"))}function Gj(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(lt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Of(t).A_(e)}function E3(t,e){t.Q_.xe(e),Of(t).R_(e)}function Yj(t){t.Q_=new GK({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Of(t).start(),t.q_.v_()}function Xj(t){return lu(t)&&!Of(t).n_()&&t.N_.size>0}function lu(t){return ct(t).L_.size===0}function T3(t){t.Q_=void 0}async function Gq(t){t.q_.set("Online")}async function Yq(t){t.N_.forEach((e,n)=>{Gj(t,e)})}async function Xq(t,e){T3(t),Xj(t)?(t.q_.M_(e),Yj(t)):t.q_.set("Unknown")}async function Qq(t,e,n){if(t.q_.set("Online"),e instanceof p3&&e.state===2&&e.cause)try{await async function(i,a){const s=a.cause;for(const o of a.targetIds)i.N_.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.N_.delete(o),i.Q_.removeTarget(o))}(t,e)}catch(r){Ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await _y(t,r)}else if(e instanceof Mv?t.Q_.Ke(e):e instanceof h3?t.Q_.He(e):t.Q_.We(e),!n.isEqual(lt.min()))try{const r=await S3(t.localStore);n.compareTo(r)>=0&&await function(a,s){const o=a.Q_.rt(s);return o.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=a.N_.get(u);d&&a.N_.set(u,d.withResumeToken(c.resumeToken,s))}}),o.targetMismatches.forEach((c,u)=>{const d=a.N_.get(c);if(!d)return;a.N_.set(c,d.withResumeToken(Ar.EMPTY_BYTE_STRING,d.snapshotVersion)),E3(a,c);const f=new Jo(d.target,c,u,d.sequenceNumber);Gj(a,f)}),a.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){Ue("RemoteStore","Failed to raise snapshot:",r),await _y(t,r)}}async function _y(t,e,n){if(!Hm(e))throw e;t.L_.add(1),await Qm(t),t.q_.set("Offline"),n||(n=()=>S3(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ue("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await fx(t)})}function C3(t,e){return e().catch(n=>_y(t,n,e))}async function hx(t){const e=ct(t),n=yl(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Jq(e);)try{const i=await Mq(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,Zq(e,i)}catch(i){await _y(e,i)}N3(e)&&k3(e)}function Jq(t){return lu(t)&&t.O_.length<10}function Zq(t,e){t.O_.push(e);const n=yl(t);n.r_()&&n.V_&&n.m_(e.mutations)}function N3(t){return lu(t)&&!yl(t).n_()&&t.O_.length>0}function k3(t){yl(t).start()}async function eH(t){yl(t).p_()}async function tH(t){const e=yl(t);for(const n of t.O_)e.m_(n.mutations)}async function nH(t,e,n){const r=t.O_.shift(),i=Vj.from(r,e,n);await C3(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await hx(t)}async function rH(t,e){e&&yl(t).V_&&await async function(r,i){if(function(s){return KK(s)&&s!==be.ABORTED}(i.code)){const a=r.O_.shift();yl(r).s_(),await C3(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await hx(r)}}(t,e),N3(t)&&k3(t)}async function RC(t,e){const n=ct(t);n.asyncQueue.verifyOperationInProgress(),Ue("RemoteStore","RemoteStore received new credentials");const r=lu(n);n.L_.add(3),await Qm(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await fx(n)}async function iH(t,e){const n=ct(t);e?(n.L_.delete(2),await fx(n)):e||(n.L_.add(2),await Qm(n),n.q_.set("Unknown"))}function Of(t){return t.K_||(t.K_=function(n,r,i){const a=ct(n);return a.w_(),new Uq(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:Gq.bind(null,t),Ro:Yq.bind(null,t),mo:Xq.bind(null,t),d_:Qq.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Xj(t)?Yj(t):t.q_.set("Unknown")):(await t.K_.stop(),T3(t))})),t.K_}function yl(t){return t.U_||(t.U_=function(n,r,i){const a=ct(n);return a.w_(),new Wq(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:eH.bind(null,t),mo:rH.bind(null,t),f_:tH.bind(null,t),g_:nH.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await hx(t)):(await t.U_.stop(),t.O_.length>0&&(Ue("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new dl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const s=Date.now()+r,o=new Qj(e,n,s,i,a);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ze(be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jj(t,e){if(eo("AsyncQueue",`${e}: ${t}`),Hm(t))return new ze(be.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e){this.comparator=e?(n,r)=>e(n,r)||He.comparator(n.key,r.key):(n,r)=>He.comparator(n.key,r.key),this.keyedMap=Vh(),this.sortedSet=new vn(this.comparator)}static emptySet(e){return new Ad(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ad)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ad;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(){this.W_=new vn(He.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):rt():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ud{constructor(e,n,r,i,a,s,o,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,a){const s=[];return n.forEach(o=>{s.push({type:0,doc:o})}),new Ud(e,n,Ad.emptySet(n),s,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ax(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aH{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class sH{constructor(){this.queries=$C(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ct(n),a=i.queries;i.queries=$C(),a.forEach((s,o)=>{for(const c of o.j_)c.onError(r)})})(this,new ze(be.ABORTED,"Firestore shutting down"))}}function $C(){return new kf(t=>e3(t),ax)}async function O3(t,e){const n=ct(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.H_()&&e.J_()&&(r=2):(a=new aH,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await n.onListen(i,!0);break;case 1:a.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const o=Jj(s,`Initialization of query '${Ku(e.query)}' failed`);return void e.onError(o)}n.queries.set(i,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&Zj(n)}async function I3(t,e){const n=ct(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const s=a.j_.indexOf(e);s>=0&&(a.j_.splice(s,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function oH(t,e){const n=ct(t);let r=!1;for(const i of e){const a=i.query,s=n.queries.get(a);if(s){for(const o of s.j_)o.X_(i)&&(r=!0);s.z_=i}}r&&Zj(n)}function lH(t,e,n){const r=ct(t),i=r.queries.get(e);if(i)for(const a of i.j_)a.onError(n);r.queries.delete(e)}function Zj(t){t.Y_.forEach(e=>{e.next()})}var C_,zC;(zC=C_||(C_={})).ea="default",zC.Cache="cache";class D3{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ud(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ud.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==C_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(e){this.key=e}}class R3{constructor(e){this.key=e}}class cH{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=xt(),this.mutatedKeys=xt(),this.Aa=t3(e),this.Ra=new Ad(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new LC,i=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,s=i,o=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{const h=i.get(d),p=sx(this.query,f)?f:null,y=!!h&&this.mutatedKeys.has(h.key),v=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let b=!1;h&&p?h.data.isEqual(p.data)?y!==v&&(r.track({type:3,doc:p}),b=!0):this.ga(h,p)||(r.track({type:2,doc:p}),b=!0,(c&&this.Aa(p,c)>0||u&&this.Aa(p,u)<0)&&(o=!0)):!h&&p?(r.track({type:0,doc:p}),b=!0):h&&!p&&(r.track({type:1,doc:h}),b=!0,(c||u)&&(o=!0)),b&&(p?(s=s.add(p),a=v?a.add(d):a.delete(d)):(s=s.delete(d),a=a.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),a=a.delete(d.key),r.track({type:1,doc:d})}return{Ra:s,fa:r,ns:o,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((d,f)=>function(p,y){const v=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt()}};return v(p)-v(y)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;const o=n&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,u=c!==this.Ea;return this.Ea=c,s.length!==0||u?{snapshot:new Ud(this.query,e.Ra,a,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new LC,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=xt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new R3(r))}),this.da.forEach(r=>{e.has(r)||n.push(new M3(r))}),n}ba(e){this.Ta=e.Ts,this.da=xt();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ud.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class uH{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class dH{constructor(e){this.key=e,this.va=!1}}class fH{constructor(e,n,r,i,a,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new kf(o=>e3(o),ax),this.Ma=new Map,this.xa=new Set,this.Oa=new vn(He.comparator),this.Na=new Map,this.La=new Wj,this.Ba={},this.ka=new Map,this.qa=Bd.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function hH(t,e,n=!0){const r=B3(t);let i;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await L3(r,e,n,!0),i}async function pH(t,e){const n=B3(t);await L3(n,e,!0,!1)}async function L3(t,e,n,r){const i=await Rq(t.localStore,ss(e)),a=i.targetId,s=t.sharedClientState.addLocalQueryTarget(a,n);let o;return r&&(o=await mH(t,e,a,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&P3(t.remoteStore,i),o}async function mH(t,e,n,r,i){t.Ka=(f,h,p)=>async function(v,b,x,_){let S=b.view.ma(x);S.ns&&(S=await IC(v.localStore,b.query,!1).then(({documents:j})=>b.view.ma(j,S)));const T=_&&_.targetChanges.get(b.targetId),E=_&&_.targetMismatches.get(b.targetId)!=null,A=b.view.applyChanges(S,v.isPrimaryClient,T,E);return VC(v,b.targetId,A.wa),A.snapshot}(t,f,h,p);const a=await IC(t.localStore,e,!0),s=new cH(e,a.Ts),o=s.ma(a.documents),c=Xm.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(o,t.isPrimaryClient,c);VC(t,n,u.wa);const d=new uH(e,n,s);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function gH(t,e,n){const r=ct(t),i=r.Fa.get(e),a=r.Ma.get(i.targetId);if(a.length>1)return r.Ma.set(i.targetId,a.filter(s=>!ax(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await T_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Hj(r.remoteStore,i.targetId),N_(r,i.targetId)}).catch(qm)):(N_(r,i.targetId),await T_(r.localStore,i.targetId,!0))}async function vH(t,e){const n=ct(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Hj(n.remoteStore,r.targetId))}async function yH(t,e,n){const r=AH(t);try{const i=await function(s,o){const c=ct(s),u=Jn.now(),d=o.reduce((p,y)=>p.add(y.key),xt());let f,h;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let y=to(),v=xt();return c.cs.getEntries(p,d).next(b=>{y=b,y.forEach((x,_)=>{_.isValidDocument()||(v=v.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,y)).next(b=>{f=b;const x=[];for(const _ of o){const S=FK(_,f.get(_.key).overlayedDocument);S!=null&&x.push(new jl(_.key,S,q5(S.value.mapValue),Yr.exists(!0)))}return c.mutationQueue.addMutationBatch(p,u,x,o)}).next(b=>{h=b;const x=b.applyToLocalDocumentSet(f,v);return c.documentOverlayCache.saveOverlays(p,b.batchId,x)})}).then(()=>({batchId:h.batchId,changes:r3(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,c){let u=s.Ba[s.currentUser.toKey()];u||(u=new vn(Ct)),u=u.insert(o,c),s.Ba[s.currentUser.toKey()]=u}(r,i.batchId,n),await Jm(r,i.changes),await hx(r.remoteStore)}catch(i){const a=Jj(i,"Failed to persist write");n.reject(a)}}async function $3(t,e){const n=ct(t);try{const r=await Iq(n.localStore,e);e.targetChanges.forEach((i,a)=>{const s=n.Na.get(a);s&&(Lt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Lt(s.va):i.removedDocuments.size>0&&(Lt(s.va),s.va=!1))}),await Jm(n,r,e)}catch(r){await qm(r)}}function FC(t,e,n){const r=ct(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((a,s)=>{const o=s.view.Z_(e);o.snapshot&&i.push(o.snapshot)}),function(s,o){const c=ct(s);c.onlineState=o;let u=!1;c.queries.forEach((d,f)=>{for(const h of f.j_)h.Z_(o)&&(u=!0)}),u&&Zj(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function xH(t,e,n){const r=ct(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),a=i&&i.key;if(a){let s=new vn(He.comparator);s=s.insert(a,Mr.newNoDocument(a,lt.min()));const o=xt().add(a),c=new ux(lt.min(),new Map,new vn(Ct),s,o);await $3(r,c),r.Oa=r.Oa.remove(a),r.Na.delete(e),eA(r)}else await T_(r.localStore,e,!1).then(()=>N_(r,e,n)).catch(qm)}async function bH(t,e){const n=ct(t),r=e.batch.batchId;try{const i=await Oq(n.localStore,e);F3(n,r,null),z3(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Jm(n,i)}catch(i){await qm(i)}}async function wH(t,e,n){const r=ct(t);try{const i=await function(s,o){const c=ct(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,o).next(f=>(Lt(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,o)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);F3(r,e,n),z3(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Jm(r,i)}catch(i){await qm(i)}}function z3(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function F3(t,e,n){const r=ct(t);let i=r.Ba[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function N_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||V3(t,r)})}function V3(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Hj(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),eA(t))}function VC(t,e,n){for(const r of n)r instanceof M3?(t.La.addReference(r.key,e),_H(t,r)):r instanceof R3?(Ue("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||V3(t,r.key)):rt()}function _H(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Ue("SyncEngine","New document in limbo: "+n),t.xa.add(r),eA(t))}function eA(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new He(an.fromString(e)),r=t.qa.next();t.Na.set(r,new dH(n)),t.Oa=t.Oa.insert(n,r),P3(t.remoteStore,new Jo(ss(ix(n.path)),r,"TargetPurposeLimboResolution",Dj.oe))}}async function Jm(t,e,n){const r=ct(t),i=[],a=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((o,c)=>{s.push(r.Ka(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);const f=qj.Wi(c.targetId,u);a.push(f)}}))}),await Promise.all(s),r.Ca.d_(i),await async function(c,u){const d=ct(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>_e.forEach(u,h=>_e.forEach(h.$i,p=>d.persistence.referenceDelegate.addReference(f,h.targetId,p)).next(()=>_e.forEach(h.Ui,p=>d.persistence.referenceDelegate.removeReference(f,h.targetId,p)))))}catch(f){if(!Hm(f))throw f;Ue("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const h=f.targetId;if(!f.fromCache){const p=d.os.get(h),y=p.snapshotVersion,v=p.withLastLimboFreeSnapshotVersion(y);d.os=d.os.insert(h,v)}}}(r.localStore,a))}async function SH(t,e){const n=ct(t);if(!n.currentUser.isEqual(e)){Ue("SyncEngine","User change. New user:",e.toKey());const r=await _3(n.localStore,e);n.currentUser=e,function(a,s){a.ka.forEach(o=>{o.forEach(c=>{c.reject(new ze(be.CANCELLED,s))})}),a.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Jm(n,r.hs)}}function jH(t,e){const n=ct(t),r=n.Na.get(e);if(r&&r.va)return xt().add(r.key);{let i=xt();const a=n.Ma.get(e);if(!a)return i;for(const s of a){const o=n.Fa.get(s);i=i.unionWith(o.view.Va)}return i}}function B3(t){const e=ct(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xH.bind(null,e),e.Ca.d_=oH.bind(null,e.eventManager),e.Ca.$a=lH.bind(null,e.eventManager),e}function AH(t){const e=ct(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wH.bind(null,e),e}class Yp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dx(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return kq(this.persistence,new Cq,e.initialUser,this.serializer)}Ga(e){return new Pq(Kj.Zr,this.serializer)}Wa(e){return new $q}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yp.provider={build:()=>new Yp};class Sy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>FC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=SH.bind(null,this.syncEngine),await iH(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new sH}()}createDatastore(e){const n=dx(e.databaseInfo.databaseId),r=function(a){return new Bq(a)}(e.databaseInfo);return function(a,s,o,c){return new Kq(a,s,o,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,a,s,o){return new Hq(r,i,a,s,o)}(this.localStore,this.datastore,e.asyncQueue,n=>FC(this.syncEngine,n,0),function(){return MC.D()?new MC:new zq}())}createSyncEngine(e,n){return function(i,a,s,o,c,u,d){const f=new fH(i,a,s,o,c,u);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const a=ct(i);Ue("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await Qm(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Sy.provider={build:()=>new Sy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):eo("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PH{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=oi.UNAUTHENTICATED,this.clientId=U5.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async s=>{Ue("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Ue("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new dl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Jj(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function vw(t,e){t.asyncQueue.verifyOperationInProgress(),Ue("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await _3(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function BC(t,e){t.asyncQueue.verifyOperationInProgress();const n=await EH(t);Ue("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>RC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>RC(e.remoteStore,i)),t._onlineComponents=e}async function EH(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ue("FirestoreClient","Using user provided OfflineComponentProvider");try{await vw(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===be.FAILED_PRECONDITION||i.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Bp("Error using user provided cache. Falling back to memory cache: "+n),await vw(t,new Yp)}}else Ue("FirestoreClient","Using default OfflineComponentProvider"),await vw(t,new Yp);return t._offlineComponents}async function W3(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ue("FirestoreClient","Using user provided OnlineComponentProvider"),await BC(t,t._uninitializedComponentsProvider._online)):(Ue("FirestoreClient","Using default OnlineComponentProvider"),await BC(t,new Sy))),t._onlineComponents}function TH(t){return W3(t).then(e=>e.syncEngine)}async function k_(t){const e=await W3(t),n=e.eventManager;return n.onListen=hH.bind(null,e.syncEngine),n.onUnlisten=gH.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=pH.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=vH.bind(null,e.syncEngine),n}function CH(t,e,n={}){const r=new dl;return t.asyncQueue.enqueueAndForget(async()=>function(a,s,o,c,u){const d=new U3({next:h=>{d.Za(),s.enqueueAndForget(()=>I3(a,f));const p=h.docs.has(o);!p&&h.fromCache?u.reject(new ze(be.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&h.fromCache&&c&&c.source==="server"?u.reject(new ze(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new D3(ix(o.path),d,{includeMetadataChanges:!0,_a:!0});return O3(a,f)}(await k_(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K3(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q3(t,e,n){if(!n)throw new ze(be.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function NH(t,e,n,r){if(e===!0&&r===!0)throw new ze(be.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function WC(t){if(!He.isDocumentKey(t))throw new ze(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function KC(t){if(He.isDocumentKey(t))throw new ze(be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function px(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":rt()}function na(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ze(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=px(t);throw new ze(be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ze(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ze(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=K3((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ze(be.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ze(be.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ze(be.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tA{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qC({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ze(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ze(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qC(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new XW;switch(r.type){case"firstParty":return new ZW(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ze(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=UC.get(n);r&&(Ue("ComponentProvider","Removing Datastore"),UC.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new If(this.firestore,e,this._query)}}class Lr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Lr(this.firestore,e,this._key)}}class fl extends If{constructor(e,n,r){super(e,n,ix(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Lr(this.firestore,null,new He(e))}withConverter(e){return new fl(this.firestore,e,this._path)}}function Hn(t,e,...n){if(t=cr(t),q3("collection","path",e),t instanceof tA){const r=an.fromString(e,...n);return KC(r),new fl(t,null,r)}{if(!(t instanceof Lr||t instanceof fl))throw new ze(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(an.fromString(e,...n));return KC(r),new fl(t.firestore,null,r)}}function hn(t,e,...n){if(t=cr(t),arguments.length===1&&(e=U5.newId()),q3("doc","path",e),t instanceof tA){const r=an.fromString(e,...n);return WC(r),new Lr(t,null,new He(r))}{if(!(t instanceof Lr||t instanceof fl))throw new ze(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(an.fromString(e,...n));return WC(r),new Lr(t.firestore,t instanceof fl?t.converter:null,new He(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new j3(this,"async_queue_retry"),this.Vu=()=>{const r=gw();r&&Ue("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=gw();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=gw();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new dl;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Hm(e))throw e;Ue("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(r);throw eo("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Qj.createAndSchedule(this,e,n,r,a=>this.yu(a));return this.Tu.push(i),i}fu(){this.Eu&&rt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function GC(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class no extends tA{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new HC,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new HC(e),this._firestoreClient=void 0,await e}}}function kH(t,e,n){n||(n="(default)");const r=m5(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),a=r.getOptions(n);if($p(a,e))return i;throw new ze(be.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ze(be.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ze(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function mx(t){if(t._terminated)throw new ze(be.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||OH(t),t._firestoreClient}function OH(t){var e,n,r;const i=t._freezeSettings(),a=function(o,c,u,d){return new fK(o,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,K3(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new PH(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(o){const c=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wd(Ar.fromBase64String(e))}catch(n){throw new ze(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Wd(Ar.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ze(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new br(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ze(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ze(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ct(this._lat,e._lat)||Ct(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IH=/^__.*__$/;class DH{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new jl(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ym(e,this.data,n,this.fieldTransforms)}}class H3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new jl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function G3(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt()}}class aA{constructor(e,n,r,i,a,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new aA(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return jy(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(G3(this.Cu)&&IH.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class MH{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||dx(e)}Qu(e,n,r,i=!1){return new aA({Cu:e,methodName:n,qu:r,path:br.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function eg(t){const e=t._freezeSettings(),n=dx(t._databaseId);return new MH(t._databaseId,!!e.ignoreUndefinedProperties,n)}function sA(t,e,n,r,i,a={}){const s=t.Qu(a.merge||a.mergeFields?2:0,e,n,i);oA("Data must be an object, but it was:",s,r);const o=Q3(r,s);let c,u;if(a.merge)c=new Oi(s.fieldMask),u=s.fieldTransforms;else if(a.mergeFields){const d=[];for(const f of a.mergeFields){const h=O_(e,f,n);if(!s.contains(h))throw new ze(be.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);Z3(d,h)||d.push(h)}c=new Oi(d),u=s.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=s.fieldTransforms;return new DH(new ci(o),c,u)}class gx extends nA{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gx}}function Y3(t,e,n,r){const i=t.Qu(1,e,n);oA("Data must be an object, but it was:",i,r);const a=[],s=ci.empty();ou(r,(c,u)=>{const d=lA(e,c,n);u=cr(u);const f=i.Nu(d);if(u instanceof gx)a.push(d);else{const h=tg(u,f);h!=null&&(a.push(d),s.set(d,h))}});const o=new Oi(a);return new H3(s,o,i.fieldTransforms)}function X3(t,e,n,r,i,a){const s=t.Qu(1,e,n),o=[O_(e,r,n)],c=[i];if(a.length%2!=0)throw new ze(be.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<a.length;h+=2)o.push(O_(e,a[h])),c.push(a[h+1]);const u=[],d=ci.empty();for(let h=o.length-1;h>=0;--h)if(!Z3(u,o[h])){const p=o[h];let y=c[h];y=cr(y);const v=s.Nu(p);if(y instanceof gx)u.push(p);else{const b=tg(y,v);b!=null&&(u.push(p),d.set(p,b))}}const f=new Oi(u);return new H3(d,f,s.fieldTransforms)}function RH(t,e,n,r=!1){return tg(n,t.Qu(r?4:3,e))}function tg(t,e){if(J3(t=cr(t)))return oA("Unsupported field value:",e,t),Q3(t,e);if(t instanceof nA)return function(r,i){if(!G3(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const a=[];let s=0;for(const o of r){let c=tg(o,i.Lu(s));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),s++}return{arrayValue:{values:a}}}(t,e)}return function(r,i){if((r=cr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return DK(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=Jn.fromDate(r);return{timestampValue:wy(i.serializer,a)}}if(r instanceof Jn){const a=new Jn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:wy(i.serializer,a)}}if(r instanceof rA)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wd)return{bytesValue:m3(i.serializer,r._byteString)};if(r instanceof Lr){const a=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(a))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Uj(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof iA)return function(s,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw o.Bu("VectorValues must only contain numeric values.");return Fj(o.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${px(r)}`)}(t,e)}function Q3(t,e){const n={};return W5(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ou(t,(r,i)=>{const a=tg(i,e.Mu(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function J3(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Jn||t instanceof rA||t instanceof Wd||t instanceof Lr||t instanceof nA||t instanceof iA)}function oA(t,e,n){if(!J3(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=px(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function O_(t,e,n){if((e=cr(e))instanceof Zm)return e._internalPath;if(typeof e=="string")return lA(t,e);throw jy("Field path arguments must be of type string or ",t,!1,void 0,n)}const LH=new RegExp("[~\\*/\\[\\]]");function lA(t,e,n){if(e.search(LH)>=0)throw jy(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Zm(...e.split("."))._internalPath}catch{throw jy(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jy(t,e,n,r,i){const a=r&&!r.isEmpty(),s=i!==void 0;let o=`Function ${e}() called with invalid data`;n&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(a||s)&&(c+=" (found",a&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new ze(be.INVALID_ARGUMENT,o+t+c)}function Z3(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Lr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $H(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(cA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class $H extends eL{data(){return super.data()}}function cA(t,e){return typeof e=="string"?lA(t,e):e instanceof Zm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zH(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ze(be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uA{}class FH extends uA{}function VH(t,e,...n){let r=[];e instanceof uA&&r.push(e),r=r.concat(n),function(a){const s=a.filter(c=>c instanceof dA).length,o=a.filter(c=>c instanceof vx).length;if(s>1||s>0&&o>0)throw new ze(be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class vx extends FH{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new vx(e,n,r)}_apply(e){const n=this._parse(e);return tL(e._query,n),new If(e.firestore,e.converter,__(e._query,n))}_parse(e){const n=eg(e.firestore);return function(a,s,o,c,u,d,f){let h;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ze(be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){XC(f,d);const p=[];for(const y of f)p.push(YC(c,a,y));h={arrayValue:{values:p}}}else h=YC(c,a,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||XC(f,d),h=RH(o,s,f,d==="in"||d==="not-in");return $n.create(u,d,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function BH(t,e,n){const r=e,i=cA("where",t);return vx._create(i,r,n)}class dA extends uA{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new dA(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ka.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,a){let s=i;const o=a.getFlattenedFilters();for(const c of o)tL(s,c),s=__(s,c)}(e._query,n),new If(e.firestore,e.converter,__(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function YC(t,e,n){if(typeof(n=cr(n))=="string"){if(n==="")throw new ze(be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Z5(e)&&n.indexOf("/")!==-1)throw new ze(be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(an.fromString(n));if(!He.isDocumentKey(r))throw new ze(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gC(t,new He(r))}if(n instanceof Lr)return gC(t,n._key);throw new ze(be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${px(n)}.`)}function XC(t,e){if(!Array.isArray(t)||t.length===0)throw new ze(be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tL(t,e){const n=function(i,a){for(const s of i)for(const o of s.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ze(be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ze(be.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class UH{convertValue(e,n="none"){switch(Uc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Bc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw rt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ou(e,(i,a)=>{r[i]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,i;const a=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Tn(s.doubleValue));return new iA(a)}convertGeoPoint(e){return new rA(Tn(e.latitude),Tn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Rj(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Wp(e));default:return null}}convertTimestamp(e){const n=vl(e);return new Jn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=an.fromString(e);Lt(w3(r));const i=new Kp(r.get(1),r.get(3)),a=new He(r.popFirst(5));return i.isEqual(n)||eo(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class nL extends eL{constructor(e,n,r,i,a,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Rv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(cA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Rv extends nL{data(e={}){return super.data(e)}}class WH{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Uh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Rv(this._firestore,this._userDataWriter,r.key,r,new Uh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ze(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>{const c=new Rv(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Uh(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>a||o.type!==3).map(o=>{const c=new Rv(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Uh(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return o.type!==0&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),d=s.indexOf(o.doc.key)),{type:KH(o.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function KH(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qH(t){t=na(t,Lr);const e=na(t.firestore,no);return CH(mx(e),t._key).then(n=>iL(e,t,n))}class rL extends UH{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wd(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Lr(this.firestore,null,n)}}function HH(t,e,n){t=na(t,Lr);const r=na(t.firestore,no),i=fA(t.converter,e,n);return ng(r,[sA(eg(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Yr.none())])}function Ro(t,e,n,...r){t=na(t,Lr);const i=na(t.firestore,no),a=eg(i);let s;return s=typeof(e=cr(e))=="string"||e instanceof Zm?X3(a,"updateDoc",t._key,e,n,r):Y3(a,"updateDoc",t._key,e),ng(i,[s.toMutation(t._key,Yr.exists(!0))])}function Lo(t){return ng(na(t.firestore,no),[new cx(t._key,Yr.none())])}function ai(t,e){const n=na(t.firestore,no),r=hn(t),i=fA(t.converter,e);return ng(n,[sA(eg(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Yr.exists(!1))]).then(()=>r)}function GH(t,...e){var n,r,i;t=cr(t);let a={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||GC(e[s])||(a=e[s],s++);const o={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(GC(e[s])){const f=e[s];e[s]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,u,d;if(t instanceof Lr)u=na(t.firestore,no),d=ix(t._key.path),c={next:f=>{e[s]&&e[s](iL(u,t,f))},error:e[s+1],complete:e[s+2]};else{const f=na(t,If);u=na(f.firestore,no),d=f._query;const h=new rL(u);c={next:p=>{e[s]&&e[s](new WH(u,h,f,p))},error:e[s+1],complete:e[s+2]},zH(t._query)}return function(h,p,y,v){const b=new U3(v),x=new D3(p,b,y);return h.asyncQueue.enqueueAndForget(async()=>O3(await k_(h),x)),()=>{b.Za(),h.asyncQueue.enqueueAndForget(async()=>I3(await k_(h),x))}}(mx(u),d,o,c)}function ng(t,e){return function(r,i){const a=new dl;return r.asyncQueue.enqueueAndForget(async()=>yH(await TH(r),i,a)),a.promise}(mx(t),e)}function iL(t,e,n){const r=n.docs.get(e._key),i=new rL(t);return new nL(t,i,e._key,r,new Uh(n.hasPendingWrites,n.fromCache),e.converter)}class YH{constructor(e){this.kind="memory",this._onlineComponentProvider=Sy.provider,e!=null&&e.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=Yp.provider}toJSON(){return{kind:this.kind}}}function XH(t){return new YH(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QH{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=eg(e)}set(e,n,r){this._verifyNotCommitted();const i=yw(e,this._firestore),a=fA(i.converter,n,r),s=sA(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Yr.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=yw(e,this._firestore);let s;return s=typeof(n=cr(n))=="string"||n instanceof Zm?X3(this._dataReader,"WriteBatch.update",a._key,n,r,i):Y3(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(s.toMutation(a._key,Yr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=yw(e,this._firestore);return this._mutations=this._mutations.concat(new cx(n._key,Yr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ze(be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function yw(t,e){if((t=cr(t)).firestore!==e)throw new ze(be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ay(t){return mx(t=na(t,no)),new QH(t,e=>ng(t,e))}(function(e,n=!0){(function(i){Nf=i})(tx),Ld(new Fc("firestore",(r,{instanceIdentifier:i,options:a})=>{const s=r.getProvider("app").getImmediate(),o=new no(new QW(r.getProvider("auth-internal")),new tK(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ze(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kp(u.options.projectId,d)}(s,i),s);return a=Object.assign({useFetchStreams:n},a),o._setSettings(a),o},"PUBLIC").setMultipleInstances(!0)),ul(dC,"4.7.3",e),ul(dC,"4.7.3","esm2017")})();const JH={apiKey:"AIzaSyCq3MZURc1tNUbpK7BDzKZKQoh8C3twzmA",authDomain:"lactokeeper.firebaseapp.com",projectId:"lactokeeper",storageBucket:"https://www.google.com/search?q=lactokeeper.appspot.com",messagingSenderId:"437430613715",appId:"1:437430613715:web:b4e56c7a0698c719ae8626"},aL=CU(JH),Kd=_W(aL,{persistence:FW}),ht=kH(aL,{localCache:XH()}),sL=k.createContext({currentUser:null,isLoading:!0}),oL=()=>k.useContext(sL),ZH=({children:t})=>{const[e,n]=k.useState(null),[r,i]=k.useState(!0);k.useEffect(()=>LW(Kd,o=>{n(o),setTimeout(()=>i(!1),200)}),[]);const a={currentUser:e,isLoading:r};return l.jsx(sL.Provider,{value:a,children:t})};var lL={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Gu,function(){var n=function(g,w){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,I){C.__proto__=I}||function(C,I){for(var $ in I)Object.prototype.hasOwnProperty.call(I,$)&&(C[$]=I[$])})(g,w)},r=function(){return(r=Object.assign||function(g){for(var w,C=1,I=arguments.length;C<I;C++)for(var $ in w=arguments[C])Object.prototype.hasOwnProperty.call(w,$)&&(g[$]=w[$]);return g}).apply(this,arguments)};function i(g,w,C){for(var I,$=0,V=w.length;$<V;$++)!I&&$ in w||((I=I||Array.prototype.slice.call(w,0,$))[$]=w[$]);return g.concat(I||Array.prototype.slice.call(w))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Gu,s=Object.keys,o=Array.isArray;function c(g,w){return typeof w!="object"||s(w).forEach(function(C){g[C]=w[C]}),g}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var u=Object.getPrototypeOf,d={}.hasOwnProperty;function f(g,w){return d.call(g,w)}function h(g,w){typeof w=="function"&&(w=w(u(g))),(typeof Reflect>"u"?s:Reflect.ownKeys)(w).forEach(function(C){y(g,C,w[C])})}var p=Object.defineProperty;function y(g,w,C,I){p(g,w,c(C&&f(C,"get")&&typeof C.get=="function"?{get:C.get,set:C.set,configurable:!0}:{value:C,configurable:!0,writable:!0},I))}function v(g){return{from:function(w){return g.prototype=Object.create(w.prototype),y(g.prototype,"constructor",g),{extend:h.bind(null,g.prototype)}}}}var b=Object.getOwnPropertyDescriptor,x=[].slice;function _(g,w,C){return x.call(g,w,C)}function S(g,w){return w(g)}function T(g){if(!g)throw new Error("Assertion Failed")}function E(g){a.setImmediate?setImmediate(g):setTimeout(g,0)}function A(g,w){if(typeof w=="string"&&f(g,w))return g[w];if(!w)return g;if(typeof w!="string"){for(var C=[],I=0,$=w.length;I<$;++I){var V=A(g,w[I]);C.push(V)}return C}var K=w.indexOf(".");if(K!==-1){var G=g[w.substr(0,K)];return G==null?void 0:A(G,w.substr(K+1))}}function j(g,w,C){if(g&&w!==void 0&&!("isFrozen"in Object&&Object.isFrozen(g)))if(typeof w!="string"&&"length"in w){T(typeof C!="string"&&"length"in C);for(var I=0,$=w.length;I<$;++I)j(g,w[I],C[I])}else{var V,K,G=w.indexOf(".");G!==-1?(V=w.substr(0,G),(K=w.substr(G+1))===""?C===void 0?o(g)&&!isNaN(parseInt(V))?g.splice(V,1):delete g[V]:g[V]=C:j(G=!(G=g[V])||!f(g,V)?g[V]={}:G,K,C)):C===void 0?o(g)&&!isNaN(parseInt(w))?g.splice(w,1):delete g[w]:g[w]=C}}function P(g){var w,C={};for(w in g)f(g,w)&&(C[w]=g[w]);return C}var O=[].concat;function D(g){return O.apply([],g)}var qt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(D([8,16,32,64].map(function(g){return["Int","Uint","Float"].map(function(w){return w+g+"Array"})}))).filter(function(g){return a[g]}),M=new Set(qt.map(function(g){return a[g]})),z=null;function L(g){return z=new WeakMap,g=function w(C){if(!C||typeof C!="object")return C;var I=z.get(C);if(I)return I;if(o(C)){I=[],z.set(C,I);for(var $=0,V=C.length;$<V;++$)I.push(w(C[$]))}else if(M.has(C.constructor))I=C;else{var K,G=u(C);for(K in I=G===Object.prototype?{}:Object.create(G),z.set(C,I),C)f(C,K)&&(I[K]=w(C[K]))}return I}(g),z=null,g}var te={}.toString;function X(g){return te.call(g).slice(8,-1)}var W=typeof Symbol<"u"?Symbol.iterator:"@@iterator",B=typeof W=="symbol"?function(g){var w;return g!=null&&(w=g[W])&&w.apply(g)}:function(){return null};function F(g,w){return w=g.indexOf(w),0<=w&&g.splice(w,1),0<=w}var q={};function ae(g){var w,C,I,$;if(arguments.length===1){if(o(g))return g.slice();if(this===q&&typeof g=="string")return[g];if($=B(g)){for(C=[];!(I=$.next()).done;)C.push(I.value);return C}if(g==null)return[g];if(typeof(w=g.length)!="number")return[g];for(C=new Array(w);w--;)C[w]=g[w];return C}for(w=arguments.length,C=new Array(w);w--;)C[w]=arguments[w];return C}var ce=typeof Symbol<"u"?function(g){return g[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},wi=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Wi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(wi),ve={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function we(g,w){this.name=g,this.message=w}function Le(g,w){return g+". Errors: "+Object.keys(w).map(function(C){return w[C].toString()}).filter(function(C,I,$){return $.indexOf(C)===I}).join(`
`)}function Ye(g,w,C,I){this.failures=w,this.failedKeys=I,this.successCount=C,this.message=Le(g,w)}function et(g,w){this.name="BulkError",this.failures=Object.keys(w).map(function(C){return w[C]}),this.failuresByPos=w,this.message=Le(g,this.failures)}v(we).from(Error).extend({toString:function(){return this.name+": "+this.message}}),v(Ye).from(we),v(et).from(we);var ke=Wi.reduce(function(g,w){return g[w]=w+"Error",g},{}),We=we,Q=Wi.reduce(function(g,w){var C=w+"Error";function I($,V){this.name=C,$?typeof $=="string"?(this.message="".concat($).concat(V?`
 `+V:""),this.inner=V||null):typeof $=="object"&&(this.message="".concat($.name," ").concat($.message),this.inner=$):(this.message=ve[w]||C,this.inner=null)}return v(I).from(We),g[w]=I,g},{});Q.Syntax=SyntaxError,Q.Type=TypeError,Q.Range=RangeError;var Pe=wi.reduce(function(g,w){return g[w+"Error"]=Q[w],g},{}),xe=Wi.reduce(function(g,w){return["Syntax","Type","Range"].indexOf(w)===-1&&(g[w+"Error"]=Q[w]),g},{});function de(){}function pt(g){return g}function nt(g,w){return g==null||g===pt?w:function(C){return w(g(C))}}function Oe(g,w){return function(){g.apply(this,arguments),w.apply(this,arguments)}}function Ze(g,w){return g===de?w:function(){var C=g.apply(this,arguments);C!==void 0&&(arguments[0]=C);var I=this.onsuccess,$=this.onerror;this.onsuccess=null,this.onerror=null;var V=w.apply(this,arguments);return I&&(this.onsuccess=this.onsuccess?Oe(I,this.onsuccess):I),$&&(this.onerror=this.onerror?Oe($,this.onerror):$),V!==void 0?V:C}}function yn(g,w){return g===de?w:function(){g.apply(this,arguments);var C=this.onsuccess,I=this.onerror;this.onsuccess=this.onerror=null,w.apply(this,arguments),C&&(this.onsuccess=this.onsuccess?Oe(C,this.onsuccess):C),I&&(this.onerror=this.onerror?Oe(I,this.onerror):I)}}function Zr(g,w){return g===de?w:function(C){var I=g.apply(this,arguments);c(C,I);var $=this.onsuccess,V=this.onerror;return this.onsuccess=null,this.onerror=null,C=w.apply(this,arguments),$&&(this.onsuccess=this.onsuccess?Oe($,this.onsuccess):$),V&&(this.onerror=this.onerror?Oe(V,this.onerror):V),I===void 0?C===void 0?void 0:C:c(I,C)}}function bi(g,w){return g===de?w:function(){return w.apply(this,arguments)!==!1&&g.apply(this,arguments)}}function ei(g,w){return g===de?w:function(){var C=g.apply(this,arguments);if(C&&typeof C.then=="function"){for(var I=this,$=arguments.length,V=new Array($);$--;)V[$]=arguments[$];return C.then(function(){return w.apply(I,V)})}return w.apply(this,arguments)}}xe.ModifyError=Ye,xe.DexieError=we,xe.BulkError=et;var dn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ti(g){dn=g}var zr={},ca=100,qt=typeof Promise>"u"?[]:function(){var g=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[g,u(g),g];var w=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[w,u(w),g]}(),wi=qt[0],Wi=qt[1],qt=qt[2],Wi=Wi&&Wi.then,en=wi&&wi.constructor,za=!!qt,Fa=function(g,w){ye.push([g,w]),xo&&(queueMicrotask(Si),xo=!1)},yo=!0,xo=!0,Fr=[],xs=[],bo=pt,ni={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:de,pgp:!1,env:{},finalize:de},Be=ni,ye=[],qe=0,jn=[];function Ne(g){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var w=this._PSD=Be;if(typeof g!="function"){if(g!==zr)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&yt(this,this._value))}this._state=null,this._value=null,++w.ref,function C(I,$){try{$(function(V){if(I._state===null){if(V===I)throw new TypeError("A promise cannot be resolved with itself.");var K=I._lib&&Un();V&&typeof V.then=="function"?C(I,function(G,J){V instanceof Ne?V._then(G,J):V.then(G,J)}):(I._state=!0,I._value=V,On(I)),K&&tr()}},yt.bind(null,I))}catch(V){yt(I,V)}}(this,g)}var ut={get:function(){var g=Be,w=wu;function C(I,$){var V=this,K=!g.global&&(g!==Be||w!==wu),G=K&&!Bi(),J=new Ne(function(ee,re){_i(V,new Bn(_u(I,g,K,G),_u($,g,K,G),ee,re,g))});return this._consoleTask&&(J._consoleTask=this._consoleTask),J}return C.prototype=zr,C},set:function(g){y(this,"then",g&&g.prototype===zr?ut:{get:function(){return g},set:ut.set})}};function Bn(g,w,C,I,$){this.onFulfilled=typeof g=="function"?g:null,this.onRejected=typeof w=="function"?w:null,this.resolve=C,this.reject=I,this.psd=$}function yt(g,w){var C,I;xs.push(w),g._state===null&&(C=g._lib&&Un(),w=bo(w),g._state=!1,g._value=w,I=g,Fr.some(function($){return $._value===I._value})||Fr.push(I),On(g),C&&tr())}function On(g){var w=g._listeners;g._listeners=[];for(var C=0,I=w.length;C<I;++C)_i(g,w[C]);var $=g._PSD;--$.ref||$.finalize(),qe===0&&(++qe,Fa(function(){--qe==0&&fn()},[]))}function _i(g,w){if(g._state!==null){var C=g._state?w.onFulfilled:w.onRejected;if(C===null)return(g._state?w.resolve:w.reject)(g._value);++w.psd.ref,++qe,Fa(Va,[C,g,w])}else g._listeners.push(w)}function Va(g,w,C){try{var I,$=w._value;!w._state&&xs.length&&(xs=[]),I=dn&&w._consoleTask?w._consoleTask.run(function(){return g($)}):g($),w._state||xs.indexOf($)!==-1||function(V){for(var K=Fr.length;K;)if(Fr[--K]._value===V._value)return Fr.splice(K,1)}(w),C.resolve(I)}catch(V){C.reject(V)}finally{--qe==0&&fn(),--C.psd.ref||C.psd.finalize()}}function Si(){fa(ni,function(){Un()&&tr()})}function Un(){var g=yo;return xo=yo=!1,g}function tr(){var g,w,C;do for(;0<ye.length;)for(g=ye,ye=[],C=g.length,w=0;w<C;++w){var I=g[w];I[0].apply(null,I[1])}while(0<ye.length);xo=yo=!0}function fn(){var g=Fr;Fr=[],g.forEach(function(I){I._PSD.onunhandled.call(null,I._value,I)});for(var w=jn.slice(0),C=w.length;C;)w[--C]()}function bs(g){return new Ne(zr,!1,g)}function Tt(g,w){var C=Be;return function(){var I=Un(),$=Be;try{return da(C,!0),g.apply(this,arguments)}catch(V){w&&w(V)}finally{da($,!1),I&&tr()}}}h(Ne.prototype,{then:ut,_then:function(g,w){_i(this,new Bn(null,null,g,w,Be))},catch:function(g){if(arguments.length===1)return this.then(null,g);var w=g,C=arguments[1];return typeof w=="function"?this.then(null,function(I){return(I instanceof w?C:bs)(I)}):this.then(null,function(I){return(I&&I.name===w?C:bs)(I)})},finally:function(g){return this.then(function(w){return Ne.resolve(g()).then(function(){return w})},function(w){return Ne.resolve(g()).then(function(){return bs(w)})})},timeout:function(g,w){var C=this;return g<1/0?new Ne(function(I,$){var V=setTimeout(function(){return $(new Q.Timeout(w))},g);C.then(I,$).finally(clearTimeout.bind(null,V))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&y(Ne.prototype,Symbol.toStringTag,"Dexie.Promise"),ni.env=Jf(),h(Ne,{all:function(){var g=ae.apply(null,arguments).map(_s);return new Ne(function(w,C){g.length===0&&w([]);var I=g.length;g.forEach(function($,V){return Ne.resolve($).then(function(K){g[V]=K,--I||w(g)},C)})})},resolve:function(g){return g instanceof Ne?g:g&&typeof g.then=="function"?new Ne(function(w,C){g.then(w,C)}):new Ne(zr,!0,g)},reject:bs,race:function(){var g=ae.apply(null,arguments).map(_s);return new Ne(function(w,C){g.map(function(I){return Ne.resolve(I).then(w,C)})})},PSD:{get:function(){return Be},set:function(g){return Be=g}},totalEchoes:{get:function(){return wu}},newPSD:ji,usePSD:fa,scheduler:{get:function(){return Fa},set:function(g){Fa=g}},rejectionMapper:{get:function(){return bo},set:function(g){bo=g}},follow:function(g,w){return new Ne(function(C,I){return ji(function($,V){var K=Be;K.unhandleds=[],K.onunhandled=V,K.finalize=Oe(function(){var G,J=this;G=function(){J.unhandleds.length===0?$():V(J.unhandleds[0])},jn.push(function ee(){G(),jn.splice(jn.indexOf(ee),1)}),++qe,Fa(function(){--qe==0&&fn()},[])},K.finalize),g()},w,C,I)})}}),en&&(en.allSettled&&y(Ne,"allSettled",function(){var g=ae.apply(null,arguments).map(_s);return new Ne(function(w){g.length===0&&w([]);var C=g.length,I=new Array(C);g.forEach(function($,V){return Ne.resolve($).then(function(K){return I[V]={status:"fulfilled",value:K}},function(K){return I[V]={status:"rejected",reason:K}}).then(function(){return--C||w(I)})})})}),en.any&&typeof AggregateError<"u"&&y(Ne,"any",function(){var g=ae.apply(null,arguments).map(_s);return new Ne(function(w,C){g.length===0&&C(new AggregateError([]));var I=g.length,$=new Array(I);g.forEach(function(V,K){return Ne.resolve(V).then(function(G){return w(G)},function(G){$[K]=G,--I||C(new AggregateError($))})})})}),en.withResolvers&&(Ne.withResolvers=en.withResolvers));var Ht={awaits:0,echoes:0,id:0},Ab=0,bu=[],ua=0,wu=0,Pb=0;function ji(g,w,C,I){var $=Be,V=Object.create($);return V.parent=$,V.ref=0,V.global=!1,V.id=++Pb,ni.env,V.env=za?{Promise:Ne,PromiseProp:{value:Ne,configurable:!0,writable:!0},all:Ne.all,race:Ne.race,allSettled:Ne.allSettled,any:Ne.any,resolve:Ne.resolve,reject:Ne.reject}:{},w&&c(V,w),++$.ref,V.finalize=function(){--this.parent.ref||this.parent.finalize()},I=fa(V,g,C,I),V.ref===0&&V.finalize(),I}function ws(){return Ht.id||(Ht.id=++Ab),++Ht.awaits,Ht.echoes+=ca,Ht.id}function Bi(){return!!Ht.awaits&&(--Ht.awaits==0&&(Ht.id=0),Ht.echoes=Ht.awaits*ca,!0)}function _s(g){return Ht.echoes&&g&&g.constructor===en?(ws(),g.then(function(w){return Bi(),w},function(w){return Bi(),on(w)})):g}function Ba(){var g=bu[bu.length-1];bu.pop(),da(g,!1)}function da(g,w){var C,I=Be;(w?!Ht.echoes||ua++&&g===Be:!ua||--ua&&g===Be)||queueMicrotask(w?(function($){++wu,Ht.echoes&&--Ht.echoes!=0||(Ht.echoes=Ht.awaits=Ht.id=0),bu.push(Be),da($,!0)}).bind(null,g):Ba),g!==Be&&(Be=g,I===ni&&(ni.env=Jf()),za&&(C=ni.env.Promise,w=g.env,(I.global||g.global)&&(Object.defineProperty(a,"Promise",w.PromiseProp),C.all=w.all,C.race=w.race,C.resolve=w.resolve,C.reject=w.reject,w.allSettled&&(C.allSettled=w.allSettled),w.any&&(C.any=w.any))))}function Jf(){var g=a.Promise;return za?{Promise:g,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:g.all,race:g.race,allSettled:g.allSettled,any:g.any,resolve:g.resolve,reject:g.reject}:{}}function fa(g,w,C,I,$){var V=Be;try{return da(g,!0),w(C,I,$)}finally{da(V,!1)}}function _u(g,w,C,I){return typeof g!="function"?g:function(){var $=Be;C&&ws(),da(w,!0);try{return g.apply(this,arguments)}finally{da($,!1),I&&queueMicrotask(Bi)}}}function Su(g){Promise===en&&Ht.echoes===0?ua===0?g():enqueueNativeMicroTask(g):setTimeout(g,0)}(""+Wi).indexOf("[native code]")===-1&&(ws=Bi=de);var on=Ne.reject,Ss="￿",ri="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Zf="String expected.",Ua=[],Wa="__dbnames",ha="readonly",Ll="readwrite";function js(g,w){return g?w?function(){return g.apply(this,arguments)&&w.apply(this,arguments)}:g:w}var eh={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function $l(g){return typeof g!="string"||/\./.test(g)?function(w){return w}:function(w){return w[g]===void 0&&g in w&&delete(w=L(w))[g],w}}function th(){throw Q.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function mt(g,w){try{var C=ju(g),I=ju(w);if(C!==I)return C==="Array"?1:I==="Array"?-1:C==="binary"?1:I==="binary"?-1:C==="string"?1:I==="string"?-1:C==="Date"?1:I!=="Date"?NaN:-1;switch(C){case"number":case"Date":case"string":return w<g?1:g<w?-1:0;case"binary":return function($,V){for(var K=$.length,G=V.length,J=K<G?K:G,ee=0;ee<J;++ee)if($[ee]!==V[ee])return $[ee]<V[ee]?-1:1;return K===G?0:K<G?-1:1}(nh(g),nh(w));case"Array":return function($,V){for(var K=$.length,G=V.length,J=K<G?K:G,ee=0;ee<J;++ee){var re=mt($[ee],V[ee]);if(re!==0)return re}return K===G?0:K<G?-1:1}(g,w)}}catch{}return NaN}function ju(g){var w=typeof g;return w!="object"?w:ArrayBuffer.isView(g)?"binary":(g=X(g),g==="ArrayBuffer"?"binary":g)}function nh(g){return g instanceof Uint8Array?g:ArrayBuffer.isView(g)?new Uint8Array(g.buffer,g.byteOffset,g.byteLength):new Uint8Array(g)}function zl(g,w,C){var I=g.schema.yProps;return I?(w&&0<C.numFailures&&(w=w.filter(function($,V){return!C.failures[V]})),Promise.all(I.map(function($){return $=$.updatesTable,w?g.db.table($).where("k").anyOf(w).delete():g.db.table($).clear()})).then(function(){return C})):C}var jg=(Wt.prototype._trans=function(g,w,C){var I=this._tx||Be.trans,$=this.name,V=dn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(g==="readonly"?"read":"write"," ").concat(this.name));function K(ee,re,Y){if(!Y.schema[$])throw new Q.NotFound("Table "+$+" not part of transaction");return w(Y.idbtrans,Y)}var G=Un();try{var J=I&&I.db._novip===this.db._novip?I===Be.trans?I._promise(g,K,C):ji(function(){return I._promise(g,K,C)},{trans:I,transless:Be.transless||Be}):function ee(re,Y,oe,Z){if(re.idbdb&&(re._state.openComplete||Be.letThrough||re._vip)){var ne=re._createTransaction(Y,oe,re._dbSchema);try{ne.create(),re._state.PR1398_maxLoop=3}catch(se){return se.name===ke.InvalidState&&re.isOpen()&&0<--re._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),re.close({disableAutoOpen:!1}),re.open().then(function(){return ee(re,Y,oe,Z)})):on(se)}return ne._promise(Y,function(se,ie){return ji(function(){return Be.trans=ne,Z(se,ie,ne)})}).then(function(se){if(Y==="readwrite")try{ne.idbtrans.commit()}catch{}return Y==="readonly"?se:ne._completion.then(function(){return se})})}if(re._state.openComplete)return on(new Q.DatabaseClosed(re._state.dbOpenError));if(!re._state.isBeingOpened){if(!re._state.autoOpen)return on(new Q.DatabaseClosed);re.open().catch(de)}return re._state.dbReadyPromise.then(function(){return ee(re,Y,oe,Z)})}(this.db,g,[this.name],K);return V&&(J._consoleTask=V,J=J.catch(function(ee){return console.trace(ee),on(ee)})),J}finally{G&&tr()}},Wt.prototype.get=function(g,w){var C=this;return g&&g.constructor===Object?this.where(g).first(w):g==null?on(new Q.Type("Invalid argument to Table.get()")):this._trans("readonly",function(I){return C.core.get({trans:I,key:g}).then(function($){return C.hook.reading.fire($)})}).then(w)},Wt.prototype.where=function(g){if(typeof g=="string")return new this.db.WhereClause(this,g);if(o(g))return new this.db.WhereClause(this,"[".concat(g.join("+"),"]"));var w=s(g);if(w.length===1)return this.where(w[0]).equals(g[w[0]]);var C=this.schema.indexes.concat(this.schema.primKey).filter(function(G){if(G.compound&&w.every(function(ee){return 0<=G.keyPath.indexOf(ee)})){for(var J=0;J<w.length;++J)if(w.indexOf(G.keyPath[J])===-1)return!1;return!0}return!1}).sort(function(G,J){return G.keyPath.length-J.keyPath.length})[0];if(C&&this.db._maxKey!==Ss){var V=C.keyPath.slice(0,w.length);return this.where(V).equals(V.map(function(J){return g[J]}))}!C&&dn&&console.warn("The query ".concat(JSON.stringify(g)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(w.join("+"),"]"));var I=this.schema.idxByName;function $(G,J){return mt(G,J)===0}var K=w.reduce(function(Y,J){var ee=Y[0],re=Y[1],Y=I[J],oe=g[J];return[ee||Y,ee||!Y?js(re,Y&&Y.multi?function(Z){return Z=A(Z,J),o(Z)&&Z.some(function(ne){return $(oe,ne)})}:function(Z){return $(oe,A(Z,J))}):re]},[null,null]),V=K[0],K=K[1];return V?this.where(V.name).equals(g[V.keyPath]).filter(K):C?this.filter(K):this.where(w).equals("")},Wt.prototype.filter=function(g){return this.toCollection().and(g)},Wt.prototype.count=function(g){return this.toCollection().count(g)},Wt.prototype.offset=function(g){return this.toCollection().offset(g)},Wt.prototype.limit=function(g){return this.toCollection().limit(g)},Wt.prototype.each=function(g){return this.toCollection().each(g)},Wt.prototype.toArray=function(g){return this.toCollection().toArray(g)},Wt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Wt.prototype.orderBy=function(g){return new this.db.Collection(new this.db.WhereClause(this,o(g)?"[".concat(g.join("+"),"]"):g))},Wt.prototype.reverse=function(){return this.toCollection().reverse()},Wt.prototype.mapToClass=function(g){var w,C=this.db,I=this.name;function $(){return w!==null&&w.apply(this,arguments)||this}(this.schema.mappedClass=g).prototype instanceof th&&(function(J,ee){if(typeof ee!="function"&&ee!==null)throw new TypeError("Class extends value "+String(ee)+" is not a constructor or null");function re(){this.constructor=J}n(J,ee),J.prototype=ee===null?Object.create(ee):(re.prototype=ee.prototype,new re)}($,w=g),Object.defineProperty($.prototype,"db",{get:function(){return C},enumerable:!1,configurable:!0}),$.prototype.table=function(){return I},g=$);for(var V=new Set,K=g.prototype;K;K=u(K))Object.getOwnPropertyNames(K).forEach(function(J){return V.add(J)});function G(J){if(!J)return J;var ee,re=Object.create(g.prototype);for(ee in J)if(!V.has(ee))try{re[ee]=J[ee]}catch{}return re}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=G,this.hook("reading",G),g},Wt.prototype.defineClass=function(){return this.mapToClass(function(g){c(this,g)})},Wt.prototype.add=function(g,w){var C=this,I=this.schema.primKey,$=I.auto,V=I.keyPath,K=g;return V&&$&&(K=$l(V)(g)),this._trans("readwrite",function(G){return C.core.mutate({trans:G,type:"add",keys:w!=null?[w]:null,values:[K]})}).then(function(G){return G.numFailures?Ne.reject(G.failures[0]):G.lastResult}).then(function(G){if(V)try{j(g,V,G)}catch{}return G})},Wt.prototype.update=function(g,w){return typeof g!="object"||o(g)?this.where(":id").equals(g).modify(w):(g=A(g,this.schema.primKey.keyPath),g===void 0?on(new Q.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(g).modify(w))},Wt.prototype.put=function(g,w){var C=this,I=this.schema.primKey,$=I.auto,V=I.keyPath,K=g;return V&&$&&(K=$l(V)(g)),this._trans("readwrite",function(G){return C.core.mutate({trans:G,type:"put",values:[K],keys:w!=null?[w]:null})}).then(function(G){return G.numFailures?Ne.reject(G.failures[0]):G.lastResult}).then(function(G){if(V)try{j(g,V,G)}catch{}return G})},Wt.prototype.delete=function(g){var w=this;return this._trans("readwrite",function(C){return w.core.mutate({trans:C,type:"delete",keys:[g]}).then(function(I){return zl(w,[g],I)}).then(function(I){return I.numFailures?Ne.reject(I.failures[0]):void 0})})},Wt.prototype.clear=function(){var g=this;return this._trans("readwrite",function(w){return g.core.mutate({trans:w,type:"deleteRange",range:eh}).then(function(C){return zl(g,null,C)})}).then(function(w){return w.numFailures?Ne.reject(w.failures[0]):void 0})},Wt.prototype.bulkGet=function(g){var w=this;return this._trans("readonly",function(C){return w.core.getMany({keys:g,trans:C}).then(function(I){return I.map(function($){return w.hook.reading.fire($)})})})},Wt.prototype.bulkAdd=function(g,w,C){var I=this,$=Array.isArray(w)?w:void 0,V=(C=C||($?void 0:w))?C.allKeys:void 0;return this._trans("readwrite",function(K){var ee=I.schema.primKey,G=ee.auto,ee=ee.keyPath;if(ee&&$)throw new Q.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if($&&$.length!==g.length)throw new Q.InvalidArgument("Arguments objects and keys must have the same length");var J=g.length,ee=ee&&G?g.map($l(ee)):g;return I.core.mutate({trans:K,type:"add",keys:$,values:ee,wantResults:V}).then(function(ne){var Y=ne.numFailures,oe=ne.results,Z=ne.lastResult,ne=ne.failures;if(Y===0)return V?oe:Z;throw new et("".concat(I.name,".bulkAdd(): ").concat(Y," of ").concat(J," operations failed"),ne)})})},Wt.prototype.bulkPut=function(g,w,C){var I=this,$=Array.isArray(w)?w:void 0,V=(C=C||($?void 0:w))?C.allKeys:void 0;return this._trans("readwrite",function(K){var ee=I.schema.primKey,G=ee.auto,ee=ee.keyPath;if(ee&&$)throw new Q.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if($&&$.length!==g.length)throw new Q.InvalidArgument("Arguments objects and keys must have the same length");var J=g.length,ee=ee&&G?g.map($l(ee)):g;return I.core.mutate({trans:K,type:"put",keys:$,values:ee,wantResults:V}).then(function(ne){var Y=ne.numFailures,oe=ne.results,Z=ne.lastResult,ne=ne.failures;if(Y===0)return V?oe:Z;throw new et("".concat(I.name,".bulkPut(): ").concat(Y," of ").concat(J," operations failed"),ne)})})},Wt.prototype.bulkUpdate=function(g){var w=this,C=this.core,I=g.map(function(K){return K.key}),$=g.map(function(K){return K.changes}),V=[];return this._trans("readwrite",function(K){return C.getMany({trans:K,keys:I,cache:"clone"}).then(function(G){var J=[],ee=[];g.forEach(function(Y,oe){var Z=Y.key,ne=Y.changes,se=G[oe];if(se){for(var ie=0,le=Object.keys(ne);ie<le.length;ie++){var fe=le[ie],pe=ne[fe];if(fe===w.schema.primKey.keyPath){if(mt(pe,Z)!==0)throw new Q.Constraint("Cannot update primary key in bulkUpdate()")}else j(se,fe,pe)}V.push(oe),J.push(Z),ee.push(se)}});var re=J.length;return C.mutate({trans:K,type:"put",keys:J,values:ee,updates:{keys:I,changeSpecs:$}}).then(function(Y){var oe=Y.numFailures,Z=Y.failures;if(oe===0)return re;for(var ne=0,se=Object.keys(Z);ne<se.length;ne++){var ie,le=se[ne],fe=V[Number(le)];fe!=null&&(ie=Z[le],delete Z[le],Z[fe]=ie)}throw new et("".concat(w.name,".bulkUpdate(): ").concat(oe," of ").concat(re," operations failed"),Z)})})})},Wt.prototype.bulkDelete=function(g){var w=this,C=g.length;return this._trans("readwrite",function(I){return w.core.mutate({trans:I,type:"delete",keys:g}).then(function($){return zl(w,g,$)})}).then(function(K){var $=K.numFailures,V=K.lastResult,K=K.failures;if($===0)return V;throw new et("".concat(w.name,".bulkDelete(): ").concat($," of ").concat(C," operations failed"),K)})},Wt);function Wt(){}function wo(g){function w(K,G){if(G){for(var J=arguments.length,ee=new Array(J-1);--J;)ee[J-1]=arguments[J];return C[K].subscribe.apply(null,ee),g}if(typeof K=="string")return C[K]}var C={};w.addEventType=V;for(var I=1,$=arguments.length;I<$;++I)V(arguments[I]);return w;function V(K,G,J){if(typeof K!="object"){var ee;G=G||bi;var re={subscribers:[],fire:J=J||de,subscribe:function(Y){re.subscribers.indexOf(Y)===-1&&(re.subscribers.push(Y),re.fire=G(re.fire,Y))},unsubscribe:function(Y){re.subscribers=re.subscribers.filter(function(oe){return oe!==Y}),re.fire=re.subscribers.reduce(G,J)}};return C[K]=w[K]=re}s(ee=K).forEach(function(Y){var oe=ee[Y];if(o(oe))V(Y,ee[Y][0],ee[Y][1]);else{if(oe!=="asap")throw new Q.InvalidArgument("Invalid event config");var Z=V(Y,pt,function(){for(var ne=arguments.length,se=new Array(ne);ne--;)se[ne]=arguments[ne];Z.subscribers.forEach(function(ie){E(function(){ie.apply(null,se)})})})}})}}function _o(g,w){return v(w).from({prototype:g}),w}function So(g,w){return!(g.filter||g.algorithm||g.or)&&(w?g.justLimit:!g.replayFilter)}function pa(g,w){g.filter=js(g.filter,w)}function Ai(g,w,C){var I=g.replayFilter;g.replayFilter=I?function(){return js(I(),w())}:w,g.justLimit=C&&!I}function As(g,w){if(g.isPrimKey)return w.primaryKey;var C=w.getIndexByKeyPath(g.index);if(!C)throw new Q.Schema("KeyPath "+g.index+" on object store "+w.name+" is not indexed");return C}function Fl(g,w,C){var I=As(g,w.schema);return w.openCursor({trans:C,values:!g.keysOnly,reverse:g.dir==="prev",unique:!!g.unique,query:{index:I,range:g.range}})}function Vl(g,w,C,I){var $=g.replayFilter?js(g.filter,g.replayFilter()):g.filter;if(g.or){var V={},K=function(G,J,ee){var re,Y;$&&!$(J,ee,function(oe){return J.stop(oe)},function(oe){return J.fail(oe)})||((Y=""+(re=J.primaryKey))=="[object ArrayBuffer]"&&(Y=""+new Uint8Array(re)),f(V,Y)||(V[Y]=!0,w(G,J,ee)))};return Promise.all([g.or._iterate(K,C),zt(Fl(g,I,C),g.algorithm,K,!g.keysOnly&&g.valueMapper)])}return zt(Fl(g,I,C),js(g.algorithm,$),w,!g.keysOnly&&g.valueMapper)}function zt(g,w,C,I){var $=Tt(I?function(V,K,G){return C(I(V),K,G)}:C);return g.then(function(V){if(V)return V.start(function(){var K=function(){return V.continue()};w&&!w(V,function(G){return K=G},function(G){V.stop(G),K=de},function(G){V.fail(G),K=de})||$(V.value,V,function(G){return K=G}),K()})})}var Ka=(jo.prototype.execute=function(g){var w=this["@@propmod"];if(w.add!==void 0){var C=w.add;if(o(C))return i(i([],o(g)?g:[],!0),C).sort();if(typeof C=="number")return(Number(g)||0)+C;if(typeof C=="bigint")try{return BigInt(g)+C}catch{return BigInt(0)+C}throw new TypeError("Invalid term ".concat(C))}if(w.remove!==void 0){var I=w.remove;if(o(I))return o(g)?g.filter(function($){return!I.includes($)}).sort():[];if(typeof I=="number")return Number(g)-I;if(typeof I=="bigint")try{return BigInt(g)-I}catch{return BigInt(0)-I}throw new TypeError("Invalid subtrahend ".concat(I))}return C=(C=w.replacePrefix)===null||C===void 0?void 0:C[0],C&&typeof g=="string"&&g.startsWith(C)?w.replacePrefix[1]+g.substring(C.length):g},jo);function jo(g){this["@@propmod"]=g}var Bl=(_t.prototype._read=function(g,w){var C=this._ctx;return C.error?C.table._trans(null,on.bind(null,C.error)):C.table._trans("readonly",g).then(w)},_t.prototype._write=function(g){var w=this._ctx;return w.error?w.table._trans(null,on.bind(null,w.error)):w.table._trans("readwrite",g,"locked")},_t.prototype._addAlgorithm=function(g){var w=this._ctx;w.algorithm=js(w.algorithm,g)},_t.prototype._iterate=function(g,w){return Vl(this._ctx,g,w,this._ctx.table.core)},_t.prototype.clone=function(g){var w=Object.create(this.constructor.prototype),C=Object.create(this._ctx);return g&&c(C,g),w._ctx=C,w},_t.prototype.raw=function(){return this._ctx.valueMapper=null,this},_t.prototype.each=function(g){var w=this._ctx;return this._read(function(C){return Vl(w,g,C,w.table.core)})},_t.prototype.count=function(g){var w=this;return this._read(function(C){var I=w._ctx,$=I.table.core;if(So(I,!0))return $.count({trans:C,query:{index:As(I,$.schema),range:I.range}}).then(function(K){return Math.min(K,I.limit)});var V=0;return Vl(I,function(){return++V,!1},C,$).then(function(){return V})}).then(g)},_t.prototype.sortBy=function(g,w){var C=g.split(".").reverse(),I=C[0],$=C.length-1;function V(J,ee){return ee?V(J[C[ee]],ee-1):J[I]}var K=this._ctx.dir==="next"?1:-1;function G(J,ee){return mt(V(J,$),V(ee,$))*K}return this.toArray(function(J){return J.sort(G)}).then(w)},_t.prototype.toArray=function(g){var w=this;return this._read(function(C){var I=w._ctx;if(I.dir==="next"&&So(I,!0)&&0<I.limit){var $=I.valueMapper,V=As(I,I.table.core.schema);return I.table.core.query({trans:C,limit:I.limit,values:!0,query:{index:V,range:I.range}}).then(function(G){return G=G.result,$?G.map($):G})}var K=[];return Vl(I,function(G){return K.push(G)},C,I.table.core).then(function(){return K})},g)},_t.prototype.offset=function(g){var w=this._ctx;return g<=0||(w.offset+=g,So(w)?Ai(w,function(){var C=g;return function(I,$){return C===0||(C===1?--C:$(function(){I.advance(C),C=0}),!1)}}):Ai(w,function(){var C=g;return function(){return--C<0}})),this},_t.prototype.limit=function(g){return this._ctx.limit=Math.min(this._ctx.limit,g),Ai(this._ctx,function(){var w=g;return function(C,I,$){return--w<=0&&I($),0<=w}},!0),this},_t.prototype.until=function(g,w){return pa(this._ctx,function(C,I,$){return!g(C.value)||(I($),w)}),this},_t.prototype.first=function(g){return this.limit(1).toArray(function(w){return w[0]}).then(g)},_t.prototype.last=function(g){return this.reverse().first(g)},_t.prototype.filter=function(g){var w;return pa(this._ctx,function(C){return g(C.value)}),(w=this._ctx).isMatch=js(w.isMatch,g),this},_t.prototype.and=function(g){return this.filter(g)},_t.prototype.or=function(g){return new this.db.WhereClause(this._ctx.table,g,this)},_t.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},_t.prototype.desc=function(){return this.reverse()},_t.prototype.eachKey=function(g){var w=this._ctx;return w.keysOnly=!w.isMatch,this.each(function(C,I){g(I.key,I)})},_t.prototype.eachUniqueKey=function(g){return this._ctx.unique="unique",this.eachKey(g)},_t.prototype.eachPrimaryKey=function(g){var w=this._ctx;return w.keysOnly=!w.isMatch,this.each(function(C,I){g(I.primaryKey,I)})},_t.prototype.keys=function(g){var w=this._ctx;w.keysOnly=!w.isMatch;var C=[];return this.each(function(I,$){C.push($.key)}).then(function(){return C}).then(g)},_t.prototype.primaryKeys=function(g){var w=this._ctx;if(w.dir==="next"&&So(w,!0)&&0<w.limit)return this._read(function(I){var $=As(w,w.table.core.schema);return w.table.core.query({trans:I,values:!1,limit:w.limit,query:{index:$,range:w.range}})}).then(function(I){return I.result}).then(g);w.keysOnly=!w.isMatch;var C=[];return this.each(function(I,$){C.push($.primaryKey)}).then(function(){return C}).then(g)},_t.prototype.uniqueKeys=function(g){return this._ctx.unique="unique",this.keys(g)},_t.prototype.firstKey=function(g){return this.limit(1).keys(function(w){return w[0]}).then(g)},_t.prototype.lastKey=function(g){return this.reverse().firstKey(g)},_t.prototype.distinct=function(){var g=this._ctx,g=g.index&&g.table.schema.idxByName[g.index];if(!g||!g.multi)return this;var w={};return pa(this._ctx,function($){var I=$.primaryKey.toString(),$=f(w,I);return w[I]=!0,!$}),this},_t.prototype.modify=function(g){var w=this,C=this._ctx;return this._write(function(I){var $,V,K;K=typeof g=="function"?g:($=s(g),V=$.length,function(le){for(var fe=!1,pe=0;pe<V;++pe){var me=$[pe],Se=g[me],De=A(le,me);Se instanceof Ka?(j(le,me,Se.execute(De)),fe=!0):De!==Se&&(j(le,me,Se),fe=!0)}return fe});var G=C.table.core,Y=G.schema.primaryKey,J=Y.outbound,ee=Y.extractKey,re=200,Y=w.db._options.modifyChunkSize;Y&&(re=typeof Y=="object"?Y[G.name]||Y["*"]||200:Y);function oe(le,me){var pe=me.failures,me=me.numFailures;ne+=le-me;for(var Se=0,De=s(pe);Se<De.length;Se++){var Ee=De[Se];Z.push(pe[Ee])}}var Z=[],ne=0,se=[],ie=g===rh;return w.clone().primaryKeys().then(function(le){function fe(me){var Se=Math.min(re,le.length-me),De=le.slice(me,me+Se);return(ie?Promise.resolve([]):G.getMany({trans:I,keys:De,cache:"immutable"})).then(function(Ee){var Te=[],Re=[],Me=J?[]:null,$e=ie?De:[];if(!ie)for(var ft=0;ft<Se;++ft){var St=Ee[ft],ot={value:L(St),primKey:le[me+ft]};K.call(ot,ot.value,ot)!==!1&&(ot.value==null?$e.push(le[me+ft]):J||mt(ee(St),ee(ot.value))===0?(Re.push(ot.value),J&&Me.push(le[me+ft])):($e.push(le[me+ft]),Te.push(ot.value)))}return Promise.resolve(0<Te.length&&G.mutate({trans:I,type:"add",values:Te}).then(function(xn){for(var at in xn.failures)$e.splice(parseInt(at),1);oe(Te.length,xn)})).then(function(){return(0<Re.length||pe&&typeof g=="object")&&G.mutate({trans:I,type:"put",keys:Me,values:Re,criteria:pe,changeSpec:typeof g!="function"&&g,isAdditionalChunk:0<me}).then(function(xn){return oe(Re.length,xn)})}).then(function(){return(0<$e.length||pe&&ie)&&G.mutate({trans:I,type:"delete",keys:$e,criteria:pe,isAdditionalChunk:0<me}).then(function(xn){return zl(C.table,$e,xn)}).then(function(xn){return oe($e.length,xn)})}).then(function(){return le.length>me+Se&&fe(me+re)})})}var pe=So(C)&&C.limit===1/0&&(typeof g!="function"||ie)&&{index:C.index,range:C.range};return fe(0).then(function(){if(0<Z.length)throw new Ye("Error modifying one or more objects",Z,ne,se);return le.length})})})},_t.prototype.delete=function(){var g=this._ctx,w=g.range;return!So(g)||g.table.schema.yProps||!g.isPrimKey&&w.type!==3?this.modify(rh):this._write(function(C){var I=g.table.core.schema.primaryKey,$=w;return g.table.core.count({trans:C,query:{index:I,range:$}}).then(function(V){return g.table.core.mutate({trans:C,type:"deleteRange",range:$}).then(function(J){var G=J.failures,J=J.numFailures;if(J)throw new Ye("Could not delete some values",Object.keys(G).map(function(ee){return G[ee]}),V-J);return V-J})})})},_t);function _t(){}var rh=function(g,w){return w.value=null};function Eb(g,w){return g<w?-1:g===w?0:1}function Tb(g,w){return w<g?-1:g===w?0:1}function Vr(g,w,C){return g=g instanceof ah?new g.Collection(g):g,g._ctx.error=new(C||TypeError)(w),g}function Ao(g){return new g.Collection(g,function(){return ih("")}).limit(0)}function qa(g,w,C,I){var $,V,K,G,J,ee,re,Y=C.length;if(!C.every(function(ne){return typeof ne=="string"}))return Vr(g,Zf);function oe(ne){$=ne==="next"?function(ie){return ie.toUpperCase()}:function(ie){return ie.toLowerCase()},V=ne==="next"?function(ie){return ie.toLowerCase()}:function(ie){return ie.toUpperCase()},K=ne==="next"?Eb:Tb;var se=C.map(function(ie){return{lower:V(ie),upper:$(ie)}}).sort(function(ie,le){return K(ie.lower,le.lower)});G=se.map(function(ie){return ie.upper}),J=se.map(function(ie){return ie.lower}),re=(ee=ne)==="next"?"":I}oe("next"),g=new g.Collection(g,function(){return fr(G[0],J[Y-1]+I)}),g._ondirectionchange=function(ne){oe(ne)};var Z=0;return g._addAlgorithm(function(ne,se,ie){var le=ne.key;if(typeof le!="string")return!1;var fe=V(le);if(w(fe,J,Z))return!0;for(var pe=null,me=Z;me<Y;++me){var Se=function(De,Ee,Te,Re,Me,$e){for(var ft=Math.min(De.length,Re.length),St=-1,ot=0;ot<ft;++ot){var xn=Ee[ot];if(xn!==Re[ot])return Me(De[ot],Te[ot])<0?De.substr(0,ot)+Te[ot]+Te.substr(ot+1):Me(De[ot],Re[ot])<0?De.substr(0,ot)+Re[ot]+Te.substr(ot+1):0<=St?De.substr(0,St)+Ee[St]+Te.substr(St+1):null;Me(De[ot],xn)<0&&(St=ot)}return ft<Re.length&&$e==="next"?De+Te.substr(De.length):ft<De.length&&$e==="prev"?De.substr(0,Te.length):St<0?null:De.substr(0,St)+Re[St]+Te.substr(St+1)}(le,fe,G[me],J[me],K,ee);Se===null&&pe===null?Z=me+1:(pe===null||0<K(pe,Se))&&(pe=Se)}return se(pe!==null?function(){ne.continue(pe+re)}:ie),!1}),g}function fr(g,w,C,I){return{type:2,lower:g,upper:w,lowerOpen:C,upperOpen:I}}function ih(g){return{type:1,lower:g,upper:g}}var ah=(Object.defineProperty(An.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),An.prototype.between=function(g,w,C,I){C=C!==!1,I=I===!0;try{return 0<this._cmp(g,w)||this._cmp(g,w)===0&&(C||I)&&(!C||!I)?Ao(this):new this.Collection(this,function(){return fr(g,w,!C,!I)})}catch{return Vr(this,ri)}},An.prototype.equals=function(g){return g==null?Vr(this,ri):new this.Collection(this,function(){return ih(g)})},An.prototype.above=function(g){return g==null?Vr(this,ri):new this.Collection(this,function(){return fr(g,void 0,!0)})},An.prototype.aboveOrEqual=function(g){return g==null?Vr(this,ri):new this.Collection(this,function(){return fr(g,void 0,!1)})},An.prototype.below=function(g){return g==null?Vr(this,ri):new this.Collection(this,function(){return fr(void 0,g,!1,!0)})},An.prototype.belowOrEqual=function(g){return g==null?Vr(this,ri):new this.Collection(this,function(){return fr(void 0,g)})},An.prototype.startsWith=function(g){return typeof g!="string"?Vr(this,Zf):this.between(g,g+Ss,!0,!0)},An.prototype.startsWithIgnoreCase=function(g){return g===""?this.startsWith(g):qa(this,function(w,C){return w.indexOf(C[0])===0},[g],Ss)},An.prototype.equalsIgnoreCase=function(g){return qa(this,function(w,C){return w===C[0]},[g],"")},An.prototype.anyOfIgnoreCase=function(){var g=ae.apply(q,arguments);return g.length===0?Ao(this):qa(this,function(w,C){return C.indexOf(w)!==-1},g,"")},An.prototype.startsWithAnyOfIgnoreCase=function(){var g=ae.apply(q,arguments);return g.length===0?Ao(this):qa(this,function(w,C){return C.some(function(I){return w.indexOf(I)===0})},g,Ss)},An.prototype.anyOf=function(){var g=this,w=ae.apply(q,arguments),C=this._cmp;try{w.sort(C)}catch{return Vr(this,ri)}if(w.length===0)return Ao(this);var I=new this.Collection(this,function(){return fr(w[0],w[w.length-1])});I._ondirectionchange=function(V){C=V==="next"?g._ascending:g._descending,w.sort(C)};var $=0;return I._addAlgorithm(function(V,K,G){for(var J=V.key;0<C(J,w[$]);)if(++$===w.length)return K(G),!1;return C(J,w[$])===0||(K(function(){V.continue(w[$])}),!1)}),I},An.prototype.notEqual=function(g){return this.inAnyRange([[-1/0,g],[g,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},An.prototype.noneOf=function(){var g=ae.apply(q,arguments);if(g.length===0)return new this.Collection(this);try{g.sort(this._ascending)}catch{return Vr(this,ri)}var w=g.reduce(function(C,I){return C?C.concat([[C[C.length-1][1],I]]):[[-1/0,I]]},null);return w.push([g[g.length-1],this.db._maxKey]),this.inAnyRange(w,{includeLowers:!1,includeUppers:!1})},An.prototype.inAnyRange=function(le,w){var C=this,I=this._cmp,$=this._ascending,V=this._descending,K=this._min,G=this._max;if(le.length===0)return Ao(this);if(!le.every(function(fe){return fe[0]!==void 0&&fe[1]!==void 0&&$(fe[0],fe[1])<=0}))return Vr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Q.InvalidArgument);var J=!w||w.includeLowers!==!1,ee=w&&w.includeUppers===!0,re,Y=$;function oe(fe,pe){return Y(fe[0],pe[0])}try{(re=le.reduce(function(fe,pe){for(var me=0,Se=fe.length;me<Se;++me){var De=fe[me];if(I(pe[0],De[1])<0&&0<I(pe[1],De[0])){De[0]=K(De[0],pe[0]),De[1]=G(De[1],pe[1]);break}}return me===Se&&fe.push(pe),fe},[])).sort(oe)}catch{return Vr(this,ri)}var Z=0,ne=ee?function(fe){return 0<$(fe,re[Z][1])}:function(fe){return 0<=$(fe,re[Z][1])},se=J?function(fe){return 0<V(fe,re[Z][0])}:function(fe){return 0<=V(fe,re[Z][0])},ie=ne,le=new this.Collection(this,function(){return fr(re[0][0],re[re.length-1][1],!J,!ee)});return le._ondirectionchange=function(fe){Y=fe==="next"?(ie=ne,$):(ie=se,V),re.sort(oe)},le._addAlgorithm(function(fe,pe,me){for(var Se,De=fe.key;ie(De);)if(++Z===re.length)return pe(me),!1;return!ne(Se=De)&&!se(Se)||(C._cmp(De,re[Z][1])===0||C._cmp(De,re[Z][0])===0||pe(function(){Y===$?fe.continue(re[Z][0]):fe.continue(re[Z][1])}),!1)}),le},An.prototype.startsWithAnyOf=function(){var g=ae.apply(q,arguments);return g.every(function(w){return typeof w=="string"})?g.length===0?Ao(this):this.inAnyRange(g.map(function(w){return[w,w+Ss]})):Vr(this,"startsWithAnyOf() only works with strings")},An);function An(){}function hr(g){return Tt(function(w){return Ul(w),g(w.target.error),!1})}function Ul(g){g.stopPropagation&&g.stopPropagation(),g.preventDefault&&g.preventDefault()}var Wl="storagemutated",sh="x-storagemutated-1",pr=wo(null,Wl),Cb=(Ui.prototype._lock=function(){return T(!Be.global),++this._reculock,this._reculock!==1||Be.global||(Be.lockOwnerFor=this),this},Ui.prototype._unlock=function(){if(T(!Be.global),--this._reculock==0)for(Be.global||(Be.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var g=this._blockedFuncs.shift();try{fa(g[1],g[0])}catch{}}return this},Ui.prototype._locked=function(){return this._reculock&&Be.lockOwnerFor!==this},Ui.prototype.create=function(g){var w=this;if(!this.mode)return this;var C=this.db.idbdb,I=this.db._state.dbOpenError;if(T(!this.idbtrans),!g&&!C)switch(I&&I.name){case"DatabaseClosedError":throw new Q.DatabaseClosed(I);case"MissingAPIError":throw new Q.MissingAPI(I.message,I);default:throw new Q.OpenFailed(I)}if(!this.active)throw new Q.TransactionInactive;return T(this._completion._state===null),(g=this.idbtrans=g||(this.db.core||C).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Tt(function($){Ul($),w._reject(g.error)}),g.onabort=Tt(function($){Ul($),w.active&&w._reject(new Q.Abort(g.error)),w.active=!1,w.on("abort").fire($)}),g.oncomplete=Tt(function(){w.active=!1,w._resolve(),"mutatedParts"in g&&pr.storagemutated.fire(g.mutatedParts)}),this},Ui.prototype._promise=function(g,w,C){var I=this;if(g==="readwrite"&&this.mode!=="readwrite")return on(new Q.ReadOnly("Transaction is readonly"));if(!this.active)return on(new Q.TransactionInactive);if(this._locked())return new Ne(function(V,K){I._blockedFuncs.push([function(){I._promise(g,w,C).then(V,K)},Be])});if(C)return ji(function(){var V=new Ne(function(K,G){I._lock();var J=w(K,G,I);J&&J.then&&J.then(K,G)});return V.finally(function(){return I._unlock()}),V._lib=!0,V});var $=new Ne(function(V,K){var G=w(V,K,I);G&&G.then&&G.then(V,K)});return $._lib=!0,$},Ui.prototype._root=function(){return this.parent?this.parent._root():this},Ui.prototype.waitFor=function(g){var w,C=this._root(),I=Ne.resolve(g);C._waitingFor?C._waitingFor=C._waitingFor.then(function(){return I}):(C._waitingFor=I,C._waitingQueue=[],w=C.idbtrans.objectStore(C.storeNames[0]),function V(){for(++C._spinCount;C._waitingQueue.length;)C._waitingQueue.shift()();C._waitingFor&&(w.get(-1/0).onsuccess=V)}());var $=C._waitingFor;return new Ne(function(V,K){I.then(function(G){return C._waitingQueue.push(Tt(V.bind(null,G)))},function(G){return C._waitingQueue.push(Tt(K.bind(null,G)))}).finally(function(){C._waitingFor===$&&(C._waitingFor=null)})})},Ui.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Q.Abort))},Ui.prototype.table=function(g){var w=this._memoizedTables||(this._memoizedTables={});if(f(w,g))return w[g];var C=this.schema[g];if(!C)throw new Q.NotFound("Table "+g+" not part of transaction");return C=new this.db.Table(g,C,this),C.core=this.db.core.table(g),w[g]=C},Ui);function Ui(){}function Po(g,w,C,I,$,V,K,G){return{name:g,keyPath:w,unique:C,multi:I,auto:$,compound:V,src:(C&&!K?"&":"")+(I?"*":"")+($?"++":"")+Kl(w),type:G}}function Kl(g){return typeof g=="string"?g:g?"["+[].join.call(g,"+")+"]":""}function Au(g,w,C){return{name:g,primKey:w,indexes:C,mappedClass:null,idxByName:(I=function($){return[$.name,$]},C.reduce(function($,V,K){return K=I(V,K),K&&($[K[0]]=K[1]),$},{}))};var I}var ma=function(g){try{return g.only([[]]),ma=function(){return[[]]},[[]]}catch{return ma=function(){return Ss},Ss}};function Ps(g){return g==null?function(){}:typeof g=="string"?(w=g).split(".").length===1?function(C){return C[w]}:function(C){return A(C,w)}:function(C){return A(C,g)};var w}function oh(g){return[].slice.call(g)}var lh=0;function Ft(g){return g==null?":id":typeof g=="string"?g:"[".concat(g.join("+"),"]")}function Nb(g,w,J){function I(ie){if(ie.type===3)return null;if(ie.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Z=ie.lower,ne=ie.upper,se=ie.lowerOpen,ie=ie.upperOpen;return Z===void 0?ne===void 0?null:w.upperBound(ne,!!ie):ne===void 0?w.lowerBound(Z,!!se):w.bound(Z,ne,!!se,!!ie)}function $(oe){var Z,ne=oe.name;return{name:ne,schema:oe,mutate:function(se){var ie=se.trans,le=se.type,fe=se.keys,pe=se.values,me=se.range;return new Promise(function(Se,De){Se=Tt(Se);var Ee=ie.objectStore(ne),Te=Ee.keyPath==null,Re=le==="put"||le==="add";if(!Re&&le!=="delete"&&le!=="deleteRange")throw new Error("Invalid operation type: "+le);var Me,$e=(fe||pe||{length:1}).length;if(fe&&pe&&fe.length!==pe.length)throw new Error("Given keys array must have same length as given values array.");if($e===0)return Se({numFailures:0,failures:{},results:[],lastResult:void 0});function ft(Br){++xn,Ul(Br)}var St=[],ot=[],xn=0;if(le==="deleteRange"){if(me.type===4)return Se({numFailures:xn,failures:ot,results:[],lastResult:void 0});me.type===3?St.push(Me=Ee.clear()):St.push(Me=Ee.delete(I(me)))}else{var Te=Re?Te?[pe,fe]:[pe,null]:[fe,null],at=Te[0],Er=Te[1];if(Re)for(var Tr=0;Tr<$e;++Tr)St.push(Me=Er&&Er[Tr]!==void 0?Ee[le](at[Tr],Er[Tr]):Ee[le](at[Tr])),Me.onerror=ft;else for(Tr=0;Tr<$e;++Tr)St.push(Me=Ee[le](at[Tr])),Me.onerror=ft}function Tg(Br){Br=Br.target.result,St.forEach(function(ec,Db){return ec.error!=null&&(ot[Db]=ec.error)}),Se({numFailures:xn,failures:ot,results:le==="delete"?fe:St.map(function(ec){return ec.result}),lastResult:Br})}Me.onerror=function(Br){ft(Br),Tg(Br)},Me.onsuccess=Tg})},getMany:function(se){var ie=se.trans,le=se.keys;return new Promise(function(fe,pe){fe=Tt(fe);for(var me,Se=ie.objectStore(ne),De=le.length,Ee=new Array(De),Te=0,Re=0,Me=function(St){St=St.target,Ee[St._pos]=St.result,++Re===Te&&fe(Ee)},$e=hr(pe),ft=0;ft<De;++ft)le[ft]!=null&&((me=Se.get(le[ft]))._pos=ft,me.onsuccess=Me,me.onerror=$e,++Te);Te===0&&fe(Ee)})},get:function(se){var ie=se.trans,le=se.key;return new Promise(function(fe,pe){fe=Tt(fe);var me=ie.objectStore(ne).get(le);me.onsuccess=function(Se){return fe(Se.target.result)},me.onerror=hr(pe)})},query:(Z=ee,function(se){return new Promise(function(ie,le){ie=Tt(ie);var fe,pe,me,Te=se.trans,Se=se.values,De=se.limit,Me=se.query,Ee=De===1/0?void 0:De,Re=Me.index,Me=Me.range,Te=Te.objectStore(ne),Re=Re.isPrimaryKey?Te:Te.index(Re.name),Me=I(Me);if(De===0)return ie({result:[]});Z?((Ee=Se?Re.getAll(Me,Ee):Re.getAllKeys(Me,Ee)).onsuccess=function($e){return ie({result:$e.target.result})},Ee.onerror=hr(le)):(fe=0,pe=!Se&&"openKeyCursor"in Re?Re.openKeyCursor(Me):Re.openCursor(Me),me=[],pe.onsuccess=function($e){var ft=pe.result;return ft?(me.push(Se?ft.value:ft.primaryKey),++fe===De?ie({result:me}):void ft.continue()):ie({result:me})},pe.onerror=hr(le))})}),openCursor:function(se){var ie=se.trans,le=se.values,fe=se.query,pe=se.reverse,me=se.unique;return new Promise(function(Se,De){Se=Tt(Se);var Re=fe.index,Ee=fe.range,Te=ie.objectStore(ne),Te=Re.isPrimaryKey?Te:Te.index(Re.name),Re=pe?me?"prevunique":"prev":me?"nextunique":"next",Me=!le&&"openKeyCursor"in Te?Te.openKeyCursor(I(Ee),Re):Te.openCursor(I(Ee),Re);Me.onerror=hr(De),Me.onsuccess=Tt(function($e){var ft,St,ot,xn,at=Me.result;at?(at.___id=++lh,at.done=!1,ft=at.continue.bind(at),St=(St=at.continuePrimaryKey)&&St.bind(at),ot=at.advance.bind(at),xn=function(){throw new Error("Cursor not stopped")},at.trans=ie,at.stop=at.continue=at.continuePrimaryKey=at.advance=function(){throw new Error("Cursor not started")},at.fail=Tt(De),at.next=function(){var Er=this,Tr=1;return this.start(function(){return Tr--?Er.continue():Er.stop()}).then(function(){return Er})},at.start=function(Er){function Tr(){if(Me.result)try{Er()}catch(Br){at.fail(Br)}else at.done=!0,at.start=function(){throw new Error("Cursor behind last entry")},at.stop()}var Tg=new Promise(function(Br,ec){Br=Tt(Br),Me.onerror=hr(ec),at.fail=ec,at.stop=function(Db){at.stop=at.continue=at.continuePrimaryKey=at.advance=xn,Br(Db)}});return Me.onsuccess=Tt(function(Br){Me.onsuccess=Tr,Tr()}),at.continue=ft,at.continuePrimaryKey=St,at.advance=ot,Tr(),Tg},Se(at)):Se(null)},De)})},count:function(se){var ie=se.query,le=se.trans,fe=ie.index,pe=ie.range;return new Promise(function(me,Se){var De=le.objectStore(ne),Ee=fe.isPrimaryKey?De:De.index(fe.name),De=I(pe),Ee=De?Ee.count(De):Ee.count();Ee.onsuccess=Tt(function(Te){return me(Te.target.result)}),Ee.onerror=hr(Se)})}}}var V,K,G,re=(K=J,G=oh((V=g).objectStoreNames),{schema:{name:V.name,tables:G.map(function(oe){return K.objectStore(oe)}).map(function(oe){var Z=oe.keyPath,ie=oe.autoIncrement,ne=o(Z),se={},ie={name:oe.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Z==null,compound:ne,keyPath:Z,autoIncrement:ie,unique:!0,extractKey:Ps(Z)},indexes:oh(oe.indexNames).map(function(le){return oe.index(le)}).map(function(me){var fe=me.name,pe=me.unique,Se=me.multiEntry,me=me.keyPath,Se={name:fe,compound:o(me),keyPath:me,unique:pe,multiEntry:Se,extractKey:Ps(me)};return se[Ft(me)]=Se}),getIndexByKeyPath:function(le){return se[Ft(le)]}};return se[":id"]=ie.primaryKey,Z!=null&&(se[Ft(Z)]=ie.primaryKey),ie})},hasGetAll:0<G.length&&"getAll"in K.objectStore(G[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),J=re.schema,ee=re.hasGetAll,re=J.tables.map($),Y={};return re.forEach(function(oe){return Y[oe.name]=oe}),{stack:"dbcore",transaction:g.transaction.bind(g),table:function(oe){if(!Y[oe])throw new Error("Table '".concat(oe,"' not found"));return Y[oe]},MIN_KEY:-1/0,MAX_KEY:ma(w),schema:J}}function kb(g,w,C,I){var $=C.IDBKeyRange;return C.indexedDB,{dbcore:(I=Nb(w,$,I),g.dbcore.reduce(function(V,K){return K=K.create,r(r({},V),K(V))},I))}}function ql(g,I){var C=I.db,I=kb(g._middlewares,C,g._deps,I);g.core=I.dbcore,g.tables.forEach(function($){var V=$.name;g.core.schema.tables.some(function(K){return K.name===V})&&($.core=g.core.table(V),g[V]instanceof g.Table&&(g[V].core=$.core))})}function Hl(g,w,C,I){C.forEach(function($){var V=I[$];w.forEach(function(K){var G=function J(ee,re){return b(ee,re)||(ee=u(ee))&&J(ee,re)}(K,$);(!G||"value"in G&&G.value===void 0)&&(K===g.Transaction.prototype||K instanceof g.Transaction?y(K,$,{get:function(){return this.table($)},set:function(J){p(this,$,{value:J,writable:!0,configurable:!0,enumerable:!0})}}):K[$]=new g.Table($,V))})})}function Pu(g,w){w.forEach(function(C){for(var I in C)C[I]instanceof g.Table&&delete C[I]})}function Eu(g,w){return g._cfg.version-w._cfg.version}function Ag(g,w,C,I){var $=g._dbSchema;C.objectStoreNames.contains("$meta")&&!$.$meta&&($.$meta=Au("$meta",uh("")[0],[]),g._storeNames.push("$meta"));var V=g._createTransaction("readwrite",g._storeNames,$);V.create(C),V._completion.catch(I);var K=V._reject.bind(V),G=Be.transless||Be;ji(function(){return Be.trans=V,Be.transless=G,w!==0?(ql(g,C),ee=w,((J=V).storeNames.includes("$meta")?J.table("$meta").get("version").then(function(re){return re??ee}):Ne.resolve(ee)).then(function(re){return oe=re,Z=V,ne=C,se=[],re=(Y=g)._versions,ie=Y._dbSchema=To(0,Y.idbdb,ne),(re=re.filter(function(le){return le._cfg.version>=oe})).length!==0?(re.forEach(function(le){se.push(function(){var fe=ie,pe=le._cfg.dbschema;Es(Y,fe,ne),Es(Y,pe,ne),ie=Y._dbSchema=pe;var me=Tu(fe,pe);me.add.forEach(function(Re){ch(ne,Re[0],Re[1].primKey,Re[1].indexes)}),me.change.forEach(function(Re){if(Re.recreate)throw new Q.Upgrade("Not yet support for changing primary key");var Me=ne.objectStore(Re.name);Re.add.forEach(function($e){return Gl(Me,$e)}),Re.change.forEach(function($e){Me.deleteIndex($e.name),Gl(Me,$e)}),Re.del.forEach(function($e){return Me.deleteIndex($e)})});var Se=le._cfg.contentUpgrade;if(Se&&le._cfg.version>oe){ql(Y,ne),Z._memoizedTables={};var De=P(pe);me.del.forEach(function(Re){De[Re]=fe[Re]}),Pu(Y,[Y.Transaction.prototype]),Hl(Y,[Y.Transaction.prototype],s(De),De),Z.schema=De;var Ee,Te=ce(Se);return Te&&ws(),me=Ne.follow(function(){var Re;(Ee=Se(Z))&&Te&&(Re=Bi.bind(null,null),Ee.then(Re,Re))}),Ee&&typeof Ee.then=="function"?Ne.resolve(Ee):me.then(function(){return Ee})}}),se.push(function(fe){var pe,me,Se=le._cfg.dbschema;pe=Se,me=fe,[].slice.call(me.db.objectStoreNames).forEach(function(De){return pe[De]==null&&me.db.deleteObjectStore(De)}),Pu(Y,[Y.Transaction.prototype]),Hl(Y,[Y.Transaction.prototype],Y._storeNames,Y._dbSchema),Z.schema=Y._dbSchema}),se.push(function(fe){Y.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(Y.idbdb.version/10)===le._cfg.version?(Y.idbdb.deleteObjectStore("$meta"),delete Y._dbSchema.$meta,Y._storeNames=Y._storeNames.filter(function(pe){return pe!=="$meta"})):fe.objectStore("$meta").put(le._cfg.version,"version"))})}),function le(){return se.length?Ne.resolve(se.shift()(Z.idbtrans)).then(le):Ne.resolve()}().then(function(){Eo(ie,ne)})):Ne.resolve();var Y,oe,Z,ne,se,ie}).catch(K)):(s($).forEach(function(re){ch(C,re,$[re].primKey,$[re].indexes)}),ql(g,C),void Ne.follow(function(){return g.on.populate.fire(V)}).catch(K));var J,ee})}function ga(g,w){Eo(g._dbSchema,w),w.db.version%10!=0||w.objectStoreNames.contains("$meta")||w.db.createObjectStore("$meta").add(Math.ceil(w.db.version/10-1),"version");var C=To(0,g.idbdb,w);Es(g,g._dbSchema,w);for(var I=0,$=Tu(C,g._dbSchema).change;I<$.length;I++){var V=function(K){if(K.change.length||K.recreate)return console.warn("Unable to patch indexes of table ".concat(K.name," because it has changes on the type of index or primary key.")),{value:void 0};var G=w.objectStore(K.name);K.add.forEach(function(J){dn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(K.name,".").concat(J.src)),Gl(G,J)})}($[I]);if(typeof V=="object")return V.value}}function Tu(g,w){var C,I={del:[],add:[],change:[]};for(C in g)w[C]||I.del.push(C);for(C in w){var $=g[C],V=w[C];if($){var K={name:C,def:V,recreate:!1,del:[],add:[],change:[]};if(""+($.primKey.keyPath||"")!=""+(V.primKey.keyPath||"")||$.primKey.auto!==V.primKey.auto)K.recreate=!0,I.change.push(K);else{var G=$.idxByName,J=V.idxByName,ee=void 0;for(ee in G)J[ee]||K.del.push(ee);for(ee in J){var re=G[ee],Y=J[ee];re?re.src!==Y.src&&K.change.push(Y):K.add.push(Y)}(0<K.del.length||0<K.add.length||0<K.change.length)&&I.change.push(K)}}else I.add.push([C,V])}return I}function ch(g,w,C,I){var $=g.db.createObjectStore(w,C.keyPath?{keyPath:C.keyPath,autoIncrement:C.auto}:{autoIncrement:C.auto});return I.forEach(function(V){return Gl($,V)}),$}function Eo(g,w){s(g).forEach(function(C){w.db.objectStoreNames.contains(C)||(dn&&console.debug("Dexie: Creating missing table",C),ch(w,C,g[C].primKey,g[C].indexes))})}function Gl(g,w){g.createIndex(w.name,w.keyPath,{unique:w.unique,multiEntry:w.multi})}function To(g,w,C){var I={};return _(w.objectStoreNames,0).forEach(function($){for(var V=C.objectStore($),K=Po(Kl(ee=V.keyPath),ee||"",!0,!1,!!V.autoIncrement,ee&&typeof ee!="string",!0),G=[],J=0;J<V.indexNames.length;++J){var re=V.index(V.indexNames[J]),ee=re.keyPath,re=Po(re.name,ee,!!re.unique,!!re.multiEntry,!1,ee&&typeof ee!="string",!1);G.push(re)}I[$]=Au($,K,G)}),I}function Es(g,w,C){for(var I=C.db.objectStoreNames,$=0;$<I.length;++$){var V=I[$],K=C.objectStore(V);g._hasGetAll="getAll"in K;for(var G=0;G<K.indexNames.length;++G){var J=K.indexNames[G],ee=K.index(J).keyPath,re=typeof ee=="string"?ee:"["+_(ee).join("+")+"]";!w[V]||(ee=w[V].idxByName[re])&&(ee.name=J,delete w[V].idxByName[re],w[V].idxByName[J]=ee)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(g._hasGetAll=!1)}function uh(g){return g.split(",").map(function(w,C){var V=w.split(":"),I=($=V[1])===null||$===void 0?void 0:$.trim(),$=(w=V[0].trim()).replace(/([&*]|\+\+)/g,""),V=/^\[/.test($)?$.match(/^\[(.*)\]$/)[1].split("+"):$;return Po($,V||null,/\&/.test(w),/\*/.test(w),/\+\+/.test(w),o(V),C===0,I)})}var Cu=(Co.prototype._createTableSchema=Au,Co.prototype._parseIndexSyntax=uh,Co.prototype._parseStoresSpec=function(g,w){var C=this;s(g).forEach(function(I){if(g[I]!==null){var $=C._parseIndexSyntax(g[I]),V=$.shift();if(!V)throw new Q.Schema("Invalid schema for table "+I+": "+g[I]);if(V.unique=!0,V.multi)throw new Q.Schema("Primary key cannot be multiEntry*");$.forEach(function(K){if(K.auto)throw new Q.Schema("Only primary key can be marked as autoIncrement (++)");if(!K.keyPath)throw new Q.Schema("Index must have a name and cannot be an empty string")}),$=C._createTableSchema(I,V,$),w[I]=$}})},Co.prototype.stores=function(C){var w=this.db;this._cfg.storesSource=this._cfg.storesSource?c(this._cfg.storesSource,C):C;var C=w._versions,I={},$={};return C.forEach(function(V){c(I,V._cfg.storesSource),$=V._cfg.dbschema={},V._parseStoresSpec(I,$)}),w._dbSchema=$,Pu(w,[w._allTables,w,w.Transaction.prototype]),Hl(w,[w._allTables,w,w.Transaction.prototype,this._cfg.tables],s($),$),w._storeNames=s($),this},Co.prototype.upgrade=function(g){return this._cfg.contentUpgrade=ei(this._cfg.contentUpgrade||de,g),this},Co);function Co(){}function Nu(g,w){var C=g._dbNamesDB;return C||(C=g._dbNamesDB=new Ns(Wa,{addons:[],indexedDB:g,IDBKeyRange:w})).version(1).stores({dbnames:"name"}),C.table("dbnames")}function Ts(g){return g&&typeof g.databases=="function"}function ku(g){return ji(function(){return Be.letThrough=!0,g()})}function Ou(g){return!("from"in g)}var In=function(g,w){if(!this){var C=new In;return g&&"d"in g&&c(C,g),C}c(this,arguments.length?{d:1,from:g,to:1<arguments.length?w:g}:{d:0})};function Cs(g,w,C){var I=mt(w,C);if(!isNaN(I)){if(0<I)throw RangeError();if(Ou(g))return c(g,{from:w,to:C,d:1});var $=g.l,I=g.r;if(mt(C,g.from)<0)return $?Cs($,w,C):g.l={from:w,to:C,d:1,l:null,r:null},dh(g);if(0<mt(w,g.to))return I?Cs(I,w,C):g.r={from:w,to:C,d:1,l:null,r:null},dh(g);mt(w,g.from)<0&&(g.from=w,g.l=null,g.d=I?I.d+1:1),0<mt(C,g.to)&&(g.to=C,g.r=null,g.d=g.l?g.l.d+1:1),C=!g.r,$&&!g.l&&No(g,$),I&&C&&No(g,I)}}function No(g,w){Ou(w)||function C(I,J){var V=J.from,K=J.to,G=J.l,J=J.r;Cs(I,V,K),G&&C(I,G),J&&C(I,J)}(g,w)}function Yl(g,w){var C=Xl(w),I=C.next();if(I.done)return!1;for(var $=I.value,V=Xl(g),K=V.next($.from),G=K.value;!I.done&&!K.done;){if(mt(G.from,$.to)<=0&&0<=mt(G.to,$.from))return!0;mt($.from,G.from)<0?$=(I=C.next(G.from)).value:G=(K=V.next($.from)).value}return!1}function Xl(g){var w=Ou(g)?null:{s:0,n:g};return{next:function(C){for(var I=0<arguments.length;w;)switch(w.s){case 0:if(w.s=1,I)for(;w.n.l&&mt(C,w.n.from)<0;)w={up:w,n:w.n.l,s:1};else for(;w.n.l;)w={up:w,n:w.n.l,s:1};case 1:if(w.s=2,!I||mt(C,w.n.to)<=0)return{value:w.n,done:!1};case 2:if(w.n.r){w.s=3,w={up:w,n:w.n.r,s:0};continue}case 3:w=w.up}return{done:!0}}}}function dh(g){var w,C,I=(((w=g.r)===null||w===void 0?void 0:w.d)||0)-(((C=g.l)===null||C===void 0?void 0:C.d)||0),$=1<I?"r":I<-1?"l":"";$&&(w=$=="r"?"l":"r",C=r({},g),I=g[$],g.from=I.from,g.to=I.to,g[$]=I[$],C[$]=I[w],(g[w]=C).d=Ha(C)),g.d=Ha(g)}function Ha(C){var w=C.r,C=C.l;return(w?C?Math.max(w.d,C.d):w.d:C?C.d:0)+1}function Ql(g,w){return s(w).forEach(function(C){g[C]?No(g[C],w[C]):g[C]=function I($){var V,K,G={};for(V in $)f($,V)&&(K=$[V],G[V]=!K||typeof K!="object"||M.has(K.constructor)?K:I(K));return G}(w[C])}),g}function Iu(g,w){return g.all||w.all||Object.keys(g).some(function(C){return w[C]&&Yl(w[C],g[C])})}h(In.prototype,((Wi={add:function(g){return No(this,g),this},addKey:function(g){return Cs(this,g,g),this},addKeys:function(g){var w=this;return g.forEach(function(C){return Cs(w,C,C)}),this},hasKey:function(g){var w=Xl(this).next(g).value;return w&&mt(w.from,g)<=0&&0<=mt(w.to,g)}})[W]=function(){return Xl(this)},Wi));var Ga={},Du={},ko=!1;function nr(g){Ql(Du,g),ko||(ko=!0,setTimeout(function(){ko=!1,Mu(Du,!(Du={}))},0))}function Mu(g,w){w===void 0&&(w=!1);var C=new Set;if(g.all)for(var I=0,$=Object.values(Ga);I<$.length;I++)fh(K=$[I],g,C,w);else for(var V in g){var K,G=/^idb\:\/\/(.*)\/(.*)\//.exec(V);G&&(V=G[1],G=G[2],(K=Ga["idb://".concat(V,"/").concat(G)])&&fh(K,g,C,w))}C.forEach(function(J){return J()})}function fh(g,w,C,I){for(var $=[],V=0,K=Object.entries(g.queries.query);V<K.length;V++){for(var G=K[V],J=G[0],ee=[],re=0,Y=G[1];re<Y.length;re++){var oe=Y[re];Iu(w,oe.obsSet)?oe.subscribers.forEach(function(ie){return C.add(ie)}):I&&ee.push(oe)}I&&$.push([J,ee])}if(I)for(var Z=0,ne=$;Z<ne.length;Z++){var se=ne[Z],J=se[0],ee=se[1];g.queries.query[J]=ee}}function Oo(g){var w=g._state,C=g._deps.indexedDB;if(w.isBeingOpened||g.idbdb)return w.dbReadyPromise.then(function(){return w.dbOpenError?on(w.dbOpenError):g});w.isBeingOpened=!0,w.dbOpenError=null,w.openComplete=!1;var I=w.openCanceller,$=Math.round(10*g.verno),V=!1;function K(){if(w.openCanceller!==I)throw new Q.DatabaseClosed("db.open() was cancelled")}function G(){return new Ne(function(oe,Z){if(K(),!C)throw new Q.MissingAPI;var ne=g.name,se=w.autoSchema||!$?C.open(ne):C.open(ne,$);if(!se)throw new Q.MissingAPI;se.onerror=hr(Z),se.onblocked=Tt(g._fireOnBlocked),se.onupgradeneeded=Tt(function(ie){var le;re=se.transaction,w.autoSchema&&!g._options.allowEmptyDB?(se.onerror=Ul,re.abort(),se.result.close(),(le=C.deleteDatabase(ne)).onsuccess=le.onerror=Tt(function(){Z(new Q.NoSuchDatabase("Database ".concat(ne," doesnt exist")))})):(re.onerror=hr(Z),ie=ie.oldVersion>Math.pow(2,62)?0:ie.oldVersion,Y=ie<1,g.idbdb=se.result,V&&ga(g,re),Ag(g,ie/10,re,Z))},Z),se.onsuccess=Tt(function(){re=null;var ie,le,fe,pe,me,Se=g.idbdb=se.result,De=_(Se.objectStoreNames);if(0<De.length)try{var Ee=Se.transaction((pe=De).length===1?pe[0]:pe,"readonly");if(w.autoSchema)le=Se,fe=Ee,(ie=g).verno=le.version/10,fe=ie._dbSchema=To(0,le,fe),ie._storeNames=_(le.objectStoreNames,0),Hl(ie,[ie._allTables],s(fe),fe);else if(Es(g,g._dbSchema,Ee),((me=Tu(To(0,(me=g).idbdb,Ee),me._dbSchema)).add.length||me.change.some(function(Te){return Te.add.length||Te.change.length}))&&!V)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Se.close(),$=Se.version+1,V=!0,oe(G());ql(g,Ee)}catch{}Ua.push(g),Se.onversionchange=Tt(function(Te){w.vcFired=!0,g.on("versionchange").fire(Te)}),Se.onclose=Tt(function(Te){g.on("close").fire(Te)}),Y&&(me=g._deps,Ee=ne,Se=me.indexedDB,me=me.IDBKeyRange,Ts(Se)||Ee===Wa||Nu(Se,me).put({name:Ee}).catch(de)),oe()},Z)}).catch(function(oe){switch(oe==null?void 0:oe.name){case"UnknownError":if(0<w.PR1398_maxLoop)return w.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),G();break;case"VersionError":if(0<$)return $=0,G()}return Ne.reject(oe)})}var J,ee=w.dbReadyResolve,re=null,Y=!1;return Ne.race([I,(typeof navigator>"u"?Ne.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(oe){function Z(){return indexedDB.databases().finally(oe)}J=setInterval(Z,100),Z()}).finally(function(){return clearInterval(J)}):Promise.resolve()).then(G)]).then(function(){return K(),w.onReadyBeingFired=[],Ne.resolve(ku(function(){return g.on.ready.fire(g.vip)})).then(function oe(){if(0<w.onReadyBeingFired.length){var Z=w.onReadyBeingFired.reduce(ei,de);return w.onReadyBeingFired=[],Ne.resolve(ku(function(){return Z(g.vip)})).then(oe)}})}).finally(function(){w.openCanceller===I&&(w.onReadyBeingFired=null,w.isBeingOpened=!1)}).catch(function(oe){w.dbOpenError=oe;try{re&&re.abort()}catch{}return I===w.openCanceller&&g._close(),on(oe)}).finally(function(){w.openComplete=!0,ee()}).then(function(){var oe;return Y&&(oe={},g.tables.forEach(function(Z){Z.schema.indexes.forEach(function(ne){ne.name&&(oe["idb://".concat(g.name,"/").concat(Z.name,"/").concat(ne.name)]=new In(-1/0,[[[]]]))}),oe["idb://".concat(g.name,"/").concat(Z.name,"/")]=oe["idb://".concat(g.name,"/").concat(Z.name,"/:dels")]=new In(-1/0,[[[]]])}),pr(Wl).fire(oe),Mu(oe,!0)),g})}function m(g){function w(V){return g.next(V)}var C=$(w),I=$(function(V){return g.throw(V)});function $(V){return function(J){var G=V(J),J=G.value;return G.done?J:J&&typeof J.then=="function"?J.then(C,I):o(J)?Promise.all(J).then(C,I):C(J)}}return $(w)()}function N(g,w,C){for(var I=o(g)?g.slice():[g],$=0;$<C;++$)I.push(w);return I}var R={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(g){return r(r({},g),{table:function(w){var C=g.table(w),I=C.schema,$={},V=[];function K(Y,oe,Z){var ne=Ft(Y),se=$[ne]=$[ne]||[],ie=Y==null?0:typeof Y=="string"?1:Y.length,le=0<oe,le=r(r({},Z),{name:le?"".concat(ne,"(virtual-from:").concat(Z.name,")"):Z.name,lowLevelIndex:Z,isVirtual:le,keyTail:oe,keyLength:ie,extractKey:Ps(Y),unique:!le&&Z.unique});return se.push(le),le.isPrimaryKey||V.push(le),1<ie&&K(ie===2?Y[0]:Y.slice(0,ie-1),oe+1,Z),se.sort(function(fe,pe){return fe.keyTail-pe.keyTail}),le}w=K(I.primaryKey.keyPath,0,I.primaryKey),$[":id"]=[w];for(var G=0,J=I.indexes;G<J.length;G++){var ee=J[G];K(ee.keyPath,0,ee)}function re(Y){var oe,Z=Y.query.index;return Z.isVirtual?r(r({},Y),{query:{index:Z.lowLevelIndex,range:(oe=Y.query.range,Z=Z.keyTail,{type:oe.type===1?2:oe.type,lower:N(oe.lower,oe.lowerOpen?g.MAX_KEY:g.MIN_KEY,Z),lowerOpen:!0,upper:N(oe.upper,oe.upperOpen?g.MIN_KEY:g.MAX_KEY,Z),upperOpen:!0})}}):Y}return r(r({},C),{schema:r(r({},I),{primaryKey:w,indexes:V,getIndexByKeyPath:function(Y){return(Y=$[Ft(Y)])&&Y[0]}}),count:function(Y){return C.count(re(Y))},query:function(Y){return C.query(re(Y))},openCursor:function(Y){var oe=Y.query.index,Z=oe.keyTail,ne=oe.isVirtual,se=oe.keyLength;return ne?C.openCursor(re(Y)).then(function(le){return le&&ie(le)}):C.openCursor(Y);function ie(le){return Object.create(le,{continue:{value:function(fe){fe!=null?le.continue(N(fe,Y.reverse?g.MAX_KEY:g.MIN_KEY,Z)):Y.unique?le.continue(le.key.slice(0,se).concat(Y.reverse?g.MIN_KEY:g.MAX_KEY,Z)):le.continue()}},continuePrimaryKey:{value:function(fe,pe){le.continuePrimaryKey(N(fe,g.MAX_KEY,Z),pe)}},primaryKey:{get:function(){return le.primaryKey}},key:{get:function(){var fe=le.key;return se===1?fe[0]:fe.slice(0,se)}},value:{get:function(){return le.value}}})}}})}})}};function U(g,w,C,I){return C=C||{},I=I||"",s(g).forEach(function($){var V,K,G;f(w,$)?(V=g[$],K=w[$],typeof V=="object"&&typeof K=="object"&&V&&K?(G=X(V))!==X(K)?C[I+$]=w[$]:G==="Object"?U(V,K,C,I+$+"."):V!==K&&(C[I+$]=w[$]):V!==K&&(C[I+$]=w[$])):C[I+$]=void 0}),s(w).forEach(function($){f(g,$)||(C[I+$]=w[$])}),C}function ue(g,w){return w.type==="delete"?w.keys:w.keys||w.values.map(g.extractKey)}var he={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(g){return r(r({},g),{table:function(w){var C=g.table(w),I=C.schema.primaryKey;return r(r({},C),{mutate:function($){var V=Be.trans,K=V.table(w).hook,G=K.deleting,J=K.creating,ee=K.updating;switch($.type){case"add":if(J.fire===de)break;return V._promise("readwrite",function(){return re($)},!0);case"put":if(J.fire===de&&ee.fire===de)break;return V._promise("readwrite",function(){return re($)},!0);case"delete":if(G.fire===de)break;return V._promise("readwrite",function(){return re($)},!0);case"deleteRange":if(G.fire===de)break;return V._promise("readwrite",function(){return function Y(oe,Z,ne){return C.query({trans:oe,values:!1,query:{index:I,range:Z},limit:ne}).then(function(se){var ie=se.result;return re({type:"delete",keys:ie,trans:oe}).then(function(le){return 0<le.numFailures?Promise.reject(le.failures[0]):ie.length<ne?{failures:[],numFailures:0,lastResult:void 0}:Y(oe,r(r({},Z),{lower:ie[ie.length-1],lowerOpen:!0}),ne)})})}($.trans,$.range,1e4)},!0)}return C.mutate($);function re(Y){var oe,Z,ne,se=Be.trans,ie=Y.keys||ue(I,Y);if(!ie)throw new Error("Keys missing");return(Y=Y.type==="add"||Y.type==="put"?r(r({},Y),{keys:ie}):r({},Y)).type!=="delete"&&(Y.values=i([],Y.values)),Y.keys&&(Y.keys=i([],Y.keys)),oe=C,ne=ie,((Z=Y).type==="add"?Promise.resolve([]):oe.getMany({trans:Z.trans,keys:ne,cache:"immutable"})).then(function(le){var fe=ie.map(function(pe,me){var Se,De,Ee,Te=le[me],Re={onerror:null,onsuccess:null};return Y.type==="delete"?G.fire.call(Re,pe,Te,se):Y.type==="add"||Te===void 0?(Se=J.fire.call(Re,pe,Y.values[me],se),pe==null&&Se!=null&&(Y.keys[me]=pe=Se,I.outbound||j(Y.values[me],I.keyPath,pe))):(Se=U(Te,Y.values[me]),(De=ee.fire.call(Re,Se,pe,Te,se))&&(Ee=Y.values[me],Object.keys(De).forEach(function(Me){f(Ee,Me)?Ee[Me]=De[Me]:j(Ee,Me,De[Me])}))),Re});return C.mutate(Y).then(function(pe){for(var me=pe.failures,Se=pe.results,De=pe.numFailures,pe=pe.lastResult,Ee=0;Ee<ie.length;++Ee){var Te=(Se||ie)[Ee],Re=fe[Ee];Te==null?Re.onerror&&Re.onerror(me[Ee]):Re.onsuccess&&Re.onsuccess(Y.type==="put"&&le[Ee]?Y.values[Ee]:Te)}return{failures:me,results:Se,numFailures:De,lastResult:pe}}).catch(function(pe){return fe.forEach(function(me){return me.onerror&&me.onerror(pe)}),Promise.reject(pe)})})}}})}})}};function Ie(g,w,C){try{if(!w||w.keys.length<g.length)return null;for(var I=[],$=0,V=0;$<w.keys.length&&V<g.length;++$)mt(w.keys[$],g[V])===0&&(I.push(C?L(w.values[$]):w.values[$]),++V);return I.length===g.length?I:null}catch{return null}}var It={stack:"dbcore",level:-1,create:function(g){return{table:function(w){var C=g.table(w);return r(r({},C),{getMany:function(I){if(!I.cache)return C.getMany(I);var $=Ie(I.keys,I.trans._cache,I.cache==="clone");return $?Ne.resolve($):C.getMany(I).then(function(V){return I.trans._cache={keys:I.keys,values:I.cache==="clone"?L(V):V},V})},mutate:function(I){return I.type!=="add"&&(I.trans._cache=null),C.mutate(I)}})}}}};function Dn(g,w){return g.trans.mode==="readonly"&&!!g.subscr&&!g.trans.explicit&&g.trans.db._options.cache!=="disabled"&&!w.schema.primaryKey.outbound}function bt(g,w){switch(g){case"query":return w.values&&!w.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var rr={stack:"dbcore",level:0,name:"Observability",create:function(g){var w=g.schema.name,C=new In(g.MIN_KEY,g.MAX_KEY);return r(r({},g),{transaction:function(I,$,V){if(Be.subscr&&$!=="readonly")throw new Q.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Be.querier));return g.transaction(I,$,V)},table:function(I){var $=g.table(I),V=$.schema,K=V.primaryKey,Y=V.indexes,G=K.extractKey,J=K.outbound,ee=K.autoIncrement&&Y.filter(function(Z){return Z.compound&&Z.keyPath.includes(K.keyPath)}),re=r(r({},$),{mutate:function(Z){function ne(Me){return Me="idb://".concat(w,"/").concat(I,"/").concat(Me),pe[Me]||(pe[Me]=new In)}var se,ie,le,fe=Z.trans,pe=Z.mutatedParts||(Z.mutatedParts={}),me=ne(""),Se=ne(":dels"),De=Z.type,Re=Z.type==="deleteRange"?[Z.range]:Z.type==="delete"?[Z.keys]:Z.values.length<50?[ue(K,Z).filter(function(Me){return Me}),Z.values]:[],Ee=Re[0],Te=Re[1],Re=Z.trans._cache;return o(Ee)?(me.addKeys(Ee),(Re=De==="delete"||Ee.length===Te.length?Ie(Ee,Re):null)||Se.addKeys(Ee),(Re||Te)&&(se=ne,ie=Re,le=Te,V.indexes.forEach(function(Me){var $e=se(Me.name||"");function ft(ot){return ot!=null?Me.extractKey(ot):null}function St(ot){return Me.multiEntry&&o(ot)?ot.forEach(function(xn){return $e.addKey(xn)}):$e.addKey(ot)}(ie||le).forEach(function(ot,Er){var at=ie&&ft(ie[Er]),Er=le&&ft(le[Er]);mt(at,Er)!==0&&(at!=null&&St(at),Er!=null&&St(Er))})}))):Ee?(Te={from:(Te=Ee.lower)!==null&&Te!==void 0?Te:g.MIN_KEY,to:(Te=Ee.upper)!==null&&Te!==void 0?Te:g.MAX_KEY},Se.add(Te),me.add(Te)):(me.add(C),Se.add(C),V.indexes.forEach(function(Me){return ne(Me.name).add(C)})),$.mutate(Z).then(function(Me){return!Ee||Z.type!=="add"&&Z.type!=="put"||(me.addKeys(Me.results),ee&&ee.forEach(function($e){for(var ft=Z.values.map(function(at){return $e.extractKey(at)}),St=$e.keyPath.findIndex(function(at){return at===K.keyPath}),ot=0,xn=Me.results.length;ot<xn;++ot)ft[ot][St]=Me.results[ot];ne($e.name).addKeys(ft)})),fe.mutatedParts=Ql(fe.mutatedParts||{},pe),Me})}}),Y=function(ne){var se=ne.query,ne=se.index,se=se.range;return[ne,new In((ne=se.lower)!==null&&ne!==void 0?ne:g.MIN_KEY,(se=se.upper)!==null&&se!==void 0?se:g.MAX_KEY)]},oe={get:function(Z){return[K,new In(Z.key)]},getMany:function(Z){return[K,new In().addKeys(Z.keys)]},count:Y,query:Y,openCursor:Y};return s(oe).forEach(function(Z){re[Z]=function(ne){var se=Be.subscr,ie=!!se,le=Dn(Be,$)&&bt(Z,ne)?ne.obsSet={}:se;if(ie){var fe=function(Te){return Te="idb://".concat(w,"/").concat(I,"/").concat(Te),le[Te]||(le[Te]=new In)},pe=fe(""),me=fe(":dels"),se=oe[Z](ne),ie=se[0],se=se[1];if((Z==="query"&&ie.isPrimaryKey&&!ne.values?me:fe(ie.name||"")).add(se),!ie.isPrimaryKey){if(Z!=="count"){var Se=Z==="query"&&J&&ne.values&&$.query(r(r({},ne),{values:!1}));return $[Z].apply(this,arguments).then(function(Te){if(Z==="query"){if(J&&ne.values)return Se.then(function(ft){return ft=ft.result,pe.addKeys(ft),Te});var Re=ne.values?Te.result.map(G):Te.result;(ne.values?pe:me).addKeys(Re)}else if(Z==="openCursor"){var Me=Te,$e=ne.values;return Me&&Object.create(Me,{key:{get:function(){return me.addKey(Me.primaryKey),Me.key}},primaryKey:{get:function(){var ft=Me.primaryKey;return me.addKey(ft),ft}},value:{get:function(){return $e&&pe.addKey(Me.primaryKey),Me.value}}})}return Te})}me.add(C)}}return $[Z].apply(this,arguments)}}),re}})}};function Wn(g,w,C){if(C.numFailures===0)return w;if(w.type==="deleteRange")return null;var I=w.keys?w.keys.length:"values"in w&&w.values?w.values.length:1;return C.numFailures===I?null:(w=r({},w),o(w.keys)&&(w.keys=w.keys.filter(function($,V){return!(V in C.failures)})),"values"in w&&o(w.values)&&(w.values=w.values.filter(function($,V){return!(V in C.failures)})),w)}function Ya(g,w){return C=g,((I=w).lower===void 0||(I.lowerOpen?0<mt(C,I.lower):0<=mt(C,I.lower)))&&(g=g,(w=w).upper===void 0||(w.upperOpen?mt(g,w.upper)<0:mt(g,w.upper)<=0));var C,I}function ii(g,w,oe,I,$,V){if(!oe||oe.length===0)return g;var K=w.query.index,G=K.multiEntry,J=w.query.range,ee=I.schema.primaryKey.extractKey,re=K.extractKey,Y=(K.lowLevelIndex||K).extractKey,oe=oe.reduce(function(Z,ne){var se=Z,ie=[];if(ne.type==="add"||ne.type==="put")for(var le=new In,fe=ne.values.length-1;0<=fe;--fe){var pe,me=ne.values[fe],Se=ee(me);le.hasKey(Se)||(pe=re(me),(G&&o(pe)?pe.some(function(Me){return Ya(Me,J)}):Ya(pe,J))&&(le.addKey(Se),ie.push(me)))}switch(ne.type){case"add":var De=new In().addKeys(w.values?Z.map(function($e){return ee($e)}):Z),se=Z.concat(w.values?ie.filter(function($e){return $e=ee($e),!De.hasKey($e)&&(De.addKey($e),!0)}):ie.map(function($e){return ee($e)}).filter(function($e){return!De.hasKey($e)&&(De.addKey($e),!0)}));break;case"put":var Ee=new In().addKeys(ne.values.map(function($e){return ee($e)}));se=Z.filter(function($e){return!Ee.hasKey(w.values?ee($e):$e)}).concat(w.values?ie:ie.map(function($e){return ee($e)}));break;case"delete":var Te=new In().addKeys(ne.keys);se=Z.filter(function($e){return!Te.hasKey(w.values?ee($e):$e)});break;case"deleteRange":var Re=ne.range;se=Z.filter(function($e){return!Ya(ee($e),Re)})}return se},g);return oe===g?g:(oe.sort(function(Z,ne){return mt(Y(Z),Y(ne))||mt(ee(Z),ee(ne))}),w.limit&&w.limit<1/0&&(oe.length>w.limit?oe.length=w.limit:g.length===w.limit&&oe.length<w.limit&&($.dirty=!0)),V?Object.freeze(oe):oe)}function Jl(g,w){return mt(g.lower,w.lower)===0&&mt(g.upper,w.upper)===0&&!!g.lowerOpen==!!w.lowerOpen&&!!g.upperOpen==!!w.upperOpen}function hh(g,w){return function(C,I,$,V){if(C===void 0)return I!==void 0?-1:0;if(I===void 0)return 1;if((I=mt(C,I))===0){if($&&V)return 0;if($)return 1;if(V)return-1}return I}(g.lower,w.lower,g.lowerOpen,w.lowerOpen)<=0&&0<=function(C,I,$,V){if(C===void 0)return I!==void 0?1:0;if(I===void 0)return-1;if((I=mt(C,I))===0){if($&&V)return 0;if($)return-1;if(V)return 1}return I}(g.upper,w.upper,g.upperOpen,w.upperOpen)}function CV(g,w,C,I){g.subscribers.add(C),I.addEventListener("abort",function(){var $,V;g.subscribers.delete(C),g.subscribers.size===0&&($=g,V=w,setTimeout(function(){$.subscribers.size===0&&F(V,$)},3e3))})}var NV={stack:"dbcore",level:0,name:"Cache",create:function(g){var w=g.schema.name;return r(r({},g),{transaction:function(C,I,$){var V,K,G=g.transaction(C,I,$);return I==="readwrite"&&(K=(V=new AbortController).signal,$=function(J){return function(){if(V.abort(),I==="readwrite"){for(var ee=new Set,re=0,Y=C;re<Y.length;re++){var oe=Y[re],Z=Ga["idb://".concat(w,"/").concat(oe)];if(Z){var ne=g.table(oe),se=Z.optimisticOps.filter(function($e){return $e.trans===G});if(G._explicit&&J&&G.mutatedParts)for(var ie=0,le=Object.values(Z.queries.query);ie<le.length;ie++)for(var fe=0,pe=(De=le[ie]).slice();fe<pe.length;fe++)Iu((Ee=pe[fe]).obsSet,G.mutatedParts)&&(F(De,Ee),Ee.subscribers.forEach(function($e){return ee.add($e)}));else if(0<se.length){Z.optimisticOps=Z.optimisticOps.filter(function($e){return $e.trans!==G});for(var me=0,Se=Object.values(Z.queries.query);me<Se.length;me++)for(var De,Ee,Te,Re=0,Me=(De=Se[me]).slice();Re<Me.length;Re++)(Ee=Me[Re]).res!=null&&G.mutatedParts&&(J&&!Ee.dirty?(Te=Object.isFrozen(Ee.res),Te=ii(Ee.res,Ee.req,se,ne,Ee,Te),Ee.dirty?(F(De,Ee),Ee.subscribers.forEach(function($e){return ee.add($e)})):Te!==Ee.res&&(Ee.res=Te,Ee.promise=Ne.resolve({result:Te}))):(Ee.dirty&&F(De,Ee),Ee.subscribers.forEach(function($e){return ee.add($e)})))}}}ee.forEach(function($e){return $e()})}}},G.addEventListener("abort",$(!1),{signal:K}),G.addEventListener("error",$(!1),{signal:K}),G.addEventListener("complete",$(!0),{signal:K})),G},table:function(C){var I=g.table(C),$=I.schema.primaryKey;return r(r({},I),{mutate:function(V){var K=Be.trans;if($.outbound||K.db._options.cache==="disabled"||K.explicit||K.idbtrans.mode!=="readwrite")return I.mutate(V);var G=Ga["idb://".concat(w,"/").concat(C)];return G?(K=I.mutate(V),V.type!=="add"&&V.type!=="put"||!(50<=V.values.length||ue($,V).some(function(J){return J==null}))?(G.optimisticOps.push(V),V.mutatedParts&&nr(V.mutatedParts),K.then(function(J){0<J.numFailures&&(F(G.optimisticOps,V),(J=Wn(0,V,J))&&G.optimisticOps.push(J),V.mutatedParts&&nr(V.mutatedParts))}),K.catch(function(){F(G.optimisticOps,V),V.mutatedParts&&nr(V.mutatedParts)})):K.then(function(J){var ee=Wn(0,r(r({},V),{values:V.values.map(function(re,Y){var oe;return J.failures[Y]?re:(re=(oe=$.keyPath)!==null&&oe!==void 0&&oe.includes(".")?L(re):r({},re),j(re,$.keyPath,J.results[Y]),re)})}),J);G.optimisticOps.push(ee),queueMicrotask(function(){return V.mutatedParts&&nr(V.mutatedParts)})}),K):I.mutate(V)},query:function(V){if(!Dn(Be,I)||!bt("query",V))return I.query(V);var K=((ee=Be.trans)===null||ee===void 0?void 0:ee.db._options.cache)==="immutable",Y=Be,G=Y.requery,J=Y.signal,ee=function(ne,se,ie,le){var fe=Ga["idb://".concat(ne,"/").concat(se)];if(!fe)return[];if(!(se=fe.queries[ie]))return[null,!1,fe,null];var pe=se[(le.query?le.query.index.name:null)||""];if(!pe)return[null,!1,fe,null];switch(ie){case"query":var me=pe.find(function(Se){return Se.req.limit===le.limit&&Se.req.values===le.values&&Jl(Se.req.query.range,le.query.range)});return me?[me,!0,fe,pe]:[pe.find(function(Se){return("limit"in Se.req?Se.req.limit:1/0)>=le.limit&&(!le.values||Se.req.values)&&hh(Se.req.query.range,le.query.range)}),!1,fe,pe];case"count":return me=pe.find(function(Se){return Jl(Se.req.query.range,le.query.range)}),[me,!!me,fe,pe]}}(w,C,"query",V),re=ee[0],Y=ee[1],oe=ee[2],Z=ee[3];return re&&Y?re.obsSet=V.obsSet:(Y=I.query(V).then(function(ne){var se=ne.result;if(re&&(re.res=se),K){for(var ie=0,le=se.length;ie<le;++ie)Object.freeze(se[ie]);Object.freeze(se)}else ne.result=L(se);return ne}).catch(function(ne){return Z&&re&&F(Z,re),Promise.reject(ne)}),re={obsSet:V.obsSet,promise:Y,subscribers:new Set,type:"query",req:V,dirty:!1},Z?Z.push(re):(Z=[re],(oe=oe||(Ga["idb://".concat(w,"/").concat(C)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[V.query.index.name||""]=Z)),CV(re,Z,G,J),re.promise.then(function(ne){return{result:ii(ne.result,V,oe==null?void 0:oe.optimisticOps,I,re,K)}})}})}})}};function Pg(g,w){return new Proxy(g,{get:function(C,I,$){return I==="db"?w:Reflect.get(C,I,$)}})}var Ns=(Pn.prototype.version=function(g){if(isNaN(g)||g<.1)throw new Q.Type("Given version is not a positive number");if(g=Math.round(10*g)/10,this.idbdb||this._state.isBeingOpened)throw new Q.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,g);var w=this._versions,C=w.filter(function(I){return I._cfg.version===g})[0];return C||(C=new this.Version(g),w.push(C),w.sort(Eu),C.stores({}),this._state.autoSchema=!1,C)},Pn.prototype._whenReady=function(g){var w=this;return this.idbdb&&(this._state.openComplete||Be.letThrough||this._vip)?g():new Ne(function(C,I){if(w._state.openComplete)return I(new Q.DatabaseClosed(w._state.dbOpenError));if(!w._state.isBeingOpened){if(!w._state.autoOpen)return void I(new Q.DatabaseClosed);w.open().catch(de)}w._state.dbReadyPromise.then(C,I)}).then(g)},Pn.prototype.use=function(g){var w=g.stack,C=g.create,I=g.level,$=g.name;return $&&this.unuse({stack:w,name:$}),g=this._middlewares[w]||(this._middlewares[w]=[]),g.push({stack:w,create:C,level:I??10,name:$}),g.sort(function(V,K){return V.level-K.level}),this},Pn.prototype.unuse=function(g){var w=g.stack,C=g.name,I=g.create;return w&&this._middlewares[w]&&(this._middlewares[w]=this._middlewares[w].filter(function($){return I?$.create!==I:!!C&&$.name!==C})),this},Pn.prototype.open=function(){var g=this;return fa(ni,function(){return Oo(g)})},Pn.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var g=this._state,w=Ua.indexOf(this);if(0<=w&&Ua.splice(w,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}g.isBeingOpened||(g.dbReadyPromise=new Ne(function(C){g.dbReadyResolve=C}),g.openCanceller=new Ne(function(C,I){g.cancelOpen=I}))},Pn.prototype.close=function(C){var w=(C===void 0?{disableAutoOpen:!0}:C).disableAutoOpen,C=this._state;w?(C.isBeingOpened&&C.cancelOpen(new Q.DatabaseClosed),this._close(),C.autoOpen=!1,C.dbOpenError=new Q.DatabaseClosed):(this._close(),C.autoOpen=this._options.autoOpen||C.isBeingOpened,C.openComplete=!1,C.dbOpenError=null)},Pn.prototype.delete=function(g){var w=this;g===void 0&&(g={disableAutoOpen:!0});var C=0<arguments.length&&typeof arguments[0]!="object",I=this._state;return new Ne(function($,V){function K(){w.close(g);var G=w._deps.indexedDB.deleteDatabase(w.name);G.onsuccess=Tt(function(){var J,ee,re;J=w._deps,ee=w.name,re=J.indexedDB,J=J.IDBKeyRange,Ts(re)||ee===Wa||Nu(re,J).delete(ee).catch(de),$()}),G.onerror=hr(V),G.onblocked=w._fireOnBlocked}if(C)throw new Q.InvalidArgument("Invalid closeOptions argument to db.delete()");I.isBeingOpened?I.dbReadyPromise.then(K):K()})},Pn.prototype.backendDB=function(){return this.idbdb},Pn.prototype.isOpen=function(){return this.idbdb!==null},Pn.prototype.hasBeenClosed=function(){var g=this._state.dbOpenError;return g&&g.name==="DatabaseClosed"},Pn.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Pn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Pn.prototype,"tables",{get:function(){var g=this;return s(this._allTables).map(function(w){return g._allTables[w]})},enumerable:!1,configurable:!0}),Pn.prototype.transaction=function(){var g=(function(w,C,I){var $=arguments.length;if($<2)throw new Q.InvalidArgument("Too few arguments");for(var V=new Array($-1);--$;)V[$-1]=arguments[$];return I=V.pop(),[w,D(V),I]}).apply(this,arguments);return this._transaction.apply(this,g)},Pn.prototype._transaction=function(g,w,C){var I=this,$=Be.trans;$&&$.db===this&&g.indexOf("!")===-1||($=null);var V,K,G=g.indexOf("?")!==-1;g=g.replace("!","").replace("?","");try{if(K=w.map(function(ee){if(ee=ee instanceof I.Table?ee.name:ee,typeof ee!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return ee}),g=="r"||g===ha)V=ha;else{if(g!="rw"&&g!=Ll)throw new Q.InvalidArgument("Invalid transaction mode: "+g);V=Ll}if($){if($.mode===ha&&V===Ll){if(!G)throw new Q.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");$=null}$&&K.forEach(function(ee){if($&&$.storeNames.indexOf(ee)===-1){if(!G)throw new Q.SubTransaction("Table "+ee+" not included in parent transaction.");$=null}}),G&&$&&!$.active&&($=null)}}catch(ee){return $?$._promise(null,function(re,Y){Y(ee)}):on(ee)}var J=(function ee(re,Y,oe,Z,ne){return Ne.resolve().then(function(){var se=Be.transless||Be,ie=re._createTransaction(Y,oe,re._dbSchema,Z);if(ie.explicit=!0,se={trans:ie,transless:se},Z)ie.idbtrans=Z.idbtrans;else try{ie.create(),ie.idbtrans._explicit=!0,re._state.PR1398_maxLoop=3}catch(pe){return pe.name===ke.InvalidState&&re.isOpen()&&0<--re._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),re.close({disableAutoOpen:!1}),re.open().then(function(){return ee(re,Y,oe,null,ne)})):on(pe)}var le,fe=ce(ne);return fe&&ws(),se=Ne.follow(function(){var pe;(le=ne.call(ie,ie))&&(fe?(pe=Bi.bind(null,null),le.then(pe,pe)):typeof le.next=="function"&&typeof le.throw=="function"&&(le=m(le)))},se),(le&&typeof le.then=="function"?Ne.resolve(le).then(function(pe){return ie.active?pe:on(new Q.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):se.then(function(){return le})).then(function(pe){return Z&&ie._resolve(),ie._completion.then(function(){return pe})}).catch(function(pe){return ie._reject(pe),on(pe)})})}).bind(null,this,V,K,$,C);return $?$._promise(V,J,"lock"):Be.trans?fa(Be.transless,function(){return I._whenReady(J)}):this._whenReady(J)},Pn.prototype.table=function(g){if(!f(this._allTables,g))throw new Q.InvalidTable("Table ".concat(g," does not exist"));return this._allTables[g]},Pn);function Pn(g,w){var C=this;this._middlewares={},this.verno=0;var I=Pn.dependencies;this._options=w=r({addons:Pn.addons,autoOpen:!0,indexedDB:I.indexedDB,IDBKeyRange:I.IDBKeyRange,cache:"cloned"},w),this._deps={indexedDB:w.indexedDB,IDBKeyRange:w.IDBKeyRange},I=w.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var $,V,K,G,J,ee={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:de,dbReadyPromise:null,cancelOpen:de,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:w.autoOpen};ee.dbReadyPromise=new Ne(function(Y){ee.dbReadyResolve=Y}),ee.openCanceller=new Ne(function(Y,oe){ee.cancelOpen=oe}),this._state=ee,this.name=g,this.on=wo(this,"populate","blocked","versionchange","close",{ready:[ei,de]}),this.once=function(Y,oe){var Z=function(){for(var ne=[],se=0;se<arguments.length;se++)ne[se]=arguments[se];C.on(Y).unsubscribe(Z),oe.apply(C,ne)};return C.on(Y,Z)},this.on.ready.subscribe=S(this.on.ready.subscribe,function(Y){return function(oe,Z){Pn.vip(function(){var ne,se=C._state;se.openComplete?(se.dbOpenError||Ne.resolve().then(oe),Z&&Y(oe)):se.onReadyBeingFired?(se.onReadyBeingFired.push(oe),Z&&Y(oe)):(Y(oe),ne=C,Z||Y(function ie(){ne.on.ready.unsubscribe(oe),ne.on.ready.unsubscribe(ie)}))})}}),this.Collection=($=this,_o(Bl.prototype,function(le,ie){this.db=$;var Z=eh,ne=null;if(ie)try{Z=ie()}catch(fe){ne=fe}var se=le._ctx,ie=se.table,le=ie.hook.reading.fire;this._ctx={table:ie,index:se.index,isPrimKey:!se.index||ie.schema.primKey.keyPath&&se.index===ie.schema.primKey.name,range:Z,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:ne,or:se.or,valueMapper:le!==pt?le:null}})),this.Table=(V=this,_o(jg.prototype,function(Y,oe,Z){this.db=V,this._tx=Z,this.name=Y,this.schema=oe,this.hook=V._allTables[Y]?V._allTables[Y].hook:wo(null,{creating:[Ze,de],reading:[nt,pt],updating:[Zr,de],deleting:[yn,de]})})),this.Transaction=(K=this,_o(Cb.prototype,function(Y,oe,Z,ne,se){var ie=this;Y!=="readonly"&&oe.forEach(function(le){le=(le=Z[le])===null||le===void 0?void 0:le.yProps,le&&(oe=oe.concat(le.map(function(fe){return fe.updatesTable})))}),this.db=K,this.mode=Y,this.storeNames=oe,this.schema=Z,this.chromeTransactionDurability=ne,this.idbtrans=null,this.on=wo(this,"complete","error","abort"),this.parent=se||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ne(function(le,fe){ie._resolve=le,ie._reject=fe}),this._completion.then(function(){ie.active=!1,ie.on.complete.fire()},function(le){var fe=ie.active;return ie.active=!1,ie.on.error.fire(le),ie.parent?ie.parent._reject(le):fe&&ie.idbtrans&&ie.idbtrans.abort(),on(le)})})),this.Version=(G=this,_o(Cu.prototype,function(Y){this.db=G,this._cfg={version:Y,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(J=this,_o(ah.prototype,function(Y,oe,Z){if(this.db=J,this._ctx={table:Y,index:oe===":id"?null:oe,or:Z},this._cmp=this._ascending=mt,this._descending=function(ne,se){return mt(se,ne)},this._max=function(ne,se){return 0<mt(ne,se)?ne:se},this._min=function(ne,se){return mt(ne,se)<0?ne:se},this._IDBKeyRange=J._deps.IDBKeyRange,!this._IDBKeyRange)throw new Q.MissingAPI})),this.on("versionchange",function(Y){0<Y.newVersion?console.warn("Another connection wants to upgrade database '".concat(C.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(C.name,"'. Closing db now to resume the delete request.")),C.close({disableAutoOpen:!1})}),this.on("blocked",function(Y){!Y.newVersion||Y.newVersion<Y.oldVersion?console.warn("Dexie.delete('".concat(C.name,"') was blocked")):console.warn("Upgrade '".concat(C.name,"' blocked by other connection holding version ").concat(Y.oldVersion/10))}),this._maxKey=ma(w.IDBKeyRange),this._createTransaction=function(Y,oe,Z,ne){return new C.Transaction(Y,oe,Z,C._options.chromeTransactionDurability,ne)},this._fireOnBlocked=function(Y){C.on("blocked").fire(Y),Ua.filter(function(oe){return oe.name===C.name&&oe!==C&&!oe._state.vcFired}).map(function(oe){return oe.on("versionchange").fire(Y)})},this.use(It),this.use(NV),this.use(rr),this.use(R),this.use(he);var re=new Proxy(this,{get:function(Y,oe,Z){if(oe==="_vip")return!0;if(oe==="table")return function(se){return Pg(C.table(se),re)};var ne=Reflect.get(Y,oe,Z);return ne instanceof jg?Pg(ne,re):oe==="tables"?ne.map(function(se){return Pg(se,re)}):oe==="_createTransaction"?function(){return Pg(ne.apply(this,arguments),re)}:ne}});this.vip=re,I.forEach(function(Y){return Y(C)})}var Eg,Wi=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",kV=(Ob.prototype.subscribe=function(g,w,C){return this._subscribe(g&&typeof g!="function"?g:{next:g,error:w,complete:C})},Ob.prototype[Wi]=function(){return this},Ob);function Ob(g){this._subscribe=g}try{Eg={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{Eg={indexedDB:null,IDBKeyRange:null}}function kE(g){var w,C=!1,I=new kV(function($){var V=ce(g),K,G=!1,J={},ee={},re={get closed(){return G},unsubscribe:function(){G||(G=!0,K&&K.abort(),Y&&pr.storagemutated.unsubscribe(Z))}};$.start&&$.start(re);var Y=!1,oe=function(){return Su(ne)},Z=function(se){Ql(J,se),Iu(ee,J)&&oe()},ne=function(){var se,ie,le;!G&&Eg.indexedDB&&(J={},se={},K&&K.abort(),K=new AbortController,le=function(fe){var pe=Un();try{V&&ws();var me=ji(g,fe);return me=V?me.finally(Bi):me}finally{pe&&tr()}}(ie={subscr:se,signal:K.signal,requery:oe,querier:g,trans:null}),Promise.resolve(le).then(function(fe){C=!0,w=fe,G||ie.signal.aborted||(J={},function(pe){for(var me in pe)if(f(pe,me))return;return 1}(ee=se)||Y||(pr(Wl,Z),Y=!0),Su(function(){return!G&&$.next&&$.next(fe)}))},function(fe){C=!1,["DatabaseClosedError","AbortError"].includes(fe==null?void 0:fe.name)||G||Su(function(){G||$.error&&$.error(fe)})}))};return setTimeout(oe,0),re});return I.hasValue=function(){return C},I.getValue=function(){return w},I}var Zl=Ns;function Ib(g){var w=Io;try{Io=!0,pr.storagemutated.fire(g),Mu(g,!0)}finally{Io=w}}h(Zl,r(r({},xe),{delete:function(g){return new Zl(g,{addons:[]}).delete()},exists:function(g){return new Zl(g,{addons:[]}).open().then(function(w){return w.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(g){try{return w=Zl.dependencies,C=w.indexedDB,w=w.IDBKeyRange,(Ts(C)?Promise.resolve(C.databases()).then(function(I){return I.map(function($){return $.name}).filter(function($){return $!==Wa})}):Nu(C,w).toCollection().primaryKeys()).then(g)}catch{return on(new Q.MissingAPI)}var w,C},defineClass:function(){return function(g){c(this,g)}},ignoreTransaction:function(g){return Be.trans?fa(Be.transless,g):g()},vip:ku,async:function(g){return function(){try{var w=m(g.apply(this,arguments));return w&&typeof w.then=="function"?w:Ne.resolve(w)}catch(C){return on(C)}}},spawn:function(g,w,C){try{var I=m(g.apply(C,w||[]));return I&&typeof I.then=="function"?I:Ne.resolve(I)}catch($){return on($)}},currentTransaction:{get:function(){return Be.trans||null}},waitFor:function(g,w){return w=Ne.resolve(typeof g=="function"?Zl.ignoreTransaction(g):g).timeout(w||6e4),Be.trans?Be.trans.waitFor(w):w},Promise:Ne,debug:{get:function(){return dn},set:function(g){ti(g)}},derive:v,extend:c,props:h,override:S,Events:wo,on:pr,liveQuery:kE,extendObservabilitySet:Ql,getByKeyPath:A,setByKeyPath:j,delByKeyPath:function(g,w){typeof w=="string"?j(g,w,void 0):"length"in w&&[].map.call(w,function(C){j(g,C,void 0)})},shallowClone:P,deepClone:L,getObjectDiff:U,cmp:mt,asap:E,minKey:-1/0,addons:[],connections:Ua,errnames:ke,dependencies:Eg,cache:Ga,semVer:"4.2.0",version:"4.2.0".split(".").map(function(g){return parseInt(g)}).reduce(function(g,w,C){return g+w/Math.pow(10,2*C)})})),Zl.maxKey=ma(Zl.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(pr(Wl,function(g){Io||(g=new CustomEvent(sh,{detail:g}),Io=!0,dispatchEvent(g),Io=!1)}),addEventListener(sh,function(g){g=g.detail,Io||Ib(g)}));var Ru,Io=!1,OE=function(){};return typeof BroadcastChannel<"u"&&((OE=function(){(Ru=new BroadcastChannel(sh)).onmessage=function(g){return g.data&&Ib(g.data)}})(),typeof Ru.unref=="function"&&Ru.unref(),pr(Wl,function(g){Io||Ru.postMessage(g)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(g){if(!Ns.disableBfCache&&g.persisted){dn&&console.debug("Dexie: handling persisted pagehide"),Ru!=null&&Ru.close();for(var w=0,C=Ua;w<C.length;w++)C[w].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(g){!Ns.disableBfCache&&g.persisted&&(dn&&console.debug("Dexie: handling persisted pageshow"),OE(),Ib({all:new In(-1/0,[[]])}))})),Ne.rejectionMapper=function(g,w){return!g||g instanceof we||g instanceof TypeError||g instanceof SyntaxError||!g.name||!Pe[g.name]?g:(w=new Pe[g.name](w||g.message,g),"stack"in g&&y(w,"stack",{get:function(){return this.inner.stack}}),w)},ti(dn),r(Ns,Object.freeze({__proto__:null,Dexie:Ns,liveQuery:kE,Entity:th,cmp:mt,PropModification:Ka,replacePrefix:function(g,w){return new Ka({replacePrefix:[g,w]})},add:function(g){return new Ka({add:g})},remove:function(g){return new Ka({remove:g})},default:Ns,RangeSet:In,mergeRanges:No,rangesOverlap:Yl}),{default:Ns}),Ns})})(lL);var eG=lL.exports;const I_=Ot(eG),QC=Symbol.for("Dexie"),qd=globalThis[QC]||(globalThis[QC]=I_);if(I_.semVer!==qd.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${I_.semVer} and ${qd.semVer}`);const{liveQuery:Nke,mergeRanges:kke,rangesOverlap:Oke,RangeSet:Ike,cmp:Dke,Entity:Mke,PropModification:Rke,replacePrefix:Lke,add:$ke,remove:zke,DexieYProvider:Fke}=qd,cL="GanaderoOS_DB",tG=7;class nG extends qd{constructor(){super(cL);mr(this,"animals");mr(this,"fathers");mr(this,"parturitions");mr(this,"weighings");mr(this,"lots");mr(this,"origins");mr(this,"breedingSeasons");mr(this,"sireLots");mr(this,"serviceRecords");mr(this,"events");mr(this,"feedingPlans");mr(this,"bodyWeighings");mr(this,"products");mr(this,"healthPlans");mr(this,"healthPlanTasks");mr(this,"healthEvents");this.version(1).stores({animals:"&id, createdAt, status, isReference, location",fathers:"&id",parturitions:"++id, &goatId, sireId, status",weighings:"++id, goatId, date",lots:"++id, name",origins:"++id, name",breedingGroups:"++id, sireId, status",serviceRecords:"++id, breedingGroupId, femaleId",events:"++id, animalId, date, type",feedingPlans:"++id, lotName",bodyWeighings:"++id, animalId, date"}),this.version(2).stores({products:"++id, &name",healthPlans:"++id, &name",healthPlanTasks:"++id, healthPlanId, productId",healthEvents:"++id, animalId, date, type, taskId"}),this.version(3).stores({animals:"&id, createdAt, status, isReference, location, sireLotId",breedingGroups:null,breedingSeasons:"++id, &name, status",sireLots:"++id, seasonId, sireId",serviceRecords:"++id, sireLotId, femaleId"}),this.version(4).stores({breedingSeasons:"&id, &name, status",sireLots:"&id, seasonId, sireId"}),this.version(5).stores({healthPlanTasks:"++id, healthPlanId, productId"}),this.version(6).stores({healthPlans:"++id, &name",healthPlanTasks:"++id, healthPlanId, productId"}),this.version(tG).stores({parturitions:"++id, &goatId, sireId, status, parturitionOutcome"})}}let lp=null;const rG=async()=>{if(lp)return lp;const t=new nG;try{return await t.open(),console.log("Base de datos local abierta con éxito."),lp=t,t}catch(e){return console.error("Error al abrir la base de datos local. Podría ser un problema de migración.",e),confirm("GanaderoOS ha sido actualizado y necesita reiniciar la base de datos local. Tus datos en la nube están a salvo. ¿Deseas continuar? La aplicación se recargará.")?(await qd.delete(cL),window.location.reload()):alert("La aplicación no puede continuar sin una base de datos funcional. Por favor, recarga la página e intenta de nuevo."),new Promise(()=>{})}},uL=()=>{if(!lp)throw new Error("La base de datos no ha sido inicializada. Llama a initDB() primero.");return lp},dL=k.createContext({animals:[],fathers:[],weighings:[],parturitions:[],lots:[],origins:[],breedingSeasons:[],sireLots:[],serviceRecords:[],events:[],feedingPlans:[],bodyWeighings:[],products:[],healthPlans:[],healthPlanTasks:[],healthEvents:[],isLoading:!0,syncStatus:"idle",addAnimal:async()=>{},updateAnimal:async()=>{},deleteAnimalPermanently:async()=>{},startDryingProcess:async()=>{},setLactationAsDry:async()=>{},addLot:async()=>{},deleteLot:async()=>{},addOrigin:async()=>{},deleteOrigin:async()=>{},addBreedingSeason:async()=>"",updateBreedingSeason:async()=>{},deleteBreedingSeason:async()=>{},addSireLot:async()=>"",updateSireLot:async()=>{},deleteSireLot:async()=>{},addServiceRecord:async()=>{},addFeedingPlan:async()=>{},addBatchEvent:async()=>{},addWeighing:async()=>{},addBodyWeighing:async()=>{},addParturition:async()=>{},fetchData:async()=>{},addFather:async()=>{},addProduct:async()=>{},updateProduct:async()=>{},deleteProduct:async()=>{},addHealthPlan:async()=>{},updateHealthPlan:async()=>{},deleteHealthPlan:async()=>{},addHealthPlanTask:async()=>{},updateHealthPlanTask:async()=>{},deleteHealthPlanTask:async()=>{},addHealthEvent:async()=>{}}),Ge=()=>k.useContext(dL),iG=({children:t})=>{const{currentUser:e}=oL(),[n,r]=k.useState([]),[i,a]=k.useState([]),[s,o]=k.useState([]),[c,u]=k.useState([]),[d,f]=k.useState([]),[h,p]=k.useState([]),[y,v]=k.useState([]),[b,x]=k.useState([]),[_,S]=k.useState([]),[T,E]=k.useState([]),[A,j]=k.useState([]),[P,O]=k.useState([]),[D,M]=k.useState([]),[z,L]=k.useState([]),[te,X]=k.useState([]),[W,B]=k.useState([]),[F,q]=k.useState(!0),[ae,ce]=k.useState(navigator.onLine?"idle":"offline"),ve=k.useRef(null),we=k.useCallback(async()=>{try{const ye=uL(),[qe,jn,Ne,ut,Bn,yt,On,_i,Va,Si,Un,tr,fn,bs,Tt,Ht]=await Promise.all([ye.animals.toArray(),ye.fathers.toArray(),ye.weighings.toArray(),ye.parturitions.toArray(),ye.lots.toArray(),ye.origins.toArray(),ye.breedingSeasons.toArray(),ye.sireLots.toArray(),ye.serviceRecords.toArray(),ye.events.toArray(),ye.feedingPlans.toArray(),ye.bodyWeighings.toArray(),ye.products.toArray(),ye.healthPlans.toArray(),ye.healthPlanTasks.toArray(),ye.healthEvents.toArray()]);r(qe),a(jn),o(Ne),u(ut),f(Bn),p(yt),v(On),x(_i),S(Va),E(Si),j(Un),O(tr),M(fn),L(bs),X(Tt),B(Ht)}catch(ye){console.error("Error al cargar datos locales:",ye)}finally{q(!1)}},[]);k.useEffect(()=>{let ye=[];const qe=()=>ce("idle"),jn=()=>ce("offline");return window.addEventListener("online",qe),window.addEventListener("offline",jn),(async()=>{if(!e){q(!1),r([]),a([]),o([]),u([]),f([]),p([]),v([]),x([]),S([]),E([]),j([]),O([]),M([]),L([]),X([]),B([]);return}q(!0);try{const ut=await rG();await we();const Bn=On=>VH(Hn(ht,On),BH("userId","==",e.uid)),yt=(On,_i)=>{const Va=GH(Bn(On),async Si=>{Si.docChanges().length>0&&(console.log(`[Sync] Recibidos ${Si.docChanges().length} cambios para '${On}'. Actualizando DB local.`),navigator.onLine&&(ce("syncing"),ve.current&&clearTimeout(ve.current),ve.current=setTimeout(()=>ce("idle"),2e3)));const Un=[];for(const tr of Si.docChanges()){const fn={...tr.doc.data(),id:tr.doc.id};(tr.type==="added"||tr.type==="modified")&&Un.push(_i.put(fn)),tr.type==="removed"&&Un.push(_i.delete(tr.doc.id))}Un.length>0&&(await Promise.all(Un),we())},Si=>{Si.code!=="permission-denied"&&console.error(`Error sincronizando ${On}:`,Si)});ye.push(Va)};yt("animals",ut.animals),yt("fathers",ut.fathers),yt("parturitions",ut.parturitions),yt("weighings",ut.weighings),yt("lots",ut.lots),yt("origins",ut.origins),yt("breedingSeasons",ut.breedingSeasons),yt("sireLots",ut.sireLots),yt("serviceRecords",ut.serviceRecords),yt("events",ut.events),yt("feedingPlans",ut.feedingPlans),yt("bodyWeighings",ut.bodyWeighings),yt("products",ut.products),yt("healthPlans",ut.healthPlans),yt("healthPlanTasks",ut.healthPlanTasks),yt("healthEvents",ut.healthEvents)}catch(ut){console.error("Fallo crítico en la inicialización de DataProvider:",ut)}})(),()=>{ye.forEach(ut=>ut()),window.removeEventListener("online",qe),window.removeEventListener("offline",jn),ve.current&&clearTimeout(ve.current)}},[e,we]);const Le=async ye=>{if(!e)throw new Error("Usuario no autenticado");await ai(Hn(ht,"events"),{...ye,userId:e.uid})},Ye=async ye=>{if(!e)throw new Error("Usuario no autenticado");const qe=hn(ht,"animals",ye.id.toUpperCase());await HH(qe,{...ye,id:ye.id.toUpperCase(),userId:e.uid,createdAt:Date.now()})},et=async(ye,qe)=>{if(!e)throw new Error("Usuario no autenticado");const jn=hn(ht,"animals",ye),Ne=await qH(jn);if(!Ne.exists())throw new Error("El animal no existe.");const ut=Ne.data(),Bn=new Date().toISOString().split("T")[0];if(qe.location!==void 0&&qe.location!==ut.location&&await Le({animalId:ye,date:Bn,type:"Movimiento",details:`Movido del lote '${ut.location||"N/A"}' al lote '${qe.location||"Sin Asignar"}'`}),qe.status&&qe.status!==ut.status){let yt=`Estado cambiado de '${ut.status}' a '${qe.status}'`;qe.status==="Venta"&&(yt=`Vendido por ${qe.salePrice||"precio no especificado"}. Comprador: ${qe.saleBuyer||"N/A"}. Fin: ${qe.salePurpose||"N/A"}.`),qe.status==="Muerte"&&(yt=`Muerte. Causa: ${qe.deathReason||"No especificada"}.`),qe.status==="Descarte"&&(yt=`Descarte. Causa: ${qe.cullReason||"No especificada"}. ${qe.cullReasonDetails||""}`),await Le({animalId:ye,date:qe.endDate||Bn,type:"Cambio de Estado",details:yt})}await Ro(jn,qe)},ke=async ye=>{if(!e)throw new Error("Usuario no autenticado");await Lo(hn(ht,"animals",ye))},We=async ye=>{if(!e)throw new Error("Usuario no autenticado");await Ro(hn(ht,"parturitions",ye),{status:"en-secado",dryingStartDate:new Date().toISOString().split("T")[0]})},Q=async ye=>{if(!e)throw new Error("Usuario no autenticado");await Ro(hn(ht,"parturitions",ye),{status:"seca"})},Pe=async ye=>{if(!e)throw new Error("Usuario no autenticado");await ai(Hn(ht,"lots"),{name:ye,userId:e.uid})},xe=async ye=>{if(!e)throw new Error("Usuario no autenticado");await Lo(hn(ht,"lots",ye))},de=async ye=>{if(!e)throw new Error("Usuario no autenticado");await ai(Hn(ht,"origins"),{name:ye,userId:e.uid})},pt=async ye=>{if(!e)throw new Error("Usuario no autenticado");await Lo(hn(ht,"origins",ye))},nt=async ye=>{if(!e)throw new Error("Usuario no autenticado");await ai(Hn(ht,"weighings"),{...ye,userId:e.uid})},Oe=async ye=>{if(!e)throw new Error("Usuario no autenticado");await ai(Hn(ht,"bodyWeighings"),{...ye,userId:e.uid})},Ze=async ye=>{if(!e)throw new Error("Usuario no autenticado");await ai(Hn(ht,"fathers"),{...ye,userId:e.uid})},yn=async ye=>{if(!e)throw new Error("Usuario no autenticado");const qe=Ay(ht),jn=ye.motherId.toUpperCase(),Ne=ye.parturitionOutcome==="Aborto"&&!ye.inducedLactation?"finalizada":"activa",ut=hn(Hn(ht,"parturitions"));qe.set(ut,{goatId:jn,parturitionDate:ye.parturitionDate,sireId:ye.sireId,offspringCount:ye.offspringCount,parturitionType:ye.parturitionType,parturitionOutcome:ye.parturitionOutcome,status:Ne,userId:e.uid}),ye.liveOffspring&&ye.liveOffspring.length>0&&ye.liveOffspring.forEach(Bn=>{const yt=Bn.id.toUpperCase(),On=hn(ht,"animals",yt),_i={id:yt,sex:Bn.sex,status:"Activo",birthDate:ye.parturitionDate,motherId:jn,fatherId:ye.sireId,birthWeight:parseFloat(Bn.birthWeight),userId:e.uid,createdAt:Date.now()};qe.set(On,_i)}),await qe.commit()},Zr=async ye=>{if(!e)throw new Error("Usuario no autenticado");await ai(Hn(ht,"serviceRecords"),{...ye,userId:e.uid})},bi=async ye=>{if(!e)throw new Error("Usuario no autenticado");const qe=n.filter(ut=>ut.location===ye.lotName);if(qe.length===0){console.warn(`No se encontraron animales en el lote "${ye.lotName}" para registrar el evento.`);return}const jn=Ay(ht),Ne=Hn(ht,"events");qe.forEach(ut=>{const Bn=hn(Ne),yt={animalId:ut.id,date:ye.date,type:ye.type,details:ye.details,lotName:ye.lotName,notes:`Evento aplicado a todo el lote: ${ye.lotName}`};jn.set(Bn,{...yt,userId:e.uid})}),await jn.commit()},ei=async ye=>{if(!e)throw new Error("Usuario no autenticado");await ai(Hn(ht,"feedingPlans"),{...ye,userId:e.uid})},dn=async ye=>{if(!e)throw new Error("Usuario no autenticado");await ai(Hn(ht,"products"),{...ye,userId:e.uid})},ti=async(ye,qe)=>{if(!e)throw new Error("Usuario no autenticado");await Ro(hn(ht,"products",ye),qe)},zr=async ye=>{if(!e)throw new Error("Usuario no autenticado");await Lo(hn(ht,"products",ye))},ca=async ye=>{if(!e)throw new Error("Usuario no autenticado");await ai(Hn(ht,"healthPlans"),{...ye,userId:e.uid})},wi=async(ye,qe)=>{if(!e)throw new Error("Usuario no autenticado");await Ro(hn(ht,"healthPlans",ye),qe)},qt=async ye=>{if(!e)throw new Error("Usuario no autenticado");await Lo(hn(ht,"healthPlans",ye))},en=async ye=>{if(!e)throw new Error("Usuario no autenticado");await ai(Hn(ht,"healthPlanTasks"),{...ye,userId:e.uid})},za=async(ye,qe)=>{if(!e)throw new Error("Usuario no autenticado");await Ro(hn(ht,"healthPlanTasks",ye),qe)},Fa=async ye=>{if(!e)throw new Error("Usuario no autenticado");await Lo(hn(ht,"healthPlanTasks",ye))},yo=async ye=>{if(!e)throw new Error("Usuario no autenticado");await ai(Hn(ht,"healthEvents"),{...ye,userId:e.uid})},xo=async ye=>{if(!e)throw new Error("Usuario no autenticado");return(await ai(Hn(ht,"breedingSeasons"),{...ye,userId:e.uid})).id},Fr=async(ye,qe)=>{if(!e)throw new Error("Usuario no autenticado");await Ro(hn(ht,"breedingSeasons",ye),qe)},xs=async ye=>{if(!e)throw new Error("Usuario no autenticado");await Lo(hn(ht,"breedingSeasons",ye))},bo=async ye=>{if(!e)throw new Error("Usuario no autenticado");return(await ai(Hn(ht,"sireLots"),{...ye,userId:e.uid})).id},ni=async(ye,qe)=>{if(!e)throw new Error("Usuario no autenticado");await Ro(hn(ht,"sireLots",ye),qe)},Be=async ye=>{if(!e)throw new Error("Usuario no autenticado");await Lo(hn(ht,"sireLots",ye))};return l.jsx(dL.Provider,{value:{animals:n,fathers:i,weighings:s,parturitions:c,lots:d,origins:h,breedingSeasons:y,sireLots:b,serviceRecords:_,events:T,feedingPlans:A,bodyWeighings:P,products:D,healthPlans:z,healthPlanTasks:te,healthEvents:W,isLoading:F,syncStatus:ae,addAnimal:Ye,updateAnimal:et,deleteAnimalPermanently:ke,startDryingProcess:We,setLactationAsDry:Q,addLot:Pe,deleteLot:xe,addOrigin:de,deleteOrigin:pt,addBreedingSeason:xo,updateBreedingSeason:Fr,deleteBreedingSeason:xs,addSireLot:bo,updateSireLot:ni,deleteSireLot:Be,addServiceRecord:Zr,addFeedingPlan:ei,addBatchEvent:bi,addWeighing:nt,addBodyWeighing:Oe,addParturition:yn,fetchData:we,addFather:Ze,addProduct:dn,updateProduct:ti,deleteProduct:zr,addHealthPlan:ca,updateHealthPlan:wi,deleteHealthPlan:qt,addHealthPlanTask:en,updateHealthPlanTask:za,deleteHealthPlanTask:Fa,addHealthEvent:yo},children:t})};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aG=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fL=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var sG={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oG=k.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...o},c)=>k.createElement("svg",{ref:c,...sG,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:fL("lucide",i),...o},[...s.map(([u,d])=>k.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=(t,e)=>{const n=k.forwardRef(({className:r,...i},a)=>k.createElement(oG,{ref:a,iconNode:e,className:fL(`lucide-${aG(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=Ce("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xp=Ce("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=Ce("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=Ce("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lG=Ce("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=Ce("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cG=Ce("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=Ce("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uG=Ce("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dG=Ce("BarChart4",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M13 17V9",key:"1fwyjl"}],["path",{d:"M18 17V5",key:"sfb6ij"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=Ce("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fG=Ce("CalendarCheck2",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 14V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"bce9hv"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m16 20 2 2 4-4",key:"13tcca"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=Ce("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=Ce("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=Ce("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=Ce("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hG=Ce("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=Ce("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pG=Ce("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=Ce("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=Ce("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mG=Ce("CircleDot",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gG=Ce("CircleOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.35 2.69A10 10 0 0 1 21.3 15.65",key:"1pfsoa"}],["path",{d:"M19.08 19.08A10 10 0 1 1 4.92 4.92",key:"1ablyi"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=Ce("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=Ce("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=Ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vG=Ce("CloudCog",[["circle",{cx:"12",cy:"17",r:"3",key:"1spfwm"}],["path",{d:"M4.2 15.1A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.2",key:"zaobp"}],["path",{d:"m15.7 18.4-.9-.3",key:"4qxpbn"}],["path",{d:"m9.2 15.9-.9-.3",key:"17q7o2"}],["path",{d:"m10.6 20.7.3-.9",key:"1pf4s2"}],["path",{d:"m13.1 14.2.3-.9",key:"1mnuqm"}],["path",{d:"m13.6 20.7-.4-1",key:"1jpd1m"}],["path",{d:"m10.8 14.3-.4-1",key:"17ugyy"}],["path",{d:"m8.3 18.6 1-.4",key:"s42vdx"}],["path",{d:"m14.7 15.8 1-.4",key:"2wizun"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yG=Ce("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xG=Ce("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bG=Ce("Dna",[["path",{d:"M2 15c6.667-6 13.333 0 20-6",key:"1pyr53"}],["path",{d:"M9 22c1.798-1.998 2.518-3.995 2.807-5.993",key:"q3hbxp"}],["path",{d:"M15 2c-1.798 1.998-2.518 3.995-2.807 5.993",key:"80uv8i"}],["path",{d:"m17 6-2.5-2.5",key:"5cdfhj"}],["path",{d:"m14 8-1-1",key:"15nbz5"}],["path",{d:"m7 18 2.5 2.5",key:"16tu1a"}],["path",{d:"m3.5 14.5.5.5",key:"hapbhd"}],["path",{d:"m20 9 .5.5",key:"1n7z02"}],["path",{d:"m6.5 12.5 1 1",key:"cs35ky"}],["path",{d:"m16.5 10.5 1 1",key:"696xn5"}],["path",{d:"m10 16 1.5 1.5",key:"11lckj"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=Ce("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=Ce("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=Ce("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=Ce("Feather",[["path",{d:"M12.67 19a2 2 0 0 0 1.416-.588l6.154-6.172a6 6 0 0 0-8.49-8.49L5.586 9.914A2 2 0 0 0 5 11.328V18a1 1 0 0 0 1 1z",key:"18jl4k"}],["path",{d:"M16 8 2 22",key:"vp34q"}],["path",{d:"M17.5 15H9",key:"1oz8nu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wG=Ce("FileArchive",[["path",{d:"M16 22h2a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v18",key:"1oywqq"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _G=Ce("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=Ce("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=Ce("FilterX",[["path",{d:"M13.013 3H2l8 9.46V19l4 2v-8.54l.9-1.055",key:"1fi1da"}],["path",{d:"m22 3-5 5",key:"12jva0"}],["path",{d:"m17 3 5 5",key:"k36vhe"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SG=Ce("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=Ce("GitCompareArrows",[["circle",{cx:"5",cy:"6",r:"3",key:"1qnov2"}],["path",{d:"M12 6h5a2 2 0 0 1 2 2v7",key:"1yj91y"}],["path",{d:"m15 9-3-3 3-3",key:"1lwv8l"}],["circle",{cx:"19",cy:"18",r:"3",key:"1qljk2"}],["path",{d:"M12 18H7a2 2 0 0 1-2-2V9",key:"16sdep"}],["path",{d:"m9 15 3 3-3 3",key:"1m3kbl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=Ce("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jG=Ce("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=Ce("HeartCrack",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"m12 13-1-1 2-2-3-3 2-2",key:"xjdxli"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AG=Ce("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"12sd6o"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wx=Ce("HeartPulse",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=Ce("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=Ce("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=Ce("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PG=Ce("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=Ce("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=Ce("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=Ce("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=Ce("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EG=Ce("Milk",[["path",{d:"M8 2h8",key:"1ssgc1"}],["path",{d:"M9 2v2.789a4 4 0 0 1-.672 2.219l-.656.984A4 4 0 0 0 7 10.212V20a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-9.789a4 4 0 0 0-.672-2.219l-.656-.984A4 4 0 0 1 15 4.788V2",key:"qtp12x"}],["path",{d:"M7 15a6.472 6.472 0 0 1 5 0 6.47 6.47 0 0 0 5 0",key:"ygeh44"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=Ce("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=Ce("MoveRight",[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=Ce("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TG=Ce("PackageOpen",[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CG=Ce("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=Ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NG=Ce("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kG=Ce("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OG=Ce("Replace",[["path",{d:"M14 4c0-1.1.9-2 2-2",key:"1mvvbw"}],["path",{d:"M20 2c1.1 0 2 .9 2 2",key:"1mj6oe"}],["path",{d:"M22 8c0 1.1-.9 2-2 2",key:"v1wql3"}],["path",{d:"M16 10c-1.1 0-2-.9-2-2",key:"821ux0"}],["path",{d:"m3 7 3 3 3-3",key:"x25e72"}],["path",{d:"M6 10V5c0-1.7 1.3-3 3-3h1",key:"13af7h"}],["rect",{width:"8",height:"8",x:"2",y:"14",rx:"2",key:"17ihk4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=Ce("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=Ce("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=Ce("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=Ce("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IG=Ce("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=Ce("Sigma",[["path",{d:"M18 7V4H6l6 8-6 8h12v-3",key:"zis8ev"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DG=Ce("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MG=Ce("SquareActivity",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M17 12h-2l-2 5-2-10-2 5H7",key:"15hlnc"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=Ce("SquareCheckBig",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=Ce("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=Ce("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RG=Ce("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=Ce("Syringe",[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LG=Ce("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $G=Ce("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zG=Ce("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=Ce("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FG=Ce("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=Ce("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=Ce("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=Ce("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VG=Ce("Waypoints",[["circle",{cx:"12",cy:"4.5",r:"2.5",key:"r5ysbb"}],["path",{d:"m10.2 6.3-3.9 3.9",key:"1nzqf6"}],["circle",{cx:"4.5",cy:"12",r:"2.5",key:"jydg6v"}],["path",{d:"M7 12h10",key:"b7w52i"}],["circle",{cx:"19.5",cy:"12",r:"2.5",key:"1piiel"}],["path",{d:"m13.8 17.7 3.9-3.9",key:"1wyg1y"}],["circle",{cx:"12",cy:"19.5",r:"2.5",key:"13o1pw"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=Ce("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=Ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=Ce("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);var PL={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},eN=H.createContext&&H.createContext(PL),BG=["attr","size","title"];function UG(t,e){if(t==null)return{};var n=WG(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function WG(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Py(){return Py=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Py.apply(this,arguments)}function tN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ey(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tN(Object(n),!0).forEach(function(r){KG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function KG(t,e,n){return e=qG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qG(t){var e=HG(t,"string");return typeof e=="symbol"?e:e+""}function HG(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function EL(t){return t&&t.map((e,n)=>H.createElement(e.tag,Ey({key:n},e.attr),EL(e.child)))}function ho(t){return e=>H.createElement(GG,Py({attr:Ey({},t.attr)},e),EL(t.child))}function GG(t){var e=n=>{var{attr:r,size:i,title:a}=t,s=UG(t,BG),o=i||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),H.createElement("svg",Py({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:c,style:Ey(Ey({color:t.color||n.color},n.style),t.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),a&&H.createElement("title",null,a),t.children)};return eN!==void 0?H.createElement(eN.Consumer,null,n=>e(n)):e(PL)}function TL(t){return ho({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 23.38L89.844 89.845l-64.9 162.254 14.85 5.943c20.312-50.766 40.62-101.535 60.93-152.304l1.432-3.58L256 40.616l153.844 61.54 1.43 3.58 60.93 152.305 14.853-5.942-64.9-162.254C366.77 67.69 311.386 45.534 256 23.38zm0 36.624l-139.996 55.998L72.8 224h.2v263h78V329h-39v-18h297v176h30V224h.2c-14.402-36-28.802-72-43.204-107.998L256 60.004zM151 135h210v114H151V135zm23.563 18L199 201.873V153h-24.438zM313 153v48.873L337.438 153H313zm-144 29.127V231h24.438L169 182.127zm174 0L318.562 231H343v-48.873zm-98.73 18.69c-1.207-.02-2.31.02-3.288.128-2.823.31-10.76 3.708-16.86 7.3-2.796 1.645-5.23 3.22-7.122 4.484V231h78v-16.97c-4.193-1.675-10.334-4.02-17.578-6.368-11.206-3.63-24.71-6.71-33.152-6.846zM160 263h192v18H160v-18zm15.16 66L208 389.205 240.84 329h-65.68zm144 0L352 389.205 384.84 329h-65.68zM169 355.295v105.41L197.748 408 169 355.295zm78 0L218.252 408 247 460.705v-105.41zm66 0v105.41L341.748 408 313 355.295zm78 0L362.252 408 391 460.705v-105.41zm-183 71.5L175.16 487h65.68L208 426.795zm144 0L319.16 487h65.68L352 426.795z"},child:[]}]})(t)}function YG(t){return ho({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M23 23v466h466v-18H41v-82.184l85.854-57.234 70.023 70.022 65.133-260.536L387.28 203.7 455.07 95.73l19.317 11.858 6.102-71.1-60.644 37.616 19.884 12.207-59.01 93.99-130.732-65.366-62.865 251.462-57.98-57.978L41 367.184V23H23z"},child:[]}]})(t)}function XG(t){return ho({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M44.62 106a26 26 0 0 0-25.69 29.3c16 124 16 117.4 0 241.4A26 26 0 0 0 54.72 404l138.68-57.7c-1.2 9.5-2.4 18.9-3.9 30.4-2.5 19.8 17.3 35 35.8 27.3l252-124c9.7-4 16-13.5 16-24s-6.3-20-16-24l-252-124c-3.2-1.3-6.6-2-10.1-2-15.6.1-27.7 13.8-25.7 29.3 1.5 11.5 2.7 20.9 3.9 30.4L54.72 108a26 26 0 0 0-10.1-2z"},child:[]}]})(t)}function ig(t){return ho({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M273 459l7.79-20 6.21 20 5.79-23.33-4.25-48c-7.76 7.94-17.54 17.85-29.74 30.27zm38.5-380.86a115.06 115.06 0 0 0-21.13-19.6c-17.315-11.88-35.418-18.913-55.08-22.14-18.751-3.067-37.99-2.743-56.33.12A203.86 203.86 0 0 0 133 49.42a184.2 184.2 0 0 0-29.62 15.36c-12.304 8.597-10.431 6.828.95 1.82a179.6 179.6 0 0 1 30.9-10c50.427-4.832 98.41-7.579 134.17 27.17a80 80 0 0 1 12.28 16c4.714 8.06 7.805 16.877 9.66 25.59l45.69 2.84c-5.032-17.752-15.256-37.574-25.53-50.06zm50.05 26.63c-8.531-13.217-18.495-25.428-29.66-34.88a78.24 78.24 0 0 0-15.79-10.38c2.67 2.68 5.22 5.45 7.61 8.32a138.13 138.13 0 0 1 9.13 12.11l.1.14.09.14c9.772 15.14 17.164 33.862 20.78 49.15l22.19 1.3a253.49 253.49 0 0 0-14.43-25.91zm29.89 43l70 179.4-11.82 28.37-65.77-37.94-8 13.86 67.56 39-4.327 5.754L394.12 372l-65.33-31.47a42.41 42.41 0 0 0-9.29-1.43c-5.71 0-9.52 2.06-12.71 6.62-2.53 3.61-78.5 80.52-147.64 150.28H16V243.73l92.85 3.85 96.61-33.26 10.13-11a214.71 214.71 0 0 1 38 24.27 18.57 18.57 0 0 0 11.61 3.93c13.792-1.574 22.025-9.12 32.83-17.83-3.267-21.244-6.724-43.71-9.56-62.1-6.463-2.155-12.926-4.308-19.39-6.46l4.39-4.78zm-37.25 65.02c-4.024-14.705-20.114-19.427-30.58-18.14-3.073.432-6.167 1.427-8.77 2.68.868 3.09 2.17 7.87 3.79 10.35 6.527 9.211 17.348 13.898 27.64 12.51 3.967-.672 8.94-3.676 7.92-7.4zm61.63 105.47l19 20 11.6-11-19-20zM475 172.99s-40.54-27.8-57-1.2l11.25 28.83zM294 382.05l13.4 22.28-.4-35.64c-3.29 3.45-7.53 7.82-12.95 13.36zm-30.6-167c5.858 1.872 17.61-6.048 17.33-8.01l-6.67-43.33-28-9.31c-17.65-2.861-58.224-4.989-67.27 9.28 39.596 39.732 39.526 16.87 84.61 51.37zm127.08 172.89c-15.313-7.704-30.838-14.996-46.28-22.44 5.153 29.387 10.895 58.672 15.75 88.11l25.26 37.33-2.6-34L400 469.61v-28.67l10.19-41.95 6.67-11.05z"},child:[]}]})(t)}function QG(t){return ho({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M302.958 20.019l-93.916 46.564v35.404c31.305-15.522 62.61-31.047 93.916-46.568zm6.53 52.252l-95.4 47.3 63.036 78.137 95.397-47.303zm-111.915 55.492l-33.732 16.724h47.224zm-22.119 34.722l71.615 26.633-21.484-26.633zm-41.021 3.948v276.752l131.22 48.796v-276.75zm243.134 1.56c-31.306 15.521-62.61 31.044-93.916 46.567v275.863l93.916-46.567zM176.501 272.466s-15.3 15.085-9.889 24.203c4.167 7.02 21.889 5.418 21.889 5.418l15.549 3.848s17.72 10.374 21.887 5.416c5.41-6.44-9.887-29.098-9.887-29.098s35.91 33.492 29.662 47.318c-3.143 6.955-24.719-2.117-24.719-2.117s5.495 7.21 4.944 10.549c-1.001 6.062-13.774 9.916-13.774 9.916s1.111 21.24-6 25.168c-5.147 2.843-14.628.497-19.775-4.895-7.111-7.448-6-28.136-6-28.136s-12.775-10.177-13.776-16.735c-.55-3.611 4.944-8.103 4.944-8.103s-21.575-1.607-24.717-10.117c-6.247-16.919 29.662-32.635 29.662-32.635z"},child:[]}]})(t)}function JG(t){return ho({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M90.52 390.06h38.497v16.583H65.443V390.06l31.933-28.182c2.852-2.578 4.96-5.098 6.328-7.56 1.368-2.46 2.05-5.018 2.05-7.675 0-4.1-1.386-7.402-4.16-9.902-2.733-2.5-6.386-3.75-10.956-3.75-3.516 0-7.363.763-11.543 2.286-4.18 1.485-8.652 3.71-13.418 6.68v-19.22c5.078-1.678 10.098-2.948 15.06-3.807 4.96-.9 9.823-1.35 14.588-1.35 10.47 0 18.594 2.306 24.375 6.915 5.82 4.61 8.73 11.035 8.73 19.277 0 4.766-1.23 9.22-3.69 13.36-2.46 4.1-7.637 9.61-15.528 16.523l-18.69 16.406m349.377 32.915c5.897 1.524 10.37 4.18 13.417 7.97 3.086 3.75 4.63 8.534 4.63 14.355 0 8.672-3.322 15.273-9.962 19.804-6.64 4.493-16.328 6.74-29.063 6.74-4.492 0-9.004-.372-13.535-1.115-4.492-.704-8.945-1.778-13.36-3.223v-17.403c4.22 2.11 8.4 3.71 12.54 4.805 4.18 1.054 8.28 1.58 12.304 1.58 5.978 0 10.548-1.034 13.712-3.104 3.203-2.07 4.805-5.04 4.805-8.907 0-3.985-1.64-6.993-4.922-9.024-3.242-2.07-8.047-3.105-14.414-3.106h-9.022v-14.53h9.492c5.664 0 9.883-.88 12.656-2.638 2.773-1.796 4.16-4.51 4.16-8.144 0-3.36-1.347-5.957-4.043-7.793-2.695-1.836-6.504-2.754-11.426-2.754-3.632 0-7.304.41-11.015 1.232-3.71.82-7.403 2.03-11.074 3.632V384.83c4.453-1.25 8.867-2.186 13.242-2.812 4.375-.624 8.672-.937 12.89-.937 11.368 0 19.864 1.876 25.49 5.626 5.663 3.71 8.495 9.316 8.495 16.816 0 5.118-1.348 9.317-4.043 12.598-2.696 3.242-6.68 5.527-11.953 6.856M236.062 230.74h19.922v-56.544l-20.45 4.22v-15.352l20.333-4.22h21.445v71.895h19.922v15.585h-61.172V230.74M496 496V352H352V128H176v160H16v208"},child:[]}]})(t)}function ZG(t){return ho({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M24.844 25.563c1.333 77.685 25.778 141.568 63.283 187.955 4.367-4.937 8.77-9.796 13.13-14.553a9.5 9.5 0 0 1 7.348-3.178 9.5 9.5 0 0 1 6.66 16.016c-22.957 25.048-46.51 52.82-58.777 76.95-6.132 12.067-9.31 23.07-9.037 31.874.17 5.474 1.374 10.174 4.26 14.562l16.552-22.684a9.5 9.5 0 0 1 7.898-4.008 9.5 9.5 0 0 1 7.45 15.207l-16.635 22.797c2.973.316 6.316-.284 10.474-1.75 8.174-2.882 18.38-9.868 28.734-19.672 20.704-19.608 42.15-50.057 56.953-77.644a9.5 9.5 0 0 1 9.9-4.885c6.228 1.017 22.147 2.215 35.78.573 6.816-.82 13.107-2.395 17.232-4.432 4.124-2.035 5.597-3.84 6.12-5.934a9.5 9.5 0 1 1 18.434 4.603c-2.193 8.78-8.967 14.825-16.145 18.37-7.18 3.542-15.245 5.277-23.372 6.256-12.798 1.542-25.47 1.082-34.522.143-2.816 5.038-5.806 10.122-8.937 15.192 29.03 14.058 60.48 21.354 92.34 21.115 22.055-.164 43.82-4.29 64.64-11.937-6.014-8.637-11.297-17.378-15.596-25.96A9.5 9.5 0 1 1 326 252.03c13.688 27.32 40.692 59.164 67.537 79.982 13.423 10.41 26.846 18.047 37.842 21.363 5.988 1.806 10.902 2.378 14.983 1.854l-10.996-13.093a9.5 9.5 0 0 1 7.06-15.715 9.5 9.5 0 0 1 7.49 3.494l12.054 14.352c3.226-4.725 4.71-9.948 5.042-16.102.513-9.534-2.39-21.344-8.18-34.158-11.578-25.63-34.297-54.796-57.053-79.625a9.5 9.5 0 0 1 7.322-16.01 9.5 9.5 0 0 1 6.685 3.172c3.1 3.384 6.205 6.848 9.29 10.37 37.514-47.34 61.834-111.574 62.892-186.352H24.843zm138.664 270.68c-4.952 14.607-8.863 29.266-11.043 42.61-2.476 15.154-2.608 28.608-.29 37.745 2.32 9.137 5.71 13.32 12.514 15.22 10.31 2.88 17.56 1.32 24.884-3.572 7.325-4.893 14.436-13.87 20.696-25.87 6.813-13.064 12.555-29.486 17.517-47.09-22.16-3.106-43.775-9.54-64.28-19.044zm173.04 6.083c-9.938 3.936-20.108 7.144-30.456 9.57.512.913 1.02 1.844 1.54 2.733 7.736 13.262 16.197 23.722 23.802 29.292 7.604 5.57 12.882 6.638 19.34 3.77 7.937-3.52 12.458-8.014 15.236-14.087-10.454-9.556-20.457-20.185-29.46-31.28z"},child:[]}]})(t)}const eY=()=>{const[t,e]=k.useState(!0),[n,r]=k.useState(""),[i,a]=k.useState(""),[s,o]=k.useState(null),[c,u]=k.useState(!1),d=async()=>{if(window.confirm("¿Estás seguro de que quieres forzar la eliminación de la base de datos local? Esto no afectará tus datos en la nube."))try{await qd.delete("GanaderoOS_DB"),alert("Base de datos local eliminada con éxito. La página se recargará."),window.location.reload()}catch(p){alert("Error al eliminar la base de datos."),console.error(p)}},f=p=>{if(p.code==="auth/network-request-failed")return"No hay conexión a internet. Se requiere conexión para iniciar sesión.";switch(p.code){case"auth/invalid-email":return"El formato del correo electrónico no es válido.";case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":return"Correo electrónico o contraseña incorrectos.";case"auth/email-already-in-use":return"Este correo electrónico ya está registrado.";case"auth/weak-password":return"La contraseña debe tener al menos 6 caracteres.";default:return console.error("Firebase Auth Error:",p),"Ocurrió un error inesperado. Por favor, intenta de nuevo."}},h=async p=>{p.preventDefault(),o(null),u(!0);try{t?await RW(Kd,n,i):await MW(Kd,n,i)}catch(y){o(f(y))}finally{u(!1)}};return l.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 font-sans",children:l.jsxs("div",{className:"w-full max-w-sm",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-2",children:[l.jsx(ig,{className:"w-12 h-12 text-brand-orange"}),l.jsx("h1",{className:"text-4xl font-bold text-white",children:"GanaderoOS"})]}),l.jsx("p",{className:"text-zinc-400",children:"El sistema operativo para tu finca."})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-6 border border-brand-border",children:[l.jsxs("div",{className:"flex bg-zinc-900/80 rounded-xl p-1 w-full mb-6",children:[l.jsx("button",{onClick:()=>e(!0),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t?"bg-zinc-700 text-white":"text-zinc-400 hover:bg-zinc-800/50"}`,children:"Iniciar Sesión"}),l.jsx("button",{onClick:()=>e(!1),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t?"text-zinc-400 hover:bg-zinc-800/50":"bg-zinc-700 text-white"}`,children:"Registrarse"})]}),l.jsxs("form",{onSubmit:h,className:"space-y-4",children:[l.jsx("input",{type:"email",value:n,onChange:p=>r(p.target.value),placeholder:"Correo electrónico",required:!0,className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl border border-transparent focus:border-brand-orange focus:ring-0 focus:outline-none placeholder-zinc-400"}),l.jsx("input",{type:"password",value:i,onChange:p=>a(p.target.value),placeholder:"Contraseña",required:!0,className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl border border-transparent focus:border-brand-orange focus:ring-0 focus:outline-none placeholder-zinc-400"}),s&&l.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[l.jsx(Ut,{size:18}),l.jsx("span",{children:s})]}),l.jsx("button",{type:"submit",disabled:c,className:"w-full bg-brand-orange text-white font-bold py-3 rounded-xl transition-colors hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Procesando...":t?"Iniciar Sesión":"Crear Cuenta"})]})]}),l.jsxs("div",{className:"mt-6 text-center",children:[l.jsxs("button",{onClick:d,className:"flex items-center justify-center gap-2 mx-auto bg-brand-red/20 text-brand-red font-semibold py-2 px-4 rounded-lg border border-brand-red/50 hover:bg-brand-red/30 transition-colors",children:[l.jsx(fo,{size:16}),"Forzar Reinicio de DB Local"]}),l.jsx("p",{className:"text-xs text-zinc-600 mt-2",children:"Si la app no carga, usa este botón."})]})]})})};function tY(t){return ho({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M510.28 445.86l-73.03-292.13c-3.8-15.19-16.44-25.72-30.87-25.72h-60.25c3.57-10.05 5.88-20.72 5.88-32 0-53.02-42.98-96-96-96s-96 42.98-96 96c0 11.28 2.3 21.95 5.88 32h-60.25c-14.43 0-27.08 10.54-30.87 25.72L1.72 445.86C-6.61 479.17 16.38 512 48.03 512h415.95c31.64 0 54.63-32.83 46.3-66.14zM256 128c-17.64 0-32-14.36-32-32s14.36-32 32-32 32 14.36 32 32-14.36 32-32 32z"},child:[]}]})(t)}const st=({isOpen:t,onClose:e,title:n,children:r,size:i="default"})=>{if(!t)return null;const a=i==="fullscreen"?"items-end":"items-center",s={default:"max-w-md m-4 rounded-2xl",large:"max-w-xl m-4 rounded-2xl",fullscreen:"w-full h-[95vh] rounded-t-2xl flex flex-col"};return l.jsx("div",{className:`fixed inset-0 bg-black/60 backdrop-blur-md flex justify-center z-50 animate-fade-in ${a}`,onClick:e,children:l.jsxs("div",{className:`bg-ios-modal-bg border border-zinc-700/80 shadow-2xl text-white transform transition-all animate-slide-up ${s[i]}`,onClick:o=>o.stopPropagation(),children:[l.jsxs("header",{className:"flex-shrink-0 flex justify-between items-center p-4 border-b border-zinc-800/80",children:[l.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:n}),l.jsx("button",{onClick:e,className:"p-1 rounded-full text-zinc-500 hover:text-white hover:bg-zinc-700/50 transition-colors",children:l.jsx(Cl,{size:20})})]}),l.jsx("div",{className:i==="fullscreen"?"flex-1 overflow-y-auto p-4":"overflow-y-auto max-h-[85vh] p-6",children:r})]})})},CL=({isOpen:t,onClose:e})=>{const{addLot:n}=Ge(),[r,i]=k.useState(""),[a,s]=k.useState(""),o=async()=>{if(r.trim()===""){s("El nombre del lote no puede estar vacío.");return}try{await n(r),i(""),s(""),e()}catch(u){s("No se pudo guardar el lote."),console.error(u)}},c=()=>{i(""),s(""),e()};return l.jsx(st,{isOpen:t,onClose:c,title:"Crear Nuevo Lote",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-zinc-400",children:"Introduce el nombre de la nueva ubicación o lote en tu finca."}),l.jsx("div",{children:l.jsx("input",{type:"text",value:r,onChange:u=>i(u.target.value),placeholder:"Ej: Cabritonas Servicio",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0"})}),a&&l.jsx("p",{className:"text-sm text-brand-red",children:a}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[l.jsx("button",{onClick:c,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{onClick:o,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:"Guardar Lote"})]})]})})},NL=k.createContext({});function uu(t){const e=k.useRef(null);return e.current===null&&(e.current=t()),e.current}const wA=k.createContext(null),_A=k.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function nY(t=!0){const e=k.useContext(wA);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=k.useId();k.useEffect(()=>{t&&i(a)},[t]);const s=k.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,s]:[!0]}const SA=typeof window<"u",jA=SA?k.useLayoutEffect:k.useEffect,Di=t=>t;let kL=Di;function AA(t){let e;return()=>(e===void 0&&(e=t()),e)}const Hd=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Ks=t=>t*1e3,qs=t=>t/1e3,rY={useManualTiming:!1};function iY(t){let e=new Set,n=new Set,r=!1,i=!1;const a=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1};function o(u){a.has(u)&&(c.schedule(u),t()),u(s)}const c={schedule:(u,d=!1,f=!1)=>{const p=f&&r?e:n;return d&&a.add(u),p.has(u)||p.add(u),u},cancel:u=>{n.delete(u),a.delete(u)},process:u=>{if(s=u,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(o),e.clear(),r=!1,i&&(i=!1,c.process(u))}};return c}const Qg=["read","resolveKeyframes","update","preRender","render","postRender"],aY=40;function OL(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,s=Qg.reduce((x,_)=>(x[_]=iY(a),x),{}),{read:o,resolveKeyframes:c,update:u,preRender:d,render:f,postRender:h}=s,p=()=>{const x=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(x-i.timestamp,aY),1),i.timestamp=x,i.isProcessing=!0,o.process(i),c.process(i),u.process(i),d.process(i),f.process(i),h.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(p))},y=()=>{n=!0,r=!0,i.isProcessing||t(p)};return{schedule:Qg.reduce((x,_)=>{const S=s[_];return x[_]=(T,E=!1,A=!1)=>(n||y(),S.schedule(T,E,A)),x},{}),cancel:x=>{for(let _=0;_<Qg.length;_++)s[Qg[_]].cancel(x)},state:i,steps:s}}const{schedule:Jt,cancel:io,state:yr,steps:xw}=OL(typeof requestAnimationFrame<"u"?requestAnimationFrame:Di,!0),IL=k.createContext({strict:!1}),nN={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Gd={};for(const t in nN)Gd[t]={isEnabled:e=>nN[t].some(n=>!!e[n])};function sY(t){for(const e in t)Gd[e]={...Gd[e],...t[e]}}const oY=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ty(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||oY.has(t)}let DL=t=>!Ty(t);function lY(t){t&&(DL=e=>e.startsWith("on")?!Ty(e):t(e))}try{lY(require("@emotion/is-prop-valid").default)}catch{}function cY(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(DL(i)||n===!0&&Ty(i)||!e&&!Ty(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function uY(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const Ax=k.createContext({});function Jp(t){return typeof t=="string"||Array.isArray(t)}function Px(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const PA=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],EA=["initial",...PA];function Ex(t){return Px(t.animate)||EA.some(e=>Jp(t[e]))}function ML(t){return!!(Ex(t)||t.variants)}function dY(t,e){if(Ex(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Jp(n)?n:void 0,animate:Jp(r)?r:void 0}}return t.inherit!==!1?e:{}}function fY(t){const{initial:e,animate:n}=dY(t,k.useContext(Ax));return k.useMemo(()=>({initial:e,animate:n}),[rN(e),rN(n)])}function rN(t){return Array.isArray(t)?t.join(" "):t}const hY=Symbol.for("motionComponentSymbol");function od(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function pY(t,e,n){return k.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):od(n)&&(n.current=r))},[e])}const TA=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),mY="framerAppearId",RL="data-"+TA(mY),{schedule:CA}=OL(queueMicrotask,!1),LL=k.createContext({});function gY(t,e,n,r,i){var a,s;const{visualElement:o}=k.useContext(Ax),c=k.useContext(IL),u=k.useContext(wA),d=k.useContext(_A).reducedMotion,f=k.useRef(null);r=r||c.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:o,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const h=f.current,p=k.useContext(LL);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&vY(f.current,n,i,p);const y=k.useRef(!1);k.useInsertionEffect(()=>{h&&y.current&&h.update(n,u)});const v=n[RL],b=k.useRef(!!v&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,v))&&((s=window.MotionHasOptimisedAnimation)===null||s===void 0?void 0:s.call(window,v)));return jA(()=>{h&&(y.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),CA.render(h.render),b.current&&h.animationState&&h.animationState.animateChanges())}),k.useEffect(()=>{h&&(!b.current&&h.animationState&&h.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)===null||x===void 0||x.call(window,v)}),b.current=!1))}),h}function vY(t,e,n,r){const{layoutId:i,layout:a,drag:s,dragConstraints:o,layoutScroll:c,layoutRoot:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:$L(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!s||o&&od(o),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:c,layoutRoot:u})}function $L(t){if(t)return t.options.allowProjection!==!1?t.projection:$L(t.parent)}function yY({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var a,s;t&&sY(t);function o(u,d){let f;const h={...k.useContext(_A),...u,layoutId:xY(u)},{isStatic:p}=h,y=fY(u),v=r(u,p);if(!p&&SA){bY();const b=wY(h);f=b.MeasureLayout,y.visualElement=gY(i,v,h,e,b.ProjectionNode)}return l.jsxs(Ax.Provider,{value:y,children:[f&&y.visualElement?l.jsx(f,{visualElement:y.visualElement,...h}):null,n(i,u,pY(v,y.visualElement,d),v,p,y.visualElement)]})}o.displayName=`motion.${typeof i=="string"?i:`create(${(s=(a=i.displayName)!==null&&a!==void 0?a:i.name)!==null&&s!==void 0?s:""})`}`;const c=k.forwardRef(o);return c[hY]=i,c}function xY({layoutId:t}){const e=k.useContext(NL).id;return e&&t!==void 0?e+"-"+t:t}function bY(t,e){k.useContext(IL).strict}function wY(t){const{drag:e,layout:n}=Gd;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const _Y=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function NA(t){return typeof t!="string"||t.includes("-")?!1:!!(_Y.indexOf(t)>-1||/[A-Z]/u.test(t))}function iN(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function kA(t,e,n,r){if(typeof e=="function"){const[i,a]=iN(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=iN(r);e=e(n!==void 0?n:t.custom,i,a)}return e}const L_=t=>Array.isArray(t),SY=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),jY=t=>L_(t)?t[t.length-1]||0:t,wr=t=>!!(t&&t.getVelocity);function Lv(t){const e=wr(t)?t.get():t;return SY(e)?e.toValue():e}function AY({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,a){const s={latestValues:PY(r,i,a,t),renderState:e()};return n&&(s.onMount=o=>n({props:r,current:o,...s}),s.onUpdate=o=>n(o)),s}const zL=t=>(e,n)=>{const r=k.useContext(Ax),i=k.useContext(wA),a=()=>AY(t,e,r,i);return n?a():uu(a)};function PY(t,e,n,r){const i={},a=r(t,{});for(const h in a)i[h]=Lv(a[h]);let{initial:s,animate:o}=t;const c=Ex(t),u=ML(t);e&&u&&!c&&t.inherit!==!1&&(s===void 0&&(s=e.initial),o===void 0&&(o=e.animate));let d=n?n.initial===!1:!1;d=d||s===!1;const f=d?o:s;if(f&&typeof f!="boolean"&&!Px(f)){const h=Array.isArray(f)?f:[f];for(let p=0;p<h.length;p++){const y=kA(t,h[p]);if(y){const{transitionEnd:v,transition:b,...x}=y;for(const _ in x){let S=x[_];if(Array.isArray(S)){const T=d?S.length-1:0;S=S[T]}S!==null&&(i[_]=S)}for(const _ in v)i[_]=v[_]}}}return i}const Df=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],du=new Set(Df),FL=t=>e=>typeof e=="string"&&e.startsWith(t),VL=FL("--"),EY=FL("var(--"),OA=t=>EY(t)?TY.test(t.split("/*")[0].trim()):!1,TY=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,BL=(t,e)=>e&&typeof t=="number"?e.transform(t):t,ao=(t,e,n)=>n>e?e:n<t?t:n,Mf={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Zp={...Mf,transform:t=>ao(0,1,t)},Jg={...Mf,default:1},ag=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Vo=ag("deg"),ls=ag("%"),Qe=ag("px"),CY=ag("vh"),NY=ag("vw"),aN={...ls,parse:t=>ls.parse(t)/100,transform:t=>ls.transform(t*100)},kY={borderWidth:Qe,borderTopWidth:Qe,borderRightWidth:Qe,borderBottomWidth:Qe,borderLeftWidth:Qe,borderRadius:Qe,radius:Qe,borderTopLeftRadius:Qe,borderTopRightRadius:Qe,borderBottomRightRadius:Qe,borderBottomLeftRadius:Qe,width:Qe,maxWidth:Qe,height:Qe,maxHeight:Qe,top:Qe,right:Qe,bottom:Qe,left:Qe,padding:Qe,paddingTop:Qe,paddingRight:Qe,paddingBottom:Qe,paddingLeft:Qe,margin:Qe,marginTop:Qe,marginRight:Qe,marginBottom:Qe,marginLeft:Qe,backgroundPositionX:Qe,backgroundPositionY:Qe},OY={rotate:Vo,rotateX:Vo,rotateY:Vo,rotateZ:Vo,scale:Jg,scaleX:Jg,scaleY:Jg,scaleZ:Jg,skew:Vo,skewX:Vo,skewY:Vo,distance:Qe,translateX:Qe,translateY:Qe,translateZ:Qe,x:Qe,y:Qe,z:Qe,perspective:Qe,transformPerspective:Qe,opacity:Zp,originX:aN,originY:aN,originZ:Qe},sN={...Mf,transform:Math.round},IA={...kY,...OY,zIndex:sN,size:Qe,fillOpacity:Zp,strokeOpacity:Zp,numOctaves:sN},IY={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},DY=Df.length;function MY(t,e,n){let r="",i=!0;for(let a=0;a<DY;a++){const s=Df[a],o=t[s];if(o===void 0)continue;let c=!0;if(typeof o=="number"?c=o===(s.startsWith("scale")?1:0):c=parseFloat(o)===0,!c||n){const u=BL(o,IA[s]);if(!c){i=!1;const d=IY[s]||s;r+=`${d}(${u}) `}n&&(e[s]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function DA(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let s=!1,o=!1;for(const c in e){const u=e[c];if(du.has(c)){s=!0;continue}else if(VL(c)){i[c]=u;continue}else{const d=BL(u,IA[c]);c.startsWith("origin")?(o=!0,a[c]=d):r[c]=d}}if(e.transform||(s||n?r.transform=MY(e,t.transform,n):r.transform&&(r.transform="none")),o){const{originX:c="50%",originY:u="50%",originZ:d=0}=a;r.transformOrigin=`${c} ${u} ${d}`}}const RY={offset:"stroke-dashoffset",array:"stroke-dasharray"},LY={offset:"strokeDashoffset",array:"strokeDasharray"};function $Y(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?RY:LY;t[a.offset]=Qe.transform(-r);const s=Qe.transform(e),o=Qe.transform(n);t[a.array]=`${s} ${o}`}function oN(t,e,n){return typeof t=="string"?t:Qe.transform(e+n*t)}function zY(t,e,n){const r=oN(e,t.x,t.width),i=oN(n,t.y,t.height);return`${r} ${i}`}function MA(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:a,pathLength:s,pathSpacing:o=1,pathOffset:c=0,...u},d,f){if(DA(t,u,f),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:p,dimensions:y}=t;h.transform&&(y&&(p.transform=h.transform),delete h.transform),y&&(i!==void 0||a!==void 0||p.transform)&&(p.transformOrigin=zY(y,i!==void 0?i:.5,a!==void 0?a:.5)),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),s!==void 0&&$Y(h,s,o,c,!1)}const RA=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),UL=()=>({...RA(),attrs:{}}),LA=t=>typeof t=="string"&&t.toLowerCase()==="svg";function WL(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const a in n)t.style.setProperty(a,n[a])}const KL=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function qL(t,e,n,r){WL(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(KL.has(i)?i:TA(i),e.attrs[i])}const Cy={};function FY(t){Object.assign(Cy,t)}function HL(t,{layout:e,layoutId:n}){return du.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Cy[t]||t==="opacity")}function $A(t,e,n){var r;const{style:i}=t,a={};for(const s in i)(wr(i[s])||e.style&&wr(e.style[s])||HL(s,t)||((r=n==null?void 0:n.getValue(s))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[s]=i[s]);return a}function GL(t,e,n){const r=$A(t,e,n);for(const i in t)if(wr(t[i])||wr(e[i])){const a=Df.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}function VY(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const lN=["x","y","width","height","cx","cy","r"],BY={useVisualState:zL({scrapeMotionValuesFromProps:GL,createRenderState:UL,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let a=!!t.drag;if(!a){for(const o in i)if(du.has(o)){a=!0;break}}if(!a)return;let s=!e;if(e)for(let o=0;o<lN.length;o++){const c=lN[o];t[c]!==e[c]&&(s=!0)}s&&Jt.read(()=>{VY(n,r),Jt.render(()=>{MA(r,i,LA(n.tagName),t.transformTemplate),qL(n,r)})})}})},UY={useVisualState:zL({scrapeMotionValuesFromProps:$A,createRenderState:RA})};function YL(t,e,n){for(const r in e)!wr(e[r])&&!HL(r,n)&&(t[r]=e[r])}function WY({transformTemplate:t},e){return k.useMemo(()=>{const n=RA();return DA(n,e,t),Object.assign({},n.vars,n.style)},[e])}function KY(t,e){const n=t.style||{},r={};return YL(r,n,t),Object.assign(r,WY(t,e)),r}function qY(t,e){const n={},r=KY(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function HY(t,e,n,r){const i=k.useMemo(()=>{const a=UL();return MA(a,e,LA(r),t.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};YL(a,t.style,t),i.style={...a,...i.style}}return i}function GY(t=!1){return(n,r,i,{latestValues:a},s)=>{const c=(NA(n)?HY:qY)(r,a,s,n),u=cY(r,typeof n=="string",t),d=n!==k.Fragment?{...u,...c,ref:i}:{},{children:f}=r,h=k.useMemo(()=>wr(f)?f.get():f,[f]);return k.createElement(n,{...d,children:h})}}function YY(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const s={...NA(r)?BY:UY,preloadedFeatures:t,useRender:GY(i),createVisualElement:e,Component:r};return yY(s)}}function XL(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Tx(t,e,n){const r=t.getProps();return kA(r,e,n!==void 0?n:r.custom,t)}const XY=AA(()=>window.ScrollTimeline!==void 0);class QY{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(XY()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class JY extends QY{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function zA(t,e){return t?t[e]||t.default||t:void 0}const $_=2e4;function QL(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<$_;)e+=n,r=t.next(e);return e>=$_?1/0:e}function FA(t){return typeof t=="function"}function cN(t,e){t.timeline=e,t.onfinish=null}const VA=t=>Array.isArray(t)&&typeof t[0]=="number",ZY={linearEasing:void 0};function eX(t,e){const n=AA(t);return()=>{var r;return(r=ZY[e])!==null&&r!==void 0?r:n()}}const Ny=eX(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),JL=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=t(Hd(0,i-1,a))+", ";return`linear(${r.substring(0,r.length-2)})`};function ZL(t){return!!(typeof t=="function"&&Ny()||!t||typeof t=="string"&&(t in z_||Ny())||VA(t)||Array.isArray(t)&&t.every(ZL))}const Wh=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,z_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Wh([0,.65,.55,1]),circOut:Wh([.55,0,1,.45]),backIn:Wh([.31,.01,.66,-.59]),backOut:Wh([.33,1.53,.69,.99])};function e$(t,e){if(t)return typeof t=="function"&&Ny()?JL(t,e):VA(t)?Wh(t):Array.isArray(t)?t.map(n=>e$(n,e)||z_.easeOut):z_[t]}const xa={x:!1,y:!1};function t$(){return xa.x||xa.y}function tX(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const a=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}function n$(t,e){const n=tX(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function uN(t){return e=>{e.pointerType==="touch"||t$()||t(e)}}function nX(t,e,n={}){const[r,i,a]=n$(t,n),s=uN(o=>{const{target:c}=o,u=e(o);if(typeof u!="function"||!c)return;const d=uN(f=>{u(f),c.removeEventListener("pointerleave",d)});c.addEventListener("pointerleave",d,i)});return r.forEach(o=>{o.addEventListener("pointerenter",s,i)}),a}const r$=(t,e)=>e?t===e?!0:r$(t,e.parentElement):!1,BA=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,rX=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function iX(t){return rX.has(t.tagName)||t.tabIndex!==-1}const Kh=new WeakSet;function dN(t){return e=>{e.key==="Enter"&&t(e)}}function bw(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const aX=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=dN(()=>{if(Kh.has(n))return;bw(n,"down");const i=dN(()=>{bw(n,"up")}),a=()=>bw(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function fN(t){return BA(t)&&!t$()}function sX(t,e,n={}){const[r,i,a]=n$(t,n),s=o=>{const c=o.currentTarget;if(!fN(o)||Kh.has(c))return;Kh.add(c);const u=e(o),d=(p,y)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),!(!fN(p)||!Kh.has(c))&&(Kh.delete(c),typeof u=="function"&&u(p,{success:y}))},f=p=>{d(p,n.useGlobalTarget||r$(c,p.target))},h=p=>{d(p,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",h,i)};return r.forEach(o=>{!iX(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(n.useGlobalTarget?window:o).addEventListener("pointerdown",s,i),o.addEventListener("focus",u=>aX(u,i),i)}),a}function oX(t){return t==="x"||t==="y"?xa[t]?null:(xa[t]=!0,()=>{xa[t]=!1}):xa.x||xa.y?null:(xa.x=xa.y=!0,()=>{xa.x=xa.y=!1})}const i$=new Set(["width","height","top","left","right","bottom",...Df]);let $v;function lX(){$v=void 0}const cs={now:()=>($v===void 0&&cs.set(yr.isProcessing||rY.useManualTiming?yr.timestamp:performance.now()),$v),set:t=>{$v=t,queueMicrotask(lX)}};function UA(t,e){t.indexOf(e)===-1&&t.push(e)}function WA(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function cX([...t],e,n){const r=e<0?t.length+e:e;if(r>=0&&r<t.length){const i=n<0?t.length+n:n,[a]=t.splice(e,1);t.splice(i,0,a)}return t}class KA{constructor(){this.subscriptions=[]}add(e){return UA(this.subscriptions,e),()=>WA(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const s=this.subscriptions[a];s&&s(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function a$(t,e){return e?t*(1e3/e):0}const hN=30,uX=t=>!isNaN(parseFloat(t)),cp={current:void 0};class dX{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const a=cs.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=cs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=uX(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new KA);const r=this.events[e].add(n);return e==="change"?()=>{r(),Jt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return cp.current&&cp.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=cs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>hN)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,hN);return a$(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Yd(t,e){return new dX(t,e)}function fX(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Yd(n))}function qA(t,e){const n=Tx(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const s in a){const o=jY(a[s]);fX(t,s,o)}}function hX(t){return!!(wr(t)&&t.add)}function F_(t,e){const n=t.getValue("willChange");if(hX(n))return n.add(e)}function s$(t){return t.props[RL]}const o$=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,pX=1e-7,mX=12;function gX(t,e,n,r,i){let a,s,o=0;do s=e+(n-e)/2,a=o$(s,r,i)-t,a>0?n=s:e=s;while(Math.abs(a)>pX&&++o<mX);return s}function sg(t,e,n,r){if(t===e&&n===r)return Di;const i=a=>gX(a,0,1,t,n);return a=>a===0||a===1?a:o$(i(a),e,r)}const l$=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,c$=t=>e=>1-t(1-e),u$=sg(.33,1.53,.69,.99),HA=c$(u$),d$=l$(HA),f$=t=>(t*=2)<1?.5*HA(t):.5*(2-Math.pow(2,-10*(t-1))),GA=t=>1-Math.sin(Math.acos(t)),h$=c$(GA),p$=l$(GA),m$=t=>/^0[^.\s]+$/u.test(t);function vX(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||m$(t):!0}const up=t=>Math.round(t*1e5)/1e5,YA=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function yX(t){return t==null}const xX=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,XA=(t,e)=>n=>!!(typeof n=="string"&&xX.test(n)&&n.startsWith(t)||e&&!yX(n)&&Object.prototype.hasOwnProperty.call(n,e)),g$=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,s,o]=r.match(YA);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},bX=t=>ao(0,255,t),ww={...Mf,transform:t=>Math.round(bX(t))},bc={test:XA("rgb","red"),parse:g$("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+ww.transform(t)+", "+ww.transform(e)+", "+ww.transform(n)+", "+up(Zp.transform(r))+")"};function wX(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const V_={test:XA("#"),parse:wX,transform:bc.transform},ld={test:XA("hsl","hue"),parse:g$("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+ls.transform(up(e))+", "+ls.transform(up(n))+", "+up(Zp.transform(r))+")"},Or={test:t=>bc.test(t)||V_.test(t)||ld.test(t),parse:t=>bc.test(t)?bc.parse(t):ld.test(t)?ld.parse(t):V_.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?bc.transform(t):ld.transform(t)},_X=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function SX(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(YA))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(_X))===null||n===void 0?void 0:n.length)||0)>0}const v$="number",y$="color",jX="var",AX="var(",pN="${}",PX=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function em(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const o=e.replace(PX,c=>(Or.test(c)?(r.color.push(a),i.push(y$),n.push(Or.parse(c))):c.startsWith(AX)?(r.var.push(a),i.push(jX),n.push(c)):(r.number.push(a),i.push(v$),n.push(parseFloat(c))),++a,pN)).split(pN);return{values:n,split:o,indexes:r,types:i}}function x$(t){return em(t).values}function b$(t){const{split:e,types:n}=em(t),r=e.length;return i=>{let a="";for(let s=0;s<r;s++)if(a+=e[s],i[s]!==void 0){const o=n[s];o===v$?a+=up(i[s]):o===y$?a+=Or.transform(i[s]):a+=i[s]}return a}}const EX=t=>typeof t=="number"?0:t;function TX(t){const e=x$(t);return b$(t)(e.map(EX))}const bl={test:SX,parse:x$,createTransformer:b$,getAnimatableNone:TX},CX=new Set(["brightness","contrast","saturate","opacity"]);function NX(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(YA)||[];if(!r)return t;const i=n.replace(r,"");let a=CX.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const kX=/\b([a-z-]*)\(.*?\)/gu,B_={...bl,getAnimatableNone:t=>{const e=t.match(kX);return e?e.map(NX).join(" "):t}},OX={...IA,color:Or,backgroundColor:Or,outlineColor:Or,fill:Or,stroke:Or,borderColor:Or,borderTopColor:Or,borderRightColor:Or,borderBottomColor:Or,borderLeftColor:Or,filter:B_,WebkitFilter:B_},QA=t=>OX[t];function w$(t,e){let n=QA(t);return n!==B_&&(n=bl),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const IX=new Set(["auto","none","0"]);function DX(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!IX.has(a)&&em(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=w$(n,i)}const mN=t=>t===Mf||t===Qe,gN=(t,e)=>parseFloat(t.split(", ")[e]),vN=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return gN(i[1],e);{const a=r.match(/^matrix\((.+)\)$/u);return a?gN(a[1],t):0}},MX=new Set(["x","y","z"]),RX=Df.filter(t=>!MX.has(t));function LX(t){const e=[];return RX.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Xd={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:vN(4,13),y:vN(5,14)};Xd.translateX=Xd.x;Xd.translateY=Xd.y;const kc=new Set;let U_=!1,W_=!1;function _$(){if(W_){const t=Array.from(kc).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=LX(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,s])=>{var o;(o=r.getValue(a))===null||o===void 0||o.set(s)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}W_=!1,U_=!1,kc.forEach(t=>t.complete()),kc.clear()}function S$(){kc.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(W_=!0)})}function $X(){S$(),_$()}class JA{constructor(e,n,r,i,a,s=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(kc.add(this),U_||(U_=!0,Jt.read(S$),Jt.resolveKeyframes(_$))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const c=r.readValue(n,o);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),kc.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,kc.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const j$=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),zX=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function FX(t){const e=zX.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function A$(t,e,n=1){const[r,i]=FX(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const s=a.trim();return j$(s)?parseFloat(s):s}return OA(i)?A$(i,e,n+1):i}const P$=t=>e=>e.test(t),VX={test:t=>t==="auto",parse:t=>t},E$=[Mf,Qe,ls,Vo,NY,CY,VX],yN=t=>E$.find(P$(t));class T$ extends JA{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),OA(u))){const d=A$(u,n.current);d!==void 0&&(e[c]=d),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!i$.has(r)||e.length!==2)return;const[i,a]=e,s=yN(i),o=yN(a);if(s!==o)if(mN(s)&&mN(o))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)vX(e[i])&&r.push(i);r.length&&DX(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Xd[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const a=n.getValue(r);a&&a.jump(this.measuredOrigin,!1);const s=i.length-1,o=i[s];i[s]=Xd[r](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,u])=>{n.getValue(c).set(u)}),this.resolveNoneKeyframes()}}const xN=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(bl.test(t)||t==="0")&&!t.startsWith("url("));function BX(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function UX(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],s=xN(i,e),o=xN(a,e);return!s||!o?!1:BX(t)||(n==="spring"||FA(n))&&r}const WX=t=>t!==null;function Cx(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(WX),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const KX=40;class C${constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=cs.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:s,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>KX?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&$X(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=cs.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:a,delay:s,onComplete:o,onUpdate:c,isGenerator:u}=this.options;if(!u&&!UX(e,r,i,a))if(s)this.options.duration=0;else{c&&c(Cx(e,this.options,n)),o&&o(),this.resolveFinishedPromise();return}const d=this.initPlayback(e,n);d!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...d},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const cn=(t,e,n)=>t+(e-t)*n;function _w(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function qX({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,s=0;if(!e)i=a=s=n;else{const o=n<.5?n*(1+e):n+e-n*e,c=2*n-o;i=_w(c,o,t+1/3),a=_w(c,o,t),s=_w(c,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(s*255),alpha:r}}function ky(t,e){return n=>n>0?e:t}const Sw=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},HX=[V_,bc,ld],GX=t=>HX.find(e=>e.test(t));function bN(t){const e=GX(t);if(!e)return!1;let n=e.parse(t);return e===ld&&(n=qX(n)),n}const wN=(t,e)=>{const n=bN(t),r=bN(e);if(!n||!r)return ky(t,e);const i={...n};return a=>(i.red=Sw(n.red,r.red,a),i.green=Sw(n.green,r.green,a),i.blue=Sw(n.blue,r.blue,a),i.alpha=cn(n.alpha,r.alpha,a),bc.transform(i))},YX=(t,e)=>n=>e(t(n)),og=(...t)=>t.reduce(YX),K_=new Set(["none","hidden"]);function XX(t,e){return K_.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function QX(t,e){return n=>cn(t,e,n)}function ZA(t){return typeof t=="number"?QX:typeof t=="string"?OA(t)?ky:Or.test(t)?wN:eQ:Array.isArray(t)?N$:typeof t=="object"?Or.test(t)?wN:JX:ky}function N$(t,e){const n=[...t],r=n.length,i=t.map((a,s)=>ZA(a)(a,e[s]));return a=>{for(let s=0;s<r;s++)n[s]=i[s](a);return n}}function JX(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=ZA(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function ZX(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const s=e.types[a],o=t.indexes[s][i[s]],c=(n=t.values[o])!==null&&n!==void 0?n:0;r[a]=c,i[s]++}return r}const eQ=(t,e)=>{const n=bl.createTransformer(e),r=em(t),i=em(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?K_.has(t)&&!i.values.length||K_.has(e)&&!r.values.length?XX(t,e):og(N$(ZX(r,i),i.values),n):ky(t,e)};function k$(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?cn(t,e,n):ZA(t)(t,e)}const tQ=5;function O$(t,e,n){const r=Math.max(e-tQ,0);return a$(n-t(r),e-r)}const bn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},jw=.001;function nQ({duration:t=bn.duration,bounce:e=bn.bounce,velocity:n=bn.velocity,mass:r=bn.mass}){let i,a,s=1-e;s=ao(bn.minDamping,bn.maxDamping,s),t=ao(bn.minDuration,bn.maxDuration,qs(t)),s<1?(i=u=>{const d=u*s,f=d*t,h=d-n,p=q_(u,s),y=Math.exp(-f);return jw-h/p*y},a=u=>{const f=u*s*t,h=f*n+n,p=Math.pow(s,2)*Math.pow(u,2)*t,y=Math.exp(-f),v=q_(Math.pow(u,2),s);return(-i(u)+jw>0?-1:1)*((h-p)*y)/v}):(i=u=>{const d=Math.exp(-u*t),f=(u-n)*t+1;return-jw+d*f},a=u=>{const d=Math.exp(-u*t),f=(n-u)*(t*t);return d*f});const o=5/t,c=iQ(i,a,o);if(t=Ks(t),isNaN(c))return{stiffness:bn.stiffness,damping:bn.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:t}}}const rQ=12;function iQ(t,e,n){let r=n;for(let i=1;i<rQ;i++)r=r-t(r)/e(r);return r}function q_(t,e){return t*Math.sqrt(1-e*e)}const aQ=["duration","bounce"],sQ=["stiffness","damping","mass"];function _N(t,e){return e.some(n=>t[n]!==void 0)}function oQ(t){let e={velocity:bn.velocity,stiffness:bn.stiffness,damping:bn.damping,mass:bn.mass,isResolvedFromDuration:!1,...t};if(!_N(t,sQ)&&_N(t,aQ))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*ao(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:bn.mass,stiffness:i,damping:a}}else{const n=nQ(t);e={...e,...n,mass:bn.mass},e.isResolvedFromDuration=!0}return e}function I$(t=bn.visualDuration,e=bn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:c,damping:u,mass:d,duration:f,velocity:h,isResolvedFromDuration:p}=oQ({...n,velocity:-qs(n.velocity||0)}),y=h||0,v=u/(2*Math.sqrt(c*d)),b=s-a,x=qs(Math.sqrt(c/d)),_=Math.abs(b)<5;r||(r=_?bn.restSpeed.granular:bn.restSpeed.default),i||(i=_?bn.restDelta.granular:bn.restDelta.default);let S;if(v<1){const E=q_(x,v);S=A=>{const j=Math.exp(-v*x*A);return s-j*((y+v*x*b)/E*Math.sin(E*A)+b*Math.cos(E*A))}}else if(v===1)S=E=>s-Math.exp(-x*E)*(b+(y+x*b)*E);else{const E=x*Math.sqrt(v*v-1);S=A=>{const j=Math.exp(-v*x*A),P=Math.min(E*A,300);return s-j*((y+v*x*b)*Math.sinh(P)+E*b*Math.cosh(P))/E}}const T={calculatedDuration:p&&f||null,next:E=>{const A=S(E);if(p)o.done=E>=f;else{let j=0;v<1&&(j=E===0?Ks(y):O$(S,E,A));const P=Math.abs(j)<=r,O=Math.abs(s-A)<=i;o.done=P&&O}return o.value=o.done?s:A,o},toString:()=>{const E=Math.min(QL(T),$_),A=JL(j=>T.next(E*j).value,E,30);return E+"ms "+A}};return T}function SN({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:s,min:o,max:c,restDelta:u=.5,restSpeed:d}){const f=t[0],h={done:!1,value:f},p=P=>o!==void 0&&P<o||c!==void 0&&P>c,y=P=>o===void 0?c:c===void 0||Math.abs(o-P)<Math.abs(c-P)?o:c;let v=n*e;const b=f+v,x=s===void 0?b:s(b);x!==b&&(v=x-f);const _=P=>-v*Math.exp(-P/r),S=P=>x+_(P),T=P=>{const O=_(P),D=S(P);h.done=Math.abs(O)<=u,h.value=h.done?x:D};let E,A;const j=P=>{p(h.value)&&(E=P,A=I$({keyframes:[h.value,y(h.value)],velocity:O$(S,P,h.value),damping:i,stiffness:a,restDelta:u,restSpeed:d}))};return j(0),{calculatedDuration:null,next:P=>{let O=!1;return!A&&E===void 0&&(O=!0,T(P),j(P)),E!==void 0&&P>=E?A.next(P-E):(!O&&T(P),h)}}}const lQ=sg(.42,0,1,1),cQ=sg(0,0,.58,1),D$=sg(.42,0,.58,1),uQ=t=>Array.isArray(t)&&typeof t[0]!="number",dQ={linear:Di,easeIn:lQ,easeInOut:D$,easeOut:cQ,circIn:GA,circInOut:p$,circOut:h$,backIn:HA,backInOut:d$,backOut:u$,anticipate:f$},jN=t=>{if(VA(t)){kL(t.length===4);const[e,n,r,i]=t;return sg(e,n,r,i)}else if(typeof t=="string")return dQ[t];return t};function fQ(t,e,n){const r=[],i=n||k$,a=t.length-1;for(let s=0;s<a;s++){let o=i(t[s],t[s+1]);if(e){const c=Array.isArray(e)?e[s]||Di:e;o=og(c,o)}r.push(o)}return r}function M$(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(kL(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const s=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=fQ(e,r,i),c=o.length,u=d=>{if(s&&d<t[0])return e[0];let f=0;if(c>1)for(;f<t.length-2&&!(d<t[f+1]);f++);const h=Hd(t[f],t[f+1],d);return o[f](h)};return n?d=>u(ao(t[0],t[a-1],d)):u}function hQ(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Hd(0,e,r);t.push(cn(n,1,i))}}function pQ(t){const e=[0];return hQ(e,t.length-1),e}function mQ(t,e){return t.map(n=>n*e)}function gQ(t,e){return t.map(()=>e||D$).splice(0,t.length-1)}function Oy({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=uQ(r)?r.map(jN):jN(r),a={done:!1,value:e[0]},s=mQ(n&&n.length===e.length?n:pQ(e),t),o=M$(s,e,{ease:Array.isArray(i)?i:gQ(e,i)});return{calculatedDuration:t,next:c=>(a.value=o(c),a.done=c>=t,a)}}const vQ=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Jt.update(e,!0),stop:()=>io(e),now:()=>yr.isProcessing?yr.timestamp:cs.now()}},yQ={decay:SN,inertia:SN,tween:Oy,keyframes:Oy,spring:I$},xQ=t=>t/100;class eP extends C${constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:n,motionValue:r,element:i,keyframes:a}=this.options,s=(i==null?void 0:i.KeyframeResolver)||JA,o=(c,u)=>this.onKeyframesResolved(c,u);this.resolver=new s(a,o,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:s=0}=this.options,o=FA(n)?n:yQ[n]||Oy;let c,u;o!==Oy&&typeof e[0]!="number"&&(c=og(xQ,k$(e[0],e[1])),e=[0,100]);const d=o({...this.options,keyframes:e});a==="mirror"&&(u=o({...this.options,keyframes:[...e].reverse(),velocity:-s})),d.calculatedDuration===null&&(d.calculatedDuration=QL(d));const{calculatedDuration:f}=d,h=f+i,p=h*(r+1)-i;return{generator:d,mirroredGenerator:u,mapPercentToKeyframes:c,calculatedDuration:f,resolvedDuration:h,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:P}=this.options;return{done:!0,value:P[P.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:s,mapPercentToKeyframes:o,keyframes:c,calculatedDuration:u,totalDuration:d,resolvedDuration:f}=r;if(this.startTime===null)return a.next(0);const{delay:h,repeat:p,repeatType:y,repeatDelay:v,onUpdate:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-d/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const x=this.currentTime-h*(this.speed>=0?1:-1),_=this.speed>=0?x<0:x>d;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let S=this.currentTime,T=a;if(p){const P=Math.min(this.currentTime,d)/f;let O=Math.floor(P),D=P%1;!D&&P>=1&&(D=1),D===1&&O--,O=Math.min(O,p+1),!!(O%2)&&(y==="reverse"?(D=1-D,v&&(D-=v/f)):y==="mirror"&&(T=s)),S=ao(0,1,D)*f}const E=_?{done:!1,value:c[0]}:T.next(S);o&&(E.value=o(E.value));let{done:A}=E;!_&&u!==null&&(A=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&A);return j&&i!==void 0&&(E.value=Cx(c,this.options,i)),b&&b(E.value),j&&this.finish(),E}get duration(){const{resolved:e}=this;return e?qs(e.calculatedDuration):0}get time(){return qs(this.currentTime)}set time(e){e=Ks(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=qs(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=vQ,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const bQ=new Set(["opacity","clipPath","filter","transform"]);function wQ(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:s="loop",ease:o="easeInOut",times:c}={}){const u={[e]:n};c&&(u.offset=c);const d=e$(o,i);return Array.isArray(d)&&(u.easing=d),t.animate(u,{delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:a+1,direction:s==="reverse"?"alternate":"normal"})}const _Q=AA(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Iy=10,SQ=2e4;function jQ(t){return FA(t.type)||t.type==="spring"||!ZL(t.ease)}function AQ(t,e){const n=new eP({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let a=0;for(;!r.done&&a<SQ;)r=n.sample(a),i.push(r.value),a+=Iy;return{times:void 0,keyframes:i,duration:a-Iy,ease:"linear"}}const R$={anticipate:f$,backInOut:d$,circInOut:p$};function PQ(t){return t in R$}class AN extends C${constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:a}=this.options;this.resolver=new T$(a,(s,o)=>this.onKeyframesResolved(s,o),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:a,type:s,motionValue:o,name:c,startTime:u}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof a=="string"&&Ny()&&PQ(a)&&(a=R$[a]),jQ(this.options)){const{onComplete:f,onUpdate:h,motionValue:p,element:y,...v}=this.options,b=AQ(e,v);e=b.keyframes,e.length===1&&(e[1]=e[0]),r=b.duration,i=b.times,a=b.ease,s="keyframes"}const d=wQ(o.owner.current,c,e,{...this.options,duration:r,times:i,ease:a});return d.startTime=u??this.calcStartTime(),this.pendingTimeline?(cN(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:f}=this.options;o.set(Cx(e,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:r,times:i,type:s,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return qs(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return qs(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Ks(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Di;const{animation:r}=n;cN(r,e)}return Di}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:a,ease:s,times:o}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:d,onComplete:f,element:h,...p}=this.options,y=new eP({...p,keyframes:r,duration:i,type:a,ease:s,times:o,isGenerator:!0}),v=Ks(this.time);u.setWithVelocity(y.sample(v-Iy).value,y.sample(v).value,Iy)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:a,damping:s,type:o}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=n.owner.getProps();return _Q()&&r&&bQ.has(r)&&!c&&!u&&!i&&a!=="mirror"&&s!==0&&o!=="inertia"}}const EQ={type:"spring",stiffness:500,damping:25,restSpeed:10},TQ=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),CQ={type:"keyframes",duration:.8},NQ={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},kQ=(t,{keyframes:e})=>e.length>2?CQ:du.has(t)?t.startsWith("scale")?TQ(e[1]):EQ:NQ;function OQ({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:s,repeatDelay:o,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const tP=(t,e,n,r={},i,a)=>s=>{const o=zA(r,t)||{},c=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Ks(c);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:h=>{e.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:a?void 0:i};OQ(o)||(d={...d,...kQ(t,d)}),d.duration&&(d.duration=Ks(d.duration)),d.repeatDelay&&(d.repeatDelay=Ks(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(f=!0)),f&&!a&&e.get()!==void 0){const h=Cx(d.keyframes,o);if(h!==void 0)return Jt.update(()=>{d.onUpdate(h),d.onComplete()}),new JY([])}return!a&&AN.supports(d)?new AN(d):new eP(d)};function IQ({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function L$(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var a;let{transition:s=t.getDefaultTransition(),transitionEnd:o,...c}=e;r&&(s=r);const u=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const f in c){const h=t.getValue(f,(a=t.latestValues[f])!==null&&a!==void 0?a:null),p=c[f];if(p===void 0||d&&IQ(d,f))continue;const y={delay:n,...zA(s||{},f)};let v=!1;if(window.MotionHandoffAnimation){const x=s$(t);if(x){const _=window.MotionHandoffAnimation(x,f,Jt);_!==null&&(y.startTime=_,v=!0)}}F_(t,f),h.start(tP(f,h,p,t.shouldReduceMotion&&i$.has(f)?{type:!1}:y,t,v));const b=h.animation;b&&u.push(b)}return o&&Promise.all(u).then(()=>{Jt.update(()=>{o&&qA(t,o)})}),u}function H_(t,e,n={}){var r;const i=Tx(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const s=i?()=>Promise.all(L$(t,i,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:h}=a;return DQ(t,e,d+u,f,h,n)}:()=>Promise.resolve(),{when:c}=a;if(c){const[u,d]=c==="beforeChildren"?[s,o]:[o,s];return u().then(()=>d())}else return Promise.all([s(),o(n.delay)])}function DQ(t,e,n=0,r=0,i=1,a){const s=[],o=(t.variantChildren.size-1)*r,c=i===1?(u=0)=>u*r:(u=0)=>o-u*r;return Array.from(t.variantChildren).sort(MQ).forEach((u,d)=>{u.notify("AnimationStart",e),s.push(H_(u,e,{...a,delay:n+c(d)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(s)}function MQ(t,e){return t.sortNodePosition(e)}function $$(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>H_(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=H_(t,e,n);else{const i=typeof e=="function"?Tx(t,e,n.custom):e;r=Promise.all(L$(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const RQ=EA.length;function z$(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?z$(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<RQ;n++){const r=EA[n],i=t.props[r];(Jp(i)||i===!1)&&(e[r]=i)}return e}const LQ=[...PA].reverse(),$Q=PA.length;function zQ(t){return e=>Promise.all(e.map(({animation:n,options:r})=>$$(t,n,r)))}function FQ(t){let e=zQ(t),n=PN(),r=!0;const i=c=>(u,d)=>{var f;const h=Tx(t,d,c==="exit"?(f=t.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(h){const{transition:p,transitionEnd:y,...v}=h;u={...u,...v,...y}}return u};function a(c){e=c(t)}function s(c){const{props:u}=t,d=z$(t.parent)||{},f=[],h=new Set;let p={},y=1/0;for(let b=0;b<$Q;b++){const x=LQ[b],_=n[x],S=u[x]!==void 0?u[x]:d[x],T=Jp(S),E=x===c?_.isActive:null;E===!1&&(y=b);let A=S===d[x]&&S!==u[x]&&T;if(A&&r&&t.manuallyAnimateOnMount&&(A=!1),_.protectedKeys={...p},!_.isActive&&E===null||!S&&!_.prevProp||Px(S)||typeof S=="boolean")continue;const j=VQ(_.prevProp,S);let P=j||x===c&&_.isActive&&!A&&T||b>y&&T,O=!1;const D=Array.isArray(S)?S:[S];let M=D.reduce(i(x),{});E===!1&&(M={});const{prevResolvedValues:z={}}=_,L={...z,...M},te=B=>{P=!0,h.has(B)&&(O=!0,h.delete(B)),_.needsAnimating[B]=!0;const F=t.getValue(B);F&&(F.liveStyle=!1)};for(const B in L){const F=M[B],q=z[B];if(p.hasOwnProperty(B))continue;let ae=!1;L_(F)&&L_(q)?ae=!XL(F,q):ae=F!==q,ae?F!=null?te(B):h.add(B):F!==void 0&&h.has(B)?te(B):_.protectedKeys[B]=!0}_.prevProp=S,_.prevResolvedValues=M,_.isActive&&(p={...p,...M}),r&&t.blockInitialAnimation&&(P=!1),P&&(!(A&&j)||O)&&f.push(...D.map(B=>({animation:B,options:{type:x}})))}if(h.size){const b={};h.forEach(x=>{const _=t.getBaseTarget(x),S=t.getValue(x);S&&(S.liveStyle=!0),b[x]=_??null}),f.push({animation:b})}let v=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(v=!1),r=!1,v?e(f):Promise.resolve()}function o(c,u){var d;if(n[c].isActive===u)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(h=>{var p;return(p=h.animationState)===null||p===void 0?void 0:p.setActive(c,u)}),n[c].isActive=u;const f=s(c);for(const h in n)n[h].protectedKeys={};return f}return{animateChanges:s,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=PN(),r=!0}}}function VQ(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!XL(e,t):!1}function tc(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function PN(){return{animate:tc(!0),whileInView:tc(),whileHover:tc(),whileTap:tc(),whileDrag:tc(),whileFocus:tc(),exit:tc()}}class Nl{constructor(e){this.isMounted=!1,this.node=e}update(){}}class BQ extends Nl{constructor(e){super(e),e.animationState||(e.animationState=FQ(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Px(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let UQ=0;class WQ extends Nl{constructor(){super(...arguments),this.id=UQ++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const KQ={animation:{Feature:BQ},exit:{Feature:WQ}};function tm(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function lg(t){return{point:{x:t.pageX,y:t.pageY}}}const qQ=t=>e=>BA(e)&&t(e,lg(e));function dp(t,e,n,r){return tm(t,e,qQ(n),r)}const EN=(t,e)=>Math.abs(t-e);function HQ(t,e){const n=EN(t.x,e.x),r=EN(t.y,e.y);return Math.sqrt(n**2+r**2)}class F${constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Pw(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,p=HQ(f.offset,{x:0,y:0})>=3;if(!h&&!p)return;const{point:y}=f,{timestamp:v}=yr;this.history.push({...y,timestamp:v});const{onStart:b,onMove:x}=this.handlers;h||(b&&b(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,f)},this.handlePointerMove=(f,h)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Aw(h,this.transformPagePoint),Jt.update(this.updatePoint,!0)},this.handlePointerUp=(f,h)=>{this.end();const{onEnd:p,onSessionEnd:y,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Pw(f.type==="pointercancel"?this.lastMoveEventInfo:Aw(h,this.transformPagePoint),this.history);this.startEvent&&p&&p(f,b),y&&y(f,b)},!BA(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const s=lg(e),o=Aw(s,this.transformPagePoint),{point:c}=o,{timestamp:u}=yr;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=n;d&&d(e,Pw(o,this.history)),this.removeListeners=og(dp(this.contextWindow,"pointermove",this.handlePointerMove),dp(this.contextWindow,"pointerup",this.handlePointerUp),dp(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),io(this.updatePoint)}}function Aw(t,e){return e?{point:e(t.point)}:t}function TN(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Pw({point:t},e){return{point:t,delta:TN(t,V$(e)),offset:TN(t,GQ(e)),velocity:YQ(e,.1)}}function GQ(t){return t[0]}function V$(t){return t[t.length-1]}function YQ(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=V$(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Ks(e)));)n--;if(!r)return{x:0,y:0};const a=qs(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const s={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}const B$=1e-4,XQ=1-B$,QQ=1+B$,U$=.01,JQ=0-U$,ZQ=0+U$;function $i(t){return t.max-t.min}function eJ(t,e,n){return Math.abs(t-e)<=n}function CN(t,e,n,r=.5){t.origin=r,t.originPoint=cn(e.min,e.max,t.origin),t.scale=$i(n)/$i(e),t.translate=cn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=XQ&&t.scale<=QQ||isNaN(t.scale))&&(t.scale=1),(t.translate>=JQ&&t.translate<=ZQ||isNaN(t.translate))&&(t.translate=0)}function fp(t,e,n,r){CN(t.x,e.x,n.x,r?r.originX:void 0),CN(t.y,e.y,n.y,r?r.originY:void 0)}function NN(t,e,n){t.min=n.min+e.min,t.max=t.min+$i(e)}function tJ(t,e,n){NN(t.x,e.x,n.x),NN(t.y,e.y,n.y)}function kN(t,e,n){t.min=e.min-n.min,t.max=t.min+$i(e)}function hp(t,e,n){kN(t.x,e.x,n.x),kN(t.y,e.y,n.y)}function nJ(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?cn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?cn(n,t,r.max):Math.min(t,n)),t}function ON(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function rJ(t,{top:e,left:n,bottom:r,right:i}){return{x:ON(t.x,n,i),y:ON(t.y,e,r)}}function IN(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function iJ(t,e){return{x:IN(t.x,e.x),y:IN(t.y,e.y)}}function aJ(t,e){let n=.5;const r=$i(t),i=$i(e);return i>r?n=Hd(e.min,e.max-r,t.min):r>i&&(n=Hd(t.min,t.max-i,e.min)),ao(0,1,n)}function sJ(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const G_=.35;function oJ(t=G_){return t===!1?t=0:t===!0&&(t=G_),{x:DN(t,"left","right"),y:DN(t,"top","bottom")}}function DN(t,e,n){return{min:MN(t,e),max:MN(t,n)}}function MN(t,e){return typeof t=="number"?t:t[e]||0}const RN=()=>({translate:0,scale:1,origin:0,originPoint:0}),cd=()=>({x:RN(),y:RN()}),LN=()=>({min:0,max:0}),En=()=>({x:LN(),y:LN()});function Yi(t){return[t("x"),t("y")]}function W$({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function lJ({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function cJ(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Ew(t){return t===void 0||t===1}function Y_({scale:t,scaleX:e,scaleY:n}){return!Ew(t)||!Ew(e)||!Ew(n)}function lc(t){return Y_(t)||K$(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function K$(t){return $N(t.x)||$N(t.y)}function $N(t){return t&&t!=="0%"}function Dy(t,e,n){const r=t-n,i=e*r;return n+i}function zN(t,e,n,r,i){return i!==void 0&&(t=Dy(t,i,r)),Dy(t,n,r)+e}function X_(t,e=0,n=1,r,i){t.min=zN(t.min,e,n,r,i),t.max=zN(t.max,e,n,r,i)}function q$(t,{x:e,y:n}){X_(t.x,e.translate,e.scale,e.originPoint),X_(t.y,n.translate,n.scale,n.originPoint)}const FN=.999999999999,VN=1.0000000000001;function uJ(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,s;for(let o=0;o<i;o++){a=n[o],s=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&dd(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),s&&(e.x*=s.x.scale,e.y*=s.y.scale,q$(t,s)),r&&lc(a.latestValues)&&dd(t,a.latestValues))}e.x<VN&&e.x>FN&&(e.x=1),e.y<VN&&e.y>FN&&(e.y=1)}function ud(t,e){t.min=t.min+e,t.max=t.max+e}function BN(t,e,n,r,i=.5){const a=cn(t.min,t.max,i);X_(t,e,n,a,r)}function dd(t,e){BN(t.x,e.x,e.scaleX,e.scale,e.originX),BN(t.y,e.y,e.scaleY,e.scale,e.originY)}function H$(t,e){return W$(cJ(t.getBoundingClientRect(),e))}function dJ(t,e,n){const r=H$(t,n),{scroll:i}=e;return i&&(ud(r.x,i.offset.x),ud(r.y,i.offset.y)),r}const G$=({current:t})=>t?t.ownerDocument.defaultView:null,fJ=new WeakMap;class hJ{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=En(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(lg(d).point)},a=(d,f)=>{const{drag:h,dragPropagation:p,onDragStart:y}=this.getProps();if(h&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=oX(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Yi(b=>{let x=this.getAxisMotionValue(b).get()||0;if(ls.test(x)){const{projection:_}=this.visualElement;if(_&&_.layout){const S=_.layout.layoutBox[b];S&&(x=$i(S)*(parseFloat(x)/100))}}this.originPoint[b]=x}),y&&Jt.postRender(()=>y(d,f)),F_(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},s=(d,f)=>{const{dragPropagation:h,dragDirectionLock:p,onDirectionLock:y,onDrag:v}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:b}=f;if(p&&this.currentDirection===null){this.currentDirection=pJ(b),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",f.point,b),this.updateAxis("y",f.point,b),this.visualElement.render(),v&&v(d,f)},o=(d,f)=>this.stop(d,f),c=()=>Yi(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new F$(e,{onSessionStart:i,onStart:a,onMove:s,onSessionEnd:o,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:G$(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&Jt.postRender(()=>a(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Zg(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=nJ(s,this.constraints[e],this.elastic[e])),a.set(s)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;n&&od(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=rJ(i.layoutBox,n):this.constraints=!1,this.elastic=oJ(r),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Yi(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=sJ(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!od(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=dJ(r,i.root,this.visualElement.getTransformPagePoint());let s=iJ(i.layout.layoutBox,a);if(n){const o=n(lJ(s));this.hasMutatedConstraints=!!o,o&&(s=W$(o))}return s}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},u=Yi(d=>{if(!Zg(d,n,this.currentDirection))return;let f=c&&c[d]||{};s&&(f={min:0,max:0});const h=i?200:1e6,p=i?40:1e7,y={type:"inertia",velocity:r?e[d]:0,bounceStiffness:h,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...a,...f};return this.startAxisValueAnimation(d,y)});return Promise.all(u).then(o)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return F_(this.visualElement,e),r.start(tP(e,r,0,n,this.visualElement,!1))}stopAnimation(){Yi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Yi(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Yi(n=>{const{drag:r}=this.getProps();if(!Zg(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:s,max:o}=i.layout.layoutBox[n];a.set(e[n]-cn(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!od(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Yi(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const c=o.get();i[s]=aJ({min:c,max:c},this.constraints[s])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Yi(s=>{if(!Zg(s,e,null))return;const o=this.getAxisMotionValue(s),{min:c,max:u}=this.constraints[s];o.set(cn(c,u,i[s]))})}addListeners(){if(!this.visualElement.current)return;fJ.set(this.visualElement,this);const e=this.visualElement.current,n=dp(e,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();od(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Jt.read(r);const s=tm(window,"resize",()=>this.scalePositionWithinConstraints()),o=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Yi(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=c[d].translate,f.set(f.get()+c[d].translate))}),this.visualElement.render())});return()=>{s(),n(),a(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:s=G_,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:s,dragMomentum:o}}}function Zg(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function pJ(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class mJ extends Nl{constructor(e){super(e),this.removeGroupControls=Di,this.removeListeners=Di,this.controls=new hJ(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Di}unmount(){this.removeGroupControls(),this.removeListeners()}}const UN=t=>(e,n)=>{t&&Jt.postRender(()=>t(e,n))};class gJ extends Nl{constructor(){super(...arguments),this.removePointerDownListener=Di}onPointerDown(e){this.session=new F$(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:G$(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:UN(e),onStart:UN(n),onMove:r,onEnd:(a,s)=>{delete this.session,i&&Jt.postRender(()=>i(a,s))}}}mount(){this.removePointerDownListener=dp(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const zv={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function WN(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Sh={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Qe.test(t))t=parseFloat(t);else return t;const n=WN(t,e.target.x),r=WN(t,e.target.y);return`${n}% ${r}%`}},vJ={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=bl.parse(t);if(i.length>5)return r;const a=bl.createTransformer(t),s=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,c=n.y.scale*e.y;i[0+s]/=o,i[1+s]/=c;const u=cn(o,c,.5);return typeof i[2+s]=="number"&&(i[2+s]/=u),typeof i[3+s]=="number"&&(i[3+s]/=u),a(i)}};class yJ extends k.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;FY(xJ),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),zv.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,s=r.projection;return s&&(s.isPresent=a,i||e.layoutDependency!==n||n===void 0?s.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?s.promote():s.relegate()||Jt.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),CA.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Y$(t){const[e,n]=nY(),r=k.useContext(NL);return l.jsx(yJ,{...t,layoutGroup:r,switchLayoutGroup:k.useContext(LL),isPresent:e,safeToRemove:n})}const xJ={borderRadius:{...Sh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Sh,borderTopRightRadius:Sh,borderBottomLeftRadius:Sh,borderBottomRightRadius:Sh,boxShadow:vJ};function bJ(t,e,n){const r=wr(t)?t:Yd(t);return r.start(tP("",r,e,n)),r.animation}function wJ(t){return t instanceof SVGElement&&t.tagName!=="svg"}const _J=(t,e)=>t.depth-e.depth;class SJ{constructor(){this.children=[],this.isDirty=!1}add(e){UA(this.children,e),this.isDirty=!0}remove(e){WA(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(_J),this.isDirty=!1,this.children.forEach(e)}}function jJ(t,e){const n=cs.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(io(r),t(a-e))};return Jt.read(r,!0),()=>io(r)}const X$=["TopLeft","TopRight","BottomLeft","BottomRight"],AJ=X$.length,KN=t=>typeof t=="string"?parseFloat(t):t,qN=t=>typeof t=="number"||Qe.test(t);function PJ(t,e,n,r,i,a){i?(t.opacity=cn(0,n.opacity!==void 0?n.opacity:1,EJ(r)),t.opacityExit=cn(e.opacity!==void 0?e.opacity:1,0,TJ(r))):a&&(t.opacity=cn(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let s=0;s<AJ;s++){const o=`border${X$[s]}Radius`;let c=HN(e,o),u=HN(n,o);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||qN(c)===qN(u)?(t[o]=Math.max(cn(KN(c),KN(u),r),0),(ls.test(u)||ls.test(c))&&(t[o]+="%")):t[o]=u}(e.rotate||n.rotate)&&(t.rotate=cn(e.rotate||0,n.rotate||0,r))}function HN(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const EJ=Q$(0,.5,h$),TJ=Q$(.5,.95,Di);function Q$(t,e,n){return r=>r<t?0:r>e?1:n(Hd(t,e,r))}function GN(t,e){t.min=e.min,t.max=e.max}function Ki(t,e){GN(t.x,e.x),GN(t.y,e.y)}function YN(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function XN(t,e,n,r,i){return t-=e,t=Dy(t,1/n,r),i!==void 0&&(t=Dy(t,1/i,r)),t}function CJ(t,e=0,n=1,r=.5,i,a=t,s=t){if(ls.test(e)&&(e=parseFloat(e),e=cn(s.min,s.max,e/100)-s.min),typeof e!="number")return;let o=cn(a.min,a.max,r);t===a&&(o-=e),t.min=XN(t.min,e,n,o,i),t.max=XN(t.max,e,n,o,i)}function QN(t,e,[n,r,i],a,s){CJ(t,e[n],e[r],e[i],e.scale,a,s)}const NJ=["x","scaleX","originX"],kJ=["y","scaleY","originY"];function JN(t,e,n,r){QN(t.x,e,NJ,n?n.x:void 0,r?r.x:void 0),QN(t.y,e,kJ,n?n.y:void 0,r?r.y:void 0)}function ZN(t){return t.translate===0&&t.scale===1}function J$(t){return ZN(t.x)&&ZN(t.y)}function ek(t,e){return t.min===e.min&&t.max===e.max}function OJ(t,e){return ek(t.x,e.x)&&ek(t.y,e.y)}function tk(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Z$(t,e){return tk(t.x,e.x)&&tk(t.y,e.y)}function nk(t){return $i(t.x)/$i(t.y)}function rk(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class IJ{constructor(){this.members=[]}add(e){UA(this.members,e),e.scheduleRender()}remove(e){if(WA(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function DJ(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,s=(n==null?void 0:n.z)||0;if((i||a||s)&&(r=`translate3d(${i}px, ${a}px, ${s}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:f,rotateY:h,skewX:p,skewY:y}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),f&&(r+=`rotateX(${f}deg) `),h&&(r+=`rotateY(${h}deg) `),p&&(r+=`skewX(${p}deg) `),y&&(r+=`skewY(${y}deg) `)}const o=t.x.scale*e.x,c=t.y.scale*e.y;return(o!==1||c!==1)&&(r+=`scale(${o}, ${c})`),r||"none"}const cc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},qh=typeof window<"u"&&window.MotionDebug!==void 0,Tw=["","X","Y","Z"],MJ={visibility:"hidden"},ik=1e3;let RJ=0;function Cw(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function ez(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=s$(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Jt,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&ez(r)}function tz({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(s={},o=e==null?void 0:e()){this.id=RJ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,qh&&(cc.totalNodes=cc.resolvedTargetDeltas=cc.recalculatedProjection=0),this.nodes.forEach(zJ),this.nodes.forEach(WJ),this.nodes.forEach(KJ),this.nodes.forEach(FJ),qh&&window.MotionDebug.record(cc)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new SJ)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new KA),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const c=this.eventHandlers.get(s);c&&c.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=wJ(s),this.instance=s;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||c)&&(this.isLayoutDirty=!0),t){let f;const h=()=>this.root.updateBlockedByResize=!1;t(s,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=jJ(h,250),zv.hasAnimatedSinceResize&&(zv.hasAnimatedSinceResize=!1,this.nodes.forEach(sk))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeTargetChanged:p,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||d.getDefaultTransition()||XJ,{onLayoutAnimationStart:b,onLayoutAnimationComplete:x}=d.getProps(),_=!this.targetLayout||!Z$(this.targetLayout,y)||p,S=!h&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||h&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,S);const T={...zA(v,"layout"),onPlay:b,onComplete:x};(d.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T)}else h||sk(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,io(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(qJ),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&ez(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ak);return}this.isUpdating||this.nodes.forEach(BJ),this.isUpdating=!1,this.nodes.forEach(UJ),this.nodes.forEach(LJ),this.nodes.forEach($J),this.clearAllSnapshots();const o=cs.now();yr.delta=ao(0,1e3/60,o-yr.timestamp),yr.timestamp=o,yr.isProcessing=!0,xw.update.process(yr),xw.preRender.process(yr),xw.render.process(yr),yr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,CA.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(VJ),this.sharedNodes.forEach(HJ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Jt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Jt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=En(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!J$(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;s&&(o||lc(this.latestValues)||d)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return s&&(c=this.removeTransform(c)),QJ(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var s;const{visualElement:o}=this.options;if(!o)return En();const c=o.measureViewportBox();if(!(((s=this.scroll)===null||s===void 0?void 0:s.wasRoot)||this.path.some(JJ))){const{scroll:d}=this.root;d&&(ud(c.x,d.offset.x),ud(c.y,d.offset.y))}return c}removeElementScroll(s){var o;const c=En();if(Ki(c,s),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return c;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:f,options:h}=d;d!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&Ki(c,s),ud(c.x,f.offset.x),ud(c.y,f.offset.y))}return c}applyTransform(s,o=!1){const c=En();Ki(c,s);for(let u=0;u<this.path.length;u++){const d=this.path[u];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&dd(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),lc(d.latestValues)&&dd(c,d.latestValues)}return lc(this.latestValues)&&dd(c,this.latestValues),c}removeTransform(s){const o=En();Ki(o,s);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!lc(u.latestValues))continue;Y_(u.latestValues)&&u.updateSnapshot();const d=En(),f=u.measurePageBox();Ki(d,f),JN(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return lc(this.latestValues)&&JN(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==yr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var o;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(s||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=yr.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=En(),this.relativeTargetOrigin=En(),hp(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Ki(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=En(),this.targetWithTransforms=En()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),tJ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ki(this.target,this.layout.layoutBox),q$(this.target,this.targetDelta)):Ki(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=En(),this.relativeTargetOrigin=En(),hp(this.relativeTargetOrigin,this.target,p.target),Ki(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}qh&&cc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Y_(this.parent.latestValues)||K$(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var s;const o=this.getLead(),c=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===yr.timestamp&&(u=!1),u)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;Ki(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;uJ(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=En());const{target:y}=o;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(YN(this.prevProjectionDelta.x,this.projectionDelta.x),YN(this.prevProjectionDelta.y,this.projectionDelta.y)),fp(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==p||!rk(this.projectionDelta.x,this.prevProjectionDelta.x)||!rk(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),qh&&cc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),s){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=cd(),this.projectionDelta=cd(),this.projectionDeltaWithTransform=cd()}setAnimationOrigin(s,o=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},f=cd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=En(),p=c?c.source:void 0,y=this.layout?this.layout.source:void 0,v=p!==y,b=this.getStack(),x=!b||b.members.length<=1,_=!!(v&&!x&&this.options.crossfade===!0&&!this.path.some(YJ));this.animationProgress=0;let S;this.mixTargetDelta=T=>{const E=T/1e3;ok(f.x,s.x,E),ok(f.y,s.y,E),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(hp(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),GJ(this.relativeTarget,this.relativeTargetOrigin,h,E),S&&OJ(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=En()),Ki(S,this.relativeTarget)),v&&(this.animationValues=d,PJ(d,u,this.latestValues,E,_,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(io(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Jt.update(()=>{zv.hasAnimatedSinceResize=!0,this.currentAnimation=bJ(0,ik,{...s,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ik),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:c,layout:u,latestValues:d}=s;if(!(!o||!c||!u)){if(this!==s&&this.layout&&u&&nz(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||En();const f=$i(this.layout.layoutBox.x);c.x.min=s.target.x.min,c.x.max=c.x.min+f;const h=$i(this.layout.layoutBox.y);c.y.min=s.target.y.min,c.y.max=c.y.min+h}Ki(o,c),dd(o,d),fp(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new IJ),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var s;const{layoutId:o}=this.options;return o?((s=this.getStack())===null||s===void 0?void 0:s.lead)||this:this}getPrevLead(){var s;const{layoutId:o}=this.options;return o?(s=this.getStack())===null||s===void 0?void 0:s.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:c}=s;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const u={};c.z&&Cw("z",s,u,this.animationValues);for(let d=0;d<Tw.length;d++)Cw(`rotate${Tw[d]}`,s,u,this.animationValues),Cw(`skew${Tw[d]}`,s,u,this.animationValues);s.render();for(const d in u)s.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);s.scheduleRender()}getProjectionStyles(s){var o,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return MJ;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Lv(s==null?void 0:s.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=Lv(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!lc(this.latestValues)&&(v.transform=d?d({},""):"none",this.hasProjected=!1),v}const h=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=DJ(this.projectionDeltaWithTransform,this.treeScale,h),d&&(u.transform=d(h,u.transform));const{x:p,y}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${y.origin*100}% 0`,f.animationValues?u.opacity=f===this?(c=(o=h.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:u.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const v in Cy){if(h[v]===void 0)continue;const{correct:b,applyTo:x}=Cy[v],_=u.transform==="none"?h[v]:b(h[v],f);if(x){const S=x.length;for(let T=0;T<S;T++)u[x[T]]=_}else u[v]=_}return this.options.layoutId&&(u.pointerEvents=f===this?Lv(s==null?void 0:s.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var o;return(o=s.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(ak),this.root.sharedNodes.clear()}}}function LJ(t){t.updateLayout()}function $J(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:a}=t.options,s=n.source!==t.layout.source;a==="size"?Yi(f=>{const h=s?n.measuredBox[f]:n.layoutBox[f],p=$i(h);h.min=r[f].min,h.max=h.min+p}):nz(a,n.layoutBox,r)&&Yi(f=>{const h=s?n.measuredBox[f]:n.layoutBox[f],p=$i(r[f]);h.max=h.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+p)});const o=cd();fp(o,r,n.layoutBox);const c=cd();s?fp(c,t.applyTransform(i,!0),n.measuredBox):fp(c,r,n.layoutBox);const u=!J$(o);let d=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:p}=f;if(h&&p){const y=En();hp(y,n.layoutBox,h.layoutBox);const v=En();hp(v,r,p.layoutBox),Z$(y,v)||(d=!0),f.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=y,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function zJ(t){qh&&cc.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function FJ(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function VJ(t){t.clearSnapshot()}function ak(t){t.clearMeasurements()}function BJ(t){t.isLayoutDirty=!1}function UJ(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function sk(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function WJ(t){t.resolveTargetDelta()}function KJ(t){t.calcProjection()}function qJ(t){t.resetSkewAndRotation()}function HJ(t){t.removeLeadSnapshot()}function ok(t,e,n){t.translate=cn(e.translate,0,n),t.scale=cn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function lk(t,e,n,r){t.min=cn(e.min,n.min,r),t.max=cn(e.max,n.max,r)}function GJ(t,e,n,r){lk(t.x,e.x,n.x,r),lk(t.y,e.y,n.y,r)}function YJ(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const XJ={duration:.45,ease:[.4,0,.1,1]},ck=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),uk=ck("applewebkit/")&&!ck("chrome/")?Math.round:Di;function dk(t){t.min=uk(t.min),t.max=uk(t.max)}function QJ(t){dk(t.x),dk(t.y)}function nz(t,e,n){return t==="position"||t==="preserve-aspect"&&!eJ(nk(e),nk(n),.2)}function JJ(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const ZJ=tz({attachResizeListener:(t,e)=>tm(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Nw={current:void 0},rz=tz({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Nw.current){const t=new ZJ({});t.mount(window),t.setOptions({layoutScroll:!0}),Nw.current=t}return Nw.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),eZ={pan:{Feature:gJ},drag:{Feature:mJ,ProjectionNode:rz,MeasureLayout:Y$}};function fk(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&Jt.postRender(()=>a(e,lg(e)))}class tZ extends Nl{mount(){const{current:e}=this.node;e&&(this.unmount=nX(e,n=>(fk(this.node,n,"Start"),r=>fk(this.node,r,"End"))))}unmount(){}}class nZ extends Nl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=og(tm(this.node.current,"focus",()=>this.onFocus()),tm(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function hk(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&Jt.postRender(()=>a(e,lg(e)))}class rZ extends Nl{mount(){const{current:e}=this.node;e&&(this.unmount=sX(e,n=>(hk(this.node,n,"Start"),(r,{success:i})=>hk(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Q_=new WeakMap,kw=new WeakMap,iZ=t=>{const e=Q_.get(t.target);e&&e(t)},aZ=t=>{t.forEach(iZ)};function sZ({root:t,...e}){const n=t||document;kw.has(n)||kw.set(n,{});const r=kw.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(aZ,{root:t,...e})),r[i]}function oZ(t,e,n){const r=sZ(e);return Q_.set(t,n),r.observe(t),()=>{Q_.delete(t),r.unobserve(t)}}const lZ={some:0,all:1};class cZ extends Nl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:lZ[i]},o=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),h=u?d:f;h&&h(c)};return oZ(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(uZ(e,n))&&this.startObserver()}unmount(){}}function uZ({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const dZ={inView:{Feature:cZ},tap:{Feature:rZ},focus:{Feature:nZ},hover:{Feature:tZ}},fZ={layout:{ProjectionNode:rz,MeasureLayout:Y$}},J_={current:null},iz={current:!1};function hZ(){if(iz.current=!0,!!SA)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>J_.current=t.matches;t.addListener(e),e()}else J_.current=!1}const pZ=[...E$,Or,bl],mZ=t=>pZ.find(P$(t)),pk=new WeakMap;function gZ(t,e,n){for(const r in e){const i=e[r],a=n[r];if(wr(i))t.addValue(r,i);else if(wr(a))t.addValue(r,Yd(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const s=t.getValue(r);s.liveStyle===!0?s.jump(i):s.hasAnimated||s.set(i)}else{const s=t.getStaticValue(r);t.addValue(r,Yd(s!==void 0?s:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const mk=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class vZ{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=JA,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=cs.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Jt.render(this.render,!1,!0))};const{latestValues:c,renderState:u,onUpdate:d}=s;this.onUpdate=d,this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=Ex(n),this.isVariantNode=ML(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in h){const y=h[p];c[p]!==void 0&&wr(y)&&y.set(c[p],!1)}}mount(e){this.current=e,pk.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),iz.current||hZ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:J_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){pk.delete(this.current),this.projection&&this.projection.unmount(),io(this.notifyUpdate),io(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=du.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Jt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Gd){const n=Gd[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):En()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<mk.length;r++){const i=mk[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,s=e[a];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=gZ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Yd(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(j$(i)||m$(i))?i=parseFloat(i):!mZ(i)&&bl.test(n)&&(i=w$(e,n)),this.setBaseTarget(e,wr(i)?i.get():i)),wr(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const s=kA(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);s&&(i=s[e])}if(r&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!wr(a)?a:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new KA),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class az extends vZ{constructor(){super(...arguments),this.KeyframeResolver=T$}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;wr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function yZ(t){return window.getComputedStyle(t)}class xZ extends az{constructor(){super(...arguments),this.type="html",this.renderInstance=WL}readValueFromInstance(e,n){if(du.has(n)){const r=QA(n);return r&&r.default||0}else{const r=yZ(e),i=(VL(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return H$(e,n)}build(e,n,r){DA(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return $A(e,n,r)}}class bZ extends az{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=En}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(du.has(n)){const r=QA(n);return r&&r.default||0}return n=KL.has(n)?n:TA(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return GL(e,n,r)}build(e,n,r){MA(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){qL(e,n,r,i)}mount(e){this.isSVGTag=LA(e.tagName),super.mount(e)}}const wZ=(t,e)=>NA(t)?new bZ(e):new xZ(e,{allowProjection:t!==k.Fragment}),_Z=YY({...KQ,...dZ,...eZ,...fZ},wZ),po=uY(_Z);function sz(t){const e=uu(()=>Yd(t)),{isStatic:n}=k.useContext(_A);if(n){const[,r]=k.useState(t);k.useEffect(()=>e.on("change",r),[])}return e}function oz(t,e){const n=sz(e()),r=()=>n.set(e());return r(),jA(()=>{const i=()=>Jt.preRender(r,!1,!0),a=t.map(s=>s.on("change",i));return()=>{a.forEach(s=>s()),io(r)}}),n}const SZ=t=>t&&typeof t=="object"&&t.mix,jZ=t=>SZ(t)?t.mix:void 0;function AZ(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],i=t[1+n],a=t[2+n],s=t[3+n],o=M$(i,a,{mixer:jZ(a[0]),...s});return e?o(r):o}function PZ(t){cp.current=[],t();const e=oz(cp.current,t);return cp.current=void 0,e}function EZ(t,e,n,r){if(typeof t=="function")return PZ(t);const i=typeof e=="function"?e:AZ(e,n,r);return Array.isArray(t)?gk(t,i):gk([t],([a])=>i(a))}function gk(t,e){const n=uu(()=>[]);return oz(t,()=>{n.length=0;const r=t.length;for(let i=0;i<r;i++)n[i]=t[i].get();return e(n)})}function TZ(t){t.values.forEach(e=>e.stop())}function Z_(t,e){[...e].reverse().forEach(r=>{const i=t.getVariant(r);i&&qA(t,i),t.variantChildren&&t.variantChildren.forEach(a=>{Z_(a,e)})})}function CZ(t,e){if(Array.isArray(e))return Z_(t,e);if(typeof e=="string")return Z_(t,[e]);qA(t,e)}function NZ(){const t=new Set,e={subscribe(n){return t.add(n),()=>void t.delete(n)},start(n,r){const i=[];return t.forEach(a=>{i.push($$(a,n,{transitionOverride:r}))}),Promise.all(i)},set(n){return t.forEach(r=>{CZ(r,n)})},stop(){t.forEach(n=>{TZ(n)})},mount(){return()=>{e.stop()}}};return e}function kZ(){const t=uu(NZ);return jA(t.mount,[]),t}const fu=kZ;class OZ{constructor(){this.componentControls=new Set}subscribe(e){return this.componentControls.add(e),()=>this.componentControls.delete(e)}start(e,n){this.componentControls.forEach(r=>{r.start(e.nativeEvent||e,n)})}}const IZ=()=>new OZ;function nP(){return uu(IZ)}const lz=k.createContext(null);function DZ(t,e,n,r){if(!r)return t;const i=t.findIndex(d=>d.value===e);if(i===-1)return t;const a=r>0?1:-1,s=t[i+a];if(!s)return t;const o=t[i],c=s.layout,u=cn(c.min,c.max,.5);return a===1&&o.layout.max+n>u||a===-1&&o.layout.min+n<u?cX(t,i,i+a):t}function MZ({children:t,as:e="ul",axis:n="y",onReorder:r,values:i,...a},s){const o=uu(()=>po[e]),c=[],u=k.useRef(!1),d={axis:n,registerItem:(f,h)=>{const p=c.findIndex(y=>f===y.value);p!==-1?c[p].layout=h[n]:c.push({value:f,layout:h[n]}),c.sort(LZ)},updateOrder:(f,h,p)=>{if(u.current)return;const y=DZ(c,f,h,p);c!==y&&(u.current=!0,r(y.map(RZ).filter(v=>i.indexOf(v)!==-1)))}};return k.useEffect(()=>{u.current=!1}),l.jsx(o,{...a,ref:s,ignoreStrict:!0,children:l.jsx(lz.Provider,{value:d,children:t})})}const rP=k.forwardRef(MZ);function RZ(t){return t.value}function LZ(t,e){return t.layout.min-e.layout.min}function vk(t,e=0){return wr(t)?t:sz(e)}function $Z({children:t,style:e={},value:n,as:r="li",onDrag:i,layout:a=!0,...s},o){const c=uu(()=>po[r]),u=k.useContext(lz),d={x:vk(e.x),y:vk(e.y)},f=EZ([d.x,d.y],([v,b])=>v||b?1:"unset"),{axis:h,registerItem:p,updateOrder:y}=u;return l.jsx(c,{drag:h,...s,dragSnapToOrigin:!0,style:{...e,x:d.x,y:d.y,zIndex:f},layout:a,onDrag:(v,b)=>{const{velocity:x}=b;x[h]&&y(n,d[h].get(),x[h]),i&&i(v,b)},onLayoutMeasure:v=>p(n,v),ref:o,ignoreStrict:!0,children:t})}const iP=k.forwardRef($Z),Qd=({isOpen:t,onClose:e,title:n,actions:r})=>t?l.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex justify-center items-end sm:items-center z-50 animate-fade-in",onClick:e,children:l.jsxs("div",{className:"w-full max-w-sm bg-ios-modal-bg rounded-t-2xl sm:rounded-2xl shadow-2xl text-white animate-slide-up",onClick:i=>i.stopPropagation(),children:[l.jsx("div",{className:"p-2",children:l.jsx("header",{className:"text-center p-2 rounded-lg bg-zinc-800/50",children:l.jsx("h2",{className:"text-sm font-semibold text-brand-light-gray",children:n})})}),l.jsx("div",{className:"p-2",children:l.jsx("div",{className:"bg-zinc-800/50 rounded-lg",children:r.map((i,a)=>l.jsxs("button",{onClick:()=>{i.onClick(),e()},className:`w-full flex items-center p-3 text-left transition-colors hover:bg-white/10 ${i.color||"text-brand-blue"} ${a>0?"border-t border-zinc-700/80":""}`,children:[l.jsx(i.icon,{size:22,className:"mr-4"}),l.jsx("span",{className:"text-lg font-medium text-white",children:i.label})]},a))})}),l.jsx("div",{className:"p-2 mt-1",children:l.jsx("button",{onClick:e,className:"w-full bg-zinc-700 p-3 text-lg font-bold text-white rounded-xl hover:bg-zinc-600 transition-colors",children:"Cancelar"})})]})}):null,zZ=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i})=>t?l.jsxs(st,{isOpen:t,onClose:e,title:r,children:[" ",l.jsxs("div",{className:"space-y-6",children:[" ",l.jsx("p",{className:"text-zinc-300",children:i})," ",l.jsxs("div",{className:"flex justify-end gap-4",children:[l.jsx("button",{onClick:e,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-6 rounded-lg",children:"Cancelar"}),l.jsx("button",{onClick:()=>{n(),e()},className:"bg-brand-red hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg",children:"Confirmar"})]})," "]})," "]}):null,FZ=({lotName:t,count:e,dragControls:n})=>l.jsxs("div",{className:"w-full p-4 flex items-center",children:[l.jsx("div",{className:"pl-2 pr-4 cursor-grab touch-none self-stretch flex items-center",onPointerDown:r=>n.start(r),children:l.jsx(vA,{className:"text-zinc-500"})}),l.jsxs("div",{className:"flex-grow",children:[l.jsx("p",{className:"font-bold text-lg text-white",children:t}),l.jsxs("p",{className:"text-sm text-zinc-400",children:[l.jsx("span",{className:"font-semibold text-brand-orange",children:e})," ",e===1?"animal":"animales"]})]})]}),VZ=({lot:t,onEdit:e,onDelete:n,onClick:r,dragControls:i})=>{const a=fu(),s=k.useRef(!1),o=t.count>0,c=t.name!=="Sin Asignar",u=(o?80:0)+(c?80:0);return l.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-brand-glass border border-brand-border",children:[l.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:[o&&l.jsxs("button",{onClick:e,onPointerDown:d=>d.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-orange text-white",children:[l.jsx(Tl,{size:22}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Editar"})]}),c&&l.jsxs("button",{onClick:n,onPointerDown:d=>d.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-red text-white",children:[l.jsx(fo,{size:22}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Borrar"})]})]}),l.jsx(po.div,{drag:"x",dragConstraints:{left:-u,right:0},dragElastic:.1,onPanStart:()=>{s.current=!0},onPanEnd:()=>{setTimeout(()=>{s.current=!1},50)},onTap:()=>{s.current||r()},animate:a,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg",children:l.jsx(FZ,{lotName:t.name,count:t.count,dragControls:i})})]})},BZ=({lot:t,navigateTo:e,onEdit:n,onDelete:r})=>{const i=nP();return l.jsxs(iP,{value:t,dragListener:!1,dragControls:i,children:[" ",l.jsx(VZ,{lot:t,dragControls:i,onClick:()=>e({name:"lot-detail",lotName:t.name}),onEdit:()=>n(t),onDelete:()=>r(t)})," "]},t.id)};function UZ({navigateTo:t}){const{animals:e,lots:n,deleteLot:r}=Ge(),[i,a]=k.useState(!1),[s,o]=k.useState(null),[c,u]=k.useState(null),d=k.useMemo(()=>{const v=new Map;return n.forEach(x=>v.set(x.name,0)),(e||[]).forEach(x=>{const _=x.location||"Sin Asignar";v.set(_,(v.get(_)||0)+1)}),Array.from(new Set([...n.map(x=>x.name),...e.map(x=>x.location||"Sin Asignar")])).map(x=>{const _=n.find(S=>S.name===x);return{id:(_==null?void 0:_.id)||x,name:x,count:v.get(x)||0}}).sort((x,_)=>x.name.localeCompare(_.name))},[e,n]),[f,h]=k.useState(d);k.useEffect(()=>{h(d)},[d]);const p=[{label:"Mover Animales",icon:yA,onClick:()=>t({name:"lot-detail",lotName:(s==null?void 0:s.name)||""})}],y=()=>{c&&r(c.id)};return f.length===0?l.jsxs("div",{className:"text-center py-10 bg-brand-glass rounded-2xl flex flex-col items-center gap-2",children:[l.jsx(TL,{size:32,className:"text-zinc-600"}),l.jsx("p",{className:"text-zinc-500 font-semibold",children:"No hay lotes físicos creados."}),l.jsx("p",{className:"text-xs text-zinc-600",children:"Usa el botón '+' para empezar a organizar tu rebaño."})]}):l.jsxs(l.Fragment,{children:[l.jsx(rP,{as:"div",axis:"y",values:f,onReorder:h,className:"space-y-3",children:f.map(v=>l.jsx(BZ,{lot:v,navigateTo:t,onEdit:b=>{o(b),a(!0)},onDelete:b=>u(b)},v.id))}),l.jsx(Qd,{isOpen:i,onClose:()=>a(!1),title:`Acciones para "${s==null?void 0:s.name}"`,actions:p}),l.jsx(zZ,{isOpen:!!c,onClose:()=>u(null),onConfirm:y,title:"Eliminar Lote",message:`¿Estás seguro de que quieres eliminar el lote "${c==null?void 0:c.name}"? Esta acción no se puede deshacer.`})]})}const WZ=({onSave:t,onCancel:e,existingSeason:n})=>{const[r,i]=k.useState(""),[a,s]=k.useState(""),[o,c]=k.useState("45"),[u,d]=k.useState(!1),[f,h]=k.useState(null),[p,y]=k.useState(!1);k.useEffect(()=>{if(n){i(n.name),s(n.startDate);const b=new Date(n.startDate),x=new Date(n.endDate),_=Math.abs(x.getTime()-b.getTime()),S=Math.ceil(_/(1e3*60*60*24));c(String(S)),d(n.requiresLightTreatment)}else s(new Date().toISOString().split("T")[0])},[n]);const v=async b=>{if(b.preventDefault(),h(null),!r.trim()||!a||!o){h("Todos los campos son obligatorios.");return}y(!0);const x=new Date(a),_=new Date(x);_.setDate(x.getDate()+parseInt(o,10));const S={name:r,startDate:a,endDate:_.toISOString().split("T")[0],requiresLightTreatment:u};try{await t(S)}catch(T){h("No se pudo guardar la temporada de monta."),console.error(T),y(!1)}};return l.jsxs("form",{onSubmit:v,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Nombre de la Temporada"}),l.jsx("input",{id:"name",type:"text",value:r,onChange:b=>i(b.target.value),placeholder:"Ej: Monta de Otoño 2025",className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Inicio"}),l.jsx("input",{id:"startDate",type:"date",value:a,onChange:b=>s(b.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"duration",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Duración (días)"}),l.jsx("input",{id:"duration",type:"number",value:o,onChange:b=>c(b.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]})]}),l.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-zinc-700 flex items-center justify-between",children:[l.jsx("label",{htmlFor:"lightTreatment",className:"text-sm font-medium text-zinc-300",children:"¿Requiere Tratamiento de Luz?"}),l.jsx("input",{id:"lightTreatment",type:"checkbox",checked:u,onChange:b=>d(b.target.checked),className:"form-checkbox h-5 w-5 bg-zinc-700 border-zinc-600 rounded text-brand-orange focus:ring-brand-orange focus:ring-offset-0"})]}),f&&l.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[l.jsx(Ut,{size:18}),l.jsx("span",{children:f})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:p,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:p?"Guardando...":"Guardar Temporada"})]})]})},KZ=({season:t,dragControls:e})=>l.jsxs("div",{className:"w-full p-4 flex items-center",children:[l.jsx("div",{className:"pl-2 pr-4 cursor-grab touch-none self-stretch flex items-center",onPointerDown:n=>e.start(n),children:l.jsx(vA,{className:"text-zinc-500"})}),l.jsxs("div",{className:"flex-grow",children:[l.jsxs("p",{className:"font-bold text-lg text-white flex items-center gap-2",children:[t.name,t.requiresLightTreatment&&l.jsx("span",{title:"Requiere Tratamiento de Luz",children:l.jsx(RG,{size:16,className:"text-yellow-400"})})]}),l.jsxs("p",{className:"text-sm text-zinc-400",children:[new Date(t.startDate+"T00:00:00").toLocaleDateString()," - ",new Date(t.endDate+"T00:00:00").toLocaleDateString()]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${t.status==="Activo"?"bg-green-500/80 text-white":"bg-zinc-600 text-zinc-300"}`,children:t.status}),l.jsx(Pr,{className:"text-zinc-600"})]})]}),qZ=({season:t,onEdit:e,onClick:n,dragControls:r})=>{const i=fu(),a=k.useRef(!1);return l.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-brand-glass border border-brand-border",children:[l.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:l.jsxs("button",{onClick:e,onPointerDown:s=>s.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[l.jsx(Tl,{size:22}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Editar"})]})}),l.jsx(po.div,{drag:"x",dragConstraints:{left:-80,right:0},dragElastic:.1,onPanStart:()=>{a.current=!0},onPanEnd:()=>{setTimeout(()=>{a.current=!1},50)},onTap:()=>{a.current||n()},animate:i,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg",children:l.jsx(KZ,{season:t,dragControls:r})})]})},HZ=({season:t,navigateTo:e,onEdit:n})=>{const r=nP();return l.jsx(iP,{value:t,dragListener:!1,dragControls:r,children:l.jsx(qZ,{season:t,dragControls:r,onClick:()=>e({name:"breeding-season-detail",seasonId:t.id}),onEdit:()=>n(t)})},t.id)};function GZ({navigateTo:t}){const{breedingSeasons:e,addBreedingSeason:n,updateBreedingSeason:r}=Ge(),[i,a]=k.useState(!1),[s,o]=k.useState(void 0),c=k.useMemo(()=>[...e].sort((p,y)=>p.status==="Activo"&&y.status!=="Activo"?-1:p.status!=="Activo"&&y.status==="Activo"?1:new Date(y.startDate).getTime()-new Date(p.startDate).getTime()),[e]),[u,d]=k.useState(c);k.useEffect(()=>{d(c)},[c]);const f=p=>{o(p),a(!0)},h=async p=>{s?await r(s.id,{...p}):await n({...p,status:"Activo"}),a(!1),o(void 0)};return u.length===0?l.jsxs("div",{className:"text-center py-10 bg-brand-glass rounded-2xl flex flex-col items-center gap-2",children:[l.jsx(jx,{size:32,className:"text-zinc-600"}),l.jsx("p",{className:"text-zinc-500 font-semibold",children:"No hay temporadas de monta creadas."}),l.jsx("p",{className:"text-xs text-zinc-600",children:"Usa el botón de abajo para empezar a planificar."})]}):l.jsxs(l.Fragment,{children:[l.jsx(rP,{as:"div",axis:"y",values:u,onReorder:d,className:"space-y-3",children:u.map(p=>l.jsx(HZ,{season:p,navigateTo:t,onEdit:f},p.id))}),l.jsx("div",{className:"px-4 mt-4",children:l.jsxs("button",{onClick:()=>f(),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[l.jsx(ur,{size:20})," Crear Nueva Temporada"]})}),l.jsx(st,{isOpen:i,onClose:()=>{a(!1),o(void 0)},title:s?"Editar Temporada de Monta":"Crear Temporada de Monta",children:l.jsx(WZ,{onSave:h,onCancel:()=>{a(!1),o(void 0)},existingSeason:s})})]})}function cz(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=cz(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function dt(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=cz(t))&&(r&&(r+=" "),r+=e);return r}var YZ=Array.isArray,xi=YZ,XZ=typeof Gu=="object"&&Gu&&Gu.Object===Object&&Gu,uz=XZ,QZ=uz,JZ=typeof self=="object"&&self&&self.Object===Object&&self,ZZ=QZ||JZ||Function("return this")(),vs=ZZ,eee=vs,tee=eee.Symbol,cg=tee,yk=cg,dz=Object.prototype,nee=dz.hasOwnProperty,ree=dz.toString,jh=yk?yk.toStringTag:void 0;function iee(t){var e=nee.call(t,jh),n=t[jh];try{t[jh]=void 0;var r=!0}catch{}var i=ree.call(t);return r&&(e?t[jh]=n:delete t[jh]),i}var aee=iee,see=Object.prototype,oee=see.toString;function lee(t){return oee.call(t)}var cee=lee,xk=cg,uee=aee,dee=cee,fee="[object Null]",hee="[object Undefined]",bk=xk?xk.toStringTag:void 0;function pee(t){return t==null?t===void 0?hee:fee:bk&&bk in Object(t)?uee(t):dee(t)}var mo=pee;function mee(t){return t!=null&&typeof t=="object"}var go=mee,gee=mo,vee=go,yee="[object Symbol]";function xee(t){return typeof t=="symbol"||vee(t)&&gee(t)==yee}var Rf=xee,bee=xi,wee=Rf,_ee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,See=/^\w*$/;function jee(t,e){if(bee(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||wee(t)?!0:See.test(t)||!_ee.test(t)||e!=null&&t in Object(e)}var aP=jee;function Aee(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var kl=Aee;const Lf=Ot(kl);var Pee=mo,Eee=kl,Tee="[object AsyncFunction]",Cee="[object Function]",Nee="[object GeneratorFunction]",kee="[object Proxy]";function Oee(t){if(!Eee(t))return!1;var e=Pee(t);return e==Cee||e==Nee||e==Tee||e==kee}var sP=Oee;const Je=Ot(sP);var Iee=vs,Dee=Iee["__core-js_shared__"],Mee=Dee,Ow=Mee,wk=function(){var t=/[^.]+$/.exec(Ow&&Ow.keys&&Ow.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Ree(t){return!!wk&&wk in t}var Lee=Ree,$ee=Function.prototype,zee=$ee.toString;function Fee(t){if(t!=null){try{return zee.call(t)}catch{}try{return t+""}catch{}}return""}var fz=Fee,Vee=sP,Bee=Lee,Uee=kl,Wee=fz,Kee=/[\\^$.*+?()[\]{}|]/g,qee=/^\[object .+?Constructor\]$/,Hee=Function.prototype,Gee=Object.prototype,Yee=Hee.toString,Xee=Gee.hasOwnProperty,Qee=RegExp("^"+Yee.call(Xee).replace(Kee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Jee(t){if(!Uee(t)||Bee(t))return!1;var e=Vee(t)?Qee:qee;return e.test(Wee(t))}var Zee=Jee;function ete(t,e){return t==null?void 0:t[e]}var tte=ete,nte=Zee,rte=tte;function ite(t,e){var n=rte(t,e);return nte(n)?n:void 0}var hu=ite,ate=hu,ste=ate(Object,"create"),Nx=ste,_k=Nx;function ote(){this.__data__=_k?_k(null):{},this.size=0}var lte=ote;function cte(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var ute=cte,dte=Nx,fte="__lodash_hash_undefined__",hte=Object.prototype,pte=hte.hasOwnProperty;function mte(t){var e=this.__data__;if(dte){var n=e[t];return n===fte?void 0:n}return pte.call(e,t)?e[t]:void 0}var gte=mte,vte=Nx,yte=Object.prototype,xte=yte.hasOwnProperty;function bte(t){var e=this.__data__;return vte?e[t]!==void 0:xte.call(e,t)}var wte=bte,_te=Nx,Ste="__lodash_hash_undefined__";function jte(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=_te&&e===void 0?Ste:e,this}var Ate=jte,Pte=lte,Ete=ute,Tte=gte,Cte=wte,Nte=Ate;function $f(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}$f.prototype.clear=Pte;$f.prototype.delete=Ete;$f.prototype.get=Tte;$f.prototype.has=Cte;$f.prototype.set=Nte;var kte=$f;function Ote(){this.__data__=[],this.size=0}var Ite=Ote;function Dte(t,e){return t===e||t!==t&&e!==e}var oP=Dte,Mte=oP;function Rte(t,e){for(var n=t.length;n--;)if(Mte(t[n][0],e))return n;return-1}var kx=Rte,Lte=kx,$te=Array.prototype,zte=$te.splice;function Fte(t){var e=this.__data__,n=Lte(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():zte.call(e,n,1),--this.size,!0}var Vte=Fte,Bte=kx;function Ute(t){var e=this.__data__,n=Bte(e,t);return n<0?void 0:e[n][1]}var Wte=Ute,Kte=kx;function qte(t){return Kte(this.__data__,t)>-1}var Hte=qte,Gte=kx;function Yte(t,e){var n=this.__data__,r=Gte(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var Xte=Yte,Qte=Ite,Jte=Vte,Zte=Wte,ene=Hte,tne=Xte;function zf(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}zf.prototype.clear=Qte;zf.prototype.delete=Jte;zf.prototype.get=Zte;zf.prototype.has=ene;zf.prototype.set=tne;var Ox=zf,nne=hu,rne=vs,ine=nne(rne,"Map"),lP=ine,Sk=kte,ane=Ox,sne=lP;function one(){this.size=0,this.__data__={hash:new Sk,map:new(sne||ane),string:new Sk}}var lne=one;function cne(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var une=cne,dne=une;function fne(t,e){var n=t.__data__;return dne(e)?n[typeof e=="string"?"string":"hash"]:n.map}var Ix=fne,hne=Ix;function pne(t){var e=hne(this,t).delete(t);return this.size-=e?1:0,e}var mne=pne,gne=Ix;function vne(t){return gne(this,t).get(t)}var yne=vne,xne=Ix;function bne(t){return xne(this,t).has(t)}var wne=bne,_ne=Ix;function Sne(t,e){var n=_ne(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var jne=Sne,Ane=lne,Pne=mne,Ene=yne,Tne=wne,Cne=jne;function Ff(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ff.prototype.clear=Ane;Ff.prototype.delete=Pne;Ff.prototype.get=Ene;Ff.prototype.has=Tne;Ff.prototype.set=Cne;var cP=Ff,hz=cP,Nne="Expected a function";function uP(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Nne);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var s=t.apply(this,r);return n.cache=a.set(i,s)||a,s};return n.cache=new(uP.Cache||hz),n}uP.Cache=hz;var pz=uP;const kne=Ot(pz);var One=pz,Ine=500;function Dne(t){var e=One(t,function(r){return n.size===Ine&&n.clear(),r}),n=e.cache;return e}var Mne=Dne,Rne=Mne,Lne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$ne=/\\(\\)?/g,zne=Rne(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Lne,function(n,r,i,a){e.push(i?a.replace($ne,"$1"):r||n)}),e}),Fne=zne;function Vne(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var dP=Vne,jk=cg,Bne=dP,Une=xi,Wne=Rf,Ak=jk?jk.prototype:void 0,Pk=Ak?Ak.toString:void 0;function mz(t){if(typeof t=="string")return t;if(Une(t))return Bne(t,mz)+"";if(Wne(t))return Pk?Pk.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var Kne=mz,qne=Kne;function Hne(t){return t==null?"":qne(t)}var gz=Hne,Gne=xi,Yne=aP,Xne=Fne,Qne=gz;function Jne(t,e){return Gne(t)?t:Yne(t,e)?[t]:Xne(Qne(t))}var vz=Jne,Zne=Rf;function ere(t){if(typeof t=="string"||Zne(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var Dx=ere,tre=vz,nre=Dx;function rre(t,e){e=tre(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[nre(e[n++])];return n&&n==r?t:void 0}var fP=rre,ire=fP;function are(t,e,n){var r=t==null?void 0:ire(t,e);return r===void 0?n:r}var yz=are;const Mi=Ot(yz);function sre(t){return t==null}var ore=sre;const it=Ot(ore);var lre=mo,cre=xi,ure=go,dre="[object String]";function fre(t){return typeof t=="string"||!cre(t)&&ure(t)&&lre(t)==dre}var hre=fre;const Hc=Ot(hre);var xz={exports:{}},$t={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hP=Symbol.for("react.element"),pP=Symbol.for("react.portal"),Mx=Symbol.for("react.fragment"),Rx=Symbol.for("react.strict_mode"),Lx=Symbol.for("react.profiler"),$x=Symbol.for("react.provider"),zx=Symbol.for("react.context"),pre=Symbol.for("react.server_context"),Fx=Symbol.for("react.forward_ref"),Vx=Symbol.for("react.suspense"),Bx=Symbol.for("react.suspense_list"),Ux=Symbol.for("react.memo"),Wx=Symbol.for("react.lazy"),mre=Symbol.for("react.offscreen"),bz;bz=Symbol.for("react.module.reference");function oa(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case hP:switch(t=t.type,t){case Mx:case Lx:case Rx:case Vx:case Bx:return t;default:switch(t=t&&t.$$typeof,t){case pre:case zx:case Fx:case Wx:case Ux:case $x:return t;default:return e}}case pP:return e}}}$t.ContextConsumer=zx;$t.ContextProvider=$x;$t.Element=hP;$t.ForwardRef=Fx;$t.Fragment=Mx;$t.Lazy=Wx;$t.Memo=Ux;$t.Portal=pP;$t.Profiler=Lx;$t.StrictMode=Rx;$t.Suspense=Vx;$t.SuspenseList=Bx;$t.isAsyncMode=function(){return!1};$t.isConcurrentMode=function(){return!1};$t.isContextConsumer=function(t){return oa(t)===zx};$t.isContextProvider=function(t){return oa(t)===$x};$t.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===hP};$t.isForwardRef=function(t){return oa(t)===Fx};$t.isFragment=function(t){return oa(t)===Mx};$t.isLazy=function(t){return oa(t)===Wx};$t.isMemo=function(t){return oa(t)===Ux};$t.isPortal=function(t){return oa(t)===pP};$t.isProfiler=function(t){return oa(t)===Lx};$t.isStrictMode=function(t){return oa(t)===Rx};$t.isSuspense=function(t){return oa(t)===Vx};$t.isSuspenseList=function(t){return oa(t)===Bx};$t.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Mx||t===Lx||t===Rx||t===Vx||t===Bx||t===mre||typeof t=="object"&&t!==null&&(t.$$typeof===Wx||t.$$typeof===Ux||t.$$typeof===$x||t.$$typeof===zx||t.$$typeof===Fx||t.$$typeof===bz||t.getModuleId!==void 0)};$t.typeOf=oa;xz.exports=$t;var gre=xz.exports,vre=mo,yre=go,xre="[object Number]";function bre(t){return typeof t=="number"||yre(t)&&vre(t)==xre}var wz=bre;const wre=Ot(wz);var _re=wz;function Sre(t){return _re(t)&&t!=+t}var jre=Sre;const Vf=Ot(jre);var Kr=function(e){return e===0?0:e>0?1:-1},wc=function(e){return Hc(e)&&e.indexOf("%")===e.length-1},je=function(e){return wre(e)&&!Vf(e)},Are=function(e){return it(e)},Qn=function(e){return je(e)||Hc(e)},Pre=0,pu=function(e){var n=++Pre;return"".concat(e||"").concat(n)},qr=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!je(e)&&!Hc(e))return r;var a;if(wc(e)){var s=e.indexOf("%");a=n*parseFloat(e.slice(0,s))/100}else a=+e;return Vf(a)&&(a=r),i&&a>n&&(a=n),a},Go=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},Ere=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},Yn=function(e,n){return je(e)&&je(n)?function(r){return e+r*(n-e)}:function(){return n}};function My(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):Mi(r,e))===n})}var Tre=function(e,n){return je(e)&&je(n)?e-n:Hc(e)&&Hc(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function Pd(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function e2(t){"@babel/helpers - typeof";return e2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e2(t)}var Cre=["viewBox","children"],Nre=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Ek=["points","pathLength"],Iw={svg:Cre,polygon:Ek,polyline:Ek},mP=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Ry=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(k.isValidElement(e)&&(r=e.props),!Lf(r))return null;var i={};return Object.keys(r).forEach(function(a){mP.includes(a)&&(i[a]=n||function(s){return r[a](r,s)})}),i},kre=function(e,n,r){return function(i){return e(n,r,i),null}},Gc=function(e,n,r){if(!Lf(e)||e2(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(a){var s=e[a];mP.includes(a)&&typeof s=="function"&&(i||(i={}),i[a]=kre(s,n,r))}),i},Ore=["children"],Ire=["children"];function Tk(t,e){if(t==null)return{};var n=Dre(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Dre(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function t2(t){"@babel/helpers - typeof";return t2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t2(t)}var Ck={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Hs=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},Nk=null,Dw=null,gP=function t(e){if(e===Nk&&Array.isArray(Dw))return Dw;var n=[];return k.Children.forEach(e,function(r){it(r)||(gre.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),Dw=n,Nk=e,n};function Ri(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return Hs(i)}):r=[Hs(e)],gP(t).forEach(function(i){var a=Mi(i,"type.displayName")||Mi(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}function Ci(t,e){var n=Ri(t,e);return n&&n[0]}var kk=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!je(r)||r<=0||!je(i)||i<=0)},Mre=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Rre=function(e){return e&&e.type&&Hc(e.type)&&Mre.indexOf(e.type)>=0},_z=function(e){return e&&t2(e)==="object"&&"clipDot"in e},Lre=function(e,n,r,i){var a,s=(a=Iw==null?void 0:Iw[i])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!Je(e)&&(i&&s.includes(n)||Nre.includes(n))||r&&mP.includes(n)},Ke=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(k.isValidElement(e)&&(i=e.props),!Lf(i))return null;var a={};return Object.keys(i).forEach(function(s){var o;Lre((o=i)===null||o===void 0?void 0:o[s],s,n,r)&&(a[s]=i[s])}),a},n2=function t(e,n){if(e===n)return!0;var r=k.Children.count(e);if(r!==k.Children.count(n))return!1;if(r===0)return!0;if(r===1)return Ok(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var a=e[i],s=n[i];if(Array.isArray(a)||Array.isArray(s)){if(!t(a,s))return!1}else if(!Ok(a,s))return!1}return!0},Ok=function(e,n){if(it(e)&&it(n))return!0;if(!it(e)&&!it(n)){var r=e.props||{},i=r.children,a=Tk(r,Ore),s=n.props||{},o=s.children,c=Tk(s,Ire);return i&&o?Pd(a,c)&&n2(i,o):!i&&!o?Pd(a,c):!1}return!1},Ik=function(e,n){var r=[],i={};return gP(e).forEach(function(a,s){if(Rre(a))r.push(a);else if(a){var o=Hs(a.type),c=n[o]||{},u=c.handler,d=c.once;if(u&&(!d||!i[o])){var f=u(a,o,s);r.push(f),i[o]=!0}}}),r},$re=function(e){var n=e&&e.type;return n&&Ck[n]?Ck[n]:null},zre=function(e,n){return gP(n).indexOf(e)},Fre=["children","width","height","viewBox","className","style","title","desc"];function r2(){return r2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r2.apply(this,arguments)}function Vre(t,e){if(t==null)return{};var n=Bre(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Bre(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function i2(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,a=t.className,s=t.style,o=t.title,c=t.desc,u=Vre(t,Fre),d=i||{width:n,height:r,x:0,y:0},f=dt("recharts-surface",a);return H.createElement("svg",r2({},Ke(u,!0,"svg"),{className:f,width:n,height:r,style:s,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),H.createElement("title",null,o),H.createElement("desc",null,c),e)}var Ure=["children","className"];function a2(){return a2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a2.apply(this,arguments)}function Wre(t,e){if(t==null)return{};var n=Kre(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Kre(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var gt=H.forwardRef(function(t,e){var n=t.children,r=t.className,i=Wre(t,Ure),a=dt("recharts-layer",r);return H.createElement("g",a2({className:a},Ke(i,!0),{ref:e}),n)}),Ta=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]};function qre(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var a=Array(i);++r<i;)a[r]=t[r+e];return a}var Hre=qre,Gre=Hre;function Yre(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:Gre(t,e,n)}var Xre=Yre,Qre="\\ud800-\\udfff",Jre="\\u0300-\\u036f",Zre="\\ufe20-\\ufe2f",eie="\\u20d0-\\u20ff",tie=Jre+Zre+eie,nie="\\ufe0e\\ufe0f",rie="\\u200d",iie=RegExp("["+rie+Qre+tie+nie+"]");function aie(t){return iie.test(t)}var Sz=aie;function sie(t){return t.split("")}var oie=sie,jz="\\ud800-\\udfff",lie="\\u0300-\\u036f",cie="\\ufe20-\\ufe2f",uie="\\u20d0-\\u20ff",die=lie+cie+uie,fie="\\ufe0e\\ufe0f",hie="["+jz+"]",s2="["+die+"]",o2="\\ud83c[\\udffb-\\udfff]",pie="(?:"+s2+"|"+o2+")",Az="[^"+jz+"]",Pz="(?:\\ud83c[\\udde6-\\uddff]){2}",Ez="[\\ud800-\\udbff][\\udc00-\\udfff]",mie="\\u200d",Tz=pie+"?",Cz="["+fie+"]?",gie="(?:"+mie+"(?:"+[Az,Pz,Ez].join("|")+")"+Cz+Tz+")*",vie=Cz+Tz+gie,yie="(?:"+[Az+s2+"?",s2,Pz,Ez,hie].join("|")+")",xie=RegExp(o2+"(?="+o2+")|"+yie+vie,"g");function bie(t){return t.match(xie)||[]}var wie=bie,_ie=oie,Sie=Sz,jie=wie;function Aie(t){return Sie(t)?jie(t):_ie(t)}var Pie=Aie,Eie=Xre,Tie=Sz,Cie=Pie,Nie=gz;function kie(t){return function(e){e=Nie(e);var n=Tie(e)?Cie(e):void 0,r=n?n[0]:e.charAt(0),i=n?Eie(n,1).join(""):e.slice(1);return r[t]()+i}}var Oie=kie,Iie=Oie,Die=Iie("toUpperCase"),Mie=Die;const Kx=Ot(Mie);function Yt(t){return function(){return t}}const Nz=Math.cos,Ly=Math.sin,La=Math.sqrt,$y=Math.PI,qx=2*$y,l2=Math.PI,c2=2*l2,uc=1e-6,Rie=c2-uc;function kz(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Lie(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return kz;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class $ie{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?kz:Lie(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,c=r-e,u=i-n,d=s-e,f=o-n,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>uc)if(!(Math.abs(f*c-u*d)>uc)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let p=r-s,y=i-o,v=c*c+u*u,b=p*p+y*y,x=Math.sqrt(v),_=Math.sqrt(h),S=a*Math.tan((l2-Math.acos((v+h-b)/(2*x*_)))/2),T=S/_,E=S/x;Math.abs(T-1)>uc&&this._append`L${e+T*d},${n+T*f}`,this._append`A${a},${a},0,0,${+(f*p>d*y)},${this._x1=e+E*c},${this._y1=n+E*u}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),c=r*Math.sin(i),u=e+o,d=n+c,f=1^s,h=s?i-a:a-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>uc||Math.abs(this._y1-d)>uc)&&this._append`L${u},${d}`,r&&(h<0&&(h=h%c2+c2),h>Rie?this._append`A${r},${r},0,1,${f},${e-o},${n-c}A${r},${r},0,1,${f},${this._x1=u},${this._y1=d}`:h>uc&&this._append`A${r},${r},0,${+(h>=l2)},${f},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function vP(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new $ie(e)}function yP(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Oz(t){this._context=t}Oz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Hx(t){return new Oz(t)}function Iz(t){return t[0]}function Dz(t){return t[1]}function Mz(t,e){var n=Yt(!0),r=null,i=Hx,a=null,s=vP(o);t=typeof t=="function"?t:t===void 0?Iz:Yt(t),e=typeof e=="function"?e:e===void 0?Dz:Yt(e);function o(c){var u,d=(c=yP(c)).length,f,h=!1,p;for(r==null&&(a=i(p=s())),u=0;u<=d;++u)!(u<d&&n(f=c[u],u,c))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+t(f,u,c),+e(f,u,c));if(p)return a=null,p+""||null}return o.x=function(c){return arguments.length?(t=typeof c=="function"?c:Yt(+c),o):t},o.y=function(c){return arguments.length?(e=typeof c=="function"?c:Yt(+c),o):e},o.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Yt(!!c),o):n},o.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),o):i},o.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),o):r},o}function ev(t,e,n){var r=null,i=Yt(!0),a=null,s=Hx,o=null,c=vP(u);t=typeof t=="function"?t:t===void 0?Iz:Yt(+t),e=typeof e=="function"?e:Yt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Dz:Yt(+n);function u(f){var h,p,y,v=(f=yP(f)).length,b,x=!1,_,S=new Array(v),T=new Array(v);for(a==null&&(o=s(_=c())),h=0;h<=v;++h){if(!(h<v&&i(b=f[h],h,f))===x)if(x=!x)p=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),y=h-1;y>=p;--y)o.point(S[y],T[y]);o.lineEnd(),o.areaEnd()}x&&(S[h]=+t(b,h,f),T[h]=+e(b,h,f),o.point(r?+r(b,h,f):S[h],n?+n(b,h,f):T[h]))}if(_)return o=null,_+""||null}function d(){return Mz().defined(i).curve(s).context(a)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:Yt(+f),r=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:Yt(+f),u):t},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Yt(+f),u):r},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:Yt(+f),n=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:Yt(+f),u):e},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Yt(+f),u):n},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(n)},u.lineX1=function(){return d().x(r).y(e)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Yt(!!f),u):i},u.curve=function(f){return arguments.length?(s=f,a!=null&&(o=s(a)),u):s},u.context=function(f){return arguments.length?(f==null?a=o=null:o=s(a=f),u):a},u}class Rz{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function zie(t){return new Rz(t,!0)}function Fie(t){return new Rz(t,!1)}const xP={draw(t,e){const n=La(e/$y);t.moveTo(n,0),t.arc(0,0,n,0,qx)}},Vie={draw(t,e){const n=La(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Lz=La(1/3),Bie=Lz*2,Uie={draw(t,e){const n=La(e/Bie),r=n*Lz;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Wie={draw(t,e){const n=La(e),r=-n/2;t.rect(r,r,n,n)}},Kie=.8908130915292852,$z=Ly($y/10)/Ly(7*$y/10),qie=Ly(qx/10)*$z,Hie=-Nz(qx/10)*$z,Gie={draw(t,e){const n=La(e*Kie),r=qie*n,i=Hie*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const s=qx*a/5,o=Nz(s),c=Ly(s);t.lineTo(c*n,-o*n),t.lineTo(o*r-c*i,c*r+o*i)}t.closePath()}},Mw=La(3),Yie={draw(t,e){const n=-La(e/(Mw*3));t.moveTo(0,n*2),t.lineTo(-Mw*n,-n),t.lineTo(Mw*n,-n),t.closePath()}},qi=-.5,Hi=La(3)/2,u2=1/La(12),Xie=(u2/2+1)*3,Qie={draw(t,e){const n=La(e/Xie),r=n/2,i=n*u2,a=r,s=n*u2+n,o=-a,c=s;t.moveTo(r,i),t.lineTo(a,s),t.lineTo(o,c),t.lineTo(qi*r-Hi*i,Hi*r+qi*i),t.lineTo(qi*a-Hi*s,Hi*a+qi*s),t.lineTo(qi*o-Hi*c,Hi*o+qi*c),t.lineTo(qi*r+Hi*i,qi*i-Hi*r),t.lineTo(qi*a+Hi*s,qi*s-Hi*a),t.lineTo(qi*o+Hi*c,qi*c-Hi*o),t.closePath()}};function Jie(t,e){let n=null,r=vP(i);t=typeof t=="function"?t:Yt(t||xP),e=typeof e=="function"?e:Yt(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:Yt(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Yt(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function zy(){}function Fy(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function zz(t){this._context=t}zz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Fy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Fy(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Zie(t){return new zz(t)}function Fz(t){this._context=t}Fz.prototype={areaStart:zy,areaEnd:zy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Fy(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function eae(t){return new Fz(t)}function Vz(t){this._context=t}Vz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Fy(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function tae(t){return new Vz(t)}function Bz(t){this._context=t}Bz.prototype={areaStart:zy,areaEnd:zy,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function nae(t){return new Bz(t)}function Dk(t){return t<0?-1:1}function Mk(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(Dk(a)+Dk(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function Rk(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Rw(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-r)/3;t._context.bezierCurveTo(r+o,i+o*e,a-o,s-o*n,a,s)}function Vy(t){this._context=t}Vy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Rw(this,this._t0,Rk(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Rw(this,Rk(this,n=Mk(this,t,e)),n);break;default:Rw(this,this._t0,n=Mk(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Uz(t){this._context=new Wz(t)}(Uz.prototype=Object.create(Vy.prototype)).point=function(t,e){Vy.prototype.point.call(this,e,t)};function Wz(t){this._context=t}Wz.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function rae(t){return new Vy(t)}function iae(t){return new Uz(t)}function Kz(t){this._context=t}Kz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=Lk(t),i=Lk(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Lk(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function aae(t){return new Kz(t)}function Gx(t,e){this._context=t,this._t=e}Gx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function sae(t){return new Gx(t,.5)}function oae(t){return new Gx(t,0)}function lae(t){return new Gx(t,1)}function Jd(t,e){if((s=t.length)>1)for(var n=1,r,i,a=t[e[0]],s,o=a.length;n<s;++n)for(i=a,a=t[e[n]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function d2(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function cae(t,e){return t[e]}function uae(t){const e=[];return e.key=t,e}function dae(){var t=Yt([]),e=d2,n=Jd,r=cae;function i(a){var s=Array.from(t.apply(this,arguments),uae),o,c=s.length,u=-1,d;for(const f of a)for(o=0,++u;o<c;++o)(s[o][u]=[0,+r(f,s[o].key,u,a)]).data=f;for(o=0,d=yP(e(s));o<c;++o)s[d[o]].index=o;return n(s,d),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Yt(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Yt(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?d2:typeof a=="function"?a:Yt(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??Jd,i):n},i}function fae(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}Jd(t,e)}}function hae(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var s=0,o=0;s<i;++s)o+=t[s][n][1]||0;r[n][1]+=r[n][0]=-o/2}Jd(t,e)}}function pae(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var o=0,c=0,u=0;o<s;++o){for(var d=t[e[o]],f=d[r][1]||0,h=d[r-1][1]||0,p=(f-h)/2,y=0;y<o;++y){var v=t[e[y]],b=v[r][1]||0,x=v[r-1][1]||0;p+=b-x}c+=f,u+=p*f}i[r-1][1]+=i[r-1][0]=n,c&&(n-=u/c)}i[r-1][1]+=i[r-1][0]=n,Jd(t,e)}}function nm(t){"@babel/helpers - typeof";return nm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nm(t)}var mae=["type","size","sizeType"];function f2(){return f2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f2.apply(this,arguments)}function $k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$k(Object(n),!0).forEach(function(r){gae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$k(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gae(t,e,n){return e=vae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vae(t){var e=yae(t,"string");return nm(e)=="symbol"?e:e+""}function yae(t,e){if(nm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(nm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xae(t,e){if(t==null)return{};var n=bae(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function bae(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var qz={symbolCircle:xP,symbolCross:Vie,symbolDiamond:Uie,symbolSquare:Wie,symbolStar:Gie,symbolTriangle:Yie,symbolWye:Qie},wae=Math.PI/180,_ae=function(e){var n="symbol".concat(Kx(e));return qz[n]||xP},Sae=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*wae;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},jae=function(e,n){qz["symbol".concat(Kx(e))]=n},bP=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,a=i===void 0?64:i,s=e.sizeType,o=s===void 0?"area":s,c=xae(e,mae),u=zk(zk({},c),{},{type:r,size:a,sizeType:o}),d=function(){var b=_ae(r),x=Jie().type(b).size(Sae(a,o,r));return x()},f=u.className,h=u.cx,p=u.cy,y=Ke(u,!0);return h===+h&&p===+p&&a===+a?H.createElement("path",f2({},y,{className:dt("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(p,")"),d:d()})):null};bP.registerSymbol=jae;function Zd(t){"@babel/helpers - typeof";return Zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zd(t)}function h2(){return h2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h2.apply(this,arguments)}function Fk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Aae(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fk(Object(n),!0).forEach(function(r){rm(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Eae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gz(r.key),r)}}function Tae(t,e,n){return e&&Eae(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cae(t,e,n){return e=By(e),Nae(t,Hz()?Reflect.construct(e,n||[],By(t).constructor):e.apply(t,n))}function Nae(t,e){if(e&&(Zd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kae(t)}function kae(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Hz=function(){return!!t})()}function By(t){return By=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},By(t)}function Oae(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p2(t,e)}function p2(t,e){return p2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},p2(t,e)}function rm(t,e,n){return e=Gz(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gz(t){var e=Iae(t,"string");return Zd(e)=="symbol"?e:e+""}function Iae(t,e){if(Zd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Gi=32,wP=function(t){function e(){return Pae(this,e),Cae(this,e,arguments)}return Oae(e,t),Tae(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,a=Gi/2,s=Gi/6,o=Gi/3,c=r.inactive?i:r.color;if(r.type==="plainline")return H.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:Gi,y2:a,className:"recharts-legend-icon"});if(r.type==="line")return H.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(Gi,"M").concat(2*o,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(r.type==="rect")return H.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Gi/8,"h").concat(Gi,"v").concat(Gi*3/4,"h").concat(-Gi,"z"),className:"recharts-legend-icon"});if(H.isValidElement(r.legendIcon)){var u=Aae({},r);return delete u.legendIcon,H.cloneElement(r.legendIcon,u)}return H.createElement(bP,{fill:c,cx:a,cy:a,size:Gi,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,a=i.payload,s=i.iconSize,o=i.layout,c=i.formatter,u=i.inactiveColor,d={x:0,y:0,width:Gi,height:Gi},f={display:o==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(p,y){var v=p.formatter||c,b=dt(rm(rm({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",p.inactive));if(p.type==="none")return null;var x=Je(p.value)?null:p.value;Ta(!Je(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var _=p.inactive?u:p.color;return H.createElement("li",h2({className:b,style:f,key:"legend-item-".concat(y)},Gc(r.props,p,y)),H.createElement(i2,{width:s,height:s,viewBox:d,style:h},r.renderIcon(p)),H.createElement("span",{className:"recharts-legend-item-text",style:{color:_}},v?v(x,p,y):x))})}},{key:"render",value:function(){var r=this.props,i=r.payload,a=r.layout,s=r.align;if(!i||!i.length)return null;var o={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return H.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])}(k.PureComponent);rm(wP,"displayName","Legend");rm(wP,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Dae=Ox;function Mae(){this.__data__=new Dae,this.size=0}var Rae=Mae;function Lae(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var $ae=Lae;function zae(t){return this.__data__.get(t)}var Fae=zae;function Vae(t){return this.__data__.has(t)}var Bae=Vae,Uae=Ox,Wae=lP,Kae=cP,qae=200;function Hae(t,e){var n=this.__data__;if(n instanceof Uae){var r=n.__data__;if(!Wae||r.length<qae-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Kae(r)}return n.set(t,e),this.size=n.size,this}var Gae=Hae,Yae=Ox,Xae=Rae,Qae=$ae,Jae=Fae,Zae=Bae,ese=Gae;function Bf(t){var e=this.__data__=new Yae(t);this.size=e.size}Bf.prototype.clear=Xae;Bf.prototype.delete=Qae;Bf.prototype.get=Jae;Bf.prototype.has=Zae;Bf.prototype.set=ese;var Yz=Bf,tse="__lodash_hash_undefined__";function nse(t){return this.__data__.set(t,tse),this}var rse=nse;function ise(t){return this.__data__.has(t)}var ase=ise,sse=cP,ose=rse,lse=ase;function Uy(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new sse;++e<n;)this.add(t[e])}Uy.prototype.add=Uy.prototype.push=ose;Uy.prototype.has=lse;var Xz=Uy;function cse(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Qz=cse;function use(t,e){return t.has(e)}var Jz=use,dse=Xz,fse=Qz,hse=Jz,pse=1,mse=2;function gse(t,e,n,r,i,a){var s=n&pse,o=t.length,c=e.length;if(o!=c&&!(s&&c>o))return!1;var u=a.get(t),d=a.get(e);if(u&&d)return u==e&&d==t;var f=-1,h=!0,p=n&mse?new dse:void 0;for(a.set(t,e),a.set(e,t);++f<o;){var y=t[f],v=e[f];if(r)var b=s?r(v,y,f,e,t,a):r(y,v,f,t,e,a);if(b!==void 0){if(b)continue;h=!1;break}if(p){if(!fse(e,function(x,_){if(!hse(p,_)&&(y===x||i(y,x,n,r,a)))return p.push(_)})){h=!1;break}}else if(!(y===v||i(y,v,n,r,a))){h=!1;break}}return a.delete(t),a.delete(e),h}var Zz=gse,vse=vs,yse=vse.Uint8Array,xse=yse;function bse(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var wse=bse;function _se(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var _P=_se,Vk=cg,Bk=xse,Sse=oP,jse=Zz,Ase=wse,Pse=_P,Ese=1,Tse=2,Cse="[object Boolean]",Nse="[object Date]",kse="[object Error]",Ose="[object Map]",Ise="[object Number]",Dse="[object RegExp]",Mse="[object Set]",Rse="[object String]",Lse="[object Symbol]",$se="[object ArrayBuffer]",zse="[object DataView]",Uk=Vk?Vk.prototype:void 0,Lw=Uk?Uk.valueOf:void 0;function Fse(t,e,n,r,i,a,s){switch(n){case zse:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case $se:return!(t.byteLength!=e.byteLength||!a(new Bk(t),new Bk(e)));case Cse:case Nse:case Ise:return Sse(+t,+e);case kse:return t.name==e.name&&t.message==e.message;case Dse:case Rse:return t==e+"";case Ose:var o=Ase;case Mse:var c=r&Ese;if(o||(o=Pse),t.size!=e.size&&!c)return!1;var u=s.get(t);if(u)return u==e;r|=Tse,s.set(t,e);var d=jse(o(t),o(e),r,i,a,s);return s.delete(t),d;case Lse:if(Lw)return Lw.call(t)==Lw.call(e)}return!1}var Vse=Fse;function Bse(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var e6=Bse,Use=e6,Wse=xi;function Kse(t,e,n){var r=e(t);return Wse(t)?r:Use(r,n(t))}var qse=Kse;function Hse(t,e){for(var n=-1,r=t==null?0:t.length,i=0,a=[];++n<r;){var s=t[n];e(s,n,t)&&(a[i++]=s)}return a}var Gse=Hse;function Yse(){return[]}var Xse=Yse,Qse=Gse,Jse=Xse,Zse=Object.prototype,eoe=Zse.propertyIsEnumerable,Wk=Object.getOwnPropertySymbols,toe=Wk?function(t){return t==null?[]:(t=Object(t),Qse(Wk(t),function(e){return eoe.call(t,e)}))}:Jse,noe=toe;function roe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var ioe=roe,aoe=mo,soe=go,ooe="[object Arguments]";function loe(t){return soe(t)&&aoe(t)==ooe}var coe=loe,Kk=coe,uoe=go,t6=Object.prototype,doe=t6.hasOwnProperty,foe=t6.propertyIsEnumerable,hoe=Kk(function(){return arguments}())?Kk:function(t){return uoe(t)&&doe.call(t,"callee")&&!foe.call(t,"callee")},SP=hoe,Wy={exports:{}};function poe(){return!1}var moe=poe;Wy.exports;(function(t,e){var n=vs,r=moe,i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,s=a&&a.exports===i,o=s?n.Buffer:void 0,c=o?o.isBuffer:void 0,u=c||r;t.exports=u})(Wy,Wy.exports);var n6=Wy.exports,goe=9007199254740991,voe=/^(?:0|[1-9]\d*)$/;function yoe(t,e){var n=typeof t;return e=e??goe,!!e&&(n=="number"||n!="symbol"&&voe.test(t))&&t>-1&&t%1==0&&t<e}var jP=yoe,xoe=9007199254740991;function boe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=xoe}var AP=boe,woe=mo,_oe=AP,Soe=go,joe="[object Arguments]",Aoe="[object Array]",Poe="[object Boolean]",Eoe="[object Date]",Toe="[object Error]",Coe="[object Function]",Noe="[object Map]",koe="[object Number]",Ooe="[object Object]",Ioe="[object RegExp]",Doe="[object Set]",Moe="[object String]",Roe="[object WeakMap]",Loe="[object ArrayBuffer]",$oe="[object DataView]",zoe="[object Float32Array]",Foe="[object Float64Array]",Voe="[object Int8Array]",Boe="[object Int16Array]",Uoe="[object Int32Array]",Woe="[object Uint8Array]",Koe="[object Uint8ClampedArray]",qoe="[object Uint16Array]",Hoe="[object Uint32Array]",nn={};nn[zoe]=nn[Foe]=nn[Voe]=nn[Boe]=nn[Uoe]=nn[Woe]=nn[Koe]=nn[qoe]=nn[Hoe]=!0;nn[joe]=nn[Aoe]=nn[Loe]=nn[Poe]=nn[$oe]=nn[Eoe]=nn[Toe]=nn[Coe]=nn[Noe]=nn[koe]=nn[Ooe]=nn[Ioe]=nn[Doe]=nn[Moe]=nn[Roe]=!1;function Goe(t){return Soe(t)&&_oe(t.length)&&!!nn[woe(t)]}var Yoe=Goe;function Xoe(t){return function(e){return t(e)}}var r6=Xoe,Ky={exports:{}};Ky.exports;(function(t,e){var n=uz,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,s=a&&n.process,o=function(){try{var c=i&&i.require&&i.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}}();t.exports=o})(Ky,Ky.exports);var Qoe=Ky.exports,Joe=Yoe,Zoe=r6,qk=Qoe,Hk=qk&&qk.isTypedArray,ele=Hk?Zoe(Hk):Joe,i6=ele,tle=ioe,nle=SP,rle=xi,ile=n6,ale=jP,sle=i6,ole=Object.prototype,lle=ole.hasOwnProperty;function cle(t,e){var n=rle(t),r=!n&&nle(t),i=!n&&!r&&ile(t),a=!n&&!r&&!i&&sle(t),s=n||r||i||a,o=s?tle(t.length,String):[],c=o.length;for(var u in t)(e||lle.call(t,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||ale(u,c)))&&o.push(u);return o}var ule=cle,dle=Object.prototype;function fle(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||dle;return t===n}var hle=fle;function ple(t,e){return function(n){return t(e(n))}}var a6=ple,mle=a6,gle=mle(Object.keys,Object),vle=gle,yle=hle,xle=vle,ble=Object.prototype,wle=ble.hasOwnProperty;function _le(t){if(!yle(t))return xle(t);var e=[];for(var n in Object(t))wle.call(t,n)&&n!="constructor"&&e.push(n);return e}var Sle=_le,jle=sP,Ale=AP;function Ple(t){return t!=null&&Ale(t.length)&&!jle(t)}var ug=Ple,Ele=ule,Tle=Sle,Cle=ug;function Nle(t){return Cle(t)?Ele(t):Tle(t)}var Yx=Nle,kle=qse,Ole=noe,Ile=Yx;function Dle(t){return kle(t,Ile,Ole)}var Mle=Dle,Gk=Mle,Rle=1,Lle=Object.prototype,$le=Lle.hasOwnProperty;function zle(t,e,n,r,i,a){var s=n&Rle,o=Gk(t),c=o.length,u=Gk(e),d=u.length;if(c!=d&&!s)return!1;for(var f=c;f--;){var h=o[f];if(!(s?h in e:$le.call(e,h)))return!1}var p=a.get(t),y=a.get(e);if(p&&y)return p==e&&y==t;var v=!0;a.set(t,e),a.set(e,t);for(var b=s;++f<c;){h=o[f];var x=t[h],_=e[h];if(r)var S=s?r(_,x,h,e,t,a):r(x,_,h,t,e,a);if(!(S===void 0?x===_||i(x,_,n,r,a):S)){v=!1;break}b||(b=h=="constructor")}if(v&&!b){var T=t.constructor,E=e.constructor;T!=E&&"constructor"in t&&"constructor"in e&&!(typeof T=="function"&&T instanceof T&&typeof E=="function"&&E instanceof E)&&(v=!1)}return a.delete(t),a.delete(e),v}var Fle=zle,Vle=hu,Ble=vs,Ule=Vle(Ble,"DataView"),Wle=Ule,Kle=hu,qle=vs,Hle=Kle(qle,"Promise"),Gle=Hle,Yle=hu,Xle=vs,Qle=Yle(Xle,"Set"),s6=Qle,Jle=hu,Zle=vs,ece=Jle(Zle,"WeakMap"),tce=ece,m2=Wle,g2=lP,v2=Gle,y2=s6,x2=tce,o6=mo,Uf=fz,Yk="[object Map]",nce="[object Object]",Xk="[object Promise]",Qk="[object Set]",Jk="[object WeakMap]",Zk="[object DataView]",rce=Uf(m2),ice=Uf(g2),ace=Uf(v2),sce=Uf(y2),oce=Uf(x2),dc=o6;(m2&&dc(new m2(new ArrayBuffer(1)))!=Zk||g2&&dc(new g2)!=Yk||v2&&dc(v2.resolve())!=Xk||y2&&dc(new y2)!=Qk||x2&&dc(new x2)!=Jk)&&(dc=function(t){var e=o6(t),n=e==nce?t.constructor:void 0,r=n?Uf(n):"";if(r)switch(r){case rce:return Zk;case ice:return Yk;case ace:return Xk;case sce:return Qk;case oce:return Jk}return e});var lce=dc,$w=Yz,cce=Zz,uce=Vse,dce=Fle,eO=lce,tO=xi,nO=n6,fce=i6,hce=1,rO="[object Arguments]",iO="[object Array]",tv="[object Object]",pce=Object.prototype,aO=pce.hasOwnProperty;function mce(t,e,n,r,i,a){var s=tO(t),o=tO(e),c=s?iO:eO(t),u=o?iO:eO(e);c=c==rO?tv:c,u=u==rO?tv:u;var d=c==tv,f=u==tv,h=c==u;if(h&&nO(t)){if(!nO(e))return!1;s=!0,d=!1}if(h&&!d)return a||(a=new $w),s||fce(t)?cce(t,e,n,r,i,a):uce(t,e,c,n,r,i,a);if(!(n&hce)){var p=d&&aO.call(t,"__wrapped__"),y=f&&aO.call(e,"__wrapped__");if(p||y){var v=p?t.value():t,b=y?e.value():e;return a||(a=new $w),i(v,b,n,r,a)}}return h?(a||(a=new $w),dce(t,e,n,r,i,a)):!1}var gce=mce,vce=gce,sO=go;function l6(t,e,n,r,i){return t===e?!0:t==null||e==null||!sO(t)&&!sO(e)?t!==t&&e!==e:vce(t,e,n,r,l6,i)}var PP=l6,yce=Yz,xce=PP,bce=1,wce=2;function _ce(t,e,n,r){var i=n.length,a=i,s=!r;if(t==null)return!a;for(t=Object(t);i--;){var o=n[i];if(s&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<a;){o=n[i];var c=o[0],u=t[c],d=o[1];if(s&&o[2]){if(u===void 0&&!(c in t))return!1}else{var f=new yce;if(r)var h=r(u,d,c,t,e,f);if(!(h===void 0?xce(d,u,bce|wce,r,f):h))return!1}}return!0}var Sce=_ce,jce=kl;function Ace(t){return t===t&&!jce(t)}var c6=Ace,Pce=c6,Ece=Yx;function Tce(t){for(var e=Ece(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Pce(i)]}return e}var Cce=Tce;function Nce(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var u6=Nce,kce=Sce,Oce=Cce,Ice=u6;function Dce(t){var e=Oce(t);return e.length==1&&e[0][2]?Ice(e[0][0],e[0][1]):function(n){return n===t||kce(n,t,e)}}var Mce=Dce;function Rce(t,e){return t!=null&&e in Object(t)}var Lce=Rce,$ce=vz,zce=SP,Fce=xi,Vce=jP,Bce=AP,Uce=Dx;function Wce(t,e,n){e=$ce(e,t);for(var r=-1,i=e.length,a=!1;++r<i;){var s=Uce(e[r]);if(!(a=t!=null&&n(t,s)))break;t=t[s]}return a||++r!=i?a:(i=t==null?0:t.length,!!i&&Bce(i)&&Vce(s,i)&&(Fce(t)||zce(t)))}var Kce=Wce,qce=Lce,Hce=Kce;function Gce(t,e){return t!=null&&Hce(t,e,qce)}var Yce=Gce,Xce=PP,Qce=yz,Jce=Yce,Zce=aP,eue=c6,tue=u6,nue=Dx,rue=1,iue=2;function aue(t,e){return Zce(t)&&eue(e)?tue(nue(t),e):function(n){var r=Qce(n,t);return r===void 0&&r===e?Jce(n,t):Xce(e,r,rue|iue)}}var sue=aue;function oue(t){return t}var Wf=oue;function lue(t){return function(e){return e==null?void 0:e[t]}}var cue=lue,uue=fP;function due(t){return function(e){return uue(e,t)}}var fue=due,hue=cue,pue=fue,mue=aP,gue=Dx;function vue(t){return mue(t)?hue(gue(t)):pue(t)}var yue=vue,xue=Mce,bue=sue,wue=Wf,_ue=xi,Sue=yue;function jue(t){return typeof t=="function"?t:t==null?wue:typeof t=="object"?_ue(t)?bue(t[0],t[1]):xue(t):Sue(t)}var ys=jue;function Aue(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}var d6=Aue;function Pue(t){return t!==t}var Eue=Pue;function Tue(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var Cue=Tue,Nue=d6,kue=Eue,Oue=Cue;function Iue(t,e,n){return e===e?Oue(t,e,n):Nue(t,kue,n)}var Due=Iue,Mue=Due;function Rue(t,e){var n=t==null?0:t.length;return!!n&&Mue(t,e,0)>-1}var Lue=Rue;function $ue(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var zue=$ue;function Fue(){}var Vue=Fue,zw=s6,Bue=Vue,Uue=_P,Wue=1/0,Kue=zw&&1/Uue(new zw([,-0]))[1]==Wue?function(t){return new zw(t)}:Bue,que=Kue,Hue=Xz,Gue=Lue,Yue=zue,Xue=Jz,Que=que,Jue=_P,Zue=200;function ede(t,e,n){var r=-1,i=Gue,a=t.length,s=!0,o=[],c=o;if(n)s=!1,i=Yue;else if(a>=Zue){var u=e?null:Que(t);if(u)return Jue(u);s=!1,i=Xue,c=new Hue}else c=e?[]:o;e:for(;++r<a;){var d=t[r],f=e?e(d):d;if(d=n||d!==0?d:0,s&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;e&&c.push(f),o.push(d)}else i(c,f,n)||(c!==o&&c.push(f),o.push(d))}return o}var tde=ede,nde=ys,rde=tde;function ide(t,e){return t&&t.length?rde(t,nde(e)):[]}var ade=ide;const oO=Ot(ade);function f6(t,e,n){return e===!0?oO(t,n):Je(e)?oO(t,e):t}function ef(t){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ef(t)}var sde=["ref"];function lO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ks(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lO(Object(n),!0).forEach(function(r){Xx(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ode(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,p6(r.key),r)}}function lde(t,e,n){return e&&cO(t.prototype,e),n&&cO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function cde(t,e,n){return e=qy(e),ude(t,h6()?Reflect.construct(e,n||[],qy(t).constructor):e.apply(t,n))}function ude(t,e){if(e&&(ef(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dde(t)}function dde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h6=function(){return!!t})()}function qy(t){return qy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qy(t)}function fde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b2(t,e)}function b2(t,e){return b2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},b2(t,e)}function Xx(t,e,n){return e=p6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p6(t){var e=hde(t,"string");return ef(e)=="symbol"?e:e+""}function hde(t,e){if(ef(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ef(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function pde(t,e){if(t==null)return{};var n=mde(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function mde(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function gde(t){return t.value}function vde(t,e){if(H.isValidElement(t))return H.cloneElement(t,e);if(typeof t=="function")return H.createElement(t,e);e.ref;var n=pde(e,sde);return H.createElement(wP,n)}var uO=1,Ca=function(t){function e(){var n;ode(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=cde(this,e,[].concat(i)),Xx(n,"lastBoundingBox",{width:-1,height:-1}),n}return fde(e,t),lde(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>uO||Math.abs(i.height-this.lastBoundingBox.height)>uO)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ks({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,a=i.layout,s=i.align,o=i.verticalAlign,c=i.margin,u=i.chartWidth,d=i.chartHeight,f,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(s==="center"&&a==="vertical"){var p=this.getBBoxSnapshot();f={left:((u||0)-p.width)/2}}else f=s==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(o==="middle"){var y=this.getBBoxSnapshot();h={top:((d||0)-y.height)/2}}else h=o==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return ks(ks({},f),h)}},{key:"render",value:function(){var r=this,i=this.props,a=i.content,s=i.width,o=i.height,c=i.wrapperStyle,u=i.payloadUniqBy,d=i.payload,f=ks(ks({position:"absolute",width:s||"auto",height:o||"auto"},this.getDefaultPosition(c)),c);return H.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(p){r.wrapperNode=p}},vde(a,ks(ks({},this.props),{},{payload:f6(d,u,gde)})))}}],[{key:"getWithHeight",value:function(r,i){var a=ks(ks({},this.defaultProps),r.props),s=a.layout;return s==="vertical"&&je(r.props.height)?{height:r.props.height}:s==="horizontal"?{width:r.props.width||i}:null}}])}(k.PureComponent);Xx(Ca,"displayName","Legend");Xx(Ca,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var dO=cg,yde=SP,xde=xi,fO=dO?dO.isConcatSpreadable:void 0;function bde(t){return xde(t)||yde(t)||!!(fO&&t&&t[fO])}var wde=bde,_de=e6,Sde=wde;function m6(t,e,n,r,i){var a=-1,s=t.length;for(n||(n=Sde),i||(i=[]);++a<s;){var o=t[a];e>0&&n(o)?e>1?m6(o,e-1,n,r,i):_de(i,o):r||(i[i.length]=o)}return i}var g6=m6;function jde(t){return function(e,n,r){for(var i=-1,a=Object(e),s=r(e),o=s.length;o--;){var c=s[t?o:++i];if(n(a[c],c,a)===!1)break}return e}}var Ade=jde,Pde=Ade,Ede=Pde(),Tde=Ede,Cde=Tde,Nde=Yx;function kde(t,e){return t&&Cde(t,e,Nde)}var v6=kde,Ode=ug;function Ide(t,e){return function(n,r){if(n==null)return n;if(!Ode(n))return t(n,r);for(var i=n.length,a=e?i:-1,s=Object(n);(e?a--:++a<i)&&r(s[a],a,s)!==!1;);return n}}var Dde=Ide,Mde=v6,Rde=Dde,Lde=Rde(Mde),EP=Lde,$de=EP,zde=ug;function Fde(t,e){var n=-1,r=zde(t)?Array(t.length):[];return $de(t,function(i,a,s){r[++n]=e(i,a,s)}),r}var y6=Fde;function Vde(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var Bde=Vde,hO=Rf;function Ude(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,a=hO(t),s=e!==void 0,o=e===null,c=e===e,u=hO(e);if(!o&&!u&&!a&&t>e||a&&s&&c&&!o&&!u||r&&s&&c||!n&&c||!i)return 1;if(!r&&!a&&!u&&t<e||u&&n&&i&&!r&&!a||o&&n&&i||!s&&i||!c)return-1}return 0}var Wde=Ude,Kde=Wde;function qde(t,e,n){for(var r=-1,i=t.criteria,a=e.criteria,s=i.length,o=n.length;++r<s;){var c=Kde(i[r],a[r]);if(c){if(r>=o)return c;var u=n[r];return c*(u=="desc"?-1:1)}}return t.index-e.index}var Hde=qde,Fw=dP,Gde=fP,Yde=ys,Xde=y6,Qde=Bde,Jde=r6,Zde=Hde,efe=Wf,tfe=xi;function nfe(t,e,n){e.length?e=Fw(e,function(a){return tfe(a)?function(s){return Gde(s,a.length===1?a[0]:a)}:a}):e=[efe];var r=-1;e=Fw(e,Jde(Yde));var i=Xde(t,function(a,s,o){var c=Fw(e,function(u){return u(a)});return{criteria:c,index:++r,value:a}});return Qde(i,function(a,s){return Zde(a,s,n)})}var rfe=nfe;function ife(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var afe=ife,sfe=afe,pO=Math.max;function ofe(t,e,n){return e=pO(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=pO(r.length-e,0),s=Array(a);++i<a;)s[i]=r[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=r[i];return o[e]=n(s),sfe(t,this,o)}}var lfe=ofe;function cfe(t){return function(){return t}}var ufe=cfe,dfe=hu,ffe=function(){try{var t=dfe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),x6=ffe,hfe=ufe,mO=x6,pfe=Wf,mfe=mO?function(t,e){return mO(t,"toString",{configurable:!0,enumerable:!1,value:hfe(e),writable:!0})}:pfe,gfe=mfe,vfe=800,yfe=16,xfe=Date.now;function bfe(t){var e=0,n=0;return function(){var r=xfe(),i=yfe-(r-n);if(n=r,i>0){if(++e>=vfe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var wfe=bfe,_fe=gfe,Sfe=wfe,jfe=Sfe(_fe),Afe=jfe,Pfe=Wf,Efe=lfe,Tfe=Afe;function Cfe(t,e){return Tfe(Efe(t,e,Pfe),t+"")}var Nfe=Cfe,kfe=oP,Ofe=ug,Ife=jP,Dfe=kl;function Mfe(t,e,n){if(!Dfe(n))return!1;var r=typeof e;return(r=="number"?Ofe(n)&&Ife(e,n.length):r=="string"&&e in n)?kfe(n[e],t):!1}var Qx=Mfe,Rfe=g6,Lfe=rfe,$fe=Nfe,gO=Qx,zfe=$fe(function(t,e){if(t==null)return[];var n=e.length;return n>1&&gO(t,e[0],e[1])?e=[]:n>2&&gO(e[0],e[1],e[2])&&(e=[e[0]]),Lfe(t,Rfe(e,1),[])}),Ffe=zfe;const TP=Ot(Ffe);function im(t){"@babel/helpers - typeof";return im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},im(t)}function w2(){return w2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},w2.apply(this,arguments)}function Vfe(t,e){return Kfe(t)||Wfe(t,e)||Ufe(t,e)||Bfe()}function Bfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ufe(t,e){if(t){if(typeof t=="string")return vO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vO(t,e)}}function vO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Wfe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Kfe(t){if(Array.isArray(t))return t}function yO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yO(Object(n),!0).forEach(function(r){qfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qfe(t,e,n){return e=Hfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hfe(t){var e=Gfe(t,"string");return im(e)=="symbol"?e:e+""}function Gfe(t,e){if(im(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(im(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yfe(t){return Array.isArray(t)&&Qn(t[0])&&Qn(t[1])?t.join(" ~ "):t}var Xfe=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,a=i===void 0?{}:i,s=e.itemStyle,o=s===void 0?{}:s,c=e.labelStyle,u=c===void 0?{}:c,d=e.payload,f=e.formatter,h=e.itemSorter,p=e.wrapperClassName,y=e.labelClassName,v=e.label,b=e.labelFormatter,x=e.accessibilityLayer,_=x===void 0?!1:x,S=function(){if(d&&d.length){var z={padding:0,margin:0},L=(h?TP(d,h):d).map(function(te,X){if(te.type==="none")return null;var W=Vw({display:"block",paddingTop:4,paddingBottom:4,color:te.color||"#000"},o),B=te.formatter||f||Yfe,F=te.value,q=te.name,ae=F,ce=q;if(B&&ae!=null&&ce!=null){var ve=B(F,q,te,X,d);if(Array.isArray(ve)){var we=Vfe(ve,2);ae=we[0],ce=we[1]}else ae=ve}return H.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(X),style:W},Qn(ce)?H.createElement("span",{className:"recharts-tooltip-item-name"},ce):null,Qn(ce)?H.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,H.createElement("span",{className:"recharts-tooltip-item-value"},ae),H.createElement("span",{className:"recharts-tooltip-item-unit"},te.unit||""))});return H.createElement("ul",{className:"recharts-tooltip-item-list",style:z},L)}return null},T=Vw({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),E=Vw({margin:0},u),A=!it(v),j=A?v:"",P=dt("recharts-default-tooltip",p),O=dt("recharts-tooltip-label",y);A&&b&&d!==void 0&&d!==null&&(j=b(v,d));var D=_?{role:"status","aria-live":"assertive"}:{};return H.createElement("div",w2({className:P,style:T},D),H.createElement("p",{className:O,style:E},H.isValidElement(j)?j:"".concat(j)),S())};function am(t){"@babel/helpers - typeof";return am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},am(t)}function nv(t,e,n){return e=Qfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qfe(t){var e=Jfe(t,"string");return am(e)=="symbol"?e:e+""}function Jfe(t,e){if(am(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(am(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ah="recharts-tooltip-wrapper",Zfe={visibility:"hidden"};function ehe(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return dt(Ah,nv(nv(nv(nv({},"".concat(Ah,"-right"),je(n)&&e&&je(e.x)&&n>=e.x),"".concat(Ah,"-left"),je(n)&&e&&je(e.x)&&n<e.x),"".concat(Ah,"-bottom"),je(r)&&e&&je(e.y)&&r>=e.y),"".concat(Ah,"-top"),je(r)&&e&&je(e.y)&&r<e.y))}function xO(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,a=t.position,s=t.reverseDirection,o=t.tooltipDimension,c=t.viewBox,u=t.viewBoxDimension;if(a&&je(a[r]))return a[r];var d=n[r]-o-i,f=n[r]+i;if(e[r])return s[r]?d:f;if(s[r]){var h=d,p=c[r];return h<p?Math.max(f,c[r]):Math.max(d,c[r])}var y=f+o,v=c[r]+u;return y>v?Math.max(d,c[r]):Math.max(f,c[r])}function the(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function nhe(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,a=t.reverseDirection,s=t.tooltipBox,o=t.useTranslate3d,c=t.viewBox,u,d,f;return s.height>0&&s.width>0&&n?(d=xO({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),f=xO({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),u=the({translateX:d,translateY:f,useTranslate3d:o})):u=Zfe,{cssProperties:u,cssClasses:ehe({translateX:d,translateY:f,coordinate:n})}}function tf(t){"@babel/helpers - typeof";return tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tf(t)}function bO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bO(Object(n),!0).forEach(function(r){S2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ihe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,w6(r.key),r)}}function ahe(t,e,n){return e&&ihe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function she(t,e,n){return e=Hy(e),ohe(t,b6()?Reflect.construct(e,n||[],Hy(t).constructor):e.apply(t,n))}function ohe(t,e){if(e&&(tf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lhe(t)}function lhe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(b6=function(){return!!t})()}function Hy(t){return Hy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Hy(t)}function che(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_2(t,e)}function _2(t,e){return _2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_2(t,e)}function S2(t,e,n){return e=w6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w6(t){var e=uhe(t,"string");return tf(e)=="symbol"?e:e+""}function uhe(t,e){if(tf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(tf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var _O=1,dhe=function(t){function e(){var n;rhe(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=she(this,e,[].concat(i)),S2(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),S2(n,"handleKeyDown",function(s){if(s.key==="Escape"){var o,c,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&o!==void 0?o:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return che(e,t),ahe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>_O||Math.abs(r.height-this.state.lastBoundingBox.height)>_O)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,c=i.animationEasing,u=i.children,d=i.coordinate,f=i.hasPayload,h=i.isAnimationActive,p=i.offset,y=i.position,v=i.reverseDirection,b=i.useTranslate3d,x=i.viewBox,_=i.wrapperStyle,S=nhe({allowEscapeViewBox:s,coordinate:d,offsetTopLeft:p,position:y,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:b,viewBox:x}),T=S.cssClasses,E=S.cssProperties,A=wO(wO({transition:h&&a?"transform ".concat(o,"ms ").concat(c):void 0},E),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&f?"visible":"hidden",position:"absolute",top:0,left:0},_);return H.createElement("div",{tabIndex:-1,className:T,style:A,ref:function(P){r.wrapperNode=P}},u)}}])}(k.PureComponent),fhe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ol={isSsr:fhe()};function nf(t){"@babel/helpers - typeof";return nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nf(t)}function SO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SO(Object(n),!0).forEach(function(r){CP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function phe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,S6(r.key),r)}}function mhe(t,e,n){return e&&phe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ghe(t,e,n){return e=Gy(e),vhe(t,_6()?Reflect.construct(e,n||[],Gy(t).constructor):e.apply(t,n))}function vhe(t,e){if(e&&(nf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yhe(t)}function yhe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _6(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_6=function(){return!!t})()}function Gy(t){return Gy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Gy(t)}function xhe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j2(t,e)}function j2(t,e){return j2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},j2(t,e)}function CP(t,e,n){return e=S6(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S6(t){var e=bhe(t,"string");return nf(e)=="symbol"?e:e+""}function bhe(t,e){if(nf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(nf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function whe(t){return t.dataKey}function _he(t,e){return H.isValidElement(t)?H.cloneElement(t,e):typeof t=="function"?H.createElement(t,e):H.createElement(Xfe,e)}var Mt=function(t){function e(){return hhe(this,e),ghe(this,e,arguments)}return xhe(e,t),mhe(e,[{key:"render",value:function(){var r=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,o=i.animationDuration,c=i.animationEasing,u=i.content,d=i.coordinate,f=i.filterNull,h=i.isAnimationActive,p=i.offset,y=i.payload,v=i.payloadUniqBy,b=i.position,x=i.reverseDirection,_=i.useTranslate3d,S=i.viewBox,T=i.wrapperStyle,E=y??[];f&&E.length&&(E=f6(y.filter(function(j){return j.value!=null&&(j.hide!==!0||r.props.includeHidden)}),v,whe));var A=E.length>0;return H.createElement(dhe,{allowEscapeViewBox:s,animationDuration:o,animationEasing:c,isAnimationActive:h,active:a,coordinate:d,hasPayload:A,offset:p,position:b,reverseDirection:x,useTranslate3d:_,viewBox:S,wrapperStyle:T},_he(u,jO(jO({},this.props),{},{payload:E})))}}])}(k.PureComponent);CP(Mt,"displayName","Tooltip");CP(Mt,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ol.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var She=vs,jhe=function(){return She.Date.now()},Ahe=jhe,Phe=/\s/;function Ehe(t){for(var e=t.length;e--&&Phe.test(t.charAt(e)););return e}var The=Ehe,Che=The,Nhe=/^\s+/;function khe(t){return t&&t.slice(0,Che(t)+1).replace(Nhe,"")}var Ohe=khe,Ihe=Ohe,AO=kl,Dhe=Rf,PO=NaN,Mhe=/^[-+]0x[0-9a-f]+$/i,Rhe=/^0b[01]+$/i,Lhe=/^0o[0-7]+$/i,$he=parseInt;function zhe(t){if(typeof t=="number")return t;if(Dhe(t))return PO;if(AO(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=AO(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Ihe(t);var n=Rhe.test(t);return n||Lhe.test(t)?$he(t.slice(2),n?2:8):Mhe.test(t)?PO:+t}var j6=zhe,Fhe=kl,Bw=Ahe,EO=j6,Vhe="Expected a function",Bhe=Math.max,Uhe=Math.min;function Whe(t,e,n){var r,i,a,s,o,c,u=0,d=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(Vhe);e=EO(e)||0,Fhe(n)&&(d=!!n.leading,f="maxWait"in n,a=f?Bhe(EO(n.maxWait)||0,e):a,h="trailing"in n?!!n.trailing:h);function p(A){var j=r,P=i;return r=i=void 0,u=A,s=t.apply(P,j),s}function y(A){return u=A,o=setTimeout(x,e),d?p(A):s}function v(A){var j=A-c,P=A-u,O=e-j;return f?Uhe(O,a-P):O}function b(A){var j=A-c,P=A-u;return c===void 0||j>=e||j<0||f&&P>=a}function x(){var A=Bw();if(b(A))return _(A);o=setTimeout(x,v(A))}function _(A){return o=void 0,h&&r?p(A):(r=i=void 0,s)}function S(){o!==void 0&&clearTimeout(o),u=0,r=c=i=o=void 0}function T(){return o===void 0?s:_(Bw())}function E(){var A=Bw(),j=b(A);if(r=arguments,i=this,c=A,j){if(o===void 0)return y(c);if(f)return clearTimeout(o),o=setTimeout(x,e),p(c)}return o===void 0&&(o=setTimeout(x,e)),s}return E.cancel=S,E.flush=T,E}var Khe=Whe,qhe=Khe,Hhe=kl,Ghe="Expected a function";function Yhe(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(Ghe);return Hhe(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),qhe(t,e,{leading:r,maxWait:e,trailing:i})}var Xhe=Yhe;const A6=Ot(Xhe);function sm(t){"@babel/helpers - typeof";return sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sm(t)}function TO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TO(Object(n),!0).forEach(function(r){Qhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qhe(t,e,n){return e=Jhe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jhe(t){var e=Zhe(t,"string");return sm(e)=="symbol"?e:e+""}function Zhe(t,e){if(sm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(sm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function epe(t,e){return ipe(t)||rpe(t,e)||npe(t,e)||tpe()}function tpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function npe(t,e){if(t){if(typeof t=="string")return CO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CO(t,e)}}function CO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rpe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function ipe(t){if(Array.isArray(t))return t}var zn=k.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,a=t.width,s=a===void 0?"100%":a,o=t.height,c=o===void 0?"100%":o,u=t.minWidth,d=u===void 0?0:u,f=t.minHeight,h=t.maxHeight,p=t.children,y=t.debounce,v=y===void 0?0:y,b=t.id,x=t.className,_=t.onResize,S=t.style,T=S===void 0?{}:S,E=k.useRef(null),A=k.useRef();A.current=_,k.useImperativeHandle(e,function(){return Object.defineProperty(E.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),E.current},configurable:!0})});var j=k.useState({containerWidth:i.width,containerHeight:i.height}),P=epe(j,2),O=P[0],D=P[1],M=k.useCallback(function(L,te){D(function(X){var W=Math.round(L),B=Math.round(te);return X.containerWidth===W&&X.containerHeight===B?X:{containerWidth:W,containerHeight:B}})},[]);k.useEffect(function(){var L=function(q){var ae,ce=q[0].contentRect,ve=ce.width,we=ce.height;M(ve,we),(ae=A.current)===null||ae===void 0||ae.call(A,ve,we)};v>0&&(L=A6(L,v,{trailing:!0,leading:!1}));var te=new ResizeObserver(L),X=E.current.getBoundingClientRect(),W=X.width,B=X.height;return M(W,B),te.observe(E.current),function(){te.disconnect()}},[M,v]);var z=k.useMemo(function(){var L=O.containerWidth,te=O.containerHeight;if(L<0||te<0)return null;Ta(wc(s)||wc(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,c),Ta(!n||n>0,"The aspect(%s) must be greater than zero.",n);var X=wc(s)?L:s,W=wc(c)?te:c;n&&n>0&&(X?W=X/n:W&&(X=W*n),h&&W>h&&(W=h)),Ta(X>0||W>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,X,W,s,c,d,f,n);var B=!Array.isArray(p)&&Hs(p.type).endsWith("Chart");return H.Children.map(p,function(F){return H.isValidElement(F)?k.cloneElement(F,rv({width:X,height:W},B?{style:rv({height:"100%",width:"100%",maxHeight:W,maxWidth:X},F.props.style)}:{})):F})},[n,p,c,h,f,d,O,s]);return H.createElement("div",{id:b?"".concat(b):void 0,className:dt("recharts-responsive-container",x),style:rv(rv({},T),{},{width:s,height:c,minWidth:d,minHeight:f,maxHeight:h}),ref:E},z)}),Oa=function(e){return null};Oa.displayName="Cell";function om(t){"@babel/helpers - typeof";return om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},om(t)}function NO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function A2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NO(Object(n),!0).forEach(function(r){ape(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ape(t,e,n){return e=spe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function spe(t){var e=ope(t,"string");return om(e)=="symbol"?e:e+""}function ope(t,e){if(om(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(om(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $u={widthCache:{},cacheCount:0},lpe=2e3,cpe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},kO="recharts_measurement_span";function upe(t){var e=A2({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var pp=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Ol.isSsr)return{width:0,height:0};var r=upe(n),i=JSON.stringify({text:e,copyStyle:r});if($u.widthCache[i])return $u.widthCache[i];try{var a=document.getElementById(kO);a||(a=document.createElement("span"),a.setAttribute("id",kO),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=A2(A2({},cpe),r);Object.assign(a.style,s),a.textContent="".concat(e);var o=a.getBoundingClientRect(),c={width:o.width,height:o.height};return $u.widthCache[i]=c,++$u.cacheCount>lpe&&($u.cacheCount=0,$u.widthCache={}),c}catch{return{width:0,height:0}}},dpe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function lm(t){"@babel/helpers - typeof";return lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lm(t)}function Yy(t,e){return mpe(t)||ppe(t,e)||hpe(t,e)||fpe()}function fpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hpe(t,e){if(t){if(typeof t=="string")return OO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OO(t,e)}}function OO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ppe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function mpe(t){if(Array.isArray(t))return t}function gpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ype(r.key),r)}}function vpe(t,e,n){return e&&IO(t.prototype,e),n&&IO(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ype(t){var e=xpe(t,"string");return lm(e)=="symbol"?e:e+""}function xpe(t,e){if(lm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(lm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var DO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,MO=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,bpe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,wpe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,P6={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},_pe=Object.keys(P6),fd="NaN";function Spe(t,e){return t*P6[e]}var iv=function(){function t(e,n){gpe(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!bpe.test(n)&&(this.num=NaN,this.unit=""),_pe.includes(n)&&(this.num=Spe(e,n),this.unit="px")}return vpe(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=wpe.exec(n))!==null&&r!==void 0?r:[],a=Yy(i,3),s=a[1],o=a[2];return new t(parseFloat(s),o??"")}}])}();function E6(t){if(t.includes(fd))return fd;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=DO.exec(e))!==null&&n!==void 0?n:[],i=Yy(r,4),a=i[1],s=i[2],o=i[3],c=iv.parse(a??""),u=iv.parse(o??""),d=s==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return fd;e=e.replace(DO,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,h=(f=MO.exec(e))!==null&&f!==void 0?f:[],p=Yy(h,4),y=p[1],v=p[2],b=p[3],x=iv.parse(y??""),_=iv.parse(b??""),S=v==="+"?x.add(_):x.subtract(_);if(S.isNaN())return fd;e=e.replace(MO,S.toString())}return e}var RO=/\(([^()]*)\)/;function jpe(t){for(var e=t;e.includes("(");){var n=RO.exec(e),r=Yy(n,2),i=r[1];e=e.replace(RO,E6(i))}return e}function Ape(t){var e=t.replace(/\s+/g,"");return e=jpe(e),e=E6(e),e}function Ppe(t){try{return Ape(t)}catch{return fd}}function Uw(t){var e=Ppe(t.slice(5,-1));return e===fd?"":e}var Epe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Tpe=["dx","dy","angle","className","breakAll"];function P2(){return P2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},P2.apply(this,arguments)}function LO(t,e){if(t==null)return{};var n=Cpe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Cpe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function $O(t,e){return Ipe(t)||Ope(t,e)||kpe(t,e)||Npe()}function Npe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kpe(t,e){if(t){if(typeof t=="string")return zO(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zO(t,e)}}function zO(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ope(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Ipe(t){if(Array.isArray(t))return t}var T6=/[ \f\n\r\t\v\u2028\u2029]+/,C6=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var a=[];it(n)||(r?a=n.toString().split(""):a=n.toString().split(T6));var s=a.map(function(c){return{word:c,width:pp(c,i).width}}),o=r?0:pp(" ",i).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}},Dpe=function(e,n,r,i,a){var s=e.maxLines,o=e.children,c=e.style,u=e.breakAll,d=je(s),f=o,h=function(){var X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return X.reduce(function(W,B){var F=B.word,q=B.width,ae=W[W.length-1];if(ae&&(i==null||a||ae.width+q+r<Number(i)))ae.words.push(F),ae.width+=q+r;else{var ce={words:[F],width:q};W.push(ce)}return W},[])},p=h(n),y=function(X){return X.reduce(function(W,B){return W.width>B.width?W:B})};if(!d)return p;for(var v="…",b=function(X){var W=f.slice(0,X),B=C6({breakAll:u,style:c,children:W+v}).wordsWithComputedWidth,F=h(B),q=F.length>s||y(F).width>Number(i);return[q,F]},x=0,_=f.length-1,S=0,T;x<=_&&S<=f.length-1;){var E=Math.floor((x+_)/2),A=E-1,j=b(A),P=$O(j,2),O=P[0],D=P[1],M=b(E),z=$O(M,1),L=z[0];if(!O&&!L&&(x=E+1),O&&L&&(_=E-1),!O&&L){T=D;break}S++}return T||p},FO=function(e){var n=it(e)?[]:e.toString().split(T6);return[{words:n}]},Mpe=function(e){var n=e.width,r=e.scaleToFit,i=e.children,a=e.style,s=e.breakAll,o=e.maxLines;if((n||r)&&!Ol.isSsr){var c,u,d=C6({breakAll:s,children:i,style:a});if(d){var f=d.wordsWithComputedWidth,h=d.spaceWidth;c=f,u=h}else return FO(i);return Dpe({breakAll:s,children:i,maxLines:o,style:a},c,u,n,r)}return FO(i)},VO="#808080",Yc=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,s=e.lineHeight,o=s===void 0?"1em":s,c=e.capHeight,u=c===void 0?"0.71em":c,d=e.scaleToFit,f=d===void 0?!1:d,h=e.textAnchor,p=h===void 0?"start":h,y=e.verticalAnchor,v=y===void 0?"end":y,b=e.fill,x=b===void 0?VO:b,_=LO(e,Epe),S=k.useMemo(function(){return Mpe({breakAll:_.breakAll,children:_.children,maxLines:_.maxLines,scaleToFit:f,style:_.style,width:_.width})},[_.breakAll,_.children,_.maxLines,f,_.style,_.width]),T=_.dx,E=_.dy,A=_.angle,j=_.className,P=_.breakAll,O=LO(_,Tpe);if(!Qn(r)||!Qn(a))return null;var D=r+(je(T)?T:0),M=a+(je(E)?E:0),z;switch(v){case"start":z=Uw("calc(".concat(u,")"));break;case"middle":z=Uw("calc(".concat((S.length-1)/2," * -").concat(o," + (").concat(u," / 2))"));break;default:z=Uw("calc(".concat(S.length-1," * -").concat(o,")"));break}var L=[];if(f){var te=S[0].width,X=_.width;L.push("scale(".concat((je(X)?X/te:1)/te,")"))}return A&&L.push("rotate(".concat(A,", ").concat(D,", ").concat(M,")")),L.length&&(O.transform=L.join(" ")),H.createElement("text",P2({},Ke(O,!0),{x:D,y:M,className:dt("recharts-text",j),textAnchor:p,fill:x.includes("url")?VO:x}),S.map(function(W,B){var F=W.words.join(P?"":" ");return H.createElement("tspan",{x:D,dy:B===0?z:o,key:"".concat(F,"-").concat(B)},F)}))};function hl(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Rpe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function NP(t){let e,n,r;t.length!==2?(e=hl,n=(o,c)=>hl(t(o),c),r=(o,c)=>t(o)-c):(e=t===hl||t===Rpe?t:Lpe,n=t,r=t);function i(o,c,u=0,d=o.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;n(o[f],c)<0?u=f+1:d=f}while(u<d)}return u}function a(o,c,u=0,d=o.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;n(o[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function s(o,c,u=0,d=o.length){const f=i(o,c,u,d-1);return f>u&&r(o[f-1],c)>-r(o[f],c)?f-1:f}return{left:i,center:s,right:a}}function Lpe(){return 0}function N6(t){return t===null?NaN:+t}function*$pe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const zpe=NP(hl),dg=zpe.right;NP(N6).center;class BO extends Map{constructor(e,n=Bpe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(UO(this,e))}has(e){return super.has(UO(this,e))}set(e,n){return super.set(Fpe(this,e),n)}delete(e){return super.delete(Vpe(this,e))}}function UO({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Fpe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Vpe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Bpe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Upe(t=hl){if(t===hl)return k6;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function k6(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Wpe=Math.sqrt(50),Kpe=Math.sqrt(10),qpe=Math.sqrt(2);function Xy(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=Wpe?10:a>=Kpe?5:a>=qpe?2:1;let o,c,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(t*u),c=Math.round(e*u),o/u<t&&++o,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*s,o=Math.round(t/u),c=Math.round(e/u),o*u<t&&++o,c*u>e&&--c),c<o&&.5<=n&&n<2?Xy(t,e,n*2):[o,c,u]}function E2(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?Xy(e,t,n):Xy(t,e,n);if(!(a>=i))return[];const o=a-i+1,c=new Array(o);if(r)if(s<0)for(let u=0;u<o;++u)c[u]=(a-u)/-s;else for(let u=0;u<o;++u)c[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)c[u]=(i+u)/-s;else for(let u=0;u<o;++u)c[u]=(i+u)*s;return c}function T2(t,e,n){return e=+e,t=+t,n=+n,Xy(t,e,n)[2]}function C2(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?T2(e,t,n):T2(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function WO(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function KO(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function O6(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?k6:Upe(i);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),p=Math.max(n,Math.floor(e-u*f/c+h)),y=Math.min(r,Math.floor(e+(c-u)*f/c+h));O6(t,e,p,y,i)}const a=t[e];let s=n,o=r;for(Ph(t,n,e),i(t[r],a)>0&&Ph(t,n,r);s<o;){for(Ph(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[n],a)===0?Ph(t,n,o):(++o,Ph(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function Ph(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Hpe(t,e,n){if(t=Float64Array.from($pe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return KO(t);if(e>=1)return WO(t);var r,i=(r-1)*e,a=Math.floor(i),s=WO(O6(t,a).subarray(0,a+1)),o=KO(t.subarray(a+1));return s+(o-s)*(i-a)}}function Gpe(t,e,n=N6){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t),o=+n(t[a+1],a+1,t);return s+(o-s)*(i-a)}}function Ype(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function la(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function vo(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const N2=Symbol("implicit");function kP(){var t=new BO,e=[],n=[],r=N2;function i(a){let s=t.get(a);if(s===void 0){if(r!==N2)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new BO;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return kP(e,n).unknown(r)},la.apply(i,arguments),i}function cm(){var t=kP().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,c=0,u=0,d=.5;delete t.unknown;function f(){var h=e().length,p=i<r,y=p?i:r,v=p?r:i;a=(v-y)/Math.max(1,h-c+u*2),o&&(a=Math.floor(a)),y+=(v-y-a*(h-c))*d,s=a*(1-c),o&&(y=Math.round(y),s=Math.round(s));var b=Ype(h).map(function(x){return y+a*x});return n(p?b.reverse():b)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,o=!0,f()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(h){return arguments.length?(o=!!h,f()):o},t.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},t.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},t.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},t.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},t.copy=function(){return cm(e(),[r,i]).round(o).paddingInner(c).paddingOuter(u).align(d)},la.apply(f(),arguments)}function I6(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return I6(e())},t}function mp(){return I6(cm.apply(null,arguments).paddingInner(1))}function OP(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function D6(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function fg(){}var um=.7,Qy=1/um,Ed="\\s*([+-]?\\d+)\\s*",dm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",us="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Xpe=/^#([0-9a-f]{3,8})$/,Qpe=new RegExp(`^rgb\\(${Ed},${Ed},${Ed}\\)$`),Jpe=new RegExp(`^rgb\\(${us},${us},${us}\\)$`),Zpe=new RegExp(`^rgba\\(${Ed},${Ed},${Ed},${dm}\\)$`),eme=new RegExp(`^rgba\\(${us},${us},${us},${dm}\\)$`),tme=new RegExp(`^hsl\\(${dm},${us},${us}\\)$`),nme=new RegExp(`^hsla\\(${dm},${us},${us},${dm}\\)$`),qO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};OP(fg,fm,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:HO,formatHex:HO,formatHex8:rme,formatHsl:ime,formatRgb:GO,toString:GO});function HO(){return this.rgb().formatHex()}function rme(){return this.rgb().formatHex8()}function ime(){return M6(this).formatHsl()}function GO(){return this.rgb().formatRgb()}function fm(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Xpe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?YO(e):n===3?new di(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?av(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?av(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Qpe.exec(t))?new di(e[1],e[2],e[3],1):(e=Jpe.exec(t))?new di(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Zpe.exec(t))?av(e[1],e[2],e[3],e[4]):(e=eme.exec(t))?av(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=tme.exec(t))?JO(e[1],e[2]/100,e[3]/100,1):(e=nme.exec(t))?JO(e[1],e[2]/100,e[3]/100,e[4]):qO.hasOwnProperty(t)?YO(qO[t]):t==="transparent"?new di(NaN,NaN,NaN,0):null}function YO(t){return new di(t>>16&255,t>>8&255,t&255,1)}function av(t,e,n,r){return r<=0&&(t=e=n=NaN),new di(t,e,n,r)}function ame(t){return t instanceof fg||(t=fm(t)),t?(t=t.rgb(),new di(t.r,t.g,t.b,t.opacity)):new di}function k2(t,e,n,r){return arguments.length===1?ame(t):new di(t,e,n,r??1)}function di(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}OP(di,k2,D6(fg,{brighter(t){return t=t==null?Qy:Math.pow(Qy,t),new di(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?um:Math.pow(um,t),new di(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new di(Oc(this.r),Oc(this.g),Oc(this.b),Jy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:XO,formatHex:XO,formatHex8:sme,formatRgb:QO,toString:QO}));function XO(){return`#${_c(this.r)}${_c(this.g)}${_c(this.b)}`}function sme(){return`#${_c(this.r)}${_c(this.g)}${_c(this.b)}${_c((isNaN(this.opacity)?1:this.opacity)*255)}`}function QO(){const t=Jy(this.opacity);return`${t===1?"rgb(":"rgba("}${Oc(this.r)}, ${Oc(this.g)}, ${Oc(this.b)}${t===1?")":`, ${t})`}`}function Jy(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Oc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function _c(t){return t=Oc(t),(t<16?"0":"")+t.toString(16)}function JO(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Aa(t,e,n,r)}function M6(t){if(t instanceof Aa)return new Aa(t.h,t.s,t.l,t.opacity);if(t instanceof fg||(t=fm(t)),!t)return new Aa;if(t instanceof Aa)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,c=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new Aa(s,o,c,t.opacity)}function ome(t,e,n,r){return arguments.length===1?M6(t):new Aa(t,e,n,r??1)}function Aa(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}OP(Aa,ome,D6(fg,{brighter(t){return t=t==null?Qy:Math.pow(Qy,t),new Aa(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?um:Math.pow(um,t),new Aa(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new di(Ww(t>=240?t-240:t+120,i,r),Ww(t,i,r),Ww(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Aa(ZO(this.h),sv(this.s),sv(this.l),Jy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Jy(this.opacity);return`${t===1?"hsl(":"hsla("}${ZO(this.h)}, ${sv(this.s)*100}%, ${sv(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ZO(t){return t=(t||0)%360,t<0?t+360:t}function sv(t){return Math.max(0,Math.min(1,t||0))}function Ww(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const IP=t=>()=>t;function lme(t,e){return function(n){return t+n*e}}function cme(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function ume(t){return(t=+t)==1?R6:function(e,n){return n-e?cme(e,n,t):IP(isNaN(e)?n:e)}}function R6(t,e){var n=e-t;return n?lme(t,n):IP(isNaN(t)?e:t)}const eI=function t(e){var n=ume(e);function r(i,a){var s=n((i=k2(i)).r,(a=k2(a)).r),o=n(i.g,a.g),c=n(i.b,a.b),u=R6(i.opacity,a.opacity);return function(d){return i.r=s(d),i.g=o(d),i.b=c(d),i.opacity=u(d),i+""}}return r.gamma=t,r}(1);function dme(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function fme(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function hme(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=Kf(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function pme(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Zy(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function mme(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Kf(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var O2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Kw=new RegExp(O2.source,"g");function gme(t){return function(){return t}}function vme(t){return function(e){return t(e)+""}}function yme(t,e){var n=O2.lastIndex=Kw.lastIndex=0,r,i,a,s=-1,o=[],c=[];for(t=t+"",e=e+"";(r=O2.exec(t))&&(i=Kw.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:Zy(r,i)})),n=Kw.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?vme(c[0].x):gme(e):(e=c.length,function(u){for(var d=0,f;d<e;++d)o[(f=c[d]).i]=f.x(u);return o.join("")})}function Kf(t,e){var n=typeof e,r;return e==null||n==="boolean"?IP(e):(n==="number"?Zy:n==="string"?(r=fm(e))?(e=r,eI):yme:e instanceof fm?eI:e instanceof Date?pme:fme(e)?dme:Array.isArray(e)?hme:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?mme:Zy)(t,e)}function DP(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function xme(t,e){e===void 0&&(e=t,t=Kf);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(s){var o=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[o](s-o)}}function bme(t){return function(){return t}}function e0(t){return+t}var tI=[0,1];function Hr(t){return t}function I2(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:bme(isNaN(e)?NaN:.5)}function wme(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function _me(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=I2(i,r),a=n(s,a)):(r=I2(r,i),a=n(a,s)),function(o){return a(r(o))}}function Sme(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=I2(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var c=dg(t,o,1,r)-1;return a[c](i[c](o))}}function hg(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Jx(){var t=tI,e=tI,n=Kf,r,i,a,s=Hr,o,c,u;function d(){var h=Math.min(t.length,e.length);return s!==Hr&&(s=wme(t[0],t[h-1])),o=h>2?Sme:_me,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?a:(c||(c=o(t.map(r),e,n)))(r(s(h)))}return f.invert=function(h){return s(i((u||(u=o(e,t.map(r),Zy)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,e0),d()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),d()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=DP,d()},f.clamp=function(h){return arguments.length?(s=h?!0:Hr,d()):s!==Hr},f.interpolate=function(h){return arguments.length?(n=h,d()):n},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,p){return r=h,i=p,d()}}function MP(){return Jx()(Hr,Hr)}function jme(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function t0(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function rf(t){return t=t0(Math.abs(t)),t?t[1]:NaN}function Ame(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],c=0;i>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),a.push(n.substring(i-=o,i+o)),!((c+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function Pme(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Eme=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function hm(t){if(!(e=Eme.exec(t)))throw new Error("invalid format: "+t);var e;return new RP({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}hm.prototype=RP.prototype;function RP(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}RP.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Tme(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var L6;function Cme(t,e){var n=t0(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(L6=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+t0(t,Math.max(0,e+a-1))[0]}function nI(t,e){var n=t0(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const rI={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:jme,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>nI(t*100,e),r:nI,s:Cme,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function iI(t){return t}var aI=Array.prototype.map,sI=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Nme(t){var e=t.grouping===void 0||t.thousands===void 0?iI:Ame(aI.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?iI:Pme(aI.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(f){f=hm(f);var h=f.fill,p=f.align,y=f.sign,v=f.symbol,b=f.zero,x=f.width,_=f.comma,S=f.precision,T=f.trim,E=f.type;E==="n"?(_=!0,E="g"):rI[E]||(S===void 0&&(S=12),T=!0,E="g"),(b||h==="0"&&p==="=")&&(b=!0,h="0",p="=");var A=v==="$"?n:v==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",j=v==="$"?r:/[%p]/.test(E)?s:"",P=rI[E],O=/[defgprs%]/.test(E);S=S===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function D(M){var z=A,L=j,te,X,W;if(E==="c")L=P(M)+L,M="";else{M=+M;var B=M<0||1/M<0;if(M=isNaN(M)?c:P(Math.abs(M),S),T&&(M=Tme(M)),B&&+M==0&&y!=="+"&&(B=!1),z=(B?y==="("?y:o:y==="-"||y==="("?"":y)+z,L=(E==="s"?sI[8+L6/3]:"")+L+(B&&y==="("?")":""),O){for(te=-1,X=M.length;++te<X;)if(W=M.charCodeAt(te),48>W||W>57){L=(W===46?i+M.slice(te+1):M.slice(te))+L,M=M.slice(0,te);break}}}_&&!b&&(M=e(M,1/0));var F=z.length+M.length+L.length,q=F<x?new Array(x-F+1).join(h):"";switch(_&&b&&(M=e(q+M,q.length?x-L.length:1/0),q=""),p){case"<":M=z+M+L+q;break;case"=":M=z+q+M+L;break;case"^":M=q.slice(0,F=q.length>>1)+z+M+L+q.slice(F);break;default:M=q+z+M+L;break}return a(M)}return D.toString=function(){return f+""},D}function d(f,h){var p=u((f=hm(f),f.type="f",f)),y=Math.max(-8,Math.min(8,Math.floor(rf(h)/3)))*3,v=Math.pow(10,-y),b=sI[8+y/3];return function(x){return p(v*x)+b}}return{format:u,formatPrefix:d}}var ov,LP,$6;kme({thousands:",",grouping:[3],currency:["$",""]});function kme(t){return ov=Nme(t),LP=ov.format,$6=ov.formatPrefix,ov}function Ome(t){return Math.max(0,-rf(Math.abs(t)))}function Ime(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(rf(e)/3)))*3-rf(Math.abs(t)))}function Dme(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,rf(e)-rf(t))+1}function z6(t,e,n,r){var i=C2(t,e,n),a;switch(r=hm(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=Ime(i,s))&&(r.precision=a),$6(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Dme(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Ome(i))&&(r.precision=a-(r.type==="%")*2);break}}return LP(r)}function Il(t){var e=t.domain;return t.ticks=function(n){var r=e();return E2(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return z6(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],c,u,d=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);d-- >0;){if(u=T2(s,o,n),u===c)return r[i]=s,r[a]=o,e(r);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;c=u}return t},t}function n0(){var t=MP();return t.copy=function(){return hg(t,n0())},la.apply(t,arguments),Il(t)}function F6(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,e0),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return F6(t).unknown(e)},t=arguments.length?Array.from(t,e0):[0,1],Il(n)}function V6(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function oI(t){return Math.log(t)}function lI(t){return Math.exp(t)}function Mme(t){return-Math.log(-t)}function Rme(t){return-Math.exp(-t)}function Lme(t){return isFinite(t)?+("1e"+t):t<0?0:t}function $me(t){return t===10?Lme:t===Math.E?Math.exp:e=>Math.pow(t,e)}function zme(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function cI(t){return(e,n)=>-t(-e,n)}function $P(t){const e=t(oI,lI),n=e.domain;let r=10,i,a;function s(){return i=zme(r),a=$me(r),n()[0]<0?(i=cI(i),a=cI(a),t(Mme,Rme)):t(oI,lI),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=o=>{const c=n();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=i(u),p=i(d),y,v;const b=o==null?10:+o;let x=[];if(!(r%1)&&p-h<b){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(y=1;y<r;++y)if(v=h<0?y/a(-h):y*a(h),!(v<u)){if(v>d)break;x.push(v)}}else for(;h<=p;++h)for(y=r-1;y>=1;--y)if(v=h>0?y/a(-h):y*a(h),!(v<u)){if(v>d)break;x.push(v)}x.length*2<b&&(x=E2(u,d,b))}else x=E2(h,p,Math.min(p-h,b)).map(a);return f?x.reverse():x},e.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=hm(c)).precision==null&&(c.trim=!0),c=LP(c)),o===1/0)return c;const u=Math.max(1,r*o/e.ticks().length);return d=>{let f=d/a(Math.round(i(d)));return f*r<r-.5&&(f*=r),f<=u?c(d):""}},e.nice=()=>n(V6(n(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function B6(){const t=$P(Jx()).domain([1,10]);return t.copy=()=>hg(t,B6()).base(t.base()),la.apply(t,arguments),t}function uI(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function dI(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function zP(t){var e=1,n=t(uI(e),dI(e));return n.constant=function(r){return arguments.length?t(uI(e=+r),dI(e)):e},Il(n)}function U6(){var t=zP(Jx());return t.copy=function(){return hg(t,U6()).constant(t.constant())},la.apply(t,arguments)}function fI(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Fme(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Vme(t){return t<0?-t*t:t*t}function FP(t){var e=t(Hr,Hr),n=1;function r(){return n===1?t(Hr,Hr):n===.5?t(Fme,Vme):t(fI(n),fI(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Il(e)}function VP(){var t=FP(Jx());return t.copy=function(){return hg(t,VP()).exponent(t.exponent())},la.apply(t,arguments),t}function Bme(){return VP.apply(null,arguments).exponent(.5)}function hI(t){return Math.sign(t)*t*t}function Ume(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function W6(){var t=MP(),e=[0,1],n=!1,r;function i(a){var s=Ume(t(a));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(a){return t.invert(hI(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,e0)).map(hI)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return W6(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},la.apply(i,arguments),Il(i)}function K6(){var t=[],e=[],n=[],r;function i(){var s=0,o=Math.max(1,e.length);for(n=new Array(o-1);++s<o;)n[s-1]=Gpe(t,s/o);return a}function a(s){return s==null||isNaN(s=+s)?r:e[dg(n,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let o of s)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(hl),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return K6().domain(t).range(e).unknown(r)},la.apply(a,arguments)}function q6(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function s(c){return c!=null&&c<=c?i[dg(r,c,0,n)]:a}function o(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return s}return s.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,o()):[t,e]},s.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,o()):i.slice()},s.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return r.slice()},s.copy=function(){return q6().domain([t,e]).range(i).unknown(a)},la.apply(Il(s),arguments)}function H6(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[dg(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return H6().domain(t).range(e).unknown(n)},la.apply(i,arguments)}const qw=new Date,Hw=new Date;function er(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const c=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return c;let u;do c.push(u=new Date(+a)),e(a,o),t(a);while(u<a&&a<s);return c},i.filter=a=>er(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(qw.setTime(+a),Hw.setTime(+s),t(qw),t(Hw),Math.floor(n(qw,Hw))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const r0=er(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);r0.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?er(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):r0);r0.range;const Vs=1e3,ea=Vs*60,Bs=ea*60,so=Bs*24,BP=so*7,pI=so*30,Gw=so*365,Sc=er(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Vs)},(t,e)=>(e-t)/Vs,t=>t.getUTCSeconds());Sc.range;const UP=er(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Vs)},(t,e)=>{t.setTime(+t+e*ea)},(t,e)=>(e-t)/ea,t=>t.getMinutes());UP.range;const WP=er(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ea)},(t,e)=>(e-t)/ea,t=>t.getUTCMinutes());WP.range;const KP=er(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Vs-t.getMinutes()*ea)},(t,e)=>{t.setTime(+t+e*Bs)},(t,e)=>(e-t)/Bs,t=>t.getHours());KP.range;const qP=er(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Bs)},(t,e)=>(e-t)/Bs,t=>t.getUTCHours());qP.range;const pg=er(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ea)/so,t=>t.getDate()-1);pg.range;const Zx=er(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/so,t=>t.getUTCDate()-1);Zx.range;const G6=er(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/so,t=>Math.floor(t/so));G6.range;function mu(t){return er(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ea)/BP)}const eb=mu(0),i0=mu(1),Wme=mu(2),Kme=mu(3),af=mu(4),qme=mu(5),Hme=mu(6);eb.range;i0.range;Wme.range;Kme.range;af.range;qme.range;Hme.range;function gu(t){return er(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/BP)}const tb=gu(0),a0=gu(1),Gme=gu(2),Yme=gu(3),sf=gu(4),Xme=gu(5),Qme=gu(6);tb.range;a0.range;Gme.range;Yme.range;sf.range;Xme.range;Qme.range;const HP=er(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());HP.range;const GP=er(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());GP.range;const oo=er(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());oo.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:er(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});oo.range;const lo=er(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());lo.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:er(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});lo.range;function Y6(t,e,n,r,i,a){const s=[[Sc,1,Vs],[Sc,5,5*Vs],[Sc,15,15*Vs],[Sc,30,30*Vs],[a,1,ea],[a,5,5*ea],[a,15,15*ea],[a,30,30*ea],[i,1,Bs],[i,3,3*Bs],[i,6,6*Bs],[i,12,12*Bs],[r,1,so],[r,2,2*so],[n,1,BP],[e,1,pI],[e,3,3*pI],[t,1,Gw]];function o(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const p=f&&typeof f.range=="function"?f:c(u,d,f),y=p?p.range(u,+d+1):[];return h?y.reverse():y}function c(u,d,f){const h=Math.abs(d-u)/f,p=NP(([,,b])=>b).right(s,h);if(p===s.length)return t.every(C2(u/Gw,d/Gw,f));if(p===0)return r0.every(Math.max(C2(u,d,f),1));const[y,v]=s[h/s[p-1][2]<s[p][2]/h?p-1:p];return y.every(v)}return[o,c]}const[Jme,Zme]=Y6(lo,GP,tb,G6,qP,WP),[ege,tge]=Y6(oo,HP,eb,pg,KP,UP);function Yw(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Xw(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Eh(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function nge(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,c=t.shortMonths,u=Th(i),d=Ch(i),f=Th(a),h=Ch(a),p=Th(s),y=Ch(s),v=Th(o),b=Ch(o),x=Th(c),_=Ch(c),S={a:B,A:F,b:q,B:ae,c:null,d:bI,e:bI,f:Age,g:Mge,G:Lge,H:_ge,I:Sge,j:jge,L:X6,m:Pge,M:Ege,p:ce,q:ve,Q:SI,s:jI,S:Tge,u:Cge,U:Nge,V:kge,w:Oge,W:Ige,x:null,X:null,y:Dge,Y:Rge,Z:$ge,"%":_I},T={a:we,A:Le,b:Ye,B:et,c:null,d:wI,e:wI,f:Bge,g:Jge,G:eve,H:zge,I:Fge,j:Vge,L:J6,m:Uge,M:Wge,p:ke,q:We,Q:SI,s:jI,S:Kge,u:qge,U:Hge,V:Gge,w:Yge,W:Xge,x:null,X:null,y:Qge,Y:Zge,Z:tve,"%":_I},E={a:D,A:M,b:z,B:L,c:te,d:yI,e:yI,f:yge,g:vI,G:gI,H:xI,I:xI,j:pge,L:vge,m:hge,M:mge,p:O,q:fge,Q:bge,s:wge,S:gge,u:oge,U:lge,V:cge,w:sge,W:uge,x:X,X:W,y:vI,Y:gI,Z:dge,"%":xge};S.x=A(n,S),S.X=A(r,S),S.c=A(e,S),T.x=A(n,T),T.X=A(r,T),T.c=A(e,T);function A(Q,Pe){return function(xe){var de=[],pt=-1,nt=0,Oe=Q.length,Ze,yn,Zr;for(xe instanceof Date||(xe=new Date(+xe));++pt<Oe;)Q.charCodeAt(pt)===37&&(de.push(Q.slice(nt,pt)),(yn=mI[Ze=Q.charAt(++pt)])!=null?Ze=Q.charAt(++pt):yn=Ze==="e"?" ":"0",(Zr=Pe[Ze])&&(Ze=Zr(xe,yn)),de.push(Ze),nt=pt+1);return de.push(Q.slice(nt,pt)),de.join("")}}function j(Q,Pe){return function(xe){var de=Eh(1900,void 0,1),pt=P(de,Q,xe+="",0),nt,Oe;if(pt!=xe.length)return null;if("Q"in de)return new Date(de.Q);if("s"in de)return new Date(de.s*1e3+("L"in de?de.L:0));if(Pe&&!("Z"in de)&&(de.Z=0),"p"in de&&(de.H=de.H%12+de.p*12),de.m===void 0&&(de.m="q"in de?de.q:0),"V"in de){if(de.V<1||de.V>53)return null;"w"in de||(de.w=1),"Z"in de?(nt=Xw(Eh(de.y,0,1)),Oe=nt.getUTCDay(),nt=Oe>4||Oe===0?a0.ceil(nt):a0(nt),nt=Zx.offset(nt,(de.V-1)*7),de.y=nt.getUTCFullYear(),de.m=nt.getUTCMonth(),de.d=nt.getUTCDate()+(de.w+6)%7):(nt=Yw(Eh(de.y,0,1)),Oe=nt.getDay(),nt=Oe>4||Oe===0?i0.ceil(nt):i0(nt),nt=pg.offset(nt,(de.V-1)*7),de.y=nt.getFullYear(),de.m=nt.getMonth(),de.d=nt.getDate()+(de.w+6)%7)}else("W"in de||"U"in de)&&("w"in de||(de.w="u"in de?de.u%7:"W"in de?1:0),Oe="Z"in de?Xw(Eh(de.y,0,1)).getUTCDay():Yw(Eh(de.y,0,1)).getDay(),de.m=0,de.d="W"in de?(de.w+6)%7+de.W*7-(Oe+5)%7:de.w+de.U*7-(Oe+6)%7);return"Z"in de?(de.H+=de.Z/100|0,de.M+=de.Z%100,Xw(de)):Yw(de)}}function P(Q,Pe,xe,de){for(var pt=0,nt=Pe.length,Oe=xe.length,Ze,yn;pt<nt;){if(de>=Oe)return-1;if(Ze=Pe.charCodeAt(pt++),Ze===37){if(Ze=Pe.charAt(pt++),yn=E[Ze in mI?Pe.charAt(pt++):Ze],!yn||(de=yn(Q,xe,de))<0)return-1}else if(Ze!=xe.charCodeAt(de++))return-1}return de}function O(Q,Pe,xe){var de=u.exec(Pe.slice(xe));return de?(Q.p=d.get(de[0].toLowerCase()),xe+de[0].length):-1}function D(Q,Pe,xe){var de=p.exec(Pe.slice(xe));return de?(Q.w=y.get(de[0].toLowerCase()),xe+de[0].length):-1}function M(Q,Pe,xe){var de=f.exec(Pe.slice(xe));return de?(Q.w=h.get(de[0].toLowerCase()),xe+de[0].length):-1}function z(Q,Pe,xe){var de=x.exec(Pe.slice(xe));return de?(Q.m=_.get(de[0].toLowerCase()),xe+de[0].length):-1}function L(Q,Pe,xe){var de=v.exec(Pe.slice(xe));return de?(Q.m=b.get(de[0].toLowerCase()),xe+de[0].length):-1}function te(Q,Pe,xe){return P(Q,e,Pe,xe)}function X(Q,Pe,xe){return P(Q,n,Pe,xe)}function W(Q,Pe,xe){return P(Q,r,Pe,xe)}function B(Q){return s[Q.getDay()]}function F(Q){return a[Q.getDay()]}function q(Q){return c[Q.getMonth()]}function ae(Q){return o[Q.getMonth()]}function ce(Q){return i[+(Q.getHours()>=12)]}function ve(Q){return 1+~~(Q.getMonth()/3)}function we(Q){return s[Q.getUTCDay()]}function Le(Q){return a[Q.getUTCDay()]}function Ye(Q){return c[Q.getUTCMonth()]}function et(Q){return o[Q.getUTCMonth()]}function ke(Q){return i[+(Q.getUTCHours()>=12)]}function We(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var Pe=A(Q+="",S);return Pe.toString=function(){return Q},Pe},parse:function(Q){var Pe=j(Q+="",!1);return Pe.toString=function(){return Q},Pe},utcFormat:function(Q){var Pe=A(Q+="",T);return Pe.toString=function(){return Q},Pe},utcParse:function(Q){var Pe=j(Q+="",!0);return Pe.toString=function(){return Q},Pe}}}var mI={"-":"",_:" ",0:"0"},dr=/^\s*\d+/,rge=/^%/,ige=/[\\^$*+?|[\]().{}]/g;function Nt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function age(t){return t.replace(ige,"\\$&")}function Th(t){return new RegExp("^(?:"+t.map(age).join("|")+")","i")}function Ch(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function sge(t,e,n){var r=dr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function oge(t,e,n){var r=dr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function lge(t,e,n){var r=dr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function cge(t,e,n){var r=dr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function uge(t,e,n){var r=dr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function gI(t,e,n){var r=dr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function vI(t,e,n){var r=dr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function dge(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function fge(t,e,n){var r=dr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function hge(t,e,n){var r=dr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function yI(t,e,n){var r=dr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function pge(t,e,n){var r=dr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function xI(t,e,n){var r=dr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function mge(t,e,n){var r=dr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function gge(t,e,n){var r=dr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function vge(t,e,n){var r=dr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function yge(t,e,n){var r=dr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function xge(t,e,n){var r=rge.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function bge(t,e,n){var r=dr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function wge(t,e,n){var r=dr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function bI(t,e){return Nt(t.getDate(),e,2)}function _ge(t,e){return Nt(t.getHours(),e,2)}function Sge(t,e){return Nt(t.getHours()%12||12,e,2)}function jge(t,e){return Nt(1+pg.count(oo(t),t),e,3)}function X6(t,e){return Nt(t.getMilliseconds(),e,3)}function Age(t,e){return X6(t,e)+"000"}function Pge(t,e){return Nt(t.getMonth()+1,e,2)}function Ege(t,e){return Nt(t.getMinutes(),e,2)}function Tge(t,e){return Nt(t.getSeconds(),e,2)}function Cge(t){var e=t.getDay();return e===0?7:e}function Nge(t,e){return Nt(eb.count(oo(t)-1,t),e,2)}function Q6(t){var e=t.getDay();return e>=4||e===0?af(t):af.ceil(t)}function kge(t,e){return t=Q6(t),Nt(af.count(oo(t),t)+(oo(t).getDay()===4),e,2)}function Oge(t){return t.getDay()}function Ige(t,e){return Nt(i0.count(oo(t)-1,t),e,2)}function Dge(t,e){return Nt(t.getFullYear()%100,e,2)}function Mge(t,e){return t=Q6(t),Nt(t.getFullYear()%100,e,2)}function Rge(t,e){return Nt(t.getFullYear()%1e4,e,4)}function Lge(t,e){var n=t.getDay();return t=n>=4||n===0?af(t):af.ceil(t),Nt(t.getFullYear()%1e4,e,4)}function $ge(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Nt(e/60|0,"0",2)+Nt(e%60,"0",2)}function wI(t,e){return Nt(t.getUTCDate(),e,2)}function zge(t,e){return Nt(t.getUTCHours(),e,2)}function Fge(t,e){return Nt(t.getUTCHours()%12||12,e,2)}function Vge(t,e){return Nt(1+Zx.count(lo(t),t),e,3)}function J6(t,e){return Nt(t.getUTCMilliseconds(),e,3)}function Bge(t,e){return J6(t,e)+"000"}function Uge(t,e){return Nt(t.getUTCMonth()+1,e,2)}function Wge(t,e){return Nt(t.getUTCMinutes(),e,2)}function Kge(t,e){return Nt(t.getUTCSeconds(),e,2)}function qge(t){var e=t.getUTCDay();return e===0?7:e}function Hge(t,e){return Nt(tb.count(lo(t)-1,t),e,2)}function Z6(t){var e=t.getUTCDay();return e>=4||e===0?sf(t):sf.ceil(t)}function Gge(t,e){return t=Z6(t),Nt(sf.count(lo(t),t)+(lo(t).getUTCDay()===4),e,2)}function Yge(t){return t.getUTCDay()}function Xge(t,e){return Nt(a0.count(lo(t)-1,t),e,2)}function Qge(t,e){return Nt(t.getUTCFullYear()%100,e,2)}function Jge(t,e){return t=Z6(t),Nt(t.getUTCFullYear()%100,e,2)}function Zge(t,e){return Nt(t.getUTCFullYear()%1e4,e,4)}function eve(t,e){var n=t.getUTCDay();return t=n>=4||n===0?sf(t):sf.ceil(t),Nt(t.getUTCFullYear()%1e4,e,4)}function tve(){return"+0000"}function _I(){return"%"}function SI(t){return+t}function jI(t){return Math.floor(+t/1e3)}var zu,eF,tF;nve({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function nve(t){return zu=nge(t),eF=zu.format,zu.parse,tF=zu.utcFormat,zu.utcParse,zu}function rve(t){return new Date(t)}function ive(t){return t instanceof Date?+t:+new Date(+t)}function YP(t,e,n,r,i,a,s,o,c,u){var d=MP(),f=d.invert,h=d.domain,p=u(".%L"),y=u(":%S"),v=u("%I:%M"),b=u("%I %p"),x=u("%a %d"),_=u("%b %d"),S=u("%B"),T=u("%Y");function E(A){return(c(A)<A?p:o(A)<A?y:s(A)<A?v:a(A)<A?b:r(A)<A?i(A)<A?x:_:n(A)<A?S:T)(A)}return d.invert=function(A){return new Date(f(A))},d.domain=function(A){return arguments.length?h(Array.from(A,ive)):h().map(rve)},d.ticks=function(A){var j=h();return t(j[0],j[j.length-1],A??10)},d.tickFormat=function(A,j){return j==null?E:u(j)},d.nice=function(A){var j=h();return(!A||typeof A.range!="function")&&(A=e(j[0],j[j.length-1],A??10)),A?h(V6(j,A)):d},d.copy=function(){return hg(d,YP(t,e,n,r,i,a,s,o,c,u))},d}function ave(){return la.apply(YP(ege,tge,oo,HP,eb,pg,KP,UP,Sc,eF).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function sve(){return la.apply(YP(Jme,Zme,lo,GP,tb,Zx,qP,WP,Sc,tF).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function nb(){var t=0,e=1,n,r,i,a,s=Hr,o=!1,c;function u(f){return f==null||isNaN(f=+f)?c:s(i===0?.5:(f=(a(f)-n)*i,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(s=f,u):s};function d(f){return function(h){var p,y;return arguments.length?([p,y]=h,s=f(p,y),u):[s(0),s(1)]}}return u.range=d(Kf),u.rangeRound=d(DP),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return a=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),u}}function Dl(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function nF(){var t=Il(nb()(Hr));return t.copy=function(){return Dl(t,nF())},vo.apply(t,arguments)}function rF(){var t=$P(nb()).domain([1,10]);return t.copy=function(){return Dl(t,rF()).base(t.base())},vo.apply(t,arguments)}function iF(){var t=zP(nb());return t.copy=function(){return Dl(t,iF()).constant(t.constant())},vo.apply(t,arguments)}function XP(){var t=FP(nb());return t.copy=function(){return Dl(t,XP()).exponent(t.exponent())},vo.apply(t,arguments)}function ove(){return XP.apply(null,arguments).exponent(.5)}function aF(){var t=[],e=Hr;function n(r){if(r!=null&&!isNaN(r=+r))return e((dg(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(hl),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>Hpe(t,a/r))},n.copy=function(){return aF(e).domain(t)},vo.apply(n,arguments)}function rb(){var t=0,e=.5,n=1,r=1,i,a,s,o,c,u=Hr,d,f=!1,h;function p(v){return isNaN(v=+v)?h:(v=.5+((v=+d(v))-a)*(r*v<r*a?o:c),u(f?Math.max(0,Math.min(1,v)):v))}p.domain=function(v){return arguments.length?([t,e,n]=v,i=d(t=+t),a=d(e=+e),s=d(n=+n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,p):[t,e,n]},p.clamp=function(v){return arguments.length?(f=!!v,p):f},p.interpolator=function(v){return arguments.length?(u=v,p):u};function y(v){return function(b){var x,_,S;return arguments.length?([x,_,S]=b,u=xme(v,[x,_,S]),p):[u(0),u(.5),u(1)]}}return p.range=y(Kf),p.rangeRound=y(DP),p.unknown=function(v){return arguments.length?(h=v,p):h},function(v){return d=v,i=v(t),a=v(e),s=v(n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,p}}function sF(){var t=Il(rb()(Hr));return t.copy=function(){return Dl(t,sF())},vo.apply(t,arguments)}function oF(){var t=$P(rb()).domain([.1,1,10]);return t.copy=function(){return Dl(t,oF()).base(t.base())},vo.apply(t,arguments)}function lF(){var t=zP(rb());return t.copy=function(){return Dl(t,lF()).constant(t.constant())},vo.apply(t,arguments)}function QP(){var t=FP(rb());return t.copy=function(){return Dl(t,QP()).exponent(t.exponent())},vo.apply(t,arguments)}function lve(){return QP.apply(null,arguments).exponent(.5)}const AI=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:cm,scaleDiverging:sF,scaleDivergingLog:oF,scaleDivergingPow:QP,scaleDivergingSqrt:lve,scaleDivergingSymlog:lF,scaleIdentity:F6,scaleImplicit:N2,scaleLinear:n0,scaleLog:B6,scaleOrdinal:kP,scalePoint:mp,scalePow:VP,scaleQuantile:K6,scaleQuantize:q6,scaleRadial:W6,scaleSequential:nF,scaleSequentialLog:rF,scaleSequentialPow:XP,scaleSequentialQuantile:aF,scaleSequentialSqrt:ove,scaleSequentialSymlog:iF,scaleSqrt:Bme,scaleSymlog:U6,scaleThreshold:H6,scaleTime:ave,scaleUtc:sve,tickFormat:z6},Symbol.toStringTag,{value:"Module"}));var cve=Rf;function uve(t,e,n){for(var r=-1,i=t.length;++r<i;){var a=t[r],s=e(a);if(s!=null&&(o===void 0?s===s&&!cve(s):n(s,o)))var o=s,c=a}return c}var ib=uve;function dve(t,e){return t>e}var cF=dve,fve=ib,hve=cF,pve=Wf;function mve(t){return t&&t.length?fve(t,pve,hve):void 0}var gve=mve;const Zo=Ot(gve);function vve(t,e){return t<e}var uF=vve,yve=ib,xve=uF,bve=Wf;function wve(t){return t&&t.length?yve(t,bve,xve):void 0}var _ve=wve;const ab=Ot(_ve);var Sve=dP,jve=ys,Ave=y6,Pve=xi;function Eve(t,e){var n=Pve(t)?Sve:Ave;return n(t,jve(e))}var Tve=Eve,Cve=g6,Nve=Tve;function kve(t,e){return Cve(Nve(t,e),1)}var Ove=kve;const Ive=Ot(Ove);var Dve=PP;function Mve(t,e){return Dve(t,e)}var Rve=Mve;const Xc=Ot(Rve);var qf=1e9,Lve={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},ZP,un=!0,sa="[DecimalError] ",Ic=sa+"Invalid argument: ",JP=sa+"Exponent out of range: ",Hf=Math.floor,fc=Math.pow,$ve=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ni,ar=1e7,rn=7,dF=9007199254740991,s0=Hf(dF/rn),Ve={};Ve.absoluteValue=Ve.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ve.comparedTo=Ve.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Ve.decimalPlaces=Ve.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*rn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Ve.dividedBy=Ve.div=function(t){return Gs(this,new this.constructor(t))};Ve.dividedToIntegerBy=Ve.idiv=function(t){var e=this,n=e.constructor;return Kt(Gs(e,new n(t),0,1),n.precision)};Ve.equals=Ve.eq=function(t){return!this.cmp(t)};Ve.exponent=function(){return Vn(this)};Ve.greaterThan=Ve.gt=function(t){return this.cmp(t)>0};Ve.greaterThanOrEqualTo=Ve.gte=function(t){return this.cmp(t)>=0};Ve.isInteger=Ve.isint=function(){return this.e>this.d.length-2};Ve.isNegative=Ve.isneg=function(){return this.s<0};Ve.isPositive=Ve.ispos=function(){return this.s>0};Ve.isZero=function(){return this.s===0};Ve.lessThan=Ve.lt=function(t){return this.cmp(t)<0};Ve.lessThanOrEqualTo=Ve.lte=function(t){return this.cmp(t)<1};Ve.logarithm=Ve.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Ni))throw Error(sa+"NaN");if(n.s<1)throw Error(sa+(n.s?"NaN":"-Infinity"));return n.eq(Ni)?new r(0):(un=!1,e=Gs(pm(n,a),pm(t,a),a),un=!0,Kt(e,i))};Ve.minus=Ve.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?pF(e,t):fF(e,(t.s=-t.s,t))};Ve.modulo=Ve.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(sa+"NaN");return n.s?(un=!1,e=Gs(n,t,0,1).times(t),un=!0,n.minus(e)):Kt(new r(n),i)};Ve.naturalExponential=Ve.exp=function(){return hF(this)};Ve.naturalLogarithm=Ve.ln=function(){return pm(this)};Ve.negated=Ve.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ve.plus=Ve.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?fF(e,t):pF(e,(t.s=-t.s,t))};Ve.precision=Ve.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Ic+t);if(e=Vn(i)+1,r=i.d.length-1,n=r*rn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Ve.squareRoot=Ve.sqrt=function(){var t,e,n,r,i,a,s,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(sa+"NaN")}for(t=Vn(o),un=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=ts(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Hf((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=s=n+3;;)if(a=r,r=a.plus(Gs(o,a,s+2)).times(.5),ts(a.d).slice(0,s)===(e=ts(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(Kt(a,n+1,0),a.times(a).eq(o)){r=a;break}}else if(e!="9999")break;s+=4}return un=!0,Kt(r,n)};Ve.times=Ve.mul=function(t){var e,n,r,i,a,s,o,c,u,d=this,f=d.constructor,h=d.d,p=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,n=d.e+t.e,c=h.length,u=p.length,c<u&&(a=h,h=p,p=a,s=c,c=u,u=s),a=[],s=c+u,r=s;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,i=c+r;i>r;)o=a[i]+p[r]*h[i-r-1]+e,a[i--]=o%ar|0,e=o/ar|0;a[i]=(a[i]+e)%ar|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,un?Kt(t,f.precision):t};Ve.toDecimalPlaces=Ve.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(ps(t,0,qf),e===void 0?e=r.rounding:ps(e,0,8),Kt(n,t+Vn(n)+1,e))};Ve.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Qc(r,!0):(ps(t,0,qf),e===void 0?e=i.rounding:ps(e,0,8),r=Kt(new i(r),t+1,e),n=Qc(r,!0,t+1)),n};Ve.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?Qc(i):(ps(t,0,qf),e===void 0?e=a.rounding:ps(e,0,8),r=Kt(new a(i),t+Vn(i)+1,e),n=Qc(r.abs(),!1,t+Vn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ve.toInteger=Ve.toint=function(){var t=this,e=t.constructor;return Kt(new e(t),Vn(t)+1,e.rounding)};Ve.toNumber=function(){return+this};Ve.toPower=Ve.pow=function(t){var e,n,r,i,a,s,o=this,c=o.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(Ni);if(o=new c(o),!o.s){if(t.s<1)throw Error(sa+"Infinity");return o}if(o.eq(Ni))return o;if(r=c.precision,t.eq(Ni))return Kt(o,r);if(e=t.e,n=t.d.length-1,s=e>=n,a=o.s,s){if((n=d<0?-d:d)<=dF){for(i=new c(Ni),e=Math.ceil(r/rn+4),un=!1;n%2&&(i=i.times(o),EI(i.d,e)),n=Hf(n/2),n!==0;)o=o.times(o),EI(o.d,e);return un=!0,t.s<0?new c(Ni).div(i):Kt(i,r)}}else if(a<0)throw Error(sa+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,un=!1,i=t.times(pm(o,r+u)),un=!0,i=hF(i),i.s=a,i};Ve.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=Vn(i),r=Qc(i,n<=a.toExpNeg||n>=a.toExpPos)):(ps(t,1,qf),e===void 0?e=a.rounding:ps(e,0,8),i=Kt(new a(i),t,e),n=Vn(i),r=Qc(i,t<=n||n<=a.toExpNeg,t)),r};Ve.toSignificantDigits=Ve.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(ps(t,1,qf),e===void 0?e=r.rounding:ps(e,0,8)),Kt(new r(n),t,e)};Ve.toString=Ve.valueOf=Ve.val=Ve.toJSON=Ve[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Vn(t),n=t.constructor;return Qc(t,e<=n.toExpNeg||e>=n.toExpPos)};function fF(t,e){var n,r,i,a,s,o,c,u,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),un?Kt(e,f):e;if(c=t.d,u=e.d,s=t.e,i=e.e,c=c.slice(),a=s-i,a){for(a<0?(r=c,a=-a,o=u.length):(r=u,i=s,o=c.length),s=Math.ceil(f/rn),o=s>o?s+1:o+1,a>o&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(o=c.length,a=u.length,o-a<0&&(a=o,r=u,u=c,c=r),n=0;a;)n=(c[--a]=c[a]+u[a]+n)/ar|0,c[a]%=ar;for(n&&(c.unshift(n),++i),o=c.length;c[--o]==0;)c.pop();return e.d=c,e.e=i,un?Kt(e,f):e}function ps(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Ic+t)}function ts(t){var e,n,r,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)r=t[e]+"",n=rn-r.length,n&&(a+=Ko(n)),a+=r;s=t[e],r=s+"",n=rn-r.length,n&&(a+=Ko(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var Gs=function(){function t(r,i){var a,s=0,o=r.length;for(r=r.slice();o--;)a=r[o]*i+s,r[o]=a%ar|0,s=a/ar|0;return s&&r.unshift(s),r}function e(r,i,a,s){var o,c;if(a!=s)c=a>s?1:-1;else for(o=c=0;o<a;o++)if(r[o]!=i[o]){c=r[o]>i[o]?1:-1;break}return c}function n(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*ar+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var o,c,u,d,f,h,p,y,v,b,x,_,S,T,E,A,j,P,O=r.constructor,D=r.s==i.s?1:-1,M=r.d,z=i.d;if(!r.s)return new O(r);if(!i.s)throw Error(sa+"Division by zero");for(c=r.e-i.e,j=z.length,E=M.length,p=new O(D),y=p.d=[],u=0;z[u]==(M[u]||0);)++u;if(z[u]>(M[u]||0)&&--c,a==null?_=a=O.precision:s?_=a+(Vn(r)-Vn(i))+1:_=a,_<0)return new O(0);if(_=_/rn+2|0,u=0,j==1)for(d=0,z=z[0],_++;(u<E||d)&&_--;u++)S=d*ar+(M[u]||0),y[u]=S/z|0,d=S%z|0;else{for(d=ar/(z[0]+1)|0,d>1&&(z=t(z,d),M=t(M,d),j=z.length,E=M.length),T=j,v=M.slice(0,j),b=v.length;b<j;)v[b++]=0;P=z.slice(),P.unshift(0),A=z[0],z[1]>=ar/2&&++A;do d=0,o=e(z,v,j,b),o<0?(x=v[0],j!=b&&(x=x*ar+(v[1]||0)),d=x/A|0,d>1?(d>=ar&&(d=ar-1),f=t(z,d),h=f.length,b=v.length,o=e(f,v,h,b),o==1&&(d--,n(f,j<h?P:z,h))):(d==0&&(o=d=1),f=z.slice()),h=f.length,h<b&&f.unshift(0),n(v,f,b),o==-1&&(b=v.length,o=e(z,v,j,b),o<1&&(d++,n(v,j<b?P:z,b))),b=v.length):o===0&&(d++,v=[0]),y[u++]=d,o&&v[0]?v[b++]=M[T]||0:(v=[M[T]],b=1);while((T++<E||v[0]!==void 0)&&_--)}return y[0]||y.shift(),p.e=c,Kt(p,s?a+Vn(p)+1:a)}}();function hF(t,e){var n,r,i,a,s,o,c=0,u=0,d=t.constructor,f=d.precision;if(Vn(t)>16)throw Error(JP+Vn(t));if(!t.s)return new d(Ni);for(un=!1,o=f,s=new d(.03125);t.abs().gte(.1);)t=t.times(s),u+=5;for(r=Math.log(fc(2,u))/Math.LN10*2+5|0,o+=r,n=i=a=new d(Ni),d.precision=o;;){if(i=Kt(i.times(t),o),n=n.times(++c),s=a.plus(Gs(i,n,o)),ts(s.d).slice(0,o)===ts(a.d).slice(0,o)){for(;u--;)a=Kt(a.times(a),o);return d.precision=f,e==null?(un=!0,Kt(a,f)):a}a=s}}function Vn(t){for(var e=t.e*rn,n=t.d[0];n>=10;n/=10)e++;return e}function Qw(t,e,n){if(e>t.LN10.sd())throw un=!0,n&&(t.precision=n),Error(sa+"LN10 precision limit exceeded");return Kt(new t(t.LN10),e)}function Ko(t){for(var e="";t--;)e+="0";return e}function pm(t,e){var n,r,i,a,s,o,c,u,d,f=1,h=10,p=t,y=p.d,v=p.constructor,b=v.precision;if(p.s<1)throw Error(sa+(p.s?"NaN":"-Infinity"));if(p.eq(Ni))return new v(0);if(e==null?(un=!1,u=b):u=e,p.eq(10))return e==null&&(un=!0),Qw(v,u);if(u+=h,v.precision=u,n=ts(y),r=n.charAt(0),a=Vn(p),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)p=p.times(t),n=ts(p.d),r=n.charAt(0),f++;a=Vn(p),r>1?(p=new v("0."+n),a++):p=new v(r+"."+n.slice(1))}else return c=Qw(v,u+2,b).times(a+""),p=pm(new v(r+"."+n.slice(1)),u-h).plus(c),v.precision=b,e==null?(un=!0,Kt(p,b)):p;for(o=s=p=Gs(p.minus(Ni),p.plus(Ni),u),d=Kt(p.times(p),u),i=3;;){if(s=Kt(s.times(d),u),c=o.plus(Gs(s,new v(i),u)),ts(c.d).slice(0,u)===ts(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(Qw(v,u+2,b).times(a+""))),o=Gs(o,new v(f),u),v.precision=b,e==null?(un=!0,Kt(o,b)):o;o=c,i+=2}}function PI(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Hf(n/rn),t.d=[],r=(n+1)%rn,n<0&&(r+=rn),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=rn;r<i;)t.d.push(+e.slice(r,r+=rn));e=e.slice(r),r=rn-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),un&&(t.e>s0||t.e<-s0))throw Error(JP+n)}else t.s=0,t.e=0,t.d=[0];return t}function Kt(t,e,n){var r,i,a,s,o,c,u,d,f=t.d;for(s=1,a=f[0];a>=10;a/=10)s++;if(r=e-s,r<0)r+=rn,i=e,u=f[d=0];else{if(d=Math.ceil((r+1)/rn),a=f.length,d>=a)return t;for(u=a=f[d],s=1;a>=10;a/=10)s++;r%=rn,i=r-rn+s}if(n!==void 0&&(a=fc(10,s-i-1),o=u/a%10|0,c=e<0||f[d+1]!==void 0||u%a,c=n<4?(o||c)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||c||n==6&&(r>0?i>0?u/fc(10,s-i):0:f[d-1])%10&1||n==(t.s<0?8:7))),e<1||!f[0])return c?(a=Vn(t),f.length=1,e=e-a-1,f[0]=fc(10,(rn-e%rn)%rn),t.e=Hf(-e/rn)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(r==0?(f.length=d,a=1,d--):(f.length=d+1,a=fc(10,rn-r),f[d]=i>0?(u/fc(10,s-i)%fc(10,i)|0)*a:0),c)for(;;)if(d==0){(f[0]+=a)==ar&&(f[0]=1,++t.e);break}else{if(f[d]+=a,f[d]!=ar)break;f[d--]=0,a=1}for(r=f.length;f[--r]===0;)f.pop();if(un&&(t.e>s0||t.e<-s0))throw Error(JP+Vn(t));return t}function pF(t,e){var n,r,i,a,s,o,c,u,d,f,h=t.constructor,p=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),un?Kt(e,p):e;if(c=t.d,f=e.d,r=e.e,u=t.e,c=c.slice(),s=u-r,s){for(d=s<0,d?(n=c,s=-s,o=f.length):(n=f,r=u,o=c.length),i=Math.max(Math.ceil(p/rn),o)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=c.length,o=f.length,d=i<o,d&&(o=i),i=0;i<o;i++)if(c[i]!=f[i]){d=c[i]<f[i];break}s=0}for(d&&(n=c,c=f,f=n,e.s=-e.s),o=c.length,i=f.length-o;i>0;--i)c[o++]=0;for(i=f.length;i>s;){if(c[--i]<f[i]){for(a=i;a&&c[--a]===0;)c[a]=ar-1;--c[a],c[i]+=ar}c[i]-=f[i]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,un?Kt(e,p):e):new h(0)}function Qc(t,e,n){var r,i=Vn(t),a=ts(t.d),s=a.length;return e?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+Ko(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Ko(-i-1)+a,n&&(r=n-s)>0&&(a+=Ko(r))):i>=s?(a+=Ko(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+Ko(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=Ko(r))),t.s<0?"-"+a:a}function EI(t,e){if(t.length>e)return t.length=e,!0}function mF(t){var e,n,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Ic+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return PI(s,a.toString())}else if(typeof a!="string")throw Error(Ic+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,$ve.test(a))PI(s,a);else throw Error(Ic+a)}if(i.prototype=Ve,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=mF,i.config=i.set=zve,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function zve(t){if(!t||typeof t!="object")throw Error(sa+"Object expected");var e,n,r,i=["precision",1,qf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Hf(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Ic+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Ic+n+": "+r);return this}var ZP=mF(Lve);Ni=new ZP(1);const Vt=ZP;function Fve(t){return Wve(t)||Uve(t)||Bve(t)||Vve()}function Vve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bve(t,e){if(t){if(typeof t=="string")return D2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D2(t,e)}}function Uve(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Wve(t){if(Array.isArray(t))return D2(t)}function D2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Kve=function(e){return e},gF={},vF=function(e){return e===gF},TI=function(e){return function n(){return arguments.length===0||arguments.length===1&&vF(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},qve=function t(e,n){return e===1?n:TI(function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var s=i.filter(function(o){return o!==gF}).length;return s>=e?n.apply(void 0,i):t(e-s,TI(function(){for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];var d=i.map(function(f){return vF(f)?c.shift():f});return n.apply(void 0,Fve(d).concat(c))}))})},sb=function(e){return qve(e.length,e)},M2=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},Hve=sb(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),Gve=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return Kve;var i=n.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce(function(o,c){return c(o)},a.apply(void 0,arguments))}},R2=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},yF=function(e){var n=null,r=null;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return n&&a.every(function(o,c){return o===n[c]})||(n=a,r=e.apply(void 0,a)),r}};function Yve(t){var e;return t===0?e=1:e=Math.floor(new Vt(t).abs().log(10).toNumber())+1,e}function Xve(t,e,n){for(var r=new Vt(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var Qve=sb(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),Jve=sb(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),Zve=sb(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const ob={rangeStep:Xve,getDigitCount:Yve,interpolateNumber:Qve,uninterpolateNumber:Jve,uninterpolateTruncation:Zve};function L2(t){return nye(t)||tye(t)||xF(t)||eye()}function eye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tye(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function nye(t){if(Array.isArray(t))return $2(t)}function mm(t,e){return aye(t)||iye(t,e)||xF(t,e)||rye()}function rye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xF(t,e){if(t){if(typeof t=="string")return $2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $2(t,e)}}function $2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function iye(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,a=void 0;try{for(var s=t[Symbol.iterator](),o;!(r=(o=s.next()).done)&&(n.push(o.value),!(e&&n.length===e));r=!0);}catch(c){i=!0,a=c}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw a}}return n}}function aye(t){if(Array.isArray(t))return t}function bF(t){var e=mm(t,2),n=e[0],r=e[1],i=n,a=r;return n>r&&(i=r,a=n),[i,a]}function wF(t,e,n){if(t.lte(0))return new Vt(0);var r=ob.getDigitCount(t.toNumber()),i=new Vt(10).pow(r),a=t.div(i),s=r!==1?.05:.1,o=new Vt(Math.ceil(a.div(s).toNumber())).add(n).mul(s),c=o.mul(i);return e?c:new Vt(Math.ceil(c))}function sye(t,e,n){var r=1,i=new Vt(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new Vt(10).pow(ob.getDigitCount(t)-1),i=new Vt(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new Vt(Math.floor(t)))}else t===0?i=new Vt(Math.floor((e-1)/2)):n||(i=new Vt(Math.floor(t)));var s=Math.floor((e-1)/2),o=Gve(Hve(function(c){return i.add(new Vt(c-s).mul(r)).toNumber()}),M2);return o(0,e)}function _F(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new Vt(0),tickMin:new Vt(0),tickMax:new Vt(0)};var a=wF(new Vt(e).sub(t).div(n-1),r,i),s;t<=0&&e>=0?s=new Vt(0):(s=new Vt(t).add(e).div(2),s=s.sub(new Vt(s).mod(a)));var o=Math.ceil(s.sub(t).div(a).toNumber()),c=Math.ceil(new Vt(e).sub(s).div(a).toNumber()),u=o+c+1;return u>n?_F(t,e,n,r,i+1):(u<n&&(c=e>0?c+(n-u):c,o=e>0?o:o+(n-u)),{step:a,tickMin:s.sub(new Vt(o).mul(a)),tickMax:s.add(new Vt(c).mul(a))})}function oye(t){var e=mm(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),o=bF([n,r]),c=mm(o,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(L2(M2(0,i-1).map(function(){return 1/0}))):[].concat(L2(M2(0,i-1).map(function(){return-1/0})),[d]);return n>r?R2(f):f}if(u===d)return sye(u,i,a);var h=_F(u,d,s,a),p=h.step,y=h.tickMin,v=h.tickMax,b=ob.rangeStep(y,v.add(new Vt(.1).mul(p)),p);return n>r?R2(b):b}function lye(t,e){var n=mm(t,2),r=n[0],i=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=bF([r,i]),o=mm(s,2),c=o[0],u=o[1];if(c===-1/0||u===1/0)return[r,i];if(c===u)return[c];var d=Math.max(e,2),f=wF(new Vt(u).sub(c).div(d-1),a,0),h=[].concat(L2(ob.rangeStep(new Vt(c),new Vt(u).sub(new Vt(.99).mul(f)),f)),[u]);return r>i?R2(h):h}var cye=yF(oye),uye=yF(lye),dye="Invariant failed";function Jc(t,e){throw new Error(dye)}var fye=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function of(t){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},of(t)}function o0(){return o0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o0.apply(this,arguments)}function hye(t,e){return vye(t)||gye(t,e)||mye(t,e)||pye()}function pye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mye(t,e){if(t){if(typeof t=="string")return CI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CI(t,e)}}function CI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gye(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function vye(t){if(Array.isArray(t))return t}function yye(t,e){if(t==null)return{};var n=xye(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function xye(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function bye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wye(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,AF(r.key),r)}}function _ye(t,e,n){return e&&wye(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Sye(t,e,n){return e=l0(e),jye(t,SF()?Reflect.construct(e,n||[],l0(t).constructor):e.apply(t,n))}function jye(t,e){if(e&&(of(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Aye(t)}function Aye(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function SF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SF=function(){return!!t})()}function l0(t){return l0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},l0(t)}function Pye(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&z2(t,e)}function z2(t,e){return z2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},z2(t,e)}function jF(t,e,n){return e=AF(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AF(t){var e=Eye(t,"string");return of(e)=="symbol"?e:e+""}function Eye(t,e){if(of(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(of(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var mg=function(t){function e(){return bye(this,e),Sye(this,e,arguments)}return Pye(e,t),_ye(e,[{key:"render",value:function(){var r=this.props,i=r.offset,a=r.layout,s=r.width,o=r.dataKey,c=r.data,u=r.dataPointFormatter,d=r.xAxis,f=r.yAxis,h=yye(r,fye),p=Ke(h,!1);this.props.direction==="x"&&d.type!=="number"&&Jc();var y=c.map(function(v){var b=u(v,o),x=b.x,_=b.y,S=b.value,T=b.errorVal;if(!T)return null;var E=[],A,j;if(Array.isArray(T)){var P=hye(T,2);A=P[0],j=P[1]}else A=j=T;if(a==="vertical"){var O=d.scale,D=_+i,M=D+s,z=D-s,L=O(S-A),te=O(S+j);E.push({x1:te,y1:M,x2:te,y2:z}),E.push({x1:L,y1:D,x2:te,y2:D}),E.push({x1:L,y1:M,x2:L,y2:z})}else if(a==="horizontal"){var X=f.scale,W=x+i,B=W-s,F=W+s,q=X(S-A),ae=X(S+j);E.push({x1:B,y1:ae,x2:F,y2:ae}),E.push({x1:W,y1:q,x2:W,y2:ae}),E.push({x1:B,y1:q,x2:F,y2:q})}return H.createElement(gt,o0({className:"recharts-errorBar",key:"bar-".concat(E.map(function(ce){return"".concat(ce.x1,"-").concat(ce.x2,"-").concat(ce.y1,"-").concat(ce.y2)}))},p),E.map(function(ce){return H.createElement("line",o0({},ce,{key:"line-".concat(ce.x1,"-").concat(ce.x2,"-").concat(ce.y1,"-").concat(ce.y2)}))}))});return H.createElement(gt,{className:"recharts-errorBars"},y)}}])}(H.Component);jF(mg,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});jF(mg,"displayName","ErrorBar");function gm(t){"@babel/helpers - typeof";return gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gm(t)}function NI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NI(Object(n),!0).forEach(function(r){Tye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tye(t,e,n){return e=Cye(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cye(t){var e=Nye(t,"string");return gm(e)=="symbol"?e:e+""}function Nye(t,e){if(gm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var PF=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,a=e.legendContent,s=Ci(n,Ca);if(!s)return null;var o=Ca.defaultProps,c=o!==void 0?nc(nc({},o),s.props):{},u;return s.props&&s.props.payload?u=s.props&&s.props.payload:a==="children"?u=(r||[]).reduce(function(d,f){var h=f.item,p=f.props,y=p.sectors||p.data||[];return d.concat(y.map(function(v){return{type:s.props.iconType||h.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):u=(r||[]).map(function(d){var f=d.item,h=f.type.defaultProps,p=h!==void 0?nc(nc({},h),f.props):{},y=p.dataKey,v=p.name,b=p.legendType,x=p.hide;return{inactive:x,dataKey:y,type:c.iconType||b||"square",color:eE(f),value:v||y,payload:p}}),nc(nc(nc({},c),Ca.getWithHeight(s,i)),{},{payload:u,item:s})};function vm(t){"@babel/helpers - typeof";return vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vm(t)}function kI(t){return Dye(t)||Iye(t)||Oye(t)||kye()}function kye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oye(t,e){if(t){if(typeof t=="string")return F2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F2(t,e)}}function Iye(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Dye(t){if(Array.isArray(t))return F2(t)}function F2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function OI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _n(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OI(Object(n),!0).forEach(function(r){Td(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Td(t,e,n){return e=Mye(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mye(t){var e=Rye(t,"string");return vm(e)=="symbol"?e:e+""}function Rye(t,e){if(vm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Nn(t,e,n){return it(t)||it(e)?n:Qn(e)?Mi(t,e,n):Je(e)?e(t):n}function gp(t,e,n,r){var i=Ive(t,function(o){return Nn(o,e)});if(n==="number"){var a=i.filter(function(o){return je(o)||parseFloat(o)});return a.length?[ab(a),Zo(a)]:[1/0,-1/0]}var s=r?i.filter(function(o){return!it(o)}):i;return s.map(function(o){return Qn(o)||o instanceof Date?o:""})}var Lye=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,o=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(o<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var c=a.range,u=0;u<o;u++){var d=u>0?i[u-1].coordinate:i[o-1].coordinate,f=i[u].coordinate,h=u>=o-1?i[0].coordinate:i[u+1].coordinate,p=void 0;if(Kr(f-d)!==Kr(h-f)){var y=[];if(Kr(h-f)===Kr(c[1]-c[0])){p=h;var v=f+c[1]-c[0];y[0]=Math.min(v,(v+d)/2),y[1]=Math.max(v,(v+d)/2)}else{p=d;var b=h+c[1]-c[0];y[0]=Math.min(f,(b+f)/2),y[1]=Math.max(f,(b+f)/2)}var x=[Math.min(f,(p+f)/2),Math.max(f,(p+f)/2)];if(e>x[0]&&e<=x[1]||e>=y[0]&&e<=y[1]){s=i[u].index;break}}else{var _=Math.min(d,h),S=Math.max(d,h);if(e>(_+f)/2&&e<=(S+f)/2){s=i[u].index;break}}}else for(var T=0;T<o;T++)if(T===0&&e<=(r[T].coordinate+r[T+1].coordinate)/2||T>0&&T<o-1&&e>(r[T].coordinate+r[T-1].coordinate)/2&&e<=(r[T].coordinate+r[T+1].coordinate)/2||T===o-1&&e>(r[T].coordinate+r[T-1].coordinate)/2){s=r[T].index;break}return s},eE=function(e){var n,r=e,i=r.type.displayName,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?_n(_n({},e.type.defaultProps),e.props):e.props,s=a.stroke,o=a.fill,c;switch(i){case"Line":c=s;break;case"Area":case"Radar":c=s&&s!=="none"?s:o;break;default:c=o;break}return c},$ye=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var s={},o=Object.keys(a),c=0,u=o.length;c<u;c++)for(var d=a[o[c]].stackGroups,f=Object.keys(d),h=0,p=f.length;h<p;h++){var y=d[f[h]],v=y.items,b=y.cateAxisId,x=v.filter(function(j){return Hs(j.type).indexOf("Bar")>=0});if(x&&x.length){var _=x[0].type.defaultProps,S=_!==void 0?_n(_n({},_),x[0].props):x[0].props,T=S.barSize,E=S[b];s[E]||(s[E]=[]);var A=it(T)?n:T;s[E].push({item:x[0],stackList:x.slice(1),barSize:it(A)?void 0:qr(A,r,0)})}}return s},zye=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,a=e.sizeList,s=a===void 0?[]:a,o=e.maxBarSize,c=s.length;if(c<1)return null;var u=qr(n,i,0,!0),d,f=[];if(s[0].barSize===+s[0].barSize){var h=!1,p=i/c,y=s.reduce(function(T,E){return T+E.barSize||0},0);y+=(c-1)*u,y>=i&&(y-=(c-1)*u,u=0),y>=i&&p>0&&(h=!0,p*=.9,y=c*p);var v=(i-y)/2>>0,b={offset:v-u,size:0};d=s.reduce(function(T,E){var A={item:E.item,position:{offset:b.offset+b.size+u,size:h?p:E.barSize}},j=[].concat(kI(T),[A]);return b=j[j.length-1].position,E.stackList&&E.stackList.length&&E.stackList.forEach(function(P){j.push({item:P,position:b})}),j},f)}else{var x=qr(r,i,0,!0);i-2*x-(c-1)*u<=0&&(u=0);var _=(i-2*x-(c-1)*u)/c;_>1&&(_>>=0);var S=o===+o?Math.min(_,o):_;d=s.reduce(function(T,E,A){var j=[].concat(kI(T),[{item:E.item,position:{offset:x+(_+u)*A+(_-S)/2,size:S}}]);return E.stackList&&E.stackList.length&&E.stackList.forEach(function(P){j.push({item:P,position:j[j.length-1].position})}),j},f)}return d},Fye=function(e,n,r,i){var a=r.children,s=r.width,o=r.margin,c=s-(o.left||0)-(o.right||0),u=PF({children:a,legendWidth:c});if(u){var d=i||{},f=d.width,h=d.height,p=u.align,y=u.verticalAlign,v=u.layout;if((v==="vertical"||v==="horizontal"&&y==="middle")&&p!=="center"&&je(e[p]))return _n(_n({},e),{},Td({},p,e[p]+(f||0)));if((v==="horizontal"||v==="vertical"&&p==="center")&&y!=="middle"&&je(e[y]))return _n(_n({},e),{},Td({},y,e[y]+(h||0)))}return e},Vye=function(e,n,r){return it(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},EF=function(e,n,r,i,a){var s=n.props.children,o=Ri(s,mg).filter(function(u){return Vye(i,a,u.props.direction)});if(o&&o.length){var c=o.map(function(u){return u.props.dataKey});return e.reduce(function(u,d){var f=Nn(d,r);if(it(f))return u;var h=Array.isArray(f)?[ab(f),Zo(f)]:[f,f],p=c.reduce(function(y,v){var b=Nn(d,v,0),x=h[0]-Math.abs(Array.isArray(b)?b[0]:b),_=h[1]+Math.abs(Array.isArray(b)?b[1]:b);return[Math.min(x,y[0]),Math.max(_,y[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},Bye=function(e,n,r,i,a){var s=n.map(function(o){return EF(e,o,r,a,i)}).filter(function(o){return!it(o)});return s&&s.length?s.reduce(function(o,c){return[Math.min(o[0],c[0]),Math.max(o[1],c[1])]},[1/0,-1/0]):null},TF=function(e,n,r,i,a){var s=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&EF(e,c,u,i)||gp(e,u,r,a)});if(r==="number")return s.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var o={};return s.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)o[u[d]]||(o[u[d]]=!0,c.push(u[d]));return c},[])},CF=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},NF=function(e,n,r,i){if(i)return e.map(function(c){return c.coordinate});var a,s,o=e.map(function(c){return c.coordinate===n&&(a=!0),c.coordinate===r&&(s=!0),c.coordinate});return a||o.push(n),s||o.push(r),o},Us=function(e,n,r){if(!e)return null;var i=e.scale,a=e.duplicateDomain,s=e.type,o=e.range,c=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||r)&&s==="category"&&i.bandwidth?i.bandwidth()/c:0;if(u=e.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?Kr(o[0]-o[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(f){var h=a?a.indexOf(f):f;return{coordinate:i(h)+u,value:f,offset:u}});return d.filter(function(f){return!Vf(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,h){return{coordinate:i(f)+u,value:f,index:h,offset:u}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(f){return{coordinate:i(f)+u,value:f,offset:u}}):i.domain().map(function(f,h){return{coordinate:i(f)+u,value:a?a[f]:f,index:h,offset:u}})},Jw=new WeakMap,lv=function(e,n){if(typeof n!="function")return e;Jw.has(e)||Jw.set(e,new WeakMap);var r=Jw.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},kF=function(e,n,r){var i=e.scale,a=e.type,s=e.layout,o=e.axisType;if(i==="auto")return s==="radial"&&o==="radiusAxis"?{scale:cm(),realScaleType:"band"}:s==="radial"&&o==="angleAxis"?{scale:n0(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:mp(),realScaleType:"point"}:a==="category"?{scale:cm(),realScaleType:"band"}:{scale:n0(),realScaleType:"linear"};if(Hc(i)){var c="scale".concat(Kx(i));return{scale:(AI[c]||mp)(),realScaleType:AI[c]?c:"point"}}return Je(i)?{scale:i}:{scale:mp(),realScaleType:"point"}},II=1e-4,OF=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),a=Math.min(i[0],i[1])-II,s=Math.max(i[0],i[1])+II,o=e(n[0]),c=e(n[r-1]);(o<a||o>s||c<a||c>s)&&e.domain([n[0],n[r-1]])}},Uye=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},Wye=function(e,n){if(!n||n.length!==2||!je(n[0])||!je(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a=[e[0],e[1]];return(!je(e[0])||e[0]<r)&&(a[0]=r),(!je(e[1])||e[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<r&&(a[1]=r),a},Kye=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0,o=0;o<n;++o){var c=Vf(e[o][r][1])?e[o][r][0]:e[o][r][1];c>=0?(e[o][r][0]=a,e[o][r][1]=a+c,a=e[o][r][1]):(e[o][r][0]=s,e[o][r][1]=s+c,s=e[o][r][1])}},qye=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var a=0,s=0;s<n;++s){var o=Vf(e[s][r][1])?e[s][r][0]:e[s][r][1];o>=0?(e[s][r][0]=a,e[s][r][1]=a+o,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},Hye={sign:Kye,expand:fae,none:Jd,silhouette:hae,wiggle:pae,positive:qye},Gye=function(e,n,r){var i=n.map(function(o){return o.props.dataKey}),a=Hye[r],s=dae().keys(i).value(function(o,c){return+Nn(o,c,0)}).order(d2).offset(a);return s(e)},Yye=function(e,n,r,i,a,s){if(!e)return null;var o=s?n.reverse():n,c={},u=o.reduce(function(f,h){var p,y=(p=h.type)!==null&&p!==void 0&&p.defaultProps?_n(_n({},h.type.defaultProps),h.props):h.props,v=y.stackId,b=y.hide;if(b)return f;var x=y[r],_=f[x]||{hasStack:!1,stackGroups:{}};if(Qn(v)){var S=_.stackGroups[v]||{numericAxisId:r,cateAxisId:i,items:[]};S.items.push(h),_.hasStack=!0,_.stackGroups[v]=S}else _.stackGroups[pu("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[h]};return _n(_n({},f),{},Td({},x,_))},c),d={};return Object.keys(u).reduce(function(f,h){var p=u[h];if(p.hasStack){var y={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(v,b){var x=p.stackGroups[b];return _n(_n({},v),{},Td({},b,{numericAxisId:r,cateAxisId:i,items:x.items,stackedData:Gye(e,x.items,a)}))},y)}return _n(_n({},f),{},Td({},h,p))},d)},IF=function(e,n){var r=n.realScaleType,i=n.type,a=n.tickCount,s=n.originalDomain,o=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(a&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var u=e.domain();if(!u.length)return null;var d=cye(u,a,o);return e.domain([ab(d),Zo(d)]),{niceTicks:d}}if(a&&i==="number"){var f=e.domain(),h=uye(f,a,o);return{niceTicks:h}}return null};function c0(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,a=t.index,s=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!it(i[e.dataKey])){var o=My(n,"value",i[e.dataKey]);if(o)return o.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var c=Nn(i,it(s)?e.dataKey:s);return it(c)?null:e.scale(c)}var DI=function(e){var n=e.axis,r=e.ticks,i=e.offset,a=e.bandSize,s=e.entry,o=e.index;if(n.type==="category")return r[o]?r[o].coordinate+i:null;var c=Nn(s,n.dataKey,n.domain[o]);return it(c)?null:n.scale(c)-a/2+i},Xye=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return i<=0&&a>=0?0:a<0?a:i}return r[0]},Qye=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?_n(_n({},e.type.defaultProps),e.props):e.props,a=i.stackId;if(Qn(a)){var s=n[a];if(s){var o=s.items.indexOf(e);return o>=0?s.stackedData[o]:null}}return null},Jye=function(e){return e.reduce(function(n,r){return[ab(r.concat([n[0]]).filter(je)),Zo(r.concat([n[1]]).filter(je))]},[1/0,-1/0])},DF=function(e,n,r){return Object.keys(e).reduce(function(i,a){var s=e[a],o=s.stackedData,c=o.reduce(function(u,d){var f=Jye(d.slice(n,r+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},MI=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,RI=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,V2=function(e,n,r){if(Je(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(je(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(MI.test(e[0])){var a=+MI.exec(e[0])[1];i[0]=n[0]-a}else Je(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(je(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(RI.test(e[1])){var s=+RI.exec(e[1])[1];i[1]=n[1]+s}else Je(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},u0=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var a=TP(n,function(f){return f.coordinate}),s=1/0,o=1,c=a.length;o<c;o++){var u=a[o],d=a[o-1];s=Math.min((u.coordinate||0)-(d.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0},LI=function(e,n,r){return!e||!e.length||Xc(e,Mi(r,"type.defaultProps.domain"))?n:e},MF=function(e,n){var r=e.type.defaultProps?_n(_n({},e.type.defaultProps),e.props):e.props,i=r.dataKey,a=r.name,s=r.unit,o=r.formatter,c=r.tooltipType,u=r.chartType,d=r.hide;return _n(_n({},Ke(e,!1)),{},{dataKey:i,unit:s,formatter:o,name:a||i,color:eE(e),value:Nn(n,i),type:c,payload:n,chartType:u,hide:d})};function ym(t){"@babel/helpers - typeof";return ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ym(t)}function $I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ms(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$I(Object(n),!0).forEach(function(r){RF(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$I(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RF(t,e,n){return e=Zye(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zye(t){var e=e0e(t,"string");return ym(e)=="symbol"?e:e+""}function e0e(t,e){if(ym(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ym(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function t0e(t,e){return a0e(t)||i0e(t,e)||r0e(t,e)||n0e()}function n0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r0e(t,e){if(t){if(typeof t=="string")return zI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zI(t,e)}}function zI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i0e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function a0e(t){if(Array.isArray(t))return t}var d0=Math.PI/180,s0e=function(e){return e*180/Math.PI},Qt=function(e,n,r,i){return{x:e+Math.cos(-d0*i)*r,y:n+Math.sin(-d0*i)*r}},LF=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},o0e=function(e,n,r,i,a){var s=e.width,o=e.height,c=e.startAngle,u=e.endAngle,d=qr(e.cx,s,s/2),f=qr(e.cy,o,o/2),h=LF(s,o,r),p=qr(e.innerRadius,h,0),y=qr(e.outerRadius,h,h*.8),v=Object.keys(n);return v.reduce(function(b,x){var _=n[x],S=_.domain,T=_.reversed,E;if(it(_.range))i==="angleAxis"?E=[c,u]:i==="radiusAxis"&&(E=[p,y]),T&&(E=[E[1],E[0]]);else{E=_.range;var A=E,j=t0e(A,2);c=j[0],u=j[1]}var P=kF(_,a),O=P.realScaleType,D=P.scale;D.domain(S).range(E),OF(D);var M=IF(D,Ms(Ms({},_),{},{realScaleType:O})),z=Ms(Ms(Ms({},_),M),{},{range:E,radius:y,realScaleType:O,scale:D,cx:d,cy:f,innerRadius:p,outerRadius:y,startAngle:c,endAngle:u});return Ms(Ms({},b),{},RF({},x,z))},{})},l0e=function(e,n){var r=e.x,i=e.y,a=n.x,s=n.y;return Math.sqrt(Math.pow(r-a,2)+Math.pow(i-s,2))},c0e=function(e,n){var r=e.x,i=e.y,a=n.cx,s=n.cy,o=l0e({x:r,y:i},{x:a,y:s});if(o<=0)return{radius:o};var c=(r-a)/o,u=Math.acos(c);return i>s&&(u=2*Math.PI-u),{radius:o,angle:s0e(u),angleInRadian:u}},u0e=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),a=Math.floor(r/360),s=Math.min(i,a);return{startAngle:n-s*360,endAngle:r-s*360}},d0e=function(e,n){var r=n.startAngle,i=n.endAngle,a=Math.floor(r/360),s=Math.floor(i/360),o=Math.min(a,s);return e+o*360},FI=function(e,n){var r=e.x,i=e.y,a=c0e({x:r,y:i},n),s=a.radius,o=a.angle,c=n.innerRadius,u=n.outerRadius;if(s<c||s>u)return!1;if(s===0)return!0;var d=u0e(n),f=d.startAngle,h=d.endAngle,p=o,y;if(f<=h){for(;p>h;)p-=360;for(;p<f;)p+=360;y=p>=f&&p<=h}else{for(;p>f;)p-=360;for(;p<h;)p+=360;y=p>=h&&p<=f}return y?Ms(Ms({},n),{},{radius:s,angle:d0e(p,n)}):null},$F=function(e){return!k.isValidElement(e)&&!Je(e)&&typeof e!="boolean"?e.className:""};function xm(t){"@babel/helpers - typeof";return xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xm(t)}var f0e=["offset"];function h0e(t){return v0e(t)||g0e(t)||m0e(t)||p0e()}function p0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m0e(t,e){if(t){if(typeof t=="string")return B2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B2(t,e)}}function g0e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function v0e(t){if(Array.isArray(t))return B2(t)}function B2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function y0e(t,e){if(t==null)return{};var n=x0e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function x0e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function VI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VI(Object(n),!0).forEach(function(r){b0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function b0e(t,e,n){return e=w0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w0e(t){var e=_0e(t,"string");return xm(e)=="symbol"?e:e+""}function _0e(t,e){if(xm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(xm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bm(){return bm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bm.apply(this,arguments)}var S0e=function(e){var n=e.value,r=e.formatter,i=it(e.children)?n:e.children;return Je(r)?r(i):i},j0e=function(e,n){var r=Kr(n-e),i=Math.min(Math.abs(n-e),360);return r*i},A0e=function(e,n,r){var i=e.position,a=e.viewBox,s=e.offset,o=e.className,c=a,u=c.cx,d=c.cy,f=c.innerRadius,h=c.outerRadius,p=c.startAngle,y=c.endAngle,v=c.clockWise,b=(f+h)/2,x=j0e(p,y),_=x>=0?1:-1,S,T;i==="insideStart"?(S=p+_*s,T=v):i==="insideEnd"?(S=y-_*s,T=!v):i==="end"&&(S=y+_*s,T=v),T=x<=0?T:!T;var E=Qt(u,d,b,S),A=Qt(u,d,b,S+(T?1:-1)*359),j="M".concat(E.x,",").concat(E.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(T?0:1,`,
    `).concat(A.x,",").concat(A.y),P=it(e.id)?pu("recharts-radial-line-"):e.id;return H.createElement("text",bm({},r,{dominantBaseline:"central",className:dt("recharts-radial-bar-label",o)}),H.createElement("defs",null,H.createElement("path",{id:P,d:j})),H.createElement("textPath",{xlinkHref:"#".concat(P)},n))},P0e=function(e){var n=e.viewBox,r=e.offset,i=e.position,a=n,s=a.cx,o=a.cy,c=a.innerRadius,u=a.outerRadius,d=a.startAngle,f=a.endAngle,h=(d+f)/2;if(i==="outside"){var p=Qt(s,o,u+r,h),y=p.x,v=p.y;return{x:y,y:v,textAnchor:y>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:o,textAnchor:"middle",verticalAnchor:"end"};var b=(c+u)/2,x=Qt(s,o,b,h),_=x.x,S=x.y;return{x:_,y:S,textAnchor:"middle",verticalAnchor:"middle"}},E0e=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,a=e.position,s=n,o=s.x,c=s.y,u=s.width,d=s.height,f=d>=0?1:-1,h=f*i,p=f>0?"end":"start",y=f>0?"start":"end",v=u>=0?1:-1,b=v*i,x=v>0?"end":"start",_=v>0?"start":"end";if(a==="top"){var S={x:o+u/2,y:c-f*i,textAnchor:"middle",verticalAnchor:p};return qn(qn({},S),r?{height:Math.max(c-r.y,0),width:u}:{})}if(a==="bottom"){var T={x:o+u/2,y:c+d+h,textAnchor:"middle",verticalAnchor:y};return qn(qn({},T),r?{height:Math.max(r.y+r.height-(c+d),0),width:u}:{})}if(a==="left"){var E={x:o-b,y:c+d/2,textAnchor:x,verticalAnchor:"middle"};return qn(qn({},E),r?{width:Math.max(E.x-r.x,0),height:d}:{})}if(a==="right"){var A={x:o+u+b,y:c+d/2,textAnchor:_,verticalAnchor:"middle"};return qn(qn({},A),r?{width:Math.max(r.x+r.width-A.x,0),height:d}:{})}var j=r?{width:u,height:d}:{};return a==="insideLeft"?qn({x:o+b,y:c+d/2,textAnchor:_,verticalAnchor:"middle"},j):a==="insideRight"?qn({x:o+u-b,y:c+d/2,textAnchor:x,verticalAnchor:"middle"},j):a==="insideTop"?qn({x:o+u/2,y:c+h,textAnchor:"middle",verticalAnchor:y},j):a==="insideBottom"?qn({x:o+u/2,y:c+d-h,textAnchor:"middle",verticalAnchor:p},j):a==="insideTopLeft"?qn({x:o+b,y:c+h,textAnchor:_,verticalAnchor:y},j):a==="insideTopRight"?qn({x:o+u-b,y:c+h,textAnchor:x,verticalAnchor:y},j):a==="insideBottomLeft"?qn({x:o+b,y:c+d-h,textAnchor:_,verticalAnchor:p},j):a==="insideBottomRight"?qn({x:o+u-b,y:c+d-h,textAnchor:x,verticalAnchor:p},j):Lf(a)&&(je(a.x)||wc(a.x))&&(je(a.y)||wc(a.y))?qn({x:o+qr(a.x,u),y:c+qr(a.y,d),textAnchor:"end",verticalAnchor:"end"},j):qn({x:o+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},j)},T0e=function(e){return"cx"in e&&je(e.cx)};function or(t){var e=t.offset,n=e===void 0?5:e,r=y0e(t,f0e),i=qn({offset:n},r),a=i.viewBox,s=i.position,o=i.value,c=i.children,u=i.content,d=i.className,f=d===void 0?"":d,h=i.textBreakAll;if(!a||it(o)&&it(c)&&!k.isValidElement(u)&&!Je(u))return null;if(k.isValidElement(u))return k.cloneElement(u,i);var p;if(Je(u)){if(p=k.createElement(u,i),k.isValidElement(p))return p}else p=S0e(i);var y=T0e(a),v=Ke(i,!0);if(y&&(s==="insideStart"||s==="insideEnd"||s==="end"))return A0e(i,p,v);var b=y?P0e(i):E0e(i);return H.createElement(Yc,bm({className:dt("recharts-label",f)},v,b,{breakAll:h}),p)}or.displayName="Label";var zF=function(e){var n=e.cx,r=e.cy,i=e.angle,a=e.startAngle,s=e.endAngle,o=e.r,c=e.radius,u=e.innerRadius,d=e.outerRadius,f=e.x,h=e.y,p=e.top,y=e.left,v=e.width,b=e.height,x=e.clockWise,_=e.labelViewBox;if(_)return _;if(je(v)&&je(b)){if(je(f)&&je(h))return{x:f,y:h,width:v,height:b};if(je(p)&&je(y))return{x:p,y,width:v,height:b}}return je(f)&&je(h)?{x:f,y:h,width:0,height:0}:je(n)&&je(r)?{cx:n,cy:r,startAngle:a||i||0,endAngle:s||i||0,innerRadius:u||0,outerRadius:d||c||o||0,clockWise:x}:e.viewBox?e.viewBox:{}},C0e=function(e,n){return e?e===!0?H.createElement(or,{key:"label-implicit",viewBox:n}):Qn(e)?H.createElement(or,{key:"label-implicit",viewBox:n,value:e}):k.isValidElement(e)?e.type===or?k.cloneElement(e,{key:"label-implicit",viewBox:n}):H.createElement(or,{key:"label-implicit",content:e,viewBox:n}):Je(e)?H.createElement(or,{key:"label-implicit",content:e,viewBox:n}):Lf(e)?H.createElement(or,bm({viewBox:n},e,{key:"label-implicit"})):null:null},N0e=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,a=zF(e),s=Ri(i,or).map(function(c,u){return k.cloneElement(c,{viewBox:n||a,key:"label-".concat(u)})});if(!r)return s;var o=C0e(e.label,n||a);return[o].concat(h0e(s))};or.parseViewBox=zF;or.renderCallByParent=N0e;function k0e(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var O0e=k0e;const I0e=Ot(O0e);function wm(t){"@babel/helpers - typeof";return wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wm(t)}var D0e=["valueAccessor"],M0e=["data","dataKey","clockWise","id","textBreakAll"];function R0e(t){return F0e(t)||z0e(t)||$0e(t)||L0e()}function L0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $0e(t,e){if(t){if(typeof t=="string")return U2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U2(t,e)}}function z0e(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function F0e(t){if(Array.isArray(t))return U2(t)}function U2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f0(){return f0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f0.apply(this,arguments)}function BI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function UI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BI(Object(n),!0).forEach(function(r){V0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function V0e(t,e,n){return e=B0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B0e(t){var e=U0e(t,"string");return wm(e)=="symbol"?e:e+""}function U0e(t,e){if(wm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WI(t,e){if(t==null)return{};var n=W0e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function W0e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var K0e=function(e){return Array.isArray(e.value)?I0e(e.value):e.value};function ra(t){var e=t.valueAccessor,n=e===void 0?K0e:e,r=WI(t,D0e),i=r.data,a=r.dataKey,s=r.clockWise,o=r.id,c=r.textBreakAll,u=WI(r,M0e);return!i||!i.length?null:H.createElement(gt,{className:"recharts-label-list"},i.map(function(d,f){var h=it(a)?n(d,f):Nn(d&&d.payload,a),p=it(o)?{}:{id:"".concat(o,"-").concat(f)};return H.createElement(or,f0({},Ke(d,!0),u,p,{parentViewBox:d.parentViewBox,value:h,textBreakAll:c,viewBox:or.parseViewBox(it(s)?d:UI(UI({},d),{},{clockWise:s})),key:"label-".concat(f),index:f}))}))}ra.displayName="LabelList";function q0e(t,e){return t?t===!0?H.createElement(ra,{key:"labelList-implicit",data:e}):H.isValidElement(t)||Je(t)?H.createElement(ra,{key:"labelList-implicit",data:e,content:t}):Lf(t)?H.createElement(ra,f0({data:e},t,{key:"labelList-implicit"})):null:null}function H0e(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=Ri(r,ra).map(function(s,o){return k.cloneElement(s,{data:e,key:"labelList-".concat(o)})});if(!n)return i;var a=q0e(t.label,e);return[a].concat(R0e(i))}ra.renderCallByParent=H0e;function _m(t){"@babel/helpers - typeof";return _m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_m(t)}function W2(){return W2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},W2.apply(this,arguments)}function KI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KI(Object(n),!0).forEach(function(r){G0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function G0e(t,e,n){return e=Y0e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y0e(t){var e=X0e(t,"string");return _m(e)=="symbol"?e:e+""}function X0e(t,e){if(_m(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_m(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Q0e=function(e,n){var r=Kr(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},cv=function(e){var n=e.cx,r=e.cy,i=e.radius,a=e.angle,s=e.sign,o=e.isExternal,c=e.cornerRadius,u=e.cornerIsExternal,d=c*(o?1:-1)+i,f=Math.asin(c/d)/d0,h=u?a:a+s*f,p=Qt(n,r,d,h),y=Qt(n,r,i,h),v=u?a-s*f:a,b=Qt(n,r,d*Math.cos(f*d0),v);return{center:p,circleTangency:y,lineTangency:b,theta:f}},FF=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.startAngle,o=e.endAngle,c=Q0e(s,o),u=s+c,d=Qt(n,r,a,s),f=Qt(n,r,a,u),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(s>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var p=Qt(n,r,i,s),y=Qt(n,r,i,u);h+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(s<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(n,",").concat(r," Z");return h},J0e=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,a=e.outerRadius,s=e.cornerRadius,o=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,d=e.endAngle,f=Kr(d-u),h=cv({cx:n,cy:r,radius:a,angle:u,sign:f,cornerRadius:s,cornerIsExternal:c}),p=h.circleTangency,y=h.lineTangency,v=h.theta,b=cv({cx:n,cy:r,radius:a,angle:d,sign:-f,cornerRadius:s,cornerIsExternal:c}),x=b.circleTangency,_=b.lineTangency,S=b.theta,T=c?Math.abs(u-d):Math.abs(u-d)-v-S;if(T<0)return o?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):FF({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:u,endAngle:d});var E="M ".concat(y.x,",").concat(y.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(T>180),",").concat(+(f<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(_.x,",").concat(_.y,`
  `);if(i>0){var A=cv({cx:n,cy:r,radius:i,angle:u,sign:f,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),j=A.circleTangency,P=A.lineTangency,O=A.theta,D=cv({cx:n,cy:r,radius:i,angle:d,sign:-f,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),M=D.circleTangency,z=D.lineTangency,L=D.theta,te=c?Math.abs(u-d):Math.abs(u-d)-O-L;if(te<0&&s===0)return"".concat(E,"L").concat(n,",").concat(r,"Z");E+="L".concat(z.x,",").concat(z.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(M.x,",").concat(M.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(te>180),",").concat(+(f>0),",").concat(j.x,",").concat(j.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(P.x,",").concat(P.y,"Z")}else E+="L".concat(n,",").concat(r,"Z");return E},Z0e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},VF=function(e){var n=qI(qI({},Z0e),e),r=n.cx,i=n.cy,a=n.innerRadius,s=n.outerRadius,o=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,f=n.endAngle,h=n.className;if(s<a||d===f)return null;var p=dt("recharts-sector",h),y=s-a,v=qr(o,y,0,!0),b;return v>0&&Math.abs(d-f)<360?b=J0e({cx:r,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(v,y/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):b=FF({cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:d,endAngle:f}),H.createElement("path",W2({},Ke(n,!0),{className:p,d:b,role:"img"}))};function Sm(t){"@babel/helpers - typeof";return Sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sm(t)}function K2(){return K2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},K2.apply(this,arguments)}function HI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function GI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HI(Object(n),!0).forEach(function(r){exe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function exe(t,e,n){return e=txe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function txe(t){var e=nxe(t,"string");return Sm(e)=="symbol"?e:e+""}function nxe(t,e){if(Sm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var YI={curveBasisClosed:eae,curveBasisOpen:tae,curveBasis:Zie,curveBumpX:zie,curveBumpY:Fie,curveLinearClosed:nae,curveLinear:Hx,curveMonotoneX:rae,curveMonotoneY:iae,curveNatural:aae,curveStep:sae,curveStepAfter:lae,curveStepBefore:oae},uv=function(e){return e.x===+e.x&&e.y===+e.y},Nh=function(e){return e.x},kh=function(e){return e.y},rxe=function(e,n){if(Je(e))return e;var r="curve".concat(Kx(e));return(r==="curveMonotone"||r==="curveBump")&&n?YI["".concat(r).concat(n==="vertical"?"Y":"X")]:YI[r]||Hx},ixe=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,a=i===void 0?[]:i,s=e.baseLine,o=e.layout,c=e.connectNulls,u=c===void 0?!1:c,d=rxe(r,o),f=u?a.filter(function(v){return uv(v)}):a,h;if(Array.isArray(s)){var p=u?s.filter(function(v){return uv(v)}):s,y=f.map(function(v,b){return GI(GI({},v),{},{base:p[b]})});return o==="vertical"?h=ev().y(kh).x1(Nh).x0(function(v){return v.base.x}):h=ev().x(Nh).y1(kh).y0(function(v){return v.base.y}),h.defined(uv).curve(d),h(y)}return o==="vertical"&&je(s)?h=ev().y(kh).x1(Nh).x0(s):je(s)?h=ev().x(Nh).y1(kh).y0(s):h=Mz().x(Nh).y(kh),h.defined(uv).curve(d),h(f)},Dc=function(e){var n=e.className,r=e.points,i=e.path,a=e.pathRef;if((!r||!r.length)&&!i)return null;var s=r&&r.length?ixe(e):i;return k.createElement("path",K2({},Ke(e,!1),Ry(e),{className:dt("recharts-curve",n),d:s,ref:a}))},BF={exports:{}},axe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",sxe=axe,oxe=sxe;function UF(){}function WF(){}WF.resetWarningCache=UF;var lxe=function(){function t(r,i,a,s,o,c){if(c!==oxe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:WF,resetWarningCache:UF};return n.PropTypes=n,n};BF.exports=lxe();var cxe=BF.exports;const kt=Ot(cxe);var uxe=Object.getOwnPropertyNames,dxe=Object.getOwnPropertySymbols,fxe=Object.prototype.hasOwnProperty;function XI(t,e){return function(r,i,a){return t(r,i,a)&&e(r,i,a)}}function dv(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);var a=i.cache,s=a.get(n),o=a.get(r);if(s&&o)return s===r&&o===n;a.set(n,r),a.set(r,n);var c=t(n,r,i);return a.delete(n),a.delete(r),c}}function hxe(t){return t!=null?t[Symbol.toStringTag]:void 0}function QI(t){return uxe(t).concat(dxe(t))}var pxe=Object.hasOwn||function(t,e){return fxe.call(t,e)};function vu(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var mxe="__v",gxe="__o",vxe="_owner",JI=Object.getOwnPropertyDescriptor,ZI=Object.keys;function yxe(t,e,n){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function xxe(t,e){return vu(t.getTime(),e.getTime())}function bxe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function wxe(t,e){return t===e}function eD(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=t.entries(),s,o,c=0;(s=a.next())&&!s.done;){for(var u=e.entries(),d=!1,f=0;(o=u.next())&&!o.done;){if(i[f]){f++;continue}var h=s.value,p=o.value;if(n.equals(h[0],p[0],c,f,t,e,n)&&n.equals(h[1],p[1],h[0],p[0],t,e,n)){d=i[f]=!0;break}f++}if(!d)return!1;c++}return!0}var _xe=vu;function Sxe(t,e,n){var r=ZI(t),i=r.length;if(ZI(e).length!==i)return!1;for(;i-- >0;)if(!KF(t,e,n,r[i]))return!1;return!0}function Oh(t,e,n){var r=QI(t),i=r.length;if(QI(e).length!==i)return!1;for(var a,s,o;i-- >0;)if(a=r[i],!KF(t,e,n,a)||(s=JI(t,a),o=JI(e,a),(s||o)&&(!s||!o||s.configurable!==o.configurable||s.enumerable!==o.enumerable||s.writable!==o.writable)))return!1;return!0}function jxe(t,e){return vu(t.valueOf(),e.valueOf())}function Axe(t,e){return t.source===e.source&&t.flags===e.flags}function tD(t,e,n){var r=t.size;if(r!==e.size)return!1;if(!r)return!0;for(var i=new Array(r),a=t.values(),s,o;(s=a.next())&&!s.done;){for(var c=e.values(),u=!1,d=0;(o=c.next())&&!o.done;){if(!i[d]&&n.equals(s.value,o.value,s.value,o.value,t,e,n)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function Pxe(t,e){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function Exe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function KF(t,e,n,r){return(r===vxe||r===gxe||r===mxe)&&(t.$$typeof||e.$$typeof)?!0:pxe(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}var Txe="[object Arguments]",Cxe="[object Boolean]",Nxe="[object Date]",kxe="[object Error]",Oxe="[object Map]",Ixe="[object Number]",Dxe="[object Object]",Mxe="[object RegExp]",Rxe="[object Set]",Lxe="[object String]",$xe="[object URL]",zxe=Array.isArray,nD=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,rD=Object.assign,Fxe=Object.prototype.toString.call.bind(Object.prototype.toString);function Vxe(t){var e=t.areArraysEqual,n=t.areDatesEqual,r=t.areErrorsEqual,i=t.areFunctionsEqual,a=t.areMapsEqual,s=t.areNumbersEqual,o=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,u=t.areRegExpsEqual,d=t.areSetsEqual,f=t.areTypedArraysEqual,h=t.areUrlsEqual,p=t.unknownTagComparators;return function(v,b,x){if(v===b)return!0;if(v==null||b==null)return!1;var _=typeof v;if(_!==typeof b)return!1;if(_!=="object")return _==="number"?s(v,b,x):_==="function"?i(v,b,x):!1;var S=v.constructor;if(S!==b.constructor)return!1;if(S===Object)return o(v,b,x);if(zxe(v))return e(v,b,x);if(nD!=null&&nD(v))return f(v,b,x);if(S===Date)return n(v,b,x);if(S===RegExp)return u(v,b,x);if(S===Map)return a(v,b,x);if(S===Set)return d(v,b,x);var T=Fxe(v);if(T===Nxe)return n(v,b,x);if(T===Mxe)return u(v,b,x);if(T===Oxe)return a(v,b,x);if(T===Rxe)return d(v,b,x);if(T===Dxe)return typeof v.then!="function"&&typeof b.then!="function"&&o(v,b,x);if(T===$xe)return h(v,b,x);if(T===kxe)return r(v,b,x);if(T===Txe)return o(v,b,x);if(T===Cxe||T===Ixe||T===Lxe)return c(v,b,x);if(p){var E=p[T];if(!E){var A=hxe(v);A&&(E=p[A])}if(E)return E(v,b,x)}return!1}}function Bxe(t){var e=t.circular,n=t.createCustomConfig,r=t.strict,i={areArraysEqual:r?Oh:yxe,areDatesEqual:xxe,areErrorsEqual:bxe,areFunctionsEqual:wxe,areMapsEqual:r?XI(eD,Oh):eD,areNumbersEqual:_xe,areObjectsEqual:r?Oh:Sxe,arePrimitiveWrappersEqual:jxe,areRegExpsEqual:Axe,areSetsEqual:r?XI(tD,Oh):tD,areTypedArraysEqual:r?Oh:Pxe,areUrlsEqual:Exe,unknownTagComparators:void 0};if(n&&(i=rD({},i,n(i))),e){var a=dv(i.areArraysEqual),s=dv(i.areMapsEqual),o=dv(i.areObjectsEqual),c=dv(i.areSetsEqual);i=rD({},i,{areArraysEqual:a,areMapsEqual:s,areObjectsEqual:o,areSetsEqual:c})}return i}function Uxe(t){return function(e,n,r,i,a,s,o){return t(e,n,o)}}function Wxe(t){var e=t.circular,n=t.comparator,r=t.createState,i=t.equals,a=t.strict;if(r)return function(c,u){var d=r(),f=d.cache,h=f===void 0?e?new WeakMap:void 0:f,p=d.meta;return n(c,u,{cache:h,equals:i,meta:p,strict:a})};if(e)return function(c,u){return n(c,u,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var s={cache:void 0,equals:i,meta:void 0,strict:a};return function(c,u){return n(c,u,s)}}var Kxe=Ml();Ml({strict:!0});Ml({circular:!0});Ml({circular:!0,strict:!0});Ml({createInternalComparator:function(){return vu}});Ml({strict:!0,createInternalComparator:function(){return vu}});Ml({circular:!0,createInternalComparator:function(){return vu}});Ml({circular:!0,createInternalComparator:function(){return vu},strict:!0});function Ml(t){t===void 0&&(t={});var e=t.circular,n=e===void 0?!1:e,r=t.createInternalComparator,i=t.createState,a=t.strict,s=a===void 0?!1:a,o=Bxe(t),c=Vxe(o),u=r?r(c):Uxe(c);return Wxe({circular:n,comparator:c,createState:i,equals:u,strict:s})}function qxe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function iD(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(a){n<0&&(n=a),a-n>e?(t(a),n=-1):qxe(i)};requestAnimationFrame(r)}function q2(t){"@babel/helpers - typeof";return q2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q2(t)}function Hxe(t){return Qxe(t)||Xxe(t)||Yxe(t)||Gxe()}function Gxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yxe(t,e){if(t){if(typeof t=="string")return aD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aD(t,e)}}function aD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Xxe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Qxe(t){if(Array.isArray(t))return t}function Jxe(){var t={},e=function(){return null},n=!1,r=function i(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var s=a,o=Hxe(s),c=o[0],u=o.slice(1);if(typeof c=="number"){iD(i.bind(null,u),c);return}i(c),iD(i.bind(null,u));return}q2(a)==="object"&&(t=a,e(t)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,r(a)},subscribe:function(a){return e=a,function(){e=function(){return null}}}}}function jm(t){"@babel/helpers - typeof";return jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jm(t)}function sD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sD(Object(n),!0).forEach(function(r){qF(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qF(t,e,n){return e=Zxe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zxe(t){var e=ebe(t,"string");return jm(e)==="symbol"?e:String(e)}function ebe(t,e){if(jm(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jm(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tbe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(a){return i.includes(a)})})},nbe=function(e){return e},rbe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},vp=function(e,n){return Object.keys(n).reduce(function(r,i){return oD(oD({},r),{},qF({},i,e(i,n[i])))},{})},lD=function(e,n,r){return e.map(function(i){return"".concat(rbe(i)," ").concat(n,"ms ").concat(r)}).join(",")};function ibe(t,e){return obe(t)||sbe(t,e)||HF(t,e)||abe()}function abe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sbe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function obe(t){if(Array.isArray(t))return t}function lbe(t){return dbe(t)||ube(t)||HF(t)||cbe()}function cbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HF(t,e){if(t){if(typeof t=="string")return H2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H2(t,e)}}function ube(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function dbe(t){if(Array.isArray(t))return H2(t)}function H2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var h0=1e-4,GF=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},YF=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},cD=function(e,n){return function(r){var i=GF(e,n);return YF(i,r)}},fbe=function(e,n){return function(r){var i=GF(e,n),a=[].concat(lbe(i.map(function(s,o){return s*o}).slice(1)),[0]);return YF(a,r)}},uD=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],a=n[1],s=n[2],o=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,a=0,s=1,o=1;break;case"ease":i=.25,a=.1,s=.25,o=1;break;case"ease-in":i=.42,a=0,s=1,o=1;break;case"ease-out":i=.42,a=0,s=.58,o=1;break;case"ease-in-out":i=0,a=0,s=.58,o=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(b){return parseFloat(b)}),d=ibe(u,4);i=d[0],a=d[1],s=d[2],o=d[3]}}}var f=cD(i,s),h=cD(a,o),p=fbe(i,s),y=function(x){return x>1?1:x<0?0:x},v=function(x){for(var _=x>1?1:x,S=_,T=0;T<8;++T){var E=f(S)-_,A=p(S);if(Math.abs(E-_)<h0||A<h0)return h(S);S=y(S-E/A)}return h(S)};return v.isStepper=!1,v},hbe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,a=i===void 0?8:i,s=e.dt,o=s===void 0?17:s,c=function(d,f,h){var p=-(d-f)*r,y=h*a,v=h+(p-y)*o/1e3,b=h*o/1e3+d;return Math.abs(b-f)<h0&&Math.abs(v)<h0?[f,0]:[b,v]};return c.isStepper=!0,c.dt=o,c},pbe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return uD(i);case"spring":return hbe();default:if(i.split("(")[0]==="cubic-bezier")return uD(i)}return typeof i=="function"?i:null};function Am(t){"@babel/helpers - typeof";return Am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Am(t)}function dD(t){return vbe(t)||gbe(t)||XF(t)||mbe()}function mbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gbe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function vbe(t){if(Array.isArray(t))return Y2(t)}function fD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fD(Object(n),!0).forEach(function(r){G2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function G2(t,e,n){return e=ybe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ybe(t){var e=xbe(t,"string");return Am(e)==="symbol"?e:String(e)}function xbe(t,e){if(Am(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Am(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bbe(t,e){return Sbe(t)||_be(t,e)||XF(t,e)||wbe()}function wbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XF(t,e){if(t){if(typeof t=="string")return Y2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y2(t,e)}}function Y2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _be(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Sbe(t){if(Array.isArray(t))return t}var p0=function(e,n,r){return e+(n-e)*r},X2=function(e){var n=e.from,r=e.to;return n!==r},jbe=function t(e,n,r){var i=vp(function(a,s){if(X2(s)){var o=e(s.from,s.to,s.velocity),c=bbe(o,2),u=c[0],d=c[1];return gr(gr({},s),{},{from:u,velocity:d})}return s},n);return r<1?vp(function(a,s){return X2(s)?gr(gr({},s),{},{velocity:p0(s.velocity,i[a].velocity,r),from:p0(s.from,i[a].from,r)}):s},n):t(e,i,r-1)};const Abe=function(t,e,n,r,i){var a=tbe(t,e),s=a.reduce(function(b,x){return gr(gr({},b),{},G2({},x,[t[x],e[x]]))},{}),o=a.reduce(function(b,x){return gr(gr({},b),{},G2({},x,{from:t[x],velocity:0,to:e[x]}))},{}),c=-1,u,d,f=function(){return null},h=function(){return vp(function(x,_){return _.from},o)},p=function(){return!Object.values(o).filter(X2).length},y=function(x){u||(u=x);var _=x-u,S=_/n.dt;o=jbe(n,o,S),i(gr(gr(gr({},t),e),h())),u=x,p()||(c=requestAnimationFrame(f))},v=function(x){d||(d=x);var _=(x-d)/r,S=vp(function(E,A){return p0.apply(void 0,dD(A).concat([n(_)]))},s);if(i(gr(gr(gr({},t),e),S)),_<1)c=requestAnimationFrame(f);else{var T=vp(function(E,A){return p0.apply(void 0,dD(A).concat([n(1)]))},s);i(gr(gr(gr({},t),e),T))}};return f=n.isStepper?y:v,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function lf(t){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lf(t)}var Pbe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Ebe(t,e){if(t==null)return{};var n=Tbe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Tbe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Zw(t){return Obe(t)||kbe(t)||Nbe(t)||Cbe()}function Cbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nbe(t,e){if(t){if(typeof t=="string")return Q2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q2(t,e)}}function kbe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Obe(t){if(Array.isArray(t))return Q2(t)}function Q2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ya(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hD(Object(n),!0).forEach(function(r){Hh(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hh(t,e,n){return e=QF(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ibe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dbe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,QF(r.key),r)}}function Mbe(t,e,n){return e&&Dbe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function QF(t){var e=Rbe(t,"string");return lf(e)==="symbol"?e:String(e)}function Rbe(t,e){if(lf(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(lf(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lbe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&J2(t,e)}function J2(t,e){return J2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},J2(t,e)}function $be(t){var e=zbe();return function(){var r=m0(t),i;if(e){var a=m0(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return Z2(this,i)}}function Z2(t,e){if(e&&(lf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eS(t)}function eS(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zbe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function m0(t){return m0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},m0(t)}var Ia=function(t){Lbe(n,t);var e=$be(n);function n(r,i){var a;Ibe(this,n),a=e.call(this,r,i);var s=a.props,o=s.isActive,c=s.attributeName,u=s.from,d=s.to,f=s.steps,h=s.children,p=s.duration;if(a.handleStyleChange=a.handleStyleChange.bind(eS(a)),a.changeStyle=a.changeStyle.bind(eS(a)),!o||p<=0)return a.state={style:{}},typeof h=="function"&&(a.state={style:d}),Z2(a);if(f&&f.length)a.state={style:f[0].style};else if(u){if(typeof h=="function")return a.state={style:u},Z2(a);a.state={style:c?Hh({},c,u):u}}else a.state={style:{}};return a}return Mbe(n,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,s=i.canBegin;this.mounted=!0,!(!a||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isActive,o=a.canBegin,c=a.attributeName,u=a.shouldReAnimate,d=a.to,f=a.from,h=this.state.style;if(o){if(!s){var p={style:c?Hh({},c,d):d};this.state&&h&&(c&&h[c]!==d||!c&&h!==d)&&this.setState(p);return}if(!(Kxe(i.to,d)&&i.canBegin&&i.isActive)){var y=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=y||u?f:i.to;if(this.state&&h){var b={style:c?Hh({},c,v):v};(c&&h[c]!==v||!c&&h!==v)&&this.setState(b)}this.runAnimation(ya(ya({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,s=i.from,o=i.to,c=i.duration,u=i.easing,d=i.begin,f=i.onAnimationEnd,h=i.onAnimationStart,p=Abe(s,o,pbe(u),c,this.changeStyle),y=function(){a.stopJSAnimation=p()};this.manager.start([h,d,y,c,f])}},{key:"runStepAnimation",value:function(i){var a=this,s=i.steps,o=i.begin,c=i.onAnimationStart,u=s[0],d=u.style,f=u.duration,h=f===void 0?0:f,p=function(v,b,x){if(x===0)return v;var _=b.duration,S=b.easing,T=S===void 0?"ease":S,E=b.style,A=b.properties,j=b.onAnimationEnd,P=x>0?s[x-1]:b,O=A||Object.keys(E);if(typeof T=="function"||T==="spring")return[].concat(Zw(v),[a.runJSAnimation.bind(a,{from:P.style,to:E,duration:_,easing:T}),_]);var D=lD(O,_,T),M=ya(ya(ya({},P.style),E),{},{transition:D});return[].concat(Zw(v),[M,_,j]).filter(nbe)};return this.manager.start([c].concat(Zw(s.reduce(p,[d,Math.max(h,o)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=Jxe());var a=i.begin,s=i.duration,o=i.attributeName,c=i.to,u=i.easing,d=i.onAnimationStart,f=i.onAnimationEnd,h=i.steps,p=i.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var v=o?Hh({},o,c):c,b=lD(Object.keys(v),s,u);y.start([d,a,ya(ya({},v),{},{transition:b}),s,f])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var o=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=Ebe(i,Pbe),u=k.Children.count(a),d=this.state.style;if(typeof a=="function")return a(d);if(!o||u===0||s<=0)return a;var f=function(p){var y=p.props,v=y.style,b=v===void 0?{}:v,x=y.className,_=k.cloneElement(p,ya(ya({},c),{},{style:ya(ya({},b),d),className:x}));return _};return u===1?f(k.Children.only(a)):H.createElement("div",null,k.Children.map(a,function(h){return f(h)}))}}]),n}(k.PureComponent);Ia.displayName="Animate";Ia.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ia.propTypes={from:kt.oneOfType([kt.object,kt.string]),to:kt.oneOfType([kt.object,kt.string]),attributeName:kt.string,duration:kt.number,begin:kt.number,easing:kt.oneOfType([kt.string,kt.func]),steps:kt.arrayOf(kt.shape({duration:kt.number.isRequired,style:kt.object.isRequired,easing:kt.oneOfType([kt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),kt.func]),properties:kt.arrayOf("string"),onAnimationEnd:kt.func})),children:kt.oneOfType([kt.node,kt.func]),isActive:kt.bool,canBegin:kt.bool,onAnimationEnd:kt.func,shouldReAnimate:kt.bool,onAnimationStart:kt.func,onAnimationReStart:kt.func};function Pm(t){"@babel/helpers - typeof";return Pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pm(t)}function g0(){return g0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},g0.apply(this,arguments)}function Fbe(t,e){return Wbe(t)||Ube(t,e)||Bbe(t,e)||Vbe()}function Vbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bbe(t,e){if(t){if(typeof t=="string")return pD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pD(t,e)}}function pD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ube(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function Wbe(t){if(Array.isArray(t))return t}function mD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mD(Object(n),!0).forEach(function(r){Kbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kbe(t,e,n){return e=qbe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qbe(t){var e=Hbe(t,"string");return Pm(e)=="symbol"?e:e+""}function Hbe(t,e){if(Pm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Pm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vD=function(e,n,r,i,a){var s=Math.min(Math.abs(r)/2,Math.abs(i)/2),o=i>=0?1:-1,c=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,d;if(s>0&&a instanceof Array){for(var f=[0,0,0,0],h=0,p=4;h<p;h++)f[h]=a[h]>s?s:a[h];d="M".concat(e,",").concat(n+o*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(e+c*f[0],",").concat(n)),d+="L ".concat(e+r-c*f[1],",").concat(n),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+o*f[1])),d+="L ".concat(e+r,",").concat(n+i-o*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(e+r-c*f[2],",").concat(n+i)),d+="L ".concat(e+c*f[3],",").concat(n+i),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+i-o*f[3])),d+="Z"}else if(s>0&&a===+a&&a>0){var y=Math.min(s,a);d="M ".concat(e,",").concat(n+o*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+c*y,",").concat(n,`
            L `).concat(e+r-c*y,",").concat(n,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+r,",").concat(n+o*y,`
            L `).concat(e+r,",").concat(n+i-o*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+r-c*y,",").concat(n+i,`
            L `).concat(e+c*y,",").concat(n+i,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e,",").concat(n+i-o*y," Z")}else d="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return d},Gbe=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,a=n.x,s=n.y,o=n.width,c=n.height;if(Math.abs(o)>0&&Math.abs(c)>0){var u=Math.min(a,a+o),d=Math.max(a,a+o),f=Math.min(s,s+c),h=Math.max(s,s+c);return r>=u&&r<=d&&i>=f&&i<=h}return!1},Ybe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},tE=function(e){var n=gD(gD({},Ybe),e),r=k.useRef(),i=k.useState(-1),a=Fbe(i,2),s=a[0],o=a[1];k.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var T=r.current.getTotalLength();T&&o(T)}catch{}},[]);var c=n.x,u=n.y,d=n.width,f=n.height,h=n.radius,p=n.className,y=n.animationEasing,v=n.animationDuration,b=n.animationBegin,x=n.isAnimationActive,_=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var S=dt("recharts-rectangle",p);return _?H.createElement(Ia,{canBegin:s>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:v,animationEasing:y,isActive:_},function(T){var E=T.width,A=T.height,j=T.x,P=T.y;return H.createElement(Ia,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:v,isActive:x,easing:y},H.createElement("path",g0({},Ke(n,!0),{className:S,d:vD(j,P,E,A,h),ref:r})))}):H.createElement("path",g0({},Ke(n,!0),{className:S,d:vD(c,u,d,f,h)}))},Xbe=["points","className","baseLinePoints","connectNulls"];function hd(){return hd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hd.apply(this,arguments)}function Qbe(t,e){if(t==null)return{};var n=Jbe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Jbe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function yD(t){return nwe(t)||twe(t)||ewe(t)||Zbe()}function Zbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ewe(t,e){if(t){if(typeof t=="string")return tS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tS(t,e)}}function twe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function nwe(t){if(Array.isArray(t))return tS(t)}function tS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var xD=function(e){return e&&e.x===+e.x&&e.y===+e.y},rwe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){xD(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),xD(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},yp=function(e,n){var r=rwe(e);n&&(r=[r.reduce(function(a,s){return[].concat(yD(a),yD(s))},[])]);var i=r.map(function(a){return a.reduce(function(s,o,c){return"".concat(s).concat(c===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},iwe=function(e,n,r){var i=yp(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(yp(n.reverse(),r).slice(1))},awe=function(e){var n=e.points,r=e.className,i=e.baseLinePoints,a=e.connectNulls,s=Qbe(e,Xbe);if(!n||!n.length)return null;var o=dt("recharts-polygon",r);if(i&&i.length){var c=s.stroke&&s.stroke!=="none",u=iwe(n,i,a);return H.createElement("g",{className:o},H.createElement("path",hd({},Ke(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:u})),c?H.createElement("path",hd({},Ke(s,!0),{fill:"none",d:yp(n,a)})):null,c?H.createElement("path",hd({},Ke(s,!0),{fill:"none",d:yp(i,a)})):null)}var d=yp(n,a);return H.createElement("path",hd({},Ke(s,!0),{fill:d.slice(-1)==="Z"?s.fill:"none",className:o,d}))};function nS(){return nS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nS.apply(this,arguments)}var gg=function(e){var n=e.cx,r=e.cy,i=e.r,a=e.className,s=dt("recharts-dot",a);return n===+n&&r===+r&&i===+i?k.createElement("circle",nS({},Ke(e,!1),Ry(e),{className:s,cx:n,cy:r,r:i})):null};function Em(t){"@babel/helpers - typeof";return Em=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Em(t)}var swe=["x","y","top","left","width","height","className"];function rS(){return rS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rS.apply(this,arguments)}function bD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function owe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bD(Object(n),!0).forEach(function(r){lwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lwe(t,e,n){return e=cwe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cwe(t){var e=uwe(t,"string");return Em(e)=="symbol"?e:e+""}function uwe(t,e){if(Em(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Em(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dwe(t,e){if(t==null)return{};var n=fwe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fwe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var hwe=function(e,n,r,i,a,s){return"M".concat(e,",").concat(a,"v").concat(i,"M").concat(s,",").concat(n,"h").concat(r)},pwe=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,s=e.top,o=s===void 0?0:s,c=e.left,u=c===void 0?0:c,d=e.width,f=d===void 0?0:d,h=e.height,p=h===void 0?0:h,y=e.className,v=dwe(e,swe),b=owe({x:r,y:a,top:o,left:u,width:f,height:p},v);return!je(r)||!je(a)||!je(f)||!je(p)||!je(o)||!je(u)?null:H.createElement("path",rS({},Ke(b,!0),{className:dt("recharts-cross",y),d:hwe(r,a,f,p,o,u)}))},mwe=ib,gwe=cF,vwe=ys;function ywe(t,e){return t&&t.length?mwe(t,vwe(e),gwe):void 0}var xwe=ywe;const bwe=Ot(xwe);var wwe=ib,_we=ys,Swe=uF;function jwe(t,e){return t&&t.length?wwe(t,_we(e),Swe):void 0}var Awe=jwe;const Pwe=Ot(Awe);var Ewe=["cx","cy","angle","ticks","axisLine"],Twe=["ticks","tick","angle","tickFormatter","stroke"];function cf(t){"@babel/helpers - typeof";return cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cf(t)}function xp(){return xp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xp.apply(this,arguments)}function wD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wD(Object(n),!0).forEach(function(r){lb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _D(t,e){if(t==null)return{};var n=Cwe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Cwe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Nwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function SD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ZF(r.key),r)}}function kwe(t,e,n){return e&&SD(t.prototype,e),n&&SD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Owe(t,e,n){return e=v0(e),Iwe(t,JF()?Reflect.construct(e,n||[],v0(t).constructor):e.apply(t,n))}function Iwe(t,e){if(e&&(cf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dwe(t)}function Dwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JF=function(){return!!t})()}function v0(t){return v0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},v0(t)}function Mwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iS(t,e)}function iS(t,e){return iS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},iS(t,e)}function lb(t,e,n){return e=ZF(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZF(t){var e=Rwe(t,"string");return cf(e)=="symbol"?e:e+""}function Rwe(t,e){if(cf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(cf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var cb=function(t){function e(){return Nwe(this,e),Owe(this,e,arguments)}return Mwe(e,t),kwe(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,a=this.props,s=a.angle,o=a.cx,c=a.cy;return Qt(o,c,i,s)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.angle,o=r.ticks,c=bwe(o,function(d){return d.coordinate||0}),u=Pwe(o,function(d){return d.coordinate||0});return{cx:i,cy:a,startAngle:s,endAngle:s,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.angle,o=r.ticks,c=r.axisLine,u=_D(r,Ewe),d=o.reduce(function(y,v){return[Math.min(y[0],v.coordinate),Math.max(y[1],v.coordinate)]},[1/0,-1/0]),f=Qt(i,a,d[0],s),h=Qt(i,a,d[1],s),p=rc(rc(rc({},Ke(u,!1)),{},{fill:"none"},Ke(c,!1)),{},{x1:f.x,y1:f.y,x2:h.x,y2:h.y});return H.createElement("line",xp({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,s=i.tick,o=i.angle,c=i.tickFormatter,u=i.stroke,d=_D(i,Twe),f=this.getTickTextAnchor(),h=Ke(d,!1),p=Ke(s,!1),y=a.map(function(v,b){var x=r.getTickValueCoord(v),_=rc(rc(rc(rc({textAnchor:f,transform:"rotate(".concat(90-o,", ").concat(x.x,", ").concat(x.y,")")},h),{},{stroke:"none",fill:u},p),{},{index:b},x),{},{payload:v});return H.createElement(gt,xp({className:dt("recharts-polar-radius-axis-tick",$F(s)),key:"tick-".concat(v.coordinate)},Gc(r.props,v,b)),e.renderTickItem(s,_,c?c(v.value,b):v.value))});return H.createElement(gt,{className:"recharts-polar-radius-axis-ticks"},y)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.axisLine,s=r.tick;return!i||!i.length?null:H.createElement(gt,{className:dt("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),s&&this.renderTicks(),or.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,a){var s;return H.isValidElement(r)?s=H.cloneElement(r,i):Je(r)?s=r(i):s=H.createElement(Yc,xp({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),s}}])}(k.PureComponent);lb(cb,"displayName","PolarRadiusAxis");lb(cb,"axisType","radiusAxis");lb(cb,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function uf(t){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uf(t)}function pc(){return pc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pc.apply(this,arguments)}function jD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ic(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jD(Object(n),!0).forEach(function(r){ub(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lwe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function AD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,t8(r.key),r)}}function $we(t,e,n){return e&&AD(t.prototype,e),n&&AD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function zwe(t,e,n){return e=y0(e),Fwe(t,e8()?Reflect.construct(e,n||[],y0(t).constructor):e.apply(t,n))}function Fwe(t,e){if(e&&(uf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vwe(t)}function Vwe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function e8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e8=function(){return!!t})()}function y0(t){return y0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},y0(t)}function Bwe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aS(t,e)}function aS(t,e){return aS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},aS(t,e)}function ub(t,e,n){return e=t8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t8(t){var e=Uwe(t,"string");return uf(e)=="symbol"?e:e+""}function Uwe(t,e){if(uf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(uf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Wwe=Math.PI/180,PD=1e-5,db=function(t){function e(){return Lwe(this,e),zwe(this,e,arguments)}return Bwe(e,t),$we(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.cx,s=i.cy,o=i.radius,c=i.orientation,u=i.tickSize,d=u||8,f=Qt(a,s,o,r.coordinate),h=Qt(a,s,o+(c==="inner"?-1:1)*d,r.coordinate);return{x1:f.x,y1:f.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,a=Math.cos(-r.coordinate*Wwe),s;return a>PD?s=i==="outer"?"start":"end":a<-PD?s=i==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,a=r.cy,s=r.radius,o=r.axisLine,c=r.axisLineType,u=ic(ic({},Ke(this.props,!1)),{},{fill:"none"},Ke(o,!1));if(c==="circle")return H.createElement(gg,pc({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:a,r:s}));var d=this.props.ticks,f=d.map(function(h){return Qt(i,a,s,h.coordinate)});return H.createElement(awe,pc({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,a=i.ticks,s=i.tick,o=i.tickLine,c=i.tickFormatter,u=i.stroke,d=Ke(this.props,!1),f=Ke(s,!1),h=ic(ic({},d),{},{fill:"none"},Ke(o,!1)),p=a.map(function(y,v){var b=r.getTickLineCoord(y),x=r.getTickTextAnchor(y),_=ic(ic(ic({textAnchor:x},d),{},{stroke:"none",fill:u},f),{},{index:v,payload:y,x:b.x2,y:b.y2});return H.createElement(gt,pc({className:dt("recharts-polar-angle-axis-tick",$F(s)),key:"tick-".concat(y.coordinate)},Gc(r.props,y,v)),o&&H.createElement("line",pc({className:"recharts-polar-angle-axis-tick-line"},h,b)),s&&e.renderTickItem(s,_,c?c(y.value,v):y.value))});return H.createElement(gt,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var r=this.props,i=r.ticks,a=r.radius,s=r.axisLine;return a<=0||!i||!i.length?null:H.createElement(gt,{className:dt("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,a){var s;return H.isValidElement(r)?s=H.cloneElement(r,i):Je(r)?s=r(i):s=H.createElement(Yc,pc({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),s}}])}(k.PureComponent);ub(db,"displayName","PolarAngleAxis");ub(db,"axisType","angleAxis");ub(db,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Kwe=a6,qwe=Kwe(Object.getPrototypeOf,Object),Hwe=qwe,Gwe=mo,Ywe=Hwe,Xwe=go,Qwe="[object Object]",Jwe=Function.prototype,Zwe=Object.prototype,n8=Jwe.toString,e1e=Zwe.hasOwnProperty,t1e=n8.call(Object);function n1e(t){if(!Xwe(t)||Gwe(t)!=Qwe)return!1;var e=Ywe(t);if(e===null)return!0;var n=e1e.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&n8.call(n)==t1e}var r1e=n1e;const i1e=Ot(r1e);var a1e=mo,s1e=go,o1e="[object Boolean]";function l1e(t){return t===!0||t===!1||s1e(t)&&a1e(t)==o1e}var c1e=l1e;const u1e=Ot(c1e);function Tm(t){"@babel/helpers - typeof";return Tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tm(t)}function x0(){return x0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},x0.apply(this,arguments)}function d1e(t,e){return m1e(t)||p1e(t,e)||h1e(t,e)||f1e()}function f1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h1e(t,e){if(t){if(typeof t=="string")return ED(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ED(t,e)}}function ED(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p1e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function m1e(t){if(Array.isArray(t))return t}function TD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function CD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TD(Object(n),!0).forEach(function(r){g1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function g1e(t,e,n){return e=v1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v1e(t){var e=y1e(t,"string");return Tm(e)=="symbol"?e:e+""}function y1e(t,e){if(Tm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ND=function(e,n,r,i,a){var s=r-i,o;return o="M ".concat(e,",").concat(n),o+="L ".concat(e+r,",").concat(n),o+="L ".concat(e+r-s/2,",").concat(n+a),o+="L ".concat(e+r-s/2-i,",").concat(n+a),o+="L ".concat(e,",").concat(n," Z"),o},x1e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},b1e=function(e){var n=CD(CD({},x1e),e),r=k.useRef(),i=k.useState(-1),a=d1e(i,2),s=a[0],o=a[1];k.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var S=r.current.getTotalLength();S&&o(S)}catch{}},[]);var c=n.x,u=n.y,d=n.upperWidth,f=n.lowerWidth,h=n.height,p=n.className,y=n.animationEasing,v=n.animationDuration,b=n.animationBegin,x=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||h!==+h||d===0&&f===0||h===0)return null;var _=dt("recharts-trapezoid",p);return x?H.createElement(Ia,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:h,x:c,y:u},duration:v,animationEasing:y,isActive:x},function(S){var T=S.upperWidth,E=S.lowerWidth,A=S.height,j=S.x,P=S.y;return H.createElement(Ia,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:v,easing:y},H.createElement("path",x0({},Ke(n,!0),{className:_,d:ND(j,P,T,E,A),ref:r})))}):H.createElement("g",null,H.createElement("path",x0({},Ke(n,!0),{className:_,d:ND(c,u,d,f,h)})))},w1e=["option","shapeType","propTransformer","activeClassName","isActive"];function Cm(t){"@babel/helpers - typeof";return Cm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cm(t)}function _1e(t,e){if(t==null)return{};var n=S1e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function S1e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function kD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function b0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kD(Object(n),!0).forEach(function(r){j1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function j1e(t,e,n){return e=A1e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A1e(t){var e=P1e(t,"string");return Cm(e)=="symbol"?e:e+""}function P1e(t,e){if(Cm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Cm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function E1e(t,e){return b0(b0({},e),t)}function T1e(t,e){return t==="symbols"}function OD(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return H.createElement(tE,n);case"trapezoid":return H.createElement(b1e,n);case"sector":return H.createElement(VF,n);case"symbols":if(T1e(e))return H.createElement(bP,n);break;default:return null}}function C1e(t){return k.isValidElement(t)?t.props:t}function r8(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?E1e:r,a=t.activeClassName,s=a===void 0?"recharts-active-shape":a,o=t.isActive,c=_1e(t,w1e),u;if(k.isValidElement(e))u=k.cloneElement(e,b0(b0({},c),C1e(e)));else if(Je(e))u=e(c);else if(i1e(e)&&!u1e(e)){var d=i(e,c);u=H.createElement(OD,{shapeType:n,elementProps:d})}else{var f=c;u=H.createElement(OD,{shapeType:n,elementProps:f})}return o?H.createElement(gt,{className:s},u):u}function fb(t,e){return e!=null&&"trapezoids"in t.props}function hb(t,e){return e!=null&&"sectors"in t.props}function Nm(t,e){return e!=null&&"points"in t.props}function N1e(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,a=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&a}function k1e(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function O1e(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function I1e(t,e){var n;return fb(t,e)?n=N1e:hb(t,e)?n=k1e:Nm(t,e)&&(n=O1e),n}function D1e(t,e){var n;return fb(t,e)?n="trapezoids":hb(t,e)?n="sectors":Nm(t,e)&&(n="points"),n}function M1e(t,e){if(fb(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(hb(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Nm(t,e)?e.payload:{}}function R1e(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=D1e(n,e),a=M1e(n,e),s=r.filter(function(c,u){var d=Xc(a,c),f=n.props[i].filter(function(y){var v=I1e(n,e);return v(y,e)}),h=n.props[i].indexOf(f[f.length-1]),p=u===h;return d&&p}),o=r.indexOf(s[s.length-1]);return o}var Fv;function df(t){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},df(t)}function pd(){return pd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pd.apply(this,arguments)}function ID(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Gt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ID(Object(n),!0).forEach(function(r){Ji(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ID(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function L1e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a8(r.key),r)}}function $1e(t,e,n){return e&&DD(t.prototype,e),n&&DD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function z1e(t,e,n){return e=w0(e),F1e(t,i8()?Reflect.construct(e,n||[],w0(t).constructor):e.apply(t,n))}function F1e(t,e){if(e&&(df(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return V1e(t)}function V1e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i8=function(){return!!t})()}function w0(t){return w0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},w0(t)}function B1e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sS(t,e)}function sS(t,e){return sS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},sS(t,e)}function Ji(t,e,n){return e=a8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a8(t){var e=U1e(t,"string");return df(e)=="symbol"?e:e+""}function U1e(t,e){if(df(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(df(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Da=function(t){function e(n){var r;return L1e(this,e),r=z1e(this,e,[n]),Ji(r,"pieRef",null),Ji(r,"sectorRefs",[]),Ji(r,"id",pu("recharts-pie-")),Ji(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Je(i)&&i()}),Ji(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Je(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return B1e(e,t),$1e(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.label,o=a.labelLine,c=a.dataKey,u=a.valueKey,d=Ke(this.props,!1),f=Ke(s,!1),h=Ke(o,!1),p=s&&s.offsetRadius||20,y=r.map(function(v,b){var x=(v.startAngle+v.endAngle)/2,_=Qt(v.cx,v.cy,v.outerRadius+p,x),S=Gt(Gt(Gt(Gt({},d),v),{},{stroke:"none"},f),{},{index:b,textAnchor:e.getTextAnchor(_.x,v.cx)},_),T=Gt(Gt(Gt(Gt({},d),v),{},{fill:"none",stroke:v.fill},h),{},{index:b,points:[Qt(v.cx,v.cy,v.outerRadius,x),_]}),E=c;return it(c)&&it(u)?E="value":it(c)&&(E=u),H.createElement(gt,{key:"label-".concat(v.startAngle,"-").concat(v.endAngle,"-").concat(v.midAngle,"-").concat(b)},o&&e.renderLabelLineItem(o,T,"line"),e.renderLabelItem(s,S,Nn(v,E)))});return H.createElement(gt,{className:"recharts-pie-labels"},y)}},{key:"renderSectorsStatically",value:function(r){var i=this,a=this.props,s=a.activeShape,o=a.blendStroke,c=a.inactiveShape;return r.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&r.length!==1)return null;var f=i.isActiveIndex(d),h=c&&i.hasActiveIndex()?c:null,p=f?s:h,y=Gt(Gt({},u),{},{stroke:o?u.fill:u.stroke,tabIndex:-1});return H.createElement(gt,pd({ref:function(b){b&&!i.sectorRefs.includes(b)&&i.sectorRefs.push(b)},tabIndex:-1,className:"recharts-pie-sector"},Gc(i.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),H.createElement(r8,pd({option:p,isActive:f,shapeType:"sector"},y)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,a=i.sectors,s=i.isAnimationActive,o=i.animationBegin,c=i.animationDuration,u=i.animationEasing,d=i.animationId,f=this.state,h=f.prevSectors,p=f.prevIsAnimationActive;return H.createElement(Ia,{begin:o,duration:c,isActive:s,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(y){var v=y.t,b=[],x=a&&a[0],_=x.startAngle;return a.forEach(function(S,T){var E=h&&h[T],A=T>0?Mi(S,"paddingAngle",0):0;if(E){var j=Yn(E.endAngle-E.startAngle,S.endAngle-S.startAngle),P=Gt(Gt({},S),{},{startAngle:_+A,endAngle:_+j(v)+A});b.push(P),_=P.endAngle}else{var O=S.endAngle,D=S.startAngle,M=Yn(0,O-D),z=M(v),L=Gt(Gt({},S),{},{startAngle:_+A,endAngle:_+z+A});b.push(L),_=L.endAngle}}),H.createElement(gt,null,r.renderSectorsStatically(b))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var s=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"ArrowRight":{var o=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,a=r.isAnimationActive,s=this.state.prevSectors;return a&&i&&i.length&&(!s||!Xc(s,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,a=i.hide,s=i.sectors,o=i.className,c=i.label,u=i.cx,d=i.cy,f=i.innerRadius,h=i.outerRadius,p=i.isAnimationActive,y=this.state.isAnimationFinished;if(a||!s||!s.length||!je(u)||!je(d)||!je(f)||!je(h))return null;var v=dt("recharts-pie",o);return H.createElement(gt,{tabIndex:this.props.rootTabIndex,className:v,ref:function(x){r.pieRef=x}},this.renderSectors(),c&&this.renderLabels(s),or.renderCallByParent(this.props,null,!1),(!p||y)&&ra.renderCallByParent(this.props,s,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,a){if(H.isValidElement(r))return H.cloneElement(r,i);if(Je(r))return r(i);var s=dt("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return H.createElement(Dc,pd({},i,{key:a,type:"linear",className:s}))}},{key:"renderLabelItem",value:function(r,i,a){if(H.isValidElement(r))return H.cloneElement(r,i);var s=a;if(Je(r)&&(s=r(i),H.isValidElement(s)))return s;var o=dt("recharts-pie-label-text",typeof r!="boolean"&&!Je(r)?r.className:"");return H.createElement(Yc,pd({},i,{alignmentBaseline:"middle",className:o}),s)}}])}(k.PureComponent);Fv=Da;Ji(Da,"displayName","Pie");Ji(Da,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Ol.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Ji(Da,"parseDeltaAngle",function(t,e){var n=Kr(e-t),r=Math.min(Math.abs(e-t),360);return n*r});Ji(Da,"getRealPieData",function(t){var e=t.data,n=t.children,r=Ke(t,!1),i=Ri(n,Oa);return e&&e.length?e.map(function(a,s){return Gt(Gt(Gt({payload:a},r),a),i&&i[s]&&i[s].props)}):i&&i.length?i.map(function(a){return Gt(Gt({},r),a.props)}):[]});Ji(Da,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,i=e.width,a=e.height,s=LF(i,a),o=r+qr(t.cx,i,i/2),c=n+qr(t.cy,a,a/2),u=qr(t.innerRadius,s,0),d=qr(t.outerRadius,s,s*.8),f=t.maxRadius||Math.sqrt(i*i+a*a)/2;return{cx:o,cy:c,innerRadius:u,outerRadius:d,maxRadius:f}});Ji(Da,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?Gt(Gt({},e.type.defaultProps),e.props):e.props,i=Fv.getRealPieData(r);if(!i||!i.length)return null;var a=r.cornerRadius,s=r.startAngle,o=r.endAngle,c=r.paddingAngle,u=r.dataKey,d=r.nameKey,f=r.valueKey,h=r.tooltipType,p=Math.abs(r.minAngle),y=Fv.parseCoordinateOfPie(r,n),v=Fv.parseDeltaAngle(s,o),b=Math.abs(v),x=u;it(u)&&it(f)?(Ta(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x="value"):it(u)&&(Ta(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x=f);var _=i.filter(function(P){return Nn(P,x,0)!==0}).length,S=(b>=360?_:_-1)*c,T=b-_*p-S,E=i.reduce(function(P,O){var D=Nn(O,x,0);return P+(je(D)?D:0)},0),A;if(E>0){var j;A=i.map(function(P,O){var D=Nn(P,x,0),M=Nn(P,d,O),z=(je(D)?D:0)/E,L;O?L=j.endAngle+Kr(v)*c*(D!==0?1:0):L=s;var te=L+Kr(v)*((D!==0?p:0)+z*T),X=(L+te)/2,W=(y.innerRadius+y.outerRadius)/2,B=[{name:M,value:D,payload:P,dataKey:x,type:h}],F=Qt(y.cx,y.cy,W,X);return j=Gt(Gt(Gt({percent:z,cornerRadius:a,name:M,tooltipPayload:B,midAngle:X,middleRadius:W,tooltipPosition:F},P),y),{},{value:Nn(P,x),startAngle:L,endAngle:te,payload:P,paddingAngle:Kr(v)*c}),j})}return Gt(Gt({},y),{},{sectors:A,data:i})});var W1e=Math.ceil,K1e=Math.max;function q1e(t,e,n,r){for(var i=-1,a=K1e(W1e((e-t)/(n||1)),0),s=Array(a);a--;)s[r?a:++i]=t,t+=n;return s}var H1e=q1e,G1e=j6,MD=1/0,Y1e=17976931348623157e292;function X1e(t){if(!t)return t===0?t:0;if(t=G1e(t),t===MD||t===-MD){var e=t<0?-1:1;return e*Y1e}return t===t?t:0}var s8=X1e,Q1e=H1e,J1e=Qx,e1=s8;function Z1e(t){return function(e,n,r){return r&&typeof r!="number"&&J1e(e,n,r)&&(n=r=void 0),e=e1(e),n===void 0?(n=e,e=0):n=e1(n),r=r===void 0?e<n?1:-1:e1(r),Q1e(e,n,r,t)}}var e_e=Z1e,t_e=e_e,n_e=t_e(),r_e=n_e;const _0=Ot(r_e);function km(t){"@babel/helpers - typeof";return km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},km(t)}function RD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function LD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RD(Object(n),!0).forEach(function(r){o8(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function o8(t,e,n){return e=i_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i_e(t){var e=a_e(t,"string");return km(e)=="symbol"?e:e+""}function a_e(t,e){if(km(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(km(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var s_e=["Webkit","Moz","O","ms"],o_e=function(e,n){var r=e.replace(/(\w)/,function(a){return a.toUpperCase()}),i=s_e.reduce(function(a,s){return LD(LD({},a),{},o8({},s+r,n))},{});return i[e]=n,i};function ff(t){"@babel/helpers - typeof";return ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ff(t)}function S0(){return S0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},S0.apply(this,arguments)}function $D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function t1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$D(Object(n),!0).forEach(function(r){Ei(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$D(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function l_e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c8(r.key),r)}}function c_e(t,e,n){return e&&zD(t.prototype,e),n&&zD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function u_e(t,e,n){return e=j0(e),d_e(t,l8()?Reflect.construct(e,n||[],j0(t).constructor):e.apply(t,n))}function d_e(t,e){if(e&&(ff(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f_e(t)}function f_e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l8=function(){return!!t})()}function j0(t){return j0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},j0(t)}function h_e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oS(t,e)}function oS(t,e){return oS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},oS(t,e)}function Ei(t,e,n){return e=c8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c8(t){var e=p_e(t,"string");return ff(e)=="symbol"?e:e+""}function p_e(t,e){if(ff(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ff(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var m_e=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,a=e.x,s=e.width,o=e.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=mp().domain(_0(0,c)).range([a,a+s-o]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:d}},FD=function(e){return e.changedTouches&&!!e.changedTouches.length},hf=function(t){function e(n){var r;return l_e(this,e),r=u_e(this,e,[n]),Ei(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),Ei(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),Ei(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,a=i.endIndex,s=i.onDragEnd,o=i.startIndex;s==null||s({endIndex:a,startIndex:o})}),r.detachDragEndListener()}),Ei(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Ei(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Ei(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Ei(r,"handleSlideDragStart",function(i){var a=FD(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return h_e(e,t),c_e(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,a=r.endX,s=this.state.scaleValues,o=this.props,c=o.gap,u=o.data,d=u.length-1,f=Math.min(i,a),h=Math.max(i,a),p=e.getIndexInRange(s,f),y=e.getIndexInRange(s,h);return{startIndex:p-p%c,endIndex:y===d?d:y-y%c}}},{key:"getTextOfTick",value:function(r){var i=this.props,a=i.data,s=i.tickFormatter,o=i.dataKey,c=Nn(a[r],o,r);return Je(s)?s(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,a=i.slideMoveStartX,s=i.startX,o=i.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,h=c.startIndex,p=c.endIndex,y=c.onChange,v=r.pageX-a;v>0?v=Math.min(v,u+d-f-o,u+d-f-s):v<0&&(v=Math.max(v,u-s,u-o));var b=this.getIndex({startX:s+v,endX:o+v});(b.startIndex!==h||b.endIndex!==p)&&y&&y(b),this.setState({startX:s+v,endX:o+v,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var a=FD(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,a=i.brushMoveStartX,s=i.movingTravellerId,o=i.endX,c=i.startX,u=this.state[s],d=this.props,f=d.x,h=d.width,p=d.travellerWidth,y=d.onChange,v=d.gap,b=d.data,x={startX:this.state.startX,endX:this.state.endX},_=r.pageX-a;_>0?_=Math.min(_,f+h-p-u):_<0&&(_=Math.max(_,f-u)),x[s]=u+_;var S=this.getIndex(x),T=S.startIndex,E=S.endIndex,A=function(){var P=b.length-1;return s==="startX"&&(o>c?T%v===0:E%v===0)||o<c&&E===P||s==="endX"&&(o>c?E%v===0:T%v===0)||o>c&&E===P};this.setState(Ei(Ei({},s,u+_),"brushMoveStartX",r.pageX),function(){y&&A()&&y(S)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var a=this,s=this.state,o=s.scaleValues,c=s.startX,u=s.endX,d=this.state[i],f=o.indexOf(d);if(f!==-1){var h=f+r;if(!(h===-1||h>=o.length)){var p=o[h];i==="startX"&&p>=u||i==="endX"&&p<=c||this.setState(Ei({},i,p),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,c=r.fill,u=r.stroke;return H.createElement("rect",{stroke:u,fill:c,x:i,y:a,width:s,height:o})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,c=r.data,u=r.children,d=r.padding,f=k.Children.only(u);return f?H.cloneElement(f,{x:i,y:a,width:s,height:o,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,i){var a,s,o=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,h=c.traveller,p=c.ariaLabel,y=c.data,v=c.startIndex,b=c.endIndex,x=Math.max(r,this.props.x),_=t1(t1({},Ke(this.props,!1)),{},{x,y:u,width:d,height:f}),S=p||"Min value: ".concat((a=y[v])===null||a===void 0?void 0:a.name,", Max value: ").concat((s=y[b])===null||s===void 0?void 0:s.name);return H.createElement(gt,{tabIndex:0,role:"slider","aria-label":S,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(E){["ArrowLeft","ArrowRight"].includes(E.key)&&(E.preventDefault(),E.stopPropagation(),o.handleTravellerMoveKeyboard(E.key==="ArrowRight"?1:-1,i))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(h,_))}},{key:"renderSlide",value:function(r,i){var a=this.props,s=a.y,o=a.height,c=a.stroke,u=a.travellerWidth,d=Math.min(r,i)+u,f=Math.max(Math.abs(i-r)-u,0);return H.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:s,width:f,height:o})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,a=r.endIndex,s=r.y,o=r.height,c=r.travellerWidth,u=r.stroke,d=this.state,f=d.startX,h=d.endX,p=5,y={pointerEvents:"none",fill:u};return H.createElement(gt,{className:"recharts-brush-texts"},H.createElement(Yc,S0({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-p,y:s+o/2},y),this.getTextOfTick(i)),H.createElement(Yc,S0({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+c+p,y:s+o/2},y),this.getTextOfTick(a)))}},{key:"render",value:function(){var r=this.props,i=r.data,a=r.className,s=r.children,o=r.x,c=r.y,u=r.width,d=r.height,f=r.alwaysShowText,h=this.state,p=h.startX,y=h.endX,v=h.isTextActive,b=h.isSlideMoving,x=h.isTravellerMoving,_=h.isTravellerFocused;if(!i||!i.length||!je(o)||!je(c)||!je(u)||!je(d)||u<=0||d<=0)return null;var S=dt("recharts-brush",a),T=H.Children.count(s)===1,E=o_e("userSelect","none");return H.createElement(gt,{className:S,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:E},this.renderBackground(),T&&this.renderPanorama(),this.renderSlide(p,y),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(y,"endX"),(v||b||x||_||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,a=r.y,s=r.width,o=r.height,c=r.stroke,u=Math.floor(a+o/2)-1;return H.createElement(H.Fragment,null,H.createElement("rect",{x:i,y:a,width:s,height:o,fill:c,stroke:"none"}),H.createElement("line",{x1:i+1,y1:u,x2:i+s-1,y2:u,fill:"none",stroke:"#fff"}),H.createElement("line",{x1:i+1,y1:u+2,x2:i+s-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var a;return H.isValidElement(r)?a=H.cloneElement(r,i):Je(r)?a=r(i):a=e.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(r,i){var a=r.data,s=r.width,o=r.x,c=r.travellerWidth,u=r.updateId,d=r.startIndex,f=r.endIndex;if(a!==i.prevData||u!==i.prevUpdateId)return t1({prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:o,prevWidth:s},a&&a.length?m_e({data:a,width:s,x:o,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||o!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([o,o+s-c]);var h=i.scale.domain().map(function(p){return i.scale(p)});return{prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:o,prevWidth:s,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,i){for(var a=r.length,s=0,o=a-1;o-s>1;){var c=Math.floor((s+o)/2);r[c]>i?o=c:s=c}return i>=r[o]?o:s}}])}(k.PureComponent);Ei(hf,"displayName","Brush");Ei(hf,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var g_e=EP;function v_e(t,e){var n;return g_e(t,function(r,i,a){return n=e(r,i,a),!n}),!!n}var y_e=v_e,x_e=Qz,b_e=ys,w_e=y_e,__e=xi,S_e=Qx;function j_e(t,e,n){var r=__e(t)?x_e:w_e;return n&&S_e(t,e,n)&&(e=void 0),r(t,b_e(e))}var A_e=j_e;const P_e=Ot(A_e);var ds=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},VD=x6;function E_e(t,e,n){e=="__proto__"&&VD?VD(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var T_e=E_e,C_e=T_e,N_e=v6,k_e=ys;function O_e(t,e){var n={};return e=k_e(e),N_e(t,function(r,i,a){C_e(n,i,e(r,i,a))}),n}var I_e=O_e;const D_e=Ot(I_e);function M_e(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var R_e=M_e,L_e=EP;function $_e(t,e){var n=!0;return L_e(t,function(r,i,a){return n=!!e(r,i,a),n}),n}var z_e=$_e,F_e=R_e,V_e=z_e,B_e=ys,U_e=xi,W_e=Qx;function K_e(t,e,n){var r=U_e(t)?F_e:V_e;return n&&W_e(t,e,n)&&(e=void 0),r(t,B_e(e))}var q_e=K_e;const u8=Ot(q_e);var H_e=["x","y"];function Om(t){"@babel/helpers - typeof";return Om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Om(t)}function lS(){return lS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lS.apply(this,arguments)}function BD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ih(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BD(Object(n),!0).forEach(function(r){G_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function G_e(t,e,n){return e=Y_e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y_e(t){var e=X_e(t,"string");return Om(e)=="symbol"?e:e+""}function X_e(t,e){if(Om(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Om(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Q_e(t,e){if(t==null)return{};var n=J_e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function J_e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Z_e(t,e){var n=t.x,r=t.y,i=Q_e(t,H_e),a="".concat(n),s=parseInt(a,10),o="".concat(r),c=parseInt(o,10),u="".concat(e.height||i.height),d=parseInt(u,10),f="".concat(e.width||i.width),h=parseInt(f,10);return Ih(Ih(Ih(Ih(Ih({},e),i),s?{x:s}:{}),c?{y:c}:{}),{},{height:d,width:h,name:e.name,radius:e.radius})}function UD(t){return H.createElement(r8,lS({shapeType:"rectangle",propTransformer:Z_e,activeClassName:"recharts-active-bar"},t))}var e2e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var a=je(r)||Are(r);return a?e(r,i):(a||Jc(),n)}},t2e=["value","background"],d8;function pf(t){"@babel/helpers - typeof";return pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pf(t)}function n2e(t,e){if(t==null)return{};var n=r2e(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function r2e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function A0(){return A0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},A0.apply(this,arguments)}function WD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WD(Object(n),!0).forEach(function(r){el(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function i2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function KD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h8(r.key),r)}}function a2e(t,e,n){return e&&KD(t.prototype,e),n&&KD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function s2e(t,e,n){return e=P0(e),o2e(t,f8()?Reflect.construct(e,n||[],P0(t).constructor):e.apply(t,n))}function o2e(t,e){if(e&&(pf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l2e(t)}function l2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(f8=function(){return!!t})()}function P0(t){return P0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},P0(t)}function c2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cS(t,e)}function cS(t,e){return cS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},cS(t,e)}function el(t,e,n){return e=h8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h8(t){var e=u2e(t,"string");return pf(e)=="symbol"?e:e+""}function u2e(t,e){if(pf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(pf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Fn=function(t){function e(){var n;i2e(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=s2e(this,e,[].concat(i)),el(n,"state",{isAnimationFinished:!1}),el(n,"id",pu("recharts-bar-")),el(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),s&&s()}),el(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),s&&s()}),n}return c2e(e,t),a2e(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,a=this.props,s=a.shape,o=a.dataKey,c=a.activeIndex,u=a.activeBar,d=Ke(this.props,!1);return r&&r.map(function(f,h){var p=h===c,y=p?u:s,v=Rn(Rn(Rn({},d),f),{},{isActive:p,option:y,index:h,dataKey:o,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return H.createElement(gt,A0({className:"recharts-bar-rectangle"},Gc(i.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(h)}),H.createElement(UD,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,a=i.data,s=i.layout,o=i.isAnimationActive,c=i.animationBegin,u=i.animationDuration,d=i.animationEasing,f=i.animationId,h=this.state.prevData;return H.createElement(Ia,{begin:c,duration:u,isActive:o,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var y=p.t,v=a.map(function(b,x){var _=h&&h[x];if(_){var S=Yn(_.x,b.x),T=Yn(_.y,b.y),E=Yn(_.width,b.width),A=Yn(_.height,b.height);return Rn(Rn({},b),{},{x:S(y),y:T(y),width:E(y),height:A(y)})}if(s==="horizontal"){var j=Yn(0,b.height),P=j(y);return Rn(Rn({},b),{},{y:b.y+b.height-P,height:P})}var O=Yn(0,b.width),D=O(y);return Rn(Rn({},b),{},{width:D})});return H.createElement(gt,null,r.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,a=r.isAnimationActive,s=this.state.prevData;return a&&i&&i.length&&(!s||!Xc(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,a=i.data,s=i.dataKey,o=i.activeIndex,c=Ke(this.props.background,!1);return a.map(function(u,d){u.value;var f=u.background,h=n2e(u,t2e);if(!f)return null;var p=Rn(Rn(Rn(Rn(Rn({},h),{},{fill:"#eee"},f),c),Gc(r.props,u,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:s,index:d,className:"recharts-bar-background-rectangle"});return H.createElement(UD,A0({key:"background-bar-".concat(d),option:r.props.background,isActive:d===o},p))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.data,o=a.xAxis,c=a.yAxis,u=a.layout,d=a.children,f=Ri(d,mg);if(!f)return null;var h=u==="vertical"?s[0].height/2:s[0].width/2,p=function(b,x){var _=Array.isArray(b.value)?b.value[1]:b.value;return{x:b.x,y:b.y,value:_,errorVal:Nn(b,x)}},y={clipPath:r?"url(#clipPath-".concat(i,")"):null};return H.createElement(gt,y,f.map(function(v){return H.cloneElement(v,{key:"error-bar-".concat(i,"-").concat(v.props.dataKey),data:s,xAxis:o,yAxis:c,layout:u,offset:h,dataPointFormatter:p})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,a=r.data,s=r.className,o=r.xAxis,c=r.yAxis,u=r.left,d=r.top,f=r.width,h=r.height,p=r.isAnimationActive,y=r.background,v=r.id;if(i||!a||!a.length)return null;var b=this.state.isAnimationFinished,x=dt("recharts-bar",s),_=o&&o.allowDataOverflow,S=c&&c.allowDataOverflow,T=_||S,E=it(v)?this.id:v;return H.createElement(gt,{className:x},_||S?H.createElement("defs",null,H.createElement("clipPath",{id:"clipPath-".concat(E)},H.createElement("rect",{x:_?u:u-f/2,y:S?d:d-h/2,width:_?f:f*2,height:S?h:h*2}))):null,H.createElement(gt,{className:"recharts-bar-rectangles",clipPath:T?"url(#clipPath-".concat(E,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(T,E),(!p||b)&&ra.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(k.PureComponent);d8=Fn;el(Fn,"displayName","Bar");el(Fn,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ol.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});el(Fn,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,a=t.xAxis,s=t.yAxis,o=t.xAxisTicks,c=t.yAxisTicks,u=t.stackedData,d=t.dataStartIndex,f=t.displayedData,h=t.offset,p=Uye(r,n);if(!p)return null;var y=e.layout,v=n.type.defaultProps,b=v!==void 0?Rn(Rn({},v),n.props):n.props,x=b.dataKey,_=b.children,S=b.minPointSize,T=y==="horizontal"?s:a,E=u?T.scale.domain():null,A=Xye({numericAxis:T}),j=Ri(_,Oa),P=f.map(function(O,D){var M,z,L,te,X,W;u?M=Wye(u[d+D],E):(M=Nn(O,x),Array.isArray(M)||(M=[A,M]));var B=e2e(S,d8.defaultProps.minPointSize)(M[1],D);if(y==="horizontal"){var F,q=[s.scale(M[0]),s.scale(M[1])],ae=q[0],ce=q[1];z=DI({axis:a,ticks:o,bandSize:i,offset:p.offset,entry:O,index:D}),L=(F=ce??ae)!==null&&F!==void 0?F:void 0,te=p.size;var ve=ae-ce;if(X=Number.isNaN(ve)?0:ve,W={x:z,y:s.y,width:te,height:s.height},Math.abs(B)>0&&Math.abs(X)<Math.abs(B)){var we=Kr(X||B)*(Math.abs(B)-Math.abs(X));L-=we,X+=we}}else{var Le=[a.scale(M[0]),a.scale(M[1])],Ye=Le[0],et=Le[1];if(z=Ye,L=DI({axis:s,ticks:c,bandSize:i,offset:p.offset,entry:O,index:D}),te=et-Ye,X=p.size,W={x:a.x,y:L,width:a.width,height:X},Math.abs(B)>0&&Math.abs(te)<Math.abs(B)){var ke=Kr(te||B)*(Math.abs(B)-Math.abs(te));te+=ke}}return Rn(Rn(Rn({},O),{},{x:z,y:L,width:te,height:X,value:u?M:M[1],payload:O,background:W},j&&j[D]&&j[D].props),{},{tooltipPayload:[MF(n,O)],tooltipPosition:{x:z+te/2,y:L+X/2}})});return Rn({data:P,layout:y},h)});function Im(t){"@babel/helpers - typeof";return Im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Im(t)}function d2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,p8(r.key),r)}}function f2e(t,e,n){return e&&qD(t.prototype,e),n&&qD(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function HD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _a(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HD(Object(n),!0).forEach(function(r){pb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pb(t,e,n){return e=p8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p8(t){var e=h2e(t,"string");return Im(e)=="symbol"?e:e+""}function h2e(t,e){if(Im(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Im(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nE=function(e,n,r,i,a){var s=e.width,o=e.height,c=e.layout,u=e.children,d=Object.keys(n),f={left:r.left,leftMirror:r.left,right:s-r.right,rightMirror:s-r.right,top:r.top,topMirror:r.top,bottom:o-r.bottom,bottomMirror:o-r.bottom},h=!!Ci(u,Fn);return d.reduce(function(p,y){var v=n[y],b=v.orientation,x=v.domain,_=v.padding,S=_===void 0?{}:_,T=v.mirror,E=v.reversed,A="".concat(b).concat(T?"Mirror":""),j,P,O,D,M;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var z=x[1]-x[0],L=1/0,te=v.categoricalDomain.sort(Tre);if(te.forEach(function(Le,Ye){Ye>0&&(L=Math.min((Le||0)-(te[Ye-1]||0),L))}),Number.isFinite(L)){var X=L/z,W=v.layout==="vertical"?r.height:r.width;if(v.padding==="gap"&&(j=X*W/2),v.padding==="no-gap"){var B=qr(e.barCategoryGap,X*W),F=X*W/2;j=F-B-(F-B)/W*B}}}i==="xAxis"?P=[r.left+(S.left||0)+(j||0),r.left+r.width-(S.right||0)-(j||0)]:i==="yAxis"?P=c==="horizontal"?[r.top+r.height-(S.bottom||0),r.top+(S.top||0)]:[r.top+(S.top||0)+(j||0),r.top+r.height-(S.bottom||0)-(j||0)]:P=v.range,E&&(P=[P[1],P[0]]);var q=kF(v,a,h),ae=q.scale,ce=q.realScaleType;ae.domain(x).range(P),OF(ae);var ve=IF(ae,_a(_a({},v),{},{realScaleType:ce}));i==="xAxis"?(M=b==="top"&&!T||b==="bottom"&&T,O=r.left,D=f[A]-M*v.height):i==="yAxis"&&(M=b==="left"&&!T||b==="right"&&T,O=f[A]-M*v.width,D=r.top);var we=_a(_a(_a({},v),ve),{},{realScaleType:ce,x:O,y:D,scale:ae,width:i==="xAxis"?r.width:v.width,height:i==="yAxis"?r.height:v.height});return we.bandSize=u0(we,ve),!v.hide&&i==="xAxis"?f[A]+=(M?-1:1)*we.height:v.hide||(f[A]+=(M?-1:1)*we.width),_a(_a({},p),{},pb({},y,we))},{})},m8=function(e,n){var r=e.x,i=e.y,a=n.x,s=n.y;return{x:Math.min(r,a),y:Math.min(i,s),width:Math.abs(a-r),height:Math.abs(s-i)}},p2e=function(e){var n=e.x1,r=e.y1,i=e.x2,a=e.y2;return m8({x:n,y:r},{x:i,y:a})},g8=function(){function t(e){d2e(this,t),this.scale=e}return f2e(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,a=r.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+s}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(n)+o}default:return this.scale(n)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],a=r[r.length-1];return i<=a?n>=i&&n<=a:n>=a&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();pb(g8,"EPS",1e-4);var rE=function(e){var n=Object.keys(e).reduce(function(r,i){return _a(_a({},r),{},pb({},i,g8.create(e[i])))},{});return _a(_a({},n),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,o=a.position;return D_e(i,function(c,u){return n[u].apply(c,{bandAware:s,position:o})})},isInRange:function(i){return u8(i,function(a,s){return n[s].isInRange(a)})}})};function m2e(t){return(t%180+180)%180}var g2e=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=m2e(i),s=a*Math.PI/180,o=Math.atan(r/n),c=s>o&&s<Math.PI-o?r/Math.sin(s):n/Math.cos(s);return Math.abs(c)},v2e=ys,y2e=ug,x2e=Yx;function b2e(t){return function(e,n,r){var i=Object(e);if(!y2e(e)){var a=v2e(n);e=x2e(e),n=function(o){return a(i[o],o,i)}}var s=t(e,n,r);return s>-1?i[a?e[s]:s]:void 0}}var w2e=b2e,_2e=s8;function S2e(t){var e=_2e(t),n=e%1;return e===e?n?e-n:e:0}var j2e=S2e,A2e=d6,P2e=ys,E2e=j2e,T2e=Math.max;function C2e(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:E2e(n);return i<0&&(i=T2e(r+i,0)),A2e(t,P2e(e),i)}var N2e=C2e,k2e=w2e,O2e=N2e,I2e=k2e(O2e),D2e=I2e;const M2e=Ot(D2e);var R2e=kne(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),iE=k.createContext(void 0),aE=k.createContext(void 0),v8=k.createContext(void 0),y8=k.createContext({}),x8=k.createContext(void 0),b8=k.createContext(0),w8=k.createContext(0),GD=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,a=n.offset,s=e.clipPathId,o=e.children,c=e.width,u=e.height,d=R2e(a);return H.createElement(iE.Provider,{value:r},H.createElement(aE.Provider,{value:i},H.createElement(y8.Provider,{value:a},H.createElement(v8.Provider,{value:d},H.createElement(x8.Provider,{value:s},H.createElement(b8.Provider,{value:u},H.createElement(w8.Provider,{value:c},o)))))))},L2e=function(){return k.useContext(x8)},_8=function(e){var n=k.useContext(iE);n==null&&Jc();var r=n[e];return r==null&&Jc(),r},$2e=function(){var e=k.useContext(iE);return Go(e)},z2e=function(){var e=k.useContext(aE),n=M2e(e,function(r){return u8(r.domain,Number.isFinite)});return n||Go(e)},S8=function(e){var n=k.useContext(aE);n==null&&Jc();var r=n[e];return r==null&&Jc(),r},F2e=function(){var e=k.useContext(v8);return e},V2e=function(){return k.useContext(y8)},sE=function(){return k.useContext(w8)},oE=function(){return k.useContext(b8)};function mf(t){"@babel/helpers - typeof";return mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mf(t)}function B2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U2e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A8(r.key),r)}}function W2e(t,e,n){return e&&U2e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function K2e(t,e,n){return e=E0(e),q2e(t,j8()?Reflect.construct(e,n||[],E0(t).constructor):e.apply(t,n))}function q2e(t,e){if(e&&(mf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H2e(t)}function H2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(j8=function(){return!!t})()}function E0(t){return E0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},E0(t)}function G2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uS(t,e)}function uS(t,e){return uS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},uS(t,e)}function YD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function XD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YD(Object(n),!0).forEach(function(r){lE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lE(t,e,n){return e=A8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A8(t){var e=Y2e(t,"string");return mf(e)=="symbol"?e:e+""}function Y2e(t,e){if(mf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(mf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function X2e(t,e){return eSe(t)||Z2e(t,e)||J2e(t,e)||Q2e()}function Q2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J2e(t,e){if(t){if(typeof t=="string")return QD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QD(t,e)}}function QD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Z2e(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function eSe(t){if(Array.isArray(t))return t}function dS(){return dS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dS.apply(this,arguments)}var tSe=function(e,n){var r;return H.isValidElement(e)?r=H.cloneElement(e,n):Je(e)?r=e(n):r=H.createElement("line",dS({},n,{className:"recharts-reference-line-line"})),r},nSe=function(e,n,r,i,a,s,o,c,u){var d=a.x,f=a.y,h=a.width,p=a.height;if(r){var y=u.y,v=e.y.apply(y,{position:s});if(ds(u,"discard")&&!e.y.isInRange(v))return null;var b=[{x:d+h,y:v},{x:d,y:v}];return c==="left"?b.reverse():b}if(n){var x=u.x,_=e.x.apply(x,{position:s});if(ds(u,"discard")&&!e.x.isInRange(_))return null;var S=[{x:_,y:f+p},{x:_,y:f}];return o==="top"?S.reverse():S}if(i){var T=u.segment,E=T.map(function(A){return e.apply(A,{position:s})});return ds(u,"discard")&&P_e(E,function(A){return!e.isInRange(A)})?null:E}return null};function rSe(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,a=t.yAxisId,s=t.shape,o=t.className,c=t.alwaysShow,u=L2e(),d=_8(i),f=S8(a),h=F2e();if(!u||!h)return null;Ta(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=rE({x:d.scale,y:f.scale}),y=Qn(e),v=Qn(n),b=r&&r.length===2,x=nSe(p,y,v,b,h,t.position,d.orientation,f.orientation,t);if(!x)return null;var _=X2e(x,2),S=_[0],T=S.x,E=S.y,A=_[1],j=A.x,P=A.y,O=ds(t,"hidden")?"url(#".concat(u,")"):void 0,D=XD(XD({clipPath:O},Ke(t,!0)),{},{x1:T,y1:E,x2:j,y2:P});return H.createElement(gt,{className:dt("recharts-reference-line",o)},tSe(s,D),or.renderCallByParent(t,p2e({x1:T,y1:E,x2:j,y2:P})))}var mb=function(t){function e(){return B2e(this,e),K2e(this,e,arguments)}return G2e(e,t),W2e(e,[{key:"render",value:function(){return H.createElement(rSe,this.props)}}])}(H.Component);lE(mb,"displayName","ReferenceLine");lE(mb,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function fS(){return fS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fS.apply(this,arguments)}function gf(t){"@babel/helpers - typeof";return gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gf(t)}function JD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ZD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JD(Object(n),!0).forEach(function(r){gb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aSe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,E8(r.key),r)}}function sSe(t,e,n){return e&&aSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function oSe(t,e,n){return e=T0(e),lSe(t,P8()?Reflect.construct(e,n||[],T0(t).constructor):e.apply(t,n))}function lSe(t,e){if(e&&(gf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cSe(t)}function cSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function P8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(P8=function(){return!!t})()}function T0(t){return T0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},T0(t)}function uSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hS(t,e)}function hS(t,e){return hS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},hS(t,e)}function gb(t,e,n){return e=E8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E8(t){var e=dSe(t,"string");return gf(e)=="symbol"?e:e+""}function dSe(t,e){if(gf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var fSe=function(e){var n=e.x,r=e.y,i=e.xAxis,a=e.yAxis,s=rE({x:i.scale,y:a.scale}),o=s.apply({x:n,y:r},{bandAware:!0});return ds(e,"discard")&&!s.isInRange(o)?null:o},vb=function(t){function e(){return iSe(this,e),oSe(this,e,arguments)}return uSe(e,t),sSe(e,[{key:"render",value:function(){var r=this.props,i=r.x,a=r.y,s=r.r,o=r.alwaysShow,c=r.clipPathId,u=Qn(i),d=Qn(a);if(Ta(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=fSe(this.props);if(!f)return null;var h=f.x,p=f.y,y=this.props,v=y.shape,b=y.className,x=ds(this.props,"hidden")?"url(#".concat(c,")"):void 0,_=ZD(ZD({clipPath:x},Ke(this.props,!0)),{},{cx:h,cy:p});return H.createElement(gt,{className:dt("recharts-reference-dot",b)},e.renderDot(v,_),or.renderCallByParent(this.props,{x:h-s,y:p-s,width:2*s,height:2*s}))}}])}(H.Component);gb(vb,"displayName","ReferenceDot");gb(vb,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});gb(vb,"renderDot",function(t,e){var n;return H.isValidElement(t)?n=H.cloneElement(t,e):Je(t)?n=t(e):n=H.createElement(gg,fS({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function pS(){return pS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pS.apply(this,arguments)}function vf(t){"@babel/helpers - typeof";return vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vf(t)}function eM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eM(Object(n),!0).forEach(function(r){yb(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pSe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,C8(r.key),r)}}function mSe(t,e,n){return e&&pSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function gSe(t,e,n){return e=C0(e),vSe(t,T8()?Reflect.construct(e,n||[],C0(t).constructor):e.apply(t,n))}function vSe(t,e){if(e&&(vf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ySe(t)}function ySe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T8=function(){return!!t})()}function C0(t){return C0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},C0(t)}function xSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mS(t,e)}function mS(t,e){return mS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},mS(t,e)}function yb(t,e,n){return e=C8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C8(t){var e=bSe(t,"string");return vf(e)=="symbol"?e:e+""}function bSe(t,e){if(vf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var wSe=function(e,n,r,i,a){var s=a.x1,o=a.x2,c=a.y1,u=a.y2,d=a.xAxis,f=a.yAxis;if(!d||!f)return null;var h=rE({x:d.scale,y:f.scale}),p={x:e?h.x.apply(s,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(c,{position:"start"}):h.y.rangeMin},y={x:n?h.x.apply(o,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(u,{position:"end"}):h.y.rangeMax};return ds(a,"discard")&&(!h.isInRange(p)||!h.isInRange(y))?null:m8(p,y)},xb=function(t){function e(){return hSe(this,e),gSe(this,e,arguments)}return xSe(e,t),mSe(e,[{key:"render",value:function(){var r=this.props,i=r.x1,a=r.x2,s=r.y1,o=r.y2,c=r.className,u=r.alwaysShow,d=r.clipPathId;Ta(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=Qn(i),h=Qn(a),p=Qn(s),y=Qn(o),v=this.props.shape;if(!f&&!h&&!p&&!y&&!v)return null;var b=wSe(f,h,p,y,this.props);if(!b&&!v)return null;var x=ds(this.props,"hidden")?"url(#".concat(d,")"):void 0;return H.createElement(gt,{className:dt("recharts-reference-area",c)},e.renderRect(v,tM(tM({clipPath:x},Ke(this.props,!0)),b)),or.renderCallByParent(this.props,b))}}])}(H.Component);yb(xb,"displayName","ReferenceArea");yb(xb,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});yb(xb,"renderRect",function(t,e){var n;return H.isValidElement(t)?n=H.cloneElement(t,e):Je(t)?n=t(e):n=H.createElement(tE,pS({},e,{className:"recharts-reference-area-rect"})),n});function N8(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function _Se(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return g2e(r,n)}function SSe(t,e,n){var r=n==="width",i=t.x,a=t.y,s=t.width,o=t.height;return e===1?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}function N0(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function jSe(t,e){return N8(t,e+1)}function ASe(t,e,n,r,i){for(var a=(r||[]).slice(),s=e.start,o=e.end,c=0,u=1,d=s,f=function(){var y=r==null?void 0:r[c];if(y===void 0)return{v:N8(r,u)};var v=c,b,x=function(){return b===void 0&&(b=n(y,v)),b},_=y.coordinate,S=c===0||N0(t,_,x,d,o);S||(c=0,d=s,u+=1),S&&(d=_+t*(x()/2+i),c+=u)},h;u<=a.length;)if(h=f(),h)return h.v;return[]}function Dm(t){"@babel/helpers - typeof";return Dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dm(t)}function nM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ir(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nM(Object(n),!0).forEach(function(r){PSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PSe(t,e,n){return e=ESe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ESe(t){var e=TSe(t,"string");return Dm(e)=="symbol"?e:e+""}function TSe(t,e){if(Dm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Dm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function CSe(t,e,n,r,i){for(var a=(r||[]).slice(),s=a.length,o=e.start,c=e.end,u=function(h){var p=a[h],y,v=function(){return y===void 0&&(y=n(p,h)),y};if(h===s-1){var b=t*(p.coordinate+t*v()/2-c);a[h]=p=Ir(Ir({},p),{},{tickCoord:b>0?p.coordinate-b*t:p.coordinate})}else a[h]=p=Ir(Ir({},p),{},{tickCoord:p.coordinate});var x=N0(t,p.tickCoord,v,o,c);x&&(c=p.tickCoord-t*(v()/2+i),a[h]=Ir(Ir({},p),{},{isShow:!0}))},d=s-1;d>=0;d--)u(d);return a}function NSe(t,e,n,r,i,a){var s=(r||[]).slice(),o=s.length,c=e.start,u=e.end;if(a){var d=r[o-1],f=n(d,o-1),h=t*(d.coordinate+t*f/2-u);s[o-1]=d=Ir(Ir({},d),{},{tickCoord:h>0?d.coordinate-h*t:d.coordinate});var p=N0(t,d.tickCoord,function(){return f},c,u);p&&(u=d.tickCoord-t*(f/2+i),s[o-1]=Ir(Ir({},d),{},{isShow:!0}))}for(var y=a?o-1:o,v=function(_){var S=s[_],T,E=function(){return T===void 0&&(T=n(S,_)),T};if(_===0){var A=t*(S.coordinate-t*E()/2-c);s[_]=S=Ir(Ir({},S),{},{tickCoord:A<0?S.coordinate-A*t:S.coordinate})}else s[_]=S=Ir(Ir({},S),{},{tickCoord:S.coordinate});var j=N0(t,S.tickCoord,E,c,u);j&&(c=S.tickCoord+t*(E()/2+i),s[_]=Ir(Ir({},S),{},{isShow:!0}))},b=0;b<y;b++)v(b);return s}function cE(t,e,n){var r=t.tick,i=t.ticks,a=t.viewBox,s=t.minTickGap,o=t.orientation,c=t.interval,u=t.tickFormatter,d=t.unit,f=t.angle;if(!i||!i.length||!r)return[];if(je(c)||Ol.isSsr)return jSe(i,typeof c=="number"&&je(c)?c:0);var h=[],p=o==="top"||o==="bottom"?"width":"height",y=d&&p==="width"?pp(d,{fontSize:e,letterSpacing:n}):{width:0,height:0},v=function(S,T){var E=Je(u)?u(S.value,T):S.value;return p==="width"?_Se(pp(E,{fontSize:e,letterSpacing:n}),y,f):pp(E,{fontSize:e,letterSpacing:n})[p]},b=i.length>=2?Kr(i[1].coordinate-i[0].coordinate):1,x=SSe(a,b,p);return c==="equidistantPreserveStart"?ASe(b,x,v,i,s):(c==="preserveStart"||c==="preserveStartEnd"?h=NSe(b,x,v,i,s,c==="preserveStartEnd"):h=CSe(b,x,v,i,s),h.filter(function(_){return _.isShow}))}var kSe=["viewBox"],OSe=["viewBox"],ISe=["ticks"];function yf(t){"@babel/helpers - typeof";return yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yf(t)}function md(){return md=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},md.apply(this,arguments)}function rM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rM(Object(n),!0).forEach(function(r){uE(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function n1(t,e){if(t==null)return{};var n=DSe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function DSe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function MSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,O8(r.key),r)}}function RSe(t,e,n){return e&&iM(t.prototype,e),n&&iM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function LSe(t,e,n){return e=k0(e),$Se(t,k8()?Reflect.construct(e,n||[],k0(t).constructor):e.apply(t,n))}function $Se(t,e){if(e&&(yf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zSe(t)}function zSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(k8=function(){return!!t})()}function k0(t){return k0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},k0(t)}function FSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gS(t,e)}function gS(t,e){return gS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},gS(t,e)}function uE(t,e,n){return e=O8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O8(t){var e=VSe(t,"string");return yf(e)=="symbol"?e:e+""}function VSe(t,e){if(yf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Gf=function(t){function e(n){var r;return MSe(this,e),r=LSe(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return FSe(e,t),RSe(e,[{key:"shouldComponentUpdate",value:function(r,i){var a=r.viewBox,s=n1(r,kSe),o=this.props,c=o.viewBox,u=n1(o,OSe);return!Pd(a,c)||!Pd(s,u)||!Pd(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,a=i.x,s=i.y,o=i.width,c=i.height,u=i.orientation,d=i.tickSize,f=i.mirror,h=i.tickMargin,p,y,v,b,x,_,S=f?-1:1,T=r.tickSize||d,E=je(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":p=y=r.coordinate,b=s+ +!f*c,v=b-S*T,_=v-S*h,x=E;break;case"left":v=b=r.coordinate,y=a+ +!f*o,p=y-S*T,x=p-S*h,_=E;break;case"right":v=b=r.coordinate,y=a+ +f*o,p=y+S*T,x=p+S*h,_=E;break;default:p=y=r.coordinate,b=s+ +f*c,v=b+S*T,_=v+S*h,x=E;break}return{line:{x1:p,y1:v,x2:y,y2:b},tick:{x,y:_}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s;switch(i){case"left":s=a?"start":"end";break;case"right":s=a?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,a=r.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=a?"start":"end";break;default:s=a?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,a=r.y,s=r.width,o=r.height,c=r.orientation,u=r.mirror,d=r.axisLine,f=Kn(Kn(Kn({},Ke(this.props,!1)),Ke(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!u||c==="bottom"&&u);f=Kn(Kn({},f),{},{x1:i,y1:a+h*o,x2:i+s,y2:a+h*o})}else{var p=+(c==="left"&&!u||c==="right"&&u);f=Kn(Kn({},f),{},{x1:i+p*s,y1:a,x2:i+p*s,y2:a+o})}return H.createElement("line",md({},f,{className:dt("recharts-cartesian-axis-line",Mi(d,"className"))}))}},{key:"renderTicks",value:function(r,i,a){var s=this,o=this.props,c=o.tickLine,u=o.stroke,d=o.tick,f=o.tickFormatter,h=o.unit,p=cE(Kn(Kn({},this.props),{},{ticks:r}),i,a),y=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),b=Ke(this.props,!1),x=Ke(d,!1),_=Kn(Kn({},b),{},{fill:"none"},Ke(c,!1)),S=p.map(function(T,E){var A=s.getTickLineCoord(T),j=A.line,P=A.tick,O=Kn(Kn(Kn(Kn({textAnchor:y,verticalAnchor:v},b),{},{stroke:"none",fill:u},x),P),{},{index:E,payload:T,visibleTicksCount:p.length,tickFormatter:f});return H.createElement(gt,md({className:"recharts-cartesian-axis-tick",key:"tick-".concat(T.value,"-").concat(T.coordinate,"-").concat(T.tickCoord)},Gc(s.props,T,E)),c&&H.createElement("line",md({},_,j,{className:dt("recharts-cartesian-axis-tick-line",Mi(c,"className"))})),d&&e.renderTickItem(d,O,"".concat(Je(f)?f(T.value,E):T.value).concat(h||"")))});return H.createElement("g",{className:"recharts-cartesian-axis-ticks"},S)}},{key:"render",value:function(){var r=this,i=this.props,a=i.axisLine,s=i.width,o=i.height,c=i.ticksGenerator,u=i.className,d=i.hide;if(d)return null;var f=this.props,h=f.ticks,p=n1(f,ISe),y=h;return Je(c)&&(y=h&&h.length>0?c(this.props):c(p)),s<=0||o<=0||!y||!y.length?null:H.createElement(gt,{className:dt("recharts-cartesian-axis",u),ref:function(b){r.layerReference=b}},a&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),or.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,a){var s,o=dt(i.className,"recharts-cartesian-axis-tick-value");return H.isValidElement(r)?s=H.cloneElement(r,Kn(Kn({},i),{},{className:o})):Je(r)?s=r(Kn(Kn({},i),{},{className:o})):s=H.createElement(Yc,md({},i,{className:"recharts-cartesian-axis-tick-value"}),a),s}}])}(k.Component);uE(Gf,"displayName","CartesianAxis");uE(Gf,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var BSe=["x1","y1","x2","y2","key"],USe=["offset"];function Zc(t){"@babel/helpers - typeof";return Zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zc(t)}function aM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aM(Object(n),!0).forEach(function(r){WSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WSe(t,e,n){return e=KSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KSe(t){var e=qSe(t,"string");return Zc(e)=="symbol"?e:e+""}function qSe(t,e){if(Zc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jc(){return jc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jc.apply(this,arguments)}function sM(t,e){if(t==null)return{};var n=HSe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function HSe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var GSe=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,a=e.y,s=e.width,o=e.height,c=e.ry;return H.createElement("rect",{x:i,y:a,ry:c,width:s,height:o,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function I8(t,e){var n;if(H.isValidElement(t))n=H.cloneElement(t,e);else if(Je(t))n=t(e);else{var r=e.x1,i=e.y1,a=e.x2,s=e.y2,o=e.key,c=sM(e,BSe),u=Ke(c,!1);u.offset;var d=sM(u,USe);n=H.createElement("line",jc({},d,{x1:r,y1:i,x2:a,y2:s,fill:"none",key:o}))}return n}function YSe(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,a=t.horizontalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,c){var u=Rr(Rr({},t),{},{x1:e,y1:o,x2:e+n,y2:o,key:"line-".concat(c),index:c});return I8(i,u)});return H.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function XSe(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,a=t.verticalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(o,c){var u=Rr(Rr({},t),{},{x1:o,y1:e,x2:o,y2:e+n,key:"line-".concat(c),index:c});return I8(i,u)});return H.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function QSe(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,a=t.width,s=t.height,o=t.horizontalPoints,c=t.horizontal,u=c===void 0?!0:c;if(!u||!e||!e.length)return null;var d=o.map(function(h){return Math.round(h+i-i)}).sort(function(h,p){return h-p});i!==d[0]&&d.unshift(0);var f=d.map(function(h,p){var y=!d[p+1],v=y?i+s-h:d[p+1]-h;if(v<=0)return null;var b=p%e.length;return H.createElement("rect",{key:"react-".concat(p),y:h,x:r,height:v,width:a,stroke:"none",fill:e[b],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return H.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function JSe(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,a=t.x,s=t.y,o=t.width,c=t.height,u=t.verticalPoints;if(!n||!r||!r.length)return null;var d=u.map(function(h){return Math.round(h+a-a)}).sort(function(h,p){return h-p});a!==d[0]&&d.unshift(0);var f=d.map(function(h,p){var y=!d[p+1],v=y?a+o-h:d[p+1]-h;if(v<=0)return null;var b=p%r.length;return H.createElement("rect",{key:"react-".concat(p),x:h,y:s,width:v,height:c,stroke:"none",fill:r[b],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return H.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var ZSe=function(e,n){var r=e.xAxis,i=e.width,a=e.height,s=e.offset;return NF(cE(Rr(Rr(Rr({},Gf.defaultProps),r),{},{ticks:Us(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.left,s.left+s.width,n)},eje=function(e,n){var r=e.yAxis,i=e.width,a=e.height,s=e.offset;return NF(cE(Rr(Rr(Rr({},Gf.defaultProps),r),{},{ticks:Us(r,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.top,s.top+s.height,n)},Fu={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function vg(t){var e,n,r,i,a,s,o=sE(),c=oE(),u=V2e(),d=Rr(Rr({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Fu.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:Fu.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:Fu.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Fu.horizontalFill,vertical:(a=t.vertical)!==null&&a!==void 0?a:Fu.vertical,verticalFill:(s=t.verticalFill)!==null&&s!==void 0?s:Fu.verticalFill,x:je(t.x)?t.x:u.left,y:je(t.y)?t.y:u.top,width:je(t.width)?t.width:u.width,height:je(t.height)?t.height:u.height}),f=d.x,h=d.y,p=d.width,y=d.height,v=d.syncWithTicks,b=d.horizontalValues,x=d.verticalValues,_=$2e(),S=z2e();if(!je(p)||p<=0||!je(y)||y<=0||!je(f)||f!==+f||!je(h)||h!==+h)return null;var T=d.verticalCoordinatesGenerator||ZSe,E=d.horizontalCoordinatesGenerator||eje,A=d.horizontalPoints,j=d.verticalPoints;if((!A||!A.length)&&Je(E)){var P=b&&b.length,O=E({yAxis:S?Rr(Rr({},S),{},{ticks:P?b:S.ticks}):void 0,width:o,height:c,offset:u},P?!0:v);Ta(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Zc(O),"]")),Array.isArray(O)&&(A=O)}if((!j||!j.length)&&Je(T)){var D=x&&x.length,M=T({xAxis:_?Rr(Rr({},_),{},{ticks:D?x:_.ticks}):void 0,width:o,height:c,offset:u},D?!0:v);Ta(Array.isArray(M),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Zc(M),"]")),Array.isArray(M)&&(j=M)}return H.createElement("g",{className:"recharts-cartesian-grid"},H.createElement(GSe,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),H.createElement(YSe,jc({},d,{offset:u,horizontalPoints:A,xAxis:_,yAxis:S})),H.createElement(XSe,jc({},d,{offset:u,verticalPoints:j,xAxis:_,yAxis:S})),H.createElement(QSe,jc({},d,{horizontalPoints:A})),H.createElement(JSe,jc({},d,{verticalPoints:j})))}vg.displayName="CartesianGrid";var tje=["type","layout","connectNulls","ref"],nje=["key"];function xf(t){"@babel/helpers - typeof";return xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xf(t)}function oM(t,e){if(t==null)return{};var n=rje(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rje(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function bp(){return bp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bp.apply(this,arguments)}function lM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lM(Object(n),!0).forEach(function(r){Sa(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vu(t){return oje(t)||sje(t)||aje(t)||ije()}function ije(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aje(t,e){if(t){if(typeof t=="string")return vS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vS(t,e)}}function sje(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function oje(t){if(Array.isArray(t))return vS(t)}function vS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,M8(r.key),r)}}function cje(t,e,n){return e&&cM(t.prototype,e),n&&cM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function uje(t,e,n){return e=O0(e),dje(t,D8()?Reflect.construct(e,n||[],O0(t).constructor):e.apply(t,n))}function dje(t,e){if(e&&(xf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fje(t)}function fje(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function D8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(D8=function(){return!!t})()}function O0(t){return O0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},O0(t)}function hje(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yS(t,e)}function yS(t,e){return yS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},yS(t,e)}function Sa(t,e,n){return e=M8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M8(t){var e=pje(t,"string");return xf(e)=="symbol"?e:e+""}function pje(t,e){if(xf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(xf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var eu=function(t){function e(){var n;lje(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=uje(this,e,[].concat(i)),Sa(n,"state",{isAnimationFinished:!0,totalLength:0}),Sa(n,"generateSimpleStrokeDasharray",function(s,o){return"".concat(o,"px ").concat(s-o,"px")}),Sa(n,"getStrokeDasharray",function(s,o,c){var u=c.reduce(function(x,_){return x+_});if(!u)return n.generateSimpleStrokeDasharray(o,s);for(var d=Math.floor(s/u),f=s%u,h=o-s,p=[],y=0,v=0;y<c.length;v+=c[y],++y)if(v+c[y]>f){p=[].concat(Vu(c.slice(0,y)),[f-v]);break}var b=p.length%2===0?[0,h]:[h];return[].concat(Vu(e.repeat(c,d)),Vu(p),b).map(function(x){return"".concat(x,"px")}).join(", ")}),Sa(n,"id",pu("recharts-line-")),Sa(n,"pathRef",function(s){n.mainCurve=s}),Sa(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Sa(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return hje(e,t),cje(e,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.points,o=a.xAxis,c=a.yAxis,u=a.layout,d=a.children,f=Ri(d,mg);if(!f)return null;var h=function(v,b){return{x:v.x,y:v.y,value:v.value,errorVal:Nn(v.payload,b)}},p={clipPath:r?"url(#clipPath-".concat(i,")"):null};return H.createElement(gt,p,f.map(function(y){return H.cloneElement(y,{key:"bar-".concat(y.props.dataKey),data:s,xAxis:o,yAxis:c,layout:u,dataPointFormatter:h})}))}},{key:"renderDots",value:function(r,i,a){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var o=this.props,c=o.dot,u=o.points,d=o.dataKey,f=Ke(this.props,!1),h=Ke(c,!0),p=u.map(function(v,b){var x=Pi(Pi(Pi({key:"dot-".concat(b),r:3},f),h),{},{index:b,cx:v.x,cy:v.y,value:v.value,dataKey:d,payload:v.payload,points:u});return e.renderDotItem(c,x)}),y={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return H.createElement(gt,bp({className:"recharts-line-dots",key:"dots"},y),p)}},{key:"renderCurveStatically",value:function(r,i,a,s){var o=this.props,c=o.type,u=o.layout,d=o.connectNulls;o.ref;var f=oM(o,tje),h=Pi(Pi(Pi({},Ke(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:r},s),{},{type:c,layout:u,connectNulls:d});return H.createElement(Dc,bp({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,i){var a=this,s=this.props,o=s.points,c=s.strokeDasharray,u=s.isAnimationActive,d=s.animationBegin,f=s.animationDuration,h=s.animationEasing,p=s.animationId,y=s.animateNewValues,v=s.width,b=s.height,x=this.state,_=x.prevPoints,S=x.totalLength;return H.createElement(Ia,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(T){var E=T.t;if(_){var A=_.length/o.length,j=o.map(function(z,L){var te=Math.floor(L*A);if(_[te]){var X=_[te],W=Yn(X.x,z.x),B=Yn(X.y,z.y);return Pi(Pi({},z),{},{x:W(E),y:B(E)})}if(y){var F=Yn(v*2,z.x),q=Yn(b/2,z.y);return Pi(Pi({},z),{},{x:F(E),y:q(E)})}return Pi(Pi({},z),{},{x:z.x,y:z.y})});return a.renderCurveStatically(j,r,i)}var P=Yn(0,S),O=P(E),D;if(c){var M="".concat(c).split(/[,\s]+/gim).map(function(z){return parseFloat(z)});D=a.getStrokeDasharray(O,S,M)}else D=a.generateSimpleStrokeDasharray(S,O);return a.renderCurveStatically(o,r,i,{strokeDasharray:D})})}},{key:"renderCurve",value:function(r,i){var a=this.props,s=a.points,o=a.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return o&&s&&s.length&&(!u&&d>0||!Xc(u,s))?this.renderCurveWithAnimation(r,i):this.renderCurveStatically(s,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,s=i.dot,o=i.points,c=i.className,u=i.xAxis,d=i.yAxis,f=i.top,h=i.left,p=i.width,y=i.height,v=i.isAnimationActive,b=i.id;if(a||!o||!o.length)return null;var x=this.state.isAnimationFinished,_=o.length===1,S=dt("recharts-line",c),T=u&&u.allowDataOverflow,E=d&&d.allowDataOverflow,A=T||E,j=it(b)?this.id:b,P=(r=Ke(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},O=P.r,D=O===void 0?3:O,M=P.strokeWidth,z=M===void 0?2:M,L=_z(s)?s:{},te=L.clipDot,X=te===void 0?!0:te,W=D*2+z;return H.createElement(gt,{className:S},T||E?H.createElement("defs",null,H.createElement("clipPath",{id:"clipPath-".concat(j)},H.createElement("rect",{x:T?h:h-p/2,y:E?f:f-y/2,width:T?p:p*2,height:E?y:y*2})),!X&&H.createElement("clipPath",{id:"clipPath-dots-".concat(j)},H.createElement("rect",{x:h-W/2,y:f-W/2,width:p+W,height:y+W}))):null,!_&&this.renderCurve(A,j),this.renderErrorBar(A,j),(_||s)&&this.renderDots(A,X,j),(!v||x)&&ra.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:i.curPoints}:r.points!==i.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,i){for(var a=r.length%2!==0?[].concat(Vu(r),[0]):r,s=[],o=0;o<i;++o)s=[].concat(Vu(s),Vu(a));return s}},{key:"renderDotItem",value:function(r,i){var a;if(H.isValidElement(r))a=H.cloneElement(r,i);else if(Je(r))a=r(i);else{var s=i.key,o=oM(i,nje),c=dt("recharts-line-dot",typeof r!="boolean"?r.className:"");a=H.createElement(gg,bp({key:s},o,{className:c}))}return a}}])}(k.PureComponent);Sa(eu,"displayName","Line");Sa(eu,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Ol.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Sa(eu,"getComposedData",function(t){var e=t.props,n=t.xAxis,r=t.yAxis,i=t.xAxisTicks,a=t.yAxisTicks,s=t.dataKey,o=t.bandSize,c=t.displayedData,u=t.offset,d=e.layout,f=c.map(function(h,p){var y=Nn(h,s);return d==="horizontal"?{x:c0({axis:n,ticks:i,bandSize:o,entry:h,index:p}),y:it(y)?null:r.scale(y),value:y,payload:h}:{x:it(y)?null:n.scale(y),y:c0({axis:r,ticks:a,bandSize:o,entry:h,index:p}),value:y,payload:h}});return Pi({points:f,layout:d},u)});var mje=["layout","type","stroke","connectNulls","isRange","ref"],gje=["key"],R8;function bf(t){"@babel/helpers - typeof";return bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bf(t)}function L8(t,e){if(t==null)return{};var n=vje(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function vje(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ac(){return Ac=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ac.apply(this,arguments)}function uM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uM(Object(n),!0).forEach(function(r){ns(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dM(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,z8(r.key),r)}}function xje(t,e,n){return e&&dM(t.prototype,e),n&&dM(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function bje(t,e,n){return e=I0(e),wje(t,$8()?Reflect.construct(e,n||[],I0(t).constructor):e.apply(t,n))}function wje(t,e){if(e&&(bf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _je(t)}function _je(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($8=function(){return!!t})()}function I0(t){return I0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},I0(t)}function Sje(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xS(t,e)}function xS(t,e){return xS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},xS(t,e)}function ns(t,e,n){return e=z8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z8(t){var e=jje(t,"string");return bf(e)=="symbol"?e:e+""}function jje(t,e){if(bf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Rl=function(t){function e(){var n;yje(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=bje(this,e,[].concat(i)),ns(n,"state",{isAnimationFinished:!0}),ns(n,"id",pu("recharts-area-")),ns(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Je(s)&&s()}),ns(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Je(s)&&s()}),n}return Sje(e,t),xje(e,[{key:"renderDots",value:function(r,i,a){var s=this.props.isAnimationActive,o=this.state.isAnimationFinished;if(s&&!o)return null;var c=this.props,u=c.dot,d=c.points,f=c.dataKey,h=Ke(this.props,!1),p=Ke(u,!0),y=d.map(function(b,x){var _=Bo(Bo(Bo({key:"dot-".concat(x),r:3},h),p),{},{index:x,cx:b.x,cy:b.y,dataKey:f,value:b.value,payload:b.payload,points:d});return e.renderDotItem(u,_)}),v={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return H.createElement(gt,Ac({className:"recharts-area-dots"},v),y)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,a=i.baseLine,s=i.points,o=i.strokeWidth,c=s[0].x,u=s[s.length-1].x,d=r*Math.abs(c-u),f=Zo(s.map(function(h){return h.y||0}));return je(a)&&typeof a=="number"?f=Math.max(a,f):a&&Array.isArray(a)&&a.length&&(f=Math.max(Zo(a.map(function(h){return h.y||0})),f)),je(f)?H.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(f+(o?parseInt("".concat(o),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,a=i.baseLine,s=i.points,o=i.strokeWidth,c=s[0].y,u=s[s.length-1].y,d=r*Math.abs(c-u),f=Zo(s.map(function(h){return h.x||0}));return je(a)&&typeof a=="number"?f=Math.max(a,f):a&&Array.isArray(a)&&a.length&&(f=Math.max(Zo(a.map(function(h){return h.x||0})),f)),je(f)?H.createElement("rect",{x:0,y:c<u?c:c-d,width:f+(o?parseInt("".concat(o),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,a,s){var o=this.props,c=o.layout,u=o.type,d=o.stroke,f=o.connectNulls,h=o.isRange;o.ref;var p=L8(o,mje);return H.createElement(gt,{clipPath:a?"url(#clipPath-".concat(s,")"):null},H.createElement(Dc,Ac({},Ke(p,!0),{points:r,connectNulls:f,type:u,baseLine:i,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&H.createElement(Dc,Ac({},Ke(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:r})),d!=="none"&&h&&H.createElement(Dc,Ac({},Ke(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var a=this,s=this.props,o=s.points,c=s.baseLine,u=s.isAnimationActive,d=s.animationBegin,f=s.animationDuration,h=s.animationEasing,p=s.animationId,y=this.state,v=y.prevPoints,b=y.prevBaseLine;return H.createElement(Ia,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var _=x.t;if(v){var S=v.length/o.length,T=o.map(function(P,O){var D=Math.floor(O*S);if(v[D]){var M=v[D],z=Yn(M.x,P.x),L=Yn(M.y,P.y);return Bo(Bo({},P),{},{x:z(_),y:L(_)})}return P}),E;if(je(c)&&typeof c=="number"){var A=Yn(b,c);E=A(_)}else if(it(c)||Vf(c)){var j=Yn(b,0);E=j(_)}else E=c.map(function(P,O){var D=Math.floor(O*S);if(b[D]){var M=b[D],z=Yn(M.x,P.x),L=Yn(M.y,P.y);return Bo(Bo({},P),{},{x:z(_),y:L(_)})}return P});return a.renderAreaStatically(T,E,r,i)}return H.createElement(gt,null,H.createElement("defs",null,H.createElement("clipPath",{id:"animationClipPath-".concat(i)},a.renderClipRect(_))),H.createElement(gt,{clipPath:"url(#animationClipPath-".concat(i,")")},a.renderAreaStatically(o,c,r,i)))})}},{key:"renderArea",value:function(r,i){var a=this.props,s=a.points,o=a.baseLine,c=a.isAnimationActive,u=this.state,d=u.prevPoints,f=u.prevBaseLine,h=u.totalLength;return c&&s&&s.length&&(!d&&h>0||!Xc(d,s)||!Xc(f,o))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(s,o,r,i)}},{key:"render",value:function(){var r,i=this.props,a=i.hide,s=i.dot,o=i.points,c=i.className,u=i.top,d=i.left,f=i.xAxis,h=i.yAxis,p=i.width,y=i.height,v=i.isAnimationActive,b=i.id;if(a||!o||!o.length)return null;var x=this.state.isAnimationFinished,_=o.length===1,S=dt("recharts-area",c),T=f&&f.allowDataOverflow,E=h&&h.allowDataOverflow,A=T||E,j=it(b)?this.id:b,P=(r=Ke(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},O=P.r,D=O===void 0?3:O,M=P.strokeWidth,z=M===void 0?2:M,L=_z(s)?s:{},te=L.clipDot,X=te===void 0?!0:te,W=D*2+z;return H.createElement(gt,{className:S},T||E?H.createElement("defs",null,H.createElement("clipPath",{id:"clipPath-".concat(j)},H.createElement("rect",{x:T?d:d-p/2,y:E?u:u-y/2,width:T?p:p*2,height:E?y:y*2})),!X&&H.createElement("clipPath",{id:"clipPath-dots-".concat(j)},H.createElement("rect",{x:d-W/2,y:u-W/2,width:p+W,height:y+W}))):null,_?null:this.renderArea(A,j),(s||_)&&this.renderDots(A,X,j),(!v||x)&&ra.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(k.PureComponent);R8=Rl;ns(Rl,"displayName","Area");ns(Rl,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Ol.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});ns(Rl,"getBaseValue",function(t,e,n,r){var i=t.layout,a=t.baseValue,s=e.props.baseValue,o=s??a;if(je(o)&&typeof o=="number")return o;var c=i==="horizontal"?r:n,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),f=Math.min(u[0],u[1]);return o==="dataMin"?f:o==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return o==="dataMin"?u[0]:o==="dataMax"?u[1]:u[0]});ns(Rl,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,i=t.yAxis,a=t.xAxisTicks,s=t.yAxisTicks,o=t.bandSize,c=t.dataKey,u=t.stackedData,d=t.dataStartIndex,f=t.displayedData,h=t.offset,p=e.layout,y=u&&u.length,v=R8.getBaseValue(e,n,r,i),b=p==="horizontal",x=!1,_=f.map(function(T,E){var A;y?A=u[d+E]:(A=Nn(T,c),Array.isArray(A)?x=!0:A=[v,A]);var j=A[1]==null||y&&Nn(T,c)==null;return b?{x:c0({axis:r,ticks:a,bandSize:o,entry:T,index:E}),y:j?null:i.scale(A[1]),value:A,payload:T}:{x:j?null:r.scale(A[1]),y:c0({axis:i,ticks:s,bandSize:o,entry:T,index:E}),value:A,payload:T}}),S;return y||x?S=_.map(function(T){var E=Array.isArray(T.value)?T.value[0]:null;return b?{x:T.x,y:E!=null&&T.y!=null?i.scale(E):null}:{x:E!=null?r.scale(E):null,y:T.y}}):S=b?i.scale(v):r.scale(v),Bo({points:_,baseLine:S,layout:p,isRange:x},h)});ns(Rl,"renderDotItem",function(t,e){var n;if(H.isValidElement(t))n=H.cloneElement(t,e);else if(Je(t))n=t(e);else{var r=dt("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,a=L8(e,gje);n=H.createElement(gg,Ac({},a,{key:i,className:r}))}return n});function wf(t){"@babel/helpers - typeof";return wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wf(t)}function Aje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pje(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,B8(r.key),r)}}function Eje(t,e,n){return e&&Pje(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Tje(t,e,n){return e=D0(e),Cje(t,F8()?Reflect.construct(e,n||[],D0(t).constructor):e.apply(t,n))}function Cje(t,e){if(e&&(wf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nje(t)}function Nje(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function F8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(F8=function(){return!!t})()}function D0(t){return D0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},D0(t)}function kje(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bS(t,e)}function bS(t,e){return bS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},bS(t,e)}function V8(t,e,n){return e=B8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B8(t){var e=Oje(t,"string");return wf(e)=="symbol"?e:e+""}function Oje(t,e){if(wf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function wS(){return wS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wS.apply(this,arguments)}function Ije(t){var e=t.xAxisId,n=sE(),r=oE(),i=_8(e);return i==null?null:k.createElement(Gf,wS({},i,{className:dt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(s){return Us(s,!0)}}))}var Sn=function(t){function e(){return Aje(this,e),Tje(this,e,arguments)}return kje(e,t),Eje(e,[{key:"render",value:function(){return k.createElement(Ije,this.props)}}])}(k.Component);V8(Sn,"displayName","XAxis");V8(Sn,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function _f(t){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_f(t)}function Dje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mje(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,K8(r.key),r)}}function Rje(t,e,n){return e&&Mje(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Lje(t,e,n){return e=M0(e),$je(t,U8()?Reflect.construct(e,n||[],M0(t).constructor):e.apply(t,n))}function $je(t,e){if(e&&(_f(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zje(t)}function zje(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function U8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(U8=function(){return!!t})()}function M0(t){return M0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},M0(t)}function Fje(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_S(t,e)}function _S(t,e){return _S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_S(t,e)}function W8(t,e,n){return e=K8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K8(t){var e=Vje(t,"string");return _f(e)=="symbol"?e:e+""}function Vje(t,e){if(_f(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_f(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function SS(){return SS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SS.apply(this,arguments)}var Bje=function(e){var n=e.yAxisId,r=sE(),i=oE(),a=S8(n);return a==null?null:k.createElement(Gf,SS({},a,{className:dt("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(o){return Us(o,!0)}}))},kn=function(t){function e(){return Dje(this,e),Lje(this,e,arguments)}return Fje(e,t),Rje(e,[{key:"render",value:function(){return k.createElement(Bje,this.props)}}])}(k.Component);W8(kn,"displayName","YAxis");W8(kn,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function fM(t){return qje(t)||Kje(t)||Wje(t)||Uje()}function Uje(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wje(t,e){if(t){if(typeof t=="string")return jS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jS(t,e)}}function Kje(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function qje(t){if(Array.isArray(t))return jS(t)}function jS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var AS=function(e,n,r,i,a){var s=Ri(e,mb),o=Ri(e,vb),c=[].concat(fM(s),fM(o)),u=Ri(e,xb),d="".concat(i,"Id"),f=i[0],h=n;if(c.length&&(h=c.reduce(function(v,b){if(b.props[d]===r&&ds(b.props,"extendDomain")&&je(b.props[f])){var x=b.props[f];return[Math.min(v[0],x),Math.max(v[1],x)]}return v},h)),u.length){var p="".concat(f,"1"),y="".concat(f,"2");h=u.reduce(function(v,b){if(b.props[d]===r&&ds(b.props,"extendDomain")&&je(b.props[p])&&je(b.props[y])){var x=b.props[p],_=b.props[y];return[Math.min(v[0],x,_),Math.max(v[1],x,_)]}return v},h)}return a&&a.length&&(h=a.reduce(function(v,b){return je(b)?[Math.min(v[0],b),Math.max(v[1],b)]:v},h)),h},q8={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function a(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new i(d,f||c,h),y=n?n+u:u;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],p]:c._events[y].push(p):(c._events[y]=p,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)e.call(d,f)&&u.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=n?n+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,y=new Array(p);h<p;h++)y[h]=f[h].fn;return y},o.prototype.listenerCount=function(u){var d=n?n+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,h,p,y){var v=n?n+u:u;if(!this._events[v])return!1;var b=this._events[v],x=arguments.length,_,S;if(b.fn){switch(b.once&&this.removeListener(u,b.fn,void 0,!0),x){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,f),!0;case 4:return b.fn.call(b.context,d,f,h),!0;case 5:return b.fn.call(b.context,d,f,h,p),!0;case 6:return b.fn.call(b.context,d,f,h,p,y),!0}for(S=1,_=new Array(x-1);S<x;S++)_[S-1]=arguments[S];b.fn.apply(b.context,_)}else{var T=b.length,E;for(S=0;S<T;S++)switch(b[S].once&&this.removeListener(u,b[S].fn,void 0,!0),x){case 1:b[S].fn.call(b[S].context);break;case 2:b[S].fn.call(b[S].context,d);break;case 3:b[S].fn.call(b[S].context,d,f);break;case 4:b[S].fn.call(b[S].context,d,f,h);break;default:if(!_)for(E=1,_=new Array(x-1);E<x;E++)_[E-1]=arguments[E];b[S].fn.apply(b[S].context,_)}}return!0},o.prototype.on=function(u,d,f){return a(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return a(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,h){var p=n?n+u:u;if(!this._events[p])return this;if(!d)return s(this,p),this;var y=this._events[p];if(y.fn)y.fn===d&&(!h||y.once)&&(!f||y.context===f)&&s(this,p);else{for(var v=0,b=[],x=y.length;v<x;v++)(y[v].fn!==d||h&&!y[v].once||f&&y[v].context!==f)&&b.push(y[v]);b.length?this._events[p]=b.length===1?b[0]:b:s(this,p)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&s(this,d)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(q8);var Hje=q8.exports;const Gje=Ot(Hje);var r1=new Gje,i1="recharts.syncMouseEvents";function Mm(t){"@babel/helpers - typeof";return Mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mm(t)}function Yje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xje(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,H8(r.key),r)}}function Qje(t,e,n){return e&&Xje(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function a1(t,e,n){return e=H8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H8(t){var e=Jje(t,"string");return Mm(e)=="symbol"?e:e+""}function Jje(t,e){if(Mm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Mm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Zje=function(){function t(){Yje(this,t),a1(this,"activeIndex",0),a1(this,"coordinateList",[]),a1(this,"layout","horizontal")}return Qje(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,a=i===void 0?null:i,s=n.container,o=s===void 0?null:s,c=n.layout,u=c===void 0?null:c,d=n.offset,f=d===void 0?null:d,h=n.mouseHandlerCallback,p=h===void 0?null:h;this.coordinateList=(r=a??this.coordinateList)!==null&&r!==void 0?r:[],this.container=o??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,s=i.y,o=i.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,f=a+c+u,h=s+this.offset.top+o/2+d;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function eAe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&je(r)&&je(i))return!0}return!1}function tAe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function G8(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,a=t.endAngle,s=Qt(e,n,r,i),o=Qt(e,n,r,a);return{points:[s,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}function nAe(t,e,n){var r,i,a,s;if(t==="horizontal")r=e.x,a=r,i=n.top,s=n.top+n.height;else if(t==="vertical")i=e.y,s=i,r=n.left,a=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var o=e.cx,c=e.cy,u=e.innerRadius,d=e.outerRadius,f=e.angle,h=Qt(o,c,u,f),p=Qt(o,c,d,f);r=h.x,i=h.y,a=p.x,s=p.y}else return G8(e);return[{x:r,y:i},{x:a,y:s}]}function Rm(t){"@babel/helpers - typeof";return Rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rm(t)}function hM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hM(Object(n),!0).forEach(function(r){rAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rAe(t,e,n){return e=iAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iAe(t){var e=aAe(t,"string");return Rm(e)=="symbol"?e:e+""}function aAe(t,e){if(Rm(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sAe(t){var e,n,r=t.element,i=t.tooltipEventType,a=t.isActive,s=t.activeCoordinate,o=t.activePayload,c=t.offset,u=t.activeTooltipIndex,d=t.tooltipAxisBandSize,f=t.layout,h=t.chartName,p=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!p||!a||!s||h!=="ScatterChart"&&i!=="axis")return null;var y,v=Dc;if(h==="ScatterChart")y=s,v=pwe;else if(h==="BarChart")y=tAe(f,s,c,d),v=tE;else if(f==="radial"){var b=G8(s),x=b.cx,_=b.cy,S=b.radius,T=b.startAngle,E=b.endAngle;y={cx:x,cy:_,startAngle:T,endAngle:E,innerRadius:S,outerRadius:S},v=VF}else y={points:nAe(f,s,c)},v=Dc;var A=fv(fv(fv(fv({stroke:"#ccc",pointerEvents:"none"},c),y),Ke(p,!1)),{},{payload:o,payloadIndex:u,className:dt("recharts-tooltip-cursor",p.className)});return k.isValidElement(p)?k.cloneElement(p,A):k.createElement(v,A)}var oAe=["item"],lAe=["children","className","width","height","style","compact","title","desc"];function Sf(t){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sf(t)}function gd(){return gd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gd.apply(this,arguments)}function pM(t,e){return dAe(t)||uAe(t,e)||X8(t,e)||cAe()}function cAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uAe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,s,o=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw i}}return o}}function dAe(t){if(Array.isArray(t))return t}function mM(t,e){if(t==null)return{};var n=fAe(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fAe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function hAe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pAe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Q8(r.key),r)}}function mAe(t,e,n){return e&&pAe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function gAe(t,e,n){return e=R0(e),vAe(t,Y8()?Reflect.construct(e,n||[],R0(t).constructor):e.apply(t,n))}function vAe(t,e){if(e&&(Sf(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yAe(t)}function yAe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Y8(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Y8=function(){return!!t})()}function R0(t){return R0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},R0(t)}function xAe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PS(t,e)}function PS(t,e){return PS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},PS(t,e)}function jf(t){return _Ae(t)||wAe(t)||X8(t)||bAe()}function bAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X8(t,e){if(t){if(typeof t=="string")return ES(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ES(t,e)}}function wAe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _Ae(t){if(Array.isArray(t))return ES(t)}function ES(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ge(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gM(Object(n),!0).forEach(function(r){Xe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xe(t,e,n){return e=Q8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Q8(t){var e=SAe(t,"string");return Sf(e)=="symbol"?e:e+""}function SAe(t,e){if(Sf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jAe={xAxis:["bottom","top"],yAxis:["left","right"]},AAe={width:"100%",height:"100%"},J8={x:0,y:0};function hv(t){return t}var PAe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},EAe=function(e,n,r,i){var a=n.find(function(d){return d&&d.index===r});if(a){if(e==="horizontal")return{x:a.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,o=i.radius;return ge(ge(ge({},i),Qt(i.cx,i.cy,o,s)),{},{angle:s,radius:o})}var c=a.coordinate,u=i.angle;return ge(ge(ge({},i),Qt(i.cx,i.cy,c,u)),{},{angle:u,radius:c})}return J8},bb=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,a=n.dataEndIndex,s=(r??[]).reduce(function(o,c){var u=c.props.data;return u&&u.length?[].concat(jf(o),jf(u)):o},[]);return s.length>0?s:e&&e.length&&je(i)&&je(a)?e.slice(i,a+1):[]};function Z8(t){return t==="number"?[0,"auto"]:void 0}var TS=function(e,n,r,i){var a=e.graphicalItems,s=e.tooltipAxis,o=bb(n,e);return r<0||!a||!a.length||r>=o.length?null:a.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:n;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var h;if(s.dataKey&&!s.allowDuplicatedCategory){var p=f===void 0?o:f;h=My(p,s.dataKey,i)}else h=f&&f[r]||o[r];return h?[].concat(jf(c),[MF(u,h)]):c},[])},vM=function(e,n,r,i){var a=i||{x:e.chartX,y:e.chartY},s=PAe(a,r),o=e.orderedTooltipTicks,c=e.tooltipAxis,u=e.tooltipTicks,d=Lye(s,o,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,h=TS(e,n,d,f),p=EAe(r,o,d,a);return{activeTooltipIndex:d,activeLabel:f,activePayload:h,activeCoordinate:p}}return null},TAe=function(e,n){var r=n.axes,i=n.graphicalItems,a=n.axisType,s=n.axisIdKey,o=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,f=e.children,h=e.stackOffset,p=CF(d,a);return r.reduce(function(y,v){var b,x=v.type.defaultProps!==void 0?ge(ge({},v.type.defaultProps),v.props):v.props,_=x.type,S=x.dataKey,T=x.allowDataOverflow,E=x.allowDuplicatedCategory,A=x.scale,j=x.ticks,P=x.includeHidden,O=x[s];if(y[O])return y;var D=bb(e.data,{graphicalItems:i.filter(function(ve){var we,Le=s in ve.props?ve.props[s]:(we=ve.type.defaultProps)===null||we===void 0?void 0:we[s];return Le===O}),dataStartIndex:c,dataEndIndex:u}),M=D.length,z,L,te;eAe(x.domain,T,_)&&(z=V2(x.domain,null,T),p&&(_==="number"||A!=="auto")&&(te=gp(D,S,"category")));var X=Z8(_);if(!z||z.length===0){var W,B=(W=x.domain)!==null&&W!==void 0?W:X;if(S){if(z=gp(D,S,_),_==="category"&&p){var F=Ere(z);E&&F?(L=z,z=_0(0,M)):E||(z=LI(B,z,v).reduce(function(ve,we){return ve.indexOf(we)>=0?ve:[].concat(jf(ve),[we])},[]))}else if(_==="category")E?z=z.filter(function(ve){return ve!==""&&!it(ve)}):z=LI(B,z,v).reduce(function(ve,we){return ve.indexOf(we)>=0||we===""||it(we)?ve:[].concat(jf(ve),[we])},[]);else if(_==="number"){var q=Bye(D,i.filter(function(ve){var we,Le,Ye=s in ve.props?ve.props[s]:(we=ve.type.defaultProps)===null||we===void 0?void 0:we[s],et="hide"in ve.props?ve.props.hide:(Le=ve.type.defaultProps)===null||Le===void 0?void 0:Le.hide;return Ye===O&&(P||!et)}),S,a,d);q&&(z=q)}p&&(_==="number"||A!=="auto")&&(te=gp(D,S,"category"))}else p?z=_0(0,M):o&&o[O]&&o[O].hasStack&&_==="number"?z=h==="expand"?[0,1]:DF(o[O].stackGroups,c,u):z=TF(D,i.filter(function(ve){var we=s in ve.props?ve.props[s]:ve.type.defaultProps[s],Le="hide"in ve.props?ve.props.hide:ve.type.defaultProps.hide;return we===O&&(P||!Le)}),_,d,!0);if(_==="number")z=AS(f,z,O,a,j),B&&(z=V2(B,z,T));else if(_==="category"&&B){var ae=B,ce=z.every(function(ve){return ae.indexOf(ve)>=0});ce&&(z=ae)}}return ge(ge({},y),{},Xe({},O,ge(ge({},x),{},{axisType:a,domain:z,categoricalDomain:te,duplicateDomain:L,originalDomain:(b=x.domain)!==null&&b!==void 0?b:X,isCategorical:p,layout:d})))},{})},CAe=function(e,n){var r=n.graphicalItems,i=n.Axis,a=n.axisType,s=n.axisIdKey,o=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,f=e.children,h=bb(e.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),p=h.length,y=CF(d,a),v=-1;return r.reduce(function(b,x){var _=x.type.defaultProps!==void 0?ge(ge({},x.type.defaultProps),x.props):x.props,S=_[s],T=Z8("number");if(!b[S]){v++;var E;return y?E=_0(0,p):o&&o[S]&&o[S].hasStack?(E=DF(o[S].stackGroups,c,u),E=AS(f,E,S,a)):(E=V2(T,TF(h,r.filter(function(A){var j,P,O=s in A.props?A.props[s]:(j=A.type.defaultProps)===null||j===void 0?void 0:j[s],D="hide"in A.props?A.props.hide:(P=A.type.defaultProps)===null||P===void 0?void 0:P.hide;return O===S&&!D}),"number",d),i.defaultProps.allowDataOverflow),E=AS(f,E,S,a)),ge(ge({},b),{},Xe({},S,ge(ge({axisType:a},i.defaultProps),{},{hide:!0,orientation:Mi(jAe,"".concat(a,".").concat(v%2),null),domain:E,originalDomain:T,isCategorical:y,layout:d})))}return b},{})},NAe=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,a=n.AxisComp,s=n.graphicalItems,o=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.children,f="".concat(i,"Id"),h=Ri(d,a),p={};return h&&h.length?p=TAe(e,{axes:h,graphicalItems:s,axisType:i,axisIdKey:f,stackGroups:o,dataStartIndex:c,dataEndIndex:u}):s&&s.length&&(p=CAe(e,{Axis:a,graphicalItems:s,axisType:i,axisIdKey:f,stackGroups:o,dataStartIndex:c,dataEndIndex:u})),p},kAe=function(e){var n=Go(e),r=Us(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:TP(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:u0(n,r)}},yM=function(e){var n=e.children,r=e.defaultShowTooltip,i=Ci(n,hf),a=0,s=0;return e.data&&e.data.length!==0&&(s=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!r}},OAe=function(e){return!e||!e.length?!1:e.some(function(n){var r=Hs(n&&n.type);return r&&r.indexOf("Bar")>=0})},xM=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},IAe=function(e,n){var r=e.props,i=e.graphicalItems,a=e.xAxisMap,s=a===void 0?{}:a,o=e.yAxisMap,c=o===void 0?{}:o,u=r.width,d=r.height,f=r.children,h=r.margin||{},p=Ci(f,hf),y=Ci(f,Ca),v=Object.keys(c).reduce(function(E,A){var j=c[A],P=j.orientation;return!j.mirror&&!j.hide?ge(ge({},E),{},Xe({},P,E[P]+j.width)):E},{left:h.left||0,right:h.right||0}),b=Object.keys(s).reduce(function(E,A){var j=s[A],P=j.orientation;return!j.mirror&&!j.hide?ge(ge({},E),{},Xe({},P,Mi(E,"".concat(P))+j.height)):E},{top:h.top||0,bottom:h.bottom||0}),x=ge(ge({},b),v),_=x.bottom;p&&(x.bottom+=p.props.height||hf.defaultProps.height),y&&n&&(x=Fye(x,i,r,n));var S=u-x.left-x.right,T=d-x.top-x.bottom;return ge(ge({brushBottom:_},x),{},{width:Math.max(S,0),height:Math.max(T,0)})},DAe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},wb=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,a=i===void 0?"axis":i,s=e.validateTooltipEventTypes,o=s===void 0?["axis"]:s,c=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,f=e.defaultProps,h=function(x,_){var S=_.graphicalItems,T=_.stackGroups,E=_.offset,A=_.updateId,j=_.dataStartIndex,P=_.dataEndIndex,O=x.barSize,D=x.layout,M=x.barGap,z=x.barCategoryGap,L=x.maxBarSize,te=xM(D),X=te.numericAxisName,W=te.cateAxisName,B=OAe(S),F=[];return S.forEach(function(q,ae){var ce=bb(x.data,{graphicalItems:[q],dataStartIndex:j,dataEndIndex:P}),ve=q.type.defaultProps!==void 0?ge(ge({},q.type.defaultProps),q.props):q.props,we=ve.dataKey,Le=ve.maxBarSize,Ye=ve["".concat(X,"Id")],et=ve["".concat(W,"Id")],ke={},We=c.reduce(function(dn,ti){var zr=_["".concat(ti.axisType,"Map")],ca=ve["".concat(ti.axisType,"Id")];zr&&zr[ca]||ti.axisType==="zAxis"||Jc();var wi=zr[ca];return ge(ge({},dn),{},Xe(Xe({},ti.axisType,wi),"".concat(ti.axisType,"Ticks"),Us(wi)))},ke),Q=We[W],Pe=We["".concat(W,"Ticks")],xe=T&&T[Ye]&&T[Ye].hasStack&&Qye(q,T[Ye].stackGroups),de=Hs(q.type).indexOf("Bar")>=0,pt=u0(Q,Pe),nt=[],Oe=B&&$ye({barSize:O,stackGroups:T,totalSize:DAe(We,W)});if(de){var Ze,yn,Zr=it(Le)?L:Le,bi=(Ze=(yn=u0(Q,Pe,!0))!==null&&yn!==void 0?yn:Zr)!==null&&Ze!==void 0?Ze:0;nt=zye({barGap:M,barCategoryGap:z,bandSize:bi!==pt?bi:pt,sizeList:Oe[et],maxBarSize:Zr}),bi!==pt&&(nt=nt.map(function(dn){return ge(ge({},dn),{},{position:ge(ge({},dn.position),{},{offset:dn.position.offset-bi/2})})}))}var ei=q&&q.type&&q.type.getComposedData;ei&&F.push({props:ge(ge({},ei(ge(ge({},We),{},{displayedData:ce,props:x,dataKey:we,item:q,bandSize:pt,barPosition:nt,offset:E,stackedData:xe,layout:D,dataStartIndex:j,dataEndIndex:P}))),{},Xe(Xe(Xe({key:q.key||"item-".concat(ae)},X,We[X]),W,We[W]),"animationId",A)),childIndex:zre(q,x.children),item:q})}),F},p=function(x,_){var S=x.props,T=x.dataStartIndex,E=x.dataEndIndex,A=x.updateId;if(!kk({props:S}))return null;var j=S.children,P=S.layout,O=S.stackOffset,D=S.data,M=S.reverseStackOrder,z=xM(P),L=z.numericAxisName,te=z.cateAxisName,X=Ri(j,r),W=Yye(D,X,"".concat(L,"Id"),"".concat(te,"Id"),O,M),B=c.reduce(function(ve,we){var Le="".concat(we.axisType,"Map");return ge(ge({},ve),{},Xe({},Le,NAe(S,ge(ge({},we),{},{graphicalItems:X,stackGroups:we.axisType===L&&W,dataStartIndex:T,dataEndIndex:E}))))},{}),F=IAe(ge(ge({},B),{},{props:S,graphicalItems:X}),_==null?void 0:_.legendBBox);Object.keys(B).forEach(function(ve){B[ve]=d(S,B[ve],F,ve.replace("Map",""),n)});var q=B["".concat(te,"Map")],ae=kAe(q),ce=h(S,ge(ge({},B),{},{dataStartIndex:T,dataEndIndex:E,updateId:A,graphicalItems:X,stackGroups:W,offset:F}));return ge(ge({formattedGraphicalItems:ce,graphicalItems:X,offset:F,stackGroups:W},ae),B)},y=function(b){function x(_){var S,T,E;return hAe(this,x),E=gAe(this,x,[_]),Xe(E,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Xe(E,"accessibilityManager",new Zje),Xe(E,"handleLegendBBoxUpdate",function(A){if(A){var j=E.state,P=j.dataStartIndex,O=j.dataEndIndex,D=j.updateId;E.setState(ge({legendBBox:A},p({props:E.props,dataStartIndex:P,dataEndIndex:O,updateId:D},ge(ge({},E.state),{},{legendBBox:A}))))}}),Xe(E,"handleReceiveSyncEvent",function(A,j,P){if(E.props.syncId===A){if(P===E.eventEmitterSymbol&&typeof E.props.syncMethod!="function")return;E.applySyncEvent(j)}}),Xe(E,"handleBrushChange",function(A){var j=A.startIndex,P=A.endIndex;if(j!==E.state.dataStartIndex||P!==E.state.dataEndIndex){var O=E.state.updateId;E.setState(function(){return ge({dataStartIndex:j,dataEndIndex:P},p({props:E.props,dataStartIndex:j,dataEndIndex:P,updateId:O},E.state))}),E.triggerSyncEvent({dataStartIndex:j,dataEndIndex:P})}}),Xe(E,"handleMouseEnter",function(A){var j=E.getMouseInfo(A);if(j){var P=ge(ge({},j),{},{isTooltipActive:!0});E.setState(P),E.triggerSyncEvent(P);var O=E.props.onMouseEnter;Je(O)&&O(P,A)}}),Xe(E,"triggeredAfterMouseMove",function(A){var j=E.getMouseInfo(A),P=j?ge(ge({},j),{},{isTooltipActive:!0}):{isTooltipActive:!1};E.setState(P),E.triggerSyncEvent(P);var O=E.props.onMouseMove;Je(O)&&O(P,A)}),Xe(E,"handleItemMouseEnter",function(A){E.setState(function(){return{isTooltipActive:!0,activeItem:A,activePayload:A.tooltipPayload,activeCoordinate:A.tooltipPosition||{x:A.cx,y:A.cy}}})}),Xe(E,"handleItemMouseLeave",function(){E.setState(function(){return{isTooltipActive:!1}})}),Xe(E,"handleMouseMove",function(A){A.persist(),E.throttleTriggeredAfterMouseMove(A)}),Xe(E,"handleMouseLeave",function(A){E.throttleTriggeredAfterMouseMove.cancel();var j={isTooltipActive:!1};E.setState(j),E.triggerSyncEvent(j);var P=E.props.onMouseLeave;Je(P)&&P(j,A)}),Xe(E,"handleOuterEvent",function(A){var j=$re(A),P=Mi(E.props,"".concat(j));if(j&&Je(P)){var O,D;/.*touch.*/i.test(j)?D=E.getMouseInfo(A.changedTouches[0]):D=E.getMouseInfo(A),P((O=D)!==null&&O!==void 0?O:{},A)}}),Xe(E,"handleClick",function(A){var j=E.getMouseInfo(A);if(j){var P=ge(ge({},j),{},{isTooltipActive:!0});E.setState(P),E.triggerSyncEvent(P);var O=E.props.onClick;Je(O)&&O(P,A)}}),Xe(E,"handleMouseDown",function(A){var j=E.props.onMouseDown;if(Je(j)){var P=E.getMouseInfo(A);j(P,A)}}),Xe(E,"handleMouseUp",function(A){var j=E.props.onMouseUp;if(Je(j)){var P=E.getMouseInfo(A);j(P,A)}}),Xe(E,"handleTouchMove",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&E.throttleTriggeredAfterMouseMove(A.changedTouches[0])}),Xe(E,"handleTouchStart",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&E.handleMouseDown(A.changedTouches[0])}),Xe(E,"handleTouchEnd",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&E.handleMouseUp(A.changedTouches[0])}),Xe(E,"handleDoubleClick",function(A){var j=E.props.onDoubleClick;if(Je(j)){var P=E.getMouseInfo(A);j(P,A)}}),Xe(E,"handleContextMenu",function(A){var j=E.props.onContextMenu;if(Je(j)){var P=E.getMouseInfo(A);j(P,A)}}),Xe(E,"triggerSyncEvent",function(A){E.props.syncId!==void 0&&r1.emit(i1,E.props.syncId,A,E.eventEmitterSymbol)}),Xe(E,"applySyncEvent",function(A){var j=E.props,P=j.layout,O=j.syncMethod,D=E.state.updateId,M=A.dataStartIndex,z=A.dataEndIndex;if(A.dataStartIndex!==void 0||A.dataEndIndex!==void 0)E.setState(ge({dataStartIndex:M,dataEndIndex:z},p({props:E.props,dataStartIndex:M,dataEndIndex:z,updateId:D},E.state)));else if(A.activeTooltipIndex!==void 0){var L=A.chartX,te=A.chartY,X=A.activeTooltipIndex,W=E.state,B=W.offset,F=W.tooltipTicks;if(!B)return;if(typeof O=="function")X=O(F,A);else if(O==="value"){X=-1;for(var q=0;q<F.length;q++)if(F[q].value===A.activeLabel){X=q;break}}var ae=ge(ge({},B),{},{x:B.left,y:B.top}),ce=Math.min(L,ae.x+ae.width),ve=Math.min(te,ae.y+ae.height),we=F[X]&&F[X].value,Le=TS(E.state,E.props.data,X),Ye=F[X]?{x:P==="horizontal"?F[X].coordinate:ce,y:P==="horizontal"?ve:F[X].coordinate}:J8;E.setState(ge(ge({},A),{},{activeLabel:we,activeCoordinate:Ye,activePayload:Le,activeTooltipIndex:X}))}else E.setState(A)}),Xe(E,"renderCursor",function(A){var j,P=E.state,O=P.isTooltipActive,D=P.activeCoordinate,M=P.activePayload,z=P.offset,L=P.activeTooltipIndex,te=P.tooltipAxisBandSize,X=E.getTooltipEventType(),W=(j=A.props.active)!==null&&j!==void 0?j:O,B=E.props.layout,F=A.key||"_recharts-cursor";return H.createElement(sAe,{key:F,activeCoordinate:D,activePayload:M,activeTooltipIndex:L,chartName:n,element:A,isActive:W,layout:B,offset:z,tooltipAxisBandSize:te,tooltipEventType:X})}),Xe(E,"renderPolarAxis",function(A,j,P){var O=Mi(A,"type.axisType"),D=Mi(E.state,"".concat(O,"Map")),M=A.type.defaultProps,z=M!==void 0?ge(ge({},M),A.props):A.props,L=D&&D[z["".concat(O,"Id")]];return k.cloneElement(A,ge(ge({},L),{},{className:dt(O,L.className),key:A.key||"".concat(j,"-").concat(P),ticks:Us(L,!0)}))}),Xe(E,"renderPolarGrid",function(A){var j=A.props,P=j.radialLines,O=j.polarAngles,D=j.polarRadius,M=E.state,z=M.radiusAxisMap,L=M.angleAxisMap,te=Go(z),X=Go(L),W=X.cx,B=X.cy,F=X.innerRadius,q=X.outerRadius;return k.cloneElement(A,{polarAngles:Array.isArray(O)?O:Us(X,!0).map(function(ae){return ae.coordinate}),polarRadius:Array.isArray(D)?D:Us(te,!0).map(function(ae){return ae.coordinate}),cx:W,cy:B,innerRadius:F,outerRadius:q,key:A.key||"polar-grid",radialLines:P})}),Xe(E,"renderLegend",function(){var A=E.state.formattedGraphicalItems,j=E.props,P=j.children,O=j.width,D=j.height,M=E.props.margin||{},z=O-(M.left||0)-(M.right||0),L=PF({children:P,formattedGraphicalItems:A,legendWidth:z,legendContent:u});if(!L)return null;var te=L.item,X=mM(L,oAe);return k.cloneElement(te,ge(ge({},X),{},{chartWidth:O,chartHeight:D,margin:M,onBBoxUpdate:E.handleLegendBBoxUpdate}))}),Xe(E,"renderTooltip",function(){var A,j=E.props,P=j.children,O=j.accessibilityLayer,D=Ci(P,Mt);if(!D)return null;var M=E.state,z=M.isTooltipActive,L=M.activeCoordinate,te=M.activePayload,X=M.activeLabel,W=M.offset,B=(A=D.props.active)!==null&&A!==void 0?A:z;return k.cloneElement(D,{viewBox:ge(ge({},W),{},{x:W.left,y:W.top}),active:B,label:X,payload:B?te:[],coordinate:L,accessibilityLayer:O})}),Xe(E,"renderBrush",function(A){var j=E.props,P=j.margin,O=j.data,D=E.state,M=D.offset,z=D.dataStartIndex,L=D.dataEndIndex,te=D.updateId;return k.cloneElement(A,{key:A.key||"_recharts-brush",onChange:lv(E.handleBrushChange,A.props.onChange),data:O,x:je(A.props.x)?A.props.x:M.left,y:je(A.props.y)?A.props.y:M.top+M.height+M.brushBottom-(P.bottom||0),width:je(A.props.width)?A.props.width:M.width,startIndex:z,endIndex:L,updateId:"brush-".concat(te)})}),Xe(E,"renderReferenceElement",function(A,j,P){if(!A)return null;var O=E,D=O.clipPathId,M=E.state,z=M.xAxisMap,L=M.yAxisMap,te=M.offset,X=A.type.defaultProps||{},W=A.props,B=W.xAxisId,F=B===void 0?X.xAxisId:B,q=W.yAxisId,ae=q===void 0?X.yAxisId:q;return k.cloneElement(A,{key:A.key||"".concat(j,"-").concat(P),xAxis:z[F],yAxis:L[ae],viewBox:{x:te.left,y:te.top,width:te.width,height:te.height},clipPathId:D})}),Xe(E,"renderActivePoints",function(A){var j=A.item,P=A.activePoint,O=A.basePoint,D=A.childIndex,M=A.isRange,z=[],L=j.props.key,te=j.item.type.defaultProps!==void 0?ge(ge({},j.item.type.defaultProps),j.item.props):j.item.props,X=te.activeDot,W=te.dataKey,B=ge(ge({index:D,dataKey:W,cx:P.x,cy:P.y,r:4,fill:eE(j.item),strokeWidth:2,stroke:"#fff",payload:P.payload,value:P.value},Ke(X,!1)),Ry(X));return z.push(x.renderActiveDot(X,B,"".concat(L,"-activePoint-").concat(D))),O?z.push(x.renderActiveDot(X,ge(ge({},B),{},{cx:O.x,cy:O.y}),"".concat(L,"-basePoint-").concat(D))):M&&z.push(null),z}),Xe(E,"renderGraphicChild",function(A,j,P){var O=E.filterFormatItem(A,j,P);if(!O)return null;var D=E.getTooltipEventType(),M=E.state,z=M.isTooltipActive,L=M.tooltipAxis,te=M.activeTooltipIndex,X=M.activeLabel,W=E.props.children,B=Ci(W,Mt),F=O.props,q=F.points,ae=F.isRange,ce=F.baseLine,ve=O.item.type.defaultProps!==void 0?ge(ge({},O.item.type.defaultProps),O.item.props):O.item.props,we=ve.activeDot,Le=ve.hide,Ye=ve.activeBar,et=ve.activeShape,ke=!!(!Le&&z&&B&&(we||Ye||et)),We={};D!=="axis"&&B&&B.props.trigger==="click"?We={onClick:lv(E.handleItemMouseEnter,A.props.onClick)}:D!=="axis"&&(We={onMouseLeave:lv(E.handleItemMouseLeave,A.props.onMouseLeave),onMouseEnter:lv(E.handleItemMouseEnter,A.props.onMouseEnter)});var Q=k.cloneElement(A,ge(ge({},O.props),We));function Pe(ti){return typeof L.dataKey=="function"?L.dataKey(ti.payload):null}if(ke)if(te>=0){var xe,de;if(L.dataKey&&!L.allowDuplicatedCategory){var pt=typeof L.dataKey=="function"?Pe:"payload.".concat(L.dataKey.toString());xe=My(q,pt,X),de=ae&&ce&&My(ce,pt,X)}else xe=q==null?void 0:q[te],de=ae&&ce&&ce[te];if(et||Ye){var nt=A.props.activeIndex!==void 0?A.props.activeIndex:te;return[k.cloneElement(A,ge(ge(ge({},O.props),We),{},{activeIndex:nt})),null,null]}if(!it(xe))return[Q].concat(jf(E.renderActivePoints({item:O,activePoint:xe,basePoint:de,childIndex:te,isRange:ae})))}else{var Oe,Ze=(Oe=E.getItemByXY(E.state.activeCoordinate))!==null&&Oe!==void 0?Oe:{graphicalItem:Q},yn=Ze.graphicalItem,Zr=yn.item,bi=Zr===void 0?A:Zr,ei=yn.childIndex,dn=ge(ge(ge({},O.props),We),{},{activeIndex:ei});return[k.cloneElement(bi,dn),null,null]}return ae?[Q,null,null]:[Q,null]}),Xe(E,"renderCustomized",function(A,j,P){return k.cloneElement(A,ge(ge({key:"recharts-customized-".concat(P)},E.props),E.state))}),Xe(E,"renderMap",{CartesianGrid:{handler:hv,once:!0},ReferenceArea:{handler:E.renderReferenceElement},ReferenceLine:{handler:hv},ReferenceDot:{handler:E.renderReferenceElement},XAxis:{handler:hv},YAxis:{handler:hv},Brush:{handler:E.renderBrush,once:!0},Bar:{handler:E.renderGraphicChild},Line:{handler:E.renderGraphicChild},Area:{handler:E.renderGraphicChild},Radar:{handler:E.renderGraphicChild},RadialBar:{handler:E.renderGraphicChild},Scatter:{handler:E.renderGraphicChild},Pie:{handler:E.renderGraphicChild},Funnel:{handler:E.renderGraphicChild},Tooltip:{handler:E.renderCursor,once:!0},PolarGrid:{handler:E.renderPolarGrid,once:!0},PolarAngleAxis:{handler:E.renderPolarAxis},PolarRadiusAxis:{handler:E.renderPolarAxis},Customized:{handler:E.renderCustomized}}),E.clipPathId="".concat((S=_.id)!==null&&S!==void 0?S:pu("recharts"),"-clip"),E.throttleTriggeredAfterMouseMove=A6(E.triggeredAfterMouseMove,(T=_.throttleDelay)!==null&&T!==void 0?T:1e3/60),E.state={},E}return xAe(x,b),mAe(x,[{key:"componentDidMount",value:function(){var S,T;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(T=this.props.margin.top)!==null&&T!==void 0?T:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var S=this.props,T=S.children,E=S.data,A=S.height,j=S.layout,P=Ci(T,Mt);if(P){var O=P.props.defaultIndex;if(!(typeof O!="number"||O<0||O>this.state.tooltipTicks.length-1)){var D=this.state.tooltipTicks[O]&&this.state.tooltipTicks[O].value,M=TS(this.state,E,O,D),z=this.state.tooltipTicks[O].coordinate,L=(this.state.offset.top+A)/2,te=j==="horizontal",X=te?{x:z,y:L}:{y:z,x:L},W=this.state.formattedGraphicalItems.find(function(F){var q=F.item;return q.type.name==="Scatter"});W&&(X=ge(ge({},X),W.props.points[O].tooltipPosition),M=W.props.points[O].tooltipPayload);var B={activeTooltipIndex:O,isTooltipActive:!0,activeLabel:D,activePayload:M,activeCoordinate:X};this.setState(B),this.renderCursor(P),this.accessibilityManager.setIndex(O)}}}},{key:"getSnapshotBeforeUpdate",value:function(S,T){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==T.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==S.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==S.margin){var E,A;this.accessibilityManager.setDetails({offset:{left:(E=this.props.margin.left)!==null&&E!==void 0?E:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0}})}return null}},{key:"componentDidUpdate",value:function(S){n2([Ci(S.children,Mt)],[Ci(this.props.children,Mt)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var S=Ci(this.props.children,Mt);if(S&&typeof S.props.shared=="boolean"){var T=S.props.shared?"axis":"item";return o.indexOf(T)>=0?T:a}return a}},{key:"getMouseInfo",value:function(S){if(!this.container)return null;var T=this.container,E=T.getBoundingClientRect(),A=dpe(E),j={chartX:Math.round(S.pageX-A.left),chartY:Math.round(S.pageY-A.top)},P=E.width/T.offsetWidth||1,O=this.inRange(j.chartX,j.chartY,P);if(!O)return null;var D=this.state,M=D.xAxisMap,z=D.yAxisMap,L=this.getTooltipEventType(),te=vM(this.state,this.props.data,this.props.layout,O);if(L!=="axis"&&M&&z){var X=Go(M).scale,W=Go(z).scale,B=X&&X.invert?X.invert(j.chartX):null,F=W&&W.invert?W.invert(j.chartY):null;return ge(ge({},j),{},{xValue:B,yValue:F},te)}return te?ge(ge({},j),te):null}},{key:"inRange",value:function(S,T){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,A=this.props.layout,j=S/E,P=T/E;if(A==="horizontal"||A==="vertical"){var O=this.state.offset,D=j>=O.left&&j<=O.left+O.width&&P>=O.top&&P<=O.top+O.height;return D?{x:j,y:P}:null}var M=this.state,z=M.angleAxisMap,L=M.radiusAxisMap;if(z&&L){var te=Go(z);return FI({x:j,y:P},te)}return null}},{key:"parseEventsOfWrapper",value:function(){var S=this.props.children,T=this.getTooltipEventType(),E=Ci(S,Mt),A={};E&&T==="axis"&&(E.props.trigger==="click"?A={onClick:this.handleClick}:A={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var j=Ry(this.props,this.handleOuterEvent);return ge(ge({},j),A)}},{key:"addListener",value:function(){r1.on(i1,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){r1.removeListener(i1,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(S,T,E){for(var A=this.state.formattedGraphicalItems,j=0,P=A.length;j<P;j++){var O=A[j];if(O.item===S||O.props.key===S.key||T===Hs(O.item.type)&&E===O.childIndex)return O}return null}},{key:"renderClipPath",value:function(){var S=this.clipPathId,T=this.state.offset,E=T.left,A=T.top,j=T.height,P=T.width;return H.createElement("defs",null,H.createElement("clipPath",{id:S},H.createElement("rect",{x:E,y:A,height:j,width:P})))}},{key:"getXScales",value:function(){var S=this.state.xAxisMap;return S?Object.entries(S).reduce(function(T,E){var A=pM(E,2),j=A[0],P=A[1];return ge(ge({},T),{},Xe({},j,P.scale))},{}):null}},{key:"getYScales",value:function(){var S=this.state.yAxisMap;return S?Object.entries(S).reduce(function(T,E){var A=pM(E,2),j=A[0],P=A[1];return ge(ge({},T),{},Xe({},j,P.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(S){var T;return(T=this.state.xAxisMap)===null||T===void 0||(T=T[S])===null||T===void 0?void 0:T.scale}},{key:"getYScaleByAxisId",value:function(S){var T;return(T=this.state.yAxisMap)===null||T===void 0||(T=T[S])===null||T===void 0?void 0:T.scale}},{key:"getItemByXY",value:function(S){var T=this.state,E=T.formattedGraphicalItems,A=T.activeItem;if(E&&E.length)for(var j=0,P=E.length;j<P;j++){var O=E[j],D=O.props,M=O.item,z=M.type.defaultProps!==void 0?ge(ge({},M.type.defaultProps),M.props):M.props,L=Hs(M.type);if(L==="Bar"){var te=(D.data||[]).find(function(F){return Gbe(S,F)});if(te)return{graphicalItem:O,payload:te}}else if(L==="RadialBar"){var X=(D.data||[]).find(function(F){return FI(S,F)});if(X)return{graphicalItem:O,payload:X}}else if(fb(O,A)||hb(O,A)||Nm(O,A)){var W=R1e({graphicalItem:O,activeTooltipItem:A,itemData:z.data}),B=z.activeIndex===void 0?W:z.activeIndex;return{graphicalItem:ge(ge({},O),{},{childIndex:B}),payload:Nm(O,A)?z.data[W]:O.props.data[W]}}}return null}},{key:"render",value:function(){var S=this;if(!kk(this))return null;var T=this.props,E=T.children,A=T.className,j=T.width,P=T.height,O=T.style,D=T.compact,M=T.title,z=T.desc,L=mM(T,lAe),te=Ke(L,!1);if(D)return H.createElement(GD,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},H.createElement(i2,gd({},te,{width:j,height:P,title:M,desc:z}),this.renderClipPath(),Ik(E,this.renderMap)));if(this.props.accessibilityLayer){var X,W;te.tabIndex=(X=this.props.tabIndex)!==null&&X!==void 0?X:0,te.role=(W=this.props.role)!==null&&W!==void 0?W:"application",te.onKeyDown=function(F){S.accessibilityManager.keyboardEvent(F)},te.onFocus=function(){S.accessibilityManager.focus()}}var B=this.parseEventsOfWrapper();return H.createElement(GD,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},H.createElement("div",gd({className:dt("recharts-wrapper",A),style:ge({position:"relative",cursor:"default",width:j,height:P},O)},B,{ref:function(q){S.container=q}}),H.createElement(i2,gd({},te,{width:j,height:P,title:M,desc:z,style:AAe}),this.renderClipPath(),Ik(E,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(k.Component);Xe(y,"displayName",n),Xe(y,"defaultProps",ge({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Xe(y,"getDerivedStateFromProps",function(b,x){var _=b.dataKey,S=b.data,T=b.children,E=b.width,A=b.height,j=b.layout,P=b.stackOffset,O=b.margin,D=x.dataStartIndex,M=x.dataEndIndex;if(x.updateId===void 0){var z=yM(b);return ge(ge(ge({},z),{},{updateId:0},p(ge(ge({props:b},z),{},{updateId:0}),x)),{},{prevDataKey:_,prevData:S,prevWidth:E,prevHeight:A,prevLayout:j,prevStackOffset:P,prevMargin:O,prevChildren:T})}if(_!==x.prevDataKey||S!==x.prevData||E!==x.prevWidth||A!==x.prevHeight||j!==x.prevLayout||P!==x.prevStackOffset||!Pd(O,x.prevMargin)){var L=yM(b),te={chartX:x.chartX,chartY:x.chartY,isTooltipActive:x.isTooltipActive},X=ge(ge({},vM(x,S,j)),{},{updateId:x.updateId+1}),W=ge(ge(ge({},L),te),X);return ge(ge(ge({},W),p(ge({props:b},W),x)),{},{prevDataKey:_,prevData:S,prevWidth:E,prevHeight:A,prevLayout:j,prevStackOffset:P,prevMargin:O,prevChildren:T})}if(!n2(T,x.prevChildren)){var B,F,q,ae,ce=Ci(T,hf),ve=ce&&(B=(F=ce.props)===null||F===void 0?void 0:F.startIndex)!==null&&B!==void 0?B:D,we=ce&&(q=(ae=ce.props)===null||ae===void 0?void 0:ae.endIndex)!==null&&q!==void 0?q:M,Le=ve!==D||we!==M,Ye=!it(S),et=Ye&&!Le?x.updateId:x.updateId+1;return ge(ge({updateId:et},p(ge(ge({props:b},x),{},{updateId:et,dataStartIndex:ve,dataEndIndex:we}),x)),{},{prevChildren:T,dataStartIndex:ve,dataEndIndex:we})}return null}),Xe(y,"renderActiveDot",function(b,x,_){var S;return k.isValidElement(b)?S=k.cloneElement(b,x):Je(b)?S=b(x):S=H.createElement(gg,x),H.createElement(gt,{className:"recharts-active-dot",key:_},S)});var v=k.forwardRef(function(x,_){return H.createElement(y,gd({},x,{ref:_}))});return v.displayName=y.displayName,v},eV=wb({chartName:"LineChart",GraphicalChild:eu,axisComponents:[{axisType:"xAxis",AxisComp:Sn},{axisType:"yAxis",AxisComp:kn}],formatAxisMap:nE}),fi=wb({chartName:"BarChart",GraphicalChild:Fn,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Sn},{axisType:"yAxis",AxisComp:kn}],formatAxisMap:nE}),CS=wb({chartName:"PieChart",GraphicalChild:Da,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:db},{axisType:"radiusAxis",AxisComp:cb}],formatAxisMap:o0e,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),MAe=wb({chartName:"AreaChart",GraphicalChild:Rl,axisComponents:[{axisType:"xAxis",AxisComp:Sn},{axisType:"yAxis",AxisComp:kn}],formatAxisMap:nE});const fs=t=>{if(!t||t==="N/A")return-1;const e=new Date(t+"T00:00:00Z"),n=new Date,r=new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()));if(isNaN(e.getTime()))return-1;const i=r.getTime()-e.getTime(),a=Math.floor(i/(1e3*60*60*24));return Math.max(0,a)},$a=t=>{const e=fs(t);if(e<0)return"N/A";if(e<=60)return`${e} día${e!==1?"s":""}`;const n=30.4375,r=Math.floor(e/n);if(r<12){const s=Math.round(e%n);return`${r} mes${r!==1?"es":""}${s>0?` y ${s} día${s!==1?"s":""}`:""}`}const i=Math.floor(r/12),a=Math.round(r%12);return`${i} año${i!==1?"s":""}${a>0?` y ${a} mes${a!==1?"es":""}`:""}`},yu=(t,e)=>{const n=fs(t.birthDate);return n<0?"Indefinido":t.sex==="Hembra"?t.weaningDate||n>60?e.some(i=>i.goatId===t.id)?"Cabra":"Cabritona":"Cabrita":n>=365?"Macho Cabrío":t.weaningDate||n>60?"Macho de Levante":"Cabrito"},Yf=(t,e)=>{const n=new Date(t+"T00:00:00Z"),r=new Date(e+"T00:00:00Z");if(isNaN(n.getTime())||isNaN(r.getTime()))return 0;const i=r.getTime()-n.getTime(),a=Math.floor(i/(1e3*60*60*24));return Math.max(0,a)},RAe=(t,e)=>{const r=1+(e-50)/(e+50),i=t*Math.max(.5,r);return parseFloat(i.toFixed(2))},dE=(t,e)=>{if(e.length===0)return{overall:null,recent:null};const n=[...e].sort((s,o)=>new Date(s.date).getTime()-new Date(o.date).getTime()),r=n[n.length-1];let i=null;if(t&&t>0){const s=fs(r.date)-fs(new Date().toISOString().split("T")[0])+fs(new Date(r.date).toISOString().split("T")[0]);s>0&&(i=(r.kg-t)/s)}let a=null;if(n.length>=2){const s=r,o=n[n.length-2],c=(new Date(s.date).getTime()-new Date(o.date).getTime())/(1e3*60*60*24);c>0&&(a=(s.kg-o.kg)/c)}return{overall:i,recent:a}},tV=(t,e,n)=>{const r=t.map(d=>({age:(new Date(d.date).getTime()-new Date(e).getTime())/864e5,kg:d.kg})).sort((d,f)=>d.age-f.age);if(r.length<1)return null;const i=r.filter(d=>d.age<=n).pop(),a=r.find(d=>d.age>=n);if(i&&i.age===n)return i.kg;if(a&&a.age===n)return a.kg;if(!i||!a)return null;if(i.age===a.age)return i.kg;const s=a.age-i.age;if(s===0)return i.kg;const o=a.kg-i.kg,c=n-i.age,u=i.kg+c/s*o;return parseFloat(u.toFixed(2))},LAe=(t,e,n)=>{if(e===0)return 100;const r=t/e*100,i=1+(180-Math.min(n,180))/180*.1;return Math.round(r*i)},$Ae=t=>{if(!t.weaningWeight||!t.weaningDate||!t.birthWeight||!t.birthDate)return null;const e=(new Date(t.weaningDate).getTime()-new Date(t.birthDate).getTime())/(1e3*60*60*24);if(e<=0)return null;const n=(t.weaningWeight-t.birthWeight)/e,r=t.birthWeight+n*60;return parseFloat(r.toFixed(2))},zAe=(t,e)=>{const n=e.filter(r=>r.animalId===t.id);return tV(n,t.birthDate,210)},FAe=()=>{const{animals:t,parturitions:e,bodyWeighings:n,sireLots:r,breedingSeasons:i,weighings:a}=Ge();return k.useMemo(()=>{const o=t.filter(F=>!F.isReference),c={cabras:[],cabritonas:[],cabritas:[],cabritos:[],machosLevante:[],reproductores:[]};o.forEach(F=>{switch(yu(F,e)){case"Cabra":c.cabras.push(F);break;case"Cabritona":c.cabritonas.push(F);break;case"Cabrita":c.cabritas.push(F);break;case"Cabrito":c.cabritos.push(F);break;case"Macho de Levante":c.machosLevante.push(F);break;case"Macho Cabrío":c.reproductores.push(F);break}});const u=c.cabras.length+c.cabritonas.length+c.cabritas.length,d=e.filter(F=>F.status==="activa"&&c.cabras.some(q=>q.id===F.goatId)).length,f=c.cabras.length-d,h=c.cabras.filter(F=>F.reproductiveStatus==="Preñada").length,p=c.cabras.filter(F=>F.reproductiveStatus==="Vacía"||F.reproductiveStatus==="Post-Parto"||F.reproductiveStatus==="Destetada").length,y=c.cabras.filter(F=>F.reproductiveStatus==="En Servicio").length,v=[{name:"Preñadas",value:h,color:"#34C759"},{name:"Vacías",value:p,color:"#FF9500"},{name:"En Monta",value:y,color:"#007AFF"}].filter(F=>F.value>0),b=new Date().getFullYear(),x=[];for(let F=0;F<2;F++){const q=new Date(b,F*6,1),ae=new Date(b,(F+1)*6,0),ce=a.filter(Ye=>{const et=new Date(Ye.date+"T00:00:00");return et>=q&&et<=ae}),ve=new Set(ce.map(Ye=>Ye.goatId)),we=c.cabras.filter(Ye=>!!e.find(ke=>ke.goatId===Ye.id&&new Date(ke.parturitionDate)<=ae)).length,Le=we>0?ve.size/we*100:0;x.push({name:`Semestre ${F+1}`,"En Ordeño (%)":parseFloat(Le.toFixed(1))})}const _=c.cabritonas.filter(F=>F.reproductiveStatus==="En Servicio").length,S=c.cabritonas.filter(F=>{const q=n.filter(ae=>ae.animalId===F.id).sort((ae,ce)=>new Date(ce.date).getTime()-new Date(ae.date).getTime())[0];return q?q.kg>=28.5&&q.kg<30||q.kg>=30&&F.reproductiveStatus!=="En Servicio"&&F.reproductiveStatus!=="Preñada":!1}).length,T=c.cabritonas.length-_-h,E=c.cabritas.length,A=c.cabritos.length,j=E+A,P=[{name:"Hembras",value:E,color:"#FF2D55"},{name:"Machos",value:A,color:"#007AFF"}].filter(F=>F.value>0),O=[...c.cabritas,...c.cabritos].map(F=>{const q=fs(F.birthDate),ae=n.filter(ke=>ke.animalId===F.id).sort((ke,We)=>new Date(We.date).getTime()-new Date(ke.date).getTime())[0],ce=(ae==null?void 0:ae.kg)||0,ve=q>=52,we=ce>=9.5,Le=q>=45&&q<52,Ye=q>=40&&q<45||ce>=8.5&&ce<9.5;let et="Amamantando";return ve&&we?et="Listo para Destete":Le?et="En Fase Destete":Ye&&(et="Próximo a Destete"),{id:F.id,status:et}}),D=O.filter(F=>F.status==="En Fase Destete").length,M=O.filter(F=>F.status==="Próximo a Destete").length,z=O.filter(F=>F.status==="Listo para Destete").length,L=O.filter(F=>F.status==="Amamantando").length,te=[{name:"Listo",value:z,color:"#34C759"},{name:"En Fase",value:D,color:"#FFD60A"},{name:"Próximo",value:M,color:"#FF9F0A"},{name:"Amamantando",value:L,color:"#007AFF"}].filter(F=>F.value>0),X=new Set(i.filter(F=>F.status==="Activo").map(F=>F.id)),W=r.filter(F=>X.has(F.seasonId)),B=c.reproductores.filter(F=>W.some(q=>q.sireId===F.id)).map(F=>{const q=W.find(ce=>ce.sireId===F.id),ae=t.filter(ce=>ce.sireLotId===q.id).length;return{...F,lotId:q.id,assignedFemales:ae}});return{totalPoblacion:o.length,totalVientres:u,cabras:{total:c.cabras.length,enProduccion:d,secas:f,preñadas:h,vacias:p,enMonta:y,reproductiveStatusData:v,milkingPercentageData:x},cabritonas:{total:c.cabritonas.length,enMonta:_,disponibles:T,proximasAServicio:S},crias:{total:j,hembras:E,machos:A,criasEnMaternidadData:P,enFaseDestete:D,proximasADestete:M,listasParaDestete:z,desteteStatusData:te},reproductores:{total:c.reproductores.length,activos:B}}},[t,e,n,r,i,a])},pv=({title:t,value:e,icon:n,onClick:r})=>l.jsxs("button",{onClick:r,className:"bg-dashboard-surface backdrop-blur-xl rounded-2xl p-4 border border-brand-border/50 text-left hover:border-brand-orange/60 hover:bg-dashboard-surface-hover transition-all duration-200 w-full",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h3",{className:"text-sm font-medium text-brand-light-gray uppercase tracking-wider",children:t}),l.jsx(n,{className:"w-6 h-6 text-brand-orange"})]}),l.jsx("p",{className:"text-4xl font-semibold text-white mt-4",children:e})]}),$o=({title:t,children:e})=>l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-semibold text-brand-light-gray mb-3 px-1",children:t}),l.jsx("div",{className:"bg-brand-glass backdrop-blur-lg rounded-xl p-4 border border-brand-border/50",children:e})]}),zo=({label:t,value:e,unit:n,subLabel:r,icon:i})=>l.jsxs("div",{className:"flex justify-between items-center py-2.5",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[i&&l.jsx(i,{className:"w-5 h-5 text-zinc-400"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-base text-white",children:t}),r&&l.jsx("p",{className:"text-xs text-brand-medium-gray mt-0.5",children:r})]})]}),l.jsxs("div",{className:"flex items-baseline gap-1.5",children:[l.jsx("p",{className:"text-xl font-semibold text-white",children:e}),l.jsx("p",{className:"text-sm text-brand-medium-gray",children:n})]})]}),s1=({active:t,payload:e,label:n})=>t&&e&&e.length?l.jsxs("div",{className:"p-2 bg-zinc-800/80 backdrop-blur-md rounded-lg border border-zinc-700 text-white text-sm",children:[l.jsx("p",{className:"font-semibold mb-1",children:n||e[0].name}),e.map((r,i)=>l.jsxs("p",{style:{color:r.color},children:[r.name,": ",l.jsxs("span",{className:"font-bold",children:[r.value,r.unit]})]},`item-${i}`))]}):null;function bM({navigateTo:t}){const[e,n]=k.useState("physical"),[r,i]=k.useState(!1),[a,s]=k.useState(!1),[o,c]=k.useState(!1),[u,d]=k.useState(!1),[f,h]=k.useState(!1),p=FAe();return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-lg mx-auto space-y-6 pb-24 pt-4",children:[l.jsxs("div",{className:"text-center mb-6 px-4",children:[l.jsxs("p",{className:"text-base text-zinc-300 font-light",children:["Población Total del Rebaño: ",l.jsx("span",{className:"font-bold text-white",children:p.totalPoblacion})]}),l.jsxs("p",{className:"text-sm text-zinc-400",children:["Total de Vientres: ",l.jsx("span",{className:"font-bold text-zinc-200",children:p.totalVientres})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 px-4",children:[l.jsx(pv,{title:"Cabras",value:p.cabras.total,icon:wx,onClick:()=>s(!0)}),l.jsx(pv,{title:"Cabritonas",value:p.cabritonas.total,icon:gs,onClick:()=>c(!0)}),l.jsx(pv,{title:"Crías",value:p.crias.total,icon:xl,onClick:()=>d(!0)}),l.jsx(pv,{title:"Reproductores",value:p.reproductores.total,icon:bG,onClick:()=>h(!0)})]}),l.jsx("div",{className:"pt-4 px-4",children:l.jsxs("div",{className:"relative bg-brand-glass rounded-xl p-1 border border-brand-border flex items-center",children:[l.jsxs("button",{onClick:()=>n("physical"),className:`w-1/2 py-2 rounded-lg transition-colors flex items-center justify-center gap-2 ${e==="physical"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:[l.jsx(qc,{size:16})," ",l.jsx("span",{className:"text-sm font-semibold",children:"Lotes Físicos"}),l.jsx("span",{onClick:y=>{y.stopPropagation(),i(!0)},className:"ml-2 p-1 rounded-full hover:bg-brand-orange/50",children:l.jsx(ur,{size:18})})]}),l.jsxs("button",{onClick:()=>n("breeding"),className:`w-1/2 py-2 text-sm font-semibold rounded-lg transition-colors flex items-center justify-center gap-2 ${e==="breeding"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:[l.jsx(jx,{size:16})," Lotes de Monta"]})]})}),l.jsxs("div",{className:"pt-0",children:[e==="physical"&&l.jsx(UZ,{navigateTo:t}),e==="breeding"&&l.jsx(GZ,{navigateTo:t})]})]}),l.jsx(st,{isOpen:a,onClose:()=>s(!1),title:"Análisis de Hembras Adultas",children:l.jsxs("div",{className:"space-y-5",children:[l.jsxs($o,{title:"Estado Productivo y Reproductivo",children:[l.jsx(zo,{icon:SG,label:"En Producción",unit:"cabras",value:p.cabras.enProduccion,subLabel:`${(p.cabras.total>0?p.cabras.enProduccion/p.cabras.total*100:0).toFixed(0)}% del total`}),l.jsx("div",{className:"border-b border-brand-border/50 mx-2"}),l.jsx(zo,{icon:Al,label:"Secas",unit:"cabras",value:p.cabras.secas,subLabel:`${(p.cabras.total>0?p.cabras.secas/p.cabras.total*100:0).toFixed(0)}% del total`}),l.jsx("div",{className:"border-b border-brand-border/50 mx-2"}),l.jsx(zo,{icon:ZC,label:"En Monta Activa",unit:"cabras",value:p.cabras.enMonta})]}),l.jsx($o,{title:"Estado Reproductivo (Vientres)",children:l.jsx("div",{className:"w-full h-48",children:l.jsx(zn,{width:"100%",height:"100%",children:l.jsxs(CS,{children:[l.jsx(Da,{data:p.cabras.reproductiveStatusData,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:45,outerRadius:65,paddingAngle:3,cornerRadius:5,children:p.cabras.reproductiveStatusData.map(y=>l.jsx(Oa,{fill:y.color,stroke:"none"},`cell-${y.name}`))}),l.jsx(Mt,{content:l.jsx(s1,{})}),l.jsx(Ca,{iconSize:10,wrapperStyle:{fontSize:"12px",paddingTop:"10px"}})]})})})}),l.jsx($o,{title:"Rendimiento Anual en Ordeño",children:l.jsx("div",{className:"w-full h-48",children:l.jsx(zn,{width:"100%",height:"100%",children:l.jsxs(fi,{data:p.cabras.milkingPercentageData,margin:{top:15,right:10,left:-20,bottom:0},children:[l.jsx(Sn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},axisLine:!1,tickLine:!1}),l.jsx(kn,{tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},unit:"%",axisLine:!1,tickLine:!1}),l.jsx(Mt,{content:l.jsx(s1,{unit:"%"}),cursor:{fill:"rgba(255, 255, 255, 0.08)"}}),l.jsx(Fn,{dataKey:"En Ordeño (%)",fill:"#FF9500",radius:[8,8,0,0],animationDuration:500})]})})})})]})}),l.jsx(st,{isOpen:o,onClose:()=>c(!1),title:"Análisis de Cabritonas",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs($o,{title:"Disponibilidad para Monta",children:[l.jsx(zo,{icon:ZC,label:"En Monta",unit:"cabritonas",value:p.cabritonas.enMonta,subLabel:`${(p.cabritonas.total>0?p.cabritonas.enMonta/p.cabritonas.total*100:0).toFixed(0)}% del total`}),l.jsx("div",{className:"border-b border-brand-border/50 mx-2"}),l.jsx(zo,{icon:qc,label:"Disponibles",unit:"cabritonas",value:p.cabritonas.disponibles})]}),l.jsx($o,{title:"Próximas a Servicio",children:l.jsx(zo,{icon:tY,label:"Con Peso Óptimo",unit:"cabritonas",value:p.cabritonas.proximasAServicio,subLabel:"(≥ 28.5 Kg y sin lote asignado)"})})]})}),l.jsx(st,{isOpen:u,onClose:()=>d(!1),title:"Análisis de Crías en Maternidad",children:l.jsxs("div",{className:"space-y-5",children:[l.jsx($o,{title:"Distribución por Sexo",children:l.jsx("div",{className:"w-full h-48",children:l.jsx(zn,{width:"100%",height:"100%",children:l.jsxs(CS,{children:[l.jsx(Da,{data:p.crias.criasEnMaternidadData,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:45,outerRadius:65,paddingAngle:3,cornerRadius:5,children:p.crias.criasEnMaternidadData.map(y=>l.jsx(Oa,{fill:y.color,stroke:"none"},`cell-${y.name}`))}),l.jsx(Mt,{content:l.jsx(s1,{})}),l.jsx(Ca,{iconSize:10,wrapperStyle:{fontSize:"12px",paddingTop:"10px"}})]})})})}),l.jsxs($o,{title:"Estado de Destete",children:[l.jsx(zo,{icon:xl,label:"Listas para Destete",unit:"crías",value:p.crias.listasParaDestete,subLabel:"≥ 52 días y ≥ 9.5 Kg"}),l.jsx("div",{className:"border-b border-brand-border/50 mx-2"}),l.jsx(zo,{icon:mG,label:"En Fase de Destete",unit:"crías",value:p.crias.enFaseDestete,subLabel:"45-52 días"}),l.jsx("div",{className:"border-b border-brand-border/50 mx-2"})]})]})}),l.jsx(st,{isOpen:f,onClose:()=>h(!1),title:"Estado de Reproductores",children:l.jsx("div",{className:"space-y-4",children:l.jsx($o,{title:"Activos en Temporada de Monta",children:p.reproductores.activos.length>0?p.reproductores.activos.map((y,v)=>l.jsxs("div",{children:[l.jsxs("button",{onClick:()=>{h(!1),t({name:"sire-lot-detail",lotId:y.lotId})},className:"w-full text-left p-2 rounded-lg flex justify-between items-center hover:bg-brand-glass transition-colors group",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-white",children:y.name||`ID: ${y.id}`}),l.jsx("p",{className:"text-xs text-brand-medium-gray",children:"Ver lote de monta asignado"})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("span",{className:"text-base font-semibold text-brand-orange",children:[y.assignedFemales," hembras"]}),l.jsx(Pr,{className:"text-zinc-500 group-hover:text-white transition-colors"})]})]}),v<p.reproductores.activos.length-1&&l.jsx("div",{className:"border-b border-brand-border/50 mx-2"})]},y.id)):l.jsx("p",{className:"text-sm text-brand-medium-gray text-center py-4",children:"No hay reproductores activos en una temporada de monta actualmente."})})})}),l.jsx(CL,{isOpen:r,onClose:()=>i(!1)})]})}const VAe=()=>({isRelated:k.useCallback((e,n,r)=>{if(!e||!n)return!1;const i=r.find(a=>a.id===e);if(!i)return!1;if(i.fatherId===n)return!0;if(i.motherId){const a=r.find(s=>s.id===i.motherId);if(a&&a.fatherId===n)return!0}return!1},[])}),Bt={PREGNANT:{key:"PREGNANT",Icon:xl,color:"text-pink-400",label:"Preñada"},IN_SERVICE_CONFIRMED:{key:"IN_SERVICE_CONFIRMED",Icon:AG,color:"text-pink-500",label:"Servicio Visto"},IN_SERVICE:{key:"IN_SERVICE",Icon:gL,color:"text-red-400",label:"En Monta"},EMPTY:{key:"EMPTY",Icon:gG,color:"text-zinc-500",label:"Vacía"},SIRE_IN_SERVICE:{key:"SIRE_IN_SERVICE",Icon:VG,color:"text-blue-400",label:"Reproductor Activo"},MILKING:{key:"MILKING",Icon:ZG,color:"text-blue-300",label:"En Ordeño"},DRYING_OFF:{key:"DRYING_OFF",Icon:Sx,color:"text-yellow-400",label:"Secando"},DRY:{key:"DRY",Icon:Al,color:"text-zinc-400",label:"Seca"}},BAe=(t,e,n,r,i)=>{const a=[];if(!t)return[];if(t.sex==="Hembra"){const s=e.filter(o=>o.goatId===t.id&&o.status!=="finalizada").sort((o,c)=>new Date(c.parturitionDate).getTime()-new Date(o.parturitionDate).getTime())[0];s&&(s.status==="activa"?a.push("MILKING"):s.status==="en-secado"?a.push("DRYING_OFF"):s.status==="seca"&&a.push("DRY"))}if(t.reproductiveStatus==="Preñada"?a.push("PREGNANT"):t.reproductiveStatus==="En Servicio"?n.some(o=>o.femaleId===t.id&&o.sireLotId===t.sireLotId)?a.push("IN_SERVICE_CONFIRMED"):a.push("IN_SERVICE"):(t.reproductiveStatus==="Vacía"||t.reproductiveStatus==="Post-Parto")&&a.push("EMPTY"),t.sex==="Macho"){const s=i.filter(u=>u.status==="Activo"),o=new Set(s.map(u=>u.id));r.some(u=>u.sireId===t.id&&o.has(u.seasonId))&&a.push("SIRE_IN_SERVICE")}return Array.from(new Set(a))},UAe=["Cabrita","Cabritona","Cabra","Cabrito","Macho de Levante","Macho Cabrío"],wM=({title:t,filters:e,activeFilter:n,onFilterChange:r})=>l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-zinc-400 mb-2",children:t}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("button",{type:"button",onClick:()=>r("ALL"),className:`px-2 py-1 text-xs font-semibold rounded-full transition-colors ${n==="ALL"?"bg-zinc-600 text-white":"bg-zinc-800/80 text-zinc-300"}`,children:"Todos"}),e.map(i=>{const a=i.Icon||null;return l.jsxs("button",{type:"button",onClick:()=>r(i.key),className:`flex items-center gap-1.5 px-2 py-1 text-xs font-semibold rounded-full transition-colors ${n===i.key?"bg-brand-blue text-white":"bg-zinc-800/80 text-zinc-300"}`,children:[l.jsx(a,{size:14}),i.label]},i.key)})]})]}),_b=({isOpen:t,onClose:e,onSelect:n,animals:r,parturitions:i,serviceRecords:a,breedingSeasons:s,sireLots:o,title:c,sireIdForInbreedingCheck:u,sessionType:d})=>{const[f,h]=k.useState(""),[p,y]=k.useState(new Set),{isRelated:v}=VAe(),[b,x]=k.useState(!0),[_,S]=k.useState("Todos"),[T,E]=k.useState(!1),[A,j]=k.useState("ALL"),[P,O]=k.useState("ALL"),[D,M]=k.useState("all");k.useEffect(()=>{t&&d&&(W(),d==="leche"?j("MILKING"):d==="corporal"&&M("Hembra"))},[t,d]);const z=k.useMemo(()=>r.map(B=>({...B,statuses:BAe(B,i,a,o,s),formattedAge:$a(B.birthDate),zootecnicCategory:yu(B,i)})),[r,i,a,o,s]),L=k.useMemo(()=>{let B=z;return D!=="all"&&(B=B.filter(F=>F.sex===D)),T?B.sort((F,q)=>(q.createdAt||0)-(F.createdAt||0)).slice(0,25):(_!=="Todos"&&(B=B.filter(F=>F.zootecnicCategory===_)),A!=="ALL"&&(B=B.filter(F=>F.statuses.includes(A))),P!=="ALL"&&(B=B.filter(F=>F.statuses.includes(P))),f&&(B=B.filter(F=>F.id.toLowerCase().includes(f.toLowerCase()))),B)},[z,_,T,A,P,D,f]),te=()=>{L.every(B=>p.has(B.id))?y(new Set):y(new Set(L.map(B=>B.id)))},X=()=>{n(Array.from(p)),e()},W=()=>{S("Todos"),E(!1),j("ALL"),O("ALL"),h(""),M("all")};return k.useEffect(()=>{t&&d&&y(new Set(L.map(B=>B.id)))},[L,t,d]),l.jsx(st,{isOpen:t,onClose:e,title:c,size:"fullscreen",children:l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsxs("div",{className:"flex-shrink-0 space-y-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx(Kc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500"}),l.jsx("input",{type:"search",placeholder:"Buscar por ID...",value:f,onChange:B=>h(B.target.value),className:"w-full bg-zinc-800 border border-zinc-700 rounded-xl pl-10 pr-4 py-2.5 text-white focus:ring-2 focus:ring-brand-orange"})]}),l.jsxs("button",{onClick:()=>x(!b),className:"w-full flex justify-between items-center text-zinc-400 hover:text-white",children:[l.jsx("span",{className:"text-sm font-semibold",children:"Filtros Avanzados"}),l.jsx(M_,{className:`transition-transform ${b?"rotate-180":""}`})]}),b&&l.jsxs("div",{className:"space-y-4 p-4 bg-black/20 rounded-2xl animate-fade-in",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-zinc-400 mb-2",children:"Filtrar por Sexo"}),l.jsxs("div",{className:"flex bg-zinc-800 rounded-xl p-1 w-full",children:[l.jsx("button",{onClick:()=>M("all"),className:`w-1/3 rounded-lg py-2 text-sm font-semibold transition-colors ${D==="all"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"Todos"}),l.jsx("button",{onClick:()=>M("Hembra"),className:`w-1/3 rounded-lg py-2 text-sm font-semibold transition-colors ${D==="Hembra"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"Hembras"}),l.jsx("button",{onClick:()=>M("Macho"),className:`w-1/3 rounded-lg py-2 text-sm font-semibold transition-colors ${D==="Macho"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"Machos"})]})]}),l.jsx(wM,{title:"Filtros Productivos",filters:["MILKING","DRYING_OFF","DRY"].map(B=>Bt[B]),activeFilter:A,onFilterChange:j}),l.jsx(wM,{title:"Filtros Reproductivos",filters:["PREGNANT","IN_SERVICE_CONFIRMED","IN_SERVICE","EMPTY","SIRE_IN_SERVICE"].map(B=>Bt[B]),activeFilter:P,onFilterChange:O}),l.jsxs("div",{className:"flex gap-2 pt-2 border-t border-brand-border",children:[l.jsxs("select",{value:_,onChange:B=>S(B.target.value),className:"w-full bg-zinc-800 p-2 rounded-xl text-white border border-zinc-700 text-sm",children:[l.jsx("option",{value:"Todos",children:"Categoría Zootécnica..."}),UAe.map(B=>l.jsx("option",{value:B,children:B},B))]}),l.jsxs("button",{onClick:()=>E(!T),className:`flex-shrink-0 flex items-center gap-2 p-2 rounded-xl border text-sm transition-colors ${T?"bg-brand-orange border-brand-orange text-white":"border-zinc-700 bg-zinc-800 text-zinc-300"}`,children:[l.jsx(vL,{size:16})," Última Carga"]}),l.jsx("button",{onClick:W,className:"flex-shrink-0 p-2 rounded-xl border border-zinc-700 bg-zinc-800 text-zinc-300",children:l.jsx(gA,{size:16})})]})]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 py-4 min-h-[10rem]",children:L.length>0?L.map(B=>{const F=u?v(B.id,u,r):!1;return l.jsxs("div",{onClick:()=>y(q=>{const ae=new Set(q);return ae.has(B.id)?ae.delete(B.id):ae.add(B.id),ae}),className:`w-full text-left p-3 flex items-center gap-4 rounded-lg cursor-pointer transition-colors ${F?"bg-yellow-900/50 border border-yellow-500/60 hover:bg-yellow-800/50":"bg-zinc-800/50 hover:bg-zinc-700"}`,children:[p.has(B.id)?l.jsx(xA,{className:"text-brand-orange flex-shrink-0"}):l.jsx(bA,{className:"text-zinc-500 flex-shrink-0"}),l.jsxs("div",{className:"flex-grow",children:[l.jsxs("p",{className:"font-bold text-white flex items-center gap-2",children:[B.id," ",F&&l.jsx(Ut,{className:"text-yellow-400",size:16})]}),l.jsxs("p",{className:"text-xs text-zinc-400",children:[B.sex," | ",B.formattedAge," | Lote: ",B.location||"Sin Asignar"]})]})]},B.id)}):l.jsx("div",{className:"flex-grow flex items-center justify-center",children:l.jsx("p",{className:"text-zinc-500 text-center",children:"No se encontraron animales."})})}),l.jsxs("div",{className:"flex-shrink-0 grid grid-cols-3 items-center pt-4 border-t border-brand-border gap-2",children:[l.jsx("button",{type:"button",onClick:te,disabled:L.length===0,className:"bg-zinc-700 hover:bg-zinc-600 text-white font-bold py-3 px-2 rounded-lg disabled:opacity-50 text-sm",children:L.every(B=>p.has(B.id))&&L.length>0?"Deseleccionar":"Sel. Todos"}),l.jsx("button",{onClick:e,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-3 px-2 rounded-lg text-sm",children:"Cancelar"}),l.jsxs("button",{onClick:X,className:"bg-brand-green hover:bg-green-600 text-white font-bold py-3 px-2 rounded-lg disabled:opacity-50 text-sm",children:["Seleccionar (",p.size,")"]})]})]})})},WAe=({isOpen:t,onClose:e,animalsToTransfer:n,fromLot:r})=>{const{lots:i,updateAnimal:a}=Ge(),[s,o]=k.useState(""),c=k.useMemo(()=>i.filter(d=>d.name!==r),[i,r]),u=async()=>{if(!s||n.length===0)return;const d=n.map(f=>a(f,{location:s}));try{await Promise.all(d),e()}catch(f){console.error("Error al transferir animales:",f)}};return l.jsx(st,{isOpen:t,onClose:e,title:`Transferir ${n.length} animales`,children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:["Transferir desde: ",l.jsx("span",{className:"font-semibold text-white",children:r})]}),l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1 mt-4",children:"Hacia el lote:"}),l.jsxs("select",{value:s,onChange:d=>o(d.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",children:[l.jsx("option",{value:"",children:"Seleccionar lote de destino..."}),c.map(d=>l.jsx("option",{value:d.name,children:d.name},d.id))]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[l.jsx("button",{onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{onClick:u,disabled:!s,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:"Confirmar Transferencia"})]})]})})};function Bu(t,e,n){let r=n.initialDeps??[],i;function a(){var s,o,c,u;let d;n.key&&((s=n.debug)!=null&&s.call(n))&&(d=Date.now());const f=t();if(!(f.length!==r.length||f.some((y,v)=>r[v]!==y)))return i;r=f;let p;if(n.key&&((o=n.debug)!=null&&o.call(n))&&(p=Date.now()),i=e(...f),n.key&&((c=n.debug)!=null&&c.call(n))){const y=Math.round((Date.now()-d)*100)/100,v=Math.round((Date.now()-p)*100)/100,b=v/16,x=(_,S)=>{for(_=String(_);_.length<S;)_=" "+_;return _};console.info(`%c⏱ ${x(v,5)} /${x(y,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*b,120))}deg 100% 31%);`,n==null?void 0:n.key)}return(u=n==null?void 0:n.onChange)==null||u.call(n,i),i}return a.updateDeps=s=>{r=s},a}function _M(t,e){if(t===void 0)throw new Error("Unexpected undefined");return t}const KAe=(t,e)=>Math.abs(t-e)<1.01,qAe=(t,e,n)=>{let r;return function(...i){t.clearTimeout(r),r=t.setTimeout(()=>e.apply(this,i),n)}},SM=t=>{const{offsetWidth:e,offsetHeight:n}=t;return{width:e,height:n}},HAe=t=>t,GAe=t=>{const e=Math.max(t.startIndex-t.overscan,0),n=Math.min(t.endIndex+t.overscan,t.count-1),r=[];for(let i=e;i<=n;i++)r.push(i);return r},YAe=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;const i=s=>{const{width:o,height:c}=s;e({width:Math.round(o),height:Math.round(c)})};if(i(SM(n)),!r.ResizeObserver)return()=>{};const a=new r.ResizeObserver(s=>{const o=()=>{const c=s[0];if(c!=null&&c.borderBoxSize){const u=c.borderBoxSize[0];if(u){i({width:u.inlineSize,height:u.blockSize});return}}i(SM(n))};t.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()});return a.observe(n,{box:"border-box"}),()=>{a.unobserve(n)}},jM={passive:!0},AM=typeof window>"u"?!0:"onscrollend"in window,XAe=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;let i=0;const a=t.options.useScrollendEvent&&AM?()=>{}:qAe(r,()=>{e(i,!1)},t.options.isScrollingResetDelay),s=d=>()=>{const{horizontal:f,isRtl:h}=t.options;i=f?n.scrollLeft*(h&&-1||1):n.scrollTop,a(),e(i,d)},o=s(!0),c=s(!1);c(),n.addEventListener("scroll",o,jM);const u=t.options.useScrollendEvent&&AM;return u&&n.addEventListener("scrollend",c,jM),()=>{n.removeEventListener("scroll",o),u&&n.removeEventListener("scrollend",c)}},QAe=(t,e,n)=>{if(e!=null&&e.borderBoxSize){const r=e.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return t[n.options.horizontal?"offsetWidth":"offsetHeight"]},JAe=(t,{adjustments:e=0,behavior:n},r)=>{var i,a;const s=t+e;(a=(i=r.scrollElement)==null?void 0:i.scrollTo)==null||a.call(i,{[r.options.horizontal?"left":"top"]:s,behavior:n})};class ZAe{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(i=>{i.forEach(a=>{const s=()=>{this._measureElement(a.target,a)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(s):s()})}));return{disconnect:()=>{var i;(i=r())==null||i.disconnect(),n=null},observe:i=>{var a;return(a=r())==null?void 0:a.observe(i,{box:"border-box"})},unobserve:i=>{var a;return(a=r())==null?void 0:a.unobserve(i)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,i])=>{typeof i>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:HAe,rangeExtractor:GAe,onChange:()=>{},measureElement:QAe,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,i;(i=(r=this.options).onChange)==null||i.call(r,this,n)},this.maybeNotify=Bu(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,a)=>{this.scrollAdjustments=0,this.scrollDirection=a?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=a,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const i=new Map,a=new Map;for(let s=r-1;s>=0;s--){const o=n[s];if(i.has(o.lane))continue;const c=a.get(o.lane);if(c==null||o.end>c.end?a.set(o.lane,o):o.end<c.end&&i.set(o.lane,!0),i.size===this.options.lanes)break}return a.size===this.options.lanes?Array.from(a.values()).sort((s,o)=>s.end===o.end?s.index-o.index:s.end-o.end)[0]:void 0},this.getMeasurementOptions=Bu(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,r,i,a,s)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:i,getItemKey:a,enabled:s}),{key:!1}),this.getMeasurements=Bu(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:i,getItemKey:a,enabled:s},o)=>{if(!s)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(d=>{this.itemSizeCache.set(d.key,d.size)}));const c=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const u=this.measurementsCache.slice(0,c);for(let d=c;d<n;d++){const f=a(d),h=this.options.lanes===1?u[d-1]:this.getFurthestMeasurement(u,d),p=h?h.end+this.options.gap:r+i,y=o.get(f),v=typeof y=="number"?y:this.options.estimateSize(d),b=p+v,x=h?h.lane:d%this.options.lanes;u[d]={index:d,start:p,size:v,end:b,key:f,lane:x}}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Bu(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,i,a)=>this.range=n.length>0&&r>0?ePe({measurements:n,outerSize:r,scrollOffset:i,lanes:a}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Bu(()=>{let n=null,r=null;const i=this.calculateRange();return i&&(n=i.startIndex,r=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,i,a,s)=>a===null||s===null?[]:n({startIndex:a,endIndex:s,overscan:r,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,i=n.getAttribute(r);return i?parseInt(i,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const i=this.indexFromElement(n),a=this.measurementsCache[i];if(!a)return;const s=a.key,o=this.elementsCache.get(s);o!==n&&(o&&this.observer.unobserve(o),this.observer.observe(n),this.elementsCache.set(s,n)),n.isConnected&&this.resizeItem(i,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const i=this.measurementsCache[n];if(!i)return;const a=this.itemSizeCache.get(i.key)??i.size,s=r-a;s!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,s,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=s,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,i)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(i))});return}this._measureElement(n,void 0)},this.getVirtualItems=Bu(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const i=[];for(let a=0,s=n.length;a<s;a++){const o=n[a],c=r[o];i.push(c)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return _M(r[nV(0,r.length-1,i=>_M(r[i]).start,n)])},this.getOffsetForAlignment=(n,r,i=0)=>{const a=this.getSize(),s=this.getScrollOffset();r==="auto"&&(r=n>=s+a?"end":"start"),r==="center"?n+=(i-a)/2:r==="end"&&(n-=a);const o=this.getTotalSize()+this.options.scrollMargin-a;return Math.max(Math.min(o,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const i=this.measurementsCache[n];if(!i)return;const a=this.getSize(),s=this.getScrollOffset();if(r==="auto")if(i.end>=s+a-this.options.scrollPaddingEnd)r="end";else if(i.start<=s+this.options.scrollPaddingStart)r="start";else return[s,r];const o=r==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,r,i.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:i})},this.scrollToIndex=(n,{align:r="auto",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let a=0;const s=10,o=u=>{if(!this.targetWindow)return;const d=this.getOffsetForIndex(n,u);if(!d){console.warn("Failed to get offset for index:",n);return}const[f,h]=d;this._scrollToOffset(f,{adjustments:void 0,behavior:i}),this.targetWindow.requestAnimationFrame(()=>{const p=this.getScrollOffset(),y=this.getOffsetForIndex(n,h);if(!y){console.warn("Failed to get offset for index:",n);return}KAe(y[0],p)||c(h)})},c=u=>{this.targetWindow&&(a++,a<s?this.targetWindow.requestAnimationFrame(()=>o(u)):console.warn(`Failed to scroll to index ${n} after ${s} attempts.`))};o(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let i;if(r.length===0)i=this.options.paddingStart;else if(this.options.lanes===1)i=((n=r[r.length-1])==null?void 0:n.end)??0;else{const a=Array(this.options.lanes).fill(null);let s=r.length-1;for(;s>=0&&a.some(o=>o===null);){const o=r[s];a[o.lane]===null&&(a[o.lane]=o.end),s--}i=Math.max(...a.filter(o=>o!==null))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:i})=>{this.options.scrollToFn(n,{behavior:i,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(e)}}const nV=(t,e,n,r)=>{for(;t<=e;){const i=(t+e)/2|0,a=n(i);if(a<r)t=i+1;else if(a>r)e=i-1;else return i}return t>0?t-1:0};function ePe({measurements:t,outerSize:e,scrollOffset:n,lanes:r}){const i=t.length-1,a=c=>t[c].start;if(t.length<=r)return{startIndex:0,endIndex:i};let s=nV(0,i,a,n),o=s;if(r===1)for(;o<i&&t[o].end<n+e;)o++;else if(r>1){const c=Array(r).fill(0);for(;o<i&&c.some(d=>d<n+e);){const d=t[o];c[d.lane]=d.end,o++}const u=Array(r).fill(n+e);for(;s>=0&&u.some(d=>d>=n);){const d=t[s];u[d.lane]=d.start,s--}s=Math.max(0,s-s%r),o=Math.min(i,o+(r-1-o%r))}return{startIndex:s,endIndex:o}}const PM=typeof document<"u"?k.useLayoutEffect:k.useEffect;function tPe(t){const e=k.useReducer(()=>({}),{})[1],n={...t,onChange:(i,a)=>{var s;a?o5.flushSync(e):e(),(s=t.onChange)==null||s.call(t,i,a)}},[r]=k.useState(()=>new ZAe(n));return r.setOptions(n),PM(()=>r._didMount(),[]),PM(()=>r._willUpdate()),r}function rV(t){return tPe({observeElementRect:YAe,observeElementOffset:XAe,scrollToFn:JAe,...t})}const iV=({statuses:t})=>{if(!t||t.length===0)return null;const e=[...t].sort((n,r)=>{const i=["MILKING","DRYING_OFF","DRY","PREGNANT","IN_SERVICE_CONFIRMED","IN_SERVICE","EMPTY","SIRE_IN_SERVICE"];return i.indexOf(n.key)-i.indexOf(r.key)});return l.jsx("div",{className:"flex items-center space-x-1.5",children:e.map(({key:n,Icon:r,color:i,label:a})=>l.jsx("span",{title:a,children:l.jsx(r,{className:i,size:16,strokeWidth:2.5})},n))})},aV=({animal:t,onSelect:e,onOpenActions:n})=>{const r=fu(),i=k.useRef(!1),a=(s,o)=>{const c=o.offset.x,u=o.velocity.x;(c<-80/2||u<-500)&&n(t),r.start({x:0}),setTimeout(()=>{i.current=!1},50)};return l.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-brand-glass border border-brand-border",children:[l.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:l.jsxs("div",{className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[l.jsx(ur,{size:22}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Acciones"})]})}),l.jsx(po.div,{drag:"x",dragConstraints:{left:-80,right:0},dragElastic:.1,onDragStart:()=>{i.current=!0},onDragEnd:a,onTap:()=>{i.current||e(t.id)},animate:r,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg p-4",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),l.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:[t.sex," | ",t.formattedAge," | Lote: ",t.location||"Sin Asignar"]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(iV,{statuses:t.statusObjects}),l.jsx(Pr,{className:"text-zinc-600"})]})]})})]})},fE=({isOpen:t,onClose:e,onSave:n})=>{const[r,i]=k.useState(""),[a,s]=k.useState(""),[o,c]=k.useState(""),{fathers:u}=Ge(),d=()=>{c("");const f=r.trim().toUpperCase(),h=a.trim();if(!f||!h){c("Ambos campos son obligatorios.");return}if(u.some(p=>p.id===f)){c("Este ID ya está en uso. Por favor, elige otro.");return}n({id:f,name:h}),i(""),s("")};return l.jsx(st,{isOpen:t,onClose:e,title:"Añadir Nuevo Padre",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-zinc-400",children:"Introduce un ID único y el nombre del nuevo semental."}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("input",{type:"text",value:r,onChange:f=>i(f.target.value),placeholder:"ID del Padre (ej. P002)",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0"}),l.jsx("input",{type:"text",value:a,onChange:f=>s(f.target.value),placeholder:"Nombre del Padre (ej. Sansón)",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0"})]}),o&&l.jsx("p",{className:"text-sm text-brand-red",children:o}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[l.jsx("button",{onClick:e,className:"px-5 py-2 bg-zinc-600 rounded-lg hover:bg-zinc-500 font-semibold",children:"Cancelar"}),l.jsx("button",{onClick:d,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:"Guardar Padre"})]})]})})};function Et(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function zi(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function Wr(t,e){const n=Et(t);return isNaN(e)?zi(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function Ma(t,e){const n=Et(t);if(isNaN(e))return zi(t,NaN);if(!e)return n;const r=n.getDate(),i=zi(t,n.getTime());i.setMonth(n.getMonth()+e+1,0);const a=i.getDate();return r>=a?i:(n.setFullYear(i.getFullYear(),i.getMonth(),r),n)}const hE=6048e5,nPe=864e5;let rPe={};function yg(){return rPe}function ms(t,e){var o,c,u,d;const n=yg(),r=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=Et(t),a=i.getDay(),s=(a<r?7:0)+a-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function tu(t){return ms(t,{weekStartsOn:1})}function sV(t){const e=Et(t),n=e.getFullYear(),r=zi(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=tu(r),a=zi(t,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const s=tu(a);return e.getTime()>=i.getTime()?n+1:e.getTime()>=s.getTime()?n:n-1}function Af(t){const e=Et(t);return e.setHours(0,0,0,0),e}function L0(t){const e=Et(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function rs(t,e){const n=Af(t),r=Af(e),i=+n-L0(n),a=+r-L0(r);return Math.round((i-a)/nPe)}function iPe(t){const e=sV(t),n=zi(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),tu(n)}function NS(t,e){const n=e*7;return Wr(t,n)}function aPe(t,e){return Ma(t,e*12)}function sPe(t){let e;return t.forEach(function(n){const r=Et(n);(e===void 0||e<r||isNaN(Number(r)))&&(e=r)}),e||new Date(NaN)}function oPe(t){let e;return t.forEach(n=>{const r=Et(n);(!e||e>r||isNaN(+r))&&(e=r)}),e||new Date(NaN)}function hi(t,e){const n=Af(t),r=Af(e);return+n==+r}function pE(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function lPe(t){if(!pE(t)&&typeof t!="number")return!1;const e=Et(t);return!isNaN(Number(e))}function Lm(t,e){const n=Et(t),r=Et(e),i=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return i*12+a}function cPe(t,e,n){const r=ms(t,n),i=ms(e,n),a=+r-L0(r),s=+i-L0(i);return Math.round((a-s)/hE)}function mE(t){const e=Et(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function vi(t){const e=Et(t);return e.setDate(1),e.setHours(0,0,0,0),e}function oV(t){const e=Et(t),n=zi(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function gE(t,e){var o,c,u,d;const n=yg(),r=(e==null?void 0:e.weekStartsOn)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=Et(t),a=i.getDay(),s=(a<r?-7:0)+6-(a-r);return i.setDate(i.getDate()+s),i.setHours(23,59,59,999),i}function lV(t){return gE(t,{weekStartsOn:1})}const uPe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},dPe=(t,e,n)=>{let r;const i=uPe[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Cd(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const fPe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},hPe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},pPe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},mPe={date:Cd({formats:fPe,defaultWidth:"full"}),time:Cd({formats:hPe,defaultWidth:"full"}),dateTime:Cd({formats:pPe,defaultWidth:"full"})},gPe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},vPe=(t,e,n,r)=>gPe[t];function Za(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const s=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):s;i=t.formattingValues[o]||t.formattingValues[s]}else{const s=t.defaultWidth,o=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[o]||t.values[s]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const yPe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},xPe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},bPe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},wPe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},_Pe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},SPe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},jPe=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},APe={ordinalNumber:jPe,era:Za({values:yPe,defaultWidth:"wide"}),quarter:Za({values:xPe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Za({values:bPe,defaultWidth:"wide"}),day:Za({values:wPe,defaultWidth:"wide"}),dayPeriod:Za({values:_Pe,defaultWidth:"wide",formattingValues:SPe,defaultFormattingWidth:"wide"})};function es(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const s=a[0],o=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(o)?EPe(o,f=>f.test(s)):PPe(o,f=>f.test(s));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(s.length);return{value:u,rest:d}}}function PPe(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function EPe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function cV(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let s=t.valueCallback?t.valueCallback(a[0]):a[0];s=n.valueCallback?n.valueCallback(s):s;const o=e.slice(i.length);return{value:s,rest:o}}}const TPe=/^(\d+)(th|st|nd|rd)?/i,CPe=/\d+/i,NPe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},kPe={any:[/^b/i,/^(a|c)/i]},OPe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},IPe={any:[/1/i,/2/i,/3/i,/4/i]},DPe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},MPe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},RPe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},LPe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},$Pe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},zPe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},FPe={ordinalNumber:cV({matchPattern:TPe,parsePattern:CPe,valueCallback:t=>parseInt(t,10)}),era:es({matchPatterns:NPe,defaultMatchWidth:"wide",parsePatterns:kPe,defaultParseWidth:"any"}),quarter:es({matchPatterns:OPe,defaultMatchWidth:"wide",parsePatterns:IPe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:es({matchPatterns:DPe,defaultMatchWidth:"wide",parsePatterns:MPe,defaultParseWidth:"any"}),day:es({matchPatterns:RPe,defaultMatchWidth:"wide",parsePatterns:LPe,defaultParseWidth:"any"}),dayPeriod:es({matchPatterns:$Pe,defaultMatchWidth:"any",parsePatterns:zPe,defaultParseWidth:"any"})},uV={code:"en-US",formatDistance:dPe,formatLong:mPe,formatRelative:vPe,localize:APe,match:FPe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function VPe(t){const e=Et(t);return rs(e,oV(e))+1}function dV(t){const e=Et(t),n=+tu(e)-+iPe(e);return Math.round(n/hE)+1}function fV(t,e){var d,f,h,p;const n=Et(t),r=n.getFullYear(),i=yg(),a=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((p=(h=i.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,s=zi(t,0);s.setFullYear(r+1,0,a),s.setHours(0,0,0,0);const o=ms(s,e),c=zi(t,0);c.setFullYear(r,0,a),c.setHours(0,0,0,0);const u=ms(c,e);return n.getTime()>=o.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function BPe(t,e){var o,c,u,d;const n=yg(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=fV(t,e),a=zi(t,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),ms(a,e)}function hV(t,e){const n=Et(t),r=+ms(n,e)-+BPe(n,e);return Math.round(r/hE)+1}function Dt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Fo={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Dt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Dt(n+1,2)},d(t,e){return Dt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Dt(t.getHours()%12||12,e.length)},H(t,e){return Dt(t.getHours(),e.length)},m(t,e){return Dt(t.getMinutes(),e.length)},s(t,e){return Dt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Dt(i,e.length)}},Uu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},EM={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Fo.y(t,e)},Y:function(t,e,n,r){const i=fV(t,r),a=i>0?i:1-i;if(e==="YY"){const s=a%100;return Dt(s,2)}return e==="Yo"?n.ordinalNumber(a,{unit:"year"}):Dt(a,e.length)},R:function(t,e){const n=sV(t);return Dt(n,e.length)},u:function(t,e){const n=t.getFullYear();return Dt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Dt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Dt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Fo.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Dt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=hV(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Dt(i,e.length)},I:function(t,e,n){const r=dV(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Dt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Fo.d(t,e)},D:function(t,e,n){const r=VPe(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Dt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return Dt(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return Dt(a,e.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Dt(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=Uu.noon:r===0?i=Uu.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=Uu.evening:r>=12?i=Uu.afternoon:r>=4?i=Uu.morning:i=Uu.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Fo.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Fo.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Dt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Dt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Fo.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Fo.s(t,e)},S:function(t,e){return Fo.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return CM(r);case"XXXX":case"XX":return hc(r);case"XXXXX":case"XXX":default:return hc(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return CM(r);case"xxxx":case"xx":return hc(r);case"xxxxx":case"xxx":default:return hc(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+TM(r,":");case"OOOO":default:return"GMT"+hc(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+TM(r,":");case"zzzz":default:return"GMT"+hc(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Dt(r,e.length)},T:function(t,e,n){const r=t.getTime();return Dt(r,e.length)}};function TM(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+e+Dt(a,2)}function CM(t,e){return t%60===0?(t>0?"-":"+")+Dt(Math.abs(t)/60,2):hc(t,e)}function hc(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Dt(Math.trunc(r/60),2),a=Dt(r%60,2);return n+i+e+a}const NM=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},pV=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},UPe=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return NM(t,e);let a;switch(r){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",NM(r,e)).replace("{{time}}",pV(i,e))},WPe={p:pV,P:UPe},KPe=/^D+$/,qPe=/^Y+$/,HPe=["D","DD","YY","YYYY"];function GPe(t){return KPe.test(t)}function YPe(t){return qPe.test(t)}function XPe(t,e,n){const r=QPe(t,e,n);if(console.warn(r),HPe.includes(t))throw new RangeError(r)}function QPe(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const JPe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ZPe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,eEe=/^'([^]*?)'?$/,tEe=/''/g,nEe=/[a-zA-Z]/;function xu(t,e,n){var d,f,h,p,y,v,b,x;const r=yg(),i=(n==null?void 0:n.locale)??r.locale??uV,a=(n==null?void 0:n.firstWeekContainsDate)??((f=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((p=(h=r.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,s=(n==null?void 0:n.weekStartsOn)??((v=(y=n==null?void 0:n.locale)==null?void 0:y.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((x=(b=r.locale)==null?void 0:b.options)==null?void 0:x.weekStartsOn)??0,o=Et(t);if(!lPe(o))throw new RangeError("Invalid time value");let c=e.match(ZPe).map(_=>{const S=_[0];if(S==="p"||S==="P"){const T=WPe[S];return T(_,i.formatLong)}return _}).join("").match(JPe).map(_=>{if(_==="''")return{isToken:!1,value:"'"};const S=_[0];if(S==="'")return{isToken:!1,value:rEe(_)};if(EM[S])return{isToken:!0,value:_};if(S.match(nEe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+S+"`");return{isToken:!1,value:_}});i.localize.preprocessor&&(c=i.localize.preprocessor(o,c));const u={firstWeekContainsDate:a,weekStartsOn:s,locale:i};return c.map(_=>{if(!_.isToken)return _.value;const S=_.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&YPe(S)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&GPe(S))&&XPe(S,e,String(t));const T=EM[S[0]];return T(o,S,i.localize,u)}).join("")}function rEe(t){const e=t.match(eEe);return e?e[1].replace(tEe,"'"):t}function iEe(t){const e=Et(t),n=e.getFullYear(),r=e.getMonth(),i=zi(t,0);return i.setFullYear(n,r+1,0),i.setHours(0,0,0,0),i.getDate()}function aEe(t){return Math.trunc(+Et(t)/1e3)}function sEe(t){const e=Et(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(0,0,0,0),e}function oEe(t,e){return cPe(sEe(t),vi(t),e)+1}function kS(t,e){const n=Et(t),r=Et(e);return n.getTime()>r.getTime()}function mV(t,e){const n=Et(t),r=Et(e);return+n<+r}function vE(t,e){const n=Et(t),r=Et(e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function lEe(t,e){const n=Et(t),r=Et(e);return n.getFullYear()===r.getFullYear()}function o1(t,e){return Wr(t,-e)}function l1(t,e){const n=Et(t),r=n.getFullYear(),i=n.getDate(),a=zi(t,0);a.setFullYear(r,e,15),a.setHours(0,0,0,0);const s=iEe(a);return n.setMonth(e,Math.min(i,s)),n}function kM(t,e){const n=Et(t);return isNaN(+n)?zi(t,NaN):(n.setFullYear(e),n)}const cEe={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},uEe=(t,e,n)=>{let r;const i=cEe[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"en "+r:"hace "+r:r},dEe={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},fEe={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},hEe={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},pEe={date:Cd({formats:dEe,defaultWidth:"full"}),time:Cd({formats:fEe,defaultWidth:"full"}),dateTime:Cd({formats:hEe,defaultWidth:"full"})},mEe={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},gEe={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},vEe=(t,e,n,r)=>e.getHours()!==1?gEe[t]:mEe[t],yEe={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},xEe={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},bEe={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},wEe={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},_Ee={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},SEe={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},jEe=(t,e)=>Number(t)+"º",AEe={ordinalNumber:jEe,era:Za({values:yEe,defaultWidth:"wide"}),quarter:Za({values:xEe,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:Za({values:bEe,defaultWidth:"wide"}),day:Za({values:wEe,defaultWidth:"wide"}),dayPeriod:Za({values:_Ee,defaultWidth:"wide",formattingValues:SEe,defaultFormattingWidth:"wide"})},PEe=/^(\d+)(º)?/i,EEe=/\d+/i,TEe={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},CEe={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},NEe={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},kEe={any:[/1/i,/2/i,/3/i,/4/i]},OEe={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},IEe={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},DEe={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},MEe={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},REe={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},LEe={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},$Ee={ordinalNumber:cV({matchPattern:PEe,parsePattern:EEe,valueCallback:function(t){return parseInt(t,10)}}),era:es({matchPatterns:TEe,defaultMatchWidth:"wide",parsePatterns:CEe,defaultParseWidth:"any"}),quarter:es({matchPatterns:NEe,defaultMatchWidth:"wide",parsePatterns:kEe,defaultParseWidth:"any",valueCallback:t=>t+1}),month:es({matchPatterns:OEe,defaultMatchWidth:"wide",parsePatterns:IEe,defaultParseWidth:"any"}),day:es({matchPatterns:DEe,defaultMatchWidth:"wide",parsePatterns:MEe,defaultParseWidth:"any"}),dayPeriod:es({matchPatterns:REe,defaultMatchWidth:"any",parsePatterns:LEe,defaultParseWidth:"any"})},yE={code:"es",formatDistance:uEe,formatLong:pEe,formatRelative:vEe,localize:AEe,match:$Ee,options:{weekStartsOn:1,firstWeekContainsDate:1}};var tt=function(){return tt=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},tt.apply(this,arguments)};function zEe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function gV(t,e,n){for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function xg(t){return t.mode==="multiple"}function bg(t){return t.mode==="range"}function Sb(t){return t.mode==="single"}var FEe={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function VEe(t,e){return xu(t,"LLLL y",e)}function BEe(t,e){return xu(t,"d",e)}function UEe(t,e){return xu(t,"LLLL",e)}function WEe(t){return"".concat(t)}function KEe(t,e){return xu(t,"cccccc",e)}function qEe(t,e){return xu(t,"yyyy",e)}var HEe=Object.freeze({__proto__:null,formatCaption:VEe,formatDay:BEe,formatMonthCaption:UEe,formatWeekNumber:WEe,formatWeekdayName:KEe,formatYearCaption:qEe}),GEe=function(t,e,n){return xu(t,"do MMMM (EEEE)",n)},YEe=function(){return"Month: "},XEe=function(){return"Go to next month"},QEe=function(){return"Go to previous month"},JEe=function(t,e){return xu(t,"cccc",e)},ZEe=function(t){return"Week n. ".concat(t)},eTe=function(){return"Year: "},tTe=Object.freeze({__proto__:null,labelDay:GEe,labelMonthDropdown:YEe,labelNext:XEe,labelPrevious:QEe,labelWeekNumber:ZEe,labelWeekday:JEe,labelYearDropdown:eTe});function nTe(){var t="buttons",e=FEe,n=uV,r={},i={},a=1,s={},o=new Date;return{captionLayout:t,classNames:e,formatters:HEe,labels:tTe,locale:n,modifiersClassNames:r,modifiers:i,numberOfMonths:a,styles:s,today:o,mode:"default"}}function rTe(t){var e=t.fromYear,n=t.toYear,r=t.fromMonth,i=t.toMonth,a=t.fromDate,s=t.toDate;return r?a=vi(r):e&&(a=new Date(e,0,1)),i?s=mE(i):n&&(s=new Date(n,11,31)),{fromDate:a?Af(a):void 0,toDate:s?Af(s):void 0}}var vV=k.createContext(void 0);function iTe(t){var e,n=t.initialProps,r=nTe(),i=rTe(n),a=i.fromDate,s=i.toDate,o=(e=n.captionLayout)!==null&&e!==void 0?e:r.captionLayout;o!=="buttons"&&(!a||!s)&&(o="buttons");var c;(Sb(n)||xg(n)||bg(n))&&(c=n.onSelect);var u=tt(tt(tt({},r),n),{captionLayout:o,classNames:tt(tt({},r.classNames),n.classNames),components:tt({},n.components),formatters:tt(tt({},r.formatters),n.formatters),fromDate:a,labels:tt(tt({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:tt(tt({},r.modifiers),n.modifiers),modifiersClassNames:tt(tt({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:tt(tt({},r.styles),n.styles),toDate:s});return l.jsx(vV.Provider,{value:u,children:t.children})}function Zt(){var t=k.useContext(vV);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function yV(t){var e=Zt(),n=e.locale,r=e.classNames,i=e.styles,a=e.formatters.formatCaption;return l.jsx("div",{className:r.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:a(t.displayMonth,{locale:n})})}function aTe(t){return l.jsx("svg",tt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:l.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function xV(t){var e,n,r=t.onChange,i=t.value,a=t.children,s=t.caption,o=t.className,c=t.style,u=Zt(),d=(n=(e=u.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&n!==void 0?n:aTe;return l.jsxs("div",{className:o,style:c,children:[l.jsx("span",{className:u.classNames.vhidden,children:t["aria-label"]}),l.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:i,onChange:r,children:a}),l.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[s,l.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function sTe(t){var e,n=Zt(),r=n.fromDate,i=n.toDate,a=n.styles,s=n.locale,o=n.formatters.formatMonthCaption,c=n.classNames,u=n.components,d=n.labels.labelMonthDropdown;if(!r)return l.jsx(l.Fragment,{});if(!i)return l.jsx(l.Fragment,{});var f=[];if(lEe(r,i))for(var h=vi(r),p=r.getMonth();p<=i.getMonth();p++)f.push(l1(h,p));else for(var h=vi(new Date),p=0;p<=11;p++)f.push(l1(h,p));var y=function(b){var x=Number(b.target.value),_=l1(vi(t.displayMonth),x);t.onChange(_)},v=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:xV;return l.jsx(v,{name:"months","aria-label":d(),className:c.dropdown_month,style:a.dropdown_month,onChange:y,value:t.displayMonth.getMonth(),caption:o(t.displayMonth,{locale:s}),children:f.map(function(b){return l.jsx("option",{value:b.getMonth(),children:o(b,{locale:s})},b.getMonth())})})}function oTe(t){var e,n=t.displayMonth,r=Zt(),i=r.fromDate,a=r.toDate,s=r.locale,o=r.styles,c=r.classNames,u=r.components,d=r.formatters.formatYearCaption,f=r.labels.labelYearDropdown,h=[];if(!i)return l.jsx(l.Fragment,{});if(!a)return l.jsx(l.Fragment,{});for(var p=i.getFullYear(),y=a.getFullYear(),v=p;v<=y;v++)h.push(kM(oV(new Date),v));var b=function(_){var S=kM(vi(n),Number(_.target.value));t.onChange(S)},x=(e=u==null?void 0:u.Dropdown)!==null&&e!==void 0?e:xV;return l.jsx(x,{name:"years","aria-label":f(),className:c.dropdown_year,style:o.dropdown_year,onChange:b,value:n.getFullYear(),caption:d(n,{locale:s}),children:h.map(function(_){return l.jsx("option",{value:_.getFullYear(),children:d(_,{locale:s})},_.getFullYear())})})}function lTe(t,e){var n=k.useState(t),r=n[0],i=n[1],a=e===void 0?r:e;return[a,i]}function cTe(t){var e=t.month,n=t.defaultMonth,r=t.today,i=e||n||r||new Date,a=t.toDate,s=t.fromDate,o=t.numberOfMonths,c=o===void 0?1:o;if(a&&Lm(a,i)<0){var u=-1*(c-1);i=Ma(a,u)}return s&&Lm(i,s)<0&&(i=s),vi(i)}function uTe(){var t=Zt(),e=cTe(t),n=lTe(e,t.month),r=n[0],i=n[1],a=function(s){var o;if(!t.disableNavigation){var c=vi(s);i(c),(o=t.onMonthChange)===null||o===void 0||o.call(t,c)}};return[r,a]}function dTe(t,e){for(var n=e.reverseMonths,r=e.numberOfMonths,i=vi(t),a=vi(Ma(i,r)),s=Lm(a,i),o=[],c=0;c<s;c++){var u=Ma(i,c);o.push(u)}return n&&(o=o.reverse()),o}function fTe(t,e){if(!e.disableNavigation){var n=e.toDate,r=e.pagedNavigation,i=e.numberOfMonths,a=i===void 0?1:i,s=r?a:1,o=vi(t);if(!n)return Ma(o,s);var c=Lm(n,t);if(!(c<a))return Ma(o,s)}}function hTe(t,e){if(!e.disableNavigation){var n=e.fromDate,r=e.pagedNavigation,i=e.numberOfMonths,a=i===void 0?1:i,s=r?a:1,o=vi(t);if(!n)return Ma(o,-s);var c=Lm(o,n);if(!(c<=0))return Ma(o,-s)}}var bV=k.createContext(void 0);function pTe(t){var e=Zt(),n=uTe(),r=n[0],i=n[1],a=dTe(r,e),s=fTe(r,e),o=hTe(r,e),c=function(f){return a.some(function(h){return vE(f,h)})},u=function(f,h){c(f)||(h&&mV(f,h)?i(Ma(f,1+e.numberOfMonths*-1)):i(f))},d={currentMonth:r,displayMonths:a,goToMonth:i,goToDate:u,previousMonth:o,nextMonth:s,isDateDisplayed:c};return l.jsx(bV.Provider,{value:d,children:t.children})}function wg(){var t=k.useContext(bV);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function OM(t){var e,n=Zt(),r=n.classNames,i=n.styles,a=n.components,s=wg().goToMonth,o=function(d){s(Ma(d,t.displayIndex?-t.displayIndex:0))},c=(e=a==null?void 0:a.CaptionLabel)!==null&&e!==void 0?e:yV,u=l.jsx(c,{id:t.id,displayMonth:t.displayMonth});return l.jsxs("div",{className:r.caption_dropdowns,style:i.caption_dropdowns,children:[l.jsx("div",{className:r.vhidden,children:u}),l.jsx(sTe,{onChange:o,displayMonth:t.displayMonth}),l.jsx(oTe,{onChange:o,displayMonth:t.displayMonth})]})}function mTe(t){return l.jsx("svg",tt({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:l.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function gTe(t){return l.jsx("svg",tt({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:l.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var $0=k.forwardRef(function(t,e){var n=Zt(),r=n.classNames,i=n.styles,a=[r.button_reset,r.button];t.className&&a.push(t.className);var s=a.join(" "),o=tt(tt({},i.button_reset),i.button);return t.style&&Object.assign(o,t.style),l.jsx("button",tt({},t,{ref:e,type:"button",className:s,style:o}))});function vTe(t){var e,n,r=Zt(),i=r.dir,a=r.locale,s=r.classNames,o=r.styles,c=r.labels,u=c.labelPrevious,d=c.labelNext,f=r.components;if(!t.nextMonth&&!t.previousMonth)return l.jsx(l.Fragment,{});var h=u(t.previousMonth,{locale:a}),p=[s.nav_button,s.nav_button_previous].join(" "),y=d(t.nextMonth,{locale:a}),v=[s.nav_button,s.nav_button_next].join(" "),b=(e=f==null?void 0:f.IconRight)!==null&&e!==void 0?e:gTe,x=(n=f==null?void 0:f.IconLeft)!==null&&n!==void 0?n:mTe;return l.jsxs("div",{className:s.nav,style:o.nav,children:[!t.hidePrevious&&l.jsx($0,{name:"previous-month","aria-label":h,className:p,style:o.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:i==="rtl"?l.jsx(b,{className:s.nav_icon,style:o.nav_icon}):l.jsx(x,{className:s.nav_icon,style:o.nav_icon})}),!t.hideNext&&l.jsx($0,{name:"next-month","aria-label":y,className:v,style:o.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:i==="rtl"?l.jsx(x,{className:s.nav_icon,style:o.nav_icon}):l.jsx(b,{className:s.nav_icon,style:o.nav_icon})})]})}function IM(t){var e=Zt().numberOfMonths,n=wg(),r=n.previousMonth,i=n.nextMonth,a=n.goToMonth,s=n.displayMonths,o=s.findIndex(function(y){return vE(t.displayMonth,y)}),c=o===0,u=o===s.length-1,d=e>1&&(c||!u),f=e>1&&(u||!c),h=function(){r&&a(r)},p=function(){i&&a(i)};return l.jsx(vTe,{displayMonth:t.displayMonth,hideNext:d,hidePrevious:f,nextMonth:i,previousMonth:r,onPreviousClick:h,onNextClick:p})}function yTe(t){var e,n=Zt(),r=n.classNames,i=n.disableNavigation,a=n.styles,s=n.captionLayout,o=n.components,c=(e=o==null?void 0:o.CaptionLabel)!==null&&e!==void 0?e:yV,u;return i?u=l.jsx(c,{id:t.id,displayMonth:t.displayMonth}):s==="dropdown"?u=l.jsx(OM,{displayMonth:t.displayMonth,id:t.id}):s==="dropdown-buttons"?u=l.jsxs(l.Fragment,{children:[l.jsx(OM,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),l.jsx(IM,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):u=l.jsxs(l.Fragment,{children:[l.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),l.jsx(IM,{displayMonth:t.displayMonth,id:t.id})]}),l.jsx("div",{className:r.caption,style:a.caption,children:u})}function xTe(t){var e=Zt(),n=e.footer,r=e.styles,i=e.classNames.tfoot;return n?l.jsx("tfoot",{className:i,style:r.tfoot,children:l.jsx("tr",{children:l.jsx("td",{colSpan:8,children:n})})}):l.jsx(l.Fragment,{})}function bTe(t,e,n){for(var r=n?tu(new Date):ms(new Date,{locale:t,weekStartsOn:e}),i=[],a=0;a<7;a++){var s=Wr(r,a);i.push(s)}return i}function wTe(){var t=Zt(),e=t.classNames,n=t.styles,r=t.showWeekNumber,i=t.locale,a=t.weekStartsOn,s=t.ISOWeek,o=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,u=bTe(i,a,s);return l.jsxs("tr",{style:n.head_row,className:e.head_row,children:[r&&l.jsx("td",{style:n.head_cell,className:e.head_cell}),u.map(function(d,f){return l.jsx("th",{scope:"col",className:e.head_cell,style:n.head_cell,"aria-label":c(d,{locale:i}),children:o(d,{locale:i})},f)})]})}function _Te(){var t,e=Zt(),n=e.classNames,r=e.styles,i=e.components,a=(t=i==null?void 0:i.HeadRow)!==null&&t!==void 0?t:wTe;return l.jsx("thead",{style:r.head,className:n.head,children:l.jsx(a,{})})}function STe(t){var e=Zt(),n=e.locale,r=e.formatters.formatDay;return l.jsx(l.Fragment,{children:r(t.date,{locale:n})})}var xE=k.createContext(void 0);function jTe(t){if(!xg(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return l.jsx(xE.Provider,{value:e,children:t.children})}return l.jsx(ATe,{initialProps:t.initialProps,children:t.children})}function ATe(t){var e=t.initialProps,n=t.children,r=e.selected,i=e.min,a=e.max,s=function(u,d,f){var h,p;(h=e.onDayClick)===null||h===void 0||h.call(e,u,d,f);var y=!!(d.selected&&i&&(r==null?void 0:r.length)===i);if(!y){var v=!!(!d.selected&&a&&(r==null?void 0:r.length)===a);if(!v){var b=r?gV([],r):[];if(d.selected){var x=b.findIndex(function(_){return hi(u,_)});b.splice(x,1)}else b.push(u);(p=e.onSelect)===null||p===void 0||p.call(e,b,u,d,f)}}},o={disabled:[]};r&&o.disabled.push(function(u){var d=a&&r.length>a-1,f=r.some(function(h){return hi(h,u)});return!!(d&&!f)});var c={selected:r,onDayClick:s,modifiers:o};return l.jsx(xE.Provider,{value:c,children:n})}function bE(){var t=k.useContext(xE);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function PTe(t,e){var n=e||{},r=n.from,i=n.to;return r&&i?hi(i,t)&&hi(r,t)?void 0:hi(i,t)?{from:i,to:void 0}:hi(r,t)?void 0:kS(r,t)?{from:t,to:i}:{from:r,to:t}:i?kS(t,i)?{from:i,to:t}:{from:t,to:i}:r?mV(t,r)?{from:t,to:r}:{from:r,to:t}:{from:t,to:void 0}}var wE=k.createContext(void 0);function ETe(t){if(!bg(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return l.jsx(wE.Provider,{value:e,children:t.children})}return l.jsx(TTe,{initialProps:t.initialProps,children:t.children})}function TTe(t){var e=t.initialProps,n=t.children,r=e.selected,i=r||{},a=i.from,s=i.to,o=e.min,c=e.max,u=function(p,y,v){var b,x;(b=e.onDayClick)===null||b===void 0||b.call(e,p,y,v);var _=PTe(p,r);(x=e.onSelect)===null||x===void 0||x.call(e,_,p,y,v)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a?(d.range_start=[a],s?(d.range_end=[s],hi(a,s)||(d.range_middle=[{after:a,before:s}])):d.range_end=[a]):s&&(d.range_start=[s],d.range_end=[s]),o&&(a&&!s&&d.disabled.push({after:o1(a,o-1),before:Wr(a,o-1)}),a&&s&&d.disabled.push({after:a,before:Wr(a,o-1)}),!a&&s&&d.disabled.push({after:o1(s,o-1),before:Wr(s,o-1)})),c){if(a&&!s&&(d.disabled.push({before:Wr(a,-c+1)}),d.disabled.push({after:Wr(a,c-1)})),a&&s){var f=rs(s,a)+1,h=c-f;d.disabled.push({before:o1(a,h)}),d.disabled.push({after:Wr(s,h)})}!a&&s&&(d.disabled.push({before:Wr(s,-c+1)}),d.disabled.push({after:Wr(s,c-1)}))}return l.jsx(wE.Provider,{value:{selected:r,onDayClick:u,modifiers:d},children:n})}function _E(){var t=k.useContext(wE);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function Vv(t){return Array.isArray(t)?gV([],t):t!==void 0?[t]:[]}function CTe(t){var e={};return Object.entries(t).forEach(function(n){var r=n[0],i=n[1];e[r]=Vv(i)}),e}var Ra;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(Ra||(Ra={}));var NTe=Ra.Selected,Os=Ra.Disabled,kTe=Ra.Hidden,OTe=Ra.Today,c1=Ra.RangeEnd,u1=Ra.RangeMiddle,d1=Ra.RangeStart,ITe=Ra.Outside;function DTe(t,e,n){var r,i=(r={},r[NTe]=Vv(t.selected),r[Os]=Vv(t.disabled),r[kTe]=Vv(t.hidden),r[OTe]=[t.today],r[c1]=[],r[u1]=[],r[d1]=[],r[ITe]=[],r);return t.fromDate&&i[Os].push({before:t.fromDate}),t.toDate&&i[Os].push({after:t.toDate}),xg(t)?i[Os]=i[Os].concat(e.modifiers[Os]):bg(t)&&(i[Os]=i[Os].concat(n.modifiers[Os]),i[d1]=n.modifiers[d1],i[u1]=n.modifiers[u1],i[c1]=n.modifiers[c1]),i}var wV=k.createContext(void 0);function MTe(t){var e=Zt(),n=bE(),r=_E(),i=DTe(e,n,r),a=CTe(e.modifiers),s=tt(tt({},i),a);return l.jsx(wV.Provider,{value:s,children:t.children})}function _V(){var t=k.useContext(wV);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function RTe(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function LTe(t){return!!(t&&typeof t=="object"&&"from"in t)}function $Te(t){return!!(t&&typeof t=="object"&&"after"in t)}function zTe(t){return!!(t&&typeof t=="object"&&"before"in t)}function FTe(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function VTe(t,e){var n,r=e.from,i=e.to;if(r&&i){var a=rs(i,r)<0;a&&(n=[i,r],r=n[0],i=n[1]);var s=rs(t,r)>=0&&rs(i,t)>=0;return s}return i?hi(i,t):r?hi(r,t):!1}function BTe(t){return pE(t)}function UTe(t){return Array.isArray(t)&&t.every(pE)}function WTe(t,e){return e.some(function(n){if(typeof n=="boolean")return n;if(BTe(n))return hi(t,n);if(UTe(n))return n.includes(t);if(LTe(n))return VTe(t,n);if(FTe(n))return n.dayOfWeek.includes(t.getDay());if(RTe(n)){var r=rs(n.before,t),i=rs(n.after,t),a=r>0,s=i<0,o=kS(n.before,n.after);return o?s&&a:a||s}return $Te(n)?rs(t,n.after)>0:zTe(n)?rs(n.before,t)>0:typeof n=="function"?n(t):!1})}function SE(t,e,n){var r=Object.keys(e).reduce(function(a,s){var o=e[s];return WTe(t,o)&&a.push(s),a},[]),i={};return r.forEach(function(a){return i[a]=!0}),n&&!vE(t,n)&&(i.outside=!0),i}function KTe(t,e){for(var n=vi(t[0]),r=mE(t[t.length-1]),i,a,s=n;s<=r;){var o=SE(s,e),c=!o.disabled&&!o.hidden;if(!c){s=Wr(s,1);continue}if(o.selected)return s;o.today&&!a&&(a=s),i||(i=s),s=Wr(s,1)}return a||i}var qTe=365;function SV(t,e){var n=e.moveBy,r=e.direction,i=e.context,a=e.modifiers,s=e.retry,o=s===void 0?{count:0,lastFocused:t}:s,c=i.weekStartsOn,u=i.fromDate,d=i.toDate,f=i.locale,h={day:Wr,week:NS,month:Ma,year:aPe,startOfWeek:function(b){return i.ISOWeek?tu(b):ms(b,{locale:f,weekStartsOn:c})},endOfWeek:function(b){return i.ISOWeek?lV(b):gE(b,{locale:f,weekStartsOn:c})}},p=h[n](t,r==="after"?1:-1);r==="before"&&u?p=sPe([u,p]):r==="after"&&d&&(p=oPe([d,p]));var y=!0;if(a){var v=SE(p,a);y=!v.disabled&&!v.hidden}return y?p:o.count>qTe?o.lastFocused:SV(p,{moveBy:n,direction:r,context:i,modifiers:a,retry:tt(tt({},o),{count:o.count+1})})}var jV=k.createContext(void 0);function HTe(t){var e=wg(),n=_V(),r=k.useState(),i=r[0],a=r[1],s=k.useState(),o=s[0],c=s[1],u=KTe(e.displayMonths,n),d=i??(o&&e.isDateDisplayed(o))?o:u,f=function(){c(i),a(void 0)},h=function(b){a(b)},p=Zt(),y=function(b,x){if(i){var _=SV(i,{moveBy:b,direction:x,context:p,modifiers:n});hi(i,_)||(e.goToDate(_,i),h(_))}},v={focusedDay:i,focusTarget:d,blur:f,focus:h,focusDayAfter:function(){return y("day","after")},focusDayBefore:function(){return y("day","before")},focusWeekAfter:function(){return y("week","after")},focusWeekBefore:function(){return y("week","before")},focusMonthBefore:function(){return y("month","before")},focusMonthAfter:function(){return y("month","after")},focusYearBefore:function(){return y("year","before")},focusYearAfter:function(){return y("year","after")},focusStartOfWeek:function(){return y("startOfWeek","before")},focusEndOfWeek:function(){return y("endOfWeek","after")}};return l.jsx(jV.Provider,{value:v,children:t.children})}function jE(){var t=k.useContext(jV);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function GTe(t,e){var n=_V(),r=SE(t,n,e);return r}var AE=k.createContext(void 0);function YTe(t){if(!Sb(t.initialProps)){var e={selected:void 0};return l.jsx(AE.Provider,{value:e,children:t.children})}return l.jsx(XTe,{initialProps:t.initialProps,children:t.children})}function XTe(t){var e=t.initialProps,n=t.children,r=function(a,s,o){var c,u,d;if((c=e.onDayClick)===null||c===void 0||c.call(e,a,s,o),s.selected&&!e.required){(u=e.onSelect)===null||u===void 0||u.call(e,void 0,a,s,o);return}(d=e.onSelect)===null||d===void 0||d.call(e,a,a,s,o)},i={selected:e.selected,onDayClick:r};return l.jsx(AE.Provider,{value:i,children:n})}function AV(){var t=k.useContext(AE);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function QTe(t,e){var n=Zt(),r=AV(),i=bE(),a=_E(),s=jE(),o=s.focusDayAfter,c=s.focusDayBefore,u=s.focusWeekAfter,d=s.focusWeekBefore,f=s.blur,h=s.focus,p=s.focusMonthBefore,y=s.focusMonthAfter,v=s.focusYearBefore,b=s.focusYearAfter,x=s.focusStartOfWeek,_=s.focusEndOfWeek,S=function(B){var F,q,ae,ce;Sb(n)?(F=r.onDayClick)===null||F===void 0||F.call(r,t,e,B):xg(n)?(q=i.onDayClick)===null||q===void 0||q.call(i,t,e,B):bg(n)?(ae=a.onDayClick)===null||ae===void 0||ae.call(a,t,e,B):(ce=n.onDayClick)===null||ce===void 0||ce.call(n,t,e,B)},T=function(B){var F;h(t),(F=n.onDayFocus)===null||F===void 0||F.call(n,t,e,B)},E=function(B){var F;f(),(F=n.onDayBlur)===null||F===void 0||F.call(n,t,e,B)},A=function(B){var F;(F=n.onDayMouseEnter)===null||F===void 0||F.call(n,t,e,B)},j=function(B){var F;(F=n.onDayMouseLeave)===null||F===void 0||F.call(n,t,e,B)},P=function(B){var F;(F=n.onDayPointerEnter)===null||F===void 0||F.call(n,t,e,B)},O=function(B){var F;(F=n.onDayPointerLeave)===null||F===void 0||F.call(n,t,e,B)},D=function(B){var F;(F=n.onDayTouchCancel)===null||F===void 0||F.call(n,t,e,B)},M=function(B){var F;(F=n.onDayTouchEnd)===null||F===void 0||F.call(n,t,e,B)},z=function(B){var F;(F=n.onDayTouchMove)===null||F===void 0||F.call(n,t,e,B)},L=function(B){var F;(F=n.onDayTouchStart)===null||F===void 0||F.call(n,t,e,B)},te=function(B){var F;(F=n.onDayKeyUp)===null||F===void 0||F.call(n,t,e,B)},X=function(B){var F;switch(B.key){case"ArrowLeft":B.preventDefault(),B.stopPropagation(),n.dir==="rtl"?o():c();break;case"ArrowRight":B.preventDefault(),B.stopPropagation(),n.dir==="rtl"?c():o();break;case"ArrowDown":B.preventDefault(),B.stopPropagation(),u();break;case"ArrowUp":B.preventDefault(),B.stopPropagation(),d();break;case"PageUp":B.preventDefault(),B.stopPropagation(),B.shiftKey?v():p();break;case"PageDown":B.preventDefault(),B.stopPropagation(),B.shiftKey?b():y();break;case"Home":B.preventDefault(),B.stopPropagation(),x();break;case"End":B.preventDefault(),B.stopPropagation(),_();break}(F=n.onDayKeyDown)===null||F===void 0||F.call(n,t,e,B)},W={onClick:S,onFocus:T,onBlur:E,onKeyDown:X,onKeyUp:te,onMouseEnter:A,onMouseLeave:j,onPointerEnter:P,onPointerLeave:O,onTouchCancel:D,onTouchEnd:M,onTouchMove:z,onTouchStart:L};return W}function JTe(){var t=Zt(),e=AV(),n=bE(),r=_E(),i=Sb(t)?e.selected:xg(t)?n.selected:bg(t)?r.selected:void 0;return i}function ZTe(t){return Object.values(Ra).includes(t)}function eCe(t,e){var n=[t.classNames.day];return Object.keys(e).forEach(function(r){var i=t.modifiersClassNames[r];if(i)n.push(i);else if(ZTe(r)){var a=t.classNames["day_".concat(r)];a&&n.push(a)}}),n}function tCe(t,e){var n=tt({},t.styles.day);return Object.keys(e).forEach(function(r){var i;n=tt(tt({},n),(i=t.modifiersStyles)===null||i===void 0?void 0:i[r])}),n}function nCe(t,e,n){var r,i,a,s=Zt(),o=jE(),c=GTe(t,e),u=QTe(t,c),d=JTe(),f=!!(s.onDayClick||s.mode!=="default");k.useEffect(function(){var A;c.outside||o.focusedDay&&f&&hi(o.focusedDay,t)&&((A=n.current)===null||A===void 0||A.focus())},[o.focusedDay,t,n,f,c.outside]);var h=eCe(s,c).join(" "),p=tCe(s,c),y=!!(c.outside&&!s.showOutsideDays||c.hidden),v=(a=(i=s.components)===null||i===void 0?void 0:i.DayContent)!==null&&a!==void 0?a:STe,b=l.jsx(v,{date:t,displayMonth:e,activeModifiers:c}),x={style:p,className:h,children:b,role:"gridcell"},_=o.focusTarget&&hi(o.focusTarget,t)&&!c.outside,S=o.focusedDay&&hi(o.focusedDay,t),T=tt(tt(tt({},x),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=S||_?0:-1,r)),u),E={isButton:f,isHidden:y,activeModifiers:c,selectedDays:d,buttonProps:T,divProps:x};return E}function rCe(t){var e=k.useRef(null),n=nCe(t.date,t.displayMonth,e);return n.isHidden?l.jsx("div",{role:"gridcell"}):n.isButton?l.jsx($0,tt({name:"day",ref:e},n.buttonProps)):l.jsx("div",tt({},n.divProps))}function iCe(t){var e=t.number,n=t.dates,r=Zt(),i=r.onWeekNumberClick,a=r.styles,s=r.classNames,o=r.locale,c=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,d=u(Number(e),{locale:o});if(!i)return l.jsx("span",{className:s.weeknumber,style:a.weeknumber,children:d});var f=c(Number(e),{locale:o}),h=function(p){i(e,n,p)};return l.jsx($0,{name:"week-number","aria-label":f,className:s.weeknumber,style:a.weeknumber,onClick:h,children:d})}function aCe(t){var e,n,r=Zt(),i=r.styles,a=r.classNames,s=r.showWeekNumber,o=r.components,c=(e=o==null?void 0:o.Day)!==null&&e!==void 0?e:rCe,u=(n=o==null?void 0:o.WeekNumber)!==null&&n!==void 0?n:iCe,d;return s&&(d=l.jsx("td",{className:a.cell,style:i.cell,children:l.jsx(u,{number:t.weekNumber,dates:t.dates})})),l.jsxs("tr",{className:a.row,style:i.row,children:[d,t.dates.map(function(f){return l.jsx("td",{className:a.cell,style:i.cell,role:"presentation",children:l.jsx(c,{displayMonth:t.displayMonth,date:f})},aEe(f))})]})}function DM(t,e,n){for(var r=n!=null&&n.ISOWeek?lV(e):gE(e,n),i=n!=null&&n.ISOWeek?tu(t):ms(t,n),a=rs(r,i),s=[],o=0;o<=a;o++)s.push(Wr(i,o));var c=s.reduce(function(u,d){var f=n!=null&&n.ISOWeek?dV(d):hV(d,n),h=u.find(function(p){return p.weekNumber===f});return h?(h.dates.push(d),u):(u.push({weekNumber:f,dates:[d]}),u)},[]);return c}function sCe(t,e){var n=DM(vi(t),mE(t),e);if(e!=null&&e.useFixedWeeks){var r=oEe(t,e);if(r<6){var i=n[n.length-1],a=i.dates[i.dates.length-1],s=NS(a,6-r),o=DM(NS(a,1),s,e);n.push.apply(n,o)}}return n}function oCe(t){var e,n,r,i=Zt(),a=i.locale,s=i.classNames,o=i.styles,c=i.hideHead,u=i.fixedWeeks,d=i.components,f=i.weekStartsOn,h=i.firstWeekContainsDate,p=i.ISOWeek,y=sCe(t.displayMonth,{useFixedWeeks:!!u,ISOWeek:p,locale:a,weekStartsOn:f,firstWeekContainsDate:h}),v=(e=d==null?void 0:d.Head)!==null&&e!==void 0?e:_Te,b=(n=d==null?void 0:d.Row)!==null&&n!==void 0?n:aCe,x=(r=d==null?void 0:d.Footer)!==null&&r!==void 0?r:xTe;return l.jsxs("table",{id:t.id,className:s.table,style:o.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&l.jsx(v,{}),l.jsx("tbody",{className:s.tbody,style:o.tbody,children:y.map(function(_){return l.jsx(b,{displayMonth:t.displayMonth,dates:_.dates,weekNumber:_.weekNumber},_.weekNumber)})}),l.jsx(x,{displayMonth:t.displayMonth})]})}function lCe(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var cCe=lCe()?k.useLayoutEffect:k.useEffect,f1=!1,uCe=0;function MM(){return"react-day-picker-".concat(++uCe)}function dCe(t){var e,n=t??(f1?MM():null),r=k.useState(n),i=r[0],a=r[1];return cCe(function(){i===null&&a(MM())},[]),k.useEffect(function(){f1===!1&&(f1=!0)},[]),(e=t??i)!==null&&e!==void 0?e:void 0}function fCe(t){var e,n,r=Zt(),i=r.dir,a=r.classNames,s=r.styles,o=r.components,c=wg().displayMonths,u=dCe(r.id?"".concat(r.id,"-").concat(t.displayIndex):void 0),d=r.id?"".concat(r.id,"-grid-").concat(t.displayIndex):void 0,f=[a.month],h=s.month,p=t.displayIndex===0,y=t.displayIndex===c.length-1,v=!p&&!y;i==="rtl"&&(e=[p,y],y=e[0],p=e[1]),p&&(f.push(a.caption_start),h=tt(tt({},h),s.caption_start)),y&&(f.push(a.caption_end),h=tt(tt({},h),s.caption_end)),v&&(f.push(a.caption_between),h=tt(tt({},h),s.caption_between));var b=(n=o==null?void 0:o.Caption)!==null&&n!==void 0?n:yTe;return l.jsxs("div",{className:f.join(" "),style:h,children:[l.jsx(b,{id:u,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),l.jsx(oCe,{id:d,"aria-labelledby":u,displayMonth:t.displayMonth})]},t.displayIndex)}function hCe(t){var e=Zt(),n=e.classNames,r=e.styles;return l.jsx("div",{className:n.months,style:r.months,children:t.children})}function pCe(t){var e,n,r=t.initialProps,i=Zt(),a=jE(),s=wg(),o=k.useState(!1),c=o[0],u=o[1];k.useEffect(function(){i.initialFocus&&a.focusTarget&&(c||(a.focus(a.focusTarget),u(!0)))},[i.initialFocus,c,a.focus,a.focusTarget,a]);var d=[i.classNames.root,i.className];i.numberOfMonths>1&&d.push(i.classNames.multiple_months),i.showWeekNumber&&d.push(i.classNames.with_weeknumber);var f=tt(tt({},i.styles.root),i.style),h=Object.keys(r).filter(function(y){return y.startsWith("data-")}).reduce(function(y,v){var b;return tt(tt({},y),(b={},b[v]=r[v],b))},{}),p=(n=(e=r.components)===null||e===void 0?void 0:e.Months)!==null&&n!==void 0?n:hCe;return l.jsx("div",tt({className:d.join(" "),style:f,dir:i.dir,id:i.id,nonce:r.nonce,title:r.title,lang:r.lang},h,{children:l.jsx(p,{children:s.displayMonths.map(function(y,v){return l.jsx(fCe,{displayIndex:v,displayMonth:y},v)})})}))}function mCe(t){var e=t.children,n=zEe(t,["children"]);return l.jsx(iTe,{initialProps:n,children:l.jsx(pTe,{children:l.jsx(YTe,{initialProps:n,children:l.jsx(jTe,{initialProps:n,children:l.jsx(ETe,{initialProps:n,children:l.jsx(MTe,{children:l.jsx(HTe,{children:e})})})})})})})}function Xf(t){return l.jsx(mCe,tt({},t,{children:l.jsx(pCe,{initialProps:t})}))}const RM=[{count:1,name:"Simple"},{count:2,name:"Doble"},{count:3,name:"Triple"},{count:4,name:"Cuádruple"},{count:5,name:"Quíntuple"}],gCe=140,LM=7,vCe=`
  .rdp {
    --rdp-cell-size: 40px; --rdp-accent-color: #FF9500; --rdp-background-color: #1c1c1e;
    --rdp-accent-color-dark: #FF9500; --rdp-background-color-dark: #1c1c1e;
    --rdp-outline: 2px solid var(--rdp-accent-color); --rdp-border-radius: 12px; color: #FFF;
  }
  .rdp-caption_label, .rdp-nav_button { color: #FF9500; }
  .rdp-head_cell { color: #8e8e93; }
  .rdp-day_selected { background-color: var(--rdp-accent-color); color: #000; font-weight: bold; }
`,Qf=({isOpen:t,onClose:e,motherId:n})=>{const{fathers:r,addFather:i,addParturition:a,parturitions:s}=Ge(),[o,c]=k.useState(1),[u,d]=k.useState(new Date().toISOString().split("T")[0]),[f,h]=k.useState(""),[p,y]=k.useState(1),[v,b]=k.useState([]),[x,_]=k.useState(!1),[S,T]=k.useState(!1),[E,A]=k.useState(!1),[j,P]=k.useState("");k.useEffect(()=>{t&&(c(1),d(new Date().toISOString().split("T")[0]),h(""),y(1),b([]),A(!1),P(""))},[t]);const O=()=>c(W=>W<4?W+1:W),D=()=>c(W=>W>1?W-1:W),M=W=>{y(W),b(Array.from({length:W},(B,F)=>({id:`kid_${F}_${Date.now()}`,sex:"Hembra",status:"Viva",correlative:"",birthWeight:""}))),O()},z=(W,B,F)=>{const q=[...v];let ae=F;B==="birthWeight"&&parseFloat(F)>LM&&(ae=LM.toString()),q[W]={...q[W],[B]:ae},b(q)},L=async()=>{var q;A(!0),P("");const W=s.filter(ae=>ae.goatId.toUpperCase()===n.toUpperCase()),B=new Date(u).getTime();if(W.some(ae=>{const ce=new Date(ae.parturitionDate).getTime();return Math.abs(B-ce)/(1e3*60*60*24)<gCe})){P(`Ya existe un parto registrado para ${n} en una fecha demasiado cercana.`),A(!1);return}try{const ae=r.find(Le=>Le.id===f);if(!ae)throw new Error("Padre no encontrado");const ce=v.filter(Le=>Le.status==="Viva"),ve=v.some(Le=>Le.status==="Mortinato"),we=ce.map(Le=>({sex:Le.sex,birthWeight:Le.birthWeight,id:`${Le.sex==="Macho"?"X":ae.name.charAt(0).toUpperCase()}${Le.correlative}`}));await a({motherId:n.toUpperCase(),parturitionDate:u,sireId:f,parturitionType:((q=RM.find(Le=>Le.count===p))==null?void 0:q.name)||"Simple",offspringCount:v.length,liveOffspring:we,parturitionOutcome:ve?"Con Mortinatos":"Normal"}),O(),setTimeout(e,2e3)}catch(ae){P(ae.message||"Error al registrar el parto. Revisa los datos."),console.error(ae),A(!1)}},te=k.useMemo(()=>r.find(W=>W.id===f),[f,r]),X=async W=>{await i(W),h(W.id),_(!1)};return t?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex flex-col justify-end z-50 animate-fade-in",onClick:e,children:l.jsxs("div",{className:"bg-ios-modal-bg w-full h-[95vh] rounded-t-2xl flex flex-col animate-slide-up",onClick:W=>W.stopPropagation(),children:[l.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between p-4 border-b border-brand-border",children:[o>1&&o<4&&l.jsx("button",{onClick:D,className:"p-2 text-zinc-400 hover:text-white",children:l.jsx(Zn,{size:24})}),l.jsxs("h1",{className:"text-xl font-bold tracking-tight text-white mx-auto",children:["Registrar Parto para ",n]}),o<4?l.jsx("button",{onClick:e,className:"p-2 text-zinc-400 hover:text-white",children:l.jsx(Cl,{size:24})}):l.jsx("div",{className:"w-10"})]}),l.jsxs("main",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:[o===1&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Fecha del Parto"}),l.jsxs("button",{type:"button",onClick:()=>T(!0),className:"w-full bg-zinc-800 p-4 rounded-xl text-lg text-left flex justify-between items-center",children:[l.jsx("span",{className:u?"text-white":"text-zinc-500",children:u?new Date(u+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"}):"Seleccionar Fecha"}),l.jsx(ro,{className:"text-zinc-400",size:20})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:"Padre (Semental)"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{value:f,onChange:W=>h(W.target.value),className:"w-full bg-zinc-800 p-4 rounded-xl text-lg appearance-none",children:[l.jsx("option",{value:"",children:"Seleccionar Padre..."}),r.map(W=>l.jsxs("option",{value:W.id,children:[W.name," (",W.id,")"]},W.id))]}),l.jsx("button",{type:"button",onClick:()=>_(!0),className:"flex-shrink-0 p-4 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",children:l.jsx(ur,{size:24})})]})]}),l.jsx("button",{onClick:O,disabled:!u||!f,className:"w-full bg-brand-orange text-white font-bold py-4 rounded-xl text-lg disabled:opacity-50",children:"Siguiente"})]}),o===2&&l.jsxs("div",{className:"space-y-6 text-center",children:[l.jsx("h2",{className:"text-2xl font-semibold text-white",children:"¿Cuántas crías nacieron?"}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:RM.map(W=>l.jsx("button",{onClick:()=>M(W.count),className:"bg-zinc-800 hover:bg-zinc-700 text-white font-bold py-8 rounded-2xl text-2xl transition-colors",children:W.name},W.count))})]}),o===3&&l.jsxs("div",{className:"space-y-4",children:[v.map((W,B)=>{const F=W.status==="Mortinato";return l.jsxs("div",{className:`bg-black/20 rounded-2xl p-4 border transition-colors ${F?"border-red-500/30":"border-zinc-700"} space-y-3`,children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("p",{className:"font-semibold text-brand-orange",children:["Cría ",B+1]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("div",{className:"w-32",children:l.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[l.jsx("button",{type:"button",onClick:()=>z(B,"status","Viva"),className:`w-1/2 text-xs rounded-md py-1 transition-all ${F?"text-zinc-400":"bg-green-600 text-white"}`,children:"Viva"}),l.jsx("button",{type:"button",onClick:()=>z(B,"status","Mortinato"),className:`w-1/2 text-xs rounded-md py-1 transition-all ${F?"bg-red-600 text-white":"text-zinc-400"}`,children:"Mortinato"})]})}),l.jsx("div",{className:"w-32",children:l.jsxs("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:[l.jsx("button",{type:"button",onClick:()=>z(B,"sex","Hembra"),className:`w-1/2 text-xs rounded-md py-1 transition-all ${W.sex==="Hembra"?"bg-pink-500 text-white":"text-zinc-400"}`,children:"Hembra"}),l.jsx("button",{type:"button",onClick:()=>z(B,"sex","Macho"),className:`w-1/2 text-xs rounded-md py-1 transition-all ${W.sex==="Macho"?"bg-blue-500 text-white":"text-zinc-400"}`,children:"Macho"})]})})]})]}),l.jsxs("div",{className:`grid grid-cols-2 gap-3 items-center transition-opacity ${F?"opacity-40":"opacity-100"}`,children:[l.jsxs("div",{className:"flex items-center bg-zinc-800 p-3 rounded-xl gap-2",children:[l.jsx("span",{className:"font-mono text-zinc-400 text-lg",children:W.sex==="Macho"?"X":(te==null?void 0:te.name.charAt(0).toUpperCase())||"?"}),l.jsx("input",{autoFocus:B===0,value:W.correlative,onChange:q=>z(B,"correlative",q.target.value.toUpperCase()),placeholder:"ID",className:"w-full bg-transparent text-lg text-white focus:outline-none",disabled:F})]}),l.jsx("input",{value:W.birthWeight,onChange:q=>z(B,"birthWeight",q.target.value),placeholder:"Peso (Kg)",type:"number",step:"0.1",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",disabled:F})]})]},W.id)}),l.jsx("button",{onClick:L,disabled:E||v.some(W=>W.status==="Viva"&&(!W.correlative||!W.birthWeight)),className:"w-full bg-brand-green text-white font-bold py-4 rounded-xl text-lg disabled:opacity-50",children:E?"Guardando...":`Guardar Parto y ${p} Cría(s)`}),j&&l.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[l.jsx(Ut,{size:18}),l.jsx("span",{children:j})]})]}),o===4&&l.jsxs("div",{className:"text-center flex flex-col justify-center items-center h-full",children:[l.jsx(Jr,{size:80,className:"text-brand-green mb-4"}),l.jsx("h2",{className:"text-3xl font-bold text-white",children:"¡Éxito!"}),l.jsx("p",{className:"text-lg text-zinc-400",children:"El parto y las crías se han registrado correctamente."})]})]})]})}),l.jsxs(st,{isOpen:S,onClose:()=>T(!1),title:"Seleccionar Fecha del Parto",children:[l.jsx("style",{children:vCe}),l.jsx("div",{className:"flex justify-center",children:l.jsx(Xf,{mode:"single",selected:new Date(u+"T00:00:00"),onSelect:W=>{W&&d(W.toISOString().split("T")[0]),T(!1)},locale:yE,disabled:{after:new Date},captionLayout:"dropdown",fromYear:new Date().getFullYear()-20,toYear:new Date().getFullYear()})})]}),l.jsx(fE,{isOpen:x,onClose:()=>_(!1),onSave:X})]}):null},PE=({animal:t,onSaveSuccess:e,onCancel:n})=>{const{parturitions:r,addWeighing:i,startDryingProcess:a,setLactationAsDry:s}=Ge(),[o,c]=k.useState(new Date().toISOString().split("T")[0]),[u,d]=k.useState(""),[f,h]=k.useState(!1),[p,y]=k.useState(null),[v,b]=k.useState(!1),x=k.useMemo(()=>r.filter(A=>A.goatId===t.id&&A.status==="activa").sort((A,j)=>new Date(j.parturitionDate).getTime()-new Date(A.parturitionDate).getTime())[0],[r,t.id]),_=x?Yf(x.parturitionDate,o):null,S=async A=>{if(A.preventDefault(),!x)return;y(null),h(!0);const j=parseFloat(u);if(isNaN(j)||j<=0){y({type:"error",text:"Por favor, introduce un peso válido."}),h(!1);return}if(j>8.5){y({type:"error",text:"La producción parece irracionalmente alta."}),h(!1);return}try{await i({goatId:t.id,date:o,kg:j}),y({type:"success",text:`Pesaje de ${t.id} guardado con éxito.`}),setTimeout(e,1500)}catch(P){y({type:"error",text:P.message||"No se pudo guardar el pesaje."}),h(!1)}},T=async()=>{if(x){h(!0);try{await a(x.id),y({type:"success",text:"Proceso de secado iniciado."}),setTimeout(e,1500)}catch{y({type:"error",text:"No se pudo iniciar el secado."})}finally{h(!1)}}},E=async()=>{if(x){h(!0);try{await s(x.id),y({type:"success",text:"Lactancia declarada como seca."}),setTimeout(e,1500)}catch{y({type:"error",text:"No se pudo finalizar la lactancia."})}finally{h(!1)}}};return l.jsxs(l.Fragment,{children:[l.jsx(st,{isOpen:!v,onClose:n,title:`Pesaje Lechero: ${t.id}`,children:l.jsx("div",{className:"space-y-4",children:x?l.jsxs("form",{onSubmit:S,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"weighingDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha"}),l.jsx("input",{id:"weighingDate",type:"date",value:o,onChange:A=>c(A.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Días en Leche (DEL)"}),l.jsx("div",{className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-center font-bold text-white",children:_??"N/A"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"weighingKg",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Producción (Kg)"}),l.jsx("input",{id:"weighingKg",type:"number",step:"0.1",value:u,onChange:A=>d(A.target.value),placeholder:"Ej: 3.5",autoFocus:!0,className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg",required:!0})]}),p&&l.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${p.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[p.type==="success"?l.jsx(Jr,{size:18}):l.jsx(Ut,{size:18}),l.jsx("span",{children:p.text})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-brand-border",children:[l.jsx("button",{type:"button",onClick:n,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsxs("button",{type:"submit",disabled:f,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50 flex items-center gap-2",children:[l.jsx(rg,{size:18})," Guardar"]})]}),l.jsxs("div",{className:"space-y-2 pt-4 border-t border-brand-border",children:[l.jsx("h4",{className:"text-sm font-semibold text-zinc-400",children:"Otras Acciones de Lactancia"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{type:"button",onClick:T,disabled:f,className:"w-full flex items-center justify-center gap-2 bg-blue-600/20 text-blue-300 font-semibold py-2 px-3 rounded-lg hover:bg-blue-600/40 transition-colors",children:[l.jsx(Sx,{size:16})," Iniciar Secado"]}),l.jsxs("button",{type:"button",onClick:E,disabled:f,className:"w-full flex items-center justify-center gap-2 bg-gray-600/20 text-gray-300 font-semibold py-2 px-3 rounded-lg hover:bg-gray-600/40 transition-colors",children:[l.jsx(Al,{size:16})," Declarar Seca"]})]})]})]}):l.jsxs("div",{className:"text-center space-y-4",children:[l.jsx(Ut,{className:"mx-auto h-12 w-12 text-amber-400"}),l.jsx("h3",{className:"text-lg font-medium text-white",children:"Animal sin Parto Activo"}),l.jsx("p",{className:"text-sm text-zinc-400",children:"Para registrar un pesaje de leche, el animal debe tener un parto activo registrado. Puedes declararlo ahora."}),l.jsxs("button",{onClick:()=>b(!0),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[l.jsx(xl,{size:18})," Declarar Parto"]})]})})}),v&&l.jsx(Qf,{isOpen:v,onClose:()=>{b(!1),e()},motherId:t.id})]})},EE=({animal:t,onSaveSuccess:e,onCancel:n})=>{const{addBodyWeighing:r}=Ge(),[i,a]=k.useState(new Date().toISOString().split("T")[0]),[s,o]=k.useState(""),[c,u]=k.useState(!1),[d,f]=k.useState(null),h=async p=>{p.preventDefault(),f(null),u(!0);const y=parseFloat(s);if(isNaN(y)||y<=0){f({type:"error",text:"Por favor, introduce un peso válido."}),u(!1);return}if(y>50){f({type:"error",text:"El peso corporal excede los 50 Kg. Por favor, verifique el dato."}),u(!1);return}try{await r({animalId:t.id,date:i,kg:y}),f({type:"success",text:`Pesaje de ${t.id} guardado con éxito.`}),setTimeout(e,1500)}catch(v){f({type:"error",text:v.message||"No se pudo guardar el pesaje."}),u(!1)}};return l.jsx(st,{isOpen:!0,onClose:n,title:`Pesaje Corporal: ${t.id}`,children:l.jsxs("form",{onSubmit:h,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"weighingDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha"}),l.jsx("input",{id:"weighingDate",type:"date",value:i,onChange:p=>a(p.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"weighingKg",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Peso (Kg)"}),l.jsx("input",{id:"weighingKg",type:"number",step:"0.1",value:s,onChange:p=>o(p.target.value),placeholder:"Ej: 32.5",autoFocus:!0,className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg",required:!0})]})]}),d&&l.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${d.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[d.type==="success"?l.jsx(Jr,{size:18}):l.jsx(Ut,{size:18}),l.jsx("span",{children:d.text})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-brand-border",children:[l.jsx("button",{type:"button",onClick:n,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsxs("button",{type:"submit",disabled:c,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50 flex items-center gap-2",children:[l.jsx(rg,{size:18})," Guardar"]})]})]})})},TE=({animal:t,onConfirm:e,onCancel:n})=>{const[r,i]=k.useState("Venta"),[a,s]=k.useState(new Date().toISOString().split("T")[0]),[o,c]=k.useState(""),[u,d]=k.useState(""),[f,h]=k.useState("Cría"),[p,y]=k.useState(""),[v,b]=k.useState(),[x,_]=k.useState(""),S=["Baja producción","Bajo índice de crecimiento","Inflamación articular","Linfadenitis caseosa","Sospecha de otras enfermedades"],T=()=>{const E={reason:r,date:a,salePrice:r==="Venta"&&parseFloat(o)||void 0,saleBuyer:r==="Venta"&&u||void 0,salePurpose:r==="Venta"?f:void 0,deathReason:r==="Muerte"&&p||void 0,cullReason:r==="Descarte"&&v||void 0,cullReasonDetails:r==="Descarte"&&v==="Sospecha de otras enfermedades"?x:void 0};e(E)};return l.jsx(st,{isOpen:!0,onClose:n,title:`Dar de Baja a ${t.id}`,children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex bg-zinc-800 rounded-xl p-1 w-full",children:[l.jsx("button",{onClick:()=>i("Venta"),className:`w-1/3 rounded-lg py-2 text-sm font-semibold transition-colors ${r==="Venta"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"Venta"}),l.jsx("button",{onClick:()=>i("Muerte"),className:`w-1/3 rounded-lg py-2 text-sm font-semibold transition-colors ${r==="Muerte"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"Muerte"}),l.jsx("button",{onClick:()=>i("Descarte"),className:`w-1/3 rounded-lg py-2 text-sm font-semibold transition-colors ${r==="Descarte"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"Descarte"})]}),l.jsxs("div",{className:"animate-fade-in",children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha del Evento"}),l.jsx("input",{type:"date",value:a,onChange:E=>s(E.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg"})]}),r==="Venta"&&l.jsxs("div",{className:"space-y-4 animate-fade-in",children:[l.jsx("input",{type:"number",value:o,onChange:E=>c(E.target.value),placeholder:"Precio de Venta (Opcional)",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg"}),l.jsx("input",{type:"text",value:u,onChange:E=>d(E.target.value),placeholder:"Comprador (Opcional)",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg"}),l.jsxs("select",{value:f,onChange:E=>h(E.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",children:[l.jsx("option",{value:"Cría",children:"Para Cría"}),l.jsx("option",{value:"Carne",children:"Para Carne"})]})]}),r==="Muerte"&&l.jsx("div",{className:"animate-fade-in",children:l.jsx("textarea",{value:p,onChange:E=>y(E.target.value),placeholder:"Causa / Descripción de la muerte...",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",rows:3})}),r==="Descarte"&&l.jsxs("div",{className:"space-y-4 animate-fade-in",children:[l.jsxs("select",{value:v||"",onChange:E=>b(E.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",children:[l.jsx("option",{value:"",children:"Seleccione una causa..."}),S.map(E=>l.jsx("option",{value:E,children:E},E))]}),v==="Sospecha de otras enfermedades"&&l.jsx("input",{type:"text",value:x,onChange:E=>_(E.target.value),placeholder:"Especificar sospecha o síntomas...",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg"})]}),l.jsx("p",{className:"text-xs text-zinc-500 text-center pt-2",children:'El animal será movido a "Referencia". Esta acción no se puede deshacer desde esta pantalla.'}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-brand-border",children:[l.jsx("button",{onClick:n,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{onClick:T,className:"px-5 py-2 bg-brand-red hover:bg-red-700 text-white font-bold rounded-lg",children:"Confirmar Baja"})]})]})})},CE=({animal:t,onSaveSuccess:e,onCancel:n})=>{const{fathers:r,addFather:i,addParturition:a}=Ge(),[s,o]=k.useState(new Date().toISOString().split("T")[0]),[c,u]=k.useState(""),[d,f]=k.useState(!0),[h,p]=k.useState(!1),[y,v]=k.useState(null),[b,x]=k.useState(!1),_=async T=>{if(T.preventDefault(),!c){v({type:"error",text:"Debe seleccionar el padre (semental)."});return}p(!0),v(null);try{await a({motherId:t.id,parturitionDate:s,sireId:c,parturitionType:"Simple",offspringCount:0,liveOffspring:[],parturitionOutcome:"Aborto",inducedLactation:d}),v({type:"success",text:"Aborto registrado con éxito."}),setTimeout(e,1500)}catch(E){v({type:"error",text:E.message||"No se pudo registrar el aborto."}),p(!1)}},S=async T=>{await i(T),u(T.id),x(!1)};return l.jsxs(l.Fragment,{children:[l.jsx(st,{isOpen:!0,onClose:n,title:`Registrar Aborto: ${t.id}`,children:l.jsxs("form",{onSubmit:_,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha del Aborto"}),l.jsx("input",{type:"date",value:s,onChange:T=>o(T.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Padre (Semental Involucrado)"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{value:c,onChange:T=>u(T.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg appearance-none",required:!0,children:[l.jsx("option",{value:"",children:"Seleccionar Padre..."}),r.map(T=>l.jsxs("option",{value:T.id,children:[T.name," (",T.id,")"]},T.id))]}),l.jsx("button",{type:"button",onClick:()=>x(!0),className:"flex-shrink-0 p-3 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",children:l.jsx(ur,{size:24})})]})]}),l.jsxs("div",{className:"bg-black/20 rounded-xl p-3 border border-zinc-700 flex items-center justify-between",children:[l.jsx("label",{htmlFor:"inducedLactation",className:"text-sm font-medium text-zinc-300",children:"¿Se iniciará lactancia post-aborto?"}),l.jsx("input",{id:"inducedLactation",type:"checkbox",checked:d,onChange:T=>f(T.target.checked),className:"form-checkbox h-5 w-5 bg-zinc-700 border-zinc-600 rounded text-brand-orange focus:ring-brand-orange focus:ring-offset-0"})]}),l.jsx("p",{className:"text-xs text-zinc-500 text-center px-4",children:'Marcar esta opción iniciará una lactancia "atípica" para poder registrar los pesajes.'}),y&&l.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${y.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[y.type==="success"?l.jsx(Jr,{size:18}):l.jsx(Ut,{size:18}),l.jsx("span",{children:y.text})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-brand-border",children:[l.jsx("button",{type:"button",onClick:n,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:h,className:"px-5 py-2 bg-brand-red hover:bg-red-700 text-white font-bold rounded-lg disabled:opacity-50",children:h?"Guardando...":"Confirmar Aborto"})]})]})}),l.jsx(fE,{isOpen:b,onClose:()=>x(!1),onSave:S})]})},yCe=(t,e,n,r,i)=>{const a=[];if(!t)return[];if(t.sex==="Hembra"){const s=e.filter(o=>o.goatId===t.id&&o.status!=="finalizada").sort((o,c)=>new Date(c.parturitionDate).getTime()-new Date(o.parturitionDate).getTime())[0];s&&(s.status==="activa"?a.push(Bt.MILKING):s.status==="en-secado"?a.push(Bt.DRYING_OFF):s.status==="seca"&&a.push(Bt.DRY))}if(t.reproductiveStatus==="Preñada"?a.push(Bt.PREGNANT):t.reproductiveStatus==="En Servicio"?n.some(o=>o.femaleId===t.id&&o.sireLotId===t.sireLotId)?a.push(Bt.IN_SERVICE_CONFIRMED):a.push(Bt.IN_SERVICE):(t.reproductiveStatus==="Vacía"||t.reproductiveStatus==="Post-Parto")&&a.push(Bt.EMPTY),t.sex==="Macho"){const s=i.filter(u=>u.status==="Activo"),o=new Set(s.map(u=>u.id));r.some(u=>u.sireId===t.id&&o.has(u.seasonId))&&a.push(Bt.SIRE_IN_SERVICE)}return Array.from(new Set(a))},xCe=({animal:t,isSelected:e,onSelect:n})=>l.jsx("div",{onClick:()=>n(t.id),className:`w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border flex justify-between items-center transition-all cursor-pointer ${e?"border-brand-orange ring-2 ring-brand-orange/50":"border-brand-border"}`,children:l.jsxs("div",{className:"flex items-center gap-4",children:[e?l.jsx(xA,{className:"text-brand-orange flex-shrink-0",size:24}):l.jsx(bA,{className:"text-zinc-500 flex-shrink-0",size:24}),l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),l.jsxs("p",{className:"text-sm text-zinc-400",children:[t.sex," | ",t.formattedAge]})]})]})});function bCe({lotName:t,onBack:e,navigateTo:n}){const{animals:r,parturitions:i,serviceRecords:a,breedingSeasons:s,sireLots:o,updateAnimal:c}=Ge(),[u,d]=k.useState(!1),[f,h]=k.useState(!1),[p,y]=k.useState(new Set),[v,b]=k.useState(!1),[x,_]=k.useState(null),[S,T]=k.useState(!1),[E,A]=k.useState(null),j=k.useMemo(()=>r.filter(B=>(B.location||"Sin Asignar")===t).sort((B,F)=>B.id.localeCompare(F.id)).map(B=>({...B,formattedAge:$a(B.birthDate),statusObjects:yCe(B,i,a,o,s)})),[r,t,i,a,o,s]),P=k.useRef(null),O=rV({count:j.length,getScrollElement:()=>P.current,estimateSize:()=>92,overscan:5}),D=B=>{y(F=>{const q=new Set(F);return q.has(B)?q.delete(B):q.add(B),q})},M=async()=>{const B=Array.from(p).map(F=>c(F,{location:""}));try{await Promise.all(B),h(!1),y(new Set)}catch(F){console.error("Error al quitar animales del lote:",F)}},z=async B=>{if(!t)return;const F=B.map(q=>c(q,{location:t}));await Promise.all(F),d(!1)},L=B=>{if(!B)return[];const F=[];return B.sex==="Hembra"&&(F.push({label:"Declarar Parto",icon:xl,onClick:()=>{T(!1),A("parturition")}}),F.push({label:"Declarar Aborto",icon:bx,onClick:()=>{T(!1),A("abortion")},color:"text-yellow-400"}),F.push({label:"Acciones de Leche",icon:cu,onClick:()=>{T(!1),A("milkWeighing")}})),F.push({label:"Agregar Peso Corporal",icon:El,onClick:()=>{T(!1),A("bodyWeighing")}}),F.push({label:"Dar de Baja",icon:Al,onClick:()=>{T(!1),A("decommission")},color:"text-brand-red"}),F},te=B=>{_(B),T(!0)},X=()=>{A(null),_(null)},W=async B=>{if(!x)return;const F={status:B.reason,isReference:!0,endDate:B.date};B.reason==="Venta"&&Object.assign(F,{salePrice:B.salePrice,saleBuyer:B.saleBuyer,salePurpose:B.salePurpose}),B.reason==="Muerte"&&(F.deathReason=B.deathReason),B.reason==="Descarte"&&Object.assign(F,{cullReason:B.cullReason,cullReasonDetails:B.cullReasonDetails}),await c(x.id,F),X()};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-24 animate-fade-in",children:[l.jsxs("header",{className:"flex items-center justify-between pt-8 pb-4 px-4",children:[l.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(Zn,{size:24})}),l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:t}),l.jsxs("p",{className:"text-lg text-zinc-400",children:[j.length," ",j.length===1?"animal":"animales"]})]}),f?l.jsx("button",{onClick:()=>{h(!1),y(new Set)},className:"text-brand-orange font-semibold px-2 py-1",children:"Listo"}):l.jsx("button",{onClick:()=>h(!0),className:"p-2 -mr-2 text-zinc-400 hover:text-white",children:l.jsx(Tl,{size:20})})]}),!f&&l.jsx("div",{className:"px-4",children:l.jsxs("button",{onClick:()=>d(!0),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-4 px-4 rounded-xl transition-colors text-lg",children:[l.jsx(ur,{size:20})," Añadir Animales"]})}),l.jsx("div",{ref:P,className:"pt-4",style:{height:"calc(100vh - 250px)",overflowY:"auto"},children:j.length>0?l.jsx("div",{style:{height:`${O.getTotalSize()}px`,width:"100%",position:"relative"},children:O.getVirtualItems().map(B=>{const F=j[B.index];return l.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${B.size}px`,transform:`translateY(${B.start}px)`,padding:"0 1rem 0.5rem 1rem"},children:f?l.jsx(xCe,{animal:F,isSelected:p.has(F.id),onSelect:D}):l.jsx(aV,{animal:F,onSelect:q=>n({name:"rebano-profile",animalId:q}),onOpenActions:te})},B.key)})}):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl mx-4",children:l.jsx("p",{className:"text-zinc-500",children:"Este lote está vacío."})})})]}),f&&p.size>0&&l.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-black/50 backdrop-blur-md p-4 border-t border-brand-border animate-slide-up z-20",children:l.jsxs("div",{className:"max-w-2xl mx-auto flex gap-4",children:[l.jsxs("button",{onClick:M,className:"flex-1 flex items-center justify-center gap-2 bg-brand-red text-white font-bold py-3 rounded-xl",children:[l.jsx(fo,{size:18})," Quitar del Lote"]}),l.jsxs("button",{onClick:()=>b(!0),className:"flex-1 flex items-center justify-center gap-2 bg-brand-blue text-white font-bold py-3 rounded-xl",children:[l.jsx(SL,{size:18})," Transferir"]})]})}),l.jsx(_b,{isOpen:u,onClose:()=>d(!1),onSelect:z,animals:r,parturitions:i,serviceRecords:a,breedingSeasons:s,sireLots:o,title:`Añadir animales a: ${t}`}),l.jsx(WAe,{isOpen:v,onClose:()=>{b(!1),h(!1),y(new Set)},animalsToTransfer:Array.from(p),fromLot:t}),l.jsx(Qd,{isOpen:S,onClose:()=>T(!1),title:`Acciones para ${(x==null?void 0:x.id)||""}`,actions:L(x)}),x&&l.jsxs(l.Fragment,{children:[E==="parturition"&&l.jsx(Qf,{isOpen:!0,onClose:X,motherId:x.id}),E==="abortion"&&l.jsx(CE,{animal:x,onCancel:X,onSaveSuccess:X}),E==="milkWeighing"&&l.jsx(PE,{animal:x,onCancel:X,onSaveSuccess:X}),E==="bodyWeighing"&&l.jsx(EE,{animal:x,onCancel:X,onSaveSuccess:X}),E==="decommission"&&l.jsx(TE,{animal:x,onCancel:X,onConfirm:W})]})]})}const wCe=({activeFilter:t,setActiveFilter:e})=>l.jsxs("div",{className:"flex bg-zinc-800 rounded-xl p-1 w-full",children:[l.jsx("button",{onClick:()=>e("Activo"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t==="Activo"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"Activos"}),l.jsx("button",{onClick:()=>e("Referencia"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors ${t==="Referencia"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:"De Referencia"})]}),_Ce=({activeFilter:t,setFilter:e})=>{const n=[{key:"all",label:"Todos"},{key:"Venta",label:"Vendidos"},{key:"Muerte",label:"Muertos"},{key:"Descarte",label:"Descartados"}];return l.jsxs("div",{className:"p-3 bg-black/20 rounded-lg",children:[l.jsx("label",{className:"block text-xs font-medium text-zinc-400 mb-2",children:"Filtrar por estado:"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(r=>l.jsx("button",{onClick:()=>e(r.key),className:`px-3 py-1 text-xs font-semibold rounded-full transition-colors ${t===r.key?"bg-brand-blue text-white":"bg-zinc-700 text-zinc-300"}`,children:r.label},r.key))})]})},$M=({isOpen:t,onClose:e,onSelect:n,animals:r,title:i,filterSex:a})=>{const[s,o]=k.useState(""),[c,u]=k.useState("Activo"),[d,f]=k.useState("all"),h=v=>{u(v),f("all")},p=k.useMemo(()=>r.filter(v=>{if(a&&v.sex!==a)return!1;const b=v.isReference||!1;return c==="Referencia"?b?d!=="all"?v.status===d:!0:!1:!b}).filter(v=>s?v.id.toLowerCase().includes(s.toLowerCase()):!0),[r,s,c,d,a]),y=v=>{n(v),o("")};return l.jsx(st,{isOpen:t,onClose:e,title:i,children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx(Kc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500"}),l.jsx("input",{type:"search",placeholder:"Buscar por ID...",value:s,onChange:v=>o(v.target.value),className:"w-full bg-zinc-800 border border-zinc-700 rounded-xl pl-10 pr-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-brand-orange"})]}),l.jsx(wCe,{activeFilter:c,setActiveFilter:h}),c==="Referencia"&&l.jsx("div",{className:"animate-fade-in",children:l.jsx(_Ce,{activeFilter:d,setFilter:f})}),l.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2 pr-2",children:p.length>0?p.map(v=>l.jsxs("button",{onClick:()=>y(v.id),className:"w-full text-left p-3 bg-zinc-800/50 hover:bg-zinc-700 rounded-lg transition-colors",children:[l.jsx("p",{className:"font-bold text-white",children:v.id}),l.jsxs("p",{className:"text-xs text-zinc-400",children:[v.sex," | ",$a(v.birthDate)," | Lote: ",v.location||"Sin Asignar"]})]},v.id)):l.jsx("p",{className:"text-center text-zinc-500 py-8",children:"No se encontraron animales con estos filtros."})})]})})},SCe=(t,e)=>{if(!t||!e)return"Indefinido";const n=new Date,r=new Date(t);if(isNaN(r.getTime()))return"Indefinido";const i=(n.getTime()-r.getTime())/(1e3*60*60*24);return e==="Hembra"?i<=60?"Cabrita":i<=365?"Cabritona":"Cabra Primípara":i<=60?"Cabrito":i<=365?"Macho de Levante":"Macho Cabrío (Reproductor)"},mv=({legend:t,children:e})=>l.jsxs("fieldset",{className:"bg-black/20 rounded-2xl p-4 border border-zinc-800/50 space-y-4",children:[l.jsx("legend",{className:"px-2 text-sm font-semibold text-zinc-400",children:t}),e]}),zM=({labelOn:t,labelOff:e,value:n,onChange:r})=>l.jsxs("div",{onClick:()=>r(!n),className:"w-full bg-zinc-800/80 rounded-xl p-1 flex cursor-pointer",children:[l.jsx("span",{className:`w-1/2 text-center font-semibold p-2 rounded-lg transition-all ${n?"bg-zinc-600 text-white":"text-zinc-400"}`,children:t}),l.jsx("span",{className:`w-1/2 text-center font-semibold p-2 rounded-lg transition-all ${n?"text-zinc-400":"bg-zinc-600 text-white"}`,children:e})]}),jCe=({onSaveSuccess:t,onCancel:e})=>{const{addAnimal:n,animals:r,lots:i}=Ge(),[a,s]=k.useState("Hembra"),[o,c]=k.useState(!1),[u,d]=k.useState(""),[f,h]=k.useState(""),[p,y]=k.useState(""),[v,b]=k.useState(""),[x,_]=k.useState(""),[S,T]=k.useState(""),[E,A]=k.useState(""),[j,P]=k.useState(""),[O,D]=k.useState(null),[M,z]=k.useState(!1),[L,te]=k.useState(!1),[X,W]=k.useState(!1),B=k.useMemo(()=>SCe(f,a),[f,a]),F=async q=>{if(q.preventDefault(),D(null),!u||!f){D({type:"error",text:"El ID y la Fecha de Nacimiento son obligatorios."});return}const ae={sex:a,isReference:o,birthDate:f,lifecycleStage:B,conceptionMethod:p,birthWeight:v?parseFloat(v):void 0,fatherId:x||void 0,motherId:S||void 0,racialComposition:E||void 0,location:j||"",status:"Activo",reproductiveStatus:"No Aplica"};try{await n({id:u.toUpperCase(),...ae}),D({type:"success",text:`Animal ${u.toUpperCase()} agregado con éxito.`}),setTimeout(t,1500)}catch(ce){D({type:"error",text:ce.message||"No se pudo guardar el animal."}),console.error("Error al guardar animal:",ce)}};return l.jsxs(l.Fragment,{children:[l.jsxs("form",{onSubmit:F,className:"w-full space-y-6",children:[l.jsxs(mv,{legend:"Categoría",children:[l.jsx(zM,{labelOn:"Hembra",labelOff:"Macho",value:a==="Hembra",onChange:q=>s(q?"Hembra":"Macho")}),l.jsx(zM,{labelOn:"Activo",labelOff:"Referencia",value:!o,onChange:q=>c(!q)})]}),l.jsxs(mv,{legend:"Identificación",children:[l.jsx("input",{autoFocus:!0,value:u,onChange:q=>d(q.target.value),placeholder:"Identificación del Animal (ID)",className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg",required:!0}),l.jsxs("button",{type:"button",onClick:()=>z(!0),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-left flex justify-between items-center",children:[l.jsx("span",{className:f?"text-white":"text-zinc-500",children:f?new Date(f+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"}):"Fecha de Nacimiento"}),l.jsx(ro,{className:"text-zinc-400",size:20})]}),l.jsxs("div",{className:"bg-zinc-800/80 p-3 rounded-xl text-lg flex justify-between items-center",children:[l.jsx("span",{className:"text-zinc-400",children:"Estado:"}),l.jsx("span",{className:"font-semibold text-white",children:B})]})]}),l.jsxs(mv,{legend:"Genética y Nacimiento",children:[l.jsxs("select",{value:p,onChange:q=>y(q.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg",children:[l.jsx("option",{value:"",children:"Origen / Concepción..."}),l.jsx("option",{value:"MN",children:"Monta Natural (MN)"}),l.jsx("option",{value:"IA",children:"Inseminación Artificial (IA)"}),l.jsx("option",{value:"TE",children:"Transferencia de Embriones (TE)"})]}),l.jsx("input",{type:"number",step:"0.1",value:v,onChange:q=>b(q.target.value),placeholder:"Peso al Nacer (Kg)",className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"}),l.jsxs("button",{type:"button",onClick:()=>W(!0),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-left flex justify-between items-center",children:[l.jsx("span",{className:x?"text-white":"text-zinc-500",children:x||"Padre (Semental)"}),l.jsx(Kc,{className:"text-zinc-400",size:20})]}),l.jsxs("button",{type:"button",onClick:()=>te(!0),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg text-left flex justify-between items-center",children:[l.jsx("span",{className:S?"text-white":"text-zinc-500",children:S||"Madre"}),l.jsx(Kc,{className:"text-zinc-400",size:20})]}),l.jsx("input",{value:E,onChange:q=>A(q.target.value),placeholder:"Composición Racial (Ej: 50%A 50%S)",className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),l.jsxs(mv,{legend:"Manejo",children:[l.jsxs("select",{value:j,onChange:q=>P(q.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg",children:[l.jsx("option",{value:"",children:"Ubicación / Lote (Opcional)..."}),i.map(q=>l.jsx("option",{value:q.name,children:q.name},q.id))]}),l.jsx("p",{className:"text-xs text-zinc-500 text-center px-4",children:'Si no se asigna un lote, se podrá encontrar en el filtro "Última Carga".'})]}),l.jsxs("div",{className:"space-y-3 pt-4",children:[O&&l.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${O.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[" ",O.type==="success"?l.jsx(Jr,{size:18}):l.jsx(Ut,{size:18})," ",l.jsx("span",{children:O.text})," "]}),l.jsx("button",{type:"submit",className:"w-full bg-brand-green hover:bg-green-600 text-white font-bold py-4 rounded-xl text-lg",children:"Guardar Animal"}),l.jsx("button",{type:"button",onClick:e,className:"w-full bg-zinc-700 hover:bg-zinc-600 text-white font-semibold py-3 rounded-xl text-lg",children:"Cancelar"})]})]}),l.jsx(st,{isOpen:M,onClose:()=>z(!1),title:"Seleccionar Fecha de Nacimiento",children:l.jsx("div",{className:"flex justify-center",children:l.jsx(Xf,{mode:"single",selected:f?new Date(f+"T00:00:00"):void 0,onSelect:q=>{q&&h(q.toISOString().split("T")[0]),z(!1)},captionLayout:"dropdown",fromYear:new Date().getFullYear()-20,toYear:new Date().getFullYear()})})}),l.jsx($M,{isOpen:L,onClose:()=>te(!1),onSelect:q=>{T(q),te(!1)},animals:r,title:"Seleccionar Madre",filterSex:"Hembra"}),l.jsx($M,{isOpen:X,onClose:()=>W(!1),onSelect:q=>{_(q),W(!1)},animals:r,title:"Seleccionar Padre",filterSex:"Macho"})]})};function ACe({onBack:t}){return l.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-md flex flex-col justify-end animate-fade-in",onClick:t,children:l.jsxs("div",{className:"bg-ios-modal-bg w-full max-w-4xl mx-auto h-[95vh] rounded-t-2xl flex flex-col animate-slide-up",onClick:e=>e.stopPropagation(),children:[l.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between p-4 border-b border-brand-border",children:[l.jsx("div",{className:"w-10"})," ",l.jsx("h1",{className:"text-xl font-bold tracking-tight text-white",children:"Ingresar Nuevo Animal"}),l.jsx("button",{onClick:t,className:"p-2 text-zinc-400 hover:text-white rounded-full hover:bg-zinc-700/50 transition-colors","aria-label":"Cerrar",children:l.jsx(Cl,{size:24})})]}),l.jsx("main",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:l.jsx("div",{className:"max-w-2xl mx-auto",children:l.jsx(jCe,{onSaveSuccess:t,onCancel:t})})})]})})}const PCe=(t,e)=>{const[n,r]=k.useState(""),i=k.useMemo(()=>n?t.filter(a=>e.some(s=>{const o=a[s];return typeof o=="string"||typeof o=="number"?o.toString().toLowerCase().includes(n.toLowerCase()):!1})):t,[t,n,e]);return{searchTerm:n,setSearchTerm:r,filteredItems:i}},ECe=({title:t,subtitle:e,searchTerm:n,setSearchTerm:r})=>{const[i,a]=k.useState(!1),s=k.useRef(null);k.useEffect(()=>{var c;i&&((c=s.current)==null||c.focus())},[i]);const o=()=>{r(""),a(!1)};return l.jsxs("header",{className:"text-center pt-4 pb-4 relative overflow-hidden",children:[l.jsxs("div",{className:`transition-transform duration-300 ${i?"-translate-y-20":"translate-y-0"}`,children:[l.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:t}),l.jsx("p",{className:"text-md text-zinc-400",children:e})]}),l.jsx("div",{className:`absolute inset-0 transition-transform duration-300 flex items-center pt-2 ${i?"translate-y-0":"translate-y-20"}`,children:l.jsx("input",{ref:s,type:"text",value:n,onChange:c=>r(c.target.value),placeholder:"Buscar por ID...",className:"w-full bg-zinc-800 text-white text-lg placeholder-zinc-500 p-3 rounded-xl border-2 border-transparent focus:border-amber-500 focus:ring-0 focus:outline-none"})}),l.jsx("div",{className:"absolute top-4 right-0 pt-1",children:l.jsx("button",{onClick:i?o:()=>a(!0),className:"p-2 text-zinc-400 hover:text-white transition-colors",children:i?l.jsx(Cl,{size:22}):l.jsx(Kc,{size:22})})})]})},TCe=(t,e,n,r,i)=>{const a=[];if(!t)return[];if(t.sex==="Hembra"){const s=e.filter(o=>o.goatId===t.id&&o.status!=="finalizada").sort((o,c)=>new Date(c.parturitionDate).getTime()-new Date(o.parturitionDate).getTime())[0];s&&(s.status==="activa"?a.push(Bt.MILKING):s.status==="en-secado"?a.push(Bt.DRYING_OFF):s.status==="seca"&&a.push(Bt.DRY))}if(t.reproductiveStatus==="Preñada"?a.push(Bt.PREGNANT):t.reproductiveStatus==="En Servicio"?n.some(o=>o.femaleId===t.id&&o.sireLotId===t.sireLotId)?a.push(Bt.IN_SERVICE_CONFIRMED):a.push(Bt.IN_SERVICE):(t.reproductiveStatus==="Vacía"||t.reproductiveStatus==="Post-Parto")&&a.push(Bt.EMPTY),t.sex==="Macho"){const s=i.filter(u=>u.status==="Activo"),o=new Set(s.map(u=>u.id));r.some(u=>u.sireId===t.id&&o.has(u.seasonId))&&a.push(Bt.SIRE_IN_SERVICE)}return Array.from(new Set(a))},CCe=["Cabrita","Cabritona","Cabra","Cabrito","Macho de Levante","Macho Cabrío"],NCe=({animal:t,onSelect:e,onOpenActions:n})=>{const r=fu(),i=k.useRef(!1),a=(s,o)=>{const c=o.offset.x,u=o.velocity.x;(c<-80/2||u<-500)&&n(t),r.start({x:0}),setTimeout(()=>{i.current=!1},100)};return l.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-brand-glass border border-brand-border",children:[l.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:l.jsxs("div",{className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[l.jsx(ur,{size:22}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Acciones"})]})}),l.jsx(po.div,{drag:"x",dragConstraints:{left:-80,right:0},dragElastic:.1,onDragStart:()=>{i.current=!0},onDragEnd:a,onTap:()=>{i.current||e(t.id)},animate:r,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg p-4",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),l.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:[t.sex," | ",t.formattedAge," | Lote: ",t.location||"Sin Asignar"]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(iV,{statuses:t.statusObjects}),l.jsx(Pr,{className:"text-zinc-600"})]})]})})]})},h1=({title:t,filters:e,activeFilter:n,onFilterChange:r})=>l.jsxs("div",{children:[t&&l.jsx("label",{className:"block text-sm font-semibold text-zinc-400 mb-2",children:t}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("button",{onClick:()=>r("all"),className:`px-3 py-1 text-xs font-semibold rounded-full transition-colors ${n==="all"||n==="ALL"?"bg-zinc-600 text-white":"bg-zinc-800/80 text-zinc-300"}`,children:"Todos"}),e.map(i=>{const a=i.Icon||null;return l.jsxs("button",{onClick:()=>r(i.key),className:`flex items-center gap-1.5 px-3 py-1 text-xs font-semibold rounded-full transition-colors ${n===i.key?"bg-brand-green text-white":"bg-zinc-800/80 text-zinc-300"}`,children:[a&&l.jsx(a,{size:14}),i.label]},i.key)})]})]});function kCe({navigateTo:t,locationFilter:e}){const{animals:n,parturitions:r,serviceRecords:i,breedingSeasons:a,sireLots:s,isLoading:o,updateAnimal:c}=Ge(),[u,d]=k.useState(null),[f,h]=k.useState(!1),[p,y]=k.useState(null),[v,b]=k.useState("Activos"),[x,_]=k.useState("all"),[S,T]=k.useState("Todos"),[E,A]=k.useState(!1),[j,P]=k.useState("ALL"),[O,D]=k.useState("ALL"),[M,z]=k.useState(!1),[L,te]=k.useState(!1),X=k.useMemo(()=>n.map(ke=>({...ke,statusObjects:TCe(ke,r,i,s,a),formattedAge:$a(ke.birthDate),zootecnicCategory:yu(ke,r)})),[n,r,i,s,a]),W=k.useMemo(()=>{let ke=v==="Activos"?X.filter(We=>!We.isReference):X.filter(We=>We.isReference);return E?ke.sort((We,Q)=>(Q.endDate?new Date(Q.endDate).getTime():Q.createdAt||0)-(We.endDate?new Date(We.endDate).getTime():We.createdAt||0)).slice(0,25):(e&&(ke=ke.filter(We=>(We.location||"Sin Asignar")===e)),v==="Activos"?(j!=="ALL"&&(ke=ke.filter(We=>We.statusObjects.some(Q=>Q.key===j))),O!=="ALL"&&(ke=ke.filter(We=>We.statusObjects.some(Q=>Q.key===O)))):x!=="all"&&(ke=ke.filter(We=>We.status===x)),S!=="Todos"&&(ke=ke.filter(We=>We.zootecnicCategory===S)),ke)},[X,v,E,e,S,j,O,x]),{searchTerm:B,setSearchTerm:F,filteredItems:q}=PCe(W,["id"]),ae=()=>{T("Todos"),A(!1),P("ALL"),D("ALL"),_("all"),F("")},ce=ke=>{if(!ke)return[];const We=[];return ke.sex==="Hembra"&&(We.push({label:"Declarar Parto",icon:xl,onClick:()=>{h(!1),y("parturition")}}),We.push({label:"Declarar Aborto",icon:bx,onClick:()=>{h(!1),y("abortion")},color:"text-yellow-400"}),We.push({label:"Acciones de Leche",icon:cu,onClick:()=>{h(!1),y("milkWeighing")}})),We.push({label:"Agregar Peso Corporal",icon:El,onClick:()=>{h(!1),y("bodyWeighing")}}),We.push({label:"Mover a Lote",icon:yA,onClick:()=>t({name:"rebano-profile",animalId:ke.id,openAction:"move"})}),We.push({label:"Dar de Baja",icon:Al,onClick:()=>{h(!1),y("decommission")},color:"text-brand-red"}),We},ve=ke=>{d(ke),h(!0)},we=()=>{y(null),d(null)},Le=async ke=>{if(!u)return;const We={status:ke.reason,isReference:!0,endDate:ke.date};ke.reason==="Venta"&&Object.assign(We,{salePrice:ke.salePrice,saleBuyer:ke.saleBuyer,salePurpose:ke.salePurpose}),ke.reason==="Muerte"&&(We.deathReason=ke.deathReason),ke.reason==="Descarte"&&Object.assign(We,{cullReason:ke.cullReason,cullReasonDetails:ke.cullReasonDetails}),await c(u.id,We),we()},Ye=k.useRef(null),et=rV({count:q.length,getScrollElement:()=>document.body,estimateSize:()=>104,overscan:5});return o?l.jsx("div",{className:"text-center p-10",children:l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando rebaño..."})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{ref:Ye,className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[l.jsx(ECe,{title:e||"Mi Rebaño",subtitle:`${q.length} animales en la vista`,searchTerm:B,setSearchTerm:F}),l.jsxs("div",{className:"space-y-4 px-4",children:[l.jsxs("div",{className:"flex bg-zinc-800 rounded-xl p-1 w-full",children:[l.jsxs("button",{onClick:()=>b("Activos"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors flex items-center justify-center gap-2 ${v==="Activos"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:[l.jsx(qc,{size:16})," Activos"]}),l.jsxs("button",{onClick:()=>b("Referencia"),className:`w-1/2 rounded-lg py-2 text-sm font-semibold transition-colors flex items-center justify-center gap-2 ${v==="Referencia"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:[l.jsx(wG,{size:16})," Referencia"]})]}),v==="Activos"?l.jsxs("div",{className:"space-y-4 animate-fade-in",children:[l.jsxs("button",{onClick:()=>t({name:"add-animal"}),className:"w-full flex items-center justify-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[l.jsx(ur,{size:18})," Ingresar Nuevo Animal"]}),l.jsxs("div",{className:"space-y-4 bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:()=>z(!M),className:"w-full flex justify-between items-center text-sm font-semibold text-zinc-400 hover:text-white transition-colors",children:[l.jsx("span",{children:"Filtros Productivos"}),l.jsx(M_,{className:`transition-transform ${M?"rotate-180":""}`,size:18})]}),M&&l.jsx("div",{className:"animate-fade-in",children:l.jsx(h1,{title:"",filters:["MILKING","DRYING_OFF","DRY"].map(ke=>Bt[ke]),activeFilter:j,onFilterChange:P})})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:()=>te(!L),className:"w-full flex justify-between items-center text-sm font-semibold text-zinc-400 hover:text-white transition-colors",children:[l.jsx("span",{children:"Filtros Reproductivos"}),l.jsx(M_,{className:`transition-transform ${L?"rotate-180":""}`,size:18})]}),L&&l.jsx("div",{className:"animate-fade-in",children:l.jsx(h1,{title:"",filters:["PREGNANT","IN_SERVICE_CONFIRMED","IN_SERVICE","EMPTY","SIRE_IN_SERVICE"].map(ke=>Bt[ke]),activeFilter:O,onFilterChange:D})})]})]})]}):l.jsx("div",{className:"space-y-4 bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border animate-fade-in",children:l.jsx(h1,{title:"Filtrar por Causa de Baja",filters:[{key:"Venta",label:"Venta"},{key:"Muerte",label:"Muerte"},{key:"Descarte",label:"Descarte"}],activeFilter:x,onFilterChange:_})}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("button",{onClick:()=>A(!0),title:"Última Carga",className:`flex items-center gap-2 py-1 px-3 text-sm font-semibold rounded-lg transition-colors ${E?"text-brand-orange":"text-zinc-400 hover:text-brand-orange"}`,children:[l.jsx(vL,{size:16})," Última Carga"]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("button",{onClick:()=>t({name:"manage-lots"}),className:"flex items-center gap-2 text-zinc-400 hover:text-brand-orange text-sm font-semibold py-1 px-3",children:[l.jsx(IG,{size:14})," Gestionar Lotes"]}),l.jsxs("button",{onClick:ae,className:"flex items-center gap-2 text-zinc-400 hover:text-brand-orange text-sm font-semibold py-1 px-3",children:[l.jsx(gA,{size:14})," Limpiar"]})]})]}),l.jsxs("select",{value:S,onChange:ke=>T(ke.target.value),className:"w-full bg-brand-glass p-3 rounded-xl text-white border border-brand-border focus:border-brand-orange focus:ring-0",children:[l.jsx("option",{value:"Todos",children:"Todas las Categorías Zootécnicas"}),CCe.map(ke=>l.jsx("option",{value:ke,children:ke},ke))]})]}),l.jsx("div",{className:"pt-4",children:q.length>0?l.jsx("div",{style:{height:`${et.getTotalSize()}px`,width:"100%",position:"relative"},children:et.getVirtualItems().map(ke=>{const We=q[ke.index];return l.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${ke.size}px`,transform:`translateY(${ke.start}px)`,padding:"0 1rem 0.5rem 1rem"},children:l.jsx(NCe,{animal:We,onSelect:()=>t({name:"rebano-profile",animalId:We.id}),onOpenActions:ve})},ke.key)})}):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl mx-4",children:l.jsx("p",{className:"text-zinc-400",children:B?`No se encontraron resultados para "${B}"`:"No hay animales que coincidan con los filtros."})})})]}),l.jsx(Qd,{isOpen:f,onClose:()=>h(!1),title:`Acciones para ${(u==null?void 0:u.id)||""}`,actions:ce(u)}),u&&l.jsxs(l.Fragment,{children:[p==="parturition"&&l.jsx(Qf,{isOpen:!0,onClose:we,motherId:u.id}),p==="milkWeighing"&&l.jsx(PE,{animal:u,onCancel:we,onSaveSuccess:we}),p==="bodyWeighing"&&l.jsx(EE,{animal:u,onCancel:we,onSaveSuccess:we}),p==="decommission"&&l.jsx(TE,{animal:u,onCancel:we,onConfirm:Le}),p==="abortion"&&l.jsx(CE,{animal:u,onCancel:we,onSaveSuccess:we})]})]})}const OCe=({isOpen:t,onClose:e})=>{const{addOrigin:n}=Ge(),[r,i]=k.useState(""),[a,s]=k.useState(""),o=async()=>{if(r.trim()===""){s("El nombre del origen no puede estar vacío.");return}try{await n(r),i(""),s(""),e()}catch(u){s("No se pudo guardar el origen."),console.error(u)}},c=()=>{i(""),s(""),e()};return l.jsx(st,{isOpen:t,onClose:c,title:"Crear Nuevo Origen",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-zinc-400",children:"Introduce el nombre de la ganadería o finca de origen."}),l.jsx("div",{children:l.jsx("input",{type:"text",value:r,onChange:u=>i(u.target.value),placeholder:"Ej: Agropecuaria La Bendición",className:"w-full bg-zinc-800 text-white p-3 rounded-xl focus:border-brand-orange focus:ring-0"})}),a&&l.jsx("p",{className:"text-sm text-brand-red",children:a}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[l.jsx("button",{onClick:c,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{onClick:o,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:"Guardar Origen"})]})]})})},ICe=t=>{const{events:e}=Ge();return k.useMemo(()=>t?e.filter(a=>a.animalId===t).sort((a,s)=>new Date(s.date).getTime()-new Date(a.date).getTime()):[],[e,t])},DCe=t=>{const{animals:e}=Ge(),n=k.useMemo(()=>{const i=new Map;return e.forEach(a=>i.set(a.id,a)),i},[e]);return k.useMemo(()=>{const i=(s,o)=>{if(!s||o>3)return;const c=n.get(s);if(!c)return;const u=i(c.fatherId,o+1),d=i(c.motherId,o+1);return{animal:c,sire:u,dam:d}};return i(t,0)||null},[t,n])},si=({animal:t,onClick:e})=>{const n="bg-zinc-800/80 p-2 rounded-lg border border-zinc-700/80 w-32 text-center shadow-md transition-colors text-xs";if(!t)return l.jsx("div",{className:`${n} bg-zinc-900/50 border-dashed`,children:l.jsx("p",{className:"font-semibold text-zinc-500",children:"Desconocido"})});const r=t.sex==="Hembra"?"text-pink-400":"text-blue-400";return l.jsxs("button",{onClick:()=>e(t.id),className:`${n} hover:border-brand-orange`,children:[l.jsx("p",{className:`font-bold truncate ${r}`,children:t.id}),l.jsx("p",{className:"text-zinc-400",children:t.sex})]})},MCe=({rootNode:t,onAncestorClick:e})=>{var i,a,s,o,c,u,d,f,h,p,y,v,b,x,_,S,T,E,A,j,P,O,D,M,z,L,te,X,W,B,F,q,ae,ce;if(!t)return l.jsx("div",{className:"text-center p-8 text-zinc-500",children:"No hay datos de genealogía suficientes para mostrar el pedigrí."});const n="border-zinc-600",r=l.jsx("div",{className:`w-4 border-t-2 ${n}`});return l.jsxs("div",{className:"flex items-center justify-center p-4 overflow-x-auto",children:[l.jsx("div",{className:"flex flex-col items-center justify-center",children:l.jsxs("div",{className:"bg-zinc-800/80 p-2 rounded-lg border border-zinc-700/80 w-32 text-center shadow-md text-xs",children:[l.jsx("p",{className:`font-bold truncate ${t.animal.sex==="Hembra"?"text-pink-400":"text-blue-400"}`,children:t.animal.id}),l.jsx("p",{className:"text-zinc-400",children:t.animal.sex})]})}),l.jsxs("div",{className:"flex flex-col items-center",children:[r,l.jsx("div",{className:`h-20 border-r-2 ${n}`}),r]}),l.jsxs("div",{className:"flex flex-col items-center justify-around",children:[l.jsx(si,{animal:(i=t.sire)==null?void 0:i.animal,onClick:e}),l.jsx(si,{animal:(a=t.dam)==null?void 0:a.animal,onClick:e})]}),l.jsxs("div",{className:"flex flex-col items-center justify-around",children:[l.jsxs("div",{className:"flex items-center",children:[r,l.jsx("div",{className:`h-10 border-r-2 ${n}`}),r]}),l.jsxs("div",{className:"flex items-center",children:[r,l.jsx("div",{className:`h-10 border-r-2 ${n}`}),r]})]}),l.jsxs("div",{className:"flex flex-col items-center justify-around gap-[24px]",children:[l.jsx(si,{animal:(o=(s=t.sire)==null?void 0:s.sire)==null?void 0:o.animal,onClick:e}),l.jsx(si,{animal:(u=(c=t.sire)==null?void 0:c.dam)==null?void 0:u.animal,onClick:e}),l.jsx(si,{animal:(f=(d=t.dam)==null?void 0:d.sire)==null?void 0:f.animal,onClick:e}),l.jsx(si,{animal:(p=(h=t.dam)==null?void 0:h.dam)==null?void 0:p.animal,onClick:e})]}),l.jsxs("div",{className:"flex flex-col items-center justify-around gap-[24px]",children:[l.jsxs("div",{className:"flex items-center",children:[" ",r," ",l.jsx("div",{className:`h-6 border-r-2 ${n}`})," ",r," "]}),l.jsxs("div",{className:"flex items-center",children:[" ",r," ",l.jsx("div",{className:`h-6 border-r-2 ${n}`})," ",r," "]}),l.jsxs("div",{className:"flex items-center",children:[" ",r," ",l.jsx("div",{className:`h-6 border-r-2 ${n}`})," ",r," "]}),l.jsxs("div",{className:"flex items-center",children:[" ",r," ",l.jsx("div",{className:`h-6 border-r-2 ${n}`})," ",r," "]})]}),l.jsxs("div",{className:"flex flex-col items-center justify-around gap-[8px]",children:[l.jsx(si,{animal:(b=(v=(y=t.sire)==null?void 0:y.sire)==null?void 0:v.sire)==null?void 0:b.animal,onClick:e}),l.jsx(si,{animal:(S=(_=(x=t.sire)==null?void 0:x.sire)==null?void 0:_.dam)==null?void 0:S.animal,onClick:e}),l.jsx(si,{animal:(A=(E=(T=t.sire)==null?void 0:T.dam)==null?void 0:E.sire)==null?void 0:A.animal,onClick:e}),l.jsx(si,{animal:(O=(P=(j=t.sire)==null?void 0:j.dam)==null?void 0:P.dam)==null?void 0:O.animal,onClick:e}),l.jsx(si,{animal:(z=(M=(D=t.dam)==null?void 0:D.sire)==null?void 0:M.sire)==null?void 0:z.animal,onClick:e}),l.jsx(si,{animal:(X=(te=(L=t.dam)==null?void 0:L.sire)==null?void 0:te.dam)==null?void 0:X.animal,onClick:e}),l.jsx(si,{animal:(F=(B=(W=t.dam)==null?void 0:W.dam)==null?void 0:B.sire)==null?void 0:F.animal,onClick:e}),l.jsx(si,{animal:(ce=(ae=(q=t.dam)==null?void 0:q.dam)==null?void 0:ae.dam)==null?void 0:ce.animal,onClick:e})]})]})},RCe=({animalId:t,birthDate:e,onSave:n,onCancel:r})=>{const[i,a]=k.useState(new Date().toISOString().split("T")[0]),[s,o]=k.useState(""),[c,u]=k.useState(null),[d,f]=k.useState(!1),h=async p=>{p.preventDefault(),u(null),f(!0);const y=parseFloat(s);if(!i||!s||isNaN(y)||y<=0){u("Por favor, introduce una fecha y un peso válidos."),f(!1);return}if(new Date(i)<new Date(e)){u("La fecha de destete no puede ser anterior a la fecha de nacimiento."),f(!1);return}try{await n({weaningDate:i,weaningWeight:y})}catch(v){u("No se pudo guardar el registro de destete."),console.error(v)}finally{f(!1)}};return l.jsxs("form",{onSubmit:h,className:"space-y-4",children:[l.jsxs("p",{className:"text-sm text-zinc-400",children:["Registra la fecha y el peso al momento de separar a ",l.jsx("span",{className:"font-bold text-white",children:t})," de su madre."]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"weaningDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Destete"}),l.jsx("input",{id:"weaningDate",type:"date",value:i,onChange:p=>a(p.target.value),className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl text-lg",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"weaningWeight",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Peso al Destete (Kg)"}),l.jsx("input",{id:"weaningWeight",type:"number",step:"0.1",value:s,onChange:p=>o(p.target.value),placeholder:"Ej: 15.5",className:"w-full bg-zinc-800/80 text-white p-3 rounded-xl text-lg",required:!0})]}),c&&l.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[l.jsx(Ut,{size:18}),l.jsx("span",{children:c})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:r,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:d,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:d?"Guardando...":"Guardar Destete"})]})]})},Is=({label:t,value:e,isEditing:n,children:r})=>l.jsxs("div",{children:[l.jsx("dt",{className:"text-sm font-medium text-zinc-400",children:t}),n&&r?r:l.jsx("dd",{className:"mt-1 text-lg font-semibold text-white",children:e||"N/A"})]}),LCe=({animalId:t,navigateTo:e})=>{const n=DCe(t);return l.jsx(MCe,{rootNode:n,onAncestorClick:r=>e({name:"rebano-profile",animalId:r})})},$Ce={Nacimiento:{icon:mL,color:"bg-green-500/20 text-brand-green"},Movimiento:{icon:yA,color:"bg-blue-500/20 text-brand-blue"},"Cambio de Estado":{icon:LG,color:"bg-yellow-500/20 text-amber-400"},"Pesaje Lechero":{icon:EG,color:"bg-gray-500/20 text-gray-300"},"Pesaje Corporal":{icon:El,color:"bg-purple-500/20 text-purple-300"},Servicio:{icon:wx,color:"bg-pink-500/20 text-pink-300"},Tratamiento:{icon:_x,color:"bg-red-500/20 text-brand-red"},Diagnóstico:{icon:Jr,color:"bg-teal-500/20 text-teal-300"}},zCe=({animalId:t})=>{const e=ICe(t);return e.length===0?l.jsx("div",{className:"text-center p-8 text-zinc-500",children:"Este animal no tiene eventos registrados."}):l.jsx("div",{className:"space-y-3",children:e.map(n=>{const r=$Ce[n.type]||{icon:mA,color:"bg-gray-500/20 text-gray-300"},i=r.icon;return l.jsxs("div",{className:"flex items-start gap-4 p-3 bg-black/20 rounded-lg",children:[l.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${r.color}`,children:l.jsx(i,{size:20})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-white",children:n.type}),l.jsx("p",{className:"text-sm text-zinc-300",children:n.details}),l.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:new Date(n.date+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"})})]})]},n.id)})})},FCe=({offspring:t,navigateTo:e})=>t.length===0?l.jsx("div",{className:"text-center p-8 text-zinc-500",children:"Este animal no tiene descendencia registrada."}):l.jsx("div",{className:"space-y-2",children:t.map(n=>l.jsxs("button",{onClick:()=>e({name:"rebano-profile",animalId:n.id}),className:"w-full text-left p-3 bg-black/20 hover:bg-zinc-800/60 rounded-lg transition-colors flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:n.id}),l.jsxs("p",{className:"text-sm text-zinc-400",children:[n.sex," | ",$a(n.birthDate)," | Lote: ",n.location||"Sin Asignar"]})]}),l.jsx(Pr,{className:"text-zinc-600"})]},n.id))}),VCe=({animal:t,parturitions:e,isEditing:n,editedData:r,setEditedData:i,origins:a,onAddOriginClick:s,onLocationClick:o})=>{const c=(f,h)=>{i(p=>({...p,[f]:h}))},u=$a(t.birthDate),d=yu(t,e);return l.jsxs("dl",{className:"grid grid-cols-2 gap-x-4 gap-y-6",children:[l.jsx(Is,{label:"ID",value:t.id}),l.jsx(Is,{label:"Sexo",value:t.sex}),l.jsx(Is,{label:"Fecha Nacimiento",value:t.birthDate,isEditing:n,children:l.jsx("input",{type:"date",value:r.birthDate||"",onChange:f=>c("birthDate",f.target.value),className:"w-full bg-zinc-700 p-2 rounded-md mt-1"})}),l.jsx(Is,{label:"Edad",value:u}),l.jsx(Is,{label:"Ubicación / Lote",children:!n&&l.jsx("dd",{className:"mt-1 text-lg",children:l.jsx("button",{onClick:o,className:"font-semibold text-brand-orange hover:underline text-left",children:t.location||"Sin Asignar"})})}),l.jsx(Is,{label:"Estado Fisiológico",value:d}),l.jsx(Is,{label:"Origen",value:t.origin,isEditing:n,children:l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsxs("select",{value:r.origin||"",onChange:f=>c("origin",f.target.value),className:"w-full bg-zinc-700 p-2 rounded-md",children:[l.jsx("option",{value:"Finca Masparrito",children:"Finca Masparrito"}),a.map(f=>l.jsx("option",{value:f.name,children:f.name},f.id))]}),l.jsx("button",{type:"button",onClick:s,className:"p-2 bg-brand-orange hover:bg-orange-600 text-white rounded-md",children:l.jsx(Pl,{size:20})})]})}),t.weaningDate&&l.jsx(Is,{label:"Fecha de Destete",value:new Date(t.weaningDate+"T00:00:00").toLocaleDateString("es-VE")}),t.weaningWeight&&l.jsx(Is,{label:"Peso al Destete",value:`${t.weaningWeight} Kg`})]})},BCe=({isOpen:t,onClose:e,onConfirm:n,reason:r})=>{const[i,a]=k.useState(new Date().toISOString().split("T")[0]),[s,o]=k.useState(""),[c,u]=k.useState(""),[d,f]=k.useState("Cría"),[h,p]=k.useState(""),[y,v]=k.useState(),[b,x]=k.useState("");if(!t||!r)return null;const _=["Baja producción","Bajo índice de crecimiento","Inflamación articular","Linfadenitis caseosa","Sospecha de otras enfermedades"],S=()=>{n({date:i,price:parseFloat(s)||void 0,buyer:c||void 0,purpose:d,reason:h||void 0,cullReason:y||void 0,cullDetails:y==="Sospecha de otras enfermedades"?b:void 0})};return l.jsx(st,{isOpen:t,onClose:e,title:`Dar de baja por ${r}`,children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha"}),l.jsx("input",{type:"date",value:i,onChange:T=>a(T.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg"})]}),r==="Venta"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Precio de Venta (Opcional)"}),l.jsx("input",{type:"number",value:s,onChange:T=>o(T.target.value),placeholder:"0.00",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Comprador (Opcional)"}),l.jsx("input",{type:"text",value:c,onChange:T=>u(T.target.value),placeholder:"Nombre del comprador",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fin de la Venta"}),l.jsxs("select",{value:d,onChange:T=>f(T.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",children:[l.jsx("option",{value:"Cría",children:"Cría"}),l.jsx("option",{value:"Carne",children:"Carne"})]})]})]}),r==="Muerte"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Causa / Descripción de la Muerte"}),l.jsx("textarea",{value:h,onChange:T=>p(T.target.value),placeholder:"Ej: Infección, ataque de depredador...",className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",rows:3})]}),r==="Descarte"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Causa del Descarte"}),l.jsxs("select",{value:y||"",onChange:T=>v(T.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",children:[l.jsx("option",{value:"",children:"Seleccione una causa..."}),_.map(T=>l.jsx("option",{value:T,children:T},T))]})]}),y==="Sospecha de otras enfermedades"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Especificar Sospecha / Síntomas"}),l.jsx("input",{type:"text",value:b,onChange:T=>x(T.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg"})]})]}),l.jsx("p",{className:"text-sm text-zinc-400",children:'El animal será movido a la lista de "Referencia". Esta acción no se puede deshacer.'}),l.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[l.jsx("button",{onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{onClick:S,className:"px-5 py-2 bg-brand-red hover:bg-red-700 text-white font-bold rounded-lg",children:"Confirmar Baja"})]})]})})},UCe=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i})=>t?l.jsx(st,{isOpen:t,onClose:e,title:r,children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("p",{className:"text-zinc-300",children:i}),l.jsxs("div",{className:"flex justify-end gap-4",children:[l.jsx("button",{onClick:e,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-6 rounded-lg",children:"Cancelar"}),l.jsx("button",{onClick:()=>{n(),e()},className:"bg-brand-red hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg",children:"Confirmar"})]})]})}):null;function WCe({animalId:t,onBack:e,navigateTo:n}){const{animals:r,lots:i,origins:a,parturitions:s,updateAnimal:o,deleteAnimalPermanently:c}=Ge(),[u,d]=k.useState("main"),[f,h]=k.useState(!1),[p,y]=k.useState({}),[v,b]=k.useState("idle"),[x,_]=k.useState(!1),[S,T]=k.useState(!1),[E,A]=k.useState(!1),[j,P]=k.useState(!1),[O,D]=k.useState(""),[M,z]=k.useState(!1),[L,te]=k.useState(null),[X,W]=k.useState(!1),[B,F]=k.useState(!1),[q,ae]=k.useState(!1),ce=k.useMemo(()=>r.find(Oe=>Oe.id===t),[r,t]),ve=k.useMemo(()=>ce?ce.sex==="Hembra"?r.filter(Oe=>Oe.motherId===ce.id).sort((Oe,Ze)=>new Date(Ze.birthDate).getTime()-new Date(Oe.birthDate).getTime()):ce.sex==="Macho"?r.filter(Oe=>Oe.fatherId===ce.id).sort((Oe,Ze)=>new Date(Ze.birthDate).getTime()-new Date(Oe.birthDate).getTime()):[]:[],[r,ce]),we=k.useMemo(()=>ce?yu(ce,s):"",[ce,s]),Le=(ce==null?void 0:ce.breedingFailures)||0,Ye=Le>=2?"border-brand-red ring-2 ring-brand-red/80":"border-brand-border";k.useEffect(()=>{ce&&(f&&y({birthDate:ce.birthDate,origin:ce.origin}),D(ce.location||""))},[ce,f]);const et=async()=>{if(ce){b("saving");try{await o(ce.id,p),b("success"),setTimeout(()=>{h(!1),b("idle")},1500)}catch(Oe){console.error("Error al actualizar el animal:",Oe),b("idle")}}},ke=()=>{h(!1)},We=async()=>{if(ce)try{await o(ce.id,{location:O}),P(!1)}catch(Oe){console.error("Error al actualizar la ubicación:",Oe)}},Q=async Oe=>{if(!ce||!L)return;const Ze={status:L,isReference:!0,endDate:Oe.date};L==="Venta"&&(Oe.price&&(Ze.salePrice=Oe.price),Oe.buyer&&(Ze.saleBuyer=Oe.buyer),Oe.purpose&&(Ze.salePurpose=Oe.purpose)),L==="Muerte"&&Oe.reason&&(Ze.deathReason=Oe.reason),L==="Descarte"&&(Oe.cullReason&&(Ze.cullReason=Oe.cullReason),Oe.cullDetails&&(Ze.cullReasonDetails=Oe.cullDetails)),await o(ce.id,Ze),te(null),e()},Pe=async()=>{ce&&await o(ce.id,{isReference:!1,status:"Activo"})},xe=async()=>{ce&&(await c(ce.id),e())},de=async Oe=>{ce&&(await o(ce.id,{weaningDate:Oe.weaningDate,weaningWeight:Oe.weaningWeight}),ae(!1))},pt=[{label:"Por Venta",icon:Wc,onClick:()=>te("Venta")},{label:"Por Muerte",icon:bx,onClick:()=>te("Muerte"),color:"text-brand-red"},{label:"Por Descarte",icon:cG,onClick:()=>te("Descarte"),color:"text-brand-red"}],nt=[{label:"Reintegrar a Activos",icon:NG,onClick:Pe},{label:"Eliminar Permanentemente",icon:fo,onClick:()=>F(!0),color:"text-brand-red"}];return ce?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in pb-12",children:[l.jsxs("header",{className:`bg-brand-glass backdrop-blur-xl rounded-b-2xl p-4 border-b border-x sticky top-0 z-10 transition-all ${Ye}`,children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(Zn,{size:24})}),l.jsxs("h1",{className:"text-2xl font-bold tracking-tight text-white flex items-center gap-2",children:[ce.id," ",Le===1&&l.jsx("span",{title:"1 fallo reproductivo reportado",children:l.jsx(Ut,{className:"text-yellow-400",size:20})})," ",Le>=2&&l.jsx("span",{title:`${Le} fallos reproductivos reportados`,children:l.jsx(Ut,{className:"text-brand-red",size:20})})]}),l.jsx("div",{className:"w-8"})]}),l.jsx("p",{className:"text-center text-brand-orange font-semibold text-sm -mt-1 mb-3 uppercase tracking-wider",children:ce.isReference?"Referencia":ce.location||"Sin Asignar"}),l.jsxs("div",{className:"flex justify-around bg-black/20 rounded-xl p-1",children:[ce.sex==="Hembra"&&l.jsxs(l.Fragment,{children:[" ",l.jsxs("button",{onClick:()=>n({name:"lactation-profile",animalId:ce.id}),className:"flex flex-col items-center p-2 text-blue-300 hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[l.jsx(cu,{size:22}),l.jsx("span",{className:"text-xs mt-1",children:"Leche"})]})," ",l.jsxs("button",{onClick:()=>A(!0),disabled:ce.isReference,className:"flex flex-col items-center p-2 text-pink-400 hover:bg-zinc-700/50 w-full rounded-lg transition-colors disabled:opacity-40 disabled:cursor-not-allowed",children:[l.jsx(mL,{size:22}),l.jsx("span",{className:"text-xs mt-1",children:"Parto"})]})," "]}),(we==="Cabrita"||we==="Cabrito")&&!ce.weaningDate&&!ce.isReference&&l.jsxs("button",{onClick:()=>ae(!0),className:"flex flex-col items-center p-2 text-yellow-300 hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[l.jsx(lG,{size:22}),l.jsx("span",{className:"text-xs mt-1",children:"Destetar"})]}),l.jsxs("button",{onClick:()=>n({name:"growth-profile",animalId:ce.id}),className:"flex flex-col items-center p-2 text-brand-green hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[l.jsx(El,{size:22}),l.jsx("span",{className:"text-xs mt-1",children:"Peso"})]}),l.jsxs("button",{onClick:()=>alert("Función en desarrollo"),disabled:ce.isReference,className:"flex flex-col items-center p-2 text-teal-300 hover:bg-zinc-700/50 w-full rounded-lg transition-colors disabled:opacity-40 disabled:cursor-not-allowed",children:[l.jsx(_x,{size:22}),l.jsx("span",{className:"text-xs mt-1",children:"Sanidad"})]}),l.jsxs("button",{onClick:()=>ce.isReference?W(!0):P(!0),className:"flex flex-col items-center p-2 text-brand-blue hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[l.jsx(OG,{size:22}),l.jsx("span",{className:"text-xs mt-1",children:"Mover"})]}),!ce.isReference&&l.jsxs("button",{onClick:()=>z(!0),className:"flex flex-col items-center p-2 text-amber-400 hover:bg-zinc-700/50 w-full rounded-lg transition-colors",children:[l.jsx(Al,{size:22}),l.jsx("span",{className:"text-xs mt-1",children:"Dar de baja"})]}),l.jsxs("button",{onClick:()=>h(!f),disabled:ce.isReference,className:`flex flex-col items-center p-2 w-full rounded-lg transition-colors ${f?"text-green-400":"text-brand-orange"} hover:bg-zinc-700/50 disabled:opacity-40 disabled:cursor-not-allowed`,children:[l.jsx(Tl,{size:22}),l.jsx("span",{className:"text-xs mt-1",children:"Editar"})]})]})]}),l.jsxs("main",{className:"p-4 space-y-4",children:[l.jsxs("div",{className:"flex bg-brand-glass rounded-xl p-1 border border-brand-border",children:[l.jsx("button",{onClick:()=>d("main"),className:`w-1/4 py-2 text-sm font-semibold rounded-lg transition-colors ${u==="main"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Ficha"}),l.jsx("button",{onClick:()=>d("genetics"),className:`w-1/4 py-2 text-sm font-semibold rounded-lg transition-colors ${u==="genetics"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Genealogía"}),l.jsx("button",{onClick:()=>d("progeny"),className:`w-1/4 py-2 text-sm font-semibold rounded-lg transition-colors ${u==="progeny"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Progenie"}),l.jsx("button",{onClick:()=>d("events"),className:`w-1/4 py-2 text-sm font-semibold rounded-lg transition-colors ${u==="events"?"bg-zinc-700 text-white":"text-zinc-400"}`,children:"Eventos"})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[u==="main"&&l.jsxs("div",{className:"space-y-6",children:[" ",l.jsx(VCe,{animal:ce,parturitions:s,isEditing:f,editedData:p,setEditedData:y,origins:a,onAddOriginClick:()=>T(!0),onLocationClick:()=>P(!0)})," ",f&&l.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-zinc-700",children:[" ",l.jsxs("button",{onClick:ke,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-6 rounded-lg flex items-center gap-2",children:[l.jsx(Cl,{size:18})," Cancelar"]})," ",l.jsxs("button",{onClick:et,disabled:v!=="idle",className:"bg-brand-green hover:bg-green-600 text-white font-bold py-2 px-6 rounded-lg flex items-center gap-2 disabled:opacity-50 min-w-[130px] justify-center",children:[" ",v==="saving"&&l.jsx("span",{className:"animate-spin h-5 w-5 border-2 border-current border-t-transparent rounded-full"})," ",v==="success"&&l.jsx(Jr,{size:18})," ",v==="idle"&&l.jsx(rg,{size:18})," ",l.jsx("span",{className:"ml-2",children:v==="success"?"Guardado":"Guardar"})," "]})," "]})," "]}),u==="genetics"&&l.jsx(LCe,{animalId:ce.id,navigateTo:n}),u==="progeny"&&l.jsx(FCe,{offspring:ve,navigateTo:n}),u==="events"&&l.jsx(zCe,{animalId:ce.id})]})]})]}),l.jsx(st,{isOpen:j,onClose:()=>P(!1),title:`Cambiar Lote para ${ce.id}`,children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Seleccionar nuevo lote"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{value:O,onChange:Oe=>D(Oe.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl text-lg",children:[l.jsx("option",{value:"",children:"Sin Asignar"}),i.map(Oe=>l.jsx("option",{value:Oe.name,children:Oe.name},Oe.id))]}),l.jsx("button",{type:"button",onClick:()=>{P(!1),_(!0)},className:"p-3 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",children:l.jsx(Pl,{size:24})})]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[l.jsx("button",{onClick:()=>P(!1),className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{onClick:We,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg",children:"Guardar Cambio"})]})]})}),l.jsx(Qd,{isOpen:M,onClose:()=>z(!1),title:"Causa de la Baja",actions:pt}),l.jsx(BCe,{isOpen:!!L,onClose:()=>te(null),onConfirm:Q,reason:L}),l.jsx(Qd,{isOpen:X,onClose:()=>W(!1),title:"Acciones de Referencia",actions:nt}),l.jsx(UCe,{isOpen:B,onClose:()=>F(!1),onConfirm:xe,title:`¿Eliminar ${ce.id} Permanentemente?`,message:"Esta acción borrará el registro del animal de la base de datos para siempre y no se puede deshacer."}),l.jsx(CL,{isOpen:x,onClose:()=>_(!1)}),l.jsx(OCe,{isOpen:S,onClose:()=>T(!1)}),l.jsx(Qf,{isOpen:E,onClose:()=>A(!1),motherId:ce.id}),l.jsx(st,{isOpen:q,onClose:()=>ae(!1),title:`Registrar Destete de ${ce.id}`,children:l.jsx(RCe,{animalId:ce.id,birthDate:ce.birthDate,onSave:de,onCancel:()=>ae(!1)})})]}):l.jsxs("div",{className:"text-center p-10",children:[l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Animal no encontrado."}),l.jsx("button",{onClick:e,className:"mt-4 text-brand-orange",children:"Volver"})]})}const KCe=({animal:t,parturition:e,onSelectAnimal:n})=>l.jsxs("div",{onClick:()=>n(t.id),className:"w-full cursor-pointer text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-amber-400 transition-colors",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),l.jsxs("p",{className:"text-sm text-zinc-400",children:[e.status==="en-secado"&&`Secado desde: ${new Date(e.dryingStartDate).toLocaleDateString()}`,e.status==="seca"&&"Lactancia finalizada"]})]}),l.jsx(Pr,{className:"text-zinc-600"})]});function qCe({onSelectAnimal:t,defaultView:e="drying"}){const{animals:n,parturitions:r,isLoading:i}=Ge(),[a,s]=k.useState(e);k.useEffect(()=>{s(e)},[e]);const o=k.useMemo(()=>{const u=h=>n.find(p=>p.id===h),d=r.filter(h=>h.status==="en-secado").map(h=>({animal:u(h.goatId),parturition:h})).filter(h=>h.animal),f=r.filter(h=>h.status==="seca").map(h=>({animal:u(h.goatId),parturition:h})).filter(h=>h.animal);return{drying:d,dry:f}},[n,r]),c=o[a]||[];return i?l.jsx("div",{className:"text-center p-10",children:l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando datos..."})}):l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[l.jsxs("header",{className:"text-center pt-8 pb-4",children:[l.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white",children:"Gestión de Rebaño"}),l.jsx("p",{className:"text-xl text-zinc-400",children:"Animales por Estado de Lactancia"})]}),l.jsx("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-2 border border-brand-border flex justify-between items-center",children:l.jsxs("div",{className:"flex bg-zinc-900/80 rounded-xl p-1 w-full",children:[l.jsxs("button",{onClick:()=>s("drying"),className:`w-1/2 px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors ${a==="drying"?"bg-blue-500 text-white":"text-zinc-300 hover:bg-zinc-700/50"}`,children:["En Secado (",o.drying.length,")"]}),l.jsxs("button",{onClick:()=>s("dry"),className:`w-1/2 px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors ${a==="dry"?"bg-gray-600 text-white":"text-zinc-300 hover:bg-zinc-700/50"}`,children:["Secas (",o.dry.length,")"]})]})}),l.jsx("div",{className:"space-y-2",children:c.length>0?c.map(({animal:u,parturition:d})=>l.jsx(KCe,{animal:u,parturition:d,onSelectAnimal:t},d.id)):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-400",children:"No hay animales en este estado."})})})]})}function HCe({onBack:t}){const{lots:e,animals:n,parturitions:r,serviceRecords:i,breedingSeasons:a,sireLots:s,addLot:o,deleteLot:c,updateAnimal:u}=Ge(),[d,f]=k.useState(""),[h,p]=k.useState(!1),[y,v]=k.useState(null),b=async()=>{d.trim()!==""&&(await o(d),f(""))},x=S=>{v(S),p(!0)},_=async S=>{if(!y)return;const T=S.map(E=>u(E,{location:y}));await Promise.all(T),p(!1),v(null)};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[l.jsxs("header",{className:"flex items-center pt-8 pb-4 px-4",children:[l.jsx("button",{onClick:t,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(Zn,{size:24})}),l.jsxs("div",{className:"text-center flex-grow",children:[l.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Gestionar Lotes Físicos"}),l.jsx("p",{className:"text-md text-zinc-400",children:"Crea ubicaciones y asigna animales"})]}),l.jsx("div",{className:"w-8"})]}),l.jsx("div",{className:"px-4",children:l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Añadir Nuevo Lote"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"text",value:d,onChange:S=>f(S.target.value),placeholder:"Nombre del lote...",className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"}),l.jsx("button",{onClick:b,className:"p-3 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",children:l.jsx(ur,{size:24})})]})]})}),l.jsxs("div",{className:"space-y-2 pt-4 px-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-zinc-300 px-2",children:"Lotes Existentes"}),e.length>0?e.map(S=>l.jsxs("div",{className:"w-full text-left bg-brand-glass rounded-2xl p-4 flex justify-between items-center",children:[l.jsx("p",{className:"font-semibold text-white",children:S.name}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>x(S.name),className:"flex items-center gap-2 bg-zinc-700/80 text-white font-semibold py-2 px-3 rounded-lg hover:bg-zinc-600/80 transition-colors",children:[l.jsx(qc,{size:16})," Asignar"]}),l.jsx("button",{onClick:()=>c(S.id),className:"p-2 text-zinc-500 hover:text-brand-red transition-colors",children:l.jsx(fo,{size:18})})]})]},S.id)):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-500",children:"Aún no has creado ningún lote."})})]})]}),l.jsx(_b,{isOpen:h,onClose:()=>p(!1),onSelect:_,animals:n,parturitions:r,serviceRecords:i,breedingSeasons:a,sireLots:s,title:`Asignar animales a: ${y}`})]})}const GCe=({onSave:t,onCancel:e})=>{const{fathers:n,addFather:r}=Ge(),[i,a]=k.useState(""),[s,o]=k.useState(!1),[c,u]=k.useState(null),[d,f]=k.useState(!1),h=async y=>{await r(y),a(y.id),o(!1)},p=async y=>{if(y.preventDefault(),u(null),!i){u("Debes seleccionar un semental.");return}f(!0);try{await t(i)}catch(v){u("No se pudo guardar el lote."),console.error(v),f(!1)}};return l.jsxs(l.Fragment,{children:[l.jsxs("form",{onSubmit:p,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"sire",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Seleccionar Semental"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("select",{id:"sire",value:i,onChange:y=>a(y.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0,children:[l.jsx("option",{value:"",children:"Elegir reproductor..."}),n.map(y=>l.jsxs("option",{value:y.id,children:[y.name," (",y.id,")"]},y.id))]}),l.jsx("button",{type:"button",onClick:()=>o(!0),className:"flex-shrink-0 p-3 bg-brand-orange hover:bg-orange-600 text-white rounded-xl",children:l.jsx(ur,{size:24})})]})]}),c&&l.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[l.jsx(Ut,{size:18}),l.jsx("span",{children:c})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:d||!i,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:d?"Guardando...":"Crear Lote"})]})]}),l.jsx(fE,{isOpen:s,onClose:()=>o(!1),onSave:h})]})},jb=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i})=>t?l.jsx(st,{isOpen:t,onClose:e,title:r,children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("p",{className:"text-zinc-300",children:i}),l.jsxs("div",{className:"flex justify-end gap-4",children:[l.jsx("button",{onClick:e,className:"bg-zinc-600 hover:bg-zinc-500 text-white font-bold py-2 px-6 rounded-lg transition-colors",children:"Cancelar"}),l.jsx("button",{onClick:()=>{n(),e()},className:"bg-brand-red hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg transition-colors",children:"Confirmar"})]})]})}):null,YCe=({isOpen:t,onClose:e,femalesToTransfer:n,originSeasonId:r,onConfirmTransfer:i})=>{const{breedingSeasons:a}=Ge(),[s,o]=k.useState(new Set),[c,u]=k.useState(""),[d,f]=k.useState(!1),[h,p]=k.useState("");H.useEffect(()=>{t&&(o(new Set(n.map(x=>x.id))),u(""),p(""))},[t,n]);const y=k.useMemo(()=>a.filter(x=>x.status==="Activo"&&x.id!==r),[a,r]),v=x=>{o(_=>{const S=new Set(_);return S.has(x)?S.delete(x):S.add(x),S})},b=async()=>{if(!c){p("Debes seleccionar una temporada de destino.");return}if(s.size===0){p("Debes seleccionar al menos una hembra para transferir.");return}f(!0),await i(c,Array.from(s)),f(!1),e()};return t?l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex justify-center items-center z-50 animate-fade-in",onClick:e,children:l.jsxs("div",{className:"bg-ios-modal-bg w-full max-w-lg m-4 rounded-2xl flex flex-col animate-slide-up",onClick:x=>x.stopPropagation(),children:[l.jsx("header",{className:"flex-shrink-0 p-4 border-b border-brand-border",children:l.jsx("h2",{className:"text-xl font-semibold text-white tracking-tight",children:"Transferir Hembras sin Servicio"})}),l.jsxs("main",{className:"p-6 space-y-4 overflow-y-auto",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:["Hembras a transferir (",s.size,"/",n.length,")"]}),l.jsx("div",{className:"max-h-40 overflow-y-auto space-y-2 p-2 bg-black/20 rounded-lg",children:n.map(x=>l.jsxs("div",{onClick:()=>v(x.id),className:"flex items-center gap-3 p-2 rounded-md hover:bg-zinc-700 cursor-pointer",children:[s.has(x.id)?l.jsx(xA,{className:"text-brand-orange flex-shrink-0"}):l.jsx(bA,{className:"text-zinc-500 flex-shrink-0"}),l.jsx("span",{className:"font-semibold text-white",children:x.id})]},x.id))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"destination",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Transferir a la Temporada:"}),l.jsxs("select",{id:"destination",value:c,onChange:x=>u(x.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",children:[l.jsx("option",{value:"",children:"Seleccionar temporada de destino..."}),y.map(x=>l.jsx("option",{value:x.id,children:x.name},x.id))]})]}),h&&l.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[l.jsx(Ut,{size:18}),l.jsx("span",{children:h})]})]}),l.jsxs("footer",{className:"flex-shrink-0 flex justify-end gap-4 p-4 border-t border-brand-border",children:[l.jsx("button",{onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{onClick:b,disabled:d,className:"px-5 py-2 bg-brand-orange hover:bg-orange-600 text-white font-bold rounded-lg disabled:opacity-50",children:d?"Transfiriendo...":`Transferir ${s.size} Hembra(s)`})]})]})}):null},XCe=({sireName:t,animalCount:e,dragControls:n})=>l.jsxs("div",{className:"w-full p-4 flex items-center",children:[l.jsx("div",{className:"pl-2 pr-4 cursor-grab touch-none self-stretch flex items-center",onPointerDown:r=>n.start(r),children:l.jsx(vA,{className:"text-zinc-500"})}),l.jsxs("div",{className:"flex-grow",children:[l.jsxs("p",{className:"font-bold text-lg text-white flex items-center gap-2",children:[l.jsx(ig,{})," Lote: ",t]}),l.jsxs("p",{className:"text-sm text-zinc-400 mt-1 flex items-center gap-2",children:[l.jsx(qc,{size:14})," ",e," ",e===1?"hembra asignada":"hembras asignadas"]})]}),l.jsx(Pr,{className:"text-zinc-600"})]}),QCe=({lot:t,onEdit:e,onDelete:n,onClick:r,dragControls:i})=>{const a=fu(),s=k.useRef(!1),o=(c,u)=>{const d=u.offset.x,f=u.velocity.x;if(Math.abs(d)<2){r();return}d<-160/2||f<-500?a.start({x:-160}):a.start({x:0}),setTimeout(()=>{s.current=!1},100)};return l.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-brand-glass border border-brand-border",children:[l.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:[l.jsxs("button",{onClick:e,onPointerDown:c=>c.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[l.jsx(Tl,{size:22}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Editar"})]}),l.jsxs("button",{onClick:n,onPointerDown:c=>c.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-red text-white",children:[l.jsx(fo,{size:22}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Eliminar"})]})]}),l.jsx(po.div,{drag:"x",dragConstraints:{left:-160,right:0},dragElastic:.1,onDragStart:()=>{s.current=!0},onDragEnd:o,onTap:()=>{s.current||r()},animate:a,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg",children:l.jsx(XCe,{sireName:t.sireName,animalCount:t.animalCount,dragControls:i})})]})},JCe=({lot:t,navigateTo:e,onEdit:n,onDelete:r})=>{const i=nP();return l.jsx(iP,{value:t,dragListener:!1,dragControls:i,children:l.jsx(QCe,{lot:t,dragControls:i,onClick:()=>e({name:"sire-lot-detail",lotId:t.id}),onEdit:()=>n(t),onDelete:()=>r(t)})},t.id)};function ZCe({seasonId:t,onBack:e,navigateTo:n}){const{breedingSeasons:r,sireLots:i,fathers:a,animals:s,serviceRecords:o,addSireLot:c,updateSireLot:u,deleteSireLot:d,updateAnimal:f}=Ge(),[h,p]=k.useState(!1),[y,v]=k.useState(void 0),[b,x]=k.useState(null),[_,S]=k.useState(null),[T,E]=k.useState(!1),A=k.useMemo(()=>r.find(W=>W.id===t),[r,t]),j=k.useMemo(()=>i.filter(W=>W.seasonId===t).map(W=>{var q;const B=((q=a.find(ae=>ae.id===W.sireId))==null?void 0:q.name)||"Desconocido",F=s.filter(ae=>ae.sireLotId===W.id).length;return{...W,sireName:B,animalCount:F}}),[i,t,a,s]),[P,O]=k.useState(j);k.useEffect(()=>{O(j)},[j]);const D=k.useMemo(()=>{if(!A||A.status!=="Cerrado")return[];const W=new Set(j.map(q=>q.id)),B=s.filter(q=>q.sireLotId&&W.has(q.sireLotId)),F=new Set(o.filter(q=>q.sireLotId&&W.has(q.sireLotId)).map(q=>q.femaleId));return B.filter(q=>!F.has(q.id))},[A,j,s,o]),M=W=>{v(W),p(!0)},z=async W=>{y?await u(y.id,{sireId:W}):await c({seasonId:t,sireId:W}),p(!1),v(void 0)},L=W=>{W.animalCount>0?S(`No se puede eliminar. Reasigna las ${W.animalCount} hembra(s) a otro lote primero.`):x(W)},te=()=>{b&&(d(b.id),x(null))},X=async(W,B)=>{const F=i.find(ae=>ae.seasonId===W);if(!F){alert("La temporada de destino no tiene lotes de reproductor. Por favor, crea uno primero.");return}const q=B.map(ae=>f(ae,{sireLotId:F.id,reproductiveStatus:"En Servicio"}));await Promise.all(q)};return A?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 pb-12 animate-fade-in",children:[l.jsxs("header",{className:"flex items-center pt-8 pb-4 px-4",children:[l.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(Zn,{size:24})}),l.jsxs("div",{className:"text-center flex-grow",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:A.name}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Detalle de la Temporada"})]}),l.jsx("div",{className:"w-8"})]}),l.jsxs("div",{className:"space-y-4 px-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-zinc-300",children:"Lotes de Reproductor"}),l.jsxs("button",{onClick:()=>M(),className:"flex items-center gap-2 bg-brand-orange hover:bg-orange-600 text-white font-bold py-2 px-3 rounded-lg transition-colors text-sm",children:[l.jsx(ur,{size:16})," Añadir Lote"]})]}),P.length>0?l.jsx(rP,{as:"div",axis:"y",values:P,onReorder:O,className:"space-y-3",children:P.map(W=>l.jsx(JCe,{lot:W,navigateTo:n,onEdit:M,onDelete:L},W.id))}):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-500",children:"Esta temporada aún no tiene lotes de reproductor."})})]}),A.status==="Cerrado"&&l.jsxs("div",{className:"space-y-4 px-4 pt-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-zinc-300",children:"Resultados: Hembras sin Servicio"}),D.length>0&&l.jsxs("button",{onClick:()=>E(!0),className:"flex items-center gap-2 bg-brand-blue hover:bg-blue-600 text-white font-bold py-2 px-3 rounded-lg text-sm",children:[l.jsx(SL,{size:16})," Transferir"]})]}),l.jsx("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-2",children:D.length>0?D.map(W=>l.jsxs("div",{className:"flex items-center justify-between p-2 bg-black/20 rounded-md",children:[l.jsx("span",{className:"font-semibold text-white",children:W.id}),l.jsxs("span",{className:"text-xs text-zinc-400",children:["Lote Físico: ",W.location||"N/A"]})]},W.id)):l.jsxs("div",{className:"text-center py-6 flex flex-col items-center gap-2",children:[l.jsx(TG,{size:32,className:"text-zinc-600"}),l.jsx("p",{className:"text-zinc-400 font-semibold",children:"Todas las hembras tuvieron servicio en esta temporada."})]})})]})]}),l.jsx(st,{isOpen:h,onClose:()=>{p(!1),v(void 0)},title:y?`Editar Lote de ${y.sireName}`:"Añadir Lote de Reproductor",children:l.jsx(GCe,{onSave:z,onCancel:()=>{p(!1),v(void 0)}})}),l.jsx(jb,{isOpen:!!b,onClose:()=>x(null),onConfirm:te,title:`Eliminar Lote de ${b==null?void 0:b.sireName}`,message:"¿Estás seguro de que quieres eliminar este lote? Esta acción es irreversible."}),l.jsx(st,{isOpen:!!_,onClose:()=>S(null),title:"Acción no permitida",children:l.jsxs("div",{className:"space-y-4 text-center",children:[" ",l.jsx(Ut,{size:40,className:"mx-auto text-amber-400"})," ",l.jsx("p",{className:"text-zinc-300",children:_})," ",l.jsx("button",{onClick:()=>S(null),className:"mt-4 bg-brand-orange text-white font-semibold py-2 px-6 rounded-lg",children:"Entendido"})," "]})}),l.jsx(YCe,{isOpen:T,onClose:()=>E(!1),femalesToTransfer:D,originSeasonId:A.id,onConfirmTransfer:X})]}):l.jsxs("div",{className:"text-center p-10",children:[l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Temporada no encontrada."}),l.jsx("button",{onClick:e,className:"mt-4 text-brand-orange",children:"Volver"})]})}const eNe=`
  .rdp {
    --rdp-cell-size: 40px;
    --rdp-accent-color: #FF9500;
    --rdp-background-color: #1c1c1e;
    --rdp-accent-color-dark: #FF9500;
    --rdp-background-color-dark: #1c1c1e;
    --rdp-outline: 2px solid var(--rdp-accent-color);
    --rdp-border-radius: 12px;
    color: #FFF;
  }
  .rdp-caption_label, .rdp-nav_button { color: #FF9500; }
  .rdp-head_cell { color: #8e8e93; }
  .rdp-day_selected { background-color: var(--rdp-accent-color); color: #000; font-weight: bold; }
`,tNe=({isOpen:t,onClose:e,onSave:n,animalId:r})=>{if(!t)return null;const i=a=>{a&&n(a),e()};return l.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex justify-center items-end sm:items-center z-50 animate-fade-in",onClick:e,children:l.jsxs("div",{className:"w-full max-w-sm bg-ios-modal-bg rounded-t-2xl sm:rounded-2xl shadow-2xl text-white animate-slide-up",onClick:a=>a.stopPropagation(),children:[l.jsxs("header",{className:"text-center p-3",children:[l.jsxs("h2",{className:"font-semibold text-white",children:["Registrar Servicio para ",r]}),l.jsx("p",{className:"text-sm text-zinc-400",children:"Selecciona la fecha del servicio"})]}),l.jsx("style",{children:eNe}),l.jsx("div",{className:"flex justify-center pb-4",children:l.jsx(Xf,{mode:"single",onSelect:i,defaultMonth:new Date,locale:yE,disabled:{after:new Date}})})]})})},nNe=(t,e,n,r,i)=>{const a=[];if(!t)return[];if(t.sex==="Hembra"){const s=e.filter(o=>o.goatId===t.id&&o.status!=="finalizada").sort((o,c)=>new Date(c.parturitionDate).getTime()-new Date(o.parturitionDate).getTime())[0];s&&(s.status==="activa"?a.push(Bt.MILKING):s.status==="en-secado"?a.push(Bt.DRYING_OFF):s.status==="seca"&&a.push(Bt.DRY))}if(t.reproductiveStatus==="Preñada"?a.push(Bt.PREGNANT):t.reproductiveStatus==="En Servicio"?n.some(o=>o.femaleId===t.id&&o.sireLotId===t.sireLotId)?a.push(Bt.IN_SERVICE_CONFIRMED):a.push(Bt.IN_SERVICE):(t.reproductiveStatus==="Vacía"||t.reproductiveStatus==="Post-Parto")&&a.push(Bt.EMPTY),t.sex==="Macho"){const s=i.filter(u=>u.status==="Activo"),o=new Set(s.map(u=>u.id));r.some(u=>u.sireId===t.id&&o.has(u.seasonId))&&a.push(Bt.SIRE_IN_SERVICE)}return Array.from(new Set(a))};function rNe({lotId:t,navigateTo:e,onBack:n}){const{sireLots:r,fathers:i,animals:a,parturitions:s,serviceRecords:o,breedingSeasons:c,updateAnimal:u,addServiceRecord:d}=Ge(),[f,h]=k.useState(!1),[p,y]=k.useState(""),[v,b]=k.useState(null),[x,_]=k.useState(!1),[S,T]=k.useState(null),E=k.useMemo(()=>r.find(X=>X.id===t),[r,t]),A=k.useMemo(()=>{var X;return((X=i.find(W=>W.id===(E==null?void 0:E.sireId)))==null?void 0:X.name)||"Desconocido"},[i,E]),j=k.useMemo(()=>E?a.filter(X=>X.sireLotId===E.id).sort((X,W)=>X.id.localeCompare(W.id)).map(X=>({...X,formattedAge:$a(X.birthDate),statusObjects:nNe(X,s,o,r,c)})):[],[a,E,s,o,r,c]),P=k.useMemo(()=>p?j.filter(X=>X.id.toLowerCase().includes(p.toLowerCase())):j,[j,p]),O=async X=>{if(!E)return;const W=X.map(B=>u(B,{sireLotId:E.id,reproductiveStatus:"En Servicio"}));await Promise.all(W),h(!1)},D=async X=>{!E||!v||(await d({sireLotId:E.id,femaleId:v.id,serviceDate:X.toISOString().split("T")[0]}),L())},M=X=>{if(!X)return[];const W=[];return W.push({label:"Registrar Servicio",icon:gL,onClick:()=>{_(!1),T("service")},color:"text-pink-400"}),W.push({label:"Declarar Parto",icon:xl,onClick:()=>{_(!1),T("parturition")}}),W.push({label:"Declarar Aborto",icon:bx,onClick:()=>{_(!1),T("abortion")},color:"text-yellow-400"}),W.push({label:"Acciones de Leche",icon:cu,onClick:()=>{_(!1),T("milkWeighing")}}),W.push({label:"Agregar Peso Corporal",icon:El,onClick:()=>{_(!1),T("bodyWeighing")}}),W.push({label:"Dar de Baja",icon:Al,onClick:()=>{_(!1),T("decommission")},color:"text-brand-red"}),W},z=X=>{b(X),_(!0)},L=()=>{T(null),b(null)},te=async X=>{if(!v)return;const W={status:X.reason,isReference:!0,endDate:X.date};X.reason==="Venta"&&Object.assign(W,{salePrice:X.salePrice,saleBuyer:X.saleBuyer,salePurpose:X.salePurpose}),X.reason==="Muerte"&&(W.deathReason=X.deathReason),X.reason==="Descarte"&&Object.assign(W,{cullReason:X.cullReason,cullReasonDetails:X.cullReasonDetails}),await u(v.id,W),L()};return E?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12",children:[l.jsxs("header",{className:"flex items-center justify-between pt-8 pb-4 px-4 sticky top-0 bg-gray-900/80 backdrop-blur-lg z-10 border-b border-brand-border",children:[l.jsx("button",{onClick:n,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(Zn,{size:24})}),l.jsxs("div",{className:"text-center flex-grow",children:[l.jsxs("h1",{className:"text-xl font-bold tracking-tight text-white truncate",children:["Lote: ",A]}),l.jsxs("p",{className:"text-xs text-zinc-400 truncate",children:["Reproductor: ",A," (",E.sireId,")"]})]}),l.jsx("button",{onClick:()=>h(!0),className:"p-2 -mr-2 bg-brand-orange hover:bg-orange-600 text-white rounded-full transition-colors",children:l.jsx(ur,{size:24})})]}),l.jsxs("div",{className:"space-y-4 pt-4 px-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("h3",{className:"text-lg font-semibold text-zinc-300",children:["Hembras Asignadas (",P.length,")"]}),l.jsxs("div",{className:"relative w-40",children:[l.jsx(Kc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-500"}),l.jsx("input",{type:"search",value:p,onChange:X=>y(X.target.value),placeholder:"Buscar...",className:"w-full bg-zinc-800/80 rounded-lg pl-8 pr-2 py-1 text-white border-transparent focus:border-brand-amber focus:ring-0 text-sm"})]})]}),l.jsx("div",{className:"space-y-2",children:P.length>0?P.map(X=>l.jsx(aV,{animal:X,onSelect:W=>e({name:"rebano-profile",animalId:W}),onOpenActions:z},X.id)):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-500",children:p?"No se encontraron coincidencias.":"Aún no has asignado hembras a este lote."})})})]})]}),l.jsx(_b,{isOpen:f,onClose:()=>h(!1),onSelect:O,animals:a,parturitions:s,serviceRecords:o,breedingSeasons:c,sireLots:r,title:`Asignar Hembras al Lote de ${A}`,sireIdForInbreedingCheck:E.sireId}),l.jsx(Qd,{isOpen:x,onClose:()=>_(!1),title:`Acciones para ${(v==null?void 0:v.id)||""}`,actions:M(v)}),v&&l.jsxs(l.Fragment,{children:[S==="service"&&l.jsx(tNe,{isOpen:!0,onClose:L,onSave:D,animalId:v.id}),S==="parturition"&&l.jsx(Qf,{isOpen:!0,onClose:L,motherId:v.id}),S==="abortion"&&l.jsx(CE,{animal:v,onCancel:L,onSaveSuccess:L}),S==="milkWeighing"&&l.jsx(PE,{animal:v,onCancel:L,onSaveSuccess:L}),S==="bodyWeighing"&&l.jsx(EE,{animal:v,onCancel:L,onSaveSuccess:L}),S==="decommission"&&l.jsx(TE,{animal:v,onCancel:L,onConfirm:te})]})]}):l.jsxs("div",{className:"text-center p-10",children:[l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Lote de Reproductor no encontrado."}),l.jsx("button",{onClick:n,className:"mt-4 text-brand-orange",children:"Volver"})]})}const iNe=t=>{const[e,n]=k.useState([]),[r,i]=k.useState([]),[a,s]=k.useState(!0);return k.useEffect(()=>{if(!t)return;(async()=>{s(!0);try{const u=uL(),[d,f]=await Promise.all([u.weighings.where("goatId").equals(t).toArray(),u.parturitions.where("goatId").equals(t).toArray()]);n(d),i(f.sort((h,p)=>new Date(h.parturitionDate).getTime()-new Date(p.parturitionDate).getTime()))}catch(u){console.error(`Error al cargar datos para ${t}:`,u)}finally{s(!1)}})()},[t]),{...k.useMemo(()=>{if(r.length===0)return{allLactations:[],parturitionIntervals:[],lastWeighingDate:null};const c=r.map((f,h)=>{const p=new Date(f.parturitionDate),y=h<r.length-1?new Date(r[h+1].parturitionDate):new Date(9999,11,31),v=e.filter(A=>{const j=new Date(A.date);return j>=p&&j<y}),b=v.map(A=>({del:Yf(f.parturitionDate,A.date),kg:A.kg})).sort((A,j)=>A.del-j.del),x=v.reduce((A,j)=>A+j.kg,0),_=v.length>0?x/v.length:0,S=b.reduce((A,j)=>j.kg>A.kg?j:A,{kg:0,del:0}),T=b[b.length-1],E=T?T.del:0;return{parturitionDate:f.parturitionDate,weighings:v,lactationCurve:b,averageProduction:_,peakProduction:S,totalDays:E}}),u=r.slice(1).map((f,h)=>{const p=r[h],y=new Date(f.parturitionDate).getTime()-new Date(p.parturitionDate).getTime();return{period:`${p.parturitionDate.substring(0,4)} - ${f.parturitionDate.substring(0,4)}`,days:Math.round(y/(1e3*60*60*24))}}),d=e.sort((f,h)=>new Date(h.date).getTime()-new Date(f.date).getTime())[0];return{allLactations:c,parturitionIntervals:u,lastWeighingDate:(d==null?void 0:d.date)||null}},[e,r]),isLoading:a}},aNe=(t,e,n,r)=>{const[i,a]=k.useState([]),[s,o]=k.useState(!1);return k.useEffect(()=>{if(!t||!e.length){a([]);return}(()=>{o(!0);let u=[];if(t==="PRIMIPARAS_HISTORICAL"){const p=n.reduce((y,v)=>(y[v.goatId]=(y[v.goatId]||0)+1,y),{});u=e.filter(y=>p[y.id]===1).map(y=>y.id)}else if(t==="MULTIPARAS_HISTORICAL"){const p=n.reduce((y,v)=>(y[v.goatId]=(y[v.goatId]||0)+1,y),{});u=e.filter(y=>p[y.id]>1).map(y=>y.id)}const d=r.filter(p=>u.includes(p.goatId)),f={};d.forEach(p=>{const y=n.filter(b=>b.goatId===p.goatId&&new Date(p.date)>=new Date(b.parturitionDate)).sort((b,x)=>new Date(x.parturitionDate).getTime()-new Date(b.parturitionDate).getTime())[0];if(!y)return;const v=Yf(y.parturitionDate,p.date);f[v]||(f[v]={totalKg:0,count:0}),f[v].totalKg+=p.kg,f[v].count++});const h=Object.entries(f).map(([p,y])=>({del:parseInt(p),kg:y.totalKg/y.count})).sort((p,y)=>p.del-y.del);a(h),o(!1)})()},[t,e,n,r]),{comparativeCurve:i,isLoading:s}},nu=({active:t,payload:e,label:n})=>{if(t&&e&&e.length){const r=e[0].payload.name==="Promedio Rebaño";return"range"in e[0].payload?l.jsxs("div",{className:"bg-black/50 backdrop-blur-xl p-3 rounded-lg border border-brand-border text-white",children:[l.jsxs("p",{className:"label text-brand-light-gray text-sm",children:["Rango: ",e[0].payload.range," Kg"]}),l.jsxs("p",{className:"font-bold text-base",children:["Nº de Cabras: ",e[0].value]})]}):l.jsxs("div",{className:"bg-black/50 backdrop-blur-xl p-3 rounded-lg border border-brand-border text-white",children:[l.jsx("p",{className:"label text-brand-light-gray text-sm",children:r?`Días en Leche (DEL): ${n}`:`DEL: ${n}`}),l.jsx("p",{className:"font-bold text-base",children:r?`Promedio: ${e[0].value.toFixed(2)} Kg`:`Producción: ${e[0].value.toFixed(2)} Kg`})]})}return null},gv=({active:t,payload:e,label:n,context:r})=>{if(t&&e&&e.length){let i="",a="";switch(r){case"average":i=`Lactancia del ${n}`,a=`Promedio: ${e[0].value.toFixed(2)} Kg`;break;case"peak":i=`Lactancia del ${n}`,a=`Pico: ${e[0].value.toFixed(2)} Kg`;break;case"del":i=`Lactancia del ${n}`,a=`Duración: ${e[0].value} días`;break;case"interval":i=`Período ${n}`,a=`Intervalo: ${e[0].value} días`;break}return l.jsxs("div",{className:"bg-black/60 backdrop-blur-xl p-3 rounded-lg border border-zinc-700 text-white",children:[l.jsx("p",{className:"label text-zinc-400 text-sm font-medium",children:i}),l.jsx("p",{className:"font-semibold text-base",children:a})]})}return null};function sNe({animalId:t,onBack:e,navigateTo:n}){const{animals:r,parturitions:i,weighings:a,startDryingProcess:s,setLactationAsDry:o}=Ge(),{allLactations:c,parturitionIntervals:u,lastWeighingDate:d,isLoading:f}=iNe(t),[h,p]=k.useState(null),[y,v]=k.useState(null),[b,x]=k.useState(!1),{comparativeCurve:_,isLoading:S}=aNe(y,r,i,a),T=k.useMemo(()=>{if(c.length===0)return null;const z=c[c.length-1],L=i.find(te=>te.parturitionDate===z.parturitionDate&&te.goatId===t);return{...z,id:L==null?void 0:L.id,status:L==null?void 0:L.status}},[c,i,t]),E=k.useMemo(()=>T?Yf(T.parturitionDate,new Date().toISOString().split("T")[0]):"N/A",[T]),A=k.useMemo(()=>({average:c.map(z=>({name:new Date(z.parturitionDate).getFullYear().toString(),value:z.averageProduction})),peak:c.map(z=>({name:new Date(z.parturitionDate).getFullYear().toString(),value:z.peakProduction.kg})),del:c.map(z=>({name:new Date(z.parturitionDate).getFullYear().toString(),value:z.totalDays})),interval:u.map(z=>({name:z.period,value:z.days}))}),[c,u]);if(f)return l.jsx("div",{className:"text-center p-10",children:l.jsxs("h1",{className:"text-2xl text-zinc-400",children:["Cargando perfil de lactancia de ",t,"..."]})});const j=c.length>0?c[c.length-1]:null,P=u.length>0?u[u.length-1].days:0,O=c.length===1,D=()=>{const z=!b;x(z),z||v(null)},M=z=>{v(L=>L===z?null:z)};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-4xl mx-auto space-y-4 animate-fade-in px-4",children:[l.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[l.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(Zn,{size:24})}),l.jsxs("div",{className:"text-center flex-grow",children:[l.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white",children:t}),l.jsx("p",{className:"text-xl text-zinc-400",children:"Perfil de Lactancia"})]}),l.jsx("button",{onClick:()=>n({name:"rebano-profile",animalId:t}),className:"p-2 -mr-2 text-zinc-400 hover:text-white transition-colors",title:"Ir a la ficha general del animal",children:l.jsx(mA,{size:24})})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[l.jsxs("button",{onClick:()=>p("average"),className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-amber transition-colors",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[l.jsx(pA,{size:14}),l.jsx("span",{children:"Promedio"})]}),l.jsxs("p",{className:"text-2xl font-bold text-white",children:[(j==null?void 0:j.averageProduction.toFixed(2))||"N/A"," ",l.jsx("span",{className:"text-lg text-zinc-400",children:"Kg"})]})]}),l.jsxs("button",{onClick:()=>p("peak"),className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-amber transition-colors",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[l.jsx(gs,{size:14}),l.jsx("span",{children:"Pico Prod."})]}),l.jsxs("p",{className:"text-2xl font-bold text-white",children:[(j==null?void 0:j.peakProduction.kg.toFixed(2))||"N/A"," ",l.jsx("span",{className:"text-lg text-zinc-400",children:"Kg"})]})]}),l.jsxs("button",{onClick:()=>p("del"),className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-amber transition-colors",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[l.jsx(pL,{size:14}),l.jsx("span",{children:"DEL"})]}),l.jsx("p",{className:"text-2xl font-bold text-white",children:E})]}),l.jsxs("button",{onClick:()=>p("interval"),className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-amber transition-colors",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[l.jsx(kG,{size:14}),l.jsx("span",{children:"Int. Partos"})]}),l.jsxs("p",{className:"text-2xl font-bold text-white",children:[P," ",l.jsx("span",{className:"text-lg text-zinc-400",children:"días"})]})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-1 text-xs uppercase",children:[l.jsx(fG,{size:14}),l.jsx("span",{children:"Últ. Pesaje"})]}),l.jsx("p",{className:"text-xl font-bold text-white",children:d?new Date(d+"T00:00:00").toLocaleDateString():"N/A"})]})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border relative",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center border-b border-brand-border pb-2 mb-4 gap-2",children:[l.jsxs("h3",{className:"text-zinc-400 font-semibold text-xs uppercase",children:["Curva de Lactancia Actual (Parto: ",(j==null?void 0:j.parturitionDate)||"N/A",")"]}),l.jsxs("div",{className:"flex items-center space-x-2 self-end sm:self-center",children:[l.jsx("span",{className:"text-xs font-semibold text-zinc-300",children:"Comparar:"}),l.jsx("button",{onClick:D,className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${b?"bg-amber-500":"bg-zinc-700"}`,children:l.jsx("span",{"aria-hidden":"true",className:`inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${b?"translate-x-5":"translate-x-0"}`})}),b&&l.jsxs("div",{className:"flex items-center space-x-2 animate-fade-in",children:[l.jsx("button",{onClick:()=>M("PRIMIPARAS_HISTORICAL"),className:`px-2 py-1 text-xs rounded-md transition-colors ${y==="PRIMIPARAS_HISTORICAL"?"bg-amber-500 text-black font-semibold":"bg-zinc-700/50 text-zinc-300 hover:bg-zinc-600/50"} ${O?"ring-2 ring-amber-400":""}`,children:"vs Primíparas"}),l.jsx("button",{onClick:()=>M("MULTIPARAS_HISTORICAL"),className:`px-2 py-1 text-xs rounded-md transition-colors ${y==="MULTIPARAS_HISTORICAL"?"bg-amber-500 text-black font-semibold":"bg-zinc-700/50 text-zinc-300 hover:bg-zinc-600/50"} ${O?"":"ring-2 ring-amber-400"}`,children:"vs Multíparas"})]})]})]}),l.jsxs("div",{className:"w-full h-56",children:[l.jsx(zn,{children:l.jsxs(eV,{margin:{top:5,right:20,left:-10,bottom:5},children:[l.jsx(vg,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),l.jsx(Sn,{dataKey:"del",type:"number",domain:["dataMin","dataMax"],tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(kn,{orientation:"right",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(Mt,{content:l.jsx(nu,{})}),l.jsx(Ca,{verticalAlign:"top",height:36,iconType:"plainline"}),l.jsx(eu,{type:"monotone",data:j==null?void 0:j.lactationCurve,dataKey:"kg",name:t,stroke:"#FBBF24",strokeWidth:2.5,dot:!1}),y&&!S&&l.jsx(eu,{type:"monotone",data:_,dataKey:"kg",name:"Promedio del Grupo",stroke:"#34d399",strokeWidth:2,strokeDasharray:"5 5",dot:!1})]})}),S&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 backdrop-blur-sm rounded-xl text-white",children:"Calculando comparación..."})]})]}),(T==null?void 0:T.id)&&l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsx("h3",{className:"text-zinc-400 font-semibold text-xs uppercase mb-3",children:"Gestión de Lactancia Actual"}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[T.status==="activa"&&l.jsxs("button",{onClick:()=>s(T.id),className:"w-full flex items-center justify-center space-x-2 bg-blue-600/80 hover:bg-blue-500/80 text-white font-semibold py-3 px-4 rounded-xl transition-colors",children:[l.jsx(Sx,{size:20}),l.jsx("span",{children:"Iniciar Proceso de Secado"})]}),T.status==="en-secado"&&l.jsxs("button",{onClick:()=>o(T.id),className:"w-full flex items-center justify-center space-x-2 bg-gray-600/80 hover:bg-gray-500/80 text-white font-semibold py-3 px-4 rounded-xl transition-colors",children:[l.jsx(Al,{size:20}),l.jsx("span",{children:"Declarar Lactancia como Seca"})]}),T.status==="seca"&&l.jsx("div",{className:"w-full text-center p-3 bg-black/20 rounded-xl",children:l.jsx("p",{className:"font-semibold text-green-400",children:"Esta lactancia ha finalizado."})})]}),T.status==="en-secado"&&l.jsx("p",{className:"text-center text-xs text-zinc-400 mt-2",children:"El animal está en su período de secado."})]})]}),l.jsx(st,{isOpen:h==="average",onClose:()=>p(null),title:"Historial de Promedios",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"w-full h-48 -ml-4",children:l.jsx(zn,{children:l.jsxs(fi,{data:A.average,margin:{top:5,right:20,left:-20,bottom:0},children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"modalBarGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[l.jsx("stop",{offset:"0%",stopColor:"#FBBF24",stopOpacity:.8}),l.jsx("stop",{offset:"100%",stopColor:"#FBBF24",stopOpacity:.2})]})}),l.jsx(Sn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1}),l.jsx(kn,{orientation:"right",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1,width:40}),l.jsx(Mt,{content:l.jsx(gv,{context:"average"}),cursor:{fill:"rgba(255, 255, 255, 0.1)"}}),l.jsx(Fn,{dataKey:"value",radius:[4,4,0,0],fill:"url(#modalBarGradient)"})]})})}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Detalles por Lactancia"}),l.jsx("ul",{className:"space-y-1",children:c.slice().reverse().map(z=>l.jsxs("li",{className:"flex justify-between items-center p-2 rounded-md hover:bg-white/5",children:[l.jsxs("span",{className:"text-base font-medium text-zinc-200",children:["Parto del ",z.parturitionDate]}),l.jsxs("span",{className:"text-base font-semibold text-white",children:[z.averageProduction.toFixed(2)," Kg"]})]},z.parturitionDate))})]})]})}),l.jsx(st,{isOpen:h==="peak",onClose:()=>p(null),title:"Historial de Picos de Producción",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"w-full h-48 -ml-4",children:l.jsx(zn,{children:l.jsxs(fi,{data:A.peak,margin:{top:5,right:20,left:-20,bottom:0},children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"modalBarGradientPeak",x1:"0",y1:"0",x2:"0",y2:"1",children:[l.jsx("stop",{offset:"0%",stopColor:"#10B981",stopOpacity:.8}),l.jsx("stop",{offset:"100%",stopColor:"#10B981",stopOpacity:.2})]})}),l.jsx(Sn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1}),l.jsx(kn,{orientation:"right",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1,width:40}),l.jsx(Mt,{content:l.jsx(gv,{context:"peak"}),cursor:{fill:"rgba(255, 255, 255, 0.1)"}}),l.jsx(Fn,{dataKey:"value",radius:[4,4,0,0],fill:"url(#modalBarGradientPeak)"})]})})}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Detalles por Lactancia"}),l.jsx("ul",{className:"space-y-1",children:c.slice().reverse().map(z=>l.jsxs("li",{className:"flex justify-between items-center p-2 rounded-md hover:bg-white/5",children:[l.jsxs("span",{className:"text-base font-medium text-zinc-200",children:["Parto del ",z.parturitionDate]}),l.jsxs("span",{className:"text-base font-semibold text-white",children:[z.peakProduction.kg.toFixed(2)," Kg ",l.jsxs("span",{className:"font-normal text-zinc-400",children:["(Día ",z.peakProduction.del,")"]})]})]},z.parturitionDate))})]})]})}),l.jsx(st,{isOpen:h==="del",onClose:()=>p(null),title:"Historial de Duración de Lactancias",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"w-full h-48 -ml-4",children:l.jsx(zn,{children:l.jsxs(fi,{data:A.del,margin:{top:5,right:20,left:-20,bottom:0},children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"modalBarGradientDel",x1:"0",y1:"0",x2:"0",y2:"1",children:[l.jsx("stop",{offset:"0%",stopColor:"#3B82F6",stopOpacity:.8}),l.jsx("stop",{offset:"100%",stopColor:"#3B82F6",stopOpacity:.2})]})}),l.jsx(Sn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1}),l.jsx(kn,{orientation:"right",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1,width:40}),l.jsx(Mt,{content:l.jsx(gv,{context:"del"}),cursor:{fill:"rgba(255, 255, 255, 0.1)"}}),l.jsx(Fn,{dataKey:"value",radius:[4,4,0,0],fill:"url(#modalBarGradientDel)"})]})})}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Detalles por Lactancia"}),l.jsx("ul",{className:"space-y-1",children:c.slice().reverse().map(z=>l.jsxs("li",{className:"flex justify-between items-center p-2 rounded-md hover:bg-white/5",children:[l.jsxs("span",{className:"text-base font-medium text-zinc-200",children:["Parto del ",z.parturitionDate]}),l.jsxs("span",{className:"text-base font-semibold text-white",children:[z.totalDays," días"]})]},z.parturitionDate))})]})]})}),l.jsx(st,{isOpen:h==="interval",onClose:()=>p(null),title:"Historial de Intervalos entre Partos",children:l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"w-full h-48 -ml-4",children:l.jsx(zn,{children:l.jsxs(fi,{data:A.interval,margin:{top:5,right:20,left:-20,bottom:0},children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"modalBarGradientInt",x1:"0",y1:"0",x2:"0",y2:"1",children:[l.jsx("stop",{offset:"0%",stopColor:"#8B5CF6",stopOpacity:.8}),l.jsx("stop",{offset:"100%",stopColor:"#8B5CF6",stopOpacity:.2})]})}),l.jsx(Sn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1}),l.jsx(kn,{orientation:"right",tick:{fill:"rgba(255,255,255,0.5)",fontSize:12},stroke:"transparent",tickLine:!1,width:40}),l.jsx(Mt,{content:l.jsx(gv,{context:"interval"}),cursor:{fill:"rgba(255, 255, 255, 0.1)"}}),l.jsx(Fn,{dataKey:"value",radius:[4,4,0,0],fill:"url(#modalBarGradientInt)"})]})})}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-semibold text-zinc-400 mb-2",children:"Detalles de Intervalos"}),l.jsx("ul",{className:"space-y-1",children:u.slice().reverse().map(z=>l.jsxs("li",{className:"flex justify-between items-center p-2 rounded-md hover:bg-white/5",children:[l.jsxs("span",{className:"text-base font-medium text-zinc-200",children:["Período ",z.period]}),l.jsxs("span",{className:"text-base font-semibold text-white",children:[z.days," días"]})]},z.period))})]})]})})]})}const oNe=({plan:t})=>l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsx("p",{className:"font-semibold text-white",children:t.details}),l.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:["Iniciado el: ",new Date(t.startDate+"T00:00:00").toLocaleDateString("es-VE")]})]});function lNe({lotName:t,onBack:e}){const{feedingPlans:n,addFeedingPlan:r}=Ge(),[i,a]=k.useState(""),[s,o]=k.useState(new Date().toISOString().split("T")[0]),[c,u]=k.useState(null),d=k.useMemo(()=>n.filter(h=>h.lotName===t).sort((h,p)=>new Date(p.startDate).getTime()-new Date(h.startDate).getTime()),[n,t]),f=async h=>{if(h.preventDefault(),!i.trim()){u({type:"error",text:"Los detalles del plan no pueden estar vacíos."});return}try{await r({lotName:t,details:i,startDate:s}),u({type:"success",text:"Plan de alimentación guardado con éxito."}),a("")}catch(p){u({type:"error",text:"No se pudo guardar el plan."}),console.error(p)}};return l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 pb-12 animate-fade-in",children:[l.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[l.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(Zn,{size:24})}),l.jsxs("div",{className:"text-center flex-grow",children:[l.jsxs("h1",{className:"text-3xl font-bold tracking-tight text-white",children:["Alimentación: ",t]}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Planes de Nutrición del Lote"})]}),l.jsx("div",{className:"w-8"})]}),l.jsxs("form",{onSubmit:f,className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-4",children:[l.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[l.jsx(ur,{size:20})," Asignar Nuevo Plan"]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"planDetails",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Detalles del Plan (Ej: 2kg de concentrado/día)"}),l.jsx("textarea",{id:"planDetails",rows:3,value:i,onChange:h=>a(h.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"planStartDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Inicio"}),l.jsx("input",{id:"planStartDate",type:"date",value:s,onChange:h=>o(h.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),l.jsx("button",{type:"submit",className:"w-full bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 rounded-xl text-lg transition-colors",children:"Guardar Plan"}),c&&l.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${c.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[c.type==="success"?l.jsx(Jr,{size:18}):l.jsx(Ut,{size:18}),l.jsx("span",{children:c.text})]})]}),l.jsxs("div",{className:"space-y-4 pt-4",children:[l.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 px-2 flex items-center gap-2",children:[l.jsx(hA,{size:20})," Historial de Planes"]}),d.length>0?l.jsx("div",{className:"space-y-2",children:d.map(h=>l.jsx(oNe,{plan:h},h.id))}):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-500",children:"No hay planes de alimentación registrados para este lote."})})]})]})}const cNe=({event:t})=>l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsx("p",{className:"font-semibold text-white",children:t.details}),l.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:["Aplicado el: ",new Date(t.date+"T00:00:00").toLocaleDateString("es-VE")]})]});function uNe({lotName:t,onBack:e}){const{events:n,addBatchEvent:r}=Ge(),[i,a]=k.useState(""),[s,o]=k.useState(new Date().toISOString().split("T")[0]),[c,u]=k.useState(null),d=k.useMemo(()=>{const h=n.filter(p=>p.lotName===t&&p.type==="Tratamiento").reduce((p,y)=>{const v=`${y.date}-${y.details}`;return p[v]||(p[v]=y),p},{});return Object.values(h).sort((p,y)=>new Date(y.date).getTime()-new Date(p.date).getTime())},[n,t]),f=async h=>{if(h.preventDefault(),u(null),!i.trim()){u({type:"error",text:"Los detalles del tratamiento no pueden estar vacíos."});return}try{await r({lotName:t,details:i,date:s,type:"Tratamiento"}),u({type:"success",text:"Tratamiento registrado con éxito para todo el lote."}),a("")}catch(p){u({type:"error",text:"No se pudo registrar el tratamiento."}),console.error(p)}};return l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 pb-12 animate-fade-in",children:[l.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[l.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(Zn,{size:24})}),l.jsxs("div",{className:"text-center flex-grow",children:[l.jsxs("h1",{className:"text-3xl font-bold tracking-tight text-white",children:["Tratamientos: ",t]}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Sanidad Colectiva del Lote"})]}),l.jsx("div",{className:"w-8"})]}),l.jsxs("form",{onSubmit:f,className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-4",children:[l.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[l.jsx(ur,{size:20})," Registrar Tratamiento al Lote"]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"treatmentDetails",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Detalles del Tratamiento (Ej: Vacuna Triple)"}),l.jsx("textarea",{id:"treatmentDetails",rows:3,value:i,onChange:h=>a(h.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"treatmentDate",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Aplicación"}),l.jsx("input",{id:"treatmentDate",type:"date",value:s,onChange:h=>o(h.target.value),className:"w-full bg-zinc-800/80 p-3 rounded-xl text-lg"})]}),l.jsx("button",{type:"submit",className:"w-full bg-brand-orange hover:bg-orange-600 text-white font-bold py-3 rounded-xl text-lg transition-colors",children:"Guardar Tratamiento"}),c&&l.jsxs("div",{className:`flex items-center space-x-2 p-3 rounded-lg text-sm ${c.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[c.type==="success"?l.jsx(Jr,{size:18}):l.jsx(Ut,{size:18}),l.jsx("span",{children:c.text})]})]}),l.jsxs("div",{className:"space-y-4 pt-4",children:[l.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 px-2 flex items-center gap-2",children:[l.jsx(zG,{size:20})," Historial de Tratamientos del Lote"]}),d.length>0?l.jsx("div",{className:"space-y-2",children:d.map(h=>l.jsx(cNe,{event:h},h.id))}):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-500",children:"No hay tratamientos registrados para este lote."})})]})]})}const Wu=({icon:t,label:e,value:n,unit:r,colorClass:i})=>l.jsxs("div",{className:`bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border ${i||""}`,children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[l.jsx(t,{size:14}),l.jsx("span",{children:e})]}),l.jsxs("p",{className:"text-2xl font-bold text-white",children:[n," ",l.jsx("span",{className:"text-lg text-zinc-400",children:r})]})]}),dNe=({active:t,payload:e,label:n})=>t&&e&&e.length?l.jsxs("div",{className:"bg-black/50 backdrop-blur-xl p-3 rounded-lg border border-brand-border text-white",children:[l.jsxs("p",{className:"label text-brand-light-gray text-sm",children:["Edad: ",n," días"]}),e.map(r=>l.jsxs("p",{style:{color:r.color},className:"font-bold text-base",children:[r.name,": ",r.value.toFixed(2)," Kg"]},r.name))]}):null;function fNe({animalId:t,onBack:e}){const{animals:n,bodyWeighings:r}=Ge(),i=k.useMemo(()=>{const p=n.find(j=>j.id===t);if(!p)return null;const y=r.filter(j=>j.animalId===p.id).sort((j,P)=>new Date(j.date).getTime()-new Date(P.date).getTime()),v=dE(p.birthWeight,y),b=$a(p.birthDate),x=y.length>0?y[y.length-1].kg:p.birthWeight||0,_=$Ae(p),S=zAe(p,y),T=y.map(j=>({age:(new Date(j.date).getTime()-new Date(p.birthDate).getTime())/(1e3*60*60*24),[p.id]:j.kg}));p.birthWeight&&T.unshift({age:0,[p.id]:p.birthWeight});const A=[60,90,180,270].map(j=>({days:j,weight:tV(y,p.birthDate,j)}));return{animal:p,gdp:v,formattedAge:b,latestWeight:x,chartData:T,interpolatedWeights:A,weaningIndex:_,precocityIndex:S}},[t,n,r]);if(!i)return l.jsx("div",{className:"text-center p-10",children:l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Animal no encontrado."})});const{animal:a,gdp:s,formattedAge:o,latestWeight:c,chartData:u,interpolatedWeights:d,weaningIndex:f,precocityIndex:h}=i;return l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in pb-12",children:[l.jsxs("header",{className:"flex items-center pt-8 pb-4 px-4",children:[l.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(Zn,{size:24})}),l.jsxs("div",{className:"text-center flex-grow",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:a.id}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Perfil de Crecimiento"})]}),l.jsx("div",{className:"w-8"})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 px-4",children:[l.jsx(Wu,{icon:El,label:"Peso Actual",value:c.toFixed(2),unit:"Kg"}),l.jsx(Wu,{icon:gs,label:"GDP General",value:s.overall?(s.overall*1e3).toFixed(0):"N/A",unit:"g/día"}),l.jsx(Wu,{icon:ro,label:"Edad Actual",value:o}),l.jsx(Wu,{icon:jG,label:"Nº Pesajes",value:u.length})]}),(f||h)&&l.jsxs("div",{className:"grid grid-cols-2 gap-4 px-4",children:[f&&l.jsx(Wu,{icon:JG,label:"Índice Destete (60d)",value:f.toFixed(2),unit:"Kg",colorClass:"border-amber-400/50"}),h&&l.jsx(Wu,{icon:XG,label:"Índice Precocidad (7m)",value:h.toFixed(2),unit:"Kg",colorClass:"border-amber-400/50"})]}),l.jsx("div",{className:"px-4",children:l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Curva de Crecimiento"}),l.jsx("div",{className:"w-full h-64",children:l.jsx(zn,{children:l.jsxs(eV,{data:u,margin:{top:5,right:20,left:-10,bottom:5},children:[l.jsx(vg,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),l.jsx(Sn,{dataKey:"age",type:"number",domain:["dataMin","dataMax"],tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},label:{value:"Edad (días)",position:"insideBottom",offset:-5,fill:"rgba(255,255,255,0.5)"}}),l.jsx(kn,{orientation:"right",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},label:{value:"Peso (Kg)",angle:-90,position:"insideRight",fill:"rgba(255,255,255,0.5)"}}),l.jsx(Mt,{content:l.jsx(dNe,{})}),l.jsx(Ca,{verticalAlign:"top",height:36}),l.jsx(eu,{type:"monotone",dataKey:a.id,stroke:"#34C759",strokeWidth:2.5,dot:{r:4},activeDot:{r:6}})]})})})]})}),l.jsx("div",{className:"px-4",children:l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Hitos de Crecimiento (Pesos Estimados)"}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:d.map(({days:p,weight:y})=>l.jsxs("div",{className:"bg-black/20 p-3 rounded-lg text-center",children:[l.jsxs("p",{className:"text-sm text-zinc-400",children:["Peso a los ",p," días"]}),l.jsx("p",{className:"text-xl font-bold text-white",children:y?`${y.toFixed(2)} Kg`:"---"})]},p))})]})})]})}const hNe=t=>new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(r.result.split(",")[1]),r.onerror=i=>n(i)}),pNe=({onImageSelect:t})=>{const e=k.useRef(null),n=r=>{var i;(i=r.target.files)!=null&&i[0]&&t(r.target.files[0])};return l.jsxs("div",{className:"space-y-4 animate-fade-in",children:[l.jsx("input",{type:"file",ref:e,accept:"image/*",onChange:n,className:"hidden"}),l.jsxs("button",{onClick:()=>{var r,i;(r=e.current)==null||r.setAttribute("capture","environment"),(i=e.current)==null||i.click()},className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-blue-400 text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[l.jsx(hG,{className:"w-12 h-12 mb-2 text-blue-400"}),l.jsx("span",{className:"text-lg font-semibold",children:"Tomar Foto"}),l.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Usa la cámara para escanear"})]}),l.jsxs("button",{onClick:()=>{var r,i;(r=e.current)==null||r.removeAttribute("capture"),(i=e.current)==null||i.click()},className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-green-400 text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[l.jsx(_G,{className:"w-12 h-12 mb-2 text-green-400"}),l.jsx("span",{className:"text-lg font-semibold",children:"Seleccionar Archivo"}),l.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Elige una foto de tu galería"})]})]})};function mNe({onBack:t}){const[e,n]=k.useState("capture"),[r,i]=k.useState(""),[a,s]=k.useState(""),o=async c=>{var u,d;n("loading"),i(""),s("");try{const f=await hNe(c),v=await fetch("https://vision.googleapis.com/v1/images:annotate?key=AIzaSyAsHrxI8e8prsvYNvx992YyC26n592GfWk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({requests:[{image:{content:f},features:[{type:"TEXT_DETECTION"}]}]})});if(!v.ok){const _=await v.json();throw new Error(_.error.message||"Error en la API de Google Vision.")}const x=(d=(u=(await v.json()).responses[0])==null?void 0:u.fullTextAnnotation)==null?void 0:d.text;if(x)s(x),n("verification");else throw new Error("No se pudo detectar texto en la imagen. Intenta con una foto más clara.")}catch(f){i(f.message||"Ocurrió un error inesperado."),n("error")}};return l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4",children:[l.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[l.jsx("button",{onClick:t,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(Zn,{size:24})}),l.jsxs("div",{className:"text-center flex-grow",children:[l.jsx("h1",{className:"text-4xl font-bold tracking-tight text-white",children:"Escanear Cuaderno"}),l.jsx("p",{className:"text-xl text-zinc-400",children:"Digitalización Asistida"})]}),l.jsx("div",{className:"w-8"})]}),e==="capture"&&l.jsx(pNe,{onImageSelect:o}),e==="loading"&&l.jsxs("div",{className:"text-center py-20 animate-fade-in",children:[l.jsx(xL,{className:"w-12 h-12 text-amber-400 mx-auto animate-spin"}),l.jsx("p",{className:"mt-4 text-zinc-400",children:"Analizando imagen con IA..."})]}),e==="verification"&&l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border animate-fade-in space-y-4",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase tracking-wider border-b border-brand-border pb-2",children:[l.jsx(mA,{}),l.jsx("span",{children:"Texto Reconocido"})]}),l.jsx("textarea",{readOnly:!0,value:a,className:"w-full h-48 bg-black/20 text-white p-3 rounded-lg border border-zinc-700"}),l.jsx("p",{className:"text-xs text-zinc-500 text-center",children:"Funcionalidad de autocompletado de pesajes próximamente."}),l.jsx("button",{onClick:()=>n("capture"),className:"w-full bg-zinc-700 hover:bg-zinc-600 text-white font-semibold py-2 px-4 rounded-lg",children:"Escanear Otra Imagen"})]}),e==="error"&&l.jsxs("div",{className:"bg-red-900/40 border border-red-500/50 rounded-2xl p-6 text-center animate-fade-in",children:[l.jsx(Ut,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),l.jsx("h2",{className:"text-lg font-semibold text-white mb-2",children:"Ocurrió un Error"}),l.jsx("p",{className:"text-red-300",children:r}),l.jsx("button",{onClick:()=>n("capture"),className:"mt-6 bg-zinc-700 hover:bg-zinc-600 text-white font-semibold py-2 px-4 rounded-lg",children:"Intentar de Nuevo"})]})]})}const FM=152,NE=()=>{const{animals:t,breedingSeasons:e,sireLots:n,serviceRecords:r,fathers:i}=Ge();return{forecastBySeason:k.useMemo(()=>{var d;const s=[],o=e.filter(f=>f.status==="Activo");for(const f of o){const h=n.filter(v=>v.seasonId===f.id);if(h.length===0)continue;const p=new Set(h.map(v=>v.id)),y=t.filter(v=>v.sireLotId&&p.has(v.sireLotId));for(const v of y){const b=r.filter(S=>S.femaleId===v.id&&S.sireLotId===v.sireLotId&&new Date(S.serviceDate)>=new Date(f.startDate)&&new Date(S.serviceDate)<=new Date(f.endDate)).sort((S,T)=>new Date(T.serviceDate).getTime()-new Date(S.serviceDate).getTime())[0],x=n.find(S=>S.id===v.sireLotId);if(!x)continue;const _=((d=i.find(S=>S.id===x.sireId))==null?void 0:d.name)||x.sireId;if(b){const S=new Date(b.serviceDate);S.setDate(S.getDate()+FM),s.push({animal:v,dueDate:S,type:"Confirmada",sireId:x.sireId,sireName:_,seasonId:f.id})}else{const T=new Date(f.startDate);T.setDate(T.getDate()+10+FM),s.push({animal:v,dueDate:T,type:"Probable",sireId:x.sireId,sireName:_,seasonId:f.id})}}}const c=s.reduce((f,h)=>{const{seasonId:p}=h;return f[p]||(f[p]=[]),f[p].push(h),f},{});let u=Object.entries(c).map(([f,h])=>{const p=e.find(x=>x.id===f),y=h.map(x=>x.dueDate.getTime()),v=new Date(Math.min(...y)),b=new Date(Math.max(...y));return{seasonId:f,seasonName:p.name,projectedStartDate:h.length>0?v:null,projectedEndDate:h.length>0?b:null,events:h.sort((x,_)=>x.dueDate.getTime()-_.dueDate.getTime()),totalEvents:h.length,confirmedEvents:h.filter(x=>x.type==="Confirmada").length,probableEvents:h.filter(x=>x.type==="Probable").length,daysSinceLastSeason:null}}).sort((f,h)=>f.projectedStartDate.getTime()-h.projectedStartDate.getTime());if(u.length>1)for(let f=1;f<u.length;f++){const h=u[f].projectedStartDate,p=u[f-1].projectedEndDate,y=h.getTime()-p.getTime(),v=Math.ceil(y/(1e3*60*60*24));u[f].daysSinceLastSeason=v}return u},[t,e,n,r,i])}},gNe=`
  .rdp { --rdp-cell-size: 45px; --rdp-accent-color: #FF9500; --rdp-background-color: #2C2C2E; --rdp-accent-color-dark: #FF9500; --rdp-background-color-dark: #2C2C2E; --rdp-outline: 2px solid var(--rdp-accent-color); --rdp-border-radius: 12px; color: #FFF; width: 100%; }
  .rdp-caption_label, .rdp-nav_button { color: #FF9500; }
  .rdp-head_cell { color: #8e8e93; font-size: 0.8em; }
  .rdp-day_selected { background-color: var(--rdp-accent-color); color: #000; font-weight: bold; }
  .day-confirmed { position: relative; }
  .day-confirmed::after { content: ''; position: absolute; bottom: 6px; left: 50%; transform: translateX(-50%); width: 6px; height: 6px; border-radius: 50%; background-color: #34C759; }
  .day-probable { position: relative; }
  .day-probable::after { content: ''; position: absolute; bottom: 6px; left: 50%; transform: translateX(-50%); width: 6px; height: 6px; border-radius: 50%; background-color: #FF9500; opacity: 0.7; }
`,vNe=({seasonForecast:t,onClick:e})=>{var n,r;return l.jsxs("button",{onClick:e,className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border hover:border-brand-blue transition-colors",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:t.seasonName}),l.jsxs("p",{className:"text-sm text-zinc-400",children:[(n=t.projectedStartDate)==null?void 0:n.toLocaleDateString("es-VE",{month:"long",day:"numeric"})," - ",(r=t.projectedEndDate)==null?void 0:r.toLocaleDateString("es-VE",{month:"long",day:"numeric",year:"numeric"})]})]}),t.daysSinceLastSeason!==null&&t.daysSinceLastSeason>0&&l.jsxs("div",{className:"text-right flex-shrink-0 ml-4",children:[l.jsx("p",{className:"text-xs text-zinc-500",children:"Separación"}),l.jsxs("p",{className:"font-semibold text-white",children:[t.daysSinceLastSeason," días"]})]})]}),l.jsxs("div",{className:"mt-3 pt-3 border-t border-zinc-700/50 flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"font-bold text-2xl text-white",children:t.totalEvents}),l.jsx("p",{className:"text-xs text-zinc-400",children:"Partos"})]}),l.jsxs("div",{className:"text-left text-xs",children:[l.jsxs("p",{className:"flex items-center gap-1 text-brand-green",children:[l.jsx(Jr,{size:12})," Confirmados: ",t.confirmedEvents]}),l.jsxs("p",{className:"flex items-center gap-1 text-brand-orange",children:[l.jsx(xx,{size:12})," Probables: ",t.probableEvents]})]})]}),l.jsx(Pr,{className:"text-zinc-600"})]})]})},yNe=({forecastItem:t,onClick:e})=>l.jsxs("button",{onClick:e,className:"w-full text-left bg-black/20 rounded-lg p-3 flex justify-between items-center hover:bg-zinc-800/60 transition-colors",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-white",children:t.animal.id}),l.jsxs("p",{className:"text-xs text-zinc-400",children:["Reproductor: ",t.sireName]})]}),l.jsxs("div",{className:`flex items-center gap-2 text-sm font-semibold ${t.type==="Confirmada"?"text-brand-green":"text-brand-orange"}`,children:[t.type==="Confirmada"?l.jsx(Jr,{size:16}):l.jsx(xx,{size:16}),l.jsx("span",{children:t.type})]})]});function xNe({navigateTo:t}){const{forecastBySeason:e}=NE(),[n,r]=k.useState("cards"),[i,a]=k.useState(void 0),[s,o]=k.useState(new Date),c=k.useMemo(()=>e.flatMap(f=>f.events),[e]),u=k.useMemo(()=>({confirmed:c.filter(f=>f.type==="Confirmada").map(f=>f.dueDate),probable:c.filter(f=>f.type==="Probable").map(f=>f.dueDate)}),[c]),d=k.useMemo(()=>i?c.filter(f=>f.dueDate.getFullYear()===i.getFullYear()&&f.dueDate.getMonth()===i.getMonth()&&f.dueDate.getDate()===i.getDate()):[],[c,i]);return l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4",children:[l.jsx("style",{children:gNe}),l.jsxs("header",{className:"text-center",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Calendario de Partos"}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Proyecciones del Rebaño"})]}),l.jsxs("div",{className:"flex justify-center p-1 bg-zinc-800 rounded-xl",children:[l.jsxs("button",{onClick:()=>r("cards"),className:`w-1/2 py-2 text-sm font-semibold rounded-lg flex items-center justify-center gap-2 transition-colors ${n==="cards"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:[l.jsx(yL,{size:16})," Temporadas"]}),l.jsxs("button",{onClick:()=>r("calendar"),className:`w-1/2 py-2 text-sm font-semibold rounded-lg flex items-center justify-center gap-2 transition-colors ${n==="calendar"?"bg-zinc-600 text-white":"text-zinc-400"}`,children:[l.jsx(ro,{size:16})," Calendario"]})]}),n==="cards"&&l.jsx("div",{className:"space-y-3",children:e.length>0?e.map(f=>l.jsx(vNe,{seasonForecast:f,onClick:()=>t({name:"birthing-season-detail",seasonId:f.seasonId})},f.seasonId)):l.jsxs("div",{className:"text-center py-10 bg-brand-glass rounded-2xl flex flex-col items-center gap-2",children:[l.jsx(xl,{size:32,className:"text-zinc-600"}),l.jsx("p",{className:"text-zinc-400",children:"No hay temporadas de parto activas o proyectadas."})]})}),n==="calendar"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-2 border border-brand-border",children:l.jsx(Xf,{mode:"single",selected:i,onSelect:a,month:s,onMonthChange:o,locale:yE,modifiers:{confirmed:u.confirmed,probable:u.probable},modifiersClassNames:{confirmed:"day-confirmed",probable:"day-probable"},showOutsideDays:!0})}),i&&l.jsxs("div",{className:"space-y-3 pt-2",children:[l.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Proyecciones para el ",i.toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"})]}),d.length>0?l.jsx("div",{className:"space-y-2",children:d.map(f=>l.jsx(yNe,{forecastItem:f,onClick:()=>t({name:"rebano-profile",animalId:f.animal.id})},f.animal.id))}):l.jsx("div",{className:"text-center py-6 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-500",children:"No hay partos proyectados para este día."})})]})]})]})}const bNe=({forecastItem:t,onClick:e})=>l.jsxs("button",{onClick:e,className:"w-full text-left bg-black/20 rounded-lg p-3 flex justify-between items-center hover:bg-zinc-800/60 transition-colors",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-white",children:t.animal.id}),l.jsxs("p",{className:"text-xs text-zinc-400",children:["Reproductor: ",t.sireName]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:`flex items-center gap-2 text-sm font-semibold ${t.type==="Confirmada"?"text-brand-green":"text-brand-orange"}`,children:[t.type==="Confirmada"?l.jsx(Jr,{size:16}):l.jsx(xx,{size:16}),l.jsx("span",{children:t.type})]}),l.jsx(Pr,{className:"text-zinc-600"})]})]}),wNe=t=>{const e=new Date(t.getUTCFullYear(),t.getUTCMonth(),1),n=e.getUTCDay()===0?6:e.getUTCDay()-1,r=t.getUTCDate(),i=Math.ceil((r+n)/7),a=t.toLocaleString("es-VE",{month:"short",timeZone:"UTC"});return`${a.charAt(0).toUpperCase()+a.slice(1)} - Sem ${i}`};function _Ne({seasonId:t,onBack:e,navigateTo:n}){const{forecastBySeason:r}=NE(),i=k.useMemo(()=>r.find(s=>s.seasonId===t),[r,t]),a=k.useMemo(()=>{if(!i)return[];const s={};return i.events.forEach(o=>{const c=o.dueDate,u=wNe(c);if(!s[u]){const d=c.getUTCDate(),f=c.getUTCDay()===0?6:c.getUTCDay()-1,h=new Date(c);h.setUTCDate(d-f),s[u]={count:0,startDate:h}}s[u].count++}),Object.entries(s).map(([o,c])=>({name:o,partos:c.count,startDate:c.startDate})).sort((o,c)=>o.startDate.getTime()-c.startDate.getTime())},[i]);return i?l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4",children:[l.jsxs("header",{className:"flex items-center pt-8 pb-4",children:[l.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(Zn,{size:24})}),l.jsxs("div",{className:"text-center flex-grow",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:i.seasonName}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Detalle de Proyección de Partos"})]}),l.jsx("div",{className:"w-8"})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-white mb-4",children:[l.jsx(yx,{size:20})," Proyección Semanal de Partos"]}),l.jsx("div",{className:"w-full h-56",children:l.jsx(zn,{children:l.jsxs(fi,{data:a,margin:{top:5,right:10,left:-20,bottom:5},children:[l.jsx(vg,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),l.jsx(Sn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(kn,{allowDecimals:!1,tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(Mt,{cursor:{fill:"rgba(255, 255, 255, 0.1)"},contentStyle:{backgroundColor:"rgba(44, 44, 46, 0.8)",border:"1px solid #444",borderRadius:"12px"}}),l.jsx(Fn,{dataKey:"partos",name:"Nº de Partos",fill:"#007AFF",radius:[4,4,0,0]})]})})})]}),l.jsxs("div",{className:"space-y-3 pt-4",children:[l.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Lista de Animales (",i.totalEvents,")"]}),l.jsx("div",{className:"space-y-2",children:i.events.map(s=>l.jsx(bNe,{forecastItem:s,onClick:()=>n({name:"rebano-profile",animalId:s.animal.id})},s.animal.id))})]})]}):l.jsxs("div",{className:"text-center p-10",children:[l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Temporada de Partos no encontrada."}),l.jsx("button",{onClick:e,className:"mt-4 text-brand-amber",children:"Volver"})]})}const SNe=[{id:"rebano",name:"Rebaño",icon:ig,color:"bg-amber-600"},{id:"lactokeeper",name:"LactoKeeper",icon:cu,color:"bg-brand-blue"},{id:"kilos",name:"Kilos",icon:El,color:"bg-brand-green"},{id:"salud",name:"StockCare",icon:wx,color:"bg-teal-500"},{id:"cents",name:"Cents",icon:Wc,color:"bg-yellow-500"}],_g=({onSwitchModule:t})=>{const[e,n]=k.useState(!1),r=i=>{n(!1),t(i)};return l.jsxs("div",{className:"fixed bottom-24 right-4 z-40 flex flex-col items-end gap-4",children:[l.jsx("div",{className:`flex flex-col items-end gap-4 transition-all duration-300 ease-in-out overflow-hidden ${e?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:SNe.map(i=>l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"bg-black/60 backdrop-blur-md text-white text-sm font-semibold px-3 py-1 rounded-md shadow-lg",children:i.name}),l.jsx("button",{onClick:()=>r(i.id),className:`w-14 h-14 rounded-full flex items-center justify-center text-white shadow-lg ${i.color} transform transition-transform hover:scale-110`,"aria-label":`Cambiar al módulo ${i.name}`,children:l.jsx(i.icon,{size:28})})]},i.id))}),l.jsx("button",{onClick:()=>n(!e),className:"w-16 h-16 rounded-full flex items-center justify-center text-black bg-brand-amber shadow-2xl shadow-black/50 transform transition-transform duration-200 hover:scale-110 pointer-events-auto","aria-label":"Seleccionar módulo",children:l.jsx("div",{className:`transform transition-transform duration-300 ${e?"rotate-180 scale-75":"rotate-0"}`,children:e?l.jsx(Cl,{size:32}):l.jsx(PG,{size:32})})})]})};function jNe(t){return ho({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224l0 32 0 160c0 17.7 14.3 32 32 32l32 0c17.7 0 32-14.3 32-32l0-88.2c9.9 6.6 20.6 12 32 16.1l0 24.2c0 8.8 7.2 16 16 16s16-7.2 16-16l0-16.9c5.3 .6 10.6 .9 16 .9s10.7-.3 16-.9l0 16.9c0 8.8 7.2 16 16 16s16-7.2 16-16l0-24.2c11.4-4 22.1-9.4 32-16.1l0 88.2c0 17.7 14.3 32 32 32l32 0c17.7 0 32-14.3 32-32l0-160 32 32 0 49.5c0 9.5 2.8 18.7 8.1 26.6L530 427c8.8 13.1 23.5 21 39.3 21c22.5 0 41.9-15.9 46.3-38l20.3-101.6c2.6-13-.3-26.5-8-37.3l-3.9-5.5 0-81.6c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 14.4-52.9-74.1C496 86.5 452.4 64 405.9 64L272 64l-16 0-64 0-48 0C77.7 64 24 117.7 24 184l0 54C9.4 249.8 0 267.8 0 288l0 17.6c0 8 6.4 14.4 14.4 14.4C46.2 320 72 294.2 72 262.4l0-6.4 0-32 0-40c0-24.3 12.1-45.8 30.5-58.9C98.3 135.9 96 147.7 96 160l0 64zM560 336a16 16 0 1 1 32 0 16 16 0 1 1 -32 0zM166.6 166.6c-4.2-4.2-6.6-10-6.6-16c0-12.5 10.1-22.6 22.6-22.6l178.7 0c12.5 0 22.6 10.1 22.6 22.6c0 6-2.4 11.8-6.6 16l-23.4 23.4C332.2 211.8 302.7 224 272 224s-60.2-12.2-81.9-33.9l-23.4-23.4z"},child:[]}]})(t)}const ANe={idle:{Icon:xG,color:"text-green-500",label:"Datos sincronizados"},syncing:{Icon:vG,color:"text-amber-500 animate-spin-slow",label:"Sincronizando datos..."},offline:{Icon:yG,color:"text-red-500",label:"Sin conexión"}},Sg=({status:t})=>{const{Icon:e,color:n,label:r}=ANe[t];return l.jsx("div",{className:"flex items-center gap-2",title:r,children:l.jsx(e,{className:`w-5 h-5 ${n}`})})};function PNe({initialPage:t,onSwitchModule:e}){const{syncStatus:n}=Ge(),[r,i]=k.useState({name:"lots-dashboard"}),[a,s]=k.useState([]);k.useEffect(()=>{t&&(i(t),s([]))},[t]);const o=[{page:{name:"lots-dashboard"},label:"Lotes",icon:TL,mapsTo:["lots-dashboard","lot-detail","breeding-season-detail","sire-lot-detail","feeding-plan","batch-treatment"]},{page:{name:"herd"},label:"Rebaño",icon:jNe,mapsTo:["herd","rebano-profile","manage-lots","lactation-profile","growth-profile"]},{page:{name:"farm-calendar"},label:"Calendario",icon:pL,mapsTo:["farm-calendar","birthing-season-detail"]},{page:{name:"add-animal"},label:"Añadir",icon:Pl,mapsTo:["add-animal","ocr"]}],c=h=>{s(p=>[...p,r]),i(h)},u=()=>{const h=a.pop();h?(s([...a]),i(h)):i({name:"lots-dashboard"})},d=h=>{s([]),i(h)},f=()=>{switch(r.name){case"lots-dashboard":return l.jsx(bM,{navigateTo:c});case"lot-detail":return l.jsx(bCe,{lotName:r.lotName,onBack:u,navigateTo:c});case"breeding-season-detail":return l.jsx(ZCe,{seasonId:r.seasonId,onBack:u,navigateTo:c});case"sire-lot-detail":return l.jsx(rNe,{lotId:r.lotId,onBack:u,navigateTo:c});case"herd":return l.jsx(kCe,{navigateTo:c,locationFilter:r.locationFilter});case"manage-lots":return l.jsx(HCe,{onBack:()=>d({name:"herd"})});case"management":return l.jsx(qCe,{onSelectAnimal:h=>c({name:"rebano-profile",animalId:h})});case"add-animal":return l.jsx(ACe,{onBack:()=>d({name:"herd"})});case"rebano-profile":return l.jsx(WCe,{animalId:r.animalId,onBack:u,navigateTo:c});case"lactation-profile":return l.jsx(sNe,{animalId:r.animalId,onBack:u,navigateTo:c});case"growth-profile":return l.jsx(fNe,{animalId:r.animalId,onBack:u});case"ocr":return l.jsx(mNe,{onBack:u});case"feeding-plan":return l.jsx(lNe,{lotName:r.lotName,onBack:u});case"batch-treatment":return l.jsx(uNe,{lotName:r.lotName,onBack:u});case"farm-calendar":return l.jsx(xNe,{navigateTo:c});case"birthing-season-detail":return l.jsx(_Ne,{seasonId:r.seasonId,onBack:u,navigateTo:c});default:return l.jsx(bM,{navigateTo:c})}};return l.jsxs("div",{className:"font-sans text-gray-200 min-h-screen animate-fade-in",children:[l.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-gray-900/80 backdrop-blur-lg border-b border-brand-border",children:l.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ig,{className:"text-brand-orange",size:28}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-bold text-white leading-none",children:"GanaderoOS"}),l.jsx("p",{className:"text-xs text-zinc-400 leading-none",children:"Rebaño"})]})]}),l.jsx("div",{className:"flex items-center gap-4",children:l.jsx(Sg,{status:n})})]})}),l.jsx("main",{className:"pt-16 pb-24",children:f()}),l.jsx(_g,{onSwitchModule:e}),l.jsxs("nav",{className:"fixed bottom-0 left-0 right-0 z-20 bg-black/30 backdrop-blur-xl border-t border-white/20 flex justify-around",children:[o.map(h=>{const p=h.mapsTo.includes(r.name);return l.jsxs("button",{onClick:()=>d(h.page),className:`relative flex flex-col items-center justify-center pt-3 pb-2 w-full transition-colors ${p?"text-amber-400":"text-gray-500 hover:text-white"}`,children:[l.jsx(h.icon,{className:"w-6 h-6"}),l.jsx("span",{className:"text-xs font-semibold mt-1",children:h.label})]},h.label)}),l.jsxs("button",{onClick:()=>Kd.signOut(),className:"relative flex flex-col items-center justify-center pt-3 pb-2 w-full text-gray-500 hover:text-red-400 transition-colors",children:[l.jsx(wL,{className:"w-6 h-6"}),l.jsx("span",{className:"text-xs font-semibold mt-1",children:"Salir"})]})]})]})}function VM({onNavigateToAnalysis:t}){const{animals:e,weighings:n,parturitions:r,isLoading:i}=Ge(),[a,s]=k.useState("current"),[o,c]=k.useState(!1),[u,d]=k.useState(!1),f=k.useMemo(()=>{if(i||!n.length||!e.length)return{herdAverage:0,activeGoats:0,herdLactationCurve:[],gaussData:{distribution:[],mean:0,stdDev:0}};let h=0;if(n.length>0){const A=n.reduce((j,P)=>P.date>j?P.date:j,n[0].date);h=new Set(n.filter(j=>j.date===A).map(j=>j.goatId)).size}let p=n;if(a==="current"){const A=new Set(r.filter(j=>j.status==="activa").map(j=>j.goatId));p=n.filter(j=>A.has(j.goatId))}const y={};p.forEach(A=>{const j=r.filter(O=>O.goatId===A.goatId&&new Date(A.date)>=new Date(O.parturitionDate)).sort((O,D)=>new Date(D.parturitionDate).getTime()-new Date(O.parturitionDate).getTime())[0];if(!j)return;const P=Yf(j.parturitionDate,A.date);y[P]||(y[P]={totalKg:0,count:0}),y[P].totalKg+=A.kg,y[P].count++});const v=Object.entries(y).map(([A,j])=>({del:parseInt(A),kg:j.totalKg/j.count,name:"Promedio Rebaño"})).sort((A,j)=>A.del-j.del),b=e.map(A=>{const j=n.filter(O=>O.goatId===A.id);return j.length===0?null:{avg:j.reduce((O,D)=>O+D.kg,0)/j.length}}).filter(Boolean),x=b.length>0?b.reduce((A,j)=>A+j.avg,0)/b.length:0,_=b.length>0?Math.sqrt(b.reduce((A,j)=>A+Math.pow(j.avg-x,2),0)/b.length):0,S=[];if(b.length>0){const A=Math.floor(Math.min(...b.map(P=>P.avg))*4)/4,j=Math.ceil(Math.max(...b.map(P=>P.avg))*4)/4;for(let P=A;P<=j;P+=.25){const O=P,D=P+.25,M=b.filter(z=>z.avg>=O&&z.avg<D).length;M>0&&S.push({range:`${O.toFixed(2)}`,count:M})}}const T={distribution:S,mean:x,stdDev:_};return{herdAverage:n.length>0?n.reduce((A,j)=>A+j.kg,0)/n.length:0,activeGoats:h,herdLactationCurve:v,gaussData:T}},[e,n,r,i,a]);return i?l.jsx("div",{className:"text-center p-10",children:l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando datos del rebaño..."})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 px-4",children:[l.jsxs("header",{className:"text-center pt-4 pb-4",children:[l.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Dashboard de Producción"}),l.jsx("p",{className:"text-md text-zinc-400",children:"Análisis General de LactoKeeper"})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-2 text-xs uppercase tracking-wider",children:[l.jsx(pA,{size:14}),l.jsx("span",{children:"Promedio Global"})]}),l.jsxs("p",{className:"text-4xl font-bold tracking-tight text-white",children:[f.herdAverage.toFixed(2)," ",l.jsx("span",{className:"text-2xl font-medium text-zinc-400",children:"Kg"})]})]}),l.jsxs("button",{onClick:t,className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border text-left hover:border-brand-orange transition-colors",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-2 text-xs uppercase tracking-wider",children:[l.jsx(MG,{}),l.jsx("span",{children:"Animales en Ordeño"})]}),l.jsx("p",{className:"text-4xl font-bold tracking-tight text-white",children:f.activeGoats})]})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsxs("div",{className:"flex justify-between items-center border-b border-brand-border pb-2 mb-4",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase tracking-wider",children:[l.jsx(JC,{size:16}),l.jsx("span",{children:"Curva de Lactancia"}),l.jsx("button",{onClick:()=>c(!0),className:"text-zinc-500 hover:text-white transition-colors",children:l.jsx(R_,{size:14})})]}),l.jsxs("div",{className:"flex bg-zinc-900/80 rounded-lg p-0.5",children:[l.jsx("button",{onClick:()=>s("current"),className:`px-2 py-0.5 text-xs font-semibold rounded-md transition-colors ${a==="current"?"bg-brand-orange text-white":"text-zinc-400 hover:bg-zinc-700/50"}`,children:"Actual"}),l.jsx("button",{onClick:()=>s("historical"),className:`px-2 py-0.5 text-xs font-semibold rounded-md transition-colors ${a==="historical"?"bg-brand-orange text-white":"text-zinc-400 hover:bg-zinc-700/50"}`,children:"Histórico"})]})]}),l.jsx("div",{className:"w-full h-48",children:l.jsx(zn,{children:l.jsxs(MAe,{data:f.herdLactationCurve,margin:{top:5,right:10,left:0,bottom:5},children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"lactationGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[l.jsx("stop",{offset:"0%",stopColor:"#FF9500",stopOpacity:.7}),l.jsx("stop",{offset:"80%",stopColor:"#34C759",stopOpacity:.1})]})}),l.jsx(Sn,{dataKey:"del",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1}),l.jsx(kn,{orientation:"right",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1,domain:["dataMin - 0.5","dataMax + 0.5"],width:30}),l.jsx(Mt,{content:l.jsx(nu,{})}),l.jsx(Rl,{type:"monotone",dataKey:"kg",stroke:"#FF9500",strokeWidth:2.5,fill:"url(#lactationGradient)"})]})})})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsx("div",{className:"flex justify-between items-center border-b border-brand-border pb-2 mb-4",children:l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase tracking-wider",children:[l.jsx(JC,{size:16}),l.jsx("span",{children:"Distribución del Rebaño"}),l.jsx("button",{onClick:()=>d(!0),className:"text-zinc-500 hover:text-white transition-colors",children:l.jsx(R_,{size:14})})]})}),l.jsx("div",{className:"w-full h-48",children:l.jsx(zn,{children:l.jsxs(fi,{data:f.gaussData.distribution,margin:{top:10,right:10,left:0,bottom:0},children:[l.jsx(vg,{strokeDasharray:"3 3",stroke:"rgba(255, 255, 255, 0.1)"}),l.jsx(Sn,{dataKey:"range",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1}),l.jsx(kn,{orientation:"right",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},stroke:"rgba(255,255,255,0.3)",tickLine:!1,axisLine:!1,allowDecimals:!1,width:30}),l.jsx(Mt,{content:l.jsx(nu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),l.jsx(Fn,{dataKey:"count",fill:"rgba(255, 255, 255, 0.4)",name:"Nº de Cabras"}),l.jsx(mb,{x:f.gaussData.mean.toFixed(2),stroke:"#34C759",strokeWidth:2,label:{value:"μ",fill:"#34C759",position:"insideTopLeft"}})]})})})]})]}),l.jsx(st,{isOpen:o,onClose:()=>c(!1),title:"¿Qué es la Curva de Lactancia del Rebaño?",children:l.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[l.jsx("p",{children:'Este gráfico revela la **"personalidad productiva"** de tu rebaño. No es un promedio simple, sino una línea de tiempo del rendimiento promedio.'}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-white mb-1",children:"¿Cómo se Calcula?"}),l.jsx("p",{className:"text-sm",children:'Para cada "Día en Leche" (DEL) en el eje horizontal, el sistema agrupa los pesajes de **todos los animales** que han pasado por ese día de su ciclo y calcula el promedio.'}),l.jsxs("p",{className:"text-sm mt-2 bg-black/20 p-2 rounded-md",children:[l.jsx("strong",{children:"Ejemplo:"}),' El punto en "DEL 50" es el promedio de todos los pesajes que se hicieron a cualquier animal cuando estaba exactamente en su día 50 de lactancia.']})]}),l.jsx("p",{className:"pt-2 border-t border-zinc-700/80",children:"Te permite responder visualmente a preguntas clave como: ¿Cuándo ocurre el pico de producción del rebaño? y ¿Qué tan persistente es la lactancia después del pico?"})]})}),l.jsx(st,{isOpen:u,onClose:()=>d(!1),title:"¿Qué es la Distribución del Rebaño?",children:l.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[l.jsx("p",{children:"Este gráfico, conocido como Campana de Gauss o distribución normal, clasifica el rendimiento promedio de cada animal en el rebaño."}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-white mb-1",children:"Media (μ)"}),l.jsx("p",{className:"text-sm",children:"La línea verde marcada como **μ** representa el **promedio de producción de todo el rebaño**. Es el punto de referencia central."})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-white mb-1",children:"Las Barras"}),l.jsx("p",{className:"text-sm",children:"Cada barra muestra cuántos animales caen dentro de un rango específico de producción. Una barra alta en el centro (cerca de μ) indica que la mayoría de tu rebaño tiene un rendimiento promedio y consistente."})]}),l.jsx("p",{className:"pt-2 border-t border-zinc-700/80",children:"Esta herramienta es clave para identificar rápidamente a los animales de élite (extremo derecho) y a los que podrían necesitar atención (extremo izquierdo)."})]})})]})}const PV=(t,e,n,r,i)=>k.useMemo(()=>{if(!t.length||!e.length)return{classifiedAnimals:[],distribution:[],mean:0,stdDev:0,weightedMean:0};const a=t.reduce((v,b)=>{const x=e.find(P=>P.id===b.goatId);if(!x)return v;const _=r.filter(P=>P.goatId===x.id&&new Date(P.parturitionDate)<=new Date(b.date)).sort((P,O)=>new Date(O.parturitionDate).getTime()-new Date(P.parturitionDate).getTime())[0];if(!_)return v;const S=Yf(_.parturitionDate,b.date),T=i?RAe(b.kg,S):b.kg,E=n.filter(P=>P.goatId===x.id).sort((P,O)=>new Date(O.date).getTime()-new Date(P.date).getTime());let A="single";const j=E.findIndex(P=>P.date===b.date);if(j!==-1&&j+1<E.length){const P=E[j+1],O=b.kg-P.kg,D=.15;O>D?A="up":O<-D?A="down":A="stable"}return v.push({...x,latestWeighing:b.kg,weighingId:b.id,del:S,score:T,trend:A,date:b.date}),v},[]);if(!a.length)return{classifiedAnimals:[],distribution:[],mean:0,stdDev:0,weightedMean:0};const s=i?"score":"latestWeighing",o=a.reduce((v,b)=>v+b[s],0)/a.length,c=Math.sqrt(a.reduce((v,b)=>v+Math.pow(b[s]-o,2),0)/a.length),u=o-.4*c,d=o+.4*c,f=a.map(v=>{const b=v[s];let x="Promedio";return c>.1&&(b<u?x="Pobre":b>d&&(x="Sobresaliente")),{...v,classification:x}}),h=[{name:"Pobre",count:f.filter(v=>v.classification==="Pobre").length,fill:"#FF3B30"},{name:"Promedio",count:f.filter(v=>v.classification==="Promedio").length,fill:"#6B7280"},{name:"Sobresaliente",count:f.filter(v=>v.classification==="Sobresaliente").length,fill:"#34C759"}],p=a.length>0?a.reduce((v,b)=>v+b.latestWeighing,0)/a.length:0,y=a.length>0?a.reduce((v,b)=>v+b.score,0)/a.length:0;return{classifiedAnimals:f,distribution:h,mean:p,stdDev:c,weightedMean:y}},[t,e,n,r,i]),ENe=({trend:t,isLongTrend:e})=>{if(!t||t==="single")return null;const n={up:{Icon:Qp,color:"text-brand-green"},down:{Icon:Xp,color:"text-brand-red"},stable:{Icon:_L,color:"text-zinc-400"}},{Icon:r,color:i}=n[t];return l.jsxs("div",{className:`flex items-center font-semibold text-sm ${i}`,children:[l.jsx(r,{size:18,strokeWidth:3}),e&&l.jsx("span",{className:"ml-0.5 font-bold",children:"+"})]})},EV=(t,e)=>k.useMemo(()=>{if(!t||!e)return{trend:null,difference:0,isLongTrend:!1,lastTwoWeighings:[]};const r=e.filter(d=>d.goatId===t).sort((d,f)=>new Date(f.date).getTime()-new Date(d.date).getTime());if(r.length<1)return{trend:null,difference:0,isLongTrend:!1,lastTwoWeighings:[]};if(r.length===1)return{trend:"single",difference:0,isLongTrend:!1,lastTwoWeighings:[r[0]]};const i=r[0],a=r[1],s=i.kg-a.kg,o=.15;let c;s>o?c="up":s<-o?c="down":c="stable";let u=!1;if(r.length>=3){const d=r[2],f=a.kg-d.kg,h=s>o&&f>o,p=s<-o&&f<-o;(h||p)&&(u=!0)}return{trend:c,difference:s,isLongTrend:u,lastTwoWeighings:[i,a]}},[t,e]),vv=({title:t,value:e,unit:n,icon:r,onClick:i})=>l.jsxs("button",{onClick:i,className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border text-left hover:border-brand-orange transition-colors w-full",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[l.jsx(r,{size:14}),l.jsx("span",{children:t})]}),l.jsxs("p",{className:"text-2xl font-bold text-white mt-1",children:[e," ",l.jsx("span",{className:"text-lg text-zinc-400",children:n})]})]}),p1=({animal:t,onSelectAnimal:e,onTrendClick:n,isNewEntry:r})=>{const{weighings:i}=Ge(),{trend:a,isLongTrend:s}=EV(t.id,i),o={Sobresaliente:"bg-brand-green",Promedio:"bg-gray-500",Pobre:"bg-brand-red"},c=d=>{d.stopPropagation(),!r&&a&&a!=="single"&&n(t)},u=$a(t.birthDate);return l.jsxs("div",{onClick:()=>e(t.id),className:"relative w-full cursor-pointer text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-brand-orange transition-colors",children:[l.jsx("div",{className:`absolute top-3 right-3 w-2.5 h-2.5 rounded-full ${t.latestWeighing>0?o[t.classification]:"bg-transparent"}`,title:`Rendimiento: ${t.classification}`}),l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),l.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:[t.sex," | ",u," | Lote: ",t.location||"Sin Asignar"]})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"font-semibold text-brand-orange",children:t.latestWeighing>0?`${t.latestWeighing.toFixed(2)} Kg`:"Sin Pesar"}),t.del>0&&l.jsxs("p",{className:"text-xs text-zinc-400",children:["DEL: ",t.del]})]}),r?l.jsx("span",{title:"Primer Ingreso al Control Lechero",className:"w-8 h-8 flex items-center justify-center rounded-full bg-green-500/20 text-brand-green",children:l.jsx(bL,{size:18,strokeWidth:3})}):l.jsx("button",{onClick:c,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-white/10 transition-colors disabled:cursor-not-allowed",disabled:!a||a==="single",children:l.jsx(ENe,{trend:a,isLongTrend:s})}),l.jsx(Pr,{className:"text-zinc-600"})]})]})},TNe=({animalId:t})=>{var i,a;const{weighings:e}=Ge(),{lastTwoWeighings:n,difference:r}=EV(t,e);return n.length<2?l.jsx("p",{children:"No hay suficientes datos para comparar."}):l.jsxs("div",{className:"text-center text-white space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"text-sm text-zinc-400",children:["Pesaje Anterior (",new Date(n[1].date+"T00:00:00").toLocaleDateString(),")"]}),l.jsxs("p",{className:"text-2xl font-semibold",children:[((i=n[1])==null?void 0:i.kg.toFixed(2))||"N/A"," Kg"]})]}),l.jsxs("div",{children:[l.jsxs("p",{className:"text-sm text-zinc-400",children:["Último Pesaje (",new Date(n[0].date+"T00:00:00").toLocaleDateString(),")"]}),l.jsxs("p",{className:"text-2xl font-semibold",children:[((a=n[0])==null?void 0:a.kg.toFixed(2))||"N/A"," Kg"]})]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-zinc-400 text-base mb-1",children:"Diferencia"}),l.jsxs("p",{className:`text-3xl font-bold ${r>.15?"text-brand-green":r<-.15?"text-brand-red":"text-zinc-400"}`,children:[r>0?"+":"",r.toFixed(2)," Kg"]})]})]})},CNe=t=>{const{x:e,y:n,width:r,value:i,total:a}=t;if(a===0||i===0)return null;const s=(i/a*100).toFixed(0);return l.jsx("text",{x:e+r/2,y:n+18,fill:"#fff",textAnchor:"middle",fontSize:"12px",fontWeight:"bold",children:`${s}%`})};function NNe({onSelectAnimal:t}){const{animals:e,parturitions:n,weighings:r,isLoading:i}=Ge(),[a,s]=k.useState(!1),[o,c]=k.useState("all"),[u,d]=k.useState("all"),[f,h]=k.useState("all"),[p,y]=k.useState("all"),[v,b]=k.useState(null),[x,_]=k.useState(null),[S,T]=k.useState(!1),[E,A]=k.useState(0),[j,P]=k.useState(""),{weighingsByDate:O,availableDates:D}=k.useMemo(()=>{const Q={};r.forEach(xe=>{Q[xe.date]||(Q[xe.date]=[]),Q[xe.date].push(xe)});const Pe=Object.keys(Q).sort((xe,de)=>new Date(de).getTime()-new Date(xe).getTime());return{weighingsByDate:Q,availableDates:Pe}},[r]),M=D[E],z=k.useMemo(()=>{if(!M)return[];const Q=O[M]||[],Pe=new Map;return Q.forEach(xe=>Pe.set(xe.goatId,xe)),Array.from(Pe.values())},[M,O]),{classifiedAnimals:L,distribution:te,mean:X,stdDev:W,weightedMean:B}=PV(z,e,r,n,a),{newAnimalIds:F,exitingAnimalIds:q}=k.useMemo(()=>{const Q=new Set(z.map(Oe=>Oe.goatId)),Pe=new Set(r.filter(Oe=>new Date(Oe.date)<new Date(M)).map(Oe=>Oe.goatId)),xe=new Set([...Q].filter(Oe=>!Pe.has(Oe))),de=D[E+1]?O[D[E+1]]||[]:[],pt=new Set(de.map(Oe=>Oe.goatId)),nt=new Set([...pt].filter(Oe=>!Q.has(Oe)));return{newAnimalIds:xe,exitingAnimalIds:nt}},[z,E,D,O,r,M]),ae=k.useMemo(()=>{const Q=L.filter(xe=>!F.has(xe.id)),Pe=Q.length;return Pe===0?{up:0,down:0,stable:0}:{up:Q.filter(xe=>xe.trend==="up").length/Pe*100,down:Q.filter(xe=>xe.trend==="down").length/Pe*100,stable:Q.filter(xe=>xe.trend==="stable").length/Pe*100}},[L,F]),ce=k.useMemo(()=>e.filter(Q=>{const Pe=n.filter(xe=>xe.goatId===Q.id).sort((xe,de)=>new Date(de.parturitionDate).getTime()-new Date(xe.parturitionDate).getTime())[0];return(Pe==null?void 0:Pe.status)==="activa"}),[e,n]),ve=k.useMemo(()=>{let Q;return j?Q=ce.filter(Pe=>Pe.id.toLowerCase().includes(j.toLowerCase())).map(Pe=>{const xe=L.find(de=>de.id===Pe.id);return{...Pe,latestWeighing:(xe==null?void 0:xe.latestWeighing)||0,del:(xe==null?void 0:xe.del)||0,score:(xe==null?void 0:xe.score)||0,classification:(xe==null?void 0:xe.classification)||"Promedio",trend:(xe==null?void 0:xe.trend)||null,weighingId:xe==null?void 0:xe.weighingId,date:(xe==null?void 0:xe.date)||M}}):(Q=[...L],o!=="all"&&(Q=Q.filter(Pe=>Pe.classification===o)),f==="new"?Q=Q.filter(Pe=>F.has(Pe.id)):u!=="all"&&(Q=Q.filter(Pe=>!F.has(Pe.id)&&Pe.trend===u)),p!=="all"&&(Q=Q.filter(Pe=>{const xe=Pe.del;return xe===0?!1:p==="first"?xe>0&&xe<=100:p==="second"?xe>100&&xe<=200:p==="third"?xe>200&&xe<270:p==="drying"?xe>=270:!0}))),Q.sort((Pe,xe)=>xe.latestWeighing-Pe.latestWeighing)},[j,L,o,u,f,p,F,ce,M]),{topPerformer:we,bottomPerformer:Le,totalProd:Ye,consistency:et}=k.useMemo(()=>{if(L.length===0)return{topPerformer:null,bottomPerformer:null,totalProd:0,consistency:0};const Q=L.map(Ze=>Ze.latestWeighing),Pe=Q.reduce((Ze,yn)=>Ze+yn,0),xe=Math.max(...Q),de=Math.min(...Q),pt=X-W,nt=X+W,Oe=L.filter(Ze=>Ze.latestWeighing>=pt&&Ze.latestWeighing<=nt).length;return{topPerformer:L.find(Ze=>Ze.latestWeighing===xe),bottomPerformer:L.find(Ze=>Ze.latestWeighing===de),totalProd:Pe,consistency:Oe/L.length*100}},[L,X,W]),ke=()=>{c("all"),d("all"),h("all"),y("all"),P("")},We=Q=>{if(Q!=null&&Q.name){const Pe=Q.name;c(xe=>xe===Pe?"all":Pe)}};return i&&D.length===0?l.jsx("div",{className:"text-center p-10",children:l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Calculando análisis..."})}):D.length===0?l.jsx("div",{className:"text-center p-10",children:l.jsx("h1",{className:"text-2xl text-zinc-400",children:"No hay pesajes registrados."})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-full max-w-2xl mx-auto h-full overflow-y-auto",children:l.jsxs("div",{className:"p-4 space-y-4",children:[l.jsxs("div",{className:"bg-brand-glass rounded-2xl p-3 border border-brand-border flex justify-between items-center",children:[l.jsx("button",{onClick:()=>A(Q=>Math.min(Q+1,D.length-1)),disabled:E>=D.length-1,className:"p-2 rounded-full hover:bg-zinc-700/50 disabled:opacity-30",children:l.jsx(pG,{})}),l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"text-lg font-semibold text-white",children:new Date(M+"T00:00:00").toLocaleDateString("es-VE",{year:"numeric",month:"long",day:"numeric"})}),l.jsxs("p",{className:"text-sm text-zinc-400",children:[z.length," animales pesados"]})]}),l.jsx("button",{onClick:()=>A(Q=>Math.max(Q-1,0)),disabled:E===0,className:"p-2 rounded-full hover:bg-zinc-700/50 disabled:opacity-30",children:l.jsx(Pr,{})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx(vv,{icon:cu,title:a?"Media Ponderada":"Media de Prod.",value:(a?B:X).toFixed(2),unit:"Kg",onClick:()=>b("media")}),l.jsx(vv,{icon:AL,title:"Prod. Total",value:Ye.toFixed(2),unit:"Kg",onClick:()=>b("total")}),l.jsx(vv,{icon:$G,title:"Consistencia",value:W.toFixed(2),unit:"σ",onClick:()=>b("consistencia")}),l.jsx(vv,{icon:gs,title:"Rango Prod.",value:`${(Le==null?void 0:Le.latestWeighing.toFixed(2))||0} - ${(we==null?void 0:we.latestWeighing.toFixed(2))||0}`,unit:"Kg",onClick:()=>b("rango")})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Distribución del Día"}),l.jsxs("label",{className:"flex items-center space-x-2 text-sm text-zinc-300 cursor-pointer",children:[l.jsx(DG,{size:14,className:a?"text-brand-orange":"text-zinc-500"}),l.jsx("span",{children:"Ponderado"}),l.jsx("button",{type:"button",onClick:()=>b("infoPonderado"),className:"text-zinc-500 hover:text-white -ml-1",children:l.jsx(R_,{size:14})}),l.jsx("input",{type:"checkbox",checked:a,onChange:Q=>s(Q.target.checked),className:"form-checkbox h-4 w-4 bg-zinc-700 border-zinc-600 rounded text-brand-orange focus:ring-brand-orange focus:ring-offset-0"})]})]}),l.jsx("div",{className:"w-full h-48",children:l.jsx(zn,{children:l.jsxs(fi,{data:te,margin:{top:20,right:10,left:-20,bottom:0},children:[l.jsx(Sn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(kn,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(Mt,{content:l.jsx(nu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),l.jsxs(Fn,{dataKey:"count",onClick:We,cursor:"pointer",children:[te.map(Q=>l.jsx(Oa,{fill:Q.fill,className:`${o!=="all"&&o!==Q.name?"opacity-30":"opacity-100"}`},Q.name)),l.jsx(ra,{dataKey:"count",content:l.jsx(CNe,{total:L.length})})]})]})})})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-2 border border-brand-border space-y-2",children:[l.jsxs("div",{className:"flex justify-between items-center px-2 pt-2",children:[l.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[l.jsx("button",{onClick:()=>{d("all"),h("all")},className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors ${u==="all"&&f==="all"?"bg-zinc-600 text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"Todos"}),l.jsxs("button",{onClick:()=>{d("up"),h("all")},disabled:Object.values(ae).every(Q=>Q===0),className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors flex items-center space-x-1 ${u==="up"?"bg-brand-green/80 text-white":"bg-zinc-800/50 text-brand-green"} disabled:opacity-40`,children:[l.jsx(Qp,{size:14})," ",l.jsxs("span",{children:[ae.up.toFixed(0),"%"]})]}),l.jsxs("button",{onClick:()=>{d("down"),h("all")},disabled:Object.values(ae).every(Q=>Q===0),className:`px-2 py-1 text-xs font-semibold rounded-md transition-colors flex items-center space-x-1 ${u==="down"?"bg-brand-red/80 text-white":"bg-zinc-800/50 text-brand-red"} disabled:opacity-40`,children:[l.jsx(Xp,{size:14})," ",l.jsxs("span",{children:[ae.down.toFixed(0),"%"]})]})]}),l.jsx("button",{onClick:ke,title:"Limpiar todos los filtros",className:"text-zinc-500 hover:text-white",children:l.jsx(gA,{size:16})})]}),l.jsxs("div",{className:"flex justify-between items-center p-2 border-t border-brand-border",children:[l.jsx("div",{className:"text-xs font-semibold text-zinc-400",children:"Fase Lactancia:"}),l.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[l.jsx("button",{onClick:()=>y("all"),className:`px-2 py-1 text-xs font-semibold rounded-md ${p==="all"?"bg-zinc-600 text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"Todos"}),l.jsx("button",{onClick:()=>y("first"),className:`px-2 py-1 text-xs font-semibold rounded-md ${p==="first"?"bg-brand-blue text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"1er T"}),l.jsx("button",{onClick:()=>y("second"),className:`px-2 py-1 text-xs font-semibold rounded-md ${p==="second"?"bg-brand-blue text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"2do T"}),l.jsx("button",{onClick:()=>y("third"),className:`px-2 py-1 text-xs font-semibold rounded-md ${p==="third"?"bg-brand-blue text-white":"bg-zinc-800/50 text-zinc-300"}`,children:"3er T"}),l.jsx("button",{onClick:()=>y("drying"),className:`px-2 py-1 text-xs font-semibold rounded-md ${p==="drying"?"bg-brand-red/80 text-white":"bg-zinc-800/50 text-brand-red"}`,children:"A Secado"})]})]}),l.jsxs("div",{className:"flex justify-between items-center p-2 border-t border-brand-border",children:[l.jsx("div",{className:"text-xs font-semibold text-zinc-400",children:"Movimientos:"}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("button",{onClick:()=>h(Q=>Q==="new"?"all":"new"),disabled:F.size===0,className:`px-3 py-1 text-xs font-semibold rounded-md flex items-center gap-1.5 transition-all ${f==="new"?"bg-brand-green text-white":"bg-zinc-800/50 text-zinc-300"} disabled:opacity-40`,children:[l.jsx(bL,{size:14})," ",l.jsxs("span",{children:["Ingresos (",F.size,")"]})]}),l.jsxs("button",{onClick:()=>T(!0),disabled:q.size===0,className:"px-3 py-1 text-xs font-semibold rounded-md flex items-center gap-1.5 transition-all bg-zinc-800/50 text-zinc-300 disabled:opacity-40",children:[l.jsx(wL,{size:14})," ",l.jsxs("span",{children:["Salidas (",q.size,")"]})]})]})]})]}),l.jsxs("div",{className:"relative",children:[l.jsx(Kc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500 pointer-events-none"}),l.jsx("input",{type:"search",placeholder:"Buscar en animales en producción...",value:j,onChange:Q=>P(Q.target.value),className:"w-full bg-brand-glass border border-brand-border rounded-xl pl-10 pr-4 py-3 text-white focus:ring-2 focus:ring-brand-orange"})]}),l.jsx("div",{className:"pt-2 space-y-2",children:ve.length>0?ve.map(Q=>l.jsx(p1,{animal:Q,onSelectAnimal:t,onTrendClick:_,isNewEntry:F.has(Q.id)},Q.id)):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl mx-4",children:l.jsx("p",{className:"text-zinc-400",children:j?"No se encontraron resultados":"No hay animales con los filtros aplicados."})})})]})}),l.jsx(st,{isOpen:v==="media",onClose:()=>b(null),title:"Análisis de Producción Media",children:l.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[l.jsxs("p",{children:["La **Media de Producción** del día es **",X.toFixed(2)," Kg**. Representa el promedio simple de todos los animales pesados."]}),l.jsxs("p",{children:["La **Media Ponderada** (",B.toFixed(2)," Kg) es un cálculo avanzado que premia la **persistencia lechera**. Tiene más valor un animal que produce 2 Kg en su día 250 de lactancia que uno que produce 2 Kg en el día 40. Este indicador te ayuda a identificar a tus animales más eficientes a largo plazo."]})]})}),l.jsx(st,{isOpen:v==="total",onClose:()=>b(null),title:"Producción Total del Día",children:l.jsxs("div",{className:"text-center",children:[l.jsxs("p",{className:"text-zinc-400",children:["La producción total registrada el ",new Date(M+"T00:00:00").toLocaleDateString()," fue:"]}),l.jsxs("h2",{className:"text-5xl font-bold text-brand-orange my-2",children:[Ye.toFixed(2)," Kg"]})]})}),l.jsx(st,{isOpen:v==="consistencia",onClose:()=>b(null),title:"Análisis de Consistencia (σ)",children:l.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[l.jsxs("p",{children:["La Desviación Estándar (σ) de **",W.toFixed(2),"** mide qué tan dispersa está la producción. Un valor bajo es ideal, indica un rebaño consistente."]}),l.jsxs("div",{className:"bg-black/30 p-4 rounded-lg text-center",children:[l.jsx("p",{className:"text-sm uppercase text-zinc-400",children:"Rebaño dentro de 1σ de la media"}),l.jsxs("p",{className:"text-4xl font-bold text-brand-orange my-1",children:[et.toFixed(0),"%"]}),l.jsxs("p",{className:"text-sm text-zinc-400",children:["Esto significa que la mayoría de tu rebaño tiene un rendimiento cercano al promedio de ",X.toFixed(2)," Kg."]})]})]})}),l.jsx(st,{isOpen:v==="rango",onClose:()=>b(null),title:"Extremos de Producción del Día",children:l.jsxs("div",{className:"space-y-4",children:[we&&l.jsxs("div",{className:"bg-green-900/40 border border-green-500/50 rounded-2xl p-4",children:[l.jsx("h3",{className:"font-semibold text-brand-green mb-2",children:"Producción Máxima"}),l.jsx(p1,{animal:we,onSelectAnimal:t,onTrendClick:_,isNewEntry:F.has(we.id)})]})," ",Le&&l.jsxs("div",{className:"bg-red-900/40 border border-red-500/50 rounded-2xl p-4",children:[l.jsx("h3",{className:"font-semibold text-brand-red mb-2",children:"Producción Mínima"}),l.jsx(p1,{animal:Le,onSelectAnimal:t,onTrendClick:_,isNewEntry:F.has(Le.id)})]})]})}),l.jsx(st,{isOpen:v==="infoPonderado",onClose:()=>b(null),title:"¿Qué es el Score Ponderado?",children:l.jsxs("div",{className:"text-zinc-300 space-y-4 text-base",children:[l.jsx("p",{children:"El Score Ponderado ajusta la producción de un animal para premiar la **persistencia lechera**, un indicador clave de la calidad genética y la eficiencia."}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-white mb-1",children:"Fórmula Aplicada"}),l.jsx("div",{className:"bg-black/30 p-3 rounded-lg text-sm font-mono text-center text-orange-300",children:"Score = Kg × (1 + ((DEL - 50) / (DEL + 50)))"})]}),l.jsx("p",{className:"pt-2 border-t border-zinc-700/80 text-sm",children:"Esto significa que 2 Kg en el día **200** de lactancia obtendrán un score **mucho más alto** que 2 Kg en el día 40, ayudándote a identificar a tus animales más eficientes y persistentes."})]})}),x&&l.jsx(st,{isOpen:!!x,onClose:()=>_(null),title:`Tendencia de ${x.id}`,children:l.jsx(TNe,{animalId:x.id})}),l.jsx(st,{isOpen:S,onClose:()=>T(!1),title:"Animales que Salieron del Ordeño",children:l.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto pr-2",children:q.size>0?Array.from(q).map(Q=>l.jsxs("button",{onClick:()=>{t(Q),T(!1)},className:"w-full text-left p-3 bg-zinc-800 hover:bg-zinc-700 rounded-lg flex justify-between items-center",children:[l.jsx("span",{className:"font-semibold text-white",children:Q}),l.jsx(Pr,{className:"text-zinc-500"})]},Q)):l.jsx("p",{className:"text-center text-zinc-500 py-4",children:"No hay animales en esta lista."})})})]})}const kNe=t=>k.useMemo(()=>{if(t.length===0)return{monthlyData:[]};const n=t.reduce((i,a)=>{const s=a.date.substring(0,7);return i[s]||(i[s]=[]),i[s].push(a),i},{});let r=Object.entries(n).map(([i,a])=>{const s=new Date(`${i}-02T12:00:00Z`),o=s.toLocaleString("es-VE",{month:"long",timeZone:"UTC"}),c=s.getUTCFullYear(),u=a.length,d=a.reduce((f,h)=>f+h.kg,0);return{periodLabel:`${o.charAt(0).toUpperCase()+o.slice(1)} ${c}`,periodId:i,totalKg:d,averageKg:u>0?d/u:0,weighingCount:u,animalCount:new Set(a.map(f=>f.goatId)).size,weighingEvents:new Set(a.map(f=>f.date)).size,weighings:a,newAnimalsWeighings:[]}}).sort((i,a)=>a.periodId.localeCompare(i.periodId));return r=r.map((i,a,s)=>{const o=s[a+1];if(o){const c=o.averageKg?(i.averageKg-o.averageKg)/o.averageKg*100:void 0,u=o.animalCount?(i.animalCount-o.animalCount)/o.animalCount*100:void 0,d=new Set(o.weighings.map(v=>v.goatId)),f=new Set(i.weighings.map(v=>v.goatId)),h=new Set([...f].filter(v=>!d.has(v))),p=i.weighings.filter(v=>h.has(v.goatId)),y=[...d].filter(v=>!f.has(v)).length;return{...i,avgKgChange:c,animalCountChange:u,newAnimalsWeighings:p,previousAnimalCount:o.animalCount,exitingAnimalCount:y}}return{...i,newAnimalsWeighings:i.weighings,previousAnimalCount:0,exitingAnimalCount:0}}),{monthlyData:r,quarterlyData:[],yearlyData:[]}},[t]),TV=({value:t})=>{if(t===void 0||isNaN(t))return null;const e=t>0,n=e?"text-brand-green":"text-brand-red",r=e?Qp:Xp;return l.jsxs("span",{className:`flex items-center text-sm font-bold ${n}`,children:[l.jsx(r,{size:16,className:"mr-0.5"}),t.toFixed(1),"%"]})},ONe=({stats:t,onClick:e})=>l.jsxs("button",{onClick:e,className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-brand-orange transition-colors",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:t.periodLabel}),l.jsxs("p",{className:"text-sm text-zinc-400",children:["Prom: ",t.averageKg.toFixed(2)," Kg | ",t.animalCount," animales"]})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx(TV,{value:t.avgKgChange}),l.jsx(Pr,{className:"text-zinc-600"})]})]}),INe=({weighing:t,onSelectAnimal:e})=>l.jsxs("button",{onClick:()=>e(t.id),className:"w-full text-left bg-black/20 rounded-lg p-3 border border-zinc-700/50 flex justify-between items-center hover:border-orange-400/50",children:[l.jsx("div",{className:"flex items-center gap-4",children:l.jsx("div",{children:l.jsxs("p",{className:"font-bold text-base text-white flex items-center gap-2",children:[t.id,l.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full text-white ${t.classification==="Pobre"?"bg-brand-red/80":t.classification==="Sobresaliente"?"bg-brand-green/80":"bg-gray-500/80"}`,children:t.classification})]})})}),l.jsxs("p",{className:"font-semibold text-lg text-white",children:[t.latestWeighing.toFixed(2)," ",l.jsx("span",{className:"text-base font-medium text-zinc-400",children:"Kg"})]})]}),DNe=t=>{const{x:e,y:n,width:r,value:i,total:a}=t;if(a===0||i===0)return null;const s=(i/a*100).toFixed(0);return l.jsx("text",{x:e+r/2,y:n+20,fill:"#fff",textAnchor:"middle",fontSize:"12px",fontWeight:"bold",children:`${s}%`})};function MNe({navigateToRebano:t}){const{animals:e,weighings:n,parturitions:r,isLoading:i}=Ge(),[a,s]=k.useState(null),[o,c]=k.useState("all"),{monthlyData:u}=kNe(n),d=PV((a==null?void 0:a.weighings)||[],e,n,r,!1),f=k.useMemo(()=>o==="all"?d.classifiedAnimals:d.classifiedAnimals.filter(p=>p.classification===o),[d.classifiedAnimals,o]),h=p=>{if(p!=null&&p.name){const y=p.name;c(v=>v===y?"all":y)}};return i?l.jsx("div",{className:"text-center p-10",children:l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando historial..."})}):a?l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12 animate-fade-in px-4",children:[l.jsxs("header",{className:"flex items-center pt-4 pb-4",children:[l.jsx("button",{onClick:()=>{s(null),c("all")},className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(Zn,{size:24})}),l.jsx("div",{className:"text-center flex-grow",children:l.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:a.periodLabel})}),l.jsx("div",{className:"w-8"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-brand-glass p-3 rounded-2xl",children:[l.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[l.jsx(pA,{size:14}),"Promedio / Animal"]}),l.jsxs("div",{className:"flex items-baseline gap-2",children:[l.jsxs("p",{className:"text-2xl font-bold text-white",children:[a.averageKg.toFixed(2),l.jsx("span",{className:"text-lg ml-1 text-zinc-400",children:"Kg"})]}),l.jsx(TV,{value:a.avgKgChange})]})]}),l.jsxs("div",{className:"bg-brand-glass p-3 rounded-2xl",children:[l.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[l.jsx(ro,{size:14}),"Eventos de Pesaje"]}),l.jsx("p",{className:"text-2xl font-bold text-white",children:a.weighingEvents})]}),l.jsxs("div",{className:"bg-brand-glass p-3 rounded-2xl",children:[l.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[l.jsx(qc,{size:14}),"Animales Ordeñados"]}),l.jsx("p",{className:"text-2xl font-bold text-white",children:a.animalCount})]}),l.jsxs("div",{className:"bg-brand-glass p-3 rounded-2xl",children:[l.jsxs("div",{className:"text-xs uppercase text-zinc-400 mb-1 flex items-center gap-1",children:[l.jsx(gs,{size:14}),"Total Registrado"]}),l.jsxs("p",{className:"text-2xl font-bold text-white",children:[a.totalKg.toFixed(0),l.jsx("span",{className:"text-lg ml-1 text-zinc-400",children:"Kg"})]})]})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsxs("div",{className:"flex items-center space-x-2 border-b border-brand-border pb-2 mb-4",children:[l.jsx(yx,{className:"text-brand-orange",size:18}),l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Distribución del Período"})]}),l.jsx("div",{className:"w-full h-48",children:l.jsx(zn,{children:l.jsxs(fi,{data:d.distribution,margin:{top:20,right:10,left:-20,bottom:0},children:[l.jsx(Sn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(kn,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(Mt,{cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),l.jsxs(Fn,{dataKey:"count",onClick:h,cursor:"pointer",children:[d.distribution.map(p=>l.jsx(Oa,{fill:p.fill,className:`${o!=="all"&&o!==p.name?"opacity-30":"opacity-100"} transition-opacity`},p.name)),l.jsx(ra,{dataKey:"count",content:l.jsx(DNe,{total:d.classifiedAnimals.length})})]})]})})}),l.jsxs("div",{className:"text-center text-xs text-zinc-400 mt-2",children:[l.jsxs("span",{children:["μ = ",d.mean.toFixed(2)," Kg"]})," | ",l.jsxs("span",{children:["σ = ",d.stdDev.toFixed(2)]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 ml-1 mt-4",children:["Pesajes del Período (",f.length,")"]}),f.sort((p,y)=>y.latestWeighing-p.latestWeighing).map(p=>l.jsx(INe,{weighing:p,onSelectAnimal:y=>t({name:"lactation-profile",animalId:y})},p.weighingId||p.id))]})]}):l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12 px-4",children:[l.jsx("header",{className:"text-center pt-4 pb-4",children:l.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Historial de Producción"})}),l.jsx("div",{className:"space-y-2",children:(u||[]).map(p=>l.jsx(ONe,{stats:p,onClick:()=>s(p)},p.periodId))})]})}const RNe=({selectedDate:t,onDateChange:e,onOpenCalendar:n})=>{const r=k.useMemo(()=>{const a=new Date;return a.setHours(0,0,0,0),Array.from({length:7},(s,o)=>{const c=new Date(a);return c.setDate(a.getDate()-o),c})},[]),i=(a,s)=>{if(a.getTime()===s.getTime())return"Hoy";const o=new Date(s);return o.setDate(s.getDate()-1),a.getTime()===o.getTime()?"Ayer":a.toLocaleDateString("es-VE",{weekday:"short"}).replace(".","")};return l.jsxs("div",{className:"px-4",children:[l.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-zinc-400 mb-2",children:[l.jsx(ro,{size:16}),"Fecha del Pesaje"]}),l.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",style:{scrollbarWidth:"none",WebkitOverflowScrolling:"touch"},children:[l.jsxs("button",{type:"button",onClick:n,className:"flex flex-col items-center justify-center bg-zinc-800/80 rounded-lg p-2 w-16 h-16 flex-shrink-0 text-zinc-300 hover:bg-zinc-700 transition-colors",children:[l.jsx(ro,{size:20}),l.jsx("span",{className:"text-xs mt-1",children:"Calendario"})]}),r.map(a=>{const s=a.getTime()===t.getTime();return l.jsxs("button",{type:"button",onClick:()=>e(a),className:`flex flex-col items-center justify-center rounded-lg p-2 w-16 h-16 flex-shrink-0 transition-colors ${s?"bg-brand-orange text-white":"bg-zinc-800/80 text-zinc-300 hover:bg-zinc-700"}`,children:[l.jsx("span",{className:"text-xs capitalize",children:i(a,r[0])}),l.jsx("span",{className:"font-bold text-2xl",children:a.getDate()}),l.jsx("span",{className:"text-xs",children:a.toLocaleDateString("es-VE",{month:"short"}).replace(".","")})]},a.toISOString())})]})]})},LNe=({entry:t,onDelete:e,onRegister:n})=>{const r=!t.isRecognized;return l.jsxs("div",{className:`p-3 rounded-lg flex justify-between items-center animate-fade-in group ${r?"bg-amber-900/40 border border-amber-500/50":"bg-zinc-800/50"}`,children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[r&&l.jsx(Ut,{className:"text-amber-400 flex-shrink-0",size:18}),l.jsx("span",{className:"font-semibold text-white",children:t.animalId})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[r?l.jsx("button",{onClick:()=>n(t.animalId),className:"text-xs font-semibold bg-brand-orange text-white px-2 py-1 rounded-md hover:bg-orange-600",children:"Registrar Parto"}):l.jsxs("span",{className:"text-zinc-300 font-semibold",children:[t.kg.toFixed(2)," Kg"]}),l.jsx("button",{onClick:()=>e(t.tempId),className:"p-1 text-zinc-400 hover:text-brand-red opacity-0 group-hover:opacity-100 transition-opacity",children:l.jsx(Cl,{size:16})})]})]})},$Ne=({onSaveSuccess:t})=>{const{animals:e,weighings:n,fetchData:r}=Ge(),[i,a]=k.useState(""),[s,o]=k.useState(""),[c,u]=k.useState([]),[d,f]=k.useState(null),[h,p]=k.useState(()=>{const M=new Date;return M.setHours(0,0,0,0),M}),[y,v]=k.useState(!1),[b,x]=k.useState({isOpen:!1,motherId:""}),_=k.useRef(null),S=k.useRef(null),T=()=>{var W;if(f(null),!i||!s)return;const M=i.toUpperCase().trim(),z=parseFloat(s),L=h.toISOString().split("T")[0];if(z>100){f({type:"error",text:`El valor de ${z} Kg es irracional. Verifique el dato.`});return}if(z>8.5){f({type:"error",text:`Producción de ${z} Kg es muy alta. Límite: 8.5 Kg.`});return}if(c.some(B=>B.animalId===M)){f({type:"error",text:`${M} ya tiene un pesaje en esta sesión.`});return}if(n.some(B=>B.goatId===M&&B.date===L)){f({type:"error",text:`${M} ya tiene un pesaje guardado para esta fecha.`});return}const te=e.find(B=>B.id===M);if(te&&te.isReference){f({type:"error",text:`${M} es un animal de Referencia. No se pueden añadir pesajes.`});return}const X={tempId:Date.now(),animalId:M,kg:z,date:L,isRecognized:!!te};u(B=>[X,...B]),a(""),o(""),(W=_.current)==null||W.focus()},E=async()=>{f(null);const{currentUser:M}=Kd;if(!M){f({type:"error",text:"Error de autenticación."});return}const z=c.filter(L=>!L.isRecognized).length;if(z>0){f({type:"error",text:`No se puede guardar. Tienes ${z} animal(es) sin registrar.`});return}if(c.length===0){f({type:"error",text:"No hay pesajes para guardar."});return}try{const L=Ay(ht),te=Hn(ht,"weighings");c.forEach(X=>{const W=hn(te),B={goatId:X.animalId,kg:X.kg,date:X.date,userId:M.uid};L.set(W,B)}),await L.commit(),f({type:"success",text:`${c.length} pesajes guardados con éxito.`}),u([]),setTimeout(()=>t(h.toISOString().split("T")[0]),1500)}catch(L){f({type:"error",text:"Ocurrió un error al guardar en la nube."}),console.error("Error en escritura por lote:",L)}},A=M=>{var z;M.key==="Enter"&&i&&(M.preventDefault(),(z=S.current)==null||z.focus())},j=M=>{M.key==="Enter"&&s&&(M.preventDefault(),T())},P=M=>{u(z=>z.filter(L=>L.tempId!==M))},O=M=>{M&&(M.setHours(0,0,0,0),p(M)),v(!1)},D=()=>{r(),u(M=>M.map(z=>z.animalId===b.motherId?{...z,isRecognized:!0}:z)),x({isOpen:!1,motherId:""})};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsxs("div",{className:"flex-shrink-0 space-y-4 pt-4",children:[l.jsxs("div",{className:"text-center px-4",children:[l.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Carga Rápida de Leche"}),l.jsx("p",{className:"text-md text-zinc-400",children:"Sesión de Ordeño"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx(RNe,{selectedDate:h,onDateChange:p,onOpenCalendar:()=>v(!0)}),l.jsxs("div",{className:"flex items-center gap-2 px-4",children:[l.jsx("input",{ref:_,type:"text",value:i,onChange:M=>a(M.target.value),onKeyDown:A,placeholder:"ID Animal",className:"w-full bg-brand-glass p-4 rounded-xl text-lg placeholder-zinc-500 border-2 border-transparent focus:border-brand-orange focus:ring-0"}),l.jsx("input",{ref:S,type:"number",step:"0.01",value:s,onChange:M=>o(M.target.value),onKeyDown:j,placeholder:"Kg",className:"w-32 flex-shrink-0 bg-brand-glass p-4 rounded-xl text-lg placeholder-zinc-500 border-2 border-transparent focus:border-brand-orange focus:ring-0"}),l.jsx("button",{onClick:T,disabled:!i||!s,"aria-label":"Añadir a la lista",className:"aspect-square h-full bg-brand-orange text-white rounded-xl flex items-center justify-center transition-all hover:bg-orange-600 disabled:opacity-40",children:l.jsx(Pl,{size:24})})]})]})]}),l.jsxs("div",{className:"flex-grow overflow-y-auto px-4 space-y-2 py-4",children:[c.length===0&&l.jsx("p",{className:"text-center text-zinc-500 text-sm pt-8",children:"Los pesajes añadidos aparecerán aquí."}),c.map(M=>l.jsx(LNe,{entry:M,onDelete:P,onRegister:z=>x({isOpen:!0,motherId:z})},M.tempId))]}),l.jsxs("div",{className:"flex-shrink-0 p-4 border-t border-brand-border bg-gray-900/80 backdrop-blur-sm",children:[d&&l.jsxs("div",{className:`mb-3 flex items-center space-x-2 p-3 rounded-lg text-sm ${d.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[" ",d.type==="success"?l.jsx(Jr,{size:18}):l.jsx(Ut,{size:18})," ",l.jsx("span",{children:d.text})," "]}),l.jsxs("button",{onClick:E,className:"w-full flex items-center justify-center gap-2 bg-brand-orange/20 border border-brand-orange text-brand-orange hover:bg-brand-orange/30 font-bold py-4 px-4 rounded-xl transition-colors text-lg",children:[l.jsx(rg,{size:20})," Guardar ",c.length>0?`(${c.length})`:""," Pesajes"]})]})]}),l.jsx(st,{isOpen:y,onClose:()=>v(!1),title:"Seleccionar Fecha",children:l.jsx("div",{className:"flex justify-center",children:l.jsx(Xf,{mode:"single",selected:h,onSelect:O})})}),l.jsx(Qf,{isOpen:b.isOpen,onClose:D,motherId:b.motherId})]})};function zNe({onNavigate:t,onSaveSuccess:e}){const[n,r]=k.useState("options");return n==="rapid"?l.jsx($Ne,{onSaveSuccess:e}):l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4 pt-4",children:[l.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white text-center",children:"Añadir Datos de Leche"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("button",{onClick:()=>r("rapid"),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-brand-orange text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[l.jsx(jx,{className:"w-12 h-12 mb-2 text-brand-orange"}),l.jsx("span",{className:"text-lg font-semibold",children:"Carga Rápida"}),l.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Para carga masiva con teclado"})]}),l.jsxs("button",{onClick:()=>t("ocr",{}),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-brand-blue text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[l.jsx(jL,{className:"w-12 h-12 mb-2 text-brand-blue"}),l.jsx("span",{className:"text-lg font-semibold",children:"Escanear Cuaderno"}),l.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Digitalización asistida por IA"})]})]})]})}const FNe=({animal:t,parturition:e,onSelectAnimal:n})=>l.jsxs("div",{onClick:()=>n(t.id),className:"w-full cursor-pointer text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-amber-400 transition-colors",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),l.jsxs("p",{className:"text-sm text-zinc-400",children:[e.status==="en-secado"&&`Secado desde: ${new Date(e.dryingStartDate+"T00:00:00").toLocaleDateString()}`,e.status==="seca"&&"Lactancia finalizada"]})]}),l.jsx(Pr,{className:"text-zinc-600"})]});function VNe({navigateToRebano:t}){const{animals:e,parturitions:n,isLoading:r}=Ge(),[i,a]=k.useState("drying"),s=k.useMemo(()=>{const c=f=>e.find(h=>h.id===f),u=n.filter(f=>f.status==="en-secado").map(f=>({animal:c(f.goatId),parturition:f})).filter(f=>f.animal),d=n.filter(f=>f.status==="seca").map(f=>({animal:c(f.goatId),parturition:f})).filter(f=>f.animal);return{drying:u,dry:d}},[e,n]),o=s[i]||[];return r?l.jsx("div",{className:"text-center p-10",children:l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Cargando datos..."})}):l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 pb-12 px-4",children:[l.jsxs("header",{className:"text-center pt-4 pb-4",children:[l.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Gestión de Secado"}),l.jsx("p",{className:"text-md text-zinc-400",children:"Animales por Estado de Lactancia"})]}),l.jsx("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-2 border border-brand-border",children:l.jsxs("div",{className:"flex bg-zinc-900/80 rounded-xl p-1 w-full",children:[l.jsxs("button",{onClick:()=>a("drying"),className:`w-1/2 px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors ${i==="drying"?"bg-blue-500 text-white":"text-zinc-300 hover:bg-zinc-700/50"}`,children:["En Secado (",s.drying.length,")"]}),l.jsxs("button",{onClick:()=>a("dry"),className:`w-1/2 px-4 py-1.5 text-sm font-semibold rounded-lg transition-colors ${i==="dry"?"bg-gray-600 text-white":"text-zinc-300 hover:bg-zinc-700/50"}`,children:["Secas (",s.dry.length,")"]})]})}),l.jsx("div",{className:"space-y-2",children:o.length>0?o.map(({animal:c,parturition:u})=>l.jsx(FNe,{animal:c,parturition:u,onSelectAnimal:d=>t({name:"lactation-profile",animalId:d})},u.id)):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-400",children:"No hay animales en este estado."})})})]})}function BNe({initialPage:t,onPageStateChange:e,navigateToRebano:n,onSwitchModule:r}){const{syncStatus:i}=Ge(),[a,s]=k.useState(t||"dashboard");k.useEffect(()=>{e(a)},[a,e]),k.useEffect(()=>{s(t||"dashboard")},[t]);const o=[{id:"dashboard",label:"Dashboard",icon:uG},{id:"analysis",label:"Análisis",icon:yL},{id:"history",label:"Historial",icon:hL},{id:"add-data",label:"Añadir",icon:Pl},{id:"drying",label:"Secado",icon:Sx}],c=()=>{a!=="dashboard"?s("dashboard"):r("rebano")},u=f=>{e(a),n({name:"lactation-profile",animalId:f})},d=()=>{switch(a){case"dashboard":return l.jsx(VM,{onNavigateToAnalysis:()=>s("analysis")});case"analysis":return l.jsx(NNe,{onSelectAnimal:u});case"history":return l.jsx(MNe,{navigateToRebano:n});case"add-data":return l.jsx(zNe,{onNavigate:(f,h)=>n({name:f,...h}),onSaveSuccess:()=>s("analysis")});case"drying":return l.jsx(VNe,{navigateToRebano:n});default:return l.jsx(VM,{onNavigateToAnalysis:()=>s("analysis")})}};return l.jsxs("div",{className:"min-h-screen animate-fade-in text-white flex flex-col",children:[l.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-gray-900/80 backdrop-blur-lg border-b border-brand-border",children:l.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[l.jsx("button",{onClick:c,className:"p-2 -ml-2 text-zinc-400 hover:text-white","aria-label":"Atrás",children:l.jsx(Zn,{size:24})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(QG,{className:"text-brand-orange",size:28}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-bold text-white leading-none",children:"GanaderoOS"}),l.jsx("p",{className:"text-xs text-zinc-400 leading-none",children:"LactoKeeper"})]})]}),l.jsx("div",{className:"w-8 flex justify-end",children:l.jsx(Sg,{status:i})})]})}),l.jsx("main",{className:"flex-grow pt-16 pb-24",children:d()}),l.jsx(_g,{onSwitchModule:r}),l.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-black/30 backdrop-blur-xl border-t border-white/20 flex justify-around",children:o.map(f=>l.jsxs("button",{onClick:()=>s(f.id),className:`flex flex-col items-center justify-center p-3 w-full transition-colors ${a===f.id?"text-brand-orange":"text-gray-400 hover:text-brand-orange"}`,children:[l.jsx(f.icon,{className:"w-6 h-6 mb-1"}),l.jsx("span",{className:"text-xs font-semibold",children:f.label})]},f.id))})]})}const UNe=({selectedDate:t,onDateChange:e,onOpenCalendar:n})=>{const r=k.useMemo(()=>{const a=new Date;return a.setHours(0,0,0,0),Array.from({length:7},(s,o)=>{const c=new Date(a);return c.setDate(a.getDate()-o),c})},[]),i=(a,s)=>{if(a.getTime()===s.getTime())return"Hoy";const o=new Date(s);return o.setDate(s.getDate()-1),a.getTime()===o.getTime()?"Ayer":a.toLocaleDateString("es-VE",{weekday:"short"}).replace(".","")};return l.jsxs("div",{className:"px-4",children:[l.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-zinc-400 mb-2",children:[l.jsx(ro,{size:16}),"Fecha del Pesaje"]}),l.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",style:{scrollbarWidth:"none",WebkitOverflowScrolling:"touch"},children:[l.jsxs("button",{type:"button",onClick:n,className:"flex flex-col items-center justify-center bg-zinc-800/80 rounded-lg p-2 w-16 h-16 flex-shrink-0 text-zinc-300 hover:bg-zinc-700 transition-colors",children:[l.jsx(ro,{size:20}),l.jsx("span",{className:"text-xs mt-1",children:"Calendario"})]}),r.map(a=>{const s=a.getTime()===t.getTime();return l.jsxs("button",{type:"button",onClick:()=>e(a),className:`flex flex-col items-center justify-center rounded-lg p-2 w-16 h-16 flex-shrink-0 transition-colors ${s?"bg-brand-green text-white":"bg-zinc-800/80 text-zinc-300 hover:bg-zinc-700"}`,children:[l.jsx("span",{className:"text-xs capitalize",children:i(a,r[0])}),l.jsx("span",{className:"font-bold text-2xl",children:a.getDate()}),l.jsx("span",{className:"text-xs",children:a.toLocaleDateString("es-VE",{month:"short"}).replace(".","")})]},a.toISOString())})]})]})},WNe=({entry:t,onDelete:e})=>{const n=!t.isRecognized;return l.jsxs("div",{className:`p-3 rounded-lg flex justify-between items-center animate-fade-in group ${n?"bg-amber-900/40 border border-amber-500/50":"bg-zinc-800/50"}`,children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[n&&l.jsx(Ut,{className:"text-amber-400 flex-shrink-0",size:18}),l.jsx("span",{className:"font-semibold text-white",children:t.animalId})]}),l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("span",{className:"text-zinc-300 font-semibold",children:[t.kg.toFixed(2)," Kg"]}),l.jsx("button",{onClick:()=>e(t.tempId),className:"p-1 text-zinc-400 hover:text-brand-red opacity-0 group-hover:opacity-100 transition-opacity",children:l.jsx(Cl,{size:16})})]})]})},KNe=({onBack:t,onSaveSuccess:e})=>{const{animals:n}=Ge(),[r,i]=k.useState(""),[a,s]=k.useState(""),[o,c]=k.useState([]),[u,d]=k.useState(null),[f,h]=k.useState(()=>{const j=new Date;return j.setHours(0,0,0,0),j}),[p,y]=k.useState(!1),v=k.useRef(null),b=k.useRef(null),x=()=>{var M;if(!r||!a)return;const j=r.toUpperCase().trim(),P=parseFloat(a);if(P>100){d({type:"error",text:`El peso de ${P} Kg es irracional. Verifique el dato.`});return}const O=n.find(z=>z.id===j);if(O&&O.isReference){d({type:"error",text:`${j} es un animal de Referencia y no se le pueden añadir pesajes.`});return}const D={tempId:Date.now(),animalId:j,kg:P,date:f.toISOString().split("T")[0],isRecognized:!!O};c(z=>[D,...z]),i(""),s(""),(M=v.current)==null||M.focus()},_=async()=>{d(null);const{currentUser:j}=Kd;if(!j){d({type:"error",text:"Error de autenticación."});return}if(o.length===0){d({type:"error",text:"No hay pesajes para guardar."});return}try{const P=Ay(ht),O=Hn(ht,"bodyWeighings");o.forEach(D=>{const M=hn(O),z={animalId:D.animalId,kg:D.kg,date:D.date,userId:j.uid};P.set(M,z)}),await P.commit(),d({type:"success",text:`${o.length} pesajes guardados con éxito.`}),c([]),setTimeout(()=>e(f.toISOString().split("T")[0]),1500)}catch(P){d({type:"error",text:"Ocurrió un error al guardar en la nube."}),console.error("Error en escritura por lote:",P)}},S=j=>{var P;j.key==="Enter"&&r&&(j.preventDefault(),(P=b.current)==null||P.focus())},T=j=>{j.key==="Enter"&&a&&(j.preventDefault(),x())},E=j=>{c(P=>P.filter(O=>O.tempId!==j))},A=j=>{j&&(j.setHours(0,0,0,0),h(j)),y(!1)};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex flex-col h-full animate-fade-in",children:[l.jsxs("div",{className:"flex-shrink-0 space-y-4",children:[l.jsxs("header",{className:"text-center px-4 flex items-center",children:[l.jsx("button",{onClick:t,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(Zn,{size:24})}),l.jsxs("div",{className:"flex-grow",children:[l.jsx("h1",{className:"text-2xl font-bold tracking-tight text-white",children:"Carga Rápida de Peso"}),l.jsx("p",{className:"text-md text-zinc-400",children:"Sesión de Pesaje"})]}),l.jsx("div",{className:"w-8"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx(UNe,{selectedDate:f,onDateChange:h,onOpenCalendar:()=>y(!0)}),l.jsxs("div",{className:"flex items-center gap-2 px-4",children:[l.jsx("input",{ref:v,type:"text",value:r,onChange:j=>i(j.target.value),onKeyDown:S,placeholder:"ID Animal",className:"w-full bg-brand-glass p-4 rounded-xl text-lg placeholder-zinc-500 border-2 border-transparent focus:border-brand-green focus:ring-0"}),l.jsx("input",{ref:b,type:"number",step:"0.01",value:a,onChange:j=>s(j.target.value),onKeyDown:T,placeholder:"Kg",className:"w-32 flex-shrink-0 bg-brand-glass p-4 rounded-xl text-lg placeholder-zinc-500 border-2 border-transparent focus:border-brand-green focus:ring-0"}),l.jsx("button",{onClick:x,disabled:!r||!a,"aria-label":"Añadir a la lista",className:"aspect-square h-full bg-brand-orange text-white rounded-xl flex items-center justify-center transition-all hover:bg-orange-600 disabled:opacity-40",children:l.jsx(Pl,{size:24})})]})]})]}),l.jsxs("div",{className:"flex-grow overflow-y-auto px-4 space-y-2 py-4",children:[o.length===0&&l.jsx("p",{className:"text-center text-zinc-500 text-sm pt-8",children:"Los pesajes añadidos aparecerán aquí."}),o.map(j=>l.jsx(WNe,{entry:j,onDelete:E},j.tempId))]}),l.jsxs("div",{className:"flex-shrink-0 p-4 border-t border-brand-border bg-gray-900/80 backdrop-blur-sm",children:[u&&l.jsxs("div",{className:`mb-3 flex items-center space-x-2 p-3 rounded-lg text-sm ${u.type==="success"?"bg-green-500/20 text-brand-green":"bg-red-500/20 text-brand-red"}`,children:[" ",u.type==="success"?l.jsx(Jr,{size:18}):l.jsx(Ut,{size:18})," ",l.jsx("span",{children:u.text})," "]}),l.jsxs("button",{onClick:_,className:"w-full flex items-center justify-center gap-2 bg-brand-green/20 border border-brand-green text-brand-green hover:bg-brand-green/30 font-bold py-4 px-4 rounded-xl transition-colors text-lg",children:[l.jsx(rg,{size:20})," Guardar ",o.length>0?`(${o.length})`:""," Pesajes"]})]})]}),l.jsx(st,{isOpen:p,onClose:()=>y(!1),title:"Seleccionar Fecha",children:l.jsx("div",{className:"flex justify-center",children:l.jsx(Xf,{mode:"single",selected:f,onSelect:A})})})]})};function qNe({onNavigate:t,onSaveSuccess:e}){const[n,r]=k.useState("options");return n==="rapid"?l.jsx(KNe,{onBack:()=>r("options"),onSaveSuccess:e}):l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4",children:[l.jsxs("header",{className:"text-center",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Añadir Pesaje Corporal"}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Carga de Datos de Crecimiento"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("button",{onClick:()=>r("rapid"),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-brand-green text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[l.jsx(jx,{className:"w-12 h-12 mb-2 text-brand-green"}),l.jsx("span",{className:"text-lg font-semibold",children:"Carga Rápida"}),l.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Para carga masiva con teclado"})]}),l.jsxs("button",{onClick:()=>t("ocr",{}),className:"w-full bg-brand-glass backdrop-blur-xl border border-brand-border hover:border-brand-blue text-white p-6 rounded-2xl flex flex-col items-center justify-center text-center transition-all transform hover:scale-105",children:[l.jsx(jL,{className:"w-12 h-12 mb-2 text-brand-blue"}),l.jsx("span",{className:"text-lg font-semibold",children:"Escanear Cuaderno"}),l.jsx("span",{className:"text-sm font-normal text-zinc-400",children:"Digitalización asistida por IA"})]})]})]})}const HNe=({gdp:t,averageGdp:e})=>{if(!t||!e||e===0)return null;const n=t/e;return n>1.1?l.jsx(gs,{size:18,className:"text-brand-green"}):n<.9?l.jsx(FG,{size:18,className:"text-brand-red"}):l.jsx(_L,{size:18,className:"text-zinc-500"})},GNe=({animal:t,onSelect:e,averageGdp:n})=>l.jsxs("button",{onClick:()=>e(t.id),className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-brand-green transition-colors",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),l.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:[t.sex," | ",t.formattedAge," | Lote: ",t.location||"N/A"]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"text-right",children:[l.jsxs("p",{className:"font-semibold text-white",children:[t.gdp.overall?`${(t.gdp.overall*1e3).toFixed(0)}`:"--",l.jsx("span",{className:"text-sm text-zinc-400",children:" g/día"})]}),l.jsx("p",{className:`font-bold text-sm ${t.classification==="Sobresaliente"?"text-brand-green":t.classification==="Pobre"?"text-brand-red":"text-zinc-400"}`,children:t.classification})]}),l.jsx(HNe,{gdp:t.gdp.overall,averageGdp:n}),l.jsx(Pr,{className:"text-zinc-600"})]})]});function BM({onSelectAnimal:t}){const{animals:e,bodyWeighings:n,parturitions:r}=Ge(),i=k.useMemo(()=>{const a=e.filter(_=>{const S=yu(_,r);return["Cabrita","Cabritona","Cabrito","Macho de Levante"].includes(S)});if(a.length===0)return{analyzedAnimals:[],distribution:[],averageGdp:0};let s=0,o=0;const c=a.map(_=>{const S=n.filter(E=>E.animalId===_.id),T=dE(_.birthWeight,S);return T.overall&&T.overall>0&&(s+=T.overall,o++),{..._,formattedAge:$a(_.birthDate),gdp:T}}),u=o>0?s/o:0,d=c.map(_=>({..._,score:_.gdp.overall?LAe(_.gdp.overall,u,fs(_.birthDate)):0})),f=d.filter(_=>_.score>0).map(_=>_.score),h=f.length>0?f.reduce((_,S)=>_+S,0)/f.length:0,p=f.length>0?Math.sqrt(f.reduce((_,S)=>_+Math.pow(S-h,2),0)/f.length):0,y=h-.4*p,v=h+.4*p,b=d.map(_=>{let S="Promedio";return _.score>0&&p>1&&(_.score<y?S="Pobre":_.score>v&&(S="Sobresaliente")),{..._,classification:S}}),x=[{name:"Pobre",count:b.filter(_=>_.classification==="Pobre").length,fill:"#FF3B30"},{name:"Promedio",count:b.filter(_=>_.classification==="Promedio").length,fill:"#6B7280"},{name:"Sobresaliente",count:b.filter(_=>_.classification==="Sobresaliente").length,fill:"#34C759"}];return{analyzedAnimals:b.sort((_,S)=>S.score-_.score),distribution:x,averageGdp:u}},[e,n,r]);return l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in",children:[l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold mb-2 text-xs uppercase tracking-wider",children:[l.jsx(gs,{}),l.jsx("span",{children:"GDP Promedio del Levante"})]}),l.jsxs("p",{className:"text-4xl font-bold tracking-tight text-white",children:[(i.averageGdp*1e3).toFixed(0)," ",l.jsx("span",{className:"text-2xl font-medium text-zinc-400",children:"g/día"})]})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Distribución del Crecimiento"}),l.jsx("div",{className:"w-full h-48",children:l.jsx(zn,{children:l.jsxs(fi,{data:i.distribution,margin:{top:20,right:10,left:-20,bottom:0},children:[l.jsx(Sn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(kn,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(Mt,{content:l.jsx(nu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),l.jsx(Fn,{dataKey:"count",children:i.distribution.map(a=>l.jsx(Oa,{fill:a.fill},a.name))})]})})})]}),l.jsxs("div",{className:"space-y-2 pt-4",children:[l.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 ml-1",children:["Animales en Levante (",i.analyzedAnimals.length,")"]}),i.analyzedAnimals.length>0?i.analyzedAnimals.map(a=>l.jsx(GNe,{animal:a,onSelect:()=>t(a.id),averageGdp:i.averageGdp},a.id)):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-500",children:"No hay animales en fase de levante o no se han registrado pesajes."})})]})]})}const YNe=()=>{const{animals:t,bodyWeighings:e,parturitions:n}=Ge();return k.useMemo(()=>{const a=t.filter(S=>{const T=fs(S.birthDate);return T>0&&T<=365&&!S.isReference}).map(S=>{const T=e.filter(A=>A.animalId===S.id),E=dE(S.birthWeight,T);return{...S,gdp:E.overall,ageInDays:fs(S.birthDate)}}).filter(S=>S.gdp!==null&&S.gdp>0);if(a.length<2)return{classifiedAnimals:[],distribution:[],gaussChartData:[],meanGdp:0,stdDev:0};const o=a.reduce((S,T)=>S+T.gdp,0)/a.length,c=Math.sqrt(a.reduce((S,T)=>S+Math.pow(T.gdp-o,2),0)/a.length),u=o-.4*c,d=o+.4*c,f=a.map(S=>{let T="Promedio";return c>.005&&(S.gdp<u?T="Pobre":S.gdp>d&&(T="Sobresaliente")),{...S,classification:T}}),h=[{name:"Pobre",count:f.filter(S=>S.classification==="Pobre").length,fill:"#FF3B30"},{name:"Promedio",count:f.filter(S=>S.classification==="Promedio").length,fill:"#6B7280"},{name:"Sobresaliente",count:f.filter(S=>S.classification==="Sobresaliente").length,fill:"#34C759"}],p=f.map(S=>S.gdp),y=Math.min(...p),v=Math.max(...p),b=10,x=(v-y)/b,_=Array.from({length:b},(S,T)=>{const E=y+T*x,A=E+x,j=f.filter(P=>P.gdp>=E&&P.gdp<A).length;return{name:`${(E*1e3).toFixed(0)}`,count:j}});return{classifiedAnimals:f.sort((S,T)=>T.gdp-S.gdp),distribution:h,gaussChartData:_,meanGdp:o,stdDev:c}},[t,e,n])},XNe=({animal:t,onSelect:e})=>{const n={Sobresaliente:"bg-brand-green/80",Promedio:"bg-gray-500/80",Pobre:"bg-brand-red/80"},r=$a(t.birthDate);return l.jsxs("button",{onClick:()=>e(t.id),className:"w-full text-left bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center hover:border-brand-green transition-colors",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:t.id}),l.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:[t.sex," | ",r," | Lote: ",t.location||"Sin Asignar"]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("p",{className:"font-semibold text-white text-right",children:[(t.gdp*1e3).toFixed(0),l.jsx("span",{className:"text-sm text-zinc-400",children:" g/día"})]}),l.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full text-white ${n[t.classification]}`,children:t.classification}),l.jsx(Pr,{className:"text-zinc-600"})]})]})};function QNe({onSelectAnimal:t}){const{classifiedAnimals:e,distribution:n,gaussChartData:r,meanGdp:i,stdDev:a}=YNe(),[s,o]=k.useState("all"),c=H.useMemo(()=>s==="all"?e:e.filter(d=>d.classification===s),[e,s]),u=d=>{if(d!=null&&d.name){const f=d.name;o(h=>h===f?"all":f)}};return l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4",children:[l.jsxs("header",{className:"text-center",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Análisis de GDP"}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Ganancia Diaria de Peso"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[l.jsx(gs,{size:14}),l.jsx("span",{children:"GDP Media"})]}),l.jsxs("p",{className:"text-2xl font-bold text-white",children:[(i*1e3).toFixed(0)," ",l.jsx("span",{className:"text-lg text-zinc-400",children:"g/día"})]})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-3 border border-brand-border",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[l.jsx(AL,{size:14}),l.jsx("span",{children:"Desv. Estándar"})]}),l.jsxs("p",{className:"text-2xl font-bold text-white",children:[(a*1e3).toFixed(0)," ",l.jsx("span",{className:"text-lg text-zinc-400",children:"g/día"})]})]})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Distribución del Crecimiento"}),l.jsx("div",{className:"w-full h-48",children:l.jsx(zn,{children:l.jsxs(fi,{data:n,margin:{top:20,right:10,left:-20,bottom:0},children:[l.jsx(Sn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(kn,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(Mt,{content:l.jsx(nu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),l.jsx(Fn,{dataKey:"count",onClick:u,cursor:"pointer",children:n.map(d=>l.jsx(Oa,{fill:d.fill,className:`${s!=="all"&&s!==d.name?"opacity-30":"opacity-100"} transition-opacity`},d.name))})]})})})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Campana de Gauss (g/día)"}),l.jsx("div",{className:"w-full h-48",children:l.jsx(zn,{children:l.jsxs(fi,{data:r,margin:{top:20,right:10,left:-20,bottom:0},children:[l.jsx(Sn,{dataKey:"name",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(kn,{orientation:"left",tick:{fill:"rgba(255,255,255,0.7)",fontSize:12},allowDecimals:!1}),l.jsx(Mt,{content:l.jsx(nu,{}),cursor:{fill:"rgba(255, 255, 255, 0.05)"}}),l.jsx(Fn,{dataKey:"count",fill:"rgba(52, 199, 89, 0.6)"})]})})})]}),l.jsxs("div",{className:"space-y-2 pt-4",children:[l.jsxs("h3",{className:"text-lg font-semibold text-zinc-300 ml-1",children:[s==="all"?"Todos los Animales":`Animales (${s})`," (",c.length,")"]}),c.length>0?c.map(d=>l.jsx(XNe,{animal:d,onSelect:t},d.id)):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-500",children:"No hay animales que coincidan con los filtros."})})]})]})}function JNe({navigateToRebano:t,onSwitchModule:e}){const{syncStatus:n}=Ge(),[r,i]=k.useState("dashboard"),a=[{id:"dashboard",label:"Dashboard",icon:yx},{id:"analysis",label:"Análisis",icon:YG},{id:"add-data",label:"Añadir",icon:Pl}],s=()=>{r!=="dashboard"?i("dashboard"):e("rebano")},o=()=>{switch(r){case"dashboard":return l.jsx(BM,{onSelectAnimal:c=>t({name:"growth-profile",animalId:c})});case"analysis":return l.jsx(QNe,{onSelectAnimal:c=>t({name:"growth-profile",animalId:c})});case"add-data":return l.jsx(qNe,{onNavigate:t,onSaveSuccess:()=>i("analysis")});default:return l.jsx(BM,{onSelectAnimal:c=>t({name:"growth-profile",animalId:c})})}};return l.jsxs("div",{className:"min-h-screen animate-fade-in text-white flex flex-col",children:[l.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-gray-900/80 backdrop-blur-lg border-b border-brand-border",children:l.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[l.jsx("button",{onClick:s,className:"p-2 -ml-2 text-zinc-400 hover:text-white","aria-label":"Atrás",children:l.jsx(Zn,{size:24})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(El,{className:"text-brand-green"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-bold text-white leading-none",children:"GanaderoOS"}),l.jsx("p",{className:"text-xs text-zinc-400 leading-none",children:"Kilos"})]})]}),l.jsx("div",{className:"w-8 flex justify-end",children:l.jsx(Sg,{status:n})})]})}),l.jsx("main",{className:"flex-grow pt-16 pb-24",children:o()}),l.jsx(_g,{onSwitchModule:e}),l.jsx("nav",{className:"flex-shrink-0 fixed bottom-0 left-0 right-0 bg-black/30 backdrop-blur-xl border-t border-white/20 flex justify-around",children:a.map(c=>l.jsxs("button",{onClick:()=>i(c.id),className:`flex flex-col items-center justify-center p-3 w-full transition-colors ${r===c.id?"text-brand-green":"text-gray-400 hover:text-brand-green"}`,children:[l.jsx(c.icon,{className:"w-6 h-6 mb-1"}),l.jsx("span",{className:"text-xs font-semibold",children:c.label})]},c.id))})]})}const ZNe=({onSave:t,onCancel:e,existingProduct:n})=>{const[r,i]=k.useState(""),[a,s]=k.useState(""),[o,c]=k.useState(""),[u,d]=k.useState(""),[f,h]=k.useState("ml"),[p,y]=k.useState(""),[v,b]=k.useState(null),[x,_]=k.useState(!1);k.useEffect(()=>{n&&(i(n.name),s(n.presentation),c(String(n.totalCost)),d(String(n.totalVolume)),h(n.unit),y(String(n.dosagePer10Kg)))},[n]);const S=async T=>{T.preventDefault(),b(null),_(!0);const E=parseFloat(o),A=parseFloat(u),j=parseFloat(p);if(!r||!a||isNaN(E)||isNaN(A)||isNaN(j)){b("Por favor, completa todos los campos con valores válidos."),_(!1);return}const P={name:r,presentation:a,totalCost:E,totalVolume:A,unit:f,dosagePer10Kg:j};try{await t(P)}catch(O){b("No se pudo guardar el producto."),console.error(O),_(!1)}};return l.jsxs("form",{onSubmit:S,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Nombre del Producto"}),l.jsx("input",{id:"name",type:"text",value:r,onChange:T=>i(T.target.value),placeholder:"Ej: Ivermectina al 1%",className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"presentation",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Presentación"}),l.jsx("input",{id:"presentation",type:"text",value:a,onChange:T=>s(T.target.value),placeholder:"Ej: Frasco 500ml",className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"totalCost",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Costo Total del Envase"}),l.jsx("input",{id:"totalCost",type:"number",step:"0.01",value:o,onChange:T=>c(T.target.value),placeholder:"20.00",className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"totalVolume",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Volumen/Cantidad Total"}),l.jsx("input",{id:"totalVolume",type:"number",step:"1",value:u,onChange:T=>d(T.target.value),placeholder:"500",className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"unit",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Unidad"}),l.jsxs("select",{id:"unit",value:f,onChange:T=>h(T.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",children:[l.jsx("option",{value:"ml",children:"ml (líquido)"}),l.jsx("option",{value:"g",children:"g (polvo/sólido)"}),l.jsx("option",{value:"unidad",children:"unidad (pastilla/bolo)"})]})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{htmlFor:"dosage",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Dosis por cada 10 Kg de peso"}),l.jsx("input",{id:"dosage",type:"number",step:"0.1",value:p,onChange:T=>y(T.target.value),placeholder:"0.2",className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]})]}),v&&l.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[l.jsx(Ut,{size:18}),l.jsx("span",{children:v})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:x,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:x?"Guardando...":"Guardar Producto"})]})]})};function eke(){const{products:t,addProduct:e,updateProduct:n,deleteProduct:r}=Ge(),[i,a]=k.useState(!1),[s,o]=k.useState(void 0),[c,u]=k.useState(null),d=v=>{o(v),a(!0)},f=()=>{a(!1),o(void 0)},h=async v=>{s!=null&&s.id?await n(s.id,v):await e(v),f()},p=()=>{c!=null&&c.id&&r(c.id),u(null)},y=v=>!v.totalVolume||v.totalVolume===0?"N/A":`$${(v.totalCost/v.totalVolume).toFixed(3)} / ${v.unit}`;return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4",children:[l.jsxs("header",{className:"text-center",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Inventario de Productos"}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Gestión de Insumos Sanitarios"})]}),l.jsxs("button",{onClick:()=>d(),className:"w-full flex items-center justify-center gap-2 bg-brand-green hover:bg-green-600 text-white font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[l.jsx(ur,{size:18})," Añadir Nuevo Producto"]}),l.jsx("div",{className:"space-y-3 pt-4",children:t.length>0?t.map(v=>l.jsx("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:v.name}),l.jsx("p",{className:"text-sm text-zinc-400",children:v.presentation}),l.jsxs("div",{className:"mt-2 flex items-center gap-4 text-xs",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(_x,{size:14})," ",v.dosagePer10Kg," ",v.unit,"/10kg"]}),l.jsx("span",{className:"font-semibold text-amber-400",children:y(v)})]})]}),l.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[l.jsx("button",{onClick:()=>d(v),className:"p-2 text-zinc-400 hover:text-brand-orange transition-colors",children:l.jsx(Tl,{size:18})}),l.jsx("button",{onClick:()=>u(v),className:"p-2 text-zinc-400 hover:text-brand-red transition-colors",children:l.jsx(fo,{size:18})})]})]})},v.id)):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-500",children:"Aún no has añadido ningún producto."})})})]}),l.jsx(st,{isOpen:i,onClose:f,title:s?"Editar Producto":"Añadir Producto",children:l.jsx(ZNe,{onSave:h,onCancel:f,existingProduct:s})}),l.jsx(jb,{isOpen:!!c,onClose:()=>u(null),onConfirm:p,title:"Eliminar Producto",message:`¿Estás seguro de que quieres eliminar "${c==null?void 0:c.name}"? Esta acción no se puede deshacer.`})]})}const tke=["Cabrita","Cabritona","Cabra Primípara","Cabra Multípara","Cabrito","Macho de Levante","Macho Cabrío"],nke=["Vacía","En Servicio","Preñada","Post-Parto"],rke=({onSave:t,onCancel:e,existingPlan:n})=>{const[r,i]=k.useState(""),[a,s]=k.useState(""),[o,c]=k.useState(""),[u,d]=k.useState(""),[f,h]=k.useState(new Set),[p,y]=k.useState(new Set),[v,b]=k.useState(null),[x,_]=k.useState(!1);k.useEffect(()=>{var A,j;n&&(i(n.name),s(n.description),c(((A=n.targetCriteria.minAgeDays)==null?void 0:A.toString())||""),d(((j=n.targetCriteria.maxAgeDays)==null?void 0:j.toString())||""),h(new Set(n.targetCriteria.categories||[])),y(new Set(n.targetCriteria.targetStatus||[])))},[n]);const S=A=>{h(j=>{const P=new Set(j);return P.has(A)?P.delete(A):P.add(A),P})},T=A=>{y(j=>{const P=new Set(j);return P.has(A)?P.delete(A):P.add(A),P})},E=async A=>{if(A.preventDefault(),b(null),!r.trim()){b("El nombre del plan es obligatorio.");return}_(!0);const j={name:r,description:a,targetCriteria:{minAgeDays:o?parseInt(o,10):void 0,maxAgeDays:u?parseInt(u,10):void 0,categories:Array.from(f),targetStatus:Array.from(p)}};try{await t(j)}catch(P){b("No se pudo guardar el plan."),console.error(P),_(!1)}};return l.jsxs("form",{onSubmit:E,className:"space-y-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Nombre del Plan"}),l.jsx("input",{id:"name",type:"text",value:r,onChange:A=>i(A.target.value),placeholder:"Ej: Protocolo Pre-parto",className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Descripción (Opcional)"}),l.jsx("input",{id:"description",type:"text",value:a,onChange:A=>s(A.target.value),placeholder:"Ej: Vacunación 30 días antes del parto",className:"w-full bg-zinc-800 p-3 rounded-xl"})]})]}),l.jsxs("fieldset",{className:"bg-black/20 rounded-xl p-4 border border-zinc-700",children:[l.jsx("legend",{className:"px-2 text-sm font-semibold text-zinc-300",children:"Criterios de Aplicación (Opcional)"}),l.jsxs("div",{className:"space-y-4 pt-2",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"minAge",className:"block text-xs font-medium text-zinc-400 mb-1",children:"Edad Mínima (días)"}),l.jsx("input",{id:"minAge",type:"number",value:o,onChange:A=>c(A.target.value),placeholder:"Ej: 90",className:"w-full bg-zinc-800 p-2 rounded-lg"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"maxAge",className:"block text-xs font-medium text-zinc-400 mb-1",children:"Edad Máxima (días)"}),l.jsx("input",{id:"maxAge",type:"number",value:u,onChange:A=>d(A.target.value),placeholder:"Ej: 210",className:"w-full bg-zinc-800 p-2 rounded-lg"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-zinc-400 mb-2",children:"Estado Reproductivo"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:nke.map(A=>l.jsx("button",{type:"button",onClick:()=>T(A),className:`px-3 py-1 text-sm font-semibold rounded-full transition-colors ${p.has(A)?"bg-pink-500 text-white":"bg-zinc-700 text-zinc-300"}`,children:A},A))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-zinc-400 mb-2",children:"Categorías Zootécnicas"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:tke.map(A=>l.jsx("button",{type:"button",onClick:()=>S(A),className:`px-3 py-1 text-sm font-semibold rounded-full transition-colors ${f.has(A)?"bg-teal-500 text-white":"bg-zinc-700 text-zinc-300"}`,children:A},A))})]})]})]}),v&&l.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[l.jsx(Ut,{size:18}),l.jsx("span",{children:v})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:x,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:x?"Guardando...":"Guardar Plan"})]})]})},ike=({plan:t,onClick:e,onEdit:n,onDelete:r})=>{const i=fu(),a=k.useRef(!1),s=(o,c)=>{const u=c.offset.x,d=c.velocity.x;if(Math.abs(u)<5){e();return}u<-160/2||d<-500?i.start({x:-160}):i.start({x:0}),setTimeout(()=>{a.current=!1},100)};return l.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-brand-glass border border-brand-border",children:[l.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:[l.jsxs("button",{onClick:n,onPointerDown:o=>o.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[l.jsx(Tl,{size:22}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Editar"})]}),l.jsxs("button",{onClick:r,onPointerDown:o=>o.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-red text-white",children:[l.jsx(fo,{size:22}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Eliminar"})]})]}),l.jsx(po.div,{drag:"x",dragConstraints:{left:-160,right:0},dragElastic:.1,onDragStart:()=>{a.current=!0},onDragEnd:s,onTap:()=>{a.current||e()},animate:i,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-pointer bg-ios-modal-bg p-4",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:t.name}),l.jsx("p",{className:"text-sm text-zinc-400 mt-1",children:t.description})]}),l.jsx(Pr,{className:"text-zinc-600"})]})})]})};function ake({navigateTo:t}){const{healthPlans:e,addHealthPlan:n,updateHealthPlan:r,deleteHealthPlan:i}=Ge(),[a,s]=k.useState(!1),[o,c]=k.useState(void 0),[u,d]=k.useState(null),f=v=>{c(v),s(!0)},h=()=>{s(!1),c(void 0)},p=async v=>{o!=null&&o.id?await r(o.id,v):await n(v),h()},y=async()=>{u!=null&&u.id&&await i(u.id),d(null)};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4",children:[l.jsxs("header",{className:"text-center",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Planificador Sanitario"}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Define tus Protocolos y Planes"})]}),l.jsxs("button",{onClick:()=>f(),className:"w-full flex items-center justify-center gap-2 bg-teal-600 hover:bg-teal-500 text-white font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[l.jsx(ur,{size:18})," Crear Nuevo Plan Sanitario"]}),l.jsx("div",{className:"space-y-3 pt-4",children:e.length>0?e.map(v=>l.jsx(ike,{plan:v,onClick:()=>t({name:"plan-detail",planId:v.id}),onEdit:()=>f(v),onDelete:()=>d(v)},v.id)):l.jsxs("div",{className:"text-center py-10 bg-brand-glass rounded-2xl flex flex-col items-center gap-4",children:[l.jsx(hA,{size:48,className:"text-zinc-600"}),l.jsx("p",{className:"text-zinc-500",children:"Aún no has creado ningún plan sanitario."}),l.jsx("p",{className:"text-zinc-500 text-sm",children:"Usa el botón de arriba para empezar a definir tus protocolos."})]})})]}),l.jsx(st,{isOpen:a,onClose:h,title:o?"Editar Plan Sanitario":"Crear Nuevo Plan Sanitario",children:l.jsx(rke,{onSave:p,onCancel:h,existingPlan:o})}),l.jsx(jb,{isOpen:!!u,onClose:()=>d(null),onConfirm:y,title:`Eliminar Plan "${u==null?void 0:u.name}"`,message:"¿Estás seguro? Al eliminar el plan, también se eliminarán todas sus tareas asociadas. Esta acción no se puede deshacer."})]})}const UM=(t,e,n)=>{const r=(n-1)*7+1;return new Date(Date.UTC(t,e-1,r))},ske=()=>{const{animals:t,healthPlans:e,healthPlanTasks:n,healthEvents:r,parturitions:i}=Ge(),{forecastBySeason:a}=NE(),s=k.useMemo(()=>{const c=new Date;c.setUTCHours(0,0,0,0);const u=c.getUTCFullYear(),d=[],f=t.filter(h=>h.status==="Activo"&&!h.isReference);for(const h of f){const p=fs(h.birthDate);if(p<0)continue;const y=e.filter(v=>{const{minAgeDays:b,maxAgeDays:x,categories:_,targetStatus:S}=v.targetCriteria,T=yu(h,i),E=(!b||p>=b)&&(!x||p<=x),A=!_||_.length===0||_.includes(T),j=!S||S.length===0||S.includes(h.reproductiveStatus);return E&&A&&j});for(const v of y){const b=n.filter(x=>x.healthPlanId===v.id);for(const x of b){let _=null,S=null;if(x.trigger.type==="age"&&x.trigger.days){const A=new Date(h.birthDate+"T00:00:00Z");A.setUTCDate(A.getUTCDate()+x.trigger.days),_=A,S=`${h.id}-${x.id}`}else if(x.trigger.type==="fixed_date_period"&&x.trigger.month&&x.trigger.week){const A=UM(u,x.trigger.month,x.trigger.week);if(_=A,S=`${h.id}-${x.id}-${u}`,(A.getTime()-c.getTime())/(1e3*60*60*24)>90){const j=UM(u-1,x.trigger.month,x.trigger.week),P=`${h.id}-${x.id}-${u-1}`;r.some(D=>D.animalId===h.id&&D.taskId===x.id&&new Date(D.date).getUTCFullYear()===u-1)||(_=j,S=P)}}else if(x.trigger.type==="birthing_season_event"&&x.trigger.offsetDays!==void 0){const A=a.find(j=>j.events.some(P=>P.animal.id===h.id));if(A&&A.projectedStartDate){const j=new Date(A.projectedStartDate);j.setUTCDate(j.getUTCDate()+x.trigger.offsetDays),_=j,S=`${h.id}-${x.id}-${A.seasonId}`}}if(!_||!S)continue;_.setUTCHours(0,0,0,0);const T=r.some(A=>A.animalId!==h.id||A.taskId!==x.id?!1:x.trigger.type==="age"?!0:x.trigger.type==="fixed_date_period"||x.trigger.type==="birthing_season_event"?new Date(A.date).getUTCFullYear()===_.getUTCFullYear():!1),E=Math.ceil((_.getTime()-c.getTime())/(1e3*60*60*24));if(!T&&E<90){let A="Próxima";E<0?A="Atrasada":E===0&&(A="Para Hoy"),d.push({key:S,animal:h,plan:v,task:x,dueDate:_,status:A})}}}}return d.sort((h,p)=>h.dueDate.getTime()-p.dueDate.getTime())},[t,e,n,r,i,a]);return{...k.useMemo(()=>({overdue:s.filter(c=>c.status==="Atrasada"),today:s.filter(c=>c.status==="Para Hoy"),upcoming:s.filter(c=>c.status==="Próxima")}),[s]),allTasks:s}},oke=({task:t,onSave:e,onCancel:n})=>{const{products:r,bodyWeighings:i,addHealthEvent:a}=Ge(),[s,o]=k.useState(new Date().toISOString().split("T")[0]),[c,u]=k.useState(t.task.productId),[d,f]=k.useState(""),[h,p]=k.useState(0),[y,v]=k.useState(""),[b,x]=k.useState(null),[_,S]=k.useState(!1),T=k.useMemo(()=>r.find(A=>A.id===c),[r,c]);k.useEffect(()=>{if(T){const A=i.filter(M=>M.animalId===t.animal.id).sort((M,z)=>new Date(z.date).getTime()-new Date(M.date).getTime())[0],P=((A==null?void 0:A.kg)||50)/10*T.dosagePer10Kg;f(P.toFixed(2));const O=T.totalCost/T.totalVolume,D=P*O;p(parseFloat(D.toFixed(3)))}},[T,t.animal.id,i]);const E=async A=>{if(A.preventDefault(),x(null),!T){x("Por favor, selecciona un producto.");return}S(!0);const j=parseFloat(d);if(isNaN(j)||j<=0){x("La dosis aplicada debe ser un número válido."),S(!1);return}try{await a({animalId:t.animal.id,date:s,taskId:t.task.id,type:t.task.type,productUsed:T.name,doseApplied:j,unit:T.unit,calculatedCost:h,notes:y||void 0}),e()}catch(P){x("No se pudo guardar el evento."),console.error(P)}finally{S(!1)}};return l.jsxs("form",{onSubmit:E,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-white",children:t.animal.id}),l.jsx("p",{className:"text-zinc-400",children:t.task.name})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha de Aplicación"}),l.jsx("input",{id:"date",type:"date",value:s,onChange:A=>o(A.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"product",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Producto Utilizado"}),l.jsx("select",{id:"product",value:c,onChange:A=>u(A.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0,children:r.map(A=>l.jsx("option",{value:A.id,children:A.name},A.id))})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"dose",className:"block text-sm font-medium text-zinc-400 mb-1",children:["Dosis Sugerida (",T==null?void 0:T.unit,")"]}),l.jsx("input",{id:"dose",type:"number",step:"0.1",value:d,onChange:A=>f(A.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-zinc-400 mb-1",children:"Costo Estimado"}),l.jsxs("div",{className:"w-full bg-zinc-800 p-3 rounded-xl text-zinc-300",children:["$",h.toFixed(2)]})]}),l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Notas (Opcional)"}),l.jsx("textarea",{id:"notes",value:y,onChange:A=>v(A.target.value),rows:2,placeholder:"Ej: El animal presentó fiebre...",className:"w-full bg-zinc-800 p-3 rounded-xl"})]})]}),b&&l.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[l.jsx(Ut,{size:18}),l.jsx("span",{children:b})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:n,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:_,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:_?"Guardando...":"Confirmar Registro"})]})]})},lke=["Tratamiento Específico","Desparasitación","Vacunación","Vitaminas","Minerales","Control"],cke=({onSaveSuccess:t,onCancel:e})=>{const{animals:n,products:r,addHealthEvent:i,parturitions:a,serviceRecords:s,breedingSeasons:o,sireLots:c}=Ge(),[u,d]=k.useState([]),[f,h]=k.useState(new Date().toISOString().split("T")[0]),[p,y]=k.useState("Tratamiento Específico"),[v,b]=k.useState(""),[x,_]=k.useState(""),[S,T]=k.useState(""),[E,A]=k.useState(!1),[j,P]=k.useState(!1),[O,D]=k.useState(null),[M,z]=k.useState(null),L=k.useMemo(()=>r.find(W=>W.id===v),[r,v]),te=W=>{d(W),A(!1)},X=async W=>{if(W.preventDefault(),D(null),z(null),u.length===0){D("Debes seleccionar al menos un animal.");return}if(!v||!L){D("Debes seleccionar un producto.");return}const B=parseFloat(x);if(isNaN(B)||B<=0){D("La dosis debe ser un número válido y mayor que cero.");return}P(!0);const F=L.totalCost/L.totalVolume,q=B*F;try{const ae=u.map(ce=>i({animalId:ce,date:f,type:p,productUsed:L.name,doseApplied:B,unit:L.unit,calculatedCost:q,notes:S||void 0}));await Promise.all(ae),z(`${u.length} evento(s) de salud registrados con éxito.`),setTimeout(()=>{t()},1500)}catch(ae){D("No se pudo guardar el evento de salud."),console.error(ae)}finally{P(!1)}};return l.jsxs(l.Fragment,{children:[l.jsxs("form",{onSubmit:X,className:"space-y-4",children:[l.jsxs("button",{type:"button",onClick:()=>A(!0),className:"w-full bg-zinc-800 p-4 rounded-xl text-lg flex justify-between items-center text-left",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(qc,{size:20,className:"text-zinc-400"}),l.jsx("span",{className:u.length>0?"text-white":"text-zinc-500",children:u.length>0?`${u.length} animales seleccionados`:"Seleccionar Animal(es)..."})]}),l.jsx(Pl,{className:"text-brand-orange"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Fecha"}),l.jsx("input",{id:"date",type:"date",value:f,onChange:W=>h(W.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"taskType",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Tipo"}),l.jsx("select",{id:"taskType",value:p,onChange:W=>y(W.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0,children:lke.map(W=>l.jsx("option",{value:W,children:W},W))})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"product",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Producto Utilizado"}),l.jsxs("select",{id:"product",value:v,onChange:W=>b(W.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0,children:[l.jsx("option",{value:"",children:"Seleccionar producto..."}),r.map(W=>l.jsx("option",{value:W.id,children:W.name},W.id))]})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"dose",className:"block text-sm font-medium text-zinc-400 mb-1",children:["Dosis Aplicada (",(L==null?void 0:L.unit)||"unidad",")"]}),l.jsx("input",{id:"dose",type:"number",step:"0.1",value:x,onChange:W=>_(W.target.value),placeholder:"Ej: 2.5",className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0}),l.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"La misma dosis se aplicará a todos los animales seleccionados."})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Notas (Opcional)"}),l.jsx("textarea",{id:"notes",value:S,onChange:W=>T(W.target.value),rows:2,placeholder:"Ej: Tratamiento por herida en la pata delantera.",className:"w-full bg-zinc-800 p-3 rounded-xl"})]}),O&&l.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[l.jsx(Ut,{size:18})," ",l.jsx("span",{children:O})]}),M&&l.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-green-500/20 text-brand-green",children:[l.jsx(Jr,{size:18})," ",l.jsx("span",{children:M})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:e,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:j,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:j?"Guardando...":"Guardar Registro"})]})]}),l.jsx(_b,{isOpen:E,onClose:()=>A(!1),onSelect:te,animals:n,parturitions:a,serviceRecords:s,breedingSeasons:o,sireLots:c,title:"Seleccionar Animales"})]})},uke=({task:t,onRegisterClick:e})=>{const{animal:n,task:r,dueDate:i}=t;return l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border flex justify-between items-center",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("p",{className:"font-bold text-lg text-white",children:n.id}),l.jsx("p",{className:"text-sm text-zinc-300",children:r.name}),l.jsxs("p",{className:"text-xs text-zinc-500 mt-1",children:["Plan: ",t.plan.name]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-sm font-semibold text-white",children:i.toLocaleDateString("es-VE",{day:"2-digit",month:"2-digit"})}),l.jsx("p",{className:"text-xs text-zinc-400",children:i.toLocaleDateString("es-VE",{weekday:"short"})})]}),l.jsx("button",{onClick:()=>e(t),className:"bg-brand-green hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors text-sm",children:"Registrar"})]})]})},m1=({title:t,tasks:e,icon:n,colorClass:r,onRegisterClick:i})=>e.length===0?null:l.jsxs("div",{className:"space-y-3",children:[l.jsxs("h3",{className:`flex items-center gap-2 text-lg font-semibold ${r}`,children:[l.jsx(n,{size:20}),t," (",e.length,")"]}),l.jsx("div",{className:"space-y-2",children:e.map(a=>l.jsx(uke,{task:a,onRegisterClick:i},a.key))})]});function WM(){const{overdue:t,today:e,upcoming:n,allTasks:r}=ske(),[i,a]=k.useState(null),[s,o]=k.useState(!1),c=()=>{a(null)};return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 animate-fade-in px-4",children:[l.jsxs("header",{className:"text-center",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Agenda Sanitaria"}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Tareas de salud pendientes"})]}),l.jsxs("button",{onClick:()=>o(!0),className:"w-full flex items-center justify-center gap-2 bg-brand-blue/20 border border-brand-blue text-brand-blue hover:bg-brand-blue/30 font-bold py-3 px-4 rounded-xl transition-colors text-base",children:[l.jsx(ur,{size:18})," Registrar Tratamiento No Planificado"]}),r.length===0?l.jsxs("div",{className:"text-center py-10 bg-brand-glass rounded-2xl flex flex-col items-center gap-4",children:[l.jsx(D_,{size:48,className:"text-zinc-600"}),l.jsx("p",{className:"text-zinc-400 font-semibold text-lg",children:"¡Todo al día!"}),l.jsx("p",{className:"text-zinc-500 text-sm",children:"No hay tareas sanitarias programadas en tu agenda."})]}):l.jsxs("div",{className:"space-y-6",children:[l.jsx(m1,{title:"Atrasadas",tasks:t,icon:Ut,colorClass:"text-brand-red",onRegisterClick:a}),l.jsx(m1,{title:"Para Hoy",tasks:e,icon:D_,colorClass:"text-brand-green",onRegisterClick:a}),l.jsx(m1,{title:"Próximas",tasks:n,icon:hL,colorClass:"text-zinc-300",onRegisterClick:a})]})]}),i&&l.jsx(st,{isOpen:!!i,onClose:()=>a(null),title:`Registrar: ${i.task.name}`,children:l.jsx(oke,{task:i,onSave:c,onCancel:()=>a(null)})}),l.jsx(st,{isOpen:s,onClose:()=>o(!1),title:"Registrar Tratamiento No Planificado",children:l.jsx(cke,{onSaveSuccess:()=>o(!1),onCancel:()=>o(!1)})})]})}const dke=["Desparasitación","Vacunación","Vitaminas","Minerales","Control"],fke=[{value:1,label:"Enero"},{value:2,label:"Febrero"},{value:3,label:"Marzo"},{value:4,label:"Abril"},{value:5,label:"Mayo"},{value:6,label:"Junio"},{value:7,label:"Julio"},{value:8,label:"Agosto"},{value:9,label:"Septiembre"},{value:10,label:"Octubre"},{value:11,label:"Noviembre"},{value:12,label:"Diciembre"}],hke=[{value:1,label:"1ra Semana"},{value:2,label:"2da Semana"},{value:3,label:"3ra Semana"},{value:4,label:"4ta Semana"}],pke=({planId:t,onSave:e,onCancel:n,existingTask:r})=>{const{products:i}=Ge(),[a,s]=k.useState(""),[o,c]=k.useState("Control"),[u,d]=k.useState(""),[f,h]=k.useState("age"),[p,y]=k.useState(""),[v,b]=k.useState("1"),[x,_]=k.useState("1"),[S,T]=k.useState(""),[E,A]=k.useState(null),[j,P]=k.useState(!1);k.useEffect(()=>{r&&(s(r.name),c(r.type),d(r.productId),h(r.trigger.type),r.trigger.type==="age"&&y(String(r.trigger.days||"")),r.trigger.type==="fixed_date_period"&&(b(String(r.trigger.month||"1")),_(String(r.trigger.week||"1"))),r.trigger.type==="birthing_season_event"&&T(String(r.trigger.offsetDays||"")))},[r]);const O=async D=>{if(D.preventDefault(),A(null),P(!0),!a.trim()||!u){A("El nombre y el producto son obligatorios."),P(!1);return}let M;if(f==="age"){if(!p||parseInt(p,10)<=0){A("Para el disparador por edad, los días deben ser un número válido."),P(!1);return}M={type:"age",days:parseInt(p,10)}}else if(f==="fixed_date_period")M={type:"fixed_date_period",month:parseInt(v,10),week:parseInt(x,10)};else{const L=parseInt(S,10);if(isNaN(L)){A("Debe introducir un número válido de días (positivo o negativo)."),P(!1);return}M={type:"birthing_season_event",offsetDays:L}}const z={healthPlanId:t,name:a,type:o,productId:u,trigger:M};try{await e(z)}catch(L){A("No se pudo guardar la tarea."),console.error(L)}finally{P(!1)}};return l.jsxs("form",{onSubmit:O,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"taskName",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Nombre de la Tarea"}),l.jsx("input",{id:"taskName",type:"text",value:a,onChange:D=>s(D.target.value),placeholder:"Ej: Vacuna Pre-parto Clostridial",className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"taskType",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Tipo de Tarea"}),l.jsx("select",{id:"taskType",value:o,onChange:D=>c(D.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0,children:dke.map(D=>l.jsx("option",{value:D,children:D},D))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"product",className:"block text-sm font-medium text-zinc-400 mb-1",children:"Producto a Utilizar"}),l.jsxs("select",{id:"product",value:u,onChange:D=>d(D.target.value),className:"w-full bg-zinc-800 p-3 rounded-xl",required:!0,children:[l.jsx("option",{value:"",children:"Seleccionar producto..."}),i.map(D=>l.jsx("option",{value:D.id,children:D.name},D.id))]})]})]}),l.jsxs("fieldset",{className:"bg-black/20 rounded-xl p-4 border border-zinc-700",children:[l.jsx("legend",{className:"px-2 text-sm font-semibold text-zinc-300",children:"Disparador (Trigger)"}),l.jsxs("div",{className:"pt-2 space-y-4",children:[l.jsxs("select",{value:f,onChange:D=>h(D.target.value),className:"w-full bg-zinc-800 p-2 rounded-lg",children:[l.jsx("option",{value:"age",children:"Por Edad del Animal"}),l.jsx("option",{value:"fixed_date_period",children:"Por Fecha Fija Anual"}),l.jsx("option",{value:"birthing_season_event",children:"Relativo a Temporada de Partos"})]}),f==="age"&&l.jsxs("div",{className:"animate-fade-in",children:[l.jsx("label",{htmlFor:"triggerDays",className:"block text-xs font-medium text-zinc-400 mb-1",children:"Aplicar a los (días de edad)"}),l.jsx("input",{id:"triggerDays",type:"number",value:p,onChange:D=>y(D.target.value),placeholder:"Ej: 60",className:"w-full bg-zinc-800 p-2 rounded-lg",required:!0})]}),f==="fixed_date_period"&&l.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-fade-in",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"triggerMonth",className:"block text-xs font-medium text-zinc-400 mb-1",children:"Mes"}),l.jsx("select",{id:"triggerMonth",value:v,onChange:D=>b(D.target.value),className:"w-full bg-zinc-800 p-2 rounded-lg",children:fke.map(D=>l.jsx("option",{value:D.value,children:D.label},D.value))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"triggerWeek",className:"block text-xs font-medium text-zinc-400 mb-1",children:"Semana"}),l.jsx("select",{id:"triggerWeek",value:x,onChange:D=>_(D.target.value),className:"w-full bg-zinc-800 p-2 rounded-lg",children:hke.map(D=>l.jsx("option",{value:D.value,children:D.label},D.value))})]})]}),f==="birthing_season_event"&&l.jsxs("div",{className:"animate-fade-in",children:[l.jsx("label",{htmlFor:"triggerOffsetDays",className:"block text-xs font-medium text-zinc-400 mb-1",children:"Días antes (-) / después (+) del inicio de la temporada"}),l.jsx("input",{id:"triggerOffsetDays",type:"number",value:S,onChange:D=>T(D.target.value),placeholder:"Ej: -30 (para 30 días antes)",className:"w-full bg-zinc-800 p-2 rounded-lg",required:!0})]})]})]}),E&&l.jsxs("div",{className:"flex items-center space-x-2 p-3 rounded-lg text-sm bg-red-500/20 text-brand-red",children:[l.jsx(Ut,{size:18})," ",l.jsx("span",{children:E})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[l.jsx("button",{type:"button",onClick:n,className:"px-5 py-2 bg-zinc-600 hover:bg-zinc-500 font-semibold rounded-lg",children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:j,className:"px-5 py-2 bg-brand-green hover:bg-green-600 text-white font-bold rounded-lg disabled:opacity-50",children:j?"Guardando...":"Guardar Tarea"})]})]})},mke=({task:t,onEdit:e,onDelete:n})=>{const{products:r}=Ge(),i=r.find(c=>c.id===t.productId),a=fu(),s=k.useRef(!1),o=(c,u)=>{const d=u.offset.x,f=u.velocity.x;d<-160/2||f<-500?a.start({x:-160}):a.start({x:0}),setTimeout(()=>{s.current=!1},100)};return l.jsxs("div",{className:"relative w-full overflow-hidden rounded-2xl bg-black/20 border border-zinc-700",children:[l.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center z-0 h-full",children:[l.jsxs("button",{onClick:e,onPointerDown:c=>c.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-blue text-white",children:[l.jsx(Tl,{size:20}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Editar"})]}),l.jsxs("button",{onClick:n,onPointerDown:c=>c.stopPropagation(),className:"h-full w-[80px] flex flex-col items-center justify-center bg-brand-red text-white",children:[l.jsx(fo,{size:20}),l.jsx("span",{className:"text-xs mt-1 font-semibold",children:"Eliminar"})]})]}),l.jsx(po.div,{drag:"x",dragConstraints:{left:-160,right:0},dragElastic:.1,onDragStart:()=>{s.current=!0},onDragEnd:o,animate:a,transition:{type:"spring",stiffness:400,damping:40},className:"relative w-full z-10 cursor-grab bg-ios-modal-bg/50",children:l.jsxs("div",{className:"p-4",children:[l.jsx("div",{className:"flex justify-between items-start",children:l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-lg text-white",children:t.name}),l.jsx("p",{className:"text-sm text-teal-300",children:t.type}),l.jsxs("p",{className:"text-xs text-zinc-400 mt-1",children:["Producto: ",(i==null?void 0:i.name)||"No especificado"]})]})}),l.jsxs("div",{className:"mt-3 pt-3 border-t border-zinc-700 flex items-center text-zinc-300",children:[l.jsx(xx,{size:16,className:"mr-2"}),l.jsxs("span",{className:"text-sm",children:["Se activa a los ",l.jsx("span",{className:"font-bold text-white",children:t.trigger.days})," días de edad"]})]})]})})]})};function gke({planId:t,onBack:e}){var S;const{healthPlans:n,healthPlanTasks:r,addHealthPlanTask:i,updateHealthPlanTask:a,deleteHealthPlanTask:s}=Ge(),[o,c]=k.useState(!1),[u,d]=k.useState(void 0),[f,h]=k.useState(null),p=k.useMemo(()=>n.find(T=>T.id===t),[n,t]),y=k.useMemo(()=>r.filter(T=>T.healthPlanId===t).sort((T,E)=>(T.trigger.days||0)-(E.trigger.days||0)),[r,t]),v=T=>{d(T),c(!0)},b=()=>{c(!1),d(void 0)},x=async T=>{u!=null&&u.id?await a(u.id,T):await i(T),b()},_=async()=>{f!=null&&f.id&&await s(f.id),h(null)};return p?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 pb-12 animate-fade-in",children:[l.jsxs("header",{className:"flex items-center pt-8 pb-4 px-4",children:[l.jsx("button",{onClick:e,className:"p-2 -ml-2 text-zinc-400 hover:text-white transition-colors",children:l.jsx(Zn,{size:24})}),l.jsxs("div",{className:"text-center flex-grow",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:p.name}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Detalles del Plan Sanitario"})]}),l.jsx("div",{className:"w-8"})]}),l.jsx("div",{className:"px-4",children:l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border space-y-2",children:[l.jsx("h3",{className:"text-sm font-semibold text-zinc-400",children:"Descripción"}),l.jsx("p",{className:"text-white",children:p.description||"Sin descripción."}),l.jsx("h3",{className:"text-sm font-semibold text-zinc-400 pt-2",children:"Criterios de Aplicación"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[p.targetCriteria.minAgeDays&&l.jsxs("span",{className:"bg-zinc-700 text-xs font-semibold px-2 py-1 rounded-full",children:["Desde ",p.targetCriteria.minAgeDays," días"]}),p.targetCriteria.maxAgeDays&&l.jsxs("span",{className:"bg-zinc-700 text-xs font-semibold px-2 py-1 rounded-full",children:["Hasta ",p.targetCriteria.maxAgeDays," días"]}),(S=p.targetCriteria.categories)==null?void 0:S.map(T=>l.jsx("span",{className:"bg-zinc-700 text-xs font-semibold px-2 py-1 rounded-full",children:T},T))]})]})}),l.jsxs("div",{className:"space-y-4 px-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-semibold text-zinc-300",children:"Tareas del Plan"}),l.jsxs("button",{onClick:()=>v(),className:"flex items-center gap-2 bg-teal-600 hover:bg-teal-500 text-white font-bold py-2 px-3 rounded-lg transition-colors text-sm",children:[l.jsx(ur,{size:16})," Añadir Tarea"]})]}),y.length>0?l.jsx("div",{className:"space-y-3",children:y.map(T=>l.jsx(mke,{task:T,onEdit:()=>v(T),onDelete:()=>h(T)},T.id))}):l.jsx("div",{className:"text-center py-10 bg-brand-glass rounded-2xl",children:l.jsx("p",{className:"text-zinc-500",children:"Este plan aún no tiene tareas."})})]})]}),l.jsx(st,{isOpen:o,onClose:b,title:u?"Editar Tarea":"Añadir Tarea al Plan",children:l.jsx(pke,{planId:p.id,onSave:x,onCancel:b,existingTask:u})}),l.jsx(jb,{isOpen:!!f,onClose:()=>h(null),onConfirm:_,title:`Eliminar Tarea "${f==null?void 0:f.name}"`,message:"¿Estás seguro de que quieres eliminar esta tarea del plan? Esta acción no se puede deshacer."})]}):l.jsxs("div",{className:"text-center p-10",children:[l.jsx("h1",{className:"text-2xl text-zinc-400",children:"Plan no encontrado."}),l.jsx("button",{onClick:e,className:"mt-4 text-brand-amber",children:"Volver al Planificador"})]})}const vke=()=>{const{healthEvents:t,animals:e}=Ge();return k.useMemo(()=>{if(t.length===0)return{totalCostLast30Days:0,avgCostPerAnimal:0,monthlyCosts:[],costsByCategory:[],topCostAnimals:[]};const r=new Date,i=new Date(r.getFullYear(),r.getMonth(),r.getDate()-30),s=t.filter(b=>new Date(b.date)>=i).reduce((b,x)=>b+x.calculatedCost,0),o=e.filter(b=>b.status==="Activo").length,c=t.reduce((b,x)=>b+x.calculatedCost,0),u=o>0?c/o:0,d=t.reduce((b,x)=>{const _=x.date.substring(0,7);return b[_]||(b[_]=0),b[_]+=x.calculatedCost,b},{}),f=Object.entries(d).map(([b,x])=>({name:b,total:x})).sort((b,x)=>b.name.localeCompare(x.name)),h=t.reduce((b,x)=>{const _=x.type;return b[_]||(b[_]=0),b[_]+=x.calculatedCost,b},{}),p=Object.entries(h).map(([b,x])=>({name:b,total:x})).sort((b,x)=>x.total-b.total),y=t.reduce((b,x)=>{const _=x.animalId;return b[_]||(b[_]=0),b[_]+=x.calculatedCost,b},{}),v=Object.entries(y).sort((b,x)=>x[1]-b[1]).slice(0,5).map(([b,x])=>({animalId:b,total:x}));return{totalCostLast30Days:s,avgCostPerAnimal:u,monthlyCosts:f,costsByCategory:p,topCostAnimals:v}},[t,e])},KM=({title:t,value:e,unit:n,icon:r})=>l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[l.jsx(r,{size:14}),l.jsx("span",{children:t})]}),l.jsxs("p",{className:"text-3xl font-bold text-white mt-1",children:[e," ",l.jsx("span",{className:"text-xl text-zinc-400",children:n})]})]}),qM=["#34C759","#FF9500","#007AFF","#AF52DE","#FF3B30","#5E5CE6"];function yke(){const{totalCostLast30Days:t,avgCostPerAnimal:e,monthlyCosts:n,costsByCategory:r,topCostAnimals:i}=vke(),a=s=>new Date(s+"-02").toLocaleString("es-VE",{month:"short"});return l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-4 animate-fade-in px-4",children:[l.jsxs("header",{className:"text-center",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Análisis de Costos"}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Módulo StockCare"})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsx(KM,{title:"Costo (Últimos 30 días)",value:`$${t.toFixed(2)}`,icon:Wc}),l.jsx(KM,{title:"Costo Prom./Animal",value:`$${e.toFixed(2)}`,icon:gs})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-white mb-4",children:[l.jsx(yx,{size:20})," Costo Mensual"]}),l.jsx("div",{className:"w-full h-56",children:l.jsx(zn,{children:l.jsxs(fi,{data:n,margin:{top:5,right:10,left:-20,bottom:5},children:[l.jsx(Sn,{dataKey:"name",tickFormatter:a,tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(kn,{tick:{fill:"rgba(255,255,255,0.7)",fontSize:12}}),l.jsx(Mt,{cursor:{fill:"rgba(255, 255, 255, 0.1)"},contentStyle:{backgroundColor:"rgba(44, 44, 46, 0.8)",border:"1px solid #444",borderRadius:"12px"}}),l.jsx(Fn,{dataKey:"total",name:"Costo Total",fill:"#2dd4bf",radius:[4,4,0,0]})]})})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-white mb-4",children:[l.jsx(CG,{size:20})," Costos por Categoría"]}),l.jsx("div",{className:"w-full h-48",children:l.jsx(zn,{children:l.jsxs(CS,{children:[l.jsx(Da,{data:r,dataKey:"total",nameKey:"name",cx:"50%",cy:"50%",outerRadius:60,fill:"#8884d8",children:r.map((s,o)=>l.jsx(Oa,{fill:qM[o%qM.length]},`cell-${o}`))}),l.jsx(Mt,{contentStyle:{backgroundColor:"rgba(44, 44, 46, 0.8)",border:"1px solid #444",borderRadius:"12px"}}),l.jsx(Ca,{iconSize:10,wrapperStyle:{fontSize:"12px"}})]})})})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Top 5 Animales (Costo)"}),l.jsx("div",{className:"space-y-2",children:i.length>0?i.map((s,o)=>l.jsxs("div",{className:"flex justify-between items-center text-sm bg-black/20 p-2 rounded-md",children:[l.jsxs("span",{className:"font-semibold text-white",children:[o+1,". ",s.animalId]}),l.jsxs("span",{className:"font-bold text-teal-300",children:["$",s.total.toFixed(2)]})]},s.animalId)):l.jsx("p",{className:"text-sm text-zinc-500 text-center pt-8",children:"No hay datos suficientes."})})]})]})]})}function xke({onSwitchModule:t}){const{syncStatus:e}=Ge(),[n,r]=k.useState({name:"agenda"}),[i,a]=k.useState([]),s=[{id:"agenda",label:"Agenda",icon:D_},{id:"planes",label:"Planes",icon:hA},{id:"inventario",label:"Inventario",icon:_x},{id:"costos",label:"Costos",icon:Wc}],o=f=>{a(h=>[...h,n]),r(f)},c=()=>{const f=i.pop();f?(a([...i]),r(f)):t("rebano")},u=f=>{a([]),r({name:f})},d=()=>{switch(n.name){case"inventario":return l.jsx(eke,{});case"agenda":return l.jsx(WM,{});case"planes":return l.jsx(ake,{navigateTo:o});case"plan-detail":return l.jsx(gke,{planId:n.planId,onBack:c});case"costos":return l.jsx(yke,{});default:return l.jsx(WM,{})}};return l.jsxs("div",{className:"min-h-screen animate-fade-in text-white flex flex-col",children:[l.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-gray-900/80 backdrop-blur-lg border-b border-brand-border",children:l.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[l.jsx("button",{onClick:c,className:"p-2 -ml-2 text-zinc-400 hover:text-white","aria-label":"Atrás",children:l.jsx(Zn,{size:24})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(wx,{className:"text-teal-400"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-bold text-white leading-none",children:"GanaderoOS"}),l.jsx("p",{className:"text-xs text-zinc-400 leading-none",children:"StockCare"})]})]}),l.jsx("div",{className:"w-8 flex justify-end",children:l.jsx(Sg,{status:e})})]})}),l.jsx("main",{className:"flex-grow pt-16 pb-24",children:d()}),l.jsx(_g,{onSwitchModule:t}),l.jsx("nav",{className:"flex-shrink-0 fixed bottom-0 left-0 right-0 bg-black/30 backdrop-blur-xl border-t border-white/20 flex justify-around",children:s.map(f=>l.jsxs("button",{onClick:()=>u(f.id),className:`flex flex-col items-center justify-center p-3 w-full transition-colors ${n.name===f.id?"text-teal-400":"text-gray-400 hover:text-teal-400"}`,children:[l.jsx(f.icon,{className:"w-6 h-6 mb-1"}),l.jsx("span",{className:"text-xs font-semibold",children:f.label})]},f.id))})]})}const HM=.5,bke=()=>{const{animals:t,healthEvents:e,weighings:n,parturitions:r}=Ge();return k.useMemo(()=>{const o=[...t.filter(p=>p.status==="Activo"&&p.sex==="Hembra").map(p=>{const y=e.filter(A=>A.animalId===p.id).reduce((A,j)=>A+j.calculatedCost,0),v=n.filter(A=>A.goatId===p.id),b=v.reduce((A,j)=>A+j.kg,0),x=b*HM;let _=null,S=0;const T=r.filter(A=>A.goatId===p.id);b>0&&T.length>0&&(S=T.reduce((j,P)=>{const O=v.filter(L=>new Date(L.date)>=new Date(P.parturitionDate));if(O.length===0)return j;const D=new Date(P.parturitionDate),z=(new Date(O.sort((L,te)=>new Date(te.date).getTime()-new Date(L.date).getTime())[0].date).getTime()-D.getTime())/(1e3*60*60*24);return j+z},0),_=y/b);const E=x-y;return{animalId:p.id,totalRevenue:x,totalCosts:y,netProfit:E,costPerLiter:_,totalKgProduced:b,lactationDays:S}})].sort((p,y)=>y.netProfit-p.netProfit),c=o.reduce((p,y)=>p+y.totalRevenue,0),u=o.reduce((p,y)=>p+y.totalCosts,0),d=c-u,f=o.filter(p=>p.costPerLiter!==null&&p.costPerLiter>0).map(p=>p.costPerLiter),h=f.length>0?f.reduce((p,y)=>p+y,0)/f.length:0;return{animalsByProfitability:o,totalFarmRevenue:c,totalFarmCosts:u,totalFarmNetProfit:d,averageCostPerLiter:h,assumedMilkPrice:HM}},[t,e,n,r])},yv=({title:t,value:e,unit:n,icon:r,colorClass:i})=>l.jsxs("div",{className:`bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border ${i||""}`,children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[l.jsx(r,{size:14}),l.jsx("span",{children:t})]}),l.jsxs("p",{className:"text-3xl font-bold text-white mt-1",children:[e," ",l.jsx("span",{className:"text-xl text-zinc-400",children:n})]})]}),GM=({animalData:t})=>{const e=t.netProfit>=0;return l.jsxs("div",{className:"w-full text-left bg-black/20 rounded-xl p-4 border border-zinc-700/80 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-xl text-white",children:t.animalId}),l.jsxs("div",{className:"flex items-center gap-4 text-xs text-zinc-400 mt-1",children:[l.jsxs("span",{children:["Ingresos: $",t.totalRevenue.toFixed(2)]}),l.jsxs("span",{children:["Costos: $",t.totalCosts.toFixed(2)]})]})]}),l.jsxs("div",{className:`text-right font-bold text-2xl ${e?"text-brand-green":"text-brand-red"}`,children:[e?"+":"","$",t.netProfit.toFixed(2)]})]})},wke=({active:t,payload:e})=>t&&e&&e.length?l.jsxs("div",{className:"bg-black/60 backdrop-blur-md p-2 rounded-lg border border-zinc-700 text-white text-sm",children:[l.jsx("p",{className:"font-bold",children:e[0].payload.animalId}),l.jsxs("p",{style:{color:e[0].fill},children:["Rentabilidad: $",e[0].value.toFixed(2)]})]}):null;function _ke(){const{animalsByProfitability:t,totalFarmRevenue:e,totalFarmCosts:n,totalFarmNetProfit:r,averageCostPerLiter:i,assumedMilkPrice:a}=bke(),s=t.slice(0,5),o=t.slice(-5).reverse();return t.length===0?l.jsxs("div",{className:"text-center py-10 bg-brand-glass rounded-2xl mx-4 flex flex-col items-center gap-4",children:[l.jsx(Wc,{size:48,className:"text-zinc-600"}),l.jsx("p",{className:"text-zinc-400 font-semibold text-lg",children:"No hay datos suficientes"}),l.jsx("p",{className:"text-zinc-500 text-sm max-w-xs",children:"Registra pesajes lecheros y eventos de salud con costos para empezar a ver el análisis económico."})]}):l.jsxs("div",{className:"w-full max-w-2xl mx-auto space-y-6 animate-fade-in px-4",children:[l.jsxs("header",{className:"text-center",children:[l.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white",children:"Análisis Económico"}),l.jsx("p",{className:"text-lg text-zinc-400",children:"Rentabilidad de la Finca"})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsx(yv,{title:"Ingresos Totales (Leche)",value:`$${e.toFixed(2)}`,icon:Qp,colorClass:"border-green-500/30"}),l.jsx(yv,{title:"Costos Totales (Sanidad)",value:`$${n.toFixed(2)}`,icon:Xp,colorClass:"border-red-500/30"})]}),l.jsxs("div",{className:`bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border ${r>=0?"border-green-500/50":"border-red-500/50"}`,children:[l.jsxs("div",{className:"flex items-center space-x-2 text-zinc-400 font-semibold text-xs uppercase",children:[l.jsx(Wc,{size:14}),l.jsx("span",{children:"Rentabilidad Neta (Ingresos - Costos)"})]}),l.jsxs("p",{className:`text-5xl font-bold mt-1 ${r>=0?"text-brand-green":"text-brand-red"}`,children:[r>=0?"+":"","$",r.toFixed(2)]})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsx(yv,{title:"Costo / Litro de Leche",value:`$${i.toFixed(3)}`,icon:cu}),l.jsx(yv,{title:"Precio Leche (Asumido)",value:`$${a.toFixed(2)}`,unit:"/Kg",icon:gs})]}),l.jsxs("div",{className:"bg-brand-glass backdrop-blur-xl rounded-2xl p-4 border border-brand-border",children:[l.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-white mb-4",children:[l.jsx(dG,{size:20})," Distribución de Rentabilidad"]}),l.jsx("div",{className:"w-full h-56",children:l.jsx(zn,{children:l.jsxs(fi,{data:t,margin:{top:5,right:0,left:0,bottom:5},children:[l.jsx(Sn,{dataKey:"animalId",tick:!1,axisLine:!1}),l.jsx(Mt,{content:l.jsx(wke,{}),cursor:{fill:"rgba(255, 255, 255, 0.1)"}}),l.jsx(Fn,{dataKey:"netProfit",children:t.map(c=>l.jsx(Oa,{fill:c.netProfit>=0?"#34C759":"#FF3B30"},c.animalId))})]})})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-xl font-semibold text-zinc-300",children:"Ranking de Rentabilidad"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("h4",{className:"font-semibold text-brand-green flex items-center gap-2",children:[l.jsx(Qp,{size:18})," Top 5 Animales Más Rentables"]}),s.map(c=>l.jsx(GM,{animalData:c},c.animalId))]}),l.jsxs("div",{className:"space-y-2 pt-4",children:[l.jsxs("h4",{className:"font-semibold text-brand-red flex items-center gap-2",children:[l.jsx(Xp,{size:18})," Top 5 Animales Menos Rentables"]}),o.map(c=>l.jsx(GM,{animalData:c},c.animalId))]})]})]})}function Ske({onSwitchModule:t}){const{syncStatus:e}=Ge();return l.jsxs("div",{className:"min-h-screen animate-fade-in text-white flex flex-col",children:[l.jsx("header",{className:"flex-shrink-0 fixed top-0 left-0 right-0 z-20 bg-gray-900/80 backdrop-blur-lg border-b border-brand-border",children:l.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between p-4 h-16",children:[l.jsx("button",{onClick:()=>t("rebano"),className:"p-2 -ml-2 text-zinc-400 hover:text-white","aria-label":"Salir del módulo",children:l.jsx(Zn,{size:24})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Wc,{className:"text-yellow-400"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-bold text-white leading-none",children:"GanaderoOS"}),l.jsx("p",{className:"text-xs text-zinc-400 leading-none",children:"Cents"})]})]}),l.jsx("div",{className:"w-8 flex justify-end",children:l.jsx(Sg,{status:e})})]})}),l.jsx("main",{className:"flex-grow pt-16 pb-24",children:l.jsx(_ke,{})}),l.jsx(_g,{onSwitchModule:t})]})}const jke=()=>l.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-[#1C1C1E] animate-fade-in",children:[l.jsxs("div",{className:"relative flex items-center justify-center w-24 h-24",children:[l.jsx(ig,{className:"text-brand-orange w-12 h-12"}),l.jsx("div",{className:"absolute inset-0",children:l.jsx(xL,{className:"w-24 h-24 text-zinc-700 animate-spin-slow"})})]}),l.jsx("p",{className:"mt-4 text-lg font-medium text-zinc-400 tracking-wider",children:"Cargando datos..."})]});function Ake(){const{currentUser:t,isLoading:e}=oL(),{isLoading:n}=Ge(),[r,i]=k.useState("rebano"),[a,s]=k.useState(null),[o,c]=k.useState({lactokeeper:"dashboard"}),u=k.useCallback(h=>{s(null),i(h)},[]),d=k.useCallback(h=>{s(h),i("rebano")},[]),f=k.useCallback(h=>{c(p=>({...p,lactokeeper:h}))},[]);if(e||t&&n)return l.jsx(jke,{});if(!t)return l.jsx(eY,{});switch(r){case"lactokeeper":return l.jsx(BNe,{initialPage:o.lactokeeper,onPageStateChange:f,navigateToRebano:d,onSwitchModule:u});case"kilos":return l.jsx(JNe,{navigateToRebano:d,onSwitchModule:u});case"salud":return l.jsx(xke,{onSwitchModule:u});case"cents":return l.jsx(Ske,{onSwitchModule:u});case"rebano":default:return l.jsx(PNe,{initialPage:a,onSwitchModule:u})}}g1.createRoot(document.getElementById("root")).render(l.jsx(H.StrictMode,{children:l.jsx(ZH,{children:l.jsx(iG,{children:l.jsx(Ake,{})})})}));
